var Xpe=Object.defineProperty;var Ype=(t,e,r)=>e in t?Xpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qpe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Tx=(t,e,r)=>(Ype(t,typeof e!="symbol"?e+"":e,r),r),fI=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ue=(t,e,r)=>(fI(t,e,"read from private field"),r?r.call(t):e.get(t)),jt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ct=(t,e,r,n)=>(fI(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var Ix=(t,e,r,n)=>({set _(i){Ct(t,e,i,r)},get _(){return ue(t,e,n)}}),Mr=(t,e,r)=>(fI(t,e,"access private method"),r);var Ymt=qpe((gs,ms)=>{function YY(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const WN=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return fu},get Circle(){return RVe},get Ellipse(){return NVe},get Image(){return FVe},get Line(){return BVe},get Marker(){return zVe},get Path(){return D6},get Polygon(){return XVe},get Polyline(){return YVe},get Rect(){return QVe},get Text(){return ZVe}},Symbol.toStringTag,{value:"Module"})),VN=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return wl},get Circle(){return rHe},get Dom(){return nHe},get Ellipse(){return iHe},get Image(){return aHe},get Line(){return oHe},get Marker(){return sHe},get Path(){return lHe},get Polygon(){return uHe},get Polyline(){return cHe},get Rect(){return hHe},get Text(){return gHe}},Symbol.toStringTag,{value:"Module"}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ms(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function su(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var qY={exports:{}},gM={},KY={exports:{}},Qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2=Symbol.for("react.element"),Kpe=Symbol.for("react.portal"),Qpe=Symbol.for("react.fragment"),Zpe=Symbol.for("react.strict_mode"),Jpe=Symbol.for("react.profiler"),eve=Symbol.for("react.provider"),tve=Symbol.for("react.context"),rve=Symbol.for("react.forward_ref"),nve=Symbol.for("react.suspense"),ive=Symbol.for("react.memo"),ave=Symbol.for("react.lazy"),C$=Symbol.iterator;function ove(t){return t===null||typeof t!="object"?null:(t=C$&&t[C$]||t["@@iterator"],typeof t=="function"?t:null)}var QY={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZY=Object.assign,JY={};function jm(t,e,r){this.props=t,this.context=e,this.refs=JY,this.updater=r||QY}jm.prototype.isReactComponent={};jm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eq(){}eq.prototype=jm.prototype;function HN(t,e,r){this.props=t,this.context=e,this.refs=JY,this.updater=r||QY}var XN=HN.prototype=new eq;XN.constructor=HN;ZY(XN,jm.prototype);XN.isPureReactComponent=!0;var k$=Array.isArray,tq=Object.prototype.hasOwnProperty,YN={current:null},rq={key:!0,ref:!0,__self:!0,__source:!0};function nq(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)tq.call(e,n)&&!rq.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:$2,type:t,key:a,ref:o,props:i,_owner:YN.current}}function sve(t,e){return{$$typeof:$2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qN(t){return typeof t=="object"&&t!==null&&t.$$typeof===$2}function lve(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var M$=/\/+/g;function hI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lve(""+t.key):e.toString(36)}function FE(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $2:case Kpe:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+hI(o,0):n,k$(i)?(r="",t!=null&&(r=t.replace(M$,"$&/")+"/"),FE(i,e,r,"",function(u){return u})):i!=null&&(qN(i)&&(i=sve(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(M$,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",k$(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+hI(a,s);o+=FE(a,e,r,l,i)}else if(l=ove(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+hI(a,s++),o+=FE(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ox(t,e,r){if(t==null)return t;var n=[],i=0;return FE(t,n,"","",function(a){return e.call(r,a,i++)}),n}function uve(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fo={current:null},BE={transition:null},cve={ReactCurrentDispatcher:fo,ReactCurrentBatchConfig:BE,ReactCurrentOwner:YN};Qr.Children={map:Ox,forEach:function(t,e,r){Ox(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ox(t,function(){e++}),e},toArray:function(t){return Ox(t,function(e){return e})||[]},only:function(t){if(!qN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qr.Component=jm;Qr.Fragment=Qpe;Qr.Profiler=Jpe;Qr.PureComponent=HN;Qr.StrictMode=Zpe;Qr.Suspense=nve;Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cve;Qr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ZY({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=YN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)tq.call(e,l)&&!rq.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:$2,type:t.type,key:i,ref:a,props:n,_owner:o}};Qr.createContext=function(t){return t={$$typeof:tve,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eve,_context:t},t.Consumer=t};Qr.createElement=nq;Qr.createFactory=function(t){var e=nq.bind(null,t);return e.type=t,e};Qr.createRef=function(){return{current:null}};Qr.forwardRef=function(t){return{$$typeof:rve,render:t}};Qr.isValidElement=qN;Qr.lazy=function(t){return{$$typeof:ave,_payload:{_status:-1,_result:t},_init:uve}};Qr.memo=function(t,e){return{$$typeof:ive,type:t,compare:e===void 0?null:e}};Qr.startTransition=function(t){var e=BE.transition;BE.transition={};try{t()}finally{BE.transition=e}};Qr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qr.useCallback=function(t,e){return fo.current.useCallback(t,e)};Qr.useContext=function(t){return fo.current.useContext(t)};Qr.useDebugValue=function(){};Qr.useDeferredValue=function(t){return fo.current.useDeferredValue(t)};Qr.useEffect=function(t,e){return fo.current.useEffect(t,e)};Qr.useId=function(){return fo.current.useId()};Qr.useImperativeHandle=function(t,e,r){return fo.current.useImperativeHandle(t,e,r)};Qr.useInsertionEffect=function(t,e){return fo.current.useInsertionEffect(t,e)};Qr.useLayoutEffect=function(t,e){return fo.current.useLayoutEffect(t,e)};Qr.useMemo=function(t,e){return fo.current.useMemo(t,e)};Qr.useReducer=function(t,e,r){return fo.current.useReducer(t,e,r)};Qr.useRef=function(t){return fo.current.useRef(t)};Qr.useState=function(t){return fo.current.useState(t)};Qr.useSyncExternalStore=function(t,e,r){return fo.current.useSyncExternalStore(t,e,r)};Qr.useTransition=function(){return fo.current.useTransition()};Qr.version="18.2.0";KY.exports=Qr;var ae=KY.exports;const ee=Ms(ae),A$=YY({__proto__:null,default:ee},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fve=ae,hve=Symbol.for("react.element"),dve=Symbol.for("react.fragment"),pve=Object.prototype.hasOwnProperty,vve=fve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gve={key:!0,ref:!0,__self:!0,__source:!0};function iq(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)pve.call(e,n)&&!gve.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:hve,type:t,key:a,ref:o,props:i,_owner:vve.current}}gM.Fragment=dve;gM.jsx=iq;gM.jsxs=iq;qY.exports=gM;var Oe=qY.exports,sD={},aq={exports:{}},As={},oq={exports:{}},sq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,D){var L=F.length;F.push(D);e:for(;0<L;){var G=L-1>>>1,Y=F[G];if(0<i(Y,D))F[G]=D,F[L]=Y,L=G;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var D=F[0],L=F.pop();if(L!==D){F[0]=L;e:for(var G=0,Y=F.length,Z=Y>>>1;G<Z;){var q=2*(G+1)-1,pe=F[q],Se=q+1,Ae=F[Se];if(0>i(pe,L))Se<Y&&0>i(Ae,pe)?(F[G]=Ae,F[Se]=L,G=Se):(F[G]=pe,F[q]=L,G=q);else if(Se<Y&&0>i(Ae,L))F[G]=Ae,F[Se]=L,G=Se;else break e}}return D}function i(F,D){var L=F.sortIndex-D.sortIndex;return L!==0?L:F.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=F)n(u),D.sortIndex=D.expirationTime,e(l,D);else break;D=r(u)}}function b(F){if(v=!1,w(F),!p)if(r(l)!==null)p=!0,R(x);else{var D=r(u);D!==null&&B(b,D.startTime-F)}}function x(F,D){p=!1,v&&(v=!1,m(_),_=-1),d=!0;var L=h;try{for(w(D),f=r(l);f!==null&&(!(f.expirationTime>D)||F&&!A());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var Y=G(f.expirationTime<=D);D=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(l)&&n(l),w(D)}else n(l);f=r(l)}if(f!==null)var Z=!0;else{var q=r(u);q!==null&&B(b,q.startTime-D),Z=!1}return Z}finally{f=null,h=L,d=!1}}var S=!1,E=null,_=-1,k=5,C=-1;function A(){return!(t.unstable_now()-C<k)}function M(){if(E!==null){var F=t.unstable_now();C=F;var D=!0;try{D=E(!0,F)}finally{D?T():(S=!1,E=null)}}else S=!1}var T;if(typeof y=="function")T=function(){y(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,N=O.port2;O.port1.onmessage=M,T=function(){N.postMessage(null)}}else T=function(){g(M,0)};function R(F){E=F,S||(S=!0,T())}function B(F,D){_=g(function(){F(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,R(x))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var L=h;h=D;try{return F()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,D){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=h;h=F;try{return D()}finally{h=L}},t.unstable_scheduleCallback=function(F,D,L){var G=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?G+L:G):L=G,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=L+Y,F={id:c++,callback:D,priorityLevel:F,startTime:L,expirationTime:Y,sortIndex:-1},L>G?(F.sortIndex=L,e(u,F),r(l)===null&&F===r(u)&&(v?(m(_),_=-1):v=!0,B(b,L-G))):(F.sortIndex=Y,e(l,F),p||d||(p=!0,R(x))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var D=h;return function(){var L=h;h=D;try{return F.apply(this,arguments)}finally{h=L}}}})(sq);oq.exports=sq;var mve=oq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lq=ae,ws=mve;function ht(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uq=new Set,hw={};function Cv(t,e){em(t,e),em(t+"Capture",e)}function em(t,e){for(hw[t]=e,t=0;t<e.length;t++)uq.add(e[t])}var vf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lD=Object.prototype.hasOwnProperty,yve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T$={},I$={};function wve(t){return lD.call(I$,t)?!0:lD.call(T$,t)?!1:yve.test(t)?I$[t]=!0:(T$[t]=!0,!1)}function bve(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xve(t,e,r,n){if(e===null||typeof e>"u"||bve(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ho(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ma[t]=new ho(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ma[e]=new ho(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ma[t]=new ho(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ma[t]=new ho(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ma[t]=new ho(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ma[t]=new ho(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ma[t]=new ho(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ma[t]=new ho(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ma[t]=new ho(t,5,!1,t.toLowerCase(),null,!1,!1)});var KN=/[\-:]([a-z])/g;function QN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(KN,QN);Ma[e]=new ho(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(KN,QN);Ma[e]=new ho(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(KN,QN);Ma[e]=new ho(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ma[t]=new ho(t,1,!1,t.toLowerCase(),null,!1,!1)});Ma.xlinkHref=new ho("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ma[t]=new ho(t,1,!1,t.toLowerCase(),null,!0,!0)});function ZN(t,e,r,n){var i=Ma.hasOwnProperty(e)?Ma[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xve(e,r,i,n)&&(r=null),n||i===null?wve(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var kf=lq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dx=Symbol.for("react.element"),Kg=Symbol.for("react.portal"),Qg=Symbol.for("react.fragment"),JN=Symbol.for("react.strict_mode"),uD=Symbol.for("react.profiler"),cq=Symbol.for("react.provider"),fq=Symbol.for("react.context"),e5=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),fD=Symbol.for("react.suspense_list"),t5=Symbol.for("react.memo"),hh=Symbol.for("react.lazy"),hq=Symbol.for("react.offscreen"),O$=Symbol.iterator;function Ay(t){return t===null||typeof t!="object"?null:(t=O$&&t[O$]||t["@@iterator"],typeof t=="function"?t:null)}var Yn=Object.assign,dI;function c1(t){if(dI===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);dI=e&&e[1]||""}return`
`+dI+t}var pI=!1;function vI(t,e){if(!t||pI)return"";pI=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{pI=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?c1(t):""}function Sve(t){switch(t.tag){case 5:return c1(t.type);case 16:return c1("Lazy");case 13:return c1("Suspense");case 19:return c1("SuspenseList");case 0:case 2:case 15:return t=vI(t.type,!1),t;case 11:return t=vI(t.type.render,!1),t;case 1:return t=vI(t.type,!0),t;default:return""}}function hD(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qg:return"Fragment";case Kg:return"Portal";case uD:return"Profiler";case JN:return"StrictMode";case cD:return"Suspense";case fD:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fq:return(t.displayName||"Context")+".Consumer";case cq:return(t._context.displayName||"Context")+".Provider";case e5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t5:return e=t.displayName||null,e!==null?e:hD(t.type)||"Memo";case hh:e=t._payload,t=t._init;try{return hD(t(e))}catch{}}return null}function Eve(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hD(e);case 8:return e===JN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function id(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _ve(t){var e=dq(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Px(t){t._valueTracker||(t._valueTracker=_ve(t))}function pq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=dq(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function G_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dD(t,e){var r=e.checked;return Yn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function D$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=id(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vq(t,e){e=e.checked,e!=null&&ZN(t,"checked",e,!1)}function pD(t,e){vq(t,e);var r=id(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vD(t,e.type,r):e.hasOwnProperty("defaultValue")&&vD(t,e.type,id(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vD(t,e,r){(e!=="number"||G_(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var f1=Array.isArray;function v0(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+id(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gD(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ht(91));return Yn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ht(92));if(f1(r)){if(1<r.length)throw Error(ht(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:id(r)}}function gq(t,e){var r=id(e.value),n=id(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function R$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mq(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mD(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mq(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lx,yq=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lx=Lx||document.createElement("div"),Lx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dw(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var R1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cve=["Webkit","ms","Moz","O"];Object.keys(R1).forEach(function(t){Cve.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),R1[e]=R1[t]})});function wq(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||R1.hasOwnProperty(t)&&R1[t]?(""+e).trim():e+"px"}function bq(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=wq(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var kve=Yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yD(t,e){if(e){if(kve[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ht(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ht(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ht(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ht(62))}}function wD(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bD=null;function r5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xD=null,g0=null,m0=null;function N$(t){if(t=G2(t)){if(typeof xD!="function")throw Error(ht(280));var e=t.stateNode;e&&(e=xM(e),xD(t.stateNode,t.type,e))}}function xq(t){g0?m0?m0.push(t):m0=[t]:g0=t}function Sq(){if(g0){var t=g0,e=m0;if(m0=g0=null,N$(t),e)for(t=0;t<e.length;t++)N$(e[t])}}function Eq(t,e){return t(e)}function _q(){}var gI=!1;function Cq(t,e,r){if(gI)return t(e,r);gI=!0;try{return Eq(t,e,r)}finally{gI=!1,(g0!==null||m0!==null)&&(_q(),Sq())}}function pw(t,e){var r=t.stateNode;if(r===null)return null;var n=xM(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ht(231,e,typeof r));return r}var SD=!1;if(vf)try{var Ty={};Object.defineProperty(Ty,"passive",{get:function(){SD=!0}}),window.addEventListener("test",Ty,Ty),window.removeEventListener("test",Ty,Ty)}catch{SD=!1}function Mve(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var N1=!1,U_=null,W_=!1,ED=null,Ave={onError:function(t){N1=!0,U_=t}};function Tve(t,e,r,n,i,a,o,s,l){N1=!1,U_=null,Mve.apply(Ave,arguments)}function Ive(t,e,r,n,i,a,o,s,l){if(Tve.apply(this,arguments),N1){if(N1){var u=U_;N1=!1,U_=null}else throw Error(ht(198));W_||(W_=!0,ED=u)}}function kv(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function kq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F$(t){if(kv(t)!==t)throw Error(ht(188))}function Ove(t){var e=t.alternate;if(!e){if(e=kv(t),e===null)throw Error(ht(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return F$(i),t;if(a===n)return F$(i),e;a=a.sibling}throw Error(ht(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(ht(189))}}if(r.alternate!==n)throw Error(ht(190))}if(r.tag!==3)throw Error(ht(188));return r.stateNode.current===r?t:e}function Mq(t){return t=Ove(t),t!==null?Aq(t):null}function Aq(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Aq(t);if(e!==null)return e;t=t.sibling}return null}var Tq=ws.unstable_scheduleCallback,B$=ws.unstable_cancelCallback,Dve=ws.unstable_shouldYield,Pve=ws.unstable_requestPaint,yi=ws.unstable_now,Lve=ws.unstable_getCurrentPriorityLevel,n5=ws.unstable_ImmediatePriority,Iq=ws.unstable_UserBlockingPriority,V_=ws.unstable_NormalPriority,Rve=ws.unstable_LowPriority,Oq=ws.unstable_IdlePriority,mM=null,ac=null;function Nve(t){if(ac&&typeof ac.onCommitFiberRoot=="function")try{ac.onCommitFiberRoot(mM,t,void 0,(t.current.flags&128)===128)}catch{}}var Zl=Math.clz32?Math.clz32:$ve,Fve=Math.log,Bve=Math.LN2;function $ve(t){return t>>>=0,t===0?32:31-(Fve(t)/Bve|0)|0}var Rx=64,Nx=4194304;function h1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function H_(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=h1(s):(a&=o,a!==0&&(n=h1(a)))}else o=r&~i,o!==0?n=h1(o):a!==0&&(n=h1(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Zl(e),i=1<<r,n|=t[r],e&=~i;return n}function zve(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jve(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Zl(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=zve(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function _D(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dq(){var t=Rx;return Rx<<=1,!(Rx&4194240)&&(Rx=64),t}function mI(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function z2(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zl(e),t[e]=r}function Gve(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Zl(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function i5(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Zl(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ln=0;function Pq(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lq,a5,Rq,Nq,Fq,CD=!1,Fx=[],Vh=null,Hh=null,Xh=null,vw=new Map,gw=new Map,bh=[],Uve="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $$(t,e){switch(t){case"focusin":case"focusout":Vh=null;break;case"dragenter":case"dragleave":Hh=null;break;case"mouseover":case"mouseout":Xh=null;break;case"pointerover":case"pointerout":vw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gw.delete(e.pointerId)}}function Iy(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=G2(e),e!==null&&a5(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Wve(t,e,r,n,i){switch(e){case"focusin":return Vh=Iy(Vh,t,e,r,n,i),!0;case"dragenter":return Hh=Iy(Hh,t,e,r,n,i),!0;case"mouseover":return Xh=Iy(Xh,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return vw.set(a,Iy(vw.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,gw.set(a,Iy(gw.get(a)||null,t,e,r,n,i)),!0}return!1}function Bq(t){var e=Ep(t.target);if(e!==null){var r=kv(e);if(r!==null){if(e=r.tag,e===13){if(e=kq(r),e!==null){t.blockedOn=e,Fq(t.priority,function(){Rq(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $E(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=kD(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);bD=n,r.target.dispatchEvent(n),bD=null}else return e=G2(r),e!==null&&a5(e),t.blockedOn=r,!1;e.shift()}return!0}function z$(t,e,r){$E(t)&&r.delete(e)}function Vve(){CD=!1,Vh!==null&&$E(Vh)&&(Vh=null),Hh!==null&&$E(Hh)&&(Hh=null),Xh!==null&&$E(Xh)&&(Xh=null),vw.forEach(z$),gw.forEach(z$)}function Oy(t,e){t.blockedOn===e&&(t.blockedOn=null,CD||(CD=!0,ws.unstable_scheduleCallback(ws.unstable_NormalPriority,Vve)))}function mw(t){function e(i){return Oy(i,t)}if(0<Fx.length){Oy(Fx[0],t);for(var r=1;r<Fx.length;r++){var n=Fx[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Vh!==null&&Oy(Vh,t),Hh!==null&&Oy(Hh,t),Xh!==null&&Oy(Xh,t),vw.forEach(e),gw.forEach(e),r=0;r<bh.length;r++)n=bh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<bh.length&&(r=bh[0],r.blockedOn===null);)Bq(r),r.blockedOn===null&&bh.shift()}var y0=kf.ReactCurrentBatchConfig,X_=!0;function Hve(t,e,r,n){var i=ln,a=y0.transition;y0.transition=null;try{ln=1,o5(t,e,r,n)}finally{ln=i,y0.transition=a}}function Xve(t,e,r,n){var i=ln,a=y0.transition;y0.transition=null;try{ln=4,o5(t,e,r,n)}finally{ln=i,y0.transition=a}}function o5(t,e,r,n){if(X_){var i=kD(t,e,r,n);if(i===null)MI(t,e,n,Y_,r),$$(t,n);else if(Wve(i,t,e,r,n))n.stopPropagation();else if($$(t,n),e&4&&-1<Uve.indexOf(t)){for(;i!==null;){var a=G2(i);if(a!==null&&Lq(a),a=kD(t,e,r,n),a===null&&MI(t,e,n,Y_,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else MI(t,e,n,null,r)}}var Y_=null;function kD(t,e,r,n){if(Y_=null,t=r5(n),t=Ep(t),t!==null)if(e=kv(t),e===null)t=null;else if(r=e.tag,r===13){if(t=kq(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Y_=t,null}function $q(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lve()){case n5:return 1;case Iq:return 4;case V_:case Rve:return 16;case Oq:return 536870912;default:return 16}default:return 16}}var Dh=null,s5=null,zE=null;function zq(){if(zE)return zE;var t,e=s5,r=e.length,n,i="value"in Dh?Dh.value:Dh.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return zE=i.slice(t,1<n?1-n:void 0)}function jE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bx(){return!0}function j$(){return!1}function Ts(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Bx:j$,this.isPropagationStopped=j$,this}return Yn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bx)},persist:function(){},isPersistent:Bx}),e}var Gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l5=Ts(Gm),j2=Yn({},Gm,{view:0,detail:0}),Yve=Ts(j2),yI,wI,Dy,yM=Yn({},j2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dy&&(Dy&&t.type==="mousemove"?(yI=t.screenX-Dy.screenX,wI=t.screenY-Dy.screenY):wI=yI=0,Dy=t),yI)},movementY:function(t){return"movementY"in t?t.movementY:wI}}),G$=Ts(yM),qve=Yn({},yM,{dataTransfer:0}),Kve=Ts(qve),Qve=Yn({},j2,{relatedTarget:0}),bI=Ts(Qve),Zve=Yn({},Gm,{animationName:0,elapsedTime:0,pseudoElement:0}),Jve=Ts(Zve),ege=Yn({},Gm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tge=Ts(ege),rge=Yn({},Gm,{data:0}),U$=Ts(rge),nge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ige={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},age={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oge(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=age[t])?!!e[t]:!1}function u5(){return oge}var sge=Yn({},j2,{key:function(t){if(t.key){var e=nge[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ige[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u5,charCode:function(t){return t.type==="keypress"?jE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lge=Ts(sge),uge=Yn({},yM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W$=Ts(uge),cge=Yn({},j2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u5}),fge=Ts(cge),hge=Yn({},Gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),dge=Ts(hge),pge=Yn({},yM,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vge=Ts(pge),gge=[9,13,27,32],c5=vf&&"CompositionEvent"in window,F1=null;vf&&"documentMode"in document&&(F1=document.documentMode);var mge=vf&&"TextEvent"in window&&!F1,jq=vf&&(!c5||F1&&8<F1&&11>=F1),V$=" ",H$=!1;function Gq(t,e){switch(t){case"keyup":return gge.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uq(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zg=!1;function yge(t,e){switch(t){case"compositionend":return Uq(e);case"keypress":return e.which!==32?null:(H$=!0,V$);case"textInput":return t=e.data,t===V$&&H$?null:t;default:return null}}function wge(t,e){if(Zg)return t==="compositionend"||!c5&&Gq(t,e)?(t=zq(),zE=s5=Dh=null,Zg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jq&&e.locale!=="ko"?null:e.data;default:return null}}var bge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bge[t.type]:e==="textarea"}function Wq(t,e,r,n){xq(n),e=q_(e,"onChange"),0<e.length&&(r=new l5("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var B1=null,yw=null;function xge(t){tK(t,0)}function wM(t){var e=t0(t);if(pq(e))return t}function Sge(t,e){if(t==="change")return e}var Vq=!1;if(vf){var xI;if(vf){var SI="oninput"in document;if(!SI){var Y$=document.createElement("div");Y$.setAttribute("oninput","return;"),SI=typeof Y$.oninput=="function"}xI=SI}else xI=!1;Vq=xI&&(!document.documentMode||9<document.documentMode)}function q$(){B1&&(B1.detachEvent("onpropertychange",Hq),yw=B1=null)}function Hq(t){if(t.propertyName==="value"&&wM(yw)){var e=[];Wq(e,yw,t,r5(t)),Cq(xge,e)}}function Ege(t,e,r){t==="focusin"?(q$(),B1=e,yw=r,B1.attachEvent("onpropertychange",Hq)):t==="focusout"&&q$()}function _ge(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wM(yw)}function Cge(t,e){if(t==="click")return wM(e)}function kge(t,e){if(t==="input"||t==="change")return wM(e)}function Mge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nu=typeof Object.is=="function"?Object.is:Mge;function ww(t,e){if(nu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!lD.call(e,i)||!nu(t[i],e[i]))return!1}return!0}function K$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q$(t,e){var r=K$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=K$(r)}}function Xq(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xq(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yq(){for(var t=window,e=G_();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=G_(t.document)}return e}function f5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Age(t){var e=Yq(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Xq(r.ownerDocument.documentElement,r)){if(n!==null&&f5(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Q$(r,a);var o=Q$(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tge=vf&&"documentMode"in document&&11>=document.documentMode,Jg=null,MD=null,$1=null,AD=!1;function Z$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;AD||Jg==null||Jg!==G_(n)||(n=Jg,"selectionStart"in n&&f5(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$1&&ww($1,n)||($1=n,n=q_(MD,"onSelect"),0<n.length&&(e=new l5("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Jg)))}function $x(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var e0={animationend:$x("Animation","AnimationEnd"),animationiteration:$x("Animation","AnimationIteration"),animationstart:$x("Animation","AnimationStart"),transitionend:$x("Transition","TransitionEnd")},EI={},qq={};vf&&(qq=document.createElement("div").style,"AnimationEvent"in window||(delete e0.animationend.animation,delete e0.animationiteration.animation,delete e0.animationstart.animation),"TransitionEvent"in window||delete e0.transitionend.transition);function bM(t){if(EI[t])return EI[t];if(!e0[t])return t;var e=e0[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in qq)return EI[t]=e[r];return t}var Kq=bM("animationend"),Qq=bM("animationiteration"),Zq=bM("animationstart"),Jq=bM("transitionend"),eK=new Map,J$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cd(t,e){eK.set(t,e),Cv(e,[t])}for(var _I=0;_I<J$.length;_I++){var CI=J$[_I],Ige=CI.toLowerCase(),Oge=CI[0].toUpperCase()+CI.slice(1);Cd(Ige,"on"+Oge)}Cd(Kq,"onAnimationEnd");Cd(Qq,"onAnimationIteration");Cd(Zq,"onAnimationStart");Cd("dblclick","onDoubleClick");Cd("focusin","onFocus");Cd("focusout","onBlur");Cd(Jq,"onTransitionEnd");em("onMouseEnter",["mouseout","mouseover"]);em("onMouseLeave",["mouseout","mouseover"]);em("onPointerEnter",["pointerout","pointerover"]);em("onPointerLeave",["pointerout","pointerover"]);Cv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dge=new Set("cancel close invalid load scroll toggle".split(" ").concat(d1));function e7(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ive(n,e,void 0,t),t.currentTarget=null}function tK(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;e7(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;e7(i,s,u),a=l}}}if(W_)throw t=ED,W_=!1,ED=null,t}function Cn(t,e){var r=e[PD];r===void 0&&(r=e[PD]=new Set);var n=t+"__bubble";r.has(n)||(rK(e,t,2,!1),r.add(n))}function kI(t,e,r){var n=0;e&&(n|=4),rK(r,t,n,e)}var zx="_reactListening"+Math.random().toString(36).slice(2);function bw(t){if(!t[zx]){t[zx]=!0,uq.forEach(function(r){r!=="selectionchange"&&(Dge.has(r)||kI(r,!1,t),kI(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zx]||(e[zx]=!0,kI("selectionchange",!1,e))}}function rK(t,e,r,n){switch($q(e)){case 1:var i=Hve;break;case 4:i=Xve;break;default:i=o5}r=i.bind(null,e,r,t),i=void 0,!SD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function MI(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Ep(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}Cq(function(){var u=a,c=r5(r),f=[];e:{var h=eK.get(t);if(h!==void 0){var d=l5,p=t;switch(t){case"keypress":if(jE(r)===0)break e;case"keydown":case"keyup":d=lge;break;case"focusin":p="focus",d=bI;break;case"focusout":p="blur",d=bI;break;case"beforeblur":case"afterblur":d=bI;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=G$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Kve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=fge;break;case Kq:case Qq:case Zq:d=Jve;break;case Jq:d=dge;break;case"scroll":d=Yve;break;case"wheel":d=vge;break;case"copy":case"cut":case"paste":d=tge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=W$}var v=(e&4)!==0,g=!v&&t==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=pw(y,m),b!=null&&v.push(xw(y,b,w)))),g)break;y=y.return}0<v.length&&(h=new d(h,p,null,r,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==bD&&(p=r.relatedTarget||r.fromElement)&&(Ep(p)||p[gf]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=u,p=p?Ep(p):null,p!==null&&(g=kv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(v=G$,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=W$,b="onPointerLeave",m="onPointerEnter",y="pointer"),g=d==null?h:t0(d),w=p==null?h:t0(p),h=new v(b,y+"leave",d,r,c),h.target=g,h.relatedTarget=w,b=null,Ep(c)===u&&(v=new v(m,y+"enter",p,r,c),v.target=w,v.relatedTarget=g,b=v),g=b,d&&p)t:{for(v=d,m=p,y=0,w=v;w;w=mg(w))y++;for(w=0,b=m;b;b=mg(b))w++;for(;0<y-w;)v=mg(v),y--;for(;0<w-y;)m=mg(m),w--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=mg(v),m=mg(m)}v=null}else v=null;d!==null&&t7(f,h,d,v,!1),p!==null&&g!==null&&t7(f,g,p,v,!0)}}e:{if(h=u?t0(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=Sge;else if(X$(h))if(Vq)x=kge;else{x=_ge;var S=Ege}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Cge);if(x&&(x=x(t,u))){Wq(f,x,r,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&vD(h,"number",h.value)}switch(S=u?t0(u):window,t){case"focusin":(X$(S)||S.contentEditable==="true")&&(Jg=S,MD=u,$1=null);break;case"focusout":$1=MD=Jg=null;break;case"mousedown":AD=!0;break;case"contextmenu":case"mouseup":case"dragend":AD=!1,Z$(f,r,c);break;case"selectionchange":if(Tge)break;case"keydown":case"keyup":Z$(f,r,c)}var E;if(c5)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Zg?Gq(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(jq&&r.locale!=="ko"&&(Zg||_!=="onCompositionStart"?_==="onCompositionEnd"&&Zg&&(E=zq()):(Dh=c,s5="value"in Dh?Dh.value:Dh.textContent,Zg=!0)),S=q_(u,_),0<S.length&&(_=new U$(_,t,null,r,c),f.push({event:_,listeners:S}),E?_.data=E:(E=Uq(r),E!==null&&(_.data=E)))),(E=mge?yge(t,r):wge(t,r))&&(u=q_(u,"onBeforeInput"),0<u.length&&(c=new U$("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=E))}tK(f,e)})}function xw(t,e,r){return{instance:t,listener:e,currentTarget:r}}function q_(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=pw(t,r),a!=null&&n.unshift(xw(t,a,i)),a=pw(t,e),a!=null&&n.push(xw(t,a,i))),t=t.return}return n}function mg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t7(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=pw(r,a),l!=null&&o.unshift(xw(r,l,s))):i||(l=pw(r,a),l!=null&&o.push(xw(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Pge=/\r\n?/g,Lge=/\u0000|\uFFFD/g;function r7(t){return(typeof t=="string"?t:""+t).replace(Pge,`
`).replace(Lge,"")}function jx(t,e,r){if(e=r7(e),r7(t)!==e&&r)throw Error(ht(425))}function K_(){}var TD=null,ID=null;function OD(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DD=typeof setTimeout=="function"?setTimeout:void 0,Rge=typeof clearTimeout=="function"?clearTimeout:void 0,n7=typeof Promise=="function"?Promise:void 0,Nge=typeof queueMicrotask=="function"?queueMicrotask:typeof n7<"u"?function(t){return n7.resolve(null).then(t).catch(Fge)}:DD;function Fge(t){setTimeout(function(){throw t})}function AI(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),mw(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);mw(e)}function Yh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function i7(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Um=Math.random().toString(36).slice(2),Uu="__reactFiber$"+Um,Sw="__reactProps$"+Um,gf="__reactContainer$"+Um,PD="__reactEvents$"+Um,Bge="__reactListeners$"+Um,$ge="__reactHandles$"+Um;function Ep(t){var e=t[Uu];if(e)return e;for(var r=t.parentNode;r;){if(e=r[gf]||r[Uu]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=i7(t);t!==null;){if(r=t[Uu])return r;t=i7(t)}return e}t=r,r=t.parentNode}return null}function G2(t){return t=t[Uu]||t[gf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function t0(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ht(33))}function xM(t){return t[Sw]||null}var LD=[],r0=-1;function kd(t){return{current:t}}function Pn(t){0>r0||(t.current=LD[r0],LD[r0]=null,r0--)}function bn(t,e){r0++,LD[r0]=t.current,t.current=e}var ad={},Xa=kd(ad),Fo=kd(!1),ev=ad;function tm(t,e){var r=t.type.contextTypes;if(!r)return ad;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bo(t){return t=t.childContextTypes,t!=null}function Q_(){Pn(Fo),Pn(Xa)}function a7(t,e,r){if(Xa.current!==ad)throw Error(ht(168));bn(Xa,e),bn(Fo,r)}function nK(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ht(108,Eve(t)||"Unknown",i));return Yn({},r,n)}function Z_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ad,ev=Xa.current,bn(Xa,t),bn(Fo,Fo.current),!0}function o7(t,e,r){var n=t.stateNode;if(!n)throw Error(ht(169));r?(t=nK(t,e,ev),n.__reactInternalMemoizedMergedChildContext=t,Pn(Fo),Pn(Xa),bn(Xa,t)):Pn(Fo),bn(Fo,r)}var ef=null,SM=!1,TI=!1;function iK(t){ef===null?ef=[t]:ef.push(t)}function zge(t){SM=!0,iK(t)}function Md(){if(!TI&&ef!==null){TI=!0;var t=0,e=ln;try{var r=ef;for(ln=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ef=null,SM=!1}catch(i){throw ef!==null&&(ef=ef.slice(t+1)),Tq(n5,Md),i}finally{ln=e,TI=!1}}return null}var n0=[],i0=0,J_=null,eC=0,Js=[],el=0,tv=null,af=1,of="";function fp(t,e){n0[i0++]=eC,n0[i0++]=J_,J_=t,eC=e}function aK(t,e,r){Js[el++]=af,Js[el++]=of,Js[el++]=tv,tv=t;var n=af;t=of;var i=32-Zl(n)-1;n&=~(1<<i),r+=1;var a=32-Zl(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,af=1<<32-Zl(e)+i|r<<i|n,of=a+t}else af=1<<a|r<<i|n,of=t}function h5(t){t.return!==null&&(fp(t,1),aK(t,1,0))}function d5(t){for(;t===J_;)J_=n0[--i0],n0[i0]=null,eC=n0[--i0],n0[i0]=null;for(;t===tv;)tv=Js[--el],Js[el]=null,of=Js[--el],Js[el]=null,af=Js[--el],Js[el]=null}var ys=null,fs=null,jn=!1,Ul=null;function oK(t,e){var r=nl(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function s7(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,fs=Yh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,fs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=tv!==null?{id:af,overflow:of}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=nl(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ys=t,fs=null,!0):!1;default:return!1}}function RD(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ND(t){if(jn){var e=fs;if(e){var r=e;if(!s7(t,e)){if(RD(t))throw Error(ht(418));e=Yh(r.nextSibling);var n=ys;e&&s7(t,e)?oK(n,r):(t.flags=t.flags&-4097|2,jn=!1,ys=t)}}else{if(RD(t))throw Error(ht(418));t.flags=t.flags&-4097|2,jn=!1,ys=t}}}function l7(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function Gx(t){if(t!==ys)return!1;if(!jn)return l7(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!OD(t.type,t.memoizedProps)),e&&(e=fs)){if(RD(t))throw sK(),Error(ht(418));for(;e;)oK(t,e),e=Yh(e.nextSibling)}if(l7(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ht(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){fs=Yh(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}fs=null}}else fs=ys?Yh(t.stateNode.nextSibling):null;return!0}function sK(){for(var t=fs;t;)t=Yh(t.nextSibling)}function rm(){fs=ys=null,jn=!1}function p5(t){Ul===null?Ul=[t]:Ul.push(t)}var jge=kf.ReactCurrentBatchConfig;function Bl(t,e){if(t&&t.defaultProps){e=Yn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var tC=kd(null),rC=null,a0=null,v5=null;function g5(){v5=a0=rC=null}function m5(t){var e=tC.current;Pn(tC),t._currentValue=e}function FD(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function w0(t,e){rC=t,v5=a0=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lo=!0),t.firstContext=null)}function cl(t){var e=t._currentValue;if(v5!==t)if(t={context:t,memoizedValue:e,next:null},a0===null){if(rC===null)throw Error(ht(308));a0=t,rC.dependencies={lanes:0,firstContext:t}}else a0=a0.next=t;return e}var _p=null;function y5(t){_p===null?_p=[t]:_p.push(t)}function lK(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,y5(e)):(r.next=i.next,i.next=r),e.interleaved=r,mf(t,n)}function mf(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var dh=!1;function w5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uK(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qh(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,en&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,mf(t,r)}return i=n.interleaved,i===null?(e.next=e,y5(n)):(e.next=i.next,i.next=e),n.interleaved=e,mf(t,r)}function GE(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,i5(t,r)}}function u7(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function nC(t,e,r,n){var i=t.updateQueue;dh=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var h=s.lane,d=s.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,d=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Yn({},f,h);break e;case 2:dh=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);nv|=o,t.lanes=o,t.memoizedState=f}}function c7(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ht(191,i));i.call(n)}}}var cK=new lq.Component().refs;function BD(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Yn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var EM={isMounted:function(t){return(t=t._reactInternals)?kv(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=oo(),i=Qh(t),a=cf(n,i);a.payload=e,r!=null&&(a.callback=r),e=qh(t,a,i),e!==null&&(Jl(e,t,i,n),GE(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=oo(),i=Qh(t),a=cf(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=qh(t,a,i),e!==null&&(Jl(e,t,i,n),GE(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=oo(),n=Qh(t),i=cf(r,n);i.tag=2,e!=null&&(i.callback=e),e=qh(t,i,n),e!==null&&(Jl(e,t,n,r),GE(e,t,n))}};function f7(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!ww(r,n)||!ww(i,a):!0}function fK(t,e,r){var n=!1,i=ad,a=e.contextType;return typeof a=="object"&&a!==null?a=cl(a):(i=Bo(e)?ev:Xa.current,n=e.contextTypes,a=(n=n!=null)?tm(t,i):ad),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=EM,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function h7(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&EM.enqueueReplaceState(e,e.state,null)}function $D(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=cK,w5(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=cl(a):(a=Bo(e)?ev:Xa.current,i.context=tm(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(BD(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&EM.enqueueReplaceState(i,i.state,null),nC(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Py(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ht(309));var n=r.stateNode}if(!n)throw Error(ht(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===cK&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ht(284));if(!r._owner)throw Error(ht(290,t))}return t}function Ux(t,e){throw t=Object.prototype.toString.call(e),Error(ht(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d7(t){var e=t._init;return e(t._payload)}function hK(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function r(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Zh(m,y),m.index=0,m.sibling=null,m}function a(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,y,w,b){return y===null||y.tag!==6?(y=NI(w,m.mode,b),y.return=m,y):(y=i(y,w),y.return=m,y)}function l(m,y,w,b){var x=w.type;return x===Qg?c(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===hh&&d7(x)===y.type)?(b=i(y,w.props),b.ref=Py(m,y,w),b.return=m,b):(b=YE(w.type,w.key,w.props,null,m.mode,b),b.ref=Py(m,y,w),b.return=m,b)}function u(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=FI(w,m.mode,b),y.return=m,y):(y=i(y,w.children||[]),y.return=m,y)}function c(m,y,w,b,x){return y===null||y.tag!==7?(y=Up(w,m.mode,b,x),y.return=m,y):(y=i(y,w),y.return=m,y)}function f(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=NI(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dx:return w=YE(y.type,y.key,y.props,null,m.mode,w),w.ref=Py(m,null,y),w.return=m,w;case Kg:return y=FI(y,m.mode,w),y.return=m,y;case hh:var b=y._init;return f(m,b(y._payload),w)}if(f1(y)||Ay(y))return y=Up(y,m.mode,w,null),y.return=m,y;Ux(m,y)}return null}function h(m,y,w,b){var x=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:s(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dx:return w.key===x?l(m,y,w,b):null;case Kg:return w.key===x?u(m,y,w,b):null;case hh:return x=w._init,h(m,y,x(w._payload),b)}if(f1(w)||Ay(w))return x!==null?null:c(m,y,w,b,null);Ux(m,w)}return null}function d(m,y,w,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,s(y,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dx:return m=m.get(b.key===null?w:b.key)||null,l(y,m,b,x);case Kg:return m=m.get(b.key===null?w:b.key)||null,u(y,m,b,x);case hh:var S=b._init;return d(m,y,w,S(b._payload),x)}if(f1(b)||Ay(b))return m=m.get(w)||null,c(y,m,b,x,null);Ux(y,b)}return null}function p(m,y,w,b){for(var x=null,S=null,E=y,_=y=0,k=null;E!==null&&_<w.length;_++){E.index>_?(k=E,E=null):k=E.sibling;var C=h(m,E,w[_],b);if(C===null){E===null&&(E=k);break}t&&E&&C.alternate===null&&e(m,E),y=a(C,y,_),S===null?x=C:S.sibling=C,S=C,E=k}if(_===w.length)return r(m,E),jn&&fp(m,_),x;if(E===null){for(;_<w.length;_++)E=f(m,w[_],b),E!==null&&(y=a(E,y,_),S===null?x=E:S.sibling=E,S=E);return jn&&fp(m,_),x}for(E=n(m,E);_<w.length;_++)k=d(E,m,_,w[_],b),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?_:k.key),y=a(k,y,_),S===null?x=k:S.sibling=k,S=k);return t&&E.forEach(function(A){return e(m,A)}),jn&&fp(m,_),x}function v(m,y,w,b){var x=Ay(w);if(typeof x!="function")throw Error(ht(150));if(w=x.call(w),w==null)throw Error(ht(151));for(var S=x=null,E=y,_=y=0,k=null,C=w.next();E!==null&&!C.done;_++,C=w.next()){E.index>_?(k=E,E=null):k=E.sibling;var A=h(m,E,C.value,b);if(A===null){E===null&&(E=k);break}t&&E&&A.alternate===null&&e(m,E),y=a(A,y,_),S===null?x=A:S.sibling=A,S=A,E=k}if(C.done)return r(m,E),jn&&fp(m,_),x;if(E===null){for(;!C.done;_++,C=w.next())C=f(m,C.value,b),C!==null&&(y=a(C,y,_),S===null?x=C:S.sibling=C,S=C);return jn&&fp(m,_),x}for(E=n(m,E);!C.done;_++,C=w.next())C=d(E,m,_,C.value,b),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?_:C.key),y=a(C,y,_),S===null?x=C:S.sibling=C,S=C);return t&&E.forEach(function(M){return e(m,M)}),jn&&fp(m,_),x}function g(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Qg&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Dx:e:{for(var x=w.key,S=y;S!==null;){if(S.key===x){if(x=w.type,x===Qg){if(S.tag===7){r(m,S.sibling),y=i(S,w.props.children),y.return=m,m=y;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===hh&&d7(x)===S.type){r(m,S.sibling),y=i(S,w.props),y.ref=Py(m,S,w),y.return=m,m=y;break e}r(m,S);break}else e(m,S);S=S.sibling}w.type===Qg?(y=Up(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=YE(w.type,w.key,w.props,null,m.mode,b),b.ref=Py(m,y,w),b.return=m,m=b)}return o(m);case Kg:e:{for(S=w.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(m,y.sibling),y=i(y,w.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else e(m,y);y=y.sibling}y=FI(w,m.mode,b),y.return=m,m=y}return o(m);case hh:return S=w._init,g(m,y,S(w._payload),b)}if(f1(w))return p(m,y,w,b);if(Ay(w))return v(m,y,w,b);Ux(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(m,y.sibling),y=i(y,w),y.return=m,m=y):(r(m,y),y=NI(w,m.mode,b),y.return=m,m=y),o(m)):r(m,y)}return g}var nm=hK(!0),dK=hK(!1),U2={},oc=kd(U2),Ew=kd(U2),_w=kd(U2);function Cp(t){if(t===U2)throw Error(ht(174));return t}function b5(t,e){switch(bn(_w,e),bn(Ew,t),bn(oc,U2),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mD(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mD(e,t)}Pn(oc),bn(oc,e)}function im(){Pn(oc),Pn(Ew),Pn(_w)}function pK(t){Cp(_w.current);var e=Cp(oc.current),r=mD(e,t.type);e!==r&&(bn(Ew,t),bn(oc,r))}function x5(t){Ew.current===t&&(Pn(oc),Pn(Ew))}var Hn=kd(0);function iC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var II=[];function S5(){for(var t=0;t<II.length;t++)II[t]._workInProgressVersionPrimary=null;II.length=0}var UE=kf.ReactCurrentDispatcher,OI=kf.ReactCurrentBatchConfig,rv=0,Xn=null,Ui=null,ia=null,aC=!1,z1=!1,Cw=0,Gge=0;function La(){throw Error(ht(321))}function E5(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!nu(t[r],e[r]))return!1;return!0}function _5(t,e,r,n,i,a){if(rv=a,Xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,UE.current=t===null||t.memoizedState===null?Hge:Xge,t=r(n,i),z1){a=0;do{if(z1=!1,Cw=0,25<=a)throw Error(ht(301));a+=1,ia=Ui=null,e.updateQueue=null,UE.current=Yge,t=r(n,i)}while(z1)}if(UE.current=oC,e=Ui!==null&&Ui.next!==null,rv=0,ia=Ui=Xn=null,aC=!1,e)throw Error(ht(300));return t}function C5(){var t=Cw!==0;return Cw=0,t}function Pu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ia===null?Xn.memoizedState=ia=t:ia=ia.next=t,ia}function fl(){if(Ui===null){var t=Xn.alternate;t=t!==null?t.memoizedState:null}else t=Ui.next;var e=ia===null?Xn.memoizedState:ia.next;if(e!==null)ia=e,Ui=t;else{if(t===null)throw Error(ht(310));Ui=t,t={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},ia===null?Xn.memoizedState=ia=t:ia=ia.next=t}return ia}function kw(t,e){return typeof e=="function"?e(t):e}function DI(t){var e=fl(),r=e.queue;if(r===null)throw Error(ht(311));r.lastRenderedReducer=t;var n=Ui,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((rv&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=n):l=l.next=f,Xn.lanes|=c,nv|=c}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,nu(n,e.memoizedState)||(Lo=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Xn.lanes|=a,nv|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function PI(t){var e=fl(),r=e.queue;if(r===null)throw Error(ht(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);nu(a,e.memoizedState)||(Lo=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function vK(){}function gK(t,e){var r=Xn,n=fl(),i=e(),a=!nu(n.memoizedState,i);if(a&&(n.memoizedState=i,Lo=!0),n=n.queue,k5(wK.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||ia!==null&&ia.memoizedState.tag&1){if(r.flags|=2048,Mw(9,yK.bind(null,r,n,i,e),void 0,null),la===null)throw Error(ht(349));rv&30||mK(r,e,i)}return i}function mK(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yK(t,e,r,n){e.value=r,e.getSnapshot=n,bK(e)&&xK(t)}function wK(t,e,r){return r(function(){bK(e)&&xK(t)})}function bK(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!nu(t,r)}catch{return!0}}function xK(t){var e=mf(t,1);e!==null&&Jl(e,t,1,-1)}function p7(t){var e=Pu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kw,lastRenderedState:t},e.queue=t,t=t.dispatch=Vge.bind(null,Xn,t),[e.memoizedState,t]}function Mw(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Xn.updateQueue,e===null?(e={lastEffect:null,stores:null},Xn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function SK(){return fl().memoizedState}function WE(t,e,r,n){var i=Pu();Xn.flags|=t,i.memoizedState=Mw(1|e,r,void 0,n===void 0?null:n)}function _M(t,e,r,n){var i=fl();n=n===void 0?null:n;var a=void 0;if(Ui!==null){var o=Ui.memoizedState;if(a=o.destroy,n!==null&&E5(n,o.deps)){i.memoizedState=Mw(e,r,a,n);return}}Xn.flags|=t,i.memoizedState=Mw(1|e,r,a,n)}function v7(t,e){return WE(8390656,8,t,e)}function k5(t,e){return _M(2048,8,t,e)}function EK(t,e){return _M(4,2,t,e)}function _K(t,e){return _M(4,4,t,e)}function CK(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kK(t,e,r){return r=r!=null?r.concat([t]):null,_M(4,4,CK.bind(null,e,t),r)}function M5(){}function MK(t,e){var r=fl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&E5(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function AK(t,e){var r=fl();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&E5(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function TK(t,e,r){return rv&21?(nu(r,e)||(r=Dq(),Xn.lanes|=r,nv|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lo=!0),t.memoizedState=r)}function Uge(t,e){var r=ln;ln=r!==0&&4>r?r:4,t(!0);var n=OI.transition;OI.transition={};try{t(!1),e()}finally{ln=r,OI.transition=n}}function IK(){return fl().memoizedState}function Wge(t,e,r){var n=Qh(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},OK(t))DK(e,r);else if(r=lK(t,e,r,n),r!==null){var i=oo();Jl(r,t,n,i),PK(r,e,n)}}function Vge(t,e,r){var n=Qh(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(OK(t))DK(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,nu(s,o)){var l=e.interleaved;l===null?(i.next=i,y5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=lK(t,e,i,n),r!==null&&(i=oo(),Jl(r,t,n,i),PK(r,e,n))}}function OK(t){var e=t.alternate;return t===Xn||e!==null&&e===Xn}function DK(t,e){z1=aC=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function PK(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,i5(t,r)}}var oC={readContext:cl,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useInsertionEffect:La,useLayoutEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useMutableSource:La,useSyncExternalStore:La,useId:La,unstable_isNewReconciler:!1},Hge={readContext:cl,useCallback:function(t,e){return Pu().memoizedState=[t,e===void 0?null:e],t},useContext:cl,useEffect:v7,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,WE(4194308,4,CK.bind(null,e,t),r)},useLayoutEffect:function(t,e){return WE(4194308,4,t,e)},useInsertionEffect:function(t,e){return WE(4,2,t,e)},useMemo:function(t,e){var r=Pu();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Pu();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Wge.bind(null,Xn,t),[n.memoizedState,t]},useRef:function(t){var e=Pu();return t={current:t},e.memoizedState=t},useState:p7,useDebugValue:M5,useDeferredValue:function(t){return Pu().memoizedState=t},useTransition:function(){var t=p7(!1),e=t[0];return t=Uge.bind(null,t[1]),Pu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Xn,i=Pu();if(jn){if(r===void 0)throw Error(ht(407));r=r()}else{if(r=e(),la===null)throw Error(ht(349));rv&30||mK(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,v7(wK.bind(null,n,a,t),[t]),n.flags|=2048,Mw(9,yK.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Pu(),e=la.identifierPrefix;if(jn){var r=of,n=af;r=(n&~(1<<32-Zl(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cw++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Gge++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xge={readContext:cl,useCallback:MK,useContext:cl,useEffect:k5,useImperativeHandle:kK,useInsertionEffect:EK,useLayoutEffect:_K,useMemo:AK,useReducer:DI,useRef:SK,useState:function(){return DI(kw)},useDebugValue:M5,useDeferredValue:function(t){var e=fl();return TK(e,Ui.memoizedState,t)},useTransition:function(){var t=DI(kw)[0],e=fl().memoizedState;return[t,e]},useMutableSource:vK,useSyncExternalStore:gK,useId:IK,unstable_isNewReconciler:!1},Yge={readContext:cl,useCallback:MK,useContext:cl,useEffect:k5,useImperativeHandle:kK,useInsertionEffect:EK,useLayoutEffect:_K,useMemo:AK,useReducer:PI,useRef:SK,useState:function(){return PI(kw)},useDebugValue:M5,useDeferredValue:function(t){var e=fl();return Ui===null?e.memoizedState=t:TK(e,Ui.memoizedState,t)},useTransition:function(){var t=PI(kw)[0],e=fl().memoizedState;return[t,e]},useMutableSource:vK,useSyncExternalStore:gK,useId:IK,unstable_isNewReconciler:!1};function am(t,e){try{var r="",n=e;do r+=Sve(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function LI(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function zD(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var qge=typeof WeakMap=="function"?WeakMap:Map;function LK(t,e,r){r=cf(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){lC||(lC=!0,KD=n),zD(t,e)},r}function RK(t,e,r){r=cf(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){zD(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){zD(t,e),typeof n!="function"&&(Kh===null?Kh=new Set([this]):Kh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function g7(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new qge;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=u0e.bind(null,t,e,r),e.then(t,t))}function m7(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y7(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=cf(-1,1),e.tag=2,qh(r,e,1))),r.lanes|=1),t)}var Kge=kf.ReactCurrentOwner,Lo=!1;function eo(t,e,r,n){e.child=t===null?dK(e,null,r,n):nm(e,t.child,r,n)}function w7(t,e,r,n,i){r=r.render;var a=e.ref;return w0(e,i),n=_5(t,e,r,n,a,i),r=C5(),t!==null&&!Lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yf(t,e,i)):(jn&&r&&h5(e),e.flags|=1,eo(t,e,n,i),e.child)}function b7(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!R5(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,NK(t,e,a,n,i)):(t=YE(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ww,r(o,n)&&t.ref===e.ref)return yf(t,e,i)}return e.flags|=1,t=Zh(a,n),t.ref=e.ref,t.return=e,e.child=t}function NK(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(ww(a,n)&&t.ref===e.ref)if(Lo=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Lo=!0);else return e.lanes=t.lanes,yf(t,e,i)}return jD(t,e,r,n,i)}function FK(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(s0,rs),rs|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bn(s0,rs),rs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,bn(s0,rs),rs|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,bn(s0,rs),rs|=n;return eo(t,e,i,r),e.child}function BK(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function jD(t,e,r,n,i){var a=Bo(r)?ev:Xa.current;return a=tm(e,a),w0(e,i),r=_5(t,e,r,n,a,i),n=C5(),t!==null&&!Lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yf(t,e,i)):(jn&&n&&h5(e),e.flags|=1,eo(t,e,r,i),e.child)}function x7(t,e,r,n,i){if(Bo(r)){var a=!0;Z_(e)}else a=!1;if(w0(e,i),e.stateNode===null)VE(t,e),fK(e,r,n),$D(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=cl(u):(u=Bo(r)?ev:Xa.current,u=tm(e,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&h7(e,o,n,u),dh=!1;var h=e.memoizedState;o.state=h,nC(e,n,o,i),l=e.memoizedState,s!==n||h!==l||Fo.current||dh?(typeof c=="function"&&(BD(e,r,c,n),l=e.memoizedState),(s=dh||f7(e,r,s,n,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,uK(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Bl(e.type,s),o.props=u,f=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=cl(l):(l=Bo(r)?ev:Xa.current,l=tm(e,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==l)&&h7(e,o,n,l),dh=!1,h=e.memoizedState,o.state=h,nC(e,n,o,i);var p=e.memoizedState;s!==f||h!==p||Fo.current||dh?(typeof d=="function"&&(BD(e,r,d,n),p=e.memoizedState),(u=dh||f7(e,r,u,n,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return GD(t,e,r,n,a,i)}function GD(t,e,r,n,i,a){BK(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&o7(e,r,!1),yf(t,e,a);n=e.stateNode,Kge.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=nm(e,t.child,null,a),e.child=nm(e,null,s,a)):eo(t,e,s,a),e.memoizedState=n.state,i&&o7(e,r,!0),e.child}function $K(t){var e=t.stateNode;e.pendingContext?a7(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a7(t,e.context,!1),b5(t,e.containerInfo)}function S7(t,e,r,n,i){return rm(),p5(i),e.flags|=256,eo(t,e,r,n),e.child}var UD={dehydrated:null,treeContext:null,retryLane:0};function WD(t){return{baseLanes:t,cachePool:null,transitions:null}}function zK(t,e,r){var n=e.pendingProps,i=Hn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),bn(Hn,i&1),t===null)return ND(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=MM(o,n,0,null),t=Up(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=WD(r),e.memoizedState=UD,t):A5(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Qge(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Zh(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Zh(s,a):(a=Up(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?WD(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=UD,n}return a=t.child,t=a.sibling,n=Zh(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function A5(t,e){return e=MM({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wx(t,e,r,n){return n!==null&&p5(n),nm(e,t.child,null,r),t=A5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qge(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=LI(Error(ht(422))),Wx(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=MM({mode:"visible",children:n.children},i,0,null),a=Up(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&nm(e,t.child,null,o),e.child.memoizedState=WD(o),e.memoizedState=UD,a);if(!(e.mode&1))return Wx(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(ht(419)),n=LI(a,n,void 0),Wx(t,e,o,n)}if(s=(o&t.childLanes)!==0,Lo||s){if(n=la,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,mf(t,i),Jl(n,t,i,-1))}return L5(),n=LI(Error(ht(421))),Wx(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=c0e.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,fs=Yh(i.nextSibling),ys=e,jn=!0,Ul=null,t!==null&&(Js[el++]=af,Js[el++]=of,Js[el++]=tv,af=t.id,of=t.overflow,tv=e),e=A5(e,n.children),e.flags|=4096,e)}function E7(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),FD(t.return,e,r)}function RI(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function jK(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(eo(t,e,n.children,r),n=Hn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E7(t,r,e);else if(t.tag===19)E7(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(bn(Hn,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&iC(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),RI(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&iC(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}RI(e,!0,r,null,a);break;case"together":RI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function VE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yf(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),nv|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ht(153));if(e.child!==null){for(t=e.child,r=Zh(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Zh(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Zge(t,e,r){switch(e.tag){case 3:$K(e),rm();break;case 5:pK(e);break;case 1:Bo(e.type)&&Z_(e);break;case 4:b5(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;bn(tC,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(bn(Hn,Hn.current&1),e.flags|=128,null):r&e.child.childLanes?zK(t,e,r):(bn(Hn,Hn.current&1),t=yf(t,e,r),t!==null?t.sibling:null);bn(Hn,Hn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return jK(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(Hn,Hn.current),n)break;return null;case 22:case 23:return e.lanes=0,FK(t,e,r)}return yf(t,e,r)}var GK,VD,UK,WK;GK=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};VD=function(){};UK=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Cp(oc.current);var a=null;switch(r){case"input":i=dD(t,i),n=dD(t,n),a=[];break;case"select":i=Yn({},i,{value:void 0}),n=Yn({},n,{value:void 0}),a=[];break;case"textarea":i=gD(t,i),n=gD(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=K_)}yD(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hw.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hw.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Cn("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};WK=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ly(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ra(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Jge(t,e,r){var n=e.pendingProps;switch(d5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ra(e),null;case 1:return Bo(e.type)&&Q_(),Ra(e),null;case 3:return n=e.stateNode,im(),Pn(Fo),Pn(Xa),S5(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Gx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ul!==null&&(JD(Ul),Ul=null))),VD(t,e),Ra(e),null;case 5:x5(e);var i=Cp(_w.current);if(r=e.type,t!==null&&e.stateNode!=null)UK(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ht(166));return Ra(e),null}if(t=Cp(oc.current),Gx(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Uu]=e,n[Sw]=a,t=(e.mode&1)!==0,r){case"dialog":Cn("cancel",n),Cn("close",n);break;case"iframe":case"object":case"embed":Cn("load",n);break;case"video":case"audio":for(i=0;i<d1.length;i++)Cn(d1[i],n);break;case"source":Cn("error",n);break;case"img":case"image":case"link":Cn("error",n),Cn("load",n);break;case"details":Cn("toggle",n);break;case"input":D$(n,a),Cn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Cn("invalid",n);break;case"textarea":L$(n,a),Cn("invalid",n)}yD(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&jx(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&jx(n.textContent,s,t),i=["children",""+s]):hw.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Cn("scroll",n)}switch(r){case"input":Px(n),P$(n,a,!0);break;case"textarea":Px(n),R$(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=K_)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mq(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Uu]=e,t[Sw]=n,GK(t,e,!1,!1),e.stateNode=t;e:{switch(o=wD(r,n),r){case"dialog":Cn("cancel",t),Cn("close",t),i=n;break;case"iframe":case"object":case"embed":Cn("load",t),i=n;break;case"video":case"audio":for(i=0;i<d1.length;i++)Cn(d1[i],t);i=n;break;case"source":Cn("error",t),i=n;break;case"img":case"image":case"link":Cn("error",t),Cn("load",t),i=n;break;case"details":Cn("toggle",t),i=n;break;case"input":D$(t,n),i=dD(t,n),Cn("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Yn({},n,{value:void 0}),Cn("invalid",t);break;case"textarea":L$(t,n),i=gD(t,n),Cn("invalid",t);break;default:i=n}yD(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?bq(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yq(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&dw(t,l):typeof l=="number"&&dw(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(hw.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Cn("scroll",t):l!=null&&ZN(t,a,l,o))}switch(r){case"input":Px(t),P$(t,n,!1);break;case"textarea":Px(t),R$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+id(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?v0(t,!!n.multiple,a,!1):n.defaultValue!=null&&v0(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=K_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ra(e),null;case 6:if(t&&e.stateNode!=null)WK(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ht(166));if(r=Cp(_w.current),Cp(oc.current),Gx(e)){if(n=e.stateNode,r=e.memoizedProps,n[Uu]=e,(a=n.nodeValue!==r)&&(t=ys,t!==null))switch(t.tag){case 3:jx(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jx(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Uu]=e,e.stateNode=n}return Ra(e),null;case 13:if(Pn(Hn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&fs!==null&&e.mode&1&&!(e.flags&128))sK(),rm(),e.flags|=98560,a=!1;else if(a=Gx(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ht(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ht(317));a[Uu]=e}else rm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ra(e),a=!1}else Ul!==null&&(JD(Ul),Ul=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Hn.current&1?Hi===0&&(Hi=3):L5())),e.updateQueue!==null&&(e.flags|=4),Ra(e),null);case 4:return im(),VD(t,e),t===null&&bw(e.stateNode.containerInfo),Ra(e),null;case 10:return m5(e.type._context),Ra(e),null;case 17:return Bo(e.type)&&Q_(),Ra(e),null;case 19:if(Pn(Hn),a=e.memoizedState,a===null)return Ra(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Ly(a,!1);else{if(Hi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=iC(t),o!==null){for(e.flags|=128,Ly(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return bn(Hn,Hn.current&1|2),e.child}t=t.sibling}a.tail!==null&&yi()>om&&(e.flags|=128,n=!0,Ly(a,!1),e.lanes=4194304)}else{if(!n)if(t=iC(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ly(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!jn)return Ra(e),null}else 2*yi()-a.renderingStartTime>om&&r!==1073741824&&(e.flags|=128,n=!0,Ly(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yi(),e.sibling=null,r=Hn.current,bn(Hn,n?r&1|2:r&1),e):(Ra(e),null);case 22:case 23:return P5(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?rs&1073741824&&(Ra(e),e.subtreeFlags&6&&(e.flags|=8192)):Ra(e),null;case 24:return null;case 25:return null}throw Error(ht(156,e.tag))}function e0e(t,e){switch(d5(e),e.tag){case 1:return Bo(e.type)&&Q_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return im(),Pn(Fo),Pn(Xa),S5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x5(e),null;case 13:if(Pn(Hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ht(340));rm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pn(Hn),null;case 4:return im(),null;case 10:return m5(e.type._context),null;case 22:case 23:return P5(),null;case 24:return null;default:return null}}var Vx=!1,Ga=!1,t0e=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function o0(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ai(t,e,n)}else r.current=null}function HD(t,e,r){try{r()}catch(n){ai(t,e,n)}}var _7=!1;function r0e(t,e){if(TD=X_,t=Yq(),f5(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(s=o+i),f!==a||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++u===i&&(s=o),h===a&&++c===n&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ID={focusedElem:t,selectionRange:r},X_=!1,Bt=e;Bt!==null;)if(e=Bt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Bt=t;else for(;Bt!==null;){e=Bt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,g=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Bl(e.type,v),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(b){ai(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Bt=t;break}Bt=e.return}return p=_7,_7=!1,p}function j1(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&HD(e,r,a)}i=i.next}while(i!==n)}}function CM(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function XD(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function VK(t){var e=t.alternate;e!==null&&(t.alternate=null,VK(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Uu],delete e[Sw],delete e[PD],delete e[Bge],delete e[$ge])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HK(t){return t.tag===5||t.tag===3||t.tag===4}function C7(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HK(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YD(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=K_));else if(n!==4&&(t=t.child,t!==null))for(YD(t,e,r),t=t.sibling;t!==null;)YD(t,e,r),t=t.sibling}function qD(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qD(t,e,r),t=t.sibling;t!==null;)qD(t,e,r),t=t.sibling}var ya=null,jl=!1;function Jf(t,e,r){for(r=r.child;r!==null;)XK(t,e,r),r=r.sibling}function XK(t,e,r){if(ac&&typeof ac.onCommitFiberUnmount=="function")try{ac.onCommitFiberUnmount(mM,r)}catch{}switch(r.tag){case 5:Ga||o0(r,e);case 6:var n=ya,i=jl;ya=null,Jf(t,e,r),ya=n,jl=i,ya!==null&&(jl?(t=ya,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ya.removeChild(r.stateNode));break;case 18:ya!==null&&(jl?(t=ya,r=r.stateNode,t.nodeType===8?AI(t.parentNode,r):t.nodeType===1&&AI(t,r),mw(t)):AI(ya,r.stateNode));break;case 4:n=ya,i=jl,ya=r.stateNode.containerInfo,jl=!0,Jf(t,e,r),ya=n,jl=i;break;case 0:case 11:case 14:case 15:if(!Ga&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&HD(r,e,o),i=i.next}while(i!==n)}Jf(t,e,r);break;case 1:if(!Ga&&(o0(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){ai(r,e,s)}Jf(t,e,r);break;case 21:Jf(t,e,r);break;case 22:r.mode&1?(Ga=(n=Ga)||r.memoizedState!==null,Jf(t,e,r),Ga=n):Jf(t,e,r);break;default:Jf(t,e,r)}}function k7(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new t0e),e.forEach(function(n){var i=f0e.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Dl(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:ya=s.stateNode,jl=!1;break e;case 3:ya=s.stateNode.containerInfo,jl=!0;break e;case 4:ya=s.stateNode.containerInfo,jl=!0;break e}s=s.return}if(ya===null)throw Error(ht(160));XK(a,o,i),ya=null,jl=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ai(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YK(e,t),e=e.sibling}function YK(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dl(e,t),xu(t),n&4){try{j1(3,t,t.return),CM(3,t)}catch(v){ai(t,t.return,v)}try{j1(5,t,t.return)}catch(v){ai(t,t.return,v)}}break;case 1:Dl(e,t),xu(t),n&512&&r!==null&&o0(r,r.return);break;case 5:if(Dl(e,t),xu(t),n&512&&r!==null&&o0(r,r.return),t.flags&32){var i=t.stateNode;try{dw(i,"")}catch(v){ai(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&vq(i,a),wD(s,o);var u=wD(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?bq(i,f):c==="dangerouslySetInnerHTML"?yq(i,f):c==="children"?dw(i,f):ZN(i,c,f,u)}switch(s){case"input":pD(i,a);break;case"textarea":gq(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?v0(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?v0(i,!!a.multiple,a.defaultValue,!0):v0(i,!!a.multiple,a.multiple?[]:"",!1))}i[Sw]=a}catch(v){ai(t,t.return,v)}}break;case 6:if(Dl(e,t),xu(t),n&4){if(t.stateNode===null)throw Error(ht(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){ai(t,t.return,v)}}break;case 3:if(Dl(e,t),xu(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mw(e.containerInfo)}catch(v){ai(t,t.return,v)}break;case 4:Dl(e,t),xu(t);break;case 13:Dl(e,t),xu(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(O5=yi())),n&4&&k7(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ga=(u=Ga)||c,Dl(e,t),Ga=u):Dl(e,t),xu(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Bt=t,c=t.child;c!==null;){for(f=Bt=c;Bt!==null;){switch(h=Bt,d=h.child,h.tag){case 0:case 11:case 14:case 15:j1(4,h,h.return);break;case 1:o0(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){ai(n,r,v)}}break;case 5:o0(h,h.return);break;case 22:if(h.memoizedState!==null){A7(f);continue}}d!==null?(d.return=h,Bt=d):A7(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=wq("display",o))}catch(v){ai(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ai(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dl(e,t),xu(t),n&4&&k7(t);break;case 21:break;default:Dl(e,t),xu(t)}}function xu(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(HK(r)){var n=r;break e}r=r.return}throw Error(ht(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(dw(i,""),n.flags&=-33);var a=C7(t);qD(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=C7(t);YD(t,s,o);break;default:throw Error(ht(161))}}catch(l){ai(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function n0e(t,e,r){Bt=t,qK(t)}function qK(t,e,r){for(var n=(t.mode&1)!==0;Bt!==null;){var i=Bt,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Vx;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Ga;s=Vx;var u=Ga;if(Vx=o,(Ga=l)&&!u)for(Bt=i;Bt!==null;)o=Bt,l=o.child,o.tag===22&&o.memoizedState!==null?T7(i):l!==null?(l.return=o,Bt=l):T7(i);for(;a!==null;)Bt=a,qK(a),a=a.sibling;Bt=i,Vx=s,Ga=u}M7(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Bt=a):M7(t)}}function M7(t){for(;Bt!==null;){var e=Bt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ga||CM(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ga)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Bl(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&c7(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}c7(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&mw(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}Ga||e.flags&512&&XD(e)}catch(h){ai(e,e.return,h)}}if(e===t){Bt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Bt=r;break}Bt=e.return}}function A7(t){for(;Bt!==null;){var e=Bt;if(e===t){Bt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Bt=r;break}Bt=e.return}}function T7(t){for(;Bt!==null;){var e=Bt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{CM(4,e)}catch(l){ai(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ai(e,i,l)}}var a=e.return;try{XD(e)}catch(l){ai(e,a,l)}break;case 5:var o=e.return;try{XD(e)}catch(l){ai(e,o,l)}}}catch(l){ai(e,e.return,l)}if(e===t){Bt=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Bt=s;break}Bt=e.return}}var i0e=Math.ceil,sC=kf.ReactCurrentDispatcher,T5=kf.ReactCurrentOwner,al=kf.ReactCurrentBatchConfig,en=0,la=null,Di=null,ka=0,rs=0,s0=kd(0),Hi=0,Aw=null,nv=0,kM=0,I5=0,G1=null,Io=null,O5=0,om=1/0,Kc=null,lC=!1,KD=null,Kh=null,Hx=!1,Ph=null,uC=0,U1=0,QD=null,HE=-1,XE=0;function oo(){return en&6?yi():HE!==-1?HE:HE=yi()}function Qh(t){return t.mode&1?en&2&&ka!==0?ka&-ka:jge.transition!==null?(XE===0&&(XE=Dq()),XE):(t=ln,t!==0||(t=window.event,t=t===void 0?16:$q(t.type)),t):1}function Jl(t,e,r,n){if(50<U1)throw U1=0,QD=null,Error(ht(185));z2(t,r,n),(!(en&2)||t!==la)&&(t===la&&(!(en&2)&&(kM|=r),Hi===4&&xh(t,ka)),$o(t,n),r===1&&en===0&&!(e.mode&1)&&(om=yi()+500,SM&&Md()))}function $o(t,e){var r=t.callbackNode;jve(t,e);var n=H_(t,t===la?ka:0);if(n===0)r!==null&&B$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&B$(r),e===1)t.tag===0?zge(I7.bind(null,t)):iK(I7.bind(null,t)),Nge(function(){!(en&6)&&Md()}),r=null;else{switch(Pq(n)){case 1:r=n5;break;case 4:r=Iq;break;case 16:r=V_;break;case 536870912:r=Oq;break;default:r=V_}r=nQ(r,KK.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function KK(t,e){if(HE=-1,XE=0,en&6)throw Error(ht(327));var r=t.callbackNode;if(b0()&&t.callbackNode!==r)return null;var n=H_(t,t===la?ka:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=cC(t,n);else{e=n;var i=en;en|=2;var a=ZK();(la!==t||ka!==e)&&(Kc=null,om=yi()+500,Gp(t,e));do try{s0e();break}catch(s){QK(t,s)}while(!0);g5(),sC.current=a,en=i,Di!==null?e=0:(la=null,ka=0,e=Hi)}if(e!==0){if(e===2&&(i=_D(t),i!==0&&(n=i,e=ZD(t,i))),e===1)throw r=Aw,Gp(t,0),xh(t,n),$o(t,yi()),r;if(e===6)xh(t,n);else{if(i=t.current.alternate,!(n&30)&&!a0e(i)&&(e=cC(t,n),e===2&&(a=_D(t),a!==0&&(n=a,e=ZD(t,a))),e===1))throw r=Aw,Gp(t,0),xh(t,n),$o(t,yi()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ht(345));case 2:hp(t,Io,Kc);break;case 3:if(xh(t,n),(n&130023424)===n&&(e=O5+500-yi(),10<e)){if(H_(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){oo(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=DD(hp.bind(null,t,Io,Kc),e);break}hp(t,Io,Kc);break;case 4:if(xh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Zl(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=yi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i0e(n/1960))-n,10<n){t.timeoutHandle=DD(hp.bind(null,t,Io,Kc),n);break}hp(t,Io,Kc);break;case 5:hp(t,Io,Kc);break;default:throw Error(ht(329))}}}return $o(t,yi()),t.callbackNode===r?KK.bind(null,t):null}function ZD(t,e){var r=G1;return t.current.memoizedState.isDehydrated&&(Gp(t,e).flags|=256),t=cC(t,e),t!==2&&(e=Io,Io=r,e!==null&&JD(e)),t}function JD(t){Io===null?Io=t:Io.push.apply(Io,t)}function a0e(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!nu(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xh(t,e){for(e&=~I5,e&=~kM,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Zl(e),n=1<<r;t[r]=-1,e&=~n}}function I7(t){if(en&6)throw Error(ht(327));b0();var e=H_(t,0);if(!(e&1))return $o(t,yi()),null;var r=cC(t,e);if(t.tag!==0&&r===2){var n=_D(t);n!==0&&(e=n,r=ZD(t,n))}if(r===1)throw r=Aw,Gp(t,0),xh(t,e),$o(t,yi()),r;if(r===6)throw Error(ht(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hp(t,Io,Kc),$o(t,yi()),null}function D5(t,e){var r=en;en|=1;try{return t(e)}finally{en=r,en===0&&(om=yi()+500,SM&&Md())}}function iv(t){Ph!==null&&Ph.tag===0&&!(en&6)&&b0();var e=en;en|=1;var r=al.transition,n=ln;try{if(al.transition=null,ln=1,t)return t()}finally{ln=n,al.transition=r,en=e,!(en&6)&&Md()}}function P5(){rs=s0.current,Pn(s0)}function Gp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Rge(r)),Di!==null)for(r=Di.return;r!==null;){var n=r;switch(d5(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Q_();break;case 3:im(),Pn(Fo),Pn(Xa),S5();break;case 5:x5(n);break;case 4:im();break;case 13:Pn(Hn);break;case 19:Pn(Hn);break;case 10:m5(n.type._context);break;case 22:case 23:P5()}r=r.return}if(la=t,Di=t=Zh(t.current,null),ka=rs=e,Hi=0,Aw=null,I5=kM=nv=0,Io=G1=null,_p!==null){for(e=0;e<_p.length;e++)if(r=_p[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}_p=null}return t}function QK(t,e){do{var r=Di;try{if(g5(),UE.current=oC,aC){for(var n=Xn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}aC=!1}if(rv=0,ia=Ui=Xn=null,z1=!1,Cw=0,T5.current=null,r===null||r.return===null){Hi=1,Aw=e,Di=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=ka,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=m7(o);if(d!==null){d.flags&=-257,y7(d,o,s,a,e),d.mode&1&&g7(a,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){g7(a,u,e),L5();break e}l=Error(ht(426))}}else if(jn&&s.mode&1){var g=m7(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),y7(g,o,s,a,e),p5(am(l,s));break e}}a=l=am(l,s),Hi!==4&&(Hi=2),G1===null?G1=[a]:G1.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=LK(a,l,e);u7(a,m);break e;case 1:s=l;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Kh===null||!Kh.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=RK(a,s,e);u7(a,b);break e}}a=a.return}while(a!==null)}eQ(r)}catch(x){e=x,Di===r&&r!==null&&(Di=r=r.return);continue}break}while(!0)}function ZK(){var t=sC.current;return sC.current=oC,t===null?oC:t}function L5(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),la===null||!(nv&268435455)&&!(kM&268435455)||xh(la,ka)}function cC(t,e){var r=en;en|=2;var n=ZK();(la!==t||ka!==e)&&(Kc=null,Gp(t,e));do try{o0e();break}catch(i){QK(t,i)}while(!0);if(g5(),en=r,sC.current=n,Di!==null)throw Error(ht(261));return la=null,ka=0,Hi}function o0e(){for(;Di!==null;)JK(Di)}function s0e(){for(;Di!==null&&!Dve();)JK(Di)}function JK(t){var e=rQ(t.alternate,t,rs);t.memoizedProps=t.pendingProps,e===null?eQ(t):Di=e,T5.current=null}function eQ(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=e0e(r,e),r!==null){r.flags&=32767,Di=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hi=6,Di=null;return}}else if(r=Jge(r,e,rs),r!==null){Di=r;return}if(e=e.sibling,e!==null){Di=e;return}Di=e=t}while(e!==null);Hi===0&&(Hi=5)}function hp(t,e,r){var n=ln,i=al.transition;try{al.transition=null,ln=1,l0e(t,e,r,n)}finally{al.transition=i,ln=n}return null}function l0e(t,e,r,n){do b0();while(Ph!==null);if(en&6)throw Error(ht(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ht(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Gve(t,a),t===la&&(Di=la=null,ka=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hx||(Hx=!0,nQ(V_,function(){return b0(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=al.transition,al.transition=null;var o=ln;ln=1;var s=en;en|=4,T5.current=null,r0e(t,r),YK(r,t),Age(ID),X_=!!TD,ID=TD=null,t.current=r,n0e(r),Pve(),en=s,ln=o,al.transition=a}else t.current=r;if(Hx&&(Hx=!1,Ph=t,uC=i),a=t.pendingLanes,a===0&&(Kh=null),Nve(r.stateNode),$o(t,yi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(lC)throw lC=!1,t=KD,KD=null,t;return uC&1&&t.tag!==0&&b0(),a=t.pendingLanes,a&1?t===QD?U1++:(U1=0,QD=t):U1=0,Md(),null}function b0(){if(Ph!==null){var t=Pq(uC),e=al.transition,r=ln;try{if(al.transition=null,ln=16>t?16:t,Ph===null)var n=!1;else{if(t=Ph,Ph=null,uC=0,en&6)throw Error(ht(331));var i=en;for(en|=4,Bt=t.current;Bt!==null;){var a=Bt,o=a.child;if(Bt.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Bt=u;Bt!==null;){var c=Bt;switch(c.tag){case 0:case 11:case 15:j1(8,c,a)}var f=c.child;if(f!==null)f.return=c,Bt=f;else for(;Bt!==null;){c=Bt;var h=c.sibling,d=c.return;if(VK(c),c===u){Bt=null;break}if(h!==null){h.return=d,Bt=h;break}Bt=d}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Bt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Bt=o;else e:for(;Bt!==null;){if(a=Bt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:j1(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,Bt=m;break e}Bt=a.return}}var y=t.current;for(Bt=y;Bt!==null;){o=Bt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Bt=w;else e:for(o=y;Bt!==null;){if(s=Bt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:CM(9,s)}}catch(x){ai(s,s.return,x)}if(s===o){Bt=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,Bt=b;break e}Bt=s.return}}if(en=i,Md(),ac&&typeof ac.onPostCommitFiberRoot=="function")try{ac.onPostCommitFiberRoot(mM,t)}catch{}n=!0}return n}finally{ln=r,al.transition=e}}return!1}function O7(t,e,r){e=am(r,e),e=LK(t,e,1),t=qh(t,e,1),e=oo(),t!==null&&(z2(t,1,e),$o(t,e))}function ai(t,e,r){if(t.tag===3)O7(t,t,r);else for(;e!==null;){if(e.tag===3){O7(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kh===null||!Kh.has(n))){t=am(r,t),t=RK(e,t,1),e=qh(e,t,1),t=oo(),e!==null&&(z2(e,1,t),$o(e,t));break}}e=e.return}}function u0e(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=oo(),t.pingedLanes|=t.suspendedLanes&r,la===t&&(ka&r)===r&&(Hi===4||Hi===3&&(ka&130023424)===ka&&500>yi()-O5?Gp(t,0):I5|=r),$o(t,e)}function tQ(t,e){e===0&&(t.mode&1?(e=Nx,Nx<<=1,!(Nx&130023424)&&(Nx=4194304)):e=1);var r=oo();t=mf(t,e),t!==null&&(z2(t,e,r),$o(t,r))}function c0e(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),tQ(t,r)}function f0e(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ht(314))}n!==null&&n.delete(e),tQ(t,r)}var rQ;rQ=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fo.current)Lo=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Lo=!1,Zge(t,e,r);Lo=!!(t.flags&131072)}else Lo=!1,jn&&e.flags&1048576&&aK(e,eC,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;VE(t,e),t=e.pendingProps;var i=tm(e,Xa.current);w0(e,r),i=_5(null,e,n,t,i,r);var a=C5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bo(n)?(a=!0,Z_(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,w5(e),i.updater=EM,e.stateNode=i,i._reactInternals=e,$D(e,n,t,r),e=GD(null,e,n,!0,a,r)):(e.tag=0,jn&&a&&h5(e),eo(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(VE(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=d0e(n),t=Bl(n,t),i){case 0:e=jD(null,e,n,t,r);break e;case 1:e=x7(null,e,n,t,r);break e;case 11:e=w7(null,e,n,t,r);break e;case 14:e=b7(null,e,n,Bl(n.type,t),r);break e}throw Error(ht(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bl(n,i),jD(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bl(n,i),x7(t,e,n,i,r);case 3:e:{if($K(e),t===null)throw Error(ht(387));n=e.pendingProps,a=e.memoizedState,i=a.element,uK(t,e),nC(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=am(Error(ht(423)),e),e=S7(t,e,n,r,i);break e}else if(n!==i){i=am(Error(ht(424)),e),e=S7(t,e,n,r,i);break e}else for(fs=Yh(e.stateNode.containerInfo.firstChild),ys=e,jn=!0,Ul=null,r=dK(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rm(),n===i){e=yf(t,e,r);break e}eo(t,e,n,r)}e=e.child}return e;case 5:return pK(e),t===null&&ND(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,OD(n,i)?o=null:a!==null&&OD(n,a)&&(e.flags|=32),BK(t,e),eo(t,e,o,r),e.child;case 6:return t===null&&ND(e),null;case 13:return zK(t,e,r);case 4:return b5(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=nm(e,null,n,r):eo(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bl(n,i),w7(t,e,n,i,r);case 7:return eo(t,e,e.pendingProps,r),e.child;case 8:return eo(t,e,e.pendingProps.children,r),e.child;case 12:return eo(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,bn(tC,n._currentValue),n._currentValue=o,a!==null)if(nu(a.value,o)){if(a.children===i.children&&!Fo.current){e=yf(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=cf(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),FD(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ht(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),FD(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}eo(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,w0(e,r),i=cl(i),n=n(i),e.flags|=1,eo(t,e,n,r),e.child;case 14:return n=e.type,i=Bl(n,e.pendingProps),i=Bl(n.type,i),b7(t,e,n,i,r);case 15:return NK(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bl(n,i),VE(t,e),e.tag=1,Bo(n)?(t=!0,Z_(e)):t=!1,w0(e,r),fK(e,n,i),$D(e,n,i,r),GD(null,e,n,!0,t,r);case 19:return jK(t,e,r);case 22:return FK(t,e,r)}throw Error(ht(156,e.tag))};function nQ(t,e){return Tq(t,e)}function h0e(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(t,e,r,n){return new h0e(t,e,r,n)}function R5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d0e(t){if(typeof t=="function")return R5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e5)return 11;if(t===t5)return 14}return 2}function Zh(t,e){var r=t.alternate;return r===null?(r=nl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function YE(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")R5(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qg:return Up(r.children,i,a,e);case JN:o=8,i|=8;break;case uD:return t=nl(12,r,e,i|2),t.elementType=uD,t.lanes=a,t;case cD:return t=nl(13,r,e,i),t.elementType=cD,t.lanes=a,t;case fD:return t=nl(19,r,e,i),t.elementType=fD,t.lanes=a,t;case hq:return MM(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cq:o=10;break e;case fq:o=9;break e;case e5:o=11;break e;case t5:o=14;break e;case hh:o=16,n=null;break e}throw Error(ht(130,t==null?t:typeof t,""))}return e=nl(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Up(t,e,r,n){return t=nl(7,t,n,e),t.lanes=r,t}function MM(t,e,r,n){return t=nl(22,t,n,e),t.elementType=hq,t.lanes=r,t.stateNode={isHidden:!1},t}function NI(t,e,r){return t=nl(6,t,null,e),t.lanes=r,t}function FI(t,e,r){return e=nl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p0e(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mI(0),this.expirationTimes=mI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mI(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function N5(t,e,r,n,i,a,o,s,l){return t=new p0e(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=nl(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},w5(a),t}function v0e(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function iQ(t){if(!t)return ad;t=t._reactInternals;e:{if(kv(t)!==t||t.tag!==1)throw Error(ht(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ht(171))}if(t.tag===1){var r=t.type;if(Bo(r))return nK(t,r,e)}return e}function aQ(t,e,r,n,i,a,o,s,l){return t=N5(r,n,!0,t,i,a,o,s,l),t.context=iQ(null),r=t.current,n=oo(),i=Qh(r),a=cf(n,i),a.callback=e??null,qh(r,a,i),t.current.lanes=i,z2(t,i,n),$o(t,n),t}function AM(t,e,r,n){var i=e.current,a=oo(),o=Qh(i);return r=iQ(r),e.context===null?e.context=r:e.pendingContext=r,e=cf(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qh(i,e,o),t!==null&&(Jl(t,i,o,a),GE(t,i,o)),o}function fC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D7(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function F5(t,e){D7(t,e),(t=t.alternate)&&D7(t,e)}function g0e(){return null}var oQ=typeof reportError=="function"?reportError:function(t){console.error(t)};function B5(t){this._internalRoot=t}TM.prototype.render=B5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ht(409));AM(t,e,null,null)};TM.prototype.unmount=B5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;iv(function(){AM(null,t,null,null)}),e[gf]=null}};function TM(t){this._internalRoot=t}TM.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nq();t={blockedOn:null,target:t,priority:e};for(var r=0;r<bh.length&&e!==0&&e<bh[r].priority;r++);bh.splice(r,0,t),r===0&&Bq(t)}};function $5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function IM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function P7(){}function m0e(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=fC(o);a.call(u)}}var o=aQ(e,n,t,0,null,!1,!1,"",P7);return t._reactRootContainer=o,t[gf]=o.current,bw(t.nodeType===8?t.parentNode:t),iv(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=fC(l);s.call(u)}}var l=N5(t,0,!1,null,null,!1,!1,"",P7);return t._reactRootContainer=l,t[gf]=l.current,bw(t.nodeType===8?t.parentNode:t),iv(function(){AM(e,l,r,n)}),l}function OM(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=fC(o);s.call(l)}}AM(e,o,t,i)}else o=m0e(r,e,t,i,n);return fC(o)}Lq=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=h1(e.pendingLanes);r!==0&&(i5(e,r|1),$o(e,yi()),!(en&6)&&(om=yi()+500,Md()))}break;case 13:iv(function(){var n=mf(t,1);if(n!==null){var i=oo();Jl(n,t,1,i)}}),F5(t,1)}};a5=function(t){if(t.tag===13){var e=mf(t,134217728);if(e!==null){var r=oo();Jl(e,t,134217728,r)}F5(t,134217728)}};Rq=function(t){if(t.tag===13){var e=Qh(t),r=mf(t,e);if(r!==null){var n=oo();Jl(r,t,e,n)}F5(t,e)}};Nq=function(){return ln};Fq=function(t,e){var r=ln;try{return ln=t,e()}finally{ln=r}};xD=function(t,e,r){switch(e){case"input":if(pD(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=xM(n);if(!i)throw Error(ht(90));pq(n),pD(n,i)}}}break;case"textarea":gq(t,r);break;case"select":e=r.value,e!=null&&v0(t,!!r.multiple,e,!1)}};Eq=D5;_q=iv;var y0e={usingClientEntryPoint:!1,Events:[G2,t0,xM,xq,Sq,D5]},Ry={findFiberByHostInstance:Ep,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},w0e={bundleType:Ry.bundleType,version:Ry.version,rendererPackageName:Ry.rendererPackageName,rendererConfig:Ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mq(t),t===null?null:t.stateNode},findFiberByHostInstance:Ry.findFiberByHostInstance||g0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xx.isDisabled&&Xx.supportsFiber)try{mM=Xx.inject(w0e),ac=Xx}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y0e;As.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$5(e))throw Error(ht(200));return v0e(t,e,null,r)};As.createRoot=function(t,e){if(!$5(t))throw Error(ht(299));var r=!1,n="",i=oQ;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=N5(t,1,!1,null,null,r,!1,n,i),t[gf]=e.current,bw(t.nodeType===8?t.parentNode:t),new B5(e)};As.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ht(188)):(t=Object.keys(t).join(","),Error(ht(268,t)));return t=Mq(e),t=t===null?null:t.stateNode,t};As.flushSync=function(t){return iv(t)};As.hydrate=function(t,e,r){if(!IM(e))throw Error(ht(200));return OM(null,t,e,!0,r)};As.hydrateRoot=function(t,e,r){if(!$5(t))throw Error(ht(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=oQ;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=aQ(e,null,t,1,r??null,i,!1,a,o),t[gf]=e.current,bw(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new TM(e)};As.render=function(t,e,r){if(!IM(e))throw Error(ht(200));return OM(null,t,e,!1,r)};As.unmountComponentAtNode=function(t){if(!IM(t))throw Error(ht(40));return t._reactRootContainer?(iv(function(){OM(null,null,t,!1,function(){t._reactRootContainer=null,t[gf]=null})}),!0):!1};As.unstable_batchedUpdates=D5;As.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!IM(r))throw Error(ht(200));if(t==null||t._reactInternals===void 0)throw Error(ht(38));return OM(t,e,r,!1,n)};As.version="18.2.0-next-9e3b772b8-20220608";function sQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sQ)}catch(t){console.error(t)}}sQ(),aq.exports=As;var lQ=aq.exports,L7=lQ;sD.createRoot=L7.createRoot,sD.hydrateRoot=L7.hydrateRoot;function eP(){return eP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eP.apply(this,arguments)}function b0e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}let sn=class uQ{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=sm(this,e,r);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),Wu.from(i,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=sm(this,e,r);let n=[];return this.decompose(e,r,n,0),Wu.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new W1(this),a=new W1(e);for(let o=r,s=r;;){if(i.next(o),a.next(o),o=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(e=1){return new W1(this,e)}iterRange(e,r=this.length){return new cQ(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new fQ(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?uQ.empty:e.length<=32?new mi(e):Wu.from(mi.split(e,[]))}};class mi extends sn{constructor(e,r=x0e(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,i){for(let a=0;;a++){let o=this.text[a],s=i+o.length;if((r?n:s)>=e)return new S0e(i,s,n,o);i=s+1,n++}}decompose(e,r,n,i){let a=e<=0&&r>=this.length?this:new mi(R7(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),s=qE(a.text,o.text.slice(),0,a.length);if(s.length<=32)n.push(new mi(s,o.length+a.length));else{let l=s.length>>1;n.push(new mi(s.slice(0,l)),new mi(s.slice(l)))}}else n.push(a)}replace(e,r,n){if(!(n instanceof mi))return super.replace(e,r,n);[e,r]=sm(this,e,r);let i=qE(this.text,qE(n.text,R7(this.text,0,e)),r),a=this.length+n.length-(r-e);return i.length<=32?new mi(i,a):Wu.from(mi.split(i,[]),a)}sliceString(e,r=this.length,n=`
`){[e,r]=sm(this,e,r);let i="";for(let a=0,o=0;a<=r&&o<this.text.length;o++){let s=this.text[o],l=a+s.length;a>e&&o&&(i+=n),e<l&&r>a&&(i+=s.slice(Math.max(0,e-a),r-a)),a=l+1}return i}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(r.push(new mi(n,i)),n=[],i=-1);return i>-1&&r.push(new mi(n,i)),r}}class Wu extends sn{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,i){for(let a=0;;a++){let o=this.children[a],s=i+o.length,l=n+o.lines-1;if((r?l:s)>=e)return o.lineInner(e,r,n,i);i=s+1,n=l+1}}decompose(e,r,n,i){for(let a=0,o=0;o<=r&&a<this.children.length;a++){let s=this.children[a],l=o+s.length;if(e<=l&&r>=o){let u=i&((o<=e?1:0)|(l>=r?2:0));o>=e&&l<=r&&!u?n.push(s):s.decompose(e-o,r-o,n,u)}o=l+1}}replace(e,r,n){if([e,r]=sm(this,e,r),n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let o=this.children[i],s=a+o.length;if(e>=a&&r<=s){let l=o.replace(e-a,r-a,n),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new Wu(c,this.length-(r-e)+n.length)}return super.replace(a,s,l)}a=s+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=sm(this,e,r);let i="";for(let a=0,o=0;a<this.children.length&&o<=r;a++){let s=this.children[a],l=o+s.length;o>e&&a&&(i+=n),e<l&&r>o&&(i+=s.sliceString(e-o,r-o,n)),o=l+1}return i}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof Wu))return 0;let n=0,[i,a,o,s]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=r,a+=r){if(i==o||a==s)return n;let l=this.children[i],u=e.children[a];if(l!=u)return n+l.scanIdentical(u,r);n+=l.length+1}}static from(e,r=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let p of e)p.flatten(d);return new mi(d,r)}let i=Math.max(32,n>>5),a=i<<1,o=i>>1,s=[],l=0,u=-1,c=[];function f(d){let p;if(d.lines>a&&d instanceof Wu)for(let v of d.children)f(v);else d.lines>o&&(l>o||!l)?(h(),s.push(d)):d instanceof mi&&l&&(p=c[c.length-1])instanceof mi&&d.lines+p.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new mi(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,u+=d.length+1,c.push(d))}function h(){l!=0&&(s.push(c.length==1?c[0]:Wu.from(c,u)),u=-1,l=c.length=0)}for(let d of e)f(d);return h(),s.length==1?s[0]:new Wu(s,r)}}sn.empty=new mi([""],0);function x0e(t){let e=-1;for(let r of t)e+=r.length+1;return e}function qE(t,e,r=0,n=1e9){for(let i=0,a=0,o=!0;a<t.length&&i<=n;a++){let s=t[a],l=i+s.length;l>=r&&(l>n&&(s=s.slice(0,n-i)),i<r&&(s=s.slice(r-i)),o?(e[e.length-1]+=s,o=!1):e.push(s)),i=l+1}return e}function R7(t,e,r){return qE(t,[""],e,r)}class W1{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof mi?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],o=a>>1,s=i instanceof mi?i.text.length:i.children.length;if(o==(r>0?s:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof mi){let l=i.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,e))return this.value=e==0?l:r>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(r<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof mi?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class cQ{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new W1(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class fQ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:i}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(sn.prototype[Symbol.iterator]=function(){return this.iter()},W1.prototype[Symbol.iterator]=cQ.prototype[Symbol.iterator]=fQ.prototype[Symbol.iterator]=function(){return this});let S0e=class{constructor(e,r,n,i){this.from=e,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}};function sm(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}let x0="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<x0.length;t++)x0[t]+=x0[t-1];function E0e(t){for(let e=1;e<x0.length;e+=2)if(x0[e]>t)return x0[e-1]<=t;return!1}function N7(t){return t>=127462&&t<=127487}const F7=8205;function Ca(t,e,r=!0,n=!0){return(r?hQ:_0e)(t,e,n)}function hQ(t,e,r){if(e==t.length)return e;e&&dQ(t.charCodeAt(e))&&pQ(t.charCodeAt(e-1))&&e--;let n=xa(t,e);for(e+=tl(n);e<t.length;){let i=xa(t,e);if(n==F7||i==F7||r&&E0e(i))e+=tl(i),n=i;else if(N7(i)){let a=0,o=e-2;for(;o>=0&&N7(xa(t,o));)a++,o-=2;if(a%2==0)break;e+=2}else break}return e}function _0e(t,e,r){for(;e>0;){let n=hQ(t,e-2,r);if(n<e)return n;e--}return 0}function dQ(t){return t>=56320&&t<57344}function pQ(t){return t>=55296&&t<56320}function xa(t,e){let r=t.charCodeAt(e);if(!pQ(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return dQ(n)?(r-55296<<10)+(n-56320)+65536:r}function z5(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function tl(t){return t<65536?1:2}const tP=/\r\n?|\n/;var ro=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ro||(ro={}));class sc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,i=0;r<this.sections.length;){let a=this.sections[r++],o=this.sections[r++];o<0?(e(n,i,a),i+=a):i+=o,n+=a}}iterChangedRanges(e,r=!1){rP(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?e.push(n,i):e.push(i,n)}return new sc(e)}composeDesc(e){return this.empty?e:e.empty?this:vQ(this,e)}mapDesc(e,r=!1){return e.empty?this:nP(this,e,r)}mapPos(e,r=-1,n=ro.Simple){let i=0,a=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],u=i+s;if(l<0){if(u>e)return a+(e-i);a+=s}else{if(n!=ro.Simple&&u>=e&&(n==ro.TrackDel&&i<e&&u>e||n==ro.TrackBefore&&i<e||n==ro.TrackAfter&&u>e))return null;if(u>e||u==e&&r<0&&!s)return e==i||r<0?a:a+l;a+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,r=e){for(let n=0,i=0;n<this.sections.length&&i<=r;){let a=this.sections[n++],o=this.sections[n++],s=i+a;if(o>=0&&i<=r&&s>=e)return i<e&&s>r?"cover":!0;i=s}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new sc(e)}static create(e){return new sc(e)}}class Wi extends sc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return rP(this,(r,n,i,a,o)=>e=e.replace(i,i+(n-r),o),!1),e}mapDesc(e,r=!1){return nP(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let i=0,a=0;i<r.length;i+=2){let o=r[i],s=r[i+1];if(s>=0){r[i]=s,r[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(sn.empty);n.push(o?e.slice(a,a+o):sn.empty)}a+=o}return new Wi(r,n)}compose(e){return this.empty?e:e.empty?this:vQ(this,e,!0)}map(e,r=!1){return e.empty?this:nP(this,e,r,!0)}iterChanges(e,r=!1){rP(this,e,r)}get desc(){return sc.create(this.sections)}filter(e){let r=[],n=[],i=[],a=new Tw(this);e:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&a.len==0;){if(a.done)break e;let c=Math.min(a.len,l-s);ja(i,c,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;ja(r,c,f),f>0&&Lh(n,r,a.text),a.forward(c),s+=c}let u=e[o++];for(;s<u;){if(a.done)break e;let c=Math.min(a.len,u-s);ja(r,c,-1),ja(i,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),s+=c}}return{changes:new Wi(r,n),filtered:sc.create(i)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let i=[],a=[],o=0,s=null;function l(c=!1){if(!c&&!i.length)return;o<r&&ja(i,r-o,-1);let f=new Wi(i,a);s=s?s.compose(f.map(s)):f,i=[],a=[],o=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof Wi){if(c.length!=r)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${r})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>r)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${r})`);let p=d?typeof d=="string"?sn.of(d.split(n||tP)):d:sn.empty,v=p.length;if(f==h&&v==0)return;f<o&&l(),f>o&&ja(i,f-o,-1),ja(i,h-f,v),Lh(a,i,p),o=h}}return u(e),l(!s),s}static empty(e){return new Wi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")r.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,s)=>s&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)r.push(a[0],0);else{for(;n.length<i;)n.push(sn.empty);n[i]=sn.of(a.slice(1)),r.push(a[0],n[i].length)}}}return new Wi(r,n)}static createSet(e,r){return new Wi(e,r)}}function ja(t,e,r,n=!1){if(e==0&&r<=0)return;let i=t.length-2;i>=0&&r<=0&&r==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=r:n?(t[i]+=e,t[i+1]+=r):t.push(e,r)}function Lh(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(sn.empty);t.push(r)}}function rP(t,e,r){let n=t.inserted;for(let i=0,a=0,o=0;o<t.sections.length;){let s=t.sections[o++],l=t.sections[o++];if(l<0)i+=s,a+=s;else{let u=i,c=a,f=sn.empty;for(;u+=s,c+=l,l&&n&&(f=f.append(n[o-2>>1])),!(r||o==t.sections.length||t.sections[o+1]<0);)s=t.sections[o++],l=t.sections[o++];e(i,u,a,c,f),i=u,a=c}}}function nP(t,e,r,n=!1){let i=[],a=n?[]:null,o=new Tw(t),s=new Tw(e);for(let l=-1;;)if(o.ins==-1&&s.ins==-1){let u=Math.min(o.len,s.len);ja(i,u,-1),o.forward(u),s.forward(u)}else if(s.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(s.len<o.len||s.len==o.len&&!r))){let u=s.len;for(ja(i,s.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(ja(i,0,o.ins),a&&Lh(a,i,o.text),l=o.i),o.forward(c),u-=c}s.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(s.ins==-1){let f=Math.min(c,s.len);u+=f,c-=f,s.forward(f)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;ja(i,u,l<o.i?o.ins:0),a&&l<o.i&&Lh(a,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&s.done)return a?Wi.createSet(i,a):sc.create(i);throw new Error("Mismatched change set lengths")}}function vQ(t,e,r=!1){let n=[],i=r?[]:null,a=new Tw(t),o=new Tw(e);for(let s=!1;;){if(a.done&&o.done)return i?Wi.createSet(n,i):sc.create(n);if(a.ins==0)ja(n,a.len,0,s),a.next();else if(o.len==0&&!o.done)ja(n,0,o.ins,s),i&&Lh(i,n,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),u=n.length;if(a.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;ja(n,l,c,s),i&&c&&Lh(i,n,o.text)}else o.ins==-1?(ja(n,a.off?0:a.len,l,s),i&&Lh(i,n,a.textBit(l))):(ja(n,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&Lh(i,n,o.text));s=(a.ins>l||o.ins>=0&&o.len>l)&&(s||n.length>u),a.forward2(l),o.forward(l)}}}}class Tw{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?sn.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?sn.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class kp{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new kp(n,i,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return Qe.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return Qe.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Qe.range(e.anchor,e.head)}static create(e,r,n){return new kp(e,r,n)}}class Qe{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:Qe.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Qe([this.main],0)}addRange(e,r=!0){return Qe.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,Qe.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Qe(e.ranges.map(r=>kp.fromJSON(r)),e.main)}static single(e,r=e){return new Qe([Qe.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return Qe.normalized(e.slice(),r);n=a.to}return new Qe(e,r)}static cursor(e,r=0,n,i){return kp.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,r,n,i){let a=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<e?kp.create(r,e,48|a):kp.create(e,r,(r>e?8:0)|a)}static normalized(e,r=0){let n=e[r];e.sort((i,a)=>i.from-a.from),r=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],o=e[i-1];if(a.empty?a.from<=o.to:a.from<o.to){let s=o.from,l=Math.max(a.to,o.to);i<=r&&r--,e.splice(--i,2,a.anchor>a.head?Qe.range(l,s):Qe.range(s,l))}}return new Qe(e,r)}}function gQ(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let j5=0;class Gt{constructor(e,r,n,i,a){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=j5++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Gt(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:G5),!!e.static,e.enables)}of(e){return new KE([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new KE(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new KE(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function G5(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class KE{constructor(e,r,n,i){this.dependencies=e,this.facet=r,this.type=n,this.value=i,this.id=j5++}dynamicSlot(e){var r;let n=this.value,i=this.facet.compareInput,a=this.id,o=e[a]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((r=e[f.id])!==null&&r!==void 0?r:1)&1||c.push(e[f.id]);return{create(f){return f.values[o]=n(f),1},update(f,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||iP(f,c)){let d=n(f);if(s?!B7(d,f.values[o],i):!i(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[a];if(p!=null){let v=dC(h,p);if(this.dependencies.every(g=>g instanceof Gt?h.facet(g)===f.facet(g):g instanceof Ia?h.field(g,!1)==f.field(g,!1):!0)||(s?B7(d=n(f),v,i):i(d=n(f),v)))return f.values[o]=v,0}else d=n(f);return f.values[o]=d,1}}}}function B7(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function iP(t,e){let r=!1;for(let n of e)V1(t,n)&1&&(r=!0);return r}function C0e(t,e,r){let n=r.map(l=>t[l.id]),i=r.map(l=>l.type),a=n.filter(l=>!(l&1)),o=t[e.id]>>1;function s(l){let u=[];for(let c=0;c<n.length;c++){let f=dC(l,n[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(l){for(let u of n)V1(l,u);return l.values[o]=s(l),1},update(l,u){if(!iP(l,a))return 0;let c=s(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=iP(l,n),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&G5(r,f))return l.values[o]=h,0;let d=s(l);return e.compare(d,h)?(l.values[o]=h,0):(l.values[o]=d,1)}}}const $7=Gt.define({static:!0});class Ia{constructor(e,r,n,i,a){this.id=e,this.createF=r,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let r=new Ia(j5++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet($7).find(n=>n.field==this);return((r==null?void 0:r.create)||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let a=n.values[r],o=this.updateF(a,i);return this.compareF(a,o)?0:(n.values[r]=o,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}init(e){return[this,$7.of({field:this,create:e})]}get extension(){return this}}const bp={lowest:4,low:3,default:2,high:1,highest:0};function Ny(t){return e=>new mQ(e,t)}const Wm={highest:Ny(bp.highest),high:Ny(bp.high),default:Ny(bp.default),low:Ny(bp.low),lowest:Ny(bp.lowest)};class mQ{constructor(e,r){this.inner=e,this.prec=r}}class DM{of(e){return new aP(this,e)}reconfigure(e){return DM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class aP{constructor(e,r){this.compartment=e,this.inner=r}}class hC{constructor(e,r,n,i,a,o){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let i=[],a=Object.create(null),o=new Map;for(let h of k0e(e,r,o))h instanceof Ia?i.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let s=Object.create(null),l=[],u=[];for(let h of i)s[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=n==null?void 0:n.config.facets;for(let h in a){let d=a[h],p=d[0].facet,v=c&&c[h]||[];if(d.every(g=>g.type==0))if(s[p.id]=l.length<<1|1,G5(v,d))l.push(n.facet(p));else{let g=p.combine(d.map(m=>m.value));l.push(n&&p.compare(g,n.facet(p))?n.facet(p):g)}else{for(let g of d)g.type==0?(s[g.id]=l.length<<1|1,l.push(g.value)):(s[g.id]=u.length<<1,u.push(m=>g.dynamicSlot(m)));s[p.id]=u.length<<1,u.push(g=>C0e(g,p,d))}}let f=u.map(h=>h(s));return new hC(e,o,f,s,l,a)}}function k0e(t,e,r){let n=[[],[],[],[],[]],i=new Map;function a(o,s){let l=i.get(o);if(l!=null){if(l<=s)return;let u=n[l].indexOf(o);u>-1&&n[l].splice(u,1),o instanceof aP&&r.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let u of o)a(u,s);else if(o instanceof aP){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;r.set(o.compartment,u),a(u,s)}else if(o instanceof mQ)a(o.inner,o.prec);else if(o instanceof Ia)n[s].push(o),o.provides&&a(o.provides,s);else if(o instanceof KE)n[s].push(o),o.facet.extensions&&a(o.facet.extensions,bp.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,s)}}return a(t,bp.default),n.reduce((o,s)=>o.concat(s))}function V1(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let i=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|i}function dC(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yQ=Gt.define(),oP=Gt.define({combine:t=>t.some(e=>e),static:!0}),wQ=Gt.define({combine:t=>t.length?t[0]:void 0,static:!0}),bQ=Gt.define(),xQ=Gt.define(),SQ=Gt.define(),EQ=Gt.define({combine:t=>t.length?t[0]:!1});let wc=class{constructor(e,r){this.type=e,this.value=r}static define(){return new M0e}};class M0e{of(e){return new wc(this,e)}}class A0e{constructor(e){this.map=e}of(e){return new Fr(this,e)}}class Fr{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Fr(this.type,r)}is(e){return this.type==e}static define(e={}){return new A0e(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(r);a&&n.push(a)}return n}}Fr.reconfigure=Fr.define();Fr.appendConfig=Fr.define();class Xi{constructor(e,r,n,i,a,o){this.startState=e,this.changes=r,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,n&&gQ(n,r.newLength),a.some(s=>s.type==Xi.time)||(this.annotations=a.concat(Xi.time.of(Date.now())))}static create(e,r,n,i,a,o){return new Xi(e,r,n,i,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Xi.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Xi.time=wc.define();Xi.userEvent=wc.define();Xi.addToHistory=wc.define();Xi.remote=wc.define();function T0e(t,e){let r=[];for(let n=0,i=0;;){let a,o;if(n<t.length&&(i==e.length||e[i]>=t[n]))a=t[n++],o=t[n++];else if(i<e.length)a=e[i++],o=e[i++];else return r;!r.length||r[r.length-1]<a?r.push(a,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function _Q(t,e,r){var n;let i,a,o;return r?(i=e.changes,a=Wi.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),a=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(a):(n=t.selection)===null||n===void 0?void 0:n.map(i),effects:Fr.mapEffects(t.effects,i).concat(Fr.mapEffects(e.effects,a)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function sP(t,e,r){let n=e.selection,i=S0(e.annotations);return e.userEvent&&(i=i.concat(Xi.userEvent.of(e.userEvent))),{changes:e.changes instanceof Wi?e.changes:Wi.of(e.changes||[],r,t.facet(wQ)),selection:n&&(n instanceof Qe?n:Qe.single(n.anchor,n.head)),effects:S0(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function CQ(t,e,r){let n=sP(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(r=!1);let o=!!e[a].sequential;n=_Q(n,sP(t,e[a],o?n.changes.newLength:t.doc.length),o)}let i=Xi.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return O0e(r?I0e(i):i)}function I0e(t){let e=t.startState,r=!0;for(let i of e.facet(bQ)){let a=i(t);if(a===!1){r=!1;break}Array.isArray(a)&&(r=r===!0?a:T0e(r,a))}if(r!==!0){let i,a;if(r===!1)a=t.changes.invertedDesc,i=Wi.empty(e.doc.length);else{let o=t.changes.filter(r);i=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}t=Xi.create(e,i,t.selection&&t.selection.map(a),Fr.mapEffects(t.effects,a),t.annotations,t.scrollIntoView)}let n=e.facet(xQ);for(let i=n.length-1;i>=0;i--){let a=n[i](t);a instanceof Xi?t=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Xi?t=a[0]:t=CQ(e,S0(a),!1)}return t}function O0e(t){let e=t.startState,r=e.facet(SQ),n=t;for(let i=r.length-1;i>=0;i--){let a=r[i](t);a&&Object.keys(a).length&&(n=_Q(n,sP(e,a,t.changes.newLength),!0))}return n==t?t:Xi.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const D0e=[];function S0(t){return t==null?D0e:Array.isArray(t)?t:[t]}var Gn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Gn||(Gn={}));const P0e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let lP;try{lP=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function L0e(t){if(lP)return lP.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||P0e.test(r)))return!0}return!1}function R0e(t){return e=>{if(!/\S/.test(e))return Gn.Space;if(L0e(e))return Gn.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return Gn.Word;return Gn.Other}}class Zr{constructor(e,r,n,i,a,o){this.config=e,this.doc=r,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)V1(this,s<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return V1(this,n),dC(this,n)}update(...e){return CQ(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:i}=r;for(let s of e.effects)s.is(DM.reconfigure)?(r&&(i=new Map,r.compartments.forEach((l,u)=>i.set(u,l)),r=null),i.set(s.value.compartment,s.value.extension)):s.is(Fr.reconfigure)?(r=null,n=s.value):s.is(Fr.appendConfig)&&(r=null,n=S0(n).concat(s.value));let a;r?a=e.startState.values.slice():(r=hC.resolve(n,i,this),a=new Zr(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(oP)?e.newSelection:e.newSelection.asSingle();new Zr(r,e.newDoc,o,a,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:Qe.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),i=this.changes(n.changes),a=[n.range],o=S0(n.effects);for(let s=1;s<r.ranges.length;s++){let l=e(r.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<s;h++)a[h]=a[h].map(c);let f=i.mapDesc(u,!0);a.push(l.range.map(f)),i=i.compose(c),o=Fr.mapEffects(o,c).concat(Fr.mapEffects(S0(l.effects),f))}return{changes:i,selection:Qe.create(a,r.mainIndex),effects:o}}changes(e=[]){return e instanceof Wi?e:Wi.of(e,this.doc.length,this.facet(Zr.lineSeparator))}toText(e){return sn.of(e.split(this.facet(Zr.lineSeparator)||tP))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(V1(this,r),dC(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Ia&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let o=n[a],s=e[a];i.push(o.init(l=>o.spec.fromJSON(s,l)))}}return Zr.create({doc:e.doc,selection:Qe.fromJSON(e.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(e={}){let r=hC.resolve(e.extensions||[],new Map),n=e.doc instanceof sn?e.doc:sn.of((e.doc||"").split(r.staticFacet(Zr.lineSeparator)||tP)),i=e.selection?e.selection instanceof Qe?e.selection:Qe.single(e.selection.anchor,e.selection.head):Qe.single(0);return gQ(i,n.length),r.staticFacet(oP)||(i=i.asSingle()),new Zr(r,n,i,r.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(Zr.tabSize)}get lineBreak(){return this.facet(Zr.lineSeparator)||`
`}get readOnly(){return this.facet(EQ)}phrase(e,...r){for(let n of this.facet(Zr.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>r.length?n:r[a-1]})),e}languageDataAt(e,r,n=-1){let i=[];for(let a of this.facet(yQ))for(let o of a(this,r,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return R0e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let l=Ca(r,o,!1);if(a(r.slice(l,o))!=Gn.Word)break;o=l}for(;s<i;){let l=Ca(r,s);if(a(r.slice(s,l))!=Gn.Word)break;s=l}return o==s?null:Qe.range(o+n,s+n)}}Zr.allowMultipleSelections=oP;Zr.tabSize=Gt.define({combine:t=>t.length?t[0]:4});Zr.lineSeparator=wQ;Zr.readOnly=EQ;Zr.phrases=Gt.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(i=>t[i]==e[i])}});Zr.languageData=yQ;Zr.changeFilter=bQ;Zr.transactionFilter=xQ;Zr.transactionExtender=SQ;DM.reconfigure=Fr.define();function bc(t,e,r={}){let n={};for(let i of t)for(let a of Object.keys(i)){let o=i[a],s=n[a];if(s===void 0)n[a]=o;else if(!(s===o||o===void 0))if(Object.hasOwnProperty.call(r,a))n[a]=r[a](s,o);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class av{eq(e){return this==e}range(e,r=e){return uP.create(e,r,this)}}av.prototype.startSide=av.prototype.endSide=0;av.prototype.point=!1;av.prototype.mapMode=ro.TrackDel;let uP=class kQ{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new kQ(e,r,n)}};function cP(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class U5{constructor(e,r,n,i){this.from=e,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,i=0){let a=n?this.to:this.from;for(let o=i,s=a.length;;){if(o==s)return o;let l=o+s>>1,u=a[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return u>=0?o:s;u>=0?s=l:o=l+1}}between(e,r,n,i){for(let a=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,a);a<o;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,r){let n=[],i=[],a=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,h,d;if(c==f){let p=r.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=d=p,u.startSide!=u.endSide&&(d=r.mapPos(c,u.endSide),d<h)))continue}else if(h=r.mapPos(c,u.startSide),d=r.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(s=Math.max(s,d-h)),n.push(u),i.push(h-o),a.push(d-o))}return{mapped:n.length?new U5(i,a,n,s):null,pos:o}}}class Jr{constructor(e,r,n,i){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(e,r,n,i){return new Jr(e,r,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,o=e.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(cP)),this.isEmpty)return r.length?Jr.of(r):this;let s=new MQ(this,null,-1).goto(0),l=0,u=[],c=new od;for(;s.value||l<r.length;)if(l<r.length&&(s.from-r[l].from||s.startSide-r[l].value.startSide)>=0){let f=r[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(s.chunkIndex)<r[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||a<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||a<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(uP.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Jr.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),r.push(l),n.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:f}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),r.push(c),n.push(f))}}let a=this.nextLayer.map(e);return r.length==0?a:new Jr(n,r,a||Jr.empty,i)}between(e,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],o=this.chunk[i];if(r>=a&&e<=a+o.length&&o.between(a,e-a,r-a,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Iw.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Iw.from(e).goto(r)}static compare(e,r,n,i,a=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),s=r.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),l=z7(o,s,n),u=new Fy(o,l,a),c=new Fy(s,l,a);n.iterGaps((f,h,d)=>j7(u,f,c,h,d,i)),n.empty&&n.length==0&&j7(u,0,c,0,0,i)}static eq(e,r,n=0,i){i==null&&(i=999999999);let a=e.filter(c=>!c.isEmpty&&r.indexOf(c)<0),o=r.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let s=z7(a,o),l=new Fy(a,s,0).goto(n),u=new Fy(o,s,0).goto(n);for(;;){if(l.to!=u.to||!fP(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,r,n,i,a=-1){let o=new Fy(e,null,a).goto(r),s=r,l=o.openStart;for(;;){let u=Math.min(o.to,n);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<r?c.length+1:Math.min(c.length,l);i.point(s,u,o.point,c,f,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>s&&(i.span(s,u,o.active,l),l=o.openEnd(u));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,r=!1){let n=new od;for(let i of e instanceof uP?[e]:r?N0e(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return Jr.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=Jr.empty;i=i.nextLayer)r=new Jr(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}Jr.empty=new Jr([],[],null,-1);function N0e(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(cP(e,n)>0)return t.slice().sort(cP);e=n}return t}Jr.empty.nextLayer=Jr.empty;class od{finishChunk(e){this.chunks.push(new U5(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new od)).add(e,r,n)}addInner(e,r,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(Jr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=Jr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function z7(t,e,r){let n=new Map;for(let a of t)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&n.set(a.chunk[o],a.chunkPos[o]);let i=new Set;for(let a of e)for(let o=0;o<a.chunk.length;o++){let s=n.get(a.chunk[o]);s!=null&&(r?r.mapPos(s):s)==a.chunkPos[o]&&!(r!=null&&r.touchesRange(s,s+a.chunk[o].length))&&i.add(a.chunk[o])}return i}class MQ{constructor(e,r,n,i=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Iw{constructor(e){this.heap=e}static from(e,r=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let o=e[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new MQ(o,r,n,a));return i.length==1?i[0]:new Iw(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)BI(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)BI(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),BI(this.heap,0)}}}function BI(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let i=t[n];if(n+1<t.length&&i.compare(t[n+1])>=0&&(i=t[n+1],n++),r.compare(i)<0)break;t[n]=r,t[e]=i,e=n}}class Fy{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Iw.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){Yx(this.active,e),Yx(this.activeTo,e),Yx(this.activeRank,e),this.minActive=G7(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:i,rank:a}=this.cursor;for(;r<this.activeRank.length&&(a-this.activeRank[r]||i-this.activeTo[r])>0;)r++;qx(this.active,r,n),qx(this.activeTo,r,i),qx(this.activeRank,r,a),e&&qx(e,r,this.cursor.from),this.minActive=G7(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Yx(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function j7(t,e,r,n,i,a){t.goto(e),r.goto(n);let o=n+i,s=n,l=n-e;for(;;){let u=t.to+l-r.to||t.endSide-r.endSide,c=u<0?t.to+l:r.to,f=Math.min(c,o);if(t.point||r.point?t.point&&r.point&&(t.point==r.point||t.point.eq(r.point))&&fP(t.activeForPoint(t.to),r.activeForPoint(r.to))||a.comparePoint(s,f,t.point,r.point):f>s&&!fP(t.active,r.active)&&a.compareRange(s,f,t.active,r.active),c>o)break;s=c,u<=0&&t.next(),u>=0&&r.next()}}function fP(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!t[r].eq(e[r]))return!1;return!0}function Yx(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function qx(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function G7(t,e){let r=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||t[i].endSide-t[r].endSide)<0&&(r=i,n=e[i]);return r}function Vm(t,e,r=t.length){let n=0;for(let i=0;i<r;)t.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=Ca(t,i));return n}function hP(t,e,r,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==t.length)break;a+=t.charCodeAt(i)==9?r-a%r:1,i=Ca(t,i)}return n===!0?-1:t.length}const dP="",U7=typeof Symbol>"u"?"__"+dP:Symbol.for(dP),pP=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),W7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class sd{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,s,l,u){let c=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&s==null)return l.push(o[0]+";");for(let d in s){let p=s[d];if(/&/.test(d))a(d.split(/,\s*/).map(v=>o.map(g=>v.replace(/&/,g))).reduce((v,g)=>v.concat(g)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");a(i(d),p,c,h)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((n&&!f&&!u?o.map(n):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)a(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=W7[U7]||1;return W7[U7]=e+1,dP+e.toString(36)}static mount(e,r,n){let i=e[pP],a=n&&n.nonce;i?a&&i.setNonce(a):i=new F0e(e,a),i.mount(Array.isArray(r)?r:[r])}}let V7=new Map;class F0e{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=V7.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[pP]=a;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],V7.set(n,this)}else{this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[pP]=this}mount(e){let r=this.sheet,n=0,i=0;for(let a=0;a<e.length;a++){let o=e[a],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),s==-1){if(this.modules.splice(i++,0,o),r)for(let l=0;l<o.rules.length;l++)r.insertRule(o.rules[l],n++)}else{for(;i<s;)n+=this.modules[i++].rules.length;n+=o.rules.length,i++}}if(!r){let a="";for(let o=0;o<this.modules.length;o++)a+=this.modules[o].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ld={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ow={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},B0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),$0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Sa=0;Sa<10;Sa++)ld[48+Sa]=ld[96+Sa]=String(Sa);for(var Sa=1;Sa<=24;Sa++)ld[Sa+111]="F"+Sa;for(var Sa=65;Sa<=90;Sa++)ld[Sa]=String.fromCharCode(Sa+32),Ow[Sa]=String.fromCharCode(Sa);for(var $I in ld)Ow.hasOwnProperty($I)||(Ow[$I]=ld[$I]);function z0e(t){var e=B0e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||$0e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Ow:ld)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function pC(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function vP(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function j0e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function QE(t,e){if(!e.anchorNode)return!1;try{return vP(t,e.anchorNode)}catch{return!1}}function lm(t){return t.nodeType==3?ov(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function H1(t,e,r,n){return r?H7(t,e,r,n,-1)||H7(t,e,r,n,1):!1}function Dw(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function H7(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:wf(t))){if(t.nodeName=="DIV")return!1;let a=t.parentNode;if(!a||a.nodeType!=1)return!1;e=Dw(t)+(i<0?0:1),t=a}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?wf(t):0}else return!1}}function wf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function PM(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function G0e(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function AQ(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function U0e(t,e,r,n,i,a,o,s){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==l.body,p=1,v=1;if(d)h=G0e(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:v}=AQ(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*v}}let g=0,m=0;if(i=="nearest")e.top<h.top?(m=-(h.top-e.top+o),r>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,r<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let y=e.bottom-e.top,w=h.bottom-h.top;m=(i=="center"&&y<=w?e.top+y/2-w/2:i=="start"||i=="center"&&r<0?e.top-o:e.bottom-w+o)-h.top}if(n=="nearest"?e.left<h.left?(g=-(h.left-e.left+a),r>0&&e.right>h.right+g&&(g=e.right-h.right+g+a)):e.right>h.right&&(g=e.right-h.right+a,r<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+a))):g=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==s?e.left-a:e.right-(h.right-h.left)+a)-h.left,g||m)if(d)u.scrollBy(g,m);else{let y=0,w=0;if(m){let b=c.scrollTop;c.scrollTop+=m/v,w=(c.scrollTop-b)*v}if(g){let b=c.scrollLeft;c.scrollLeft+=g/p,y=(c.scrollLeft-b)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-g)<1&&(n="nearest"),w&&Math.abs(w-m)<1&&(i="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function W0e(t){let e=t.ownerDocument;for(let r=t.parentNode;r&&r!=e.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class V0e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?wf(r):0),n,Math.min(e.focusOffset,n?wf(n):0))}set(e,r,n,i){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let yg=null;function TQ(t){if(t.setActive)return t.setActive();if(yg)return t.focus(yg);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(yg==null?{get preventScroll(){return yg={preventScroll:!0},!0}}:void 0),!yg){yg=!1;for(let r=0;r<e.length;){let n=e[r++],i=e[r++],a=e[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let X7;function ov(t,e,r=e){let n=X7||(X7=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function E0(t,e,r){let n={key:e,code:e,keyCode:r,which:r,cancelable:!0},i=new KeyboardEvent("keydown",n);i.synthetic=!0,t.dispatchEvent(i);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,t.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function H0e(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function IQ(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function X0e(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,wf(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=wf(r))}else{if(r==t)return!0;n=Dw(r),r=r.parentNode}}function OQ(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Wa{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new Wa(e.parentNode,Dw(e),r)}static after(e,r){return new Wa(e.parentNode,Dw(e)+1,r)}}const W5=[];class Dn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,i=null,a;for(let o of this.children){if(o.flags&7){if(!o.dom&&(a=i?i.nextSibling:n.firstChild)){let s=Dn.get(a);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(e,r),o.flags&=-8}if(a=i?i.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&a!=o.dom&&(r.written=!0),o.dom.parentNode==n)for(;a&&a!=o.dom;)a=Y7(a);else n.insertBefore(o.dom,a);i=o.dom}for(a=i?i.nextSibling:n.firstChild,a&&r&&r.node==n&&(r.written=!0);a;)a=Y7(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let i=wf(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Dn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let o=this.children[i];if(o.dom==n)return a;a+=o.length+o.breakAfter}}domBoundsAround(e,r,n=0){let i=-1,a=-1,o=-1,s=-1;for(let l=0,u=n,c=n;l<this.children.length;l++){let f=this.children[l],h=u+f.length;if(u<e&&h>r)return f.domBoundsAround(e,r,u);if(h>=e&&i==-1&&(i=l,a=u),u>r&&f.dom.parentNode==this.dom){o=l,s=c;break}c=h,u=h+f.breakAfter}return{from:a,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=W5){this.markDirty();for(let i=e;i<r;i++){let a=this.children[i];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,r-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new DQ(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,i,a,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Dn.prototype.breakAfter=0;function Y7(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class DQ{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function PQ(t,e,r,n,i,a,o,s,l){let{children:u}=t,c=u.length?u[e]:null,f=a.length?a[a.length-1]:null,h=f?f.breakAfter:o;if(!(e==n&&c&&!o&&!h&&a.length<2&&c.merge(r,i,a.length?f:null,r==0,s,l))){if(n<u.length){let d=u[n];d&&(i<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==n&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,l)?a[a.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),a.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),n++}for(c&&(c.breakAfter=o,r>0&&(!o&&a.length&&c.merge(r,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(r<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(r,c.length,null,!1,s,0),e++));e<n&&a.length;)if(u[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:s;else if(u[e].become(a[0]))e++,a.shift(),s=a.length?0:l;else break;!a.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,s,l)&&e--,(e<n||a.length)&&t.replaceChildren(e,n,a)}}function LQ(t,e,r,n,i,a){let o=t.childCursor(),{i:s,off:l}=o.findPos(r,1),{i:u,off:c}=o.findPos(e,-1),f=e-r;for(let h of n)f+=h.length;t.length+=f,PQ(t,u,c,s,l,n,0,i,a)}let ls=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},gP=typeof document<"u"?document:{documentElement:{style:{}}};const mP=/Edge\/(\d+)/.exec(ls.userAgent),RQ=/MSIE \d/.test(ls.userAgent),yP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ls.userAgent),LM=!!(RQ||yP||mP),q7=!LM&&/gecko\/(\d+)/i.test(ls.userAgent),zI=!LM&&/Chrome\/(\d+)/.exec(ls.userAgent),K7="webkitFontSmoothing"in gP.documentElement.style,NQ=!LM&&/Apple Computer/.test(ls.vendor),Q7=NQ&&(/Mobile\/\w+/.test(ls.userAgent)||ls.maxTouchPoints>2);var Wt={mac:Q7||/Mac/.test(ls.platform),windows:/Win/.test(ls.platform),linux:/Linux|X11/.test(ls.platform),ie:LM,ie_version:RQ?gP.documentMode||6:yP?+yP[1]:mP?+mP[1]:0,gecko:q7,gecko_version:q7?+(/Firefox\/(\d+)/.exec(ls.userAgent)||[0,0])[1]:0,chrome:!!zI,chrome_version:zI?+zI[1]:0,ios:Q7,android:/Android\b/.test(ls.userAgent),webkit:K7,safari:NQ,webkit_version:K7?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:gP.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Y0e=256;class bf extends Dn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof bf)||this.length-(r-e)+n.length>Y0e||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new bf(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new Wa(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return q0e(this.dom,e,r)}}class xf extends Dn{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let i of r)i.setParent(this)}setAttrs(e){if(IQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,i,a,o){return n&&(!(n instanceof xf&&n.mark.eq(this.mark))||e&&a<=0||r<this.length&&o<=0)?!1:(LQ(this,e,r,n?n.children.slice():[],a-1,o-1),this.markDirty(),!0)}split(e){let r=[],n=0,i=-1,a=0;for(let s of this.children){let l=n+s.length;l>e&&r.push(n<e?s.split(e-n):s),i<0&&n>=e&&(i=a),n=l,a++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new xf(this.mark,r,o)}domAtPos(e){return FQ(this,e)}coordsAt(e,r){return $Q(this,e,r)}}function q0e(t,e,r){let n=t.nodeValue.length;e>n&&(e=n);let i=e,a=e,o=0;e==0&&r<0||e==n&&r>=0?Wt.chrome||Wt.gecko||(e?(i--,o=1):a<n&&(a++,o=-1)):r<0?i--:a<n&&a++;let s=ov(t,i,a).getClientRects();if(!s.length)return null;let l=s[(o?o<0:r>=0)?0:s.length-1];return Wt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),o?PM(l,o<0):l||null}class Rh extends Dn{static create(e,r,n){return new Rh(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=Rh.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,r,n,i,a,o){return n&&(!(n instanceof Rh)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof Rh&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return sn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):sn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Wa.before(this.dom):Wa.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?i.length-1:0;a=i[s],!(e>0?s==0:s==i.length-1||a.top<a.bottom);s+=o?-1:1);return PM(a,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class um extends Dn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof um&&e.side==this.side}split(){return new um(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Wa.before(this.dom):Wa.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return sn.empty}get isHidden(){return!0}}bf.prototype.children=Rh.prototype.children=um.prototype.children=W5;function FQ(t,e){let r=t.dom,{children:n}=t,i=0;for(let a=0;i<n.length;i++){let o=n[i],s=a+o.length;if(!(s==a&&o.getSide()<=0)){if(e>a&&e<s&&o.dom.parentNode==r)return o.domAtPos(e-a);if(e<=a)break;a=s}}for(let a=i;a>0;a--){let o=n[a-1];if(o.dom.parentNode==r)return o.domAtPos(o.length)}for(let a=i;a<n.length;a++){let o=n[a];if(o.dom.parentNode==r)return o.domAtPos(0)}return new Wa(r,0)}function BQ(t,e,r){let n,{children:i}=t;r>0&&e instanceof xf&&i.length&&(n=i[i.length-1])instanceof xf&&n.mark.eq(e.mark)?BQ(n,e.children[0],r-1):(i.push(e),e.setParent(t)),t.length+=e.length}function $Q(t,e,r){let n=null,i=-1,a=null,o=-1;function s(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],p=h+d.length;p>=c&&(d.children.length?s(d,c-h):(!a||a.isHidden&&r>0)&&(p>c||h==p&&d.getSide()>0)?(a=d,o=c-h):(h<c||h==p&&d.getSide()<0&&!d.isHidden)&&(n=d,i=c-h)),h=p}}s(t,e);let l=(r<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?i:o),r):K0e(t)}function K0e(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=lm(e);return r[r.length-1]||null}function wP(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const Z7=Object.create(null);function V5(t,e,r){if(t==e)return!0;t||(t=Z7),e||(e=Z7);let n=Object.keys(t),i=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let a of n)if(a!=r&&(i.indexOf(a)==-1||t[a]!==e[a]))return!1;return!0}function bP(t,e,r){let n=!1;if(e)for(let i in e)r&&i in r||(n=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(r)for(let i in r)e&&e[i]==r[i]||(n=!0,i=="style"?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n}function Q0e(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}class ji extends Dn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,i,a,o){if(n){if(!(n instanceof ji))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),LQ(this,e,r,n?n.children.slice():[],a,o),!0}split(e){let r=new ji;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:i}=this.childPos(e);i&&(r.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)r.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){V5(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){BQ(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=wP(r,this.attrs||{})),n&&(this.attrs=wP({class:n},this.attrs||{}))}domAtPos(e){return FQ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(IQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bP(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let i=this.dom.lastChild;for(;i&&Dn.get(i)instanceof xf;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=Dn.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Wt.ios||!this.children.some(a=>a instanceof bf))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof bf)||/[^ -~]/.test(n.text))return null;let i=lm(n.dom);if(i.length!=1)return null;e+=i[0].width,r=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=$Q(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let o=(a-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,r){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],o=i+a.length;if(o>=r){if(a instanceof ji)return a;if(o>r)break}i=o+a.breakAfter}return null}}class Jh extends Dn{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,i,a,o){return n&&(!(n instanceof Jh)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?Wa.before(this.dom):Wa.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new Jh(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return W5}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):sn.empty}domBoundsAround(){return null}become(e){return e instanceof Jh&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){return this.widget.coordsAt(this.dom,e,r)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class Mf{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var so=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(so||(so={}));class fr extends av{constructor(e,r,n,i){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new W2(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new ud(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:o}=zQ(e,r);n=(a?r?-3e8:-1:5e8)-1,i=(o?r?2e8:1:-6e8)+1}return new ud(e,n,i,r,e.widget||null,!0)}static line(e){return new V2(e)}static set(e,r=!1){return Jr.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}fr.none=Jr.empty;class W2 extends fr{constructor(e){let{start:r,end:n}=zQ(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof W2&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&V5(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}W2.prototype.point=!1;class V2 extends fr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof V2&&this.spec.class==e.spec.class&&V5(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}V2.prototype.mapMode=ro.TrackBefore;V2.prototype.point=!0;class ud extends fr{constructor(e,r,n,i,a,o){super(r,n,a,e),this.block=i,this.isReplace=o,this.mapMode=i?r<=0?ro.TrackBefore:ro.TrackAfter:ro.TrackDel}get type(){return this.startSide!=this.endSide?so.WidgetRange:this.startSide<=0?so.WidgetBefore:so.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ud&&Z0e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}ud.prototype.point=!0;function zQ(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function Z0e(t,e){return t==e||!!(t&&e&&t.compare(e))}function xP(t,e,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=t?r[i]=Math.max(r[i],e):r.push(t,e)}class X1{constructor(e,r,n,i){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Jh&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ji),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Kx(new um(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Jh)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(Kx(new bf(this.text.slice(this.textOff,this.textOff+i)),r),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,r,n,i){this.buildText(r-e,n,i),this.pos=r,this.openStart<0&&(this.openStart=i)}point(e,r,n,i,a,o){if(this.disallowBlockEffectsFor[o]&&n instanceof ud){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=r-e;if(n instanceof ud)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Jh(n.widget||new J7("div"),s,n));else{let l=Rh.create(n.widget||new J7("span"),s,s?0:n.startSide),u=this.atCursorPos&&!l.isEditable&&a<=i.length&&(e<r||n.startSide>0),c=!l.isEditable&&(e<r||a>i.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(Kx(new um(1),i),a),a=i.length+Math.max(0,a-i.length)),f.append(Kx(l,i),a),this.atCursorPos=c,this.pendingBuffer=c?e<r||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=a)}static build(e,r,n,i,a){let o=new X1(e,r,n,a);return o.openEnd=Jr.spans(i,r,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Kx(t,e){for(let r of e)t=new xf(r,[t],t.length);return t}class J7 extends Mf{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Ln=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ln||(Ln={}));const sv=Ln.LTR,H5=Ln.RTL;function jQ(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const J0e=jQ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),eme=jQ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),SP=Object.create(null),Su=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);SP[e]=r,SP[r]=-e}function GQ(t){return t<=247?J0e[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?eme[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const tme=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Nh{get dir(){return this.level%2?H5:sv}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,i){let a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=r&&s.to>=r){if(s.level==n)return o;(a<0||(i!=0?i<0?s.from<r:s.to>r:e[a].level>s.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function UQ(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!UQ(n.inner,i.inner))return!1}return!0}const dn=[];function rme(t,e,r,n,i){for(let a=0;a<=n.length;a++){let o=a?n[a-1].to:e,s=a<n.length?n[a].from:r,l=a?256:i;for(let u=o,c=l,f=l;u<s;u++){let h=GQ(t.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),dn[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=o,c=l,f=l;u<s;u++){let h=dn[u];if(h==128)u<s-1&&c==dn[u+1]&&c&24?h=dn[u]=c:dn[u]=256;else if(h==64){let d=u+1;for(;d<s&&dn[d]==64;)d++;let p=u&&c==8||d<r&&dn[d]==8?f==1?1:8:256;for(let v=u;v<d;v++)dn[v]=p;u=d-1}else h==8&&f==1&&(dn[u]=1);c=h,h&7&&(f=h)}}}function nme(t,e,r,n,i){let a=i==1?2:1;for(let o=0,s=0,l=0;o<=n.length;o++){let u=o?n[o-1].to:e,c=o<n.length?n[o].from:r;for(let f=u,h,d,p;f<c;f++)if(d=SP[h=t.charCodeAt(f)])if(d<0){for(let v=s-3;v>=0;v-=3)if(Su[v+1]==-d){let g=Su[v+2],m=g&2?i:g&4?g&1?a:i:0;m&&(dn[f]=dn[Su[v]]=m),s=v;break}}else{if(Su.length==189)break;Su[s++]=f,Su[s++]=h,Su[s++]=l}else if((p=dn[f])==2||p==1){let v=p==i;l=v?0:1;for(let g=s-3;g>=0;g-=3){let m=Su[g+2];if(m&2)break;if(v)Su[g+2]|=2;else{if(m&4)break;Su[g+2]|=4}}}}}function ime(t,e,r,n){for(let i=0,a=n;i<=r.length;i++){let o=i?r[i-1].to:t,s=i<r.length?r[i].from:e;for(let l=o;l<s;){let u=dn[l];if(u==256){let c=l+1;for(;;)if(c==s){if(i==r.length)break;c=r[i++].to,s=i<r.length?r[i].from:e}else if(dn[c]==256)c++;else break;let f=a==1,h=(c<e?dn[c]:n)==1,d=f==h?f?1:2:n;for(let p=c,v=i,g=v?r[v-1].to:t;p>l;)p==g&&(p=r[--v].from,g=v?r[v-1].to:t),dn[--p]=d;l=c}else a=u,l++}}}function EP(t,e,r,n,i,a,o){let s=n%2?2:1;if(n%2==i%2)for(let l=e,u=0;l<r;){let c=!0,f=!1;if(u==a.length||l<a[u].from){let v=dn[l];v!=s&&(c=!1,f=v==16)}let h=!c&&s==1?[]:null,d=c?n:n+1,p=l;e:for(;;)if(u<a.length&&p==a[u].from){if(f)break e;let v=a[u];if(!c)for(let g=v.to,m=u+1;;){if(g==r)break e;if(m<a.length&&a[m].from==g)g=a[m++].to;else{if(dn[g]==s)break e;break}}if(u++,h)h.push(v);else{v.from>l&&o.push(new Nh(l,v.from,d));let g=v.direction==sv!=!(d%2);_P(t,g?n+1:n,i,v.inner,v.from,v.to,o),l=v.to}p=v.to}else{if(p==r||(c?dn[p]!=s:dn[p]==s))break;p++}h?EP(t,l,p,n+1,i,h,o):l<p&&o.push(new Nh(l,p,d)),l=p}else for(let l=r,u=a.length;l>e;){let c=!0,f=!1;if(!u||l>a[u-1].to){let v=dn[l-1];v!=s&&(c=!1,f=v==16)}let h=!c&&s==1?[]:null,d=c?n:n+1,p=l;e:for(;;)if(u&&p==a[u-1].to){if(f)break e;let v=a[--u];if(!c)for(let g=v.from,m=u;;){if(g==e)break e;if(m&&a[m-1].to==g)g=a[--m].from;else{if(dn[g-1]==s)break e;break}}if(h)h.push(v);else{v.to<l&&o.push(new Nh(v.to,l,d));let g=v.direction==sv!=!(d%2);_P(t,g?n+1:n,i,v.inner,v.from,v.to,o),l=v.from}p=v.from}else{if(p==e||(c?dn[p-1]!=s:dn[p-1]==s))break;p--}h?EP(t,p,l,n+1,i,h,o):p<l&&o.push(new Nh(p,l,d)),l=p}}function _P(t,e,r,n,i,a,o){let s=e%2?2:1;rme(t,i,a,n,s),nme(t,i,a,n,s),ime(i,a,n,s),EP(t,i,a,e,r,n,o)}function ame(t,e,r){if(!t)return[new Nh(0,0,e==H5?1:0)];if(e==sv&&!r.length&&!tme.test(t))return WQ(t.length);if(r.length)for(;t.length>dn.length;)dn[dn.length]=256;let n=[],i=e==sv?0:1;return _P(t,i,i,r,0,t.length,n),n}function WQ(t){return[new Nh(0,t,0)]}let VQ="";function ome(t,e,r,n,i){var a;let o=n.head-t.from,s=Nh.find(e,o,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=e[s],u=l.side(i,r);if(o==u){let h=s+=i?1:-1;if(h<0||h>=e.length)return null;l=e[s=h],o=l.side(!i,r),u=l.side(i,r)}let c=Ca(t.text,o,l.forward(i,r));(c<l.from||c>l.to)&&(c=u),VQ=t.text.slice(Math.min(o,c),Math.max(o,c));let f=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?Qe.cursor(f.side(!i,r)+t.from,f.forward(i,r)?1:-1,f.level):Qe.cursor(c+t.from,l.forward(i,r)?-1:1,l.level)}function sme(t,e,r){for(let n=e;n<r;n++){let i=GQ(t.charCodeAt(n));if(i==1)return sv;if(i==2||i==4)return H5}return sv}const HQ=Gt.define(),XQ=Gt.define(),YQ=Gt.define(),qQ=Gt.define(),CP=Gt.define(),KQ=Gt.define(),QQ=Gt.define(),ZQ=Gt.define({combine:t=>t.some(e=>e)}),JQ=Gt.define({combine:t=>t.some(e=>e)});class _0{constructor(e,r="nearest",n="nearest",i=5,a=5,o=!1){this.range=e,this.y=r,this.x=n,this.yMargin=i,this.xMargin=a,this.isSnapshot=o}map(e){return e.empty?this:new _0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new _0(Qe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Qx=Fr.define({map:(t,e)=>t.map(e)});function ol(t,e,r){let n=t.facet(qQ);n.length?n[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const RM=Gt.define({combine:t=>t.length?t[0]:!0});let lme=0;const p1=Gt.define();class bi{constructor(e,r,n,i,a){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,r){const{eventHandlers:n,eventObservers:i,provide:a,decorations:o}=r||{};return new bi(lme++,e,n,i,s=>{let l=[p1.of(s)];return o&&l.push(Pw.of(u=>{let c=u.plugin(s);return c?o(c):fr.none})),a&&l.push(a(s)),l})}static fromClass(e,r){return bi.define(n=>new e(n),r)}}class jI{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(ol(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){ol(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){ol(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const eZ=Gt.define(),X5=Gt.define(),Pw=Gt.define(),tZ=Gt.define(),Y5=Gt.define(),rZ=Gt.define();function e9(t,e){let r=t.state.facet(rZ);if(!r.length)return r;let n=r.map(a=>a instanceof Function?a(t):a),i=[];return Jr.spans(n,e.from,e.to,{point(){},span(a,o,s,l){let u=a-e.from,c=o-e.from,f=i;for(let h=s.length-1;h>=0;h--,l--){let d=s[h].spec.bidiIsolate,p;if(d==null&&(d=sme(e.text,u,c)),l>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==d)p.to=c,f=p.inner;else{let v={from:u,to:c,direction:d,inner:[]};f.push(v),f=v.inner}}}}),i}const nZ=Gt.define();function iZ(t){let e=0,r=0,n=0,i=0;for(let a of t.state.facet(nZ)){let o=a(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:r,top:n,bottom:i}}const v1=Gt.define();class sl{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}join(e){return new sl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let i=e[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let i=0,a=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],u=o-s,c=l?l.fromB:1e9;for(;a<r.length&&r[a]<c;){let f=r[a],h=r[a+1],d=Math.max(s,f),p=Math.min(c,h);if(d<=p&&new sl(d+u,p+u,d,p).addToSet(n),h>c)break;a+=2}if(!l)return n;new sl(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class vC{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Wi.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,o,s,l)=>i.push(new sl(a,o,s,l))),this.changedRanges=i}static create(e,r,n){return new vC(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class t9 extends Dn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ji],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new sl(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!vme(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?cme(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;n=new sl(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(Wt.ie||Wt.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),l=dme(o,s,e.changes);return n=sl.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Wt.chrome||Wt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Jh&&o.widget instanceof r9&&a.push(o.dom);i.updateGaps(a)}updateChildren(e,r,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(r);for(let o=i.length-1;;o--){let s=o>=0?i[o]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:f}=s,h,d,p,v;if(n&&n.range.fromB<f&&n.range.toB>c){let b=X1.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),x=X1.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);d=b.breakAtStart,p=b.openStart,v=x.openEnd;let S=this.compositionView(n);x.breakAtStart?S.breakAfter=1:x.content.length&&S.merge(S.length,S.length,x.content[0],!1,x.openStart,0)&&(S.breakAfter=x.content[0].breakAfter,x.content.shift()),b.content.length&&S.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(S).concat(x.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:v}=X1.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:m}=a.findPos(u,1),{i:y,off:w}=a.findPos(l,-1);PQ(this,y,w,g,m,h,d,p,v)}n&&this.fixCompositionDOM(n)}compositionView(e){let r=new bf(e.text.nodeValue);r.flags|=8;for(let{deco:i}of e.marks)r=new xf(i,[r],r.length);let n=new ji;return n.append(r,0),n}fixCompositionDOM(e){let r=(a,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let s=Dn.get(a);s&&s!=o&&(s.dom=null),o.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];r(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],r(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&QE(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||r||a))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(Wt.gecko&&s.empty&&!this.hasComposition&&ume(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new Wa(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!H1(l.node,l.offset,c.anchorNode,c.anchorOffset)||!H1(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,s))&&(this.view.observer.ignore(()=>{Wt.android&&Wt.chrome&&this.dom.contains(c.focusNode)&&pme(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=pC(this.view.root);if(f)if(s.empty){if(Wt.gecko){let h=fme(l.node,l.offset);if(h&&h!=3){let d=oZ(l.node,l.offset,h==1?1:-1);d&&(l=new Wa(d.node,d.offset))}}f.collapse(l.node,l.offset),s.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=s.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(h)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Wa(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Wa(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&H1(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=pC(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=ji.find(this,r.head);if(!o)return;let s=o.posAtStart;if(r.head==s||r.head==s+o.length)return;let l=this.coordsAt(r.head,-1),u=this.coordsAt(r.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(r.head+r.assoc);n.collapse(c.node,c.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=r.from&&n.collapse(i,a)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let i=e.offset;!n&&i<r.childNodes.length;i++){let a=Dn.get(r.childNodes[i]);a instanceof ji&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=Dn.get(r.childNodes[i]);a instanceof ji&&(n=a.domAtPos(a.length))}return n?new Wa(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=Dn.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let i=this.children[r];if(n<i.length||i instanceof ji)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,i=0;for(let a=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=a-s.breakAfter,u=l-s.length;if(l<e)break;u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof ji&&!(n instanceof ji&&r>=0))&&(n=s,i=u),a=u}return n?n.coordsAt(e-i,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),i=this.children[r];if(!(i instanceof ji))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(n,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}n=l}if(!(i instanceof bf))return null;let a=Ca(i.text,n);if(a==n)return null;let o=ov(i.dom,n,a).getClientRects();for(let s=0;s<o.length;s++){let l=o[s];if(s==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==Ln.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=n){let d=f.dom.getBoundingClientRect();if(r.push(d.height),o){let p=f.dom.lastChild,v=p?lm(p):[];if(v.length){let g=v[v.length-1],m=l?g.right-d.left:d.right-g.left;m>s&&(s=m,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Ln.RTL:Ln.LTR}measureTextSize(){for(let a of this.children)if(a instanceof ji){let o=a.measureTextSize();if(o)return o}let e=document.createElement("div"),r,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=lm(e.firstChild)[0];r=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:i}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new DQ(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,i=0;;i++){let a=i==r.viewports.length?null:r.viewports[i],o=a?a.from-1:this.length;if(o>n){let s=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(fr.replace({widget:new r9(s),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!a)break;n=a.to+1}return fr.set(e)}updateDeco(){let e=this.view.state.facet(Pw).map((i,a)=>(this.dynamicDecorationMap[a]=typeof i=="function")?i(this.view):i),r=!1,n=this.view.state.facet(tZ).map((i,a)=>{let o=typeof i=="function";return o&&(r=!0),o?i(this.view):i});n.length&&(this.dynamicDecorationMap[e.length]=r,e.push(Jr.join(n)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=iZ(this.view),o={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;U0e(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ln.LTR)}}function ume(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class r9 extends Mf{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function aZ(t,e){let r=t.observer.selectionRange,n=r.focusNode&&oZ(r.focusNode,r.focusOffset,0);if(!n)return null;let i=e-n.offset;return{from:i,to:i+n.node.nodeValue.length,node:n.node}}function cme(t,e,r){let n=aZ(t,r);if(!n)return null;let{node:i,from:a,to:o}=n,s=i.nodeValue;if(/[\n\r]/.test(s)||t.state.doc.sliceString(n.from,n.to)!=s)return null;let l=e.invertedDesc,u=new sl(l.mapPos(a),l.mapPos(o),a,o),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=Dn.get(f);if(h instanceof xf)c.push({node:f,deco:h.mark});else{if(h instanceof ji||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=t.contentDOM)c.push({node:f,deco:new W2({inclusive:!0,attributes:Q0e(f),tagName:f.tagName.toLowerCase()})});else return null}}}function oZ(t,e,r){if(r<=0)for(let n=t,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i>0)n=n.childNodes[i-1],i=wf(n);else break}if(r>=0)for(let n=t,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length&&r>=0)n=n.childNodes[i],i=0;else break}return null}function fme(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let hme=class{constructor(){this.changes=[]}compareRange(e,r){xP(e,r,this.changes)}comparePoint(e,r){xP(e,r,this.changes)}};function dme(t,e,r){let n=new hme;return Jr.compare(t,e,r,n),n.changes}function pme(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function vme(t,e){let r=!1;return e&&t.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(r=!0)}),r}function gme(t,e,r=1){let n=t.charCategorizer(e),i=t.doc.lineAt(e),a=e-i.from;if(i.length==0)return Qe.cursor(e);a==0?r=1:a==i.length&&(r=-1);let o=a,s=a;r<0?o=Ca(i.text,a,!1):s=Ca(i.text,a);let l=n(i.text.slice(o,s));for(;o>0;){let u=Ca(i.text,o,!1);if(n(i.text.slice(u,o))!=l)break;o=u}for(;s<i.length;){let u=Ca(i.text,s);if(n(i.text.slice(s,u))!=l)break;s=u}return Qe.range(o+i.from,s+i.from)}function mme(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function yme(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function GI(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function n9(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function i9(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function kP(t,e,r){let n,i,a,o,s=!1,l,u,c,f;for(let p=t.firstChild;p;p=p.nextSibling){let v=lm(p);for(let g=0;g<v.length;g++){let m=v[g];i&&GI(i,m)&&(m=n9(i9(m,i.bottom),i.top));let y=mme(e,m),w=yme(r,m);if(y==0&&w==0)return p.nodeType==3?a9(p,e,r):kP(p,e,r);if(!n||o>w||o==w&&a>y){n=p,i=m,a=y,o=w;let b=w?r<m.top?-1:1:y?e<m.left?-1:1:0;s=!b||(b>0?g<v.length-1:g>0)}y==0?r>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):r<m.top&&(!f||f.top>m.top)&&(u=p,f=m):c&&GI(c,m)?c=i9(c,m.bottom):f&&GI(f,m)&&(f=n9(f,m.top))}}if(c&&c.bottom>=r?(n=l,i=c):f&&f.top<=r&&(n=u,i=f),!n)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return a9(n,h,r);if(s&&n.contentEditable!="false")return kP(n,h,r);let d=Array.prototype.indexOf.call(t.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function a9(t,e,r){let n=t.nodeValue.length,i=-1,a=1e9,o=0;for(let s=0;s<n;s++){let l=ov(t,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<a){let h=e>=(c.left+c.right)/2,d=h;if((Wt.chrome||Wt.gecko)&&ov(t,s).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:t,offset:s+(d?1:0)};i=s+(d?1:0),a=f}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function sZ(t,e,r,n=-1){var i,a;let o=t.contentDOM.getBoundingClientRect(),s=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-s;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,x=!1;l=t.elementAtHeight(h),l.type!=so.Text;)for(;h=n>0?l.bottom+b:l.top-b,!(h>=0&&h<=u);){if(x)return r?null:0;x=!0,n=-n}f=s+h;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:r?null:o9(t,o,l,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:o9(t,o,l,c,f);let p=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:p,g=v.elementFromPoint(c,f);g&&!t.contentDOM.contains(g)&&(g=null),g||(c=Math.max(o.left+1,Math.min(o.right-1,c)),g=v.elementFromPoint(c,f),g&&!t.contentDOM.contains(g)&&(g=null));let m,y=-1;if(g&&((i=t.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,f);b&&({offsetNode:m,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,f);b&&({startContainer:m,startOffset:y}=b,(!t.contentDOM.contains(m)||Wt.safari&&wme(m,y,c)||Wt.chrome&&bme(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let b=ji.find(t.docView,d);if(!b)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:y}=kP(b.dom,c,f))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((a=w.dom)===null||a===void 0?void 0:a.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,y)+w.posAtStart}function o9(t,e,r,n,i){let a=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,l=Math.floor((i-r.top-(t.defaultLineHeight-s)*.5)/s);a+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(r.from,r.to);return r.from+hP(o,a,t.state.tabSize)}function wme(t,e,r){let n;if(t.nodeType!=3||e!=(n=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ov(t,n-1,n).getBoundingClientRect().left>r}function bme(t,e,r){if(e!=0)return!1;for(let i=t;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=t.nodeType==1?t.getBoundingClientRect():ov(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function MP(t,e){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){for(let n of r.type)if(n.to>e||n.to==e&&(n.to==r.to||n.type==so.Text))return n}return r}function xme(t,e,r,n){let i=MP(t,e.head),a=!n||i.type!=so.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let o=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),l=t.posAtCoords({x:r==(s==Ln.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(l!=null)return Qe.cursor(l,r?-1:1)}return Qe.cursor(r?i.to:i.from,r?-1:1)}function s9(t,e,r,n){let i=t.state.doc.lineAt(e.head),a=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let s=e,l=null;;){let u=ome(i,a,o,s,r),c=VQ;if(!u){if(i.number==(r?t.state.doc.lines:1))return s;c=`
`,i=t.state.doc.line(i.number+(r?1:-1)),a=t.bidiSpans(i),u=t.visualLineSide(i,!r)}if(l){if(!l(c))return s}else{if(!n)return u;l=n(c)}s=u}}function Sme(t,e,r){let n=t.state.charCategorizer(e),i=n(r);return a=>{let o=n(a);return i==Gn.Space&&(i=o),i==o}}function Eme(t,e,r,n){let i=e.head,a=r?1:-1;if(i==(r?t.state.doc.length:0))return Qe.cursor(i,e.assoc);let o=e.goalColumn,s,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),s=a<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),s=(a<0?d.top:d.bottom)+c}let f=l.left+o,h=n??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=s+(h+d)*a,v=sZ(t,{x:f,y:p},!1,a);if(p<l.top||p>l.bottom||(a<0?v<i:v>i)){let g=t.docView.coordsForChar(v),m=!g||p<g.top?-1:1;return Qe.cursor(v,m,void 0,o)}}}function ZE(t,e,r){for(;;){let n=0;for(let i of t)i.between(e-1,e+1,(a,o,s)=>{if(e>a&&e<o){let l=n||r||(e-a<o-e?-1:1);e=l<0?a:o,n=l}});if(!n)return e}}function UI(t,e,r){let n=ZE(t.state.facet(Y5).map(i=>i(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:Qe.cursor(n,n<r.from?1:-1)}class _me{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Wt.safari&&e.contentDOM.addEventListener("input",()=>null),Wt.gecko&&zme(e.contentDOM.ownerDocument)}handleEvent(e){!Dme(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,r){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=Cme(e),n=this.handlers,i=this.view.contentDOM;for(let a in r)if(a!="scroll"){let o=!r[a].handlers.length,s=n[a];s&&o!=!s.handlers.length&&(i.removeEventListener(a,this.handleEvent),s=null),s||i.addEventListener(a,this.handleEvent,{passive:o})}for(let a in n)a!="scroll"&&!r[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&uZ.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Wt.android&&Wt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return Wt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=lZ.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||kme.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,E0(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Wt.safari&&!Wt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function l9(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(i){ol(r.state,i)}}}function Cme(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let o=i.domEventHandlers[a];o&&r(a).handlers.push(l9(n.value,o))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let o=i.domEventObservers[a];o&&r(a).observers.push(l9(n.value,o))}}for(let n in iu)r(n).handlers.push(iu[n]);for(let n in au)r(n).observers.push(au[n]);return e}const lZ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],kme="dthko",uZ=[16,17,18,20,91,92,224,225],Zx=6;function Jx(t){return Math.max(0,t)*.7+8}function Mme(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Ame{constructor(e,r,n,i){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=W0e(e.contentDOM),this.atoms=e.state.facet(Y5).map(o=>o(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(Zr.allowMultipleSelections)&&Tme(e,r),this.dragging=Ome(e,r)&&dZ(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var r;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Mme(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=iZ(this.view);e.clientX-o.left<=a.left+Zx?n=-Jx(a.left-e.clientX):e.clientX+o.right>=a.right-Zx&&(n=Jx(e.clientX-a.right)),e.clientY-o.top<=a.top+Zx?i=-Jx(a.top-e.clientY):e.clientY+o.bottom>=a.bottom-Zx&&(i=Jx(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let r=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let o=ZE(this.atoms,i.from,0);o!=i.from&&(a=Qe.cursor(o,-1))}else{let o=ZE(this.atoms,i.from,-1),s=ZE(this.atoms,i.to,1);(o!=i.from||s!=i.to)&&(a=Qe.range(i.from==i.anchor?o:s,i.from==i.head?o:s))}a&&(r||(r=e.ranges.slice()),r[n]=a)}return r?Qe.create(r,e.mainIndex):e}select(e){let{view:r}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Tme(t,e){let r=t.state.facet(HQ);return r.length?r[0](e):Wt.mac?e.metaKey:e.ctrlKey}function Ime(t,e){let r=t.state.facet(XQ);return r.length?r[0](e):Wt.mac?!e.altKey:!e.ctrlKey}function Ome(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=pC(t.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let o=i[a];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Dme(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=Dn.get(r))&&n.ignoreEvent(e))return!1;return!0}const iu=Object.create(null),au=Object.create(null),cZ=Wt.ie&&Wt.ie_version<15||Wt.ios&&Wt.webkit_version<604;function Pme(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),fZ(t,r.value)},50)}function fZ(t,e){let{state:r}=t,n,i=1,a=r.toText(e),o=a.lines==r.selection.ranges.length;if(AP!=null&&r.selection.ranges.every(l=>l.empty)&&AP==a.toString()){let l=-1;n=r.changeByRange(u=>{let c=r.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=r.toText((o?a.line(i++).text:e)+r.lineBreak);return{changes:{from:c.from,insert:f},range:Qe.cursor(u.from+f.length)}})}else o?n=r.changeByRange(l=>{let u=a.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Qe.cursor(l.from+u.length)}}):n=r.replaceSelection(a);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}au.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};iu.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);au.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};au.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};iu.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet(YQ))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=Nme(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new Ame(t,e,r,n)),n&&t.observer.ignore(()=>TQ(t.contentDOM));let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function u9(t,e,r,n){if(n==1)return Qe.cursor(e,r);if(n==2)return gme(t.state,e,r);{let i=ji.find(t.docView,e),a=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<t.state.doc.length&&s==a.to&&s++,Qe.range(o,s)}}let hZ=(t,e)=>t>=e.top&&t<=e.bottom,c9=(t,e,r)=>hZ(e,r)&&t>=r.left&&t<=r.right;function Lme(t,e,r,n){let i=ji.find(t.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let o=i.coordsAt(a,-1);if(o&&c9(r,n,o))return-1;let s=i.coordsAt(a,1);return s&&c9(r,n,s)?1:o&&hZ(n,o)?-1:1}function f9(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:Lme(t,r,e.clientX,e.clientY)}}const Rme=Wt.ie&&Wt.ie_version<=11;let h9=null,d9=0,p9=0;function dZ(t){if(!Rme)return t.detail;let e=h9,r=p9;return h9=t,p9=Date.now(),d9=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(d9+1)%3:1}function Nme(t,e){let r=f9(t,e),n=dZ(e),i=t.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),i=i.map(a.changes))},get(a,o,s){let l=f9(t,a),u,c=u9(t,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let f=u9(t,r.pos,r.bias,n),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?Qe.range(h,d):Qe.range(d,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&n==1&&i.ranges.length>1&&(u=Fme(i,l.pos))?u:s?i.addRange(c):Qe.create([c])}}}function Fme(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:i}=t.ranges[r];if(n<=e&&i>=e)return Qe.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}iu.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,o=a+i.length;(a>=r.to||o<=r.from)&&(r=Qe.range(a,o))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(r.from,r.to)),e.dataTransfer.effectAllowed="copyMove"),!1};iu.dragend=t=>(t.inputState.draggedContent=null,!1);function v9(t,e,r,n){if(!r)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=t.inputState,o=n&&a&&Ime(t,e)?{from:a.from,to:a.to}:null,s={from:i,insert:r},l=t.state.changes(o?[o,s]:s);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}iu.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,a=()=>{++i==r.length&&v9(t,e,n.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let s=new FileReader;s.onerror=a,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(n[o]=s.result),a()},s.readAsText(r[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return v9(t,e,n,!0),!0}return!1};iu.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=cZ?null:e.clipboardData;return r?(fZ(t,r.getData("text/plain")||r.getData("text/uri-text")),!0):(Pme(t),!1)};function Bme(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function $me(t){let e=[],r=[],n=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),r.push(i));if(!e.length){let i=-1;for(let{from:a}of t.selection.ranges){let o=t.doc.lineAt(a);o.number>i&&(e.push(o.text),r.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}n=!0}return{text:e.join(t.lineBreak),ranges:r,linewise:n}}let AP=null;iu.copy=iu.cut=(t,e)=>{let{text:r,ranges:n,linewise:i}=$me(t.state);if(!r&&!i)return!1;AP=i?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=cZ?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",r),!0):(Bme(t,r),!1)};const pZ=wc.define();function vZ(t,e){let r=[];for(let n of t.facet(QQ)){let i=n(t,e);i&&r.push(i)}return r?t.update({effects:r,annotations:pZ.of(!0)}):null}function gZ(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=vZ(t.state,e);r?t.dispatch(r):t.update([])}},10)}au.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),gZ(t)};au.blur=t=>{t.observer.clearSelectionRange(),gZ(t)};au.compositionstart=au.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};au.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Wt.chrome&&Wt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};au.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};iu.beforeinput=(t,e)=>{var r;let n;if(Wt.chrome&&Wt.android&&(n=lZ.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const g9=new Set;function zme(t){g9.has(t)||(g9.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const m9=["pre-wrap","normal","pre-line","break-spaces"];class jme{constructor(e){this.lineWrapping=e,this.doc=sn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return m9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(e,r,n,i,a,o){let s=m9.indexOf(e)>-1,l=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=a,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class Gme{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class Vu{constructor(e,r,n,i,a){this.from=e,this.length=r,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?so.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ud?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Vu(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var In=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(In||(In={}));const JE=.001;class lo{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,r){this.height!=r&&(Math.abs(this.height-r)>JE&&(e.heightChanged=!0),this.height=r)}replace(e,r,n){return lo.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,i){let a=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:f}=i[s],h=a.lineAt(l,In.ByPosNoHeight,n.setDoc(r),0,0),d=h.to>=u?h:a.lineAt(u,In.ByPosNoHeight,n,0,0);for(f+=d.to-u,u=d.to;s>0&&h.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<h.from&&(h=a.lineAt(l,In.ByPosNoHeight,n,0,0));c+=h.from-l,l=h.from;let p=q5.build(n.setDoc(o),e,c,f);a=a.replace(l,u,p)}return a.updateHeight(n,0)}static empty(){return new ns(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,i=0,a=0;for(;;)if(r==n)if(i>a*2){let s=e[r-1];s.break?e.splice(--r,1,s.left,null,s.right):e.splice(--r,1,s.left,s.right),n+=1+s.break,i-=s.size}else if(a>i*2){let s=e[n];s.break?e.splice(n,1,s.left,null,s.right):e.splice(n,1,s.left,s.right),n+=2+s.break,a-=s.size}else break;else if(i<a){let s=e[r++];s&&(i+=s.size)}else{let s=e[--n];s&&(a+=s.size)}let o=0;return e[r-1]==null?(o=1,r--):e[r]==null&&(o=1,n++),new Ume(lo.of(e.slice(0,r)),o,lo.of(e.slice(n)))}}lo.prototype.size=1;class mZ extends lo{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,i){return new Vu(i,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,r,n,i,a,o){e<=a+this.length&&r>=a&&o(this.blockAt(0,n,i,a))}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ns extends mZ{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,i){return new Vu(i,this.length,n,this.height,this.breaks)}replace(e,r,n){let i=n[0];return n.length==1&&(i instanceof ns||i instanceof wa&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof wa?i=new ns(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):lo.of(n)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class wa extends lo{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,i=e.doc.lineAt(r+this.length).number,a=i-n+1,o,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);o=l/a,this.length>a+1&&(s=(this.height-l)/(this.length-a-1))}else o=this.height/a;return{firstLine:n,lastLine:i,perLine:o,perChar:s}}blockAt(e,r,n,i){let{firstLine:a,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(r,i);if(r.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),c=r.doc.lineAt(u),f=s+c.length*l,h=Math.max(n,e-f/2);return new Vu(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(o-a,Math.floor((e-n)/s))),{from:c,length:f}=r.doc.line(a+u);return new Vu(c,f,n+s*u,s,0)}}lineAt(e,r,n,i,a){if(r==In.ByHeight)return this.blockAt(e,n,i,a);if(r==In.ByPosNoHeight){let{from:d,to:p}=n.doc.lineAt(e);return new Vu(d,p-d,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(n,a),u=n.doc.lineAt(e),c=s+u.length*l,f=u.number-o,h=i+s*f+l*(u.from-a-f);return new Vu(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,r,n,i,a,o){e=Math.max(e,a),r=Math.min(r,a+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,a);for(let c=e,f=i;c<=r;){let h=n.doc.lineAt(c);if(c==e){let p=h.number-s;f+=l*p+u*(e-a-p)}let d=l+u*h.length;o(new Vu(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,r,n){let i=this.length-r;if(i>0){let a=n[n.length-1];a instanceof wa?n[n.length-1]=new wa(a.length+i):n.push(null,new wa(i-1))}if(e>0){let a=n[0];a instanceof wa?n[0]=new wa(e+a.length):n.unshift(new wa(e-1),null)}return lo.of(n)}decomposeLeft(e,r){r.push(new wa(e-1),null)}decomposeRight(e,r){r.push(null,new wa(this.length-e-1))}updateHeight(e,r=0,n=!1,i){let a=r+this.length;if(i&&i.from<=r+this.length&&i.more){let o=[],s=Math.max(r,i.from),l=-1;for(i.from>r&&o.push(new wa(i.from-r-1).updateHeight(e,r));s<=a&&i.more;){let c=e.doc.lineAt(s).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=JE&&(l=-2);let h=new ns(c,f);h.outdated=!1,o.push(h),s+=c+1}s<=a&&o.push(null,new wa(a-s).updateHeight(e,s));let u=lo.of(o);return(l<0||Math.abs(u.height-this.height)>=JE||Math.abs(l-this.heightMetrics(e,r).perLine)>=JE)&&(e.heightChanged=!0),u}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Ume extends lo{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,r,n,i):this.right.blockAt(e,r,a,i+this.left.length+this.break)}lineAt(e,r,n,i,a){let o=i+this.left.height,s=a+this.left.length+this.break,l=r==In.ByHeight?e<o:e<s,u=l?this.left.lineAt(e,r,n,i,a):this.right.lineAt(e,r,n,o,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=r==In.ByPosNoHeight?In.ByPosNoHeight:In.ByPos;return l?u.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,a).join(u)}forEachLine(e,r,n,i,a,o){let s=i+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,r,n,i,a,o),r>=l&&this.right.forEachLine(e,r,n,s,l,o);else{let u=this.lineAt(l,In.ByPos,n,i,a);e<u.from&&this.left.forEachLine(e,u.from-1,n,i,a,o),u.to>=e&&u.from<=r&&o(u),r>u.to&&this.right.forEachLine(u.to+1,r,n,s,l,o)}}replace(e,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,r-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let o=a.length;for(let s of n)a.push(s);if(e>0&&y9(a,o-1),r<this.length){let s=a.length;this.decomposeRight(r,a),y9(a,s)}return lo.of(a)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<i&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?lo.of(this.break?[e,null,r]:[e,r]):(this.left=e,this.right=r,this.height=e.height+r.height,this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,i){let{left:a,right:o}=this,s=r+a.length+this.break,l=null;return i&&i.from<=r+a.length&&i.more?l=a=a.updateHeight(e,r,n,i):a.updateHeight(e,r,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,n,i):o.updateHeight(e,s,n),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function y9(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof wa&&(n=t[e+1])instanceof wa&&t.splice(e-1,3,new wa(r.length+1+n.length))}const Wme=5;class q5{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ns?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new ns(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=r-e;n.block?this.addBlock(new mZ(o,i,n)):(o||a||i>=Wme)&&this.addLineDeco(i,a,o)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ns(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new wa(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ns)return e;let r=new ns(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof ns)&&!this.isCovered?this.nodes.push(new ns(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof ns&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,r,n,i){let a=new q5(n,e);return Jr.spans(r,n,i,a,0),a.finish(n)}}function Vme(t,e,r){let n=new Hme;return Jr.compare(t,e,r,n,0),n.changes}class Hme{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,i){(e<r||n&&n.heightRelevant||i&&i.heightRelevant)&&xP(e,r,this.changes,5)}}function Xme(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.defaultView||window,a=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),s=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let u=t.parentNode;u&&u!=n.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();a=Math.max(a,h.left),o=Math.min(o,h.right),s=Math.max(s,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-r.left,right:Math.max(a,o)-r.left,top:s-(r.top+e),bottom:Math.max(s,l)-(r.top+e)}}function Yme(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class WI{constructor(e,r,n){this.from=e,this.to=r,this.size=n}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=r[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,r){return fr.replace({widget:new qme(this.size*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class qme extends Mf{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class w9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=b9,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ln.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(X5).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new jme(r),this.stateDeco=e.facet(Pw).filter(n=>typeof n!="function"),this.heightMap=lo.empty().applyChanges(this.stateDeco,sn.empty,this.heightOracle.setDoc(e.doc),[new sl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=fr.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!e.some(({from:a,to:o})=>i>=a&&i<=o)){let{from:a,to:o}=this.lineBlockAt(i);e.push(new eS(a,o))}}this.viewports=e.sort((n,i)=>n.from-i.from),this.scaler=this.heightMap.height<=7e6?b9:new Zme(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:g1(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Pw).filter(c=>typeof c!="function");let i=e.changedRanges,a=sl.extendWithRanges(i,Vme(n,this.stateDeco,e?e.changes:Wi.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(JQ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Ln.RTL:Ln.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),s=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0;if(s.width&&s.height){let{scaleX:b,scaleY:x}=AQ(r,s);(this.scaleX!=b||this.scaleY!=x)&&(this.scaleX=b,this.scaleY=x,u|=8,o=l=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=OQ(e.scrollDOM);let p=(this.printing?Yme:Xme)(r,this.paddingTop),v=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=s.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:S,textHeight:E}=e.docView.measureTextSize();o=x>0&&i.refresh(a,x,S,E,y/S,b),o&&(e.docView.minWidth=0,u|=8)}v>0&&g>0?c=Math.max(v,g):v<0&&g<0&&(c=Math.min(v,g)),i.heightChanged=!1;for(let x of this.viewports){let S=x.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?lo.empty().applyChanges(this.stateDeco,sn.empty,this.heightOracle,[new sl(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Gme(x.from,S))}i.heightChanged&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new eS(i.lineAt(o-n*1e3,In.ByHeight,a,0,0).from,i.lineAt(s+(1-n)*1e3,In.ByHeight,a,0,0).to);if(r){let{head:u}=r.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,In.ByPos,a,0,0),h;r.y=="center"?h=(f.top+f.bottom)/2-c/2:r.y=="start"||r.y=="nearest"&&u<l.from?h=f.top:h=f.bottom-c,l=new eS(i.lineAt(h-1e3/2,In.ByHeight,a,0,0).from,i.lineAt(h+c+1e3/2,In.ByHeight,a,0,0).to)}}return l}mapViewport(e,r){let n=r.mapPos(e.from,-1),i=r.mapPos(e.to,1);return new eS(this.heightMap.lineAt(n,In.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,In.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,In.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(r,In.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||a>=s+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&a<s+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let i of e)r.touchesRange(i.from,i.to)||n.push(new WI(r.mapPos(i.from),r.mapPos(i.to),i.size));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,o=i<<1;if(this.defaultTextDirection!=Ln.LTR&&!n)return[];let s=[],l=(u,c,f,h)=>{if(c-u<a)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let g of p)if(g>u&&g<c){l(u,g-10,f,h),l(g+10,c,f,h);return}let v=Qme(e,g=>g.from>=f.from&&g.to<=f.to&&Math.abs(g.from-u)<a&&Math.abs(g.to-c)<a&&!p.some(m=>g.from<m&&g.to>m));if(!v){if(c<f.to&&r&&n&&r.visibleRanges.some(g=>g.from<=c&&g.to>=c)){let g=r.moveToLineBoundary(Qe.cursor(c),!1,!0).head;g>u&&(c=g)}v=new WI(u,c,this.gapSize(f,u,c,h))}s.push(v)};for(let u of this.viewportLines){if(u.length<o)continue;let c=Kme(u.from,u.to,this.stateDeco);if(c.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(n){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,g;if(f!=null){let m=rS(c,f),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;v=m-y,g=m+y}else v=(this.visibleTop-u.top-p)/u.height,g=(this.visibleBottom-u.top+p)/u.height;h=tS(c,v),d=tS(c,g)}else{let p=c.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,g,m;if(f!=null){let y=rS(c,f),w=((this.pixelViewport.right-this.pixelViewport.left)/2+v)/p;g=y-w,m=y+w}else g=(this.pixelViewport.left-v)/p,m=(this.pixelViewport.right+v)/p;h=tS(c,g),d=tS(c,m)}h>u.from&&l(u.from,h,u,c),d<u.to&&l(d,u.to,u,c)}return s}gapSize(e,r,n,i){let a=rS(i,n)-rS(i,r);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){WI.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=fr.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];Jr.spans(e,this.viewport.from,this.viewport.to,{span(i,a){r.push({from:i,to:a})},point(){}},20);let n=r.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=r[a].from||i.to!=r[a].to);return this.visibleRanges=r,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||g1(this.heightMap.lineAt(e,In.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return g1(this.heightMap.lineAt(this.scaler.fromDOM(e),In.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return g1(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class eS{constructor(e,r){this.from=e,this.to=r}}function Kme(t,e,r){let n=[],i=t,a=0;return Jr.spans(r,t,e,{span(){},point(o,s){o>i&&(n.push({from:i,to:o}),a+=o-i),i=s}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function tS({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let i=0;;i++){let{from:a,to:o}=e[i],s=o-a;if(n<=s)return a+n;n-=s}}function rS(t,e){let r=0;for(let{from:n,to:i}of t.ranges){if(e<=i){r+=e-n;break}r+=i-n}return r/t.total}function Qme(t,e){for(let r of t)if(e(r))return r}const b9={toDOM(t){return t},fromDOM(t){return t},scale:1};class Zme{constructor(e,r,n){let i=0,a=0,o=0;this.viewports=n.map(({from:s,to:l})=>{let u=r.lineAt(s,In.ByPos,e,0,0).top,c=r.lineAt(l,In.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let s of this.viewports)s.domTop=o+(s.top-a)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),a=s.bottom}toDOM(e){for(let r=0,n=0,i=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let r=0,n=0,i=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}}function g1(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new Vu(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(i=>g1(i,e)):t._content)}const nS=Gt.define({combine:t=>t.join(" ")}),TP=Gt.define({combine:t=>t.indexOf(!0)>-1}),IP=sd.newName(),yZ=sd.newName(),wZ=sd.newName(),bZ={"&light":"."+yZ,"&dark":"."+wZ};function OP(t,e,r){return new sd(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return t;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):t+" "+n}})}const Jme=OP("."+IP,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bZ),m1="";class eye{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(Zr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=m1}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==r)break;let s=Dn.get(i),l=Dn.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:x9(i))||x9(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,s;if(this.lineSeparator?(a=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(r))&&(a=s.index,o=s[0].length),this.append(r.slice(n,a<0?r.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=a+o}}readNode(e){if(e.cmIgnore)return;let r=Dn.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(tye(e,n.node,n.offset)?r:0))}}function tye(t,e,r){for(;;){if(!e||r<wf(e))return!1;if(e==t)return!0;r=Dw(e)+1,e=e.parentNode}}function x9(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class S9{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class rye{constructor(e,r,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let s=a||o?[]:aye(e),l=new eye(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=oye(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=a&&a.node==s.focusNode&&a.offset==s.focusOffset||!vP(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=o&&o.node==s.anchorNode&&o.offset==s.anchorOffset||!vP(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),c=e.viewport;if((Wt.ios||Wt.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),h=Math.max(l,u),d=c.from-f,p=c.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=Qe.single(u,l)}}}function xZ(t,e){let r,{newSel:n}=e,i=t.state.selection.main,a=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,l=i.from,u=null;(a===8||Wt.android&&e.text.length<s-o)&&(l=i.to,u="end");let c=iye(t.state.doc.sliceString(o,s,m1),e.text,l-o,u);c&&(Wt.chrome&&a==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==m1+m1&&c.toB--,r={from:o+c.from,to:o+c.toA,insert:sn.of(e.text.slice(c.from,c.toB).split(m1))})}else n&&(!t.hasFocus&&t.state.facet(RM)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,i.to))}:(Wt.mac||Wt.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=Qe.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:sn.of([" "])}):Wt.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=Qe.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:sn.of([" "])}),r){if(Wt.ios&&t.inputState.flushIOSKey()||Wt.android&&(r.from==i.from&&r.to==i.to&&r.insert.length==1&&r.insert.lines==2&&E0(t.contentDOM,"Enter",13)||(r.from==i.from-1&&r.to==i.to&&r.insert.length==0||a==8&&r.insert.length<r.to-r.from&&r.to>i.head)&&E0(t.contentDOM,"Backspace",8)||r.from==i.from&&r.to==i.to+1&&r.insert.length==0&&E0(t.contentDOM,"Delete",46)))return!0;let o=r.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let s,l=()=>s||(s=nye(t,r,n));return t.state.facet(KQ).some(u=>u(t,r.from,r.to,o,l))||t.dispatch(l()),!0}else if(n&&!n.main.eq(i)){let o=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),s=t.inputState.lastSelectionOrigin),t.dispatch({selection:n,scrollIntoView:o,userEvent:s}),!0}else return!1}function nye(t,e,r){let n,i=t.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let s=a.from<e.from?i.sliceDoc(a.from,e.from):"",l=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(t.state.toText(s+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let s=i.changes(e),l=r&&r.main.to<=s.newLength?r.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let u=t.state.sliceDoc(e.from,e.to),c,f=r&&aZ(t,r.main.head);if(f){let p=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-p}}else c=t.state.doc.lineAt(a.head);let h=a.to-e.to,d=a.to-a.from;n=i.changeByRange(p=>{if(p.from==a.from&&p.to==a.to)return{changes:s,range:l||p.map(s)};let v=p.to-h,g=v-u.length;if(p.to-p.from!=d||t.state.sliceDoc(g,v)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let m=i.changes({from:g,to:v,insert:e.insert}),y=p.to-a.to;return{changes:m,range:l?Qe.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(m)}})}else n={changes:s,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function iye(t,e,r,n){let i=Math.min(t.length,e.length),a=0;for(;a<i&&t.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&t.length==e.length)return null;let o=t.length,s=e.length;for(;o>0&&s>0&&t.charCodeAt(o-1)==e.charCodeAt(s-1);)o--,s--;if(n=="end"){let l=Math.max(0,a-Math.min(o,s));r-=o+l-a}if(o<a&&t.length<e.length){let l=r<=a&&r>=o?a-r:0;a-=l,s=a+(s-o),o=a}else if(s<a){let l=r<=a&&r>=s?a-r:0;a-=l,o=a+(o-s),s=a}return{from:a,toA:o,toB:s}}function aye(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}=t.observer.selectionRange;return r&&(e.push(new S9(r,n)),(i!=r||a!=n)&&e.push(new S9(i,a))),e}function oye(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?Qe.single(r+e,n+e):null}const sye={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},VI=Wt.ie&&Wt.ie_version<=11;class lye{constructor(e){this.view=e,this.active=!1,this.selectionRange=new V0e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(Wt.ie&&Wt.ie_version<=11||Wt.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),VI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(RM)?n.root.activeElement!=this.dom:!QE(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(Wt.ie&&Wt.ie_version<=11||Wt.android&&Wt.chrome)&&!n.state.selection.main.empty&&i.focusNode&&H1(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=Wt.safari&&e.root.nodeType==11&&j0e(this.dom.ownerDocument)==this.dom&&uye(this.view)||pC(e.root);if(!r||this.selectionRange.eq(r))return!1;let n=QE(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&X0e(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,sye),VI&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),VI&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&E0(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let a of e){let o=this.readMutation(a);o&&(o.typeOver&&(i=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&QE(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new rye(this.view,e,r,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=xZ(this.view,r);return this.view.state==n&&this.view.update([]),i}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=E9(r,e.previousSibling||e.target.previousSibling,-1),i=E9(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function E9(t,e,r){for(;e;){let n=Dn.get(e);if(n&&n.parent==t)return n;let i=e.parentNode;e=i!=t.dom?i:r>0?e.nextSibling:e.previousSibling}return null}function uye(t){let e=null;function r(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),!e)return null;let n=e.startContainer,i=e.startOffset,a=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return H1(s.node,s.offset,a,o)&&([n,i,a,o]=[a,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o}}class Lt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(i=>r(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||H0e(e.parent)||document,this.viewState=new w9(e.state||Zr.create(e)),e.scrollTo&&e.scrollTo.is(Qx)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(p1).map(n=>new jI(n));for(let n of this.plugins)n.update(this);this.observer=new lye(this),this.inputState=new _me(this),this.inputState.ensureHandlers(this.plugins),this.docView=new t9(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let r=e.length==1&&e[0]instanceof Xi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,a=this.state;for(let h of e){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,s=0,l=null;e.some(h=>h.annotation(pZ))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=vZ(a,o),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(Zr.phrases)!=this.state.facet(Zr.phrases))return this.setState(a);i=vC.create(this,a,e),i.flags|=s;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new _0(d.empty?d:Qe.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Qx)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=gC.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(v1)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(nS)!=i.state.facet(nS)&&(this.viewState.mustMeasureContent=!0),(r||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(CP))try{h(i)}catch(d){ol(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!xZ(this,c)&&u.force&&E0(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new w9(e),this.plugins=e.facet(p1).map(n=>new jI(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new t9(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(p1),n=e.state.facet(p1);if(r!=n){let i=[];for(let a of n){let o=r.indexOf(a);if(o<0)i.push(new jI(a));else{let s=this.plugins[o];s.mustUpdate=e,i.push(s)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(o<0)if(OQ(n))a=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);a=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return ol(this.state,p),_9}}),f=vC.create(this,this.state,[]),h=!1;f.flags|=l,r?r.flags|=l:r=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f));for(let d=0;d<u.length;d++)if(c[d]!=_9)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){ol(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(p>1||p<-1){i=i+p,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let s of this.state.facet(CP))s(r)}get themeClasses(){return IP+" "+(this.state.facet(TP)?wZ:yZ)+" "+this.state.facet(nS)}updateAttrs(){let e=C9(this,eZ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(RM)?"true":"false",class:"cm-content",style:`${Wt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),C9(this,X5,r);let n=this.observer.ignore(()=>{let i=bP(this.contentDOM,this.contentAttrs,r),a=bP(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let i of n.effects)if(i.is(Lt.announce)){r&&(this.announceDOM.textContent=""),r=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(v1);let e=this.state.facet(Lt.cspNonce);sd.mount(this.root,this.styleModules.concat(Jme).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return UI(this,e,s9(this,e,r,n))}moveByGroup(e,r){return UI(this,e,s9(this,e,r,n=>Sme(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=n[r?n.length-1:0];return Qe.cursor(a.side(r,i)+e.from,a.forward(!r,i)?1:-1)}moveToLineBoundary(e,r,n=!0){return xme(this,e,r,n)}moveVertically(e,r,n){return UI(this,e,Eme(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),sZ(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),o=a[Nh.find(a,e-i.from,-1,r)];return PM(n,o.dir==Ln.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ZQ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>cye)return WQ(e.length);let r=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==r&&(a.fresh||UQ(a.isolates,n=e9(this,e))))return a.order;n||(n=e9(this,e));let i=ame(e.text,r,n);return this.bidiCache.push(new gC(e.from,e.to,r,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Wt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{TQ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return Qx.of(new _0(typeof e=="number"?Qe.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Qx.of(new _0(Qe.cursor(n.from),"start","start",n.top-e,r,!0))}static domEventHandlers(e){return bi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return bi.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=sd.newName(),i=[nS.of(n),v1.of(OP(`.${n}`,e))];return r&&r.dark&&i.push(TP.of(!0)),i}static baseTheme(e){return Wm.lowest(v1.of(OP("."+IP,e,bZ)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),i=n&&Dn.get(n)||Dn.get(e);return((r=i==null?void 0:i.rootView)===null||r===void 0?void 0:r.view)||null}}Lt.styleModule=v1;Lt.inputHandler=KQ;Lt.focusChangeEffect=QQ;Lt.perLineTextDirection=ZQ;Lt.exceptionSink=qQ;Lt.updateListener=CP;Lt.editable=RM;Lt.mouseSelectionStyle=YQ;Lt.dragMovesSelection=XQ;Lt.clickAddsSelectionRange=HQ;Lt.decorations=Pw;Lt.outerDecorations=tZ;Lt.atomicRanges=Y5;Lt.bidiIsolatedRanges=rZ;Lt.scrollMargins=nZ;Lt.darkTheme=TP;Lt.cspNonce=Gt.define({combine:t=>t.length?t[0]:""});Lt.contentAttributes=X5;Lt.editorAttributes=eZ;Lt.lineWrapping=Lt.contentAttributes.of({class:"cm-lineWrapping"});Lt.announce=Fr.define();const cye=4096,_9={};class gC{constructor(e,r,n,i,a,o){this.from=e,this.to=r,this.dir=n,this.isolates=i,this.fresh=a,this.order=o}static update(e,r){if(r.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Ln.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let o=e[a];o.dir==i&&!r.touchesRange(o.from,o.to)&&n.push(new gC(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function C9(t,e,r){for(let n=t.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],o=typeof a=="function"?a(t):a;o&&wP(o,r)}return r}const fye=Wt.mac?"mac":Wt.windows?"win":Wt.linux?"linux":"key";function hye(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,a,o,s;for(let l=0;l<r.length-1;++l){const u=r[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function iS(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const dye=Wm.default(Lt.domEventHandlers({keydown(t,e){return EZ(SZ(e.state),t,e,"editor")}})),NM=Gt.define({enables:dye}),k9=new WeakMap;function SZ(t){let e=t.facet(NM),r=k9.get(e);return r||k9.set(e,r=gye(e.reduce((n,i)=>n.concat(i),[]))),r}function pye(t,e,r){return EZ(SZ(t.state),e,t,r)}let Sh=null;const vye=4e3;function gye(t,e=fye){let r=Object.create(null),n=Object.create(null),i=(o,s)=>{let l=n[o];if(l==null)n[o]=s;else if(l!=s)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,s,l,u,c)=>{var f,h;let d=r[o]||(r[o]=Object.create(null)),p=s.split(/ (?!$)/).map(m=>hye(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=Sh={view:w,prefix:y,scope:o};return setTimeout(()=>{Sh==b&&(Sh=null)},vye),!0}]})}let v=p.join(" ");i(v,!1);let g=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),u&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let o of t){let s=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of s){let c=r[u]||(r[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in c)c[f].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of s)a(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}function EZ(t,e,r,n){let i=z0e(e),a=xa(i,0),o=tl(a)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;Sh&&Sh.view==r&&Sh.scope==n&&(s=Sh.prefix+" ",uZ.indexOf(e.keyCode)<0&&(u=!0,Sh=null));let f=new Set,h=g=>{if(g){for(let m of g.run)if(!f.has(m)&&(f.add(m),m(r,e)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),u=!0)}return!1},d=t[n],p,v;return d&&(h(d[s+iS(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Wt.windows&&e.ctrlKey&&e.altKey)&&(p=ld[e.keyCode])&&p!=i?(h(d[s+iS(p,e,!0)])||e.shiftKey&&(v=Ow[e.keyCode])!=i&&v!=p&&h(d[s+iS(v,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(d[s+iS(i,e,!0)])&&(l=!0),!l&&h(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class H2{constructor(e,r,n,i,a){this.className=e,this.left=r,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=_Z(e);return[new H2(r,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return mye(e,r,n)}}function _Z(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ln.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function M9(t,e,r){let n=Qe.cursor(e);return{from:Math.max(r.from,t.moveToLineBoundary(n,!1,!0).from),to:Math.min(r.to,t.moveToLineBoundary(n,!0,!0).from),type:so.Text}}function mye(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),i=Math.min(r.to,t.viewport.to),a=t.textDirection==Ln.LTR,o=t.contentDOM,s=o.getBoundingClientRect(),l=_Z(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=s.right-(c?parseInt(c.paddingRight):0),d=MP(t,n),p=MP(t,i),v=d.type==so.Text?d:null,g=p.type==so.Text?p:null;if(v&&(t.lineWrapping||d.widgetLineBreaks)&&(v=M9(t,n,v)),g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=M9(t,i,g)),v&&g&&v.from==g.from)return y(w(r.from,r.to,v));{let x=v?w(r.from,null,v):b(d,!1),S=g?w(null,r.to,g):b(p,!0),E=[];return(v||d).to<(g||p).from-(v&&g?1:0)||d.widgetLineBreaks>1&&x.bottom+t.defaultLineHeight/2<S.top?E.push(m(f,x.bottom,h,S.top)):x.bottom<S.top&&t.elementAtHeight((x.bottom+S.top)/2).type==so.Text&&(x.bottom=S.top=(x.bottom+S.top)/2),y(x).concat(E).concat(y(S))}function m(x,S,E,_){return new H2(e,x-l.left,S-l.top-.01,E-x,_-S+.01)}function y({top:x,bottom:S,horizontal:E}){let _=[];for(let k=0;k<E.length;k+=2)_.push(m(E[k],x,E[k+1],S));return _}function w(x,S,E){let _=1e9,k=-1e9,C=[];function A(O,N,R,B,F){let D=t.coordsAtPos(O,O==E.to?-2:2),L=t.coordsAtPos(R,R==E.from?2:-2);!D||!L||(_=Math.min(D.top,L.top,_),k=Math.max(D.bottom,L.bottom,k),F==Ln.LTR?C.push(a&&N?f:D.left,a&&B?h:L.right):C.push(!a&&B?f:L.left,!a&&N?h:D.right))}let M=x??E.from,T=S??E.to;for(let O of t.visibleRanges)if(O.to>M&&O.from<T)for(let N=Math.max(O.from,M),R=Math.min(O.to,T);;){let B=t.state.doc.lineAt(N);for(let F of t.bidiSpans(B)){let D=F.from+B.from,L=F.to+B.from;if(D>=R)break;L>N&&A(Math.max(D,N),x==null&&D<=M,Math.min(L,R),S==null&&L>=T,F.dir)}if(N=B.to+1,N>=R)break}return C.length==0&&A(M,x==null,T,S==null,t.textDirection),{top:_,bottom:k,horizontal:C}}function b(x,S){let E=s.top+(S?x.top:x.bottom);return{top:E,bottom:E,horizontal:[]}}}function yye(t,e){return t.constructor==e.constructor&&t.eq(e)}class wye{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(e_)!=e.state.facet(e_)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let r=0,n=e.facet(e_);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!yye(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of e)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const e_=Gt.define();function CZ(t){return[bi.define(e=>new wye(e,t)),e_.of(t)]}const kZ=!Wt.ios,Lw=Gt.define({combine(t){return bc(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function bye(t={}){return[Lw.of(t),xye,Sye,Eye,JQ.of(!0)]}function MZ(t){return t.startState.facet(Lw)!=t.state.facet(Lw)}const xye=CZ({above:!0,markers(t){let{state:e}=t,r=e.facet(Lw),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||kZ:r.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:Qe.cursor(i.head,i.head>i.anchor?-1:1);for(let l of H2.forRange(t,o,s))n.push(l)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=MZ(t);return r&&A9(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){A9(e.state,t)},class:"cm-cursorLayer"});function A9(t,e){e.style.animationDuration=t.facet(Lw).cursorBlinkRate+"ms"}const Sye=CZ({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:H2.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||MZ(t)},class:"cm-selectionLayer"}),DP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};kZ&&(DP[".cm-line"].caretColor="transparent !important",DP[".cm-content"]={caretColor:"transparent !important"});const Eye=Wm.highest(Lt.theme(DP)),AZ=Fr.define({map(t,e){return t==null?null:e.mapPos(t)}}),y1=Ia.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(AZ)?n.value:r,t)}}),_ye=bi.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(y1);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(y1)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(y1),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(y1)!=t&&this.view.dispatch({effects:AZ.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Cye(){return[y1,_ye]}function T9(t,e,r,n,i){e.lastIndex=0;for(let a=t.iterRange(r,n),o=r,s;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;s=e.exec(a.value);)i(o+s.index,s)}function kye(t,e){let r=t.visibleRanges;if(r.length==1&&r[0].from==t.viewport.from&&r[0].to==t.viewport.to)return r;let n=[];for(let{from:i,to:a}of r)i=Math.max(t.state.doc.lineAt(i).from,i-e),a=Math.min(t.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class Mye{constructor(e){const{regexp:r,decoration:n,decorate:i,boundary:a,maxLength:o=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,i)this.addMatch=(s,l,u,c)=>i(c,u,u+s[0].length,s,l);else if(typeof n=="function")this.addMatch=(s,l,u,c)=>{let f=n(s,l,u);f&&c(u,u+s[0].length,f)};else if(n)this.addMatch=(s,l,u,c)=>c(u,u+s[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(e){let r=new od,n=r.add.bind(r);for(let{from:i,to:a}of kye(e,this.maxLength))T9(e.state.doc,this.regexp,i,a,(o,s)=>this.addMatch(s,e,o,n));return r.finish()}updateDeco(e,r){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,o,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(l,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,r.map(e.changes),n,i):r}updateRange(e,r,n,i){for(let a of e.visibleRanges){let o=Math.max(a.from,n),s=Math.min(a.to,i);if(s>o){let l=e.state.doc.lineAt(o),u=l.to<s?e.state.doc.lineAt(s):l,c=Math.max(a.from,l.from),f=Math.min(a.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){f=s;break}}let h=[],d,p=(v,g,m)=>h.push(m.range(v,g));if(l==u)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<f-l.from;)this.addMatch(d,e,d.index+l.from,p);else T9(e.state.doc,this.regexp,c,f,(v,g)=>this.addMatch(g,e,v,p));r=r.update({filterFrom:c,filterTo:f,filter:(v,g)=>v<c||g>f,add:h})}}return r}}const PP=/x/.unicode!=null?"gu":"g",Aye=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,PP),Tye={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let HI=null;function Iye(){var t;if(HI==null&&typeof document<"u"&&document.body){let e=document.body.style;HI=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return HI||!1}const t_=Gt.define({combine(t){let e=bc(t,{render:null,specialChars:Aye,addSpecialChars:null});return(e.replaceTabs=!Iye())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,PP)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,PP)),e}});function Oye(t={}){return[t_.of(t),Dye()]}let I9=null;function Dye(){return I9||(I9=bi.fromClass(class{constructor(t){this.view=t,this.decorations=fr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(t_)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Mye({regexp:t.specialChars,decoration:(e,r,n)=>{let{doc:i}=r.state,a=xa(e[0],0);if(a==9){let o=i.lineAt(n),s=r.state.tabSize,l=Vm(o.text,s,n-o.from);return fr.replace({widget:new Nye((s-l%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=fr.replace({widget:new Rye(t,a)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(t_);t.startState.facet(t_)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Pye="";function Lye(t){return t>=32?Pye:t==10?"":String.fromCharCode(9216+t)}class Rye extends Mf{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=Lye(this.code),n=e.state.phrase("Control character")+" "+(Tye[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let a=document.createElement("span");return a.textContent=r,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class Nye extends Mf{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Fye(){return $ye}const Bye=fr.line({class:"cm-activeLine"}),$ye=bi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let i=t.lineBlockAt(n.head);i.from>e&&(r.push(Bye.range(i.from)),e=i.from)}return fr.set(r)}},{decorations:t=>t.decorations});class zye extends Mf{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let r=e.firstChild?lm(e.firstChild):[];if(!r.length)return null;let n=window.getComputedStyle(e.parentNode),i=PM(r[0],n.direction!="rtl"),a=parseInt(n.lineHeight);return i.bottom-i.top>a*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+a}:i}ignoreEvent(){return!1}}function jye(t){return bi.fromClass(class{constructor(e){this.view=e,this.placeholder=t?fr.set([fr.widget({widget:new zye(t),side:1}).range(0)]):fr.none}get decorations(){return this.view.state.doc.length?fr.none:this.placeholder}},{decorations:e=>e.decorations})}const LP=2e3;function Gye(t,e,r){let n=Math.min(e.line,r.line),i=Math.max(e.line,r.line),a=[];if(e.off>LP||r.off>LP||e.col<0||r.col<0){let o=Math.min(e.off,r.off),s=Math.max(e.off,r.off);for(let l=n;l<=i;l++){let u=t.doc.line(l);u.length<=s&&a.push(Qe.range(u.from+o,u.to+s))}}else{let o=Math.min(e.col,r.col),s=Math.max(e.col,r.col);for(let l=n;l<=i;l++){let u=t.doc.line(l),c=hP(u.text,o,t.tabSize,!0);if(c<0)a.push(Qe.cursor(u.to));else{let f=hP(u.text,s,t.tabSize);a.push(Qe.range(u.from+c,u.from+f))}}}return a}function Uye(t,e){let r=t.coordsAtPos(t.viewport.from);return r?Math.round(Math.abs((r.left-e)/t.defaultCharacterWidth)):-1}function O9(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),n=t.state.doc.lineAt(r),i=r-n.from,a=i>LP?-1:i==n.length?Uye(t,e.clientX):Vm(n.text,t.state.tabSize,r-n.from);return{line:n.number,col:a,off:i}}function Wye(t,e){let r=O9(t,e),n=t.state.selection;return r?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(r.line).from),o=i.state.doc.lineAt(a);r={line:o.number,col:r.col,off:Math.min(r.off,o.length)},n=n.map(i.changes)}},get(i,a,o){let s=O9(t,i);if(!s)return n;let l=Gye(t.state,r,s);return l.length?o?Qe.create(l.concat(n.ranges)):Qe.create(l):n}}:null}function Vye(t){let e=(t==null?void 0:t.eventFilter)||(r=>r.altKey&&r.button==0);return Lt.mouseSelectionStyle.of((r,n)=>e(n)?Wye(r,n):null)}const Hye={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Xye={style:"cursor: crosshair"};function Yye(t={}){let[e,r]=Hye[t.key||"Alt"],n=bi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||r(i))},keyup(i){(i.keyCode==e||!r(i))&&this.set(!1)},mousemove(i){this.set(r(i))}}});return[n,Lt.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?Xye:null})]}const By="-10000px";class TZ{constructor(e,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=n(o,a))}update(e,r){var n;let i=e.state.facet(this.facet),a=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],s=r?[]:null;for(let l=0;l<a.length;l++){let u=a[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),s&&(s[l]=!!u.above);else{let f=o[l]=this.tooltipViews[c];s&&(s[l]=r[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(s.forEach((l,u)=>r[u]=l),r.length=s.length),this.input=i,this.tooltips=a,this.tooltipViews=o,!0}}function qye(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const XI=Gt.define({combine:t=>{var e,r,n;return{position:Wt.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||qye}}}),D9=new WeakMap,K5=bi.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(XI);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TZ(t,Q5,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(XI);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.insertBefore(i,n)}return r.dom.style.position=this.position,r.dom.style.top=By,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,r=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Wt.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==By&&i.style.left=="0px"){let a=i.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,r=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:r}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(XI).tooltipSpace(this.view),scaleX:e,scaleY:r,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{editor:r,space:n,scaleX:i,scaleY:a}=t,o=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,f=t.pos[s],h=t.size[s];if(!f||f.bottom<=Math.max(r.top,n.top)||f.top>=Math.min(r.bottom,n.bottom)||f.right<Math.max(r.left,n.left)-.1||f.left>Math.min(r.right,n.right)+.1){c.style.top=By;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,v=h.right-h.left,g=(e=D9.get(u))!==null&&e!==void 0?e:h.bottom-h.top,m=u.offset||Qye,y=this.view.textDirection==Ln.LTR,w=h.width>n.right-n.left?y?n.left:n.right-h.width:y?Math.min(f.left-(d?14:0)+m.x,n.right-v):Math.max(n.left,f.left-v+(d?14:0)-m.x),b=this.above[s];!l.strictSide&&(b?f.top-(h.bottom-h.top)-m.y<n.top:f.bottom+(h.bottom-h.top)+m.y>n.bottom)&&b==n.bottom-f.bottom>f.top-n.top&&(b=this.above[s]=!b);let x=(b?f.top-n.top:n.bottom-f.bottom)-p;if(x<g&&u.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=By;continue}D9.set(u,g),c.style.height=(g=x)/a+"px"}else c.style.height&&(c.style.height="");let S=b?f.top-g-p-m.y:f.bottom+p+m.y,E=w+v;if(u.overlap!==!0)for(let _ of o)_.left<E&&_.right>w&&_.top<S+g&&_.bottom>S&&(S=b?_.top-g-2-p:_.bottom+p+2);if(this.position=="absolute"?(c.style.top=(S-t.parent.top)/a+"px",c.style.left=(w-t.parent.left)/i+"px"):(c.style.top=S/a+"px",c.style.left=w/i+"px"),d){let _=f.left+(y?m.x:-m.x)-(w+14-7);d.style.left=_/i+"px"}u.overlap!==!0&&o.push({left:w,top:S,right:E,bottom:S+g}),c.classList.toggle("cm-tooltip-above",b),c.classList.toggle("cm-tooltip-below",!b),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=By}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Kye=Lt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Qye={x:0,y:0},Q5=Gt.define({enables:[K5,Kye]}),mC=Gt.define({combine:t=>t.reduce((e,r)=>e.concat(r),[])});class FM{static create(e){return new FM(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TZ(e,mC,(r,n)=>this.createHostedView(r,n),r=>r.dom.remove())}createHostedView(e,r){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Zye=Q5.compute([mC],t=>{let e=t.facet(mC);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:FM.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class Jye{constructor(e,r,n,i,a){this.view=e,this.source=r,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.nearest(r.target);if(!n)return;let i,a=1;if(n instanceof Rh)i=n.posAtStart;else{if(i=e.posAtCoords(r),i==null)return;let s=e.coordsAtPos(i);if(!s||r.y<s.top||r.y>s.bottom||r.x<s.left-e.defaultCharacterWidth||r.x>s.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==Ln.RTL?-1:1;a=r.x<s.left?-u:u}let o=this.source(e,i,a);if(o!=null&&o.then){let s=this.pending={pos:i};o.then(l=>{this.pending==s&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ol(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(K5),r=e?e.manager.tooltips.findIndex(n=>n.create==FM.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:a}=this;if(i.length&&a&&!e1e(a.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,s=(n=(r=i[0])===null||r===void 0?void 0:r.end)!==null&&n!==void 0?n:o;(o==s?this.view.posAtCoords(this.lastMove)!=o:!t1e(this.view,o,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const aS=4;function e1e(t,e){let r=t.getBoundingClientRect();return e.clientX>=r.left-aS&&e.clientX<=r.right+aS&&e.clientY>=r.top-aS&&e.clientY<=r.bottom+aS}function t1e(t,e,r,n,i,a){let o=t.scrollDOM.getBoundingClientRect(),s=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,s)<i)return!1;let l=t.posAtCoords({x:n,y:i},!1);return l>=e&&l<=r}function r1e(t,e={}){let r=Fr.define(),n=Ia.define({create(){return[]},update(i,a){if(i.length&&(e.hideOnChange&&(a.docChanged||a.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(a,o))),a.docChanged))for(let o of i){let s=a.changes.mapPos(o.pos,-1,ro.TrackDel);if(s!=null){let l=Object.assign(Object.create(null),o);l.pos=s,l.end!=null&&(l.end=a.changes.mapPos(l.end))}}for(let o of a.effects)o.is(r)&&(i=o.value),o.is(n1e)&&(i=[]);return i},provide:i=>mC.from(i)});return[n,bi.define(i=>new Jye(i,t,n,r,e.hoverTime||300)),Zye]}function IZ(t,e){let r=t.plugin(K5);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const n1e=Fr.define(),P9=Gt.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function Rw(t,e){let r=t.plugin(OZ),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const OZ=bi.fromClass(class{constructor(t){this.input=t.state.facet(Nw),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(P9);this.top=new oS(t,!0,e.topContainer),this.bottom=new oS(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(P9);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new oS(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new oS(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(Nw);if(r!=this.input){let n=r.filter(l=>l),i=[],a=[],o=[],s=[];for(let l of n){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),s.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?a:o).push(c)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(o);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Lt.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class oS{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=L9(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=L9(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function L9(t){let e=t.nextSibling;return t.remove(),e}const Nw=Gt.define({enables:OZ});class Sf extends av{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Sf.prototype.elementClass="";Sf.prototype.toDOM=void 0;Sf.prototype.mapMode=ro.TrackBefore;Sf.prototype.startSide=Sf.prototype.endSide=-1;Sf.prototype.point=!0;const r_=Gt.define(),i1e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Jr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Y1=Gt.define();function a1e(t){return[DZ(),Y1.of(Object.assign(Object.assign({},i1e),t))]}const RP=Gt.define({combine:t=>t.some(e=>e)});function DZ(t){let e=[o1e];return t&&t.fixed===!1&&e.push(RP.of(!0)),e}const o1e=bi.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Y1).map(e=>new N9(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(RP),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(RP)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let r=Jr.iter(this.view.state.facet(r_),this.view.viewport.from),n=[],i=this.gutters.map(a=>new s1e(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let o=!0;for(let s of a.type)if(s.type==so.Text&&o){NP(r,n,s.from);for(let l of i)l.line(this.view,s,n);o=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(a.type==so.Text){NP(r,n,a.from);for(let o of i)o.line(this.view,a,n)}else if(a.widget)for(let o of i)o.widget(this.view,a);for(let a of i)a.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Y1),r=t.state.facet(Y1),n=t.docChanged||t.heightChanged||t.viewportChanged||!Jr.eq(t.startState.facet(r_),t.state.facet(r_),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let i of this.gutters)i.update(t)&&(n=!0);else{n=!0;let i=[];for(let a of r){let o=e.indexOf(a);o<0?i.push(new N9(this.view,a)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Lt.scrollMargins.of(e=>{let r=e.plugin(t);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==Ln.LTR?{left:r.dom.offsetWidth*e.scaleX}:{right:r.dom.offsetWidth*e.scaleX}})});function R9(t){return Array.isArray(t)?t:[t]}function NP(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class s1e{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Jr.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:i}=this,a=(r.top-this.height)/e.scaleY,o=r.height/e.scaleY;if(this.i==i.elements.length){let s=new PZ(e,o,a,n);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,o,a,n);this.height=r.bottom,this.i++}line(e,r,n){let i=[];NP(this.cursor,i,r.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,r,i);a&&i.unshift(a);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,r,i)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r);n&&this.addElement(e,r,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class N9{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);r.domEventHandlers[n](e,s,i)&&i.preventDefault()});this.markers=R9(r.markers(e)),r.initialSpacer&&(this.spacer=new PZ(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=R9(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!Jr.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class PZ{constructor(e,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,i)}update(e,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),l1e(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,o=0;;){let s=o,l=a<r.length?r[a++]:null,u=!1;if(l){let c=l.elementClass;c&&(n+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){s=f,u=!0;break}}else s=this.markers.length;for(;o<s;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function l1e(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const u1e=Gt.define(),l0=Gt.define({combine(t){return bc(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let i in r){let a=n[i],o=r[i];n[i]=a?(s,l,u)=>a(s,l,u)||o(s,l,u):o}return n}})}});class YI extends Sf{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function qI(t,e){return t.state.facet(l0).formatNumber(e,t.state)}const c1e=Y1.compute([l0],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(u1e)},lineMarker(e,r,n){return n.some(i=>i.toDOM)?null:new YI(qI(e,e.state.doc.lineAt(r.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(l0)!=e.state.facet(l0),initialSpacer(e){return new YI(qI(e,F9(e.state.doc.lines)))},updateSpacer(e,r){let n=qI(r.view,F9(r.view.state.doc.lines));return n==e.number?e:new YI(n)},domEventHandlers:t.facet(l0).domEventHandlers}));function f1e(t={}){return[l0.of(t),DZ(),c1e]}function F9(t){let e=9;for(;e<t;)e=e*10+9;return e}const h1e=new class extends Sf{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},d1e=r_.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.head).from;i>r&&(r=i,e.push(h1e.range(i)))}return Jr.of(e)});function p1e(){return d1e}const v1e=1024;let g1e=0;class KI{constructor(e,r){this.from=e,this.to=r}}class Kr{constructor(e={}){this.id=g1e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Go.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}Kr.closedBy=new Kr({deserialize:t=>t.split(" ")});Kr.openedBy=new Kr({deserialize:t=>t.split(" ")});Kr.group=new Kr({deserialize:t=>t.split(" ")});Kr.isolate=new Kr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Kr.contextHash=new Kr({perNode:!0});Kr.lookAhead=new Kr({perNode:!0});Kr.mounted=new Kr({perNode:!0});class yC{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[Kr.mounted.id]}}const m1e=Object.create(null);class Go{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):m1e,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Go(e.name||"",r,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(Kr.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(Kr.group),a=-1;a<(i?i.length:0);a++){let o=r[a<0?n.name:i[a]];if(o)return o}}}}Go.none=new Go("",Object.create(null),0,8);class Z5{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let a of e){let o=a(n);o&&(i||(i=Object.assign({},n.props)),i[o[0].id]=o[1])}r.push(i?new Go(n.name,i,n.id,n.flags):n)}return new Z5(r)}}const sS=new WeakMap,B9=new WeakMap;var Ea;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ea||(Ea={}));let Li=class FP{constructor(e,r,n,i,a){if(this.type=e,this.children=r,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=yC.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new $P(this.topNode,e)}cursorAt(e,r=0,n=0){let i=sS.get(this)||this.topNode,a=new $P(i);return a.moveTo(e,r),sS.set(this,a._tree),a}get topNode(){return new ll(this,0,0,null)}resolve(e,r=0){let n=Fw(sS.get(this)||this.topNode,e,r,!1);return sS.set(this,n),n}resolveInner(e,r=0){let n=Fw(B9.get(this)||this.topNode,e,r,!0);return B9.set(this,n),n}resolveStack(e,r=0){return b1e(this,e,r)}iterate(e){let{enter:r,leave:n,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&Ea.IncludeAnonymous)>0;for(let l=this.cursor(o|Ea.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&n&&(s||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:t4(Go.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new FP(this.type,r,n,i,this.propValues),e.makeTree||((r,n,i)=>new FP(Go.none,r,n,i)))}static build(e){return x1e(e)}};Li.empty=new Li(Go.none,[],[],0);class J5{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new J5(this.buffer,this.index)}}class cd{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return Go.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,r,n,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=r&&!(LZ(a,i,o[l+1],o[l+2])&&(s=l,n>0));l=o[l+3]);return s}slice(e,r,n){let i=this.buffer,a=new Uint16Array(r-e),o=0;for(let s=e,l=0;s<r;){a[l++]=i[s++],a[l++]=i[s++]-n;let u=a[l++]=i[s++]-n;a[l++]=i[s++]-e,o=Math.max(o,u)}return new cd(a,o,this.set)}}function LZ(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function Fw(t,e,r,n){for(var i;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let o=!n&&t instanceof ll&&t.index<0?null:t.parent;if(!o)return t;t=o}let a=n?0:Ea.IgnoreOverlays;if(n)for(let o=t,s=o.parent;s;o=s,s=o.parent)o instanceof ll&&o.index<0&&((i=s.enter(e,r,a))===null||i===void 0?void 0:i.from)!=o.from&&(t=s);for(;;){let o=t.enter(e,r,a);if(!o)return t;t=o}}class RZ{cursor(e=0){return new $P(this,e)}getChild(e,r=null,n=null){let i=$9(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return $9(this,e,r,n)}resolve(e,r=0){return Fw(this,e,r,!1)}resolveInner(e,r=0){return Fw(this,e,r,!0)}matchContext(e){return BP(this,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class ll extends RZ{constructor(e,r,n,i){super(),this._tree=e,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=r>0?s.length:-1;e!=u;e+=r){let c=s[e],f=l[e]+o.from;if(LZ(i,n,f,f+c.length)){if(c instanceof cd){if(a&Ea.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,r,n-f,i);if(h>-1)return new Fh(new y1e(o,c,e,f),null,h)}else if(a&Ea.IncludeAnonymous||!c.type.isAnonymous||e4(c)){let h;if(!(a&Ea.IgnoreMounts)&&(h=yC.get(c))&&!h.overlay)return new ll(h.tree,f,e,o);let d=new ll(c,f,e,o);return a&Ea.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(r<0?c.children.length-1:0,r,n,i)}}}if(a&Ea.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+r:e=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let i;if(!(n&Ea.IgnoreOverlays)&&(i=yC.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((r>0?o<=a:o<a)&&(r<0?s>=a:s>a))return new ll(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function $9(t,e,r,n){let i=t.cursor(),a=[];if(!i.firstChild())return a;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function BP(t,e,r=e.length-1){for(let n=t.parent;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class y1e{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}}class Fh extends RZ{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.context.start,n);return a<0?null:new Fh(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&Ea.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return a<0?null:new Fh(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Fh(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new Fh(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let o=n.buffer[this.index+1];e.push(n.slice(i,a,o)),r.push(0)}return new Li(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function NZ(t){if(!t.length)return null;let e=0,r=t[0];for(let a=1;a<t.length;a++){let o=t[a];(o.from>r.from||o.to<r.to)&&(r=o,e=a)}let n=r instanceof ll&&r.index<0?null:r.parent,i=t.slice();return n?i[e]=n:i.splice(e,1),new w1e(i,r)}class w1e{constructor(e,r){this.heads=e,this.node=r}get next(){return NZ(this.heads)}}function b1e(t,e,r){let n=t.resolveInner(e,r),i=null;for(let a=n instanceof ll?n:n.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[n])).push(o.resolve(e,r)),a=o}else{let o=yC.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new ll(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[n])).push(Fw(s,e,r,!1))}}return i?NZ(i):n}class $P{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ll)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof ll?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&Ea.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ea.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ea.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let a=r+e,o=e<0?-1:n._tree.children.length;a!=o;a+=e){let s=n._tree.children[a];if(this.mode&Ea.IncludeAnonymous||s instanceof cd||!s.type.isAnonymous||e4(s))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=a+1;break e}i=this.stack[--a]}for(let i=n;i<this.stack.length;i++)r=new Fh(this.buffer,r,this.stack[i]);return this.bufferNode=new Fh(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&r&&r(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return BP(this.node,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return BP(this.node,e,i);let o=n[r.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function e4(t){return t.children.some(e=>e instanceof cd||!e.type.isAnonymous||e4(e))}function x1e(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:i=v1e,reused:a=[],minRepeatType:o=n.types.length}=t,s=Array.isArray(r)?new J5(r,r.length):r,l=n.types,u=0,c=0;function f(x,S,E,_,k,C){let{id:A,start:M,end:T,size:O}=s,N=c;for(;O<0;)if(s.next(),O==-1){let L=a[A];E.push(L),_.push(M-x);return}else if(O==-3){u=A;return}else if(O==-4){c=A;return}else throw new RangeError(`Unrecognized record size: ${O}`);let R=l[A],B,F,D=M-x;if(T-M<=i&&(F=g(s.pos-S,k))){let L=new Uint16Array(F.size-F.skip),G=s.pos-F.size,Y=L.length;for(;s.pos>G;)Y=m(F.start,L,Y);B=new cd(L,T-F.start,n),D=F.start-x}else{let L=s.pos-O;s.next();let G=[],Y=[],Z=A>=o?A:-1,q=0,pe=T;for(;s.pos>L;)Z>=0&&s.id==Z&&s.size>=0?(s.end<=pe-i&&(p(G,Y,M,q,s.end,pe,Z,N),q=G.length,pe=s.end),s.next()):C>2500?h(M,L,G,Y):f(M,L,G,Y,Z,C+1);if(Z>=0&&q>0&&q<G.length&&p(G,Y,M,q,M,pe,Z,N),G.reverse(),Y.reverse(),Z>-1&&q>0){let Se=d(R);B=t4(R,G,Y,0,G.length,0,T-M,Se,Se)}else B=v(R,G,Y,T-M,N-T)}E.push(B),_.push(D)}function h(x,S,E,_){let k=[],C=0,A=-1;for(;s.pos>S;){let{id:M,start:T,end:O,size:N}=s;if(N>4)s.next();else{if(A>-1&&T<A)break;A<0&&(A=O-i),k.push(M,T,O),C++,s.next()}}if(C){let M=new Uint16Array(C*4),T=k[k.length-2];for(let O=k.length-3,N=0;O>=0;O-=3)M[N++]=k[O],M[N++]=k[O+1]-T,M[N++]=k[O+2]-T,M[N++]=N;E.push(new cd(M,k[2]-T,n)),_.push(T-x)}}function d(x){return(S,E,_)=>{let k=0,C=S.length-1,A,M;if(C>=0&&(A=S[C])instanceof Li){if(!C&&A.type==x&&A.length==_)return A;(M=A.prop(Kr.lookAhead))&&(k=E[C]+A.length+M)}return v(x,S,E,_,k)}}function p(x,S,E,_,k,C,A,M){let T=[],O=[];for(;x.length>_;)T.push(x.pop()),O.push(S.pop()+E-k);x.push(v(n.types[A],T,O,C-k,M-C)),S.push(k-E)}function v(x,S,E,_,k=0,C){if(u){let A=[Kr.contextHash,u];C=C?[A].concat(C):[A]}if(k>25){let A=[Kr.lookAhead,k];C=C?[A].concat(C):[A]}return new Li(x,S,E,_,C)}function g(x,S){let E=s.fork(),_=0,k=0,C=0,A=E.end-i,M={size:0,start:0,skip:0};e:for(let T=E.pos-x;E.pos>T;){let O=E.size;if(E.id==S&&O>=0){M.size=_,M.start=k,M.skip=C,C+=4,_+=4,E.next();continue}let N=E.pos-O;if(O<0||N<T||E.start<A)break;let R=E.id>=o?4:0,B=E.start;for(E.next();E.pos>N;){if(E.size<0)if(E.size==-3)R+=4;else break e;else E.id>=o&&(R+=4);E.next()}k=B,_+=O,C+=R}return(S<0||_==x)&&(M.size=_,M.start=k,M.skip=C),M.size>4?M:void 0}function m(x,S,E){let{id:_,start:k,end:C,size:A}=s;if(s.next(),A>=0&&_<o){let M=E;if(A>4){let T=s.pos-(A-4);for(;s.pos>T;)E=m(x,S,E)}S[--E]=M,S[--E]=C-x,S[--E]=k-x,S[--E]=_}else A==-3?u=_:A==-4&&(c=_);return E}let y=[],w=[];for(;s.pos>0;)f(t.start||0,t.bufferStart||0,y,w,-1,0);let b=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Li(l[t.topID],y.reverse(),w.reverse(),b)}const z9=new WeakMap;function n_(t,e){if(!t.isAnonymous||e instanceof cd||e.type!=t)return 1;let r=z9.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof Li)){r=1;break}r+=n_(t,n)}z9.set(e,r)}return r}function t4(t,e,r,n,i,a,o,s,l){let u=0;for(let p=n;p<i;p++)u+=n_(t,e[p]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(p,v,g,m,y){for(let w=g;w<m;){let b=w,x=v[w],S=n_(t,p[w]);for(w++;w<m;w++){let E=n_(t,p[w]);if(S+E>=c)break;S+=E}if(w==b+1){if(S>c){let E=p[b];d(E.children,E.positions,0,E.children.length,v[b]+y);continue}f.push(p[b])}else{let E=v[w-1]+p[w-1].length-x;f.push(t4(t,p,v,b,w,x,E,null,l))}h.push(x+y-a)}}return d(e,r,n,i,0),(s||l)(f,h,o)}class Wp{constructor(e,r,n,i,a=!1,o=!1){this.from=e,this.to=r,this.tree=n,this.offset=i,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let i=[new Wp(0,e.length,e,0,!1,n)];for(let a of r)a.to>e.length&&i.push(a);return i}static applyChanges(e,r,n=128){if(!r.length)return e;let i=[],a=1,o=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<r.length?r[s]:null,f=c?c.fromA:1e9;if(f-l>=n)for(;o&&o.from<f;){let h=o;if(l>=h.from||f<=h.to||u){let d=Math.max(h.from,l)-u,p=Math.min(h.to,f)-u;h=d>=p?null:new Wp(d,p,h.tree,h.offset+u,s>0,!!c)}if(h&&i.push(h),o.to>f)break;o=a<e.length?e[a++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let FZ=class{startParse(e,r,n){return typeof e=="string"&&(e=new S1e(e)),n=n?n.length?n.map(i=>new KI(i.from,i.to)):[new KI(0,0)]:[new KI(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let i=this.startParse(e,r,n);for(;;){let a=i.advance();if(a)return a}}};class S1e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new Kr({perNode:!0});let E1e=0;class ju{constructor(e,r,n){this.set=e,this.base=r,this.modified=n,this.id=E1e++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let r=new ju([],null,[]);if(r.set.push(r),e)for(let n of e.set)r.set.push(n);return r}static defineModifier(){let e=new wC;return r=>r.modified.indexOf(e)>-1?r:wC.get(r.base||r,r.modified.concat(e).sort((n,i)=>n.id-i.id))}}let _1e=0;class wC{constructor(){this.instances=[],this.id=_1e++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(s=>s.base==e&&C1e(r,s.modified));if(n)return n;let i=[],a=new ju(i,e,r);for(let s of r)s.instances.push(a);let o=k1e(r);for(let s of e.set)if(!s.modified.length)for(let l of o)i.push(wC.get(s,l));return a}}function C1e(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function k1e(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function M1e(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let a=[],o=2,s=i;for(let f=0;;){if(s=="..."&&f>0&&f+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!h)throw new RangeError("Invalid path: "+i);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);s=i.slice(f)}let l=a.length-1,u=a[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new bC(n,o,l>0?a.slice(0,l):null);e[u]=c.sort(e[u])}}return BZ.add(e)}const BZ=new Kr;class bC{constructor(e,r,n,i){this.tags=e,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}bC.empty=new bC([],2,null);function $Z(t,e){let r=Object.create(null);for(let a of t)if(!Array.isArray(a.tag))r[a.tag.id]=a.class;else for(let o of a.tag)r[o.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let o=i;for(let s of a)for(let l of s.set){let u=r[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:n}}function A1e(t,e){let r=null;for(let n of t){let i=n.style(e);i&&(r=r?r+" "+i:i)}return r}function T1e(t,e,r,n=0,i=t.length){let a=new I1e(n,Array.isArray(e)?e:[e],r);a.highlightRange(t.cursor(),n,i,"",a.highlighters),a.flush(i)}class I1e{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,i,a){let{type:o,from:s,to:l}=e;if(s>=n||l<=r)return;o.isTop&&(a=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,c=O1e(e)||bC.empty,f=A1e(a,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(r,s),u),c.opaque)return;let h=e.tree&&e.tree.prop(Kr.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+s,1),p=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),v=e.firstChild();for(let g=0,m=s;;g++){let y=g<h.overlay.length?h.overlay[g]:null,w=y?y.from+s:l,b=Math.max(r,m),x=Math.min(n,w);if(b<x&&v)for(;e.from<x&&(this.highlightRange(e,b,x,i,a),this.startSpan(Math.min(x,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>n)break;m=y.to+s,m>r&&(this.highlightRange(d.cursor(),Math.max(r,y.from+s),Math.min(n,m),"",p),this.startSpan(Math.min(n,m),u))}v&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,i,a),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}function O1e(t){let e=t.type.prop(BZ);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const St=ju.define,lS=St(),ph=St(),j9=St(ph),G9=St(ph),vh=St(),uS=St(vh),QI=St(vh),Du=St(),rp=St(Du),Eu=St(),_u=St(),zP=St(),$y=St(zP),cS=St(),$e={comment:lS,lineComment:St(lS),blockComment:St(lS),docComment:St(lS),name:ph,variableName:St(ph),typeName:j9,tagName:St(j9),propertyName:G9,attributeName:St(G9),className:St(ph),labelName:St(ph),namespace:St(ph),macroName:St(ph),literal:vh,string:uS,docString:St(uS),character:St(uS),attributeValue:St(uS),number:QI,integer:St(QI),float:St(QI),bool:St(vh),regexp:St(vh),escape:St(vh),color:St(vh),url:St(vh),keyword:Eu,self:St(Eu),null:St(Eu),atom:St(Eu),unit:St(Eu),modifier:St(Eu),operatorKeyword:St(Eu),controlKeyword:St(Eu),definitionKeyword:St(Eu),moduleKeyword:St(Eu),operator:_u,derefOperator:St(_u),arithmeticOperator:St(_u),logicOperator:St(_u),bitwiseOperator:St(_u),compareOperator:St(_u),updateOperator:St(_u),definitionOperator:St(_u),typeOperator:St(_u),controlOperator:St(_u),punctuation:zP,separator:St(zP),bracket:$y,angleBracket:St($y),squareBracket:St($y),paren:St($y),brace:St($y),content:Du,heading:rp,heading1:St(rp),heading2:St(rp),heading3:St(rp),heading4:St(rp),heading5:St(rp),heading6:St(rp),contentSeparator:St(Du),list:St(Du),quote:St(Du),emphasis:St(Du),strong:St(Du),link:St(Du),monospace:St(Du),strikethrough:St(Du),inserted:St(),deleted:St(),changed:St(),invalid:St(),meta:cS,documentMeta:St(cS),annotation:St(cS),processingInstruction:St(cS),definition:ju.defineModifier(),constant:ju.defineModifier(),function:ju.defineModifier(),standard:ju.defineModifier(),local:ju.defineModifier(),special:ju.defineModifier()};$Z([{tag:$e.link,class:"tok-link"},{tag:$e.heading,class:"tok-heading"},{tag:$e.emphasis,class:"tok-emphasis"},{tag:$e.strong,class:"tok-strong"},{tag:$e.keyword,class:"tok-keyword"},{tag:$e.atom,class:"tok-atom"},{tag:$e.bool,class:"tok-bool"},{tag:$e.url,class:"tok-url"},{tag:$e.labelName,class:"tok-labelName"},{tag:$e.inserted,class:"tok-inserted"},{tag:$e.deleted,class:"tok-deleted"},{tag:$e.literal,class:"tok-literal"},{tag:$e.string,class:"tok-string"},{tag:$e.number,class:"tok-number"},{tag:[$e.regexp,$e.escape,$e.special($e.string)],class:"tok-string2"},{tag:$e.variableName,class:"tok-variableName"},{tag:$e.local($e.variableName),class:"tok-variableName tok-local"},{tag:$e.definition($e.variableName),class:"tok-variableName tok-definition"},{tag:$e.special($e.variableName),class:"tok-variableName2"},{tag:$e.definition($e.propertyName),class:"tok-propertyName tok-definition"},{tag:$e.typeName,class:"tok-typeName"},{tag:$e.namespace,class:"tok-namespace"},{tag:$e.className,class:"tok-className"},{tag:$e.macroName,class:"tok-macroName"},{tag:$e.propertyName,class:"tok-propertyName"},{tag:$e.operator,class:"tok-operator"},{tag:$e.comment,class:"tok-comment"},{tag:$e.meta,class:"tok-meta"},{tag:$e.invalid,class:"tok-invalid"},{tag:$e.punctuation,class:"tok-punctuation"}]);var ZI;const u0=new Kr;function D1e(t){return Gt.define({combine:t?e=>e.concat(t):void 0})}const P1e=new Kr;class Xl{constructor(e,r,n=[],i=""){this.data=e,this.name=i,Zr.prototype.hasOwnProperty("tree")||Object.defineProperty(Zr.prototype,"tree",{get(){return Aa(this)}}),this.parser=r,this.extension=[fd.of(this),Zr.languageData.of((a,o,s)=>{let l=U9(a,o,s),u=l.type.prop(u0);if(!u)return[];let c=a.facet(u),f=l.type.prop(P1e);if(f){let h=l.resolve(o-l.from,s);for(let d of f)if(d.test(h,a)){let p=a.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(n)}isActiveAt(e,r,n=-1){return U9(e,r,n).type.prop(u0)==this.data}findRegions(e){let r=e.facet(fd);if((r==null?void 0:r.data)==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(a,o)=>{if(a.prop(u0)==this.data){n.push({from:o,to:o+a.length});return}let s=a.prop(Kr.mounted);if(s){if(s.tree.prop(u0)==this.data){if(s.overlay)for(let l of s.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+a.length});return}else if(s.overlay){let l=n.length;if(i(s.tree,s.overlay[0].from+o),n.length>l)return}}for(let l=0;l<a.children.length;l++){let u=a.children[l];u instanceof Li&&i(u,a.positions[l]+o)}};return i(Aa(e),0),n}get allowsNesting(){return!0}}Xl.setState=Fr.define();function U9(t,e,r){let n=t.facet(fd),i=Aa(t).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,r,Ea.ExcludeBuffers))a.type.isTop&&(i=a);return i}function Aa(t){let e=t.field(Xl.state,!1);return e?e.tree:Li.empty}class L1e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let zy=null;class cm{constructor(e,r,n=[],i,a,o,s,l){this.parser=e,this.state=r,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new cm(e,r,[],Li.empty,0,n,[],null)}startParse(){return this.parser.startParse(new L1e(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Li.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Wp.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(Wp.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=zy;zy=this;try{return e()}finally{zy=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=W9(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:i,treeLen:a,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,h)=>l.push({fromA:u,toA:c,fromB:f,toB:h})),n=Wp.applyChanges(n,l),i=Li.empty,a=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&s.push({from:c,to:f})}}}return new cm(this.parser,r,n,i,a,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=W9(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends FZ{createParse(r,n,i){let a=i[0].from,o=i[i.length-1].to;return{parsedPos:a,advance(){let l=zy;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Li(Go.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return zy}}function W9(t,e,r){return Wp.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class fm{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new fm(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=cm.create(e.facet(fd).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new fm(n)}}Xl.state=Ia.define({create:fm.init,update(t,e){for(let r of e.effects)if(r.is(Xl.setState))return r.value;return e.startState.facet(fd)!=e.state.facet(fd)?fm.init(e.state):t.apply(e)}});let zZ=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zZ=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const JI=typeof navigator<"u"&&(!((ZI=navigator.scheduling)===null||ZI===void 0)&&ZI.isInputPending)?()=>navigator.scheduling.isInputPending():null,R1e=bi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(Xl.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(Xl.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=zZ(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(Xl.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!JI?Math.max(25,e.timeRemaining()-5):1e9),s=a.context.treeLen<i&&n.doc.length>i+1e3,l=a.context.work(()=>JI&&JI()||Date.now()>o,i+(s?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Xl.setState.of(new fm(a.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>ol(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fd=Gt.define({combine(t){return t.length?t[0]:null},enables:t=>[Xl.state,R1e,Lt.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]}),jZ=Gt.define(),BM=Gt.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function lv(t){let e=t.facet(BM);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Bw(t,e){let r="",n=t.tabSize,i=t.facet(BM)[0];if(i=="	"){for(;e>=n;)r+="	",e-=n;i=" "}for(let a=0;a<e;a++)r+=i;return r}function r4(t,e){t instanceof Zr&&(t=new $M(t));for(let n of t.state.facet(jZ)){let i=n(t,e);if(i!==void 0)return i}let r=Aa(t.state);return r.length>=e?F1e(t,r,e):null}class $M{constructor(e,r={}){this.state=e,this.options=r,this.unit=lv(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(r<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,r);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,r=1){let{text:n,from:i}=this.lineAt(e,r),a=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,r=e.length){return Vm(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:i}=this.lineAt(e,r),a=this.options.overrideIndentation;if(a){let o=a(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const N1e=new Kr;function F1e(t,e,r){let n=e.resolveStack(r),i=n.node.enterUnfinishedNodesBefore(r);if(i!=n.node){let a=[];for(let o=i;o!=n.node;o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)n={node:a[o],next:n}}return GZ(n,t,r)}function GZ(t,e,r){for(let n=t;n;n=n.next){let i=$1e(n.node);if(i)return i(n4.create(e,r,n))}return 0}function B1e(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function $1e(t){let e=t.type.prop(N1e);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(Kr.closedBy))){let i=t.lastChild,a=i&&n.indexOf(i.name)>-1;return o=>U1e(o,!0,1,void 0,a&&!B1e(o)?i.from:void 0)}return t.parent==null?z1e:null}function z1e(){return 0}class n4 extends $M{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new n4(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(j1e(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return GZ(this.context.next,this.base,this.pos)}}function j1e(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function G1e(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let i=t.options.simulateBreak,a=t.state.doc.lineAt(r.from),o=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let s=r.to;;){let l=e.childAfter(s);if(!l||l==n)return null;if(!l.type.isSkipped)return l.from<o?r:null;s=l.to}}function U1e(t,e,r,n,i){let a=t.textAfter,o=a.match(/^\s*/)[0].length,s=n&&a.slice(o,o+n.length)==n||i==t.pos+o,l=e?G1e(t):null;return l?s?t.column(l.from):t.column(l.to):t.baseIndent+(s?0:t.unit*r)}const W1e=200;function V1e(){return Zr.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,i=r.lineAt(n);if(n>i.from+W1e)return t;let a=r.sliceString(i.from,n);if(!e.some(u=>u.test(a)))return t;let{state:o}=t,s=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==s)continue;s=c.from;let f=r4(o,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=Bw(o,f);h!=d&&l.push({from:c.from,to:c.from+h.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const H1e=Gt.define(),X1e=new Kr;function Y1e(t,e,r){let n=Aa(t);if(n.length<r)return null;let i=n.resolveStack(r,1),a=null;for(let o=i;o;o=o.next){let s=o.node;if(s.to<=r||s.from>r)continue;if(a&&s.from<e)break;let l=s.type.prop(X1e);if(l&&(s.to<n.length-50||n.length==t.doc.length||!q1e(s))){let u=l(s,t);u&&u.from<=r&&u.from>=e&&u.to>r&&(a=u)}}return a}function q1e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function xC(t,e,r){for(let n of t.facet(H1e)){let i=n(t,e,r);if(i)return i}return Y1e(t,e,r)}function UZ(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const zM=Fr.define({map:UZ}),X2=Fr.define({map:UZ});function WZ(t){let e=[];for(let{head:r}of t.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(t.lineBlockAt(r));return e}const uv=Ia.define({create(){return fr.none},update(t,e){t=t.map(e.changes);for(let r of e.effects)if(r.is(zM)&&!K1e(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(i4),i=n?fr.replace({widget:new nwe(n(e.state,r.value))}):V9;t=t.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(X2)&&(t=t.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:n}=e.selection.main;t.between(n,n,(i,a)=>{i<n&&a>n&&(r=!0)}),r&&(t=t.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return t},provide:t=>Lt.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],i=t[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(V9.range(n,i))}return fr.set(e,!0)}});function SC(t,e,r){var n;let i=null;return(n=t.field(uv,!1))===null||n===void 0||n.between(e,r,(a,o)=>{(!i||i.from>a)&&(i={from:a,to:o})}),i}function K1e(t,e,r){let n=!1;return t.between(e,e,(i,a)=>{i==e&&a==r&&(n=!0)}),n}function VZ(t,e){return t.field(uv,!1)?e:e.concat(Fr.appendConfig.of(XZ()))}const Q1e=t=>{for(let e of WZ(t)){let r=xC(t.state,e.from,e.to);if(r)return t.dispatch({effects:VZ(t.state,[zM.of(r),HZ(t,r)])}),!0}return!1},Z1e=t=>{if(!t.state.field(uv,!1))return!1;let e=[];for(let r of WZ(t)){let n=SC(t.state,r.from,r.to);n&&e.push(X2.of(n),HZ(t,n,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function HZ(t,e,r=!0){let n=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Lt.announce.of(`${t.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${t.state.phrase("to")} ${i}.`)}const J1e=t=>{let{state:e}=t,r=[];for(let n=0;n<e.doc.length;){let i=t.lineBlockAt(n),a=xC(e,i.from,i.to);a&&r.push(zM.of(a)),n=(a?t.lineBlockAt(a.to):i).to+1}return r.length&&t.dispatch({effects:VZ(t.state,r)}),!!r.length},ewe=t=>{let e=t.state.field(uv,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,t.state.doc.length,(n,i)=>{r.push(X2.of({from:n,to:i}))}),t.dispatch({effects:r}),!0},twe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Q1e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Z1e},{key:"Ctrl-Alt-[",run:J1e},{key:"Ctrl-Alt-]",run:ewe}],rwe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},i4=Gt.define({combine(t){return bc(t,rwe)}});function XZ(t){let e=[uv,owe];return t&&e.push(i4.of(t)),e}function YZ(t,e){let{state:r}=t,n=r.facet(i4),i=o=>{let s=t.lineBlockAt(t.posAtDOM(o.target)),l=SC(t.state,s.from,s.to);l&&t.dispatch({effects:X2.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",r.phrase("folded code")),a.title=r.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const V9=fr.replace({widget:new class extends Mf{toDOM(t){return YZ(t,null)}}});class nwe extends Mf{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return YZ(e,this.value)}}const iwe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class eO extends Sf{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function awe(t={}){let e=Object.assign(Object.assign({},iwe),t),r=new eO(e,!0),n=new eO(e,!1),i=bi.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(fd)!=o.state.facet(fd)||o.startState.field(uv,!1)!=o.state.field(uv,!1)||Aa(o.startState)!=Aa(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let s=new od;for(let l of o.viewportLineBlocks){let u=SC(o.state,l.from,l.to)?n:xC(o.state,l.from,l.to)?r:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:a}=e;return[i,a1e({class:"cm-foldGutter",markers(o){var s;return((s=o.plugin(i))===null||s===void 0?void 0:s.markers)||Jr.empty},initialSpacer(){return new eO(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,s,l)=>{if(a.click&&a.click(o,s,l))return!0;let u=SC(o.state,s.from,s.to);if(u)return o.dispatch({effects:X2.of(u)}),!0;let c=xC(o.state,s.from,s.to);return c?(o.dispatch({effects:zM.of(c)}),!0):!1}})}),XZ()]}const owe=Lt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Y2{constructor(e,r){this.specs=e;let n;function i(s){let l=sd.newName();return(n||(n=Object.create(null)))["."+l]=s,l}const a=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof Xl?s=>s.prop(u0)==o.data:o?s=>s==o:void 0,this.style=$Z(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:a}).style,this.module=n?new sd(n):null,this.themeType=r.themeType}static define(e,r){return new Y2(e,r||{})}}const jP=Gt.define(),qZ=Gt.define({combine(t){return t.length?[t[0]]:null}});function tO(t){let e=t.facet(jP);return e.length?e:t.facet(qZ)}function KZ(t,e){let r=[lwe],n;return t instanceof Y2&&(t.module&&r.push(Lt.styleModule.of(t.module)),n=t.themeType),e!=null&&e.fallback?r.push(qZ.of(t)):n?r.push(jP.computeN([Lt.darkTheme],i=>i.facet(Lt.darkTheme)==(n=="dark")?[t]:[])):r.push(jP.of(t)),r}class swe{constructor(e){this.markCache=Object.create(null),this.tree=Aa(e.state),this.decorations=this.buildDeco(e,tO(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=Aa(e.state),n=tO(e.state),i=n!=tO(e.startState),{viewport:a}=e.view,o=e.changes.mapPos(this.decoratedTo,1);r.length<a.to&&!i&&r.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(r!=this.tree||e.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=a.to)}buildDeco(e,r){if(!r||!this.tree.length)return fr.none;let n=new od;for(let{from:i,to:a}of e.visibleRanges)T1e(this.tree,r,(o,s,l)=>{n.add(o,s,this.markCache[l]||(this.markCache[l]=fr.mark({class:l})))},i,a);return n.finish()}}const lwe=Wm.high(bi.fromClass(swe,{decorations:t=>t.decorations})),uwe=Y2.define([{tag:$e.meta,color:"#404740"},{tag:$e.link,textDecoration:"underline"},{tag:$e.heading,textDecoration:"underline",fontWeight:"bold"},{tag:$e.emphasis,fontStyle:"italic"},{tag:$e.strong,fontWeight:"bold"},{tag:$e.strikethrough,textDecoration:"line-through"},{tag:$e.keyword,color:"#708"},{tag:[$e.atom,$e.bool,$e.url,$e.contentSeparator,$e.labelName],color:"#219"},{tag:[$e.literal,$e.inserted],color:"#164"},{tag:[$e.string,$e.deleted],color:"#a11"},{tag:[$e.regexp,$e.escape,$e.special($e.string)],color:"#e40"},{tag:$e.definition($e.variableName),color:"#00f"},{tag:$e.local($e.variableName),color:"#30a"},{tag:[$e.typeName,$e.namespace],color:"#085"},{tag:$e.className,color:"#167"},{tag:[$e.special($e.variableName),$e.macroName],color:"#256"},{tag:$e.definition($e.propertyName),color:"#00c"},{tag:$e.comment,color:"#940"},{tag:$e.invalid,color:"#f00"}]),cwe=Lt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),QZ=1e4,ZZ="()[]{}",JZ=Gt.define({combine(t){return bc(t,{afterCursor:!0,brackets:ZZ,maxScanDistance:QZ,renderMatch:dwe})}}),fwe=fr.mark({class:"cm-matchingBracket"}),hwe=fr.mark({class:"cm-nonmatchingBracket"});function dwe(t){let e=[],r=t.matched?fwe:hwe;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const pwe=Ia.define({create(){return fr.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(JZ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=qu(e.state,i.head,-1,n)||i.head>0&&qu(e.state,i.head-1,1,n)||n.afterCursor&&(qu(e.state,i.head,1,n)||i.head<e.state.doc.length&&qu(e.state,i.head+1,-1,n));a&&(r=r.concat(n.renderMatch(a,e.state)))}return fr.set(r,!0)},provide:t=>Lt.decorations.from(t)}),vwe=[pwe,cwe];function gwe(t={}){return[JZ.of(t),vwe]}const mwe=new Kr;function GP(t,e,r){let n=t.prop(e<0?Kr.openedBy:Kr.closedBy);if(n)return n;if(t.name.length==1){let i=r.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[r[i+e]]}return null}function UP(t){let e=t.type.prop(mwe);return e?e(t.node):t}function qu(t,e,r,n={}){let i=n.maxScanDistance||QZ,a=n.brackets||ZZ,o=Aa(t),s=o.resolveInner(e,r);for(let l=s;l;l=l.parent){let u=GP(l.type,r,a);if(u&&l.from<l.to){let c=UP(l);if(c&&(r>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return ywe(t,e,r,l,c,u,a)}}return wwe(t,e,r,o,s.type,i,a)}function ywe(t,e,r,n,i,a,o){let s=n.parent,l={from:i.from,to:i.to},u=0,c=s==null?void 0:s.cursor();if(c&&(r<0?c.childBefore(n.from):c.childAfter(n.to)))do if(r<0?c.to<=n.from:c.from>=n.to){if(u==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let f=UP(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(GP(c.type,r,o))u++;else if(GP(c.type,-r,o)){if(u==0){let f=UP(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(r<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function wwe(t,e,r,n,i,a,o){let s=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(s);if(l<0||l%2==0!=r>0)return null;let u={from:r<0?e-1:e,to:r>0?e+1:e},c=t.doc.iterRange(e,r>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=a;){let d=c.value;r<0&&(h+=d.length);let p=e+h*r;for(let v=r>0?0:d.length-1,g=r>0?d.length:-1;v!=g;v+=r){let m=o.indexOf(d[v]);if(!(m<0||n.resolveInner(p+v,1).type!=i))if(m%2==0==r>0)f++;else{if(f==1)return{start:u,end:{from:p+v,to:p+v+1},matched:m>>1==l>>1};f--}}r>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}function H9(t,e,r,n=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let a=i;for(let o=n;o<e;o++)t.charCodeAt(o)==9?a+=r-a%r:a++;return a}class eJ{constructor(e,r,n,i){this.string=e,this.tabSize=r,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let r=this.string.charAt(this.pos),n;if(typeof e=="string"?n=r==e:n=r&&(e instanceof RegExp?e.test(r):e(r)),n)return++this.pos,r}eatWhile(e){let r=this.pos;for(;this.eat(e););return this.pos>r}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=H9(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:H9(this.string,null,this.tabSize)}match(e,r,n){if(typeof e=="string"){let i=o=>n?o.toLowerCase():o,a=this.string.substr(this.pos,e.length);return i(a)==i(e)?(r!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&r!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function bwe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||xwe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||o4}}function xwe(t){if(typeof t!="object")return t;let e={};for(let r in t){let n=t[r];e[r]=n instanceof Array?n.slice():n}return e}const X9=new WeakMap;class jM extends Xl{constructor(e){let r=D1e(e.languageData),n=bwe(e),i,a=new class extends FZ{createParse(o,s,l){return new Ewe(i,o,s,l)}};super(r,a,[jZ.of((o,s)=>this.getIndent(o,s))],e.name),this.topNode=kwe(r),i=this,this.streamParser=n,this.stateAfter=new Kr({perNode:!0}),this.tokenTable=e.tokenTable?new iJ(n.tokenTable):Cwe}static define(e){return new jM(e)}getIndent(e,r){let n=Aa(e.state),i=n.resolve(r);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let a,{overrideIndentation:o}=e.options;o&&(a=X9.get(e.state),a!=null&&a<r-1e4&&(a=void 0));let s=a4(this,n,0,i.from,a??r),l,u;if(s?(u=s.state,l=s.pos+1):(u=this.streamParser.startState(e.unit),l=0),r-l>1e4)return null;for(;l<r;){let f=e.state.doc.lineAt(l),h=Math.min(r,f.to);if(f.length){let d=o?o(f.from):-1,p=new eJ(f.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;p.pos<h-f.from;)rJ(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==r)break;l=f.to+1}let c=e.lineAt(r);return o&&a==null&&X9.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function a4(t,e,r,n,i){let a=r>=n&&r+e.length<=i&&e.prop(t.stateAfter);if(a)return{state:t.streamParser.copyState(a),pos:r+e.length};for(let o=e.children.length-1;o>=0;o--){let s=e.children[o],l=r+e.positions[o],u=s instanceof Li&&l<i&&a4(t,s,l,n,i);if(u)return u}return null}function tJ(t,e,r,n,i){if(i&&r<=0&&n>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let a=e.children.length-1;a>=0;a--){let o=e.positions[a],s=e.children[a],l;if(o<n&&s instanceof Li){if(!(l=tJ(t,s,r-o,n-o,i)))break;return i?new Li(e.type,e.children.slice(0,a).concat(l),e.positions.slice(0,a+1),o+l.length):l}}return null}function Swe(t,e,r,n){for(let i of e){let a=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),s=a<=r&&o>r&&a4(t,i.tree,0-i.offset,r,o),l;if(s&&(l=tJ(t,i.tree,r+i.offset,s.pos+i.offset,!1)))return{state:s.state,tree:l}}return{state:t.streamParser.startState(n?lv(n):4),tree:Li.empty}}class Ewe{constructor(e,r,n,i){this.lang=e,this.input=r,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let a=cm.get(),o=i[0].from,{state:s,tree:l}=Swe(e,n,o,a==null?void 0:a.state);this.state=s,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(lv(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=cm.get(),r=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(r,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=r?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,r),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let r=this.input.chunk(e);if(this.input.lineChunks)r==`
`&&(r="");else{let n=r.indexOf(`
`);n>-1&&(r=r.slice(0,n))}return e+r.length<=this.to?r:r.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,r=this.lineAfter(e),n=e+r.length;for(let i=this.rangeIndex;;){let a=this.ranges[i].to;if(a>=n||(r=r.slice(0,a-(n-r.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,s=this.lineAfter(o);r+=s,n=o+s.length}return{line:r,end:n}}skipGapsTo(e,r,n){for(;;){let i=this.ranges[this.rangeIndex].to,a=e+r;if(n>0?i>a:i>=a)break;let o=this.ranges[++this.rangeIndex].from;r+=o-i}return r}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,r,n,i,a){if(this.ranges.length>1){a=this.skipGapsTo(r,a,1),r+=a;let o=this.chunk.length;a=this.skipGapsTo(n,a,-1),n+=a,i+=this.chunk.length-o}return this.chunk.push(e,r,n,i),a}parseLine(e){let{line:r,end:n}=this.nextLine(),i=0,{streamParser:a}=this.lang,o=new eJ(r,e?e.state.tabSize:4,e?lv(e.state):2);if(o.eol())a.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let s=rJ(a.token,o,this.state);if(s&&(i=this.emitToken(this.lang.tokenTable.resolve(s),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Li.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:_we,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Li(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Li(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function rJ(t,e,r){e.start=e.pos;for(let n=0;n<10;n++){let i=t(e,r);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const o4=Object.create(null),$w=[Go.none],_we=new Z5($w),Y9=[],q9=Object.create(null),nJ=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nJ[t]=aJ(o4,e);class iJ{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),nJ)}resolve(e){return e?this.table[e]||(this.table[e]=aJ(this.extra,e)):0}}const Cwe=new iJ(o4);function rO(t,e){Y9.indexOf(t)>-1||(Y9.push(t),console.warn(e))}function aJ(t,e){let r=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let c=t[u]||$e[u];c?typeof c=="function"?l.length?l=l.map(c):rO(u,`Modifier ${u} used at start of tag`):l.length?rO(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:rO(u,`Unknown highlighting tag ${u}`)}for(let u of l)r.push(u)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+r.map(s=>s.id),a=q9[i];if(a)return a.id;let o=q9[i]=Go.define({id:$w.length,name:n,props:[M1e({[n]:r})]});return $w.push(o),o.id}function kwe(t){let e=Go.define({id:$w.length,name:"Document",props:[u0.add(()=>t)],top:!0});return $w.push(e),e}Ln.RTL,Ln.LTR;const Mwe=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=l4(t.state,r.from);return n.line?Awe(t):n.block?Iwe(t):!1};function s4(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=t(e,r);return i?(n(r.update(i)),!0):!1}}const Awe=s4(Pwe,0),Twe=s4(oJ,0),Iwe=s4((t,e)=>oJ(t,e,Dwe(e)),0);function l4(t,e){let r=t.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const jy=50;function Owe(t,{open:e,close:r},n,i){let a=t.sliceDoc(n-jy,n),o=t.sliceDoc(i,i+jy),s=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,u=a.length-s;if(a.slice(u-e.length,u)==e&&o.slice(l,l+r.length)==r)return{open:{pos:n-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-n<=2*jy?c=f=t.sliceDoc(n,i):(c=t.sliceDoc(n,n+jy),f=t.sliceDoc(i-jy,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-r.length;return c.slice(h,h+e.length)==e&&f.slice(p,p+r.length)==r?{open:{pos:n+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-r.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function Dwe(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),i=r.to<=n.to?n:t.doc.lineAt(r.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function oJ(t,e,r=e.selection.ranges){let n=r.map(a=>l4(e,a.from).block);if(!n.every(a=>a))return null;let i=r.map((a,o)=>Owe(e,n[o],a.from,a.to));if(t!=2&&!i.every(a=>a))return{changes:e.changes(r.map((a,o)=>i[o]?[]:[{from:a.from,insert:n[o].open+" "},{from:a.to,insert:" "+n[o].close}]))};if(t!=1&&i.some(a=>a)){let a=[];for(let o=0,s;o<i.length;o++)if(s=i[o]){let l=n[o],{open:u,close:c}=s;a.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:a}}return null}function Pwe(t,e,r=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:o}of r){let s=n.length,l=1e9,u=l4(e,a).line;if(u){for(let c=a;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(a==o||o>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<l&&(l=h),n.push({line:f,comment:p,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(l<1e9)for(let c=s;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=l);n.length==s+1&&(n[s].single=!0)}}if(t!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:l,indent:u,empty:c,single:f}of n)(f||!c)&&a.push({from:s.from+u,insert:l+" "});let o=e.changes(a);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:s,token:l}of n)if(s>=0){let u=o.from+s,c=u+l.length;o.text[c-o.from]==" "&&c++,a.push({from:u,to:c})}return{changes:a}}return null}const WP=wc.define(),Lwe=wc.define(),Rwe=Gt.define(),sJ=Gt.define({combine(t){return bc(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,i)=>e(n,i)||r(n,i)})}}),lJ=Ia.define({create(){return Ku.empty},update(t,e){let r=e.state.facet(sJ),n=e.annotation(WP);if(n){let l=Ro.fromTransaction(e,n.selection),u=n.side,c=u==0?t.undone:t.done;return l?c=EC(c,c.length,r.minDepth,l):c=fJ(c,e.startState.selection),new Ku(u==0?n.rest:c,u==0?c:n.rest)}let i=e.annotation(Lwe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Xi.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let a=Ro.fromTransaction(e),o=e.annotation(Xi.time),s=e.annotation(Xi.userEvent);return a?t=t.addChanges(a,o,s,r,e):e.selection&&(t=t.addSelection(e.startState.selection,o,s,r.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ku(t.done.map(Ro.fromJSON),t.undone.map(Ro.fromJSON))}});function Nwe(t={}){return[lJ,sJ.of(t),Lt.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?uJ:e.inputType=="historyRedo"?VP:null;return n?(e.preventDefault(),n(r)):!1}})]}function GM(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let i=r.field(lJ,!1);if(!i)return!1;let a=i.pop(t,r,e);return a?(n(a),!0):!1}}const uJ=GM(0,!1),VP=GM(1,!1),Fwe=GM(0,!0),Bwe=GM(1,!0);class Ro{constructor(e,r,n,i,a){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new Ro(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ro(e.changes&&Wi.fromJSON(e.changes),[],e.mapped&&sc.fromJSON(e.mapped),e.startSelection&&Qe.fromJSON(e.startSelection),e.selectionsAfter.map(Qe.fromJSON))}static fromTransaction(e,r){let n=il;for(let i of e.startState.facet(Rwe)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new Ro(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,il)}static selection(e){return new Ro(void 0,il,void 0,void 0,e)}}function EC(t,e,r,n){let i=e+1>r+20?e-r-1:0,a=t.slice(i,e);return a.push(n),a}function $we(t,e){let r=[],n=!1;return t.iterChangedRanges((i,a)=>r.push(i,a)),e.iterChangedRanges((i,a,o,s)=>{for(let l=0;l<r.length;){let u=r[l++],c=r[l++];s>=u&&o<=c&&(n=!0)}}),n}function zwe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function cJ(t,e){return t.length?e.length?t.concat(e):t:e}const il=[],jwe=200;function fJ(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-jwe));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),EC(t,t.length-1,1e9,r.setSelAfter(n)))}else return[Ro.selection([e])]}function Gwe(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function nO(t,e){if(!t.length)return t;let r=t.length,n=il;for(;r;){let i=Uwe(t[r-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=t.slice(0,r);return a[r-1]=i,a}else e=i.mapped,r--,n=i.selectionsAfter}return n.length?[Ro.selection(n)]:il}function Uwe(t,e,r){let n=cJ(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):il,r);if(!t.changes)return Ro.selection(n);let i=t.changes.map(e),a=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(a):a;return new Ro(i,Fr.mapEffects(t.effects,e),o,t.startSelection.map(a),n)}const Wwe=/^(input\.type|delete)($|\.)/;class Ku{constructor(e,r,n=0,i=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Ku(this.done,this.undone):this}addChanges(e,r,n,i,a){let o=this.done,s=o[o.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!n||Wwe.test(n))&&(!s.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,$we(s.changes,e.changes))||n=="input.type.compose")?o=EC(o,o.length-1,i.minDepth,new Ro(e.changes.compose(s.changes),cJ(e.effects,s.effects),s.mapped,s.startSelection,il)):o=EC(o,o.length,i.minDepth,e),new Ku(o,il,r,n)}addSelection(e,r,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:il;return a.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&zwe(a[a.length-1],e)?this:new Ku(fJ(this.done,e),this.undone,r,n)}addMapping(e){return new Ku(nO(this.done,e),nO(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],o=a.selectionsAfter[0]||r.selection;if(n&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:WP.of({side:e,rest:Gwe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?il:i.slice(0,i.length-1);return a.mapped&&(s=nO(s,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:WP.of({side:e,rest:s,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ku.empty=new Ku(il,il);const Vwe=[{key:"Mod-z",run:uJ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:VP,preventDefault:!0},{linux:"Ctrl-Shift-z",run:VP,preventDefault:!0},{key:"Mod-u",run:Fwe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Bwe,preventDefault:!0}];function Hm(t,e){return Qe.create(t.ranges.map(e),t.mainIndex)}function xc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function lu({state:t,dispatch:e},r){let n=Hm(t.selection,r);return n.eq(t.selection,!0)?!1:(e(xc(t,n)),!0)}function UM(t,e){return Qe.cursor(e?t.to:t.from)}function hJ(t,e){return lu(t,r=>r.empty?t.moveByChar(r,e):UM(r,e))}function qa(t){return t.textDirectionAt(t.state.selection.main.head)==Ln.LTR}const dJ=t=>hJ(t,!qa(t)),pJ=t=>hJ(t,qa(t));function vJ(t,e){return lu(t,r=>r.empty?t.moveByGroup(r,e):UM(r,e))}const Hwe=t=>vJ(t,!qa(t)),Xwe=t=>vJ(t,qa(t));function Ywe(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function WM(t,e,r){let n=Aa(t).resolveInner(e.head),i=r?Kr.closedBy:Kr.openedBy;for(let l=e.head;;){let u=r?n.childAfter(l):n.childBefore(l);if(!u)break;Ywe(t,u,i)?n=u:l=r?u.to:u.from}let a=n.type.prop(i),o,s;return a&&(o=r?qu(t,n.from,1):qu(t,n.to,-1))&&o.matched?s=r?o.end.to:o.end.from:s=r?n.to:n.from,Qe.cursor(s,r?-1:1)}const qwe=t=>lu(t,e=>WM(t.state,e,!qa(t))),Kwe=t=>lu(t,e=>WM(t.state,e,qa(t)));function gJ(t,e){return lu(t,r=>{if(!r.empty)return UM(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const mJ=t=>gJ(t,!1),yJ=t=>gJ(t,!0);function wJ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,i;if(e){for(let a of t.state.facet(Lt.scrollMargins)){let o=a(t);o!=null&&o.top&&(r=Math.max(o==null?void 0:o.top,r)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=t.scrollDOM.clientHeight-r-n}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function bJ(t,e){let r=wJ(t),{state:n}=t,i=Hm(n.selection,o=>o.empty?t.moveVertically(o,e,r.height):UM(o,e));if(i.eq(n.selection))return!1;let a;if(r.selfScroll){let o=t.coordsAtPos(n.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),l=s.top+r.marginTop,u=s.bottom-r.marginBottom;o&&o.top>l&&o.bottom<u&&(a=Lt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(xc(n,i),{effects:a}),!0}const K9=t=>bJ(t,!1),HP=t=>bJ(t,!0);function Ad(t,e,r){let n=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,r);if(i.head==e.head&&i.head!=(r?n.to:n.from)&&(i=t.moveToLineBoundary(e,r,!1)),!r&&i.head==n.from&&n.length){let a=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=Qe.cursor(n.from+a))}return i}const Qwe=t=>lu(t,e=>Ad(t,e,!0)),Zwe=t=>lu(t,e=>Ad(t,e,!1)),Jwe=t=>lu(t,e=>Ad(t,e,!qa(t))),e2e=t=>lu(t,e=>Ad(t,e,qa(t))),t2e=t=>lu(t,e=>Qe.cursor(t.lineBlockAt(e.head).from,1)),r2e=t=>lu(t,e=>Qe.cursor(t.lineBlockAt(e.head).to,-1));function n2e(t,e,r){let n=!1,i=Hm(t.selection,a=>{let o=qu(t,a.head,-1)||qu(t,a.head,1)||a.head>0&&qu(t,a.head-1,1)||a.head<t.doc.length&&qu(t,a.head+1,-1);if(!o||!o.end)return a;n=!0;let s=o.start.from==a.head?o.end.to:o.end.from;return r?Qe.range(a.anchor,s):Qe.cursor(s)});return n?(e(xc(t,i)),!0):!1}const i2e=({state:t,dispatch:e})=>n2e(t,e,!1);function vl(t,e){let r=Hm(t.state.selection,n=>{let i=e(n);return Qe.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(xc(t.state,r)),!0)}function xJ(t,e){return vl(t,r=>t.moveByChar(r,e))}const SJ=t=>xJ(t,!qa(t)),EJ=t=>xJ(t,qa(t));function _J(t,e){return vl(t,r=>t.moveByGroup(r,e))}const a2e=t=>_J(t,!qa(t)),o2e=t=>_J(t,qa(t)),s2e=t=>vl(t,e=>WM(t.state,e,!qa(t))),l2e=t=>vl(t,e=>WM(t.state,e,qa(t)));function CJ(t,e){return vl(t,r=>t.moveVertically(r,e))}const kJ=t=>CJ(t,!1),MJ=t=>CJ(t,!0);function AJ(t,e){return vl(t,r=>t.moveVertically(r,e,wJ(t).height))}const Q9=t=>AJ(t,!1),Z9=t=>AJ(t,!0),u2e=t=>vl(t,e=>Ad(t,e,!0)),c2e=t=>vl(t,e=>Ad(t,e,!1)),f2e=t=>vl(t,e=>Ad(t,e,!qa(t))),h2e=t=>vl(t,e=>Ad(t,e,qa(t))),d2e=t=>vl(t,e=>Qe.cursor(t.lineBlockAt(e.head).from)),p2e=t=>vl(t,e=>Qe.cursor(t.lineBlockAt(e.head).to)),J9=({state:t,dispatch:e})=>(e(xc(t,{anchor:0})),!0),ez=({state:t,dispatch:e})=>(e(xc(t,{anchor:t.doc.length})),!0),tz=({state:t,dispatch:e})=>(e(xc(t,{anchor:t.selection.main.anchor,head:0})),!0),rz=({state:t,dispatch:e})=>(e(xc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),v2e=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),g2e=({state:t,dispatch:e})=>{let r=VM(t).map(({from:n,to:i})=>Qe.range(n,Math.min(i+1,t.doc.length)));return e(t.update({selection:Qe.create(r),userEvent:"select"})),!0},m2e=({state:t,dispatch:e})=>{let r=Hm(t.selection,n=>{var i;let a=Aa(t).resolveStack(n.from,1);for(let o=a;o;o=o.next){let{node:s}=o;if((s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from)&&(!((i=s.parent)===null||i===void 0)&&i.parent))return Qe.range(s.to,s.from)}return n});return e(xc(t,r)),!0},y2e=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=Qe.create([r.main]):r.main.empty||(n=Qe.create([Qe.cursor(r.main.head)])),n?(e(xc(t,n)),!0):!1};function q2(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,i=n.changeByRange(a=>{let{from:o,to:s}=a;if(o==s){let l=e(a);l<o?(r="delete.backward",l=fS(t,l,!1)):l>o&&(r="delete.forward",l=fS(t,l,!0)),o=Math.min(o,l),s=Math.max(s,l)}else o=fS(t,o,!1),s=fS(t,s,!0);return o==s?{range:a}:{changes:{from:o,to:s},range:Qe.cursor(o,o<a.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?Lt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function fS(t,e,r){if(t instanceof Lt)for(let n of t.state.facet(Lt.atomicRanges).map(i=>i(t)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=r?a:i)});return e}const TJ=(t,e)=>q2(t,r=>{let n=r.from,{state:i}=t,a=i.doc.lineAt(n),o,s;if(!e&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,n-a.from))){if(o[o.length-1]=="	")return n-1;let l=Vm(o,i.tabSize),u=l%lv(i)||lv(i);for(let c=0;c<u&&o[o.length-1-c]==" ";c++)n--;s=n}else s=Ca(a.text,n-a.from,e,e)+a.from,s==n&&a.number!=(e?i.doc.lines:1)?s+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(s-a.from,n-a.from))&&(s=Ca(a.text,s-a.from,!1,!1)+a.from);return s}),XP=t=>TJ(t,!1),IJ=t=>TJ(t,!0),OJ=(t,e)=>q2(t,r=>{let n=r.head,{state:i}=t,a=i.doc.lineAt(n),o=i.charCategorizer(n);for(let s=null;;){if(n==(e?a.to:a.from)){n==r.head&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=Ca(a.text,n-a.from,e)+a.from,u=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),c=o(u);if(s!=null&&c!=s)break;(u!=" "||n!=r.head)&&(s=c),n=l}return n}),DJ=t=>OJ(t,!1),w2e=t=>OJ(t,!0),b2e=t=>q2(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),x2e=t=>q2(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),S2e=t=>q2(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),E2e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:sn.of(["",""])},range:Qe.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},_2e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let i=n.from,a=t.doc.lineAt(i),o=i==a.from?i-1:Ca(a.text,i-a.from,!1)+a.from,s=i==a.to?i+1:Ca(a.text,i-a.from,!0)+a.from;return{changes:{from:o,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(o,i))},range:Qe.cursor(s)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function VM(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),a=t.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=t.doc.lineAt(n.to-1)),r>=i.number){let o=e[e.length-1];o.to=a.to,o.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});r=a.number+1}return e}function PJ(t,e,r){if(t.readOnly)return!1;let n=[],i=[];for(let a of VM(t)){if(r?a.to==t.doc.length:a.from==0)continue;let o=t.doc.lineAt(r?a.to+1:a.from-1),s=o.length+1;if(r){n.push({from:a.to,to:o.to},{from:a.from,insert:o.text+t.lineBreak});for(let l of a.ranges)i.push(Qe.range(Math.min(t.doc.length,l.anchor+s),Math.min(t.doc.length,l.head+s)))}else{n.push({from:o.from,to:a.from},{from:a.to,insert:t.lineBreak+o.text});for(let l of a.ranges)i.push(Qe.range(l.anchor-s,l.head-s))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:Qe.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const C2e=({state:t,dispatch:e})=>PJ(t,e,!1),k2e=({state:t,dispatch:e})=>PJ(t,e,!0);function LJ(t,e,r){if(t.readOnly)return!1;let n=[];for(let i of VM(t))r?n.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):n.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const M2e=({state:t,dispatch:e})=>LJ(t,e,!1),A2e=({state:t,dispatch:e})=>LJ(t,e,!0),T2e=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(VM(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=Hm(e.selection,i=>t.moveVertically(i,!0)).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function I2e(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=Aa(t).resolveInner(e),n=r.childBefore(e),i=r.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(Kr.closedBy))&&a.indexOf(i.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const O2e=RJ(!1),D2e=RJ(!0);function RJ(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:o}=i,s=e.doc.lineAt(a),l=!t&&a==o&&I2e(e,a);t&&(a=o=(o<=s.to?s:e.doc.lineAt(o)).to);let u=new $M(e,{simulateBreak:a,simulateDoubleBreak:!!l}),c=r4(u,a);for(c==null&&(c=Vm(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));o<s.to&&/\s/.test(s.text[o-s.from]);)o++;l?{from:a,to:o}=l:a>s.from&&a<s.from+100&&!/\S/.test(s.text.slice(0,a))&&(a=s.from);let f=["",Bw(e,c)];return l&&f.push(Bw(e,u.lineIndent(s.from,-1))),{changes:{from:a,to:o,insert:sn.of(f)},range:Qe.cursor(a+1+f[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function u4(t,e){let r=-1;return t.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let s=t.doc.lineAt(o);s.number>r&&(n.empty||n.to>s.from)&&(e(s,i,n),r=s.number),o=s.to+1}let a=t.changes(i);return{changes:i,range:Qe.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const P2e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new $M(t,{overrideIndentation:a=>{let o=r[a];return o??-1}}),i=u4(t,(a,o,s)=>{let l=r4(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let u=/^\s*/.exec(a.text)[0],c=Bw(t,l);(u!=c||s.from<a.from+u.length)&&(r[a.from]=l,o.push({from:a.from,to:a.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},NJ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(u4(t,(r,n)=>{n.push({from:r.from,insert:t.facet(BM)})}),{userEvent:"input.indent"})),!0),FJ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(u4(t,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let a=Vm(i,t.tabSize),o=0,s=Bw(t,Math.max(0,a-lv(t)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),L2e=[{key:"Ctrl-b",run:dJ,shift:SJ,preventDefault:!0},{key:"Ctrl-f",run:pJ,shift:EJ},{key:"Ctrl-p",run:mJ,shift:kJ},{key:"Ctrl-n",run:yJ,shift:MJ},{key:"Ctrl-a",run:t2e,shift:d2e},{key:"Ctrl-e",run:r2e,shift:p2e},{key:"Ctrl-d",run:IJ},{key:"Ctrl-h",run:XP},{key:"Ctrl-k",run:b2e},{key:"Ctrl-Alt-h",run:DJ},{key:"Ctrl-o",run:E2e},{key:"Ctrl-t",run:_2e},{key:"Ctrl-v",run:HP}],R2e=[{key:"ArrowLeft",run:dJ,shift:SJ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Hwe,shift:a2e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Jwe,shift:f2e,preventDefault:!0},{key:"ArrowRight",run:pJ,shift:EJ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Xwe,shift:o2e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:e2e,shift:h2e,preventDefault:!0},{key:"ArrowUp",run:mJ,shift:kJ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:J9,shift:tz},{mac:"Ctrl-ArrowUp",run:K9,shift:Q9},{key:"ArrowDown",run:yJ,shift:MJ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ez,shift:rz},{mac:"Ctrl-ArrowDown",run:HP,shift:Z9},{key:"PageUp",run:K9,shift:Q9},{key:"PageDown",run:HP,shift:Z9},{key:"Home",run:Zwe,shift:c2e,preventDefault:!0},{key:"Mod-Home",run:J9,shift:tz},{key:"End",run:Qwe,shift:u2e,preventDefault:!0},{key:"Mod-End",run:ez,shift:rz},{key:"Enter",run:O2e},{key:"Mod-a",run:v2e},{key:"Backspace",run:XP,shift:XP},{key:"Delete",run:IJ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:DJ},{key:"Mod-Delete",mac:"Alt-Delete",run:w2e},{mac:"Mod-Backspace",run:x2e},{mac:"Mod-Delete",run:S2e}].concat(L2e.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),N2e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:qwe,shift:s2e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Kwe,shift:l2e},{key:"Alt-ArrowUp",run:C2e},{key:"Shift-Alt-ArrowUp",run:M2e},{key:"Alt-ArrowDown",run:k2e},{key:"Shift-Alt-ArrowDown",run:A2e},{key:"Escape",run:y2e},{key:"Mod-Enter",run:D2e},{key:"Alt-l",mac:"Ctrl-l",run:g2e},{key:"Mod-i",run:m2e,preventDefault:!0},{key:"Mod-[",run:FJ},{key:"Mod-]",run:NJ},{key:"Mod-Alt-\\",run:P2e},{key:"Shift-Mod-k",run:T2e},{key:"Shift-Mod-\\",run:i2e},{key:"Mod-/",run:Mwe},{key:"Alt-A",run:Twe}].concat(R2e),F2e={key:"Tab",run:NJ,shift:FJ};function yn(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?t.setAttribute(n,i):i!=null&&(t[n]=i)}e++}for(;e<arguments.length;e++)BJ(t,arguments[e]);return t}function BJ(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)BJ(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}const nz=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class hm{constructor(e,r,n=0,i=e.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?s=>a(nz(s)):nz,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xa(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=z5(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=tl(e);let i=this.normalize(r);for(let a=0,o=n;;a++){let s=i.charCodeAt(a),l=this.match(s,o,this.bufferPos+this.bufferStart);if(a==i.length-1){if(l)return this.value=l,this;break}o==n&&a<r.length&&r.charCodeAt(a)==s&&o++}}}match(e,r,n){let i=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[a+1],to:n}:(this.matches[a]++,s=!0)),s||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(hm.prototype[Symbol.iterator]=function(){return this});const $J={from:-1,to:-1,match:/.*/.exec("")},c4="gm"+(/x/.unicode==null?"":"u");class zJ{constructor(e,r,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=$J,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new jJ(e,r,n,i,a);this.re=new RegExp(r,c4+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=_C(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=_C(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const iO=new WeakMap;class C0{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let i=iO.get(e);if(!i||i.from>=n||i.to<=r){let s=new C0(r,e.sliceString(r,n));return iO.set(e,s),s}if(i.from==r&&i.to==n)return i;let{text:a,from:o}=i;return o>r&&(a=e.sliceString(r,o)+a,o=r),i.to<n&&(a+=e.sliceString(i.to,n)),iO.set(e,new C0(o,a)),new C0(r,a.slice(r-o,n-o))}}class jJ{constructor(e,r,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=$J,this.matchPos=_C(e,i),this.re=new RegExp(r,c4+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=C0.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=_C(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=C0.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(zJ.prototype[Symbol.iterator]=jJ.prototype[Symbol.iterator]=function(){return this});function B2e(t){try{return new RegExp(t,c4),!0}catch{return!1}}function _C(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function YP(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),r=yn("input",{class:"cm-textfield",name:"line",value:e}),n=yn("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),t.dispatch({effects:CC.of(!1)}),t.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},yn("label",t.state.phrase("Go to line"),": ",r)," ",yn("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!a)return;let{state:o}=t,s=o.doc.lineAt(o.selection.main.head),[,l,u,c,f]=a,h=c?+c.slice(1):0,d=u?+u:s.number;if(u&&f){let g=d/100;l&&(g=g*(l=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else u&&l&&(d=d*(l=="-"?-1:1)+s.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),v=Qe.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[CC.of(!1),Lt.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:n}}const CC=Fr.define(),iz=Ia.define({create(){return!0},update(t,e){for(let r of e.effects)r.is(CC)&&(t=r.value);return t},provide:t=>Nw.from(t,e=>e?YP:null)}),$2e=t=>{let e=Rw(t,YP);if(!e){let r=[CC.of(!0)];t.state.field(iz,!1)==null&&r.push(Fr.appendConfig.of([iz,z2e])),t.dispatch({effects:r}),e=Rw(t,YP)}return e&&e.dom.querySelector("input").select(),!0},z2e=Lt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),j2e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},GJ=Gt.define({combine(t){return bc(t,j2e,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function G2e(t){let e=[X2e,H2e];return t&&e.push(GJ.of(t)),e}const U2e=fr.mark({class:"cm-selectionMatch"}),W2e=fr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function az(t,e,r,n){return(r==0||t(e.sliceDoc(r-1,r))!=Gn.Word)&&(n==e.doc.length||t(e.sliceDoc(n,n+1))!=Gn.Word)}function V2e(t,e,r,n){return t(e.sliceDoc(r,r+1))==Gn.Word&&t(e.sliceDoc(n-1,n))==Gn.Word}const H2e=bi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(GJ),{state:r}=t,n=r.selection;if(n.ranges.length>1)return fr.none;let i=n.main,a,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return fr.none;let l=r.wordAt(i.head);if(!l)return fr.none;o=r.charCategorizer(i.head),a=r.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return fr.none;if(e.wholeWords){if(a=r.sliceDoc(i.from,i.to),o=r.charCategorizer(i.head),!(az(o,r,i.from,i.to)&&V2e(o,r,i.from,i.to)))return fr.none}else if(a=r.sliceDoc(i.from,i.to),!a)return fr.none}let s=[];for(let l of t.visibleRanges){let u=new hm(r.doc,a,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!o||az(o,r,c,f))&&(i.empty&&c<=i.from&&f>=i.to?s.push(W2e.range(c,f)):(c>=i.to||f<=i.from)&&s.push(U2e.range(c,f)),s.length>e.maxMatches))return fr.none}}return fr.set(s)}},{decorations:t=>t.decorations}),X2e=Lt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Y2e=({state:t,dispatch:e})=>{let{selection:r}=t,n=Qe.create(r.ranges.map(i=>t.wordAt(i.head)||Qe.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function q2e(t,e){let{main:r,ranges:n}=t.selection,i=t.wordAt(r.head),a=i&&i.from==r.from&&i.to==r.to;for(let o=!1,s=new hm(t.doc,e,n[n.length-1].to);;)if(s.next(),s.done){if(o)return null;s=new hm(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==s.value.from))continue;if(a){let l=t.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const K2e=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(a=>a.from===a.to))return Y2e({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(a=>t.sliceDoc(a.from,a.to)!=n))return!1;let i=q2e(t,n);return i?(e(t.update({selection:t.selection.addRange(Qe.range(i.from,i.to),!1),effects:Lt.scrollIntoView(i.to)})),!0):!1},Xm=Gt.define({combine(t){return bc(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new lbe(e),scrollToMatch:e=>Lt.scrollIntoView(e)})}});class UJ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||B2e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ebe(this):new Z2e(this)}getCursor(e,r=0,n){let i=e.doc?e:Zr.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?$g(this,i,r,n):Bg(this,i,r,n)}}class WJ{constructor(e){this.spec=e}}function Bg(t,e,r,n){return new hm(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Q2e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Q2e(t,e){return(r,n,i,a)=>((a>r||a+i.length<n)&&(a=Math.max(0,r-2),i=t.sliceString(a,Math.min(t.length,n+2))),(e(kC(i,r-a))!=Gn.Word||e(MC(i,r-a))!=Gn.Word)&&(e(MC(i,n-a))!=Gn.Word||e(kC(i,n-a))!=Gn.Word))}class Z2e extends WJ{constructor(e){super(e)}nextMatch(e,r,n){let i=Bg(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=Bg(this.spec,e,0,r).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=n;;){let a=Math.max(r,i-1e4-this.spec.unquoted.length),o=Bg(this.spec,e,a,i),s=null;for(;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(a==r)return null;i-=1e4}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=Bg(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let a=Bg(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function $g(t,e,r,n){return new zJ(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?J2e(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function kC(t,e){return t.slice(Ca(t,e,!1),e)}function MC(t,e){return t.slice(e,Ca(t,e))}function J2e(t){return(e,r,n)=>!n[0].length||(t(kC(n.input,n.index))!=Gn.Word||t(MC(n.input,n.index))!=Gn.Word)&&(t(MC(n.input,n.index+n[0].length))!=Gn.Word||t(kC(n.input,n.index+n[0].length))!=Gn.Word)}class ebe extends WJ{nextMatch(e,r,n){let i=$g(this.spec,e,n,e.doc.length).next();return i.done&&(i=$g(this.spec,e,0,r).next()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=1;;i++){let a=Math.max(r,n-i*1e4),o=$g(this.spec,e,a,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(a==r||s.from>a+10))return s;if(a==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:r)}matchAll(e,r){let n=$g(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let a=$g(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const zw=Fr.define(),f4=Fr.define(),ed=Ia.define({create(t){return new aO(qP(t).create(),null)},update(t,e){for(let r of e.effects)r.is(zw)?t=new aO(r.value.create(),t.panel):r.is(f4)&&(t=new aO(t.query,r.value?h4:null));return t},provide:t=>Nw.from(t,e=>e.panel)});class aO{constructor(e,r){this.query=e,this.panel=r}}const tbe=fr.mark({class:"cm-searchMatch"}),rbe=fr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),nbe=bi.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ed))}update(t){let e=t.state.field(ed);(e!=t.startState.field(ed)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return fr.none;let{view:r}=this,n=new od;for(let i=0,a=r.visibleRanges,o=a.length;i<o;i++){let{from:s,to:l}=a[i];for(;i<o-1&&l>a[i+1].from-2*250;)l=a[++i].to;t.highlight(r.state,s,l,(u,c)=>{let f=r.state.selection.ranges.some(h=>h.from==u&&h.to==c);n.add(u,c,f?rbe:tbe)})}return n.finish()}},{decorations:t=>t.decorations});function K2(t){return e=>{let r=e.state.field(ed,!1);return r&&r.query.spec.valid?t(e,r):XJ(e)}}const AC=K2((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let i=Qe.single(n.from,n.to),a=t.state.facet(Xm);return t.dispatch({selection:i,effects:[d4(t,n),a.scrollToMatch(i.main,t)],userEvent:"select.search"}),HJ(t),!0}),TC=K2((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,i=e.prevMatch(r,n,n);if(!i)return!1;let a=Qe.single(i.from,i.to),o=t.state.facet(Xm);return t.dispatch({selection:a,effects:[d4(t,i),o.scrollToMatch(a.main,t)],userEvent:"select.search"}),HJ(t),!0}),ibe=K2((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:Qe.create(r.map(n=>Qe.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),abe=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,a=[],o=0;for(let s=new hm(t.doc,t.sliceDoc(n,i));!s.next().done;){if(a.length>1e3)return!1;s.value.from==n&&(o=a.length),a.push(Qe.range(s.value.from,s.value.to))}return e(t.update({selection:Qe.create(a,o),userEvent:"select.search.matches"})),!0},oz=K2((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let a=e.nextMatch(r,n,n);if(!a)return!1;let o=[],s,l,u=[];if(a.from==n&&a.to==i&&(l=r.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=e.nextMatch(r,a.from,a.to),u.push(Lt.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),a){let c=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;s=Qe.single(a.from-c,a.to-c),u.push(d4(t,a)),u.push(r.facet(Xm).scrollToMatch(s.main,t))}return t.dispatch({changes:o,selection:s,effects:u,userEvent:"input.replace"}),!0}),obe=K2((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(i=>{let{from:a,to:o}=i;return{from:a,to:o,insert:e.getReplacement(i)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:Lt.announce.of(n),userEvent:"input.replace.all"}),!0});function h4(t){return t.state.facet(Xm).createPanel(t)}function qP(t,e){var r,n,i,a,o;let s=t.selection.main,l=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!l)return e;let u=t.facet(Xm);return new UJ({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function VJ(t){let e=Rw(t,h4);return e&&e.dom.querySelector("[main-field]")}function HJ(t){let e=VJ(t);e&&e==t.root.activeElement&&e.select()}const XJ=t=>{let e=t.state.field(ed,!1);if(e&&e.panel){let r=VJ(t);if(r&&r!=t.root.activeElement){let n=qP(t.state,e.query.spec);n.valid&&t.dispatch({effects:zw.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[f4.of(!0),e?zw.of(qP(t.state,e.query.spec)):Fr.appendConfig.of(cbe)]});return!0},YJ=t=>{let e=t.state.field(ed,!1);if(!e||!e.panel)return!1;let r=Rw(t,h4);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:f4.of(!1)}),!0},sbe=[{key:"Mod-f",run:XJ,scope:"editor search-panel"},{key:"F3",run:AC,shift:TC,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:AC,shift:TC,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:YJ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:abe},{key:"Mod-Alt-g",run:$2e},{key:"Mod-d",run:K2e,preventDefault:!0}];class lbe{constructor(e){this.view=e;let r=this.query=e.state.field(ed).query.spec;this.commit=this.commit.bind(this),this.searchField=yn("input",{value:r.search,placeholder:Qo(e,"Find"),"aria-label":Qo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=yn("input",{value:r.replace,placeholder:Qo(e,"Replace"),"aria-label":Qo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=yn("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=yn("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=yn("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,a,o){return yn("button",{class:"cm-button",name:i,onclick:a,type:"button"},o)}this.dom=yn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>AC(e),[Qo(e,"next")]),n("prev",()=>TC(e),[Qo(e,"previous")]),n("select",()=>ibe(e),[Qo(e,"all")]),yn("label",null,[this.caseField,Qo(e,"match case")]),yn("label",null,[this.reField,Qo(e,"regexp")]),yn("label",null,[this.wordField,Qo(e,"by word")]),...e.state.readOnly?[]:[yn("br"),this.replaceField,n("replace",()=>oz(e),[Qo(e,"replace")]),n("replaceAll",()=>obe(e),[Qo(e,"replace all")])],yn("button",{name:"close",onclick:()=>YJ(e),"aria-label":Qo(e,"close"),type:"button"},[""])])}commit(){let e=new UJ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:zw.of(e)}))}keydown(e){pye(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?TC:AC)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),oz(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(zw)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Xm).top}}function Qo(t,e){return t.state.phrase(e)}const hS=30,dS=/[\s\.,:;?!]/;function d4(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),i=t.state.doc.lineAt(r).to,a=Math.max(n.from,e-hS),o=Math.min(i,r+hS),s=t.state.sliceDoc(a,o);if(a!=n.from){for(let l=0;l<hS;l++)if(!dS.test(s[l+1])&&dS.test(s[l])){s=s.slice(l);break}}if(o!=i){for(let l=s.length-1;l>s.length-hS;l--)if(!dS.test(s[l-1])&&dS.test(s[l])){s=s.slice(0,l);break}}return Lt.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${n.number}.`)}const ube=Lt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cbe=[ed,Wm.low(nbe),ube];class qJ{constructor(e,r,n){this.state=e,this.pos=r,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let r=Aa(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),a=i.search(KJ(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,r){e=="abort"&&this.abortListeners&&this.abortListeners.push(r)}}function sz(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function fbe(t){let e=Object.create(null),r=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let a=1;a<i.length;a++)r[i[a]]=!0}let n=sz(e)+sz(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function hbe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[r,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:fbe(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:r}:null}}class lz{constructor(e,r,n,i){this.completion=e,this.source=r,this.match=n,this.score=i}}function td(t){return t.selection.main.from}function KJ(t,e){var r;let{source:n}=t,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?t:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const dbe=wc.define();function pbe(t,e,r,n){let{main:i}=t.selection,a=r-i.from,o=n-i.from;return Object.assign(Object.assign({},t.changeByRange(s=>s!=i&&r!=n&&t.sliceDoc(s.from+a,s.from+o)!=t.sliceDoc(r,n)?{range:s}:{changes:{from:s.from+a,to:n==i.from?s.to:s.from+o,insert:e},range:Qe.cursor(s.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const uz=new WeakMap;function vbe(t){if(!Array.isArray(t))return t;let e=uz.get(t);return e||uz.set(t,e=hbe(t)),e}const IC=Fr.define(),jw=Fr.define();class gbe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=xa(e,r),i=tl(n);this.chars.push(n);let a=e.slice(r,r+i),o=a.toUpperCase();this.folded.push(xa(o==a?a.toLowerCase():o,0)),r+=i}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:r,folded:n,any:i,precise:a,byWord:o}=this;if(r.length==1){let y=xa(e,0),w=tl(y),b=w==e.length?0:-100;if(y!=r[0])if(y==n[0])b+=-200;else return!1;return this.ret(b,[0,w])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,u=0;if(s<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let b=xa(e,y);(b==r[u]||b==n[u])&&(i[u++]=y),y+=tl(b)}if(u<l)return!1}let c=0,f=0,h=!1,d=0,p=-1,v=-1,g=/[a-z]/.test(e),m=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&f<l;){let x=xa(e,y);s<0&&(c<l&&x==r[c]&&(a[c++]=y),d<l&&(x==r[d]||x==n[d]?(d==0&&(p=y),v=y+1,d++):d=0));let S,E=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(S=z5(x))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||E==1&&g||b==0&&E!=0)&&(r[f]==x||n[f]==x&&(h=!0)?o[f++]=y:o.length&&(m=!1)),b=E,y+=tl(x)}return f==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==l?this.ret(-900-e.length,[p,v]):f==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):r.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,r,n){let i=[],a=0;for(let o of r){let s=o+(this.astral?tl(xa(n,o)):1);a&&i[a-1]==o?i[a-1]=s:(i[a++]=o,i[a++]=s)}return this.ret(e-n.length,i)}}const _a=Gt.define({combine(t){return bc(t,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:mbe,compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>cz(e(n),r(n)),optionClass:(e,r)=>n=>cz(e(n),r(n)),addToOptions:(e,r)=>e.concat(r)})}});function cz(t,e){return t?e?t+" "+e:t:e}function mbe(t,e,r,n,i,a){let o=t.textDirection==Ln.RTL,s=o,l=!1,u="top",c,f,h=e.left-i.left,d=i.right-e.right,p=n.right-n.left,v=n.bottom-n.top;if(s&&h<Math.min(p,d)?s=!1:!s&&d<Math.min(p,h)&&(s=!0),p<=(s?h:d))c=Math.max(i.top,Math.min(r.top,i.bottom-v))-e.top,f=Math.min(400,s?h:d);else{l=!0,f=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=v||y>e.top?c=r.bottom-e.top:(u="bottom",c=e.bottom-r.top)}let g=(e.bottom-e.top)/a.offsetHeight,m=(e.right-e.left)/a.offsetWidth;return{style:`${u}: ${c/g}px; max-width: ${f/m}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":s?"left":"right")}}function ybe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,i,a){let o=document.createElement("span");o.className="cm-completionLabel";let s=r.displayLabel||r.label,l=0;for(let u=0;u<a.length;){let c=a[u++],f=a[u++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(s.slice(c,f))),h.className="cm-completionMatchedText",l=f}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function oO(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class wbe{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(r),{options:a,selected:o}=i.open,s=e.state.facet(_a);this.optionContent=ybe(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=oO(a.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(r).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(_a).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jw.of(null)})}),this.showOptions(a,i.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:a,selected:o,disabled:s}=n.open;(!i.open||i.open.options!=a)&&(this.range=oO(a.length,o,e.state.facet(_a).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),s!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=oO(r.options.length,r.selected,this.view.state.facet(_a).maxRenderedOptions),this.showOptions(r.options,e.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:n}=r.options[r.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>ol(this.view.state,o,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;n.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return r&&xbe(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(a.bottom,r.bottom)-10||i.bottom<Math.max(a.top,r.top)+10?null:this.view.state.facet(_a).positionInfo(this.view,r,i,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:u}=s;if(u){let h=typeof u=="string"?u:u.name;if(h!=a&&(o>n.from||n.from==0))if(a=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=r+"-"+o,c.setAttribute("role","option");let f=this.optionClass(s);f&&(c.className=f);for(let h of this.optionContent){let d=h(s,this.view.state,this.view,l);d&&c.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function bbe(t,e){return r=>new wbe(r,t,e)}function xbe(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/i)}function fz(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Sbe(t,e){let r=[],n=null,i=l=>{r.push(l);let{section:u}=l.completion;if(u){n||(n=[]);let c=typeof u=="string"?u:u.name;n.some(f=>f.name==c)||n.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)i(new lz(c,l.source,u?u(c):[],1e9-r.length));else{let c=new gbe(e.sliceDoc(l.from,l.to));for(let f of l.result.options)if(c.match(f.label)){let h=f.displayLabel?u?u(f,c.matched):[]:c.matched;i(new lz(f,l.source,h,c.score+(f.boost||0)))}}}if(n){let l=Object.create(null),u=0,c=(f,h)=>{var d,p;return((d=f.rank)!==null&&d!==void 0?d:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(f.name<h.name?-1:1)};for(let f of n.sort(c))u-=1e5,l[f.name]=u;for(let f of r){let{section:h}=f.completion;h&&(f.score+=l[typeof h=="string"?h:h.name])}}let a=[],o=null,s=e.facet(_a).compareCompletions;for(let l of r.sort((u,c)=>c.score-u.score||s(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?a.push(l):fz(l.completion)>fz(o)&&(a[a.length-1]=l),o=l.completion}return a}class c0{constructor(e,r,n,i,a,o){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=a,this.disabled=o}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new c0(this.options,hz(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,i,a){let o=Sbe(e,r);if(!o.length)return i&&e.some(l=>l.state==1)?new c0(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=r.facet(_a).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){s=u;break}}return new c0(o,hz(n,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:Mbe,above:a.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new c0(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class OC{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new OC(Cbe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(_a),a=(n.override||r.languageDataAt("autocomplete",td(r)).map(vbe)).map(s=>(this.active.find(u=>u.source==s)||new Oo(s,this.active.some(u=>u.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((s,l)=>s==this.active[l])&&(a=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||a.some(s=>s.hasResult()&&e.changes.touchesRange(s.from,s.to))||!Ebe(a,this.active)?o=c0.build(a,r,this.id,o,n):o&&o.disabled&&!a.some(s=>s.state==1)&&(o=null),!o&&a.every(s=>s.state!=1)&&a.some(s=>s.hasResult())&&(a=a.map(s=>s.hasResult()?new Oo(s.source,0):s));for(let s of e.effects)s.is(ZJ)&&(o=o&&o.setSelected(s.value,this.id));return a==this.active&&o==this.open?this:new OC(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:_be}}function Ebe(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult;)r++;for(;n<e.length&&!e[n].hasResult;)n++;let i=r==t.length,a=n==e.length;if(i||a)return i==a;if(t[r++].result!=e[n++].result)return!1}}const _be={"aria-autocomplete":"list"};function hz(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const Cbe=[];function KP(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Oo{constructor(e,r,n=-1){this.source=e,this.state=r,this.explicitPos=n}hasResult(){return!1}update(e,r){let n=KP(e),i=this;n?i=i.handleUserEvent(e,n,r):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Oo(i.source,0));for(let a of e.effects)if(a.is(IC))i=new Oo(i.source,1,a.value?td(e.state):-1);else if(a.is(jw))i=new Oo(i.source,0);else if(a.is(QJ))for(let o of a.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,r,n){return r=="delete"||!n.activateOnTyping?this.map(e.changes):new Oo(this.source,1)}handleChange(e){return e.changes.touchesRange(td(e.startState))?new Oo(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Oo(this.source,this.state,e.mapPos(this.explicitPos))}}class k0 extends Oo{constructor(e,r,n,i,a){super(e,2,r),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,r,n){var i;let a=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=td(e.state);if((this.explicitPos<0?s<=a:s<this.from)||s>o||r=="delete"&&td(e.startState)==this.from)return new Oo(this.source,r=="input"&&n.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return kbe(this.result.validFor,e.state,a,o)?new k0(this.source,l,this.result,a,o):this.result.update&&(u=this.result.update(this.result,a,o,new qJ(e.state,s,l>=0)))?new k0(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:td(e.state)):new Oo(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Oo(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new k0(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function kbe(t,e,r,n){if(!t)return!1;let i=e.sliceDoc(r,n);return typeof t=="function"?t(i,r,n,e):KJ(t,!0).test(i)}const QJ=Fr.define({map(t,e){return t.map(r=>r.map(e))}}),ZJ=Fr.define(),ss=Ia.define({create(){return OC.start()},update(t,e){return t.update(e)},provide:t=>[Q5.from(t,e=>e.tooltip),Lt.contentAttributes.from(t,e=>e.attrs)]});function JJ(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(ss).active.find(i=>i.source==e.source);return n instanceof k0?(typeof r=="string"?t.dispatch(Object.assign(Object.assign({},pbe(t.state,r,n.from,n.to)),{annotations:dbe.of(e.completion)})):r(t,e.completion,n.from,n.to),!0):!1}const Mbe=bbe(ss,JJ);function pS(t,e="option"){return r=>{let n=r.state.field(ss,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(_a).interactionDelay)return!1;let i=1,a;e=="page"&&(a=IZ(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,s=n.open.selected>-1?n.open.selected+i*(t?1:-1):t?0:o-1;return s<0?s=e=="page"?0:o-1:s>=o&&(s=e=="page"?o-1:0),r.dispatch({effects:ZJ.of(s)}),!0}}const Abe=t=>{let e=t.state.field(ss,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(_a).interactionDelay?!1:JJ(t,e.open.options[e.open.selected])},Tbe=t=>t.state.field(ss,!1)?(t.dispatch({effects:IC.of(!0)}),!0):!1,Ibe=t=>{let e=t.state.field(ss,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:jw.of(null)}),!0)};class Obe{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const Dbe=50,Pbe=1e3,Lbe=bi.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(ss).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(ss);if(!t.selectionSet&&!t.docChanged&&t.startState.field(ss)==e)return;let r=t.transactions.some(i=>(i.selection||i.docChanged)&&!KP(i));for(let i=0;i<this.running.length;i++){let a=this.running[i];if(r||a.updates.length+t.transactions.length>Dbe&&Date.now()-a.time>Pbe){for(let o of a.context.abortListeners)try{o()}catch(s){ol(this.view.state,s)}a.context.abortListeners=null,this.running.splice(i--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(i=>i.effects.some(a=>a.is(IC)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.state.facet(_a).activateOnTypingDelay;if(this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(a=>a.active.source==i.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let i of t.transactions)KP(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(ss);for(let r of e.active)r.state==1&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r)}startQuery(t){let{state:e}=this.view,r=td(e),n=new qJ(e,r,t.explicitPos==r),i=new Obe(t,n);this.running.push(i),Promise.resolve(t.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:jw.of(null)}),ol(this.view.state,a)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(_a).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(_a);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let o=new k0(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:td(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)o=o.update(s,r);if(o.hasResult()){e.push(o);continue}}let a=this.view.state.field(ss).active.find(o=>o.source==i.active.source);if(a&&a.state==1)if(i.done==null){let o=new Oo(i.active.source,0);for(let s of i.updates)o=o.update(s,r);o.state!=1&&e.push(o)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:QJ.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(ss,!1);if(e&&e.tooltip&&this.view.state.facet(_a).closeOnBlur){let r=e.open&&IZ(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jw.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:IC.of(!1)}),20),this.composing=0}}}),Rbe=Lt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Gw={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mp=Fr.define({map(t,e){let r=e.mapPos(t,-1,ro.TrackAfter);return r??void 0}}),p4=new class extends av{};p4.startSide=1;p4.endSide=-1;const eee=Ia.define({create(){return Jr.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(Mp)&&(t=t.update({add:[p4.range(r.value,r.value+1)]}));return t}});function Nbe(){return[Bbe,eee]}const sO="()[]{}<>";function tee(t){for(let e=0;e<sO.length;e+=2)if(sO.charCodeAt(e)==t)return sO.charAt(e+1);return z5(t<128?t:t+1)}function ree(t,e){return t.languageDataAt("closeBrackets",e)[0]||Gw}const Fbe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Bbe=Lt.inputHandler.of((t,e,r,n)=>{if((Fbe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(n.length>2||n.length==2&&tl(xa(n,0))==1||e!=i.from||r!=i.to)return!1;let a=jbe(t.state,n);return a?(t.dispatch(a),!0):!1}),$be=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=ree(t,t.selection.main.head).brackets||Gw.brackets,i=null,a=t.changeByRange(o=>{if(o.empty){let s=Gbe(t.doc,o.head);for(let l of n)if(l==s&&HM(t.doc,o.head)==tee(xa(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Qe.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},zbe=[{key:"Backspace",run:$be}];function jbe(t,e){let r=ree(t,t.selection.main.head),n=r.brackets||Gw.brackets;for(let i of n){let a=tee(xa(i,0));if(e==i)return a==i?Vbe(t,i,n.indexOf(i+i+i)>-1,r):Ube(t,i,a,r.before||Gw.before);if(e==a&&nee(t,t.selection.main.from))return Wbe(t,i,a)}return null}function nee(t,e){let r=!1;return t.field(eee).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function HM(t,e){let r=t.sliceString(e,e+2);return r.slice(0,tl(xa(r,0)))}function Gbe(t,e){let r=t.sliceString(e-2,e);return tl(xa(r,0))==r.length?r:r.slice(1)}function Ube(t,e,r,n){let i=null,a=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:r,from:o.to}],effects:Mp.of(o.to+e.length),range:Qe.range(o.anchor+e.length,o.head+e.length)};let s=HM(t.doc,o.head);return!s||/\s/.test(s)||n.indexOf(s)>-1?{changes:{insert:e+r,from:o.head},effects:Mp.of(o.head+e.length),range:Qe.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function Wbe(t,e,r){let n=null,i=t.changeByRange(a=>a.empty&&HM(t.doc,a.head)==r?{changes:{from:a.head,to:a.head+r.length,insert:r},range:Qe.cursor(a.head+r.length)}:n={range:a});return n?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Vbe(t,e,r,n){let i=n.stringPrefixes||Gw.stringPrefixes,a=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Mp.of(s.to+e.length),range:Qe.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=HM(t.doc,l),c;if(u==e){if(dz(t,l))return{changes:{insert:e+e,from:l},effects:Mp.of(l+e.length),range:Qe.cursor(l+e.length)};if(nee(t,l)){let h=r&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:Qe.cursor(l+h.length)}}}else{if(r&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=pz(t,l-2*e.length,i))>-1&&dz(t,c))return{changes:{insert:e+e+e+e,from:l},effects:Mp.of(l+e.length),range:Qe.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=Gn.Word&&pz(t,l,i)>-1&&!Hbe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Mp.of(l+e.length),range:Qe.cursor(l+e.length)}}return{range:a=s}});return a?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function dz(t,e){let r=Aa(t).resolveInner(e+1);return r.parent&&r.from==e}function Hbe(t,e,r,n){let i=Aa(t).resolveInner(e,-1),a=n.reduce((o,s)=>Math.max(o,s.length),0);for(let o=0;o<5;o++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+r.length+a)),l=s.indexOf(r);if(!l||l>-1&&n.indexOf(s.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>r.length+l;){if(t.sliceDoc(c.to-r.length,c.to)==r)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function pz(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Gn.Word)return e;for(let i of r){let a=e-i.length;if(t.sliceDoc(a,e)==i&&n(t.sliceDoc(a-1,a))!=Gn.Word)return a}return-1}function Xbe(t={}){return[ss,_a.of(t),Lbe,Ybe,Rbe]}const iee=[{key:"Ctrl-Space",run:Tbe},{key:"Escape",run:Ibe},{key:"ArrowDown",run:pS(!0)},{key:"ArrowUp",run:pS(!1)},{key:"PageDown",run:pS(!0,"page")},{key:"PageUp",run:pS(!1,"page")},{key:"Enter",run:Abe}],Ybe=Wm.highest(NM.computeN([_a],t=>t.facet(_a).defaultKeymap?[iee]:[]));class qbe{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class xp{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let i=e,a=n.facet(see).markerFilter;a&&(i=a(i,n));let o=fr.set(i.map(s=>s.from==s.to||s.from==s.to-1&&n.doc.lineAt(s.from).to==s.from?fr.widget({widget:new ixe(s),diagnostic:s}).range(s.from):fr.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s,inclusive:!0}).range(s.from,s.to)),!0);return new xp(o,r,dm(o))}}function dm(t,e=null,r=0){let n=null;return t.between(r,1e9,(i,a,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new qbe(i,a,o.diagnostic),!1}),n}function Kbe(t,e){let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(n=>n.is(aee))||t.changes.touchesRange(r.from,r.to))}function Qbe(t,e){return t.field(hs,!1)?e:e.concat(Fr.appendConfig.of(sxe))}const aee=Fr.define(),v4=Fr.define(),oee=Fr.define(),hs=Ia.define({create(){return new xp(fr.none,null,null)},update(t,e){if(e.docChanged){let r=t.diagnostics.map(e.changes),n=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);n=dm(r,t.selected.diagnostic,i)||dm(r,null,i)}t=new xp(r,t.panel,n)}for(let r of e.effects)r.is(aee)?t=xp.init(r.value,t.panel,e.state):r.is(v4)?t=new xp(t.diagnostics,r.value?XM.open:null,t.selected):r.is(oee)&&(t=new xp(t.diagnostics,t.panel,r.value));return t},provide:t=>[Nw.from(t,e=>e.panel),Lt.decorations.from(t,e=>e.diagnostics)]}),Zbe=fr.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function Jbe(t,e,r){let{diagnostics:n}=t.state.field(hs),i=[],a=2e8,o=0;n.between(e-(r<0?1:0),e+(r>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||r>0)&&(e<u||r<0))&&(i.push(c.diagnostic),a=Math.min(l,a),o=Math.max(u,o))});let s=t.state.facet(see).tooltipFilter;return s&&(i=s(i,t.state)),i.length?{pos:a,end:o,above:t.state.doc.lineAt(a).to<o,create(){return{dom:exe(t,i)}}}:null}function exe(t,e){return yn("ul",{class:"cm-tooltip-lint"},e.map(r=>uee(t,r,!1)))}const txe=t=>{let e=t.state.field(hs,!1);(!e||!e.panel)&&t.dispatch({effects:Qbe(t.state,[v4.of(!0)])});let r=Rw(t,XM.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},vz=t=>{let e=t.state.field(hs,!1);return!e||!e.panel?!1:(t.dispatch({effects:v4.of(!1)}),!0)},rxe=t=>{let e=t.state.field(hs,!1);if(!e)return!1;let r=t.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(t.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},nxe=[{key:"Mod-Shift-m",run:txe,preventDefault:!0},{key:"F8",run:rxe}],see=Gt.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},bc(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r}))}});function lee(t){let e=[];if(t)e:for(let{name:r}of t){for(let n=0;n<r.length;n++){let i=r[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function uee(t,e,r){var n;let i=r?lee(e.actions):[];return yn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},yn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,o)=>{let s=!1,l=h=>{if(h.preventDefault(),s)return;s=!0;let d=dm(t.state.field(hs).diagnostics,e);d&&a.apply(t,d.from,d.to)},{name:u}=a,c=i[o]?u.indexOf(i[o]):-1,f=c<0?u:[u.slice(0,c),yn("u",u.slice(c,c+1)),u.slice(c+1)];return yn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&yn("div",{class:"cm-diagnosticSource"},e.source))}class ixe extends Mf{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return yn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class gz{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=uee(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class XM{constructor(e){this.view=e,this.items=[];let r=i=>{if(i.keyCode==27)vz(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=lee(a.actions);for(let s=0;s<o.length;s++)if(o[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=dm(this.view.state.field(hs).diagnostics,a);l&&a.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=yn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=yn("div",{class:"cm-panel-lint"},this.list,yn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vz(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(hs).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(hs),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(o,s,{spec:l})=>{let u=-1,c;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new gz(this.view,l.diagnostic),this.items.splice(n,0,c),i=!0):(c=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),r&&c.diagnostic==r.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new gz(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:s})=>{let l=s.height/this.list.offsetHeight;o.top<s.top?this.list.scrollTop-=(s.top-o.top)/l:o.bottom>s.bottom&&(this.list.scrollTop+=(o.bottom-s.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(hs),n=dm(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:oee.of(n)})}static open(e){return new XM(e)}}function axe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function vS(t){return axe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const oxe=Lt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:vS("#d11")},".cm-lintRange-warning":{backgroundImage:vS("orange")},".cm-lintRange-info":{backgroundImage:vS("#999")},".cm-lintRange-hint":{backgroundImage:vS("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),sxe=[hs,Lt.decorations.compute([hs],t=>{let{selected:e,panel:r}=t.field(hs);return!e||!r||e.from==e.to?fr.none:fr.set([Zbe.range(e.from,e.to)])}),r1e(Jbe,{hideOn:Kbe}),oxe];var mz=function(e){e===void 0&&(e={});var{crosshairCursor:r=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(zbe)),e.defaultKeymap!==!1&&(n=n.concat(N2e)),e.searchKeymap!==!1&&(n=n.concat(sbe)),e.historyKeymap!==!1&&(n=n.concat(Vwe)),e.foldKeymap!==!1&&(n=n.concat(twe)),e.completionKeymap!==!1&&(n=n.concat(iee)),e.lintKeymap!==!1&&(n=n.concat(nxe));var i=[];return e.lineNumbers!==!1&&i.push(f1e()),e.highlightActiveLineGutter!==!1&&i.push(p1e()),e.highlightSpecialChars!==!1&&i.push(Oye()),e.history!==!1&&i.push(Nwe()),e.foldGutter!==!1&&i.push(awe()),e.drawSelection!==!1&&i.push(bye()),e.dropCursor!==!1&&i.push(Cye()),e.allowMultipleSelections!==!1&&i.push(Zr.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(V1e()),e.syntaxHighlighting!==!1&&i.push(KZ(uwe,{fallback:!0})),e.bracketMatching!==!1&&i.push(gwe()),e.closeBrackets!==!1&&i.push(Nbe()),e.autocompletion!==!1&&i.push(Xbe()),e.rectangularSelection!==!1&&i.push(Vye()),r!==!1&&i.push(Yye()),e.highlightActiveLine!==!1&&i.push(Fye()),e.highlightSelectionMatches!==!1&&i.push(G2e()),e.tabSize&&typeof e.tabSize=="number"&&i.push(BM.of(" ".repeat(e.tabSize))),i.concat([NM.of(n.flat())]).filter(Boolean)};const lxe="#e5c07b",yz="#e06c75",uxe="#56b6c2",cxe="#ffffff",i_="#abb2bf",QP="#7d8799",fxe="#61afef",hxe="#98c379",wz="#d19a66",dxe="#c678dd",pxe="#21252b",bz="#2c313a",xz="#282c34",lO="#353a42",vxe="#3E4451",Sz="#528bff",gxe=Lt.theme({"&":{color:i_,backgroundColor:xz},".cm-content":{caretColor:Sz},".cm-cursor, .cm-dropCursor":{borderLeftColor:Sz},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:vxe},".cm-panels":{backgroundColor:pxe,color:i_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:xz,color:QP,border:"none"},".cm-activeLineGutter":{backgroundColor:bz},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:lO},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:lO,borderBottomColor:lO},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:bz,color:i_}}},{dark:!0}),mxe=Y2.define([{tag:$e.keyword,color:dxe},{tag:[$e.name,$e.deleted,$e.character,$e.propertyName,$e.macroName],color:yz},{tag:[$e.function($e.variableName),$e.labelName],color:fxe},{tag:[$e.color,$e.constant($e.name),$e.standard($e.name)],color:wz},{tag:[$e.definition($e.name),$e.separator],color:i_},{tag:[$e.typeName,$e.className,$e.number,$e.changed,$e.annotation,$e.modifier,$e.self,$e.namespace],color:lxe},{tag:[$e.operator,$e.operatorKeyword,$e.url,$e.escape,$e.regexp,$e.link,$e.special($e.string)],color:uxe},{tag:[$e.meta,$e.comment],color:QP},{tag:$e.strong,fontWeight:"bold"},{tag:$e.emphasis,fontStyle:"italic"},{tag:$e.strikethrough,textDecoration:"line-through"},{tag:$e.link,color:QP,textDecoration:"underline"},{tag:$e.heading,fontWeight:"bold",color:yz},{tag:[$e.atom,$e.bool,$e.special($e.variableName)],color:wz},{tag:[$e.processingInstruction,$e.string,$e.inserted],color:hxe},{tag:$e.invalid,color:cxe}]),yxe=[gxe,KZ(mxe)];var wxe=Lt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),bxe=function(e){e===void 0&&(e={});var{indentWithTab:r=!0,editable:n=!0,readOnly:i=!1,theme:a="light",placeholder:o="",basicSetup:s=!0}=e,l=[];switch(r&&l.unshift(NM.of([F2e])),s&&(typeof s=="boolean"?l.unshift(mz()):l.unshift(mz(s))),o&&l.unshift(jye(o)),a){case"light":l.push(wxe);break;case"dark":l.push(yxe);break;case"none":break;default:l.push(a);break}return n===!1&&l.push(Lt.editable.of(!1)),i&&l.push(Zr.readOnly.of(!0)),[...l]},xxe=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)}),Ez=wc.define(),Sxe=[];function Exe(t){var{value:e,selection:r,onChange:n,onStatistics:i,onCreateEditor:a,onUpdate:o,extensions:s=Sxe,autoFocus:l,theme:u="light",height:c=null,minHeight:f=null,maxHeight:h=null,width:d=null,minWidth:p=null,maxWidth:v=null,placeholder:g="",editable:m=!0,readOnly:y=!1,indentWithTab:w=!0,basicSetup:b=!0,root:x,initialState:S}=t,[E,_]=ae.useState(),[k,C]=ae.useState(),[A,M]=ae.useState(),T=Lt.theme({"&":{height:c,minHeight:f,maxHeight:h,width:d,minWidth:p,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),O=Lt.updateListener.of(B=>{if(B.docChanged&&typeof n=="function"&&!B.transactions.some(L=>L.annotation(Ez))){var F=B.state.doc,D=F.toString();n(D,B)}i&&i(xxe(B))}),N=bxe({theme:u,editable:m,readOnly:y,placeholder:g,indentWithTab:w,basicSetup:b}),R=[O,T,...N];return o&&typeof o=="function"&&R.push(Lt.updateListener.of(o)),R=R.concat(s),ae.useEffect(()=>{if(E&&!A){var B={doc:e,selection:r,extensions:R},F=S?Zr.fromJSON(S.json,B,S.fields):Zr.create(B);if(M(F),!k){var D=new Lt({state:F,parent:E,root:x});C(D),a&&a(D,F)}}return()=>{k&&(M(void 0),C(void 0))}},[E,A]),ae.useEffect(()=>_(t.container),[t.container]),ae.useEffect(()=>()=>{k&&(k.destroy(),C(void 0))},[k]),ae.useEffect(()=>{l&&k&&k.focus()},[l,k]),ae.useEffect(()=>{k&&k.dispatch({effects:Fr.reconfigure.of(R)})},[u,s,c,f,h,d,p,v,g,m,y,w,b,n,o]),ae.useEffect(()=>{if(e!==void 0){var B=k?k.state.doc.toString():"";k&&e!==B&&k.dispatch({changes:{from:0,to:B.length,insert:e||""},annotations:[Ez.of(!0)]})}},[e,k]),{state:A,setState:M,view:k,setView:C,container:E,setContainer:_}}var _xe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],g4=ae.forwardRef((t,e)=>{var{className:r,value:n="",selection:i,extensions:a=[],onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:f="light",height:h,minHeight:d,maxHeight:p,width:v,minWidth:g,maxWidth:m,basicSetup:y,placeholder:w,indentWithTab:b,editable:x,readOnly:S,root:E,initialState:_}=t,k=b0e(t,_xe),C=ae.useRef(null),{state:A,view:M,container:T}=Exe({container:C.current,root:E,value:n,autoFocus:c,theme:f,height:h,minHeight:d,maxHeight:p,width:v,minWidth:g,maxWidth:m,basicSetup:y,placeholder:w,indentWithTab:b,editable:x,readOnly:S,selection:i,onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:a,initialState:_});if(ae.useImperativeHandle(e,()=>({editor:C.current,state:A,view:M}),[C,T,A,M]),typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var O=typeof f=="string"?"cm-theme-"+f:"cm-theme";return Oe.jsx("div",eP({ref:C,className:""+O+(r?" "+r:"")},k))});g4.displayName="CodeMirror";var Qc;function cee(t){return new RegExp("^(?:"+t.join("|")+")$","i")}var Cxe=cee(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),kxe=cee(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load","into"]),Mxe=/[*+\-<>=&|\^\/!\?]/,_z="[A-Za-z_\\-0-9]",Axe=new RegExp("[A-Za-z]"),Txe=new RegExp("(("+_z+"|\\.)*("+_z+"))?:");function fee(t,e){var r=t.next();if(Qc=null,r=="$"||r=="?")return r=="?"&&t.match(/\s/,!1)?"operator":(t.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variableName.local");if(r=="<"&&!t.match(/^[\s\u00a0=]/,!1))return t.match(/^[^\s\u00a0>]*>?/),"atom";if(r=='"'||r=="'")return e.tokenize=Ixe(r),e.tokenize(t,e);if(/[{}\(\),\.;\[\]]/.test(r))return Qc=r,"bracket";if(r=="#")return t.skipToEnd(),"comment";if(Mxe.test(r))return"operator";if(r==":")return Cz(t),"atom";if(r=="@")return t.eatWhile(/[a-z\d\-]/i),"meta";if(Axe.test(r)&&t.match(Txe))return Cz(t),"atom";t.eatWhile(/[_\w\d]/);var n=t.current();return Cxe.test(n)?"builtin":kxe.test(n)?"keyword":"variable"}function Cz(t){t.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function Ixe(t){return function(e,r){for(var n=!1,i;(i=e.next())!=null;){if(i==t&&!n){r.tokenize=fee;break}n=!n&&i=="\\"}return"string"}}function gS(t,e,r){t.context={prev:t.context,indent:t.indent,col:r,type:e}}function mS(t){t.indent=t.context.indent,t.context=t.context.prev}const hee={name:"sparql",startState:function(){return{tokenize:fee,context:null,indent:0,col:0}},token:function(t,e){if(t.sol()&&(e.context&&e.context.align==null&&(e.context.align=!1),e.indent=t.indentation()),t.eatSpace())return null;var r=e.tokenize(t,e);if(r!="comment"&&e.context&&e.context.align==null&&e.context.type!="pattern"&&(e.context.align=!0),Qc=="(")gS(e,")",t.column());else if(Qc=="[")gS(e,"]",t.column());else if(Qc=="{")gS(e,"}",t.column());else if(/[\]\}\)]/.test(Qc)){for(;e.context&&e.context.type=="pattern";)mS(e);e.context&&Qc==e.context.type&&(mS(e),Qc=="}"&&e.context&&e.context.type=="pattern"&&mS(e))}else Qc=="."&&e.context&&e.context.type=="pattern"?mS(e):/atom|string|variable/.test(r)&&e.context&&(/[\}\]]/.test(e.context.type)?gS(e,"pattern",t.column()):e.context.type=="pattern"&&!e.context.align&&(e.context.align=!0,e.context.col=t.column()));return r},indent:function(t,e,r){var n=e&&e.charAt(0),i=t.context;if(/[\]\}]/.test(n))for(;i&&i.type=="pattern";)i=i.prev;var a=i&&n==i.type;return i?i.type=="pattern"?i.col:i.align?i.col+(a?0:1):i.indent+(a?0:r.unit):0},languageData:{commentTokens:{line:"#"}}};function dee(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Sp(t){const e=ae.useRef(t);return ae.useEffect(()=>{e.current=t}),ae.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function YM(t,e){const r=Sp(t),n=ae.useRef(0);return ae.useEffect(()=>()=>window.clearTimeout(n.current),[]),ae.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Oxe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function Dxe(t,e){return typeof e=="boolean"?e:typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function Pxe(t,e,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,i]=ae.useState(r?e:Dxe(t)),a=ae.useRef();return ae.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(t),i(a.current.matches),Oxe(a.current,o=>i(o.matches))},[t]),n}const Q2=typeof document<"u"?ae.useLayoutEffect:ae.useEffect;function pee(t,e){const r=ae.useRef(!1);ae.useEffect(()=>()=>{r.current=!1},[]),ae.useEffect(()=>{if(r.current)return t();r.current=!0},e)}function Lxe({opened:t,shouldReturnFocus:e=!0}){const r=ae.useRef(),n=()=>{var i;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((i=r.current)==null||i.focus({preventScroll:!0}))};return pee(()=>{let i=-1;const a=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",a),t?r.current=document.activeElement:e&&(i=window.setTimeout(n,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",a)}},[t,e]),n}function Rxe(t,e="body > :not(script)"){const r=dee(),n=Array.from(document.querySelectorAll(e)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(t)||i.contains(t))return;const a=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),s=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",r),a===null||a==="false"?i.setAttribute("aria-hidden","true"):!o&&!s&&i.setAttribute("data-hidden",a),{node:i,ariaHidden:o||null}});return()=>{n.forEach(i=>{!i||r!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Nxe=/input|select|textarea|button|object/,vee="a, input, select, textarea, button, object, [tabindex]";function Fxe(t){return t.style.display==="none"}function Bxe(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let r=t;for(;r&&!(r===document.body||r.nodeType===11);){if(Fxe(r))return!1;r=r.parentNode}return!0}function gee(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function ZP(t){const e=t.nodeName.toLowerCase(),r=!Number.isNaN(gee(t));return(Nxe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||r)&&Bxe(t)}function mee(t){const e=gee(t);return(Number.isNaN(e)||e>=0)&&ZP(t)}function $xe(t){return Array.from(t.querySelectorAll(vee)).filter(mee)}function zxe(t,e){const r=$xe(t);if(!r.length){e.preventDefault();return}const n=r[e.shiftKey?0:r.length-1],i=t.getRootNode();let a=n===i.activeElement||t===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(a=r.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(n)),!a)return;e.preventDefault();const l=r[e.shiftKey?r.length-1:0];l&&l.focus()}function jxe(t=!0){const e=ae.useRef(),r=ae.useRef(null),n=a=>{let o=a.querySelector("[data-autofocus]");if(!o){const s=Array.from(a.querySelectorAll(vee));o=s.find(mee)||s.find(ZP)||null,!o&&ZP(a)&&(o=a)}o&&o.focus({preventScroll:!0})},i=ae.useCallback(a=>{if(t){if(a===null){r.current&&(r.current(),r.current=null);return}r.current=Rxe(a),e.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&n(a)}),e.current=a):e.current=null)}},[t]);return ae.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const a=o=>{o.key==="Tab"&&e.current&&zxe(e.current,o)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a),r.current&&r.current()}},[t]),i}const Gxe=ee.useId||(()=>{});function Uxe(){const t=Gxe();return t?`mantine-${t.replace(/:/g,"")}`:""}function m4(t){const e=Uxe(),[r,n]=ae.useState(e);return Q2(()=>{n(dee())},[]),typeof t=="string"?t:typeof window>"u"?e:r}function Wxe(t,e,r){ae.useEffect(()=>(window.addEventListener(t,e,r),()=>window.removeEventListener(t,e,r)),[t,e])}function yee(t,e){typeof t=="function"?t(e):typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function Vxe(...t){return e=>{t.forEach(r=>yee(r,e))}}function Mv(...t){return ae.useCallback(Vxe(...t),t)}function Hxe({value:t,defaultValue:e,finalValue:r,onChange:n=()=>{}}){const[i,a]=ae.useState(e!==void 0?e:r),o=(s,...l)=>{a(s),n==null||n(s,...l)};return t!==void 0?[t,n,!0]:[i,o,!1]}function wee(t,e){return Pxe("(prefers-reduced-motion: reduce)",t,e)}function bee(t=!1,e){const{onOpen:r,onClose:n}=e||{},[i,a]=ae.useState(t),o=ae.useCallback(()=>{a(u=>u||(r==null||r(),!0))},[r]),s=ae.useCallback(()=>{a(u=>u&&(n==null||n(),!1))},[n]),l=ae.useCallback(()=>{i?s():o()},[s,o,i]);return[i,{open:o,close:s,toggle:l}]}var JP=function(t,e){return JP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},JP(t,e)};function lr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JP(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var z=function(){return z=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z.apply(this,arguments)};function wi(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function xee(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function See(t,e){return function(r,n){e(r,n,t)}}function Xxe(t,e,r,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,d=r.length-1;d>=0;d--){var p={};for(var v in n)p[v]=v==="access"?{}:n[v];for(var v in n.access)p.access[v]=n.access[v];p.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var g=(0,r[d])(s==="accessor"?{get:c.get,set:c.set}:c[l],p);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(f=o(g.get))&&(c.get=f),(f=o(g.set))&&(c.set=f),(f=o(g.init))&&i.unshift(f)}else(f=o(g))&&(s==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),h=!0}function Yxe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function qxe(t){return typeof t=="symbol"?t:"".concat(t)}function Kxe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Eee(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function is(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})}function as(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var qM=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function _ee(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qM(e,t,r)}function DC(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y4(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function Cee(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y4(arguments[e]));return t}function KM(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function zo(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function pm(t){return this instanceof pm?(this.v=t,this):new pm(t)}function kee(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(d){return new Promise(function(p,v){a.push([h,d,p,v])>1||s(h,d)})})}function s(h,d){try{l(n[h](d))}catch(p){f(a[0][3],p)}}function l(h){h.value instanceof pm?Promise.resolve(h.value.v).then(u,c):f(a[0][2],h)}function u(h){s("next",h)}function c(h){s("throw",h)}function f(h,d){h(d),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Mee(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:pm(t[i](o)),done:!1}:a?a(o):o}:a}}function Aee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof DC=="function"?DC(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function Tee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Qxe=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Iee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qM(e,t,r);return Qxe(e,t),e}function Oee(t){return t&&t.__esModule?t:{default:t}}function Dee(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Pee(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Lee(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Ree(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Zxe=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Nee(t){function e(n){t.error=t.hasError?new Zxe(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(a){return e(a),r()})}catch(a){e(a)}}if(t.hasError)throw t.error}return r()}const Jxe={__extends:lr,__assign:z,__rest:wi,__decorate:xee,__param:See,__metadata:Eee,__awaiter:is,__generator:as,__createBinding:qM,__exportStar:_ee,__values:DC,__read:y4,__spread:Cee,__spreadArrays:KM,__spreadArray:zo,__await:pm,__asyncGenerator:kee,__asyncDelegator:Mee,__asyncValues:Aee,__makeTemplateObject:Tee,__importStar:Iee,__importDefault:Oee,__classPrivateFieldGet:Dee,__classPrivateFieldSet:Pee,__classPrivateFieldIn:Lee,__addDisposableResource:Ree,__disposeResources:Nee},eSe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ree,get __assign(){return z},__asyncDelegator:Mee,__asyncGenerator:kee,__asyncValues:Aee,__await:pm,__awaiter:is,__classPrivateFieldGet:Dee,__classPrivateFieldIn:Lee,__classPrivateFieldSet:Pee,__createBinding:qM,__decorate:xee,__disposeResources:Nee,__esDecorate:Xxe,__exportStar:_ee,__extends:lr,__generator:as,__importDefault:Oee,__importStar:Iee,__makeTemplateObject:Tee,__metadata:Eee,__param:See,__propKey:qxe,__read:y4,__rest:wi,__runInitializers:Yxe,__setFunctionName:Kxe,__spread:Cee,__spreadArray:zo,__spreadArrays:KM,__values:DC,default:Jxe},Symbol.toStringTag,{value:"Module"}));var a_="right-scroll-bar-position",o_="width-before-scroll-bar",tSe="with-scroll-bars-hidden",rSe="--removed-body-scroll-bar-size";function uO(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nSe(t,e){var r=ae.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var kz=new WeakMap;function iSe(t,e){var r=nSe(e||null,function(n){return t.forEach(function(i){return uO(i,n)})});return ae.useLayoutEffect(function(){var n=kz.get(r);if(n){var i=new Set(n),a=new Set(t),o=r.current;i.forEach(function(s){a.has(s)||uO(s,null)}),a.forEach(function(s){i.has(s)||uO(s,o)})}kz.set(r,t)},[t]),r}function aSe(t){return t}function oSe(t,e){e===void 0&&(e=aSe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(s){return s!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(s){return a(s)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var s=r;r=[],s.forEach(a),o=r}var l=function(){var c=o;o=[],c.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),r}}}};return i}function sSe(t){t===void 0&&(t={});var e=oSe(null);return e.options=z({async:!0,ssr:!1},t),e}var Fee=function(t){var e=t.sideCar,r=wi(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return ae.createElement(n,z({},r))};Fee.isSideCarExport=!0;function lSe(t,e){return t.useMedium(e),Fee}var Bee=sSe(),cO=function(){},QM=ae.forwardRef(function(t,e){var r=ae.useRef(null),n=ae.useState({onScrollCapture:cO,onWheelCapture:cO,onTouchMoveCapture:cO}),i=n[0],a=n[1],o=t.forwardProps,s=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,f=t.shards,h=t.sideCar,d=t.noIsolation,p=t.inert,v=t.allowPinchZoom,g=t.as,m=g===void 0?"div":g,y=t.gapMode,w=wi(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,x=iSe([r,e]),S=z(z({},w),i);return ae.createElement(ae.Fragment,null,c&&ae.createElement(b,{sideCar:Bee,removeScrollBar:u,shards:f,noIsolation:d,inert:p,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:y}),o?ae.cloneElement(ae.Children.only(s),z(z({},S),{ref:x})):ae.createElement(m,z({},S,{className:l,ref:x}),s))});QM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};QM.classNames={fullWidth:o_,zeroRight:a_};var uSe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cSe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uSe();return e&&t.setAttribute("nonce",e),t}function fSe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hSe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dSe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=cSe())&&(fSe(e,r),hSe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pSe=function(){var t=dSe();return function(e,r){ae.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},$ee=function(){var t=pSe(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},vSe={left:0,top:0,right:0,gap:0},fO=function(t){return parseInt(t||"",10)||0},gSe=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[fO(r),fO(n),fO(i)]},mSe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vSe;var e=gSe(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},ySe=$ee(),wSe=function(t,e,r,n){var i=t.left,a=t.top,o=t.right,s=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(tSe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(a_,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(o_,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(a_," .").concat(a_,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(o_," .").concat(o_,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(rSe,": ").concat(s,`px;
  }
`)},bSe=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n,a=ae.useMemo(function(){return mSe(i)},[i]);return ae.createElement(ySe,{styles:wSe(a,!e,i,r?"":"!important")})},eL=!1;if(typeof window<"u")try{var yS=Object.defineProperty({},"passive",{get:function(){return eL=!0,!0}});window.addEventListener("test",yS,yS),window.removeEventListener("test",yS,yS)}catch{eL=!1}var wg=eL?{passive:!1}:!1,xSe=function(t){return t.tagName==="TEXTAREA"},zee=function(t,e){var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!xSe(t)&&r[e]==="visible")},SSe=function(t){return zee(t,"overflowY")},ESe=function(t){return zee(t,"overflowX")},Mz=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=jee(t,n);if(i){var a=Gee(t,n),o=a[1],s=a[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},_Se=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},CSe=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},jee=function(t,e){return t==="v"?SSe(e):ESe(e)},Gee=function(t,e){return t==="v"?_Se(e):CSe(e)},kSe=function(t,e){return t==="h"&&e==="rtl"?-1:1},MSe=function(t,e,r,n,i){var a=kSe(t,window.getComputedStyle(e).direction),o=a*n,s=r.target,l=e.contains(s),u=!1,c=o>0,f=0,h=0;do{var d=Gee(t,s),p=d[0],v=d[1],g=d[2],m=v-g-a*p;(p||m)&&jee(t,s)&&(f+=m,h+=p),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(c&&(i&&Math.abs(f)<1||!i&&o>f)||!c&&(i&&Math.abs(h)<1||!i&&-o>h))&&(u=!0),u},wS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Az=function(t){return[t.deltaX,t.deltaY]},Tz=function(t){return t&&"current"in t?t.current:t},ASe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},TSe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ISe=0,bg=[];function OSe(t){var e=ae.useRef([]),r=ae.useRef([0,0]),n=ae.useRef(),i=ae.useState(ISe++)[0],a=ae.useState($ee)[0],o=ae.useRef(t);ae.useEffect(function(){o.current=t},[t]),ae.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=zo([t.lockRef.current],(t.shards||[]).map(Tz),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=ae.useCallback(function(v,g){if("touches"in v&&v.touches.length===2)return!o.current.allowPinchZoom;var m=wS(v),y=r.current,w="deltaX"in v?v.deltaX:y[0]-m[0],b="deltaY"in v?v.deltaY:y[1]-m[1],x,S=v.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in v&&E==="h"&&S.type==="range")return!1;var _=Mz(E,S);if(!_)return!0;if(_?x=E:(x=E==="v"?"h":"v",_=Mz(E,S)),!_)return!1;if(!n.current&&"changedTouches"in v&&(w||b)&&(n.current=x),!x)return!0;var k=n.current||x;return MSe(k,g,v,k==="h"?w:b,!0)},[]),l=ae.useCallback(function(v){var g=v;if(!(!bg.length||bg[bg.length-1]!==a)){var m="deltaY"in g?Az(g):wS(g),y=e.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&ASe(x.delta,m)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Tz).filter(Boolean).filter(function(x){return x.contains(g.target)}),b=w.length>0?s(g,w[0]):!o.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),u=ae.useCallback(function(v,g,m,y){var w={name:v,delta:g,target:m,should:y,shadowParent:DSe(m)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),c=ae.useCallback(function(v){r.current=wS(v),n.current=void 0},[]),f=ae.useCallback(function(v){u(v.type,Az(v),v.target,s(v,t.lockRef.current))},[]),h=ae.useCallback(function(v){u(v.type,wS(v),v.target,s(v,t.lockRef.current))},[]);ae.useEffect(function(){return bg.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,wg),document.addEventListener("touchmove",l,wg),document.addEventListener("touchstart",c,wg),function(){bg=bg.filter(function(v){return v!==a}),document.removeEventListener("wheel",l,wg),document.removeEventListener("touchmove",l,wg),document.removeEventListener("touchstart",c,wg)}},[]);var d=t.removeScrollBar,p=t.inert;return ae.createElement(ae.Fragment,null,p?ae.createElement(a,{styles:TSe(i)}):null,d?ae.createElement(bSe,{gapMode:t.gapMode}):null)}function DSe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const PSe=lSe(Bee,OSe);var Uee=ae.forwardRef(function(t,e){return ae.createElement(QM,z({},t,{ref:e,sideCar:PSe}))});Uee.classNames=QM.classNames;const LSe=Uee;function lc(t){return Object.keys(t)}function hO(t){return t&&typeof t=="object"&&!Array.isArray(t)}function w4(t,e){const r={...t},n=e;return hO(t)&&hO(e)&&Object.keys(e).forEach(i=>{hO(n[i])&&i in t?r[i]=w4(r[i],n[i]):r[i]=n[i]}),r}function RSe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function NSe(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function FSe(t){const e=NSe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function dO(t){return`calc(${t} * var(--mantine-scale))`}function Wee(t,{shouldScale:e=!1}={}){function r(n){if(n===0||n==="0")return`0${t}`;if(typeof n=="number"){const i=`${n/16}${t}`;return e?dO(i):i}if(typeof n=="string"){if(n.startsWith("calc(")||n.startsWith("var(")||n.startsWith("clamp("))return n;if(n.includes(" "))return n.split(" ").map(a=>r(a)).join(" ");if(n.includes(t))return e?dO(n):n;const i=n.replace("px","");if(!Number.isNaN(Number(i))){const a=`${Number(i)/16}${t}`;return e?dO(a):a}}return n}return r}const tt=Wee("rem",{shouldScale:!0}),Iz=Wee("em");function b4(t){return Object.keys(t).reduce((e,r)=>(t[r]!==void 0&&(e[r]=t[r]),e),{})}function Vee(t){return typeof t=="number"?!0:typeof t=="string"?t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!==""?!0:/[0-9]/.test(t.trim().replace("-","")[0]):!1}function BSe(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==ee.Fragment:!1}function Z2(t){const e=ae.createContext(null);return[({children:i,value:a})=>ee.createElement(e.Provider,{value:a},i),()=>{const i=ae.useContext(e);if(i===null)throw new Error(t);return i}]}function $Se(t=null){const e=ae.createContext(t);return[({children:i,value:a})=>ee.createElement(e.Provider,{value:a},i),()=>ae.useContext(e)]}const zSe={app:100,modal:200,popover:300,overlay:400,max:9999};function ZM(t){return zSe[t]}function uo(t,e="size",r=!0){if(t!==void 0)return Vee(t)?r?tt(t):t:`var(--${e}-${t})`}function tL(t){return uo(t,"mantine-spacing")}function Td(t){return t===void 0?"var(--mantine-radius-default)":uo(t,"mantine-radius")}function uc(t){return uo(t,"mantine-font-size")}function Hee(t){if(t)return uo(t,"mantine-shadow",!1)}function Xee(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=Xee(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function bs(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=Xee(t))&&(n&&(n+=" "),n+=e);return n}const jSe={};function GSe(t){const e={};return t.forEach(r=>{Object.entries(r).forEach(([n,i])=>{e[n]?e[n]=bs(e[n],i):e[n]=i})}),e}function x4({theme:t,classNames:e,props:r,stylesCtx:n}){const a=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,r,n):o||jSe);return GSe(a)}function rL({theme:t,styles:e,props:r,stylesCtx:n}){return(Array.isArray(e)?e:[e]).reduce((a,o)=>typeof o=="function"?{...a,...o(t,r,n)}:{...a,...o},{})}const Yee=ae.createContext(null);function S4(){const t=ae.useContext(Yee);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function USe(){return S4().cssVariablesResolver}function WSe(){return S4().classNamesPrefix}function E4(){return S4().getStyleNonce}function VSe(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function HSe(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const r=parseInt(e,16),n=r>>16&255,i=r>>8&255,a=r&255;return{r:n,g:i,b:a,a:1}}function XSe(t){const[e,r,n,i]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:r,b:n,a:i||1}}function YSe(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=t.match(e);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),i=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,o=r[5]?parseFloat(r[5]):void 0,s=(1-Math.abs(2*a-1))*i,l=n/60,u=s*(1-Math.abs(l%2-1)),c=a-s/2;let f,h,d;return l>=0&&l<1?(f=s,h=u,d=0):l>=1&&l<2?(f=u,h=s,d=0):l>=2&&l<3?(f=0,h=s,d=u):l>=3&&l<4?(f=0,h=u,d=s):l>=4&&l<5?(f=u,h=0,d=s):(f=s,h=0,d=u),{r:Math.round((f+c)*255),g:Math.round((h+c)*255),b:Math.round((d+c)*255),a:o||1}}function _4(t){return VSe(t)?HSe(t):t.startsWith("rgb")?XSe(t):t.startsWith("hsl")?YSe(t):{r:0,g:0,b:0,a:1}}function bS(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r,g:n,b:i,a}=_4(t),o=1-e,s=l=>Math.round(l*o);return`rgba(${s(r)}, ${s(n)}, ${s(i)}, ${a})`}function PC(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function pO(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function qSe(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function KSe(t){if(t.startsWith("oklch("))return(qSe(t)||0)/100;const{r:e,g:r,b:n}=_4(t),i=e/255,a=r/255,o=n/255,s=pO(i),l=pO(a),u=pO(o);return .2126*s+.7152*l+.0722*u}function Gy(t,e=.179){return t.startsWith("var(")?!1:KSe(t)>e}function Ym({color:t,theme:e,colorScheme:r}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:r==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Gy(r==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:r==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Gy(r==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Gy(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[n,i]=t.split("."),a=i?Number(i):void 0,o=n in e.colors;if(o){const s=a!==void 0?e.colors[n][a]:e.colors[n][PC(e,r||"light")];return{color:n,value:s,shade:a,isThemeColor:o,isLight:Gy(s,e.luminanceThreshold),variable:i?`--mantine-color-${n}-${a}`:`--mantine-color-${n}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:Gy(t,e.luminanceThreshold),shade:a,variable:void 0}}function ff(t,e){const r=Ym({color:t||e.primaryColor,theme:e});return r.variable?`var(${r.variable})`:t}function Oz(t,e){const r={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)||e.defaultGradient.deg||0},n=ff(r.from,e),i=ff(r.to,e);return`linear-gradient(${r.deg}deg, ${n} 0%, ${i} 100%)`}function to(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r,g:n,b:i}=_4(t);return`rgba(${r}, ${n}, ${i}, ${e})`}const QSe=({color:t,theme:e,variant:r,gradient:n,autoContrast:i})=>{const a=Ym({color:t,theme:e}),o=typeof i=="boolean"?i:e.autoContrast;if(r==="filled"){const s=o&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:s,border:`${tt(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:s,border:`${tt(1)} solid transparent`}:{background:t,hover:bS(t,.1),color:s,border:`${tt(1)} solid transparent`}}if(r==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${tt(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:to(s,.1),hover:to(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${tt(1)} solid transparent`}}return{background:to(t,.1),hover:to(t,.12),color:t,border:`${tt(1)} solid transparent`}}if(r==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${tt(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:to(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${tt(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:to(t,.05),color:t,border:`${tt(1)} solid ${t}`};if(r==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${tt(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:"transparent",hover:to(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${tt(1)} solid transparent`}}return{background:"transparent",hover:to(t,.12),color:t,border:`${tt(1)} solid transparent`}}return r==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${tt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${tt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${tt(1)} solid transparent`}:r==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:bS(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${tt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bS(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${tt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bS(e.white,.01),color:t,border:`${tt(1)} solid transparent`}:r==="gradient"?{background:Oz(n,e),hover:Oz(n,e),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${tt(1)} solid var(--mantine-color-default-border)`}:{}},ZSe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Dz="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",C4={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:ZSe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:QSe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Dz,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Dz,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:tt(34),lineHeight:"1.3"},h2:{fontSize:tt(26),lineHeight:"1.35"},h3:{fontSize:tt(22),lineHeight:"1.4"},h4:{fontSize:tt(18),lineHeight:"1.45"},h5:{fontSize:tt(16),lineHeight:"1.5"},h6:{fontSize:tt(14),lineHeight:"1.5"}}},fontSizes:{xs:tt(12),sm:tt(14),md:tt(16),lg:tt(18),xl:tt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:tt(2),sm:tt(4),md:tt(8),lg:tt(16),xl:tt(32)},spacing:{xs:tt(10),sm:tt(12),md:tt(16),lg:tt(20),xl:tt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), 0 ${tt(1)} ${tt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(10)} ${tt(15)} ${tt(-5)}, rgba(0, 0, 0, 0.04) 0 ${tt(7)} ${tt(7)} ${tt(-5)}`,md:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(20)} ${tt(25)} ${tt(-5)}, rgba(0, 0, 0, 0.04) 0 ${tt(10)} ${tt(10)} ${tt(-5)}`,lg:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(28)} ${tt(23)} ${tt(-7)}, rgba(0, 0, 0, 0.04) 0 ${tt(12)} ${tt(12)} ${tt(-7)}`,xl:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(36)} ${tt(28)} ${tt(-7)}, rgba(0, 0, 0, 0.04) 0 ${tt(17)} ${tt(17)} ${tt(-7)}`},other:{},components:{}};function Pz(t){return t==="auto"||t==="dark"||t==="light"}function JSe({key:t="mantine-color-scheme-value"}={}){let e;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(t);return Pz(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(t,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{e=n=>{n.storageArea===window.localStorage&&n.key===t&&Pz(n.newValue)&&r(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const eEe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Lz="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function vO(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function Rz(t){if(!(t.primaryColor in t.colors))throw new Error(eEe);if(typeof t.primaryShade=="object"&&(!vO(t.primaryShade.dark)||!vO(t.primaryShade.light)))throw new Error(Lz);if(typeof t.primaryShade=="number"&&!vO(t.primaryShade))throw new Error(Lz)}function tEe(t,e){var n;if(!e)return Rz(t),t;const r=w4(t,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=e.fontFamily),Rz(r),r}const k4=ae.createContext(null),rEe=()=>ae.useContext(k4)||C4;function qm(){const t=ae.useContext(k4);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function qee({theme:t,children:e,inherit:r=!0}){const n=rEe(),i=ae.useMemo(()=>tEe(r?n:C4,t),[t,n,r]);return ee.createElement(k4.Provider,{value:i},e)}qee.displayName="@mantine/core/MantineThemeProvider";function nEe(){const t=qm(),e=E4(),r=lc(t.breakpoints).reduce((n,i)=>{const a=t.breakpoints[i].includes("px"),o=FSe(t.breakpoints[i]),s=a?`${o-.1}px`:Iz(o-.1),l=a?`${o}px`:Iz(o);return`${n}@media (max-width: ${s}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return ee.createElement("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:r}})}function gO(t){return Object.entries(t).map(([e,r])=>`${e}: ${r};`).join("")}function mO(t,e){return(Array.isArray(t)?t:[t]).reduce((n,i)=>`${i}{${n}}`,e)}function iEe(t,e){const r=gO(t.variables),n=r?mO(e,r):"",i=gO(t.dark),a=i?mO(`${e}[data-mantine-color-scheme="dark"]`,i):"",o=gO(t.light),s=o?mO(`${e}[data-mantine-color-scheme="light"]`,o):"";return`${n}${a}${s}`}function Kee({color:t,theme:e,autoContrast:r=!0}){return(typeof r=="boolean"?r:e.autoContrast)&&Ym({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Nz(t,e){return Kee({color:t.colors[t.primaryColor][PC(t,e)],theme:t,autoContrast:null})}function xg(t,e,r){lc(e).forEach(n=>Object.assign(t,{[`--mantine-${r}-${n}`]:e[n]}))}const Qee=t=>{const e=PC(t,"dark"),r=PC(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:tt(t.defaultRadius),i={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-color-scheme":"light dark","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Nz(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${r})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)"},dark:{"--mantine-primary-color-contrast":Nz(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)"}};xg(i.variables,t.breakpoints,"breakpoint"),xg(i.variables,t.spacing,"spacing"),xg(i.variables,t.fontSizes,"font-size"),xg(i.variables,t.lineHeights,"line-height"),xg(i.variables,t.shadows,"shadow"),xg(i.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((o,s)=>{i.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${t.primaryColor}-${s})`}),lc(t.colors).forEach(o=>{t.colors[o].forEach((u,c)=>{i.variables[`--mantine-color-${o}-${c}`]=u});const s=`var(--mantine-color-${o}-${r===9?8:r+1})`,l=`var(--mantine-color-${o}-${e===9?8:e+1})`;i.light["--mantine-color-dimmed"]="var(--mantine-color-gray-6)",i.light[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-filled)`,i.light[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-filled-hover`]=s,i.light[`--mantine-color-${o}-light`]=to(t.colors[o][r],.1),i.light[`--mantine-color-${o}-light-hover`]=to(t.colors[o][r],.12),i.light[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline-hover`]=to(t.colors[o][r],.05),i.dark["--mantine-color-dimmed"]="var(--mantine-color-dark-2)",i.dark[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-4)`,i.dark[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${e})`,i.dark[`--mantine-color-${o}-filled-hover`]=l,i.dark[`--mantine-color-${o}-light`]=to(t.colors[o][Math.max(0,e-2)],.15),i.dark[`--mantine-color-${o}-light-hover`]=to(t.colors[o][Math.max(0,e-2)],.2),i.dark[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${Math.max(e-5,0)})`,i.dark[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${Math.max(e-4,0)})`,i.dark[`--mantine-color-${o}-outline-hover`]=to(t.colors[o][Math.max(e-4,0)],.05)});const a=t.headings.sizes;return lc(a).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=a[o].fontSize,i.variables[`--mantine-${o}-line-height`]=a[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=a[o].fontWeight||t.headings.fontWeight}),i};function aEe({theme:t,generator:e}){const r=Qee(t),n=e==null?void 0:e(t);return n?w4(r,n):r}const yO=Qee(C4);function oEe(t){const e={variables:{},light:{},dark:{}};return lc(t.variables).forEach(r=>{yO.variables[r]!==t.variables[r]&&(e.variables[r]=t.variables[r])}),lc(t.light).forEach(r=>{yO.light[r]!==t.light[r]&&(e.light[r]=t.light[r])}),lc(t.dark).forEach(r=>{yO.dark[r]!==t.dark[r]&&(e.dark[r]=t.dark[r])}),e}function sEe(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Zee({cssVariablesSelector:t}){const e=qm(),r=E4(),n=USe(),i=aEe({theme:e,generator:n}),a=t===":root",o=a?oEe(i):i,s=iEe(o,t);return s?ee.createElement("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${s}${a?"":sEe(t)}`}}):null}Zee.displayName="@mantine/CssVariables";function lEe(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function Sg(t,e){var n;const r=t!=="auto"?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=e())==null||n.setAttribute("data-mantine-color-scheme",r)}function uEe({manager:t,defaultColorScheme:e,getRootElement:r,forceColorScheme:n}){const i=ae.useRef(),[a,o]=ae.useState(()=>t.get(e)),s=n||a,l=ae.useCallback(c=>{n||(Sg(c,r),o(c),t.set(c))},[t.set,s,n]),u=ae.useCallback(()=>{o(e),Sg(e,r),t.clear()},[t.clear,e]);return ae.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Q2(()=>{Sg(t.get(e),r)},[]),ae.useEffect(()=>{var f;if(n)return Sg(n,r),()=>{};n===void 0&&Sg(a,r),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=h=>{a==="auto"&&Sg(h.matches?"dark":"light",r)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var h;return(h=i.current)==null?void 0:h.removeEventListener("change",c)}},[a,n]),{colorScheme:s,setColorScheme:l,clearColorScheme:u}}function cEe({respectReducedMotion:t,getRootElement:e}){Q2(()=>{var r;t&&((r=e())==null||r.setAttribute("data-respect-reduced-motion","true"))},[t])}lEe();function Jee({theme:t,children:e,getStyleNonce:r,withCssVariables:n=!0,cssVariablesSelector:i=":root",classNamesPrefix:a="mantine",colorSchemeManager:o=JSe(),defaultColorScheme:s="light",getRootElement:l=()=>document.documentElement,cssVariablesResolver:u,forceColorScheme:c}){const{colorScheme:f,setColorScheme:h,clearColorScheme:d}=uEe({defaultColorScheme:s,forceColorScheme:c,manager:o,getRootElement:l});return cEe({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:l}),ee.createElement(Yee.Provider,{value:{colorSchemeManager:o,colorScheme:f,setColorScheme:h,clearColorScheme:d,getRootElement:l,classNamesPrefix:a,getStyleNonce:r,cssVariablesResolver:u,cssVariablesSelector:i}},ee.createElement(qee,{theme:t},n&&ee.createElement(Zee,{cssVariablesSelector:i}),ee.createElement(nEe,null),e))}Jee.displayName="@mantine/core/MantineProvider";const fEe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function hEe({theme:t,options:e,unstyled:r}){return bs((e==null?void 0:e.focusable)&&!r&&(t.focusClassName||fEe[t.focusRing]),(e==null?void 0:e.active)&&!r&&t.activeClassName)}function dEe({selector:t,stylesCtx:e,options:r,props:n,theme:i}){return x4({theme:i,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:e})[t]}function pEe({selector:t,stylesCtx:e,theme:r,classNames:n,props:i}){return x4({theme:r,classNames:n,props:i,stylesCtx:e})[t]}function vEe({rootSelector:t,selector:e,className:r}){return t===e?r:void 0}function gEe({selector:t,classes:e,unstyled:r}){return r?void 0:e[t]}function mEe({themeName:t,classNamesPrefix:e,selector:r,withStaticClass:n}){return n===!1?[]:t.map(i=>`${e}-${i}-${r}`)}function yEe({themeName:t,theme:e,selector:r,props:n,stylesCtx:i}){return t.map(a=>{var o,s;return(s=x4({theme:e,classNames:(o=e.components[a])==null?void 0:o.classNames,props:n,stylesCtx:i}))==null?void 0:s[r]})}function wEe({options:t,classes:e,selector:r,unstyled:n}){return t!=null&&t.variant&&!n?e[`${r}--${t.variant}`]:void 0}function bEe({theme:t,options:e,themeName:r,selector:n,classNamesPrefix:i,classNames:a,classes:o,unstyled:s,className:l,rootSelector:u,props:c,stylesCtx:f}){return bs(hEe({theme:t,options:e,unstyled:s}),yEe({theme:t,themeName:r,selector:n,props:c,stylesCtx:f}),wEe({options:e,classes:o,selector:n,unstyled:s}),pEe({selector:n,stylesCtx:f,theme:t,classNames:a,props:c}),dEe({selector:n,stylesCtx:f,options:e,props:c,theme:t}),vEe({rootSelector:u,selector:n,className:l}),gEe({selector:n,classes:o,unstyled:s}),mEe({themeName:r,classNamesPrefix:i,selector:n,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function xEe({theme:t,themeName:e,props:r,stylesCtx:n,selector:i}){return e.map(a=>{var o;return rL({theme:t,styles:(o=t.components[a])==null?void 0:o.styles,props:r,stylesCtx:n})[i]}).reduce((a,o)=>({...a,...o}),{})}function nL({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...nL({style:n,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function SEe(t){return t.reduce((e,r)=>(r&&Object.keys(r).forEach(n=>{e[n]={...e[n],...b4(r[n])}}),e),{})}function EEe({vars:t,varsResolver:e,theme:r,props:n,stylesCtx:i,selector:a,themeName:o}){var s;return(s=SEe([e==null?void 0:e(r,n,i),...o.map(l=>{var u,c,f;return(f=(c=(u=r.components)==null?void 0:u[l])==null?void 0:c.vars)==null?void 0:f.call(c,r,n,i)}),t==null?void 0:t(r,n,i)]))==null?void 0:s[a]}function _Ee({theme:t,themeName:e,selector:r,options:n,props:i,stylesCtx:a,rootSelector:o,styles:s,style:l,vars:u,varsResolver:c}){return{...xEe({theme:t,themeName:e,props:i,stylesCtx:a,selector:r}),...rL({theme:t,styles:s,props:i,stylesCtx:a})[r],...rL({theme:t,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||i,stylesCtx:a})[r],...EEe({theme:t,props:i,stylesCtx:a,vars:u,varsResolver:c,selector:r,themeName:e}),...o===r?nL({style:l,theme:t}):null,...nL({style:n==null?void 0:n.style,theme:t})}}function qn({name:t,classes:e,props:r,stylesCtx:n,className:i,style:a,rootSelector:o="root",unstyled:s,classNames:l,styles:u,vars:c,varsResolver:f}){const h=qm(),d=WSe(),p=(Array.isArray(t)?t:[t]).filter(v=>v);return(v,g)=>({className:bEe({theme:h,options:g,themeName:p,selector:v,classNamesPrefix:d,classNames:l,classes:e,unstyled:s,className:i,rootSelector:o,props:r,stylesCtx:n}),style:_Ee({theme:h,themeName:p,selector:v,options:g,props:r,stylesCtx:n,rootSelector:o,styles:u,style:a,vars:c,varsResolver:f})})}function CEe(t,e){return typeof t=="boolean"?t:e.autoContrast}function Lr(t,e,r){var o;const n=qm(),i=(o=n.components[t])==null?void 0:o.defaultProps,a=typeof i=="function"?i(n):i;return{...e,...a,...b4(r)}}function Fz(t){return lc(t).reduce((e,r)=>t[r]!==void 0?`${e}${RSe(r)}:${t[r]};`:e,"").trim()}function kEe({selector:t,styles:e,media:r}){const n=e?Fz(e):"",i=Array.isArray(r)?r.map(a=>`@media${a.query}{${t}{${Fz(a.styles)}}}`):[];return`${n?`${t}{${n}}`:""}${i.join("")}`.trim()}function MEe({selector:t,styles:e,media:r}){const n=E4();return ee.createElement("style",{"data-mantine-styles":"inline",nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:kEe({selector:t,styles:e,media:r})}})}function JM(t){const{m:e,mx:r,my:n,mt:i,mb:a,ml:o,mr:s,p:l,px:u,py:c,pt:f,pb:h,pl:d,pr:p,bg:v,c:g,opacity:m,ff:y,fz:w,fw:b,lts:x,ta:S,lh:E,fs:_,tt:k,td:C,w:A,miw:M,maw:T,h:O,mih:N,mah:R,bgsz:B,bgp:F,bgr:D,bga:L,pos:G,top:Y,left:Z,bottom:q,right:pe,inset:Se,display:Ae,flex:He,hiddenFrom:ct,visibleFrom:st,lightHidden:Mt,darkHidden:yt,...ar}=t;return{styleProps:b4({m:e,mx:r,my:n,mt:i,mb:a,ml:o,mr:s,p:l,px:u,py:c,pt:f,pb:h,pl:d,pr:p,bg:v,c:g,opacity:m,ff:y,fz:w,fw:b,lts:x,ta:S,lh:E,fs:_,tt:k,td:C,w:A,miw:M,maw:T,h:O,mih:N,mah:R,bgsz:B,bgp:F,bgr:D,bga:L,pos:G,top:Y,left:Z,bottom:q,right:pe,inset:Se,display:Ae,flex:He,hiddenFrom:ct,visibleFrom:st,lightHidden:Mt,darkHidden:yt}),rest:ar}}const AEe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function ete(t,e){const r=Ym({color:t,theme:e});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function TEe(t,e){const r=Ym({color:t,theme:e});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:ete(t,e)}const Bz={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)"};function IEe(t){return typeof t=="string"&&t in Bz?Bz[t]:t}function OEe(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="number"||typeof t=="string"?tt(t):t}function DEe(t){return t}function PEe(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:t}function LEe(t){return typeof t=="number"?tt(t):t}function REe(t,e){if(typeof t=="number")return tt(t);if(typeof t=="string"){const r=t.replace("-","");if(!(r in e.spacing))return tt(t);const n=`--mantine-spacing-${r}`;return t.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return t}const wO={color:ete,textColor:TEe,fontSize:OEe,spacing:REe,identity:DEe,size:LEe,lineHeight:PEe,fontFamily:IEe};function $z(t){return t.replace("(min-width: ","").replace("em)","")}function NEe({media:t,...e}){const n=Object.keys(t).sort((i,a)=>Number($z(i))-Number($z(a))).map(i=>({query:i,styles:t[i]}));return{...e,media:n}}function FEe(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function BEe(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function $Ee(t){return typeof t=="object"&&t!==null?lc(t).filter(e=>e!=="base"):[]}function zEe(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function jEe({styleProps:t,data:e,theme:r}){return NEe(lc(t).reduce((n,i)=>{if(i==="hiddenFrom"||i==="visibleFrom")return n;const a=e[i],o=Array.isArray(a.property)?a.property:[a.property],s=BEe(t[i]);if(!FEe(t[i]))return o.forEach(u=>{n.inlineStyles[u]=wO[a.type](s,r)}),n;n.hasResponsiveStyles=!0;const l=$Ee(t[i]);return o.forEach(u=>{s&&(n.styles[u]=wO[a.type](s,r)),l.forEach(c=>{const f=`(min-width: ${r.breakpoints[c]})`;n.media[f]={...n.media[f],[u]:wO[a.type](zEe(t[i],c),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function GEe(){return`__m__-${ae.useId().replace(/:/g,"")}`}function tte(t){return t.startsWith("data-")?t:`data-${t}`}function UEe(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return n===void 0||n===""||n===!1||n===null||(e[tte(r)]=t[r]),e},{})}function rte(t){return t?typeof t=="string"?{[tte(t)]:!0}:Array.isArray(t)?[...t].reduce((e,r)=>({...e,...rte(r)}),{}):UEe(t):null}function iL(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...iL(n,e)}),{}):typeof t=="function"?t(e):t??{}}function WEe({theme:t,style:e,vars:r,styleProps:n}){const i=iL(e,t),a=iL(r,t);return{...i,...a,...n}}const nte=ae.forwardRef(({component:t,style:e,__vars:r,className:n,variant:i,mod:a,size:o,hiddenFrom:s,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:f,...h},d)=>{const p=qm(),v=t||"div",{styleProps:g,rest:m}=JM(h),y=GEe(),w=jEe({styleProps:g,theme:p,data:AEe}),b={ref:d,style:WEe({theme:p,style:e,vars:r,styleProps:w.inlineStyles}),className:bs(n,{[y]:w.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":Vee(o)?void 0:o||void 0,...rte(a),...m};return ee.createElement(ee.Fragment,null,w.hasResponsiveStyles&&ee.createElement(MEe,{selector:`.${y}`,styles:w.styles,media:w.media}),typeof f=="function"?f(b):ee.createElement(v,{...b}))});nte.displayName="@mantine/core/Box";const Br=nte;function ite(t){return t}function xn(t){const e=ae.forwardRef(t);return e.extend=ite,e}function Id(t){const e=ae.forwardRef(t);return e.extend=ite,e}const VEe=ae.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function HEe(){return ae.useContext(VEe)}const[XEe,gl]=Z2("ScrollArea.Root component was not found in tree");function vm(t,e){const r=Sp(e);Q2(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}const YEe=ee.forwardRef((t,e)=>{const{style:r,...n}=t,i=gl(),[a,o]=ee.useState(0),[s,l]=ee.useState(0),u=!!(a&&s);return vm(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),vm(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?ee.createElement("div",{...n,ref:e,style:{...r,width:a,height:s}}):null}),qEe=ee.forwardRef((t,e)=>{const r=gl(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?ee.createElement(YEe,{...t,ref:e}):null}),KEe={scrollHideDelay:1e3,type:"hover"},ate=ae.forwardRef((t,e)=>{const r=Lr("ScrollAreaRoot",KEe,t),{type:n,scrollHideDelay:i,scrollbars:a,...o}=r,[s,l]=ae.useState(null),[u,c]=ae.useState(null),[f,h]=ae.useState(null),[d,p]=ae.useState(null),[v,g]=ae.useState(null),[m,y]=ae.useState(0),[w,b]=ae.useState(0),[x,S]=ae.useState(!1),[E,_]=ae.useState(!1),k=Mv(e,C=>l(C));return ee.createElement(XEe,{value:{type:n,scrollHideDelay:i,scrollArea:s,viewport:u,onViewportChange:c,content:f,onContentChange:h,scrollbarX:d,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:_,onCornerWidthChange:y,onCornerHeightChange:b}},ee.createElement(Br,{...o,ref:k,__vars:{"--sa-corner-width":a!=="xy"?"0px":`${m}px`,"--sa-corner-height":a!=="xy"?"0px":`${w}px`}}))});ate.displayName="@mantine/core/ScrollAreaRoot";function ote(t,e){const r=t/e;return Number.isNaN(r)?0:r}function eA(t){const e=ote(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function ste(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function QEe(t,[e,r]){return Math.min(r,Math.max(e,t))}function zz(t,e,r="ltr"){const n=eA(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,s=a-n,l=r==="ltr"?[0,o]:[o*-1,0],u=QEe(t,l);return ste([0,o],[0,s])(u)}function ZEe(t,e,r,n="ltr"){const i=eA(r),a=i/2,o=e||a,s=i-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-s,c=r.content-r.viewport,f=n==="ltr"?[0,c]:[c*-1,0];return ste([l,u],f)(t)}function lte(t,e){return t>0&&t<e}function LC(t){return t?parseInt(t,10):0}function Vp(t,e,{checkForDefaultPrevented:r=!0}={}){return n=>{t==null||t(n),(r===!1||!n.defaultPrevented)&&(e==null||e(n))}}const[JEe,ute]=Z2("ScrollAreaScrollbar was not found in tree"),cte=ae.forwardRef((t,e)=>{const{sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:s,onDragScroll:l,onWheelScroll:u,onResize:c,...f}=t,h=gl(),[d,p]=ee.useState(null),v=Mv(e,_=>p(_)),g=ee.useRef(null),m=ee.useRef(""),{viewport:y}=h,w=r.content-r.viewport,b=Sp(u),x=Sp(s),S=YM(c,10),E=_=>{if(g.current){const k=_.clientX-g.current.left,C=_.clientY-g.current.top;l({x:k,y:C})}};return ae.useEffect(()=>{const _=k=>{const C=k.target;(d==null?void 0:d.contains(C))&&b(k,w)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[y,d,w,b]),ae.useEffect(x,[r,x]),vm(d,S),vm(h.content,S),ee.createElement(JEe,{value:{scrollbar:d,hasThumb:n,onThumbChange:Sp(i),onThumbPointerUp:Sp(a),onThumbPositionChange:x,onThumbPointerDown:Sp(o)}},ee.createElement("div",{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:Vp(t.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),g.current=d.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E(_))}),onPointerMove:Vp(t.onPointerMove,E),onPointerUp:Vp(t.onPointerUp,_=>{const k=_.target;k.hasPointerCapture(_.pointerId)&&k.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=m.current,g.current=null})}))}),e_e=ae.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:i,...a}=t,o=gl(),[s,l]=ae.useState(),u=ae.useRef(null),c=Mv(e,u,o.onScrollbarXChange);return ae.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),ee.createElement(cte,{"data-orientation":"horizontal",...a,ref:c,sizes:r,style:{...i,"--sa-thumb-width":`${eA(r)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const d=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(d),lte(d,h)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&s&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:LC(s.paddingLeft),paddingEnd:LC(s.paddingRight)}})}})}),t_e=ae.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:i,...a}=t,o=gl(),[s,l]=ee.useState(),u=ae.useRef(null),c=Mv(e,u,o.onScrollbarYChange);return ae.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),ee.createElement(cte,{...a,"data-orientation":"vertical",ref:c,sizes:r,style:{"--sa-thumb-height":`${eA(r)}px`,...i},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const d=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(d),lte(d,h)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&s&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:LC(s.paddingTop),paddingEnd:LC(s.paddingBottom)}})}})}),M4=ae.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,{dir:i}=HEe(),a=gl(),o=ae.useRef(null),s=ae.useRef(0),[l,u]=ae.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ote(l.viewport,l.content),f={...n,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:d=>{o.current=d},onThumbPointerUp:()=>{s.current=0},onThumbPointerDown:d=>{s.current=d}},h=(d,p)=>ZEe(d,s.current,l,p);return r==="horizontal"?ee.createElement(e_e,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&o.current){const d=a.viewport.scrollLeft,p=zz(d,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollLeft=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollLeft=h(d,i))}}):r==="vertical"?ee.createElement(t_e,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&o.current){const d=a.viewport.scrollTop,p=zz(d,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollTop=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollTop=h(d))}}):null}),fte=ae.forwardRef((t,e)=>{const r=gl(),{forceMount:n,...i}=t,[a,o]=ae.useState(!1),s=t.orientation==="horizontal",l=YM(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,c=r.viewport.offsetHeight<r.viewport.scrollHeight;o(s?u:c)}},10);return vm(r.viewport,l),vm(r.content,l),n||a?ee.createElement(M4,{"data-state":a?"visible":"hidden",...i,ref:e}):null}),r_e=ae.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=gl(),[a,o]=ae.useState(!1);return ae.useEffect(()=>{const{scrollArea:s}=i;let l=0;if(s){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),r||a?ee.createElement(fte,{"data-state":a?"visible":"hidden",...n,ref:e}):null}),n_e=ae.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=gl(),a=t.orientation==="horizontal",[o,s]=ae.useState("hidden"),l=YM(()=>s("idle"),100);return ae.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>s("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),ae.useEffect(()=>{const{viewport:u}=i,c=a?"scrollLeft":"scrollTop";if(u){let f=u[c];const h=()=>{const d=u[c];f!==d&&(s("scrolling"),l()),f=d};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[i.viewport,a,l]),r||o!=="hidden"?ee.createElement(M4,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Vp(t.onPointerEnter,()=>s("interacting")),onPointerLeave:Vp(t.onPointerLeave,()=>s("idle"))}):null}),jz=ee.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=gl(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,s=t.orientation==="horizontal";return ee.useEffect(()=>(s?a(!0):o(!0),()=>{s?a(!1):o(!1)}),[s,a,o]),i.type==="hover"?ee.createElement(r_e,{...n,ref:e,forceMount:r}):i.type==="scroll"?ee.createElement(n_e,{...n,ref:e,forceMount:r}):i.type==="auto"?ee.createElement(fte,{...n,ref:e,forceMount:r}):i.type==="always"?ee.createElement(M4,{...n,ref:e}):null});function i_e(t,e=()=>{}){let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,s=r.top!==a.top;(o||s)&&e(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)}const a_e=ae.forwardRef((t,e)=>{const{style:r,...n}=t,i=gl(),a=ute(),{onThumbPositionChange:o}=a,s=Mv(e,c=>a.onThumbChange(c)),l=ae.useRef(),u=YM(()=>{l.current&&(l.current(),l.current=void 0)},100);return ae.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(u(),!l.current){const h=i_e(c,o);l.current=h,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,u,o]),ee.createElement("div",{"data-state":a.hasThumb?"visible":"hidden",...n,ref:s,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:Vp(t.onPointerDownCapture,c=>{const h=c.target.getBoundingClientRect(),d=c.clientX-h.left,p=c.clientY-h.top;a.onThumbPointerDown({x:d,y:p})}),onPointerUp:Vp(t.onPointerUp,a.onThumbPointerUp)})}),Gz=ee.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=ute();return r||i.hasThumb?ee.createElement(a_e,{ref:e,...n}):null}),hte=ae.forwardRef(({children:t,style:e,...r},n)=>{const i=gl(),a=Mv(n,i.onViewportChange);return ee.createElement(Br,{...r,ref:a,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e}},ee.createElement("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange},t))});hte.displayName="@mantine/core/ScrollAreaViewport";var A4={root:"m-d57069b5",viewport:"m-c0783ff9",viewportInner:"m-f8f631dd",scrollbar:"m-c44ba933",thumb:"m-d8b5e363",corner:"m-21657268"};const dte={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},o_e=(t,{scrollbarSize:e})=>({root:{"--scrollarea-scrollbar-size":tt(e)}}),J2=xn((t,e)=>{const r=Lr("ScrollArea",dte,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,scrollbarSize:l,vars:u,type:c,scrollHideDelay:f,viewportProps:h,viewportRef:d,onScrollPositionChange:p,children:v,offsetScrollbars:g,scrollbars:m,...y}=r,[w,b]=ae.useState(!1),x=qn({name:"ScrollArea",props:r,classes:A4,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:o_e});return ee.createElement(ate,{type:c==="never"?"always":c,scrollHideDelay:f,ref:e,scrollbars:m,...x("root"),...y},ee.createElement(hte,{...h,...x("viewport",{style:h==null?void 0:h.style}),ref:d,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":m||void 0,onScroll:typeof p=="function"?({currentTarget:S})=>p({x:S.scrollLeft,y:S.scrollTop}):void 0},v),(m==="xy"||m==="x")&&ee.createElement(jz,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},ee.createElement(Gz,{...x("thumb")})),(m==="xy"||m==="y")&&ee.createElement(jz,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},ee.createElement(Gz,{...x("thumb")})),ee.createElement(qEe,{...x("corner"),"data-hovered":w||void 0,"data-hidden":c==="never"||void 0}))});J2.displayName="@mantine/core/ScrollArea";const T4=xn((t,e)=>{const{children:r,classNames:n,styles:i,scrollbarSize:a,scrollHideDelay:o,type:s,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:p,scrollbars:v,style:g,vars:m,...y}=Lr("ScrollAreaAutosize",dte,t);return ee.createElement(Br,{...y,ref:e,style:[{display:"flex",overflow:"auto"},g]},ee.createElement(Br,{style:{display:"flex",flexDirection:"column",flex:1}},ee.createElement(J2,{classNames:n,styles:i,scrollHideDelay:o,scrollbarSize:a,type:s,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:p,vars:m,scrollbars:v},r)))});J2.classes=A4;T4.displayName="@mantine/core/ScrollAreaAutosize";T4.classes=A4;J2.Autosize=T4;var pte={root:"m-87cf2631"};const s_e={__staticSelector:"UnstyledButton"},eb=Id((t,e)=>{const r=Lr("UnstyledButton",s_e,t),{className:n,component:i="button",__staticSelector:a,unstyled:o,classNames:s,styles:l,style:u,...c}=r,f=qn({name:a,props:r,classes:pte,className:n,style:u,classNames:s,styles:l,unstyled:o});return ee.createElement(Br,{...f("root",{focusable:!0}),component:i,ref:e,type:i==="button"?"button":void 0,...c})});eb.classes=pte;eb.displayName="@mantine/core/UnstyledButton";var vte={root:"m-1b7284a3"};const l_e={},u_e=(t,{radius:e,shadow:r})=>({root:{"--paper-radius":e===void 0?void 0:Td(e),"--paper-shadow":Hee(r)}}),I4=Id((t,e)=>{const r=Lr("Paper",l_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,withBorder:l,vars:u,radius:c,shadow:f,variant:h,mod:d,...p}=r,v=qn({name:"Paper",props:r,classes:vte,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:u_e});return ee.createElement(Br,{ref:e,mod:[{"data-with-border":l},d],...v("root"),variant:h,...p})});I4.classes=vte;I4.displayName="@mantine/core/Paper";function gte({children:t,active:e=!0,refProp:r="ref"}){const n=jxe(e),i=Mv(n,t==null?void 0:t.ref);return BSe(t)?ae.cloneElement(t,{[r]:i}):t}gte.displayName="@mantine/core/FocusTrap";function c_e(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}const f_e={},mte=ae.forwardRef((t,e)=>{const{children:r,target:n,...i}=Lr("Portal",f_e,t),[a,o]=ae.useState(!1),s=ae.useRef(null);return Q2(()=>(o(!0),s.current=n?typeof n=="string"?document.querySelector(n):n:c_e(i),yee(e,s.current),!n&&s.current&&document.body.appendChild(s.current),()=>{!n&&s.current&&document.body.removeChild(s.current)}),[n]),!a||!s.current?null:lQ.createPortal(ee.createElement(ee.Fragment,null,r),s.current)});mte.displayName="@mantine/core/Portal";function yte({withinPortal:t=!0,children:e,...r}){return t?ee.createElement(mte,{...r},e):ee.createElement(ee.Fragment,null,e)}yte.displayName="@mantine/core/OptionalPortal";const Uy=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${tt(t==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),xS={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${tt(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${tt(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${tt(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${tt(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Uy("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Uy("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Uy("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Uy("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Uy("top"),common:{transformOrigin:"top right"}}},Uz={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function h_e({transition:t,state:e,duration:r,timingFunction:n}){const i={transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof t=="string"?t in xS?{transitionProperty:xS[t].transitionProperty,...i,...xS[t].common,...xS[t][Uz[e]]}:{}:{transitionProperty:t.transitionProperty,...i,...t.common,...t[Uz[e]]}}function d_e({duration:t,exitDuration:e,timingFunction:r,mounted:n,onEnter:i,onExit:a,onEntered:o,onExited:s}){const l=qm(),u=wee(),c=l.respectReducedMotion?u:!1,[f,h]=ae.useState(c?0:t),[d,p]=ae.useState(n?"entered":"exited"),v=ae.useRef(-1),g=m=>{const y=m?i:a,w=m?o:s;p(m?"pre-entering":"pre-exiting"),window.clearTimeout(v.current);const b=c?0:m?t:e;if(h(b),b===0)typeof y=="function"&&y(),typeof w=="function"&&w(),p(m?"entered":"exited");else{const x=window.setTimeout(()=>{typeof y=="function"&&y(),p(m?"entering":"exiting")},10);v.current=window.setTimeout(()=>{window.clearTimeout(x),typeof w=="function"&&w(),p(m?"entered":"exited")},b)}};return pee(()=>{g(n)},[n]),ae.useEffect(()=>()=>window.clearTimeout(v.current),[]),{transitionDuration:f,transitionStatus:d,transitionTimingFunction:r||"ease"}}function O4({keepMounted:t,transition:e="fade",duration:r=250,exitDuration:n=r,mounted:i,children:a,timingFunction:o="ease",onExit:s,onEntered:l,onEnter:u,onExited:c}){const{transitionDuration:f,transitionStatus:h,transitionTimingFunction:d}=d_e({mounted:i,exitDuration:n,duration:r,timingFunction:o,onExit:s,onEntered:l,onEnter:u,onExited:c});return f===0?i?ee.createElement(ee.Fragment,null,a({})):t?a({display:"none"}):null:h==="exited"?t?a({display:"none"}):null:ee.createElement(ee.Fragment,null,a(h_e({transition:e,duration:f,state:h,timingFunction:d})))}O4.displayName="@mantine/core/Transition";var Yl={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const p_e=ae.forwardRef(({className:t,...e},r)=>ee.createElement(Br,{component:"span",className:bs(Yl.barsLoader,t),...e,ref:r},ee.createElement("span",{className:Yl.bar}),ee.createElement("span",{className:Yl.bar}),ee.createElement("span",{className:Yl.bar}))),v_e=ae.forwardRef(({className:t,...e},r)=>ee.createElement(Br,{component:"span",className:bs(Yl.dotsLoader,t),...e,ref:r},ee.createElement("span",{className:Yl.dot}),ee.createElement("span",{className:Yl.dot}),ee.createElement("span",{className:Yl.dot}))),g_e=ae.forwardRef(({className:t,...e},r)=>ee.createElement(Br,{component:"span",className:bs(Yl.ovalLoader,t),...e,ref:r})),wte={bars:p_e,oval:g_e,dots:v_e},m_e={loaders:wte,type:"oval"},y_e=(t,{size:e,color:r})=>({root:{"--loader-size":uo(e,"loader-size"),"--loader-color":r?ff(r,t):void 0}}),tb=xn((t,e)=>{const r=Lr("Loader",m_e,t),{size:n,color:i,type:a,vars:o,className:s,style:l,classNames:u,styles:c,unstyled:f,loaders:h,variant:d,children:p,...v}=r,g=qn({name:"Loader",props:r,classes:Yl,className:s,style:l,classNames:u,styles:c,unstyled:f,vars:o,varsResolver:y_e});return p?ee.createElement(Br,{...g("root"),ref:e,...v},p):ee.createElement(Br,{...g("root"),ref:e,component:h[a],variant:d,size:n,...v})});tb.defaultLoaders=wte;tb.classes=Yl;tb.displayName="@mantine/core/Loader";var tA={root:"m-8d3f4000",loader:"m-302b9fb1",icon:"m-8d3afb97",group:"m-1a0f1b21"};const Wz={orientation:"horizontal"},w_e=(t,{borderWidth:e})=>({group:{"--ai-border-width":tt(e)}}),D4=xn((t,e)=>{const r=Lr("ActionIconGroup",Wz,t),{className:n,style:i,classNames:a,styles:o,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:h,...d}=Lr("ActionIconGroup",Wz,t),p=qn({name:"ActionIconGroup",props:r,classes:tA,className:n,style:i,classNames:a,styles:o,unstyled:s,vars:u,varsResolver:w_e,rootSelector:"group"});return ee.createElement(Br,{...p("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...d})});D4.classes=tA;D4.displayName="@mantine/core/ActionIconGroup";const b_e={},x_e=(t,{size:e,radius:r,variant:n,gradient:i,color:a,autoContrast:o})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:i,variant:n||"filled",autoContrast:o});return{root:{"--ai-size":uo(e,"ai-size"),"--ai-radius":r===void 0?void 0:Td(r),"--ai-bg":a||n?s.background:void 0,"--ai-hover":a||n?s.hover:void 0,"--ai-hover-color":a||n?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":a||n?s.border:void 0}}},cv=Id((t,e)=>{const r=Lr("ActionIcon",b_e,t),{className:n,unstyled:i,variant:a,classNames:o,styles:s,style:l,loading:u,loaderProps:c,size:f,color:h,radius:d,__staticSelector:p,gradient:v,vars:g,children:m,disabled:y,"data-disabled":w,autoContrast:b,mod:x,...S}=r,E=qn({name:["ActionIcon",p],props:r,className:n,style:l,classes:tA,classNames:o,styles:s,unstyled:i,vars:g,varsResolver:x_e});return ee.createElement(eb,{...E("root",{active:!y&&!u&&!w}),...S,unstyled:i,variant:a,size:f,disabled:y||u,ref:e,mod:[{loading:u,disabled:y||w},x]},ee.createElement(Br,{component:"span",...E("loader"),"aria-hidden":!0},ee.createElement(tb,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})),ee.createElement(Br,{component:"span",mod:{loading:u},...E("icon")},m))});cv.classes=tA;cv.displayName="@mantine/core/ActionIcon";cv.Group=D4;const bte=ae.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...r},n)=>ee.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:n,...r},ee.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})));bte.displayName="@mantine/core/CloseIcon";var xte={root:"m-86a44da5","root--subtle":"m-220c80f2"};const S_e={variant:"subtle"},E_e=(t,{size:e,radius:r,iconSize:n})=>({root:{"--cb-size":uo(e,"cb-size"),"--cb-radius":r===void 0?void 0:Td(r),"--cb-icon-size":tt(n)}}),P4=Id((t,e)=>{const r=Lr("CloseButton",S_e,t),{iconSize:n,children:i,vars:a,radius:o,className:s,classNames:l,style:u,styles:c,unstyled:f,"data-disabled":h,disabled:d,variant:p,icon:v,mod:g,...m}=r,y=qn({name:"CloseButton",props:r,className:s,style:u,classes:xte,classNames:l,styles:c,unstyled:f,vars:a,varsResolver:E_e});return ee.createElement(eb,{ref:e,...m,unstyled:f,variant:p,disabled:d,mod:[{disabled:d||h},g],...y("root",{variant:p,active:!0})},v||ee.createElement(bte,null),i)});P4.classes=xte;P4.displayName="@mantine/core/CloseButton";var Ste={root:"m-9814e45f"};const __e={zIndex:ZM("modal")},C_e=(t,{gradient:e,color:r,backgroundOpacity:n,blur:i,radius:a,zIndex:o})=>({root:{"--overlay-bg":e||(r!==void 0||n!==void 0)&&to(r||"#000",n??.6)||void 0,"--overlay-filter":i?`blur(${tt(i)})`:void 0,"--overlay-radius":a===void 0?void 0:Td(a),"--overlay-z-index":o==null?void 0:o.toString()}}),L4=Id((t,e)=>{const r=Lr("Overlay",__e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,fixed:u,center:c,children:f,radius:h,zIndex:d,gradient:p,blur:v,color:g,backgroundOpacity:m,mod:y,...w}=r,b=qn({name:"Overlay",props:r,classes:Ste,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:C_e});return ee.createElement(Br,{ref:e,...b("root"),mod:[{center:c,fixed:u},y],...w},f)});L4.classes=Ste;L4.displayName="@mantine/core/Overlay";const[k_e,Af]=Z2("ModalBase component was not found in tree");function M_e({opened:t,transitionDuration:e}){const[r,n]=ae.useState(t),i=ae.useRef(),o=wee()?0:e;return ae.useEffect(()=>(t?(n(!0),window.clearTimeout(i.current)):o===0?n(!1):i.current=window.setTimeout(()=>n(!1),o),()=>window.clearTimeout(i.current)),[t,o]),r}function A_e({id:t,transitionProps:e,opened:r,trapFocus:n,closeOnEscape:i,onClose:a,returnFocus:o}){const s=m4(t),[l,u]=ae.useState(!1),[c,f]=ae.useState(!1),h=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,d=M_e({opened:r,transitionDuration:h});return Wxe("keydown",p=>{!n&&p.key==="Escape"&&i&&a()}),Lxe({opened:r,shouldReturnFocus:n&&o}),{_id:s,titleMounted:l,bodyMounted:c,shouldLockScroll:d,setTitleMounted:u,setBodyMounted:f}}const T_e=ae.forwardRef(({keepMounted:t,opened:e,onClose:r,id:n,transitionProps:i,trapFocus:a,closeOnEscape:o,returnFocus:s,closeOnClickOutside:l,withinPortal:u,portalProps:c,lockScroll:f,children:h,zIndex:d,shadow:p,padding:v,__vars:g,unstyled:m,removeScrollProps:y,...w},b)=>{const{_id:x,titleMounted:S,bodyMounted:E,shouldLockScroll:_,setTitleMounted:k,setBodyMounted:C}=A_e({id:n,transitionProps:i,opened:e,trapFocus:a,closeOnEscape:o,onClose:r,returnFocus:s});return ee.createElement(yte,{...c,withinPortal:u},ee.createElement(k_e,{value:{opened:e,onClose:r,closeOnClickOutside:l,transitionProps:{...i,keepMounted:t},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:S,bodyMounted:E,setTitleMounted:k,setBodyMounted:C,trapFocus:a,closeOnEscape:o,zIndex:d,unstyled:m}},ee.createElement(LSe,{enabled:_&&f,...y},ee.createElement(Br,{ref:b,...w,__vars:{...g,"--mb-z-index":(d||ZM("modal")).toString(),"--mb-shadow":Hee(p),"--mb-padding":tL(v)}},h))))});function I_e(){const t=Af();return ae.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var gm={title:"m-615af6c9",header:"m-b5489c3c",inner:"m-60c222c7",content:"m-fd1ab0aa",close:"m-606cb269",body:"m-5df29311"};const Ete=ae.forwardRef(({className:t,...e},r)=>{const n=I_e(),i=Af();return ee.createElement(Br,{ref:r,...e,id:n,className:bs({[gm.body]:!i.unstyled},t)})});Ete.displayName="@mantine/core/ModalBaseBody";const _te=ae.forwardRef(({className:t,onClick:e,...r},n)=>{const i=Af();return ee.createElement(P4,{ref:n,...r,onClick:a=>{i.onClose(),e==null||e(a)},className:bs({[gm.close]:!i.unstyled},t),unstyled:i.unstyled})});_te.displayName="@mantine/core/ModalBaseCloseButton";const O_e=ae.forwardRef(({transitionProps:t,className:e,innerProps:r,onKeyDown:n,style:i,...a},o)=>{const s=Af(),l=u=>{var f;((f=u.target)==null?void 0:f.getAttribute("data-mantine-stop-propagation"))!=="true"&&u.key==="Escape"&&s.closeOnEscape&&s.onClose(),n==null||n(u)};return ee.createElement(O4,{mounted:s.opened,transition:"pop",...s.transitionProps,...t},u=>ee.createElement("div",{...r,className:bs({[gm.inner]:!s.unstyled},r.className)},ee.createElement(gte,{active:s.opened&&s.trapFocus},ee.createElement(I4,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":s.bodyMounted?s.getBodyId():void 0,"aria-labelledby":s.titleMounted?s.getTitleId():void 0,onKeyDown:l,ref:o,style:[i,u],className:bs({[gm.content]:!s.unstyled},e),unstyled:s.unstyled},a.children))))}),Cte=ae.forwardRef(({className:t,...e},r)=>{const n=Af();return ee.createElement(Br,{component:"header",ref:r,className:bs({[gm.header]:!n.unstyled},t),...e})});Cte.displayName="@mantine/core/ModalBaseHeader";const D_e={duration:200,timingFunction:"ease",transition:"fade"};function P_e(t){const e=Af();return{...D_e,...e.transitionProps,...t}}const kte=ae.forwardRef(({onClick:t,transitionProps:e,style:r,...n},i)=>{const a=Af(),o=P_e(e);return ee.createElement(O4,{mounted:a.opened,...o,transition:"fade"},s=>ee.createElement(L4,{ref:i,fixed:!0,style:[r,s],zIndex:a.zIndex,unstyled:a.unstyled,onClick:l=>{t==null||t(l),a.closeOnClickOutside&&a.onClose()},...n}))});kte.displayName="@mantine/core/ModalBaseOverlay";function L_e(){const t=Af();return ae.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const Mte=ae.forwardRef(({className:t,...e},r)=>{const n=L_e(),i=Af();return ee.createElement(Br,{component:"h2",ref:r,className:bs({[gm.title]:!i.unstyled},t),...e,id:n})});Mte.displayName="@mantine/core/ModalBaseTitle";function R_e({children:t}){return ee.createElement(ee.Fragment,null,t)}const[N_e,rb]=$Se({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ml={wrapper:"m-6c018570",input:"m-8fb7ebe7",section:"m-82577fc2",placeholder:"m-88bacfd0",root:"m-46b77525",label:"m-8fdc1311",required:"m-78a94662",error:"m-8f816625",description:"m-fe47ce59"};const Vz={},F_e=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${uc(e)} - ${tt(2)})`}}),rA=xn((t,e)=>{const r=Lr("InputDescription",Vz,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,__staticSelector:c,__inheritStyles:f=!0,variant:h,...d}=Lr("InputDescription",Vz,r),p=rb(),v=qn({name:["InputWrapper",c],props:r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"description",vars:l,varsResolver:F_e}),g=f&&(p==null?void 0:p.getStyles)||v;return ee.createElement(Br,{component:"p",ref:e,variant:h,size:u,...g("description"),...d})});rA.classes=ml;rA.displayName="@mantine/core/InputDescription";const B_e={},$_e=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${uc(e)} - ${tt(2)})`}}),nA=xn((t,e)=>{const r=Lr("InputError",B_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,__staticSelector:c,__inheritStyles:f=!0,variant:h,...d}=r,p=qn({name:["InputWrapper",c],props:r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"error",vars:l,varsResolver:$_e}),v=rb(),g=f&&(v==null?void 0:v.getStyles)||p;return ee.createElement(Br,{component:"p",ref:e,variant:h,size:u,...g("error"),...d})});nA.classes=ml;nA.displayName="@mantine/core/InputError";const Hz={labelElement:"label"},z_e=(t,{size:e})=>({label:{"--input-label-size":uc(e),"--input-asterisk-color":void 0}}),iA=xn((t,e)=>{const r=Lr("InputLabel",Hz,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,labelElement:u,size:c,required:f,htmlFor:h,onMouseDown:d,children:p,__staticSelector:v,variant:g,mod:m,...y}=Lr("InputLabel",Hz,r),w=qn({name:["InputWrapper",v],props:r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"label",vars:l,varsResolver:z_e}),b=rb(),x=(b==null?void 0:b.getStyles)||w;return ee.createElement(Br,{...x("label"),component:u,variant:g,size:c,ref:e,htmlFor:u==="label"?h:void 0,mod:[{required:f},m],onMouseDown:S=>{d==null||d(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...y},p,f&&ee.createElement("span",{...x("required"),"aria-hidden":!0}," *"))});iA.classes=ml;iA.displayName="@mantine/core/InputLabel";const Xz={},R4=xn((t,e)=>{const r=Lr("InputPlaceholder",Xz,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,__staticSelector:u,variant:c,error:f,mod:h,...d}=Lr("InputPlaceholder",Xz,r),p=qn({name:["InputPlaceholder",u],props:r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"placeholder"});return ee.createElement(Br,{...p("placeholder"),mod:[{error:!!f},h],component:"span",variant:c,ref:e,...d})});R4.classes=ml;R4.displayName="@mantine/core/InputPlaceholder";function j_e(t,{hasDescription:e,hasError:r}){const n=t.findIndex(l=>l==="input"),i=t[n-1],a=t[n+1];return{offsetBottom:e&&a==="description"||r&&a==="error",offsetTop:e&&i==="description"||r&&i==="error"}}const G_e={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},U_e=(t,{size:e})=>({label:{"--input-label-size":uc(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${uc(e)} - ${tt(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${uc(e)} - ${tt(2)})`}}),N4=xn((t,e)=>{const r=Lr("InputWrapper",G_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,variant:c,__staticSelector:f,inputContainer:h,inputWrapperOrder:d,label:p,error:v,description:g,labelProps:m,descriptionProps:y,errorProps:w,labelElement:b,children:x,withAsterisk:S,id:E,required:_,__stylesApiProps:k,mod:C,...A}=r,M=qn({name:["InputWrapper",f],props:k||r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:U_e}),T={size:u,variant:c,__staticSelector:f},O=m4(E),N=typeof S=="boolean"?S:_,R=(w==null?void 0:w.id)||`${O}-error`,B=(y==null?void 0:y.id)||`${O}-description`,F=O,D=!!v&&typeof v!="boolean",L=!!g,G=`${D?R:""} ${L?B:""}`,Y=G.trim().length>0?G.trim():void 0,Z=(m==null?void 0:m.id)||`${O}-label`,q=p&&ee.createElement(iA,{key:"label",labelElement:b,id:Z,htmlFor:F,required:N,...T,...m},p),pe=L&&ee.createElement(rA,{key:"description",...y,...T,size:(y==null?void 0:y.size)||T.size,id:(y==null?void 0:y.id)||B},g),Se=ee.createElement(ee.Fragment,{key:"input"},h(x)),Ae=D&&ee.createElement(nA,{...w,...T,size:(w==null?void 0:w.size)||T.size,key:"error",id:(w==null?void 0:w.id)||R},v),He=d.map(ct=>{switch(ct){case"label":return q;case"input":return Se;case"description":return pe;case"error":return Ae;default:return null}});return ee.createElement(N_e,{value:{getStyles:M,describedBy:Y,inputId:F,labelId:Z,...j_e(d,{hasDescription:L,hasError:D})}},ee.createElement(Br,{ref:e,variant:c,size:u,mod:[{error:!!v},C],...M("root"),...A},He))});N4.classes=ml;N4.displayName="@mantine/core/InputWrapper";const W_e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},V_e=(t,e,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":uo(e.size,"input-height"),"--input-fz":uc(e.size),"--input-radius":e.radius===void 0?void 0:Td(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?tt(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?tt(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?uo(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),co=Id((t,e)=>{const r=Lr("Input",W_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,required:l,__staticSelector:u,__stylesApiProps:c,size:f,wrapperProps:h,error:d,disabled:p,leftSection:v,leftSectionProps:g,leftSectionWidth:m,rightSection:y,rightSectionProps:w,rightSectionWidth:b,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:E,vars:_,pointer:k,multiline:C,radius:A,id:M,withAria:T,withErrorStyles:O,mod:N,...R}=r,{styleProps:B,rest:F}=JM(R),D=rb(),L={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},G=qn({name:["Input",u],props:c||r,classes:ml,className:i,style:a,classNames:n,styles:o,unstyled:s,stylesCtx:L,rootSelector:"wrapper",vars:_,varsResolver:V_e}),Y=T?{required:l,disabled:p,"aria-invalid":!!d,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||M}:{};return ee.createElement(Br,{...G("wrapper"),...B,...h,mod:[{error:!!d&&O,pointer:k,disabled:p,multiline:C,"data-with-right-section":!!y,"data-with-left-section":!!v},N],variant:E,size:f},v&&ee.createElement("div",{...g,"data-position":"left",...G("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style})},v),ee.createElement(Br,{component:"input",...F,...Y,ref:e,required:l,mod:{disabled:p,error:!!d&&O},variant:E,...G("input")}),y&&ee.createElement("div",{...w,"data-position":"right",...G("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style})},y))});co.classes=ml;co.Wrapper=N4;co.Label=iA;co.Error=nA;co.Description=rA;co.Placeholder=R4;co.displayName="@mantine/core/Input";function H_e(t,e,r){const n=Lr(t,e,r),{label:i,description:a,error:o,required:s,classNames:l,styles:u,className:c,unstyled:f,__staticSelector:h,__stylesApiProps:d,errorProps:p,labelProps:v,descriptionProps:g,wrapperProps:m,id:y,size:w,style:b,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:_,vars:k,mod:C,...A}=n,{styleProps:M,rest:T}=JM(A),O={label:i,description:a,error:o,required:s,classNames:l,className:c,__staticSelector:h,__stylesApiProps:d||n,errorProps:p,labelProps:v,descriptionProps:g,unstyled:f,styles:u,size:w,style:b,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:_,id:y,mod:C,...m};return{...T,classNames:l,styles:u,unstyled:f,wrapperProps:{...O,...M},inputProps:{required:s,classNames:l,styles:u,unstyled:f,size:w,__staticSelector:h,__stylesApiProps:d||n,error:o,variant:_,id:y}}}const X_e={__staticSelector:"InputBase",withAria:!0},aA=Id((t,e)=>{const{inputProps:r,wrapperProps:n,...i}=H_e("InputBase",X_e,t);return ee.createElement(co.Wrapper,{...n},ee.createElement(co,{...r,...i,ref:e}))});aA.classes={...co.classes,...co.Wrapper.classes};aA.displayName="@mantine/core/InputBase";var Ate={root:"m-5f75b09e",body:"m-5f6e695e",labelWrapper:"m-d3ea56bb",label:"m-8ee546b8",description:"m-328f68c0",error:"m-8e8a99cc"};const Y_e=Ate,Tte=ae.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:r,classNames:n,styles:i,unstyled:a,children:o,label:s,description:l,id:u,disabled:c,error:f,size:h,labelPosition:d="left",variant:p,style:v,vars:g,mod:m,...y},w)=>{const b=qn({name:t,props:e,className:r,style:v,classes:Ate,classNames:n,styles:i,unstyled:a});return ee.createElement(Br,{...b("root"),ref:w,__vars:{"--label-fz":uc(h),"--label-lh":uo(h,"label-lh")},mod:[{"label-position":d},m],variant:p,size:h,...y},ee.createElement("div",{...b("body")},o,ee.createElement("div",{...b("labelWrapper"),"data-disabled":c||void 0},s&&ee.createElement("label",{...b("label"),"data-disabled":c||void 0,htmlFor:u},s),l&&ee.createElement(co.Description,{size:h,__inheritStyles:!1,...b("description")},l),f&&f!=="boolean"&&ee.createElement(co.Error,{size:h,__inheritStyles:!1,...b("error")},f))))});Tte.displayName="@mantine/core/InlineInput";const Ite=ae.createContext(null),q_e=Ite.Provider,K_e=()=>ae.useContext(Ite);function Q_e({children:t,role:e}){const r=rb();return r?ee.createElement("div",{role:e,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy},t):ee.createElement(ee.Fragment,null,t)}const Z_e={},F4=xn((t,e)=>{const{value:r,defaultValue:n,onChange:i,size:a,wrapperProps:o,children:s,readOnly:l,...u}=Lr("CheckboxGroup",Z_e,t),[c,f]=Hxe({value:r,defaultValue:n,finalValue:[],onChange:i}),h=d=>{const p=d.currentTarget.value;!l&&f(c.includes(p)?c.filter(v=>v!==p):[...c,p])};return ee.createElement(q_e,{value:{value:c,onChange:h,size:a}},ee.createElement(co.Wrapper,{size:a,ref:e,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup"},ee.createElement(Q_e,{role:"group"},s)))});F4.classes=co.Wrapper.classes;F4.displayName="@mantine/core/CheckboxGroup";function J_e({size:t,style:e,...r}){const n=t!==void 0?{width:tt(t),height:tt(t),...e}:e;return ee.createElement("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r},ee.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function eCe({indeterminate:t,...e}){return t?ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...e},ee.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):ee.createElement(J_e,{...e})}var Ote={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const tCe={labelPosition:"right",icon:eCe},rCe=(t,{radius:e,color:r,size:n,iconColor:i,variant:a,autoContrast:o})=>{const s=Ym({color:r||t.primaryColor,theme:t}),l=s.isThemeColor&&s.shade===void 0?`var(--mantine-color-${s.color}-outline)`:s.color;return{root:{"--checkbox-size":uo(n,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:Td(e),"--checkbox-color":a==="outline"?l:ff(r,t),"--checkbox-icon-color":i?ff(i,t):CEe(o,t)?Kee({color:r,theme:t}):void 0}}},oA=xn((t,e)=>{const r=Lr("Checkbox",tCe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,color:u,label:c,id:f,size:h,radius:d,wrapperProps:p,children:v,checked:g,labelPosition:m,description:y,error:w,disabled:b,variant:x,indeterminate:S,icon:E,rootRef:_,iconColor:k,onChange:C,autoContrast:A,mod:M,...T}=r,O=K_e(),N=h||(O==null?void 0:O.size),R=E,B=qn({name:"Checkbox",props:r,classes:Ote,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:rCe}),{styleProps:F,rest:D}=JM(T),L=m4(f),G=O?{checked:O.value.includes(D.value),onChange:Y=>{O.onChange(Y),C==null||C(Y)}}:{};return ee.createElement(Tte,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:L,size:N,labelPosition:m,label:c,description:y,error:w,disabled:b,classNames:n,styles:o,unstyled:s,"data-checked":G.checked||g||void 0,variant:x,ref:_,mod:M,...F,...p},ee.createElement(Br,{...B("inner"),mod:{"data-label-position":m}},ee.createElement(Br,{component:"input",id:L,ref:e,checked:g,disabled:b,mod:{error:!!w,indeterminate:S},...B("input",{focusable:!0,variant:x}),onChange:C,...D,...G,type:"checkbox"}),ee.createElement(R,{indeterminate:S,...B("icon")})))});oA.classes={...Ote,...Y_e};oA.displayName="@mantine/core/Checkbox";oA.Group=F4;var sA={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const Yz={orientation:"horizontal"},nCe=(t,{borderWidth:e})=>({group:{"--button-border-width":tt(e)}}),B4=xn((t,e)=>{const r=Lr("ButtonGroup",Yz,t),{className:n,style:i,classNames:a,styles:o,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:h,...d}=Lr("ButtonGroup",Yz,t),p=qn({name:"ButtonGroup",props:r,classes:sA,className:n,style:i,classNames:a,styles:o,unstyled:s,vars:u,varsResolver:nCe,rootSelector:"group"});return ee.createElement(Br,{...p("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...d})});B4.classes=sA;B4.displayName="@mantine/core/ButtonGroup";const iCe={},aCe=(t,{radius:e,color:r,gradient:n,variant:i,size:a,justify:o,autoContrast:s})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:i||"filled",autoContrast:s});return{root:{"--button-justify":o,"--button-height":uo(a,"button-height"),"--button-padding-x":uo(a,"button-padding-x"),"--button-fz":a!=null&&a.includes("compact")?uc(a.replace("compact-","")):uc(a),"--button-radius":e===void 0?void 0:Td(e),"--button-bg":r||i?l.background:void 0,"--button-hover":r||i?l.hover:void 0,"--button-color":l.color,"--button-bd":r||i?l.border:void 0,"--button-hover-color":r||i?l.hoverColor:void 0}}},Hu=Id((t,e)=>{const r=Lr("Button",iCe,t),{style:n,vars:i,className:a,color:o,disabled:s,children:l,leftSection:u,rightSection:c,fullWidth:f,variant:h,radius:d,loading:p,loaderProps:v,gradient:g,classNames:m,styles:y,unstyled:w,"data-disabled":b,autoContrast:x,mod:S,...E}=r,_=qn({name:"Button",props:r,classes:sA,className:a,style:n,classNames:m,styles:y,unstyled:w,vars:i,varsResolver:aCe}),k=!!u,C=!!c;return ee.createElement(eb,{ref:e,..._("root",{active:!s&&!p&&!b}),unstyled:w,variant:h,disabled:s||p,mod:[{disabled:s||b,loading:p,block:f,"with-left-section":k,"with-right-section":C},S],...E},ee.createElement(Br,{component:"span",..._("loader"),"aria-hidden":!0},ee.createElement(tb,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...v})),ee.createElement("span",{..._("inner")},u&&ee.createElement(Br,{component:"span",..._("section"),mod:{position:"left"}},u),ee.createElement(Br,{component:"span",mod:{loading:p},..._("label")},l),c&&ee.createElement(Br,{component:"span",..._("section"),mod:{position:"right"}},c)))});Hu.classes=sA;Hu.displayName="@mantine/core/Button";Hu.Group=B4;var Dte={root:"m-3eebeb36",label:"m-9e365f20"};const oCe={orientation:"horizontal"},sCe=(t,{color:e,variant:r,size:n})=>({root:{"--divider-color":e?ff(e,t):void 0,"--divider-border-style":r,"--divider-size":uo(n,"divider-size")}}),$4=xn((t,e)=>{const r=Lr("Divider",oCe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,color:u,orientation:c,label:f,labelPosition:h,mod:d,...p}=r,v=qn({name:"Divider",classes:Dte,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:sCe});return ee.createElement(Br,{ref:e,mod:[{orientation:c,"with-label":!!f},d],...v("root"),...p,role:"separator"},f&&ee.createElement(Br,{component:"span",mod:{position:h},...v("label")},f))});$4.classes=Dte;$4.displayName="@mantine/core/Divider";const[lCe,Km]=Z2("Modal component was not found in tree");var Tf={root:"m-9df02822",content:"m-54c44539",inner:"m-1f958f16",header:"m-d0e2b9cd"};const uCe={},lA=xn((t,e)=>{const r=Lr("ModalBody",uCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=Km();return ee.createElement(Ete,{ref:e,...u.getStyles("body",{classNames:n,style:a,styles:o,className:i}),...l})});lA.classes=Tf;lA.displayName="@mantine/core/ModalBody";const cCe={},uA=xn((t,e)=>{const r=Lr("ModalCloseButton",cCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=Km();return ee.createElement(_te,{ref:e,...u.getStyles("close",{classNames:n,style:a,styles:o,className:i}),...l})});uA.classes=Tf;uA.displayName="@mantine/core/ModalCloseButton";const fCe={},cA=xn((t,e)=>{const r=Lr("ModalContent",fCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,children:l,...u}=r,c=Km(),f=c.scrollAreaComponent||R_e;return ee.createElement(O_e,{...c.getStyles("content",{className:i,style:a,styles:o,classNames:n}),innerProps:c.getStyles("inner",{className:i,style:a,styles:o,classNames:n}),"data-full-screen":c.fullScreen||void 0,ref:e,...u},ee.createElement(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${tt(c.yOffset)} * 2))`}},l))});cA.classes=Tf;cA.displayName="@mantine/core/ModalContent";const hCe={},fA=xn((t,e)=>{const r=Lr("ModalHeader",hCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=Km();return ee.createElement(Cte,{ref:e,...u.getStyles("header",{classNames:n,style:a,styles:o,className:i}),...l})});fA.classes=Tf;fA.displayName="@mantine/core/ModalHeader";const dCe={},hA=xn((t,e)=>{const r=Lr("ModalOverlay",dCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=Km();return ee.createElement(kte,{ref:e,...u.getStyles("overlay",{classNames:n,style:a,styles:o,className:i}),...l})});hA.classes=Tf;hA.displayName="@mantine/core/ModalOverlay";const pCe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ZM("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},vCe=(t,{radius:e,size:r,yOffset:n,xOffset:i})=>({root:{"--modal-radius":e===void 0?void 0:Td(e),"--modal-size":uo(r,"modal-size"),"--modal-y-offset":tt(n),"--modal-x-offset":tt(i)}}),dA=xn((t,e)=>{const r=Lr("ModalRoot",pCe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,yOffset:u,scrollAreaComponent:c,radius:f,fullScreen:h,centered:d,xOffset:p,__staticSelector:v,...g}=r,m=qn({name:v,classes:Tf,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:vCe});return ee.createElement(lCe,{value:{yOffset:u,scrollAreaComponent:c,getStyles:m,fullScreen:h}},ee.createElement(T_e,{ref:e,...m("root"),"data-full-screen":h||void 0,"data-centered":d||void 0,unstyled:s,...g}))});dA.classes=Tf;dA.displayName="@mantine/core/ModalRoot";const gCe={},pA=xn((t,e)=>{const r=Lr("ModalTitle",gCe,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=Km();return ee.createElement(Mte,{ref:e,...u.getStyles("title",{classNames:n,style:a,styles:o,className:i}),...l})});pA.classes=Tf;pA.displayName="@mantine/core/ModalTitle";const mCe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ZM("modal"),transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0},xs=xn((t,e)=>{const{title:r,withOverlay:n,overlayProps:i,withCloseButton:a,closeButtonProps:o,children:s,radius:l,...u}=Lr("Modal",mCe,t),c=!!r||a;return ee.createElement(dA,{ref:e,radius:l,...u},n&&ee.createElement(hA,{...i}),ee.createElement(cA,{radius:l},c&&ee.createElement(fA,null,r&&ee.createElement(pA,null,r),a&&ee.createElement(uA,{...o})),ee.createElement(lA,null,s)))});xs.classes=Tf;xs.displayName="@mantine/core/Modal";xs.Root=dA;xs.Overlay=hA;xs.Content=cA;xs.Body=lA;xs.Header=fA;xs.Title=pA;xs.CloseButton=uA;const[yCe,wCe]=Z2("Table component was not found in the tree");var nb={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function bCe(t,e){if(!e)return;const r={};return e.columnBorder&&t.withColumnBorders&&(r["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(r["data-with-row-border"]=!0),e.striped&&t.striped&&(r["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(r["data-hover"]=!0),e.captionSide&&t.captionSide&&(r["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(r["data-sticky"]=!0),r}function Av(t,e){const r=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,n=xn((i,a)=>{const o=Lr(r,{},i),{classNames:s,className:l,style:u,styles:c,...f}=o,h=wCe();return ee.createElement(Br,{component:t,ref:a,...bCe(h,e),...h.getStyles(t,{className:l,classNames:s,style:u,styles:c,props:o}),...f})});return n.displayName=`@mantine/core/${r}`,n.classes=nb,n}const aL=Av("th",{columnBorder:!0}),Pte=Av("td",{columnBorder:!0}),s_=Av("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Lte=Av("thead",{stickyHeader:!0}),Rte=Av("tbody"),Nte=Av("tfoot"),Fte=Av("caption",{captionSide:!0});function z4({data:t}){return ee.createElement(ee.Fragment,null,t.caption&&ee.createElement(Fte,null,t.caption),t.head&&ee.createElement(Lte,null,ee.createElement(s_,null,t.head.map((e,r)=>ee.createElement(aL,{key:r},e)))),t.body&&ee.createElement(Rte,null,t.body.map((e,r)=>ee.createElement(s_,{key:r},e.map((n,i)=>ee.createElement(Pte,{key:i},n))))),t.foot&&ee.createElement(Nte,null,ee.createElement(s_,null,t.foot.map((e,r)=>ee.createElement(aL,{key:r},e)))))}z4.displayName="@mantine/core/TableDataRenderer";const xCe={type:"scrollarea"},SCe=(t,{minWidth:e,type:r})=>({scrollContainer:{"--table-min-width":tt(e),"--table-overflow":r==="native"?"auto":void 0}}),j4=xn((t,e)=>{const r=Lr("TableScrollContainer",xCe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,children:u,minWidth:c,type:f,...h}=r,d=qn({name:"TableScrollContainer",classes:nb,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:SCe,rootSelector:"scrollContainer"});return ee.createElement(Br,{component:f==="scrollarea"?J2:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:e,...d("scrollContainer"),...h},ee.createElement("div",{...d("scrollContainerInner")},u))});j4.classes=nb;j4.displayName="@mantine/core/TableScrollContainer";const ECe={withRowBorders:!0,verticalSpacing:7},_Ce=(t,{layout:e,captionSide:r,horizontalSpacing:n,verticalSpacing:i,borderColor:a,stripedColor:o,highlightOnHoverColor:s,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":r,"--table-horizontal-spacing":tL(n),"--table-vertical-spacing":tL(i),"--table-border-color":a?ff(a,t):void 0,"--table-striped-color":l&&o?ff(o,t):void 0,"--table-highlight-on-hover-color":u&&s?ff(s,t):void 0,"--table-sticky-header-offset":f?tt(c):void 0}}),On=xn((t,e)=>{const r=Lr("Table",ECe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:f,stripedColor:h,highlightOnHoverColor:d,striped:p,highlightOnHover:v,withColumnBorders:g,withRowBorders:m,withTableBorder:y,borderColor:w,layout:b,variant:x,data:S,children:E,stickyHeader:_,stickyHeaderOffset:k,mod:C,...A}=r,M=qn({name:"Table",props:r,className:i,style:a,classes:nb,classNames:n,styles:o,unstyled:s,rootSelector:"table",vars:l,varsResolver:_Ce});return ee.createElement(yCe,{value:{getStyles:M,stickyHeader:_,striped:p===!0?"odd":p||void 0,highlightOnHover:v,withColumnBorders:g,withRowBorders:m,captionSide:f||"bottom"}},ee.createElement(Br,{component:"table",variant:x,ref:e,mod:[{"data-with-table-border":y},C],...M("table"),...A},E||!!S&&ee.createElement(z4,{data:S})))});On.classes=nb;On.displayName="@mantine/core/Table";On.Td=Pte;On.Th=aL;On.Tr=s_;On.Thead=Lte;On.Tbody=Rte;On.Tfoot=Nte;On.Caption=Fte;On.ScrollContainer=j4;On.DataRenderer=z4;const CCe={},G4=xn((t,e)=>{const r=Lr("TextInput",CCe,t);return ee.createElement(aA,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});G4.classes=aA.classes;G4.displayName="@mantine/core/TextInput";const kCe=["h1","h2","h3","h4","h5","h6"];function MCe(t,e){const r=e!==void 0?e:`h${t}`;return kCe.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:{fontSize:tt(r),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var Bte={root:"m-8a5d1357"};const ACe={order:1},TCe=(t,{order:e,size:r,lineClamp:n,textWrap:i})=>{const a=MCe(e,r);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":i}}},hd=xn((t,e)=>{const r=Lr("Title",ACe,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,order:l,vars:u,size:c,variant:f,lineClamp:h,textWrap:d,mod:p,...v}=r,g=qn({name:"Title",props:r,classes:Bte,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:TCe});return[1,2,3,4,5,6].includes(l)?ee.createElement(Br,{...g("root"),component:`h${l}`,variant:f,ref:e,mod:[{order:l,"data-line-clamp":typeof h=="number"},p],size:c,...v}):null});hd.classes=Bte;hd.displayName="@mantine/core/Title";var $te={exports:{}},ICe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OCe=ICe,DCe=OCe;function zte(){}function jte(){}jte.resetWarningCache=zte;var PCe=function(){function t(n,i,a,o,s,l){if(l!==DCe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:jte,resetWarningCache:zte};return r.PropTypes=r,r};$te.exports=PCe();var LCe=$te.exports;const np=Ms(LCe);var RCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},NCe=Object.defineProperty,FCe=Object.defineProperties,BCe=Object.getOwnPropertyDescriptors,RC=Object.getOwnPropertySymbols,Gte=Object.prototype.hasOwnProperty,Ute=Object.prototype.propertyIsEnumerable,qz=(t,e,r)=>e in t?NCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kz=(t,e)=>{for(var r in e||(e={}))Gte.call(e,r)&&qz(t,r,e[r]);if(RC)for(var r of RC(e))Ute.call(e,r)&&qz(t,r,e[r]);return t},$Ce=(t,e)=>FCe(t,BCe(e)),zCe=(t,e)=>{var r={};for(var n in t)Gte.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&RC)for(var n of RC(t))e.indexOf(n)<0&&Ute.call(t,n)&&(r[n]=t[n]);return r},Qm=(t,e,r)=>{const n=ae.forwardRef((i,a)=>{var o=i,{color:s="currentColor",size:l=24,stroke:u=2,children:c}=o,f=zCe(o,["color","size","stroke","children"]);return ae.createElement("svg",Kz($Ce(Kz({ref:a},RCe),{width:l,height:l,stroke:s,strokeWidth:u,className:`tabler-icon tabler-icon-${t}`}),f),[...r.map(([h,d])=>ae.createElement(h,d)),...c||[]])});return n.propTypes={color:np.string,size:np.oneOfType([np.string,np.number]),stroke:np.oneOfType([np.string,np.number])},n.displayName=`${e}`,n},jCe=Qm("brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]),Wte=Qm("caret-right","IconCaretRight",[["path",{d:"M10 18l6 -6l-6 -6v12",key:"svg-0"}]]),GCe=Qm("download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),UCe=Qm("history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]),WCe=Qm("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),VCe=Qm("zoom-code","IconZoomCode",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M8 8l-2 2l2 2",key:"svg-2"}],["path",{d:"M12 8l2 2l-2 2",key:"svg-3"}]]);const HCe={"query-editor-container":"_query-editor-container_1ruxt_1"};var Vte={exports:{}},Hte={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib=ae;function XCe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var YCe=typeof Object.is=="function"?Object.is:XCe,qCe=ib.useSyncExternalStore,KCe=ib.useRef,QCe=ib.useEffect,ZCe=ib.useMemo,JCe=ib.useDebugValue;Hte.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=KCe(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=ZCe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,YCe(c,d))return p;var v=n(d);return i!==void 0&&i(p,v)?p:(c=d,f=v)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var s=qCe(t,a[0],a[1]);return QCe(function(){o.hasValue=!0,o.value=s},[s]),JCe(s),s};Vte.exports=Hte;var eke=Vte.exports,ds="default"in A$?ee:A$,Qz=Symbol.for("react-redux-context"),Zz=typeof globalThis<"u"?globalThis:{};function tke(){if(!ds.createContext)return{};const t=Zz[Qz]??(Zz[Qz]=new Map);let e=t.get(ds.createContext);return e||(e=ds.createContext(null),t.set(ds.createContext,e)),e}var dd=tke(),rke=()=>{throw new Error("uSES not initialized!")};function U4(t=dd){return function(){return ds.useContext(t)}}var Xte=U4(),Yte=rke,nke=t=>{Yte=t},ike=(t,e)=>t===e;function ake(t=dd){const e=t===dd?Xte:U4(t),r=(n,i={})=>{const{equalityFn:a=ike,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:s,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:f}=e();ds.useRef(!0);const h=ds.useCallback({[n.name](p){return n(p)}}[n.name],[n,c,o.stabilityCheck]),d=Yte(l.addNestedSub,s.getState,u||s.getState,h,a);return ds.useDebugValue(d),d};return Object.assign(r,{withTypes:()=>r}),r}var oke=ake();function ske(t){t()}function lke(){let t=null,e=null;return{clear(){t=null,e=null},notify(){ske(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Jz={notify(){},get:()=>[]};function uke(t,e){let r,n=Jz,i=0,a=!1;function o(v){c();const g=n.subscribe(v);let m=!1;return()=>{m||(m=!0,g(),f())}}function s(){n.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return a}function c(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=lke())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Jz)}function h(){a||(a=!0,c())}function d(){a&&(a=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}var cke=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fke=typeof navigator<"u"&&navigator.product==="ReactNative",hke=cke||fke?ds.useLayoutEffect:ds.useEffect;function dke({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",identityFunctionCheck:a="once"}){const o=ds.useMemo(()=>{const u=uke(t);return{store:t,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:i,identityFunctionCheck:a}},[t,n,i,a]),s=ds.useMemo(()=>t.getState(),[t]);hke(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const l=e||dd;return ds.createElement(l.Provider,{value:o},r)}var pke=dke;function qte(t=dd){const e=t===dd?Xte:U4(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var vke=qte();function gke(t=dd){const e=t===dd?vke:qte(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var mke=gke();nke(eke.useSyncExternalStoreWithSelector);function ma(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yke=typeof Symbol=="function"&&Symbol.observable||"@@observable",ej=yke,bO=()=>Math.random().toString(36).substring(7).split("").join("."),wke={INIT:`@@redux/INIT${bO()}`,REPLACE:`@@redux/REPLACE${bO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bO()}`},NC=wke;function W4(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Kte(t,e,r){if(typeof t!="function")throw new Error(ma(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ma(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ma(1));return r(Kte)(t,e)}let n=t,i=e,a=new Map,o=a,s=0,l=!1;function u(){o===a&&(o=new Map,a.forEach((g,m)=>{o.set(m,g)}))}function c(){if(l)throw new Error(ma(3));return i}function f(g){if(typeof g!="function")throw new Error(ma(4));if(l)throw new Error(ma(5));let m=!0;u();const y=s++;return o.set(y,g),function(){if(m){if(l)throw new Error(ma(6));m=!1,u(),o.delete(y),a=null}}}function h(g){if(!W4(g))throw new Error(ma(7));if(typeof g.type>"u")throw new Error(ma(8));if(typeof g.type!="string")throw new Error(ma(17));if(l)throw new Error(ma(9));try{l=!0,i=n(i,g)}finally{l=!1}return(a=o).forEach(y=>{y()}),g}function d(g){if(typeof g!="function")throw new Error(ma(10));n=g,h({type:NC.REPLACE})}function p(){const g=f;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(ma(11));function y(){const b=m;b.next&&b.next(c())}return y(),{unsubscribe:g(y)}},[ej](){return this}}}return h({type:NC.INIT}),{dispatch:h,subscribe:f,getState:c,replaceReducer:d,[ej]:p}}function bke(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:NC.INIT})>"u")throw new Error(ma(12));if(typeof r(void 0,{type:NC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ma(13))})}function xke(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{bke(r)}catch(a){i=a}return function(o={},s){if(i)throw i;let l=!1;const u={};for(let c=0;c<n.length;c++){const f=n[c],h=r[f],d=o[f],p=h(d,s);if(typeof p>"u")throw s&&s.type,new Error(ma(14));u[f]=p,l=l||p!==d}return l=l||n.length!==Object.keys(o).length,l?u:o}}function FC(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Ske(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(ma(15))};const o={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},s=t.map(l=>l(o));return a=FC(...s)(i.dispatch),{...i,dispatch:a}}}function Eke(t){return W4(t)&&"type"in t&&typeof t.type=="string"}var Qte=Symbol.for("immer-nothing"),tj=Symbol.for("immer-draftable"),Ss=Symbol.for("immer-state");function Vl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mm=Object.getPrototypeOf;function pd(t){return!!t&&!!t[Ss]}function Ef(t){var e;return t?Zte(t)||Array.isArray(t)||!!t[tj]||!!((e=t.constructor)!=null&&e[tj])||gA(t)||mA(t):!1}var _ke=Object.prototype.constructor.toString();function Zte(t){if(!t||typeof t!="object")return!1;const e=mm(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_ke}function BC(t,e){vA(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function vA(t){const e=t[Ss];return e?e.type_:Array.isArray(t)?1:gA(t)?2:mA(t)?3:0}function oL(t,e){return vA(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Jte(t,e,r){const n=vA(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Cke(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function gA(t){return t instanceof Map}function mA(t){return t instanceof Set}function dp(t){return t.copy_||t.base_}function sL(t,e){if(gA(t))return new Map(t);if(mA(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&Zte(t))return mm(t)?{...t}:Object.assign(Object.create(null),t);const r=Object.getOwnPropertyDescriptors(t);delete r[Ss];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){const a=n[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(mm(t),r)}function V4(t,e=!1){return yA(t)||pd(t)||!Ef(t)||(vA(t)>1&&(t.set=t.add=t.clear=t.delete=kke),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>V4(n,!0))),t}function kke(){Vl(2)}function yA(t){return Object.isFrozen(t)}var Mke={};function fv(t){const e=Mke[t];return e||Vl(0,t),e}var Uw;function ere(){return Uw}function Ake(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rj(t,e){e&&(fv("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function lL(t){uL(t),t.drafts_.forEach(Tke),t.drafts_=null}function uL(t){t===Uw&&(Uw=t.parent_)}function nj(t){return Uw=Ake(Uw,t)}function Tke(t){const e=t[Ss];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ij(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Ss].modified_&&(lL(e),Vl(4)),Ef(t)&&(t=$C(e,t),e.parent_||zC(e,t)),e.patches_&&fv("Patches").generateReplacementPatches_(r[Ss].base_,t,e.patches_,e.inversePatches_)):t=$C(e,r,[]),lL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Qte?t:void 0}function $C(t,e,r){if(yA(e))return e;const n=e[Ss];if(!n)return BC(e,(i,a)=>aj(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return zC(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),BC(a,(s,l)=>aj(t,n,i,s,l,r,o)),zC(t,i,!1),r&&t.patches_&&fv("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function aj(t,e,r,n,i,a,o){if(pd(i)){const s=a&&e&&e.type_!==3&&!oL(e.assigned_,n)?a.concat(n):void 0,l=$C(t,i,s);if(Jte(r,n,l),pd(l))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(Ef(i)&&!yA(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;$C(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&zC(t,i)}}function zC(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&V4(e,r)}function Ike(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:ere(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=H4;r&&(i=[n],a=Ww);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return n.draft_=s,n.revoke_=o,s}var H4={get(t,e){if(e===Ss)return t;const r=dp(t);if(!oL(r,e))return Oke(t,r,e);const n=r[e];return t.finalized_||!Ef(n)?n:n===xO(t.base_,e)?(SO(t),t.copy_[e]=fL(n,t)):n},has(t,e){return e in dp(t)},ownKeys(t){return Reflect.ownKeys(dp(t))},set(t,e,r){const n=tre(dp(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=xO(dp(t),e),a=i==null?void 0:i[Ss];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Cke(r,i)&&(r!==void 0||oL(t.base_,e)))return!0;SO(t),cL(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return xO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,SO(t),cL(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=dp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Vl(11)},getPrototypeOf(t){return mm(t.base_)},setPrototypeOf(){Vl(12)}},Ww={};BC(H4,(t,e)=>{Ww[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ww.deleteProperty=function(t,e){return Ww.set.call(this,t,e,void 0)};Ww.set=function(t,e,r){return H4.set.call(this,t[0],e,r,t[0])};function xO(t,e){const r=t[Ss];return(r?dp(r):t)[e]}function Oke(t,e,r){var i;const n=tre(e,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function tre(t,e){if(!(e in t))return;let r=mm(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=mm(r)}}function cL(t){t.modified_||(t.modified_=!0,t.parent_&&cL(t.parent_))}function SO(t){t.copy_||(t.copy_=sL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Dke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(l=a,...u){return o.produce(l,c=>r.call(this,c,...u))}}typeof r!="function"&&Vl(6),n!==void 0&&typeof n!="function"&&Vl(7);let i;if(Ef(e)){const a=nj(this),o=fL(e,void 0);let s=!0;try{i=r(o),s=!1}finally{s?lL(a):uL(a)}return rj(a,n),ij(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===Qte&&(i=void 0),this.autoFreeze_&&V4(i,!0),n){const a=[],o=[];fv("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else Vl(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,l=>e(l,...s));let n,i;return[this.produce(e,r,(o,s)=>{n=o,i=s}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ef(t)||Vl(8),pd(t)&&(t=rre(t));const e=nj(this),r=fL(t,void 0);return r[Ss].isManual_=!0,uL(e),r}finishDraft(t,e){const r=t&&t[Ss];(!r||!r.isManual_)&&Vl(9);const{scope_:n}=r;return rj(n,e),ij(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=fv("Patches").applyPatches_;return pd(t)?n(t,e):this.produce(t,i=>n(i,e))}};function fL(t,e){const r=gA(t)?fv("MapSet").proxyMap_(t,e):mA(t)?fv("MapSet").proxySet_(t,e):Ike(t,e);return(e?e.scope_:ere()).drafts_.push(r),r}function rre(t){return pd(t)||Vl(10,t),nre(t)}function nre(t){if(!Ef(t)||yA(t))return t;const e=t[Ss];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=sL(t,e.scope_.immer_.useStrictShallowCopy_)}else r=sL(t,!0);return BC(r,(n,i)=>{Jte(r,n,nre(i))}),e&&(e.finalized_=!1),r}var Es=new Dke,ire=Es.produce;Es.produceWithPatches.bind(Es);Es.setAutoFreeze.bind(Es);Es.setUseStrictShallowCopy.bind(Es);Es.applyPatches.bind(Es);Es.createDraft.bind(Es);Es.finishDraft.bind(Es);function Pke(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Lke(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Rke(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var oj=t=>Array.isArray(t)?t:[t];function Nke(t){const e=Array.isArray(t[0])?t[0]:t;return Rke(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Fke(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var Bke=class{constructor(t){this.value=t}deref(){return this.value}},$ke=typeof WeakRef<"u"?WeakRef:Bke,zke=0,sj=1;function SS(){return{s:zke,v:void 0,o:null,p:null}}function X4(t,e={}){let r=SS();const{resultEqualityCheck:n}=e;let i,a=0;function o(){var f;let s=r;const{length:l}=arguments;for(let h=0,d=l;h<d;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=s.o;v===null&&(s.o=v=new WeakMap);const g=v.get(p);g===void 0?(s=SS(),v.set(p,s)):s=g}else{let v=s.p;v===null&&(s.p=v=new Map);const g=v.get(p);g===void 0?(s=SS(),v.set(p,s)):s=g}}const u=s;let c;if(s.s===sj?c=s.v:(c=t.apply(null,arguments),a++),u.s=sj,n){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&n(h,c)&&(c=h,a!==0&&a--),i=typeof c=="object"&&c!==null||typeof c=="function"?new $ke(c):c}return u.v=c,c}return o.clearCache=()=>{r=SS(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function are(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,s,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),Pke(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:d=X4,argsMemoizeOptions:p=[],devModeChecks:v={}}=c,g=oj(h),m=oj(p),y=Nke(i),w=f(function(){return a++,u.apply(null,arguments)},...g),b=d(function(){o++;const S=Fke(y,arguments);return s=w.apply(null,S),s},...m);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var jke=are(X4),Gke=Object.assign((t,e=jke)=>{Lke(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,s,l)=>(o[r[l]]=s,o),{}))},{withTypes:()=>Gke});function ore(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var Uke=ore(),Wke=ore,Vke=(...t)=>{const e=are(...t),r=Object.assign((...n)=>{const i=e(...n),a=(o,...s)=>i(pd(o)?rre(o):o,...s);return Object.assign(a,i),a},{withTypes:()=>r});return r};Vke(X4);var Hke=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?FC:FC.apply(null,arguments)};function ym(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(jo(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Eke(n)&&n.type===t,r}var sre=class w1 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,w1.prototype)}static get[Symbol.species](){return w1}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new w1(...e[0].concat(this)):new w1(...e.concat(this))}};function lj(t){return Ef(t)?ire(t,()=>{}):t}function uj(t,e,r){if(t.has(e)){let i=t.get(e);return r.update&&(i=r.update(i,e,t),t.set(e,i)),i}if(!r.insert)throw new Error(jo(10));const n=r.insert(e,t);return t.set(e,n),n}function Xke(t){return typeof t=="boolean"}var Yke=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new sre;return r&&(Xke(r)?o.push(Uke):o.push(Wke(r.extraArgument))),o},qke="RTK_autoBatch",lre=t=>e=>{setTimeout(e,t)},Kke=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lre(10),Qke=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const s=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?Kke:t.type==="callback"?t.queueNotification:lre(t.timeout),u=()=>{o=!1,a&&(a=!1,s.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const f=()=>i&&c(),h=n.subscribe(f);return s.add(c),()=>{h(),s.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[qke]),a=!i,a&&(o||(o=!0,l(u))),n.dispatch(c)}finally{i=!0}}})},Zke=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new sre(t);return n&&i.push(Qke(typeof n=="object"?n:void 0)),i},Jke=!0;function eMe(t){const e=Yke(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let s;if(typeof r=="function")s=r;else if(W4(r))s=xke(r);else throw new Error(jo(1));let l;typeof n=="function"?l=n(e):l=e();let u=FC;i&&(u=Hke({trace:!Jke,...typeof i=="object"&&i}));const c=Ske(...l),f=Zke(c);let h=typeof o=="function"?o(f):f();const d=u(...h);return Kte(s,a,d)}function ure(t){const e={},r=[];let n;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(jo(28));if(s in e)throw new Error(jo(29));return e[s]=o,i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function tMe(t){return typeof t=="function"}function rMe(t,e){let[r,n,i]=ure(e),a;if(tMe(t))a=()=>lj(t());else{const s=lj(t);a=()=>s}function o(s=a(),l){let u=[r[l.type],...n.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,f)=>{if(f)if(pd(c)){const d=f(c,l);return d===void 0?c:d}else{if(Ef(c))return ire(c,h=>f(h,l));{const h=f(c,l);if(h===void 0){if(c===null)return c;throw new Error(jo(9))}return h}}return c},s)}return o.getInitialState=a,o}var nMe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",iMe=(t=21)=>{let e="",r=t;for(;r--;)e+=nMe[Math.random()*64|0];return e},aMe=Symbol.for("rtk-slice-createasyncthunk");function oMe(t,e){return`${t}/${e}`}function sMe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[aMe];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(jo(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(uMe()):i.reducers)||{},l=Object.keys(s),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,b){const x=typeof w=="string"?w:w.type;if(!x)throw new Error(jo(12));if(x in u.sliceCaseReducersByType)throw new Error(jo(13));return u.sliceCaseReducersByType[x]=b,c},addMatcher(w,b){return u.sliceMatchers.push({matcher:w,reducer:b}),c},exposeAction(w,b){return u.actionCreators[w]=b,c},exposeCaseReducer(w,b){return u.sliceCaseReducersByName[w]=b,c}};l.forEach(w=>{const b=s[w],x={reducerName:w,type:oMe(a,w),createNotation:typeof i.reducers=="function"};fMe(b)?dMe(x,b,c,e):cMe(x,b,c)});function f(){const[w={},b=[],x=void 0]=typeof i.extraReducers=="function"?ure(i.extraReducers):[i.extraReducers],S={...w,...u.sliceCaseReducersByType};return rMe(i.initialState,E=>{for(let _ in S)E.addCase(_,S[_]);for(let _ of u.sliceMatchers)E.addMatcher(_.matcher,_.reducer);for(let _ of b)E.addMatcher(_.matcher,_.reducer);x&&E.addDefaultCase(x)})}const h=w=>w,d=new Map;let p;function v(w,b){return p||(p=f()),p(w,b)}function g(){return p||(p=f()),p.getInitialState()}function m(w,b=!1){function x(E){let _=E[w];return typeof _>"u"&&b&&(_=g()),_}function S(E=h){const _=uj(d,b,{insert:()=>new WeakMap});return uj(_,E,{insert:()=>{const k={};for(const[C,A]of Object.entries(i.selectors??{}))k[C]=lMe(A,E,g,b);return k}})}return{reducerPath:w,getSelectors:S,get selectors(){return S(x)},selectSlice:x}}const y={name:a,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...m(o),injectInto(w,{reducerPath:b,...x}={}){const S=b??o;return w.inject({reducerPath:S,reducer:v},x),{...y,...m(S,!0)}}};return y}}function lMe(t,e,r,n){function i(a,...o){let s=e(a);return typeof s>"u"&&n&&(s=r()),t(s,...o)}return i.unwrapped=t,i}var wA=sMe();function uMe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function cMe({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!hMe(n))throw new Error(jo(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?ym(t,o):ym(t))}function fMe(t){return t._reducerDefinitionType==="asyncThunk"}function hMe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function dMe({type:t,reducerName:e},r,n,i){if(!i)throw new Error(jo(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:l,settled:u,options:c}=r,f=i(t,a,c);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),s&&n.addCase(f.pending,s),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||ES,pending:s||ES,rejected:l||ES,settled:u||ES})}function ES(){}var pMe=(t,e)=>{if(typeof t!="function")throw new Error(jo(32))},Y4="listenerMiddleware",vMe=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=ym(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(jo(21));return pMe(a),{predicate:i,type:e,effect:a}},gMe=Object.assign(t=>{const{type:e,predicate:r,effect:n}=vMe(t);return{id:iMe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(jo(22))}}},{withTypes:()=>gMe}),mMe=Object.assign(ym(`${Y4}/add`),{withTypes:()=>mMe});ym(`${Y4}/removeAll`);var yMe=Object.assign(ym(`${Y4}/remove`),{withTypes:()=>yMe});function jo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const vd="true".trim()==="true",wMe=`SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,bMe=[{name:"Academy Award for Best Picture winners (2022-2024) with directors and award dates",query:`SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,results:{data:{head:{vars:["movie","movieLabel","director","directorLabel","awardDate"]},results:{bindings:[{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q104686893"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q7506788"},movieLabel:{"xml:lang":"en",type:"literal",value:"CODA"},directorLabel:{"xml:lang":"en",type:"literal",value:"Sin Hder"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2022-03-27T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746830"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Dan Kwan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746848"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Daniel Scheinert"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q108839994"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q25191"},movieLabel:{"xml:lang":"en",type:"literal",value:"Oppenheimer"},directorLabel:{"xml:lang":"en",type:"literal",value:"Christopher Nolan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2024-03-10T00:00:00Z"}}]}},error:null,summary:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Sin Hder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`}}],xMe={data:{head:{vars:["movie","movieLabel","director","directorLabel","awardDate"]},results:{bindings:[{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q104686893"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q7506788"},movieLabel:{"xml:lang":"en",type:"literal",value:"CODA"},directorLabel:{"xml:lang":"en",type:"literal",value:"Sin Hder"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2022-03-27T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746830"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Dan Kwan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746848"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Daniel Scheinert"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q108839994"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q25191"},movieLabel:{"xml:lang":"en",type:"literal",value:"Oppenheimer"},directorLabel:{"xml:lang":"en",type:"literal",value:"Christopher Nolan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2024-03-10T00:00:00Z"}}]}},error:null,summary:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Sin Hder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`},SMe=[{role:"user",content:"Can you tell me about interesting movies?"},{content:"I can help you create a SPARQL query to find interesting movies from Wikidata. Could you specify what makes a movie interesting for you? For example, are you interested in movies by a certain director, within a specific genre, or those that have won specific awards?",role:"assistant"},{role:"user",content:"Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award."},{content:`\`\`\`sparql
SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate
\`\`\`
This query fetches movies that won the Academy Award for Best Picture between 2022 and 2024, including each movie's director and the date when the award was won. It filters the awards by the given years and orders the results by the date when the award was received.`,role:"assistant"}],EMe=[{role:"system",content:`You are a helpful chat assistant. This system will give you access to data in the WikiData Knowledge Graph, that contains encyclopedic data similar to Wikipedia, but in knowledge graph format using the RDF framework. 

If users ask questions that can be answered via WikiData, your job is not to directly answer their questions, but instead to help them write a SPARQL query to find that data. You can ask the user to clarify their questions if the questions are vague, open-ended, or subjective in nature. 

If you ever need to suggest data to the user, you should only provide recommendations that are directly accessible from Wikidata. Do not ask the user if they would like to proceed with generating the corresponding query unless absolutely necessary.

When you are ready to start building a query, respond with 'BUILD QUERY'. The system will walk you through a guided workflow to get the necessary entity and property IDs from WikiData.

Current date: Mon Jun 10 2024.`},{content:"Can you tell me about interesting movies?",role:"user"},{role:"assistant",content:"I can help you create a SPARQL query to find interesting movies from Wikidata. Could you specify what makes a movie interesting for you? For example, are you interested in movies by a certain director, within a specific genre, or those that have won specific awards?"},{content:"Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award.",role:"user"},{role:"assistant",content:"BUILD QUERY"},{content:`Your goal is to find the necessary entity and property IDs to construct a SPARQL query that answers the user's question. Do not respond with a trailing period. Do not assume you already know the correct entity and property IDs; you should search for them. Make sure to filter the IDs for the ones that are most relevant to the question. Respond in one of these ways:
- To fuzzy search for an entity, start the response with 'ENTITY SEARCH:', followed by an entity name you want to search for. The system will respond with possible entity resolutions in Wikidata. 
- To get all the properties for an entity, start the response with 'PROPERTIES SEARCH:', followed by the ID of the entity. The user will respond with all the properties associated with that entity.
- To find what entities are connected to the original entity via a property, start the response with 'ENTITY PROPERTY SEARCH:', followed by the entity ID then the property ID. Ex: 'ENTITY PROPERTY SEARCH: Q123 P456'
- Respond with 'STOP' if and only if you have searched for and successfully identified all necessary IDs from Wikidata to construct the query.`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Award for Best Picture"},{content:`ID: Q102427, label: Academy Award for Best Picture, description: annual award from the Academy of Motion Picture Arts and Sciences
ID: Q14943591, label: Academy Award for Best Picture (1980s), description: undefined
ID: Q14943588, label: Academy Award for Best Picture (1950s), description: undefined
ID: Q14943585, label: Academy Award for Best Picture (1930s), description: undefined
ID: Q14943586, label: Academy Award for Best Picture (1940s), description: undefined`,role:"system"},{role:"assistant",content:"PROPERTIES SEARCH: Q102427"},{content:`ID: P1346, label: winner, description: winner of a competition or similar event, not to be used for awards (instead use "award received" (P166) on awardee's item, possibly qualified with "for work" (P1686)) or for wars or battles
ID: P2910, label: icon, description: pictogram suitable to represent the item. For logos of a subject, use "logo image" (P154); for favicons, use "small logo or icon" (P8972)
ID: P1417, label: Encyclopdia Britannica Online ID, description: identifier for an article in the online version of Encyclopdia Britannica
ID: P8115, label: eligible recipient, description: party that is eligible to receive something, like an award, grant or prize
ID: P12086, label: WikiKids ID, description: identifier of the article on WikiKids
ID: P31, label: instance of, description: that class of which this subject is a particular example and member; different from P279 (subclass of); for example: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P6262, label: Fandom article ID, description: identifier of an article on Fandom (Wikia). Format: subdomain:Page_title (language-code.subdomain:Page_title for non-English wikis)
ID: P17, label: country, description: sovereign state that this item is in (not to be used for human beings)
ID: P2257, label: event interval, description: standard nominal interval between scheduled or regularly recurring events. Include unit of time, e.g. "year" (Q577). 1/(event frequency). time period of periodically occurring event
ID: P1424, label: topic's main template, description: the main template relating to a topic
ID: P2517, label: category for recipients of this award, description: link to Wikimedia category for recipients of this award
ID: P154, label: logo image, description: graphic mark or emblem commonly used by commercial enterprises, organizations and products
ID: P8408, label: KBpedia ID, description: identifier for the KBpedia knowledge graph, which provides consistent mappings across seven large-scale public knowledge bases including Wikidata, and is used to promote data interoperability and extraction of training sets for machine learning
ID: P1705, label: native label, description: label for the items in their official language (P37) or their original language (P364)
ID: P373, label: Commons category, description: name of the Wikimedia Commons category containing files related to this item (without the prefix "Category:")
ID: P910, label: topic's main category, description: main Wikimedia category
ID: P646, label: Freebase ID, description: identifier for a page in the Freebase database. Format: "/m/0" followed by 2 to 7 characters. For IDs starting with "/g/", use Google Knowledge Graph ID (P2671)
ID: P571, label: inception, description: time when an entity begins to exist; for date of official opening use P1619
ID: P856, label: official website, description: URL of the official page of an item (current or former). Usage: If a listed URL no longer points to the official website, do not remove it, but see the "Hijacked or dead websites" section of the Talk page
ID: P1027, label: conferred by, description: person or organization who grants an award, certification, grant, or role`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Award winner"},{content:"ID: Q976472, label: Sings Days of Wine and Roses, Moon River and Other Academy Award Winners, description: 1964 studio album by Frank Sinatra",role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Awards"},{content:`ID: Q19020, label: Academy Awards, description: annual awards for cinematic achievements
ID: Q16913666, label: Academy Awards ceremony, description: annual event at which Academy Awards are presented
ID: Q83532676, label: Academy awards, description: scientific article published on 01 February 1968
ID: Q73105727, label: Academy Awards Database, description: database about Academy Award winners and nomines
ID: Q51954858, label: The animation Showcase - Best Of 2017, description: Best animated Short films, Oscars predictive screening for the 90th Academy Awards Ceremony.`,role:"system"},{role:"assistant",content:"PROPERTIES SEARCH: Q19020"},{content:`ID: P1296, label: Gran Enciclopdia Catalana ID (former scheme), description: identifier for an item in the Gran Enciclopdia Catalana. Replaced with "Gran Enciclopdia Catalana ID (P12385)".
ID: P1368, label: National Library of Latvia ID, description: identifier assigned by the National Library of Latvia
ID: P1417, label: Encyclopdia Britannica Online ID, description: identifier for an article in the online version of Encyclopdia Britannica
ID: P345, label: IMDb ID, description: identifier for the IMDb [with prefix 'tt', 'nm', 'co', 'ev', 'ch' or 'ni']
ID: P2013, label: Facebook username, description: identifier for an official (preferably) Facebook person, product or organization page (everything that follows URL part 'https://www.facebook.com/')
ID: P2347, label: YSO ID, description: identifier for a concept in the General Finnish Ontology YSO
ID: P373, label: Commons category, description: name of the Wikimedia Commons category containing files related to this item (without the prefix "Category:")
ID: P2003, label: Instagram username, description: item's username on Instagram
ID: P527, label: has part(s), description: part of this subject; inverse property of "part of" (P361). See also "has parts of the class" (P2670).
ID: P279, label: subclass of, description: this item is a subclass (subset) of that item; all instances of this item are instances of that item; different from P31 (instance of), e.g.: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P1343, label: described by source, description: work where this item is described
ID: P910, label: topic's main category, description: main Wikimedia category
ID: P691, label: NL CR AUT ID, description: identifier in the Czech National Authority Database of National Library of the Czech Republic (NL CR)
ID: P269, label: IdRef ID, description: identifier for authority control in the French collaborative library catalog (see also P1025). Format: 8 digits followed by a digit or "X"
ID: P935, label: Commons gallery, description: name of the Wikimedia Commons gallery page(s) related to this item (is suitable to allow multiple links to more gallery pages)
ID: P646, label: Freebase ID, description: identifier for a page in the Freebase database. Format: "/m/0" followed by 2 to 7 characters. For IDs starting with "/g/", use Google Knowledge Graph ID (P2671)
ID: P571, label: inception, description: time when an entity begins to exist; for date of official opening use P1619
ID: P2163, label: FAST ID, description: authority control identifier in WorldCat's FAST Linked Data authority file
ID: P1889, label: different from, description: item that is different from another item, with which it may be confused
ID: P1407, label: MusicBrainz series ID, description: identifier for a series per the MusicBrainz open music encyclopedia
ID: P1424, label: topic's main template, description: the main template relating to a topic
ID: P2397, label: YouTube channel ID, description: ID of the YouTube channel of a person or organisation (not to be confused with the name of the channel) The ID can also be used for music.youtube.com IDs
ID: P2002, label: X username, description: this item's username on X (formerly Twitter); do not include the @ symbol
ID: P2517, label: category for recipients of this award, description: link to Wikimedia category for recipients of this award
ID: P268, label: Bibliothque nationale de France ID, description: identifier for the subject issued by BNF (Bibliothque nationale de France). Format: 8 digits followed by a check-digit or letter, do not include the initial 'cb'.
ID: P856, label: official website, description: URL of the official page of an item (current or former). Usage: If a listed URL no longer points to the official website, do not remove it, but see the "Hijacked or dead websites" section of the Talk page
ID: P1027, label: conferred by, description: person or organization who grants an award, certification, grant, or role
ID: P349, label: NDL Authority ID, description: identifier for authority control per the National Diet Library of Japan
ID: P1225, label: U.S. National Archives Identifier, description: identifier for the United States National Archives and Records Administration's online catalog
ID: P1705, label: native label, description: label for the items in their official language (P37) or their original language (P364)
ID: P31, label: instance of, description: that class of which this subject is a particular example and member; different from P279 (subclass of); for example: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P159, label: headquarters location, description: city or town, where an organization's headquarters is or has been situated. Use P276 qualifier for specific building
ID: P244, label: Library of Congress authority ID, description: Library of Congress name authority (persons, families, corporate bodies, events, places, works and expressions) and subject authority identifier [Format: 1-2 specific letters followed by 8-10 digits (see regex). For manifestations, use P1144]
ID: P17, label: country, description: sovereign state that this item is in (not to be used for human beings)
ID: P227, label: GND ID, description: identifier from an international authority file of names, subjects, and organizations (please don't use type n = name, disambiguation) - Deutsche Nationalbibliothek
ID: P4013, label: Giphy username, description: this item's username on Giphy
ID: P12384, label: Letterboxd user ID, description: identifier for a user on Letterboxd
ID: P2910, label: icon, description: pictogram suitable to represent the item. For logos of a subject, use "logo image" (P154); for favicons, use "small logo or icon" (P8972)
ID: P9100, label: GitHub topic, description: GitHub topic for a repository or subject
ID: P12399, label: TheTVDB award ID, description: identifier for an award on the website TheTVDB.com
ID: P9629, label: Armeniapedia ID, description: identifier for a topic in the online encyclopedia Armeniapedia
ID: P6058, label: Larousse ID, description: identifier for a subject on the 'Encyclopdie Larousse'
ID: P6181, label: Disney A to Z ID, description: ID of article in online version of Disney A to Z
ID: P4342, label: Store norske leksikon ID, description: identifier of an article in the online encyclopedia snl.no
ID: P6449, label: Douban site name, description: domain name of Douban site written in Latin alphabet
ID: P6385, label: Krugosvet article, description: link to article of Russian-language online encyclopedia
ID: P10234, label: Der Spiegel topic ID, description: identifier for topics in the German news portal "Der Spiegel"
ID: P6760, label: Know Your Meme ID, description: identifier for a Know Your Meme article
ID: P10565, label: Encyclopedia of China (Third Edition) ID, description: identifier for an article in the online version of Encyclopedia of China (Third Edition)
ID: P8189, label: National Library of Israel J9U ID, description: identifier used by the National Library of Israel
ID: P4073, label: Fandom wiki ID, description: identifier of a topic's wiki, in Fandom.com
ID: P2924, label: Great Russian Encyclopedia Online ID (old version), description: identifier for an entry on old.bigenc.ru, the official site of the Great Russian Encyclopedia Online 20142017 (current version of bigenc.ru is P11514)
ID: P8309, label: Yle topic ID, description: identifier for topics in Finland's national broadcaster Yle's web services
ID: P4622, label: trophy awarded, description: trophy awarded at the end of a selection process or of a competition, usually to winners or finishers under the form of a cup, a medal, a diploma
ID: P3479, label: Omni topic ID, description: identifier for a topic, used by Omni and Aftonbladet
ID: P9545, label: Encyclopedia of China (Second Edition) ID, description: identifier for an article in the online version of Encyclopedia of China (Second Edition)
ID: P5337, label: Google News topics ID, description: identifier for a subject in the news on Google News
ID: P9084, label: ABC News topic ID, description: identifier of a topic of content on the Australian Broadcasting Corporation website
ID: P7982, label: Hrvatska enciklopedija ID, description: identifier for an article in the Croatian Encyclopedia (Hrvatska enciklopedija)
ID: P10045, label: Vokrug.tv show ID, description: identify for a creative work in Vokrug.tv
ID: P12385, label: Gran Enciclopdia Catalana ID, description: identifier for an item in the Gran Enciclopdia Catalana
ID: P5905, label: Comic Vine ID, description: identifier at the Comic Vine database of comic books, fictional characters, people, films and television series/episodes
ID: P8295, label: AustLit ID, description: identifier at AustLit
ID: P8313, label: Den Store Danske ID, description: identifier of an article in the online encyclopedia denstoredanske.lex.dk
ID: P8349, label: Proleksis enciklopedija ID, description: identifier for a topic in Proleksis enciklopedija
ID: P12596, label: museum-digital tag ID, description: numeric identifier for keywords used in the description of cultural heritage objects in Museum-Digital
ID: P10170, label: Channel One Russia show ID, description: identifier of TV program for Channel One Russia
ID: P9318, label: vvir topic ID, description: identifier of a topic in the Northern Smi publication vvir
ID: P2581, label: BabelNet ID, description: ID in BabelNet encyclopedic dictionary
ID: P7305, label: Online PWN Encyclopedia ID, description: identifier for an entry in the online release of the Online PWN Encyclopedia
ID: P6219, label: TASS reference, description: background information on historical and current events, locations, biographies of famous people
ID: P8814, label: WordNet 3.1 Synset ID, description: Synset identifier in Princetons WordNet Version 3.1
ID: P3569, label: Cultureel Woordenboek ID, description: identifier for a concept in the Dutch Cultureel Woordenboek ('Cultural Dictionary')
ID: P6467, label: Hulu series ID, description: TV series identifier in Hulu
ID: P4515, label: Prisma ID, description: identifier for a film (movie) or person, in prisma.de
ID: P6200, label: BBC News topic ID, description: identifier for a topic on the BBC News website
ID: P7775, label: RationalWiki ID, description: identifier for an item at RationalWiki
ID: P3221, label: New York Times topic ID, description: identifier for a topic, at the New York Times' website
ID: P3417, label: Quora topic ID, description: identifier for a topic on Quora (English language version)
ID: P3509, label: Dagens Nyheter topic ID, description: identifier for a topic, used by the Swedish daily newspaper Dagens Nyheter
ID: P2888, label: exact match, description: URL used to link two items or properties, indicating a high degree of confidence that the concepts can be used interchangeably
ID: P5008, label: on focus list of Wikimedia project, description: property to indicate that an item is of particular interest for a Wikimedia project. This property does not add notability. Items should not be created with this property if they are not notable for Wikidata. See also P6104, P972, P2354.
ID: P5019, label: Brockhaus Enzyklopdie online ID, description: identifier for an article in the online version of Brockhaus Enzyklopdie
ID: P8408, label: KBpedia ID, description: identifier for the KBpedia knowledge graph, which provides consistent mappings across seven large-scale public knowledge bases including Wikidata, and is used to promote data interoperability and extraction of training sets for machine learning
ID: P11137, label: Reddit topic ID, description: identifier of a topic on Reddit
ID: P3222, label: NE.se ID, description: ID of article on the Swedish Nationalencyklopedin (NE.se) site
ID: P11408, label: Pixiv Encyclopedia ID, description: identifier for an article on Pixiv Encyclopedia
ID: P10916, label: Sddeutsche Zeitung topic ID, description: identifier for a topic at the Sddeutsche Zeitung newspaper website
ID: P5829, label: Television Academy Foundation show ID, description: identifier for a television show discussed on the Television Academy Foundation's The Interviews website
ID: P11196, label: Baidu Tieba name, description: name of a specific topic driven forum in Baidu Tieba
ID: P8687, label: social media followers, description: number of subscribers on a particular social media website (use as main statement only; see P3744 instead for qualifier). Qualify with "point in time" and property for account. For Twitter, use numeric id.
ID: P3553, label: Zhihu topic ID, description: numeric id of topics (tags) of questions on Zhihu, a Chinese question-and-answer website
ID: P3847, label: Open Library subject ID, description: identifier for a topic in the Open Library database
ID: P7502, label: Golden ID, description: ID page in Golden knowledge base
ID: P6081, label: RIA Novosti reference, description: background information on historical and current events, biographies of famous people`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: director"},{content:`ID: Q2526255, label: film director, description: person who directs a film
ID: Q3455803, label: director, description: director of a creative work
ID: Q3387717, label: theatrical director, description: person overseeing the mounting of a theatre production
ID: Q1162163, label: director, description: person who leads a particular area of a company or organization
ID: Q2824523, label: board member, description: position in an organization`,role:"system"},{role:"assistant",content:"STOP"},{content:`You are an expert at generating SPARQL queries for the Wikidata Knowledge Graph from natural language. 
Entity IDs are prepended with 'wd' and property IDs are prepended with 'wdt'. 
Your task is to convert the natural language instruction into a SPARQL query.
The following are four examples in which I am showcasing a natural language instruction (NLI) and the converted SPARQL Query. 
  NLI: Who are creators of Apple and what are their birthdates?
  SPARQL Query:
    SELECT ?founder ?founderLabel ?birthdate
      WHERE {
        wd:Q312 wdt:P112 ?founder.   # Q312 represents Apple and P112 represents founder
        ?founder wdt:P569 ?birthdate. # P569 represents date of birth
        
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
    }
  NLI: Who are the current heads of state for all countries in the world? 
  SPARQL Query: 
    SELECT ?country ?countryLabel ?headOfState ?headOfStateLabel 
      WHERE { 
        ?country wdt:P31 wd:Q6256;     # Instance of: country 
        p:P35 ?statement.    # has head of government statement 
        ?statement ps:P35 ?headOfState;   # head of government property 
        pq:P580 ?startDate.   # start date of the term 
        FILTER NOT EXISTS { ?statement pq:P582 ?endDate }  # Ensure current head of state 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
      ORDER BY ?countryLabel 
  NLI: What are the top five tallest mountains in the world and their respective heights? 
  SPARQL Query: 
    SELECT ?mountain ?mountainLabel ?height 
      WHERE { 
        ?mountain wdt:P31 wd:Q8502;         # Instance of: mountain 
        wdt:P2044 ?height.       # Height property 
        FILTER (?height >= 8000)           # Minimum height of 8000 meters 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
    ORDER BY DESC(?height) 
    LIMIT 5 
  NLI: Which symphonies were composed by Ludwig van Beethoven? 
  SPARQL Query: 
    SELECT ?composition (SAMPLE(?compositionLabel) as ?compositionLabel) 
      WHERE { 
        ?composition wdt:P31 wd:Q105543609;         # Instance of: Beethoven's symphonies 
        wdt:P86 wd:Q255;               # Composer: Ludwig van Beethoven 
        rdfs:label ?compositionLabel. 
        FILTER(CONTAINS(LCASE(?compositionLabel), "symphony")) 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      }  
    GROUP BY ?composition 
  Start the SPARQL query with \`\`\`sparql and end the query with \`\`\`. After you generate a SPARQL query, you briefly explain, as concisely as possible, to the user why the query addresses their original question. Keep your explanation as short as possible and only further explain when asked. Now construct a query that answers the user's question: Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award.`,role:"system"},{role:"assistant",content:`\`\`\`sparql
SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate
\`\`\`
This query fetches movies that won the Academy Award for Best Picture between 2022 and 2024, including each movie's director and the date when the award was won. It filters the awards by the given years and orders the results by the date when the award was received.`},{content:`Respond with a brief name for this query. If you generated this query, it can just be the question that the user asked.
      SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,role:"system"},{role:"assistant",content:"Academy Award for Best Picture winners (2022-2024) with directors and award dates"},{content:`These are the JSON results from the last query. Respond with a brief summary of the results.
      {
  "head": {
    "vars": [
      "movie",
      "movieLabel",
      "director",
      "directorLabel",
      "awardDate"
    ]
  },
  "results": {
    "bindings": [
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q104686893"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q7506788"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "CODA"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Sin Hder"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2022-03-27T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q83808444"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q28746830"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Everything Everywhere All at Once"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Dan Kwan"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2023-01-01T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q83808444"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q28746848"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Everything Everywhere All at Once"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Daniel Scheinert"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2023-01-01T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q108839994"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q25191"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Oppenheimer"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Christopher Nolan"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2024-03-10T00:00:00Z"
        }
      }
    ]
  }
}`,role:"system"},{role:"assistant",content:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Sin Hder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`}],_Me={fullChatHistory:vd?EMe:[],showFullChatHistory:!0,simpleChatHistory:vd?SMe:[]},CMe=wA({name:"chatHistorySlice",initialState:_Me,reducers:{setFullChatHistory:(t,e)=>{t.fullChatHistory=e.payload},pushSimpleChatHistory:(t,e)=>{t.simpleChatHistory.push(e.payload)},toggleShowFullChatHistory:t=>{t.showFullChatHistory=!t.showFullChatHistory}}}),{reducer:kMe,actions:{setFullChatHistory:MMe,pushSimpleChatHistory:cj,toggleShowFullChatHistory:AMe}}=CMe,TMe={queryValue:vd?wMe:""},IMe=wA({name:"queryValueSlice",initialState:TMe,reducers:{setQueryValue:(t,e)=>{t.queryValue=e.payload}}}),{reducer:OMe,actions:{setQueryValue:jC}}=IMe,DMe={results:vd?xMe:null},PMe=wA({name:"resultsSlice",initialState:DMe,reducers:{setResults:(t,e)=>{t.results=e.payload}}}),{reducer:LMe,actions:{setResults:zg}}=PMe,RMe={queryHistory:vd?bMe:[]},NMe=wA({name:"queryHistorySlice",initialState:RMe,reducers:{pushQueryHistory:(t,e)=>{var r;if("data"in e.payload)t.queryHistory.push({name:e.payload.name,query:e.payload.query,results:{data:((r=e.payload)==null?void 0:r.data)||null,error:null,summary:e.payload.summary}});else if("error"in e.payload)t.queryHistory.push({name:e.payload.name,query:e.payload.query,results:{data:null,error:e.payload.error,summary:e.payload.summary}});else throw Error("Unknown action.payload: "+e.payload)}}}),{reducer:FMe,actions:{pushQueryHistory:_S}}=NMe,BMe=eMe({reducer:{chatHistory:kMe,queryHistory:FMe,queryValue:OMe,results:LMe}}),ab=mke.withTypes(),hf=oke.withTypes();var Zm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wm=typeof window>"u"||"Deno"in window;function Zs(){}function $Me(t,e){return typeof t=="function"?t(e):t}function hL(t){return typeof t=="number"&&t>=0&&t!==1/0}function cre(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fj(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:s}=t;if(o){if(n){if(e.queryHash!==q4(o,e.options))return!1}else if(!Vw(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||typeof i<"u"&&i!==e.state.fetchStatus||a&&!a(e))}function hj(t,e){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(hv(e.options.mutationKey)!==hv(a))return!1}else if(!Vw(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function q4(t,e){return((e==null?void 0:e.queryKeyHashFn)||hv)(t)}function hv(t){return JSON.stringify(t,(e,r)=>dL(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Vw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Vw(t[r],e[r])):!1}function fre(t,e){if(t===e)return t;const r=dj(t)&&dj(e);if(r||dL(t)&&dL(e)){const n=r?t:Object.keys(t),i=n.length,a=r?e:Object.keys(e),o=a.length,s=r?[]:{};let l=0;for(let u=0;u<o;u++){const c=r?u:a[u];!r&&t[c]===void 0&&e[c]===void 0&&n.includes(c)?(s[c]=void 0,l++):(s[c]=fre(t[c],e[c]),s[c]===t[c]&&t[c]!==void 0&&l++)}return i===o&&l===i?t:s}return e}function GC(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function dj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function dL(t){if(!pj(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!pj(r)||!r.hasOwnProperty("isPrototypeOf"))}function pj(t){return Object.prototype.toString.call(t)==="[object Object]"}function zMe(t){return new Promise(e=>{setTimeout(e,t)})}function pL(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?fre(t,e):e}function jMe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function GMe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Lp,Eh,B0,BY,UMe=(BY=class extends Zm{constructor(){super();jt(this,Lp,void 0);jt(this,Eh,void 0);jt(this,B0,void 0);Ct(this,B0,e=>{if(!wm&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ue(this,Eh)||this.setEventListener(ue(this,B0))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,Eh))==null||e.call(this),Ct(this,Eh,void 0))}setEventListener(e){var r;Ct(this,B0,e),(r=ue(this,Eh))==null||r.call(this),Ct(this,Eh,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ue(this,Lp)!==e&&(Ct(this,Lp,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof ue(this,Lp)=="boolean"?ue(this,Lp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Lp=new WeakMap,Eh=new WeakMap,B0=new WeakMap,BY),UC=new UMe,$0,_h,z0,$Y,WMe=($Y=class extends Zm{constructor(){super();jt(this,$0,!0);jt(this,_h,void 0);jt(this,z0,void 0);Ct(this,z0,e=>{if(!wm&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ue(this,_h)||this.setEventListener(ue(this,z0))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,_h))==null||e.call(this),Ct(this,_h,void 0))}setEventListener(e){var r;Ct(this,z0,e),(r=ue(this,_h))==null||r.call(this),Ct(this,_h,e(this.setOnline.bind(this)))}setOnline(e){ue(this,$0)!==e&&(Ct(this,$0,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ue(this,$0)}},$0=new WeakMap,_h=new WeakMap,z0=new WeakMap,$Y),WC=new WMe;function VMe(t){return Math.min(1e3*2**t,3e4)}function bA(t){return(t??"online")==="online"?WC.isOnline():!0}var hre=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function EO(t){return t instanceof hre}function dre(t){let e=!1,r=0,n=!1,i,a,o;const s=new Promise((g,m)=>{a=g,o=m}),l=g=>{var m;n||(d(new hre(g)),(m=t.abort)==null||m.call(t))},u=()=>{e=!0},c=()=>{e=!1},f=()=>!UC.isFocused()||t.networkMode!=="always"&&!WC.isOnline(),h=g=>{var m;n||(n=!0,(m=t.onSuccess)==null||m.call(t,g),i==null||i(),a(g))},d=g=>{var m;n||(n=!0,(m=t.onError)==null||m.call(t,g),i==null||i(),o(g))},p=()=>new Promise(g=>{var m;i=y=>{const w=n||!f();return w&&g(y),w},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(n)return;let g;try{g=t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(h).catch(m=>{var S;if(n)return;const y=t.retry??(wm?0:3),w=t.retryDelay??VMe,b=typeof w=="function"?w(r,m):w,x=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,m);if(e||!x){d(m);return}r++,(S=t.onFail)==null||S.call(t,r,m),zMe(b).then(()=>{if(f())return p()}).then(()=>{e?d(m):v()})})};return bA(t.networkMode)?v():p().then(v),{promise:s,cancel:l,continue:()=>(i==null?void 0:i())?s:Promise.resolve(),cancelRetry:u,continueRetry:c}}function HMe(){let t=[],e=0,r=h=>{h()},n=h=>{h()},i=h=>setTimeout(h,0);const a=h=>{i=h},o=h=>{let d;e++;try{d=h()}finally{e--,e||u()}return d},s=h=>{e?t.push(h):i(()=>{r(h)})},l=h=>(...d)=>{s(()=>{h(...d)})},u=()=>{const h=t;t=[],h.length&&i(()=>{n(()=>{h.forEach(d=>{r(d)})})})};return{batch:o,batchCalls:l,schedule:s,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:a}}var Vi=HMe(),Rp,zY,pre=(zY=class{constructor(){jt(this,Rp,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hL(this.gcTime)&&Ct(this,Rp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wm?1/0:5*60*1e3))}clearGcTimeout(){ue(this,Rp)&&(clearTimeout(ue(this,Rp)),Ct(this,Rp,void 0))}},Rp=new WeakMap,zY),j0,G0,qs,Ch,Ks,na,k2,Np,U0,l_,zl,Yc,jY,XMe=(jY=class extends pre{constructor(e){super();jt(this,U0);jt(this,zl);jt(this,j0,void 0);jt(this,G0,void 0);jt(this,qs,void 0);jt(this,Ch,void 0);jt(this,Ks,void 0);jt(this,na,void 0);jt(this,k2,void 0);jt(this,Np,void 0);Ct(this,Np,!1),Ct(this,k2,e.defaultOptions),Mr(this,U0,l_).call(this,e.options),Ct(this,na,[]),Ct(this,qs,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ct(this,j0,e.state||YMe(this.options)),this.state=ue(this,j0),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!ue(this,na).length&&this.state.fetchStatus==="idle"&&ue(this,qs).remove(this)}setData(e,r){const n=pL(this.state.data,e,this.options);return Mr(this,zl,Yc).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Mr(this,zl,Yc).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n;const r=ue(this,Ch);return(n=ue(this,Ks))==null||n.cancel(e),r?r.then(Zs).catch(Zs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,j0))}isActive(){return ue(this,na).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||ue(this,na).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!cre(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=ue(this,na).find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=ue(this,Ks))==null||r.continue()}onOnline(){var r;const e=ue(this,na).find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=ue(this,Ks))==null||r.continue()}addObserver(e){ue(this,na).includes(e)||(ue(this,na).push(e),this.clearGcTimeout(),ue(this,qs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){ue(this,na).includes(e)&&(Ct(this,na,ue(this,na).filter(r=>r!==e)),ue(this,na).length||(ue(this,Ks)&&(ue(this,Np)?ue(this,Ks).cancel({revert:!0}):ue(this,Ks).cancelRetry()),this.scheduleGc()),ue(this,qs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return ue(this,na).length}invalidate(){this.state.isInvalidated||Mr(this,zl,Yc).call(this,{type:"invalidate"})}fetch(e,r){var u,c,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ue(this,Ch))return(u=ue(this,Ks))==null||u.continueRetry(),ue(this,Ch)}if(e&&Mr(this,U0,l_).call(this,e),!this.options.queryFn){const d=ue(this,na).find(p=>p.options.queryFn);d&&Mr(this,U0,l_).call(this,d.options)}const n=new AbortController,i={queryKey:this.queryKey,meta:this.meta},a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ct(this,Np,!0),n.signal)})};a(i);const o=()=>this.options.queryFn?(Ct(this,Np,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),s={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(s),(c=this.options.behavior)==null||c.onFetch(s,this),Ct(this,G0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=s.fetchOptions)==null?void 0:f.meta))&&Mr(this,zl,Yc).call(this,{type:"fetch",meta:(h=s.fetchOptions)==null?void 0:h.meta});const l=d=>{var p,v,g,m;EO(d)&&d.silent||Mr(this,zl,Yc).call(this,{type:"error",error:d}),EO(d)||((v=(p=ue(this,qs).config).onError)==null||v.call(p,d,this),(m=(g=ue(this,qs).config).onSettled)==null||m.call(g,this.state.data,d,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Ct(this,Ks,dre({fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var p,v,g,m;if(typeof d>"u"){l(new Error(`${this.queryHash} data is undefined`));return}this.setData(d),(v=(p=ue(this,qs).config).onSuccess)==null||v.call(p,d,this),(m=(g=ue(this,qs).config).onSettled)==null||m.call(g,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(d,p)=>{Mr(this,zl,Yc).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{Mr(this,zl,Yc).call(this,{type:"pause"})},onContinue:()=>{Mr(this,zl,Yc).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode})),Ct(this,Ch,ue(this,Ks).promise),ue(this,Ch)}},j0=new WeakMap,G0=new WeakMap,qs=new WeakMap,Ch=new WeakMap,Ks=new WeakMap,na=new WeakMap,k2=new WeakMap,Np=new WeakMap,U0=new WeakSet,l_=function(e){this.options={...ue(this,k2),...e},this.updateGcTime(this.options.gcTime)},zl=new WeakSet,Yc=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:bA(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return EO(i)&&i.revert&&ue(this,G0)?{...ue(this,G0),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Vi.batch(()=>{ue(this,na).forEach(n=>{n.onQueryUpdate()}),ue(this,qs).notify({query:this,type:"updated",action:e})})},jY);function YMe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Fu,GY,qMe=(GY=class extends Zm{constructor(e={}){super();jt(this,Fu,void 0);this.config=e,Ct(this,Fu,new Map)}build(e,r,n){const i=r.queryKey,a=r.queryHash??q4(i,r);let o=this.get(a);return o||(o=new XMe({cache:this,queryKey:i,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ue(this,Fu).has(e.queryHash)||(ue(this,Fu).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=ue(this,Fu).get(e.queryHash);r&&(e.destroy(),r===e&&ue(this,Fu).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ue(this,Fu).get(e)}getAll(){return[...ue(this,Fu).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>fj(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>fj(e,n)):r}notify(e){Vi.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Vi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fu=new WeakMap,GY),Bu,M2,es,W0,$u,lh,UY,KMe=(UY=class extends pre{constructor(e){super();jt(this,$u);jt(this,Bu,void 0);jt(this,M2,void 0);jt(this,es,void 0);jt(this,W0,void 0);this.mutationId=e.mutationId,Ct(this,M2,e.defaultOptions),Ct(this,es,e.mutationCache),Ct(this,Bu,[]),this.state=e.state||vre(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...ue(this,M2),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ue(this,Bu).includes(e)||(ue(this,Bu).push(e),this.clearGcTimeout(),ue(this,es).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ct(this,Bu,ue(this,Bu).filter(r=>r!==e)),this.scheduleGc(),ue(this,es).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ue(this,Bu).length||(this.state.status==="pending"?this.scheduleGc():ue(this,es).remove(this))}continue(){var e;return((e=ue(this,W0))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E;const r=()=>(Ct(this,W0,dre({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,k)=>{Mr(this,$u,lh).call(this,{type:"failed",failureCount:_,error:k})},onPause:()=>{Mr(this,$u,lh).call(this,{type:"pause"})},onContinue:()=>{Mr(this,$u,lh).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),ue(this,W0).promise),n=this.state.status==="pending";try{if(!n){Mr(this,$u,lh).call(this,{type:"pending",variables:e}),await((a=(i=ue(this,es).config).onMutate)==null?void 0:a.call(i,e,this));const k=await((s=(o=this.options).onMutate)==null?void 0:s.call(o,e));k!==this.state.context&&Mr(this,$u,lh).call(this,{type:"pending",context:k,variables:e})}const _=await r();return await((u=(l=ue(this,es).config).onSuccess)==null?void 0:u.call(l,_,e,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,_,e,this.state.context)),await((d=(h=ue(this,es).config).onSettled)==null?void 0:d.call(h,_,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,_,null,e,this.state.context)),Mr(this,$u,lh).call(this,{type:"success",data:_}),_}catch(_){try{throw await((m=(g=ue(this,es).config).onError)==null?void 0:m.call(g,_,e,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,_,e,this.state.context)),await((x=(b=ue(this,es).config).onSettled)==null?void 0:x.call(b,void 0,_,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,_,e,this.state.context)),_}finally{Mr(this,$u,lh).call(this,{type:"error",error:_})}}}},Bu=new WeakMap,M2=new WeakMap,es=new WeakMap,W0=new WeakMap,$u=new WeakSet,lh=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!bA(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vi.batch(()=>{ue(this,Bu).forEach(n=>{n.onMutationUpdate(e)}),ue(this,es).notify({mutation:this,type:"updated",action:e})})},UY);function vre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qs,A2,Fp,WY,QMe=(WY=class extends Zm{constructor(e={}){super();jt(this,Qs,void 0);jt(this,A2,void 0);jt(this,Fp,void 0);this.config=e,Ct(this,Qs,[]),Ct(this,A2,0)}build(e,r,n){const i=new KMe({mutationCache:this,mutationId:++Ix(this,A2)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){ue(this,Qs).push(e),this.notify({type:"added",mutation:e})}remove(e){Ct(this,Qs,ue(this,Qs).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){Vi.batch(()=>{ue(this,Qs).forEach(e=>{this.remove(e)})})}getAll(){return ue(this,Qs)}find(e){const r={exact:!0,...e};return ue(this,Qs).find(n=>hj(r,n))}findAll(e={}){return ue(this,Qs).filter(r=>hj(e,r))}notify(e){Vi.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return Ct(this,Fp,(ue(this,Fp)??Promise.resolve()).then(()=>{const e=ue(this,Qs).filter(r=>r.state.isPaused);return Vi.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(Zs)),Promise.resolve()))}).then(()=>{Ct(this,Fp,void 0)})),ue(this,Fp)}},Qs=new WeakMap,A2=new WeakMap,Fp=new WeakMap,WY);function ZMe(t){return{onFetch:(e,r)=>{const n=async()=>{var p,v,g,m,y;const i=e.options,a=(g=(v=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:v.fetchMore)==null?void 0:g.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],s=((y=e.state.data)==null?void 0:y.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},f=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(w,b,x)=>{if(u)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:e.queryKey,pageParam:b,direction:x?"backward":"forward",meta:e.options.meta};c(S);const E=await f(S),{maxPages:_}=e.options,k=x?GMe:jMe;return{pages:k(w.pages,E,_),pageParams:k(w.pageParams,b,_)}};let d;if(a&&o.length){const w=a==="backward",b=w?JMe:vj,x={pages:o,pageParams:s},S=b(i,x);d=await h(x,S,w)}else{d=await h(l,s[0]??i.initialPageParam);const w=t??o.length;for(let b=1;b<w;b++){const x=vj(i,d);d=await h(d,x)}}return d};e.options.persister?e.fetchFn=()=>{var i,a;return(a=(i=e.options).persister)==null?void 0:a.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function vj(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function JMe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var zi,kh,Mh,V0,H0,Ah,X0,Y0,VY,eAe=(VY=class{constructor(t={}){jt(this,zi,void 0);jt(this,kh,void 0);jt(this,Mh,void 0);jt(this,V0,void 0);jt(this,H0,void 0);jt(this,Ah,void 0);jt(this,X0,void 0);jt(this,Y0,void 0);Ct(this,zi,t.queryCache||new qMe),Ct(this,kh,t.mutationCache||new QMe),Ct(this,Mh,t.defaultOptions||{}),Ct(this,V0,new Map),Ct(this,H0,new Map),Ct(this,Ah,0)}mount(){Ix(this,Ah)._++,ue(this,Ah)===1&&(Ct(this,X0,UC.subscribe(()=>{UC.isFocused()&&(this.resumePausedMutations(),ue(this,zi).onFocus())})),Ct(this,Y0,WC.subscribe(()=>{WC.isOnline()&&(this.resumePausedMutations(),ue(this,zi).onOnline())})))}unmount(){var t,e;Ix(this,Ah)._--,ue(this,Ah)===0&&((t=ue(this,X0))==null||t.call(this),Ct(this,X0,void 0),(e=ue(this,Y0))==null||e.call(this),Ct(this,Y0,void 0))}isFetching(t){return ue(this,zi).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ue(this,kh).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=ue(this,zi).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=ue(this,zi).find({queryKey:t}),i=n==null?void 0:n.state.data,a=$Me(e,i);if(typeof a>"u")return;const o=this.defaultQueryOptions({queryKey:t});return ue(this,zi).build(this,o).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Vi.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=ue(this,zi).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=ue(this,zi);Vi.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=ue(this,zi),n={type:"active",...t};return Vi.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Vi.batch(()=>ue(this,zi).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Zs).catch(Zs)}invalidateQueries(t={},e={}){return Vi.batch(()=>{if(ue(this,zi).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Vi.batch(()=>ue(this,zi).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Zs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Zs)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=ue(this,zi).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zs).catch(Zs)}fetchInfiniteQuery(t){return t.behavior=ZMe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zs).catch(Zs)}resumePausedMutations(){return ue(this,kh).resumePausedMutations()}getQueryCache(){return ue(this,zi)}getMutationCache(){return ue(this,kh)}getDefaultOptions(){return ue(this,Mh)}setDefaultOptions(t){Ct(this,Mh,t)}setQueryDefaults(t,e){ue(this,V0).set(hv(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ue(this,V0).values()];let r={};return e.forEach(n=>{Vw(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){ue(this,H0).set(hv(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ue(this,H0).values()];let r={};return e.forEach(n=>{Vw(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...ue(this,Mh).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=q4(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ue(this,Mh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ue(this,zi).clear(),ue(this,kh).clear()}},zi=new WeakMap,kh=new WeakMap,Mh=new WeakMap,V0=new WeakMap,H0=new WeakMap,Ah=new WeakMap,X0=new WeakMap,Y0=new WeakMap,VY),Ao,Mn,T2,Ja,Bp,q0,zu,I2,K0,Q0,$p,zp,Th,Z0,jp,b1,O2,vL,D2,gL,P2,mL,L2,yL,R2,wL,N2,bL,F2,xL,vM,gre,HY,tAe=(HY=class extends Zm{constructor(e,r){super();jt(this,jp);jt(this,O2);jt(this,D2);jt(this,P2);jt(this,L2);jt(this,R2);jt(this,N2);jt(this,F2);jt(this,vM);jt(this,Ao,void 0);jt(this,Mn,void 0);jt(this,T2,void 0);jt(this,Ja,void 0);jt(this,Bp,void 0);jt(this,q0,void 0);jt(this,zu,void 0);jt(this,I2,void 0);jt(this,K0,void 0);jt(this,Q0,void 0);jt(this,$p,void 0);jt(this,zp,void 0);jt(this,Th,void 0);jt(this,Z0,new Set);this.options=r,Ct(this,Ao,e),Ct(this,zu,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ue(this,Mn).addObserver(this),gj(ue(this,Mn),this.options)?Mr(this,jp,b1).call(this):this.updateResult(),Mr(this,L2,yL).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return SL(ue(this,Mn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return SL(ue(this,Mn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Mr(this,R2,wL).call(this),Mr(this,N2,bL).call(this),ue(this,Mn).removeObserver(this)}setOptions(e,r){const n=this.options,i=ue(this,Mn);if(this.options=ue(this,Ao).defaultQueryOptions(e),GC(n,this.options)||ue(this,Ao).getQueryCache().notify({type:"observerOptionsUpdated",query:ue(this,Mn),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Mr(this,F2,xL).call(this);const a=this.hasListeners();a&&mj(ue(this,Mn),i,this.options,n)&&Mr(this,jp,b1).call(this),this.updateResult(r),a&&(ue(this,Mn)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Mr(this,O2,vL).call(this);const o=Mr(this,D2,gL).call(this);a&&(ue(this,Mn)!==i||this.options.enabled!==n.enabled||o!==ue(this,Th))&&Mr(this,P2,mL).call(this,o)}getOptimisticResult(e){const r=ue(this,Ao).getQueryCache().build(ue(this,Ao),e),n=this.createResult(r,e);return nAe(this,n)&&(Ct(this,Ja,n),Ct(this,q0,this.options),Ct(this,Bp,ue(this,Mn).state)),n}getCurrentResult(){return ue(this,Ja)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(ue(this,Z0).add(n),e[n])})}),r}getCurrentQuery(){return ue(this,Mn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=ue(this,Ao).defaultQueryOptions(e),n=ue(this,Ao).getQueryCache().build(ue(this,Ao),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Mr(this,jp,b1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ue(this,Ja)))}createResult(e,r){var S;const n=ue(this,Mn),i=this.options,a=ue(this,Ja),o=ue(this,Bp),s=ue(this,q0),u=e!==n?e.state:ue(this,T2),{state:c}=e;let{error:f,errorUpdatedAt:h,fetchStatus:d,status:p}=c,v=!1,g;if(r._optimisticResults){const E=this.hasListeners(),_=!E&&gj(e,r),k=E&&mj(e,n,r,i);(_||k)&&(d=bA(e.options.networkMode)?"fetching":"paused",c.dataUpdatedAt||(p="pending")),r._optimisticResults==="isRestoring"&&(d="idle")}if(r.select&&typeof c.data<"u")if(a&&c.data===(o==null?void 0:o.data)&&r.select===ue(this,I2))g=ue(this,K0);else try{Ct(this,I2,r.select),g=r.select(c.data),g=pL(a==null?void 0:a.data,g,r),Ct(this,K0,g),Ct(this,zu,null)}catch(E){Ct(this,zu,E)}else g=c.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&p==="pending"){let E;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(s==null?void 0:s.placeholderData))E=a.data;else if(E=typeof r.placeholderData=="function"?r.placeholderData((S=ue(this,Q0))==null?void 0:S.state.data,ue(this,Q0)):r.placeholderData,r.select&&typeof E<"u")try{E=r.select(E),Ct(this,zu,null)}catch(_){Ct(this,zu,_)}typeof E<"u"&&(p="success",g=pL(a==null?void 0:a.data,E,r),v=!0)}ue(this,zu)&&(f=ue(this,zu),g=ue(this,K0),h=Date.now(),p="error");const m=d==="fetching",y=p==="pending",w=p==="error",b=y&&m;return{status:p,fetchStatus:d,isPending:y,isSuccess:p==="success",isError:w,isInitialLoading:b,isLoading:b,data:g,dataUpdatedAt:c.dataUpdatedAt,error:f,errorUpdatedAt:h,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:w&&c.dataUpdatedAt===0,isPaused:d==="paused",isPlaceholderData:v,isRefetchError:w&&c.dataUpdatedAt!==0,isStale:K4(e,r),refetch:this.refetch}}updateResult(e){const r=ue(this,Ja),n=this.createResult(ue(this,Mn),this.options);if(Ct(this,Bp,ue(this,Mn).state),Ct(this,q0,this.options),ue(this,Bp).data!==void 0&&Ct(this,Q0,ue(this,Mn)),GC(n,r))return;Ct(this,Ja,n);const i={},a=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,s=typeof o=="function"?o():o;if(s==="all"||!s&&!ue(this,Z0).size)return!0;const l=new Set(s??ue(this,Z0));return this.options.throwOnError&&l.add("error"),Object.keys(ue(this,Ja)).some(u=>{const c=u;return ue(this,Ja)[c]!==r[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&a()&&(i.listeners=!0),Mr(this,vM,gre).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Mr(this,L2,yL).call(this)}},Ao=new WeakMap,Mn=new WeakMap,T2=new WeakMap,Ja=new WeakMap,Bp=new WeakMap,q0=new WeakMap,zu=new WeakMap,I2=new WeakMap,K0=new WeakMap,Q0=new WeakMap,$p=new WeakMap,zp=new WeakMap,Th=new WeakMap,Z0=new WeakMap,jp=new WeakSet,b1=function(e){Mr(this,F2,xL).call(this);let r=ue(this,Mn).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Zs)),r},O2=new WeakSet,vL=function(){if(Mr(this,R2,wL).call(this),wm||ue(this,Ja).isStale||!hL(this.options.staleTime))return;const r=cre(ue(this,Ja).dataUpdatedAt,this.options.staleTime)+1;Ct(this,$p,setTimeout(()=>{ue(this,Ja).isStale||this.updateResult()},r))},D2=new WeakSet,gL=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ue(this,Mn)):this.options.refetchInterval)??!1},P2=new WeakSet,mL=function(e){Mr(this,N2,bL).call(this),Ct(this,Th,e),!(wm||this.options.enabled===!1||!hL(ue(this,Th))||ue(this,Th)===0)&&Ct(this,zp,setInterval(()=>{(this.options.refetchIntervalInBackground||UC.isFocused())&&Mr(this,jp,b1).call(this)},ue(this,Th)))},L2=new WeakSet,yL=function(){Mr(this,O2,vL).call(this),Mr(this,P2,mL).call(this,Mr(this,D2,gL).call(this))},R2=new WeakSet,wL=function(){ue(this,$p)&&(clearTimeout(ue(this,$p)),Ct(this,$p,void 0))},N2=new WeakSet,bL=function(){ue(this,zp)&&(clearInterval(ue(this,zp)),Ct(this,zp,void 0))},F2=new WeakSet,xL=function(){const e=ue(this,Ao).getQueryCache().build(ue(this,Ao),this.options);if(e===ue(this,Mn))return;const r=ue(this,Mn);Ct(this,Mn,e),Ct(this,T2,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},vM=new WeakSet,gre=function(e){Vi.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(ue(this,Ja))}),ue(this,Ao).getQueryCache().notify({query:ue(this,Mn),type:"observerResultsUpdated"})})},HY);function rAe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function gj(t,e){return rAe(t,e)||t.state.dataUpdatedAt>0&&SL(t,e,e.refetchOnMount)}function SL(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&K4(t,e)}return!1}function mj(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&K4(t,r)}function K4(t,e){return t.isStaleByTime(e.staleTime)}function nAe(t,e){return!GC(t.getCurrentResult(),e)}var Ih,Oh,ts,rf,J0,u_,B2,EL,XY,iAe=(XY=class extends Zm{constructor(r,n){super();jt(this,J0);jt(this,B2);jt(this,Ih,void 0);jt(this,Oh,void 0);jt(this,ts,void 0);jt(this,rf,void 0);Ct(this,Ih,r),this.setOptions(n),this.bindMethods(),Mr(this,J0,u_).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=ue(this,Ih).defaultMutationOptions(r),GC(n,this.options)||ue(this,Ih).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ue(this,ts),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&hv(n.mutationKey)!==hv(this.options.mutationKey)?this.reset():(i=ue(this,ts))==null||i.setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ue(this,ts))==null||r.removeObserver(this)}onMutationUpdate(r){Mr(this,J0,u_).call(this),Mr(this,B2,EL).call(this,r)}getCurrentResult(){return ue(this,Oh)}reset(){var r;(r=ue(this,ts))==null||r.removeObserver(this),Ct(this,ts,void 0),Mr(this,J0,u_).call(this),Mr(this,B2,EL).call(this)}mutate(r,n){var i;return Ct(this,rf,n),(i=ue(this,ts))==null||i.removeObserver(this),Ct(this,ts,ue(this,Ih).getMutationCache().build(ue(this,Ih),this.options)),ue(this,ts).addObserver(this),ue(this,ts).execute(r)}},Ih=new WeakMap,Oh=new WeakMap,ts=new WeakMap,rf=new WeakMap,J0=new WeakSet,u_=function(){var n;const r=((n=ue(this,ts))==null?void 0:n.state)??vre();Ct(this,Oh,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},B2=new WeakSet,EL=function(r){Vi.batch(()=>{var n,i,a,o,s,l,u,c;if(ue(this,rf)&&this.hasListeners()){const f=ue(this,Oh).variables,h=ue(this,Oh).context;(r==null?void 0:r.type)==="success"?((i=(n=ue(this,rf)).onSuccess)==null||i.call(n,r.data,f,h),(o=(a=ue(this,rf)).onSettled)==null||o.call(a,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((l=(s=ue(this,rf)).onError)==null||l.call(s,r.error,f,h),(c=(u=ue(this,rf)).onSettled)==null||c.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(ue(this,Oh))})})},XY),mre=ae.createContext(void 0),yre=t=>{const e=ae.useContext(mre);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},aAe=({client:t,children:e})=>(ae.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Oe.jsx(mre.Provider,{value:t,children:e})),wre=ae.createContext(!1),oAe=()=>ae.useContext(wre);wre.Provider;function sAe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var lAe=ae.createContext(sAe()),uAe=()=>ae.useContext(lAe);function bre(t,e){return typeof t=="function"?t(...e):!!t}var cAe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},fAe=t=>{ae.useEffect(()=>{t.clearReset()},[t])},hAe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&bre(r,[t.error,n]),dAe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},pAe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,vAe=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function gAe(t,e,r){const n=yre(r),i=oAe(),a=uAe(),o=n.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",dAe(o),cAe(o,a),fAe(a);const[s]=ae.useState(()=>new e(n,o)),l=s.getOptimisticResult(o);if(ae.useSyncExternalStore(ae.useCallback(u=>{const c=i?()=>{}:s.subscribe(Vi.batchCalls(u));return s.updateResult(),c},[s,i]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),ae.useEffect(()=>{s.setOptions(o,{listeners:!1})},[o,s]),pAe(o,l))throw vAe(o,s,a);if(hAe({result:l,errorResetBoundary:a,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw l.error;return o.notifyOnChangeProps?l:s.trackResult(l)}function mAe(t,e){return gAe(t,tAe,e)}function xre(t,e){const r=yre(e),[n]=ae.useState(()=>new iAe(r,t));ae.useEffect(()=>{n.setOptions(t)},[n,t]);const i=ae.useSyncExternalStore(ae.useCallback(o=>n.subscribe(Vi.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=ae.useCallback((o,s)=>{n.mutate(o,s).catch(yAe)},[n]);if(i.error&&bre(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function yAe(){}async function Q4(t){return t.ok?t.json():t.text().then(e=>{throw new Error(e)})}function Z4(t){return fetch(`https://query.wikidata.org/sparql?query=${encodeURIComponent(t)}`,{headers:{Accept:"application/sparql-results+json"}}).then(Q4)}async function yj(t,e,r){const n=await t.sendMessages([{content:`Respond with a brief name for this query. If you generated this query, it can just be the question that the user asked.
      ${e}`,role:"system"}]);if(!r)return{name:n,summary:""};const i=await t.sendMessages([{content:`These are the JSON results from the last query. Respond with a brief summary of the results.
      ${JSON.stringify(r,void 0,2)}`,role:"system"}]);return{name:n,summary:i}}const jg="4.28.4";let wj=!1,q1,Sre,Ere,_L,_re,Cre,kre,Mre,Are;function wAe(t,e={auto:!1}){if(wj)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(q1)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${q1}'\``);wj=e.auto,q1=t.kind,Sre=t.fetch,t.Request,t.Response,t.Headers,Ere=t.FormData,t.Blob,_L=t.File,_re=t.ReadableStream,Cre=t.getMultipartRequestOptions,kre=t.getDefaultAgent,Mre=t.fileFromPath,Are=t.isFsReadStream}class bAe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function xAe({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,i,a;try{r=fetch,n=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new bAe(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}q1||wAe(xAe(),{auto:!0});class on extends Error{}class Ya extends on{constructor(e,r,n,i){super(`${Ya.makeMessage(e,r,n)}`),this.status=e,this.headers=i;const a=r;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,r,n){const i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e)return new xA({cause:kL(r)});const a=r==null?void 0:r.error;return e===400?new Tre(e,a,n,i):e===401?new Ire(e,a,n,i):e===403?new Ore(e,a,n,i):e===404?new Dre(e,a,n,i):e===409?new Pre(e,a,n,i):e===422?new Lre(e,a,n,i):e===429?new Rre(e,a,n,i):e>=500?new Nre(e,a,n,i):new Ya(e,a,n,i)}}class dv extends Ya{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class xA extends Ya{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class J4 extends xA{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Tre extends Ya{constructor(){super(...arguments),this.status=400}}class Ire extends Ya{constructor(){super(...arguments),this.status=401}}class Ore extends Ya{constructor(){super(...arguments),this.status=403}}class Dre extends Ya{constructor(){super(...arguments),this.status=404}}class Pre extends Ya{constructor(){super(...arguments),this.status=409}}class Lre extends Ya{constructor(){super(...arguments),this.status=422}}class Rre extends Ya{constructor(){super(...arguments),this.status=429}}class Nre extends Ya{}class Bh{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;const i=new SAe;async function*a(){if(!e.body)throw r.abort(),new on("Attempted to iterate over a response with no body");const s=new pv,l=bj(e.body);for await(const u of l)for(const c of s.decode(u)){const f=i.decode(c);f&&(yield f)}for(const u of s.flush()){const c=i.decode(u);c&&(yield c)}}async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const l of a())if(!s){if(l.data.startsWith("[DONE]")){s=!0;continue}if(l.event===null){let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(u&&u.error)throw new Ya(void 0,u.error,void 0,void 0);yield u}}s=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{s||r.abort()}}return new Bh(o,r)}static fromReadableStream(e,r){let n=!1;async function*i(){const o=new pv,s=bj(e);for await(const l of s)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||r.abort()}}return new Bh(a,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),r.push(o)}return a.shift()}});return[new Bh(()=>i(e),this.controller),new Bh(()=>i(r),this.controller)]}toReadableStream(){const e=this;let r;const n=new TextEncoder;return new _re({async start(){r=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await r.next();if(o)return i.close();const s=n.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=r.return)==null?void 0:i.call(r))}})}}class SAe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=EAe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class pv{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=pv.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(pv.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new on(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new on(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new on("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}pv.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);pv.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function EAe(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function bj(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Fre=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",_Ae=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Bre(t),Bre=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CAe=t=>_Ae(t)||Fre(t)||Are(t);async function $re(t,e,r={}){var i;if(t=await t,Fre(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new _L([a],e,r)}const n=await kAe(t);if(e||(e=AAe(t)??"unknown_file"),!r.type){const a=(i=n[0])==null?void 0:i.type;typeof a=="string"&&(r={...r,type:a})}return new _L(n,e,r)}async function kAe(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Bre(t))e.push(await t.arrayBuffer());else if(TAe(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${MAe(t)}`);return e}function MAe(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function AAe(t){var e;return _O(t.name)||_O(t.filename)||((e=_O(t.path))==null?void 0:e.split(/[\\/]/).pop())}const _O=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},TAe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",xj=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Hw=async t=>{const e=await IAe(t.body);return Cre(e,t)},IAe=async t=>{const e=new Ere;return await Promise.all(Object.entries(t||{}).map(([r,n])=>CL(e,r,n))),e},CL=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(CAe(r)){const n=await $re(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>CL(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>CL(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var c_={},OAe=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},DAe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},CS;async function zre(t){const{response:e}=t;if(t.options.stream)return M0("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Bh.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const a=await e.json();return M0("response",e.status,e.url,e.headers,a),a}const i=await e.text();return M0("response",e.status,e.url,e.headers,i),i}class SA extends Promise{constructor(e,r=zre){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new SA(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class PAe{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=CO("maxRetries",r),this.timeout=CO("timeout",n),this.httpAgent=i,this.fetch=a??Sre}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...$Ae(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${UAe()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var p;const{method:r,path:n,query:i,headers:a={}}=e,o=xj(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(o),l=this.buildURL(n,i);"timeout"in e&&CO("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??kre(l),f=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&f>(c.options.timeout??0)&&(c.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const h=this.buildHeaders({options:e,headers:a,contentLength:s});return{req:{method:r,...o&&{body:o},headers:h,...c&&{agent:c},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:r,contentLength:n}){const i={};n&&(i["content-length"]=n);const a=this.defaultHeaders(e);return Cj(i,a),Cj(i,r),xj(e.body)&&q1!=="node"&&delete i["content-type"],this.validateHeaders(i,r),i}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,i){return Ya.generate(e,r,n,i)}request(e,r=null){return new SA(this.makeRequest(e,r))}async makeRequest(e,r){var c,f;const n=await e;r==null&&(r=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:i,url:a,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(i,{url:a,options:n}),M0("request",a,n,i.headers),(c=n.signal)!=null&&c.aborted)throw new dv;const s=new AbortController,l=await this.fetchWithTimeout(a,i,o,s).catch(kL);if(l instanceof Error){if((f=n.signal)!=null&&f.aborted)throw new dv;if(r)return this.retryRequest(n,r);throw l.name==="AbortError"?new J4:new xA({cause:l})}const u=RAe(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){const m=`retrying, ${r} attempts remaining`;return M0(`response (error; ${m})`,l.status,a,u),this.retryRequest(n,r,u)}const h=await l.text().catch(m=>kL(m).message),d=zAe(h),p=d?void 0:h;throw M0(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,a,u,p),this.makeStatusError(l.status,d,p,u)}return{response:l,options:n,controller:s}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new LAe(this,n,e)}buildURL(e,r){const n=GAe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Ure(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new on(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,i){const{signal:a,...o}=r||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...o}).finally(()=>{clearTimeout(s)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let i;const a=n==null?void 0:n["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=n==null?void 0:n["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(r,s)}return await Gre(i),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){const a=r-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${jg}`}}class jre{constructor(e,r,n,i){CS.set(this,void 0),OAe(this,CS,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new on("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[i,a]of n)e.url.searchParams.set(i,a);r.query=void 0,r.path=e.url.toString()}return await DAe(this,CS,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(CS=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class LAe extends SA{constructor(e,r,n){super(r,async i=>new n(e,i.response,await zre(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const RAe=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),NAe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},dc=t=>typeof t=="object"&&t!==null&&!Ure(t)&&Object.keys(t).every(e=>Wre(NAe,e)),FAe=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":Ej(Deno.build.os),"X-Stainless-Arch":Sj(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":Ej(process.platform),"X-Stainless-Arch":Sj(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=BAe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function BAe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const Sj=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ej=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _j;const $Ae=()=>_j??(_j=FAe()),zAe=t=>{try{return JSON.parse(t)}catch{return}},jAe=new RegExp("^(?:[a-z]+:)?//","i"),GAe=t=>jAe.test(t),Gre=t=>new Promise(e=>setTimeout(e,t)),CO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new on(`${t} must be an integer`);if(e<0)throw new on(`${t} must be a positive integer`);return e},kL=t=>t instanceof Error?t:new Error(t),kO=t=>{var e,r,n,i;if(typeof process<"u")return((e=c_==null?void 0:c_[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:i.trim()};function Ure(t){if(!t)return!0;for(const e in t)return!1;return!0}function Wre(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cj(t,e){for(const r in e){if(!Wre(e,r))continue;const n=r.toLowerCase();if(!n)continue;const i=e[r];i===null?delete t[n]:i!==void 0&&(t[n]=i)}}function M0(t,...e){typeof process<"u"&&c_.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const UAe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),WAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class e8 extends jre{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class If extends jre{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const r=(n=e[e.length-1])==null?void 0:n.id;return r?{params:{after:r}}:null}}class Un{constructor(e){this._client=e}}let VC=class extends Un{create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}};VC||(VC={});let HC=class extends Un{constructor(){super(...arguments),this.completions=new VC(this._client)}};(function(t){t.Completions=VC})(HC||(HC={}));class XC extends Un{create(e,r){return this._client.post("/audio/speech",{body:e,...r,__binaryResponse:!0})}}XC||(XC={});class YC extends Un{create(e,r){return this._client.post("/audio/transcriptions",Hw({body:e,...r}))}}YC||(YC={});class qC extends Un{create(e,r){return this._client.post("/audio/translations",Hw({body:e,...r}))}}qC||(qC={});class KC extends Un{constructor(){super(...arguments),this.transcriptions=new YC(this._client),this.translations=new qC(this._client),this.speech=new XC(this._client)}}(function(t){t.Transcriptions=YC,t.Translations=qC,t.Speech=XC})(KC||(KC={}));let QC=class extends Un{create(e,r,n){return this._client.post(`/assistants/${e}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/assistants/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(e,r={},n){return dc(r)?this.list(e,{},r):this._client.getAPIList(`/assistants/${e}/files`,t8,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/assistants/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class t8 extends If{}(function(t){t.AssistantFilesPage=t8})(QC||(QC={}));class ZC extends Un{constructor(){super(...arguments),this.files=new QC(this._client)}create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/assistants/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(e={},r){return dc(e)?this.list({},e):this._client.getAPIList("/assistants",r8,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class r8 extends If{}(function(t){t.AssistantsPage=r8,t.Files=QC,t.AssistantFilesPage=t8})(ZC||(ZC={}));function kj(t){return typeof t.parse=="function"}const A0=t=>(t==null?void 0:t.role)==="assistant",Vre=t=>(t==null?void 0:t.role)==="function",Hre=t=>(t==null?void 0:t.role)==="tool";var Pl=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Vr=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},$a,f_,h_,x1,S1,d_,E1,qc,_1,p_,v_,Gg,ML,JC,AL,TL,IL,OL,Xre,DL;const Mj=10;class Yre{constructor(){$a.add(this),this.controller=new AbortController,f_.set(this,void 0),h_.set(this,()=>{}),x1.set(this,()=>{}),S1.set(this,void 0),d_.set(this,()=>{}),E1.set(this,()=>{}),qc.set(this,{}),this._chatCompletions=[],this.messages=[],_1.set(this,!1),p_.set(this,!1),v_.set(this,!1),Gg.set(this,!1),OL.set(this,e=>{if(Pl(this,p_,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new dv),e instanceof dv)return Pl(this,v_,!0,"f"),this._emit("abort",e);if(e instanceof on)return this._emit("error",e);if(e instanceof Error){const r=new on(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new on(String(e)))}),Pl(this,f_,new Promise((e,r)=>{Pl(this,h_,e,"f"),Pl(this,x1,r,"f")}),"f"),Pl(this,S1,new Promise((e,r)=>{Pl(this,d_,e,"f"),Pl(this,E1,r,"f")}),"f"),Vr(this,f_,"f").catch(()=>{}),Vr(this,S1,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Vr(this,OL,"f"))},0)}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),(Vre(e)||Hre(e))&&e.content)this._emit("functionCallResult",e.content);else if(A0(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(A0(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}_connected(){this.ended||(Vr(this,h_,"f").call(this),this._emit("connect"))}get ended(){return Vr(this,_1,"f")}get errored(){return Vr(this,p_,"f")}get aborted(){return Vr(this,v_,"f")}abort(){this.controller.abort()}on(e,r){return(Vr(this,qc,"f")[e]||(Vr(this,qc,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=Vr(this,qc,"f")[e];if(!n)return this;const i=n.findIndex(a=>a.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Vr(this,qc,"f")[e]||(Vr(this,qc,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Pl(this,Gg,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Pl(this,Gg,!0,"f"),await Vr(this,S1,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new on("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Vr(this,$a,"m",ML).call(this)}async finalMessage(){return await this.done(),Vr(this,$a,"m",JC).call(this)}async finalFunctionCall(){return await this.done(),Vr(this,$a,"m",AL).call(this)}async finalFunctionCallResult(){return await this.done(),Vr(this,$a,"m",TL).call(this)}async totalUsage(){return await this.done(),Vr(this,$a,"m",IL).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...r){if(Vr(this,_1,"f"))return;e==="end"&&(Pl(this,_1,!0,"f"),Vr(this,d_,"f").call(this));const n=Vr(this,qc,"f")[e];if(n&&(Vr(this,qc,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){const i=r[0];!Vr(this,Gg,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Vr(this,x1,"f").call(this,i),Vr(this,E1,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=r[0];!Vr(this,Gg,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Vr(this,x1,"f").call(this,i),Vr(this,E1,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=Vr(this,$a,"m",JC).call(this);r&&this._emit("finalMessage",r);const n=Vr(this,$a,"m",ML).call(this);n&&this._emit("finalContent",n);const i=Vr(this,$a,"m",AL).call(this);i&&this._emit("finalFunctionCall",i);const a=Vr(this,$a,"m",TL).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Vr(this,$a,"m",IL).call(this))}async _createChatCompletion(e,r,n){const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Vr(this,$a,"m",Xre).call(this,r);const a=await e.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(a)}async _runChatCompletion(e,r,n){for(const i of r.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,r,n)}async _runFunctions(e,r,n){var h;const i="function",{function_call:a="auto",stream:o,...s}=r,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:u=Mj}=n||{},c={};for(const d of r.functions)c[d.name||d.function.name]=d;const f=r.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of r.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const v=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!v)throw new on("missing message in ChatCompletion response");if(!v.function_call)return;const{name:g,arguments:m}=v.function_call,y=c[g];if(y){if(l&&l!==g){const S=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:g,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${f.map(E=>JSON.stringify(E.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:S});continue}let w;try{w=kj(y)?await y.parse(m):m}catch(S){this._addMessage({role:i,name:g,content:S instanceof Error?S.message:String(S)});continue}const b=await y.function(w,this),x=Vr(this,$a,"m",DL).call(this,b);if(this._addMessage({role:i,name:g,content:x}),l)return}}async _runTools(e,r,n){var h,d;const i="tool",{tool_choice:a="auto",stream:o,...s}=r,l=typeof a!="string"&&((h=a==null?void 0:a.function)==null?void 0:h.name),{maxChatCompletions:u=Mj}=n||{},c={};for(const p of r.tools)p.type==="function"&&(c[p.function.name||p.function.function.name]=p.function);const f="tools"in r?r.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const g=(d=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:f,messages:[...this.messages]},n)).choices[0])==null?void 0:d.message;if(!g)throw new on("missing message in ChatCompletion response");if(!g.tool_calls)return;for(const m of g.tool_calls){if(m.type!=="function")continue;const y=m.id,{name:w,arguments:b}=m.function,x=c[w];if(x){if(l&&l!==w){const k=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${f.map(C=>JSON.stringify(C.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:k});continue}let S;try{S=kj(x)?await x.parse(b):b}catch(k){const C=k instanceof Error?k.message:String(k);this._addMessage({role:i,tool_call_id:y,content:C});continue}const E=await x.function(S,this),_=Vr(this,$a,"m",DL).call(this,E);if(this._addMessage({role:i,tool_call_id:y,content:_}),l)return}}}}f_=new WeakMap,h_=new WeakMap,x1=new WeakMap,S1=new WeakMap,d_=new WeakMap,E1=new WeakMap,qc=new WeakMap,_1=new WeakMap,p_=new WeakMap,v_=new WeakMap,Gg=new WeakMap,OL=new WeakMap,$a=new WeakSet,ML=function(){return Vr(this,$a,"m",JC).call(this).content??null},JC=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(A0(r))return{...r,content:r.content??null}}throw new on("stream ended without producing a ChatCompletionMessage with role=assistant")},AL=function(){var e,r;for(let n=this.messages.length-1;n>=0;n--){const i=this.messages[n];if(A0(i)&&(i!=null&&i.function_call))return i.function_call;if(A0(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(r=i.tool_calls.at(-1))==null?void 0:r.function}},TL=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(Vre(r)&&r.content!=null||Hre(r)&&r.content!=null&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===r.tool_call_id))}))return r.content}},IL=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},Xre=function(e){if(e.n!=null&&e.n>1)throw new on("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},DL=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Xw extends Yre{static runFunctions(e,r,n){const i=new Xw,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,a)),i}static runTools(e,r,n){const i=new Xw,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,a)),i}_addMessage(e){super._addMessage(e),A0(e)&&e.content&&this._emit("content",e.content)}}var Ll=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},MO=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Cu,eh,AO,TO,kS,Aj;class Yw extends Yre{constructor(){super(...arguments),Cu.add(this),eh.set(this,void 0)}get currentChatCompletionSnapshot(){return Ll(this,eh,"f")}static fromReadableStream(e){const r=new Yw;return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const i=new Yw;return i._run(()=>i._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,r,n){var o;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ll(this,Cu,"m",AO).call(this);const a=await e.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const s of a)Ll(this,Cu,"m",TO).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new dv;return this._addChatCompletion(Ll(this,Cu,"m",kS).call(this))}async _fromReadableStream(e,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Ll(this,Cu,"m",AO).call(this),this._connected();const i=Bh.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(Ll(this,Cu,"m",kS).call(this)),Ll(this,Cu,"m",TO).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new dv;return this._addChatCompletion(Ll(this,Cu,"m",kS).call(this))}[(eh=new WeakMap,Cu=new WeakSet,AO=function(){this.ended||MO(this,eh,void 0,"f")},TO=function(r){var o,s,l;if(this.ended)return;const n=Ll(this,Cu,"m",Aj).call(this,r);this._emit("chunk",r,n);const i=(s=(o=r.choices[0])==null?void 0:o.delta)==null?void 0:s.content,a=(l=n.choices[0])==null?void 0:l.message;i!=null&&(a==null?void 0:a.role)==="assistant"&&(a!=null&&a.content)&&this._emit("content",i,a.content)},kS=function(){if(this.ended)throw new on("stream has ended, this shouldn't happen");const r=Ll(this,eh,"f");if(!r)throw new on("request ended without sending any chunks");return MO(this,eh,void 0,"f"),VAe(r)},Aj=function(r){var n,i,a;let o=Ll(this,eh,"f");const{choices:s,...l}=r;o?Object.assign(o,l):o=MO(this,eh,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:f,logprobs:h=null,...d}of r.choices){let p=o.choices[f];if(p||(p=o.choices[f]={finish_reason:c,index:f,message:{},logprobs:h,...d}),h)if(!p.logprobs)p.logprobs=Object.assign({},h);else{const{content:b,...x}=h;Object.assign(p.logprobs,x),b&&((n=p.logprobs).content??(n.content=[]),p.logprobs.content.push(...b))}if(c&&(p.finish_reason=c),Object.assign(p,d),!u)continue;const{content:v,function_call:g,role:m,tool_calls:y,...w}=u;if(Object.assign(p.message,w),v&&(p.message.content=(p.message.content||"")+v),m&&(p.message.role=m),g&&(p.message.function_call?(g.name&&(p.message.function_call.name=g.name),g.arguments&&((i=p.message.function_call).arguments??(i.arguments=""),p.message.function_call.arguments+=g.arguments)):p.message.function_call=g),y){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:b,id:x,type:S,function:E,..._}of y){const k=(a=p.message.tool_calls)[b]??(a[b]={});Object.assign(k,_),x&&(k.id=x),S&&(k.type=S),E&&(k.function??(k.function={arguments:""})),E!=null&&E.name&&(k.function.name=E.name),E!=null&&E.arguments&&(k.function.arguments+=E.arguments)}}}return o},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",i=>{const a=r.shift();a?a(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of r)i(void 0);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise(a=>r.push(a)).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new Bh(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function VAe(t){const{id:e,choices:r,created:n,model:i,system_fingerprint:a,...o}=t;return{...o,id:e,choices:r.map(({message:s,finish_reason:l,index:u,logprobs:c,...f})=>{if(!l)throw new on(`missing finish_reason for choice ${u}`);const{content:h=null,function_call:d,tool_calls:p,...v}=s,g=s.role;if(!g)throw new on(`missing role for choice ${u}`);if(d){const{arguments:m,name:y}=d;if(m==null)throw new on(`missing function_call.arguments for choice ${u}`);if(!y)throw new on(`missing function_call.name for choice ${u}`);return{...f,message:{content:h,function_call:{arguments:m,name:y},role:g},finish_reason:l,index:u,logprobs:c}}return p?{...f,index:u,finish_reason:l,logprobs:c,message:{...v,role:g,content:h,tool_calls:p.map((m,y)=>{const{function:w,type:b,id:x,...S}=m,{arguments:E,name:_,...k}=w||{};if(x==null)throw new on(`missing choices[${u}].tool_calls[${y}].id
${MS(t)}`);if(b==null)throw new on(`missing choices[${u}].tool_calls[${y}].type
${MS(t)}`);if(_==null)throw new on(`missing choices[${u}].tool_calls[${y}].function.name
${MS(t)}`);if(E==null)throw new on(`missing choices[${u}].tool_calls[${y}].function.arguments
${MS(t)}`);return{...S,id:x,type:b,function:{...k,name:_,arguments:E}}})}}:{...f,message:{...v,content:h,role:g},finish_reason:l,index:u,logprobs:c}}),created:n,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}}}function MS(t){return JSON.stringify(t)}class T0 extends Yw{static fromReadableStream(e){const r=new T0;return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,n){const i=new T0,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,a)),i}static runTools(e,r,n){const i=new T0,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,a)),i}}let qre=class extends Un{runFunctions(e,r){return e.stream?T0.runFunctions(this._client.chat.completions,e,r):Xw.runFunctions(this._client.chat.completions,e,r)}runTools(e,r){return e.stream?T0.runTools(this._client.chat.completions,e,r):Xw.runTools(this._client.chat.completions,e,r)}stream(e,r){return Yw.createChatCompletion(this._client.chat.completions,e,r)}},ek=class extends Un{constructor(){super(...arguments),this.completions=new qre(this._client)}};(function(t){t.Completions=qre})(ek||(ek={}));let tk=class extends Un{retrieve(e,r,n,i){return this._client.get(`/threads/${e}/messages/${r}/files/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r,n={},i){return dc(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/messages/${r}/files`,n8,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class n8 extends If{}(function(t){t.MessageFilesPage=n8})(tk||(tk={}));class rk extends Un{constructor(){super(...arguments),this.files=new tk(this._client)}create(e,r,n){return this._client.post(`/threads/${e}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,r,n,i){return this._client.post(`/threads/${e}/messages/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r={},n){return dc(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,i8,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class i8 extends If{}(function(t){t.ThreadMessagesPage=i8,t.Files=tk,t.MessageFilesPage=n8})(rk||(rk={}));class nk extends Un{retrieve(e,r,n,i){return this._client.get(`/threads/${e}/runs/${r}/steps/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r,n={},i){return dc(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,a8,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class a8 extends If{}(function(t){t.RunStepsPage=a8})(nk||(nk={}));class ik extends Un{constructor(){super(...arguments),this.steps=new nk(this._client)}create(e,r,n){return this._client.post(`/threads/${e}/runs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,r,n,i){return this._client.post(`/threads/${e}/runs/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r={},n){return dc(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,o8,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}submitToolOutputs(e,r,n,i){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class o8 extends If{}(function(t){t.RunsPage=o8,t.Steps=nk,t.RunStepsPage=a8})(ik||(ik={}));class ak extends Un{constructor(){super(...arguments),this.runs=new ik(this._client),this.messages=new rk(this._client)}create(e={},r){return dc(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/threads/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}(function(t){t.Runs=ik,t.RunsPage=o8,t.Messages=rk,t.ThreadMessagesPage=i8})(ak||(ak={}));class ok extends Un{constructor(){super(...arguments),this.chat=new ek(this._client),this.assistants=new ZC(this._client),this.threads=new ak(this._client)}}(function(t){t.Chat=ek,t.Assistants=ZC,t.AssistantsPage=r8,t.Threads=ak})(ok||(ok={}));class sk extends Un{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}sk||(sk={});class lk extends Un{create(e,r){return this._client.post("/embeddings",{body:e,...r})}}lk||(lk={});class uk extends Un{create(e,r){return this._client.post("/files",Hw({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return dc(e)?this.list({},e):this._client.getAPIList("/files",s8,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Gre(r),o=await this.retrieve(e),Date.now()-a>n)throw new J4({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class s8 extends e8{}(function(t){t.FileObjectsPage=s8})(uk||(uk={}));class ck extends Un{create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return dc(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",l8,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return dc(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,u8,{query:r,...n})}}class l8 extends If{}class u8 extends If{}(function(t){t.FineTuningJobsPage=l8,t.FineTuningJobEventsPage=u8})(ck||(ck={}));class fk extends Un{constructor(){super(...arguments),this.jobs=new ck(this._client)}}(function(t){t.Jobs=ck,t.FineTuningJobsPage=l8,t.FineTuningJobEventsPage=u8})(fk||(fk={}));class hk extends Un{createVariation(e,r){return this._client.post("/images/variations",Hw({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",Hw({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}}hk||(hk={});class dk extends Un{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",c8,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}}class c8 extends e8{}(function(t){t.ModelsPage=c8})(dk||(dk={}));class pk extends Un{create(e,r){return this._client.post("/moderations",{body:e,...r})}}pk||(pk={});var Kre;class fa extends PAe{constructor({baseURL:e=kO("OPENAI_BASE_URL"),apiKey:r=kO("OPENAI_API_KEY"),organization:n=kO("OPENAI_ORG_ID")??null,...i}={}){if(r===void 0)throw new on("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:r,organization:n,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&WAe())throw new on(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new sk(this),this.chat=new HC(this),this.embeddings=new lk(this),this.files=new uk(this),this.images=new hk(this),this.audio=new KC(this),this.moderations=new pk(this),this.models=new dk(this),this.fineTuning=new fk(this),this.beta=new ok(this),this._options=a,this.apiKey=r,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}Kre=fa;fa.OpenAI=Kre;fa.OpenAIError=on;fa.APIError=Ya;fa.APIConnectionError=xA;fa.APIConnectionTimeoutError=J4;fa.APIUserAbortError=dv;fa.NotFoundError=Dre;fa.ConflictError=Pre;fa.RateLimitError=Rre;fa.BadRequestError=Tre;fa.AuthenticationError=Ire;fa.InternalServerError=Nre;fa.PermissionDeniedError=Ore;fa.UnprocessableEntityError=Lre;(function(t){t.toFile=$re,t.fileFromPath=Mre,t.Page=e8,t.CursorPage=If,t.Completions=sk,t.Chat=HC,t.Embeddings=lk,t.Files=uk,t.FileObjectsPage=s8,t.Images=hk,t.Audio=KC,t.Moderations=pk,t.Models=dk,t.ModelsPage=c8,t.FineTuning=fk,t.Beta=ok})(fa||(fa={}));class Qre{constructor({updateMessagesCallback:e,systemMessage:r,...n}){Tx(this,"openAI");Tx(this,"messages",[]);Tx(this,"updateMessagesCallback");var i;this.openAI=new fa(n),this.updateMessagesCallback=e,r&&(this.messages.push({role:"system",content:r}),(i=this.updateMessagesCallback)==null||i.call(this,[...this.messages]))}async sendMessages(e){var i,a,o;this.messages.push(...e),(i=this.updateMessagesCallback)==null||i.call(this,[...this.messages]);let r;try{r=await this.openAI.chat.completions.create({messages:this.messages,model:"gpt-4-turbo-preview"})}catch(s){throw(a=window.open("https://api.openai.com/v1/chat/completions","_blank"))==null||a.focus(),s}const n=r.choices[0].message;if(n.content===null)throw new Error("ChatGPT returned null content");return this.messages.push(n),(o=this.updateMessagesCallback)==null||o.call(this,[...this.messages]),n.content}}const HAe=`You are a helpful chat assistant. This system will give you access to data in the WikiData Knowledge Graph, that contains encyclopedic data similar to Wikipedia, but in knowledge graph format using the RDF framework. 

If users ask questions that can be answered via WikiData, your job is not to directly answer their questions, but instead to help them write a SPARQL query to find that data. You can ask the user to clarify their questions if the questions are vague, open-ended, or subjective in nature. 

If you ever need to suggest data to the user, you should only provide recommendations that are directly accessible from Wikidata. Do not ask the user if they would like to proceed with generating the corresponding query unless absolutely necessary.

When you are ready to start building a query, respond with 'BUILD QUERY'. The system will walk you through a guided workflow to get the necessary entity and property IDs from WikiData.

Current date: ${new Date().toDateString()}.`,Zre=ae.createContext(new Qre({apiKey:"",dangerouslyAllowBrowser:!0}));function XAe({children:t}){const e=ab(),r="".trim(),n=ae.useMemo(()=>new Qre({apiKey:r,dangerouslyAllowBrowser:!0,updateMessagesCallback:vd?void 0:i=>e(MMe(i)),systemMessage:HAe}),[]);return!r&&!vd?Oe.jsx("div",{style:{color:"white",backgroundColor:"#333",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Oe.jsxs("p",{children:["You need to configure the ",Oe.jsx("code",{children:"VITE_OPENAI_API_KEY"})," environment variable in your ",Oe.jsx("code",{children:".env.local"})," file."]})}):Oe.jsx(Zre.Provider,{value:n,children:t})}function Jre(){return ae.useContext(Zre)}const ene=ae.createContext({runQuery:async()=>{},runQueryIsPending:!1});function YAe({children:t}){const e=ab(),r=Jre(),{isPending:n,mutate:i}=xre({mutationKey:["runQuery"],mutationFn:async a=>(e(zg(null)),await Z4(a)),onSuccess:async(a,o)=>{try{const{name:s,summary:l}=await yj(r,o,a);e(_S({data:a,name:s,query:o,summary:l})),e(zg({data:a,error:null,summary:l}))}catch{e(_S({data:a,name:null,query:o,summary:null})),e(zg({data:a,error:null,summary:null}))}},onError:async(a,o)=>{console.error(a);try{const{name:s,summary:l}=await yj(r,o);e(_S({error:a.message,name:s,query:o,summary:l})),e(zg({data:null,error:a.message,summary:l}))}catch{e(_S({error:a.message,name:null,query:o,summary:null})),e(zg({data:null,error:a.message,summary:null}))}}});return Oe.jsx(ene.Provider,{value:{runQuery:i,runQueryIsPending:n},children:t})}function f8(){return ae.useContext(ene)}function qAe(){const t=ab(),e=hf(s=>s.queryHistory.queryHistory),r=hf(s=>s.queryValue.queryValue),{runQuery:n}=f8(),[i,{open:a,close:o}]=bee(!1);return Oe.jsxs("div",{children:[Oe.jsx(hd,{style:{color:"white",marginLeft:13,marginBottom:3,marginTop:2,padding:1},order:4,children:"Query Editor"}),Oe.jsxs("div",{id:HCe["query-editor-container"],children:[Oe.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[Oe.jsx(cv,{size:"lg",radius:0,variant:"filled","aria-label":"Run Query",onClick:()=>n(r),children:Oe.jsx(Wte,{})}),Oe.jsx(cv,{size:"lg",radius:0,variant:"filled",color:"gray","aria-label":"History",onClick:a,children:Oe.jsx(UCe,{})})]}),Oe.jsx("div",{children:Oe.jsx(g4,{extensions:[jM.define(hee)],onChange:s=>t(jC(s)),value:r})}),Oe.jsxs(xs,{opened:i,onClose:o,size:"lg",withCloseButton:!1,children:[Oe.jsx(hd,{order:2,children:"Query History"}),Oe.jsx($4,{}),e.map((s,l)=>Oe.jsxs("div",{children:[Oe.jsx("br",{}),Oe.jsxs(Hu,{variant:"default",onClick:()=>{t(jC(s.query)),t(zg(s.results))},children:[l+1,": ",s.name||"There was an error generating a name for this query"]},l)]},l))]})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function $h(t,e){return typeof t=="function"?t(e):t}function _s(t,e){return r=>{e.setState(n=>({...n,[t]:$h(r,n[t])}))}}function vk(t){return t instanceof Function}function KAe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function QAe(t,e){const r=[],n=i=>{i.forEach(a=>{r.push(a);const o=e(a);o!=null&&o.length&&n(o)})};return n(t),r}function xr(t,e,r){let n=[],i;return a=>{let o;r.key&&r.debug&&(o=Date.now());const s=t(a);if(!(s.length!==n.length||s.some((c,f)=>n[f]!==c)))return i;n=s;let u;if(r.key&&r.debug&&(u=Date.now()),i=e(...s),r==null||r.onChange==null||r.onChange(i),r.key&&r.debug&&r!=null&&r.debug()){const c=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,d=(p,v)=>{for(p=String(p);p.length<v;)p=" "+p;return p};console.info(`%c ${d(f,5)} /${d(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,r==null?void 0:r.key)}return i}}function Sr(t,e,r,n){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:n}}function ZAe(t,e,r,n){var i,a;const s={...t._getDefaultColumnDef(),...e},l=s.accessorKey;let u=(i=(a=s.id)!=null?a:l?l.replace(".","_"):void 0)!=null?i:typeof s.header=="string"?s.header:void 0,c;if(s.accessorFn?c=s.accessorFn:l&&(l.includes(".")?c=h=>{let d=h;for(const v of l.split(".")){var p;d=(p=d)==null?void 0:p[v]}return d}:c=h=>h[s.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:c,parent:n,depth:r,columnDef:s,columns:[],getFlatColumns:xr(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(d=>d.getFlatColumns())]},Sr(t.options,"debugColumns")),getLeafColumns:xr(()=>[t._getOrderColumnsFn()],h=>{var d;if((d=f.columns)!=null&&d.length){let p=f.columns.flatMap(v=>v.getLeafColumns());return h(p)}return[f]},Sr(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(f,t);return f}const Na="debugHeaders";function Tj(t,e,r){var n;let a={id:(n=r.id)!=null?n:e.id,column:e,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],s=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(s),o.push(l)};return s(a),o},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(a,t)}),a}const JAe={createTable:t=>{t.getHeaderGroups=xr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n,i)=>{var a,o;const s=(a=n==null?void 0:n.map(f=>r.find(h=>h.id===f)).filter(Boolean))!=null?a:[],l=(o=i==null?void 0:i.map(f=>r.find(h=>h.id===f)).filter(Boolean))!=null?o:[],u=r.filter(f=>!(n!=null&&n.includes(f.id))&&!(i!=null&&i.includes(f.id)));return AS(e,[...s,...u,...l],t)},Sr(t.options,Na)),t.getCenterHeaderGroups=xr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n,i)=>(r=r.filter(a=>!(n!=null&&n.includes(a.id))&&!(i!=null&&i.includes(a.id))),AS(e,r,t,"center")),Sr(t.options,Na)),t.getLeftHeaderGroups=xr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,r,n)=>{var i;const a=(i=n==null?void 0:n.map(o=>r.find(s=>s.id===o)).filter(Boolean))!=null?i:[];return AS(e,a,t,"left")},Sr(t.options,Na)),t.getRightHeaderGroups=xr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,r,n)=>{var i;const a=(i=n==null?void 0:n.map(o=>r.find(s=>s.id===o)).filter(Boolean))!=null?i:[];return AS(e,a,t,"right")},Sr(t.options,Na)),t.getFooterGroups=xr(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Sr(t.options,Na)),t.getLeftFooterGroups=xr(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Sr(t.options,Na)),t.getCenterFooterGroups=xr(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Sr(t.options,Na)),t.getRightFooterGroups=xr(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Sr(t.options,Na)),t.getFlatHeaders=xr(()=>[t.getHeaderGroups()],e=>e.map(r=>r.headers).flat(),Sr(t.options,Na)),t.getLeftFlatHeaders=xr(()=>[t.getLeftHeaderGroups()],e=>e.map(r=>r.headers).flat(),Sr(t.options,Na)),t.getCenterFlatHeaders=xr(()=>[t.getCenterHeaderGroups()],e=>e.map(r=>r.headers).flat(),Sr(t.options,Na)),t.getRightFlatHeaders=xr(()=>[t.getRightHeaderGroups()],e=>e.map(r=>r.headers).flat(),Sr(t.options,Na)),t.getCenterLeafHeaders=xr(()=>[t.getCenterFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Sr(t.options,Na)),t.getLeftLeafHeaders=xr(()=>[t.getLeftFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Sr(t.options,Na)),t.getRightLeafHeaders=xr(()=>[t.getRightFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Sr(t.options,Na)),t.getLeafHeaders=xr(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,r,n)=>{var i,a,o,s,l,u;return[...(i=(a=e[0])==null?void 0:a.headers)!=null?i:[],...(o=(s=r[0])==null?void 0:s.headers)!=null?o:[],...(l=(u=n[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},Sr(t.options,Na))}};function AS(t,e,r,n){var i,a;let o=0;const s=function(h,d){d===void 0&&(d=1),o=Math.max(o,d),h.filter(p=>p.getIsVisible()).forEach(p=>{var v;(v=p.columns)!=null&&v.length&&s(p.columns,d+1)},0)};s(t);let l=[];const u=(h,d)=>{const p={depth:d,id:[n,`${d}`].filter(Boolean).join("_"),headers:[]},v=[];h.forEach(g=>{const m=[...v].reverse()[0],y=g.column.depth===p.depth;let w,b=!1;if(y&&g.column.parent?w=g.column.parent:(w=g.column,b=!0),m&&(m==null?void 0:m.column)===w)m.subHeaders.push(g);else{const x=Tj(r,w,{id:[n,d,w.id,g==null?void 0:g.id].filter(Boolean).join("_"),isPlaceholder:b,placeholderId:b?`${v.filter(S=>S.column===w).length}`:void 0,depth:d,index:v.length});x.subHeaders.push(g),v.push(x)}p.headers.push(g),g.headerGroup=p}),l.push(p),d>0&&u(v,d-1)},c=e.map((h,d)=>Tj(r,h,{depth:o,index:d}));u(c,o-1),l.reverse();const f=h=>h.filter(p=>p.column.getIsVisible()).map(p=>{let v=0,g=0,m=[0];p.subHeaders&&p.subHeaders.length?(m=[],f(p.subHeaders).forEach(w=>{let{colSpan:b,rowSpan:x}=w;v+=b,m.push(x)})):v=1;const y=Math.min(...m);return g=g+y,p.colSpan=v,p.rowSpan=g,{colSpan:v,rowSpan:g}});return f((i=(a=l[0])==null?void 0:a.headers)!=null?i:[]),l}const TS={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},IO=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),eTe={getDefaultColumnDef:()=>TS,getInitialState:t=>({columnSizing:{},columnSizingInfo:IO(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:_s("columnSizing",t),onColumnSizingInfoChange:_s("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var r,n,i;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((r=t.columnDef.minSize)!=null?r:TS.minSize,(n=a??t.columnDef.size)!=null?n:TS.size),(i=t.columnDef.maxSize)!=null?i:TS.maxSize)},t.getStart=xr(r=>[r,K1(e,r),e.getState().columnSizing],(r,n)=>n.slice(0,t.getIndex(r)).reduce((i,a)=>i+a.getSize(),0),Sr(e.options,"debugColumns")),t.getAfter=xr(r=>[r,K1(e,r),e.getState().columnSizing],(r,n)=>n.slice(t.getIndex(r)+1).reduce((i,a)=>i+a.getSize(),0),Sr(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(r=>{let{[t.id]:n,...i}=r;return i})},t.getCanResize=()=>{var r,n;return((r=t.columnDef.enableResizing)!=null?r:!0)&&((n=e.options.enableColumnResizing)!=null?n:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let r=0;const n=i=>{if(i.subHeaders.length)i.subHeaders.forEach(n);else{var a;r+=(a=i.column.getSize())!=null?a:0}};return n(t),r},t.getStart=()=>{if(t.index>0){const r=t.headerGroup.headers[t.index-1];return r.getStart()+r.getSize()}return 0},t.getResizeHandler=r=>{const n=e.getColumn(t.column.id),i=n==null?void 0:n.getCanResize();return a=>{if(!n||!i||(a.persist==null||a.persist(),OO(a)&&a.touches&&a.touches.length>1))return;const o=t.getSize(),s=t?t.getLeafHeaders().map(m=>[m.column.id,m.column.getSize()]):[[n.id,n.getSize()]],l=OO(a)?Math.round(a.touches[0].clientX):a.clientX,u={},c=(m,y)=>{typeof y=="number"&&(e.setColumnSizingInfo(w=>{var b,x;const S=e.options.columnResizeDirection==="rtl"?-1:1,E=(y-((b=w==null?void 0:w.startOffset)!=null?b:0))*S,_=Math.max(E/((x=w==null?void 0:w.startSize)!=null?x:0),-.999999);return w.columnSizingStart.forEach(k=>{let[C,A]=k;u[C]=Math.round(Math.max(A+A*_,0)*100)/100}),{...w,deltaOffset:E,deltaPercentage:_}}),(e.options.columnResizeMode==="onChange"||m==="end")&&e.setColumnSizing(w=>({...w,...u})))},f=m=>c("move",m),h=m=>{c("end",m),e.setColumnSizingInfo(y=>({...y,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=r||typeof document<"u"?document:null,p={moveHandler:m=>f(m.clientX),upHandler:m=>{d==null||d.removeEventListener("mousemove",p.moveHandler),d==null||d.removeEventListener("mouseup",p.upHandler),h(m.clientX)}},v={moveHandler:m=>(m.cancelable&&(m.preventDefault(),m.stopPropagation()),f(m.touches[0].clientX),!1),upHandler:m=>{var y;d==null||d.removeEventListener("touchmove",v.moveHandler),d==null||d.removeEventListener("touchend",v.upHandler),m.cancelable&&(m.preventDefault(),m.stopPropagation()),h((y=m.touches[0])==null?void 0:y.clientX)}},g=tTe()?{passive:!1}:!1;OO(a)?(d==null||d.addEventListener("touchmove",v.moveHandler,g),d==null||d.addEventListener("touchend",v.upHandler,g)):(d==null||d.addEventListener("mousemove",p.moveHandler,g),d==null||d.addEventListener("mouseup",p.upHandler,g)),e.setColumnSizingInfo(m=>({...m,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var r;t.setColumnSizing(e?{}:(r=t.initialState.columnSizing)!=null?r:{})},t.resetHeaderSizeInfo=e=>{var r;t.setColumnSizingInfo(e?IO():(r=t.initialState.columnSizingInfo)!=null?r:IO())},t.getTotalSize=()=>{var e,r;return(e=(r=t.getHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,r;return(e=(r=t.getLeftHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,r;return(e=(r=t.getCenterHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,r;return(e=(r=t.getRightHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0}}};let IS=null;function tTe(){if(typeof IS=="boolean")return IS;let t=!1;try{const e={get passive(){return t=!0,!1}},r=()=>{};window.addEventListener("test",r,e),window.removeEventListener("test",r)}catch{t=!1}return IS=t,IS}function OO(t){return t.type==="touchstart"}const rTe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:_s("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,r=!1;t._autoResetExpanded=()=>{var n,i;if(!e){t._queue(()=>{e=!0});return}if((n=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?n:!t.options.manualExpanding){if(r)return;r=!0,t._queue(()=>{t.resetExpanded(),r=!1})}},t.setExpanded=n=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(n),t.toggleAllRowsExpanded=n=>{n??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=n=>{var i,a;t.setExpanded(n?{}:(i=(a=t.initialState)==null?void 0:a.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const n=t.getState().expanded;return n===!0||Object.values(n).some(Boolean)},t.getIsAllRowsExpanded=()=>{const n=t.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let n=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const o=a.split(".");n=Math.max(n,o.length)}),n},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=r=>{e.setExpanded(n=>{var i;const a=n===!0?!0:!!(n!=null&&n[t.id]);let o={};if(n===!0?Object.keys(e.getRowModel().rowsById).forEach(s=>{o[s]=!0}):o=n,r=(i=r)!=null?i:!a,!a&&r)return{...o,[t.id]:!0};if(a&&!r){const{[t.id]:s,...l}=o;return l}return n})},t.getIsExpanded=()=>{var r;const n=e.getState().expanded;return!!((r=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?r:n===!0||n!=null&&n[t.id])},t.getCanExpand=()=>{var r,n,i;return(r=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?r:((n=e.options.enableExpanding)!=null?n:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let r=!0,n=t;for(;r&&n.parentId;)n=e.getRow(n.parentId,!0),r=n.getIsExpanded();return r},t.getToggleExpandedHandler=()=>{const r=t.getCanExpand();return()=>{r&&t.toggleExpanded()}}}},tne=(t,e,r)=>{var n;const i=r.toLowerCase();return!!(!((n=t.getValue(e))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(i))};tne.autoRemove=t=>eu(t);const rne=(t,e,r)=>{var n;return!!(!((n=t.getValue(e))==null||(n=n.toString())==null)&&n.includes(r))};rne.autoRemove=t=>eu(t);const nne=(t,e,r)=>{var n;return((n=t.getValue(e))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(r==null?void 0:r.toLowerCase())};nne.autoRemove=t=>eu(t);const ine=(t,e,r)=>{var n;return(n=t.getValue(e))==null?void 0:n.includes(r)};ine.autoRemove=t=>eu(t)||!(t!=null&&t.length);const ane=(t,e,r)=>!r.some(n=>{var i;return!((i=t.getValue(e))!=null&&i.includes(n))});ane.autoRemove=t=>eu(t)||!(t!=null&&t.length);const one=(t,e,r)=>r.some(n=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(n)});one.autoRemove=t=>eu(t)||!(t!=null&&t.length);const sne=(t,e,r)=>t.getValue(e)===r;sne.autoRemove=t=>eu(t);const lne=(t,e,r)=>t.getValue(e)==r;lne.autoRemove=t=>eu(t);const h8=(t,e,r)=>{let[n,i]=r;const a=t.getValue(e);return a>=n&&a<=i};h8.resolveFilterValue=t=>{let[e,r]=t,n=typeof e!="number"?parseFloat(e):e,i=typeof r!="number"?parseFloat(r):r,a=e===null||Number.isNaN(n)?-1/0:n,o=r===null||Number.isNaN(i)?1/0:i;if(a>o){const s=a;a=o,o=s}return[a,o]};h8.autoRemove=t=>eu(t)||eu(t[0])&&eu(t[1]);const zc={includesString:tne,includesStringSensitive:rne,equalsString:nne,arrIncludes:ine,arrIncludesAll:ane,arrIncludesSome:one,equals:sne,weakEquals:lne,inNumberRange:h8};function eu(t){return t==null||t===""}const nTe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],globalFilter:void 0,...t}),getDefaultOptions:t=>({onColumnFiltersChange:_s("columnFilters",t),onGlobalFilterChange:_s("globalFilter",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var r;const n=(r=t.getCoreRowModel().flatRows[0])==null||(r=r._getAllCellsByColumnId()[e.id])==null?void 0:r.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const r=e.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(t.id);return typeof n=="string"?zc.includesString:typeof n=="number"?zc.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?zc.equals:Array.isArray(n)?zc.arrIncludes:zc.weakEquals},t.getFilterFn=()=>{var r,n;return vk(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(r=(n=e.options.filterFns)==null?void 0:n[t.columnDef.filterFn])!=null?r:zc[t.columnDef.filterFn]},t.getCanFilter=()=>{var r,n,i;return((r=t.columnDef.enableColumnFilter)!=null?r:!0)&&((n=e.options.enableColumnFilters)!=null?n:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getCanGlobalFilter=()=>{var r,n,i,a;return((r=t.columnDef.enableGlobalFilter)!=null?r:!0)&&((n=e.options.enableGlobalFilter)!=null?n:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var r;return(r=e.getState().columnFilters)==null||(r=r.find(n=>n.id===t.id))==null?void 0:r.value},t.getFilterIndex=()=>{var r,n;return(r=(n=e.getState().columnFilters)==null?void 0:n.findIndex(i=>i.id===t.id))!=null?r:-1},t.setFilterValue=r=>{e.setColumnFilters(n=>{const i=t.getFilterFn(),a=n==null?void 0:n.find(c=>c.id===t.id),o=$h(r,a?a.value:void 0);if(Ij(i,o,t)){var s;return(s=n==null?void 0:n.filter(c=>c.id!==t.id))!=null?s:[]}const l={id:t.id,value:o};if(a){var u;return(u=n==null?void 0:n.map(c=>c.id===t.id?l:c))!=null?u:[]}return n!=null&&n.length?[...n,l]:[l]})},t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.getGlobalAutoFilterFn=()=>zc.includesString,t.getGlobalFilterFn=()=>{var e,r;const{globalFilterFn:n}=t.options;return vk(n)?n:n==="auto"?t.getGlobalAutoFilterFn():(e=(r=t.options.filterFns)==null?void 0:r[n])!=null?e:zc[n]},t.setColumnFilters=e=>{const r=t.getAllLeafColumns(),n=i=>{var a;return(a=$h(e,i))==null?void 0:a.filter(o=>{const s=r.find(l=>l.id===o.id);if(s){const l=s.getFilterFn();if(Ij(l,o.value,s))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(n)},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)},t.resetColumnFilters=e=>{var r,n;t.setColumnFilters(e?[]:(r=(n=t.initialState)==null?void 0:n.columnFilters)!=null?r:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel()),t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}};function Ij(t,e,r){return(t&&t.autoRemove?t.autoRemove(e,r):!1)||typeof e>"u"||typeof e=="string"&&!e}const iTe=(t,e,r)=>r.reduce((n,i)=>{const a=i.getValue(t);return n+(typeof a=="number"?a:0)},0),aTe=(t,e,r)=>{let n;return r.forEach(i=>{const a=i.getValue(t);a!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}),n},oTe=(t,e,r)=>{let n;return r.forEach(i=>{const a=i.getValue(t);a!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}),n},sTe=(t,e,r)=>{let n,i;return r.forEach(a=>{const o=a.getValue(t);o!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}),[n,i]},lTe=(t,e)=>{let r=0,n=0;if(e.forEach(i=>{let a=i.getValue(t);a!=null&&(a=+a)>=a&&(++r,n+=a)}),r)return n/r},uTe=(t,e)=>{if(!e.length)return;const r=e.map(a=>a.getValue(t));if(!KAe(r))return;if(r.length===1)return r[0];const n=Math.floor(r.length/2),i=r.sort((a,o)=>a-o);return r.length%2!==0?i[n]:(i[n-1]+i[n])/2},cTe=(t,e)=>Array.from(new Set(e.map(r=>r.getValue(t))).values()),fTe=(t,e)=>new Set(e.map(r=>r.getValue(t))).size,hTe=(t,e)=>e.length,DO={sum:iTe,min:aTe,max:oTe,extent:sTe,mean:lTe,median:uTe,unique:cTe,uniqueCount:fTe,count:hTe},dTe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,r;return(e=(r=t.getValue())==null||r.toString==null?void 0:r.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:_s("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(r=>r!=null&&r.includes(t.id)?r.filter(n=>n!==t.id):[...r??[],t.id])},t.getCanGroup=()=>{var r,n,i,a;return(r=(n=(i=(a=t.columnDef.enableGrouping)!=null?a:!0)!=null?i:e.options.enableGrouping)!=null?n:!0)!=null?r:!!t.accessorFn},t.getIsGrouped=()=>{var r;return(r=e.getState().grouping)==null?void 0:r.includes(t.id)},t.getGroupedIndex=()=>{var r;return(r=e.getState().grouping)==null?void 0:r.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const r=t.getCanGroup();return()=>{r&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const r=e.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(t.id);if(typeof n=="number")return DO.sum;if(Object.prototype.toString.call(n)==="[object Date]")return DO.extent},t.getAggregationFn=()=>{var r,n;if(!t)throw new Error;return vk(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(r=(n=e.options.aggregationFns)==null?void 0:n[t.columnDef.aggregationFn])!=null?r:DO[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var r,n;t.setGrouping(e?[]:(r=(n=t.initialState)==null?void 0:n.grouping)!=null?r:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=r=>{if(t._groupingValuesCache.hasOwnProperty(r))return t._groupingValuesCache[r];const n=e.getColumn(r);return n!=null&&n.columnDef.getGroupingValue?(t._groupingValuesCache[r]=n.columnDef.getGroupingValue(t.original),t._groupingValuesCache[r]):t.getValue(r)},t._groupingValuesCache={}},createCell:(t,e,r,n)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===r.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=r.subRows)!=null&&i.length)}}};function pTe(t,e,r){if(!(e!=null&&e.length)||!r)return t;const n=t.filter(a=>!e.includes(a.id));return r==="remove"?n:[...e.map(a=>t.find(o=>o.id===a)).filter(Boolean),...n]}const vTe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:_s("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=xr(r=>[K1(e,r)],r=>r.findIndex(n=>n.id===t.id),Sr(e.options,"debugColumns")),t.getIsFirstColumn=r=>{var n;return((n=K1(e,r)[0])==null?void 0:n.id)===t.id},t.getIsLastColumn=r=>{var n;const i=K1(e,r);return((n=i[i.length-1])==null?void 0:n.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var r;t.setColumnOrder(e?[]:(r=t.initialState.columnOrder)!=null?r:[])},t._getOrderColumnsFn=xr(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,r,n)=>i=>{let a=[];if(!(e!=null&&e.length))a=i;else{const o=[...e],s=[...i];for(;s.length&&o.length;){const l=o.shift(),u=s.findIndex(c=>c.id===l);u>-1&&a.push(s.splice(u,1)[0])}a=[...a,...s]}return pTe(a,r,n)},Sr(t.options,"debugTable"))}},PL=0,LL=10,PO=()=>({pageIndex:PL,pageSize:LL}),gTe={getInitialState:t=>({...t,pagination:{...PO(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:_s("pagination",t)}),createTable:t=>{let e=!1,r=!1;t._autoResetPageIndex=()=>{var n,i;if(!e){t._queue(()=>{e=!0});return}if((n=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?n:!t.options.manualPagination){if(r)return;r=!0,t._queue(()=>{t.resetPageIndex(),r=!1})}},t.setPagination=n=>{const i=a=>$h(n,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=n=>{var i;t.setPagination(n?PO():(i=t.initialState.pagination)!=null?i:PO())},t.setPageIndex=n=>{t.setPagination(i=>{let a=$h(n,i.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,o)),{...i,pageIndex:a}})},t.resetPageIndex=n=>{var i,a;t.setPageIndex(n?PL:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?i:PL)},t.resetPageSize=n=>{var i,a;t.setPageSize(n?LL:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?i:LL)},t.setPageSize=n=>{t.setPagination(i=>{const a=Math.max(1,$h(n,i.pageSize)),o=i.pageSize*i.pageIndex,s=Math.floor(o/a);return{...i,pageIndex:s,pageSize:a}})},t.setPageCount=n=>t.setPagination(i=>{var a;let o=$h(n,(a=t.options.pageCount)!=null?a:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),t.getPageOptions=xr(()=>[t.getPageCount()],n=>{let i=[];return n&&n>0&&(i=[...new Array(n)].fill(null).map((a,o)=>o)),i},Sr(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:n}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:n<i-1},t.previousPage=()=>t.setPageIndex(n=>n-1),t.nextPage=()=>t.setPageIndex(n=>n+1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var n;return(n=t.options.pageCount)!=null?n:Math.ceil(t.getPrePaginationRowModel().rows.length/t.getState().pagination.pageSize)}}},LO=()=>({left:[],right:[]}),RO=()=>({top:[],bottom:[]}),mTe={getInitialState:t=>({columnPinning:LO(),rowPinning:RO(),...t}),getDefaultOptions:t=>({onColumnPinningChange:_s("columnPinning",t),onRowPinningChange:_s("rowPinning",t)}),createColumn:(t,e)=>{t.pin=r=>{const n=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var a,o;if(r==="right"){var s,l;return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(f=>!(n!=null&&n.includes(f))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(f=>!(n!=null&&n.includes(f))),...n]}}if(r==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(n!=null&&n.includes(f))),...n],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(n!=null&&n.includes(f)))}}return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(f=>!(n!=null&&n.includes(f))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(f=>!(n!=null&&n.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(n=>{var i,a,o;return((i=n.columnDef.enablePinning)!=null?i:!0)&&((a=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const r=t.getLeafColumns().map(s=>s.id),{left:n,right:i}=e.getState().columnPinning,a=r.some(s=>n==null?void 0:n.includes(s)),o=r.some(s=>i==null?void 0:i.includes(s));return a?"left":o?"right":!1},t.getPinnedIndex=()=>{var r,n;const i=t.getIsPinned();return i?(r=(n=e.getState().columnPinning)==null||(n=n[i])==null?void 0:n.indexOf(t.id))!=null?r:-1:0}},createRow:(t,e)=>{t.pin=(r,n,i)=>{const a=n?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],s=new Set([...o,t.id,...a]);e.setRowPinning(l=>{var u,c;if(r==="bottom"){var f,h;return{top:((f=l==null?void 0:l.top)!=null?f:[]).filter(v=>!(s!=null&&s.has(v))),bottom:[...((h=l==null?void 0:l.bottom)!=null?h:[]).filter(v=>!(s!=null&&s.has(v))),...Array.from(s)]}}if(r==="top"){var d,p;return{top:[...((d=l==null?void 0:l.top)!=null?d:[]).filter(v=>!(s!=null&&s.has(v))),...Array.from(s)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(v=>!(s!=null&&s.has(v)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(v=>!(s!=null&&s.has(v))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(v=>!(s!=null&&s.has(v)))}})},t.getCanPin=()=>{var r;const{enableRowPinning:n,enablePinning:i}=e.options;return typeof n=="function"?n(t):(r=n??i)!=null?r:!0},t.getIsPinned=()=>{const r=[t.id],{top:n,bottom:i}=e.getState().rowPinning,a=r.some(s=>n==null?void 0:n.includes(s)),o=r.some(s=>i==null?void 0:i.includes(s));return a?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var r,n;const i=t.getIsPinned();if(!i)return-1;const a=(r=e._getPinnedRows(i))==null?void 0:r.map(o=>{let{id:s}=o;return s});return(n=a==null?void 0:a.indexOf(t.id))!=null?n:-1},t.getCenterVisibleCells=xr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(r,n,i)=>{const a=[...n??[],...i??[]];return r.filter(o=>!a.includes(o.column.id))},Sr(e.options,"debugRows")),t.getLeftVisibleCells=xr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,,],(r,n)=>(n??[]).map(a=>r.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Sr(e.options,"debugRows")),t.getRightVisibleCells=xr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(r,n)=>(n??[]).map(a=>r.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Sr(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var r,n;return t.setColumnPinning(e?LO():(r=(n=t.initialState)==null?void 0:n.columnPinning)!=null?r:LO())},t.getIsSomeColumnsPinned=e=>{var r;const n=t.getState().columnPinning;if(!e){var i,a;return!!((i=n.left)!=null&&i.length||(a=n.right)!=null&&a.length)}return!!((r=n[e])!=null&&r.length)},t.getLeftLeafColumns=xr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,r)=>(r??[]).map(n=>e.find(i=>i.id===n)).filter(Boolean),Sr(t.options,"debugColumns")),t.getRightLeafColumns=xr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,r)=>(r??[]).map(n=>e.find(i=>i.id===n)).filter(Boolean),Sr(t.options,"debugColumns")),t.getCenterLeafColumns=xr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n)=>{const i=[...r??[],...n??[]];return e.filter(a=>!i.includes(a.id))},Sr(t.options,"debugColumns")),t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var r,n;return t.setRowPinning(e?RO():(r=(n=t.initialState)==null?void 0:n.rowPinning)!=null?r:RO())},t.getIsSomeRowsPinned=e=>{var r;const n=t.getState().rowPinning;if(!e){var i,a;return!!((i=n.top)!=null&&i.length||(a=n.bottom)!=null&&a.length)}return!!((r=n[e])!=null&&r.length)},t._getPinnedRows=xr(e=>[t.getRowModel().rows,t.getState().rowPinning[e],e],(e,r,n)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(r??[]).map(o=>{const s=t.getRow(o,!0);return s.getIsAllParentsExpanded()?s:null}):(r??[]).map(o=>e.find(s=>s.id===o))).filter(Boolean).map(o=>({...o,position:n}))},Sr(t.options,"debugRows")),t.getTopRows=()=>t._getPinnedRows("top"),t.getBottomRows=()=>t._getPinnedRows("bottom"),t.getCenterRows=xr(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,r,n)=>{const i=new Set([...r??[],...n??[]]);return e.filter(a=>!i.has(a.id))},Sr(t.options,"debugRows"))}},yTe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:_s("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var r;return t.setRowSelection(e?{}:(r=t.initialState.rowSelection)!=null?r:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(r=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const n={...r},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(a=>{a.getCanSelect()&&(n[a.id]=!0)}):i.forEach(a=>{delete n[a.id]}),n})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(r=>{const n=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...r};return t.getRowModel().rows.forEach(a=>{RL(i,a.id,n,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=xr(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,r)=>Object.keys(e).length?NO(t,r):{rows:[],flatRows:[],rowsById:{}},Sr(t.options,"debugTable")),t.getFilteredSelectedRowModel=xr(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,r)=>Object.keys(e).length?NO(t,r):{rows:[],flatRows:[],rowsById:{}},Sr(t.options,"debugTable")),t.getGroupedSelectedRowModel=xr(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,r)=>Object.keys(e).length?NO(t,r):{rows:[],flatRows:[],rowsById:{}},Sr(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:r}=t.getState();let n=!!(e.length&&Object.keys(r).length);return n&&e.some(i=>i.getCanSelect()&&!r[i.id])&&(n=!1),n},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:r}=t.getState();let n=!!e.length;return n&&e.some(i=>!r[i.id])&&(n=!1),n},t.getIsSomeRowsSelected=()=>{var e;const r=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return r>0&&r<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(r=>r.getCanSelect()).some(r=>r.getIsSelected()||r.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(r,n)=>{const i=t.getIsSelected();e.setRowSelection(a=>{var o;if(r=typeof r<"u"?r:!i,t.getCanSelect()&&i===r)return a;const s={...a};return RL(s,t.id,r,(o=n==null?void 0:n.selectChildren)!=null?o:!0,e),s})},t.getIsSelected=()=>{const{rowSelection:r}=e.getState();return d8(t,r)},t.getIsSomeSelected=()=>{const{rowSelection:r}=e.getState();return NL(t,r)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=e.getState();return NL(t,r)==="all"},t.getCanSelect=()=>{var r;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(r=e.options.enableRowSelection)!=null?r:!0},t.getCanSelectSubRows=()=>{var r;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(r=e.options.enableSubRowSelection)!=null?r:!0},t.getCanMultiSelect=()=>{var r;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(r=e.options.enableMultiRowSelection)!=null?r:!0},t.getToggleSelectedHandler=()=>{const r=t.getCanSelect();return n=>{var i;r&&t.toggleSelected((i=n.target)==null?void 0:i.checked)}}}},RL=(t,e,r,n,i)=>{var a;const o=i.getRow(e,!0);r?(o.getCanMultiSelect()||Object.keys(t).forEach(s=>delete t[s]),o.getCanSelect()&&(t[e]=!0)):delete t[e],n&&(a=o.subRows)!=null&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(s=>RL(t,s.id,r,n,i))};function NO(t,e){const r=t.getState().rowSelection,n=[],i={},a=function(o,s){return o.map(l=>{var u;const c=d8(l,r);if(c&&(n.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:a(l.subRows)}),c)return l}).filter(Boolean)};return{rows:a(e.rows),flatRows:n,rowsById:i}}function d8(t,e){var r;return(r=e[t.id])!=null?r:!1}function NL(t,e,r){var n;if(!((n=t.subRows)!=null&&n.length))return!1;let i=!0,a=!1;return t.subRows.forEach(o=>{if(!(a&&!i)&&(o.getCanSelect()&&(d8(o,e)?a=!0:i=!1),o.subRows&&o.subRows.length)){const s=NL(o,e);s==="all"?a=!0:(s==="some"&&(a=!0),i=!1)}}),i?"all":a?"some":!1}const FL=/([0-9]+)/gm,wTe=(t,e,r)=>une(gd(t.getValue(r)).toLowerCase(),gd(e.getValue(r)).toLowerCase()),bTe=(t,e,r)=>une(gd(t.getValue(r)),gd(e.getValue(r))),xTe=(t,e,r)=>p8(gd(t.getValue(r)).toLowerCase(),gd(e.getValue(r)).toLowerCase()),STe=(t,e,r)=>p8(gd(t.getValue(r)),gd(e.getValue(r))),ETe=(t,e,r)=>{const n=t.getValue(r),i=e.getValue(r);return n>i?1:n<i?-1:0},_Te=(t,e,r)=>p8(t.getValue(r),e.getValue(r));function p8(t,e){return t===e?0:t>e?1:-1}function gd(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function une(t,e){const r=t.split(FL).filter(Boolean),n=e.split(FL).filter(Boolean);for(;r.length&&n.length;){const i=r.shift(),a=n.shift(),o=parseInt(i,10),s=parseInt(a,10),l=[o,s].sort();if(isNaN(l[0])){if(i>a)return 1;if(a>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>s)return 1;if(s>o)return-1}return r.length-n.length}const Wy={alphanumeric:wTe,alphanumericCaseSensitive:bTe,text:xTe,textCaseSensitive:STe,datetime:ETe,basic:_Te},CTe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:_s("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const r=e.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const i of r){const a=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return Wy.datetime;if(typeof a=="string"&&(n=!0,a.split(FL).length>1))return Wy.alphanumeric}return n?Wy.text:Wy.basic},t.getAutoSortDir=()=>{const r=e.getFilteredRowModel().flatRows[0];return typeof(r==null?void 0:r.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var r,n;if(!t)throw new Error;return vk(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(r=(n=e.options.sortingFns)==null?void 0:n[t.columnDef.sortingFn])!=null?r:Wy[t.columnDef.sortingFn]},t.toggleSorting=(r,n)=>{const i=t.getNextSortingOrder(),a=typeof r<"u"&&r!==null;e.setSorting(o=>{const s=o==null?void 0:o.find(d=>d.id===t.id),l=o==null?void 0:o.findIndex(d=>d.id===t.id);let u=[],c,f=a?r:i==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&n?s?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":s?c="toggle":c="replace",c==="toggle"&&(a||i||(c="remove")),c==="add"){var h;u=[...o,{id:t.id,desc:f}],u.splice(0,u.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(d=>d.id===t.id?{...d,desc:f}:d):c==="remove"?u=o.filter(d=>d.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var r,n;return((r=(n=t.columnDef.sortDescFirst)!=null?n:e.options.sortDescFirst)!=null?r:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=r=>{var n,i;const a=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==a&&((n=e.options.enableSortingRemoval)==null||n)&&(!(r&&(i=e.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":a},t.getCanSort=()=>{var r,n;return((r=t.columnDef.enableSorting)!=null?r:!0)&&((n=e.options.enableSorting)!=null?n:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var r,n;return(r=(n=t.columnDef.enableMultiSort)!=null?n:e.options.enableMultiSort)!=null?r:!!t.accessorFn},t.getIsSorted=()=>{var r;const n=(r=e.getState().sorting)==null?void 0:r.find(i=>i.id===t.id);return n?n.desc?"desc":"asc":!1},t.getSortIndex=()=>{var r,n;return(r=(n=e.getState().sorting)==null?void 0:n.findIndex(i=>i.id===t.id))!=null?r:-1},t.clearSorting=()=>{e.setSorting(r=>r!=null&&r.length?r.filter(n=>n.id!==t.id):[])},t.getToggleSortingHandler=()=>{const r=t.getCanSort();return n=>{r&&(n.persist==null||n.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(n):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var r,n;t.setSorting(e?[]:(r=(n=t.initialState)==null?void 0:n.sorting)!=null?r:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},kTe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:_s("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=r=>{t.getCanHide()&&e.setColumnVisibility(n=>({...n,[t.id]:r??!t.getIsVisible()}))},t.getIsVisible=()=>{var r,n;return(r=(n=e.getState().columnVisibility)==null?void 0:n[t.id])!=null?r:!0},t.getCanHide=()=>{var r,n;return((r=t.columnDef.enableHiding)!=null?r:!0)&&((n=e.options.enableHiding)!=null?n:!0)},t.getToggleVisibilityHandler=()=>r=>{t.toggleVisibility==null||t.toggleVisibility(r.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=xr(()=>[t.getAllCells(),e.getState().columnVisibility],r=>r.filter(n=>n.column.getIsVisible()),Sr(e.options,"debugRows")),t.getVisibleCells=xr(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(r,n,i)=>[...r,...n,...i],Sr(e.options,"debugRows"))},createTable:t=>{const e=(r,n)=>xr(()=>[n(),n().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Sr(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=r=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(r),t.resetColumnVisibility=r=>{var n;t.setColumnVisibility(r?{}:(n=t.initialState.columnVisibility)!=null?n:{})},t.toggleAllColumnsVisible=r=>{var n;r=(n=r)!=null?n:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,a)=>({...i,[a.id]:r||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(r=>!(r.getIsVisible!=null&&r.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(r=>r.getIsVisible==null?void 0:r.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>r=>{var n;t.toggleAllColumnsVisible((n=r.target)==null?void 0:n.checked)}}};function K1(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Oj=[JAe,kTe,vTe,mTe,nTe,CTe,dTe,rTe,gTe,yTe,eTe];function MTe(t){var e;(t.debugAll||t.debugTable)&&console.info("Creating Table Instance...");let r={_features:Oj};const n=r._features.reduce((c,f)=>Object.assign(c,f.getDefaultOptions==null?void 0:f.getDefaultOptions(r)),{}),i=c=>r.options.mergeOptions?r.options.mergeOptions(n,c):{...n,...c};let o={...{},...(e=t.initialState)!=null?e:{}};r._features.forEach(c=>{var f;o=(f=c.getInitialState==null?void 0:c.getInitialState(o))!=null?f:o});const s=[];let l=!1;const u={_features:Oj,options:{...n,...t},initialState:o,_queue:c=>{s.push(c),l||(l=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();l=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{r.setState(r.initialState)},setOptions:c=>{const f=$h(c,r.options);r.options=i(f)},getState:()=>r.options.state,setState:c=>{r.options.onStateChange==null||r.options.onStateChange(c)},_getRowId:(c,f,h)=>{var d;return(d=r.options.getRowId==null?void 0:r.options.getRowId(c,f,h))!=null?d:`${h?[h.id,f].join("."):f}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(c,f)=>{let h=(f?r.getPrePaginationRowModel():r.getRowModel()).rowsById[c];if(!h&&(h=r.getCoreRowModel().rowsById[c],!h))throw new Error;return h},_getDefaultColumnDef:xr(()=>[r.options.defaultColumn],c=>{var f;return c=(f=c)!=null?f:{},{header:h=>{const d=h.header.column.columnDef;return d.accessorKey?d.accessorKey:d.accessorFn?d.id:null},cell:h=>{var d,p;return(d=(p=h.renderValue())==null||p.toString==null?void 0:p.toString())!=null?d:null},...r._features.reduce((h,d)=>Object.assign(h,d.getDefaultColumnDef==null?void 0:d.getDefaultColumnDef()),{}),...c}},Sr(t,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:xr(()=>[r._getColumnDefs()],c=>{const f=function(h,d,p){return p===void 0&&(p=0),h.map(v=>{const g=ZAe(r,v,p,d),m=v;return g.columns=m.columns?f(m.columns,g,p+1):[],g})};return f(c)},Sr(t,"debugColumns")),getAllFlatColumns:xr(()=>[r.getAllColumns()],c=>c.flatMap(f=>f.getFlatColumns()),Sr(t,"debugColumns")),_getAllFlatColumnsById:xr(()=>[r.getAllFlatColumns()],c=>c.reduce((f,h)=>(f[h.id]=h,f),{}),Sr(t,"debugColumns")),getAllLeafColumns:xr(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(c,f)=>{let h=c.flatMap(d=>d.getLeafColumns());return f(h)},Sr(t,"debugColumns")),getColumn:c=>r._getAllFlatColumnsById()[c]};Object.assign(r,u);for(let c=0;c<r._features.length;c++){const f=r._features[c];f==null||f.createTable==null||f.createTable(r)}return r}function ATe(t,e,r,n){const i=()=>{var o;return(o=a.getValue())!=null?o:t.options.renderFallbackValue},a={id:`${e.id}_${r.id}`,row:e,column:r,getValue:()=>e.getValue(n),renderValue:i,getContext:xr(()=>[t,r,e,a],(o,s,l,u)=>({table:o,column:s,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Sr(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(a,r,e,t)},{}),a}const TTe=(t,e,r,n,i,a,o)=>{let s={id:e,index:n,original:r,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(s._valuesCache.hasOwnProperty(l))return s._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return s._valuesCache[l]=u.accessorFn(s.original,n),s._valuesCache[l]},getUniqueValues:l=>{if(s._uniqueValuesCache.hasOwnProperty(l))return s._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(s._uniqueValuesCache[l]=u.columnDef.getUniqueValues(s.original,n),s._uniqueValuesCache[l]):(s._uniqueValuesCache[l]=[s.getValue(l)],s._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=s.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:a??[],getLeafRows:()=>QAe(s.subRows,l=>l.subRows),getParentRow:()=>s.parentId?t.getRow(s.parentId,!0):void 0,getParentRows:()=>{let l=[],u=s;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:xr(()=>[t.getAllLeafColumns()],l=>l.map(u=>ATe(t,s,u,u.id)),Sr(t.options,"debugRows")),_getAllCellsByColumnId:xr(()=>[s.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),Sr(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(s,t)}return s};function cne(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function fne(){return t=>xr(()=>[t.options.data],e=>{const r={rows:[],flatRows:[],rowsById:{}},n=function(i,a,o){a===void 0&&(a=0);const s=[];for(let u=0;u<i.length;u++){const c=TTe(t,t._getRowId(i[u],u,o),i[u],u,a,void 0,o==null?void 0:o.id);if(r.flatRows.push(c),r.rowsById[c.id]=c,s.push(c),t.options.getSubRows){var l;c.originalSubRows=t.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=n(c.originalSubRows,a+1,c))}}return s};return r.rows=n(e),r},Sr(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function gk(t,e){return t?ITe(t)?ae.createElement(t,e):t:null}function ITe(t){return OTe(t)||typeof t=="function"||DTe(t)}function OTe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function DTe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function hne(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[r]=ae.useState(()=>({current:MTe(e)})),[n,i]=ae.useState(()=>r.current.initialState);return r.current.setOptions(a=>({...a,...t,state:{...n,...t.state},onStateChange:o=>{i(o),t.onStateChange==null||t.onStateChange(o)}})),r.current}function PTe(t,e){const r=document.createElement("a");r.setAttribute("href","data:json;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}const Dj={"results-table-container":"_results-table-container_gviui_1","download-button":"_download-button_gviui_1"};function LTe({data:t}){const e=cne(),r=t.head.vars.map(i=>e.accessor(a=>a[i],{id:i,cell:a=>Oe.jsx("span",{children:RTe(a.getValue())}),header:()=>Oe.jsx("span",{children:i})})),n=hne({columns:r,data:t.results.bindings,getCoreRowModel:fne()});return Oe.jsxs("div",{id:Dj["results-table-container"],children:[Oe.jsx(cv,{id:Dj["download-button"],variant:"filled","aria-label":"Download Data",onClick:()=>PTe("data.json",JSON.stringify(t,void 0,2)),children:Oe.jsx(GCe,{})}),Oe.jsxs(On,{children:[Oe.jsx(On.Thead,{children:n.getHeaderGroups().map(i=>Oe.jsx(On.Tr,{children:i.headers.map(a=>Oe.jsx(On.Th,{children:a.isPlaceholder?null:gk(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),Oe.jsx(On.Tbody,{children:n.getRowModel().rows.map(i=>Oe.jsx(On.Tr,{children:i.getVisibleCells().map(a=>Oe.jsx(On.Td,{children:gk(a.column.columnDef.cell,a.getContext())},a.id))},i.id))})]})]})}function RTe(t){return t?t.datatype==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(t.value).toUTCString():t.type==="uri"&&(t.value.toLowerCase().endsWith(".jpg")||t.value.toLowerCase().endsWith(".png"))?Oe.jsx("img",{src:t.value}):t.type==="uri"?Oe.jsx("a",{href:t.value,target:"_blank",children:t.value.replace("http://www.wikidata.org/","")}):t.value:Oe.jsx("code",{children:"undefined"})}const NTe="_chat_m8boe_24",FTe="_user_m8boe_38",BTe="_system_m8boe_44",$Te="_loading_m8boe_50",$l={"chat-container":"_chat-container_m8boe_1","chat-settings-button":"_chat-settings-button_m8boe_1","chat-scroll-container":"_chat-scroll-container_m8boe_1","chat-entry":"_chat-entry_m8boe_24",chat:NTe,user:FTe,system:BTe,"copy-query-buttons":"_copy-query-buttons_m8boe_47",loading:$Te};function dne({children:t}){return Oe.jsx("p",{style:{color:"red"},children:t})}function Is(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const zTe=Is(/^[1-9][0-9]*$/),v8=Is(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),jTe=Is(/^E[1-9][0-9]*$/),mk=Is(/^Q[1-9][0-9]*$/),EA=Is(/^P[1-9][0-9]*$/),pne=Is(/^L[1-9][0-9]*$/),vne=Is(/^L[1-9][0-9]*-F[1-9][0-9]*$/),gne=Is(/^L[1-9][0-9]*-S[1-9][0-9]*$/),GTe=Is(/^M[1-9][0-9]*$/),UTe=Is(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),WTe=Is(/^[0-9a-f]{40}$/),mne=Is(/^\d+$/),yne=Is(/^(Q|P|L|M)[1-9][0-9]*$/);function VTe(t){if(typeof t!="string")return!1;const[e,r]=t.split("#");return v8(e)&&EA(r)}function wne(t){return typeof t!="string"?!1:t.startsWith("Item:")?mk(t.substring(5)):t.startsWith("Lexeme:")?pne(t.substring(7)):t.startsWith("Property:")?EA(t.substring(9)):mk(t)}function HTe(t){if(!yne(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function XTe(t,e){let r=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(r+=`?width=${e}`),r}function YTe(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const qTe=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:YTe,getImageUrl:XTe,getNumericId:HTe,isEntityId:v8,isEntityPageTitle:wne,isEntitySchemaId:jTe,isFormId:vne,isGuid:UTe,isHash:WTe,isItemId:mk,isLexemeId:pne,isMediaInfoId:GTe,isNonNestedEntityId:yne,isNumericId:zTe,isPropertyClaimsId:VTe,isPropertyId:EA,isRevisionId:mne,isSenseId:gne},Symbol.toStringTag,{value:"Module"}));function Qu(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function bne(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const xne=t=>encodeURIComponent(t).replace(/[!'()*]/g,ZTe),KTe=t=>t.replace(/\s/g,"_");function QTe(t){return Array.from(new Set(t))}const ZTe=t=>"%"+t.charCodeAt(0).toString(16);function Od(t){if(t.length!==1||!bne(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function qw(t,e){return typeof e=="string"&&t.includes(e)}function BL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function g8(t){return Object.entries(t)}function m8(t){typeof t=="object"&&(t=t.time);const e=t[0];let[r,n]=t.slice(1).split("T");r=r.replace(/-00/g,"-01");const i=`${r}T${n}`;return JTe(e,i)}const JTe=(t,e)=>{const r=e.split("-")[0];return t==="-"||r.length>4?eIe(t,e,r):new Date(e)},eIe=(t,e,r)=>{let n;return r.length===4?n=`${t}00${e}`:r.length===5?n=`${t}0${e}`:n=t+e,new Date(n)};function y8(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[i,a]=e.slice(1).split("T");if(!n||!i||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return i=i.replace(/-00/g,"-01"),`${n}${i}T${a}`}}}const tIe=t=>m8(t).getTime(),rIe=t=>m8(t).toISOString(),nIe=t=>{if(typeof t=="object"){const{time:e,precision:r}=t;r===9?t=e.replace("-01-01T","-00-00T"):r===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},Sne=y8(tIe),Ene=y8(rIe),_ne=y8(nIe),iIe=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:m8,wikibaseTimeToEpochTime:Sne,wikibaseTimeToISOString:Ene,wikibaseTimeToSimpleDay:_ne},Symbol.toStringTag,{value:"Module"})),th=t=>t.value,aIe=(t,e)=>e.keepRichValues?t.value:t.value.text,Eg=(t,e)=>sIe(t,e.entityPrefix),oIe={item:"Q",lexeme:"L",property:"P"},sIe=(t,e)=>{const{value:r}=t,n=r.id||oIe[r["entity-type"]]+r["numeric-id"];return typeof e=="string"?`${e}:${n}`:n},lIe=(t,e)=>{const{value:r}=t,n=parseFloat(r.amount);if(e.keepRichValues){const i={amount:parseFloat(r.amount),unit:r.unit.replace(/^https?:\/\/.*\/entity\//,"")};return r.upperBound!=null&&(i.upperBound=parseFloat(r.upperBound)),r.lowerBound!=null&&(i.lowerBound=parseFloat(r.lowerBound)),i}else return n},uIe=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],cIe=(t,e)=>{let r;if(typeof e.timeConverter=="function"?r=e.timeConverter(t.value):r=fIe(e.timeConverter)(t.value),e.keepRichValues){const{timezone:n,before:i,after:a,precision:o,calendarmodel:s}=t.value;return{time:r,timezone:n,before:i,after:a,precision:o,calendarmodel:s}}else return r},fIe=(t="iso")=>{const e=hIe[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},hIe={iso:Ene,epoch:Sne,"simple-day":_ne,none:t=>typeof t=="string"?t:t.time},dIe={commonsMedia:th,"external-id":th,"geo-shape":th,"globe-coordinate":uIe,math:th,monolingualtext:aIe,"musical-notation":th,quantity:lIe,string:th,"tabular-data":th,time:cIe,url:th,"wikibase-entityid":Eg,"wikibase-form":Eg,"wikibase-item":Eg,"wikibase-lexeme":Eg,"wikibase-property":Eg,"wikibase-sense":Eg},Cne=t=>t.toLowerCase().replace(/[\s-]/g,""),kne={};for(const[t,e]of Object.entries(dIe))kne[Cne(t)]=e;function pIe(t,e,r,n){t=t||e.type;try{const i=kne[Cne(t)];return i(e,r)}catch(i){throw i.message==="parsers[datatype] is not a function"&&(i.message=`${t} claim parser isn't implemented
      Claim id: ${n}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),i}}function w8(t){const e={};for(const r of t){const{rank:n}=r;e[n]=e[n]||[],e[n].push(r)}return e.preferred||e.normal||[]}function Mne(t){return t.filter(e=>e.rank!=="deprecated")}function vIe(t){const e={};for(const[r,n]of g8(t))e[r]=w8(n);return e}const gIe=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:Mne,truthyClaims:vIe,truthyPropertyClaims:w8},Symbol.toStringTag,{value:"Module"}));function b8(t,e){const{propertyPrefix:r}=e,n={};for(let i in t){const a=t[i];r&&(i=r+":"+i),n[i]=x8(a,e)}return n}function x8(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:r,keepNonDeprecated:n,areSubSnaks:i}=One(e);return n?t=Mne(t):r||i||(t=w8(t)),t=t.map(a=>$L(a,e)).filter(a=>a!==void 0),t[0]&&typeof t[0]!="object"?QTe(t):t}function Ane(t,e){const{keepQualifiers:r,keepReferences:n,keepIds:i,keepHashes:a,keepTypes:o,keepSnaktypes:s,keepRanks:l}=One(e),{mainsnak:u,rank:c}=t;let f,h,d,p,v,g;if(u?(h=u.datatype,d=u.datavalue,p=u.snaktype):(d=t.datavalue,h=t.datatype,p=t.snaktype,t.hash?v=!0:g=!0),d)f=pIe(h,d,e,t.id);else if(p==="somevalue")f=e.somevalueValue;else if(p==="novalue")f=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(v){if(!(a||o||s))return f;const w={value:f};return a&&(w.hash=t.hash),o&&(w.type=h),s&&(w.snaktype=p),w}if(g)return o?{type:h,value:f}:f;if(!(r||n||i||o||s||l))return f;const m={value:f};o&&(m.type=h),s&&(m.snaktype=p),l&&(m.rank=c);const y=_A(e);return y.keepHashes=a,r&&(m.qualifiers=Tne(t.qualifiers,y)),n&&(t.references=t.references||[],m.references=Ine(t.references,y)),i&&(m.id=t.id),m}function bm(t,e={}){return b8(t,e)}function Pj(t,e={}){return x8(t,e)}function $L(t,e={}){return Ane(t,e)}function Tne(t,e={}){return b8(t,_A(e))}function mIe(t,e={}){return x8(t,_A(e))}function yIe(t,e={}){return Ane(t,e)}function Ine(t,e={}){return t.map(r=>wIe(r,e))}function wIe(t,e={}){const r=_A(e),n=b8(t.snaks,r);return r.keepHashes?{snaks:n,hash:t.hash}:n}const _A=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),bIe=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],One=(t={})=>(t.keepAll&&bIe.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function ob(t){const e={};for(const[r,n]of g8(t))e[r]=n!=null?n.value:null;return e}function xIe(t){const e={};for(const[r,n]of g8(t))e[r]=n!=null?n.map(i=>i.value):[];return e}function Dne(t){return ob(t)}function Pne(t){return ob(t)}function Lne(t){return xIe(t)}function Rne(t){return ob(t)}function Nne(t){return ob(t)}function Fne(t){return ob(t)}const Bne=(t,e={})=>{const{id:r,representations:n,grammaticalFeatures:i,claims:a}=t;if(!vne(r))throw new Error("invalid form object");return{id:r,representations:Nne(n),grammaticalFeatures:i,claims:bm(a,e)}},$ne=(t,e={})=>t.map(r=>Bne(r,e)),zne=(t,e={})=>{const{id:r,glosses:n,claims:i}=t;if(!gne(r))throw new Error("invalid sense object");return{id:r,glosses:Fne(n),claims:bm(i,e)}};function jne(t,e={}){return t.map(r=>zne(r,e))}const zL={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},S8=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],SIe="https://www.wikidata.org/wiki/";function Gne({site:t,title:e}){if(Od(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(BL(OS,t))return OS[t](e);const r=t.replace(/wiki$/,"");if(BL(OS,r))return OS[r](e);const{lang:n,project:i}=Une(t);return e=xne(KTe(e)),`https://${n}.${i}.org/wiki/${e}`}const ip=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,OS={commons:ip("commons"),foundation:ip("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:ip("meta"),outreach:ip("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:ip("species"),wikidata:t=>{const e=EIe[t[0]];let r=e?`${e}:${t}`:t;return r=r.replace("-","#"),`${SIe}${r}`},wikifunctions:ip("wikifunctions"),wikimania:ip("wikimania")},EIe={E:"EntitySchema",L:"Lexeme",P:"Property"},_Ie=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function Une(t){if(t.startsWith("http")){const e=t,r=e.match(_Ie);if(!r)throw new Error(`invalid sitelink url: ${e}`);let[n,i,a]=r.slice(1);if(a=decodeURIComponent(a),n==="commons")return{lang:"en",project:"commons",key:"commons",title:a,url:e};if(!qw(kIe,i))throw new Error(`project is unknown: ${i}`);if(n==="www")return{lang:"en",project:i,key:i,title:a,url:e};const s=`${n.replace(/-/g,"_")}${i}`.replace("wikipedia","wiki");return{lang:n,project:i,key:s,title:a,url:e}}else{if(BL(zL,t))return{lang:"en",project:zL[t],key:t};if(!qw(S8,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,r,n]=t.split("wik");if(n!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const i=Vne[r];if(!i)throw new Error(`sitelink project not found: ${i}`);return{lang:e,project:i,key:t}}}const Wne=t=>qw(S8,t),CIe=Wne,Vne={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},kIe=[...Object.values(Vne),...Object.values(zL)],MIe=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:Une,getSitelinkUrl:Gne,isSite:Wne,isSitelinkKey:CIe},Symbol.toStringTag,{value:"Module"}));function Hne(t,e={}){let{addUrl:r,keepBadges:n,keepAll:i}=e;return n=n||i,Object.keys(t).reduce(AIe({sitelinks:t,addUrl:r,keepBadges:n}),{})}const AIe=({sitelinks:t,addUrl:e,keepBadges:r})=>(n,i)=>{if(t[i]==null)return n[i]=t[i],n;const{title:a,badges:o}=t[i];return e||r?(n[i]={title:a},e&&(n[i].url=Gne({site:i,title:a})),r&&(n[i].badges=o)):n[i]=a,n},TIe={labels:Dne,descriptions:Pne,aliases:Lne,claims:bm,statements:bm,sitelinks:Hne,lemmas:Rne,forms:$ne,senses:jne},Xne=(t,e={})=>{const{type:r}=t,n={id:t.id,type:r,modified:t.modified};return r==="item"?(Fa(t,n,"labels"),Fa(t,n,"descriptions"),Fa(t,n,"aliases"),Fa(t,n,"claims",e),Fa(t,n,"sitelinks",e)):r==="property"?(n.datatype=t.datatype,Fa(t,n,"labels"),Fa(t,n,"descriptions"),Fa(t,n,"aliases"),Fa(t,n,"claims",e)):r==="lexeme"?(Fa(t,n,"lemmas"),n.lexicalCategory=t.lexicalCategory,n.language=t.language,Fa(t,n,"claims",e),Fa(t,n,"forms",e),Fa(t,n,"senses",e)):r==="mediainfo"&&(Fa(t,n,"labels"),Fa(t,n,"descriptions"),Fa(t,n,"statements",e)),n},Fa=(t,e,r,n)=>{t[r]!=null&&(e[r]=TIe[r](t[r],n))},Yne=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:r}=e,n={};for(const[i,a]of Object.entries(t)){const o=r?`${r}:${i}`:i;n[o]=Xne(a,e)}return n};function IIe(t){t=t.body||t;const{entities:e}=t;return Yne(e)}function OIe(t){return t=t.body||t,t.query.search.map(e=>e.title)}const DIe=Object.freeze(Object.defineProperty({__proto__:null,entities:IIe,pagesTitles:OIe},Symbol.toStringTag,{value:"Module"}));function PIe(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:r}=t.head,n=t.results.bindings;if(r.length===1&&e.minimize){const s=r[0];return n.map(l=>jL(l[s])).filter(l=>l!=null)}const{richVars:i,associatedVars:a,standaloneVars:o}=NIe(r);return n.map(s=>FIe(i,a,o,s))}function jL(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return LIe(e);const r=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return r==="decimal"||r==="integer"||r==="float"||r==="double"?parseFloat(e):r==="boolean"?e==="true":e}function LIe(t){return t.match(/http.*\/entity\/statement\//)?RIe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function RIe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function NIe(t){let e=t.filter(a=>{const o=new RegExp(`^${a}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(a=>!e.some(o=>a!==o&&a.startsWith(o)));const r=new RegExp(`^(${e.join("|")})[A-Z]`),n=t.filter(a=>r.test(a)),i=t.filter(a=>!e.includes(a)&&!r.test(a));return{richVars:e,associatedVars:n,standaloneVars:i}}function FIe(t,e,r,n){const i={};for(const a of t){const o={},s=jL(n[a]);s!=null&&(o.value=s);for(const l of e)l.startsWith(a)&&BIe(n,a,l,o);Object.keys(o).length>0&&(i[a]=o)}for(const a of r){const o=jL(n[a]);o!=null&&(i[a]=o)}return i}function BIe(t,e,r,n){let i=r.split(e)[1];i=i[0].toLowerCase()+i.slice(1),i=i==="altLabel"?"aliases":i;const a=t[r];a!=null&&(n[i]=a.value)}const $Ie=Object.freeze(Object.defineProperty({__proto__:null,aliases:Lne,claim:$L,claims:bm,descriptions:Pne,entities:Yne,entity:Xne,form:Bne,forms:$ne,glosses:Fne,labels:Dne,lemmas:Rne,propertyClaims:Pj,propertyQualifiers:mIe,propertySnaks:Pj,qualifier:yIe,qualifiers:Tne,references:Ine,representations:Nne,sense:zne,senses:jne,sitelinks:Hne,snak:$L,snaks:bm,sparqlResults:PIe},Symbol.toStringTag,{value:"Module"})),zIe=/^\d+[|\d]*$/;function jIe(t){return function(r){Od(arguments);for(const[p,v]of Object.entries(r))if(p.startsWith("sr")){const g=p.replace(/^sr/,"");if(r[g]!=null)throw new Error(`${g} and ${p} are the same`);r[g]=v}const{search:n,haswbstatement:i,format:a="json",limit:o,offset:s,profile:l,sort:u}=r;let{namespace:c,prop:f}=r;if(!(n||i))throw new Error('missing "search" or "haswbstatement" parameter');let h="";if(n&&(h+=n),i){const p=i instanceof Array?i:[i];for(const v of p)v[0]==="-"?h+=` -haswbstatement:${v.slice(1)}`:h+=` haswbstatement:${v}`}if(o!=null&&(typeof o!="number"||o<1))throw new Error(`invalid limit: ${o}`);if(s!=null&&(typeof s!="number"||s<0))throw new Error(`invalid offset: ${s}`);if(c instanceof Array?c=c.join("|"):typeof c=="number"&&(c=c.toString()),c&&!zIe.test(c))throw new Error(`invalid namespace: ${c}`);if(l!=null&&typeof l!="string")throw new Error(`invalid profile: ${l} (${typeof l}, expected string)`);if(u!=null&&typeof u!="string")throw new Error(`invalid sort: ${u} (${typeof u}, expected string)`);let d;if(f!=null){if(f instanceof Array&&(f=f.join("|")),typeof f!="string")throw new Error(`invalid prop: ${f} (${typeof f}, expected string)`);d=f.toString()}return t({action:"query",list:"search",srsearch:h.trim(),format:a,srnamespace:c,srlimit:o,sroffset:s,srqiprofile:l,srsort:u,srprop:d})}}function CA(t,e){return function(r){if(!e(r))throw new Error(`invalid ${t}: ${r} (type: ${VIe(r)})`)}}const qne=CA("entity id",v8),GIe=CA("property id",EA),UIe=CA("entity page title",wne),WIe=CA("revision id",mne);function VIe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function Kne(t){return function({ids:r,languages:n,props:i,format:a="json",redirects:o}){if(Od(arguments),!(r&&r.length>0))throw new Error("no id provided");r=Qu(r),r.forEach(l=>qne(l)),r.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const s={action:"wbgetentities",ids:r.join("|"),format:a};return o===!1&&(s.redirects="no"),n&&(n=Qu(n),s.languages=n.join("|")),i&&i.length>0&&(s.props=Qu(i).join("|")),t(s)}}function HIe(t){return function({titles:r,sites:n,languages:i,props:a,format:o="json",redirects:s}){if(Od(arguments),!(r&&r.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),r=Qu(r),n=Qu(n).map(XIe),a=Qu(a);const l={action:"wbgetentities",titles:r.join("|"),sites:n.join("|"),format:o};return n.length===1&&r.length===1&&(l.normalize=!0),i&&(i=Qu(i),l.languages=i.join("|")),a.length>0&&(l.props=a.join("|")),s===!1&&(l.redirects="no"),t(l)}}function XIe(t){return qw(S8,t)?t:t.replace(/-/g,"_")+"wiki"}function YIe(t,e){return function({id:n,revision:i}){return Od(arguments),qne(n),WIe(i),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${i}`}}function qIe(t){const e=Kne(t);return function({ids:n,languages:i,props:a,format:o,redirects:s}){if(Od(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return KIe(n).map(l=>e({ids:l,languages:i,props:a,format:o,redirects:s}))}}function KIe(t){const e=[];for(;t.length>0;){const r=t.slice(0,50);t=t.slice(50),e.push(r)}return e}function Qne(t){return function(r){const n=xne(r);return`${t}?format=json&query=${n}`}}const QIe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",ZIe=t=>{const e=Qne(t);return function(n){let{properties:i}=n;const{values:a,limit:o,caseInsensitive:s,keepProperties:l}=n,u=s?tOe:eOe,c=l?"":QIe;i=Qu(i),i.forEach(d=>GIe(d));let h=`SELECT DISTINCT ?subject WHERE { ${JIe(a,u,i,c)} }`;return o&&(h+=` LIMIT ${o}`),e(h)}},JIe=(t,e,r,n)=>(r=r.map(rOe).join("|"),t instanceof Array?"{ "+t.map(Lj).map(a=>e(r,a,n)).join("} UNION {")+" }":e(r,Lj(t),n)),Lj=t=>(mk(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),eOe=(t,e,r)=>`?subject ${t} ${e} .
    ${r}`,tOe=(t,e,r)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${r}`,rOe=t=>"wdt:"+t;function nOe(t){return function({ids:r,format:n,limit:i,start:a,end:o,prop:s,user:l,excludeuser:u,tag:c}){Od(arguments),r=Qu(r),r.forEach(d=>UIe(d));const f=r.length===1,h={action:"query",prop:"revisions"};return h.titles=r.join("|"),h.format=n||"json",f&&(h.rvlimit=i||"max"),f&&a&&(h.rvstart=Rj(a)),f&&o&&(h.rvend=Rj(o)),s?h.rvprop=Qu(s).join("|"):h.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",h.rvslots="*",l&&(h.rvuser=l),u&&(h.rvexcludeuser=u),c&&(h.rvtag=c),t(h)}}const Rj=t=>typeof t=="number"&&t<iOe?t:Math.trunc(new Date(t).getTime()/1e3),iOe=new Date("2000-01-01").getTime(),aOe=["item","property","lexeme","form","sense"],oOe=t=>function({search:r,language:n="en",uselang:i,limit:a="20",continue:o="0",format:s="json",type:l="item"}){if(Od(arguments),i=i||n,!(r&&r.length>0))throw new Error("search can't be empty");if(!qw(aOe,l))throw new Error(`invalid type: ${l}`);return t({action:"wbsearchentities",search:r,language:n,limit:a,continue:o,format:s,uselang:i,type:l})},sOe=typeof location<"u"&&typeof document<"u";function lOe(t){return e=>{sOe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const r=Object.entries(e).filter(([,i])=>i!=null).map(([i,a])=>[i,String(a)]),n=new URLSearchParams(r).toString();return t+"?"+n}}const uOe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,cOe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:$Ie,parse:DIe},qTe),MIe),gIe),iIe);function fOe(t){if(!bne(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:r}=t;let{wgScriptPath:n="w"}=t;if(n=n.replace(/^\//,""),!(e||r))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${uOe}`);let i,a,o;if(e){Nj("instance",e),a=e.replace(/\/$/,"").replace(`/${n}/api.php`,""),o=`${a}/${n}/api.php`;const l=lOe(o);i={searchEntities:oOe(l),cirrusSearchPages:jIe(l),getEntities:Kne(l),getManyEntities:qIe(l),getRevisions:nOe(l),getEntityRevision:YIe(e,n),getEntitiesFromSitelinks:HIe(l)}}else i={searchEntities:ap("searchEntities"),cirrusSearchPages:ap("cirrusSearchPages"),getEntities:ap("getEntities"),getManyEntities:ap("getManyEntities"),getRevisions:ap("getRevisions"),getEntityRevision:ap("getEntityRevision"),getEntitiesFromSitelinks:ap("getEntitiesFromSitelinks")};let s;return r?(Nj("sparqlEndpoint",r),s={sparqlQuery:Qne(r),getReverseClaims:ZIe(r)}):s={sparqlQuery:Fj("sparqlQuery"),getReverseClaims:Fj("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:a,apiEndpoint:o}},cOe),i),s)}const Nj=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},Zne=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},Fj=Zne("a sparqlEndpoint"),ap=Zne("an instance"),Jne=fOe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"});function hOe(t){const e=Jne.searchEntities({search:t,limit:5});return fetch(e).then(Q4)}async function dOe(t){const e=`SELECT DISTINCT ?wd ?wdLabel ?wdDescription
  WHERE {
    VALUES (?item) {(wd:${t})}
    ?item ?p ?statement .   ?statement ?ps ?ps_ .    ?wd wikibase:claim ?p.   ?wd wikibase:statementProperty ?ps.   SERVICE wikibase:label {
      bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".    
    }         
  }`;return await Z4(e)}async function pOe(t,e){const r=`SELECT ?child ?childLabel ?childDescription
WHERE {
  wd:${t} wdt:${e} ?child.
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}`;return await Z4(r)}const GL="ENTITY SEARCH:",UL="PROPERTIES SEARCH:",yk="ENTITY PROPERTY SEARCH:",Bj=`Your goal is to find the necessary entity and property IDs to construct a SPARQL query that answers the user's question. Do not respond with a trailing period. Do not assume you already know the correct entity and property IDs; you should search for them. Make sure to filter the IDs for the ones that are most relevant to the question. Respond in one of these ways:
- To fuzzy search for an entity, start the response with '${GL}', followed by an entity name you want to search for. The system will respond with possible entity resolutions in Wikidata. 
- To get all the properties for an entity, start the response with '${UL}', followed by the ID of the entity. The user will respond with all the properties associated with that entity.
- To find what entities are connected to the original entity via a property, start the response with '${yk}', followed by the entity ID then the property ID. Ex: '${yk} Q123 P456'
- Respond with 'STOP' if and only if you have searched for and successfully identified all necessary IDs from Wikidata to construct the query.`,vOe=20,gOe=`You are an expert at generating SPARQL queries for the Wikidata Knowledge Graph from natural language. 
Entity IDs are prepended with 'wd' and property IDs are prepended with 'wdt'. 
Your task is to convert the natural language instruction into a SPARQL query.
The following are four examples in which I am showcasing a natural language instruction (NLI) and the converted SPARQL Query. 
  NLI: Who are creators of Apple and what are their birthdates?
  SPARQL Query:
    SELECT ?founder ?founderLabel ?birthdate
      WHERE {
        wd:Q312 wdt:P112 ?founder.   # Q312 represents Apple and P112 represents founder
        ?founder wdt:P569 ?birthdate. # P569 represents date of birth
        
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
    }
  NLI: Who are the current heads of state for all countries in the world? 
  SPARQL Query: 
    SELECT ?country ?countryLabel ?headOfState ?headOfStateLabel 
      WHERE { 
        ?country wdt:P31 wd:Q6256;     # Instance of: country 
        p:P35 ?statement.    # has head of government statement 
        ?statement ps:P35 ?headOfState;   # head of government property 
        pq:P580 ?startDate.   # start date of the term 
        FILTER NOT EXISTS { ?statement pq:P582 ?endDate }  # Ensure current head of state 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
      ORDER BY ?countryLabel 
  NLI: What are the top five tallest mountains in the world and their respective heights? 
  SPARQL Query: 
    SELECT ?mountain ?mountainLabel ?height 
      WHERE { 
        ?mountain wdt:P31 wd:Q8502;         # Instance of: mountain 
        wdt:P2044 ?height.       # Height property 
        FILTER (?height >= 8000)           # Minimum height of 8000 meters 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
    ORDER BY DESC(?height) 
    LIMIT 5 
  NLI: Which symphonies were composed by Ludwig van Beethoven? 
  SPARQL Query: 
    SELECT ?composition (SAMPLE(?compositionLabel) as ?compositionLabel) 
      WHERE { 
        ?composition wdt:P31 wd:Q105543609;         # Instance of: Beethoven's symphonies 
        wdt:P86 wd:Q255;               # Composer: Ludwig van Beethoven 
        rdfs:label ?compositionLabel. 
        FILTER(CONTAINS(LCASE(?compositionLabel), "symphony")) 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      }  
    GROUP BY ?composition 
  Start the SPARQL query with \`\`\`sparql and end the query with \`\`\`. After you generate a SPARQL query, you briefly explain, as concisely as possible, to the user why the query addresses their original question. Keep your explanation as short as possible and only further explain when asked.`;async function mOe(t,e){let r=await t.sendMessages([{content:Bj,role:"system"}]),n=0;for(;n<vOe;){n++;const i=r.trim();if(i.toUpperCase()==="STOP")break;i.includes(GL)?r=await yOe(t,i.split(GL)[1].trim()):i.includes(UL)?r=await wOe(t,i.split(UL)[1].trim()):i.startsWith(yk)?r=await bOe(t,i.replace(yk,"").trim()):r=await t.sendMessages([{content:`That was an invalid response. If you are done, just respond with STOP. Follow the specified format. ${Bj}`,role:"system"}])}return await t.sendMessages([{content:gOe+` Now construct a query that answers the user's question: ${e}`,role:"system"}])}async function yOe(t,e){const r=(await hOe(e)).search,n=r.map(i=>`ID: ${i.id}, label: ${i.label}, description: ${i.description}`).join(`
`);return console.log("candidateEntitiesText",n),r.length===0?await t.sendMessages([{content:"Wikidata did not resolve any entities. You may need to rephrase or simplify your entity search",role:"system"}]):await t.sendMessages([{content:n,role:"system"}])}async function wOe(t,e){const r=await dOe(e),n=r.results.bindings.map(a=>r.head.vars.map(o=>{var s,l;return((l=(s=a[o])==null?void 0:s.value)==null?void 0:l.replace("http://www.wikidata.org/entity/",""))||""})),i=n.map(a=>`ID: ${a[0]}, label: ${a[1]}, description: ${a[2]}`).join(`
`);return console.log("propertiesMessageText",i),n.length===0?await t.sendMessages([{content:"Wikidata did not resolve any properties for that entity. Are you sure that entity exists?",role:"system"}]):await t.sendMessages([{content:i,role:"system"}])}async function bOe(t,e){let r=e.split(" ");if(r.length!==2&&(r=e.split(", ")),r.length!==2)return await t.sendMessages([{content:"Your response did not follow the correct format. Please try again.",role:"system"}]);const[n,i]=r,a=await pOe(n,i),o=a.results.bindings.map(s=>{var f,h,d;const l=(f=s==null?void 0:s.child)==null?void 0:f.value.replace("http://www.wikidata.org/entity/",""),u=(h=s==null?void 0:s.childLabel)==null?void 0:h.value,c=(d=s==null?void 0:s.childDescription)==null?void 0:d.value;return`ID: ${l}, label: ${u}, description: ${c}`}).join(`
`);return console.log("handleFindTailEntities propertiesMessageText",o),a.results.bindings.length===0?await t.sendMessages([{content:"Wikidata did not resolve any entities for that entity and property. Are you sure that entity has that property?",role:"system"}]):await t.sendMessages([{content:o,role:"system"}])}function xOe(){const t=ab(),e=hf(g=>g.chatHistory.fullChatHistory),r=hf(g=>g.chatHistory.showFullChatHistory),n=hf(g=>g.chatHistory.simpleChatHistory),i=r?e:n,a=ae.useRef(null);ae.useEffect(()=>{a.current&&a.current.scrollIntoView({behavior:"smooth"})},[i.length]);const[o,s]=ae.useState(!1),l=()=>s(!1),[u,c]=ae.useState(""),f=Jre(),{error:h,isPending:d,mutate:p,reset:v}=xre({mutationKey:["submit-chat"],mutationFn:async g=>{t(cj({role:"user",content:g}));const m=await f.sendMessages([{content:g,role:"user"}]),y=m.includes("BUILD QUERY")?await mOe(f,g):m;t(cj({content:y,role:"assistant"}))},onError(g){console.error(g)}});return Oe.jsxs("div",{id:$l["chat-container"],children:[Oe.jsx(xs,{opened:o,onClose:l,title:"Settings",children:Oe.jsx(oA,{checked:r,onChange:()=>t(AMe()),label:"Show full chat history"})}),Oe.jsx(cv,{id:$l["chat-settings-button"],size:"sm",variant:"filled","aria-label":"Show Settings",onClick:()=>s(!0),children:Oe.jsx(WCe,{})}),Oe.jsxs("div",{id:$l["chat-scroll-container"],children:[i.map((g,m)=>Oe.jsx("div",{className:`${$l["chat-entry"]} ${$l[g.role]}`,children:g.role==="assistant"?Oe.jsx(SOe,{text:g.content,setInputText:c}):Oe.jsx("pre",{className:$l.chat,children:g.content})},m)),Oe.jsx("div",{ref:a})]}),h&&Oe.jsx(xs,{opened:!0,onClose:v,title:"LLM Error",children:Oe.jsx(dne,{children:h.message})}),d&&Oe.jsx("p",{className:$l.loading,children:"Loading..."}),Oe.jsx("form",{onSubmit:g=>{g.preventDefault(),p(u),c("")},children:Oe.jsx(G4,{id:$l.input,onChange:g=>c(g.currentTarget.value),placeholder:"Chat...",size:"md",value:u})})]})}function SOe({setInputText:t,text:e}){const r=EOe(e);return r?Oe.jsx("div",{className:$l.chat,children:Oe.jsx(_Oe,{pre:r.pre,query:r.query.trim(),post:r.post,setInputText:t})}):Oe.jsx("pre",{className:$l.chat,children:e})}function EOe(t){let e=t.split("```sparql");if(e.length===2){const[r,n]=e[1].split("```");return{pre:e[0],query:r,post:n}}if(e=t.split("```\nSELECT"),e.length===2){const[r,n]=e[1].split("```");return{pre:e[0],query:"SELECT"+r,post:n}}if(e=t.split("SELECT"),e.length===2){const[r,n]=e[1].split(`

`);return{pre:e[0],query:"SELECT"+r,post:n}}return null}function _Oe({pre:t,query:e,post:r,setInputText:n}){const i=ab(),{runQuery:a}=f8();return Oe.jsxs(Oe.Fragment,{children:[Oe.jsx("pre",{children:t}),Oe.jsx(g4,{extensions:[jM.define(hee)],value:e}),Oe.jsx("div",{className:$l["copy-query-buttons"],children:Oe.jsxs("div",{children:[Oe.jsxs(Hu,{onClick:()=>i(jC(e)),variant:"outline",color:"white",children:["Copy query over to examine ",Oe.jsx(VCe,{})]}),Oe.jsx("br",{}),Oe.jsxs(Hu,{onClick:()=>{i(jC(e)),a(e)},children:["Copy query over and run ",Oe.jsx(Wte,{})]})]})}),Oe.jsx("pre",{children:r}),Oe.jsx("br",{}),Oe.jsx(Hu,{onClick:()=>n("You identified the wrong data. I was actually looking for: "),children:"You identified the wrong data"}),Oe.jsx("br",{}),Oe.jsx(Hu,{onClick:()=>n("You misunderstood my question. I was actually asking about: "),children:"You misunderstood my question"}),Oe.jsx("br",{}),Oe.jsx(Hu,{onClick:()=>n("I want to ask something different: "),children:"I want to ask something different"})]})}async function COe(t){const e=Jne.getEntities({ids:t,languages:["en"],format:"json"});return await fetch(e).then(Q4)}const eie=t=>{const e=t.match(/(?:wd|wdt|ps|pq):[QP]\d+/g);return mAe({queryKey:[`entity-ids-${e==null?void 0:e.join(", ")}`],queryFn:async()=>(console.log("IDs",e),e?await COe(e.map(r=>r.split(":")[1])):null)})},kOe={"id-table-container":"_id-table-container_1pso5_1"};function MOe(){const t=hf(a=>a.queryValue.queryValue),{data:e,error:r,isLoading:n}=eie(t);if(!n&&!r&&!e)return null;const i=(()=>{if(n)return Oe.jsx("p",{children:"Loading..."});if(r)return Oe.jsxs("p",{children:["Error: ",r.message]});if(e){const a=Object.entries(e.entities).map(([o,s])=>{var l,u,c,f;return{id:o,label:((u=(l=s.labels)==null?void 0:l.en)==null?void 0:u.value)||"",description:((f=(c=s.descriptions)==null?void 0:c.en)==null?void 0:f.value)||""}});return Oe.jsx(AOe,{data:a})}else return Oe.jsx("p",{children:"No ID data"})})();return Oe.jsxs("div",{id:kOe["id-table-container"],children:[Oe.jsx(hd,{order:4,children:"Entity-Relation Table from KG"}),i]})}function AOe({data:t}){const e=cne(),r=[e.accessor("id",{}),e.accessor("label",{}),e.accessor("description",{})],n=hne({columns:r,data:t,getCoreRowModel:fne()});return Oe.jsxs(On,{children:[Oe.jsx(On.Thead,{children:n.getHeaderGroups().map(i=>Oe.jsx(On.Tr,{children:i.headers.map(a=>Oe.jsx(On.Th,{children:a.isPlaceholder?null:gk(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),Oe.jsx(On.Tbody,{children:n.getRowModel().rows.map(i=>Oe.jsx(On.Tr,{children:i.getVisibleCells().map(a=>Oe.jsx(On.Td,{children:gk(a.column.columnDef.cell,a.getContext())},a.id))},i.id))})]})}var tie=typeof global=="object"&&global&&global.Object===Object&&global,TOe=typeof self=="object"&&self&&self.Object===Object&&self,uu=tie||TOe||Function("return this")(),pc=uu.Symbol,rie=Object.prototype,IOe=rie.hasOwnProperty,OOe=rie.toString,Vy=pc?pc.toStringTag:void 0;function DOe(t){var e=IOe.call(t,Vy),r=t[Vy];try{t[Vy]=void 0;var n=!0}catch{}var i=OOe.call(t);return n&&(e?t[Vy]=r:delete t[Vy]),i}var POe=Object.prototype,LOe=POe.toString;function ROe(t){return LOe.call(t)}var NOe="[object Null]",FOe="[object Undefined]",$j=pc?pc.toStringTag:void 0;function Tv(t){return t==null?t===void 0?FOe:NOe:$j&&$j in Object(t)?DOe(t):ROe(t)}function vc(t){return t!=null&&typeof t=="object"}var BOe="[object Symbol]";function kA(t){return typeof t=="symbol"||vc(t)&&Tv(t)==BOe}function $Oe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Cs=Array.isArray,zOe=1/0,zj=pc?pc.prototype:void 0,jj=zj?zj.toString:void 0;function nie(t){if(typeof t=="string")return t;if(Cs(t))return $Oe(t,nie)+"";if(kA(t))return jj?jj.call(t):"";var e=t+"";return e=="0"&&1/t==-zOe?"-0":e}var jOe=/\s/;function GOe(t){for(var e=t.length;e--&&jOe.test(t.charAt(e)););return e}var UOe=/^\s+/;function WOe(t){return t&&t.slice(0,GOe(t)+1).replace(UOe,"")}function hl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Gj=NaN,VOe=/^[-+]0x[0-9a-f]+$/i,HOe=/^0b[01]+$/i,XOe=/^0o[0-7]+$/i,YOe=parseInt;function Uj(t){if(typeof t=="number")return t;if(kA(t))return Gj;if(hl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=WOe(t);var r=HOe.test(t);return r||XOe.test(t)?YOe(t.slice(2),r?2:8):VOe.test(t)?Gj:+t}function E8(t){return t}var qOe="[object AsyncFunction]",KOe="[object Function]",QOe="[object GeneratorFunction]",ZOe="[object Proxy]";function _8(t){if(!hl(t))return!1;var e=Tv(t);return e==KOe||e==QOe||e==qOe||e==ZOe}var FO=uu["__core-js_shared__"],Wj=function(){var t=/[^.]+$/.exec(FO&&FO.keys&&FO.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function JOe(t){return!!Wj&&Wj in t}var e3e=Function.prototype,t3e=e3e.toString;function Iv(t){if(t!=null){try{return t3e.call(t)}catch{}try{return t+""}catch{}}return""}var r3e=/[\\^$.*+?()[\]{}|]/g,n3e=/^\[object .+?Constructor\]$/,i3e=Function.prototype,a3e=Object.prototype,o3e=i3e.toString,s3e=a3e.hasOwnProperty,l3e=RegExp("^"+o3e.call(s3e).replace(r3e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u3e(t){if(!hl(t)||JOe(t))return!1;var e=_8(t)?l3e:n3e;return e.test(Iv(t))}function c3e(t,e){return t==null?void 0:t[e]}function Ov(t,e){var r=c3e(t,e);return u3e(r)?r:void 0}var WL=Ov(uu,"WeakMap"),Vj=Object.create,f3e=function(){function t(){}return function(e){if(!hl(e))return{};if(Vj)return Vj(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function h3e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function d3e(){}function iie(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var p3e=800,v3e=16,g3e=Date.now;function m3e(t){var e=0,r=0;return function(){var n=g3e(),i=v3e-(n-r);if(r=n,i>0){if(++e>=p3e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function y3e(t){return function(){return t}}var wk=function(){try{var t=Ov(Object,"defineProperty");return t({},"",{}),t}catch{}}(),w3e=wk?function(t,e){return wk(t,"toString",{configurable:!0,enumerable:!1,value:y3e(e),writable:!0})}:E8;const b3e=w3e;var x3e=m3e(b3e);function S3e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function E3e(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function _3e(t){return t!==t}function C3e(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function k3e(t,e,r){return e===e?C3e(t,e,r):E3e(t,_3e,r)}function M3e(t,e){var r=t==null?0:t.length;return!!r&&k3e(t,e,0)>-1}var A3e=9007199254740991,T3e=/^(?:0|[1-9]\d*)$/;function C8(t,e){var r=typeof t;return e=e??A3e,!!e&&(r=="number"||r!="symbol"&&T3e.test(t))&&t>-1&&t%1==0&&t<e}function k8(t,e,r){e=="__proto__"&&wk?wk(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function sb(t,e){return t===e||t!==t&&e!==e}var I3e=Object.prototype,O3e=I3e.hasOwnProperty;function aie(t,e,r){var n=t[e];(!(O3e.call(t,e)&&sb(n,r))||r===void 0&&!(e in t))&&k8(t,e,r)}function lb(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?k8(r,s,l):aie(r,s,l)}return r}var Hj=Math.max;function D3e(t,e,r){return e=Hj(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=Hj(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),h3e(t,this,s)}}function P3e(t,e){return x3e(D3e(t,e,E8),t+"")}var L3e=9007199254740991;function M8(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=L3e}function ub(t){return t!=null&&M8(t.length)&&!_8(t)}function R3e(t,e,r){if(!hl(r))return!1;var n=typeof e;return(n=="number"?ub(r)&&C8(e,r.length):n=="string"&&e in r)?sb(r[e],t):!1}function N3e(t){return P3e(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&R3e(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}var F3e=Object.prototype;function MA(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||F3e;return t===r}function B3e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var $3e="[object Arguments]";function Xj(t){return vc(t)&&Tv(t)==$3e}var oie=Object.prototype,z3e=oie.hasOwnProperty,j3e=oie.propertyIsEnumerable,G3e=Xj(function(){return arguments}())?Xj:function(t){return vc(t)&&z3e.call(t,"callee")&&!j3e.call(t,"callee")};const Kw=G3e;function U3e(){return!1}var sie=typeof gs=="object"&&gs&&!gs.nodeType&&gs,Yj=sie&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,W3e=Yj&&Yj.exports===sie,qj=W3e?uu.Buffer:void 0,V3e=qj?qj.isBuffer:void 0,xm=V3e||U3e,H3e="[object Arguments]",X3e="[object Array]",Y3e="[object Boolean]",q3e="[object Date]",K3e="[object Error]",Q3e="[object Function]",Z3e="[object Map]",J3e="[object Number]",eDe="[object Object]",tDe="[object RegExp]",rDe="[object Set]",nDe="[object String]",iDe="[object WeakMap]",aDe="[object ArrayBuffer]",oDe="[object DataView]",sDe="[object Float32Array]",lDe="[object Float64Array]",uDe="[object Int8Array]",cDe="[object Int16Array]",fDe="[object Int32Array]",hDe="[object Uint8Array]",dDe="[object Uint8ClampedArray]",pDe="[object Uint16Array]",vDe="[object Uint32Array]",An={};An[sDe]=An[lDe]=An[uDe]=An[cDe]=An[fDe]=An[hDe]=An[dDe]=An[pDe]=An[vDe]=!0;An[H3e]=An[X3e]=An[aDe]=An[Y3e]=An[oDe]=An[q3e]=An[K3e]=An[Q3e]=An[Z3e]=An[J3e]=An[eDe]=An[tDe]=An[rDe]=An[nDe]=An[iDe]=!1;function gDe(t){return vc(t)&&M8(t.length)&&!!An[Tv(t)]}function A8(t){return function(e){return t(e)}}var lie=typeof gs=="object"&&gs&&!gs.nodeType&&gs,Q1=lie&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,mDe=Q1&&Q1.exports===lie,BO=mDe&&tie.process,Sm=function(){try{var t=Q1&&Q1.require&&Q1.require("util").types;return t||BO&&BO.binding&&BO.binding("util")}catch{}}(),Kj=Sm&&Sm.isTypedArray,AA=Kj?A8(Kj):gDe,yDe=Object.prototype,wDe=yDe.hasOwnProperty;function uie(t,e){var r=Cs(t),n=!r&&Kw(t),i=!r&&!n&&xm(t),a=!r&&!n&&!i&&AA(t),o=r||n||i||a,s=o?B3e(t.length,String):[],l=s.length;for(var u in t)(e||wDe.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||C8(u,l)))&&s.push(u);return s}function cie(t,e){return function(r){return t(e(r))}}var bDe=cie(Object.keys,Object),xDe=Object.prototype,SDe=xDe.hasOwnProperty;function fie(t){if(!MA(t))return bDe(t);var e=[];for(var r in Object(t))SDe.call(t,r)&&r!="constructor"&&e.push(r);return e}function TA(t){return ub(t)?uie(t):fie(t)}function EDe(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var _De=Object.prototype,CDe=_De.hasOwnProperty;function kDe(t){if(!hl(t))return EDe(t);var e=MA(t),r=[];for(var n in t)n=="constructor"&&(e||!CDe.call(t,n))||r.push(n);return r}function cb(t){return ub(t)?uie(t,!0):kDe(t)}var MDe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ADe=/^\w*$/;function T8(t,e){if(Cs(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||kA(t)?!0:ADe.test(t)||!MDe.test(t)||e!=null&&t in Object(e)}var Qw=Ov(Object,"create");function TDe(){this.__data__=Qw?Qw(null):{},this.size=0}function IDe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ODe="__lodash_hash_undefined__",DDe=Object.prototype,PDe=DDe.hasOwnProperty;function LDe(t){var e=this.__data__;if(Qw){var r=e[t];return r===ODe?void 0:r}return PDe.call(e,t)?e[t]:void 0}var RDe=Object.prototype,NDe=RDe.hasOwnProperty;function FDe(t){var e=this.__data__;return Qw?e[t]!==void 0:NDe.call(e,t)}var BDe="__lodash_hash_undefined__";function $De(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Qw&&e===void 0?BDe:e,this}function vv(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vv.prototype.clear=TDe;vv.prototype.delete=IDe;vv.prototype.get=LDe;vv.prototype.has=FDe;vv.prototype.set=$De;function zDe(){this.__data__=[],this.size=0}function IA(t,e){for(var r=t.length;r--;)if(sb(t[r][0],e))return r;return-1}var jDe=Array.prototype,GDe=jDe.splice;function UDe(t){var e=this.__data__,r=IA(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():GDe.call(e,r,1),--this.size,!0}function WDe(t){var e=this.__data__,r=IA(e,t);return r<0?void 0:e[r][1]}function VDe(t){return IA(this.__data__,t)>-1}function HDe(t,e){var r=this.__data__,n=IA(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Of(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Of.prototype.clear=zDe;Of.prototype.delete=UDe;Of.prototype.get=WDe;Of.prototype.has=VDe;Of.prototype.set=HDe;var Zw=Ov(uu,"Map");function XDe(){this.size=0,this.__data__={hash:new vv,map:new(Zw||Of),string:new vv}}function YDe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function OA(t,e){var r=t.__data__;return YDe(e)?r[typeof e=="string"?"string":"hash"]:r.map}function qDe(t){var e=OA(this,t).delete(t);return this.size-=e?1:0,e}function KDe(t){return OA(this,t).get(t)}function QDe(t){return OA(this,t).has(t)}function ZDe(t,e){var r=OA(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Df(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Df.prototype.clear=XDe;Df.prototype.delete=qDe;Df.prototype.get=KDe;Df.prototype.has=QDe;Df.prototype.set=ZDe;var JDe="Expected a function";function I8(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(JDe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(I8.Cache||Df),r}I8.Cache=Df;var ePe=500;function tPe(t){var e=I8(t,function(n){return r.size===ePe&&r.clear(),n}),r=e.cache;return e}var rPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nPe=/\\(\\)?/g,iPe=tPe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(rPe,function(r,n,i,a){e.push(i?a.replace(nPe,"$1"):n||r)}),e});function aPe(t){return t==null?"":nie(t)}function hie(t,e){return Cs(t)?t:T8(t,e)?[t]:iPe(aPe(t))}var oPe=1/0;function DA(t){if(typeof t=="string"||kA(t))return t;var e=t+"";return e=="0"&&1/t==-oPe?"-0":e}function die(t,e){e=hie(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[DA(e[r++])];return r&&r==n?t:void 0}function sPe(t,e,r){var n=t==null?void 0:die(t,e);return n===void 0?r:n}function pie(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var lPe=cie(Object.getPrototypeOf,Object);const O8=lPe;var uPe="[object Object]",cPe=Function.prototype,fPe=Object.prototype,vie=cPe.toString,hPe=fPe.hasOwnProperty,dPe=vie.call(Object);function pPe(t){if(!vc(t)||Tv(t)!=uPe)return!1;var e=O8(t);if(e===null)return!0;var r=hPe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&vie.call(r)==dPe}function vPe(){this.__data__=new Of,this.size=0}function gPe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function mPe(t){return this.__data__.get(t)}function yPe(t){return this.__data__.has(t)}var wPe=200;function bPe(t,e){var r=this.__data__;if(r instanceof Of){var n=r.__data__;if(!Zw||n.length<wPe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Df(n)}return r.set(t,e),this.size=r.size,this}function tu(t){var e=this.__data__=new Of(t);this.size=e.size}tu.prototype.clear=vPe;tu.prototype.delete=gPe;tu.prototype.get=mPe;tu.prototype.has=yPe;tu.prototype.set=bPe;function xPe(t,e){return t&&lb(e,TA(e),t)}function SPe(t,e){return t&&lb(e,cb(e),t)}var gie=typeof gs=="object"&&gs&&!gs.nodeType&&gs,Qj=gie&&typeof ms=="object"&&ms&&!ms.nodeType&&ms,EPe=Qj&&Qj.exports===gie,Zj=EPe?uu.Buffer:void 0,Jj=Zj?Zj.allocUnsafe:void 0;function mie(t,e){if(e)return t.slice();var r=t.length,n=Jj?Jj(r):new t.constructor(r);return t.copy(n),n}function _Pe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function yie(){return[]}var CPe=Object.prototype,kPe=CPe.propertyIsEnumerable,eG=Object.getOwnPropertySymbols,D8=eG?function(t){return t==null?[]:(t=Object(t),_Pe(eG(t),function(e){return kPe.call(t,e)}))}:yie;function MPe(t,e){return lb(t,D8(t),e)}var APe=Object.getOwnPropertySymbols,wie=APe?function(t){for(var e=[];t;)pie(e,D8(t)),t=O8(t);return e}:yie;function TPe(t,e){return lb(t,wie(t),e)}function bie(t,e,r){var n=e(t);return Cs(t)?n:pie(n,r(t))}function VL(t){return bie(t,TA,D8)}function IPe(t){return bie(t,cb,wie)}var HL=Ov(uu,"DataView"),XL=Ov(uu,"Promise"),I0=Ov(uu,"Set"),tG="[object Map]",OPe="[object Object]",rG="[object Promise]",nG="[object Set]",iG="[object WeakMap]",aG="[object DataView]",DPe=Iv(HL),PPe=Iv(Zw),LPe=Iv(XL),RPe=Iv(I0),NPe=Iv(WL),pp=Tv;(HL&&pp(new HL(new ArrayBuffer(1)))!=aG||Zw&&pp(new Zw)!=tG||XL&&pp(XL.resolve())!=rG||I0&&pp(new I0)!=nG||WL&&pp(new WL)!=iG)&&(pp=function(t){var e=Tv(t),r=e==OPe?t.constructor:void 0,n=r?Iv(r):"";if(n)switch(n){case DPe:return aG;case PPe:return tG;case LPe:return rG;case RPe:return nG;case NPe:return iG}return e});const Em=pp;var FPe=Object.prototype,BPe=FPe.hasOwnProperty;function $Pe(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&BPe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var bk=uu.Uint8Array;function P8(t){var e=new t.constructor(t.byteLength);return new bk(e).set(new bk(t)),e}function zPe(t,e){var r=e?P8(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var jPe=/\w*$/;function GPe(t){var e=new t.constructor(t.source,jPe.exec(t));return e.lastIndex=t.lastIndex,e}var oG=pc?pc.prototype:void 0,sG=oG?oG.valueOf:void 0;function UPe(t){return sG?Object(sG.call(t)):{}}function xie(t,e){var r=e?P8(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var WPe="[object Boolean]",VPe="[object Date]",HPe="[object Map]",XPe="[object Number]",YPe="[object RegExp]",qPe="[object Set]",KPe="[object String]",QPe="[object Symbol]",ZPe="[object ArrayBuffer]",JPe="[object DataView]",eLe="[object Float32Array]",tLe="[object Float64Array]",rLe="[object Int8Array]",nLe="[object Int16Array]",iLe="[object Int32Array]",aLe="[object Uint8Array]",oLe="[object Uint8ClampedArray]",sLe="[object Uint16Array]",lLe="[object Uint32Array]";function uLe(t,e,r){var n=t.constructor;switch(e){case ZPe:return P8(t);case WPe:case VPe:return new n(+t);case JPe:return zPe(t,r);case eLe:case tLe:case rLe:case nLe:case iLe:case aLe:case oLe:case sLe:case lLe:return xie(t,r);case HPe:return new n;case XPe:case KPe:return new n(t);case YPe:return GPe(t);case qPe:return new n;case QPe:return UPe(t)}}function Sie(t){return typeof t.constructor=="function"&&!MA(t)?f3e(O8(t)):{}}var cLe="[object Map]";function fLe(t){return vc(t)&&Em(t)==cLe}var lG=Sm&&Sm.isMap,hLe=lG?A8(lG):fLe,dLe="[object Set]";function pLe(t){return vc(t)&&Em(t)==dLe}var uG=Sm&&Sm.isSet,vLe=uG?A8(uG):pLe,gLe=1,mLe=2,yLe=4,Eie="[object Arguments]",wLe="[object Array]",bLe="[object Boolean]",xLe="[object Date]",SLe="[object Error]",_ie="[object Function]",ELe="[object GeneratorFunction]",_Le="[object Map]",CLe="[object Number]",Cie="[object Object]",kLe="[object RegExp]",MLe="[object Set]",ALe="[object String]",TLe="[object Symbol]",ILe="[object WeakMap]",OLe="[object ArrayBuffer]",DLe="[object DataView]",PLe="[object Float32Array]",LLe="[object Float64Array]",RLe="[object Int8Array]",NLe="[object Int16Array]",FLe="[object Int32Array]",BLe="[object Uint8Array]",$Le="[object Uint8ClampedArray]",zLe="[object Uint16Array]",jLe="[object Uint32Array]",mn={};mn[Eie]=mn[wLe]=mn[OLe]=mn[DLe]=mn[bLe]=mn[xLe]=mn[PLe]=mn[LLe]=mn[RLe]=mn[NLe]=mn[FLe]=mn[_Le]=mn[CLe]=mn[Cie]=mn[kLe]=mn[MLe]=mn[ALe]=mn[TLe]=mn[BLe]=mn[$Le]=mn[zLe]=mn[jLe]=!0;mn[SLe]=mn[_ie]=mn[ILe]=!1;function g_(t,e,r,n,i,a){var o,s=e&gLe,l=e&mLe,u=e&yLe;if(r&&(o=i?r(t,n,i,a):r(t)),o!==void 0)return o;if(!hl(t))return t;var c=Cs(t);if(c){if(o=$Pe(t),!s)return iie(t,o)}else{var f=Em(t),h=f==_ie||f==ELe;if(xm(t))return mie(t,s);if(f==Cie||f==Eie||h&&!i){if(o=l||h?{}:Sie(t),!s)return l?TPe(t,SPe(o,t)):MPe(t,xPe(o,t))}else{if(!mn[f])return i?t:{};o=uLe(t,f,s)}}a||(a=new tu);var d=a.get(t);if(d)return d;a.set(t,o),vLe(t)?t.forEach(function(g){o.add(g_(g,e,r,g,t,a))}):hLe(t)&&t.forEach(function(g,m){o.set(m,g_(g,e,r,m,t,a))});var p=u?l?IPe:VL:l?cb:TA,v=c?void 0:p(t);return S3e(v||t,function(g,m){v&&(m=g,g=t[m]),aie(o,m,g_(g,e,r,m,t,a))}),o}var GLe=1,ULe=4;function cG(t){return g_(t,GLe|ULe)}var WLe="__lodash_hash_undefined__";function VLe(t){return this.__data__.set(t,WLe),this}function HLe(t){return this.__data__.has(t)}function Jw(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Df;++e<r;)this.add(t[e])}Jw.prototype.add=Jw.prototype.push=VLe;Jw.prototype.has=HLe;function XLe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function kie(t,e){return t.has(e)}var YLe=1,qLe=2;function Mie(t,e,r,n,i,a){var o=r&YLe,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=r&qLe?new Jw:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var g=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!XLe(e,function(m,y){if(!kie(d,y)&&(p===m||i(p,m,r,n,a)))return d.push(y)})){h=!1;break}}else if(!(p===v||i(p,v,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}function KLe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function L8(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var QLe=1,ZLe=2,JLe="[object Boolean]",eRe="[object Date]",tRe="[object Error]",rRe="[object Map]",nRe="[object Number]",iRe="[object RegExp]",aRe="[object Set]",oRe="[object String]",sRe="[object Symbol]",lRe="[object ArrayBuffer]",uRe="[object DataView]",fG=pc?pc.prototype:void 0,$O=fG?fG.valueOf:void 0;function cRe(t,e,r,n,i,a,o){switch(r){case uRe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lRe:return!(t.byteLength!=e.byteLength||!a(new bk(t),new bk(e)));case JLe:case eRe:case nRe:return sb(+t,+e);case tRe:return t.name==e.name&&t.message==e.message;case iRe:case oRe:return t==e+"";case rRe:var s=KLe;case aRe:var l=n&QLe;if(s||(s=L8),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=ZLe,o.set(t,e);var c=Mie(s(t),s(e),n,i,a,o);return o.delete(t),c;case sRe:if($O)return $O.call(t)==$O.call(e)}return!1}var fRe=1,hRe=Object.prototype,dRe=hRe.hasOwnProperty;function pRe(t,e,r,n,i,a){var o=r&fRe,s=VL(t),l=s.length,u=VL(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var h=s[f];if(!(o?h in e:dRe.call(e,h)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var v=!0;a.set(t,e),a.set(e,t);for(var g=o;++f<l;){h=s[f];var m=t[h],y=e[h];if(n)var w=o?n(y,m,h,e,t,a):n(m,y,h,t,e,a);if(!(w===void 0?m===y||i(m,y,r,n,a):w)){v=!1;break}g||(g=h=="constructor")}if(v&&!g){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(v=!1)}return a.delete(t),a.delete(e),v}var vRe=1,hG="[object Arguments]",dG="[object Array]",DS="[object Object]",gRe=Object.prototype,pG=gRe.hasOwnProperty;function mRe(t,e,r,n,i,a){var o=Cs(t),s=Cs(e),l=o?dG:Em(t),u=s?dG:Em(e);l=l==hG?DS:l,u=u==hG?DS:u;var c=l==DS,f=u==DS,h=l==u;if(h&&xm(t)){if(!xm(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new tu),o||AA(t)?Mie(t,e,r,n,i,a):cRe(t,e,l,r,n,i,a);if(!(r&vRe)){var d=c&&pG.call(t,"__wrapped__"),p=f&&pG.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return a||(a=new tu),i(v,g,r,n,a)}}return h?(a||(a=new tu),pRe(t,e,r,n,i,a)):!1}function PA(t,e,r,n,i){return t===e?!0:t==null||e==null||!vc(t)&&!vc(e)?t!==t&&e!==e:mRe(t,e,r,n,PA,i)}var yRe=1,wRe=2;function bRe(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new tu;if(n)var h=n(u,c,l,t,e,f);if(!(h===void 0?PA(c,u,yRe|wRe,n,f):h))return!1}}return!0}function Aie(t){return t===t&&!hl(t)}function xRe(t){for(var e=TA(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Aie(i)]}return e}function Tie(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function SRe(t){var e=xRe(t);return e.length==1&&e[0][2]?Tie(e[0][0],e[0][1]):function(r){return r===t||bRe(r,t,e)}}function ERe(t,e){return t!=null&&e in Object(t)}function _Re(t,e,r){e=hie(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=DA(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&M8(i)&&C8(o,i)&&(Cs(t)||Kw(t)))}function CRe(t,e){return t!=null&&_Re(t,e,ERe)}var kRe=1,MRe=2;function ARe(t,e){return T8(t)&&Aie(e)?Tie(DA(t),e):function(r){var n=sPe(r,t);return n===void 0&&n===e?CRe(r,t):PA(e,n,kRe|MRe)}}function TRe(t){return function(e){return e==null?void 0:e[t]}}function IRe(t){return function(e){return die(e,t)}}function ORe(t){return T8(t)?TRe(DA(t)):IRe(t)}function DRe(t){return typeof t=="function"?t:t==null?E8:typeof t=="object"?Cs(t)?ARe(t[0],t[1]):SRe(t):ORe(t)}function PRe(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}var LRe=PRe(),zO=function(){return uu.Date.now()},RRe="Expected a function",NRe=Math.max,FRe=Math.min;function Iie(t,e,r){var n,i,a,o,s,l,u=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(RRe);e=Uj(e)||0,hl(r)&&(c=!!r.leading,f="maxWait"in r,a=f?NRe(Uj(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function d(S){var E=n,_=i;return n=i=void 0,u=S,o=t.apply(_,E),o}function p(S){return u=S,s=setTimeout(m,e),c?d(S):o}function v(S){var E=S-l,_=S-u,k=e-E;return f?FRe(k,a-_):k}function g(S){var E=S-l,_=S-u;return l===void 0||E>=e||E<0||f&&_>=a}function m(){var S=zO();if(g(S))return y(S);s=setTimeout(m,v(S))}function y(S){return s=void 0,h&&n?d(S):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function b(){return s===void 0?o:y(zO())}function x(){var S=zO(),E=g(S);if(n=arguments,i=this,l=S,E){if(s===void 0)return p(l);if(f)return clearTimeout(s),s=setTimeout(m,e),d(l)}return s===void 0&&(s=setTimeout(m,e)),o}return x.cancel=w,x.flush=b,x}function YL(t,e,r){(r!==void 0&&!sb(t[e],r)||r===void 0&&!(e in t))&&k8(t,e,r)}function BRe(t){return vc(t)&&ub(t)}function qL(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function $Re(t){return lb(t,cb(t))}function zRe(t,e,r,n,i,a,o){var s=qL(t,r),l=qL(e,r),u=o.get(l);if(u){YL(t,r,u);return}var c=a?a(s,l,r+"",t,e,o):void 0,f=c===void 0;if(f){var h=Cs(l),d=!h&&xm(l),p=!h&&!d&&AA(l);c=l,h||d||p?Cs(s)?c=s:BRe(s)?c=iie(s):d?(f=!1,c=mie(l,!0)):p?(f=!1,c=xie(l,!0)):c=[]:pPe(l)||Kw(l)?(c=s,Kw(s)?c=$Re(s):(!hl(s)||_8(s))&&(c=Sie(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),YL(t,r,c)}function Oie(t,e,r,n,i){t!==e&&LRe(e,function(a,o){if(i||(i=new tu),hl(a))zRe(t,e,o,r,Oie,n,i);else{var s=n?n(qL(t,o),a,o+"",t,e,i):void 0;s===void 0&&(s=a),YL(t,o,s)}},cb)}function jRe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var GRe="[object Map]",URe="[object Set]",WRe=Object.prototype,VRe=WRe.hasOwnProperty;function HRe(t){if(t==null)return!0;if(ub(t)&&(Cs(t)||typeof t=="string"||typeof t.splice=="function"||xm(t)||AA(t)||Kw(t)))return!t.length;var e=Em(t);if(e==GRe||e==URe)return!t.size;if(MA(t))return!fie(t).length;for(var r in t)if(VRe.call(t,r))return!1;return!0}function XRe(t,e){return PA(t,e)}var YRe=N3e(function(t,e,r){Oie(t,e,r)});const Hp=YRe;var qRe=1/0,KRe=I0&&1/L8(new I0([,-0]))[1]==qRe?function(t){return new I0(t)}:d3e,QRe=200;function ZRe(t,e,r){var n=-1,i=M3e,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=jRe;else if(a>=QRe){var u=e?null:KRe(t);if(u)return L8(u);o=!1,i=kie,l=new Jw}else l=e?[]:s;e:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}function JRe(t,e){return t&&t.length?ZRe(t,DRe(e)):[]}var eNe={graph:{},apis:{},theme:{},layout:{}},tNe=ee.createContext(eNe);const Oa=tNe;var rNe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Pf=function(e){var r=e.type,n=e.defaultConfig,i=e.userProps,a=e.mode,o=a===void 0?"default":a,s=ee.useContext(Oa),l=s.graph,u=i.disabled,c=rNe(i,["disabled"]);ee.useEffect(function(){if(!(!l||l.destroyed||HRe(l))&&(l.removeBehaviors(r,o),!u))return l.addBehaviors(Object.assign(Object.assign({type:r},n),c),o),function(){l.destroyed||l.removeBehaviors(r,o)}},[])},nNe={disabled:!1,trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1},iNe=function(e){return Pf({type:"activate-relations",userProps:e,defaultConfig:nNe}),null};const aNe=iNe;var oNe="shift",sNe={disabled:!1,brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:oNe,includeEdges:!0,includeCombos:!1},lNe=function(e){return Pf({type:"brush-select",userProps:e,defaultConfig:sNe}),null};const uNe=lNe;var cNe="shift",fNe={disabled:!1,multiple:!0,trigger:cNe,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0},hNe=function(e){return Pf({type:"click-select",userProps:e,defaultConfig:fNe}),null};const dNe=hNe;var pNe={direction:"both",enableOptimize:!1,scalableRange:0,shouldBegin:function(){return!0},disabled:!1},vNe=function(e){return Pf({type:"drag-canvas",userProps:e,defaultConfig:pNe}),null};const gNe=vNe;var mNe={disabled:!1,enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"},yNe=function(e){return Pf({type:"drag-combo",userProps:e,defaultConfig:mNe}),null};const wNe=yNe;var bNe={disabled:!1,updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"},xNe=function(e){return Pf({type:"drag-node",userProps:e,defaultConfig:bNe}),null};const SNe=xNe;var Die=function(e){var r=ee.useContext(Oa),n=r.graph,i=r.layout,a=r.dragNodes,o=r.updateContext,s=e.autoPin,l=e.pinAction,u=e.dragNodeMass,c=u===void 0?1e10:u,f=i.instance;return ae.useEffect(function(){var h,d=f||{type:(h=n.get("layout"))===null||h===void 0?void 0:h.type},p=d.simulation,v=d.type,g=function(){var w;if(p)p.stop();else{var b=((w=n.get("layoutController"))===null||w===void 0?void 0:w.layoutMethods)||[];b.forEach(function(x){var S;return(S=x.stop)===null||S===void 0?void 0:S.call(x)})}},m=function(w){if(!(v!=="graphin-force"&&v!=="force2")&&w.item){var b=w.item.get("model");b.layout=Object.assign(Object.assign({},b.layout),{force:{mass:s?c:null}});var x=[];n.getNodes().forEach(function(E){if(E.hasState("selected")){var _=E.get("model");_.layout||(_.layout={}),_.layout.force={mass:s?c:null},x.push(_)}});var S=a.concat([b]);x.length>1&&(S=S.concat(x)),o({dragNodes:S})}};return n.on("node:dragstart",g),n.on("node:dragend",m),function(){n.off("node:dragstart",g),n.off("node:dragend",m)}},[n,s,f,a,o]),ae.useEffect(function(){var h=l||{},d=h.id,p=h.pinned;if(d){var v=a;if(!p)v=a.filter(function(y){return y.id!==d});else{var g=n.findById(d);if(!g)return;var m=g.get("model");m.layout||(m.layout={}),m.layout.force={mass:s?c:null},v.push(m)}o({dragNodes:v})}},[l]),null};Die.defaultProps={autoPin:!1,dragNodeMass:1e10,pinAction:void 0};const ENe=Die;var _Ne=function(e){var r=e.padding,n=e.isBindLayoutChange,i=ee.useContext(Oa),a=i.graph;return ae.useEffect(function(){var o=function(){a.fitView(r)};return o(),n&&a.on("afterlayout",o),function(){n&&a.off("afterlayout",o)}},[]),null};const CNe=_Ne;var kNe=function(){var e=ee.useContext(Oa),r=e.graph;return ee.useEffect(function(){var n=setTimeout(function(){r.getNodes().forEach(function(i){r.setItemState(i,"normal",!0)}),r.paint()},1600);return function(){clearTimeout(n)}},[]),null};const MNe=kNe;var ANe=function(e){var r=ae.useContext(Oa),n=e.bindType,i=n===void 0?"node":n,a=e.disabled,o=r.graph;return ae.useEffect(function(){if(!a){var s=function(h){o.setItemState(h.item,"hover",!0)},l=function(h){o.setItemState(h.item,"hover",!1)},u=function(h){o.setItemState(h.item,"hover",!0)},c=function(h){o.setItemState(h.item,"hover",!1)};return i==="node"&&(o.on("node:mouseenter",s),o.on("node:mouseleave",l)),i==="edge"&&(o.on("edge:mouseenter",u),o.on("edge:mouseleave",c)),function(){i==="node"&&(o.off("node:mouseenter",s),o.off("node:mouseleave",l)),i==="edge"&&(o.off("edge:mouseenter",u),o.off("edge:mouseleave",c))}}},[o,a]),null};const TNe=ANe;var INe="shift",ONe={disabled:!1,delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:INe,includeEdges:!0},DNe=function(e){return Pf({type:"lasso-select",userProps:e,defaultConfig:ONe}),null};const PNe=DNe;var LNe=function(e){var r=e.graphDOM,n=ae.useContext(Oa);return ae.useEffect(function(){var i=n.graph,a=Iie(function(){var o=r.clientWidth,s=r.clientHeight;i.set("width",o),i.set("height",s);var l=i.get("canvas");l&&(l.changeSize(o,s),i.autoPaint())},200);return window.addEventListener("resize",a,!1),function(){window.removeEventListener("resize",a,!1)}},[]),null};const RNe=LNe;var NNe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},FNe={trigger:"click"},BNe=function(e){var r=e.onChange,n=NNe(e,["onChange"]),i=ae.useContext(Oa),a=i.graph;return Pf({defaultConfig:FNe,userProps:n,type:"collapse-expand"}),ae.useEffect(function(){var o=function(l){var u=l.item,c=l.collapsed,f=u.get("model");f.collapsed=c,r&&r(u,c)};return a.on("itemcollapsed",o),function(){a.off("itemcollapsed",o)}},[]),null};const $Ne=BNe;var zNe={sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},disabled:!1,animate:!1,animateCfg:{duration:500}},jNe=function(e){return Pf({type:"zoom-canvas",userProps:e,defaultConfig:zNe}),null};const GNe=jNe,Dv={DragCanvas:gNe,ZoomCanvas:GNe,ClickSelect:dNe,BrushSelect:uNe,DragNode:SNe,ResizeCanvas:RNe,LassoSelect:PNe,DragCombo:wNe,ActivateRelations:aNe,TreeCollapse:$Ne,FitView:CNe,FontPaint:MNe,DragNodeWithForce:ENe,Hoverable:TNe};function UNe(t,e){return XNe(t)||HNe(t,e)||VNe(t,e)||WNe()}function WNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VNe(t,e){if(t){if(typeof t=="string")return vG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vG(t,e)}}function vG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function XNe(t){if(Array.isArray(t))return t}var YNe=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.container,a=e.disableAutoAdjust,o=ee.useContext(Oa),s=o.graph,l=ee.useState({visible:!1,x:0,y:0,item:null,selectedItems:[]}),u=UNe(l,2),c=u[0],f=u[1],h=function(b){b.preventDefault(),b.stopPropagation();var x=s.get("width"),S=s.get("height");if(i.current){var E=i.current.getBoundingClientRect(),_=s.get("offsetX")||0,k=s.get("offsetY")||0,C=s.getContainer().offsetTop,A=s.getContainer().offsetLeft,M=b.canvasX+A+_,T=b.canvasY+C+k;if(a||(M+E.width>x&&(M=b.canvasX-E.width-_+A),T+E.height>S&&(T=b.canvasY-E.height-k+C)),n==="node"){var O=b.item&&b.item.getModel(),N=O.x,R=O.y,B=s.getCanvasByPoint(N,R),F=b.canvasX-B.x,D=b.canvasY-B.y;M=M-F,T=T-D}f(function(L){return Object.assign(Object.assign({},L),{visible:!0,x:M,y:T,item:b.item})})}},d=function(){f(function(b){return b.visible?Object.assign(Object.assign({},b),{visible:!1,x:0,y:0}):b})};ae.useEffect(function(){var w=function(x){f(function(S){return Object.assign(Object.assign({},S),{selectedItems:x.selectedItems})})};return s.on("".concat(n,":contextmenu"),h),s.on("canvas:click",d),s.on("canvas:drag",d),s.on("wheelzoom",d),n==="canvas"&&s.on("nodeselectchange",w),function(){s.off("".concat(n,":contextmenu"),h),s.off("canvas:click",d),s.off("canvas:drag",d),s.off("wheelzoom",d),s.off("nodeselectchange",w)}},[s,n]);var p=c.x,v=c.y,g=c.visible,m=c.item,y=c.selectedItems;return{oneShow:h,onClose:d,item:m,selectedItems:y,visible:g,x:p,y:v}};const Pie=YNe;var qNe={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},gG=ee.createRef(),KNe=function(e){var r=e.bindType,n=e.children,i=e.style,a=e.disableAutoAdjust,o=Pie({bindType:r,container:gG,disableAutoAdjust:a}),s=o.visible,l=o.x,u=o.y,c=o.item,f={position:"absolute",left:l,top:u};if(typeof n!="function")return console.error("<ContextMenu /> children should be a function"),null;var h=c&&!c.destroyed&&c.getModel&&c.getModel().id||"";return ee.createElement("div",{ref:gG,className:"graphin-components-contextmenu",style:Object.assign(Object.assign(Object.assign({},qNe),i),f),key:h},s&&n(Object.assign(Object.assign({},o),{id:h})))};const QNe=KNe;var ZNe={r:249,scaleRByWheel:!0,minR:100,maxR:500,delegateStyle:{stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},showLabel:!1},JNe=function(e){var r=ee.useContext(Oa),n=r.graph,i=e.options,a=e.visible,o=e.handleEscListener;return ee.useEffect(function(){var s=Object.assign(Object.assign({},ZNe),i);s.showLabel&&n.getNodes().forEach(function(c){c.getContainer().getChildren().forEach(function(f){f.get("type")==="text"&&f.hide()})});var l=new Pi.Fisheye(s),u=function(f){f.keyCode===27&&o&&(o(),n.get("canvas").setCursor("default"))};return a&&(n.addPlugin(l),n.get("canvas").setCursor("zoom-in")),o&&window.addEventListener("keydown",u),function(){n&&!n.destroyed&&(n.get("canvas").setCursor("default"),n.removePlugin(l)),o&&window.removeEventListener("keydown",u)}},[n,i,a,o]),null};const e5e=JNe;var mG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},yG={members:[],type:"round-convex",nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10},wG=function(e,r){var n=e.style,i=n===void 0?{}:n,a=mG(e,["style"]),o=r.style,s=o===void 0?{}:o,l=mG(r,["style"]);return Object.assign(Object.assign(Object.assign({},a),l),{style:Object.assign(Object.assign({},i),s)})},_g,t5e=function(e){var r=ee.useContext(Oa),n=r.graph,i=e.options;return ee.useEffect(function(){_g&&_g.length&&_g.forEach(function(o){return n.removeHull(o)}),_g=i.map(function(o){return n.createHull(wG(yG,Object.assign({id:"".concat(Math.random())},o)))});var a=Iie(function(){_g.forEach(function(o,s){o.group.destroyed?_g[s]=n.createHull(wG(yG,Object.assign({id:"".concat(Math.random())},i[s]))):o.updateData(o.members)})});return n.on("afterupdateitem",a),n.on("aftergraphrefreshposition",a),function(){n.off("afterupdateitem",a),n.off("aftergraphrefreshposition",a)}},[n,i]),null};const r5e=t5e;function n5e(t,e){return s5e(t)||o5e(t,e)||a5e(t,e)||i5e()}function i5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a5e(t,e){if(t){if(typeof t=="string")return bG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bG(t,e)}}function bG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function s5e(t){if(Array.isArray(t))return t}var l5e=function(e){var r=ee.useContext(Oa),n=r.graph,i=r.theme,a=e.options,o=e.dataMap,s=e.onChange,l=i.mode,u=ee.useState({options:a}),c=n5e(u,2),f=c[0],h=c[1];ae.useEffect(function(){h({options:a})},[a]);var d=f.options,p=function(g){var m=Object.assign(Object.assign({},g),{checked:!g.checked}),y=d.map(function(b){var x=b.value===g.value;return x?m:b});h({options:y});var w=o.get(m.value);w.forEach(function(b){n.setItemState(b.id,"active",m.checked),n.setItemState(b.id,"inactive",!m.checked);var x=b.id,S=n.findById(x),E=S.getEdges();E.forEach(function(_){n.setItemState(_,"normal",m.checked),n.setItemState(_,"inactive",!m.checked)})}),s(m,y)};return ee.createElement("ul",{className:"graphin-components-legend-content"},d.map(function(v){var g=v.label,m=v.checked,y=v.color,w={light:{active:y,inactive:"#ddd"},dark:{active:y,inactive:"#2f2f2f"}},b={light:{active:"#000",inactive:"#ddd"},dark:{active:"#fff",inactive:"#2f2f2f"}},x=m?"active":"inactive";return ee.createElement("li",{key:v.value,className:"item",onClick:function(){p(v)},onKeyDown:function(){p(v)}},ee.createElement("span",{className:"dot",style:{background:w[l][x]}}),ee.createElement("span",{className:"label",style:{color:b[l][x]}},g))}))};const u5e=l5e;function c5e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lie=[{type:"graphin-force",options:{},title:""},{type:"force",title:"D3",options:{preventOverlap:!0,linkDistance:250,nodeStrength:30,edgeStrength:.1,collideStrength:.8,nodeSize:30,alpha:.3,alphaDecay:.028,alphaMin:.01,forceSimulation:null,clustering:!1}},{type:"concentric",title:"",options:{minNodeSpacing:60,preventOverlap:!0,nodeSize:60}},{type:"grid",options:{},title:""},{type:"radial",options:{},title:""},{type:"dagre",title:"",options:{}},{type:"circular",options:{},title:""},{type:"gForce",options:{linkDistance:function(){return 200},preventOverlap:!0},title:"G6"},{type:"mds",options:{},title:""},{type:"random",options:{},title:""}],xG=Lie.map(function(t){var e=t.type,r=t.options;return Object.assign({type:e},r)}).reduce(function(t,e){return Object.assign(Object.assign({},t),c5e({},e.type,e))},{}),f5e=function(){var e={type:"circle",style:{labelCfg:{position:"top"}},status:{}};return e};const Rie=f5e;var h5e={primaryEdgeColor:"#ddd",edgeSize:1,mode:"light"},d5e=function(e){var r=Object.assign(Object.assign({},h5e),e),n=r.edgeSize,i=r.primaryEdgeColor,a=r.mode,o={light:{stroke:i,label:i,disabled:"#ddd"},dark:{stroke:i,label:i,disabled:"#ddd3"}},s=o[a],l={type:"graphin-line",style:{keyshape:{type:"line",lineWidth:n,stroke:s.stroke,strokeOpacity:1,lineAppendWidth:9,cursor:"pointer"},halo:{visible:!1,cursor:"pointer",strokeOpacity:.4},label:{value:"",position:"top",fill:s.label,fontSize:12,textAlign:"center"},animate:{}},status:{hover:{halo:{visible:!0}},selected:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},active:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},inactive:{halo:{visible:!1},keyshape:{strokeOpacity:.1},label:{visible:!1}},disabled:{halo:{visible:!1},keyshape:{lineWidth:.5,stroke:s.disabled},label:{visible:!1}}}};return l};const Nie=d5e;var p5e={primaryColor:"#FF6A00",nodeSize:26,mode:"light"},v5e=function(e){var r=Object.assign(Object.assign({},p5e),e),n=r.nodeSize,i=r.primaryColor,a=r.mode,o=12,s={light:{fill:i,fillOpacity:.1,stroke:i,strokeOpacity:1,icon:i,badge:{fill:i,stroke:i,font:"#fff"},label:"#000",disabled:"#ddd"},dark:{fill:i,fillOpacity:.3,stroke:i,strokeOpacity:1,icon:"#fff",badge:{fill:i,stroke:i,font:"#fff"},label:"#fff",disabled:"#ddd3"}},l=s[a],u={type:"graphin-circle",style:{keyshape:{size:n,fill:l.fill,fillOpacity:l.fillOpacity,stroke:l.stroke,strokeOpacity:l.strokeOpacity,lineWidth:1,opacity:1,type:"circle"},label:{position:"bottom",value:"",fill:l.label,fontSize:o,offset:0,background:void 0,fillOpacity:1},icon:{type:"text",value:"",size:n/2,fill:l.icon,fillOpacity:1,offset:[0,0]},badges:[],halo:{visible:!1,fillOpacity:.1}},status:{normal:{},selected:{halo:{visible:!0},keyshape:{lineWidth:5}},hover:{halo:{visible:!0}},active:{},inactive:{keyshape:{fillOpacity:.04,strokeOpacity:.04},icon:{fillOpacity:.04},label:{fillOpacity:.04}},disabled:{halo:{visible:!1},keyshape:{fill:l.disabled,stroke:l.disabled},icon:{fill:l.disabled},label:{fill:l.disabled}}}};return u};const Fie=v5e;var Bie=function(e){return Array.from(String(e)).reduce(function(r,n){return n.charCodeAt(0)>255?r+2:r+1},0)},jO=function(e){return Math.floor(Math.random()*e)},g5e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=jO(255),n=jO(255),i=jO(255),a="rgba(".concat(r,",").concat(n,",").concat(i,",").concat(e,")");return a},GO={},m5e=function(e){return GO[e]||(GO[e]=g5e()),GO[e],function(){}};const y5e=m5e;var $ie=function(e){return e.charAt(0)==="#"?e.slice(1):e},zie=function(e){var r=e.length===3||e.length===4,n=r?"".concat(e.slice(0,1)).concat(e.slice(0,1)):e.slice(0,2),i=r?"".concat(e.slice(1,2)).concat(e.slice(1,2)):e.slice(2,4),a=r?"".concat(e.slice(2,3)).concat(e.slice(2,3)):e.slice(4,6),o=(r?"".concat(e.slice(3,4)).concat(e.slice(3,4)):e.slice(6,8))||"ff";return{r:n,g:i,b:a,a:o}},PS=function(e){return parseInt(e,16)},jie=function(e){var r=e.r,n=e.g,i=e.b,a=e.a;return{r:PS(r),g:PS(n),b:PS(i),a:+(PS(a)/255).toFixed(2)}},w5e=function(e){return!isNaN(parseFloat(String(e)))&&isFinite(Number(e))},b5e=function(e,r){var n=e.r,i=e.g,a=e.b,o=e.a,s=w5e(r)?r:o;return"rgba(".concat(n,", ").concat(i,", ").concat(a,", ").concat(s,")")},x5e=function(e,r){var n=$ie(e),i=zie(n),a=jie(i);return b5e(a,r)},S5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=$ie(e),i=zie(n),a=jie(i),o=a.r,s=a.g,l=a.b,u=o.toString(16),c=s.toString(16),f=l.toString(16),h=Math.round(Number(r)*255).toString(16);return u.length===1&&(u="0".concat(u)),c.length===1&&(c="0".concat(c)),f.length===1&&(f="0".concat(f)),h.length===1&&(h="0".concat(h)),"#".concat(u).concat(c).concat(f).concat(h)};const E5e=x5e;function _5e(t){return A5e(t)||M5e(t)||k5e(t)||C5e()}function C5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5e(t,e){if(t){if(typeof t=="string")return KL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KL(t,e)}}function M5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A5e(t){if(Array.isArray(t))return KL(t)}function KL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function SG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T5e(t,e,r){return e&&SG(t.prototype,e),r&&SG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function I5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var EG=T5e(function t(e){var r=this;I5e(this,t),this.nodeIds=[],this.bfs=function(n){var i;if(r.root){var a=[];for(a.push(r.root);a.length;){var o=a.shift();if(n(o))return o;!((i=o==null?void 0:o.children)===null||i===void 0)&&i.length&&a.push.apply(a,_5e(o.children))}}},this.getRoot=function(){return r.root},this.getNode=function(n){var i=r.bfs(function(a){return a.id===n});return i},this.addRoot=function(n,i){r.root={id:n,children:[]},r.nodeIds.push(n)},this.addNode=function(n){var i=n.parentId,a=n.id,o=n.data;if(!r.root){r.addRoot(a,o);return}var s;if(i)s=r.getNode(i);else{var l=Math.floor(Math.random()*r.nodeIds.length);s=r.getNode(r.nodeIds[l])}if(!s){console.error("Parent node doesn't exist!");return}r.nodeIds.push(a),s.children.push({id:a,parent:s,children:[]})},e&&(this.root=e)}),O5e=function t(e,r){r(e),e.children&&e.children.length>0&&e.children.forEach(function(n){t(n,r)})};const Gie=O5e;function D5e(t){return N5e(t)||R5e(t)||L5e(t)||P5e()}function P5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L5e(t,e){if(t){if(typeof t=="string")return QL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QL(t,e)}}function R5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N5e(t){if(Array.isArray(t))return QL(t)}function QL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F5e(t,e,r){return e&&_G(t.prototype,e),r&&_G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $5e={nodeCount:10,nodeType:"company"},z5e=F5e(function t(e){var r=this;B5e(this,t),this.initNodes=function(){var n=r.options,i=n.nodeCount,a=n.nodeType,o=Array.from({length:i});r.nodes=o.map(function(u,c){return{id:"node-".concat(c),label:"node-".concat(c),type:a}});for(var s=0;s<i;s=s+1)for(var l=0;l<i-1;l=l+1)r.edges.push({source:"node-".concat(s),target:"node-".concat(l)});r.nodeIds=r.nodes.map(function(u){return u.id})},this.expand=function(n){return r.edges=[],r.nodes=[],n.forEach(function(i){for(var a=0;a<r.options.nodeCount;a+=1)r.nodes.push({id:"".concat(i.id,"-").concat(a),type:i.type}),r.edges.push({source:"".concat(i.id,"-").concat(a),target:i.id})}),r},this.type=function(n){return r.nodes=r.nodes.map(function(i){return Object.assign(Object.assign({},i),{type:n})}),r},this.circle=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=n;return r.nodeIds.indexOf(i)===-1&&(i="node-0"),r.edges=r.edges.filter(function(a){return a.source===i||a.target===i}),r},this.random=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,i=r.options.nodeCount,a=parseInt(String(i*n)),o=r.nodeIds.sort(function(){return Math.random()-.5}).slice(0,a);return r.edges=r.edges.filter(function(s){return o.indexOf(s.target)!==-1}),r.edges=r.edges.sort(function(){return Math.random()-.5}).slice(0,a),r},this.tree=function(){r.edges=[],r.treeData=new EG;var n=r.nodeIds[0];return r.nodeIds.forEach(function(i){r.treeData.addNode({id:i,style:{label:{value:i}}})}),r.treeData.bfs(function(i){var a;return i.id!==n&&r.edges.push({source:(a=i==null?void 0:i.parent)===null||a===void 0?void 0:a.id,target:i.id,properties:[]}),!1}),r},this.value=function(){return{nodes:r.nodes,edges:r.edges}},this.combos=function(n){var i=new Set;return r.nodes=r.nodes.map(function(a,o){var s=Math.ceil((o+1)/n),l="combo-".concat(s);return i.add(l),Object.assign(Object.assign({},a),{comboId:l})}),r.combosData=D5e(i).map(function(a){return{id:a,label:a}}),r},this.graphin=function(){return{nodes:r.nodes.map(function(n){return Object.assign(Object.assign({},n),{id:n.id,type:"graphin-circle",comboId:n.comboId,style:{label:{value:"".concat(n.id)}}})}),edges:r.edges.map(function(n){return{source:n.source,target:n.target}}),combos:r.combosData}},this.graphinTree=function(){var n=r.treeData.getRoot();return Gie(n,function(i){delete i.parent}),n},this.options=$5e,this.options.nodeCount=e,this.nodes=[],this.edges=[],this.nodeIds=[],this.treeData=new EG,this.initNodes()}),j5e=function(e){return new z5e(e)};const G5e=j5e;function ZL(t){return t%2===0}function U5e(t){return!ZL(t)}var UO=30,CG=10,kG=1,W5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{poly:UO,loop:CG,loopLabelPosition:kG},n=r.poly,i=n===void 0?UO:n,a=r.loop,o=a===void 0?CG:a,s=r.loopLabelPosition,l=s===void 0?kG:s,u={};e.forEach(function(h,d){var p=Object.assign({},h),v=p.source,g=p.target,m="".concat(v,"-").concat(g);p.id=p.id||"".concat(v,"-").concat(g,"-").concat(d);var y="".concat(g,"-").concat(v);u[m]?u[m].push(p):u[y]?(p.revert=!0,u[y].push(p)):u[m]=[p]});var c=Object.values(u),f=[];return c.forEach(function(h){if(h.length>1){var d=ZL(h.length);h.forEach(function(p,v){var g,m=p.source,y=p.target,w=m===y,b=v,x;if(d){var S=Math.ceil((b+1)/2);x=i*S}else{var E=U5e(b)?b+1:b,_=Math.ceil(E/2);x=i*_}var k=ZL(b)?x:-x;p.revert&&(k=-k,delete p.revert);var C;if(w){var A=b*o;if(C={type:"loop",loop:{distance:A}},!((g=p.style)===null||g===void 0)&&g.label){var M=0,T=-(UO*l+A*2);p.style.label.offset=[M,T]}}else C={type:"poly",poly:{distance:k}};Hp(p,{style:{keyshape:C}}),p.isMultiple=!0,f.push(p)})}else f.push(h[0])}),f};function V5e(t){return q5e(t)||Y5e(t)||X5e(t)||H5e()}function H5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X5e(t,e){if(t){if(typeof t=="string")return JL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JL(t,e)}}function Y5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q5e(t){if(Array.isArray(t))return JL(t)}function JL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Uie=function(e,r){var n=r.split("."),i=n.reduce(function(a,o,s,l){var u=a[o];return!u&&s!==l.length-1?{}:u},e);return i},K5e=function(e,r){var n=new Map;return e.forEach(function(i){var a=Uie(i,r),o=n.get(a);o?n.set(a,[].concat(V5e(o),[i])):n.set(a,[i])}),n},Q5e=function(e,r){var n=!0,i=Object.keys(e),a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(e[s]!==r[s]){n=!1;break}}return n};const Z5e=Q5e;var J5e=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};const e4e=J5e;var WO=function(e){return function(){console.error(" @antv/graphin Utils  ".concat(e,"  lodash ")),console.error(" @antv/graphin Utils no longer provides ".concat(e," methods, please use lodash instead!"))}};const R8={hexToRgba:E5e,debug:y5e,mock:G5e,shallowEqual:Z5e,hexToRgbaToHex:S5e,getNodeStyleByTheme:Fie,getEdgeStyleByTheme:Nie,getComboStyleByTheme:Rie,deepMix:WO("deepMix"),cloneDeep:WO("cloneDeep"),uuid:e4e,walk:Gie,processEdges:W5e,calcByteLength:Bie,layouts:Lie,uniqBy:WO("uniqBy"),getEnumDataMap:K5e,getEnumValue:Uie};function t4e(t){return a4e(t)||i4e(t)||n4e(t)||r4e()}function r4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(t,e){if(t){if(typeof t=="string")return eR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(t,e)}}function i4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a4e(t){if(Array.isArray(t))return eR(t)}function eR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var MG=R8.getEnumValue,o4e=R8.getEnumDataMap,s4e=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.sortKey,a=ee.useContext(Oa),o=a.graph,s=o.save();if(s.children)return console.error("not support tree graph"),{dataMap:new Map,options:{}};var l=o4e(s["".concat(n,"s")],i),u=t4e(l.keys()),c=u.map(function(f){var h=(l.get(f)||[{}])[0],d=MG(h,"style.keyshape.fill"),p=MG(h,"style.color"),v=d||p;return{color:v,value:f,label:f,checked:!0}});return{dataMap:l,options:c}};const Wie=s4e;var l4e={position:"absolute",top:"0px",right:"0px"},Vie=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.sortKey,a=e.children,o=e.style,s=Wie({bindType:n,sortKey:i}),l=s.dataMap,u=s.options;return ee.createElement("div",{className:"graphin-components-legend",style:Object.assign(Object.assign({},l4e),o)},a({bindType:n,sortKey:i,dataMap:l,options:u}))};Vie.Node=u5e;const u4e=Vie;var c4e={className:"graphin-minimap",viewportClassName:"graphin-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0},f4e={container:{position:"absolute",bottom:0,left:0,background:"#fff",boxShadow:"0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)"}},AG=120,h4e=function(e){var r=ee.useContext(Oa),n=r.graph,i=e.options,a=e.style,o=a===void 0?{}:a,s=ee.useRef(null);ee.useEffect(function(){var u=n.getWidth(),c=n.getHeight(),f=n.get("fitViewPadding"),h=[(u-f*2)/(c-f*2)*AG,AG],d=Object.assign(Object.assign(Object.assign({container:s.current},c4e),{size:h}),i),p=new Pi.Minimap(d);return n.addPlugin(p),function(){p&&!p.destroyed&&n.removePlugin(p)}},[i]);var l=Object.assign(Object.assign({},f4e.container),o);return ee.createElement("div",{ref:s,style:l})};const d4e=h4e;var p4e={line:{stroke:"#FA8C16",lineWidth:.5},itemAlignType:"center"},v4e=function(e){var r=ee.useContext(Oa),n=r.graph,i=e.options,a=e.visible;return ee.useEffect(function(){var o=Object.assign(Object.assign({},p4e),i),s=new Pi.SnapLine(o);return a&&n.addPlugin(s),function(){n&&!n.destroyed&&n.removePlugin(s)}},[n,i,a]),null};const g4e=v4e;function m4e(t,e,r){var n=t.get("canvas"),i=n.get("width"),a=n.get("height"),o=r<=a/4,s=r>=3*a/4,l=e<=i/4,u=e>=3*i/4;return l&&o?"bottom-right":u&&o?"bottom-left":l&&s?"top-right":u&&s?"top-left":o?"bottom":s?"top":l?"right":u?"left":"center"}var y4e=function(e){var r=e.graph,n=e.placement,i=e.nodeSize,a=e.x,o=e.y,s=e.bindType,l=s===void 0?"node":s,u=e.visible;return l==="edge"?u?{left:a,top:o}:{visibility:"hidden",left:a,top:o}:(n==="auto"&&(n=m4e(r,a,o)),n==="top"?u?{left:a,top:o-i/2,opacity:1,transform:"translate(-50%,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:0,top:0,opacity:0,transform:"translate(-50%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom"?u?{left:a,top:o+i/2,opacity:1,transform:"translate(-50%,6px)",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a,top:o+i/2,opacity:0,transform:"translate(-50%,0px)",transition:"opacity 0.5s,transform 0.5s"}:n==="left"?u?{left:a-i/2,top:o,transform:"translate(calc(-100% - 6px),-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",opacity:0,left:a-i/2,top:o,transform:"translate(-100%,-50%)",transition:"opacity 0.5s,transform 0.5s"}:n==="right"?u?{left:a+i/2,top:o,transform:"translate(6px,-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a+i/2,top:o,transform:"translate(0,-50%)",opacity:0,transition:"opacity 0.5s,transform 0.5s"}:n==="top-left"?u?{left:a-i/2,top:o-i/2,opacity:1,transform:"translate(calc(-100% - 6px),calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:a-i/2,top:o-i/2,opacity:0,transform:"translate(-100%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="top-right"?u?{left:a+i/2,top:o-i/2,opacity:1,transform:"translate(6px,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:a+i/2,top:o-i/2,opacity:0,transform:"translate(0,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom-left"?u?{left:a-i/2,top:o+i/2,opacity:1,transform:"translate(calc(-100% - 6px),6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:a-i/2,top:o+i/2,opacity:0,transform:"translate(-100%,0px)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom-right"?u?{left:a+i/2,top:o+i/2,opacity:1,transform:"translate(6px,6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:a+i/2,top:o+i/2,opacity:0,transform:"translate(0,0)",transition:"opacity 0.5s,transform 0.5s"}:n==="center"?u?{left:a,top:o,opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a,top:o,opacity:0,transition:"opacity 0.5s,transform 0.5s"}:{left:a,top:o})};function w4e(t,e){return E4e(t)||S4e(t,e)||x4e(t,e)||b4e()}function b4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x4e(t,e){if(t){if(typeof t=="string")return TG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TG(t,e)}}function TG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function E4e(t){if(Array.isArray(t))return t}var _4e=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.container,a=ee.useContext(Oa),o=a.graph,s=ae.useRef(),l=ee.useState({visible:!1,x:0,y:0,item:null}),u=w4e(l,2),c=u[0],f=u[1],h=function(y){y.preventDefault(),y.stopPropagation(),s.current&&window.clearTimeout(s.current);var w=o.getPointByClient(y.clientX,y.clientY),b=o.getCanvasByPoint(w.x,w.y),x=b.x,S=b.y;if(n==="node"&&y.item){var E=y.item.getModel(),_=E.x,k=_===void 0?0:_,C=E.y,A=C===void 0?0:C,M=o.getCanvasByPoint(k,A),T=y.canvasX-M.x,O=y.canvasY-M.y;x=x-T,S=S-O}s.current=window.setTimeout(function(){f(function(N){return Object.assign(Object.assign({},N),{visible:!0,item:y.item,x,y:S})})},e.delay.show)},d=function(){s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(function(){f(function(y){return Object.assign(Object.assign({},y),{visible:!1,item:null,x:0,y:0})})},e.delay.hide)},p=function(){f(Object.assign(Object.assign({},c),{visible:!1,x:0,y:0,item:null}))},v=function(y){var w=o.getPointByClient(y.clientX,y.clientY),b=o.getCanvasByPoint(w.x,w.y),x=b.x,S=b.y;if(n==="node"){if(y.item){var E=y.item.getModel(),_=E.x,k=_===void 0?0:_,C=E.y,A=C===void 0?0:C,M=o.getCanvasByPoint(k,A),T=y.canvasX-M.x,O=y.canvasY-M.y;x=x-T,S=S-O}f(Object.assign(Object.assign({},c),{visible:!0,x,y:S,item:y.item}))}},g=function(){clearTimeout(s.current)};return ae.useEffect(function(){var m,y;return o.on("".concat(n,":mouseenter"),h),o.on("".concat(n,":mouseleave"),d),o.on("afterremoveitem",d),o.on("node:dragstart",p),o.on("node:dragend",v),(m=i.current)===null||m===void 0||m.addEventListener("mouseenter",g),(y=i.current)===null||y===void 0||y.addEventListener("mouseleave",d),function(){var w,b;console.log("effect..remove...."),o.off("".concat(n,":mouseenter"),h),o.off("".concat(n,":mouseleave"),d),o.off("afterremoveitem",d),o.off("node:dragstart",p),o.off("node:dragend",v),(w=i.current)===null||w===void 0||w.removeEventListener("mouseenter",g),(b=i.current)===null||b===void 0||b.removeEventListener("mouseleave",d)}},[]),Object.assign({},c)};const Hie=_4e;var C4e={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},IG=ee.createRef(),k4e=function(e){var r=e.children,n=e.bindType,i=n===void 0?"node":n,a=e.style,o=e.placement,s=o===void 0?"top":o,l=e.hasArrow,u=e.delay,c=u===void 0?{show:0,hide:200}:u,f=Hie({bindType:i,container:IG,delay:c}),h=f.x,d=f.y,p=f.visible,v=f.item,g=ee.useContext(Oa),m=g.graph,y=40;try{if(v){var w=v.getModel(),b=w.type;if(b==="graphin-cirle"){var x=v.getModel(),S=x.style;S&&(y=S.keyshape.size)}}}catch(M){console.log(M)}var E=12,_=y4e({graph:m,placement:s,nodeSize:y+E,x:h,y:d,bindType:i,visible:p}),k=Object.assign({position:"absolute"},_);if(typeof r!="function")return console.error("<Tooltip /> children should be a function"),null;var C=v&&!v.destroyed&&v.getModel&&v.getModel()||{},A=C.id||"";return ee.createElement(ee.Fragment,null,ee.createElement("div",{ref:IG,className:"graphin-components-tooltip ".concat(s),style:Object.assign(Object.assign(Object.assign({},C4e),k),a)},p&&ee.createElement("div",null,l&&ee.createElement("div",{className:"tooltip-arrow ".concat(s)}),r({item:v,bindType:i,model:C,id:A}))))};const M4e=k4e,A4e={ContextMenu:QNe,Hull:r5e,MiniMap:d4e,FishEye:e5e,SnapLine:g4e,Tooltip:M4e,Legend:u4e,useLegend:Wie,useTooltip:Hie,useContextMenu:Pie};var Uo=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},xk=function(t,e){return Uo(t)?t.indexOf(e)>-1:!1},LA=function(t,e){if(!Uo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];e(i,n)&&r.push(i)}return r},T4e=function(t,e){return e===void 0&&(e=[]),LA(t,function(r){return!xk(e,r)})},I4e={}.toString,cu=function(t,e){return I4e.call(t)==="[object "+e+"]"};const Rn=function(t){return cu(t,"Function")};var Dt=function(t){return t==null};const Ft=function(t){return Array.isArray?Array.isArray(t):cu(t,"Array")},ua=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function Ce(t,e){if(t){var r;if(Ft(t))for(var n=0,i=t.length;n<i&&(r=e(t[n],n),r!==!1);n++);else if(ua(t)){for(var a in t)if(t.hasOwnProperty(a)&&(r=e(t[a],a),r===!1))break}}}var Xie=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Ce(t,function(r,n){Rn(t)&&n==="prototype"||e.push(n)}),e};function Yie(t,e){var r=Xie(e),n=r.length;if(Dt(t))return!n;for(var i=0;i<n;i+=1){var a=r[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var Sk=function(t){return typeof t=="object"&&t!==null},oa=function(t){if(!Sk(t)||!cu(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function O4e(t,e){if(!Ft(t))return null;var r;if(Rn(e)&&(r=e),oa(e)&&(r=function(i){return Yie(i,e)}),r){for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n]}return null}function D4e(t,e,r){r===void 0&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1}var P4e=function(t,e){for(var r=null,n=0;n<t.length;n++){var i=t[n],a=i[e];if(!Dt(a)){Ft(a)?r=a[0]:r=a;break}}return r},L4e=function(t){if(!Ft(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},qie=function(t,e){if(e===void 0&&(e=[]),!Ft(t))e.push(t);else for(var r=0;r<t.length;r+=1)qie(t[r],e);return e};const gc=function(t){if(Ft(t))return t.reduce(function(e,r){return Math.max(e,r)},t[0])},mc=function(t){if(Ft(t))return t.reduce(function(e,r){return Math.min(e,r)},t[0])};var Kie=function(t){var e=t.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(Ft(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var i=gc(e),a=mc(e);return{min:a,max:i}},Qie=Array.prototype,R4e=Qie.splice,N4e=Qie.indexOf,F4e=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=N4e.call(t,i))>-1;)R4e.call(t,a,1);return t},B4e=Array.prototype.splice,Zie=function(e,r){if(!Uo(e))return[];for(var n=e?r.length:0,i=n-1;n--;){var a=void 0,o=r[n];(n===i||o!==a)&&(a=o,B4e.call(e,o,1))}return e},Jie=function(t,e,r){if(!Ft(t)&&!oa(t))return t;var n=r;return Ce(t,function(i,a){n=e(n,i,a)}),n},$4e=function(t,e){var r=[];if(!Uo(t))return r;for(var n=-1,i=[],a=t.length;++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Zie(t,i),r};const Ve=function(t){return cu(t,"String")};function z4e(t,e){var r;if(Rn(e))r=function(i,a){return e(i)-e(a)};else{var n=[];Ve(e)?n.push(e):Ft(e)&&(n=e),r=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(r),t}function e2(t,e){e===void 0&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];e.has(a)||(r.push(a),e.set(a,!0))}return r}var j4e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e2([].concat.apply([],t))};const G4e=function(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[e];if(!Dt(o)){Ft(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(r.push(l),n[l]=!0)}}}return r};function cc(t){if(Uo(t))return t[0]}function ul(t){if(Uo(t)){var e=t;return e[e.length-1]}}function U4e(t,e){return Ft(t)||Ve(t)?t[0]===e:!1}function W4e(t,e){return Ft(t)||Ve(t)?t[t.length-1]===e:!1}var V4e=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0},H4e=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1},X4e=Object.prototype.hasOwnProperty;function Ek(t,e){if(!e||!Ft(t))return{};for(var r={},n=Rn(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=n(o),X4e.call(r,i)?r[i].push(o):r[i]=[o]}return r}function eae(t,e){if(!e)return{0:t};if(!Rn(e)){var r=Ft(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=r.length;a<o;a++)i+=n[r[a]]&&n[r[a]].toString();return i}}return Ek(t,e)}const Y4e=function(t,e){if(!e)return[t];var r=eae(t,e),n=[];for(var i in r)n.push(r[i]);return n};function q4e(t,e){return t["_wrap_"+e]}function Ap(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(n){t[e](n)};return t["_wrap_"+e]=r,r}var OG={};function K4e(t){var e=OG[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,OG[t]=e}return e}function Q4e(t){var e=0,r=0,n=0,i=0;return Ft(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var Z4e=function(t,e,r){return t<e?e:t>r?r:t},m_=function(t,e){var r=e.toString(),n=r.indexOf(".");if(n===-1)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},Pt=function(t){return cu(t,"Number")},J4e=function(t){return Pt(t)&&t%1!==0},e8e=function(t){return Pt(t)&&t%2===0},t8e=Number.isInteger?Number.isInteger:function(t){return Pt(t)&&t%1===0},r8e=function(t){return Pt(t)&&t<0},n8e=1e-5;function tae(t,e,r){return r===void 0&&(r=n8e),Math.abs(t-e)<r}var i8e=function(t){return Pt(t)&&t%2!==0},a8e=function(t){return Pt(t)&&t>0};const o8e=function(t,e){if(Ft(t)){for(var r,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Rn(e)?e(a):a[e];o>n&&(r=a,n=o)}return r}},s8e=function(t,e){if(Ft(t)){for(var r,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Rn(e)?e(a):a[e];o<n&&(r=a,n=o)}return r}};var RA=function(t,e){return(t%e+e)%e},l8e=180/Math.PI,u8e=function(t){return l8e*t};const c8e=parseInt;var f8e=Math.PI/180,NA=function(t){return f8e*t};const DG=function(t,e){return t.hasOwnProperty(e)};var N8=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Ce(t,function(r,n){Rn(t)&&n==="prototype"||e.push(r)}),e};const h8e=function(t,e){return xk(N8(t),e)},Jm=function(t){return Dt(t)?"":t.toString()};var d8e=function(t){return Jm(t).toLowerCase()},p8e=function(t){var e=Jm(t);return e.charAt(0).toLowerCase()+e.substring(1)};function v8e(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(r,n){return r.charAt(0)==="\\"?r.slice(1):e[n]===void 0?"":e[n]})}var g8e=function(t){return Jm(t).toUpperCase()},_m=function(t){var e=Jm(t);return e.charAt(0).toUpperCase()+e.substring(1)},m8e={}.toString,rae=function(t){return m8e.call(t).replace(/^\[object /,"").replace(/]$/,"")},y8e=function(t){return cu(t,"Arguments")},fb=function(t){return cu(t,"Boolean")},F8=function(t){return cu(t,"Date")},w8e=function(t){return cu(t,"Error")};function b8e(t){return Pt(t)&&isFinite(t)}var x8e=function(t){return t===null},S8e=Object.prototype,nae=function(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||S8e;return t===r},E8e=function(t){return cu(t,"RegExp")},_8e=function(t){return t===void 0},C8e=function(t){return t instanceof Element||t instanceof HTMLDocument};function iae(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(r){return setTimeout(r,16)};return e(t)}function aae(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function VO(t,e){for(var r in e)e.hasOwnProperty(r)&&r!=="constructor"&&e[r]!==void 0&&(t[r]=e[r])}function $t(t,e,r,n){return e&&VO(t,e),r&&VO(t,r),n&&VO(t,n),t}var k8e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var i=t[n];Rn(i)&&(i=i.prototype),$t(r.prototype,i)}},Ir=function(t){if(typeof t!="object"||t===null)return t;var e;if(Ft(t)){e=[];for(var r=0,n=t.length;r<n;r++)typeof t[r]=="object"&&t[r]!=null?e[r]=Ir(t[r]):e[r]=t[r]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=Ir(t[i]):e[i]=t[i]}return e};function hb(t,e,r){var n;return function(){var i=this,a=arguments,o=function(){n=null,r||t.apply(i,a)},s=r&&!n;clearTimeout(n),n=setTimeout(o,e),s&&t.apply(i,a)}}const oae=function(t,e){if(!Rn(t))throw new TypeError("Expected a function");var r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return o.set(a,s),s};return r.cache=new Map,r};var M8e=5;function sae(t,e,r,n){r=r||0,n=n||M8e;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&oa(a)?(oa(t[i])||(t[i]={}),r<n?sae(t[i],a,r+1,n):t[i]=e[i]):Ft(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var cn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)sae(t,e[n]);return t},A8e=function(t,e,r,n){Rn(e)||(r=e,e=t,t=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,t);return t.prototype=$t(a,t.prototype),t.superclass=i(e.prototype,e),$t(a,r),$t(t,n),t},B8=function(t,e){if(!Uo(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var n=-1,i=0;i<t.length;i++)if(t[i]===e){n=i;break}return n},T8e=Object.prototype.hasOwnProperty;function lae(t){if(Dt(t))return!0;if(Uo(t))return!t.length;var e=rae(t);if(e==="Map"||e==="Set")return!t.size;if(nae(t))return!Object.keys(t).length;for(var r in t)if(T8e.call(t,r))return!1;return!0}var md=function(t,e){if(t===e)return!0;if(!t||!e||Ve(t)||Ve(e))return!1;if(Uo(t)||Uo(e)){if(t.length!==e.length)return!1;for(var r=!0,n=0;n<t.length&&(r=md(t[n],e[n]),!!r);n++);return r}if(Sk(t)||Sk(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var r=!0,n=0;n<i.length&&(r=md(t[i[n]],e[i[n]]),!!r);n++);return r}return!1};const I8e=function(t,e,r){return Rn(r)?!!r(t,e):md(t,e)};var gv=function(t,e){if(!Uo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push(e(i,n))}return r},O8e=function(t){return t};const D8e=function(t,e){e===void 0&&(e=O8e);var r={};return ua(t)&&!Dt(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},Zc=function(t,e,r){for(var n=0,i=Ve(e)?e.split("."):e;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?r:t},P8e=function(t,e,r){var n=t,i=Ve(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(ua(n[a])||(n[a]=Pt(i[o+1])?[]:{}),n=n[a]):n[a]=r}),t};var L8e=Object.prototype.hasOwnProperty;const R8e=function(t,e){if(t===null||!oa(t))return{};var r={};return Ce(e,function(n){L8e.call(t,n)&&(r[n]=t[n])}),r},N8e=function(t,e){return Jie(t,function(r,n,i){return e.includes(i)||(r[i]=n),r},{})},t2=function(t,e,r){var n,i,a,o,s=0;r||(r={});var l=function(){s=r.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&r.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=t.apply(i,a),n||(i=a=null)):!n&&r.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},uae=function(t){return Uo(t)?Array.prototype.slice.call(t):[]};var LS={};const yc=function(t){return t=t||"g",LS[t]?LS[t]+=1:LS[t]=1,t+LS[t]},C1=function(){},F8e=function(t){return t};function FA(t){return Dt(t)?0:Uo(t)?t.length:Object.keys(t).length}var RS;const k1=oae(function(t,e){e===void 0&&(e={});var r=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return RS||(RS=document.createElement("canvas").getContext("2d")),RS.font=[a,o,i,r+"px",n].join(" "),RS.measureText(Ve(t)?t:"").width},function(t,e){return e===void 0&&(e={}),KM([t],N8(e)).join("")}),B8e=function(t,e,r,n){n===void 0&&(n="...");var i=16,a=k1(n,r),o=Ve(t)?t:Jm(t),s=e,l=[],u,c;if(k1(t,r)<=e)return t;for(;u=o.substr(0,i),c=k1(u,r),!(c+a>s&&c>s);)if(l.push(u),s-=c,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),c=k1(u,r),!(c+a>s);)if(l.push(u),s-=c,o=o.substr(1),!o)return l.join("");return""+l.join("")+n};var $8e=function(){function t(){this.map={}}return t.prototype.has=function(e){return this.map[e]!==void 0},t.prototype.get=function(e,r){var n=this.map[e];return n===void 0?r:n},t.prototype.set=function(e,r){this.map[e]=r},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(e){delete this.map[e]},t.prototype.size=function(){return Object.keys(this.map).length},t}();const z8e=Object.freeze(Object.defineProperty({__proto__:null,Cache:$8e,assign:$t,augment:k8e,clamp:Z4e,clearAnimationFrame:aae,clone:Ir,contains:xk,debounce:hb,deepMix:cn,difference:T4e,each:Ce,endsWith:W4e,every:V4e,extend:A8e,filter:LA,find:O4e,findIndex:D4e,firstValue:P4e,fixedBase:m_,flatten:L4e,flattenDeep:qie,forIn:Ce,get:Zc,getEllipsisText:B8e,getRange:Kie,getType:rae,getWrapBehavior:q4e,group:Y4e,groupBy:Ek,groupToMap:eae,has:DG,hasKey:DG,hasValue:h8e,head:cc,identity:F8e,includes:xk,indexOf:B8,isArguments:y8e,isArray:Ft,isArrayLike:Uo,isBoolean:fb,isDate:F8,isDecimal:J4e,isElement:C8e,isEmpty:lae,isEqual:md,isEqualWith:I8e,isError:w8e,isEven:e8e,isFinite:b8e,isFunction:Rn,isInteger:t8e,isMatch:Yie,isNegative:r8e,isNil:Dt,isNull:x8e,isNumber:Pt,isNumberEqual:tae,isObject:ua,isObjectLike:Sk,isOdd:i8e,isPlainObject:oa,isPositive:a8e,isPrototype:nae,isRegExp:E8e,isString:Ve,isType:cu,isUndefined:_8e,keys:Xie,last:ul,lowerCase:d8e,lowerFirst:p8e,map:gv,mapValues:D8e,max:gc,maxBy:o8e,measureTextWidth:k1,memoize:oae,min:mc,minBy:s8e,mix:$t,mod:RA,noop:C1,number2color:K4e,omit:N8e,parseRadius:Q4e,pick:R8e,pull:F4e,pullAt:Zie,reduce:Jie,remove:$4e,requestAnimationFrame:iae,set:P8e,size:FA,some:H4e,sortBy:z4e,startsWith:U4e,substitute:v8e,throttle:t2,toArray:uae,toDegree:u8e,toInteger:c8e,toRadian:NA,toString:Jm,union:j4e,uniq:e2,uniqueId:yc,upperCase:g8e,upperFirst:_m,values:N8,valuesOfKey:G4e,wrapBehavior:Ap},Symbol.toStringTag,{value:"Module"})),j8e={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var r=this,n=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),Ce(n,function(i,a){e.on(a,i)}),document.addEventListener("visibilitychange",function(){r.keydown=!1})},unbind:function(e){var r=this.events,n=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),Ce(r,function(i,a){e.off(a,i)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,r){return this[e]=r,this}};var $8=function(){function t(){}return t.registerBehavior=function(e,r){if(!r)throw new Error("please specify handler for this behavior: ".concat(e));var n=Ir(j8e);Object.assign(n,r);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(Ce(l,function(c,f){u[f]=Ap(s,c)}),this.events=u)};i.prototype=n,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),G8e="*",cae=function(){function t(){this._events={}}return t.prototype.on=function(e,r,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:r,once:!!n}),this},t.prototype.once=function(e,r){return this.on(e,r,!0)},t.prototype.emit=function(e){for(var r=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[G8e]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],h=f.callback,d=f.once;d&&(l.splice(c,1),l.length===0&&delete r._events[e],u--,c--),h.apply(r,n)}};s(a),s(o)},t.prototype.off=function(e,r){if(!e)this._events={};else if(!r)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===r&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}(),Xt=1e-6,$r=typeof Float32Array<"u"?Float32Array:Array,ql=Math.random;function U8e(t){$r=t}var W8e=Math.PI/180;function V8e(t){return t*W8e}function H8e(t,e){return Math.abs(t-e)<=Xt*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const X8e=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return $r},EPSILON:Xt,RANDOM:ql,equals:H8e,setMatrixArrayType:U8e,toRadian:V8e},Symbol.toStringTag,{value:"Module"}));function Y8e(){var t=new $r(4);return $r!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function q8e(t){var e=new $r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function K8e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Q8e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function Z8e(t,e,r,n){var i=new $r(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function J8e(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function e6e(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function t6e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null}function r6e(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function n6e(t){return t[0]*t[3]-t[2]*t[1]}function fae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*s+a*l,t[1]=i*s+o*l,t[2]=n*u+a*c,t[3]=i*u+o*c,t}function i6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*s,t[1]=i*l+o*s,t[2]=n*-s+a*l,t[3]=i*-s+o*l,t}function a6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*l,t[3]=o*l,t}function o6e(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function s6e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function l6e(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function u6e(t){return Math.hypot(t[0],t[1],t[2],t[3])}function c6e(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function f6e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function hae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function h6e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function d6e(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-o)<=Xt*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=Xt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Xt*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Xt*Math.max(1,Math.abs(a),Math.abs(u))}function p6e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function v6e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}var g6e=fae,m6e=hae;const y6e=Object.freeze(Object.defineProperty({__proto__:null,LDU:c6e,add:f6e,adjoint:r6e,clone:q8e,copy:K8e,create:Y8e,determinant:n6e,equals:d6e,exactEquals:h6e,frob:u6e,fromRotation:o6e,fromScaling:s6e,fromValues:Z8e,identity:Q8e,invert:t6e,mul:g6e,multiply:fae,multiplyScalar:p6e,multiplyScalarAndAdd:v6e,rotate:i6e,scale:a6e,set:J8e,str:l6e,sub:m6e,subtract:hae,transpose:e6e},Symbol.toStringTag,{value:"Module"}));function w6e(){var t=new $r(6);return $r!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function b6e(t){var e=new $r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function x6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function S6e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function E6e(t,e,r,n,i,a){var o=new $r(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o}function _6e(t,e,r,n,i,a,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t}function C6e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r*a-n*i;return l?(l=1/l,t[0]=a*l,t[1]=-n*l,t[2]=-i*l,t[3]=r*l,t[4]=(i*s-a*o)*l,t[5]=(n*o-r*s)*l,t):null}function k6e(t){return t[0]*t[3]-t[1]*t[2]}function dae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*u+a*c,t[1]=i*u+o*c,t[2]=n*f+a*h,t[3]=i*f+o*h,t[4]=n*d+a*p+s,t[5]=i*d+o*p+l,t}function M6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=i*c+o*u,t[2]=n*-u+a*c,t[3]=i*-u+o*c,t[4]=s,t[5]=l,t}function A6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n*u,t[1]=i*u,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=l,t}function T6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*u+a*c+s,t[5]=i*u+o*c+l,t}function I6e(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function O6e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function D6e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function P6e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function L6e(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function R6e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function pae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function N6e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function F6e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function B6e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function $6e(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=e[0],u=e[1],c=e[2],f=e[3],h=e[4],d=e[5];return Math.abs(r-l)<=Xt*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=Xt*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=Xt*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=Xt*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=Xt*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=Xt*Math.max(1,Math.abs(s),Math.abs(d))}var z6e=dae,j6e=pae;const G6e=Object.freeze(Object.defineProperty({__proto__:null,add:R6e,clone:b6e,copy:x6e,create:w6e,determinant:k6e,equals:$6e,exactEquals:B6e,frob:L6e,fromRotation:I6e,fromScaling:O6e,fromTranslation:D6e,fromValues:E6e,identity:S6e,invert:C6e,mul:z6e,multiply:dae,multiplyScalar:N6e,multiplyScalarAndAdd:F6e,rotate:M6e,scale:A6e,set:_6e,str:P6e,sub:j6e,subtract:pae,translate:T6e},Symbol.toStringTag,{value:"Module"}));function vae(){var t=new $r(9);return $r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function U6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function W6e(t){var e=new $r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function V6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function H6e(t,e,r,n,i,a,o,s,l){var u=new $r(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function X6e(t,e,r,n,i,a,o,s,l,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t}function Y6e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function q6e(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function z8(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,p=r*f+n*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*n+i*u)*p,t[2]=(s*n-i*o)*p,t[3]=h*p,t[4]=(c*r-i*l)*p,t[5]=(-s*r+i*a)*p,t[6]=d*p,t[7]=(-u*r+n*l)*p,t[8]=(o*r-n*a)*p,t):null}function K6e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=i*u-n*c,t[2]=n*s-i*o,t[3]=s*l-a*c,t[4]=r*c-i*l,t[5]=i*a-r*s,t[6]=a*u-o*l,t[7]=n*l-r*u,t[8]=r*o-n*a,t}function Q6e(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+r*(-u*i+o*s)+n*(l*i-a*s)}function Sc(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],w=r[7],b=r[8];return t[0]=h*n+d*o+p*u,t[1]=h*i+d*s+p*c,t[2]=h*a+d*l+p*f,t[3]=v*n+g*o+m*u,t[4]=v*i+g*s+m*c,t[5]=v*a+g*l+m*f,t[6]=y*n+w*o+b*u,t[7]=y*i+w*s+b*c,t[8]=y*a+w*l+b*f,t}function Z6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=h*n+d*o+u,t[7]=h*i+d*s+c,t[8]=h*a+d*l+f,t}function J6e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*o,t[1]=d*i+h*s,t[2]=d*a+h*l,t[3]=d*o-h*n,t[4]=d*s-h*i,t[5]=d*l-h*a,t[6]=u,t[7]=c,t[8]=f,t}function eFe(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function j8(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function G8(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function U8(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function tFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function rFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[3]=c-m,t[6]=h+g,t[1]=c+m,t[4]=1-u-p,t[7]=d-v,t[2]=h-g,t[5]=d+v,t[8]=1-u-f,t}function nFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*o,w=r*l-i*o,b=r*u-a*o,x=n*l-i*s,S=n*u-a*s,E=i*u-a*l,_=c*v-f*p,k=c*g-h*p,C=c*m-d*p,A=f*g-h*v,M=f*m-d*v,T=h*m-d*g,O=y*T-w*M+b*A+x*C-S*k+E*_;return O?(O=1/O,t[0]=(s*T-l*M+u*A)*O,t[1]=(l*C-o*T-u*k)*O,t[2]=(o*M-s*C+u*_)*O,t[3]=(i*M-n*T-a*A)*O,t[4]=(r*T-i*C+a*k)*O,t[5]=(n*C-r*M-a*_)*O,t[6]=(v*E-g*S+m*x)*O,t[7]=(g*b-p*E-m*w)*O,t[8]=(p*S-v*b+m*y)*O,t):null}function iFe(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function aFe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function oFe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function sFe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function gae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function lFe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function uFe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function cFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function fFe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=e[0],h=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],y=e[7],w=e[8];return Math.abs(r-f)<=Xt*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-h)<=Xt*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=Xt*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-p)<=Xt*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-v)<=Xt*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-g)<=Xt*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=Xt*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=Xt*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-w)<=Xt*Math.max(1,Math.abs(c),Math.abs(w))}var hFe=Sc,dFe=gae;const mae=Object.freeze(Object.defineProperty({__proto__:null,add:sFe,adjoint:K6e,clone:W6e,copy:V6e,create:vae,determinant:Q6e,equals:fFe,exactEquals:cFe,frob:oFe,fromMat2d:tFe,fromMat4:U6e,fromQuat:rFe,fromRotation:G8,fromScaling:U8,fromTranslation:j8,fromValues:H6e,identity:Y6e,invert:z8,mul:hFe,multiply:Sc,multiplyScalar:lFe,multiplyScalarAndAdd:uFe,normalFromMat4:nFe,projection:iFe,rotate:J6e,scale:eFe,set:X6e,str:aFe,sub:dFe,subtract:gae,translate:Z6e,transpose:q6e},Symbol.toStringTag,{value:"Module"}));function pFe(){var t=new $r(16);return $r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function vFe(t){var e=new $r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function mFe(t,e,r,n,i,a,o,s,l,u,c,f,h,d,p,v){var g=new $r(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=f,g[12]=h,g[13]=d,g[14]=p,g[15]=v,g}function yFe(t,e,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=g,t}function yae(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wFe(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function bFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*o,w=r*l-i*o,b=r*u-a*o,x=n*l-i*s,S=n*u-a*s,E=i*u-a*l,_=c*v-f*p,k=c*g-h*p,C=c*m-d*p,A=f*g-h*v,M=f*m-d*v,T=h*m-d*g,O=y*T-w*M+b*A+x*C-S*k+E*_;return O?(O=1/O,t[0]=(s*T-l*M+u*A)*O,t[1]=(i*M-n*T-a*A)*O,t[2]=(v*E-g*S+m*x)*O,t[3]=(h*S-f*E-d*x)*O,t[4]=(l*C-o*T-u*k)*O,t[5]=(r*T-i*C+a*k)*O,t[6]=(g*b-p*E-m*w)*O,t[7]=(c*E-h*b+d*w)*O,t[8]=(o*M-s*C+u*_)*O,t[9]=(n*C-r*M-a*_)*O,t[10]=(p*S-v*b+m*y)*O,t[11]=(f*b-c*S-d*y)*O,t[12]=(s*k-o*A-l*_)*O,t[13]=(r*A-n*k+i*_)*O,t[14]=(v*w-p*x-g*y)*O,t[15]=(c*x-f*w+h*y)*O,t):null}function xFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-d*g)-f*(l*m-u*g)+v*(l*d-u*h),t[1]=-(n*(h*m-d*g)-f*(i*m-a*g)+v*(i*d-a*h)),t[2]=n*(l*m-u*g)-s*(i*m-a*g)+v*(i*u-a*l),t[3]=-(n*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),t[4]=-(o*(h*m-d*g)-c*(l*m-u*g)+p*(l*d-u*h)),t[5]=r*(h*m-d*g)-c*(i*m-a*g)+p*(i*d-a*h),t[6]=-(r*(l*m-u*g)-o*(i*m-a*g)+p*(i*u-a*l)),t[7]=r*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),t[8]=o*(f*m-d*v)-c*(s*m-u*v)+p*(s*d-u*f),t[9]=-(r*(f*m-d*v)-c*(n*m-a*v)+p*(n*d-a*f)),t[10]=r*(s*m-u*v)-o*(n*m-a*v)+p*(n*u-a*s),t[11]=-(r*(s*d-u*f)-o*(n*d-a*f)+c*(n*u-a*s)),t[12]=-(o*(f*g-h*v)-c*(s*g-l*v)+p*(s*h-l*f)),t[13]=r*(f*g-h*v)-c*(n*g-i*v)+p*(n*h-i*f),t[14]=-(r*(s*g-l*v)-o*(n*g-i*v)+p*(n*l-i*s)),t[15]=r*(s*h-l*f)-o*(n*h-i*f)+c*(n*l-i*s),t}function SFe(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e*o-r*a,y=e*s-n*a,w=e*l-i*a,b=r*s-n*o,x=r*l-i*o,S=n*l-i*s,E=u*p-c*d,_=u*v-f*d,k=u*g-h*d,C=c*v-f*p,A=c*g-h*p,M=f*g-h*v;return m*M-y*A+w*C+b*k-x*_+S*E}function wae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],y=e[15],w=r[0],b=r[1],x=r[2],S=r[3];return t[0]=w*n+b*s+x*f+S*v,t[1]=w*i+b*l+x*h+S*g,t[2]=w*a+b*u+x*d+S*m,t[3]=w*o+b*c+x*p+S*y,w=r[4],b=r[5],x=r[6],S=r[7],t[4]=w*n+b*s+x*f+S*v,t[5]=w*i+b*l+x*h+S*g,t[6]=w*a+b*u+x*d+S*m,t[7]=w*o+b*c+x*p+S*y,w=r[8],b=r[9],x=r[10],S=r[11],t[8]=w*n+b*s+x*f+S*v,t[9]=w*i+b*l+x*h+S*g,t[10]=w*a+b*u+x*d+S*m,t[11]=w*o+b*c+x*p+S*y,w=r[12],b=r[13],x=r[14],S=r[15],t[12]=w*n+b*s+x*f+S*v,t[13]=w*i+b*l+x*h+S*g,t[14]=w*a+b*u+x*d+S*m,t[15]=w*o+b*c+x*p+S*y,t}function EFe(t,e,r){var n=r[0],i=r[1],a=r[2],o,s,l,u,c,f,h,d,p,v,g,m;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*a+e[12],t[13]=e[1]*n+e[5]*i+e[9]*a+e[13],t[14]=e[2]*n+e[6]*i+e[10]*a+e[14],t[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],p=e[8],v=e[9],g=e[10],m=e[11],t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=v,t[10]=g,t[11]=m,t[12]=o*n+c*i+p*a+e[12],t[13]=s*n+f*i+v*a+e[13],t[14]=l*n+h*i+g*a+e[14],t[15]=u*n+d*i+m*a+e[15]),t}function _Fe(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function CFe(t,e,r,n){var i=n[0],a=n[1],o=n[2],s=Math.hypot(i,a,o),l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,A,M,T,O,N;return s<Xt?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=e[0],h=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],y=e[7],w=e[8],b=e[9],x=e[10],S=e[11],E=i*i*c+u,_=a*i*c+o*l,k=o*i*c-a*l,C=i*a*c-o*l,A=a*a*c+u,M=o*a*c+i*l,T=i*o*c+a*l,O=a*o*c-i*l,N=o*o*c+u,t[0]=f*E+v*_+w*k,t[1]=h*E+g*_+b*k,t[2]=d*E+m*_+x*k,t[3]=p*E+y*_+S*k,t[4]=f*C+v*A+w*M,t[5]=h*C+g*A+b*M,t[6]=d*C+m*A+x*M,t[7]=p*C+y*A+S*M,t[8]=f*T+v*O+w*N,t[9]=h*T+g*O+b*N,t[10]=d*T+m*O+x*N,t[11]=p*T+y*O+S*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function kFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+f*n,t[7]=l*i+h*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=f*i-s*n,t[11]=h*i-l*n,t}function MFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-f*n,t[3]=l*i-h*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+f*i,t[11]=l*n+h*i,t}function AFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+f*n,t[3]=l*i+h*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=f*i-s*n,t[7]=h*i-l*n,t}function TFe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function IFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function OFe(t,e,r){var n=r[0],i=r[1],a=r[2],o=Math.hypot(n,i,a),s,l,u;return o<Xt?null:(o=1/o,n*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,t[0]=n*n*u+l,t[1]=i*n*u+a*s,t[2]=a*n*u-i*s,t[3]=0,t[4]=n*i*u-a*s,t[5]=i*i*u+l,t[6]=a*i*u+n*s,t[7]=0,t[8]=n*a*u+i*s,t[9]=i*a*u-n*s,t[10]=a*a*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function DFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function PFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,f=n*l,h=n*u,d=i*l,p=i*u,v=a*u,g=o*s,m=o*l,y=o*u;return t[0]=1-(d+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=h+m,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function RFe(t,e){var r=new $r(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=n*n+i*i+a*a+o*o;return f>0?(r[0]=(s*o+c*n+l*a-u*i)*2/f,r[1]=(l*o+c*i+u*n-s*a)*2/f,r[2]=(u*o+c*a+s*i-l*n)*2/f):(r[0]=(s*o+c*n+l*a-u*i)*2,r[1]=(l*o+c*i+u*n-s*a)*2,r[2]=(u*o+c*a+s*i-l*n)*2),bae(t,e,r),t}function xae(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Sae(t,e){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(l,u,c),t}function Eae(t,e){var r=new $r(3);Sae(r,e);var n=1/r[0],i=1/r[1],a=1/r[2],o=e[0]*n,s=e[1]*i,l=e[2]*a,u=e[4]*n,c=e[5]*i,f=e[6]*a,h=e[8]*n,d=e[9]*i,p=e[10]*a,v=o+c+p,g=0;return v>0?(g=Math.sqrt(v+1)*2,t[3]=.25*g,t[0]=(f-d)/g,t[1]=(h-l)/g,t[2]=(s-u)/g):o>c&&o>p?(g=Math.sqrt(1+o-c-p)*2,t[3]=(f-d)/g,t[0]=.25*g,t[1]=(s+u)/g,t[2]=(h+l)/g):c>p?(g=Math.sqrt(1+c-o-p)*2,t[3]=(h-l)/g,t[0]=(s+u)/g,t[1]=.25*g,t[2]=(f+d)/g):(g=Math.sqrt(1+p-o-c)*2,t[3]=(s-u)/g,t[0]=(h+l)/g,t[1]=(f+d)/g,t[2]=.25*g),t}function NFe(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,p=a*u,v=a*c,g=o*c,m=s*l,y=s*u,w=s*c,b=n[0],x=n[1],S=n[2];return t[0]=(1-(p+g))*b,t[1]=(h+w)*b,t[2]=(d-y)*b,t[3]=0,t[4]=(h-w)*x,t[5]=(1-(f+g))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(d+y)*S,t[9]=(v-m)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function FFe(t,e,r,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,f=s+s,h=a*u,d=a*c,p=a*f,v=o*c,g=o*f,m=s*f,y=l*u,w=l*c,b=l*f,x=n[0],S=n[1],E=n[2],_=i[0],k=i[1],C=i[2],A=(1-(v+m))*x,M=(d+b)*x,T=(p-w)*x,O=(d-b)*S,N=(1-(h+m))*S,R=(g+y)*S,B=(p+w)*E,F=(g-y)*E,D=(1-(h+v))*E;return t[0]=A,t[1]=M,t[2]=T,t[3]=0,t[4]=O,t[5]=N,t[6]=R,t[7]=0,t[8]=B,t[9]=F,t[10]=D,t[11]=0,t[12]=r[0]+_-(A*_+O*k+B*C),t[13]=r[1]+k-(M*_+N*k+F*C),t[14]=r[2]+C-(T*_+R*k+D*C),t[15]=1,t}function BFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[1]=c+m,t[2]=h-g,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $Fe(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),u=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t}function _ae(t,e,r,n,i){var a=1/Math.tan(e/2),o;return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}var zFe=_ae;function jFe(t,e,r,n,i){var a=1/Math.tan(e/2),o;return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=i*o,t[14]=i*n*o):(t[10]=-1,t[14]=-n),t}function GFe(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((o-s)*l*.5),t[9]=(i-a)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Cae(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*u,t[15]=1,t}var UFe=Cae;function WFe(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=a*u,t[15]=1,t}function VFe(t,e,r,n){var i,a,o,s,l,u,c,f,h,d,p=e[0],v=e[1],g=e[2],m=n[0],y=n[1],w=n[2],b=r[0],x=r[1],S=r[2];return Math.abs(p-b)<Xt&&Math.abs(v-x)<Xt&&Math.abs(g-S)<Xt?yae(t):(c=p-b,f=v-x,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-w*f,a=w*c-m*h,o=m*f-y*c,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-c*o,u=c*a-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=h,t[11]=0,t[12]=-(i*p+a*v+o*g),t[13]=-(s*p+l*v+u*g),t[14]=-(c*p+f*v+h*g),t[15]=1,t)}function HFe(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],u=n[2],c=i-r[0],f=a-r[1],h=o-r[2],d=c*c+f*f+h*h;d>0&&(d=1/Math.sqrt(d),c*=d,f*=d,h*=d);var p=l*h-u*f,v=u*c-s*h,g=s*f-l*c;return d=p*p+v*v+g*g,d>0&&(d=1/Math.sqrt(d),p*=d,v*=d,g*=d),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=f*g-h*v,t[5]=h*p-c*g,t[6]=c*v-f*p,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function XFe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function YFe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function qFe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function kae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function KFe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function QFe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function ZFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function JFe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=e[0],w=e[1],b=e[2],x=e[3],S=e[4],E=e[5],_=e[6],k=e[7],C=e[8],A=e[9],M=e[10],T=e[11],O=e[12],N=e[13],R=e[14],B=e[15];return Math.abs(r-y)<=Xt*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-w)<=Xt*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-b)<=Xt*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=Xt*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=Xt*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-E)<=Xt*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-_)<=Xt*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-k)<=Xt*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-C)<=Xt*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-A)<=Xt*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(h-M)<=Xt*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(d-T)<=Xt*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-O)<=Xt*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(v-N)<=Xt*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(g-R)<=Xt*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-B)<=Xt*Math.max(1,Math.abs(m),Math.abs(B))}var eBe=wae,tBe=kae;const rBe=Object.freeze(Object.defineProperty({__proto__:null,add:qFe,adjoint:xFe,clone:vFe,copy:gFe,create:pFe,determinant:SFe,equals:JFe,exactEquals:ZFe,frob:YFe,fromQuat:BFe,fromQuat2:RFe,fromRotation:OFe,fromRotationTranslation:bae,fromRotationTranslationScale:NFe,fromRotationTranslationScaleOrigin:FFe,fromScaling:IFe,fromTranslation:TFe,fromValues:mFe,fromXRotation:DFe,fromYRotation:PFe,fromZRotation:LFe,frustum:$Fe,getRotation:Eae,getScaling:Sae,getTranslation:xae,identity:yae,invert:bFe,lookAt:VFe,mul:eBe,multiply:wae,multiplyScalar:KFe,multiplyScalarAndAdd:QFe,ortho:UFe,orthoNO:Cae,orthoZO:WFe,perspective:zFe,perspectiveFromFieldOfView:GFe,perspectiveNO:_ae,perspectiveZO:jFe,rotate:CFe,rotateX:kFe,rotateY:MFe,rotateZ:AFe,scale:_Fe,set:yFe,str:XFe,sub:tBe,subtract:kae,targetTo:HFe,translate:EFe,transpose:wFe},Symbol.toStringTag,{value:"Module"}));function W8(){var t=new $r(3);return $r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function nBe(t){var e=new $r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Mae(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function tR(t,e,r){var n=new $r(3);return n[0]=t,n[1]=e,n[2]=r,n}function iBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function aBe(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function oBe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Aae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Tae(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Iae(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function sBe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function lBe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function uBe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function cBe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function fBe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function hBe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function dBe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Oae(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function Dae(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function Pae(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function pBe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function vBe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Lae(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function V8(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function y_(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t}function gBe(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function mBe(t,e,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+r[0]*l+n[0]*u+i[0]*c,t[1]=e[1]*s+r[1]*l+n[1]*u+i[1]*c,t[2]=e[2]*s+r[2]*l+n[2]*u+i[2]*c,t}function yBe(t,e,r,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,h=l*a;return t[0]=e[0]*u+r[0]*c+n[0]*f+i[0]*h,t[1]=e[1]*u+r[1]*c+n[1]*f+i[1]*h,t[2]=e[2]*u+r[2]*c+n[2]*f+i[2]*h,t}function wBe(t,e){e=e||1;var r=ql()*2*Math.PI,n=ql()*2-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function bBe(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function BA(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function xBe(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],l=e[1],u=e[2],c=i*u-a*l,f=a*s-n*u,h=n*l-i*s,d=i*h-a*f,p=a*c-n*h,v=n*f-i*c,g=o*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,t[0]=s+c+d,t[1]=l+f+p,t[2]=u+h+v,t}function SBe(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function EBe(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function _Be(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function CBe(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(a*a+o*o+s*s),c=l*u,f=c&&V8(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function kBe(t){return t[0]=0,t[1]=0,t[2]=0,t}function MBe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ABe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function TBe(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=Xt*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=Xt*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=Xt*Math.max(1,Math.abs(i),Math.abs(s))}var IBe=Aae,OBe=Tae,DBe=Iae,PBe=Oae,LBe=Dae,Rae=Mae,RBe=Pae,NBe=function(){var t=W8();return function(e,r,n,i,a,o){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();const FBe=Object.freeze(Object.defineProperty({__proto__:null,add:oBe,angle:CBe,bezier:yBe,ceil:sBe,clone:nBe,copy:iBe,create:W8,cross:y_,dist:PBe,distance:Oae,div:DBe,divide:Iae,dot:V8,equals:TBe,exactEquals:ABe,floor:lBe,forEach:NBe,fromValues:tR,hermite:mBe,inverse:vBe,len:Rae,length:Mae,lerp:gBe,max:cBe,min:uBe,mul:OBe,multiply:Tae,negate:pBe,normalize:Lae,random:wBe,rotateX:SBe,rotateY:EBe,rotateZ:_Be,round:fBe,scale:hBe,scaleAndAdd:dBe,set:aBe,sqrDist:LBe,sqrLen:RBe,squaredDistance:Dae,squaredLength:Pae,str:MBe,sub:IBe,subtract:Aae,transformMat3:BA,transformMat4:bBe,transformQuat:xBe,zero:kBe},Symbol.toStringTag,{value:"Module"}));function Nae(){var t=new $r(4);return $r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Fae(t){var e=new $r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Bae(t,e,r,n){var i=new $r(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function $ae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function zae(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function jae(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Gae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Uae(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Wae(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function BBe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function $Be(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function zBe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function jBe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function GBe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Vae(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function UBe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Hae(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.hypot(r,n,i,a)}function Xae(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function H8(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function X8(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function WBe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function VBe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Yae(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function qae(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function HBe(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],l=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],c=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*u-h*l+d*s,t[1]=-(c*u)+h*o-d*a,t[2]=c*l-f*o+d*i,t[3]=-(c*s)+f*a-h*i,t}function Kae(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function XBe(t,e){e=e||1;var r,n,i,a,o,s;do r=ql()*2-1,n=ql()*2-1,o=r*r+n*n;while(o>=1);do i=ql()*2-1,a=ql()*2-1,s=i*i+a*a;while(s>=1);var l=Math.sqrt((1-o)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*l,t[3]=e*a*l,t}function YBe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function qBe(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,f=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return t[0]=c*u+d*-o+f*-l-h*-s,t[1]=f*u+d*-s+h*-o-c*-l,t[2]=h*u+d*-l+c*-s-f*-o,t[3]=e[3],t}function KBe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function QBe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Qae(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Zae(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-o)<=Xt*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=Xt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Xt*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=Xt*Math.max(1,Math.abs(a),Math.abs(u))}var ZBe=Gae,JBe=Uae,e$e=Wae,t$e=Hae,r$e=Xae,n$e=H8,i$e=X8,a$e=function(){var t=Nae();return function(e,r,n,i,a,o){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();const o$e=Object.freeze(Object.defineProperty({__proto__:null,add:jae,ceil:BBe,clone:Fae,copy:$ae,create:Nae,cross:HBe,dist:t$e,distance:Hae,div:e$e,divide:Wae,dot:qae,equals:Zae,exactEquals:Qae,floor:$Be,forEach:a$e,fromValues:Bae,inverse:VBe,len:n$e,length:H8,lerp:Kae,max:jBe,min:zBe,mul:JBe,multiply:Uae,negate:WBe,normalize:Yae,random:XBe,round:GBe,scale:Vae,scaleAndAdd:UBe,set:zae,sqrDist:r$e,sqrLen:i$e,squaredDistance:Xae,squaredLength:X8,str:QBe,sub:ZBe,subtract:Gae,transformMat4:YBe,transformQuat:qBe,zero:KBe},Symbol.toStringTag,{value:"Module"}));function _k(){var t=new $r(4);return $r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function s$e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Jae(t,e,r){r=r*.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function l$e(t,e){var r=Math.acos(e[3])*2,n=Math.sin(r/2);return n>Xt?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function u$e(t,e){var r=q8(t,e);return Math.acos(2*r*r-1)}function eoe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t}function toe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-n*s,t}function roe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l-a*s,t[1]=i*l+o*s,t[2]=a*l+n*s,t[3]=o*l-i*s,t}function noe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*s,t[1]=i*l-n*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t}function c$e(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function ioe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return t[0]=r*l,t[1]=n*l,t[2]=i*l,t[3]=s*Math.cos(o),t}function aoe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=.5*Math.log(r*r+n*n+i*i+a*a),t}function f$e(t,e,r){return aoe(t,e),soe(t,t,r),ioe(t,t),t}function w_(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+a*u+o*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Xt?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),t[0]=v*i+g*l,t[1]=v*a+g*u,t[2]=v*o+g*c,t[3]=v*s+g*f,t}function h$e(t){var e=ql(),r=ql(),n=ql(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function d$e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function p$e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function ooe(t,e){var r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[a*3+o]-e[o*3+a])*n,t[a]=(e[a*3+i]+e[i*3+a])*n,t[o]=(e[o*3+i]+e[i*3+o])*n}return t}function v$e(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),l=Math.cos(r),u=Math.sin(n),c=Math.cos(n);return t[0]=a*l*c-o*s*u,t[1]=o*s*c+a*l*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t}function g$e(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var m$e=Fae,y$e=Bae,Y8=$ae,w$e=zae,b$e=jae,x$e=eoe,soe=Vae,q8=qae,S$e=Kae,K8=H8,E$e=K8,Q8=X8,_$e=Q8,Z8=Yae,C$e=Qae,k$e=Zae,M$e=function(){var t=W8(),e=tR(1,0,0),r=tR(0,1,0);return function(n,i,a){var o=V8(i,a);return o<-.999999?(y_(t,e,i),Rae(t)<1e-6&&y_(t,r,i),Lae(t,t),Jae(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(y_(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,Z8(n,n))}}(),A$e=function(){var t=_k(),e=_k();return function(r,n,i,a,o,s){return w_(t,n,o,s),w_(e,i,a,s),w_(r,t,e,2*s*(1-s)),r}}(),T$e=function(){var t=vae();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],Z8(e,ooe(e,t))}}();const I$e=Object.freeze(Object.defineProperty({__proto__:null,add:b$e,calculateW:c$e,clone:m$e,conjugate:p$e,copy:Y8,create:_k,dot:q8,equals:k$e,exactEquals:C$e,exp:ioe,fromEuler:v$e,fromMat3:ooe,fromValues:y$e,getAngle:u$e,getAxisAngle:l$e,identity:s$e,invert:d$e,len:E$e,length:K8,lerp:S$e,ln:aoe,mul:x$e,multiply:eoe,normalize:Z8,pow:f$e,random:h$e,rotateX:toe,rotateY:roe,rotateZ:noe,rotationTo:M$e,scale:soe,set:w$e,setAxes:T$e,setAxisAngle:Jae,slerp:w_,sqlerp:A$e,sqrLen:_$e,squaredLength:Q8,str:g$e},Symbol.toStringTag,{value:"Module"}));function O$e(){var t=new $r(8);return $r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function D$e(t){var e=new $r(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function P$e(t,e,r,n,i,a,o,s){var l=new $r(8);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l}function L$e(t,e,r,n,i,a,o){var s=new $r(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var l=i*.5,u=a*.5,c=o*.5;return s[4]=l*n+u*r-c*e,s[5]=u*n+c*t-l*r,s[6]=c*n+l*e-u*t,s[7]=-l*t-u*e-c*r,s}function loe(t,e,r){var n=r[0]*.5,i=r[1]*.5,a=r[2]*.5,o=e[0],s=e[1],l=e[2],u=e[3];return t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=n*u+i*l-a*s,t[5]=i*u+a*o-n*l,t[6]=a*u+n*s-i*o,t[7]=-n*o-i*s-a*l,t}function R$e(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0]*.5,t[5]=e[1]*.5,t[6]=e[2]*.5,t[7]=0,t}function N$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function F$e(t,e){var r=_k();Eae(r,e);var n=new $r(3);return xae(n,e),loe(t,r,n),t}function uoe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function B$e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function $$e(t,e,r,n,i,a,o,s,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t}var z$e=Y8;function j$e(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var G$e=Y8;function U$e(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function W$e(t,e){var r=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],u=e[3];return t[0]=(r*u+a*o+n*l-i*s)*2,t[1]=(n*u+a*s+i*o-r*l)*2,t[2]=(i*u+a*l+r*s-n*o)*2,t}function V$e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0]*.5,l=r[1]*.5,u=r[2]*.5,c=e[4],f=e[5],h=e[6],d=e[7];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*u-a*l+c,t[5]=o*l+a*s-n*u+f,t[6]=o*u+n*l-i*s+h,t[7]=-n*s-i*l-a*u+d,t}function H$e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return toe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function X$e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return roe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function Y$e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return noe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function q$e(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],l=e[1],u=e[2],c=e[3];return t[0]=s*o+c*n+l*a-u*i,t[1]=l*o+c*i+u*n-s*a,t[2]=u*o+c*a+s*i-l*n,t[3]=c*o-s*n-l*i-u*a,s=e[4],l=e[5],u=e[6],c=e[7],t[4]=s*o+c*n+l*a-u*i,t[5]=l*o+c*i+u*n-s*a,t[6]=u*o+c*a+s*i-l*n,t[7]=c*o-s*n-l*i-u*a,t}function K$e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,s=r[4],l=r[5],u=r[6],c=r[7],t[4]=n*c+o*s+i*u-a*l,t[5]=i*c+o*l+a*s-n*u,t[6]=a*c+o*u+n*l-i*s,t[7]=o*c-n*s-i*l-a*u,t}function Q$e(t,e,r,n){if(Math.abs(n)<Xt)return uoe(t,e);var i=Math.hypot(r[0],r[1],r[2]);n=n*.5;var a=Math.sin(n),o=a*r[0]/i,s=a*r[1]/i,l=a*r[2]/i,u=Math.cos(n),c=e[0],f=e[1],h=e[2],d=e[3];t[0]=c*u+d*o+f*l-h*s,t[1]=f*u+d*s+h*o-c*l,t[2]=h*u+d*l+c*s-f*o,t[3]=d*u-c*o-f*s-h*l;var p=e[4],v=e[5],g=e[6],m=e[7];return t[4]=p*u+m*o+v*l-g*s,t[5]=v*u+m*s+g*o-p*l,t[6]=g*u+m*l+p*s-v*o,t[7]=m*u-p*o-v*s-g*l,t}function Z$e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function coe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[4],l=r[5],u=r[6],c=r[7],f=e[4],h=e[5],d=e[6],p=e[7],v=r[0],g=r[1],m=r[2],y=r[3];return t[0]=n*y+o*v+i*m-a*g,t[1]=i*y+o*g+a*v-n*m,t[2]=a*y+o*m+n*g-i*v,t[3]=o*y-n*v-i*g-a*m,t[4]=n*c+o*s+i*u-a*l+f*y+p*v+h*m-d*g,t[5]=i*c+o*l+a*s-n*u+h*y+p*g+d*v-f*m,t[6]=a*c+o*u+n*l-i*s+d*y+p*m+f*g-h*v,t[7]=o*c-n*s-i*l-a*u+p*y-f*v-h*g-d*m,t}var J$e=coe;function e7e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var foe=q8;function t7e(t,e,r,n){var i=1-n;return foe(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function r7e(t,e){var r=$A(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function n7e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var hoe=K8,i7e=hoe,$A=Q8,a7e=$A;function o7e(t,e){var r=$A(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,a=e[2]/r,o=e[3]/r,s=e[4],l=e[5],u=e[6],c=e[7],f=n*s+i*l+a*u+o*c;t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-n*f)/r,t[5]=(l-i*f)/r,t[6]=(u-a*f)/r,t[7]=(c-o*f)/r}return t}function s7e(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function l7e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function u7e(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=e[0],f=e[1],h=e[2],d=e[3],p=e[4],v=e[5],g=e[6],m=e[7];return Math.abs(r-c)<=Xt*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-f)<=Xt*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-h)<=Xt*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=Xt*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=Xt*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-v)<=Xt*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-g)<=Xt*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-m)<=Xt*Math.max(1,Math.abs(u),Math.abs(m))}const c7e=Object.freeze(Object.defineProperty({__proto__:null,add:Z$e,clone:D$e,conjugate:n7e,copy:uoe,create:O$e,dot:foe,equals:u7e,exactEquals:l7e,fromMat4:F$e,fromRotation:N$e,fromRotationTranslation:loe,fromRotationTranslationValues:L$e,fromTranslation:R$e,fromValues:P$e,getDual:j$e,getReal:z$e,getTranslation:W$e,identity:B$e,invert:r7e,len:i7e,length:hoe,lerp:t7e,mul:J$e,multiply:coe,normalize:o7e,rotateAroundAxis:Q$e,rotateByQuatAppend:q$e,rotateByQuatPrepend:K$e,rotateX:H$e,rotateY:X$e,rotateZ:Y$e,scale:e7e,set:$$e,setDual:U$e,setReal:G$e,sqrLen:a7e,squaredLength:$A,str:s7e,translate:V$e},Symbol.toStringTag,{value:"Module"}));function doe(){var t=new $r(2);return $r!=Float32Array&&(t[0]=0,t[1]=0),t}function f7e(t){var e=new $r(2);return e[0]=t[0],e[1]=t[1],e}function h7e(t,e){var r=new $r(2);return r[0]=t,r[1]=e,r}function d7e(t,e){return t[0]=e[0],t[1]=e[1],t}function p7e(t,e,r){return t[0]=e,t[1]=r,t}function aa(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function poe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function voe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function goe(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function v7e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function g7e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function uh(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function ch(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function m7e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Va(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function y7e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Ck(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function moe(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function yoe(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function woe(t){var e=t[0],r=t[1];return e*e+r*r}function w7e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function b7e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function rd(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function J8(t,e){return t[0]*e[0]+t[1]*e[1]}function x7e(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function S7e(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}function E7e(t,e){e=e||1;var r=ql()*2*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function _7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function C7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function k7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function M7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function A7e(t,e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=Math.sin(n),s=Math.cos(n);return t[0]=i*s-a*o+r[0],t[1]=i*o+a*s+r[1],t}function boe(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+a*a),s=o&&(r*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function T7e(t){return t[0]=0,t[1]=0,t}function I7e(t){return"vec2("+t[0]+", "+t[1]+")"}function e6(t,e){return t[0]===e[0]&&t[1]===e[1]}function O7e(t,e){var r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=Xt*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=Xt*Math.max(1,Math.abs(n),Math.abs(a))}var D7e=yoe,b_=poe,P7e=voe,L7e=goe,R7e=Ck,N7e=moe,F7e=woe,B7e=function(){var t=doe();return function(e,r,n,i,a,o){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();const $7e=Object.freeze(Object.defineProperty({__proto__:null,add:aa,angle:boe,ceil:v7e,clone:f7e,copy:d7e,create:doe,cross:x7e,dist:R7e,distance:Ck,div:L7e,divide:goe,dot:J8,equals:O7e,exactEquals:e6,floor:g7e,forEach:B7e,fromValues:h7e,inverse:b7e,len:D7e,length:yoe,lerp:S7e,max:ch,min:uh,mul:P7e,multiply:voe,negate:w7e,normalize:rd,random:E7e,rotate:A7e,round:m7e,scale:Va,scaleAndAdd:y7e,set:p7e,sqrDist:N7e,sqrLen:F7e,squaredDistance:moe,squaredLength:woe,str:I7e,sub:b_,subtract:poe,transformMat2:_7e,transformMat2d:C7e,transformMat3:k7e,transformMat4:M7e,zero:T7e},Symbol.toStringTag,{value:"Module"})),z7e=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:X8e,mat2:y6e,mat2d:G6e,mat3:mae,mat4:rBe,quat:I$e,quat2:c7e,vec2:$7e,vec3:FBe,vec4:o$e},Symbol.toStringTag,{value:"Module"}));function j7e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return j8(n,r),Sc(t,n,e)}function G7e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return G8(n,r),Sc(t,n,e)}function U7e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return U8(n,r),Sc(t,n,e)}function W7e(t,e,r){return Sc(t,r,e)}function yl(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":j7e(r,r,[a[1],a[2]]);break;case"s":U7e(r,r,[a[1],a[2]]);break;case"r":G7e(r,r,a[1]);break;case"m":W7e(r,r,a[1]);break}}return r}var mv=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,r||(a[f][c]=1))}),a},V7e=function(e,r){return e===r},PG=function(){function t(e,r){r===void 0&&(r=null),this.value=e,this.next=r}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t}(),xoe=function(){function t(e){e===void 0&&(e=V7e),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var r=new PG(e,this.head);return this.head=r,this.tail||(this.tail=r),this},t.prototype.append=function(e){var r=new PG(e);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,e);)r=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(r=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),r},t.prototype.find=function(e){var r=e.value,n=r===void 0?void 0:r,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var r=this;return e.forEach(function(n){return r.append(n)}),this},t.prototype.toArray=function(){for(var e=[],r=this.head;r;)e.push(r),r=r.next;return e},t.prototype.reverse=function(){for(var e=this.head,r=null,n=null;e;)n=e.next,e.next=r,r=e,e=n;this.tail=this.head,this.head=r},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(r){return r.toString(e)}).toString()},t}(),H7e=function(){function t(){this.linkedList=new xoe}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(e){this.linkedList.append(e)},t.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toString=function(e){return this.linkedList.toString(e)},t}(),ps=function(e,r,n){r===void 0&&(r=[]);var i=r.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},X7e=function(e,r){return r.filter(function(n){return n.source===e})},x_=function(e,r){return r.filter(function(n){return n.source===e||n.target===e})},Soe=function(e){e===void 0&&(e=0);var r="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(r).concat(n)};function Y7e(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}var Eoe=function(e,r,n,i){i===void 0&&(i=!0);var a=Y7e(n),o=new H7e,s=e.edges,l=s===void 0?[]:s;o.enqueue(r);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),ps(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},q7e=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(p){l.push(p),s[p.id]=!0;for(var v=ps(p.id,a),g=function(w){var b=v[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<v.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},_oe=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=ps(m.id,a,"target").filter(function(E){return n.map(function(_){return _.id}).indexOf(E)>-1}),w=function(_){var k=y[_];if(!l[k]&&l[k]!==0){var C=n.filter(function(A){return A.id===k});C.length>0&&g(C[0]),u[m.id]=Math.min(u[m.id],u[k])}else s[k]&&(u[m.id]=Math.min(u[m.id],l[k]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,p=n;d<p.length;d++){var v=p[d];!l[v.id]&&l[v.id]!==0&&h(v)}return c};function t6(t,e){return e?_oe(t):q7e(t)}var _f=function(e){var r={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){r[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){r[s.source].degree++,r[s.source].outDegree++,r[s.target].degree++,r[s.target].inDegree++}),r},Coe=function(e,r){var n=_f(e);return n[r]?_f(e)[r].inDegree:0},koe=function(e,r){var n=_f(e);return n[r]?_f(e)[r].outDegree:0};function K7e(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}function Moe(t,e,r,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:r});var a=t.edges,o=a===void 0?[]:a;ps(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:r,current:e,next:s})&&Moe(t,s,e,n,i)}),n.leave({current:e,previous:r})}function r6(t,e,r,n){n===void 0&&(n=!0),Moe(t,e,"",K7e(r),n)}var n6=function(e){var r=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,p=h.previous;if(s[d]){r={};for(var v=d,g=p;g!==d;)r[v]=g,v=g,g=a[g];r[v]=g}else s[d]=d,delete o[d],a[d]=p},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return r?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];r6(e,c,u)}return r},i6=function(e,r,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=t6(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],p=(i={},i[h]=f,i),v=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=ps(m,e.edges),w=function(S){var E,_=y[S],k=e.nodes.find(function(N){return N.id===_});if(_===m)o.push((E={},E[_]=g,E));else if(!(_ in v))p[_]=g,d.push(k),v[_]=new Set([g]);else if(!v[m].has(k)){for(var C=!0,A=[k,g],M=p[m];v[_].size&&!v[_].has(M)&&(A.push(M),M!==p[M.id]);)M=p[M.id];if(A.push(M),r&&n?(C=!1,A.findIndex(function(N){return r.indexOf(N.id)>-1})>-1&&(C=!0)):r&&!n&&A.findIndex(function(N){return r.indexOf(N.id)>-1})>-1&&(C=!1),C){for(var T={},O=1;O<A.length;O+=1)T[A[O-1].id]=A[O];A.length&&(T[A[A.length-1].id]=A[0]),o.push(T)}v[_].add(g)}},b=0;b<y.length;b+=1)w(b)}return o},a6=function(e,r,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(M){for(var T=[M];T.length>0;){var O=T.pop();a.has(O)&&(a.delete(O),o[O.id].forEach(function(N){T.push(N)}),o[O.id].clear())}},f=function A(M,T,O){var N=!1;if(r&&n===!1&&r.indexOf(M.id)>-1)return N;i.push(M),a.add(M);for(var R=O[M.id],B=0;B<R.length;B+=1){var F=l[R[B]];if(F===T){for(var D={},L=1;L<i.length;L+=1)D[i[L-1].id]=i[L];i.length&&(D[i[i.length-1].id]=i[0]),s.push(D),N=!0}else a.has(F)||A(F,T,O)&&(N=!0)}if(N)c(M);else for(var B=0;B<R.length;B+=1){var F=l[R[B]];o[F.id].has(M)||o[F.id].add(M)}return i.pop(),N},h=e.nodes,d=h===void 0?[]:h,p=0;p<d.length;p+=1){var v=d[p],g=v.id;u[g]=p,l[p]=v}if(r&&n)for(var m=function(M){var T=r[M];u[d[M].id]=u[T],u[T]=0,l[0]=d.find(function(O){return O.id===T}),l[u[d[M].id]]=d[M]},p=0;p<r.length;p++)m(p);for(var y=function(M){for(var T,O,N=1/0,R=0;R<M.length;R+=1)for(var B=M[R],F=0;F<B.length;F++){var D=u[B[F].id];D<N&&(N=D,O=R)}for(var L=M[O],G=[],R=0;R<L.length;R+=1){var Y=L[R];G[Y.id]=[];for(var Z=0,q=ps(Y.id,e.edges,"target").filter(function(Ae){return L.map(function(He){return He.id}).indexOf(Ae)>-1});Z<q.length;Z++){var pe=q[Z];pe===Y.id&&!(n===!1&&r.indexOf(Y.id)>-1)?s.push((T={},T[Y.id]=Y,T)):G[Y.id].push(u[pe])}}return{component:L,adjList:G,minIdx:N}},w=0;w<d.length;){var b=d.filter(function(A){return u[A.id]>=w}),x=_oe({nodes:b,edges:e.edges}).filter(function(A){return A.length>1});if(x.length===0)break;var S=y(x),E=S.minIdx,_=S.adjList,k=S.component;if(k.length>1){k.forEach(function(A){o[A.id]=new Set});var C=l[E];if(r&&n&&r.indexOf(C.id)===-1)return s;f(C,C,_),w=E+1}else break}return s},Aoe=function(e,r,n,i){return i===void 0&&(i=!0),r?a6(e,n,i):i6(e,n,i)},Q7e=function(e,r,n){for(var i=1/0,a,o=0;o<r.length;o++){var s=r[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=r[o])}return a},r2=function(e,r,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===r&&(c[b]=0)});for(var h=o.length,d=function(w){var b=Q7e(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=X7e(x,l):S=x_(x,l),S.forEach(function(E){var _=E.target,k=E.source,C=_===x?k:_,A=i&&E[i]?E[i]:1;c[C]>c[b.id]+A?(c[C]=c[b.id]+A,f[C]=[b.id]):c[C]===c[b.id]+A&&f[C].push(b.id)})},p=0;p<h;p++)d();f[r]=[r];var v={};for(var g in c)c[g]!==1/0&&Toe(r,g,f,v);var m={};for(var g in v)m[g]=v[g][0];return{length:c,path:m,allPath:v}};function Toe(t,e,r,n){if(t===e)return[t];if(n[e])return n[e];for(var i=[],a=0,o=r[e];a<o.length;a++){var s=o[a],l=Toe(t,s,r,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];Ft(f)?i.push(zo(zo([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var Ioe=function(e,r,n,i,a){var o=r2(e,r,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},Ooe=function(e,r,n,i){var a;if(r===n)return[[r]];var o=e.edges,s=o===void 0?[]:o,l=[r],u=(a={},a[r]=!0,a),c=[],f=[],h=i?ps(r,s,"target"):ps(r,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var p=d.shift();p&&(l.push(p),u[p]=!0,h=i?ps(p,s,"target"):ps(p,s),c.push(h.filter(function(m){return!u[m]})))}else{var v=l.pop();u[v]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var v=l.pop();u[v]=!1,c.pop()}}return f},n2=function(e,r){for(var n=mv(e,r),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},Doe=function(e,r,n,i){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=Soe();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=mv(e,r),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,E){if(S){var _=o[E].id;h[x][_]=S}})});for(var d=0,p=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(O){var N=h[x.id][O],R=c[O].node,B=R.clusterId;S[B]||(S[B]=0),S[B]+=N});var E=-1/0,_=[];if(Object.keys(S).forEach(function(O){E<S[O]?(E=S[O],_=[O]):E===S[O]&&_.push(O)}),!(_.length===1&&_[0]===x.clusterId)){var k=_.indexOf(x.clusterId);if(k>=0&&_.splice(k,1),_&&_.length){b=!0;var C=u[x.clusterId],A=C.nodes.indexOf(x);C.nodes.splice(A,1);var M=Math.floor(Math.random()*_.length),T=u[_[M]];T.nodes.push(x),x.clusterId=T.id}}}),!b)return"break";d++};d<i;){var v=p();if(v==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,E=c[b].node.clusterId,_=c[x].node.clusterId,k="".concat(E,"---").concat(_);if(m[k])m[k].weight+=S,m[k].count++;else{var C={source:E,target:_,weight:S,count:1};m[k]=C,g.push(C)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},rl=function(){function t(e){this.arr=e}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new t(i)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new t(i)}},t.prototype.avg=function(e){var r=[];if(e!==0)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},t.prototype.euclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=Ir(this.arr);r.sort(function(o,s){return o-s});var n=r[r.length-1],i=r[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new t(e)},t.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var r=0;for(var n in this.arr)r+=Math.pow(this.arr[n],2);return Math.sqrt(r)},t.prototype.dot=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},t.prototype.equal=function(e){var r,n=e.arr;if(((r=this.arr)===null||r===void 0?void 0:r.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},t}(),o6=function(e,r){r===void 0&&(r=void 0);var n=[];return e.forEach(function(i){r===void 0&&n.push(i),i[r]!==void 0&&n.push(i[r])}),n},Wl;(function(t){t.EuclideanDistance="euclideanDistance"})(Wl||(Wl={}));var Z7e=function(e,r,n){var i=[];r!=null&&r.length?i=r:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=e2(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=e2(s))}),a},s6=function(e,r,n){var i=Z7e(e,r,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],p=d.findIndex(function(m){return h===m}),v=[];if(s)v.push(h);else for(var g=0;g<d.length;g++)g===p?v.push(1):v.push(0);c=c.concat(v)}),a[u]=c}),a},LG=function(e,r,n,i){n===void 0&&(n=Wl.EuclideanDistance);var a=0;switch(n){case Wl.EuclideanDistance:a=new rl(e).euclideanDistance(new rl(r));break}return a},RG=function(e,r,n,i){for(var a=r.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=r[l][c]||0,d=n[l]||0,p=n[c]||0;s+=h-d*p/o}}return s*=1/o,s},HO=function(e,r){e===void 0&&(e=[]);for(var n=e.length,i=new rl([]),a=0;a<n;a++)i=i.add(new rl(r[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new rl(r[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new rl(r[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new rl(r[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,p=2*n*s,a=0;a<n;a++)for(var v=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||v!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(p,2)-c[a][f]/p;d+=m}}return Number(d.toFixed(4))},l6=function(e,r,n,i,a,o,s,l,u){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,p=[];if(a){f.forEach(function(D,L){D.properties=D.properties||{},D.originIndex=L});var v=[];f.every(function(D){return D.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(f.map(function(D){return D.nodeType}))),f.forEach(function(D){D.properties.nodeType=v.findIndex(function(L){return L===D.nodeType})}));var g=o6(f,o);p=s6(g,s,l)}var m=1,y={},w={};f.forEach(function(D,L){var G=String(m++);D.clusterId=G,y[G]={id:G,nodes:[D]},w[D.id]={node:D,idx:L}});var b=mv(e,r),x=[],S={},E=0;b.forEach(function(D,L){var G=0,Y=f[L].id;S[Y]={},D.forEach(function(Z,q){if(Z){G+=Z;var pe=f[q].id;S[Y][pe]=Z,E+=Z}}),x.push(G)}),E/=2;for(var _=1/0,k=1/0,C=0,A=[],M={};;){a&&f.every(function(D){return D.hasOwnProperty("properties")})?_=RG(f,b,x,E)+HO(f,p)*u:_=RG(f,b,x,E),C===0&&(k=_,A=f,M=y);var T=_>0&&_>k&&_-k<i;if(_>k&&(A=f.map(function(D){return{node:D,clusterId:D.clusterId}}),M=Ir(y),k=_),T||C>100)break;C++,Object.keys(y).forEach(function(D){var L=0;d.forEach(function(G){var Y=G.source,Z=G.target,q=w[Y].node.clusterId,pe=w[Z].node.clusterId;(q===D&&pe!==D||pe===D&&q!==D)&&(L=L+(G[n]||1))}),y[D].sumTot=L}),f.forEach(function(D,L){var G=y[D.clusterId],Y=0,Z,q=x[L]/(2*E),pe=0,Se=G.nodes;Se.forEach(function(er){var yr=w[er.id].idx;pe+=b[L][yr]||0});var Ae=pe-G.sumTot*q,He=Se.filter(function(er){return er.id!==D.id});He.forEach(function(er,yr){p[er.originIndex]});var ct=HO(He,p)*u,st=S[D.id];if(Object.keys(st).forEach(function(er){var yr=w[er].node,or=yr.clusterId;if(or!==D.clusterId){var zt=y[or],tr=zt.nodes;if(!(!tr||!tr.length)){var Dr=0;tr.forEach(function(Pe){var ye=w[Pe.id].idx;Dr+=b[L][ye]||0});var Ze=Dr-zt.sumTot*q,oe=tr.concat([D]);oe.forEach(function(Pe,ye){p[Pe.originIndex]});var P=HO(oe,p)*u,_e=Ze-Ae;a&&(_e=Ze+P-(Ae+ct)),_e>Y&&(Y=_e,Z=zt)}}}),Y>0){Z.nodes.push(D);var Mt=D.clusterId;D.clusterId=Z.id;var yt=G.nodes.indexOf(D);G.nodes.splice(yt,1);var ar=0,Jt=0;d.forEach(function(er){var yr=er.source,or=er.target,zt=w[yr].node.clusterId,tr=w[or].node.clusterId;(zt===Z.id&&tr!==Z.id||tr===Z.id&&zt!==Z.id)&&(ar=ar+(er[n]||1)),(zt===Mt&&tr!==Mt||tr===Mt&&zt!==Mt)&&(Jt=Jt+(er[n]||1))}),Z.sumTot=ar,G.sumTot=Jt}})}var O={},N=0;Object.keys(M).forEach(function(D){var L=M[D];if(!L.nodes||!L.nodes.length){delete M[D];return}var G=String(N+1);G!==D&&(L.id=G,L.nodes=L.nodes.map(function(Y){return{id:Y.id,clusterId:G}}),M[G]=L,O[D]=G,delete M[D],N++)}),A.forEach(function(D){var L=D.node,G=D.clusterId;L&&(L.clusterId=G,L.clusterId&&O[L.clusterId]&&(L.clusterId=O[L.clusterId]))});var R=[],B={};d.forEach(function(D){var L=D.source,G=D.target,Y=D[n]||1,Z=w[L].node.clusterId,q=w[G].node.clusterId;if(!(!Z||!q)){var pe="".concat(Z,"---").concat(q);if(B[pe])B[pe].weight+=Y,B[pe].count++;else{var Se={source:Z,target:q,weight:Y,count:1};B[pe]=Se,R.push(Se)}}});var F=[];return Object.keys(M).forEach(function(D){F.push(M[D])}),{clusters:F,clusterEdges:R}},Poe=function(e,r,n,i,a,o,s,l){return r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1),l6(e,r,n,i,!0,a,o,s,l)},Loe=function(e,r){var n;r===void 0&&(r=1);for(var i=Ir(e),a=i.nodes,o=a===void 0?[]:a,s=i.edges,l=s===void 0?[]:s,u=function(){var h=_f({nodes:o,edges:l}),d=Object.keys(h);d.sort(function(g,m){var y,w;return((y=h[g])===null||y===void 0?void 0:y.degree)-((w=h[m])===null||w===void 0?void 0:w.degree)});var p=d[0];if(!o.length||((n=h[p])===null||n===void 0?void 0:n.degree)>=r)return"break";var v=o.findIndex(function(g){return g.id===p});o.splice(v,1),l=l.filter(function(g){return!(g.source===p||g.target===p)})};;){var c=u();if(c==="break")break}return{nodes:o,edges:l}},NG=function(e,r,n){var i=[];switch(e){case Wl.EuclideanDistance:i=r[n];break;default:i=[];break}return i},Roe=function(e,r,n,i,a,o){r===void 0&&(r=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Wl.EuclideanDistance);var s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(o===Wl.EuclideanDistance&&!l.every(function(G){return G.hasOwnProperty(n)}))return f;var h=[],d=[];if(o===Wl.EuclideanDistance&&(h=o6(l,n),d=s6(h,i,a)),!d.length)return f;for(var p=e2(d.map(function(G){return G.join("")})),v=Math.min(r,l.length,p.length),g=0;g<l.length;g++)l[g].originIndex=g;for(var m=[],y=[],w=[],g=0;g<v;g++)if(g===0){var b=Math.floor(Math.random()*l.length);switch(o){case Wl.EuclideanDistance:m[g]=d[b];break;default:m[g]=[];break}y.push(b),w[g]=[l[b]],l[b].clusterId=String(g)}else{for(var x=-1/0,S=0,E=function(Z){if(!y.includes(Z)){for(var q=0,pe=0;pe<m.length;pe++){var Se=0;switch(o){case Wl.EuclideanDistance:Se=LG(d[l[Z].originIndex],m[pe],o);break}q+=Se}var Ae=q/m.length;Ae>x&&!m.find(function(He){return md(He,NG(o,d,l[Z].originIndex))})&&(x=Ae,S=Z)}},_=0;_<l.length;_++)E(_);m[g]=NG(o,d,S),y.push(S),w[g]=[l[S]],l[S].clusterId=String(g)}for(var k=0;;){for(var g=0;g<l.length;g++){var C=0,A=1/0;if(!(k===0&&y.includes(g))){for(var M=0;M<m.length;M++){var T=0;switch(o){case Wl.EuclideanDistance:T=LG(d[g],m[M],o);break}T<A&&(A=T,C=M)}if(l[g].clusterId!==void 0)for(var O=w[Number(l[g].clusterId)].length-1;O>=0;O--)w[Number(l[g].clusterId)][O].id===l[g].id&&w[Number(l[g].clusterId)].splice(O,1);l[g].clusterId=String(C),w[C].push(l[g])}}for(var N=!1,g=0;g<w.length;g++){for(var R=w[g],B=new rl([]),M=0;M<R.length;M++)B=B.add(new rl(d[R[M].originIndex]));var F=B.avg(R.length);F.equal(new rl(m[g]))||(N=!0,m[g]=F.getArr())}if(k++,l.every(function(G){return G.clusterId!==void 0})&&N||k>=1e3)break}var D=[],L={};return c.forEach(function(G){var Y,Z,q=G.source,pe=G.target,Se=(Y=l.find(function(st){return st.id===q}))===null||Y===void 0?void 0:Y.clusterId,Ae=(Z=l.find(function(st){return st.id===pe}))===null||Z===void 0?void 0:Z.clusterId,He="".concat(Se,"---").concat(Ae);if(L[He])L[He].count++;else{var ct={source:Se,target:Ae,count:1};L[He]=ct,D.push(ct)}}),{clusters:w,clusterEdges:D}},u6=function(e,r){var n=new rl(r),i=n.norm2(),a=new rl(e),o=a.norm2(),s=n.dot(a),l=i*o,u=l?s/l:0;return u},Noe=function(e,r,n,i,a){e===void 0&&(e=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=Ir(e.filter(function(h){return h.id!==r.id})),s=e.findIndex(function(h){return h.id===r.id}),l=o6(e,n),u=s6(l,i,a),c=u[s],f=[];return o.forEach(function(h,d){if(h.id!==r.id){var p=u[d],v=u6(p,c);f.push(v),h.cosineSimilarity=v}}),o.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:f,similarNodes:o}},J7e=function(){function t(e){this.count=e.length,this.parent={};for(var r=0,n=e;r<n.length;r++){var i=n[r];this.parent[i]=i}}return t.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},t.prototype.union=function(e,r){var n=this.find(e),i=this.find(r);n!==i&&(n<i?(this.parent[r]!==r&&this.union(this.parent[r],e),this.parent[r]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],r),this.parent[e]=this.parent[r]))},t.prototype.connected=function(e,r){return this.find(e)===this.find(r)},t}(),e9e=function(e,r){return e-r},t9e=function(){function t(e){e===void 0&&(e=e9e),this.compareFn=e,this.list=[]}return t.prototype.getLeft=function(e){return 2*e+1},t.prototype.getRight=function(e){return 2*e+2},t.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var e=this.top(),r=this.list.pop();return this.list.length>0&&(this.list[0]=r,this.moveDown(0)),e},t.prototype.insert=function(e){if(e!==null){this.list.push(e);var r=this.list.length-1;return this.moveUp(r),!0}return!1},t.prototype.moveUp=function(e){for(var r=this.getParent(e);e&&e>0&&this.compareFn(this.list[r],this.list[e])>0;){var n=this.list[r];this.list[r]=this.list[e],this.list[e]=n,e=r,r=this.getParent(e)}},t.prototype.moveDown=function(e){var r,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(r=[this.list[n],this.list[e]],this.list[e]=r[0],this.list[n]=r[1],this.moveDown(n))},t}(),r9e=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return r?g.weight-m.weight:0},f=new t9e(c);for(x_(l.id,s).forEach(function(v){f.insert(v)});!f.isEmpty();){var h=f.delMin(),d=h.source,p=h.target;u.has(d)&&u.has(p)||(n.push(h),u.has(d)||(u.add(d),x_(d,s).forEach(function(v){f.insert(v)})),u.has(p)||(u.add(p),x_(p,s).forEach(function(v){f.insert(v)})))}return n},FG=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});r&&l.sort(function(d,p){return d.weight-p.weight});for(var u=new J7e(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},Foe=function(e,r,n){var i={prim:r9e,kruskal:FG};return n?i[n](e,r):FG(e,r)},Boe=function(e,r,n){typeof r!="number"&&(r=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},p={},v=0;v<f;++v){var g=l[v],m=g.id;d[m]=1/f,p[m]=1/f}for(var y=_f(e);o>0&&i>r;){a=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=ps(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=p[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;h=d[m]+a,i+=Math.abs(h-p[m]),p[m]=h}o-=1}return p},n9e=-1,kk=-1,$oe="-1",Zu="-1",zoe=-1,BG=function(){function t(e,r,n,i){e===void 0&&(e=n9e),r===void 0&&(r=kk),n===void 0&&(n=kk),i===void 0&&(i=$oe),this.id=e,this.from=r,this.to=n,this.label=i}return t}(),i9e=function(){function t(e,r){e===void 0&&(e=kk),r===void 0&&(r=Zu),this.id=e,this.label=r,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},t}(),joe=function(){function t(e,r,n){e===void 0&&(e=kk),r===void 0&&(r=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=r,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(e,r){if(!this.nodeMap[e]){var n=new i9e(e,r);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[r]||(this.nodeLabelMap[r]=[]),this.nodeLabelMap[r].push(e)}},t.prototype.addEdge=function(e,r,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[r]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new BG(e,r,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[r].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new BG(e,n,r,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}(),vp=function(){function t(e,r,n,i,a){this.fromNode=e,this.toNode=r,this.nodeEdgeNodeLabel={nodeLabel1:n||Zu,edgeLabel:i||$oe,nodeLabel2:a||Zu}}return t.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t}(),$G=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(e){var r=this.dfsEdgeList.length,n=e.length;if(r!==n)return!1;for(var i=0;i<r;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t.prototype.pushBack=function(e,r,n,i,a){return this.dfsEdgeList.push(new vp(e,r,n,i,a)),this.dfsEdgeList},t.prototype.toGraph=function(e,r){e===void 0&&(e=zoe),r===void 0&&(r=!1);var n=new joe(e,!0,r);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Zu&&n.addNode(a,l),c!==Zu&&n.addNode(o,c),l!==Zu&&c!==l&&n.addEdge(void 0,a,o,u)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,r=this.dfsEdgeList.length,n=r-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},t.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(r){e[r.fromNode]||(e[r.fromNode]=!0),e[r.toNode]||(e[r.toNode]=!0)}),Object.keys(e).length},t}(),NS=function(){function t(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var r=e.edge;this.edges.push(r),this.nodesUsed[r.from]=1,this.nodesUsed[r.to]=1,this.edgesUsed[r.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},t.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},t}(),a9e=function(){function t(e){var r=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,p=d===void 0?!1:d;this.graphs=r,this.dfsCode=new $G,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(e,r){var n=this,i=[],a=e.nodeMap;return r.edges.forEach(function(o){(n.directed||r.label<=a[o.to].label)&&i.push(o)}),i},t.prototype.findBackwardEdge=function(e,r,n,i){if(!this.directed&&r===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==r.from)){if(this.directed){if(a[r.from].label<a[n.to].label||a[r.from].label===a[n.to].label&&r.label<=c.label)return c}else if(r.label<c.label||r.label===c.label&&a[r.to].label<=a[n.to].label)return c}}return null},t.prototype.findForwardPureEdges=function(e,r,n,i){for(var a=[],o=r.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},t.prototype.findForwardRmpathEdges=function(e,r,n,i){for(var a=[],o=e.nodeMap,s=o[r.to].label,l=o[r.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;r.to===h.to||n>d||i.hasNode(o[h.to])||(r.label<h.label||r.label===h.label&&s<=d)&&a.push(h)}return a},t.prototype.getSupport=function(e){var r={};return e.forEach(function(n){r[n.graphId]||(r[n.graphId]=!0)}),Object.keys(r).length},t.prototype.findMinLabel=function(e){var r=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!r){r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<r.nodeLabel1||a===r.nodeLabel1&&o<r.edgeLabel||a===r.nodeLabel1&&o===r.edgeLabel&&s<r.nodeLabel2)&&(r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),r},t.prototype.isMin=function(){var e=this,r=this.dfsCode;if(this.verbose&&console.log("isMin checking",r),r.dfsEdgeList.length===1)return!0;var n=this.directed,i=r.toGraph(zoe,n),a=i.nodeMap,o=new $G,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var p=a[d.to],v="".concat(f.label,"-").concat(d.label,"-").concat(p.label);s[v]||(s[v]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:p.label});var g={graphId:i.id,edge:d,preNode:null};s[v].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new vp(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),p=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(B){if(m)return"break";h.forEach(function(F){var D=new NS(F),L=e.findBackwardEdge(i,D.edges[d[B]],D.edges[d[0]],D);L&&(g[L.label]||(g[L.label]={projected:[],edgeLabel:L.label}),g[L.label].projected.push({graphId:i.id,edge:g,preNode:F}),y=o.dfsEdgeList[d[B]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var E=e.findMinLabel(g);o.dfsEdgeList.push(new vp(v,y,Zu,E.edgeLabel,Zu));var _=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[E.edgeLabel].projected)}var k={};m=!1;var C=0;h.forEach(function(R){var B=new NS(R),F=e.findForwardPureEdges(i,B.edges[d[0]],p,B);F.length>0&&(m=!0,C=v,F.forEach(function(D){var L="".concat(D.label,"-").concat(a[D.to].label);k[L]||(k[L]={projected:[],edgeLabel:D.label,nodeLabel2:a[D.to].label}),k[L].projected.push({graphId:i.id,edge:D,preNode:R})}))});for(var A=d.length,M=function(B){if(m)return"break";var F=d[B];h.forEach(function(D){var L=new NS(D),G=e.findForwardRmpathEdges(i,L.edges[F],p,L);G.length>0&&(m=!0,C=o.dfsEdgeList[F].fromNode,G.forEach(function(Y){var Z="".concat(Y.label,"-").concat(a[Y.to].label);k[Z]||(k[Z]={projected:[],edgeLabel:Y.label,nodeLabel2:a[Y.to].label}),k[Z].projected.push({graphId:i.id,edge:Y,preNode:D})}))})},x=0;x<A;x++){var T=M(x);if(T==="break")break}if(!m)return!0;var O=e.findMinLabel(k);o.dfsEdgeList.push(new vp(C,v+1,Zu,O.edgeLabel,O.nodeLabel2));var N=o.dfsEdgeList.length-1;return r.dfsEdgeList[N]!==o.dfsEdgeList[N]?!1:f(k["".concat(O.edgeLabel,"-").concat(O.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Ir(e))}},t.prototype.subGraphMining=function(e){var r=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=r.graphs[c.graphId],h=f.nodeMap,d=new NS(c),p=a.length-1;p>=0;p--){var v=r.findBackwardEdge(f,d.edges[a[p]],d.edges[a[0]],d);if(v){var g="".concat(r.dfsCode.dfsEdgeList[a[p]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:r.dfsCode.dfsEdgeList[a[p]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:c.graphId,edge:v,preNode:c})}}if(!(i>=r.maxNodeNum)){var m=r.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=r.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var E="".concat(r.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[E]||(l[E]={projected:[],fromNodeId:r.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[E].projected.push({graphId:c.graphId,edge:S,preNode:c})})},p=0;p<a.length;p++)y(p)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;r.dfsCode.dfsEdgeList.push(new vp(o,h,"-1",d,"-1")),r.subGraphMining(u[c].projected),r.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,p=f.nodeLabel2;r.dfsCode.dfsEdgeList.push(new vp(h,o+1,Zu,d,p)),r.subGraphMining(l[c].projected),r.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,r=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,p="".concat(l,"-").concat(d);if(!s[p]){var v=a[d]||0;v++,a[d]=v}s[p]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!r&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},t.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var r=this.graphs;this.directed;var n={};Object.keys(r).forEach(function(i){var a=r[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new vp(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},t}(),o9e=function(e,r,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new joe(s,!0,r),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],p=c[f.target];u.addEdge(-1,d,p,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},s9e=function(e,r,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[r]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},zG="cluster",l9e=function(e){var r=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?zG:a,s=e.edgeLabelProp,l=s===void 0?zG:s,u=o9e(r,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,p=e.top,v={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:p,verbose:d,directed:i},g=new a9e(v);g.run();var m=s9e(g.frequentSubgraphs,o,l);return m},jG=function(e,r,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return r.forEach(function(s,l){a.push(Goe(o,s,l,n,i))}),a},Goe=function(e,r,n,i,a){var o=[n],s=[],l={};return r.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},u9e=function(e,r,n,i,a){var o=Math.ceil(n/r),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,p=u.neighborNum-1;f<o;){for(var v=d[1+Math.floor(Math.random()*p)],g=0;(s["".concat(c,"-").concat(v)]||s["".concat(v,"-").concat(c)])&&(v=Math.floor(Math.random()*r),g++,!(g>2*r)););if(g<2*r&&(s["".concat(c,"-").concat(v)]={start:c,end:v,distance:a[c][v]},f++,l++,l>=n))return s;if(h++,h>2*r)break}if(f<o){var m=o-f;o=(o+m)/(r-c-1)}}),s},S_=function(e,r,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=r[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=r[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var p={},v=d.length,g=0;g<v;g++){var m=a[d[g]];i[o].nodes.push(m),p[m.id]=!0}n.edges.forEach(function(y){p[y.source]&&p[y.target]&&i[o].edges.push(y)})}}}}),i},E_=function(e,r,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=r==null?void 0:r.edges)===null||a===void 0)&&a.length)||((o=r==null?void 0:r.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=r==null?void 0:r.nodes[0][n],d=r==null?void 0:r.nodes[1][n],p=r==null?void 0:r.edges[0][i];u[i]===p&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},c9e=function(e,r,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var p=0,v=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,v.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,E){var _=c[S];y.graphs.forEach(function(k,C){E!==C&&(b+=Math.abs(_-c[k]))})}),b/=x*(x-1)/2,p+=b}),p/=d.length;var g=0;v.forEach(function(y,w){v.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=v.length*(v.length-1)/2});var m=g-p;i<m&&(i=m,a=u)},s=0;s<r;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},GG=function(e,r){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[r];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},UG=function(e,r,n){var i={},a={};return e.forEach(function(o,s){i["".concat(Soe)]={idx:s,edge:o};var l=o[r];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},WG=function(e,r,n){var i=r.length,a={};return r.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},f9e=function(e,r,n,i,a,o,s,l,u,c,f){var h,d="".concat(r.id,"-").concat(n.id);if(c&&c[d])return c[d];var p=f?f[d]:void 0;if(!p){var v=(h={},h[d]={start:i[r.id].idx,end:i[n.id].idx,distance:a},h);f=S_(v,o,e,f),p=f[d]}return E_(p,s,l,u)},VG=function(e,r,n,i){var a,o,s,l=(a=e[r])===null||a===void 0?void 0:a.degree,u=(o=e[r])===null||o===void 0?void 0:o.inDegree,c=(s=e[r])===null||s===void 0?void 0:s.outDegree;return e[r]===void 0&&(l=1/0,u=1/0,c=1/0,i[r].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var p=n[f.id].outDegree;c>p&&(c=p)}),e[r]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},Uoe=function(e,r,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=n2(e,n),f=n2(r,n),h=WG(e.nodes,c,n),d=WG(r.nodes,f,n),p=GG(e.nodes,o),v=p.nodeMap,g=p.nodeLabelMap,m=GG(r.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;UG(e.edges,s,v);var b=UG(r.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(Ze){x=x.concat(Ze)}),a||(a=Math.max.apply(Math,zo(zo([],x,!1),[2],!1))),i||(i=a);var S=jG(e,c,o,i),E=jG(r,f,o,i),_=Math.min(100,u*(u-1)/2),k=u9e(i,u,_,S,c),C=S_(k,S,e),A=10,M=1,T=1,O=4,N={graphs:C,nodeLabelProp:o,edgeLabelProp:s,minSupport:M,minNodeNum:T,maxNodeNum:O,directed:n},R=l9e(N).slice(0,A),B=R.length,F=[];R.forEach(function(Ze,oe){F[oe]={},Object.keys(C).forEach(function(P){var _e=C[P],Pe=E_(_e,Ze,o,s);F[oe][P]=Pe})});var D=c9e(F,B,R),L=D.structure,G=D.structureCountMap,Y=r.nodes[0],Z=[],q=(l=r.nodes[0])===null||l===void 0?void 0:l[o],pe=-1/0;r.nodes.forEach(function(Ze){var oe=Ze[o],P=g[oe];(P==null?void 0:P.length)>pe&&(pe=P.length,Z=P,q=oe,Y=Ze)});var Se={},Ae={},He={},ct={},st={},Mt={};Object.keys(w).forEach(function(Ze,oe){st[Ze]=[],n&&(Mt[Ze]=[]);var P=w[Ze],_e={};P.forEach(function(Xe){var et=d["".concat(Y.id,"-").concat(Xe.id)];if(et&&st[Ze].push(et),_e["".concat(Y.id,"-").concat(Xe.id)]={start:0,end:y[Xe.id].idx,distance:et},n){var Ot=d["".concat(Xe.id,"-").concat(Y.id)];Ot&&Mt[Ze].push(Ot)}}),st[Ze]=st[Ze].sort(function(Xe,et){return Xe-et}),n&&(Mt[Ze]=Mt[Ze].sort(function(Xe,et){return Xe-et})),Ae=S_(_e,E,r,Ae);var Pe=[];if(Object.keys(_e).forEach(function(Xe){if(He[Xe]){Pe.push(He[Xe]);return}var et=Ae[Xe];He[Xe]=E_(et,L,o,s),Pe.push(He[Xe])}),Pe=Pe.sort(function(Xe,et){return et-Xe}),ct["".concat(Y.id,"-").concat(Ze)]=Pe,Ze!==q)for(var ye=(Z==null?void 0:Z.length)||0,Fe=function(et){var Ot=Z[et],nr=S[v[Ot.id].idx],Kt=nr.nodeLabelCountMap[Ze],At=w[Ze].length;if(!Kt||Kt.count<At)return Z.splice(et,1),"continue";for(var rr=!1,Qt=0;Qt<At;Qt++)if(Kt.dists[Qt]>st[Ze][Qt]){rr=!0;break}if(rr)return Z.splice(et,1),"continue";var hr={};nr.neighbors.forEach(function(Tr){var pn=h["".concat(Ot.id,"-").concat(Tr.id)];hr["".concat(Ot.id,"-").concat(Tr.id)]={start:v[Ot.id].idx,end:v[Tr.id].idx,distance:pn}}),C=S_(hr,S,e,C);var Xr=[];Object.keys(hr).forEach(function(Tr){if(G[Tr]){Xr.push(G[Tr]);return}var pn=C[Tr];G[Tr]=E_(pn,L,o,s),Xr.push(G[Tr])}),Xr=Xr.sort(function(Tr,pn){return pn-Tr});for(var Zn=!1,Qt=0;Qt<At;Qt++)if(Xr[Qt]<Pe[Qt]){Zn=!0;break}if(Zn)return Z.splice(et,1),"continue"},Be=ye-1;Be>=0;Be--)Fe(Be)});var yt=[];Z==null||Z.forEach(function(Ze){for(var oe=v[Ze.id].idx,P=Goe(e.nodes,c[oe],oe,o,a),_e=P.neighbors,Pe=_e.length,ye=!1,Fe=Pe-1;Fe>=0;Fe--){if(_e.length+1<r.nodes.length){ye=!0;return}var Be=_e[Fe],Xe=Be[o];if(!w[Xe]||!w[Xe].length){_e.splice(Fe,1);continue}if(!st[Xe]||!st[Xe].length){_e.splice(Fe,1);continue}var et="".concat(Ze.id,"-").concat(Be.id),Ot=h[et],nr=st[Xe].length-1,Kt=st[Xe][nr];if(Ot>Kt){_e.splice(Fe,1);continue}if(n){var At="".concat(Be.id,"-").concat(Ze.id),rr=h[At];nr=Mt[Xe].length-1;var Qt=Mt[Xe][nr];if(rr>Qt){_e.splice(Fe,1);continue}}var hr=G[et]?G[et]:f9e(e,Ze,Be,v,Ot,S,L,o,s,G,C),Xr="".concat(Y.id,"-").concat(Xe),Zn=ct[Xr][ct[Xr].length-1];if(hr<Zn){_e.splice(Fe,1);continue}var Tr=VG(Se,Xe,y,w),pn=Tr.minPatternNodeLabelDegree;if(Tr.minPatternNodeLabelInDegree,Tr.minPatternNodeLabelOutDegree,v[Be.id].degree<pn){_e.splice(Fe,1);continue}}ye||yt.push({nodes:[Ze].concat(_e)})});var ar=r2(r,Y.id,!1).length,Jt={};n?(Object.keys(ar).forEach(function(Ze){var oe=y[Ze].node[o];Jt[oe]?Jt[oe].push(ar[Ze]):Jt[oe]=[ar[Ze]]}),Object.keys(Jt).forEach(function(Ze){Jt[Ze].sort(function(oe,P){return oe-P})})):Jt=st;for(var er=yt.length,yr=function(oe){var P=yt[oe],_e=P.nodes[0],Pe={},ye={};P.nodes.forEach(function(Vt,kr){ye[Vt.id]={idx:kr,node:Vt,degree:0,inDegree:0,outDegree:0};var _t=Vt[o];Pe[_t]?Pe[_t]++:Pe[_t]=1});var Fe=[],Be={};e.edges.forEach(function(Vt){ye[Vt.source]&&ye[Vt.target]&&(Fe.push(Vt),Be[Vt[s]]?Be[Vt[s]]++:Be[Vt[s]]=1,ye[Vt.source].degree++,ye[Vt.target].degree++,ye[Vt.source].outDegree++,ye[Vt.target].inDegree++)});for(var Xe=Object.keys(b).length,et=!1,Ot=0;Ot<Xe;Ot++){var nr=Object.keys(b)[Ot];if(!Be[nr]||Be[nr]<b[nr].length){et=!0;break}}if(et)return yt.splice(oe,1),"continue";var Kt=Fe.length;if(Kt<r.edges.length)return yt.splice(oe,1),"break";for(var At=!1,rr=function(kr){var _t=Fe[kr],Yr=_t[s],an=b[Yr];if(!an||!an.length)return Be[Yr]--,an&&Be[Yr]<an.length?(At=!0,"break"):(Fe.splice(kr,1),ye[_t.source].degree--,ye[_t.target].degree--,ye[_t.source].outDegree--,ye[_t.target].inDegree--,"continue");var Ei=ye[_t.source].node[o],_i=ye[_t.target].node[o],Jn=!1;if(an.forEach(function(ui){var Ci=y[ui.source].node,ki=y[ui.target].node;Ci[o]===Ei&&ki[o]===_i&&(Jn=!0),!n&&Ci[o]===_i&&ki[o]===Ei&&(Jn=!0)}),!Jn)return Be[Yr]--,an&&Be[Yr]<an.length?(At=!0,"break"):(Fe.splice(kr,1),ye[_t.source].degree--,ye[_t.target].degree--,ye[_t.source].outDegree--,ye[_t.target].inDegree--,"continue")},Ot=Kt-1;Ot>=0;Ot--){var Qt=rr(Ot);if(Qt==="break")break}if(At)return yt.splice(oe,1),"continue";P.edges=Fe;var hr=r2(P,P.nodes[0].id,!1).length;if(Object.keys(hr).reverse().forEach(function(Vt){if(!(Vt===P.nodes[0].id||At)){if(hr[Vt]===1/0){var kr=ye[Vt].node[o];if(Pe[kr]--,Pe[kr]<w[kr].length){At=!0;return}var _t=P.nodes.indexOf(ye[Vt].node);P.nodes.splice(_t,1),ye[Vt]=void 0;return}var Yr=v[Vt].node[o];if(!Jt[Yr]||!Jt[Yr].length||hr[Vt]>Jt[Yr][Jt[Yr].length-1]){var kr=ye[Vt].node[o];if(Pe[kr]--,Pe[kr]<w[kr].length){At=!0;return}var _t=P.nodes.indexOf(ye[Vt].node);P.nodes.splice(_t,1),ye[Vt]=void 0}}}),At)return yt.splice(oe,1),"continue";for(var Xr=!0,Zn=0;Xr&&!At;){Xr=!1;var Tr=n?ye[_e.id].degree<y[Y.id].degree||ye[_e.id].inDegree<y[Y.id].inDegree||ye[_e.id].outDegree<y[Y.id].outDegree:ye[_e.id].degree<y[Y.id].degree;if(Tr){At=!0;break}if(Pe[_e[o]]<w[_e[o]].length){At=!0;break}for(var pn=P.nodes.length,li=pn-1;li>=0;li--){var vn=P.nodes[li],Xo=ye[vn.id].degree,ha=ye[vn.id].inDegree,Ps=ye[vn.id].outDegree,Sn=vn[o],da=VG(Se,Sn,y,w),Qi=da.minPatternNodeLabelDegree,Nn=da.minPatternNodeLabelInDegree,Ls=da.minPatternNodeLabelOutDegree,Rs=n?Xo<Qi||ha<Nn||Ps<Ls:Xo<Qi;if(Rs){if(Pe[vn[o]]--,Pe[vn[o]]<w[vn[o]].length){At=!0;break}P.nodes.splice(li,1),ye[vn.id]=void 0,Xr=!0}}if(At||!Xr&&Zn!==0)break;Kt=Fe.length;for(var Si=Kt-1;Si>=0;Si--){var rn=Fe[Si];if(!ye[rn.source]||!ye[rn.target]){Fe.splice(Si,1);var nn=rn[s];if(Be[nn]--,ye[rn.source]&&(ye[rn.source].degree--,ye[rn.source].outDegree--),ye[rn.target]&&(ye[rn.target].degree--,ye[rn.target].inDegree--),b[nn]&&Be[nn]<b[nn].length){At=!0;break}Xr=!0}}Zn++}if(At||At||P.nodes.length<r.nodes.length||Fe.length<r.edges.length)return yt.splice(oe,1),"continue"},or=er-1;or>=0;or--){var zt=yr(or);if(zt==="break")break}for(var tr=yt.length,Dr=function(oe){var P=yt[oe],_e={};P.edges.forEach(function(Fe){var Be="".concat(Fe.source,"-").concat(Fe.target,"-").concat(Fe.label);_e[Be]?_e[Be]++:_e[Be]=1});for(var Pe=function(Be){var Xe=yt[Be],et={};Xe.edges.forEach(function(nr){var Kt="".concat(nr.source,"-").concat(nr.target,"-").concat(nr.label);et[Kt]?et[Kt]++:et[Kt]=1});var Ot=!0;Object.keys(et).length!==Object.keys(_e).length?Ot=!1:Object.keys(_e).forEach(function(nr){et[nr]!==_e[nr]&&(Ot=!1)}),Ot&&yt.splice(Be,1)},ye=tr-1;ye>oe;ye--)Pe(ye);tr=yt.length},or=0;or<=tr-1;or++)Dr(or);return yt}}},f0=function(){function t(e){e===void 0&&(e=10),this.linkedList=new xoe,this.maxStep=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),Woe=n6;const h9e={getAdjMatrix:mv,breadthFirstSearch:Eoe,connectedComponent:t6,getDegree:_f,getInDegree:Coe,getOutDegree:koe,detectCycle:n6,detectDirectedCycle:Woe,detectAllCycles:Aoe,detectAllDirectedCycle:a6,detectAllUndirectedCycle:i6,depthFirstSearch:r6,dijkstra:r2,findAllPath:Ooe,findShortestPath:Ioe,floydWarshall:n2,labelPropagation:Doe,louvain:l6,iLouvain:Poe,kCore:Loe,kMeans:Roe,cosineSimilarity:u6,nodesCosineSimilarity:Noe,minimumSpanningTree:Foe,pageRank:Boe,getNeighbors:ps,Stack:f0,GADDI:Uoe},d9e=Object.freeze(Object.defineProperty({__proto__:null,GADDI:Uoe,Stack:f0,breadthFirstSearch:Eoe,connectedComponent:t6,cosineSimilarity:u6,default:h9e,depthFirstSearch:r6,detectAllCycles:Aoe,detectAllDirectedCycle:a6,detectAllUndirectedCycle:i6,detectCycle:n6,detectDirectedCycle:Woe,dijkstra:r2,findAllPath:Ooe,findShortestPath:Ioe,floydWarshall:n2,getAdjMatrix:mv,getDegree:_f,getInDegree:Coe,getNeighbors:ps,getOutDegree:koe,iLouvain:Poe,kCore:Loe,kMeans:Roe,labelPropagation:Doe,louvain:l6,minimumSpanningTree:Foe,nodesCosineSimilarity:Noe,pageRank:Boe},Symbol.toStringTag,{value:"Module"}));var Mk=yl,p9e=function(e){return function(r,n){return r[e]-n[e]}},HG=function(e,r,n){return e>=r&&e<=n},zA=function(e,r,n,i){var a=1e-4,o={x:n.x-e.x,y:n.y-e.y},s={x:r.x-e.x,y:r.y-e.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,h=s.x*s.x+s.y*s.y,d=l.x*l.x+l.y*l.y;if(c>a*h*d){var p=(o.x*l.y-o.y*l.x)*f,v=(o.x*s.y-o.y*s.x)*f;return!HG(p,0,1)||!HG(v,0,1)?null:{x:e.x+p*s.x,y:e.y+p*s.y}}return null},Voe=function(e,r){var n=e.x,i=e.y,a=e.width,o=e.height,s=n+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var f=null,h=1;h<u.length&&(f=zA(u[h-1],u[h],c,r),!f);h++);return f},Hoe=function(e,r){var n=e.x,i=e.y,a=e.r,o=r.x,s=r.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var c=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(c))*Math.sign(l),y:i+Math.abs(a*Math.sin(c))*Math.sign(u)}},Xoe=function(e,r){var n=e.rx,i=e.ry,a=e.x,o=e.y,s=r.x-a,l=r.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},O0=function(e,r,n){n===void 0&&(n=1);var i=[e.x,e.y,n];return(!r||isNaN(r[0]))&&(r=[1,0,0,0,1,0,0,0,1]),BA(i,i,r),{x:i[0],y:i[1]}},Yoe=function(e,r,n){n===void 0&&(n=1),(!r||isNaN(r[0]))&&(r=[1,0,0,0,1,0,0,0,1]);var i=z8([1,0,0,0,1,0,0,0,1],r);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,n];return BA(a,a,i),{x:a[0],y:a[1]}},rR=function(e,r,n){var i=e.x-r.x,a=e.y-r.y,o=e.x-n.x,s=e.y-n.y,l=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,u=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},Ak=function(e,r){var n=e.x-r.x,i=e.y-r.y;return Math.sqrt(n*n+i*i)},v9e=function(e,r){var n=[];return e.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*r)}),n.push(a)}),n},g9e=function(e){for(var r=[],n=e.length,i=0;i<n;i+=1){r[i]=[];for(var a=0;a<n;a+=1)i===a?r[i][a]=0:e[i][a]===0||!e[i][a]?r[i][a]=1/0:r[i][a]=e[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)r[i][a]>r[i][o]+r[o][a]&&(r[i][a]=r[i][o]+r[o][a]);return r},m9e=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,r||(a[f][c]=1)}),a},qoe=function(e,r){e.translate(r.x,r.y)},nR=function(e,r,n,i){i===void 0&&(i={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=r.x-o.minX,l=r.y-o.minY;if(n){var u=s*a[0],c=l*a[4],f=0,h=0,d=0,p=0;e.animate(function(g){return d=u*g,p=c*g,a=Mk(a,[["t",d-f,p-h]]),f=d,h=p,{matrix:a}},i)}else{var v=Mk(a,[["t",s,l]]);e.setMatrix(v)}},y9e=function(e,r){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=r;Ft(r)||(i=[r,r]),Ft(r)&&r.length===1&&(i=[r[0],r[0]]),n=Mk(n,[["s",i[0],i[1]]]),e.setMatrix(n)},w9e=function(e,r){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Mk(n,[["r",r]]),e.setMatrix(n)},b9e=function(e,r,n){for(var i=[],a=0;a<e;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[r[o.source]]+=1),o.target&&(i[r[o.target]]+=1)}),i};function x9e(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}var i2=function(e,r,n){var i=!1,a=e.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=e[l],c=e[(l+1)%a];if(x9e(u,c,[r,n]))return!0;s(u[1]-n)>0!=s(c[1]-n)>0&&s(r-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},Koe=function(e,r){return!(r.minX>e.maxX||r.maxX<e.minX||r.minY>e.maxY||r.maxY<e.minY)},S9e=function(e,r){var n=!1;return Ce(e,function(i){if(zA(i.from,i.to,r.from,r.to))return n=!0,!1}),n},Qoe=function(e,r){var n=function(h){var d=h.map(function(v){return v[0]}),p=h.map(function(v){return v[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,p),maxY:Math.max.apply(null,p)}},i=function(h){for(var d=[],p=h.length,v=0;v<p-1;v++){var g=h[v],m=h[v+1];d.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(d.length>1){var y=h[0],w=h[p-1];d.push({from:{x:w[0],y:w[1]},to:{x:y[0],y:y[1]}})}return d};if(e.length<2||r.length<2)return!1;var a=n(e),o=n(r);if(!Koe(a,o))return!1;var s=!1;if(Ce(r,function(f){if(i2(e,f[0],f[1]))return s=!0,!1}),s||(Ce(e,function(f){if(i2(r,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(e),u=i(r),c=!1;return Ce(u,function(f){if(S9e(l,f))return c=!0,!1}),c},yv=function(){function t(e,r,n,i){this.x1=e,this.y1=r,this.x2=n,this.y2=i}return t.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),r=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:e,y:r,minX:e,minY:r,maxX:n,maxY:i,width:n-e,height:i-r};return a},t}(),c6=function(e,r){var n={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return n[r]},E9e=function(e,r){var n=(r.x2-r.x1)*(e.y1-r.y1)-(r.y2-r.y1)*(e.x1-r.x1),i=(e.x2-e.x1)*(e.y1-r.y1)-(e.y2-e.y1)*(e.x1-r.x1),a=(r.y2-r.y1)*(e.x2-e.x1)-(r.x2-r.x1)*(e.y2-e.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Zoe=function(e,r){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=0,o=[],s=0;s<4;s++){var l=c6(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3];o[s]=zA({x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:u,y:c},{x:f,y:h}),o[s]&&(a+=1)}return[o,a]},f6=function(e,r){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=c6(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3],d=E9e(r,new yv(u,c,f,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,a=d<a?d:a)}return o===0?-1:a},Joe=function(e){var r=0,n=0;if(e.length>0){for(var i=0,a=e;i<a.length;i++){var o=a[i];r+=o.x,n+=o.y}r/=e.length,n/=e.length}return{x:r,y:n}},Tk=function(e,r){return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)},ese=function(e,r){var n=r.x1,i=r.y1,a=r.x2-n,o=r.y2-i,s=e.x-n,l=e.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},iR=function(e,r,n){return n===void 0&&(n=.001),Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)<Math.pow(n,2)},tse=function(e,r){var n=e.x<r.x,i=e.x>r.x+r.width,a=e.y>r.y+r.height,o=e.y<r.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(r.y+r.height-e.y,2);if(o&&!n&&!i)return Math.pow(e.y-r.y,2);if(n&&!a&&!o)return Math.pow(r.x-e.x,2);if(i&&!a&&!o)return Math.pow(r.x+r.width-e.x,2);var l=Math.min(Math.abs(r.x-e.x),Math.abs(r.x+r.width-e.x)),u=Math.min(Math.abs(r.y-e.y),Math.abs(r.y+r.height-e.y));return l*l+u*u},_9e=function(e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r.x,l=r.y,u=[a-n,o-i];if(e6(u,[0,0]))return NaN;var c=[-u[1],u[0]];rd(c,c);var f=[s-n,l-i];return Math.abs(J8(f,c))},h6=function(e,r,n){return e+(r-e)*n},aR=function(e,r,n){for(var i=Math.min(e.length,r.length),a=new Array(i),o=0;o<i;o++)a[o]=h6(e[o],r[o],n);return a};const C9e=Object.freeze(Object.defineProperty({__proto__:null,Line:yv,applyMatrix:O0,compare:p9e,distance:Ak,floydWarshall:g9e,fractionToLine:f6,getAdjMatrix:m9e,getBBoxBoundLine:c6,getCircleCenterByPoints:rR,getCircleIntersectByPoint:Hoe,getDegree:b9e,getEllipseIntersectByPoint:Xoe,getLineIntersect:zA,getPointsCenter:Joe,getRectIntersectByPoint:Voe,intersectBBox:Koe,invertMatrix:Yoe,isPointInPolygon:i2,isPointsOverlap:iR,isPolygonsIntersect:Qoe,itemIntersectByLine:Zoe,lerp:h6,lerpArray:aR,move:nR,pointLineDistance:_9e,pointLineSquareDist:ese,pointRectSquareDist:tse,rotate:w9e,scale:y9e,scaleMatrix:v9e,squareDist:Tk,translate:qoe},Symbol.toStringTag,{value:"Module"}));var rh="rgb(95, 149, 255)",k9e="rgb(255, 255, 255)",XG="rgb(0, 0, 0)",XO="rgb(247, 250, 255)",rse="rgb(239, 244, 255)",FS="rgb(253, 253, 253)",YG="rgb(250, 250, 250)",BS="rgb(224, 224, 224)",qG="rgb(234, 234, 234)",M9e="rgb(245, 245, 245)",A9e="rgb(191, 213, 255)",KG="#4572d9",T9e="rgb(223, 234, 255)",Ur={mainStroke:rh,mainFill:rse,activeStroke:rh,activeFill:XO,inactiveStroke:A9e,inactiveFill:XO,selectedStroke:rh,selectedFill:k9e,highlightStroke:KG,highlightFill:T9e,disableStroke:BS,disableFill:YG,edgeMainStroke:BS,edgeActiveStroke:rh,edgeInactiveStroke:qG,edgeSelectedStroke:rh,edgeHighlightStroke:rh,edgeDisableStroke:M9e,comboMainStroke:BS,comboMainFill:FS,comboActiveStroke:rh,comboActiveFill:XO,comboInactiveStroke:BS,comboInactiveFill:FS,comboSelectedStroke:rh,comboSelectedFill:FS,comboHighlightStroke:KG,comboHighlightFill:FS,comboDisableStroke:qG,comboDisableFill:YG};const It={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ur.mainStroke,fill:rse},size:20,color:Ur.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ur.activeFill,stroke:Ur.activeStroke}},nodeStateStyles:{active:{fill:Ur.activeFill,stroke:Ur.activeStroke,lineWidth:2,shadowColor:Ur.mainStroke,shadowBlur:10},selected:{fill:Ur.selectedFill,stroke:Ur.selectedStroke,lineWidth:4,shadowColor:Ur.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ur.highlightFill,stroke:Ur.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ur.inactiveFill,stroke:Ur.inactiveStroke,lineWidth:1},disable:{fill:Ur.disableFill,stroke:Ur.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:XG,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ur.edgeMainStroke,lineAppendWidth:2},color:Ur.edgeMainStroke},edgeStateStyles:{active:{stroke:Ur.edgeActiveStroke,lineWidth:1},selected:{stroke:Ur.edgeSelectedStroke,lineWidth:2,shadowColor:Ur.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ur.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ur.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ur.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:XG,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ur.comboMainFill,lineWidth:1,stroke:Ur.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ur.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ur.comboActiveStroke,lineWidth:1,fill:Ur.comboActiveFill},selected:{stroke:Ur.comboSelectedStroke,lineWidth:2,fill:Ur.comboSelectedFill,shadowColor:Ur.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ur.comboHighlightStroke,lineWidth:2,fill:Ur.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ur.comboInactiveStroke,fill:Ur.comboInactiveFill,lineWidth:1},disable:{stroke:Ur.comboDisableStroke,fill:Ur.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},I9e={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Lu=Math.PI,oR=Math.sin,sR=Math.cos,ta=oR(Lu/8),ra=sR(Lu/8),Ik=function(e,r){var n=e.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(r){var o=r.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=O0(i,o),a=O0(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},nse=function(e){var r=e.sourceNode||e.targetNode,n=r.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=r.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||It.defaultLoopPosition,c=[(o.minX+o.maxX)/2+i[6],(o.minY+o.maxY)/2+i[7]],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=o.height/2,p=o.width/2,v=d,g=d,m=v*ta,y=v*ra,w=g*ta,b=g*ra,x=a.get("type"),S=Math.min(d/2,p/2),E=Math.min(d,p),_=s!=null&&s.pointPadding?Math.min(E,s==null?void 0:s.pointPadding):S;if(f[0]===h[0]&&f[1]===h[1]){switch(u){case"top":x==="circle"?(f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]):(f=[c[0]-_,c[1]-d],h=[c[0]+_,c[1]-d]);break;case"top-right":v=d,g=p,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]+m,c[1]-y],h=[c[0]+b,c[1]-w]):(f=[c[0]+p-_,c[1]-d],h=[c[0]+p,c[1]-d+_]);break;case"right":v=p,g=p,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]+y,c[1]-m],h=[c[0]+b,c[1]+w]):(f=[c[0]+p,c[1]-_],h=[c[0]+p,c[1]+_]);break;case"bottom-right":v=p,g=d,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]+y,c[1]+m],h=[c[0]+w,c[1]+b]):(f=[c[0]+p,c[1]+d-_],h=[c[0]+p-_,c[1]+d]);break;case"bottom":v=d,g=d,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]+m,c[1]+y],h=[c[0]-w,c[1]+b]):(f=[c[0]-_,c[1]+d],h=[c[0]+_,c[1]+d]);break;case"bottom-left":v=d,g=p,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]-m,c[1]+y],h=[c[0]-b,c[1]+w]):(f=[c[0]-p,c[1]+d-_],h=[c[0]-p+_,c[1]+d]);break;case"left":v=p,g=p,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]-y,c[1]+m],h=[c[0]-b,c[1]-w]):(f=[c[0]-p,c[1]-_],h=[c[0]-p,c[1]+_]);break;case"top-left":v=p,g=d,x==="circle"?(m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]-y,c[1]-m],h=[c[0]-w,c[1]-b]):(f=[c[0]-p+_,c[1]-d],h=[c[0]-p,c[1]-d+_]);break;default:v=p,g=p,m=v*ta,y=v*ra,w=g*ta,b=g*ra,f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]}if(s.clockwise===!1){var k=[f[0],f[1]];f=[h[0],h[1]],h=[k[0],k[1]]}}var C=[f[0]-c[0],f[1]-c[1]],A=(v+l)/v,M=(g+l)/g;s.clockwise===!1&&(A=(g+l)/g,M=(v+l)/v);var T=Va([0,0],C,A),O=[c[0]+T[0],c[1]+T[1]],N=[h[0]-c[0],h[1]-c[1]],R=Va([0,0],N,M),B=[c[0]+R[0],c[1]+R[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:O[0],y:O[1]},{x:B[0],y:B[1]}],e},ise=function(e,r,n,i,a){var o=1e-4,s=[],l=e==null?void 0:e.getPoint(r);if(!l)return{x:0,y:0,angle:0};if(r<o)s=e.getStartTangent().reverse();else if(r>1-o)s=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(r+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Lu*2),n&&(l.x+=sR(c)*n,l.y+=oR(c)*n),i){var f=c-Lu/2;c>1/2*Lu&&c<3*1/2*Lu&&(f-=Lu),l.x+=sR(f)*i,l.y+=oR(f)*i}var h={x:l.x,y:l.y,angle:c};return a?(c>.5*Lu&&c<1.5*Lu&&(c-=Lu),z({rotate:c},h)):h},O9e=function t(e,r,n,i){if(i(e,r,n)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!t(e.children[a],e,a,i))return!1}return!0},D9e=function t(e,r,n,i){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!t(e.children[a],e,a,i))return}return i(e,r,n)!==!1},Ua=function(e,r){typeof r=="function"&&O9e(e,null,-1,r)},Ru=function(e,r){typeof r=="function"&&D9e(e,null,-1,r)},ase=function(e,r){return r*(I9e[e]||1)},ose=function(e,r){var n=0,i=new RegExp("[-]+");return e.split("").forEach(function(a){i.test(a)?n+=r:n+=ase(a,r)}),[n,r]},sse=function(e,r){return typeof r!="number"||r<=0||r>=e.length?e:e.substring(0,r)+"..."},lR=function(e,r){var n=[],i={},a={};e.forEach(function(l){a[l.id]=l}),e.forEach(function(l,u){var c=Ir(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){n.push(f);return}var h=i[f.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:f.parentId,children:[f]};i[f.parentId]=d,i[c.id]=c}return}if(Ve(l.parentId)){var p=i[l.parentId];if(p)p.children?p.children.push(c):p.children=[c],i[c.id]=c;else{var v={id:l.parentId,children:[c]};i[v.id]=v,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(r||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return n.forEach(function(l){l.depth=s+10,Ua(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),n},uR=function(e,r,n){var i,a=e,o,s={root:{children:e}},l=!1,u="root";(e||[]).forEach(function(p){if(!l){if(p.id===r){o=p,p.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0;return}Ua(p,function(v){var g;return s[v.id]={children:(v==null?void 0:v.children)||[]},a=(g=s[v.parentId||v.comboId||"root"])===null||g===void 0?void 0:g.children,v&&(v.removed||r===v.id)&&a?(u=v.parentId||v.comboId||"root",o=v,v.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0,!1):!0})}}),a=(i=s[u])===null||i===void 0?void 0:i.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),l||(o={id:r,itemType:"node",comboId:n},s[r]={children:void 0}),r){var f=!1;if(n){var h=0;(e||[]).forEach(function(p){f||Ua(p,function(v){return n===v.id?(f=!0,v.children?v.children.push(o):v.children=[o],h=v.depth,o.itemType==="node"?o.depth=h+2:o.depth=h+1,!1):!0})})}else(!n||!f)&&o.itemType!=="node"&&e.push(o);var d=o.depth;Ua(o,function(p){return p.itemType==="node"?d+=2:d+=1,p.depth=d,!0})}return e},__=function(e,r,n){var i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=n==null?void 0:n.getModel(),o=a||{},s=o.x,l=o.y,u=o.fixSize,c=o.collapsed,f=o.fixCollapseSize,h=c?f:u,d=Ft(h)?h:[h,h],p=d[0],v=d[1],g=[p/2,v/2];return{minX:s-g[0],minY:l-g[1],maxX:s+g[0],maxY:l+g[1],x:s,y:l,width:p,height:v}}return e.forEach(function(m){var y=r.findById(m.id);if(!(!y||!y.isVisible())){y.set("bboxCanvasCache",void 0);var w=y.getCanvasBBox();w.x&&i.minX>w.minX&&(i.minX=w.minX),w.y&&i.minY>w.minY&&(i.minY=w.minY),w.x&&i.maxX<w.maxX&&(i.maxX=w.maxX),w.y&&i.maxY<w.maxY&&(i.maxY=w.maxY)}}),i.x=(i.minX+i.maxX)/2,i.y=(i.minY+i.maxY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,(n==null?void 0:n.getKeyShape().get("type"))==="circle"&&(i.width=Math.hypot(i.height,i.width),i.height=i.width),Object.keys(i).forEach(function(m){(i[m]===1/0||i[m]===-1/0)&&(i[m]=void 0)}),i},P9e=function(e){var r=Pt(e.x)||Pt(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(r=r||Pt(e.style.r)||Pt(e.style.width)||Pt(e.style.height)||Pt(e.style.rx)||Pt(e.style.ry)),r},C_=function(e){var r={};return Object.keys(e).forEach(function(n){var i=e[n];if(!(n==="img"&&!Ve(i)))if(ua(i)&&!Ft(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!Ve(s)||(a[o]=Ir(s))}),r[n]=a}else r[n]=Ir(i)}),r},a2=function(e){var r=e.animateCfg,n=e.callback,i;if(!r)i={duration:500,callback:n};else if(i=Ir(r),r.callback){var a=r.callback;i.callback=function(){n(),a()}}else i.callback=n;return i};const L9e=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:C_,getAnimateCfgWithCallback:a2,getBBox:Ik,getComboBBox:__,getLabelPosition:ise,getLetterWidth:ase,getLoopCfgs:nse,getTextSize:ose,plainCombosToTrees:lR,reconstructTree:uR,shouldRefreshEdge:P9e,traverseTree:Ua,traverseTreeUp:Ru,truncateLabelByLength:sse},Symbol.toStringTag,{value:"Module"}));var QG=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var r=e.nodes,n=e.edges,i=e.combos,a=i===void 0?[]:i;if(!r&&!n){var o=!0;return Ua(e,function(h){return Ve(h.id)?!0:(o=!1,!1)}),o}var s=(r||[]).find(function(h){return!Ve(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var l=(r||[]).map(function(h){return h.id}),u=a==null?void 0:a.map(function(h){return h.id}),c=zo(zo([],l,!0),u,!0),f=(n||[]).find(function(h){return!c.includes(h.source)||!c.includes(h.target)});return f?(console.warn("G6 Warning Tips: The source %c".concat(f.source,"%c or the target %c").concat(f.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},R9e=function(e,r){if(e==="node"||e==="combo"){if(r.id&&!Ve(r.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(r.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!r.source||!r.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},N9e=function(){function t(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var e=this.modes;Ce(e,function(r){Ce(r,function(n,i){Ve(n)&&(r[i]={type:n})})})},t.prototype.setBehaviors=function(e){var r=this.graph,n=this.modes[e],i=[],a;Ce(n||[],function(o){var s=$8.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(r),i.push(a)))}),this.currentBehaves=i},t.mergeBehaviors=function(e,r){return Ce(r,function(n){e.indexOf(n)<0&&(Ve(n)&&(n={type:n}),e.push(n))}),e},t.filterBehaviors=function(e,r){var n=[];return e.forEach(function(i){var a="";Ve(i)?a=i:a=i.type,r.indexOf(a)<0&&n.push(i)}),n},t.prototype.setMode=function(e){var r=this,n=r.modes,i=r.graph,a=e,o=n[a];o&&(i.emit("beforemodechange",{mode:e}),Ce(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:e}),this.mode=e)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,r,n){var i=this,a;if(Ft(e)?a=e:a=[e],Ft(r))return Ce(r,function(s){i.modes[s]?n?i.modes[s]=t.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=t.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=r;return r||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=t.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=t.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(e,r,n){Ve(e)&&(e={type:e});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===e.type)return s.updateCfg(r),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,r),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),Z1=`	
\v\f\r \u2028\u2029`,F9e=new RegExp("([a-z])["+Z1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Z1+"]*,?["+Z1+"]*)+)","ig"),B9e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Z1+"]*,?["+Z1+"]*","ig"),h0=function(t){if(!t)return null;if(Ft(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(F9e,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(B9e,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(r.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&r.push([i,o[0]]),s==="r")r.push([i].concat(o));else for(;o.length>=e[s]&&(r.push([i].concat(o.splice(0,e[s]))),!!e[s]););return t}),r},cR=function(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var a=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?a[3]={x:+t[0],y:+t[1]}:i-2===n&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return r},$S=function(t,e,r,n,i){var a=[];if(i===null&&n===null&&(n=r),t=+t,e=+e,r=+r,n=+n,i!==null){var o=Math.PI/180,s=t+r*Math.cos(-n*o),l=t+r*Math.cos(-i*o),u=e+r*Math.sin(-n*o),c=e+r*Math.sin(-i*o);a=[["M",s,u],["A",r,r,0,+(i-n>180),0,l,c]]}else a=[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return a},fR=function(t){if(t=h0(t),!t||!t.length)return[["M",0,0]];var e=[],r=0,n=0,i=0,a=0,o=0,s,l;t[0][0]==="M"&&(r=+t[0][1],n=+t[0][2],i=r,a=n,o++,e[0]=["M",r,n]);for(var u=t.length===3&&t[0][0]==="M"&&t[1][0].toUpperCase()==="R"&&t[2][0].toUpperCase()==="Z",c=void 0,f=void 0,h=o,d=t.length;h<d;h++){if(e.push(c=[]),f=t[h],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+r,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+r;break;case"R":l=[r,n].concat(f.slice(1));for(var p=2,v=l.length;p<v;p++)l[p]=+l[p]+r,l[++p]=+l[p]+n;e.pop(),e=e.concat(cR(l,u));break;case"O":e.pop(),l=$S(r,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat($S(r,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+r,a=+f[2]+n;break;default:for(var p=1,v=f.length;p<v;p++)c[p]=+f[p]+(p%2?r:n)}else if(s==="R")l=[r,n].concat(f.slice(1)),e.pop(),e=e.concat(cR(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")e.pop(),l=$S(r,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat($S(r,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,m=f.length;g<m;g++)c[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":r=+i,n=+a;break;case"H":r=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:r=c[c.length-2],n=c[c.length-1]}}return e},zS=function(t,e,r,n){return[t,e,r,n,r,n]},ZG=function(t,e,r,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*r,o*e+s*n,o*i+s*r,o*a+s*n,i,a]},lse=function(t,e,r,n,i,a,o,s,l,u){r===n&&(r+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),h=[],d,p,v,g,m,y=function(Ae,He,ct){var st=Ae*Math.cos(ct)-He*Math.sin(ct),Mt=Ae*Math.sin(ct)+He*Math.cos(ct);return{x:st,y:Mt}};if(u)p=u[0],v=u[1],g=u[2],m=u[3];else{d=y(t,e,-f),t=d.x,e=d.y,d=y(s,l,-f),s=d.x,l=d.y,t===s&&e===l&&(s+=1,l+=1);var w=(t-s)/2,b=(e-l)/2,x=w*w/(r*r)+b*b/(n*n);x>1&&(x=Math.sqrt(x),r=x*r,n=x*n);var S=r*r,E=n*n,_=(a===o?-1:1)*Math.sqrt(Math.abs((S*E-S*b*b-E*w*w)/(S*b*b+E*w*w)));g=_*r*b/n+(t+s)/2,m=_*-n*w/r+(e+l)/2,p=Math.asin(((e-m)/n).toFixed(9)),v=Math.asin(((l-m)/n).toFixed(9)),p=t<g?Math.PI-p:p,v=s<g?Math.PI-v:v,p<0&&(p=Math.PI*2+p),v<0&&(v=Math.PI*2+v),o&&p>v&&(p=p-Math.PI*2),!o&&v>p&&(v=v-Math.PI*2)}var k=v-p;if(Math.abs(k)>c){var C=v,A=s,M=l;v=p+c*(o&&v>p?1:-1),s=g+r*Math.cos(v),l=m+n*Math.sin(v),h=lse(s,l,r,n,i,0,o,A,M,[v,C,g,m])}k=v-p;var T=Math.cos(p),O=Math.sin(p),N=Math.cos(v),R=Math.sin(v),B=Math.tan(k/4),F=4/3*r*B,D=4/3*n*B,L=[t,e],G=[t+F*O,e-D*T],Y=[s+F*R,l-D*N],Z=[s,l];if(G[0]=2*L[0]-G[0],G[1]=2*L[1]-G[1],u)return[G,Y,Z].concat(h);h=[G,Y,Z].concat(h).join().split(",");for(var q=[],pe=0,Se=h.length;pe<Se;pe++)q[pe]=pe%2?y(h[pe-1],h[pe],f).y:y(h[pe],h[pe+1],f).x;return q},hR=function(t,e){var r=fR(t),n=e&&fR(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(w,b,x){var S,E;if(!w)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(w[0]in{T:1,Q:1})&&(b.qx=b.qy=null),w[0]){case"M":b.X=w[1],b.Y=w[2];break;case"A":w=["C"].concat(lse.apply(0,[b.x,b.y].concat(w.slice(1))));break;case"S":x==="C"||x==="S"?(S=b.x*2-b.bx,E=b.y*2-b.by):(S=b.x,E=b.y),w=["C",S,E].concat(w.slice(1));break;case"T":x==="Q"||x==="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),w=["C"].concat(ZG(b.x,b.y,b.qx,b.qy,w[1],w[2]));break;case"Q":b.qx=w[1],b.qy=w[2],w=["C"].concat(ZG(b.x,b.y,w[1],w[2],w[3],w[4]));break;case"L":w=["C"].concat(zS(b.x,b.y,w[1],w[2]));break;case"H":w=["C"].concat(zS(b.x,b.y,w[1],b.y));break;case"V":w=["C"].concat(zS(b.x,b.y,b.x,w[1]));break;case"Z":w=["C"].concat(zS(b.x,b.y,b.X,b.Y));break}return w},h=function(w,b){if(w[b].length>7){w[b].shift();for(var x=w[b];x.length;)o[b]="A",n&&(s[b]="A"),w.splice(b++,0,["C"].concat(x.splice(0,6)));w.splice(b,1),c=Math.max(r.length,n&&n.length||0)}},d=function(w,b,x,S,E){w&&b&&w[E][0]==="M"&&b[E][0]!=="M"&&(b.splice(E,0,["M",S.x,S.y]),x.bx=0,x.by=0,x.x=w[E][1],x.y=w[E][2],c=Math.max(r.length,n&&n.length||0))};c=Math.max(r.length,n&&n.length||0);for(var p=0;p<c;p++){r[p]&&(l=r[p][0]),l!=="C"&&(o[p]=l,p&&(u=o[p-1])),r[p]=f(r[p],i,u),o[p]!=="A"&&l==="C"&&(o[p]="C"),h(r,p),n&&(n[p]&&(l=n[p][0]),l!=="C"&&(s[p]=l,p&&(u=s[p-1])),n[p]=f(n[p],a,u),s[p]!=="A"&&l==="C"&&(s[p]="C"),h(n,p)),d(r,n,i,a,p),d(n,r,a,i,p);var v=r[p],g=n&&n[p],m=v.length,y=n&&g.length;i.x=v[m-2],i.y=v[m-1],i.bx=parseFloat(v[m-4])||i.x,i.by=parseFloat(v[m-3])||i.y,a.bx=n&&(parseFloat(g[y-4])||a.x),a.by=n&&(parseFloat(g[y-3])||a.y),a.x=n&&g[y-2],a.y=n&&g[y-1]}return n?[r,n]:r},$9e=/,?([a-z]),?/gi,use=function(t){return t.join(",").replace($9e,"$1")},JG=function(t,e,r,n,i){var a=-3*e+9*r-9*n+3*i,o=t*a+6*e-12*r+6*n;return t*o-3*e+3*r},eU=function(t,e,r,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,p=0;p<c;p++){var v=u*f[p]+u,g=JG(v,t,r,i,o),m=JG(v,e,n,a,s),y=g*g+m*m;d+=h[p]*Math.sqrt(y)}return u*d},z9e=function(t,e,r,n,i,a,o,s){for(var l=[],u=[[],[]],c,f,h,d,p=0;p<2;++p){if(p===0?(f=6*t-12*r+6*i,c=-3*t+9*r-9*i+3*o,h=3*r-3*t):(f=6*e-12*n+6*a,c=-3*e+9*n-9*a+3*s,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;d=-h/f,d>0&&d<1&&l.push(d);continue}var v=f*f-4*h*c,g=Math.sqrt(v);if(!(v<0)){var m=(-f+g)/(2*c);m>0&&m<1&&l.push(m);var y=(-f-g)/(2*c);y>0&&y<1&&l.push(y)}}for(var w=l.length,b=w,x;w--;)d=l[w],x=1-d,u[0][w]=x*x*x*t+3*x*x*d*r+3*x*d*d*i+d*d*d*o,u[1][w]=x*x*x*e+3*x*x*d*n+3*x*d*d*a+d*d*d*s;return u[0][b]=t,u[1][b]=e,u[0][b+1]=o,u[1][b+1]=s,u[0].length=u[1].length=b+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},j9e=function(t,e,r,n,i,a,o,s){if(!(Math.max(t,r)<Math.min(i,o)||Math.min(t,r)>Math.max(i,o)||Math.max(e,n)<Math.min(a,s)||Math.min(e,n)>Math.max(a,s))){var l=(t*n-e*r)*(i-o)-(t-r)*(i*s-a*o),u=(t*n-e*r)*(a-s)-(e-n)*(i*s-a*o),c=(t-r)*(a-s)-(e-n)*(i-o);if(c){var f=l/c,h=u/c,d=+f.toFixed(2),p=+h.toFixed(2);if(!(d<+Math.min(t,r).toFixed(2)||d>+Math.max(t,r).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||p<+Math.min(e,n).toFixed(2)||p>+Math.max(e,n).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:f,y:h}}}},nh=function(t,e,r){return e>=t.x&&e<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},cse=function(t,e,r,n,i){if(i)return[["M",+t+ +i,e],["l",r-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-r,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]];return a.parsePathArray=use,a},dR=function(t,e,r,n){return t===null&&(t=e=r=n=0),e===null&&(e=t.y,r=t.width,n=t.height,t=t.x),{x:t,y:e,width:r,w:r,height:n,h:n,x2:t+r,y2:e+n,cx:t+r/2,cy:e+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:cse(t,e,r,n),vb:[t,e,r,n].join(" ")}},G9e=function(t,e){return t=dR(t),e=dR(e),nh(e,t.x,t.y)||nh(e,t.x2,t.y)||nh(e,t.x,t.y2)||nh(e,t.x2,t.y2)||nh(t,e.x,e.y)||nh(t,e.x2,e.y)||nh(t,e.x,e.y2)||nh(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},tU=function(t,e,r,n,i,a,o,s){Ft(t)||(t=[t,e,r,n,i,a,o,s]);var l=z9e.apply(null,t);return dR(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},rU=function(t,e,r,n,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),h=l*l,d=h*l,p=c*t+f*3*l*r+u*3*l*l*i+d*o,v=c*e+f*3*l*n+u*3*l*l*a+d*s,g=t+2*l*(r-t)+h*(i-2*r+t),m=e+2*l*(n-e)+h*(a-2*n+e),y=r+2*l*(i-r)+h*(o-2*i+r),w=n+2*l*(a-n)+h*(s-2*a+n),b=u*t+l*r,x=u*e+l*n,S=u*i+l*o,E=u*a+l*s,_=90-Math.atan2(g-y,m-w)*180/Math.PI;return{x:p,y:v,m:{x:g,y:m},n:{x:y,y:w},start:{x:b,y:x},end:{x:S,y:E},alpha:_}},U9e=function(t,e,r){var n=tU(t),i=tU(e);if(!G9e(n,i))return r?0:[];for(var a=eU.apply(0,t),o=eU.apply(0,e),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},h=r?0:[],d=0;d<s+1;d++){var p=rU.apply(0,t.concat(d/s));u.push({x:p.x,y:p.y,t:d/s})}for(var d=0;d<l+1;d++){var p=rU.apply(0,e.concat(d/l));c.push({x:p.x,y:p.y,t:d/l})}for(var d=0;d<s;d++)for(var v=0;v<l;v++){var g=u[d],m=u[d+1],y=c[v],w=c[v+1],b=Math.abs(m.x-g.x)<.001?"y":"x",x=Math.abs(w.x-y.x)<.001?"y":"x",S=j9e(g.x,g.y,m.x,m.y,y.x,y.y,w.x,w.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var E=g.t+Math.abs((S[b]-g[b])/(m[b]-g[b]))*(m.t-g.t),_=y.t+Math.abs((S[x]-y[x])/(w[x]-y[x]))*(w.t-y.t);E>=0&&E<=1&&_>=0&&_<=1&&(r?h+=1:h.push({x:S.x,y:S.y,t1:E,t2:_}))}}return h},W9e=function(t,e,r){t=hR(t),e=hR(e);for(var n,i,a,o,s,l,u,c,f,h,d=r?0:[],p=0,v=t.length;p<v;p++){var g=t[p];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[n,i].concat(g.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,y=e.length;m<y;m++){var w=e[m];if(w[0]==="M")a=u=w[1],o=c=w[2];else{w[0]==="C"?(h=[a,o].concat(w.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,u,c,u,c],a=u,o=c);var b=U9e(f,h,r);if(r)d+=b;else{for(var x=0,S=b.length;x<S;x++)b[x].segment1=p,b[x].segment2=m,b[x].bez1=f,b[x].bez2=h;d=d.concat(b)}}}}}return d},V9e=function(t,e){return W9e(t,e)};function H9e(t,e){var r=[],n=[];function i(a,o){if(a.length===1)r.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&r.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return t.length&&i(t,e),{left:r,right:n.reverse()}}function X9e(t,e,r){var n=[[t[1],t[2]]];r=r||2;var i=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var a=n,o=1/r,s=0;s<r-1;s++){var l=o/(1-o*s),u=H9e(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var h=[];return f.length===4&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(f.length===3&&h.push("Q"),h=h.concat(f[1])),f.length===2&&h.push("L"),h=h.concat(f[f.length-1]),h});return c}var Y9e=function(t,e,r){if(r===1)return[[].concat(t)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(X9e(t,e,r));else{var i=[].concat(t);i[0]==="M"&&(i[0]="L");for(var a=0;a<=r-1;a++)n.push(i)}return n},q9e=function(t,e){if(t.length===1)return t;var r=t.length-1,n=e.length-1,i=r/n,a=[];if(t.length===1&&t[0][0]==="M"){for(var o=0;o<n-r;o++)t.push(t[0]);return t}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===r?u.concat(t[r]):u.concat(Y9e(t[f],t[f+1],c))},[]);return l.unshift(t[0]),(e[n]==="Z"||e[n]==="z")&&l.push("Z"),l},K9e=function(t,e){if(t.length!==e.length)return!1;var r=!0;return Ce(t,function(n,i){if(n!==e[i])return r=!1,!1}),r};function Q9e(t,e,r){var n=null,i=r;return e<i&&(i=e,n="add"),t<i&&(i=t,n="del"),{type:n,min:i}}var Z9e=function(t,e){var r=t.length,n=e.length,i,a,o=0;if(r===0||n===0)return null;for(var s=[],l=0;l<=r;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=r;l++){i=t[l-1];for(var u=1;u<=n;u++){a=e[u-1],K9e(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,h=s[l-1][u-1].min+o;s[l][u]=Q9e(c,f,h)}}return s},fse=function(t,e){var r=Z9e(t,e),n=t.length,i=e.length,a=[],o=1,s=1;if(r[n][i].min!==n){for(var l=1;l<=n;l++){var u=r[l][l].min;s=l;for(var c=o;c<=i;c++)r[l][c].min<u&&(u=r[l][c].min,s=c);o=s,r[l][o].type&&a.push({index:l-1,type:r[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}n=t.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)t[n-1][0]==="z"||t[n-1][0]==="Z"?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function YO(t,e,r){for(var n=[].concat(t),i,a=1/(r+1),o=hse(e)[0],s=1;s<=r;s++)a*=s,i=Math.floor(t.length*a),i===0?n.unshift([o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]);return n}function hse(t){var e=[];switch(t[0]){case"M":e.push([t[1],t[2]]);break;case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":e.push([t[1],t[1]]);break;case"V":e.push([t[1],t[1]]);break}return e}var pR=function(t,e){if(t.length<=1)return t;for(var r,n=0;n<e.length;n++)if(t[n][0]!==e[n][0])switch(r=hse(t[n]),e[n][0]){case"M":t[n]=["M"].concat(r[0]);break;case"L":t[n]=["L"].concat(r[0]);break;case"A":t[n]=[].concat(e[n]),t[n][6]=r[0][0],t[n][7]=r[0][1];break;case"Q":if(r.length<2)if(n>0)r=YO(r,t[n-1],1);else{t[n]=e[n];break}t[n]=["Q"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;case"T":t[n]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(n>0)r=YO(r,t[n-1],2);else{t[n]=e[n];break}t[n]=["C"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(r.length<2)if(n>0)r=YO(r,t[n-1],1);else{t[n]=e[n];break}t[n]=["S"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;default:t[n]=e[n]}return t};const J9e=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:cR,fillPath:q9e,fillPathByDiff:fse,formatPath:pR,intersection:V9e,parsePathArray:use,parsePathString:h0,pathToAbsolute:fR,pathToCurve:hR,rectPath:cse},Symbol.toStringTag,{value:"Module"}));var dse=function(){function t(e,r){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=r,this.timeStamp=r.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function pse(t,e){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}var nU=typeof window<"u"&&typeof window.document<"u";function vse(t,e){if(t.isCanvas())return!0;for(var r=e.getParent(),n=!1;r;){if(r===t){n=!0;break}r=r.getParent()}return n}function vR(t){return t.cfg.visible&&t.cfg.capture}var eze=function(t){lr(e,t);function e(r){var n=t.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=$t(i,r),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(r){return this.cfg[r]},e.prototype.set=function(r,n){this.cfg[r]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(cae),iU=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},tze=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),rze=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),nze=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),ize=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),aze=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),oze=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,sze=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,aU=3,lze=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",oze]],oU=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function gse(t){return t?sU(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new aze:typeof navigator<"u"?sU(navigator.userAgent):fze()}function uze(t){return t!==""&&lze.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var a=i.exec(t);return!!a&&[n,a]},!1)}function sU(t){var e=uze(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new ize;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<aU&&(i=iU(iU([],i,!0),hze(aU-i.length),!0)):i=[];var a=i.join("."),o=cze(t),s=sze.exec(t);return s&&s[1]?new nze(r,a,o,s[1]):new tze(r,a,o)}function cze(t){for(var e=0,r=oU.length;e<r;e++){var n=oU[e],i=n[0],a=n[1],o=a.exec(t);if(o)return i}return null}function fze(){var t=typeof process<"u"&&process.version;return t?new rze(process.version.slice(1)):null}function hze(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function lU(t,e){var r=[],n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=e[0],d=e[1],p=e[2],v=e[3],g=e[4],m=e[5],y=e[6],w=e[7],b=e[8];return r[0]=h*n+d*o+p*u,r[1]=h*i+d*s+p*c,r[2]=h*a+d*l+p*f,r[3]=v*n+g*o+m*u,r[4]=v*i+g*s+m*c,r[5]=v*a+g*l+m*f,r[6]=y*n+w*o+b*u,r[7]=y*i+w*s+b*c,r[8]=y*a+w*l+b*f,r}function Tp(t,e){var r=[],n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function mse(t){var e=[],r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*o)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*a)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(o*r-n*a)*p,e):null}var Hy=yl,qO="matrix",dze=["zIndex","capture","visible","type"],pze=["repeat"],vze=":",gze="*";function mze(t){for(var e=[],r=0;r<t.length;r++)Ft(t[r])?e.push([].concat(t[r])):e.push(t[r]);return e}function yze(t,e){var r={},n=e.attrs;for(var i in t)r[i]=n[i];return r}function wze(t,e){var r={},n=e.attr();return Ce(t,function(i,a){pze.indexOf(a)===-1&&!md(n[a],i)&&(r[a]=i)}),r}function bze(t,e){if(e.onFrame)return t;var r=e.startTime,n=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return Ce(t,function(o){r+n<o.startTime+o.delay+o.duration&&i>o.delay&&Ce(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),t}var yse=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this;n.attrs={};var i=n.getDefaultAttrs();return $t(i,r.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(r){},e.prototype.initAttrs=function(r){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(ua(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((r={},r[a]=o,r)),this):this.attrs[a]},e.prototype.isClipped=function(r,n){var i=this.getClip();return i&&!i.isHit(r,n)},e.prototype.setAttr=function(r,n){var i=this.attrs[r];i!==n&&(this.attrs[r]=n,this.onAttrChange(r,n,i))},e.prototype.onAttrChange=function(r,n,i){r==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(r){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(r){this.set("zIndex",r);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var r=this.getParent();if(r){var n=r.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var r=this.getParent();if(r){var n=r.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(r){r===void 0&&(r=!0);var n=this.getParent();n?(pse(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),r&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(qO,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(qO)},e.prototype.setMatrix=function(r){this.attr(qO,r),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var r=this.cfg.totalMatrix;if(!r){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?r=lU(i,n):r=n||i,this.set("totalMatrix",r)}return r},e.prototype.applyMatrix=function(r){var n=this.attr("matrix"),i=null;r&&n?i=lU(r,n):i=n||r,this.set("totalMatrix",i),this.set("parentMatrix",r)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(r){var n=this.attr("matrix");return n?Tp(n,r):r},e.prototype.invertFromMatrix=function(r){var n=this.attr("matrix");if(n){var i=mse(n);if(i)return Tp(i,r)}return r},e.prototype.setClip=function(r){var n=this.getCanvas(),i=null;if(r){var a=this.getShapeBase(),o=_m(r.type),s=a[o];s&&(i=new s({type:r.type,isClipShape:!0,applyTo:this,attrs:r.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var r=this.cfg.clipShape;return r||null},e.prototype.clone=function(){var r=this,n=this.attrs,i={};Ce(n,function(s,l){Ft(n[l])?i[l]=mze(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return Ce(dze,function(s){o.set(s,r.get(s))}),o},e.prototype.destroy=function(){var r=this.destroyed;r||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=r[0],s=r[1],l=r[2],u=l===void 0?"easeLinear":l,c=r[3],f=c===void 0?C1:c,h=r[4],d=h===void 0?0:h,p,v,g,m,y;Rn(o)?(p=o,o={}):ua(o)&&o.onFrame&&(p=o.onFrame,v=o.repeat),ua(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",d=y.delay||0,v=y.repeat||v||!1,f=y.callback||C1,g=y.pauseCallback||C1,m=y.resumeCallback||C1):(Pt(f)&&(d=f,f=null),Rn(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var w=wze(o,this),b={fromAttrs:yze(w,this),toAttrs:w,duration:s,easing:u,repeat:v,callback:f,pauseCallback:g,resumeCallback:m,delay:d,startTime:i.getTime(),id:yc(),onFrame:p,pathFormatted:!1};a.length>0?a=bze(a,b):i.addAnimator(this),a.push(b),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(r){var n=this;r===void 0&&(r=!0);var i=this.get("animations");Ce(i,function(a){r&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var r=this.get("timeline"),n=this.get("animations"),i=r.getTime();return Ce(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var r=this.get("timeline"),n=r.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return Ce(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(r,n){var i=this,a=n.propagationPath;this.getEvents();var o;r==="mouseenter"?o=n.fromShape:r==="mouseleave"&&(o=n.toShape);for(var s=function(f){var h=a[f],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&o&&vse(h,o))return"break";Ft(d)?Ce(d,function(p){i.emitDelegateEvent(h,p,n)}):l.emitDelegateEvent(h,d,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},e.prototype.emitDelegateEvent=function(r,n,i){var a=this.getEvents(),o=n+vze+i.type;(a[o]||a[gze])&&(i.name=o,i.currentTarget=r,i.delegateTarget=this,i.delegateObject=r.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.getMatrix(),a=Hy(i,[["t",r,n]]);return this.setMatrix(a),this},e.prototype.move=function(r,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(r-i,n-a),this},e.prototype.moveTo=function(r,n){return this.move(r,n)},e.prototype.scale=function(r,n){var i=this.getMatrix(),a=Hy(i,[["s",r,n||r]]);return this.setMatrix(a),this},e.prototype.rotate=function(r){var n=this.getMatrix(),i=Hy(n,[["r",r]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(r){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=Hy(o,[["t",-i,-a],["r",r],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(r,n,i){var a=this.getMatrix(),o=Hy(a,[["t",-r,-n],["r",i],["t",r,n]]);return this.setMatrix(o),this},e}(eze),uU={},gR="_INDEX";function wse(t,e){if(t.set("canvas",e),t.isGroup()){var r=t.get("children");r.length&&r.forEach(function(n){wse(n,e)})}}function bse(t,e){if(t.set("timeline",e),t.isGroup()){var r=t.get("children");r.length&&r.forEach(function(n){bse(n,e)})}}function xze(t,e,r){r===void 0&&(r=!0),r?e.destroy():(e.set("parent",null),e.set("canvas",null)),pse(t.getChildren(),e)}function Sze(t){return function(e,r){var n=t(e,r);return n===0?e[gR]-r[gR]:n}}var xse=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var r=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Ce(o,function(l){var u=l.getBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<r&&(r=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(r=0,n=0,i=0,a=0);var s={x:r,y:i,minX:r,minY:i,maxX:n,maxY:a,width:n-r,height:a-i};return s},e.prototype.getCanvasBBox=function(){var r=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Ce(o,function(l){var u=l.getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<r&&(r=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(r=0,n=0,i=0,a=0);var s={x:r,y:i,minX:r,minY:i,maxX:n,maxY:a,width:n-r,height:a-i};return s},e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.children=[],r},e.prototype.onAttrChange=function(r,n,i){if(t.prototype.onAttrChange.call(this,r,n,i),r==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(r){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,r);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(r){var n=this.getChildren();Ce(n,function(i){i.applyMatrix(r)})},e.prototype.addShape=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],a=r[1];ua(i)?a=i:a.type=i;var o=uU[a.type];o||(o=_m(a.type),uU[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],a=r[1],o;if(Rn(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var r;return this.isCanvas()?r=this:r=this.get("canvas"),r},e.prototype.getShape=function(r,n,i){if(!vR(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,r,n,i);else{var s=[r,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(r,n,i,a){for(var o=null,s=r.length-1;s>=0;s--){var l=r[s];if(vR(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},e.prototype.add=function(r){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=r.getParent();o&&xze(o,r,!1),r.set("parent",this),n&&wse(r,n),a&&bse(r,a),i.push(r),r.onCanvasChange("add"),this._applyElementMatrix(r)},e.prototype._applyElementMatrix=function(r){var n=this.getTotalMatrix();n&&r.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var r=this.getChildren();Ce(r,function(n,i){return n[gR]=i,n}),r.sort(Sze(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var r=this.getChildren(),n=r.length-1;n>=0;n--)r[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var r=this.getChildren();return this.getChildByIndex(r.length-1)},e.prototype.getChildByIndex=function(r){var n=this.getChildren();return n[r]},e.prototype.getCount=function(){var r=this.getChildren();return r.length},e.prototype.contain=function(r){var n=this.getChildren();return n.indexOf(r)>-1},e.prototype.removeChild=function(r,n){n===void 0&&(n=!0),this.contain(r)&&r.remove(n)},e.prototype.findAll=function(r){var n=[],i=this.getChildren();return Ce(i,function(a){r(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(r)))}),n},e.prototype.find=function(r){var n=null,i=this.getChildren();return Ce(i,function(a){if(r(a)?n=a:a.isGroup()&&(n=a.find(r)),n)return!1}),n},e.prototype.findById=function(r){return this.find(function(n){return n.get("id")===r})},e.prototype.findByClassName=function(r){return this.find(function(n){return n.get("className")===r})},e.prototype.findAllByName=function(r){return this.findAll(function(n){return n.get("name")===r})},e}(yse),Cm=0,M1=0,Xy=0,Sse=1e3,Ok,A1,Dk=0,wv=0,jA=0,o2=typeof performance=="object"&&performance.now?performance:Date,Ese=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _se(){return wv||(Ese(Eze),wv=o2.now()+jA)}function Eze(){wv=0}function mR(){this._call=this._time=this._next=null}mR.prototype=d6.prototype={constructor:mR,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?_se():+r)+(e==null?0:+e),!this._next&&A1!==this&&(A1?A1._next=this:Ok=this,A1=this),this._call=t,this._time=r,yR()},stop:function(){this._call&&(this._call=null,this._time=1/0,yR())}};function d6(t,e,r){var n=new mR;return n.restart(t,e,r),n}function _ze(){_se(),++Cm;for(var t=Ok,e;t;)(e=wv-t._time)>=0&&t._call.call(null,e),t=t._next;--Cm}function cU(){wv=(Dk=o2.now())+jA,Cm=M1=0;try{_ze()}finally{Cm=0,kze(),wv=0}}function Cze(){var t=o2.now(),e=t-Dk;e>Sse&&(jA-=e,Dk=t)}function kze(){for(var t,e=Ok,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Ok=r);A1=t,yR(n)}function yR(t){if(!Cm){M1&&(M1=clearTimeout(M1));var e=t-wv;e>24?(t<1/0&&(M1=setTimeout(cU,t-o2.now()-jA)),Xy&&(Xy=clearInterval(Xy))):(Xy||(Dk=o2.now(),Xy=setInterval(Cze,Sse)),Cm=1,Ese(cU))}}function p6(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Cse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function db(){}var s2=.7,Pk=1/s2,D0="\\s*([+-]?\\d+)\\s*",l2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mze=/^#([0-9a-f]{3,8})$/,Aze=new RegExp(`^rgb\\(${D0},${D0},${D0}\\)$`),Tze=new RegExp(`^rgb\\(${fc},${fc},${fc}\\)$`),Ize=new RegExp(`^rgba\\(${D0},${D0},${D0},${l2}\\)$`),Oze=new RegExp(`^rgba\\(${fc},${fc},${fc},${l2}\\)$`),Dze=new RegExp(`^hsl\\(${l2},${fc},${fc}\\)$`),Pze=new RegExp(`^hsla\\(${l2},${fc},${fc},${l2}\\)$`),fU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p6(db,u2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:hU,formatHex:hU,formatHex8:Lze,formatHsl:Rze,formatRgb:dU,toString:dU});function hU(){return this.rgb().formatHex()}function Lze(){return this.rgb().formatHex8()}function Rze(){return kse(this).formatHsl()}function dU(){return this.rgb().formatRgb()}function u2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Mze.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?pU(e):r===3?new No(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?jS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?jS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Aze.exec(t))?new No(e[1],e[2],e[3],1):(e=Tze.exec(t))?new No(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ize.exec(t))?jS(e[1],e[2],e[3],e[4]):(e=Oze.exec(t))?jS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dze.exec(t))?mU(e[1],e[2]/100,e[3]/100,1):(e=Pze.exec(t))?mU(e[1],e[2]/100,e[3]/100,e[4]):fU.hasOwnProperty(t)?pU(fU[t]):t==="transparent"?new No(NaN,NaN,NaN,0):null}function pU(t){return new No(t>>16&255,t>>8&255,t&255,1)}function jS(t,e,r,n){return n<=0&&(t=e=r=NaN),new No(t,e,r,n)}function Nze(t){return t instanceof db||(t=u2(t)),t?(t=t.rgb(),new No(t.r,t.g,t.b,t.opacity)):new No}function wR(t,e,r,n){return arguments.length===1?Nze(t):new No(t,e,r,n??1)}function No(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}p6(No,wR,Cse(db,{brighter(t){return t=t==null?Pk:Math.pow(Pk,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?s2:Math.pow(s2,t),new No(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new No(Xp(this.r),Xp(this.g),Xp(this.b),Lk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vU,formatHex:vU,formatHex8:Fze,formatRgb:gU,toString:gU}));function vU(){return`#${Ip(this.r)}${Ip(this.g)}${Ip(this.b)}`}function Fze(){return`#${Ip(this.r)}${Ip(this.g)}${Ip(this.b)}${Ip((isNaN(this.opacity)?1:this.opacity)*255)}`}function gU(){const t=Lk(this.opacity);return`${t===1?"rgb(":"rgba("}${Xp(this.r)}, ${Xp(this.g)}, ${Xp(this.b)}${t===1?")":`, ${t})`}`}function Lk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ip(t){return t=Xp(t),(t<16?"0":"")+t.toString(16)}function mU(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Hl(t,e,r,n)}function kse(t){if(t instanceof Hl)return new Hl(t.h,t.s,t.l,t.opacity);if(t instanceof db||(t=u2(t)),!t)return new Hl;if(t instanceof Hl)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Hl(o,s,l,t.opacity)}function Bze(t,e,r,n){return arguments.length===1?kse(t):new Hl(t,e,r,n??1)}function Hl(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}p6(Hl,Bze,Cse(db,{brighter(t){return t=t==null?Pk:Math.pow(Pk,t),new Hl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?s2:Math.pow(s2,t),new Hl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new No(KO(t>=240?t-240:t+120,i,n),KO(t,i,n),KO(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Hl(yU(this.h),GS(this.s),GS(this.l),Lk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Lk(this.opacity);return`${t===1?"hsl(":"hsla("}${yU(this.h)}, ${GS(this.s)*100}%, ${GS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yU(t){return t=(t||0)%360,t<0?t+360:t}function GS(t){return Math.max(0,Math.min(1,t||0))}function KO(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const v6=t=>()=>t;function $ze(t,e){return function(r){return t+r*e}}function zze(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function jze(t){return(t=+t)==1?Mse:function(e,r){return r-e?zze(e,r,t):v6(isNaN(e)?r:e)}}function Mse(t,e){var r=e-t;return r?$ze(t,r):v6(isNaN(t)?e:t)}const wU=function t(e){var r=jze(e);function n(i,a){var o=r((i=wR(i)).r,(a=wR(a)).r),s=r(i.g,a.g),l=r(i.b,a.b),u=Mse(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=t,n}(1);function Ase(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Tse(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gze(t,e){return(Tse(e)?Ase:Ise)(t,e)}function Ise(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=Rk(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function Uze(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function bR(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Wze(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Rk(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var xR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QO=new RegExp(xR.source,"g");function Vze(t){return function(){return t}}function Hze(t){return function(e){return t(e)+""}}function Xze(t,e){var r=xR.lastIndex=QO.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(n=xR.exec(t))&&(i=QO.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:bR(n,i)})),r=QO.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Hze(l[0].x):Vze(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Rk(t,e){var r=typeof e,n;return e==null||r==="boolean"?v6(e):(r==="number"?bR:r==="string"?(n=u2(e))?(e=n,wU):Xze:e instanceof u2?wU:e instanceof Date?Uze:Tse(e)?Ase:Array.isArray(e)?Ise:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wze:bR)(t,e)}function Yze(t){return+t}function qze(t){return t*t}function Kze(t){return t*(2-t)}function bU(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Qze(t){return t*t*t}function Zze(t){return--t*t*t+1}function xU(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var g6=3,Jze=function t(e){e=+e;function r(n){return Math.pow(n,e)}return r.exponent=t,r}(g6),eje=function t(e){e=+e;function r(n){return 1-Math.pow(1-n,e)}return r.exponent=t,r}(g6),SU=function t(e){e=+e;function r(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return r.exponent=t,r}(g6),Ose=Math.PI,Dse=Ose/2;function tje(t){return+t==1?1:1-Math.cos(t*Dse)}function rje(t){return Math.sin(t*Dse)}function EU(t){return(1-Math.cos(Ose*t))/2}function yd(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function nje(t){return yd(1-+t)}function ije(t){return 1-yd(t)}function _U(t){return((t*=2)<=1?yd(1-t):2-yd(t-1))/2}function aje(t){return 1-Math.sqrt(1-t*t)}function oje(t){return Math.sqrt(1- --t*t)}function CU(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var SR=4/11,sje=6/11,lje=8/11,uje=3/4,cje=9/11,fje=10/11,hje=15/16,dje=21/22,pje=63/64,US=1/SR/SR;function vje(t){return 1-c2(1-t)}function c2(t){return(t=+t)<SR?US*t*t:t<lje?US*(t-=sje)*t+uje:t<fje?US*(t-=cje)*t+hje:US*(t-=dje)*t+pje}function gje(t){return((t*=2)<=1?1-c2(1-t):c2(t-1)+1)/2}var m6=1.70158,mje=function t(e){e=+e;function r(n){return(n=+n)*n*(e*(n-1)+n)}return r.overshoot=t,r}(m6),yje=function t(e){e=+e;function r(n){return--n*n*((n+1)*e+n)+1}return r.overshoot=t,r}(m6),kU=function t(e){e=+e;function r(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return r.overshoot=t,r}(m6),km=2*Math.PI,y6=1,w6=.3,wje=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=km);function i(a){return e*yd(- --a)*Math.sin((n-a)/r)}return i.amplitude=function(a){return t(a,r*km)},i.period=function(a){return t(e,a)},i}(y6,w6),MU=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=km);function i(a){return 1-e*yd(a=+a)*Math.sin((a+n)/r)}return i.amplitude=function(a){return t(a,r*km)},i.period=function(a){return t(e,a)},i}(y6,w6),bje=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=km);function i(a){return((a=a*2-1)<0?e*yd(-a)*Math.sin((n-a)/r):2-e*yd(a)*Math.sin((n+a)/r))/2}return i.amplitude=function(a){return t(a,r*km)},i.period=function(a){return t(e,a)},i}(y6,w6);const xje=Object.freeze(Object.defineProperty({__proto__:null,easeBack:kU,easeBackIn:mje,easeBackInOut:kU,easeBackOut:yje,easeBounce:c2,easeBounceIn:vje,easeBounceInOut:gje,easeBounceOut:c2,easeCircle:CU,easeCircleIn:aje,easeCircleInOut:CU,easeCircleOut:oje,easeCubic:xU,easeCubicIn:Qze,easeCubicInOut:xU,easeCubicOut:Zze,easeElastic:MU,easeElasticIn:wje,easeElasticInOut:bje,easeElasticOut:MU,easeExp:_U,easeExpIn:nje,easeExpInOut:_U,easeExpOut:ije,easeLinear:Yze,easePoly:SU,easePolyIn:Jze,easePolyInOut:SU,easePolyOut:eje,easeQuad:bU,easeQuadIn:qze,easeQuadInOut:bU,easeQuadOut:Kze,easeSin:EU,easeSinIn:tje,easeSinInOut:EU,easeSinOut:rje},Symbol.toStringTag,{value:"Module"}));var Sje={};function Eje(t){return Sje[t.toLowerCase()]||xje[t]}var _je=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Cje=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},AU=[1,0,0,0,1,0,0,0,1];function kje(t,e,r){var n={},i=e.fromAttrs,a=e.toAttrs;if(!t.destroyed){var o;for(var s in a)if(!md(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=h0(a[s]),u=h0(i[s]),u=fse(u,l),u=pR(u,l),e.fromAttrs.path=u,e.toAttrs.path=l):e.pathFormatted||(l=h0(a[s]),u=h0(i[s]),u=pR(u,l),e.fromAttrs.path=u,e.toAttrs.path=l,e.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],h=u[c],d=[],p=0;p<f.length;p++)Pt(f[p])&&h&&Pt(h[p])?(o=Rk(h[p],f[p]),d.push(o(r))):d.push(f[p]);n[s].push(d)}}else if(s==="matrix"){var v=Gze(i[s]||AU,a[s]||AU),g=v(r);n[s]=g}else _je(s)&&Cje(a[s])?n[s]=a[s]:Rn(a[s])||(o=Rk(i[s],a[s]),n[s]=o(r));t.attr(n)}}function Mje(t,e,r){var n=e.startTime,i=e.delay;if(r<n+i||e._paused)return!1;var a,o=e.duration,s=e.easing,l=Eje(s);if(r=r-n-e.delay,e.repeat)a=r%o/o,a=l(a);else if(a=r/o,a<1)a=l(a);else return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;if(e.onFrame){var u=e.onFrame(a);t.attr(u)}else kje(t,e,a);return!1}var Aje=function(){function t(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return t.prototype.initTimer=function(){var e=this,r=!1,n,i,a;this.timer=d6(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(n=e.animators[s],n.destroyed){e.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],r=Mje(n,a,o),r&&(i.splice(l,1),r=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},t.prototype.addAnimator=function(e){this.animators.push(e)},t.prototype.removeAnimator=function(e){this.animators.splice(e,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(r){r.stopAnimate(e)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Tje=40,TU=0,IU=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function OU(t,e,r){r.name=e,r.target=t,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}function Ije(t,e,r){if(r.bubbles){var n=void 0,i=!1;if(e==="mouseenter"?(n=r.fromShape,i=!0):e==="mouseleave"&&(i=!0,n=r.toShape),t.isCanvas()&&i)return;if(n&&vse(t,n)){r.bubbles=!1;return}r.name=e,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}}var Oje=function(){function t(e){var r=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;r._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=r.canvas,a=i.get("el");if(a!==n.target&&(r.dragging||r.currentShape)){var o=r._getPointInfo(n);r.dragging&&r._emitEvent("drag",n,o,r.draggingShape)}},this._onDocumentMouseUp=function(n){var i=r.canvas,a=i.get("el");if(a!==n.target&&r.dragging){var o=r._getPointInfo(n);r.draggingShape&&r._emitEvent("drop",n,o,null),r._emitEvent("dragend",n,o,r.draggingShape),r._afterDrag(r.draggingShape,o,n)}},this.canvas=e.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var e=this,r=this.canvas.get("el");Ce(IU,function(n){r.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var e=this,r=this.canvas.get("el");Ce(IU,function(n){r.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(e,r,n,i,a,o){var s=new dse(e,r);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},t.prototype._getShape=function(e,r){return this.canvas.getShape(e.x,e.y,r)},t.prototype._getPointInfo=function(e){var r=this.canvas,n=r.getClientByEvent(e),i=r.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(e,r){var n=this._getPointInfo(r),i=this._getShape(n,r),a=this["_on"+e],o=!1;if(a)a.call(this,n,i,r);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,r,n,null,null,i),i&&this._emitEvent(e,r,n,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",r,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,r,n,s,s,null),this._emitEvent(e,r,n,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",r,n,null)):this._emitEvent(e,r,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},t.prototype._onmousedown=function(e,r,n){n.button===TU&&(this.mousedownShape=r,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,r,null,null)},t.prototype._emitMouseoverEvents=function(e,r,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,r,n,n,i),this._emitEvent("mouseleave",e,r,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,r,i,n,i),this._emitEvent("mouseenter",e,r,i,n,i)))},t.prototype._emitDragoverEvents=function(e,r,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",e,r,n,n,i),this._emitEvent("dragenter",e,r,i,n,i)),a||this._emitEvent("dragover",e,r,i)):n&&this._emitEvent("dragleave",e,r,n,n,i),a&&this._emitEvent("dragover",e,r,i)},t.prototype._afterDrag=function(e,r,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(r,n);i!==e&&this._emitMouseoverEvents(n,r,e,i),this.currentShape=i},t.prototype._onmouseup=function(e,r,n){if(n.button===TU){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,r),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,r),r===this.mousedownShape&&this._emitEvent("click",n,e,r),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(e,r,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,r,!0)},t.prototype._onmousemove=function(e,r,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,a,r,!1),this._emitEvent("drag",n,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-e.clientX,h=s.clientY-e.clientY,d=f*f+h*h;c>120||d>Tje?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r)):(this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r))}else this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r)}},t.prototype._emitEvent=function(e,r,n,i,a,o){var s=this._getEventObj(e,r,n,i,a,o);if(i){s.shape=i,OU(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||Ije(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;OU(u,e,s)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),DU="px",PU=gse(),Dje=PU&&PU.name==="firefox",Pse=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.cursor="default",r.supportCSSTransform=!1,r},e.prototype.initContainer=function(){var r=this.get("container");Ve(r)&&(r=document.getElementById(r),this.set("container",r))},e.prototype.initDom=function(){var r=this.createDom();this.set("el",r);var n=this.get("container");n.appendChild(r),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var r=new Oje({canvas:this});r.init(),this.set("eventController",r)},e.prototype.initTimeline=function(){var r=new Aje(this);this.set("timeline",r)},e.prototype.setDOMSize=function(r,n){var i=this.get("el");nU&&(i.style.width=r+DU,i.style.height=n+DU)},e.prototype.changeSize=function(r,n){this.setDOMSize(r,n),this.set("width",r),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(r){this.set("cursor",r);var n=this.get("el");nU&&n&&(n.style.cursor=r)},e.prototype.getPointByEvent=function(r){var n=this.get("supportCSSTransform");if(n){if(Dje&&!Dt(r.layerX)&&r.layerX!==r.offsetX)return{x:r.layerX,y:r.layerY};if(!Dt(r.offsetX))return{x:r.offsetX,y:r.offsetY}}var i=this.getClientByEvent(r),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(r){var n=r;return r.touches&&(r.type==="touchend"?n=r.changedTouches[0]:n=r.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(r,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:r-a.left,y:n-a.top}},e.prototype.getClientByPoint=function(r,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:r+a.left,y:n+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var r=this.get("el");r.parentNode.removeChild(r)},e.prototype.clearEvents=function(){var r=this.get("eventController");r.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var r=this.get("timeline");this.get("destroyed")||(this.clear(),r&&r.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(xse),Lse=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var r=t.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];r.add(a.clone())}return r},e}(xse),Rse=function(t){lr(e,t);function e(r){return t.call(this,r)||this}return e.prototype._isInBBox=function(r,n){var i=this.getBBox();return i.minX<=r&&i.maxX>=r&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r),this.clearCacheBBox()},e.prototype.getBBox=function(){var r=this.cfg.bbox;return r||(r=this.calculateBBox(),this.set("bbox",r)),r},e.prototype.getCanvasBBox=function(){var r=this.cfg.canvasBBox;return r||(r=this.calculateCanvasBBox(),this.set("canvasBBox",r)),r},e.prototype.applyMatrix=function(r){t.prototype.applyMatrix.call(this,r),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var r=this.getBBox(),n=this.getTotalMatrix(),i=r.minX,a=r.minY,o=r.maxX,s=r.maxY;if(n){var l=Tp(n,[r.minX,r.minY]),u=Tp(n,[r.maxX,r.minY]),c=Tp(n,[r.minX,r.maxY]),f=Tp(n,[r.maxX,r.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,p=d===void 0?0:d,v=h.shadowOffsetX,g=v===void 0?0:v,m=h.shadowOffsetY,y=m===void 0?0:m,w=i-p+g,b=o+p+g,x=a-p+y,S=s+p+y;i=Math.min(i,w),o=Math.max(o,b),a=Math.min(a,x),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(r,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(r,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[r,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(yse),Nse=new Map;function Ec(t,e){Nse.set(t,e)}function Fse(t){return Nse.get(t)}function Bse(t){var e=t.attr(),r=e.x,n=e.y,i=e.width,a=e.height;return{x:r,y:n,width:i,height:a}}function $se(t){var e=t.attr(),r=e.x,n=e.y,i=e.r;return{x:r-i,y:n-i,width:i*2,height:i*2}}function Ha(t,e,r,n){var i=t-r,a=e-n;return Math.sqrt(i*i+a*a)}function k_(t,e){return Math.abs(t-e)<.001}function ey(t,e){var r=mc(t),n=mc(e),i=gc(t),a=gc(e);return{x:r,y:n,width:i-r,height:a-n}}function GA(t){return(t+Math.PI*2)%(Math.PI*2)}const sa={box:function(t,e,r,n){return ey([t,r],[e,n])},length:function(t,e,r,n){return Ha(t,e,r,n)},pointAt:function(t,e,r,n,i){return{x:(1-i)*t+i*r,y:(1-i)*e+i*n}},pointDistance:function(t,e,r,n,i,a){var o=(r-t)*(i-t)+(n-e)*(a-e);if(o<0)return Ha(t,e,i,a);var s=(r-t)*(r-t)+(n-e)*(n-e);return o>s?Ha(r,n,i,a):this.pointToLine(t,e,r,n,i,a)},pointToLine:function(t,e,r,n,i,a){var o=[r-t,n-e];if(e6(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];rd(s,s);var l=[i-t,a-e];return Math.abs(J8(l,s))},tangentAngle:function(t,e,r,n){return Math.atan2(n-e,r-t)}};var Pje=1e-4;function zse(t,e,r,n,i,a){var o,s=1/0,l=[r,n],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,h=0;h<=u;h++){var d=h*c,p=[i.apply(null,t.concat([d])),i.apply(null,e.concat([d]))],v=Ha(l[0],l[1],p[0],p[1]);v<s&&(o=d,s=v)}if(o===0)return{x:t[0],y:e[0]};if(o===1){var g=t.length;return{x:t[g-1],y:e[g-1]}}s=1/0;for(var h=0;h<32&&!(f<Pje);h++){var m=o-f,y=o+f,p=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],v=Ha(l[0],l[1],p[0],p[1]);if(m>=0&&v<s)o=m,s=v;else{var w=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],b=Ha(l[0],l[1],w[0],w[1]);y<=1&&b<s?(o=y,s=b):f*=.5}}return{x:i.apply(null,t.concat([o])),y:i.apply(null,e.concat([o]))}}function Lje(t,e){for(var r=0,n=t.length,i=0;i<n;i++){var a=t[i],o=e[i],s=t[(i+1)%n],l=e[(i+1)%n];r+=Ha(a,o,s,l)}return r/2}function gh(t,e,r,n){var i=1-n;return i*i*t+2*n*i*e+n*n*r}function LU(t,e,r){var n=t+r-2*e;if(k_(n,0))return[.5];var i=(t-e)/n;return i<=1&&i>=0?[i]:[]}function RU(t,e,r,n){return 2*(1-n)*(e-t)+2*n*(r-e)}function jse(t,e,r,n,i,a,o){var s=gh(t,r,i,o),l=gh(e,n,a,o),u=sa.pointAt(t,e,r,n,o),c=sa.pointAt(r,n,i,a,o);return[[t,e,u.x,u.y,s,l],[s,l,c.x,c.y,i,a]]}function ER(t,e,r,n,i,a,o){if(o===0)return(Ha(t,e,r,n)+Ha(r,n,i,a)+Ha(t,e,i,a))/2;var s=jse(t,e,r,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),ER.apply(null,l)+ER.apply(null,u)}const Gse={box:function(t,e,r,n,i,a){var o=LU(t,r,i)[0],s=LU(e,n,a)[0],l=[t,i],u=[e,a];return o!==void 0&&l.push(gh(t,r,i,o)),s!==void 0&&u.push(gh(e,n,a,s)),ey(l,u)},length:function(t,e,r,n,i,a){return ER(t,e,r,n,i,a,3)},nearestPoint:function(t,e,r,n,i,a,o,s){return zse([t,r,i],[e,n,a],o,s,gh)},pointDistance:function(t,e,r,n,i,a,o,s){var l=this.nearestPoint(t,e,r,n,i,a,o,s);return Ha(l.x,l.y,o,s)},interpolationAt:gh,pointAt:function(t,e,r,n,i,a,o){return{x:gh(t,r,i,o),y:gh(e,n,a,o)}},divide:function(t,e,r,n,i,a,o){return jse(t,e,r,n,i,a,o)},tangentAngle:function(t,e,r,n,i,a,o){var s=RU(t,r,i,o),l=RU(e,n,a,o),u=Math.atan2(l,s);return GA(u)}};function mh(t,e,r,n,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*r*i*i*a+n*i*i*i}function NU(t,e,r,n,i){var a=1-i;return 3*(a*a*(e-t)+2*a*i*(r-e)+i*i*(n-r))}function ZO(t,e,r,n){var i=-3*t+9*e-9*r+3*n,a=6*t-12*e+6*r,o=3*e-3*t,s=[],l,u,c;if(k_(i,0))k_(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;k_(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function Use(t,e,r,n,i,a,o,s,l){var u=mh(t,r,i,o,l),c=mh(e,n,a,s,l),f=sa.pointAt(t,e,r,n,l),h=sa.pointAt(r,n,i,a,l),d=sa.pointAt(i,a,o,s,l),p=sa.pointAt(f.x,f.y,h.x,h.y,l),v=sa.pointAt(h.x,h.y,d.x,d.y,l);return[[t,e,f.x,f.y,p.x,p.y,u,c],[u,c,v.x,v.y,d.x,d.y,o,s]]}function _R(t,e,r,n,i,a,o,s,l){if(l===0)return Lje([t,r,i,o],[e,n,a,s]);var u=Use(t,e,r,n,i,a,o,s,.5),c=u[0],f=u[1];return c.push(l-1),f.push(l-1),_R.apply(null,c)+_R.apply(null,f)}const J1={extrema:ZO,box:function(t,e,r,n,i,a,o,s){for(var l=[t,o],u=[e,s],c=ZO(t,r,i,o),f=ZO(e,n,a,s),h=0;h<c.length;h++)l.push(mh(t,r,i,o,c[h]));for(var h=0;h<f.length;h++)u.push(mh(e,n,a,s,f[h]));return ey(l,u)},length:function(t,e,r,n,i,a,o,s){return _R(t,e,r,n,i,a,o,s,3)},nearestPoint:function(t,e,r,n,i,a,o,s,l,u,c){return zse([t,r,i,o],[e,n,a,s],l,u,mh,c)},pointDistance:function(t,e,r,n,i,a,o,s,l,u,c){var f=this.nearestPoint(t,e,r,n,i,a,o,s,l,u,c);return Ha(f.x,f.y,l,u)},interpolationAt:mh,pointAt:function(t,e,r,n,i,a,o,s,l){return{x:mh(t,r,i,o,l),y:mh(e,n,a,s,l)}},divide:function(t,e,r,n,i,a,o,s,l){return Use(t,e,r,n,i,a,o,s,l)},tangentAngle:function(t,e,r,n,i,a,o,s,l){var u=NU(t,r,i,o,l),c=NU(e,n,a,s,l);return GA(Math.atan2(c,u))}};function FU(t,e){var r=Math.abs(t);return e>0?r:r*-1}const Rje={box:function(t,e,r,n){return{x:t-r,y:e-n,width:r*2,height:n*2}},length:function(t,e,r,n){return Math.PI*(3*(r+n)-Math.sqrt((3*r+n)*(r+3*n)))},nearestPoint:function(t,e,r,n,i,a){var o=r,s=n;if(o===0||s===0)return{x:t,y:e};for(var l=i-t,u=a-e,c=Math.abs(l),f=Math.abs(u),h=o*o,d=s*s,p=Math.PI/4,v,g,m=0;m<4;m++){v=o*Math.cos(p),g=s*Math.sin(p);var y=(h-d)*Math.pow(Math.cos(p),3)/o,w=(d-h)*Math.pow(Math.sin(p),3)/s,b=v-y,x=g-w,S=c-y,E=f-w,_=Math.hypot(x,b),k=Math.hypot(E,S),C=_*Math.asin((b*E-x*S)/(_*k)),A=C/Math.sqrt(h+d-v*v-g*g);p+=A,p=Math.min(Math.PI/2,Math.max(0,p))}return{x:t+FU(v,l),y:e+FU(g,u)}},pointDistance:function(t,e,r,n,i,a){var o=this.nearestPoint(t,e,r,n,i,a);return Ha(o.x,o.y,i,a)},pointAt:function(t,e,r,n,i){var a=2*Math.PI*i;return{x:t+r*Math.cos(a),y:e+n*Math.sin(a)}},tangentAngle:function(t,e,r,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-r*Math.sin(a));return GA(o)}};function Nje(t,e,r,n,i,a,o,s){return-1*r*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function Fje(t,e,r,n,i,a,o,s){return-1*r*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function Bje(t,e,r){return Math.atan(-e/t*Math.tan(r))}function $je(t,e,r){return Math.atan(e/(t*Math.tan(r)))}function BU(t,e,r,n,i,a){return r*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+t}function $U(t,e,r,n,i,a){return r*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function zje(t,e,r,n){var i=Math.atan2(n*t,r*e);return(i+Math.PI*2)%(Math.PI*2)}function zU(t,e,r){return{x:t*Math.cos(r),y:e*Math.sin(r)}}function jU(t,e,r){var n=Math.cos(r),i=Math.sin(r);return[t*n-e*i,t*i+e*n]}const jje={box:function(t,e,r,n,i,a,o){for(var s=Bje(r,n,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h)}for(var f=0;f<c.length;f++){var d=BU(t,e,r,n,i,c[f]);d<l&&(l=d),d>u&&(u=d)}for(var p=$je(r,n,i),v=1/0,g=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=p+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(var f=0;f<m.length;f++){var w=$U(t,e,r,n,i,m[f]);w<v&&(v=w),w>g&&(g=w)}return{x:l,y:v,width:u-l,height:g-v}},length:function(t,e,r,n,i,a,o){},nearestPoint:function(t,e,r,n,i,a,o,s,l){var u=jU(s-t,l-e,-i),c=u[0],f=u[1],h=Rje.nearestPoint(0,0,r,n,c,f),d=zje(r,n,h.x,h.y);d<a?h=zU(r,n,a):d>o&&(h=zU(r,n,o));var p=jU(h.x,h.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,r,n,i,a,o,s,l){var u=this.nearestPoint(t,e,r,n,s,l);return Ha(u.x,u.y,s,l)},pointAt:function(t,e,r,n,i,a,o,s){var l=(o-a)*s+a;return{x:BU(t,e,r,n,i,l),y:$U(t,e,r,n,i,l)}},tangentAngle:function(t,e,r,n,i,a,o,s){var l=(o-a)*s+a,u=Nje(t,e,r,n,i,a,o,l),c=Fje(t,e,r,n,i,a,o,l);return GA(Math.atan2(c,u))}};function Wse(t){for(var e=0,r=[],n=0;n<t.length-1;n++){var i=t[n],a=t[n+1],o=Ha(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};r.push(s),e+=o}return{segments:r,totalLength:e}}function Gje(t){if(t.length<2)return 0;for(var e=0,r=0;r<t.length-1;r++){var n=t[r],i=t[r+1];e+=Ha(n[0],n[1],i[0],i[1])}return e}function Uje(t,e){if(e>1||e<0||t.length<2)return null;var r=Wse(t),n=r.segments,i=r.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){var h=(e-a)/f;o=sa.pointAt(u[0],u[1],c[0],c[1],h);break}a+=f}return o}function Wje(t,e){if(e>1||e<0||t.length<2)return 0;for(var r=Wse(t),n=r.segments,i=r.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){o=Math.atan2(c[1]-u[1],c[0]-u[0]);break}a+=f}return o}function Vje(t,e,r){for(var n=1/0,i=0;i<t.length-1;i++){var a=t[i],o=t[i+1],s=sa.pointDistance(a[0],a[1],o[0],o[1],e,r);s<n&&(n=s)}return n}const Vse={box:function(t){for(var e=[],r=[],n=0;n<t.length;n++){var i=t[n];e.push(i[0]),r.push(i[1])}return ey(e,r)},length:function(t){return Gje(t)},pointAt:function(t,e){return Uje(t,e)},pointDistance:function(t,e,r){return Vje(t,e,r)},tangentAngle:function(t,e){return Wje(t,e)}};function GU(t,e){return!t||!e?t||e:{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}}function b6(t,e){var r=t.get("startArrowShape"),n=t.get("endArrowShape"),i=null,a=null;return r&&(i=r.getCanvasBBox(),e=GU(e,i)),n&&(a=n.getCanvasBBox(),e=GU(e,a)),e}function Hje(t){for(var e=t.attr(),r=e.points,n=[],i=[],a=0;a<r.length;a++){var o=r[a];n.push(o[0]),i.push(o[1])}var s=ey(n,i),l=s.x,u=s.y,c=s.width,f=s.height,h={minX:l,minY:u,maxX:l+c,maxY:u+f};return h=b6(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function Xje(t){for(var e=t.attr(),r=e.points,n=[],i=[],a=0;a<r.length;a++){var o=r[a];n.push(o[0]),i.push(o[1])}return ey(n,i)}var JO=null;function Hse(){if(!JO){var t=document.createElement("canvas");t.width=1,t.height=1,JO=t.getContext("2d")}return JO}function Xse(t,e,r){var n=1;if(Ve(t)&&(n=t.split(`
`).length),n>1){var i=Yje(e,r);return e*n+i*(n-1)}return e}function Yje(t,e){return e?e-t:t*.14}function qje(t,e){var r=Hse(),n=0;if(Dt(t)||t==="")return n;if(r.save(),r.font=e,Ve(t)&&t.includes(`
`)){var i=t.split(`
`);Ce(i,function(a){var o=r.measureText(a).width;n<o&&(n=o)})}else n=r.measureText(t).width;return r.restore(),n}function Yse(t){var e=t.fontSize,r=t.fontFamily,n=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return[i,a,n,e+"px",r].join(" ").trim()}function Kje(t){var e=t.attr(),r=e.x,n=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Yse(e));var l=qje(i,s),u;if(!l)u={x:r,y:n,width:0,height:0};else{var c=e.textAlign,f=e.textBaseline,h=Xse(i,a,o),d={x:r,y:n-h};c&&(c==="end"||c==="right"?d.x-=l:c==="center"&&(d.x-=l/2)),f&&(f==="top"?d.y+=h:f==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:l,height:h}}return u}var Qje=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Zje=/[^\s\,]+/ig;function Jje(t){var e=t||[];if(Ft(e))return e;if(Ve(e))return e=e.match(Qje),Ce(e,function(r,n){if(r=r.match(Zje),r[0].length>1){var i=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=i}Ce(r,function(a,o){isNaN(a)||(r[o]=+a)}),e[n]=r}),e}function eGe(t,e,r,n){var i=[],a=!!n,o,s,l,u,c,f,h;if(a){l=n[0],u=n[1];for(var d=0,p=t.length;d<p;d+=1){var v=t[d];l=uh([0,0],l,v),u=ch([0,0],u,v)}}for(var d=0,g=t.length;d<g;d+=1){var v=t[d];if(d===0&&!r)h=v;else if(d===g-1&&!r)f=v,i.push(h),i.push(f);else{var m=[d?d-1:g-1,d-1][r?0:1];o=t[m],s=t[r?(d+1)%g:d+1];var y=[0,0];y=b_(y,s,o),y=Va(y,y,e);var w=Ck(v,o),b=Ck(v,s),x=w+b;x!==0&&(w/=x,b/=x);var S=Va([0,0],y,-w),E=Va([0,0],y,b);f=aa([0,0],v,S),c=aa([0,0],v,E),c=uh([0,0],c,ch([0,0],s,v)),c=ch([0,0],c,uh([0,0],s,v)),S=b_([0,0],c,v),S=Va([0,0],S,-w/b),f=aa([0,0],v,S),f=uh([0,0],f,ch([0,0],o,v)),f=ch([0,0],f,uh([0,0],o,v)),E=b_([0,0],v,f),E=Va([0,0],E,b/w),c=aa([0,0],v,E),a&&(f=ch([0,0],f,l),f=uh([0,0],f,u),c=ch([0,0],c,l),c=uh([0,0],c,u)),i.push(h),i.push(f),h=c}}return r&&i.push(i.shift()),i}function qse(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=[[0,0],[1,1]]);for(var n=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=eGe(i,.4,n,r),l=i.length,u=[],c,f,h,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],h=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]]);return n&&(c=s[l],f=s[l+1],h=i[0],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]])),u}var ew=`	
\v\f\r \u2028\u2029`,tGe=new RegExp("([a-z])["+ew+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ew+"]*,?["+ew+"]*)+)","ig"),rGe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ew+"]*,?["+ew+"]*","ig");function CR(t){if(!t)return null;if(Ft(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(tGe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(rGe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(r.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&r.push([i,o[0]]),s==="r")r.push([i].concat(o));else for(;o.length>=e[s]&&(r.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),r}var nGe=/[a-z]/;function UU(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Kse(t){var e=CR(t);if(!e||!e.length)return[["M",0,0]];for(var r=!1,n=0;n<e.length;n++){var i=e[n][0];if(nGe.test(i)||["V","H","T","S"].indexOf(i)>=0){r=!0;break}}if(!r)return e;var a=[],o=0,s=0,l=0,u=0,c=0,f=e[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,u=s,c++,a[0]=["M",o,s]);for(var n=c,h=e.length;n<h;n++){var d=e[n],p=a[n-1],v=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=d[1],v[2]=d[2],v[3]=d[3],v[4]=d[4],v[5]=d[5],v[6]=+d[6]+o,v[7]=+d[7]+s;break;case"V":v[1]=+d[1]+s;break;case"H":v[1]=+d[1]+o;break;case"M":l=+d[1]+o,u=+d[2]+s,v[1]=l,v[2]=u;break;default:for(var m=1,y=d.length;m<y;m++)v[m]=+d[m]+(m%2?o:s)}else v=e[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=v[1],v=["L",o,s];break;case"V":s=v[1],v=["L",o,s];break;case"T":o=v[1],s=v[2];var w=UU([p[1],p[2]],[p[3],p[4]]);v=["Q",w[0],w[1],o,s];break;case"S":o=v[v.length-2],s=v[v.length-1];var b=p.length,x=UU([p[b-4],p[b-3]],[p[b-2],p[b-1]]);v=["C",x[0],x[1],v[1],v[2],o,s];break;case"M":l=v[v.length-2],u=v[v.length-1];break;default:o=v[v.length-2],s=v[v.length-1]}a.push(v)}return a}function WS(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function kR(t,e){return WS(t)*WS(e)?(t[0]*e[0]+t[1]*e[1])/(WS(t)*WS(e)):1}function WU(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(kR(t,e))}function MR(t,e){return t[0]===e[0]&&t[1]===e[1]}function iGe(t,e){var r=e[1],n=e[2],i=RA(NA(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=Math.sqrt(d),n*=Math.sqrt(d));var p=r*r*(h*h)+n*n*(f*f),v=p?Math.sqrt((r*r*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*r*h/n:0,m=r?v*-n*f/r:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/r,(h-m)/n],x=[(-1*f-g)/r,(-1*h-m)/n],S=WU([1,0],b),E=WU(b,x);return kR(b,x)<=-1&&(E=Math.PI),kR(b,x)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:y,cy:w,rx:MR(t,[u,c])?0:r,ry:MR(t,[u,c])?0:n,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:a,sweepFlag:o}}function VU(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Qse(t){t=Jje(t);for(var e=[],r=null,n=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];n=t[s+1];var u=l[0],c={command:u,prePoint:r,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=iGe(r,l);c.arcParams=f;break}if(u==="Z")r=i,n=t[a+1];else{var h=l.length;r=[l[h-2],l[h-1]]}n&&n[0]==="Z"&&(n=t[a],e[a]&&(e[a].prePoint=r)),c.currentPoint=r,e[a]&&MR(r,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=d;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-r[0],p[1]-r[1]],c.endTangent=[r[0]-p[0],r[1]-p[1]];else if(u==="Q"){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]]}else if(u==="T"){var g=e[s-1],v=VU(g.currentPoint,p);g.command==="Q"?(c.command="Q",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]]):(c.command="TL",c.startTangent=[p[0]-r[0],p[1]-r[1]],c.endTangent=[r[0]-p[0],r[1]-p[1]])}else if(u==="C"){var m=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[m[0]-y[0],m[1]-y[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[y[0]-m[0],y[1]-m[1]])}else if(u==="S"){var g=e[s-1],m=VU(g.currentPoint,p),y=[l[1],l[2]];g.command==="C"?(c.command="C",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]]):(c.command="SQ",c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]])}else if(u==="A"){var w=.001,b=c.arcParams||{},x=b.cx,S=x===void 0?0:x,E=b.cy,_=E===void 0?0:E,k=b.rx,C=k===void 0?0:k,A=b.ry,M=A===void 0?0:A,T=b.sweepFlag,O=T===void 0?0:T,N=b.startAngle,R=N===void 0?0:N,B=b.endAngle,F=B===void 0?0:B;O===0&&(w*=-1);var D=C*Math.cos(R-w)+S,L=M*Math.sin(R-w)+_;c.startTangent=[D-i[0],L-i[1]];var G=C*Math.cos(R+F+w)+S,Y=M*Math.sin(R+F-w)+_;c.endTangent=[p[0]-G,p[1]-Y]}e.push(c)}return e}function aGe(t,e){for(var r=[],n=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=Gse.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=J1.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=jje.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:r.push(s[0]),n.push(s[1]);break}c&&(o.box=c,r.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}r=r.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var h=mc(r),d=mc(n),p=gc(r),v=gc(n);if(i.length===0)return{x:h,y:d,width:p-h,height:v-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=VS(o,e),h=h-g.xExtra):s[0]===p&&(g=VS(o,e),p=p+g.xExtra),s[1]===d?(g=VS(o,e),d=d-g.yExtra):s[1]===v&&(g=VS(o,e),v=v+g.yExtra)}return{x:h,y:d,width:p-h,height:v-d}}function VS(t,e){var r=t.prePoint,n=t.currentPoint,i=t.nextPoint,a=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||tae(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function oGe(t){var e=t.attr(),r=e.path,n=e.stroke,i=n?e.lineWidth:0,a=t.get("segments")||Qse(r),o=aGe(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=b6(t,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function sGe(t){var e=t.attr(),r=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(r,i),s=Math.max(r,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=b6(t,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function lGe(t){var e=t.attr(),r=e.x,n=e.y,i=e.rx,a=e.ry;return{x:r-i,y:n-a,width:i*2,height:a*2}}Ec("rect",Bse);Ec("image",Bse);Ec("circle",$se);Ec("marker",$se);Ec("polyline",Hje);Ec("polygon",Xje);Ec("text",Kje);Ec("path",oGe);Ec("line",sGe);Ec("ellipse",lGe);var uGe=function(t){lr(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return e}(dse),AR=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},x6=function(e){if(Ft(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Pt(e))return[e,e,e,e];if(Ve(e)){var r=parseInt(e,10);return[r,r,r,r]}return[0,0,0,0]},cGe=function(e){var r=new uGe(e.type,e);return r.clientX=e.clientX,r.clientY=e.clientY,r.x=e.x,r.y=e.y,r.target=e.target,r.currentTarget=e.currentTarget,r.bubbles=!0,r.item=e.item,r},fGe=function(e){if(!e)return!1;for(var r=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<r;i++)if(e[i]!==n[i])return!0;return!1},Xu=function(e){return Number.isNaN(Number(e))},Zse=function(e){for(var r=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY;u<r&&(r=u),c<i&&(i=c),f>n&&(n=f),h>a&&(a=h)}var d=Math.floor(r),p=Math.floor(i),v=Math.ceil(n)-Math.floor(r),g=Math.ceil(a)-Math.floor(i);return{x:d,y:p,width:v,height:g,minX:r,minY:i,maxX:n,maxY:a}},hGe=function(e,r,n,i,a){r===void 0&&(r=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=r*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},h=0;h<o;h++){var d=e[h],p=d.source,v=d.target,g="".concat(p,"-").concat(v);if(!c[h]){u[g]||(u[g]=[]),c[h]=!0,u[g].push(d);for(var m=0;m<o;m++)if(h!==m){var y=e[m],w=y.source,b=y.target;c[m]||(p===b&&v===w?(u[g].push(y),c[m]=!0,f["".concat(w,"|").concat(b,"|").concat(u[g].length-1)]=!0):p===w&&v===b&&(u[g].push(y),c[m]=!0))}}}for(var x in u)for(var S=u[x],E=S.length,_=0;_<E;_++){var k=S[_];if(k.source===k.target){a&&(k.type=a),k.loopCfg={position:l[_%8],dist:Math.floor(_/8)*20+50};continue}if(E===1&&i&&k.source!==k.target){k.type=i;continue}k.type=n;var C=(_%2===0?1:-1)*(f["".concat(k.source,"|").concat(k.target,"|").concat(_)]?-1:1);E%2===1?k.curveOffset=C*Math.ceil(_/2)*s:k.curveOffset=C*(Math.floor(_/2)*s+r)}return e};const dGe=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:Zse,cloneEvent:cGe,formatPadding:x6,isNaN:Xu,isViewportChanged:fGe,processParallelEdges:hGe,uniqueId:AR},Symbol.toStringTag,{value:"Module"}));var Dd={};const pGe=su(z7e);Object.defineProperty(Dd,"__esModule",{value:!0});var wd=pGe;function Jse(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return wd.mat3.fromTranslation(n,r),wd.mat3.multiply(t,n,e)}Dd.leftTranslate=Jse;function ele(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return wd.mat3.fromRotation(n,r),wd.mat3.multiply(t,n,e)}Dd.leftRotate=ele;function tle(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return wd.mat3.fromScaling(n,r),wd.mat3.multiply(t,n,e)}Dd.leftScale=tle;function vGe(t,e,r){return wd.mat3.multiply(t,r,e)}function gGe(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":Jse(r,r,[a[1],a[2]]);break;case"s":tle(r,r,[a[1],a[2]]);break;case"r":ele(r,r,a[1]);break;case"m":vGe(r,r,a[1]);break}}return r}var HU=Dd.transform=gGe;function rle(t,e){return t[0]*e[1]-e[0]*t[1]}Dd.direction=rle;function mGe(t,e,r){var n=wd.vec2.angle(t,e),i=rle(t,e)>=0;return r?i?Math.PI*2-n:n:i?n:Math.PI*2-n}Dd.angleTo=mGe;function yGe(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}Dd.vertical=yGe;var wGe=function(){function t(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return t.prototype.getViewCenter=function(){var e=this.getFormatPadding(),r=this.graph,n=this.graph.get("width"),i=r.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},t.prototype.fitCenter=function(e,r){var n=this.graph,i=n.get("group"),a,o=n.getNodes();if(o.length>n.get("optimizeThreshold")){var s=1/0,l=1/0,u=-1/0,c=-1/0;o.forEach(function(b){var x=b.getModel(),S=x.x,E=x.y;s>S&&(s=S),l>E&&(l=E),u<S&&(u=S),c<E&&(c=E)});var f=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=O0({x:s,y:l},f),d=h.x,p=h.y,v=O0({x:u,y:c},f),g=v.x,m=v.y;a={minX:d,maxX:g,minY:p,maxY:m,width:g-d,height:m-p,x:d,y:p}}else a=i.getCanvasBBox();if(!(a.width===0||a.height===0)){var y=this.getViewCenter(),w={x:a.x+a.width/2,y:a.y+a.height/2};n.translate(y.x-w.x,y.y-w.y,e,r)}},t.prototype.animatedFitView=function(e,r,n,i,a,o,s,l){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],f=i.x+a.x-o.x-i.minX,h=i.y+a.y-o.y-i.minY;if(!(Xu(f)||Xu(h))){var d=HU(c,[["t",f,h]]);if(!l){var p=a2({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:d})}});e.animate(function(b){return{matrix:aR(r,d,b)}},p);return}var v=u.get("minZoom"),g=u.get("maxZoom"),m=s;v&&s<v?(m=v,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):g&&s>g&&(m=g,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var y=HU(d,[["t",-a.x,-a.y],["s",m,m],["t",a.x,a.y]]),w=a2({animateCfg:n,callback:function(){e.setMatrix(y),u.emit("viewportchange",{action:"translate",matrix:d}),u.emit("viewportchange",{action:"zoom",matrix:y})}});e.stopAnimate(),e.setMatrix(r),e.animate(function(b){return{matrix:aR(r,y,b)}},w)}},t.prototype.fitView=function(e,r){var n=this.graph,i=this.getFormatPadding(),a=n.get("width"),o=n.get("height"),s=n.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var u,c=n.getNodes();if(c.length>n.get("optimizeThreshold")){var f=1/0,h=1/0,d=-1/0,p=-1/0;c.forEach(function(S){var E=S.getModel(),_=E.x,k=E.y;f>_&&(f=_),h>k&&(h=k),d<_&&(d=_),p<k&&(p=k)}),u={minX:f,maxX:d,minY:h,maxY:p,width:d-f,height:p-h,x:f,y:h}}else u=s.getCanvasBBox();if(!(u.width===0||u.height===0)){var v=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},m=(a-i[1]-i[3])/u.width,y=(o-i[0]-i[2])/u.height,w=m;if(m>y&&(w=y),e)this.animatedFitView(s,l,r,u,v,g,w,!0);else{var b=v.x-g.x,x=v.y-g.y;if(Xu(b)||Xu(x))return;n.translate(b,x),n.zoom(w,v)||console.warn("zoom failed, ratio out of range, ratio: %f",w)}}},t.prototype.fitViewByRules=function(e,r,n){var i=e.onlyOutOfViewPort,a=i===void 0?!1:i,o=e.direction,s=o===void 0?"both":o,l=e.ratioRule,u=l===void 0?"min":l,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),d=c.get("height"),p=c.get("group"),v=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var g,m=c.getNodes();if(m.length>c.get("optimizeThreshold")){var y=1/0,w=1/0,b=-1/0,x=-1/0;m.forEach(function(O){var N=O.getModel(),R=N.x,B=N.y;y>R&&(y=R),w>B&&(w=B),b<R&&(b=R),x<B&&(x=B)}),g={minX:y,maxX:b,minY:w,maxY:x,width:b-y,height:x-w,x:y,y:w}}else g=p.getCanvasBBox();if(!(g.width===0||g.height===0)){var S=this.getViewCenter(),E={x:g.x+g.width/2,y:g.y+g.height/2},_=(h-f[1]-f[3])/g.width,k=(d-f[0]-f[2])/g.height,C;if(s==="x"?C=_:s==="y"?C=k:C=u==="max"?Math.max(_,k):Math.min(_,k),a&&(C=C<1?C:1),r)this.animatedFitView(p,v,n,g,S,E,C,!0);else{var A=c.getZoom(),M=A*C,T=c.get("minZoom");M<T&&(M=T,console.warn("fitview failed, ratio out of range, ratio: %f",C,"graph minzoom has been used instead")),c.translate(S.x-E.x,S.y-E.y),c.zoomTo(M,S)}}},t.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return x6(e)},t.prototype.focusPoint=function(e,r,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),r){var l=(o.x-e.x)*s[0],u=(o.y-e.y)*s[4],c=0,f=0,h=0,d=0;this.graph.get("canvas").animate(function(p){h=l*p,d=u*p,i.graph.translate(h-c,d-f),c=h,f=d},z({},n))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},t.prototype.getPointByCanvas=function(e,r){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=Yoe({x:e,y:r},n);return i},t.prototype.getPointByClient=function(e,r){var n=this.graph.get("canvas"),i=n.getPointByClient(e,r);return this.getPointByCanvas(i.x,i.y)},t.prototype.getClientByPoint=function(e,r){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(e,r),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},t.prototype.getCanvasByPoint=function(e,r){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),O0({x:e,y:r},n)},t.prototype.focus=function(e,r,n){if(Ve(e)&&(e=this.graph.findById(e)),e){var i=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=e.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},r,n)}},t.prototype.focusItems=function(e,r,n,i){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),l=a.get("height"),u=a.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var f={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var p=d[h],v=p.getBBox();v.minX<f.minX&&(f.minX=v.minX),v.minY<f.minY&&(f.minY=v.minY),v.maxX>f.maxX&&(f.maxX=v.maxX),v.maxY>f.maxY&&(f.maxY=v.maxY)}if(f.x=f.minX,f.y=f.minY,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,!(f.width===0||f.height===0)){var g=this.getViewCenter(),m={x:f.x+f.width/2,y:f.y+f.height/2},y=(s-o[1]-o[3])/f.width,w=(l-o[0]-o[2])/f.height,b=y;y>w&&(b=w),n?this.animatedFitView(u,c,i,f,g,m,b,r):(a.translate(g.x-m.x,g.y-m.y),r&&!a.zoom(b,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",b))}}},t.prototype.changeSize=function(e,r){var n=this.graph;if(!Pt(e)||!Pt(r))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:r});var i=n.get("canvas");i.changeSize(e,r);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();function TR(t){"@babel/helpers - typeof";return TR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TR(t)}function XU(t){if(typeof t!="string")return t;var e=function(E){if(typeof E!="string")return E;try{return JSON.parse(E.trim())}catch{return E.trim()}},r=e(t);if(typeof r!="string")return r;for(var n=function(E){return E[E.length-1]},i=t.trim(),a=[],o=[],s=function(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];return E.some(function(k){return n(o)===k})},l=function(){return n(a)},u=null,c=0,f="";c<i.length;){var h=i[c],d=s('"',"'");if(!d&&!h.trim()){c+=1;continue}var p=i[c-1]==="\\",v=s("}"),g=s("]"),m=s(","),y=l();if(d)if(n(o)===h&&!p){o.pop();var w=e(f);y.push(w),u=w,f=""}else f+=h;else if(g&&h===",")f&&(y.push(e(f)),f="");else if(v&&h===":")o.push(","),f&&(y.push(f),f="");else if(m&&h===",")f&&(y.push(e(f)),f=""),o.pop();else if(h==="}"&&(v||m)){f&&(y.push(e(f)),f=""),m&&o.pop();for(var b={},x=1;x<y.length;x+=2)b[y[x-1]]=y[x];a.pop(),a.length&&n(a).push(b),o.pop(),u=b}else h==="]"&&g?(f&&(y.push(e(f)),f=""),a.pop(),a.length&&n(a).push(y),o.pop(),u=y):h==="{"?(a.push([]),o.push("}")):h==="["?(a.push([]),o.push("]")):h==='"'?o.push('"'):h==="'"?o.push("'"):f+=h;c+=1}return u||f}var bGe=function(e){return e.split("-").reduce(function(r,n){return r+n.charAt(0).toUpperCase()+n.slice(1)})},xGe=function(e){return function(r){for(var n=e.length,i=[],a=0,o="";a<n;)if(e[a]==="{"&&e[a+1]==="{")i.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(i.length){var s=i.pop();o=Zc(r,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),i.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'.concat(l,'}"'):l}).join("")}};function nle(t,e){var r={},n=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map(function(s){return nle(s,e)}),a={},o=t.tagName?t.tagName.toLowerCase():"group";return o==="text"&&(r.text=t.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=bGe(s),u=t.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=XU(u);r=z(z({},r),c)}else a[l]=XU(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=r,e&&e.style&&a.name&&TR(e.style[a.name])==="object"&&(a.attrs=z(z({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=z(z({},a.attrs),e.style)),i.length&&(a.children=i),a}function SGe(t,e,r){var n=t.attrs,i=n===void 0?{}:n,a={x:e.x||0,y:e.y||0,width:r.width||0,height:r.height||0},o,s;switch(t.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=ose(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,t.attrs=z({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function ile(t,e){var r;e===void 0&&(e={x:0,y:0});var n=z({x:0,y:0,width:0,height:0},e);if(!((r=t.children)===null||r===void 0)&&r.length){var i=t.attrs,a=i===void 0?{}:i,o=a.marginTop,s=z({},e);o&&(s.y+=o);for(var l=0;l<t.children.length;l++){t.children[l].attrs.key="".concat(a.key||"root"," -").concat(l," ");var u=ile(t.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return t.bbox=SGe(t,e,n),t.attrs=z(z({},t.attrs),t.bbox),t}function ale(t,e){var r,n,i,a,o=(t||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:o,key:s};if(t&&!e)return{action:"add",val:t,type:o};if(!t&&!e)return{action:"same",type:o};var l=[];if(((r=t.children)===null||r===void 0?void 0:r.length)>0||((n=e.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=t.children)===null||i===void 0?void 0:i.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],f=t.children||[],h=0;h<u;h+=1)l.push(ale(f[h],c[h]));var d=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:l}:d.filter(function(v){return v!=="children"}).some(function(v){return t.attrs[v]!==e.attrs[v]||!p.includes(v)})?{action:"change",val:t,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function YU(t){var e={},r=function(i){var a=typeof t=="function"?t(i):t,o=xGe(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=ile(nle(l,i));return s.remove(),u};return{draw:function(i,a){var o=r(i),s=a,l=function u(c){var f=c.attrs,h=f===void 0?{}:f,d=c.bbox,p=c.type,v=c.children,g=wi(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var m=a.addShape(c.type,z({attrs:h,origin:{bbox:d,type:p,children:v}},g));c.keyshape&&(s=m)}c.children&&c.children.forEach(function(y){return u(y)})};return l(o),e[i.id]=[o],s},update:function(i,a){e[i.id]||(e[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=r(i),u=e[i.id].pop(),c=ale(l,u),f=function p(v){var g;v.type!=="group"&&o.addShape(v.type,{attrs:v.attrs}),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(m){return p(m)})},h=function p(v){var g,m=s.find(function(y){return y.attrs.key===v.attrs.key});m&&o.removeChild(m),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(y){return p(y)})},d=function p(v){var g=v.key;if(v.type!=="group"){var m=s.find(function(w){return w.attrs.key===g});switch(v.action){case"change":if(m){var y=v.val.keyshape?a.getOriginStyle():{};m.attr(z(z({},y),v.val.attrs))}break;case"add":f(v.val);break;case"delete":h(v.val);break;case"restructure":h(v.formerTarget),f(v.nowTarget);break}}v.children&&v.children.forEach(function(w){return p(w)})};d(c),e[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var e3={};function qU(t){return e3[t]||(e3[t]=_m(t)),e3[t]}var EGe={defaultShapeType:"defaultType",className:null,getShape:function(e){var r=this,n=r[e]||r[r.defaultShapeType]||r["simple-circle"];return n},draw:function(e,r,n){var i=this.getShape(e);n.shapeMap={};var a=i.draw(r,n);return i.afterDraw&&i.afterDraw(r,n,a),a},baseUpdate:function(e,r,n,i){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,r,i),(o=s.update)===null||o===void 0||o.call(s,r,n,i)),s.afterUpdate&&s.afterUpdate(r,n)},setState:function(e,r,n,i){var a=this.getShape(e);a.setState(r,n,i)},shouldUpdate:function(e){var r=this.getShape(e);return!!r.update},getControlPoints:function(e,r){var n=this.getShape(e);return n.getControlPoints(r)},getAnchorPoints:function(e,r){var n=this.getShape(e);return n.getAnchorPoints(r)}},t3={options:{},draw:function(e,r){return this.drawShape(e,r)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var r=this.options.anchorPoints,n=e.anchorPoints||r;return n}},fn=function(){function t(){}return t.registerFactory=function(e,r){var n=qU(e),i=EGe,a=z(z({},i),r);return t[n]=a,a.className=n,a},t.getFactory=function(e){var r=qU(e);return t[r]},t.registerNode=function(e,r,n){var i=t.Node,a;if(typeof r=="string"||typeof r=="function"){var o=YU(r);a=z(z({},i.getShape("single-node")),o)}else if(r.jsx){var s=r.jsx,o=YU(s);a=z(z(z({},i.getShape("single-node")),o),r)}else{i.getShape(n);var l=n?i.getShape(n):t3;a=z(z({},l),r)}return a.type=e,a.itemType="node",i[e]=a,a},t.registerEdge=function(e,r,n){var i=t.Edge,a=n?i.getShape(n):t3,o=z(z({},a),r);return o.type=e,o.itemType="edge",i[e]=o,o},t.registerCombo=function(e,r,n){var i=t.Combo,a=n?i.getShape(n):t3,o=z(z({},a),r);return o.type=e,o.itemType="combo",i[e]=o,o},t}();fn.registerFactory("node",{defaultShapeType:"circle"});fn.registerFactory("edge",{defaultShapeType:"line"});fn.registerFactory("combo",{defaultShapeType:"circle"});var r3="bboxCache",n3="bboxCanvasCache",ole=function(){function t(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var r={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(r,this.getDefaultCfg(),e);var n=this.get("model"),i=n.id,a=this.get("type");typeof i>"u"?i=AR(a):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var o=e.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||n.stateStyles;c=cn({},u.stateStyles,c),this.set("styles",c)}}}return t.prototype.calculateBBox=function(){var e=this.get("keyShape"),r=this.get("group"),n=Ik(e,r);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),r=this.get("group"),n=Ik(e,r);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var e=this,r=e.get("shapeFactory"),n=e.get("group"),i=e.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!r){e.updatePosition(i);var o=e.getShapeCfg(i),s=o.type,l=r.draw(s,o,n);l&&(e.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(r,s)}},t.prototype.setOriginStyle=function(){var e=this.get("group"),r=e.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var d=this.get("originStyle");a&&!d[a]&&(d[a]={});for(var p=this.getCurrentStatesStyle(),v=function(m){var y=r[m],w=y.get("name"),b=y.attr();if(w&&w!==a){var x=p[w];d[w]||(d[w]={}),x?Object.keys(b).forEach(function(_){var k=b[_];k!==x[_]&&(d[w][_]=k)}):d[w]=y.get("type")!=="image"?Ir(b):i.getShapeStyleByName(w)}else{var S=y.attr(),E={};Object.keys(p).forEach(function(_){var k=p[_];(_===a||!oa(k))&&(E[_]=k)}),Object.keys(S).forEach(function(_){var k=S[_];E[_]!==k&&(a?d[a][_]=k:d[_]=k)})}},s=0;s<r.length;s++)v(s);delete d.path,delete d.matrix,delete d.x,delete d.y,d[a]&&(delete d[a].x,delete d[a].y,delete d[a].matrix,delete d[a].path),i.set("originStyle",d)}else{for(var o={},s=0;s<r.length;s++){var l=r[s],u=l.get("type"),c=l.get("name");if(c&&c!==a)o[c]=u!=="image"?Ir(l.attr()):i.getShapeStyleByName(c),u==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,!a)Object.assign(o,f);else if(c)o[a]=f;else{var h=AR("shape");l.set("name",h),e.shapeMap[h]=l,o[h]=u!=="image"?Ir(l.attr()):i.getShapeStyleByName(c)}}}i.set("originStyle",o)}},t.prototype.restoreStates=function(e,r){var n=this,i=n.get("states");Ce(i,function(a){e.setState(r,a,!0,n)})},t.prototype.init=function(){var e=fn.getFactory(this.get("type"));this.set("shapeFactory",e)},t.prototype.get=function(e){return this._cfg[e]},t.prototype.set=function(e,r){oa(e)?this._cfg=z(z({},this._cfg),e):this._cfg[e]=r},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set(r3,null),this.set(n3,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(e){var r=this.get("group"),n;if(e?n=r.shapeMap[e]||r.find(function(a){return a.get("name")===e}):n=this.getKeyShape(),n){var i={};return Ce(n.attr(),function(a,o){(o!=="img"||Ve(a))&&(i[o]=a)}),i}return{}},t.prototype.getShapeCfg=function(e,r){var n=this.get("styles");if(n){var i=e;return i.style=z(z({},n),e.style),i}return e},t.prototype.getStateStyle=function(e){var r=this.get("styles"),n=r&&r[e];return n},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var e=this,r={},n=e.getStates();return!n||!n.length?this.get("originStyle"):(Ce(e.getStates(),function(i){r=Object.assign(r,e.getStateStyle(i))}),r)},t.prototype.setState=function(e,r){var n=this.get("states"),i=this.get("shapeFactory"),a=e,o=e;Ve(r)&&(a="".concat(e,":").concat(r),o="".concat(e,":"));var s=n;if(fb(r)){var l=n.indexOf(o);if(r){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(Ve(r)){var u=n.filter(function(h){return h.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(h){return!h.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,e,r,this)}},t.prototype.clearStates=function(e){var r=this,n=r.getStates(),i=r.get("shapeFactory"),a=r.get("model"),o=a.type;e||(e=n),Ve(e)&&(e=[e]);var s=n.filter(function(l){return e.indexOf(l)===-1});r.set("states",s),e.forEach(function(l){i.setState(o,l,!1,r)})},t.prototype.setOptimize=function(e){this.optimize=e},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(e){var r=this.getStates();return r.indexOf(e)>=0},t.prototype.refresh=function(e){var r=this.get("model");this.updatePosition(r),this.updateShape(e),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(e){},t.prototype.update=function(e,r){r===void 0&&(r=void 0);var n=this.get("model");if(r==="move")this.updatePosition(e);else{var i=n.visible,a=e.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;$t(s,l),delete e.stateStyles}Object.assign(n,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(r)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(e){var r=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(r.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,e);r.baseUpdate(i,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(r,i)},t.prototype.updatePosition=function(e){var r=this.get("model"),n=isNaN(+e.x)?+r.x:+e.x,i=isNaN(+e.y)?+r.y:+e.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;r.x=n,r.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),qoe(a,{x:n,y:i}),this.clearCache(),!0)},t.prototype.getBBox=function(){var e=this.get(r3);return e||(e=this.calculateBBox(),this.set(r3,e)),e},t.prototype.getCanvasBBox=function(){var e=this.get(n3);return e||(e=this.calculateCanvasBBox(),this.set(n3,e)),e},t.prototype.toFront=function(){var e=this.get("group");e.toFront()},t.prototype.toBack=function(){var e=this.get("group");e.toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(e){var r=this.get("group");e?r.show():r.hide(),this.set("visible",e)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(e){var r=this.get("group");r&&r.set("capture",e)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),r=this.get("group");e&&r.stopAnimate(),r.shapeMap={},this.clearCache(),r.remove(),this._cfg=null,this.destroyed=!0}},t}(),HS={source:"start",target:"end"},ku="Node",Cg="Point",_Ge="Anchor",sle=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(r,n){var i=HS[r]+Cg,a=r+ku,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),oa(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},e.prototype.getLinkPoint=function(r,n,i){var a=HS[r]+Cg,o=r+ku,s=this.get(a);if(!s){var l=this.get(o),u=r+_Ge,c=this.getPrePoint(r,i),f=n[u];Dt(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),Dt(s.index)||this.set("".concat(r,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(r,n){if(n&&n.length){var i=r==="source"?0:n.length-1;return n[i]}var a=r==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(r){var n=r+ku,i=HS[r]+Cg,a=this.get(n);return a&&!a.destroyed?a.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(r){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=r.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},e.prototype.getEndCenter=function(r){var n=r+ku,i=HS[r]+Cg,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(r,n){var i=this,a=i.get("linkCenter"),o=n!=null&&n.includes("move")?r:t.prototype.getShapeCfg.call(this,r);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",r,s),o.endPoint=i.getLinkPoint("target",r,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},e.prototype.getModel=function(){var r=this.get("model"),n=this.get("source".concat(ku)),i=this.get("target".concat(ku));return n?delete r["source".concat(ku)]:r.source=this.get("start".concat(Cg)),i?delete r["target".concat(ku)]:r.target=this.get("end".concat(Cg)),!Ve(r.source)&&!oa(r.source)&&(r.source=r.source.getID()),!Ve(r.target)&&!oa(r.target)&&(r.target=r.target.getID()),r},e.prototype.setSource=function(r){this.setEnd("source",r),this.set("source",r)},e.prototype.setTarget=function(r){this.setEnd("target",r),this.set("target",r)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(r,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=r.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),l=this.get("target");if(!(!s||s.destroyed||!l||l.destroyed)){var u=this.get("styles");if(r.stateStyles){var c=r.stateStyles;$t(u,c),delete r.stateStyles}Object.assign(i,r),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var r=this.get("source".concat(ku)),n=this.get("target".concat(ku));r&&!r.destroyed&&r.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(ole),i3="anchorPointsCache",CGe="bboxCache",S6=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(r,n){for(var i=0,a=r[0],o=Ak(r[0],n),s=0;s<r.length;s++){var l=r[s],u=Ak(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var r=this;return this.get("edges").filter(function(n){return n.get("target")===r})},e.prototype.getOutEdges=function(){var r=this;return this.get("edges").filter(function(n){return n.get("source")===r})},e.prototype.getNeighbors=function(r){var n=this,i=this.get("edges");if(r==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(r==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},e.prototype.getLinkPointByAnchor=function(r){var n=this.getAnchorPoints();return n[r]},e.prototype.getLinkPoint=function(r){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=Hoe({x:o,y:s,r:l.width/2},r);break;case"ellipse":c=Xoe({x:o,y:s,rx:l.width/2,ry:l.height/2},r);break;default:c=Voe(l,r)}var f=c;return u.length&&(f||(f=r),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},e.prototype.getAnchorPoints=function(){var r=this.get(i3);if(!r){r=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];Ce(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};r.push(f)}),this.set(i3,r)}return r},e.prototype.addEdge=function(r){this.get("edges").push(r)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(r){var n=this.getEdges(),i=n.indexOf(r);i>-1&&n.splice(i,1)},e.prototype.clearCache=function(){this.set(CGe,null),this.set(i3,null)},e.prototype.getUpdateType=function(r){var n,i,a,o,s;if(r){var l=!Dt(r.x),u=!Dt(r.y),c=Object.keys(r);if(c.length===1&&(l||u)||c.length===2&&l&&u)return"move";if(Pt(r.x)||Pt(r.y)||r.type||r.anchorPoints||r.size||r!=null&&r.style&&(!((n=r==null?void 0:r.style)===null||n===void 0)&&n.r||!((i=r==null?void 0:r.style)===null||i===void 0)&&i.width||!((a=r==null?void 0:r.style)===null||a===void 0)&&a.height||!((o=r==null?void 0:r.style)===null||o===void 0)&&o.rx||!((s=r==null?void 0:r.style)===null||s===void 0)&&s.ry))return"bbox|label";var f=c.includes("label")||c.includes("labelCfg");return f?"style|label":"style"}},e.prototype.setState=function(r,n){var i=this;if(this.optimize){t.prototype.setState.call(this,r,n);return}this.runWithBBoxAffected(function(){return t.prototype.setState.call(i,r,n)})},e.prototype.clearStates=function(r){var n=this;if(this.optimize){t.prototype.clearStates.call(this,r);return}this.runWithBBoxAffected(function(){return t.prototype.clearStates.call(n,r)})},e.prototype.runWithBBoxAffected=function(r){var n=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(u){n.includes(u)&&(a[u]=i[u])}),r();for(var o=this.getKeyShape().attr(),s=0;s<n.length;s++){var l=n[s];if(o[l]!==a[l]){this.clearCache(),this.getEdges().forEach(function(u){return u.refresh()});break}}},e}(ole),KU="bboxCache",QU="bboxCanvasCache",XS="sizeCache",ZU="anchorPointsCache",lle=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(r){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=r,o=Pt(r.size)?[r.size,r.size]:r.size,s=Pt(r.fixSize)?[r.fixSize,r.fixSize]:r.fixSize,l=o||s||It.defaultCombo.size,u={r:(Math.max(i.width,i.height)||Math.max(l[0],l[1]))/2,width:i.width||l[0],height:i.height||l[1]};a.style=z(z(z({},n),r.style),u);var c=r.padding||It.defaultCombo.padding;return Pt(c)?(u.r+=c,u.width+=c*2,u.height+=c*2):(u.r=u.r+Math.max.apply(Math,c),u.width+=c[1]+c[3]||c[1]*2,u.height+=c[0]+c[2]||c[0]*2),this.set(XS,u),a}return r},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var r=this.get("keyShape"),n=this.get("group"),i=this.get(KU)||{},a=i.x,o=i.x,s=this.get(XS),l=Ik(r,n);if(l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2,s){s.width=Math.max(s.width,l.width),s.height=Math.max(s.height,l.height),this.set(XS,s);var u=r.get("type");u==="circle"?(l.width=s.r*2,l.height=s.r*2):(l.width=s.width,l.height=s.height),l.minX=l.centerX-l.width/2,l.minY=l.centerY-l.height/2,l.maxX=l.centerX+l.width/2,l.maxY=l.centerY+l.height/2}else l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2;return l.x=l.minX,l.y=l.minY,(l.x!==a||l.y!==o)&&this.set(ZU,null),l}},e.prototype.getChildren=function(){var r=this;return{nodes:r.getNodes(),combos:r.getCombos()}},e.prototype.getNodes=function(){var r=this;return r.get("nodes")},e.prototype.getCombos=function(){var r=this;return r.get("combos")},e.prototype.addChild=function(r){var n=this,i=r.getType();switch(i){case"node":n.addNode(r);break;case"combo":n.addCombo(r);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(r){var n=this;return n.get("combos").push(r),!0},e.prototype.addNode=function(r){var n=this;return n.get("nodes").push(r),!0},e.prototype.removeChild=function(r){var n=this,i=r.getType();switch(i){case"node":n.removeNode(r);break;case"combo":n.removeCombo(r);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(r){if(r){var n=this.getCombos(),i=n.indexOf(r);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.removeNode=function(r){if(r){var n=this.getNodes(),i=n.indexOf(r);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.getUpdateType=function(r){},e.prototype.getBBox=function(){this.set(QU,null);var r=this.calculateCanvasBBox();return r},e.prototype.clearCache=function(){this.set(KU,null),this.set(QU,null),this.set(ZU,null)},e.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),n=this.get("group");r&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(XS,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(S6),YS="node",qS="edge",JU="vedge",Yy="combo",kGe="default",eW="Mapper",jc="stateStyles",MGe=function(){function t(e){var r=this;this.edgeToBeUpdateMap={},this.throttleRefresh=t2(function(n){var i=r.graph;if(!(!i||i.get("destroyed"))){var a=r.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var l=s.edge;if(!(!l||l.destroyed)){var u=l.getSource(),c=l.getTarget();!u||u.destroyed||!c||c.destroyed||l.refresh(s.updateType)}}),r.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return t.prototype.addItem=function(e,r){var n=this.graph,i=e===JU?qS:e,a=n.get("".concat(i,"Group"))||n.get("group"),o=_m(i),s=null,l=n.get(i+_m(jc))||{},u=n.get(kGe+o);r[jc]&&(l=r[jc]),u&&Ce(u,function(S,E){ua(S)&&!Ft(S)?r[E]=cn({},S,r[E]):Ft(S)?r[E]=r[E]||Ir(u[E]):r[E]=r[E]||u[E]});var c=n.get(i+eW);if(c){var f=c(r);f[jc]&&(l=f[jc],delete f[jc]),Ce(f,function(S,E){ua(S)&&!Ft(S)?r[E]=cn({},r[E],S):r[E]=f[E]||r[E]})}if(n.emit("beforeadditem",{type:e,model:r}),e===qS||e===JU){var h=void 0,d=void 0;if(h=r.source,d=r.target,h&&Ve(h)&&(h=n.findById(h)),d&&Ve(d)&&(d=n.findById(d)),!h||!d){console.warn("The source or target node of edge ".concat(r.id," does not exist!"));return}h.getType&&h.getType()==="combo"&&(r.isComboEdge=!0),d.getType&&d.getType()==="combo"&&(r.isComboEdge=!0),s=new sle({model:r,source:h,target:d,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(e===YS)s=new S6({model:r,styles:l,group:a.addGroup()});else if(e===Yy){var p=r.children,v=__(p,n),g=void 0,m=void 0;if(isNaN(v.x)?isNaN(r.x)&&(g=Math.random()*100):g=v.x,isNaN(v.y)?isNaN(r.y)&&(m=Math.random()*100):m=v.y,isNaN(r.x)||isNaN(r.y))r.x=g,r.y=m;else{var y=r.x-g,w=r.y-m;this.updateComboSucceeds(r.id,y,w,p)}var b=a.addGroup();b.setZIndex(r.depth),s=new lle({model:r,styles:l,animate:n.get("animate"),bbox:r.collapsed?__([],n):v,group:b}),!r.collapsed&&s.getKeyShape().get("type")==="circle"&&(v.width=Math.hypot(v.height,v.width),v.height=v.width,s.set("bbox",v),s.refresh());var x=s.getModel();(p||[]).forEach(function(S){var E=n.findById(S.id);s.addChild(E),S.depth=x.depth+2})}if(s)return s.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:r}),s},t.prototype.updateItem=function(e,r){var n=this,i,a,o=this.graph;if(Ve(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var l=o.get(s+eW),u=e.getModel(),c=u.x,f=u.y,h=e.getUpdateType(r);if(l){var d=cn({},u,r),p=l(d),v=cn({},u,p,r);p[jc]&&(e.set("styles",v[jc]),delete v[jc]),Ce(v,function(C,A){r[A]=C})}else Ce(r,function(C,A){u[A]&&ua(C)&&!Ft(C)&&(r[A]=z(z({},u[A]),r[A]))});if(o.emit("beforeupdateitem",{item:e,cfg:r}),s===qS){if(r.source){var g=r.source;Ve(g)&&(g=o.findById(g)),e.setSource(g)}if(r.target){var m=r.target;Ve(m)&&(m=o.findById(m)),e.setTarget(m)}e.update(r)}else if(s===YS){e.update(r,h);var y=e.getEdges();h==="move"?Ce(y,function(C){n.edgeToBeUpdateMap[C.getID()]={edge:C,updateType:h},n.throttleRefresh()}):h!=null&&h.includes("bbox")&&Ce(y,function(C){C.refresh(h)})}else if(s===Yy){if(e.update(r,h),!isNaN(r.x)||!isNaN(r.y)){var w=r.x-c||0,b=r.y-f||0;this.updateComboSucceeds(u.id,w,b)}var x=e.getEdges(),S=(h==null?void 0:h.includes("bbox"))||h==="move";if(S&&s===Yy){var E=e.get("shapeFactory"),_=u.type||"circle",k=u.animate===void 0||r.animate===void 0?(a=(i=E[_])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||r.animate;k?setTimeout(function(){if(!(!e||e.destroyed)){var C=e.getKeyShape();!C||C.destroyed||Ce(x,function(A){A&&!A.destroyed&&A.refresh()})}},201):Ce(x,function(C){C.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:r})}},t.prototype.updateCombo=function(e,r,n){var i=this,a,o,s=this.graph;if(Ve(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var l=e.getModel(),u=__(r,s,e),c=u.x,f=u.y;e.set("bbox",u);var h=c,d=f;n?(h=isNaN(l.x)?c:l.x,d=isNaN(l.y)?f:l.y):(h=isNaN(c)?l.x:c,d=isNaN(f)?l.y:f),e.update({x:h,y:d});var p=e.get("shapeFactory"),v=l.type||"circle",g=l.animate===void 0?(o=(a=p[v])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:l.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var m=e.getKeyShape();!m||m.destroyed||(e.getShapeCfg(l),i.updateComboEdges(e))}},201):this.updateComboEdges(e)}},t.prototype.updateComboEdges=function(e){for(var r,n,i=e.getEdges()||[],a=0;a<i.length;a++){var o=i[a];!(o!=null&&o.destroyed)&&!(!((r=o==null?void 0:o.getSource())===null||r===void 0)&&r.destroyed)&&!(!((n=o==null?void 0:o.getTarget())===null||n===void 0)&&n.destroyed)&&o.refresh()}},t.prototype.collapseCombo=function(e,r){r===void 0&&(r=!0);var n=this.graph;Ve(e)&&(e=n.findById(e));var i=e.getChildren();i.nodes.forEach(function(a){n.hideItem(a,r)}),i.combos.forEach(function(a){n.hideItem(a,r)})},t.prototype.updateComboSucceeds=function(e,r,n,i){var a=this;i===void 0&&(i=[]);var o=this.graph;if(!(!r&&!n)){var s=i;if(!(s!=null&&s.length)){var l=o.get("comboTrees");l==null||l.forEach(function(u){Ua(u,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(u){var c=o.findById(u.id);if(c){var f=c.getModel();a.updateItem(u.id,{x:(f.x||0)+r,y:(f.y||0)+n})}})}},t.prototype.expandCombo=function(e,r){r===void 0&&(r=!0);var n=this.graph;Ve(e)&&(e=n.findById(e));var i=e.getChildren(),a=new Set;i.nodes.forEach(function(o){n.showItem(o,r),o.getEdges().forEach(function(s){return a.add(s)})}),i.combos.forEach(function(o){o.getModel().collapsed?o.show():n.showItem(o,r),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},t.prototype.removeItem=function(e){var r=this,n=this.graph;if(Ve(e)&&(e=n.findById(e)),!(!e||e.destroyed)){var i=Ir(e.getModel()),a="";e.getType&&(a=e.getType()),n.emit("beforeremoveitem",{item:i,type:a});var o=n.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===qS){var l=n.get("v".concat(a,"s")),u=l.indexOf(e);u>-1&&l.splice(u,1)}var c=e.get("id"),f=n.get("itemMap");delete f[c];var h=n.get("comboTrees"),d=e.get("id");if(a===YS){var p=e.getModel().comboId;if(h&&p){var v=h,g=!1;h.forEach(function(S){g||Ua(S,function(E){if(E.id===d&&v){var _=v.indexOf(E);return v.splice(_,1),g=!0,!1}return v=E.children,!0})})}for(var m=e.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);p&&n.updateCombo(p)}else if(a===Yy){var w=e.getModel().parentId,b,x=!1;(h||[]).forEach(function(E){x||Ua(E,function(_){return _.id===d?(b=_,x=!0,!1):!0})}),b.removed=!0,b&&b.children&&b.children.forEach(function(E){r.removeItem(E.id)});for(var m=e.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);w&&n.updateCombo(w)}e.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},t.prototype.setItemState=function(e,r,n){var i=this.graph,a=r;Ve(n)&&(a="".concat(r,":").concat(n)),!(e.hasState(a)===n&&n||Ve(n)&&e.hasState(a))&&(i.emit("beforeitemstatechange",{item:e,state:a,enabled:n}),e.setState(r,n),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:a,enabled:n}))},t.prototype.priorityState=function(e,r){var n=this.graph,i=e;Ve(e)&&(i=n.findById(e)),this.setItemState(i,r,!1),this.setItemState(i,r,!0)},t.prototype.clearItemStates=function(e,r){var n=this.graph;Ve(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:r}),e.clearStates(r),n.emit("afteritemstatesclear",{item:e,states:r})},t.prototype.refreshItem=function(e){var r=this.graph;Ve(e)&&(e=r.findById(e)),r.emit("beforeitemrefresh",{item:e}),e.refresh(),r.emit("afteritemrefresh",{item:e})},t.prototype.addCombos=function(e,r){var n=this,i=this.graph;(e||[]).forEach(function(o){Ru(o,function(s){var l;return r.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},t.prototype.changeItemVisibility=function(e,r){var n=this,i=this.graph;if(Ve(e)&&(e=i.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:e,visible:r}),e.changeVisibility(r),e.getType&&e.getType()===YS){var a=e.getEdges();Ce(a,function(c){r&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,r)})}else if(e.getType&&e.getType()===Yy){var o=i.get("comboTrees"),s=e.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||Ua(f,function(h){return h.id===s?(l=h.children,u=!0,!1):!0})}),l&&(!r||r&&!e.getModel().collapsed)&&l.forEach(function(f){var h=i.findById(f.id);n.changeItemVisibility(h,r)});var a=e.getEdges();Ce(a,function(f){r&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,r)})}return i.emit("afteritemvisibilitychange",{item:e,visible:r}),e},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),AGe=function(){function t(e){this.graph=e,this.destroyed=!1}return t.prototype.updateState=function(e,r,n){var i=this.graph.get("states"),a=r;Ve(n)&&(a="".concat(r,":").concat(n)),i[a]||(i[a]=[]),n?i[a].push(e):i[a]=i[a].filter(function(o){return o!==e}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},t.prototype.updateStates=function(e,r,n){var i=this.graph.get("states"),a=Ve(r)?[r]:r;a.forEach(function(o){var s=o;i[s]||(i[s]=[]),Ve(n)&&(s="".concat(o,":").concat(n)),n?i[s].push(e):i[s]=i[s].filter(function(l){return l!==e})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:r})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),TGe=function(e,r){return!e||!r?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=r[i];return a===0&&(a="0"),a||""})},ule=function(e){var r=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,i=e;n<i.length;n++){var a=i[n],o=a.x,s=a.y;r.push(o),r.push(s)}var l=qse(r);return l.unshift(["M",e[0].x,e[0].y]),l},Nk=function(e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*e.x+n*r.x,y:(1-n)*e.y+n*r.y},o=[0,0];rd(o,[r.x-e.x,r.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},IGe=function(e,r){var n=e.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=TGe(a,s)}return r&&(i+="Z"),i},IR=function(e){var r=[];return e.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)r.push([n[a],n[a+1]]);else{var o=n.length;r.push([n[o-2],n[o-1]])}}),r},OR=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var r=e[0],n=e[1],i=e[e.length-1],a=e[e.length-2];e.unshift(i),e.unshift(a),e.push(r),e.push(n);for(var o=[],s=1;s<e.length-2;s+=1){var l=e[s-1].x,u=e[s-1].y,c=e[s].x,f=e[s].y,h=e[s+1].x,d=e[s+1].y,p=s!==e.length-2?e[s+2].x:h,v=s!==e.length-2?e[s+2].y:d,g=c+(h-l)/6,m=f+(d-u)/6,y=h-(p-c)/6,w=d-(v-f)/6;o.push(["C",g,m,y,w,h,d])}return o.unshift(["M",i.x,i.y]),o},tW=function(e,r){return Va([0,0],rd([0,0],e),r)},rW=function(e,r){var n=[e[1]-r[1],r[0]-e[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},nW=function(e,r){return[r[0]-e[0],r[1]-e[1]]};function DR(t,e){var r=function(f){var h=[f[0][0],f[0][1]-e],d=[f[0][0],f[0][1]+e];return"M ".concat(h," A ").concat(e,",").concat(e,",0,0,0,").concat(d," A ").concat(e,",").concat(e,",0,0,0,").concat(h)},n=function(f){var h=Va([0,0],rW(f[0],f[1]),e),d=Va([0,0],h,-1),p=aa([0,0],f[0],h),v=aa([0,0],f[1],h),g=aa([0,0],f[1],d),m=aa([0,0],f[0],d);return"M ".concat(p," L ").concat(v," A ").concat([e,e,"0,0,0",g].join(",")," L ").concat(m," A ").concat([e,e,"0,0,0",p].join(","))};if(!t||t.length<1)return"";if(t.length===1)return r(t);if(t.length===2)return n(t);for(var i=new Array(t.length),a=0;a<i.length;++a){var o=a===0?t[t.length-1]:t[a-1],s=t[a],l=Va([0,0],rW(o,s),e);i[a]=[aa([0,0],o,l),aa([0,0],s,l)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map(function(c,f){var h="";return f===0&&(h="M ".concat(i[i.length-1][1]," ")),h+="".concat(u+c[0]," L ").concat(c[1]),h}),i.join(" ")}function cle(t,e){var r=t.length,n=function(c){var f=[c[0][0],c[0][1]-e],h=[c[0][0],c[0][1]+e];return"M ".concat(f," A ").concat([e,e,"0,0,0",h].join(",")," A ").concat([e,e,"0,0,0",f].join(","))},i=function(c){var f=nW(c[0],c[1]),h=tW(f,e),d=aa([0,0],c[0],Va([0,0],h,-1)),p=aa([0,0],c[1],h),v=1.2*e,g=tW(rd([0,0],f),v),m=Va([0,0],g,-1),y=aa([0,0],d,m),w=aa([0,0],p,m),b=aa([0,0],d,g);return"M ".concat(d," C ").concat([y,w,p].join(",")," S ").concat([b,d].join(",")," Z")};if(!t||r<1)return"";if(r===1)return n(t);if(r===2)return i(t);for(var a=t.map(function(u,c){var f=t[(c+1)%r];return{p:u,v:rd([0,0],nW(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:r-1,l=rd([0,0],aa([0,0],a[s].v,Va([0,0],a[o].v,-1)));a[o].p=aa([0,0],a[o].p,Va([0,0],l,e))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var OGe=function(e,r){for(var n=[],i=0;i<5;i++){var a=Math.cos((18+72*i)/180*Math.PI)*e,o=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*r,l=Math.sin((54+72*i)/180*Math.PI)*r;i===0?n.push(["M",a,-o]):n.push(["L",a,-o]),n.push(["L",s,-l])}return n.push(["Z"]),n};const DGe=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:OR,getControlPoint:Nk,getSpline:ule,getStarPath:OGe,paddedHull:cle,pathToPoints:IR,pointsToPolygon:IGe,roundedHull:DR},Symbol.toStringTag,{value:"Module"}));var iW=function(e,r,n){return(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y)},aW=function(e){var r=e.map(function(f){return{x:f.getModel().x,y:f.getModel().y}});r.sort(function(f,h){return f.x===h.x?f.y-h.y:f.x-h.x});for(var n={},i=r.length-1;i>=0;i--){var a=r[i],o=a.x,s=a.y;n["".concat(o,"-").concat(s)]&&r.splice(i,1),n["".concat(o,"-").concat(s)]=!0}if(r.length===1)return r;for(var l=[],i=0;i<r.length;i++){for(;l.length>=2&&iW(l[l.length-2],l[l.length-1],r[i])<=0;)l.pop();l.push(r[i])}for(var u=[],i=r.length-1;i>=0;i--){for(;u.length>=2&&iW(u[u.length-2],u[u.length-1],r[i])<=0;)u.pop();u.push(r[i])}u.pop(),l.pop();var c=l.concat(u);return c},PGe={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function LGe(t,e,r){var n=!1,i=function(l,u){return e.cells[l+u*e.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=r&&(c+=1),i(l,u-1)>r&&(c+=2),i(l-1,u)>r&&(c+=4),i(l,u)>r&&(c+=8),c},o=function(l,u){for(var c=l,f=u,h,d,p=0;p<e.width*e.height;p++){if(h=c,d=f,t.findIndex(function(g){return g.x===c&&g.y===f})>-1){if(!(t[0].x!==c||t[0].y!==f))return!0}else t.push({x:c,y:f});var v=a(c,f);switch(v){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:h===0&&(d===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:h===1&&(d===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: ".concat(v)),!0}}};this.march=function(){for(var s=0;s<e.width&&!n;s+=1)for(var l=0;l<e.height&&!n;l+=1)i(s,l)>r&&a(s,l)!==15&&(n=o(s,l));return n}}var RGe=function(e,r,n){var i=Math.ceil(e/n),a=Math.ceil(r/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},NGe=function(e,r,n){var i=null,a=Number.POSITIVE_INFINITY;return r.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=Tk(s,l),c=new yv(s.x,s.y,l.x,l.y),f=n.reduce(function(h,d){return f6(d,c)>0?h+1:h},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},fle=function(e,r){var n=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(a){var o=f6(a,r);o>=0&&o<n&&(i=a,n=o)}),i},FGe=function(e,r,n,i){var a=[],o=[];o.push(e);for(var s=!0,l=0,u=function(d,p){var v=!1;return p.forEach(function(g){v||(iR(d,{x:g.x1,y:g.y1})||iR(d,{x:g.x2,y:g.y2}))&&(v=!0)}),v},c=function(d,p){for(var v=0,g=p;v<g.length;v++){var m=g[v],y=m.getBBox(),w=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(i2(w,d.x,d.y))return!0}return!1};s&&l<n;){s=!1;for(var f=function(){var d=o.pop(),p=fle(r,d);if(p){var v=Zoe(p,d),g=v[0],m=v[1];if(m===2){var y=function(b){for(var x=i,S=oW(p,x,g,b),E=u(S,o)||u(S,a),_=c(S,r);!E&&_&&x>=1;)x/=1.5,S=oW(p,x,g,b),E=u(S,o)||u(S,a),_=c(S,r);S&&!E&&(!b||!_)&&(o.push(new yv(d.x1,d.y1,S.x,S.y)),o.push(new yv(S.x,S.y,d.x2,d.y2)),s=!0)};y(!0),s||y(!1)}}s||a.push(d),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function BGe(t,e,r,n,i){var a=NGe(t,r,e);if(a===null)return[];var o=function(f){for(var h=[];f.length>0;){var d=f.pop();if(f.length===0){h.push(d);break}var p=f.pop(),v=new yv(d.x1,d.y1,p.x2,p.y2),g=fle(e,v);g?(h.push(d),f.push(p)):f.push(v)}return h},s=new yv(t.getModel().x,t.getModel().y,a.getModel().x,a.getModel().y),l=FGe(s,e,n,i),u=o(l);return u}var $Ge=function(e,r,n){var i=Object.assign(PGe,n),a=Joe(e.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));e=e.sort(function(y,w){return Tk({x:y.getModel().x,y:y.getModel().y},a)-Tk({x:w.getModel().x,y:w.getModel().y},a)});var o=[],s=[];e.forEach(function(y){var w=BGe(y,r,o,i.maxRoutingIterations,i.morphBuffer);w.forEach(function(b){s.push(b)}),o.push(y)});for(var l=zGe(e,s,i.nodeR0),u=RGe(l.width,l.height,i.pixelGroupSize),c=[],f=[],h=0;h<i.maxMarchingIterations;h++)if(jGe(e,r,s,l,u,i),c=[],f=[],!!new LGe(c,u,i.threshold).march()){var d=c.map(function(y){return{x:Math.round(y.x*i.pixelGroupSize+l.minX),y:Math.round(y.y*i.pixelGroupSize+l.minY)}});if(d){var p=d.length;if(i.skip>1)for(p=Math.floor(d.length/i.skip);p<3&&i.skip>1;)i.skip-=1,p=Math.floor(d.length/i.skip);for(var v=0,g=0;g<p;g+=1,v+=i.skip)f.push({x:d[v].x,y:d[v].y})}var m=function(){for(var w=0,b=e;w<b.length;w++){var x=b[w],S=f.map(function(E){return[E.x,E.y]});if(!i2(S,x.getBBox().centerX,x.getBBox().centerY))return!1}return!0};if(f&&m())return f;if(i.threshold*=.9,h<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&r.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function zGe(t,e,r){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach(function(l){i.push(l.getBBox())}),e.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-r,n.minY=(s.minY<n.minY?s.minY:n.minY)-r,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+r,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+r}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function jGe(t,e,r,n,i,a){function o(d,p){var v=Math.floor((d-p)/a.pixelGroupSize);return v<0?0:v}function s(d,p){return d*a.pixelGroupSize+p}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(p,v){var g=Math.min(o(p.minX,v+n.minX),i.width),m=Math.min(o(p.minY,v+n.minY),i.height),y=Math.min(o(p.maxX,-v+n.minX),i.width),w=Math.min(o(p.maxY,-v+n.minY),i.height);return[g,m,y,w]},f=function(p,v){for(var g=p.getBBox(),m=c(g,a.nodeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var E=y;E<b;E+=1)if(!(v<0&&i[E+S*i.width]<=0)){var _=s(E,n.minX),k=s(S,n.minY),C=tse({x:_,y:k},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(C<Math.pow(a.nodeR1,2)){var A=Math.sqrt(C)-a.nodeR1;i.cells[E+S*i.width]+=v*A*A}}},h=function(p,v){for(var g=p.getBBox(),m=c(g,a.edgeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var E=y;E<b;E+=1)if(!(v<0&&i.cells[E+S*i.width]<=0)){var _=s(E,n.minX),k=s(S,n.minY),C=ese({x:_,y:k},p);if(C<Math.pow(a.edgeR1,2)){var A=Math.sqrt(C)-a.edgeR1;i.cells[E+S*i.width]+=v*A*A}}};a.nodeInfluenceFactor&&t.forEach(function(d){f(d,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&r.forEach(function(d){h(d,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&e.forEach(function(d){f(d,a.negativeNodeInfluenceFactor/l)})}function oW(t,e,r,n){var i=t.getBBox(),a=r[0],o=r[1],s=r[2],l=r[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function f(p,v){return i.width*((p.y-i.minY+(v.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var h=f(o,l);return h<c*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var d=f(a,s);return d<c*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var hle=function(){function t(e,r){this.cfg=cn(this.getDefaultCfg(),r),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return Ve(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return Ve(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(e,r){var n,i,a;switch(this.type){case"round-convex":n=aW(e),a=DR(n.map(function(o){return[o.x,o.y]}),this.padding),i=CR(a);break;case"smooth-convex":n=aW(e),n.length===2?(a=DR(n.map(function(o){return[o.x,o.y]}),this.padding),i=CR(a)):n.length>2&&(a=cle(n.map(function(o){return[o.x,o.y]}),this.padding),i=OR(a));break;case"bubble":n=$Ge(e,r,this.cfg.bubbleCfg),i=n.length>=2&&OR(n);break}return i},t.prototype.render=function(){this.group.addShape("path",{attrs:z({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(e){if(e){Ve(e)&&(e=this.graph.findById(e)),this.members.push(e);var r=this.nonMembers.indexOf(e);return r>-1&&this.nonMembers.splice(r,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(e){if(e){Ve(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var r=this.members.indexOf(e);return r>-1&&this.members.splice(r,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(e){if(e){Ve(e)&&(e=this.graph.findById(e));var r=this.members.indexOf(e);return r>-1?(this.members.splice(r,1),this.updateData(this.members,this.nonMembers),!0):!1}},t.prototype.removeNonMember=function(e){if(e){Ve(e)&&(e=this.graph.findById(e));var r=this.nonMembers.indexOf(e);return r>-1?(this.nonMembers.splice(r,1),this.updateData(this.members,this.nonMembers),!0):!1}},t.prototype.updateData=function(e,r){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return Ve(i)?n.graph.findById(i):i})),r&&(this.nonMembers=r.map(function(i){return Ve(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(e){var r=this.group.findById(this.id);r.attr(z({},e))},t.prototype.updateCfg=function(e){var r=this;this.cfg=cn(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return Ve(n)?r.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return Ve(n)?r.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(e){var r=this,n;Ve(e)?n=this.graph.findById(e):n=e;var i,a=n.getKeyShape();if(n.get("type")==="path")i=IR(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=r.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),Qoe(i,IR(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),qy=yl,GGe="node",dle=function(t){lr(e,t);function e(r){var n=t.call(this)||this;return n.sortCombos=hb(function(){var i=n.get("comboSorted");if(!(!n||n.destroyed||i)){n.set("comboSorted",!0);var a=[],o={},s=n.get("comboTrees");(s||[]).forEach(function(u){Ua(u,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var l=n.getEdges().concat(n.get("vedges"));(l||[]).forEach(function(u){var c=u.getModel(),f=o[c.source]||0,h=o[c.target]||0,d=Math.max(f,h);a[d]?a[d].push(c.id):a[d]=[c.id]}),a.forEach(function(u){if(!(!u||!u.length))for(var c=u.length-1;c>=0;c--){var f=n.findById(u[c]);f&&f.toFront()}})}},500,!1),n.cfg=cn(n.getDefaultCfg(),r),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new f0(n.cfg.maxStep),n.redoStack=new f0(n.cfg.maxStep)),n}return e.prototype.init=function(){this.initCanvas();var r=new wGe(this),n=new N9e(this),i=new MGe(this),a=new AGe(this);this.set({viewController:r,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var r=this.get("canvas");if(r){var n=r.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=r.addGroup({id:"".concat(a,"-root"),className:It.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:It.edgeContainerClassName}),l=o.addGroup({id:"".concat(a,"-node"),className:It.nodeContainerClassName}),u=o.addGroup({id:"".concat(a,"-combo"),className:It.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:It.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(r,n){return oa(r)?this.cfg=z(z({},this.cfg),r):this.cfg[r]=n,r==="enabledStack"&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new f0(this.cfg.maxStep),this.redoStack=new f0(this.cfg.maxStep)),this},e.prototype.get=function(r){var n;return(n=this.cfg)===null||n===void 0?void 0:n[r]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(r){return this.set("minZoom",r)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(r){return this.set("maxZoom",r)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(r,n){Ve(r)&&(r=this.findById(r));var i=this.get("itemController");n||(n=r.get("states")),i.clearItemStates(r,n);var a=this.get("stateController");a.updateStates(r,n,!1)},e.prototype.node=function(r){typeof r=="function"&&this.set("nodeMapper",r)},e.prototype.edge=function(r){typeof r=="function"&&this.set("edgeMapper",r)},e.prototype.combo=function(r){typeof r=="function"&&this.set("comboMapper",r)},e.prototype.findById=function(r){return this.get("itemMap")[r]},e.prototype.find=function(r,n){var i,a=this.get("".concat(r,"s"));return Ce(a,function(o,s){if(n(o,s))return i=o,i}),i},e.prototype.findAll=function(r,n){var i=[];return Ce(this.get("".concat(r,"s")),function(a,o){n(a,o)&&i.push(a)}),i},e.prototype.findAllByState=function(r,n,i){return i?this.findAll(r,function(a){return a.hasState(n)&&i(a)}):this.findAll(r,function(a){return a.hasState(n)})},e.prototype.translate=function(r,n,i,a){var o=this,s=this.get("group"),l=Ir(s.getMatrix());if(l||(l=[1,0,0,0,1,0,0,0,1]),i){var u=a2({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});nR(s,{x:s.getCanvasBBox().x+r,y:s.getCanvasBBox().y+n},i,u||{duration:500,easing:"easeCubic"})}else l=qy(l,[["t",r,n]]),s.setMatrix(l),this.emit("viewportchange",{action:"translate",matrix:l}),this.autoPaint()},e.prototype.moveTo=function(r,n,i,a){var o=this.get("group");nR(o,{x:r,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(r,n,i,a){r&&this.set("fitViewPadding",r);var o=this.get("viewController");n?o.fitViewByRules(n,i,a):o.fitView(i,a),this.autoPaint()},e.prototype.fitCenter=function(r,n){var i=this.get("viewController");i.fitCenter(r,n),this.autoPaint()},e.prototype.addBehaviors=function(r,n){var i=this.get("modeController");return i.manipulateBehaviors(r,n,!0),this},e.prototype.removeBehaviors=function(r,n){var i=this.get("modeController");return i.manipulateBehaviors(r,n,!1),this},e.prototype.updateBehavior=function(r,n,i){var a=this.get("modeController");return a.updateBehavior(r,n,i),this},e.prototype.zoom=function(r,n,i,a){var o=this,s=this.get("group"),l=Ir(s.getMatrix())||[1,0,0,0,1,0,0,0,1],u=this.get("minZoom"),c=this.get("maxZoom"),f=this.getZoom()||1,h=f*r,d=r,p=!1;if(u&&h<u?(d=u/f,p=!0):c&&h>c&&(d=c/f,p=!0),n?l=qy(l,[["t",-n.x,-n.y],["s",d,d],["t",n.x,n.y]]):l=qy(l,[["s",d,d]]),i){var v=Ir(s.getMatrix());v||(v=[1,0,0,0,1,0,0,0,1]);var g=v[0],m=g*d,y=a2({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(w){if(w===1)v=l;else{var b=h6(g,m,w)/v[0];n?v=qy(v,[["t",-n.x,-n.y],["s",b,b],["t",n.x,n.y]]):v=qy(v,[["s",b,b]])}return{matrix:v}},y)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!p},e.prototype.zoomTo=function(r,n,i,a){var o=r/this.getZoom();return this.zoom(o,n,i,a)},e.prototype.focusItem=function(r,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(r,o,s),this.autoPaint()},e.prototype.focusItems=function(r,n,i,a){var o=this.get("viewController");o.focusItems(r,n,i,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(r,n){var i=this.get("viewController");return i.getPointByClient(r,n)},e.prototype.getClientByPoint=function(r,n){var i=this.get("viewController");return i.getClientByPoint(r,n)},e.prototype.getPointByCanvas=function(r,n){var i=this.get("viewController");return i.getPointByCanvas(r,n)},e.prototype.getCanvasByPoint=function(r,n){var i=this.get("viewController");return i.getCanvasByPoint(r,n)},e.prototype.getGraphCenterPoint=function(){var r=this.get("group").getCanvasBBox();return{x:(r.minX+r.maxX)/2,y:(r.minY+r.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(r,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(r,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.hideItem=function(r,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(r,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.refreshItem=function(r){var n=this.get("itemController");n.refreshItem(r)},e.prototype.setAutoPaint=function(r){var n=this;n.set("autoPaint",r);var i=n.get("canvas");i.set("autoDraw",r)},e.prototype.remove=function(r,n){n===void 0&&(n=!0),this.removeItem(r,n)},e.prototype.removeItem=function(r,n){n===void 0&&(n=!0);var i=r;if(Ve(r)&&(i=this.findById(r)),!i&&Ve(r))console.warn("The item ".concat(r," to be removed does not exist!"));else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=z(z({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(z(z({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i,void 0,!1)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var h=uR(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.innerAddItem=function(r,n,i){if(!R9e(r,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(r==="combo"){var s=this.get("itemMap"),l=!1;if(o.forEach(function(p){l||Ru(p,function(v){if(n.parentId===v.id){l=!0;var g=z({id:n.id,depth:v.depth+2},n);v.children?v.children.push(g):v.children=[g],n.depth=g.depth,a=i.addItem(r,n)}var m=s[v.id];return l&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,v.children),!0})}),!l){var u=z({id:n.id,depth:0},n);n.depth=u.depth,o.push(u),a=i.addItem(r,n)}this.set("comboTrees",o),n.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(r==="node"&&Ve(n.comboId)&&o){var c=this.findById(n.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=i.addItem(r,n);var f=this.get("itemMap"),h=!1,d=!1;o.forEach(function(p){d||h||Ru(p,function(v){if(v.id===n.id)return d=!0,!1;if(n.comboId===v.id&&!d){h=!0;var g=Ir(n);g.itemType="node",v.children?v.children.push(g):v.children=[g],g.depth=v.depth+1}return h&&f[v.id].getType&&f[v.id].getType()==="combo"&&i.updateCombo(f[v.id],v.children),!0})})}else a=i.addItem(r,n);if(r==="node"&&n.comboId||r==="combo"&&n.parentId){var c=this.findById(n.comboId||n.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(r,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),l=this.innerAddItem(r,n,s);if(l===!1||l===!0)return l;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var c=z(z({},l.getModel()),{itemType:r}),f={};switch(r){case"node":f.nodes=[c];break;case"edge":f.edges=[c];break;case"combo":f.combos=[c];break}this.pushStack("add",{before:{},after:f})}return l},e.prototype.addItems=function(r,n,i){r===void 0&&(r=[]),n===void 0&&(n=!0),i===void 0&&(i=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!i);for(var o=this.get("itemController"),s=[],l=0;l<r.length;l++){var u=r[l];u.type!=="edge"&&u.type!=="vedge"?s.push(this.innerAddItem(u.type,u.model,o)):s.push(void 0)}for(var l=0;l<r.length;l++){var u=r[l];(u.type==="edge"||u.type==="vedge")&&(s[l]=this.innerAddItem(u.type,u.model,o))}if(i){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){for(var f={nodes:[],edges:[],combos:[]},l=0;l<r.length;l++){var h=r[l].type,d=s[l];if(d&&d!==!0){var p=z(z({},d.getModel()),{itemType:h});switch(h){case"node":f.nodes.push(p);break;case"edge":f.edges.push(p);break;case"combo":f.combos.push(p);break}}}this.pushStack("addItems",{before:{},after:f})}return s},e.prototype.add=function(r,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(r,n,i,a)},e.prototype.updateItem=function(r,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;Ve(r)?s=this.findById(r):s=r;var l=i&&this.get("enabledStack"),u;l&&(u=Ir(s.getModel()));var c="";s.getType&&(c=s.getType());var f=zo([],s.getStates(),!0);if(c==="combo"&&Ce(f,function(v){return a.setItemState(s,v,!1)}),o.updateItem(s,n),c==="combo"&&Ce(f,function(v){return a.setItemState(s,v,!0)}),l){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},p=z({id:u.id},n);switch(c){case"node":h.nodes.push(u),d.nodes.push(p);break;case"edge":h.edges.push(u),d.edges.push(p);break;case"combo":h.combos.push(u),d.combos.push(p);break}this.pushStack("update",{before:h,after:d})}},e.prototype.update=function(r,n,i){i===void 0&&(i=!0),this.updateItem(r,n,i)},e.prototype.setItemState=function(r,n,i){Ve(r)&&(r=this.findById(r));var a=this.get("itemController");a.setItemState(r,n,i);var o=this.get("stateController");o.updateState(r,n,i)},e.prototype.priorityState=function(r,n){var i=this.get("itemController");i.priorityState(r,n)},e.prototype.data=function(r){QG(r),this.set("data",r)},e.prototype.render=function(){var r=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),r.addItems(a.map(function(g){return{type:"node",model:g}}),!1,!1),(u==null?void 0:u.length)!==0){var c=lR(u,a);this.set("comboTrees",c),r.addCombos(u)}r.addItems(s.map(function(g){return{type:"edge",model:g}}),!1,!1);var f=r.get("animate");(r.get("fitView")||r.get("fitCenter"))&&r.set("animate",!1);var h=r.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else d();function d(){(r.get("comboTrees")||[]).forEach(function(g){Ru(g,function(m){var y=r.findById(m.id);return y.getType()==="combo"&&m.collapsed&&(r.collapseCombo(m.id,!1),r.updateCombo(y)),!0})}),r.get("fitView")?r.fitView():r.get("fitCenter")&&r.fitCenter(),r.autoPaint(),r.emit("afterrender"),(r.get("fitView")||r.get("fitCenter"))&&r.set("animate",f),setTimeout(function(){var g;(g=r.getCombos())===null||g===void 0||g.forEach(function(m){m.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var p=this.getNodes();p.forEach(function(g){g.toFront()})}else{var v=this.getEdges();v.forEach(function(g){g.toBack()})}},e.prototype.read=function(r){this.data(r),this.render()},e.prototype.diffItems=function(r,n,i){var a=this,o,s=this.get("itemMap");Ce(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&r===GGe){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(r,l,!1);o&&n["".concat(r,"s")].push(o)})},e.prototype.changeData=function(r,n){var i=this,a;n===void 0&&(n=!0);var o=this,s=r||o.get("data");if(!QG(s))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(b){return o.clearItemStates(b)}),this.getEdges().map(function(b){return o.clearItemStates(b)});var l=this.get("canvas"),u=l.get("localRefresh");l.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),f={nodes:[],edges:[]},h=s.combos;if(h){var d=lR(h,s.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",f,s.nodes),Ce(c,function(b,x){c[x].getModel().depth=0,!(b.getType&&b.getType()==="edge")&&(b.getType&&b.getType()==="combo"?(delete c[x],b.destroy()):f.nodes.indexOf(b)<0&&(delete c[x],o.remove(b,!1)))});for(var p=this.getCombos(),v=p.length,g=v-1;g>=0;g--)p[g].destroyed&&p.splice(g,1);h&&(o.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,s.edges),Ce(c,function(b,x){b.getType&&(b.getType()==="node"||b.getType()==="combo")||f.edges.indexOf(b)<0&&(delete c[x],o.remove(b,!1))}),(this.get("comboTrees")||[]).forEach(function(b){Ru(b,function(x){var S=i.findById(x.id);return S.getType()==="combo"&&x.collapsed&&i.collapseCombo(x.id,!1),!0})}),this.set({nodes:f.nodes,edges:f.edges});var m=(this.get("layout")||{}).relayoutAtChangeData,y=m===void 0?!0:m,w=this.get("layoutController");return y&&w&&(w.changeData(function(){setTimeout(function(){var b;(b=o.getCombos())===null||b===void 0||b.forEach(function(x){x.set("animate",!0)})},0)}),o.get("animate")&&!w.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(b){return b.set("animate",!0)})):o.autoPaint()),setTimeout(function(){l.set("localRefresh",u)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(r){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,r)},e.prototype.createCombo=function(r,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",l;if(r){if(Ve(r))s=r,l={id:r};else{if(s=r.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}l=r}var u=i&&this.get("enabledStack"),c={nodes:[],combos:[]};u&&n.forEach(function(m){var y=a.findById(m),w=y.getType();if(!(w!=="node"&&w!=="combo")){var b=y.getModel();c["".concat(w,"s")].push({id:m,parentId:w==="node"?b.comboId:b.parentId})}});var f=this.get("comboTrees"),h=new Set(n),d=new Map;f&&(f.forEach(function(m){Ru(m,function(y,w,b){if(h.has(y.id)){if(w){var x=a.findById(w.id),S=a.findById(y.id);w.children.splice(b,1),x.removeChild(S),o.updateCombo(x,w.children)}y.itemType==="combo"&&d.set(y.id,y)}return!0})}),f=f.filter(function(m){return!h.has(m.id)}),this.set("comboTrees",f));var p={nodes:[],combos:[]},v=n.map(function(m){var y=a.findById(m),w=y.getModel(),b="";y.getType&&(b=y.getType());var x=d.get(m)||{id:y.getID(),itemType:b};return b==="combo"?(x.parentId=s,w.parentId=s):b==="node"&&(x.comboId=s,w.comboId=s),u&&p["".concat(b,"s")].push({id:w.id,parentId:s}),x});l.children=v,this.addItem("combo",l,!1),this.set("comboSorted",!1),f&&(f.forEach(function(m){Ua(m,function(y){return y.id===s?(y.itemType="combo",y.children=v,!1):!0})}),this.sortCombos()),u&&(p.combos.push(l),this.pushStack("createCombo",{before:c,after:p}));var g=this.findById(s);!g.getModel().parentId&&g.getChildren().combos.length&&this.updateComboTree(g,void 0,!1),setTimeout(function(){g.set("animate",!0)},0)}},e.prototype.uncombo=function(r,n){var i=this,a,o;n===void 0&&(n=!0);var s=this,l=r;if(Ve(r)&&(l=this.findById(r)),!l||l.getType&&l.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=l.getModel(),c=l.getModel().parentId,f=s.get("comboTrees");f||(f=[]);var h=this.get("itemMap"),d=l.get("id"),p,v=[],g=this.get("combos"),m=this.findById(c),y=n&&this.get("enabledStack"),w={};if(y&&(w=Ir(u),w.children=[]),f.forEach(function(E){p||Ru(E,function(_){var k;if(_.id===d){p=_;var C=l.getEdges().map(function(T){return T.getID()});C.forEach(function(T){i.removeItem(T,!1)});var A=g.indexOf(l);g.splice(A,1),delete h[d];var M=Ir(l.getModel());l.destroy(),i.emit("afterremoveitem",{item:M,type:"combo"})}if(c&&p&&_.id===c){m.removeCombo(l),v=_.children;var A=v.indexOf(p);return A!==-1&&v.splice(A,1),(k=p.children)===null||k===void 0||k.forEach(function(O){var N=i.findById(O.id),R=N.getModel();N.getType&&N.getType()==="combo"?(O.parentId=c,delete O.comboId,R.parentId=c,delete R.comboId):N.getType&&N.getType()==="node"&&(O.comboId=c,R.comboId=c),m.addChild(N),v.push(O)}),i.updateCombo(m),!1}return!0})}),!c&&p){var b=f.indexOf(p);f.splice(b,1),(a=p.children)===null||a===void 0||a.forEach(function(E){E.parentId=void 0;var _=i.findById(E.id).getModel();delete _.parentId,delete _.comboId,E.itemType!=="node"&&f.push(E)})}if(y){var x={nodes:[],combos:[]},S={nodes:[],combos:[]};(o=p.children)===null||o===void 0||o.forEach(function(E){var _=i.findById(E.id),k=_.getType();k!=="node"&&k!=="combo"||(x["".concat(k,"s")].push({id:E.id,parentId:d}),S["".concat(k,"s")].push({id:E.id,parentId:c}))}),x.combos.push(w),this.pushStack("uncombo",{before:x,after:S})}},e.prototype.updateCombos=function(r){var n=this;r===void 0&&(r=!1);var i=this,a=this.get("comboTrees"),o=i.get("itemController"),s=i.get("itemMap");(a||[]).forEach(function(l){Ru(l,function(u){var c;if(!u)return!0;var f=s[u.id];if(((c=f==null?void 0:f.getType)===null||c===void 0?void 0:c.call(f))==="combo"){var h=zo([],f.getStates(),!0);Ce(h,function(d){return n.setItemState(f,d,!1)}),o.updateCombo(f,u.children,r),Ce(h,function(d){return n.setItemState(f,d,!0)})}return!0})}),i.sortCombos()},e.prototype.updateCombo=function(r){var n=this,i=this,a=r,o;if(Ve(r)&&(a=this.findById(r)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){Ru(c,function(f){if(!f)return!0;var h=u[f.id];if(o===f.id&&h&&h.getType&&h.getType()==="combo"){var d=zo([],h.getStates(),!0);Ce(d,function(p){h.getStateStyle(p)&&n.setItemState(h,p,!1)}),l.updateCombo(h,f.children),Ce(d,function(p){h.getStateStyle(p)&&n.setItemState(h,p,!0)}),o&&(o=f.parentId)}return!0})})},e.prototype.updateComboTree=function(r,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;Ve(r)?o=a.findById(r):o=r;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var c=this.get("comboTrees"),f=!0,h;if((c||[]).forEach(function(y){h||Ua(y,function(w){if(!h)return w.id===o.getID()&&(h=w),!0})}),Ua(h,function(y){return y.id===n?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var d={},p={};u==="combo"?(d.combos=[{id:s.id,parentId:s.parentId}],p.combos=[{id:s.id,parentId:n}]):u==="node"&&(d.nodes=[{id:s.id,parentId:s.comboId}],p.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:d,after:p})}if(s.parentId||s.comboId){var v=this.findById(s.parentId||s.comboId);v&&v.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=uR(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},e.prototype.save=function(){var r=[],n=[],i=[];return Ce(this.get("nodes"),function(a){r.push(a.getModel())}),Ce(this.get("edges"),function(a){n.push(a.getModel())}),Ce(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:r,edges:n,combos:i}},e.prototype.changeSize=function(r,n){var i=this.get("viewController");return i.changeSize(r,n),this},e.prototype.refresh=function(){var r=this;if(r.emit("beforegraphrefresh"),r.get("animate"))r.positionsAnimate();else{var n=r.get("nodes"),i=r.get("edges"),a=r.get("edges");Ce(n,function(o){o.refresh()}),Ce(i,function(o){o.refresh()}),Ce(a,function(o){o.refresh()})}r.emit("aftergraphrefresh"),r.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(r){if(Ve(r)&&(r=this.findById(r)),!r||r.getType&&r.getType()!=="combo"){console.warn("The combo does not exist!");return}return r.getChildren()},e.prototype.positionsAnimate=function(r){var n=this;n.emit("beforeanimate");var i=n.get("animateCfg"),a=i.onFrame,o=r?n.getNodes().concat(n.getCombos()):n.getNodes(),s=o.map(function(u){var c=u.getModel();return{id:c.id,x:c.x,y:c.y}});n.stopAnimate();var l=n.get("canvas");n.animating=!0,setTimeout(function(){l.animate(function(u){Ce(s,function(c){var f=n.findById(c.id);if(!(!f||f.destroyed)){var h=f.get("originAttrs"),d=f.get("model"),p=f.getContainer().getMatrix();if(h==null&&(p&&(h={x:p[6],y:p[7]}),f.set("originAttrs",h||0)),a){var v=a(f,u,c,h||{x:0,y:0});f.set("model",Object.assign(d,v))}else h?(d.x=h.x+(c.x-h.x)*u,d.y=h.y+(c.y-h.y)*u):(d.x=c.x,d.y=c.y)}}),n.refreshPositions(r)},{duration:i.duration,easing:i.easing,callback:function(){Ce(o,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),n.emit("afteranimate"),n.animating=!1}})},0)},e.prototype.refreshPositions=function(r){var n=this;n.emit("beforegraphrefreshposition");var i=n.get("nodes"),a=n.get("edges"),o=n.get("vedges"),s=n.get("combos"),l,u={},c=function(h){Ce(h,function(d){l=d.getModel();var p=d.get("originAttrs");if(!(p&&l.x===p.x&&l.y===p.y)){var v=d.updatePosition({x:l.x,y:l.y});u[l.id]=v,l.comboId&&(u[l.comboId]=u[l.comboId]||v),l.parentId&&(u[l.parentId]=u[l.parentId]||v)}})};c(s),c(i),s&&s.length!==0&&(r&&c(s),n.updateCombos()),Ce(a,function(f){var h=f.getSource().getModel(),d=f.getTarget();if(!oa(d)){var p=d.getModel();(u[h.id]||u[p.id]||f.getModel().isComboEdge)&&f.refresh()}}),Ce(o,function(f){f.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){var r=this.get("canvas"),n=r.cfg.timeline;n&&n.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var r=this.get("group").getMatrix();return r?r[0]:1},e.prototype.getCurrentMode=function(){var r=this.get("modeController");return r.getMode()},e.prototype.setMode=function(r){var n=this.get("modeController");return n.setMode(r),this},e.prototype.clear=function(r){var n;return r===void 0&&(r=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),r||this.emit("afterrender"),this},e.prototype.updateLayout=function(r,n,i,a){var o=this;r===void 0&&(r={}),a===void 0&&(a=!0);var s=this.get("layoutController");if(Ve(r)&&(r={type:r}),n){var l=i;l||(n==="begin"?l={x:0,y:0}:l={x:this.getWidth()/2,y:this.getHeight()/2}),l=this.getPointByCanvas(l.x,l.y);var u=["force","gForce","fruchterman","force2"];u.includes(r.type)||!r.type&&u.includes(s==null?void 0:s.layoutType)?r.center=[l.x,l.y]:this.once("afterlayout",function(h){var d=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];l.x=l.x*d[0]+d[6],l.y=l.y*d[0]+d[7];var p=o.getGroup().getCanvasBBox(),v=p.minX,g=p.maxX,m=p.minY,y=p.maxY,w={x:(v+g)/2,y:(m+y)/2};n==="begin"&&(w.x=v,w.y=m),o.translate(l.x-w.x,l.y-w.y)})}var c=z({},this.get("layout")),f={};Object.assign(f,c,r),r.pipes&&!r.type?delete f.type:!r.pipes&&f.type&&delete f.pipes,this.set("layout",f),s&&(s.isLayoutTypeSame(f)&&f.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(f):s.changeLayout(f),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:f}))},e.prototype.destroyLayout=function(){var r=this.get("layoutController");r==null||r.destroyLayout()},e.prototype.layout=function(){var r,n=this.get("layoutController"),i=this.get("layout");if(!(!i||!n)){if(i.workerEnabled){n.layout();return}!((r=n.layoutMethods)===null||r===void 0)&&r.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(r,n){var i=this;if(n===void 0&&(n=!0),!this.destroyed){if(Ve(r)&&(r=this.findById(r)),!r){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:r});var a=r.getModel(),o=this.get("itemController");o.collapseCombo(r,n),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||Ua(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var p=i.findById(d.id);p&&p.getType&&p.getType()==="combo"&&(l=l.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={};s.forEach(function(h){var d=h.getModel(),p=d.isVEdge,v=d.size,g=v===void 0?1:v;if(!(h.isVisible()&&!p)){var m=h.getSource(),y=h.getTarget(),w=null,b;if(m.getModel().id===a.id||l.includes(m)&&!l.includes(y)?(w=y,b=!1):(y.getModel().id===a.id||!l.includes(m)&&l.includes(y))&&(w=m,b=!0),w){if(p){i.removeItem(h,!1);return}for(var x=w.getModel();!w.isVisible();){var S=x.parentId,E=x.comboId,_=S||E;if(w=i.findById(_),!w||!_)return;x=w.getModel()}var k=x.id,C=b?{source:k,target:a.id,size:g,isVEdge:!0}:{source:a.id,target:k,size:g,isVEdge:!0},A="".concat(C.source,"-").concat(C.target);if(f[A]){f[A].size+=g;return}f[A]=C}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:r})}},e.prototype.expandCombo=function(r,n){var i=this;if(n===void 0&&(n=!0),Ve(r)&&(r=this.findById(r)),!r||r.getType&&r.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:r});var a=r.getModel(),o=this.get("itemController");o.expandCombo(r,n),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||Ua(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var p=i.findById(d.id);p&&p.getType&&p.getType()==="combo"&&(l=l.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={};s.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var d=h.getSource(),p=h.getTarget(),v=d.get("id"),g=p.get("id"),m=null,y;if(v===a.id||l.includes(d)&&!l.includes(p)?(m=p,y=!1):g===a.id||!l.includes(d)&&l.includes(p)?(m=d,y=!0):l.includes(d)&&l.includes(p)&&d.isVisible()&&p.isVisible()&&h.show(),m){var w=h.getModel(),b=w.isVEdge,x=w.size,S=x===void 0?1:x;if(b){i.removeItem(h,!1);return}for(var E=m.getModel();!m.isVisible();){var _=E.parentId,k=E.comboId,C=_||k;if(m=i.findById(C),!m||!C)return;E=m.getModel()}for(var A=E.id,M=y?p:d,T=M.getModel();!M.isVisible();){var O=T.parentId,N=T.comboId,R=O||N;if(M=i.findById(R),!M||!R)return;if(T.comboId===a.id||T.parentId===a.id)break;T=M.getModel()}var B=T.id;if(A){var F=y?{source:A,target:B,isVEdge:!0,size:S}:{source:B,target:A,isVEdge:!0,size:S},D="".concat(F.source,"-").concat(F.target);if(f[D]){f[D].size+=S;return}f[D]=F}}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:r})},e.prototype.collapseExpandCombo=function(r,n){if(n===void 0&&(n=!0),Ve(r)&&(r=this.findById(r)),!(!r||r.getType&&r.getType()!=="combo")){for(var i=r.getModel(),a=this.findById(i.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=i.collapsed;s?this.expandCombo(r,n):this.collapseCombo(r,n),this.updateCombo(r)}},e.prototype.getNeighbors=function(r,n){var i=r;return Ve(r)&&(i=this.findById(r)),i.getNeighbors(n)},e.prototype.getNodeDegree=function(r,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=r;Ve(r)&&(a=this.findById(r));var o=this.get("degrees");(!o||i)&&(o=_f(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(r,n,i){if(r===void 0&&(r="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn(" undo & redo  Graph  enabledStack: true !");return}var a=n?Ir(n):{before:{},after:Ir(this.save())};i==="redo"?this.redoStack.push({action:r,data:a}):this.undoStack.push({action:r,data:a}),this.emit("stackchange",{action:r,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(r,n){r===void 0&&(r=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!r)&&(i=mv(this.save(),n),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(r,n){r===void 0&&(r=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!r)&&(i=mv(this.save(),n),this.set("adjMatrix",i)),(!a||!r)&&(a=n2(this.save(),n),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(r,n,i){return t.prototype.on.call(this,r,n,i)},e.prototype.destroy=function(){var r,n,i,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(r=this.get("itemController"))===null||r===void 0||r.destroy(),(n=this.get("modeController"))===null||n===void 0||n.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(r){if(!r.members||r.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[r.id])return console.warn("Existed hull id."),i[r.id];var a=n.addGroup({id:"".concat(r.id,"-container")}),o=new hle(this,z(z({},r),{group:a})),s=o.id;return i[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(r){return this.get("hullMap")[r]},e.prototype.removeHull=function(r){var n,i;Ve(r)?i=this.getHullById(r):i=r,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},e.prototype.removeHulls=function(){var r=this.getHulls();!r||!Object.keys(r).length||(Object.keys(r).forEach(function(n){var i=r[n];i.destroy()}),this.set("hullMap",{}))},e}(cae);function PR(t){"@babel/helpers - typeof";return PR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PR(t)}var kg=yl,sW="-shape",a3="-label",KS=["startArrow","endArrow"],lW={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},UGe={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},QS={edge:UGe,node:lW,combo:lW},LR="-label-bg",E6={options:{labelCfg:{style:{fontFamily:It.windowFontFamily}},descriptionCfg:{style:{fontFamily:It.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,r){return r==="move"||r!=null&&r.includes("bbox")?e:cn({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,r){r.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,r);if(n.set("className",this.itemType+sW),r.shapeMap[this.itemType+sW]=n,e.label){var i=this.drawLabel(e,r);i.set("className",this.itemType+a3),r.shapeMap[this.itemType+a3]=i}return n},afterDraw:function(e,r,n){},drawShape:function(e,r){return null},drawLabel:function(e,r){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,i=n||{},a=this.getLabelStyle(e,i,r),o=a.rotate;delete a.rotate;var s=r.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(r.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=kg(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=kg(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=kg(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=kg(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=kg(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(e,r,s),f=this.itemType+LR;c.set("classname",f),r.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(e,r,n){var i=this.options.labelCfg,a=$t({},i,e.labelCfg),o=this.getLabelBgStyleByPosition(n,a),s=r.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return r.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,r,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,r){return{}},getLabelStyle:function(e,r,n){var i=this.getLabelStyleByPosition(e,r,n),a="".concat(this.itemType,"Label"),o=It[a]?It[a].style:null;return z(z(z({},o),i),r.style)},getShapeStyle:function(e){return e.style},update:function(e,r,n){this.updateShapeStyle(e,r,n),this.updateLabel(e,r,n)},updateShapeStyle:function(e,r,n){var i,a=r.getContainer(),o=r.getKeyShape(),s=$t({},o.attr(),e.style),l=function(f){var h,d=s[f];if(oa(d)){var p=((i=a.shapeMap)===null||i===void 0?void 0:i[f])||a.find(function(v){return v.get("name")===f});p==null||p.attr(d)}else o.attr((h={},h[f]=d,h))};for(var u in s)l(u)},updateLabel:function(e,r,n){var i,a,o=r.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+a3,c=o.shapeMap[u]||o.find(function(b){return b.get("className")===u}),f=this.itemType+LR,h=o.shapeMap[f]||o.find(function(b){return b.get("className")===f});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[f])),e.label||e.label==="")if(c){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=cn(l,e.labelCfg));var p=this.getLabelStyleByPosition(e,l,o),v=(i=e.labelCfg)===null||i===void 0?void 0:i.style,g=z(z({},p),v),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var y=[1,0,0,0,1,0,0,0,1];y=kg(y,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=y,c.attr(g)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(g);if(!h)g.background&&(h=this.drawLabelBg(e,o,c),h.set("classname",f),o.shapeMap[f]=h,c.toFront());else if(g.background){var w=this.getLabelBgStyleByPosition(c,l);h.attr(w)}else o.removeChild(h)}else{var d=this.drawLabel(e,o);d.set("className",u),o.shapeMap[u]=d}},afterUpdate:function(e,r){},setState:function(e,r,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=fb(r)?e:"".concat(e,":").concat(r),c=this.getStateStyle(u,n),f=n.getStateStyle(u);if(!(!f&&!c)){var h=$t({},f||c),d=n.getContainer(),p={x:1,y:1,cx:1,cy:1,matrix:1};if(l==="combo"&&(p.r=1,p.width=1,p.height=1),r){var v=function(R){var B,F=h[R];if(oa(F)&&!KS.includes(R)){var D=((o=d.shapeMap)===null||o===void 0?void 0:o[R])||d.find(function(L){return L.get("name")===R});D==null||D.attr(F)}else s.attr((B={},B[R]=F,B))};for(var g in h)v(g)}else{var m=C_(n.getCurrentStatesStyle()),y=n.getModel(),w=$t({},y.style,C_(n.getOriginStyle())),b=s.get("name"),x=s.attr(),S={};Object.keys(x).forEach(function(N){if(N!=="img"){var R=x[N];R&&PR(R)==="object"?S[N]=Ir(R):S[N]=R}});var E={},_=function(R){var B=h[R];if(oa(B)&&!KS.includes(R)){var F=d.shapeMap[R]||d.find(function(G){return G.get("name")===R});if(F){var D=C_(F.attr());Ce(B,function(G,Y){if(R===b&&S[Y]&&!p[Y]){delete S[Y];var Z=w[R][Y]||QS[l][Y];s.attr(Y,Z)}else if(D[Y]||D[Y]===0){delete D[Y];var q=w[R][Y]||QS[l][Y];F.attr(Y,q)}}),E[R]=D}}else if(S[R]&&!p[R]){delete S[R];var L=w[R]||(w[b]?w[b][R]:void 0)||QS[l][R];s.attr(R,L)}};for(var k in h)_(k);b?E[b]=S:$t(E,S);for(var g in m)if(!p[g]){var C=m[g];(!oa(C)||KS.includes(g))&&(b?($t(w[b],(a={},a[g]=C,a)),delete w[g]):$t(w,(i={},i[g]=C,i)),delete m[g])}var A={};cn(A,w,E,m);var M=!1,T=function(R){var B,F,D=A[R];if(oa(D)&&!KS.includes(R)){var L=d.shapeMap[R]||d.find(function(Y){return Y.get("name")===R});L&&((L.get("type")==="text"||L.get("labelRelated"))&&(delete D.x,delete D.y,delete D.matrix),R===b&&(l==="combo"&&(delete D.r,delete D.width,delete D.height),M=!0),L.attr(D))}else if(!M){var G=D||QS[l][R];l==="combo"?b||s.attr((B={},B[R]=G,B)):s.attr((F={},F[R]=G,F))}};for(var O in A)T(O)}}}},getStateStyle:function(e,r){var n=r.getModel(),i=r.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[e]:o&&o[e];return i==="combo"?Ir(u):$t({},l,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var r,n,i=(e==null?void 0:e.anchorPoints)||((r=this.getCustomConfig(e))===null||r===void 0?void 0:r.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},WGe={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:It.nodeLabel.offset,getSize:function(e){var r,n=((r=this.mergeStyle)===null||r===void 0?void 0:r.size)||e.size||this.getOptions({}).size||It.defaultNode.size;return Ft(n)&&n.length===1&&(n=[n[0],n[0]]),Ft(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,r){var n=r.maxLength,i=e.label;n&&(i=sse(i,n));var a=r.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:i,textBaseline:"middle",textAlign:"center"};var o=r.offset;Dt(o)&&(o=this.offset);var s=this.getSize(e),l;switch(a){case"top":l={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":l={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:l={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return l.text=i,l},getLabelBgStyleByPosition:function(e,r){var n;if(!e)return{};var i=(n=r.style)===null||n===void 0?void 0:n.background;if(!i)return{};var a=e.getBBox(),o=x6(i.padding),s=a.width+o[1]+o[3],l=a.height+o[0]+o[2];return z(z({x:a.minX-o[3],y:a.minY-o[0]},i),{width:s,height:l})},drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e),a=r.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return r.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=r.shapeMap["link-point-left"]||r.find(function(A){return A.get("className")==="link-point-left"}),a=r.shapeMap["link-point-right"]||r.find(function(A){return A.get("className")==="link-point-right"}),o=r.shapeMap["link-point-top"]||r.find(function(A){return A.get("className")==="link-point-top"}),s=r.shapeMap["link-point-bottom"]||r.find(function(A){return A.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=$t({},l,e.linkPoints),c=u.fill,f=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var p=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},v=p.left,g=p.right,m=p.top,y=p.bottom,w=this.getSize(e),b=w[0],x=w[1],S={r:d,fill:c,stroke:f,lineWidth:h};if(i)!v&&v!==void 0?(i.remove(),delete r.shapeMap["link-point-left"]):i.attr(z(z({},S),{x:-b/2,y:0}));else if(v){var E="link-point-left";r.shapeMap[E]=r.addShape("circle",{attrs:z(z({},S),{x:-b/2,y:0}),className:E,name:E,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete r.shapeMap["link-point-right"]),a.attr(z(z({},S),{x:b/2,y:0}));else if(g){var _="link-point-right";r.shapeMap[_]=r.addShape("circle",{attrs:z(z({},S),{x:b/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete r.shapeMap["link-point-top"]),o.attr(z(z({},S),{x:0,y:-x/2}));else if(m){var k="link-point-top";r.shapeMap[k]=r.addShape("circle",{attrs:z(z({},S),{x:0,y:-x/2}),className:k,name:k,isAnchorPoint:!0})}if(s)!y&&y!==void 0?(s.remove(),delete r.shapeMap["link-point-bottom"]):s.attr(z(z({},S),{x:0,y:x/2}));else if(y){var C="link-point-bottom";r.shapeMap[C]=r.addShape("circle",{attrs:z(z({},S),{x:0,y:x/2}),className:C,name:C,isAnchorPoint:!0})}},updateShape:function(e,r,n,i,a){var o=r.get("keyShape");o.attr(z({},n)),this.updateLabel(e,r,a),i&&this.updateIcon(e,r)},updateIcon:function(e,r){var n=this,i=r.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,l=o.text,u=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(m){return m.get("name")==="".concat(n.type,"-icon")});if(u)if(s||s===void 0){var c=$t({},u.attr(),a),f=c.width,h=f===void 0?20:f,d=c.height,p=d===void 0?20:d;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(h=0,p=0),u.attr(z(z({},c),{x:-h/2,y:-p/2}))}else u.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(s){var v="".concat(this.type,"-icon");if(l)i.shapeMap[v]=i.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:v,name:v});else{var h=a.width,p=a.height;i.shapeMap[v]=i.addShape("image",{attrs:z(z({},a),{x:-h/2,y:-p/2}),className:v,name:v})}var g=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});g&&g.toFront()}}},VGe=z(z({},E6),WGe);fn.registerNode("single-node",VGe);var ZS="edge-shape";function HGe(t){var e=t;return t==="start"?e="end":t==="end"&&(e="start"),e}var XGe={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:It.defaultEdge.size,style:{x:0,y:0,stroke:It.defaultEdge.style.stroke,lineAppendWidth:It.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:It.edgeLabel.style.fill,fontSize:It.edgeLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:z({},It.edgeStateStyles)},getPath:function(e){var r=[];return Ce(e,function(n,i){i===0?r.push(["M",n.x,n.y]):r.push(["L",n.x,n.y])}),r},getShapeStyle:function(e){var r=this.options.style,n={stroke:e.color},i=$t({},r,n,e.style),a=e.size||It.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=$t({},It.defaultEdge.style,{stroke:It.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(e,r,n){var i,a=r.getContainer(),o=((i=r.getKeyShape)===null||i===void 0?void 0:i.call(r))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var l=e.startPoint,u=e.endPoint,c=this.getControlPoints(e),f=[l];c&&(f=f.concat(c)),f.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var p=e.sourceNode,v=e.targetNode,g={radius:d.radius};c||(g={source:p,target:v,offset:d.offset,radius:d.radius});var m=this.getPath(f,g),y={};n==="move"?y={path:m}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),y=z({},e.style),y.lineWidth===void 0&&(y.lineWidth=(Pt(s)?s:s==null?void 0:s[0])||h.lineWidth),y.path===void 0&&(y.path=m),y.stroke===void 0&&(y.stroke=h.stroke||e.color)),o&&o.attr(y)},getLabelStyleByPosition:function(e,r,n){var i=r.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[ZS],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=r.refX||this.refX,u=r.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+l,a.y=e.startPoint.y+u,a.text=e.label,a;var c;Dt(r.autoRotate)?c=this.labelAutoRotate:c=r.autoRotate;var f=ise(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,r){if(!e)return{};var n=e.getBBox(),i=r.style&&r.style.background;if(!i)return{};var a=i.padding,o=n.width+a[1]+a[3],s=n.height+a[0]+a[2],l=z(z({},i),{width:o,height:s,x:n.minX-a[3],y:n.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),u;return Dt(r.autoRotate)?u=this.labelAutoRotate:u=r.autoRotate,u&&(l.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(e,r){var n="center";return r?(r=r%(Math.PI*2),e!=="center"&&(r>=0&&r<=Math.PI/2||r>=3/2*Math.PI&&r<2*Math.PI?n=e:n=HGe(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("path",{className:ZS,name:ZS,attrs:n});return r.shapeMap[ZS]=i,i},drawLabel:function(e,r){var n=this.options.labelCfg,i=cn({},n,e.labelCfg),a=this.getLabelStyle(e,i,r),o=a.rotate;delete a.rotate;var s=r.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(r.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(e,r,s,a,o),u=this.itemType+LR;l.set("classname",u),r.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(e,r,n,i,a){var o=this.options.labelCfg,s=cn({},o,e.labelCfg),l=this.getLabelBgStyleByPosition(n,s),u=r.addShape("rect",{name:"text-bg-shape",attrs:l,labelRelated:!0});return r.shapeMap["text-bg-shape"]=u,u}},YGe=z(z({},E6),XGe);fn.registerEdge("single-edge",YGe);fn.registerEdge("line",{getControlPoints:function(){}},"single-edge");fn.registerEdge("spline",{getPath:function(e){var r=ule(e);return r}},"single-edge");fn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint,i={x:(r.x+n.x)/2,y:(r.y+n.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=rR(r,o,n),r.x<=n.x&&r.y>n.y?this.clockwise=a.x>o.x?0:1:r.x<=n.x&&r.y<n.y?this.clockwise=a.x>o.x?1:0:r.x>n.x&&r.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-r.x)/(o.y-r.y)===(n.x-r.x)/(n.y-r.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),Ft(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-r.x,y:n.y-r.y},l=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:e.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=rR(r,o,n)}var u=Ak(r,a),c=[{x:u,y:u}];return c},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),e.length===2?r.push(["L",e[1].x,e[1].y]):r.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),r}},"single-edge");fn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var r=e.controlPoints;if(!r||!r.length){var n=e.startPoint,i=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Ft(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),Ft(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Nk(n,i,e.curvePosition,e.curveOffset);r=[a]}return r},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),r.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),r}},"single-edge");fn.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var r=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!r||!r.length||r.length<2){var n=e.startPoint,i=e.endPoint,a=Nk(n,i,e.curvePosition[0],e.curveOffset[0]),o=Nk(n,i,e.curvePosition[1],e.curveOffset[1]);r=[a,o]}return r},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),r.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),r}},"single-edge");fn.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.y-r.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:r.x,y:r.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");fn.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Pt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Pt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Pt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.x-r.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:r.x+i*this.curvePosition[0]+a[0],y:r.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");fn.registerEdge("loop",{getPathPoints:function(e){return nse(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var qGe={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:It.comboLabel.refX,refY:It.comboLabel.refY,options:{style:{stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:z({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var r=Ir(e.size||this.options.size||It.defaultCombo.size);return Ft(r)&&r.length===1&&(r=[r[0],r[0]]),Ft(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,r){var n=r.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Ft(a)&&(a=Math.max.apply(Math,a));var o=r.refX,s=r.refY;Dt(o)&&(o=this.refX),Dt(s)&&(s=this.refY);var l=this.getSize(e),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:e.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=e.label,f},drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e),a=r.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,r,n){var i=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),l=s.show,u=s.img,c=s.width,f=s.height,h=r.getContainer(),d=h.find(function(m){return m.get("name")==="combo-collapsed-substitute-icon"}),p=d&&!d.destroyed,v=r.get("keyShape");if(i&&l){if(p)d.show();else{var g={width:c||n.r*2||n.width,height:f||n.r*2||n.height};d=h.addShape("image",{attrs:z({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}v.hide()}else p&&(d.hide(),v.show())},updateShape:function(e,r,n){var i=this,a=r.get("keyShape"),o=r.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,r,n),a.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&i.updateCollapsedIcon(e,r,n)}})):(a.attr(z({},n)),this.updateCollapsedIcon(e,r,n)),this.updateLabel(e,r)}},KGe=z(z({},E6),qGe);fn.registerCombo("single-combo",KGe);fn.registerCombo("circle",{options:{size:[It.defaultCombo.size[0],It.defaultCombo.size[0]],padding:Math.max.apply(Math,It.defaultCombo.padding),animate:!0,style:{stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:z({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,r){var n=this.getShapeStyle(e);delete n.height,delete n.width;var i=r.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(e){var r=this.options.style,n=e.padding||this.options.padding;Ft(n)&&(n=Math.max.apply(Math,n));var i={stroke:e.color},a=$t({},r,i,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=Pt(o)?o/2:o[0]/2;else{var l=this.getSize(e);!Pt(a.r)||isNaN(a.r)?s=l[0]/2||It.defaultCombo.style.r:s=Math.max(a.r,l[0]/2)||l[0]/2}a.r=s+n;var u=z({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},u},update:function(e,r){var n=this.getSize(e),i=e.padding||this.options.padding;Ft(i)&&(i=Math.max.apply(Math,i));var a=Ir(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=Pt(o)?o/2:o[0]/2:s=Math.max(a.r,n[0]/2)||n[0]/2,a.r=s+i;var l=r.get("sizeCache");l&&(l.r=a.r);var u={stroke:e.color},c=r.get("keyShape"),f=$t({},c.attr(),u,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,r,f,!0)}},"single-combo");fn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:It.defaultCombo.style.stroke,fill:It.defaultCombo.style.fill,lineWidth:It.defaultCombo.style.lineWidth},labelCfg:{style:{fill:It.comboLabel.style.fill,fontSize:It.comboLabel.style.fontSize,fontFamily:It.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:z({},It.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(e,r){var n=r.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Pt(a)&&(a=[a,a,a,a]);var o=r.refX,s=r.refY;Dt(o)&&(o=this.refX),Dt(s)&&(s=this.refY);var l=-i.width/2-a[3],u=i.width/2+a[1],c=-i.height/2-a[0],f=i.height/2+a[2],h;switch(n){case"top":h={x:l+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;case"left":h={x:l+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":h={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:h={x:u+o,y:0,textAlign:"right"};break}return h.text=e.label,h},getShapeStyle:function(e){var r=this.options.style,n=e.padding||this.options.padding;Pt(n)&&(n=[n,n,n,n]);var i={stroke:e.color},a=$t({},r,i,e.style),o=this.getSize(e),s,l,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?Pt(u)?(s=u,l=u):(s=u[0],l=u[1]):(!Pt(a.width)||isNaN(a.width)?s=o[0]||It.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!Pt(a.height)||isNaN(a.height)?l=o[1]||It.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],f=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var h=z({x:c,y:f},a);return e.style?(e.style.width=s,e.style.height=l):e.style={width:s,height:l},h},update:function(e,r){var n=this.getSize(e),i=e.padding||this.options.padding;Pt(i)&&(i=[i,i,i,i]);var a=Ir(e.style),o,s,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?Pt(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=r.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:e.color},f=r.get("keyShape"),h=$t({},f.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,r,h,!1)}},"single-combo");fn.registerNode("simple-circle",{options:{size:It.defaultNode.size,style:{x:0,y:0,stroke:It.defaultNode.style.stroke,fill:It.defaultNode.style.fill,lineWidth:It.defaultNode.style.lineWidth},labelCfg:{style:{fill:It.nodeLabel.style.fill,fontSize:It.nodeLabel.style.fontSize,fontFamily:It.windowFontFamily}},stateStyles:z({},It.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,r){var n=this.getShapeStyle(e),i="".concat(this.type,"-keyShape"),a=r.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:i,draggable:!0});return r.shapeMap[i]=a,a},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=cn({},r,n),a=this.getSize(e),o=a[0]/2,s=z({x:0,y:0,r:o},i);return s},update:function(e,r,n){var i=this.getSize(e),a={stroke:e.color,r:i[0]/2},o=r.get("keyShape"),s=cn({},o.attr(),a,e.style);this.updateShape(e,r,s,!0,n)}},"single-node");fn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:It.defaultNode.style.stroke,fill:It.defaultNode.style.fill,lineWidth:It.defaultNode.style.lineWidth},labelCfg:{style:{fill:It.nodeLabel.style.fill,fontSize:It.nodeLabel.style.fontSize,fontFamily:It.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:z({},It.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return i},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=z({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r,n){r.getContainer();var i=(this.mergeStyle||this.getOptions(e)).style,a=this.getSize(e),o=r.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=$t({},i,o.attr(),s);l=$t(l,e.style),this.updateShape(e,r,l,!1,n)}},"single-node");fn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:It.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var a=r.addShape(n,{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;r.setClip({type:"circle",attrs:z({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,c=n.height,f=a-u/2,h=o-c/2;r.setClip({type:"rect",attrs:z({x:f,y:h,width:u,height:c},s)})}else if(i==="ellipse"){var d=n.rx,p=n.ry;r.setClip({type:"ellipse",attrs:z({x:a,y:o,rx:d,ry:p},s)})}else if(i==="polygon"){var v=n.points;r.setClip({type:"polygon",attrs:z({points:v},s)})}else if(i==="path"){var g=n.path;r.setClip({type:"path",attrs:z({path:g},s)})}}},getShapeStyle:function(e){var r=this.mergeStyle||this.getOptions(e),n=r.style,i=r.img,a=this.getSize(e),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=z({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(e,r){var n=r.getContainer(),i="".concat(this.itemType,"-shape"),a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||r.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");const ple={triangle:function(e,r,n){e===void 0&&(e=10),r===void 0&&(r=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+r,",-").concat(e/2," L ").concat(i+r,",").concat(e/2," Z");return a},vee:function(e,r,n){e===void 0&&(e=15),r===void 0&&(r=20),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+r,",-").concat(e/2,`
        L `).concat(i+2*r/3,",0 L ").concat(i+r,",").concat(e/2," Z");return a},circle:function(e,r){e===void 0&&(e=5),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return i},rect:function(e,r,n){e===void 0&&(e=10),r===void 0&&(r=10),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",").concat(-e/2,` 
        L `).concat(i+r,",").concat(-e/2,` 
        L `).concat(i+r,",").concat(e/2,` 
        L `).concat(i,",").concat(e/2," Z");return a},diamond:function(e,r,n){e===void 0&&(e=15),r===void 0&&(r=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,`,0 
        L `).concat(i+r/2,",").concat(-e/2,` 
        L `).concat(i+r,`,0 
        L `).concat(i+r/2,",").concat(e/2," Z");return a},triangleRect:function(e,r,n,i,a,o){e===void 0&&(e=15),r===void 0&&(r=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+r+a,u="M ".concat(s,",0 L ").concat(s+r,",-").concat(e/2," L ").concat(s+r,",").concat(e/2,` Z
            M `).concat(l,", -").concat(n/2,`
            L `).concat(l+i," -").concat(n/2,`
            L `).concat(l+i," ").concat(n/2,`
            L `).concat(l," ").concat(n/2,`
            Z`);return u}},vle={collapse:function(e,r,n){return[["M",e-n,r],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,r],["L",e+n-4,r]]},expand:function(e,r,n){return[["M",e-n,r],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,r],["L",e-n+2*n-4,r],["M",e-n+n,r-n+4],["L",e,r+n-4]]},upTriangle:function(e,r,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,r+a],["L",e+i,r+a],["L",e,r-n],["Z"]]},downTriangle:function(e,r,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,r-a],["L",e+i,r-a],["L",e,r+n],["Z"]]}};var QGe=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const ZGe=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:QGe},Symbol.toStringTag,{value:"Module"}));var gle=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const JGe=Object.freeze(Object.defineProperty({__proto__:null,isForce:gle},Symbol.toStringTag,{value:"Module"}));var eUe=yl,Ta=z(z(z(z(z(z(z({},dGe),L9e),DGe),C9e),ZGe),JGe),{transform:eUe,mat3:mae}),mle=function(){function t(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(e){var r=e.type;if(r)return r;var n=e.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},t.prototype.isLayoutTypeSame=function(e){var r=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),i=Array.isArray(r);return n&&i?this.layoutType.every(function(a,o){return a===r[o]}):Array.isArray(r)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},t.prototype.refreshLayout=function(){var e=this,r=e.graph,n=e.layoutType,i=e.layoutCfg,a=i===void 0?{}:i;if(r){var o=a.animate,s=o===void 0&&(n==="force"||n==="force2"),l=gle(n)&&(o||s);r.get("animate")&&!l?r.positionsAnimate(n==="comboCombined"):r.refreshPositions(n==="comboCombined")}},t.prototype.changeLayout=function(e){var r=e.disableTriggerLayout,n=wi(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!r&&this.layout()},t.prototype.changeData=function(e){this.layout(e)},t.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,r=[];return e==null||e.forEach(function(n){var i,a=(i=n.getType)===null||i===void 0?void 0:i.call(n);a&&r.push(a),n.destroy()}),this.layoutMethods=[],r},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var e,r=[],n=[],i=[],a=[],o=[],s=[],l=[],u=this.graph.getNodes(),c=this.graph.getEdges(),f=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var p=u[d];if(!(!p||p.destroyed)){var v=p.getModel();if(!p.isVisible()){n.push(v);continue}r.push(v)}}for(var g=c.length,d=0;d<g;d++){var m=c[d];if(!(!m||m.destroyed)){var v=m.getModel();if(!m.isVisible()){a.push(v);continue}v.isComboEdge?o.push(v):i.push(v)}}for(var y=f.length,d=0;d<y;d++){var w=f[d];if(!w.destroyed){var v=w.getModel();if(!w.isVisible()){l.push(v);continue}s.push(v)}}return{nodes:r,hiddenNodes:n,edges:i,hiddenEdges:a,combos:s,hiddenCombos:l,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(b){return b.getModel()})}},t.prototype.relayout=function(e){var r=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(!(!i||i.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var l=this.data.nodes;if(!l)return!1;s=this.initPositions(o.center,l)}i.emit("beforelayout"),a==null||a.forEach(function(u,c){var f=o[c]||o;s=s.then(function(){var h,d=r.execLayoutMethod(f,c);return c===a.length-1&&((h=o.onAllLayoutEnd)===null||h===void 0||h.call(o)),d})})}},t.prototype.filterLayoutData=function(e,r){var n=e.nodes,i=e.edges,a=wi(e,["nodes","edges"]);if(!n)return e;var o,s;Rn(r==null?void 0:r.nodesFilter)?o=r.nodesFilter:o=function(){return!0};var l=n.filter(o);if(Rn(r==null?void 0:r.edgesFilter))s=r.edgesFilter;else{var u=l.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return u[f.source]&&u[f.target]}}return z({nodes:l,edges:i.filter(s)},a)},t.prototype.getLayoutBBox=function(e){var r=this.graph,n=Ek(r.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=Zse(o);return s.size=[s.width,s.height],s}),a=Object.values(Ek(e,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var e=this.graph,r=e.get("data"),n=r.nodes;if(!(n[0].x===void 0||n[0].x===null||Xu(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},t.prototype.initPositions=function(e,r){var n;return is(this,void 0,void 0,function(){var i,a,o;return as(this,function(s){return i=this.graph,r!=null&&r.length?(a=r.filter(function(l){return Xu(l.x)||Xu(l.y)}),o=a?a.length:0,o?[2,(n=this.initWithPreset)===null||n===void 0?void 0:n.call(this,function(){},function(){var l=i.get("width")*.85,u=i.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(l/u)),f=Math.ceil(o/c),h=l/(c-1),d=u/(f-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(d)||!h)&&(d=0);for(var p=e[0]-l/2,v=e[1]-u/2,g=0;g<o;g++){var m=a[g];Xu(+m.x)&&(m.x=g%c*h+p),Xu(+m.y)&&(m.y=Math.floor(g/c)*d+v)}})]:[2]):[2,Promise.resolve()]})})},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),yle=function(){function t(e){this.graph=e,this.destroyed=!1,this.initEvents()}return t}(),Lf=fn.registerNode,wle=fn.registerEdge,tUe=fn.registerCombo,ble=$8.registerBehavior,dt=It;It.version,fn.registerNode,fn.registerEdge,fn.registerCombo,$8.registerBehavior;var _6={},Nr={},UA={},bd={};Object.defineProperty(bd,"__esModule",{value:!0});bd.MESSAGE=bd.ALGORITHM=void 0;var rUe={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};bd.ALGORITHM=rUe;var nUe={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};bd.MESSAGE=nUe;var WA={},xle={},Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.default=void 0;var iUe=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,r||(a[f][c]=1))}),a},aUe=iUe;Pv.default=aUe;var VA={},HA={},Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=Mm.LinkedListNode=void 0;var oUe=function(e,r){return e===r},RR=function(){function t(e,r){r===void 0&&(r=null),this.value=e,this.next=r}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t}();Mm.LinkedListNode=RR;var sUe=function(){function t(e){e===void 0&&(e=oUe),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var r=new RR(e,this.head);return this.head=r,this.tail||(this.tail=r),this},t.prototype.append=function(e){var r=new RR(e);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,e);)r=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(r=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),r},t.prototype.find=function(e){var r=e.value,n=r===void 0?void 0:r,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var r=this;return e.forEach(function(n){return r.append(n)}),this},t.prototype.toArray=function(){for(var e=[],r=this.head;r;)e.push(r),r=r.next;return e},t.prototype.reverse=function(){for(var e=this.head,r=null,n=null;e;)n=e.next,e.next=r,r=e,e=n;this.tail=this.head,this.head=r},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(r){return r.toString(e)}).toString()},t}(),lUe=sUe;Mm.default=lUe;Object.defineProperty(HA,"__esModule",{value:!0});HA.default=void 0;var uUe=cUe(Mm);function cUe(t){return t&&t.__esModule?t:{default:t}}var fUe=function(){function t(){this.linkedList=new uUe.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(e){this.linkedList.append(e)},t.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toString=function(e){return this.linkedList.toString(e)},t}(),hUe=fUe;HA.default=hUe;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.uniqueId=Ri.getOutEdgesNodeId=Ri.getNeighbors=Ri.getEdgesByNodeId=void 0;var dUe=function(e,r,n){r===void 0&&(r=[]);var i=r.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)};Ri.getNeighbors=dUe;var pUe=function(e,r){return r.filter(function(n){return n.source===e})};Ri.getOutEdgesNodeId=pUe;var vUe=function(e,r){return r.filter(function(n){return n.source===e||n.target===e})};Ri.getEdgesByNodeId=vUe;var gUe=function(e){e===void 0&&(e=0);var r="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(r).concat(n)};Ri.uniqueId=gUe;Object.defineProperty(VA,"__esModule",{value:!0});VA.default=void 0;var mUe=wUe(HA),yUe=Ri;function wUe(t){return t&&t.__esModule?t:{default:t}}function bUe(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}var xUe=function(e,r,n,i){i===void 0&&(i=!0);var a=bUe(n),o=new mUe.default,s=e.edges,l=s===void 0?[]:s;o.enqueue(r);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),(0,yUe.getNeighbors)(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},SUe=xUe;VA.default=SUe;var xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.default=EUe;xd.detectStrongConnectComponents=xd.detectConnectedComponents=void 0;var Sle=Ri,Ele=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(p){l.push(p),s[p.id]=!0;for(var v=(0,Sle.getNeighbors)(p.id,a),g=function(w){var b=v[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<v.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o};xd.detectConnectedComponents=Ele;var _le=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=(0,Sle.getNeighbors)(m.id,a,"target").filter(function(E){return n.map(function(_){return _.id}).indexOf(E)>-1}),w=function(_){var k=y[_];if(!l[k]&&l[k]!==0){var C=n.filter(function(A){return A.id===k});C.length>0&&g(C[0]),u[m.id]=Math.min(u[m.id],u[k])}else s[k]&&(u[m.id]=Math.min(u[m.id],l[k]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,p=n;d<p.length;d++){var v=p[d];!l[v.id]&&l[v.id]!==0&&h(v)}return c};xd.detectStrongConnectComponents=_le;function EUe(t,e){return e?_le(t):Ele(t)}var df={};Object.defineProperty(df,"__esModule",{value:!0});df.getOutDegree=df.getInDegree=df.default=void 0;var f2=function(e){var r={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){r[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){r[s.source].degree++,r[s.source].outDegree++,r[s.target].degree++,r[s.target].inDegree++}),r},_Ue=f2;df.default=_Ue;var CUe=function(e,r){var n=f2(e);return n[r]?f2(e)[r].inDegree:0};df.getInDegree=CUe;var kUe=function(e,r){var n=f2(e);return n[r]?f2(e)[r].outDegree:0};df.getOutDegree=kUe;var Ju={},XA={};Object.defineProperty(XA,"__esModule",{value:!0});XA.default=TUe;var MUe=Ri;function AUe(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}function Cle(t,e,r,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:r});var a=t.edges,o=a===void 0?[]:a;(0,MUe.getNeighbors)(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:r,current:e,next:s})&&Cle(t,s,e,n,i)}),n.leave({current:e,previous:r})}function TUe(t,e,r,n){n===void 0&&(n=!0),Cle(t,e,"",AUe(r),n)}function NR(t){"@babel/helpers - typeof";return NR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NR(t)}Object.defineProperty(Ju,"__esModule",{value:!0});Ju.detectAllUndirectedCycle=Ju.detectAllDirectedCycle=Ju.detectAllCycles=Ju.default=void 0;var IUe=DUe(XA),kle=OUe(xd),Mle=Ri;function Ale(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Ale=function(i){return i?r:e})(t)}function OUe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||NR(t)!=="object"&&typeof t!="function")return{default:t};var r=Ale(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function DUe(t){return t&&t.__esModule?t:{default:t}}var PUe=function(e){var r=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,p=h.previous;if(s[d]){r={};for(var v=d,g=p;g!==d;)r[v]=g,v=g,g=a[g];r[v]=g}else s[d]=d,delete o[d],a[d]=p},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return r?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];(0,IUe.default)(e,c,u)}return r},Tle=function(e,r,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=(0,kle.default)(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],p=(i={},i[h]=f,i),v=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=(0,Mle.getNeighbors)(m,e.edges),w=function(S){var E,_=y[S],k=e.nodes.find(function(N){return N.id===_});if(_===m)o.push((E={},E[_]=g,E));else if(!(_ in v))p[_]=g,d.push(k),v[_]=new Set([g]);else if(!v[m].has(k)){for(var C=!0,A=[k,g],M=p[m];v[_].size&&!v[_].has(M)&&(A.push(M),M!==p[M.id]);)M=p[M.id];if(A.push(M),r&&n?(C=!1,A.findIndex(function(N){return r.indexOf(N.id)>-1})>-1&&(C=!0)):r&&!n&&A.findIndex(function(N){return r.indexOf(N.id)>-1})>-1&&(C=!1),C){for(var T={},O=1;O<A.length;O+=1)T[A[O-1].id]=A[O];A.length&&(T[A[A.length-1].id]=A[0]),o.push(T)}v[_].add(g)}},b=0;b<y.length;b+=1)w(b)}return o};Ju.detectAllUndirectedCycle=Tle;var Ile=function(e,r,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(M){for(var T=[M];T.length>0;){var O=T.pop();a.has(O)&&(a.delete(O),o[O.id].forEach(function(N){T.push(N)}),o[O.id].clear())}},f=function A(M,T,O){var N=!1;if(r&&n===!1&&r.indexOf(M.id)>-1)return N;i.push(M),a.add(M);for(var R=O[M.id],B=0;B<R.length;B+=1){var F=l[R[B]];if(F===T){for(var D={},L=1;L<i.length;L+=1)D[i[L-1].id]=i[L];i.length&&(D[i[i.length-1].id]=i[0]),s.push(D),N=!0}else a.has(F)||A(F,T,O)&&(N=!0)}if(N)c(M);else for(var B=0;B<R.length;B+=1){var F=l[R[B]];o[F.id].has(M)||o[F.id].add(M)}return i.pop(),N},h=e.nodes,d=h===void 0?[]:h,p=0;p<d.length;p+=1){var v=d[p],g=v.id;u[g]=p,l[p]=v}if(r&&n)for(var m=function(M){var T=r[M];u[d[M].id]=u[T],u[T]=0,l[0]=d.find(function(O){return O.id===T}),l[u[d[M].id]]=d[M]},p=0;p<r.length;p++)m(p);for(var y=function(M){for(var T,O,N=1/0,R=0;R<M.length;R+=1)for(var B=M[R],F=0;F<B.length;F++){var D=u[B[F].id];D<N&&(N=D,O=R)}for(var L=M[O],G=[],R=0;R<L.length;R+=1){var Y=L[R];G[Y.id]=[];for(var Z=0,q=(0,Mle.getNeighbors)(Y.id,e.edges,"target").filter(function(Ae){return L.map(function(He){return He.id}).indexOf(Ae)>-1});Z<q.length;Z++){var pe=q[Z];pe===Y.id&&!(n===!1&&r.indexOf(Y.id)>-1)?s.push((T={},T[Y.id]=Y,T)):G[Y.id].push(u[pe])}}return{component:L,adjList:G,minIdx:N}},w=0;w<d.length;){var b=d.filter(function(A){return u[A.id]>=w}),x=(0,kle.detectStrongConnectComponents)({nodes:b,edges:e.edges}).filter(function(A){return A.length>1});if(x.length===0)break;var S=y(x),E=S.minIdx,_=S.adjList,k=S.component;if(k.length>1){k.forEach(function(A){o[A.id]=new Set});var C=l[E];if(r&&n&&r.indexOf(C.id)===-1)return s;f(C,C,_),w=E+1}else break}return s};Ju.detectAllDirectedCycle=Ile;var LUe=function(e,r,n,i){return i===void 0&&(i=!0),r?Ile(e,n,i):Tle(e,n,i)};Ju.detectAllCycles=LUe;var RUe=PUe;Ju.default=RUe;var ty={};const Ole=su(eSe),pb=su(z8e);Object.defineProperty(ty,"__esModule",{value:!0});ty.default=void 0;var uW=Ole,NUe=pb,cW=Ri,FUe=function(e,r,n){for(var i=1/0,a,o=0;o<r.length;o++){var s=r[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=r[o])}return a},BUe=function(e,r,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===r&&(c[b]=0)});for(var h=o.length,d=function(w){var b=FUe(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=(0,cW.getOutEdgesNodeId)(x,l):S=(0,cW.getEdgesByNodeId)(x,l),S.forEach(function(E){var _=E.target,k=E.source,C=_===x?k:_,A=i&&E[i]?E[i]:1;c[C]>c[b.id]+A?(c[C]=c[b.id]+A,f[C]=[b.id]):c[C]===c[b.id]+A&&f[C].push(b.id)})},p=0;p<h;p++)d();f[r]=[r];var v={};for(var g in c)c[g]!==1/0&&Dle(r,g,f,v);var m={};for(var g in v)m[g]=v[g][0];return{length:c,path:m,allPath:v}},$Ue=BUe;ty.default=$Ue;function Dle(t,e,r,n){if(t===e)return[t];if(n[e])return n[e];for(var i=[],a=0,o=r[e];a<o.length;a++){var s=o[a],l=Dle(t,s,r,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];(0,NUe.isArray)(f)?i.push((0,uW.__spreadArray)((0,uW.__spreadArray)([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.findShortestPath=Am.findAllPath=void 0;var zUe=jUe(ty),JS=Ri;function jUe(t){return t&&t.__esModule?t:{default:t}}var GUe=function(e,r,n,i,a){var o=(0,zUe.default)(e,r,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}};Am.findShortestPath=GUe;var UUe=function(e,r,n,i){var a;if(r===n)return[[r]];var o=e.edges,s=o===void 0?[]:o,l=[r],u=(a={},a[r]=!0,a),c=[],f=[],h=i?(0,JS.getNeighbors)(r,s,"target"):(0,JS.getNeighbors)(r,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var p=d.shift();p&&(l.push(p),u[p]=!0,h=i?(0,JS.getNeighbors)(p,s,"target"):(0,JS.getNeighbors)(p,s),c.push(h.filter(function(m){return!u[m]})))}else{var v=l.pop();u[v]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var v=l.pop();u[v]=!1,c.pop()}}return f};Am.findAllPath=UUe;var vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.default=void 0;var WUe=VUe(Pv);function VUe(t){return t&&t.__esModule?t:{default:t}}var HUe=function(e,r){for(var n=(0,WUe.default)(e,r),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},XUe=HUe;vb.default=XUe;var YA={};Object.defineProperty(YA,"__esModule",{value:!0});YA.default=void 0;var YUe=KUe(Pv),qUe=Ri;function KUe(t){return t&&t.__esModule?t:{default:t}}var QUe=function(e,r,n,i){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=(0,qUe.uniqueId)();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=(0,YUe.default)(e,r),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,E){if(S){var _=o[E].id;h[x][_]=S}})});for(var d=0,p=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(O){var N=h[x.id][O],R=c[O].node,B=R.clusterId;S[B]||(S[B]=0),S[B]+=N});var E=-1/0,_=[];if(Object.keys(S).forEach(function(O){E<S[O]?(E=S[O],_=[O]):E===S[O]&&_.push(O)}),!(_.length===1&&_[0]===x.clusterId)){var k=_.indexOf(x.clusterId);if(k>=0&&_.splice(k,1),_&&_.length){b=!0;var C=u[x.clusterId],A=C.nodes.indexOf(x);C.nodes.splice(A,1);var M=Math.floor(Math.random()*_.length),T=u[_[M]];T.nodes.push(x),x.clusterId=T.id}}}),!b)return"break";d++};d<i;){var v=p();if(v==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,E=c[b].node.clusterId,_=c[x].node.clusterId,k="".concat(E,"---").concat(_);if(m[k])m[k].weight+=S,m[k].count++;else{var C={source:E,target:_,weight:S,count:1};m[k]=C,g.push(C)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},ZUe=QUe;YA.default=ZUe;var qA={},gb={};Object.defineProperty(gb,"__esModule",{value:!0});gb.default=void 0;var JUe=pb,eWe=function(){function t(e){this.arr=e}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new t(i)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new t(i)}},t.prototype.avg=function(e){var r=[];if(e!==0)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},t.prototype.euclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=(0,JUe.clone)(this.arr);r.sort(function(o,s){return o-s});var n=r[r.length-1],i=r[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new t(e)},t.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var r=0;for(var n in this.arr)r+=Math.pow(this.arr[n],2);return Math.sqrt(r)},t.prototype.dot=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},t.prototype.equal=function(e){var r,n=e.arr;if(((r=this.arr)===null||r===void 0?void 0:r.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},t}(),tWe=eWe;gb.default=tWe;var ec={},Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.secondReg=Tm.dateReg=void 0;var rWe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;Tm.secondReg=rWe;var nWe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;Tm.dateReg=nWe;Object.defineProperty(ec,"__esModule",{value:!0});ec.getPropertyWeight=ec.getAllSortProperties=ec.getAllProperties=ec.default=void 0;var fW=Tm,C6=function(e,r){e===void 0&&(e=[]),r===void 0&&(r=100);var n={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(fW.secondReg)&&!"".concat(a.properties[o]).match(fW.dateReg)&&isNaN(Number(a.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var i=Object.keys(n).sort(function(a,o){return n[o]-n[a]});return i.length<r?i:i.slice(0,r)};ec.getAllSortProperties=C6;var iWe=function(e,r){return r.map(function(n){return e.hasOwnProperty(n)?e[n]:0})},Ple=function(e){for(var r=C6(e),n=[],i=0;i<e.length;i++)n[i]=iWe(e[i].properties,r);return n};ec.getPropertyWeight=Ple;var Lle=function(e,r){r===void 0&&(r=void 0);var n=[];return e.forEach(function(i){r===void 0&&n.push(i),i[r]!==void 0&&n.push(i[r])}),n};ec.getAllProperties=Lle;var aWe={getAllSortProperties:C6,getPropertyWeight:Ple,getAllProperties:Lle};ec.default=aWe;var tc={},mb={};Object.defineProperty(mb,"__esModule",{value:!0});mb.DistanceType=void 0;var FR;mb.DistanceType=FR;(function(t){t.EuclideanDistance="euclideanDistance"})(FR||(mb.DistanceType=FR={}));Object.defineProperty(tc,"__esModule",{value:!0});tc.oneHot=tc.getDistance=tc.getAllKeyValueMap=tc.default=void 0;var hW=pb,dW=mb,pW=oWe(gb);function oWe(t){return t&&t.__esModule?t:{default:t}}var k6=function(e,r,n){var i=[];r!=null&&r.length?i=r:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=(0,hW.uniq)(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=(0,hW.uniq)(s))}),a};tc.getAllKeyValueMap=k6;var Rle=function(e,r,n){var i=k6(e,r,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],p=d.findIndex(function(m){return h===m}),v=[];if(s)v.push(h);else for(var g=0;g<d.length;g++)g===p?v.push(1):v.push(0);c=c.concat(v)}),a[u]=c}),a};tc.oneHot=Rle;var Nle=function(e,r,n,i){n===void 0&&(n=dW.DistanceType.EuclideanDistance);var a=0;switch(n){case dW.DistanceType.EuclideanDistance:a=new pW.default(e).euclideanDistance(new pW.default(r));break}return a};tc.getDistance=Nle;var sWe={getAllKeyValueMap:k6,oneHot:Rle,getDistance:Nle};tc.default=sWe;Object.defineProperty(qA,"__esModule",{value:!0});qA.default=void 0;var lWe=pb,uWe=Fle(Pv),Ky=Fle(gb),cWe=ec,fWe=tc;function Fle(t){return t&&t.__esModule?t:{default:t}}var vW=function(e,r,n,i){for(var a=r.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=r[l][c]||0,d=n[l]||0,p=n[c]||0;s+=h-d*p/o}}return s*=1/o,s},o3=function(e,r){e===void 0&&(e=[]);for(var n=e.length,i=new Ky.default([]),a=0;a<n;a++)i=i.add(new Ky.default(r[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Ky.default(r[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Ky.default(r[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new Ky.default(r[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,p=2*n*s,a=0;a<n;a++)for(var v=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||v!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(p,2)-c[a][f]/p;d+=m}}return Number(d.toFixed(4))},hWe=function(e,r,n,i,a,o,s,l,u){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,p=[];if(a){f.forEach(function(D,L){D.properties=D.properties||{},D.originIndex=L});var v=[];f.every(function(D){return D.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(f.map(function(D){return D.nodeType}))),f.forEach(function(D){D.properties.nodeType=v.findIndex(function(L){return L===D.nodeType})}));var g=(0,cWe.getAllProperties)(f,o);p=(0,fWe.oneHot)(g,s,l)}var m=1,y={},w={};f.forEach(function(D,L){var G=String(m++);D.clusterId=G,y[G]={id:G,nodes:[D]},w[D.id]={node:D,idx:L}});var b=(0,uWe.default)(e,r),x=[],S={},E=0;b.forEach(function(D,L){var G=0,Y=f[L].id;S[Y]={},D.forEach(function(Z,q){if(Z){G+=Z;var pe=f[q].id;S[Y][pe]=Z,E+=Z}}),x.push(G)}),E/=2;for(var _=1/0,k=1/0,C=0,A=[],M={};;){a&&f.every(function(D){return D.hasOwnProperty("properties")})?_=vW(f,b,x,E)+o3(f,p)*u:_=vW(f,b,x,E),C===0&&(k=_,A=f,M=y);var T=_>0&&_>k&&_-k<i;if(_>k&&(A=f.map(function(D){return{node:D,clusterId:D.clusterId}}),M=(0,lWe.clone)(y),k=_),T||C>100)break;C++,Object.keys(y).forEach(function(D){var L=0;d.forEach(function(G){var Y=G.source,Z=G.target,q=w[Y].node.clusterId,pe=w[Z].node.clusterId;(q===D&&pe!==D||pe===D&&q!==D)&&(L=L+(G[n]||1))}),y[D].sumTot=L}),f.forEach(function(D,L){var G=y[D.clusterId],Y=0,Z,q=x[L]/(2*E),pe=0,Se=G.nodes;Se.forEach(function(er){var yr=w[er.id].idx;pe+=b[L][yr]||0});var Ae=pe-G.sumTot*q,He=Se.filter(function(er){return er.id!==D.id});He.forEach(function(er,yr){p[er.originIndex]});var ct=o3(He,p)*u,st=S[D.id];if(Object.keys(st).forEach(function(er){var yr=w[er].node,or=yr.clusterId;if(or!==D.clusterId){var zt=y[or],tr=zt.nodes;if(!(!tr||!tr.length)){var Dr=0;tr.forEach(function(Pe){var ye=w[Pe.id].idx;Dr+=b[L][ye]||0});var Ze=Dr-zt.sumTot*q,oe=tr.concat([D]);oe.forEach(function(Pe,ye){p[Pe.originIndex]});var P=o3(oe,p)*u,_e=Ze-Ae;a&&(_e=Ze+P-(Ae+ct)),_e>Y&&(Y=_e,Z=zt)}}}),Y>0){Z.nodes.push(D);var Mt=D.clusterId;D.clusterId=Z.id;var yt=G.nodes.indexOf(D);G.nodes.splice(yt,1);var ar=0,Jt=0;d.forEach(function(er){var yr=er.source,or=er.target,zt=w[yr].node.clusterId,tr=w[or].node.clusterId;(zt===Z.id&&tr!==Z.id||tr===Z.id&&zt!==Z.id)&&(ar=ar+(er[n]||1)),(zt===Mt&&tr!==Mt||tr===Mt&&zt!==Mt)&&(Jt=Jt+(er[n]||1))}),Z.sumTot=ar,G.sumTot=Jt}})}var O={},N=0;Object.keys(M).forEach(function(D){var L=M[D];if(!L.nodes||!L.nodes.length){delete M[D];return}var G=String(N+1);G!==D&&(L.id=G,L.nodes=L.nodes.map(function(Y){return{id:Y.id,clusterId:G}}),M[G]=L,O[D]=G,delete M[D],N++)}),A.forEach(function(D){var L=D.node,G=D.clusterId;L&&(L.clusterId=G,L.clusterId&&O[L.clusterId]&&(L.clusterId=O[L.clusterId]))});var R=[],B={};d.forEach(function(D){var L=D.source,G=D.target,Y=D[n]||1,Z=w[L].node.clusterId,q=w[G].node.clusterId;if(!(!Z||!q)){var pe="".concat(Z,"---").concat(q);if(B[pe])B[pe].weight+=Y,B[pe].count++;else{var Se={source:Z,target:q,weight:Y,count:1};B[pe]=Se,R.push(Se)}}});var F=[];return Object.keys(M).forEach(function(D){F.push(M[D])}),{clusters:F,clusterEdges:R}},dWe=hWe;qA.default=dWe;var KA={},QA={};Object.defineProperty(QA,"__esModule",{value:!0});QA.default=void 0;var pWe=function(){function t(e){this.count=e.length,this.parent={};for(var r=0,n=e;r<n.length;r++){var i=n[r];this.parent[i]=i}}return t.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},t.prototype.union=function(e,r){var n=this.find(e),i=this.find(r);n!==i&&(n<i?(this.parent[r]!==r&&this.union(this.parent[r],e),this.parent[r]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],r),this.parent[e]=this.parent[r]))},t.prototype.connected=function(e,r){return this.find(e)===this.find(r)},t}(),vWe=pWe;QA.default=vWe;var ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});ZA.default=void 0;var gWe=function(e,r){return e-r},mWe=function(){function t(e){e===void 0&&(e=gWe),this.compareFn=e,this.list=[]}return t.prototype.getLeft=function(e){return 2*e+1},t.prototype.getRight=function(e){return 2*e+2},t.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var e=this.top(),r=this.list.pop();return this.list.length>0&&(this.list[0]=r,this.moveDown(0)),e},t.prototype.insert=function(e){if(e!==null){this.list.push(e);var r=this.list.length-1;return this.moveUp(r),!0}return!1},t.prototype.moveUp=function(e){for(var r=this.getParent(e);e&&e>0&&this.compareFn(this.list[r],this.list[e])>0;){var n=this.list[r];this.list[r]=this.list[e],this.list[e]=n,e=r,r=this.getParent(e)}},t.prototype.moveDown=function(e){var r,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(r=[this.list[n],this.list[e]],this.list[e]=r[0],this.list[n]=r[1],this.moveDown(n))},t}(),yWe=mWe;ZA.default=yWe;Object.defineProperty(KA,"__esModule",{value:!0});KA.default=void 0;var wWe=Ble(QA),bWe=Ble(ZA),s3=Ri;function Ble(t){return t&&t.__esModule?t:{default:t}}var xWe=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return r?g.weight-m.weight:0},f=new bWe.default(c);for((0,s3.getEdgesByNodeId)(l.id,s).forEach(function(v){f.insert(v)});!f.isEmpty();){var h=f.delMin(),d=h.source,p=h.target;u.has(d)&&u.has(p)||(n.push(h),u.has(d)||(u.add(d),(0,s3.getEdgesByNodeId)(d,s).forEach(function(v){f.insert(v)})),u.has(p)||(u.add(p),(0,s3.getEdgesByNodeId)(p,s).forEach(function(v){f.insert(v)})))}return n},gW=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});r&&l.sort(function(d,p){return d.weight-p.weight});for(var u=new wWe.default(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},SWe=function(e,r,n){var i={prim:xWe,kruskal:gW};return n?i[n](e,r):gW(e,r)},EWe=SWe;KA.default=EWe;var JA={};Object.defineProperty(JA,"__esModule",{value:!0});JA.default=void 0;var _We=kWe(df),CWe=Ri;function kWe(t){return t&&t.__esModule?t:{default:t}}var MWe=function(e,r,n){typeof r!="number"&&(r=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},p={},v=0;v<f;++v){var g=l[v],m=g.id;d[m]=1/f,p[m]=1/f}for(var y=(0,_We.default)(e);o>0&&i>r;){a=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=(0,CWe.getNeighbors)(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=p[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;h=d[m]+a,i+=Math.abs(h-p[m]),p[m]=h}o-=1}return p},AWe=MWe;JA.default=AWe;var eT={},tT={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.VACANT_NODE_LABEL=Oi.VACANT_NODE_ID=Oi.VACANT_GRAPH_ID=Oi.VACANT_EDGE_LABEL=Oi.VACANT_EDGE_ID=Oi.Node=Oi.Graph=Oi.Edge=Oi.AUTO_EDGE_ID=void 0;var $le=-1;Oi.VACANT_EDGE_ID=$le;var h2=-1;Oi.VACANT_NODE_ID=h2;var zle="-1";Oi.VACANT_EDGE_LABEL=zle;var jle="-1";Oi.VACANT_NODE_LABEL=jle;var TWe=-1;Oi.VACANT_GRAPH_ID=TWe;var IWe="-1";Oi.AUTO_EDGE_ID=IWe;var BR=function(){function t(e,r,n,i){e===void 0&&(e=$le),r===void 0&&(r=h2),n===void 0&&(n=h2),i===void 0&&(i=zle),this.id=e,this.from=r,this.to=n,this.label=i}return t}();Oi.Edge=BR;var Gle=function(){function t(e,r){e===void 0&&(e=h2),r===void 0&&(r=jle),this.id=e,this.label=r,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},t}();Oi.Node=Gle;var OWe=function(){function t(e,r,n){e===void 0&&(e=h2),r===void 0&&(r=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=r,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(e,r){if(!this.nodeMap[e]){var n=new Gle(e,r);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[r]||(this.nodeLabelMap[r]=[]),this.nodeLabelMap[r].push(e)}},t.prototype.addEdge=function(e,r,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[r]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new BR(e,r,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[r].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new BR(e,n,r,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}();Oi.Graph=OWe;Object.defineProperty(tT,"__esModule",{value:!0});tT.default=void 0;var DWe=pb,Do=Oi,gp=function(){function t(e,r,n,i,a){this.fromNode=e,this.toNode=r,this.nodeEdgeNodeLabel={nodeLabel1:n||Do.VACANT_NODE_LABEL,edgeLabel:i||Do.VACANT_EDGE_LABEL,nodeLabel2:a||Do.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t}(),mW=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(e){var r=this.dfsEdgeList.length,n=e.length;if(r!==n)return!1;for(var i=0;i<r;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t.prototype.pushBack=function(e,r,n,i,a){return this.dfsEdgeList.push(new gp(e,r,n,i,a)),this.dfsEdgeList},t.prototype.toGraph=function(e,r){e===void 0&&(e=Do.VACANT_GRAPH_ID),r===void 0&&(r=!1);var n=new Do.Graph(e,!0,r);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Do.VACANT_NODE_LABEL&&n.addNode(a,l),c!==Do.VACANT_NODE_LABEL&&n.addNode(o,c),l!==Do.VACANT_NODE_LABEL&&c!==l&&n.addEdge(void 0,a,o,u)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,r=this.dfsEdgeList.length,n=r-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},t.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(r){e[r.fromNode]||(e[r.fromNode]=!0),e[r.toNode]||(e[r.toNode]=!0)}),Object.keys(e).length},t}(),eE=function(){function t(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var r=e.edge;this.edges.push(r),this.nodesUsed[r.from]=1,this.nodesUsed[r.to]=1,this.edgesUsed[r.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},t.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},t}(),PWe=function(){function t(e){var r=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,p=d===void 0?!1:d;this.graphs=r,this.dfsCode=new mW,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(e,r){var n=this,i=[],a=e.nodeMap;return r.edges.forEach(function(o){(n.directed||r.label<=a[o.to].label)&&i.push(o)}),i},t.prototype.findBackwardEdge=function(e,r,n,i){if(!this.directed&&r===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==r.from)){if(this.directed){if(a[r.from].label<a[n.to].label||a[r.from].label===a[n.to].label&&r.label<=c.label)return c}else if(r.label<c.label||r.label===c.label&&a[r.to].label<=a[n.to].label)return c}}return null},t.prototype.findForwardPureEdges=function(e,r,n,i){for(var a=[],o=r.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},t.prototype.findForwardRmpathEdges=function(e,r,n,i){for(var a=[],o=e.nodeMap,s=o[r.to].label,l=o[r.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;r.to===h.to||n>d||i.hasNode(o[h.to])||(r.label<h.label||r.label===h.label&&s<=d)&&a.push(h)}return a},t.prototype.getSupport=function(e){var r={};return e.forEach(function(n){r[n.graphId]||(r[n.graphId]=!0)}),Object.keys(r).length},t.prototype.findMinLabel=function(e){var r=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!r){r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<r.nodeLabel1||a===r.nodeLabel1&&o<r.edgeLabel||a===r.nodeLabel1&&o===r.edgeLabel&&s<r.nodeLabel2)&&(r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),r},t.prototype.isMin=function(){var e=this,r=this.dfsCode;if(this.verbose&&console.log("isMin checking",r),r.dfsEdgeList.length===1)return!0;var n=this.directed,i=r.toGraph(Do.VACANT_GRAPH_ID,n),a=i.nodeMap,o=new mW,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var p=a[d.to],v="".concat(f.label,"-").concat(d.label,"-").concat(p.label);s[v]||(s[v]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:p.label});var g={graphId:i.id,edge:d,preNode:null};s[v].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new gp(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),p=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(B){if(m)return"break";h.forEach(function(F){var D=new eE(F),L=e.findBackwardEdge(i,D.edges[d[B]],D.edges[d[0]],D);L&&(g[L.label]||(g[L.label]={projected:[],edgeLabel:L.label}),g[L.label].projected.push({graphId:i.id,edge:g,preNode:F}),y=o.dfsEdgeList[d[B]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var E=e.findMinLabel(g);o.dfsEdgeList.push(new gp(v,y,Do.VACANT_NODE_LABEL,E.edgeLabel,Do.VACANT_NODE_LABEL));var _=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[E.edgeLabel].projected)}var k={};m=!1;var C=0;h.forEach(function(R){var B=new eE(R),F=e.findForwardPureEdges(i,B.edges[d[0]],p,B);F.length>0&&(m=!0,C=v,F.forEach(function(D){var L="".concat(D.label,"-").concat(a[D.to].label);k[L]||(k[L]={projected:[],edgeLabel:D.label,nodeLabel2:a[D.to].label}),k[L].projected.push({graphId:i.id,edge:D,preNode:R})}))});for(var A=d.length,M=function(B){if(m)return"break";var F=d[B];h.forEach(function(D){var L=new eE(D),G=e.findForwardRmpathEdges(i,L.edges[F],p,L);G.length>0&&(m=!0,C=o.dfsEdgeList[F].fromNode,G.forEach(function(Y){var Z="".concat(Y.label,"-").concat(a[Y.to].label);k[Z]||(k[Z]={projected:[],edgeLabel:Y.label,nodeLabel2:a[Y.to].label}),k[Z].projected.push({graphId:i.id,edge:Y,preNode:D})}))})},x=0;x<A;x++){var T=M(x);if(T==="break")break}if(!m)return!0;var O=e.findMinLabel(k);o.dfsEdgeList.push(new gp(C,v+1,Do.VACANT_NODE_LABEL,O.edgeLabel,O.nodeLabel2));var N=o.dfsEdgeList.length-1;return r.dfsEdgeList[N]!==o.dfsEdgeList[N]?!1:f(k["".concat(O.edgeLabel,"-").concat(O.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,DWe.clone)(e))}},t.prototype.subGraphMining=function(e){var r=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=r.graphs[c.graphId],h=f.nodeMap,d=new eE(c),p=a.length-1;p>=0;p--){var v=r.findBackwardEdge(f,d.edges[a[p]],d.edges[a[0]],d);if(v){var g="".concat(r.dfsCode.dfsEdgeList[a[p]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:r.dfsCode.dfsEdgeList[a[p]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:c.graphId,edge:v,preNode:c})}}if(!(i>=r.maxNodeNum)){var m=r.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=r.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var E="".concat(r.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[E]||(l[E]={projected:[],fromNodeId:r.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[E].projected.push({graphId:c.graphId,edge:S,preNode:c})})},p=0;p<a.length;p++)y(p)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;r.dfsCode.dfsEdgeList.push(new gp(o,h,"-1",d,"-1")),r.subGraphMining(u[c].projected),r.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,p=f.nodeLabel2;r.dfsCode.dfsEdgeList.push(new gp(h,o+1,Do.VACANT_NODE_LABEL,d,p)),r.subGraphMining(l[c].projected),r.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,r=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,p="".concat(l,"-").concat(d);if(!s[p]){var v=a[d]||0;v++,a[d]=v}s[p]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!r&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},t.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var r=this.graphs;this.directed;var n={};Object.keys(r).forEach(function(i){var a=r[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new gp(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},t}(),LWe=function(e,r,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new Do.Graph(s,!0,r),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],p=c[f.target];u.addEdge(-1,d,p,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},RWe=function(e,r,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[r]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},yW="cluster",NWe=function(e){var r=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?yW:a,s=e.edgeLabelProp,l=s===void 0?yW:s,u=LWe(r,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,p=e.top,v={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:p,verbose:d,directed:i},g=new PWe(v);g.run();var m=RWe(g.frequentSubgraphs,o,l);return m},FWe=NWe;tT.default=FWe;Object.defineProperty(eT,"__esModule",{value:!0});eT.default=void 0;var wW=Ole,bW=M6(vb),BWe=M6(tT),xW=M6(ty),$We=Ri;function M6(t){return t&&t.__esModule?t:{default:t}}var SW=function(e,r,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return r.forEach(function(s,l){a.push(Ule(o,s,l,n,i))}),a},Ule=function(e,r,n,i,a){var o=[n],s=[],l={};return r.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},zWe=function(e,r,n,i,a){var o=Math.ceil(n/r),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,p=u.neighborNum-1;f<o;){for(var v=d[1+Math.floor(Math.random()*p)],g=0;(s["".concat(c,"-").concat(v)]||s["".concat(v,"-").concat(c)])&&(v=Math.floor(Math.random()*r),g++,!(g>2*r)););if(g<2*r&&(s["".concat(c,"-").concat(v)]={start:c,end:v,distance:a[c][v]},f++,l++,l>=n))return s;if(h++,h>2*r)break}if(f<o){var m=o-f;o=(o+m)/(r-c-1)}}),s},M_=function(e,r,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=r[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=r[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var p={},v=d.length,g=0;g<v;g++){var m=a[d[g]];i[o].nodes.push(m),p[m.id]=!0}n.edges.forEach(function(y){p[y.source]&&p[y.target]&&i[o].edges.push(y)})}}}}),i},A_=function(e,r,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=r==null?void 0:r.edges)===null||a===void 0)&&a.length)||((o=r==null?void 0:r.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=r==null?void 0:r.nodes[0][n],d=r==null?void 0:r.nodes[1][n],p=r==null?void 0:r.edges[0][i];u[i]===p&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},jWe=function(e,r,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var p=0,v=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,v.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,E){var _=c[S];y.graphs.forEach(function(k,C){E!==C&&(b+=Math.abs(_-c[k]))})}),b/=x*(x-1)/2,p+=b}),p/=d.length;var g=0;v.forEach(function(y,w){v.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=v.length*(v.length-1)/2});var m=g-p;i<m&&(i=m,a=u)},s=0;s<r;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},EW=function(e,r){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[r];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},_W=function(e,r,n){var i={},a={};return e.forEach(function(o,s){i["".concat($We.uniqueId)]={idx:s,edge:o};var l=o[r];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},CW=function(e,r,n){var i=r.length,a={};return r.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},GWe=function(e,r,n,i,a,o,s,l,u,c,f){var h,d="".concat(r.id,"-").concat(n.id);if(c&&c[d])return c[d];var p=f?f[d]:void 0;if(!p){var v=(h={},h[d]={start:i[r.id].idx,end:i[n.id].idx,distance:a},h);f=M_(v,o,e,f),p=f[d]}return A_(p,s,l,u)},kW=function(e,r,n,i){var a,o,s,l=(a=e[r])===null||a===void 0?void 0:a.degree,u=(o=e[r])===null||o===void 0?void 0:o.inDegree,c=(s=e[r])===null||s===void 0?void 0:s.outDegree;return e[r]===void 0&&(l=1/0,u=1/0,c=1/0,i[r].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var p=n[f.id].outDegree;c>p&&(c=p)}),e[r]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},UWe=function(e,r,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=(0,bW.default)(e,n),f=(0,bW.default)(r,n),h=CW(e.nodes,c,n),d=CW(r.nodes,f,n),p=EW(e.nodes,o),v=p.nodeMap,g=p.nodeLabelMap,m=EW(r.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;_W(e.edges,s,v);var b=_W(r.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(Ze){x=x.concat(Ze)}),a||(a=Math.max.apply(Math,(0,wW.__spreadArray)((0,wW.__spreadArray)([],x,!1),[2],!1))),i||(i=a);var S=SW(e,c,o,i),E=SW(r,f,o,i),_=Math.min(100,u*(u-1)/2),k=zWe(i,u,_,S,c),C=M_(k,S,e),A=10,M=1,T=1,O=4,N={graphs:C,nodeLabelProp:o,edgeLabelProp:s,minSupport:M,minNodeNum:T,maxNodeNum:O,directed:n},R=(0,BWe.default)(N).slice(0,A),B=R.length,F=[];R.forEach(function(Ze,oe){F[oe]={},Object.keys(C).forEach(function(P){var _e=C[P],Pe=A_(_e,Ze,o,s);F[oe][P]=Pe})});var D=jWe(F,B,R),L=D.structure,G=D.structureCountMap,Y=r.nodes[0],Z=[],q=(l=r.nodes[0])===null||l===void 0?void 0:l[o],pe=-1/0;r.nodes.forEach(function(Ze){var oe=Ze[o],P=g[oe];(P==null?void 0:P.length)>pe&&(pe=P.length,Z=P,q=oe,Y=Ze)});var Se={},Ae={},He={},ct={},st={},Mt={};Object.keys(w).forEach(function(Ze,oe){st[Ze]=[],n&&(Mt[Ze]=[]);var P=w[Ze],_e={};P.forEach(function(Xe){var et=d["".concat(Y.id,"-").concat(Xe.id)];if(et&&st[Ze].push(et),_e["".concat(Y.id,"-").concat(Xe.id)]={start:0,end:y[Xe.id].idx,distance:et},n){var Ot=d["".concat(Xe.id,"-").concat(Y.id)];Ot&&Mt[Ze].push(Ot)}}),st[Ze]=st[Ze].sort(function(Xe,et){return Xe-et}),n&&(Mt[Ze]=Mt[Ze].sort(function(Xe,et){return Xe-et})),Ae=M_(_e,E,r,Ae);var Pe=[];if(Object.keys(_e).forEach(function(Xe){if(He[Xe]){Pe.push(He[Xe]);return}var et=Ae[Xe];He[Xe]=A_(et,L,o,s),Pe.push(He[Xe])}),Pe=Pe.sort(function(Xe,et){return et-Xe}),ct["".concat(Y.id,"-").concat(Ze)]=Pe,Ze!==q)for(var ye=(Z==null?void 0:Z.length)||0,Fe=function(et){var Ot=Z[et],nr=S[v[Ot.id].idx],Kt=nr.nodeLabelCountMap[Ze],At=w[Ze].length;if(!Kt||Kt.count<At)return Z.splice(et,1),"continue";for(var rr=!1,Qt=0;Qt<At;Qt++)if(Kt.dists[Qt]>st[Ze][Qt]){rr=!0;break}if(rr)return Z.splice(et,1),"continue";var hr={};nr.neighbors.forEach(function(Tr){var pn=h["".concat(Ot.id,"-").concat(Tr.id)];hr["".concat(Ot.id,"-").concat(Tr.id)]={start:v[Ot.id].idx,end:v[Tr.id].idx,distance:pn}}),C=M_(hr,S,e,C);var Xr=[];Object.keys(hr).forEach(function(Tr){if(G[Tr]){Xr.push(G[Tr]);return}var pn=C[Tr];G[Tr]=A_(pn,L,o,s),Xr.push(G[Tr])}),Xr=Xr.sort(function(Tr,pn){return pn-Tr});for(var Zn=!1,Qt=0;Qt<At;Qt++)if(Xr[Qt]<Pe[Qt]){Zn=!0;break}if(Zn)return Z.splice(et,1),"continue"},Be=ye-1;Be>=0;Be--)Fe(Be)});var yt=[];Z==null||Z.forEach(function(Ze){for(var oe=v[Ze.id].idx,P=Ule(e.nodes,c[oe],oe,o,a),_e=P.neighbors,Pe=_e.length,ye=!1,Fe=Pe-1;Fe>=0;Fe--){if(_e.length+1<r.nodes.length){ye=!0;return}var Be=_e[Fe],Xe=Be[o];if(!w[Xe]||!w[Xe].length){_e.splice(Fe,1);continue}if(!st[Xe]||!st[Xe].length){_e.splice(Fe,1);continue}var et="".concat(Ze.id,"-").concat(Be.id),Ot=h[et],nr=st[Xe].length-1,Kt=st[Xe][nr];if(Ot>Kt){_e.splice(Fe,1);continue}if(n){var At="".concat(Be.id,"-").concat(Ze.id),rr=h[At];nr=Mt[Xe].length-1;var Qt=Mt[Xe][nr];if(rr>Qt){_e.splice(Fe,1);continue}}var hr=G[et]?G[et]:GWe(e,Ze,Be,v,Ot,S,L,o,s,G,C),Xr="".concat(Y.id,"-").concat(Xe),Zn=ct[Xr][ct[Xr].length-1];if(hr<Zn){_e.splice(Fe,1);continue}var Tr=kW(Se,Xe,y,w),pn=Tr.minPatternNodeLabelDegree;if(Tr.minPatternNodeLabelInDegree,Tr.minPatternNodeLabelOutDegree,v[Be.id].degree<pn){_e.splice(Fe,1);continue}}ye||yt.push({nodes:[Ze].concat(_e)})});var ar=(0,xW.default)(r,Y.id,!1).length,Jt={};n?(Object.keys(ar).forEach(function(Ze){var oe=y[Ze].node[o];Jt[oe]?Jt[oe].push(ar[Ze]):Jt[oe]=[ar[Ze]]}),Object.keys(Jt).forEach(function(Ze){Jt[Ze].sort(function(oe,P){return oe-P})})):Jt=st;for(var er=yt.length,yr=function(oe){var P=yt[oe],_e=P.nodes[0],Pe={},ye={};P.nodes.forEach(function(Vt,kr){ye[Vt.id]={idx:kr,node:Vt,degree:0,inDegree:0,outDegree:0};var _t=Vt[o];Pe[_t]?Pe[_t]++:Pe[_t]=1});var Fe=[],Be={};e.edges.forEach(function(Vt){ye[Vt.source]&&ye[Vt.target]&&(Fe.push(Vt),Be[Vt[s]]?Be[Vt[s]]++:Be[Vt[s]]=1,ye[Vt.source].degree++,ye[Vt.target].degree++,ye[Vt.source].outDegree++,ye[Vt.target].inDegree++)});for(var Xe=Object.keys(b).length,et=!1,Ot=0;Ot<Xe;Ot++){var nr=Object.keys(b)[Ot];if(!Be[nr]||Be[nr]<b[nr].length){et=!0;break}}if(et)return yt.splice(oe,1),"continue";var Kt=Fe.length;if(Kt<r.edges.length)return yt.splice(oe,1),"break";for(var At=!1,rr=function(kr){var _t=Fe[kr],Yr=_t[s],an=b[Yr];if(!an||!an.length)return Be[Yr]--,an&&Be[Yr]<an.length?(At=!0,"break"):(Fe.splice(kr,1),ye[_t.source].degree--,ye[_t.target].degree--,ye[_t.source].outDegree--,ye[_t.target].inDegree--,"continue");var Ei=ye[_t.source].node[o],_i=ye[_t.target].node[o],Jn=!1;if(an.forEach(function(ui){var Ci=y[ui.source].node,ki=y[ui.target].node;Ci[o]===Ei&&ki[o]===_i&&(Jn=!0),!n&&Ci[o]===_i&&ki[o]===Ei&&(Jn=!0)}),!Jn)return Be[Yr]--,an&&Be[Yr]<an.length?(At=!0,"break"):(Fe.splice(kr,1),ye[_t.source].degree--,ye[_t.target].degree--,ye[_t.source].outDegree--,ye[_t.target].inDegree--,"continue")},Ot=Kt-1;Ot>=0;Ot--){var Qt=rr(Ot);if(Qt==="break")break}if(At)return yt.splice(oe,1),"continue";P.edges=Fe;var hr=(0,xW.default)(P,P.nodes[0].id,!1).length;if(Object.keys(hr).reverse().forEach(function(Vt){if(!(Vt===P.nodes[0].id||At)){if(hr[Vt]===1/0){var kr=ye[Vt].node[o];if(Pe[kr]--,Pe[kr]<w[kr].length){At=!0;return}var _t=P.nodes.indexOf(ye[Vt].node);P.nodes.splice(_t,1),ye[Vt]=void 0;return}var Yr=v[Vt].node[o];if(!Jt[Yr]||!Jt[Yr].length||hr[Vt]>Jt[Yr][Jt[Yr].length-1]){var kr=ye[Vt].node[o];if(Pe[kr]--,Pe[kr]<w[kr].length){At=!0;return}var _t=P.nodes.indexOf(ye[Vt].node);P.nodes.splice(_t,1),ye[Vt]=void 0}}}),At)return yt.splice(oe,1),"continue";for(var Xr=!0,Zn=0;Xr&&!At;){Xr=!1;var Tr=n?ye[_e.id].degree<y[Y.id].degree||ye[_e.id].inDegree<y[Y.id].inDegree||ye[_e.id].outDegree<y[Y.id].outDegree:ye[_e.id].degree<y[Y.id].degree;if(Tr){At=!0;break}if(Pe[_e[o]]<w[_e[o]].length){At=!0;break}for(var pn=P.nodes.length,li=pn-1;li>=0;li--){var vn=P.nodes[li],Xo=ye[vn.id].degree,ha=ye[vn.id].inDegree,Ps=ye[vn.id].outDegree,Sn=vn[o],da=kW(Se,Sn,y,w),Qi=da.minPatternNodeLabelDegree,Nn=da.minPatternNodeLabelInDegree,Ls=da.minPatternNodeLabelOutDegree,Rs=n?Xo<Qi||ha<Nn||Ps<Ls:Xo<Qi;if(Rs){if(Pe[vn[o]]--,Pe[vn[o]]<w[vn[o]].length){At=!0;break}P.nodes.splice(li,1),ye[vn.id]=void 0,Xr=!0}}if(At||!Xr&&Zn!==0)break;Kt=Fe.length;for(var Si=Kt-1;Si>=0;Si--){var rn=Fe[Si];if(!ye[rn.source]||!ye[rn.target]){Fe.splice(Si,1);var nn=rn[s];if(Be[nn]--,ye[rn.source]&&(ye[rn.source].degree--,ye[rn.source].outDegree--),ye[rn.target]&&(ye[rn.target].degree--,ye[rn.target].inDegree--),b[nn]&&Be[nn]<b[nn].length){At=!0;break}Xr=!0}}Zn++}if(At||At||P.nodes.length<r.nodes.length||Fe.length<r.edges.length)return yt.splice(oe,1),"continue"},or=er-1;or>=0;or--){var zt=yr(or);if(zt==="break")break}for(var tr=yt.length,Dr=function(oe){var P=yt[oe],_e={};P.edges.forEach(function(Fe){var Be="".concat(Fe.source,"-").concat(Fe.target,"-").concat(Fe.label);_e[Be]?_e[Be]++:_e[Be]=1});for(var Pe=function(Be){var Xe=yt[Be],et={};Xe.edges.forEach(function(nr){var Kt="".concat(nr.source,"-").concat(nr.target,"-").concat(nr.label);et[Kt]?et[Kt]++:et[Kt]=1});var Ot=!0;Object.keys(et).length!==Object.keys(_e).length?Ot=!1:Object.keys(_e).forEach(function(nr){et[nr]!==_e[nr]&&(Ot=!1)}),Ot&&yt.splice(Be,1)},ye=tr-1;ye>oe;ye--)Pe(ye);tr=yt.length},or=0;or<=tr-1;or++)Dr(or);return yt}}},WWe=UWe;eT.default=WWe;(function(t){function e(b){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},e(b)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return u.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return u.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return a.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return g.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return a.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return p.default}});var r=w(Pv),n=w(VA),i=w(xd),a=y(df),o=w(Ju),s=w(XA),l=w(ty),u=Am,c=w(vb),f=w(YA),h=w(qA),d=w(KA),p=w(JA),v=w(eT),g=Ri;function m(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,S=new WeakMap;return(m=function(_){return _?S:x})(b)}function y(b,x){if(!x&&b&&b.__esModule)return b;if(b===null||e(b)!=="object"&&typeof b!="function")return{default:b};var S=m(x);if(S&&S.has(b))return S.get(b);var E={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in b)if(k!=="default"&&Object.prototype.hasOwnProperty.call(b,k)){var C=_?Object.getOwnPropertyDescriptor(b,k):null;C&&(C.get||C.set)?Object.defineProperty(E,k,C):E[k]=b[k]}return E.default=b,S&&S.set(b,E),E}function w(b){return b&&b.__esModule?b:{default:b}}})(xle);function $R(t){"@babel/helpers - typeof";return $R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$R(t)}Object.defineProperty(WA,"__esModule",{value:!0});WA.default=void 0;var l3=VWe(xle),MW=bd;function Wle(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Wle=function(i){return i?r:e})(t)}function VWe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||$R(t)!=="object"&&typeof t!="function")return{default:t};var r=Wle(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var u3=typeof self<"u"?self:{};u3.onmessage=function(t){var e=t.data,r=e._algorithmType,n=e.data;if(r){if(typeof l3[r]=="function"){var i=l3[r].apply(l3,n);u3.postMessage({_algorithmType:MW.MESSAGE.SUCCESS,data:i});return}u3.postMessage({_algorithmType:MW.MESSAGE.FAILURE})}};var HWe=null;WA.default=HWe;Object.defineProperty(UA,"__esModule",{value:!0});UA.default=void 0;var XWe=bd,YWe=qWe(WA);function qWe(t){return t&&t.__esModule?t:{default:t}}var KWe=function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise(function(i,a){var o=new YWe.default;o.postMessage({_algorithmType:e,data:r}),o.onmessage=function(s){var l=s.data,u=l.data,c=l._algorithmType;XWe.MESSAGE.SUCCESS===c?i(u):a(),o.terminate()}})}},QWe=KWe;UA.default=QWe;Object.defineProperty(Nr,"__esModule",{value:!0});Nr.pageRankAsync=Nr.minimumSpanningTreeAsync=Nr.louvainAsync=Nr.labelPropagationAsync=Nr.getOutDegreeAsync=Nr.getNeighborsAsync=Nr.getInDegreeAsync=Nr.getDegreeAsync=Nr.getAdjMatrixAsync=Nr.floydWarshallAsync=Nr.findShortestPathAsync=Nr.findAllPathAsync=Nr.dijkstraAsync=Nr.detectCycleAsync=Nr.detectAllUndirectedCycleAsync=Nr.detectAllDirectedCycleAsync=Nr.detectAllCyclesAsync=Nr.connectedComponentAsync=Nr.GADDIAsync=void 0;var qi=ZWe(UA),Ki=bd;function ZWe(t){return t&&t.__esModule?t:{default:t}}var JWe=function(e,r){return(0,qi.default)(Ki.ALGORITHM.getAdjMatrix).apply(void 0,[e,r])};Nr.getAdjMatrixAsync=JWe;var eVe=function(e,r){return(0,qi.default)(Ki.ALGORITHM.connectedComponent).apply(void 0,[e,r])};Nr.connectedComponentAsync=eVe;var tVe=function(e){return(0,qi.default)(Ki.ALGORITHM.getDegree)(e)};Nr.getDegreeAsync=tVe;var rVe=function(e,r){return(0,qi.default)(Ki.ALGORITHM.getInDegree)(e,r)};Nr.getInDegreeAsync=rVe;var nVe=function(e,r){return(0,qi.default)(Ki.ALGORITHM.getOutDegree)(e,r)};Nr.getOutDegreeAsync=nVe;var iVe=function(e){return(0,qi.default)(Ki.ALGORITHM.detectCycle)(e)};Nr.detectCycleAsync=iVe;var aVe=function(e){return(0,qi.default)(Ki.ALGORITHM.detectAllCycles)(e)};Nr.detectAllCyclesAsync=aVe;var oVe=function(e){return(0,qi.default)(Ki.ALGORITHM.detectAllDirectedCycle)(e)};Nr.detectAllDirectedCycleAsync=oVe;var sVe=function(e){return(0,qi.default)(Ki.ALGORITHM.detectAllUndirectedCycle)(e)};Nr.detectAllUndirectedCycleAsync=sVe;var lVe=function(e,r,n,i){return(0,qi.default)(Ki.ALGORITHM.dijkstra).apply(void 0,[e,r,n,i])};Nr.dijkstraAsync=lVe;var uVe=function(e,r,n,i){return(0,qi.default)(Ki.ALGORITHM.findAllPath).apply(void 0,[e,r,n,i])};Nr.findAllPathAsync=uVe;var cVe=function(e,r,n,i,a){return(0,qi.default)(Ki.ALGORITHM.findShortestPath).apply(void 0,[e,r,n,i,a])};Nr.findShortestPathAsync=cVe;var fVe=function(e,r){return(0,qi.default)(Ki.ALGORITHM.floydWarshall).apply(void 0,[e,r])};Nr.floydWarshallAsync=fVe;var hVe=function(e,r,n,i){return i===void 0&&(i=1e3),(0,qi.default)(Ki.ALGORITHM.labelPropagation)(e,r,n,i)};Nr.labelPropagationAsync=hVe;var dVe=function(e,r,n,i){return(0,qi.default)(Ki.ALGORITHM.louvain)(e,r,n,i)};Nr.louvainAsync=dVe;var pVe=function(e,r,n){return(0,qi.default)(Ki.ALGORITHM.minimumSpanningTree).apply(void 0,[e,r,n])};Nr.minimumSpanningTreeAsync=pVe;var vVe=function(e,r,n){return(0,qi.default)(Ki.ALGORITHM.pageRank).apply(void 0,[e,r,n])};Nr.pageRankAsync=vVe;var gVe=function(e,r,n){return(0,qi.default)(Ki.ALGORITHM.getNeighbors).apply(void 0,[e,r,n])};Nr.getNeighborsAsync=gVe;var mVe=function(e,r,n,i,a,o,s){return n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),(0,qi.default)(Ki.ALGORITHM.GADDI).apply(void 0,[e,r,n,i,a,o,s])};Nr.GADDIAsync=mVe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return e.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return e.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return e.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return e.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return e.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return e.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return e.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return e.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return e.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return e.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return e.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return e.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return e.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return e.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return e.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return e.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return e.pageRankAsync}});var e=Nr,r=e.detectCycleAsync;t.detectDirectedCycleAsync=r;var n={getAdjMatrixAsync:e.getAdjMatrixAsync,connectedComponentAsync:e.connectedComponentAsync,getDegreeAsync:e.getDegreeAsync,getInDegreeAsync:e.getInDegreeAsync,getOutDegreeAsync:e.getOutDegreeAsync,detectCycleAsync:e.detectCycleAsync,detectDirectedCycleAsync:r,detectAllCyclesAsync:e.detectAllCyclesAsync,detectAllDirectedCycleAsync:e.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:e.detectAllUndirectedCycleAsync,dijkstraAsync:e.dijkstraAsync,findAllPathAsync:e.findAllPathAsync,findShortestPathAsync:e.findShortestPathAsync,floydWarshallAsync:e.floydWarshallAsync,labelPropagationAsync:e.labelPropagationAsync,louvainAsync:e.louvainAsync,minimumSpanningTreeAsync:e.minimumSpanningTreeAsync,pageRankAsync:e.pageRankAsync,getNeighborsAsync:e.getNeighborsAsync,GADDIAsync:e.GADDIAsync};t.default=n})(_6);const yVe=Ms(_6),wVe=YY({__proto__:null,default:yVe},[_6]);function bVe(){return window?window.devicePixelRatio:1}function Vle(t,e,r,n){var i=t-r,a=e-n;return Math.sqrt(i*i+a*a)}function Op(t,e,r,n,i,a){return i>=t&&i<=t+r&&a>=e&&a<=e+n}function d2(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function xVe(t,e){return!t||!e?t||e:{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}}function AW(t,e){return t[0]===e[0]&&t[1]===e[1]}var SVe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,EVe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_Ve=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Hle=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Xle(t,e){var r=t.match(Hle);Ce(r,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function CVe(t,e,r){var n=SVe.exec(r),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,h=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,d=t.createLinearGradient(s.x,s.y,f,h);return Xle(a,d),d}function kVe(t,e,r){var n=EVe.exec(r),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(Hle);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,h=Math.sqrt(c*c+f*f)/2,d=t.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*h);return Xle(s,d),d}function MVe(t,e,r){if(e.get("patternSource")&&e.get("patternSource")===r)return e.get("pattern");var n,i,a=_Ve.exec(r),o=a[1],s=a[2];function l(){n=t.createPattern(i,o),e.set("pattern",n),e.set("patternSource",r)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function AVe(t,e,r){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return r;if(Ve(r)){if(r[1]==="("||r[2]==="("){if(r[0]==="l")return CVe(t,e,r);if(r[0]==="r")return kVe(t,e,r);if(r[0]==="p")return MVe(t,e,r)}return r}if(r instanceof CanvasPattern)return r}function TVe(t){var e=0,r=0,n=0,i=0;return Ft(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,[e,r,n,i]}function tE(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function zR(t,e){return tE(t)*tE(e)?(t[0]*e[0]+t[1]*e[1])/(tE(t)*tE(e)):1}function TW(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(zR(t,e))}function IW(t,e){var r=e[1],n=e[2],i=RA(NA(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=Math.sqrt(d),n*=Math.sqrt(d));var p=r*r*(h*h)+n*n*(f*f),v=p?Math.sqrt((r*r*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*r*h/n:0,m=r?v*-n*f/r:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/r,(h-m)/n],x=[(-1*f-g)/r,(-1*h-m)/n],S=TW([1,0],b),E=TW(b,x);return zR(b,x)<=-1&&(E=Math.PI),zR(b,x)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:y,cy:w,rx:AW(t,[u,c])?0:r,ry:AW(t,[u,c])?0:n,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:a,sweepFlag:o}}var Fk=Math.sin,Bk=Math.cos,A6=Math.atan2,rE=Math.PI;function Yle(t,e,r,n,i,a,o){var s=e.stroke,l=e.lineWidth,u=r-i,c=n-a,f=A6(c,u),h=new D6({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Bk(rE/6)+","+10*Fk(rE/6)+" L0,0 L"+10*Bk(rE/6)+",-"+10*Fk(rE/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,f),t.set(o?"startArrowShape":"endArrowShape",h)}function qle(t,e,r,n,i,a,o){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,f=o?s:l,h=f.d,d=f.fill,p=f.stroke,v=f.lineWidth,g=wi(f,["d","fill","stroke","lineWidth"]),m=r-i,y=n-a,w=A6(y,m);h&&(i=i-Bk(w)*h,a=a-Fk(w)*h);var b=new D6({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:z(z({},g),{stroke:p||u,lineWidth:v||c,fill:d})});b.translate(i,a),b.rotateAtPoint(i,a,w),t.set(o?"startArrowShape":"endArrowShape",b)}function Yp(t,e,r,n,i){var a=A6(n-e,r-t);return{dx:Bk(a)*i,dy:Fk(a)*i}}function T6(t,e,r,n,i,a){typeof e.startArrow=="object"?qle(t,e,r,n,i,a,!0):e.startArrow?Yle(t,e,r,n,i,a,!0):t.set("startArrowShape",null)}function I6(t,e,r,n,i,a){typeof e.endArrow=="object"?qle(t,e,r,n,i,a,!1):e.endArrow?Yle(t,e,r,n,i,a,!1):t.set("startArrowShape",null)}var OW={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Im(t,e){var r=e.attr();for(var n in r){var i=r[n],a=OW[n]?OW[n]:n;a==="matrix"&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&t.setLineDash?Ft(i)&&t.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=AVe(t,e,i):a==="globalAlpha"&&(i=i*t.globalAlpha),t[a]=i)}}function jR(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(t,r):i.skipDraw()}}function IVe(t,e,r){var n=t.get("refreshElements");Ce(n,function(i){if(i!==t)for(var a=i.cfg.parent;a&&a!==t&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===t?O6(e):GR(e,r)}function GR(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&O6(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&GR(n.cfg.children,e);else{var i=OVe(n,e);n.cfg.refresh=i,i&&n.isGroup()&&GR(n.cfg.children,e)}}}function Kle(t){for(var e=0;e<t.length;e++){var r=t[e];r.cfg.hasChanged=!1,r.isGroup()&&!r.destroyed&&Kle(r.cfg.children)}}function O6(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&O6(n.get("children")))}}function OVe(t,e){var r=t.cfg.cacheCanvasBBox,n=t.cfg.isInView&&r&&d2(r,e);return n}function Qle(t,e,r,n){var i=r.path,a=r.startArrow,o=r.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(c===0&&a&&a.d){var d=t.getStartTangent();u=Yp(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var p=i[c+1];if(p[0]==="Z"){var d=t.getEndTangent();u=Yp(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=t.getEndTangent();u=Yp(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var v=u.dx,g=u.dy;switch(h){case"M":e.moveTo(f[1]-v,f[2]-g),l=[f[1],f[2]];break;case"L":e.lineTo(f[1]-v,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-v,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-v,f[6]-g);break;case"A":{var m=void 0;n?(m=n[c],m||(m=IW(s,f),n[c]=m)):m=IW(s,f);var y=m.cx,w=m.cy,b=m.rx,x=m.ry,S=m.startAngle,E=m.endAngle,_=m.xRotation,k=m.sweepFlag;if(e.ellipse)e.ellipse(y,w,b,x,_,S,E,1-k);else{var C=b>x?b:x,A=b>x?1:b/x,M=b>x?x/b:1;e.translate(y,w),e.rotate(_),e.scale(A,M),e.arc(0,0,C,S,E,1-k),e.scale(1/A,1/M),e.rotate(-_),e.translate(-y,-w)}break}case"Z":e.closePath();break}if(h==="Z")s=l;else{var T=f.length;s=[f[T-2],f[T-1]]}}}}function Zle(t,e){var r=t.get("canvas");r&&(e==="remove"&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(r.refreshElement(t,e,r),r.get("autoDraw")&&r.draw())))}function DVe(t){var e;if(t.destroyed)e=t._cacheCanvasBBox;else{var r=t.get("cacheCanvasBBox"),n=r&&!!(r.width&&r.height),i=t.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?e=xVe(r,i):n?e=r:a&&(e=i)}return e}function PVe(t){if(!t.length)return null;var e=[],r=[],n=[],i=[];return Ce(t,function(a){var o=DVe(a);o&&(e.push(o.minX),r.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:mc(e),minY:mc(r),maxX:gc(n),maxY:gc(i)}}function LVe(t,e){return!t||!e||!d2(t,e)?null:{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}}var Jle=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(r){Zle(this,r)},e.prototype.getShapeBase=function(){return WN},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(r,n){n&&(r.save(),Im(r,n),n.createPath(r),r.restore(),r.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var r=this.cfg.children,n=[],i=[];Ce(r,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(n.length){var o=mc(n),s=gc(n),l=mc(i),u=gc(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",d2(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(r,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(r.save(),Im(r,this),this._applyClip(r,this.getClip()),jR(r,i,n),r.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Lse),fu=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return WN},e.prototype.getGroupBase=function(){return Jle},e.prototype.onCanvasChange=function(r){Zle(this,r)},e.prototype.calculateBBox=function(){var r=this.get("type"),n=this.getHitLineWidth(),i=Fse(r),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(r,n){n&&(r.save(),Im(r,n),n.createPath(r),r.restore(),r.clip(),n._afterDraw())},e.prototype.draw=function(r,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!d2(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}r.save(),Im(r,this),this._applyClip(r,i),this.drawPath(r),r.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var r=this.cfg.canvas;return r?r.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var r=this.getCanvasViewBox();if(r){var n=this.getCanvasBBox(),i=d2(n,r);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(r){this.createPath(r),this.strokeAndFill(r),this.afterDrawPath(r)},e.prototype.fill=function(r){r.fill()},e.prototype.stroke=function(r){r.stroke()},e.prototype.strokeAndFill=function(r){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Dt(s)&&s!==1?(r.globalAlpha=s,this.fill(r),r.globalAlpha=a):this.fill(r)),this.isStroke()&&i>0&&(!Dt(o)&&o!==1&&(r.globalAlpha=o),this.stroke(r)),this.afterDrawPath(r)},e.prototype.createPath=function(r){},e.prototype.afterDrawPath=function(r){},e.prototype.isInShape=function(r,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(r,n,i,a,o)},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var r=this.attrs;return r.lineWidth+r.lineAppendWidth},e}(Rse),RVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,h=Vle(l,u,r,n);return a&&i?h<=c+f:a?h<=c:i?h>=c-f&&h<=c+f:!1},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.r;r.beginPath(),r.arc(i,a,o,0,Math.PI*2,!1),r.closePath()},e}(fu);function nE(t,e,r,n){return t/(r*r)+e/(n*n)}var NVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,h=s.ry,d=(r-u)*(r-u),p=(n-c)*(n-c);return a&&i?nE(d,p,f+l,h+l)<=1:a?nE(d,p,f,h)<=1:i?nE(d,p,f-l,h-l)>=1&&nE(d,p,f+l,h+l)<=1:!1},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(r.beginPath(),r.ellipse)r.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;r.save(),r.translate(i,a),r.scale(u,c),r.arc(0,0,l,0,Math.PI*2),r.restore(),r.closePath()}},e}(fu);function DW(t){return t instanceof HTMLElement&&Ve(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS"}var FVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(r){this._setImage(r.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var r=this.get("canvas");r?r.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(r){var n=this,i=this.attrs;if(Ve(r)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=r,this.set("loading",!0)}else r instanceof Image?(i.width||(i.width=r.width),i.height||(i.height=r.height)):DW(r)&&(i.width||(i.width=Number(r.getAttribute("width"))),i.height||(i.height,Number(r.getAttribute("height"))))},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r==="img"&&this._setImage(n)},e.prototype.createPath=function(r){if(this.get("loading")){this.set("toDraw",!0),this.set("context",r);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,c=n.swidth,f=n.sheight,h=n.img;(h instanceof Image||DW(h))&&(!Dt(l)&&!Dt(u)&&!Dt(c)&&!Dt(f)?r.drawImage(h,l,u,c,f,i,a,o,s):r.drawImage(h,i,a,o,s))},e}(fu);function zh(t,e,r,n,i,a,o){var s=Math.min(t,r),l=Math.max(t,r),u=Math.min(e,n),c=Math.max(e,n),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?sa.pointToLine(t,e,r,n,a,o)<=i/2:!1}var BVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),this.setArrow()},e.prototype.setArrow=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2,s=r.startArrow,l=r.endArrow;s&&T6(this,r,a,o,n,i),l&&I6(this,r,n,i,a,o)},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return zh(l,u,c,f,o,r,n)},e.prototype.createPath=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=Yp(i,a,o,s,n.startArrow.d)),u&&u.d&&(f=Yp(i,a,o,s,n.endArrow.d)),r.beginPath(),r.moveTo(i+c.dx,a+c.dy),r.lineTo(o-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2;return sa.length(n,i,a,o)},e.prototype.getPoint=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return sa.pointAt(i,a,o,s,r)},e}(fu),$Ve={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},zVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.initAttrs=function(r){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),["symbol","x","y","r","radius"].indexOf(r)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(r){return Dt(r.r)?r.radius:r.r},e.prototype._getPath=function(){var r=this.attr(),n=r.x,i=r.y,a=r.symbol||"circle",o=this._getR(r),s,l;if(Rn(a))s=a,l=s(n,i,o),l=Kse(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},e.prototype.createPath=function(r){var n=this._getPath(),i=this.get("paramsCache");Qle(this,r,{path:n},i)},e.Symbols=$Ve,e}(fu);function eue(t,e,r){var n=Hse();return t.createPath(n),n.isPointInPath(e,r)}var jVe=1e-6;function c3(t){return Math.abs(t)<jVe?0:t<0?-1:1}function GVe(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function tue(t,e,r){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(GVe(o,s,[e,r]))return!0;c3(o[1]-r)>0!=c3(s[1]-r)>0&&c3(e-(r-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function T1(t,e,r,n,i,a,o,s){var l=(Math.atan2(s-e,o-t)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:t+r*Math.cos(l),y:e+r*Math.sin(l)};return Vle(u.x,u.y,o,s)<=a/2}var UVe=yl;function WVe(t){for(var e=!1,r=t.length,n=0;n<r;n++){var i=t[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function VVe(t,e,r,n,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,f=l.prePoint,h=l.box;if(!(h&&!Op(h.x-o,h.y-o,h.width+e,h.height+e,r,n))){switch(l.command){case"L":case"Z":a=zh(f[0],f[1],u[0],u[1],e,r,n);break;case"Q":var d=Gse.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],r,n);a=d<=e/2;break;case"C":var p=J1.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],r,n,i);a=p<=e/2;break;case"A":var v=l.arcParams,g=v.cx,m=v.cy,y=v.rx,w=v.ry,b=v.startAngle,x=v.endAngle,S=v.xRotation,E=[r,n,1],_=y>w?y:w,k=y>w?1:y/w,C=y>w?w/y:1,A=UVe(null,[["t",-g,-m],["r",-S],["s",1/k,1/C]]);BA(E,E,A),a=T1(0,0,_,b,x,e,E[0],E[1]);break}if(a)break}}return a}function HVe(t){for(var e=t.length,r=[],n=[],i=[],a=0;a<e;a++){var o=t[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(r.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:r,polylines:n}}const iE=z({hasArc:WVe,extractPolygons:HVe,isPointInStroke:VVe},J9e);function PW(t,e,r){for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(n=tue(a,e,r),n)break}return n}var D6=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this._setPathArr(r.path),this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(r){this.attrs.path=Kse(r);var n=iE.hasArc(r);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var r=this.get("segements");return r||(r=Qse(this.attr("path")),this.set("segments",r)),r},e.prototype.setArrow=function(){var r=this.attr(),n=r.startArrow,i=r.endArrow;if(n){var a=this.getStartTangent();T6(this,r,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();I6(this,r,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=iE.isPointInStroke(s,o,r,n,c)}if(!u&&a)if(l)u=eue(this,r,n);else{var f=this.attr("path"),h=iE.extractPolygons(f);u=PW(h.polygons,r,n)||PW(h.polylines,r,n)}return u},e.prototype.createPath=function(r){var n=this.attr(),i=this.get("paramsCache");Qle(this,r,n,i)},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.get("totalLength");return Dt(r)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):r},e.prototype.getPoint=function(r){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;Ce(n,function(c,f){r>=c[0]&&r<=c[1]&&(i=(r-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if(Dt(s)||Dt(a))return null;var l=s.length,u=o[a+1];return J1.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},e.prototype._calculateCurve=function(){var r=this.attr().path;this.set("curve",iE.pathToCurve(r))},e.prototype._setTcache=function(){var r=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(u){if(Ce(u,function(c,f){s=u[f+1],l=c.length,s&&(r+=J1.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",r),r===0){this.set("tCache",[]);return}Ce(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=n/r,o=J1.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/r,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var r=this.getSegments(),n;if(r.length>1){var i=r[0].currentPoint,a=r[1].currentPoint,o=r[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var r=this.getSegments(),n=r.length,i;if(n>1){var a=r[n-2].currentPoint,o=r[n-1].currentPoint,s=r[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(fu);function rue(t,e,r,n,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(zh(s,l,u,c,e,r,n))return!0}if(i){var f=t[0],h=t[a-1];if(zh(f[0],f[1],h[0],h[1],e,r,n))return!0}return!1}var XVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=rue(s,o,r,n,!0)),!l&&a&&(l=tue(s,r,n)),l},e.prototype.createPath=function(r){var n=this.attr(),i=n.points;if(!(i.length<2)){r.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?r.moveTo(o[0],o[1]):r.lineTo(o[0],o[1])}r.closePath()}},e}(fu),YVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),this.setArrow(),["points"].indexOf(r)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var r=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&T6(this,r,i[1][0],i[1][1],l,u),o&&I6(this,r,i[s-2][0],i[s-2][1],c,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return rue(s,o,r,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(r){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var h=Yp(l,u,i[1][0],i[1][1],a.d);l+=h.dx,u+=h.dy}if(o&&o.d){var h=Yp(i[s-2][0],i[s-2][1],c,f,o.d);c-=h.dx,f-=h.dy}r.beginPath(),r.moveTo(l,u);for(var d=0;d<s-1;d++){var p=i[d];r.lineTo(p[0],p[1])}r.lineTo(c,f)}},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.attr().points,n=this.get("totalLength");return Dt(n)?(this.set("totalLength",Vse.length(r)),this.get("totalLength")):n},e.prototype.getPoint=function(r){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Ce(i,function(s,l){r>=s[0]&&r<=s[1]&&(a=(r-s[0])/(s[1]-s[0]),o=l)}),sa.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var r=this.attr().points;if(!(!r||r.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Ce(r,function(l,u){r[u+1]&&(o=[],o[0]=i/n,s=sa.length(l[0],l[1],r[u+1][0],r[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var r=this.attr().points,n=[];return n.push([r[1][0],r[1][1]]),n.push([r[0][0],r[0][1]]),n},e.prototype.getEndTangent=function(){var r=this.attr().points,n=r.length-1,i=[];return i.push([r[n-1][0],r[n-1][1]]),i.push([r[n][0],r[n][1]]),i},e}(fu);function qVe(t,e,r,n,i,a,o){var s=i/2;return Op(t-s,e-s,r,i,a,o)||Op(t+r-s,e-s,i,n,a,o)||Op(t+s,e+n-s,r,i,a,o)||Op(t-s,e+s,i,n,a,o)}function KVe(t,e,r,n,i,a,o,s){return zh(t+i,e,t+r-i,e,a,o,s)||zh(t+r,e+i,t+r,e+n-i,a,o,s)||zh(t+r-i,e+n,t+i,e+n,a,o,s)||zh(t,e+n-i,t,e+i,a,o,s)||T1(t+r-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||T1(t+r-i,e+n-i,i,0,.5*Math.PI,a,o,s)||T1(t+i,e+n-i,i,.5*Math.PI,Math.PI,a,o,s)||T1(t+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var QVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,h=s.radius;if(h){var p=!1;return i&&(p=KVe(l,u,c,f,h,o,r,n)),!p&&a&&(p=eue(this,r,n)),p}else{var d=o/2;if(a&&i)return Op(l-d,u-d,c+d,f+d,r,n);if(a)return Op(l,u,c,f,r,n);if(i)return qVe(l,u,c,f,o,r,n)}},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(r.beginPath(),l===0)r.rect(i,a,o,s);else{var u=TVe(l),c=u[0],f=u[1],h=u[2],d=u[3];r.moveTo(i+c,a),r.lineTo(i+o-f,a),f!==0&&r.arc(i+o-f,a+f,f,-Math.PI/2,0),r.lineTo(i+o,a+s-h),h!==0&&r.arc(i+o-h,a+s-h,h,0,Math.PI/2),r.lineTo(i+d,a+s),d!==0&&r.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),r.lineTo(i,a+c),c!==0&&r.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),r.closePath()}},e}(fu),ZVe=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(r){this._assembleFont(),r.text&&this._setText(r.text)},e.prototype._assembleFont=function(){var r=this.attrs;r.font=Yse(r)},e.prototype._setText=function(r){var n=null;Ve(r)&&r.indexOf(`
`)!==-1&&(n=r.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r.startsWith("font")&&this._assembleFont(),r==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var r=this.attrs,n=r.lineHeight,i=r.fontSize*1;return n?n-i:i*.14},e.prototype._drawTextArr=function(r,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=Xse(a.text,a.fontSize,a.lineHeight),h;Ce(n,function(d,p){h=l+p*(c+u)-f+u,o==="middle"&&(h+=f-u-(f-u)/2),o==="top"&&(h+=f-u),Dt(d)||(i?r.fillText(d,s,h):r.strokeText(d,s,h))})},e.prototype._drawText=function(r,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(r,s,n);else{var l=i.text;Dt(l)||(n?r.fillText(l,a,o):r.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(r){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Dt(o)&&o!==1&&(r.globalAlpha=a),this.stroke(r)),this.isFill()&&(!Dt(s)&&s!==1?(r.globalAlpha=s,this.fill(r),r.globalAlpha=a):this.fill(r)),this.afterDrawPath(r)},e.prototype.fill=function(r){this._drawText(r,!0)},e.prototype.stroke=function(r){this._drawText(r,!1)},e}(fu);function JVe(t,e){if(e){var r=mse(e);return Tp(r,t)}return t}function nue(t,e,r){var n=t.getTotalMatrix();if(n){var i=JVe([e,r,1],n),a=i[0],o=i[1];return[a,o]}return[e,r]}function LW(t,e,r){if(t.isCanvas&&t.isCanvas())return!0;if(!vR(t)||t.cfg.isInView===!1)return!1;if(t.cfg.clipShape){var n=nue(t,e,r),i=n[0],a=n[1];if(t.isClipped(i,a))return!1}var o=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&r>=o.minY&&r<=o.maxY}function iue(t,e,r){if(!LW(t,e,r))return null;for(var n=null,i=t.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=iue(s,e,r);else if(LW(s,e,r)){var l=s,u=nue(s,e,r),c=u[0],f=u[1];l.isInShape(c,f)&&(n=s)}if(n)break}return n}var nf=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.renderer="canvas",r.autoDraw=!0,r.localRefresh=!0,r.refreshElements=[],r.clipView=!0,r.quickHit=!1,r},e.prototype.onCanvasChange=function(r){(r==="attr"||r==="sort"||r==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return WN},e.prototype.getGroupBase=function(){return Jle},e.prototype.getPixelRatio=function(){var r=this.get("pixelRatio")||bVe();return r>=1?Math.ceil(r):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var r=document.createElement("canvas"),n=r.getContext("2d");return this.set("context",n),r},e.prototype.setDOMSize=function(r,n){t.prototype.setDOMSize.call(this,r,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*r,a.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var r=this.get("context"),n=this.get("el");r.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(r,n){var i;return this.get("quickHit")?i=iue(this,r,n):i=t.prototype.getShape.call(this,r,n,null),i},e.prototype._getRefreshRegion=function(){var r=this.get("refreshElements"),n=this.getViewRange(),i;if(r.length&&r[0]===this)i=n;else if(i=PVe(r),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=LVe(i,n))}return i},e.prototype.refreshElement=function(r){var n=this.get("refreshElements");n.push(r)},e.prototype._clearFrame=function(){var r=this.get("drawFrame");r&&(aae(r),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var r=this.get("drawFrame");this.get("autoDraw")&&r||this._startDraw()},e.prototype._drawAll=function(){var r=this.get("context"),n=this.get("el"),i=this.getChildren();r.clearRect(0,0,n.width,n.height),Im(r,this),jR(r,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var r=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(r.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),r.save(),r.beginPath(),r.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),r.clip(),Im(r,this),IVe(this,i,a),jR(r,i,a),r.restore()):n.length&&Kle(n),Ce(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var r=this,n=this.get("drawFrame");n||(n=iae(function(){r.get("localRefresh")?r._drawRegion():r._drawAll(),r.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var r=this.get("el");r.width=0,r.height=0,r.parentNode.removeChild(r)},e}(Pse),UR={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Hr={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function dl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function aue(t){var e=UR[t.type],r=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var n=dl(e);if(t.get("id")&&(n.id=t.get("id")),t.set("el",n),t.set("attrs",{}),r){var i=r.get("el");i||(i=r.createDom(),r.set("el",i)),i.appendChild(n)}return n}function oue(t,e){var r=t.get("el"),n=uae(r.children).sort(e),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),r.appendChild(i)}function eHe(t,e){var r=t.parentNode,n=Array.from(r.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[e],a=n.indexOf(t);if(i){if(a>e)r.insertBefore(t,i);else if(a<e){var o=n[e+1];o?r.insertBefore(t,o):r.appendChild(t)}}else r.appendChild(t)}function tHe(t,e){var r=t.cfg.el,n=t.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)r.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),r.setAttribute("filter","url(#"+a+")")}}function yb(t){var e=t.attr().matrix;if(e){for(var r=t.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);n=n.join(","),n.indexOf("NaN")===-1?r.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function p2(t,e){var r=t.getClip(),n=t.get("el");if(!r)n.removeAttribute("clip-path");else if(r&&!n.hasAttribute("clip-path")){aue(r),r.createPath(e);var i=e.addClip(r);n.setAttribute("clip-path","url(#"+i+")")}}function sue(t,e){e.forEach(function(r){r.draw(t)})}function lue(t,e){var r=t.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context"),i=t.getParent(),a=i?i.getChildren():[r],o=t.get("el");if(e==="remove"){var s=t.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")eHe(o,a.indexOf(t));else if(e==="sort"){var c=t.get("children");c&&c.length&&oue(t,function(f,h){return c.indexOf(f)-c.indexOf(h)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?yb(t):e==="clip"?p2(t,n):e==="attr"||e==="add"&&t.draw(n)}}var uue=function(t){lr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var r=dl("g");this.set("el",r);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,r)}},e.prototype.onCanvasChange=function(r){lue(this,r)},e.prototype.getShapeBase=function(){return VN},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(r){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),p2(this,r),this.createPath(r),n.length&&sue(r,n))},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){Hr[s]&&a.setAttribute(Hr[s],o)}),yb(this)},e}(Lse),wl=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="svg",r.canFill=!1,r.canStroke=!1,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,r)}},e.prototype.getShapeBase=function(){return VN},e.prototype.getGroupBase=function(){return uue},e.prototype.onCanvasChange=function(r){lue(this,r)},e.prototype.calculateBBox=function(){var r=this.get("el"),n=null;if(r)n=r.getBBox();else{var i=Fse(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),c=u/2,f=a-c,h=o-c,d=a+s+c,p=o+l+c;return{x:f,y:h,minX:f,minY:h,maxX:d,maxY:p,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var r=this.attr(),n=r.fill,i=r.fillStyle;return(n||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var r=this.attr(),n=r.stroke,i=r.strokeStyle;return(n||i)&&this.canStroke},e.prototype.draw=function(r,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||aue(this),p2(this,r),this.createPath(r,n),this.shadow(r,n),this.strokeAndFill(r,n),this.transform(n))},e.prototype.createPath=function(r,n){},e.prototype.strokeAndFill=function(r,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(r,"fill",a):"fillStyle"in i&&this._setColor(r,"fill",o):this._setColor(r,"fill",a||o),u&&h.setAttribute(Hr.fillOpacity,u)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(r,"stroke",s):"strokeStyle"in i&&this._setColor(r,"stroke",l):this._setColor(r,"stroke",s||l),c&&h.setAttribute(Hr.strokeOpacity,c),f&&h.setAttribute(Hr.lineWidth,f))},e.prototype._setColor=function(r,n,i){var a=this.get("el");if(!i){a.setAttribute(Hr[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=r.find("gradient",i);o||(o=r.addGradient(i)),a.setAttribute(Hr[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=r.find("pattern",i);o||(o=r.addPattern(i)),a.setAttribute(Hr[n],"url(#"+o+")")}else a.setAttribute(Hr[n],i)},e.prototype.shadow=function(r,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&tHe(this,r)},e.prototype.transform=function(r){var n=this.attr(),i=(r||n).matrix;i&&yb(this)},e.prototype.isInShape=function(r,n){return this.isPointInPath(r,n)},e.prototype.isPointInPath=function(r,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=r+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var r=this.attrs,n=r.lineWidth,i=r.lineAppendWidth;return this.isStroke()?n+i:0},e}(Rse),rHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="circle",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,r:0})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Hr[s]&&a.setAttribute(Hr[s],o)})},e}(wl),nHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="dom",r.canFill=!1,r.canStroke=!1,r}return e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");if(Ce(n||i,function(u,c){Hr[c]&&a.setAttribute(Hr[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(wl),iHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="ellipse",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Hr[s]&&a.setAttribute(Hr[s],o)})},e}(wl),aHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="image",r.canFill=!1,r.canStroke=!1,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");Ce(n||a,function(s,l){l==="img"?i._setImage(a.img):Hr[l]&&o.setAttribute(Hr[l],s)})},e.prototype.setAttr=function(r,n){this.attrs[r]=n,r==="img"&&this._setImage(n)},e.prototype._setImage=function(r){var n=this.attr(),i=this.get("el");if(Ve(r))i.setAttribute("href",r);else if(r instanceof window.Image)n.width||(i.setAttribute("width",r.width),this.attr("width",r.width)),n.height||(i.setAttribute("height",r.height),this.attr("height",r.height)),i.setAttribute("href",r.src);else if(r instanceof HTMLElement&&Ve(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",r.toDataURL());else if(r instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+r.width),a.setAttribute("height",""+r.height),a.getContext("2d").putImageData(r,0,0),n.width||(i.setAttribute("width",""+r.width),this.attr("width",r.width)),n.height||(i.setAttribute("height",""+r.height),this.attr("height",r.height)),i.setAttribute("href",a.toDataURL())}},e}(wl),oHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="line",r.canFill=!1,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=ua(o)?r.addArrow(i,Hr[s]):r.getDefaultArrow(i,Hr[s]);a.setAttribute(Hr[s],"url(#"+l+")")}else a.removeAttribute(Hr[s]);else Hr[s]&&a.setAttribute(Hr[s],o)})},e.prototype.getTotalLength=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2;return sa.length(n,i,a,o)},e.prototype.getPoint=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return sa.pointAt(i,a,o,s,r)},e}(wl),aE={circle:function(t,e,r){return[["M",t,e],["m",-r,0],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["z"]]},triangleDown:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}};const RW={get:function(t){return aE[t]},register:function(t,e){aE[t]=e},remove:function(t){delete aE[t]},getAll:function(){return aE}};var sHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="marker",r.canFill=!0,r.canStroke=!0,r}return e.prototype.createPath=function(r){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var r=this._getPath();return Ft(r)?r.map(function(n){return n.join(" ")}).join(""):r},e.prototype._getPath=function(){var r=this.attr(),n=r.x,i=r.y,a=r.r||r.radius,o=r.symbol||"circle",s;return Rn(o)?s=o:s=RW.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=RW,e}(wl),lHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="path",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");Ce(n||a,function(s,l){if(l==="path"&&Ft(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=ua(s)?r.addArrow(a,Hr[l]):r.getDefaultArrow(a,Hr[l]);o.setAttribute(Hr[l],"url(#"+u+")")}else o.removeAttribute(Hr[l]);else Hr[l]&&o.setAttribute(Hr[l],s)})},e.prototype._formatPath=function(r){var n=r.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var r=this.get("el");return r?r.getTotalLength():null},e.prototype.getPoint=function(r){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(r*i):null;return a?{x:a.x,y:a.y}:null},e}(wl),uHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="polygon",r.canFill=!0,r.canStroke=!0,r}return e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){s==="points"&&Ft(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Hr[s]&&a.setAttribute(Hr[s],o)})},e}(wl),cHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="polyline",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),["points"].indexOf(r)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Ce(n||i,function(o,s){s==="points"&&Ft(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Hr[s]&&a.setAttribute(Hr[s],o)})},e.prototype.getTotalLength=function(){var r=this.attr().points,n=this.get("totalLength");return Dt(n)?(this.set("totalLength",Vse.length(r)),this.get("totalLength")):n},e.prototype.getPoint=function(r){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Ce(i,function(s,l){r>=s[0]&&r<=s[1]&&(a=(r-s[0])/(s[1]-s[0]),o=l)}),sa.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var r=this.attr().points;if(!(!r||r.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Ce(r,function(l,u){r[u+1]&&(o=[],o[0]=i/n,s=sa.length(l[0],l[1],r[u+1][0],r[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var r=this.attr().points,n=[];return n.push([r[1][0],r[1][1]]),n.push([r[0][0],r[0][1]]),n},e.prototype.getEndTangent=function(){var r=this.attr().points,n=r.length-1,i=[];return i.push([r[n-1][0],r[n-1][1]]),i.push([r[n][0],r[n][1]]),i},e}(wl);function fHe(t){var e=0,r=0,n=0,i=0;return Ft(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var hHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="rect",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];Ce(n||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&Hr[c]&&o.setAttribute(Hr[c],u)})},e.prototype._assembleRect=function(r){var n=r.x,i=r.y,a=r.width,o=r.height,s=r.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=fHe(s);Ft(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},e}(wl),NW=.3,dHe={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},pHe={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},vHe={left:"left",start:"left",center:"middle",right:"end",end:"end"},gHe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="text",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return z(z({},r),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),Ce(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?yb(i):Hr[l]&&o.setAttribute(Hr[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var r=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=gse();o&&o.name==="firefox"?r.setAttribute("dominant-baseline",pHe[i]||"alphabetic"):r.setAttribute("alignment-baseline",dHe[i]||"baseline"),r.setAttribute("text-anchor",vHe[a]||"left")},e.prototype._setText=function(r){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!r)n.innerHTML="";else if(~r.indexOf(`
`)){var l=r.split(`
`),u=l.length-1,c="";Ce(l,function(f,h){h===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+NW)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-NW)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=r},e}(wl),mHe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,yHe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,wHe=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function cue(t){var e=t.match(wHe);if(!e)return"";var r="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),Ce(e,function(n){n=n.split(":"),r+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),r}function bHe(t,e){var r=mHe.exec(t),n=RA(NA(parseFloat(r[1])),Math.PI*2),i=r[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=cue(i)}function xHe(t,e){var r=yHe.exec(t),n=parseFloat(r[1]),i=parseFloat(r[2]),a=parseFloat(r[3]),o=r[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=cue(o)}var SHe=function(){function t(e){this.cfg={};var r=null,n=yc("gradient_");return e.toLowerCase()[0]==="l"?(r=dl("linearGradient"),bHe(e,r)):(r=dl("radialGradient"),xHe(e,r)),r.setAttribute("id",n),this.el=r,this.id=n,this.cfg=e,this}return t.prototype.match=function(e,r){return this.cfg===r},t}(),EHe={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},_He={x:"-40%",y:"-40%",width:"200%",height:"200%"},CHe=function(){function t(e){this.type="filter",this.cfg={},this.type="filter";var r=dl("filter");return Ce(_He,function(n,i){r.setAttribute(i,n)}),this.el=r,this.id=yc("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,r),this}return t.prototype.match=function(e,r){if(this.type!==e)return!1;var n=!0,i=this.cfg;return Ce(Object.keys(i),function(a){if(i[a]!==r[a])return n=!1,!1}),n},t.prototype.update=function(e,r){var n=this.cfg;return n[EHe[e]]=r,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(e,r){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;r.innerHTML=n},t}(),FW=function(){function t(e,r){this.cfg={};var n=dl("marker"),i=yc("marker_");n.setAttribute("id",i);var a=dl("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=e[r==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(r,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(e,r){var n=this.el;r.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(e,r){var n=this.el,i=this.cfg.path,a=this.cfg.d;Ft(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),r.setAttribute("d",i),n.appendChild(r),a&&n.setAttribute("refX",""+a/e)},t.prototype.update=function(e){var r=this.child;r.attr?r.attr("fill",e):r.setAttribute("fill",e)},t}(),kHe=function(){function t(e){this.type="clip",this.cfg={};var r=dl("clipPath");this.el=r,this.id=yc("clip_"),r.id=this.id;var n=e.cfg.el;return r.appendChild(n),this.cfg=e,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},t}(),MHe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,AHe=function(){function t(e){this.cfg={};var r=dl("pattern");r.setAttribute("patternUnits","userSpaceOnUse");var n=dl("image");r.appendChild(n);var i=yc("pattern_");r.id=i,this.el=r,this.id=i,this.cfg=e;var a=MHe.exec(e),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){r.setAttribute("width",""+s.width),r.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return t.prototype.match=function(e,r){return this.cfg===r},t}(),THe=function(){function t(e){var r=dl("defs"),n=yc("defs_");r.id=n,e.appendChild(r),this.children=[],this.defaultArrow={},this.el=r,this.canvas=e}return t.prototype.find=function(e,r){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(e,r)){i=n[a].id;break}return i},t.prototype.findById=function(e){for(var r=this.children,n=null,i=0;i<r.length;i++)if(r[i].id===e){n=r[i];break}return n},t.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},t.prototype.getDefaultArrow=function(e,r){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new FW(e,r);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},t.prototype.addGradient=function(e){var r=new SHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addArrow=function(e,r){var n=new FW(e,r);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(e){var r=new CHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addPattern=function(e){var r=new AHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addClip=function(e){var r=new kHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t}(),tw=function(t){lr(e,t);function e(r){return t.call(this,z(z({},r),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return VN},e.prototype.getGroupBase=function(){return uue},e.prototype.getShape=function(r,n,i){var a=i.target||i.srcElement;if(!UR[a.tagName]){for(var o=a.parentNode;o&&!UR[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var r=dl("svg"),n=new THe(r);return r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")),this.set("context",n),r},e.prototype.onCanvasChange=function(r){var n=this.get("context"),i=this.get("el");if(r==="sort"){var a=this.get("children");a&&a.length&&oue(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(r==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else r==="matrix"?yb(this):r==="clip"?p2(this,n):r==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var r=this.get("context"),n=this.getChildren();p2(this,r),n.length&&sue(r,n)},e}(Pse);function oE(t,e,r){if(t){if(typeof t.addEventListener=="function")return t.addEventListener(e,r,!1),{remove:function(){t.removeEventListener(e,r,!1)}};if(typeof t.attachEvent=="function")return t.attachEvent("on"+e,r),{remove:function(){t.detachEvent("on"+e,r)}}}}var I1,f3,fue,WR;function IHe(){I1=document.createElement("table"),f3=document.createElement("tr"),fue=/^\s*<(\w+|!)[^>]*>/,WR={tr:document.createElement("tbody"),tbody:I1,thead:I1,tfoot:I1,td:f3,th:f3,"*":document.createElement("div")}}function wn(t){I1||IHe();var e=fue.test(t)&&RegExp.$1;(!e||!(e in WR))&&(e="*");var r=WR[e];t=typeof t=="string"?t.replace(/(^\s*)|(\s*$)/g,""):t,r.innerHTML=""+t;var n=r.childNodes[0];return n&&r.contains(n)&&r.removeChild(n),n}function Cr(t,e){if(t)for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r]);return t}var hue={exports:{}},OHe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},due={exports:{}},DHe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},PHe=DHe,LHe=Array.prototype.concat,RHe=Array.prototype.slice,BW=due.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];PHe(a)?r=LHe.call(r,RHe.call(a)):r.push(a)}return r};BW.wrap=function(t){return function(){return t(BW(arguments))}};var NHe=due.exports,rw=OHe,wb=NHe,pue=Object.hasOwnProperty,vue=Object.create(null);for(var h3 in rw)pue.call(rw,h3)&&(vue[rw[h3]]=h3);var vs=hue.exports={to:{},get:{}};vs.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=vs.get.hsl(t),n="hsl";break;case"hwb":r=vs.get.hwb(t),n="hwb";break;default:r=vs.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};vs.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,o=[0,0,0,1],s,l,u;if(s=t.match(r)){for(u=s[2],s=s[1],l=0;l<3;l++){var c=l*2;o[l]=parseInt(s.slice(c,c+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(s=t.match(e)){for(s=s[1],u=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(s=t.match(n)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=t.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=t.match(a))?s[1]==="transparent"?[0,0,0,0]:pue.call(rw,s[1])?(o=rw[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=nd(o[l],0,255);return o[3]=nd(o[3],0,1),o};vs.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,a=nd(parseFloat(r[2]),0,100),o=nd(parseFloat(r[3]),0,100),s=nd(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};vs.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,a=nd(parseFloat(r[2]),0,100),o=nd(parseFloat(r[3]),0,100),s=nd(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};vs.to.hex=function(){var t=wb(arguments);return"#"+sE(t[0])+sE(t[1])+sE(t[2])+(t[3]<1?sE(Math.round(t[3]*255)):"")};vs.to.rgb=function(){var t=wb(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};vs.to.rgb.percent=function(){var t=wb(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};vs.to.hsl=function(){var t=wb(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};vs.to.hwb=function(){var t=wb(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};vs.to.keyword=function(t){return vue[t.slice(0,3)]};function nd(t,e,r){return Math.min(Math.max(e,t),r)}function sE(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var FHe=hue.exports,gue={exports:{}},BHe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qp=BHe,mue={};for(var d3 in qp)qp.hasOwnProperty(d3)&&(mue[qp[d3]]=d3);var Yt=gue.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var ko in Yt)if(Yt.hasOwnProperty(ko)){if(!("channels"in Yt[ko]))throw new Error("missing channels property: "+ko);if(!("labels"in Yt[ko]))throw new Error("missing channel labels property: "+ko);if(Yt[ko].labels.length!==Yt[ko].channels)throw new Error("channel and label counts mismatch: "+ko);var $He=Yt[ko].channels,zHe=Yt[ko].labels;delete Yt[ko].channels,delete Yt[ko].labels,Object.defineProperty(Yt[ko],"channels",{value:$He}),Object.defineProperty(Yt[ko],"labels",{value:zHe})}Yt.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=a-i,s,l,u;return a===i?s=0:e===a?s=(r-n)/o:r===a?s=2+(n-e)/o:n===a&&(s=4+(e-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=o/(a+i):l=o/(2-a-i),[s,l*100,u*100]};Yt.rgb.hsv=function(t){var e,r,n,i,a,o=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(o,s,l),c=u-Math.min(o,s,l),f=function(h){return(u-h)/6/c+1/2};return c===0?i=a=0:(a=c/u,e=f(o),r=f(s),n=f(l),o===u?i=n-r:s===u?i=1/3+e-n:l===u&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,a*100,u*100]};Yt.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=Yt.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,a*100,n*100]};Yt.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,a,o,s;return s=Math.min(1-e,1-r,1-n),i=(1-e-s)/(1-s)||0,a=(1-r-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,[i*100,a*100,o*100,s*100]};function jHe(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}Yt.rgb.keyword=function(t){var e=mue[t];if(e)return e;var r=1/0,n;for(var i in qp)if(qp.hasOwnProperty(i)){var a=qp[i],o=jHe(t,a);o<r&&(r=o,n=i)}return n};Yt.keyword.rgb=function(t){return qp[t]};Yt.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,a=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,a*100,o*100]};Yt.rgb.lab=function(t){var e=Yt.rgb.xyz(t),r=e[0],n=e[1],i=e[2],a,o,s;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=116*n-16,o=500*(r-n),s=200*(n-i),[a,o,s]};Yt.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,a,o,s,l;if(r===0)return l=n*255,[l,l,l];n<.5?a=n*(1+r):a=n+r-n*r,i=2*n-a,s=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(a-i)*6*o:2*o<1?l=a:3*o<2?l=i+(a-i)*(2/3-o)*6:l=i,s[u]=l*255;return s};Yt.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,a=Math.max(n,.01),o,s;return n*=2,r*=n<=1?n:2-n,i*=a<=1?a:2-a,s=(n+r)/2,o=n===0?2*i/(a+i):2*r/(n+r),[e,o*100,s*100]};Yt.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*n*(1-r),s=255*n*(1-r*a),l=255*n*(1-r*(1-a));switch(n*=255,i){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}};Yt.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),a,o,s;return s=(2-r)*n,a=(2-r)*i,o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};Yt.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,a,o,s,l;i>1&&(r/=i,n/=i),a=Math.floor(6*e),o=1-n,s=6*e-a,a&1&&(s=1-s),l=r+s*(o-r);var u,c,f;switch(a){default:case 6:case 0:u=o,c=l,f=r;break;case 1:u=l,c=o,f=r;break;case 2:u=r,c=o,f=l;break;case 3:u=r,c=l,f=o;break;case 4:u=l,c=r,f=o;break;case 5:u=o,c=r,f=l;break}return[u*255,c*255,f*255]};Yt.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,a,o,s;return a=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),s=1-Math.min(1,n*(1-i)+i),[a*255,o*255,s*255]};Yt.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,a,o;return i=e*3.2406+r*-1.5372+n*-.4986,a=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[i*255,a*255,o*255]};Yt.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,a=500*(e-r),o=200*(r-n),[i,a,o]};Yt.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;a=(e+16)/116,i=r/500+a,o=a-n/200;var s=Math.pow(a,3),l=Math.pow(i,3),u=Math.pow(o,3);return a=s>.008856?s:(a-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,a*=100,o*=108.883,[i,a,o]};Yt.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return i=Math.atan2(n,r),a=i*360/2/Math.PI,a<0&&(a+=360),o=Math.sqrt(r*r+n*n),[e,o,a]};Yt.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),a=r*Math.sin(o),[e,i,a]};Yt.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:Yt.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(a+=60),a};Yt.hsv.ansi16=function(t){return Yt.rgb.ansi16(Yt.hsv.rgb(t),t[2])};Yt.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};Yt.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,a=(e>>2&1)*r*255;return[n,i,a]};Yt.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,a=r%6/5*255;return[n,i,a]};Yt.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};Yt.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),i=n>>16&255,a=n>>8&255,o=n&255;return[i,a,o]};Yt.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),a=Math.min(Math.min(e,r),n),o=i-a,s,l;return o<1?s=a/(1-o):s=0,o<=0?l=0:i===e?l=(r-n)/o%6:i===r?l=2+(n-e)/o:l=4+(e-r)/o+4,l/=6,l%=1,[l*360,o*100,s*100]};Yt.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Yt.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Yt.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],a=e%1*6,o=a%1,s=1-o,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};Yt.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Yt.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Yt.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Yt.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],i*100,a*100]};Yt.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Yt.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Yt.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Yt.gray.hsl=Yt.gray.hsv=function(t){return[0,0,t[0]]};Yt.gray.hwb=function(t){return[0,100,t[0]]};Yt.gray.cmyk=function(t){return[0,0,0,t[0]]};Yt.gray.lab=function(t){return[t[0],0,0]};Yt.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};Yt.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var yue=gue.exports,$k=yue;function GHe(){for(var t={},e=Object.keys($k),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function UHe(t){var e=GHe(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys($k[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=e[s];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,r.unshift(s))}return e}function WHe(t,e){return function(r){return e(t(r))}}function VHe(t,e){for(var r=[e[t].parent,t],n=$k[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=WHe($k[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}var HHe=function(t){for(var e=UHe(t),r={},n=Object.keys(e),i=n.length,a=0;a<i;a++){var o=n[a],s=e[o];s.parent!==null&&(r[o]=VHe(o,e))}return r},VR=yue,XHe=HHe,Ug={},YHe=Object.keys(VR);function qHe(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function KHe(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}YHe.forEach(function(t){Ug[t]={},Object.defineProperty(Ug[t],"channels",{value:VR[t].channels}),Object.defineProperty(Ug[t],"labels",{value:VR[t].labels});var e=XHe(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];Ug[t][n]=KHe(i),Ug[t][n].raw=qHe(i)})});var QHe=Ug,O1=FHe,us=QHe,P6=[].slice,wue=["keyword","gray","hex"],HR={};Object.keys(us).forEach(function(t){HR[P6.call(us[t].labels).sort().join("")]=t});var zk={};function ba(t,e){if(!(this instanceof ba))return new ba(t,e);if(e&&e in wue&&(e=null),e&&!(e in us))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof ba)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=O1.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=us[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=us[this.model].channels;var a=P6.call(t,0,n);this.color=XR(a,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var s=o.sort().join("");if(!(s in HR))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=HR[s];var l=us[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(t[l[r]]);this.color=XR(u)}if(zk[this.model])for(n=us[this.model].channels,r=0;r<n;r++){var c=zk[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ba.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in O1.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return O1.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return O1.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=us[this.model].channels,r=us[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new ba(this.color.map(JHe(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new ba(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:ni("rgb",0,Bi(255)),green:ni("rgb",1,Bi(255)),blue:ni("rgb",2,Bi(255)),hue:ni(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:ni("hsl",1,Bi(100)),lightness:ni("hsl",2,Bi(100)),saturationv:ni("hsv",1,Bi(100)),value:ni("hsv",2,Bi(100)),chroma:ni("hcg",1,Bi(100)),gray:ni("hcg",2,Bi(100)),white:ni("hwb",1,Bi(100)),wblack:ni("hwb",2,Bi(100)),cyan:ni("cmyk",0,Bi(100)),magenta:ni("cmyk",1,Bi(100)),yellow:ni("cmyk",2,Bi(100)),black:ni("cmyk",3,Bi(100)),x:ni("xyz",0,Bi(100)),y:ni("xyz",1,Bi(100)),z:ni("xyz",2,Bi(100)),l:ni("lab",0,Bi(100)),a:ni("lab",1),b:ni("lab",2),keyword:function(t){return arguments.length?new ba(t):us[this.model].keyword(this.color)},hex:function(t){return arguments.length?new ba(t):O1.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return ba.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,a=2*i-1,o=r.alpha()-n.alpha(),s=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return ba.rgb(s*r.red()+l*n.red(),s*r.green()+l*n.green(),s*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(us).forEach(function(t){if(wue.indexOf(t)===-1){var e=us[t].channels;ba.prototype[t]=function(){if(this.model===t)return new ba(this);if(arguments.length)return new ba(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new ba(eXe(us[this.model][t].raw(this.color)).concat(r),t)},ba[t]=function(r){return typeof r=="number"&&(r=XR(P6.call(arguments),e)),new ba(r,t)}}});function ZHe(t,e){return Number(t.toFixed(e))}function JHe(t){return function(e){return ZHe(e,t)}}function ni(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(zk[n]||(zk[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Bi(t){return function(e){return Math.max(0,Math.min(t,e))}}function eXe(t){return Array.isArray(t)?t:[t]}function XR(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}var tXe=ba;const nw=Ms(tXe);function jk(t){"@babel/helpers - typeof";return jk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jk(t)}var rXe=/^\s+/,nXe=/\s+$/;function qt(t,e){if(t=t||"",e=e||{},t instanceof qt)return t;if(!(this instanceof qt))return new qt(t,e);var r=iXe(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}qt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,n,i,a,o,s;return r=e.r/255,n=e.g/255,i=e.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=bue(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=zW(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=zW(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=$W(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=$W(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return jW(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return lXe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(zn(this._r,255)*100)+"%",g:Math.round(zn(this._g,255)*100)+"%",b:Math.round(zn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(zn(this._r,255)*100)+"%, "+Math.round(zn(this._g,255)*100)+"%, "+Math.round(zn(this._b,255)*100)+"%)":"rgba("+Math.round(zn(this._r,255)*100)+"%, "+Math.round(zn(this._g,255)*100)+"%, "+Math.round(zn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:bXe[jW(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+GW(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=qt(e);n="#"+GW(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(e){var r=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,a=!r&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return qt(this.toString())},_applyModification:function(e,r){var n=e.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(hXe,arguments)},brighten:function(){return this._applyModification(dXe,arguments)},darken:function(){return this._applyModification(pXe,arguments)},desaturate:function(){return this._applyModification(uXe,arguments)},saturate:function(){return this._applyModification(cXe,arguments)},greyscale:function(){return this._applyModification(fXe,arguments)},spin:function(){return this._applyModification(vXe,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(yXe,arguments)},complement:function(){return this._applyCombination(gXe,arguments)},monochromatic:function(){return this._applyCombination(wXe,arguments)},splitcomplement:function(){return this._applyCombination(mXe,arguments)},triad:function(){return this._applyCombination(UW,[3])},tetrad:function(){return this._applyCombination(UW,[4])}};qt.fromRatio=function(t,e){if(jk(t)=="object"){var r={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?r[n]=t[n]:r[n]=D1(t[n]));t=r}return qt(t,e)};function iXe(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return typeof t=="string"&&(t=_Xe(t)),jk(t)=="object"&&(Gc(t.r)&&Gc(t.g)&&Gc(t.b)?(e=aXe(t.r,t.g,t.b),o=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Gc(t.h)&&Gc(t.s)&&Gc(t.v)?(n=D1(t.s),i=D1(t.v),e=sXe(t.h,n,i),o=!0,s="hsv"):Gc(t.h)&&Gc(t.s)&&Gc(t.l)&&(n=D1(t.s),a=D1(t.l),e=oXe(t.h,n,a),o=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=bue(r),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function aXe(t,e,r){return{r:zn(t,255)*255,g:zn(e,255)*255,b:zn(r,255)*255}}function $W(t,e,r){t=zn(t,255),e=zn(e,255),r=zn(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a,o,s=(n+i)/2;if(n==i)a=o=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function oXe(t,e,r){var n,i,a;t=zn(t,360),e=zn(e,100),r=zn(r,100);function o(u,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(c-u)*6*f:f<1/2?c:f<2/3?u+(c-u)*(2/3-f)*6:u}if(e===0)n=i=a=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:n*255,g:i*255,b:a*255}}function zW(t,e,r){t=zn(t,255),e=zn(e,255),r=zn(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a,o,s=n,l=n-i;if(o=n===0?0:l/n,n==i)a=0;else{switch(n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,v:s}}function sXe(t,e,r){t=zn(t,360)*6,e=zn(e,100),r=zn(r,100);var n=Math.floor(t),i=t-n,a=r*(1-e),o=r*(1-i*e),s=r*(1-(1-i)*e),l=n%6,u=[r,o,a,a,s,r][l],c=[s,r,r,o,a,a][l],f=[a,a,s,r,r,o][l];return{r:u*255,g:c*255,b:f*255}}function jW(t,e,r,n){var i=[Kl(Math.round(t).toString(16)),Kl(Math.round(e).toString(16)),Kl(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function lXe(t,e,r,n,i){var a=[Kl(Math.round(t).toString(16)),Kl(Math.round(e).toString(16)),Kl(Math.round(r).toString(16)),Kl(xue(n))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function GW(t,e,r,n){var i=[Kl(xue(n)),Kl(Math.round(t).toString(16)),Kl(Math.round(e).toString(16)),Kl(Math.round(r).toString(16))];return i.join("")}qt.equals=function(t,e){return!t||!e?!1:qt(t).toRgbString()==qt(e).toRgbString()};qt.random=function(){return qt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function uXe(t,e){e=e===0?0:e||10;var r=qt(t).toHsl();return r.s-=e/100,r.s=rT(r.s),qt(r)}function cXe(t,e){e=e===0?0:e||10;var r=qt(t).toHsl();return r.s+=e/100,r.s=rT(r.s),qt(r)}function fXe(t){return qt(t).desaturate(100)}function hXe(t,e){e=e===0?0:e||10;var r=qt(t).toHsl();return r.l+=e/100,r.l=rT(r.l),qt(r)}function dXe(t,e){e=e===0?0:e||10;var r=qt(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),qt(r)}function pXe(t,e){e=e===0?0:e||10;var r=qt(t).toHsl();return r.l-=e/100,r.l=rT(r.l),qt(r)}function vXe(t,e){var r=qt(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,qt(r)}function gXe(t){var e=qt(t).toHsl();return e.h=(e.h+180)%360,qt(e)}function UW(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=qt(t).toHsl(),n=[qt(t)],i=360/e,a=1;a<e;a++)n.push(qt({h:(r.h+a*i)%360,s:r.s,l:r.l}));return n}function mXe(t){var e=qt(t).toHsl(),r=e.h;return[qt(t),qt({h:(r+72)%360,s:e.s,l:e.l}),qt({h:(r+216)%360,s:e.s,l:e.l})]}function yXe(t,e,r){e=e||6,r=r||30;var n=qt(t).toHsl(),i=360/r,a=[qt(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(qt(n));return a}function wXe(t,e){e=e||6;for(var r=qt(t).toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/e;e--;)o.push(qt({h:n,s:i,v:a})),a=(a+s)%1;return o}qt.mix=function(t,e,r){r=r===0?0:r||50;var n=qt(t).toRgb(),i=qt(e).toRgb(),a=r/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return qt(o)};qt.readability=function(t,e){var r=qt(t),n=qt(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};qt.isReadable=function(t,e,r){var n=qt.readability(t,e),i,a;switch(a=!1,i=CXe(r),i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};qt.mostReadable=function(t,e,r){var n=null,i=0,a,o,s,l;r=r||{},o=r.includeFallbackColors,s=r.level,l=r.size;for(var u=0;u<e.length;u++)a=qt.readability(t,e[u]),a>i&&(i=a,n=qt(e[u]));return qt.isReadable(t,n,{level:s,size:l})||!o?n:(r.includeFallbackColors=!1,qt.mostReadable(t,["#fff","#000"],r))};var YR=qt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bXe=qt.hexNames=xXe(YR);function xXe(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function bue(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function zn(t,e){SXe(t)&&(t="100%");var r=EXe(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function rT(t){return Math.min(1,Math.max(0,t))}function Jo(t){return parseInt(t,16)}function SXe(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function EXe(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Kl(t){return t.length==1?"0"+t:""+t}function D1(t){return t<=1&&(t=t*100+"%"),t}function xue(t){return Math.round(parseFloat(t)*255).toString(16)}function WW(t){return Jo(t)/255}var Rl=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Gc(t){return!!Rl.CSS_UNIT.exec(t)}function _Xe(t){t=t.replace(rXe,"").replace(nXe,"").toLowerCase();var e=!1;if(YR[t])t=YR[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Rl.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Rl.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Rl.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Rl.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Rl.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Rl.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Rl.hex8.exec(t))?{r:Jo(r[1]),g:Jo(r[2]),b:Jo(r[3]),a:WW(r[4]),format:e?"name":"hex8"}:(r=Rl.hex6.exec(t))?{r:Jo(r[1]),g:Jo(r[2]),b:Jo(r[3]),format:e?"name":"hex"}:(r=Rl.hex4.exec(t))?{r:Jo(r[1]+""+r[1]),g:Jo(r[2]+""+r[2]),b:Jo(r[3]+""+r[3]),a:WW(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Rl.hex3.exec(t))?{r:Jo(r[1]+""+r[1]),g:Jo(r[2]+""+r[2]),b:Jo(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function CXe(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var lE=2,VW=.16,kXe=.05,MXe=.05,AXe=.15,Sue=5,Eue=4,TXe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function HW(t,e,r){var n;return Math.round(t.h)>=60&&Math.round(t.h)<=240?n=r?Math.round(t.h)-lE*e:Math.round(t.h)+lE*e:n=r?Math.round(t.h)+lE*e:Math.round(t.h)-lE*e,n<0?n+=360:n>=360&&(n-=360),n}function XW(t,e,r){if(t.h===0&&t.s===0)return t.s;var n;return r?n=t.s-VW*e:e===Eue?n=t.s+VW:n=t.s+kXe*e,n>1&&(n=1),r&&e===Sue&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function YW(t,e,r){var n;return r?n=t.v+MXe*e:n=t.v-AXe*e,n>1&&(n=1),Number(n.toFixed(2))}function Gk(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],n=qt(t),i=Sue;i>0;i-=1){var a=n.toHsv(),o=qt({h:HW(a,i,!0),s:XW(a,i,!0),v:YW(a,i,!0)}).toHexString();r.push(o)}r.push(n.toHexString());for(var s=1;s<=Eue;s+=1){var l=n.toHsv(),u=qt({h:HW(l,s),s:XW(l,s),v:YW(l,s)}).toHexString();r.push(u)}return e.theme==="dark"?TXe.map(function(c){var f=c.index,h=c.opacity,d=qt.mix(e.backgroundColor||"#141414",r[f],h*100).toHexString();return d}):r}var p3={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},v3={},g3={};Object.keys(p3).forEach(function(t){v3[t]=Gk(p3[t]),v3[t].primary=v3[t][5],g3[t]=Gk(p3[t],{theme:"dark",backgroundColor:"#141414"}),g3[t].primary=g3[t][5]});var Gi=function(e,r,n){var i=nw(e),a=nw(r);return nw([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},IXe=function(e,r,n){r===void 0&&(r="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var i=Gi(r,e,.05).rgb().toString(),a=Gi(r,e,.1).rgb().toString(),o=Gi(r,e,.2).rgb().toString(),s=Gi(r,e,.4).rgb().toString(),l=Gi(r,n,.02).rgb().toString(),u=Gi(r,n,.05).rgb().toString(),c=Gi(r,n,.1).rgb().toString(),f=Gi(r,n,.2).rgb().toString(),h=Gi(r,n,.3).rgb().toString(),d=Gk(e,{theme:"default",backgroundColor:r}),p=nw(e).hex().toLowerCase(),v=d.indexOf(p),g=e;return v!==-1&&(g=d[v+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:r,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:f,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:l,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},OXe=function(e,r,n){r===void 0&&(r="#fff"),n===void 0&&(n="#777");var i=Gi(r,e,.2).rgb().toString(),a=Gi(r,e,.3).rgb().toString(),o=Gi(r,e,.6).rgb().toString(),s=Gi(r,e,.8).rgb().toString(),l=Gi(r,n,.2).rgb().toString(),u=Gi(r,n,.25).rgb().toString(),c=Gi(r,n,.3).rgb().toString(),f=Gi(r,n,.4).rgb().toString(),h=Gi(r,n,.5).rgb().toString(),d=Gk(e,{theme:"dark",backgroundColor:r}),p=nw(e).hex().toLowerCase(),v=d.indexOf(p),g=e;return v!==-1&&(g=d[v+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:e,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},L6=function(e,r,n,i){return r===void 0&&(r="#fff"),n===void 0&&(n="default"),n==="default"?IXe(e,r,"rgb(150, 150, 150)"):OXe(e,r,"#777")},DXe=function(e,r,n,i){r===void 0&&(r="#fff"),n===void 0&&(n="default");var a=[];return e.forEach(function(o){a.push(L6(o,r,n))}),a};const PXe=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:DXe,getColorsWithSubjectColor:L6,mixColor:Gi},Symbol.toStringTag,{value:"Module"}));var LXe="rgb(95, 149, 255)",RXe="rgb(255, 255, 255)",qW="rgb(0, 0, 0)",zr=L6(LXe,RXe);const Kp={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:zr.mainStroke,fill:zr.mainFill},size:20,color:zr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:zr.activeFill,stroke:zr.activeStroke}},nodeStateStyles:{active:{fill:zr.activeFill,stroke:zr.activeStroke,lineWidth:2,shadowColor:zr.mainStroke,shadowBlur:10},selected:{fill:zr.selectedFill,stroke:zr.selectedStroke,lineWidth:4,shadowColor:zr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:zr.highlightFill,stroke:zr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:zr.inactiveFill,stroke:zr.inactiveStroke,lineWidth:1},disable:{fill:zr.disableFill,stroke:zr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:qW,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:zr.edgeMainStroke,lineAppendWidth:2},color:zr.edgeMainStroke},edgeStateStyles:{active:{stroke:zr.edgeActiveStroke,lineWidth:1},selected:{stroke:zr.edgeSelectedStroke,lineWidth:2,shadowColor:zr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:zr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:zr.edgeInactiveStroke,lineWidth:1},disable:{stroke:zr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:qW,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:zr.comboMainFill,lineWidth:1,stroke:zr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:zr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:zr.comboActiveStroke,lineWidth:1,fill:zr.comboActiveFill},selected:{stroke:zr.comboSelectedStroke,lineWidth:2,fill:zr.comboSelectedFill,shadowColor:zr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:zr.comboHighlightStroke,lineWidth:2,fill:zr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:zr.comboInactiveStroke,fill:zr.comboInactiveFill,lineWidth:1},disable:{stroke:zr.comboDisableStroke,fill:zr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var NXe=function(e){var r=e.clone();return FXe(e,r),r},FXe=function t(e,r){var n;e.isGroup()&&r.isGroup()&&((n=e.get("children"))===null||n===void 0||n.forEach(function(s,l){var u=r.get("children")[l];t(s,u)}));var i=e.get("type"),a=r.get("type");if(!(i!=="image"||a!=="image")){var o=e.get("clipShape");o&&r.setClip({type:o.get("type"),attrs:o.attr()})}},BXe=Ta.cloneEvent,$Xe=Ta.isViewportChanged,zXe=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=r,n.destroyed=!1,n.initEvents(),n}return e.prototype.initEvents=function(){var r=this,n=r.graph,i=r.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=Ap(this,"onCanvasEvents"),u=Ap(this,"onExtendEvents"),c=Ap(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(oE(s,"wheel",c)),typeof window<"u"&&(a.push(oE(window,"keydown",u)),a.push(oE(window,"keyup",u)),a.push(oE(window,"focus",u))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=Ap(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},e.prototype.onCanvasEvents=function(r){var n=this,i=this.graph,a=i.get("canvas"),o=r.target,s=r.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},r,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},r,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return;break}r.canvasX=r.x,r.canvasY=r.y;var l={x:r.canvasX,y:r.canvasY},u=i.get("group"),c=u.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),$Xe(c)&&(l=i.getPointByClient(r.clientX,r.clientY)),r.x=l.x,r.y=l.y,r.currentTarget=i,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(r,"canvas"),r.target=a,r.item=null,i.emit(s,r),i.emit("canvas:".concat(s),r);return}var f=e.getItemRoot(o);if(!f){i.emit(s,r);return}var h=f.get("item");if(!h.destroyed){var d=h.getType();if(r.target=o,r.item=h,r.canvasX===r.x&&r.canvasY===r.y){var p=i.getCanvasByPoint(r.x,r.y);r.canvasX=p.x,r.canvasY=p.y}r.name&&!r.name.includes(":")?(i.emit("".concat(d,":").concat(s),r),i.emit(s,r)):r.name&&i.emit(r.name,r),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(r,d)}},e.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},e.prototype.onWheelEvent=function(r){Dt(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},e.prototype.handleMouseMove=function(r,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=r.target===s?null:r.item;r=BXe(r),o&&o!==l&&!o.destroyed&&(r.item=o,this.emitCustomEvent(o.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",r)),l&&o!==l&&(r.item=l,this.emitCustomEvent(n,"mouseenter",r),this.dragging&&this.emitCustomEvent(n,"dragenter",r)),this.preItem=l},e.prototype.emitCustomEvent=function(r,n,i){i.type=n,this.graph.emit("".concat(r,":").concat(n),i)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var r=this,n=r.graph,i=r.canvasHandler,a=r.extendEvents,o=n.get("canvas");o.off("*",i),Ce(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(yle),Or={},pf={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.Base=void 0;var jXe=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(e){return this.init(e),this.execute(!0)},t.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},t.prototype.execute=function(e){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(e){e&&Object.assign(this,e)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();si.Base=jXe;var m3={},Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.camelize=Om.isString=void 0;var GXe=function(t){return typeof t=="string"};Om.isString=GXe;var UXe=function(t){var e=Object.create(null);return function(r){var n=e[r];return n||(e[r]=t(r))}},WXe=/-(\w)/g;Om.camelize=UXe(function(t){return t.replace(WXe,function(e,r){return r?r.toUpperCase():""})});var bb={};Object.defineProperty(bb,"__esModule",{value:!0});bb.isArray=void 0;bb.isArray=Array.isArray;var nT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=t.isNaN=t.isNumber=void 0;var e=function(i){return typeof i=="number"};t.isNumber=e;var r=function(i){return Number.isNaN(Number(i))};t.isNaN=r;var n=function(i){var a=parseFloat(i);return(0,t.isNaN)(a)?i:a};t.toNumber=n})(nT);var iT={},R6={};(function(t){var e=Me&&Me.__assign||function(){return e=Object.assign||function(i){for(var a,o=1,s=arguments.length;o<s;o++){a=arguments[o];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.isObject=void 0;var r=function(i){return i!==null&&typeof i=="object"};t.isObject=r;var n=function(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var a=[];return i.forEach(function(s){a.push(s)}),a.map(function(s){return(0,t.clone)(s)})}if(typeof i=="object"&&Object.keys(i).length){var o=e({},i);return Object.keys(o).forEach(function(s){o[s]=(0,t.clone)(o[s])}),o}return i};t.clone=n})(R6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreNodeAndRelativeLeafNodes=t.getAvgNodePosition=t.getLayoutBBox=t.traverseTreeUp=t.scaleMatrix=t.getAdjMatrix=t.floydWarshall=t.getDegreeMap=t.getDegree=t.getEdgeTerminal=void 0;var e=bb,r=nT,n=R6,i=function(y,w){var b=y[w];return(0,n.isObject)(b)?b.cell:b};t.getEdgeTerminal=i;var a=function(y,w,b){for(var x=[],S=0;S<y;S++)x[S]={in:0,out:0,all:0};return b&&b.forEach(function(E){var _=(0,t.getEdgeTerminal)(E,"source"),k=(0,t.getEdgeTerminal)(E,"target");_&&x[w[_]]&&(x[w[_]].out+=1,x[w[_]].all+=1),k&&x[w[k]]&&(x[w[k]].in+=1,x[w[k]].all+=1)}),x};t.getDegree=a;var o=function(y,w){var b={};return y.forEach(function(x){b[x.id]={in:0,out:0,all:0}}),w&&w.forEach(function(x){var S=(0,t.getEdgeTerminal)(x,"source"),E=(0,t.getEdgeTerminal)(x,"target");S&&(b[S].out+=1,b[S].all+=1),E&&(b[E].in+=1,b[E].all+=1)}),b};t.getDegreeMap=o;var s=function(y){for(var w=[],b=y.length,x=0;x<b;x+=1){w[x]=[];for(var S=0;S<b;S+=1)x===S?w[x][S]=0:y[x][S]===0||!y[x][S]?w[x][S]=1/0:w[x][S]=y[x][S]}for(var E=0;E<b;E+=1)for(var x=0;x<b;x+=1)for(var S=0;S<b;S+=1)w[x][S]>w[x][E]+w[E][S]&&(w[x][S]=w[x][E]+w[E][S]);return w};t.floydWarshall=s;var l=function(y,w){var b=y.nodes,x=y.edges,S=[],E={};if(!b)throw new Error("invalid nodes data!");return b&&b.forEach(function(_,k){E[_.id]=k;var C=[];S.push(C)}),x==null||x.forEach(function(_){var k=(0,t.getEdgeTerminal)(_,"source"),C=(0,t.getEdgeTerminal)(_,"target"),A=E[k],M=E[C];A===void 0||M===void 0||(S[A][M]=1,w||(S[M][A]=1))}),S};t.getAdjMatrix=l;var u=function(y,w){var b=[];return y.forEach(function(x){var S=[];x.forEach(function(E){S.push(E*w)}),b.push(S)}),b};t.scaleMatrix=u;var c=function(y,w){if(y&&y.children){for(var b=y.children.length-1;b>=0;b--)if(!c(y.children[b],w))return}return!!w(y)},f=function(y,w){typeof w=="function"&&c(y,w)};t.traverseTreeUp=f;var h=function(y){var w=1/0,b=1/0,x=-1/0,S=-1/0;return y.forEach(function(E){var _=E.size;(0,e.isArray)(_)?_.length===1&&(_=[_[0],_[0]]):(0,r.isNumber)(_)?_=[_,_]:(_===void 0||isNaN(_))&&(_=[30,30]);var k=[_[0]/2,_[1]/2],C=E.x-k[0],A=E.x+k[0],M=E.y-k[1],T=E.y+k[1];w>C&&(w=C),b>M&&(b=M),x<A&&(x=A),S<T&&(S=T)}),{minX:w,minY:b,maxX:x,maxY:S}};t.getLayoutBBox=h;var d=function(y){var w={x:0,y:0};y.forEach(function(x){w.x+=x.x||0,w.y+=x.y||0});var b=y.length||1;return{x:w.x/b,y:w.y/b}};t.getAvgNodePosition=d;var p=function(y,w,b){var x,S;return y==="source"?((x=b==null?void 0:b.find(function(E){return E.target===w.id}))===null||x===void 0?void 0:x.source)||{}:((S=b==null?void 0:b.find(function(E){return E.source===w.id}))===null||S===void 0?void 0:S.target)||{}},v=function(y,w,b){var x=[];switch(y){case"source":x=b==null?void 0:b.filter(function(E){return E.source===w.id}).map(function(E){return E.target});break;case"target":x=b==null?void 0:b.filter(function(E){return E.target===w.id}).map(function(E){return E.source});break;case"both":x=b==null?void 0:b.filter(function(E){return E.source===w.id}).map(function(E){return E.target}).concat(b==null?void 0:b.filter(function(E){return E.target===w.id}).map(function(E){return E.source}));break}var S=new Set(x);return Array.from(S)},g=function(y,w,b,x,S){var E=b[w]||"",_=(x==null?void 0:x.filter(function(k){return k[w]===E}))||[];return y==="leaf"&&(_=_.filter(function(k){var C,A;return((C=S[k.id])===null||C===void 0?void 0:C.in)===0||((A=S[k.id])===null||A===void 0?void 0:A.out)===0})),_},m=function(y,w,b,x,S,E){var _=S[w.id],k=_.in,C=_.out,A=w,M=[];k===0?(A=p("source",w,b),M=v("both",A,b).map(function(O){return E[O]})):C===0&&(A=p("target",w,b),M=v("both",A,b).map(function(O){return E[O]})),M=M.filter(function(O){return S[O.id]&&(S[O.id].in===0||S[O.id].out===0)});var T=g(y,x,w,M,S);return{coreNode:A,relativeLeafNodes:M,sameTypeLeafNodes:T}};t.getCoreNodeAndRelativeLeafNodes=m})(iT);var y3={},KW;function VXe(){return KW||(KW=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFuncByUnknownType=t.getFunc=t.isFunction=void 0;var e=Kn(),r=nT,n=function(o){return typeof o=="function"};t.isFunction=n;var i=function(o,s,l){var u;return l?u=l:(0,r.isNumber)(o)?u=function(){return o}:u=function(){return s},u};t.getFunc=i;var a=function(o,s,l){return l===void 0&&(l=!0),!s&&s!==0?function(u){return u.size?(0,e.isArray)(u.size)?u.size[0]>u.size[1]?u.size[0]:u.size[1]:(0,e.isObject)(u.size)?u.size.width>u.size.height?u.size.width:u.size.height:u.size:o}:(0,t.isFunction)(s)?s:(0,r.isNumber)(s)?function(){return s}:(0,e.isArray)(s)?function(){if(l){var u=Math.max.apply(Math,s);return isNaN(u)?o:u}return s}:(0,e.isObject)(s)?function(){if(l){var u=Math.max(s.width,s.height);return isNaN(u)?o:u}return[s.width,s.height]}:function(){return o}};t.getFuncByUnknownType=a}(y3)),y3}var QW;function Kn(){return QW||(QW=1,function(t){var e=Me&&Me.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Me&&Me.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Om,t),r(bb,t),r(nT,t),r(iT,t),r(R6,t),r(VXe(),t)}(m3)),m3}var HXe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(pf,"__esModule",{value:!0});pf.getLayoutByName=pf.unRegisterLayout=pf.registerLayout=void 0;var XXe=si,YXe=Kn(),jh=new Map,qXe=function(t,e){if(jh.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,YXe.isObject)(e)){var r=function(n){HXe(i,n);function i(a){var o=this,s;o=n.call(this)||this;var l=o,u={},c=Object.assign({},l.getDefaultCfg(),((s=e.getDefaultCfg)===null||s===void 0?void 0:s.call(e))||{});return Object.assign(u,c,e,a),Object.keys(u).forEach(function(f){var h=u[f];l[f]=h}),o}return i}(XXe.Base);jh.set(t,r)}else jh.set(t,e);return jh.get(t)};pf.registerLayout=qXe;var KXe=function(t){jh.has(t)&&jh.delete(t)};pf.unRegisterLayout=KXe;var QXe=function(t){return jh.has(t)?jh.get(t):null};pf.getLayoutByName=QXe;var w3={},xb={},ZXe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xb,"__esModule",{value:!0});xb.GridLayout=void 0;var Mg=Kn(),JXe=si,eYe=function(t){ZXe(e,t);function e(r){var n=t.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges,a=r.begin,o=n.length;if(o===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i};if(o===1)return n[0].x=a[0],n[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i};var s=r.sortBy,l=r.width,u=r.height,c=r.condense,f=r.preventOverlapPadding,h=r.preventOverlap,d=r.nodeSpacing,p=r.nodeSize,v=[];n.forEach(function(M){v.push(M)});var g={};if(v.forEach(function(M,T){g[M.id]=T}),(s==="degree"||!(0,Mg.isString)(s)||v[0][s]===void 0)&&(s="degree",(0,Mg.isNaN)(n[0].degree))){var m=(0,Mg.getDegree)(v.length,g,i);v.forEach(function(M,T){M.degree=m[T].all})}v.sort(function(M,T){return T[s]-M[s]}),!l&&typeof window<"u"&&(l=window.innerWidth),!u&&typeof window<"u"&&(u=window.innerHeight);var y=r.rows,w=r.cols!=null?r.cols:r.columns;if(r.cells=o,y!=null&&w!=null?(r.rows=y,r.cols=w):y!=null&&w==null?(r.rows=y,r.cols=Math.ceil(r.cells/r.rows)):y==null&&w!=null?(r.cols=w,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.rows=Math.max(r.rows,1),r.cols=Math.max(r.cols,1),r.cols*r.rows>r.cells){var b=r.small(),x=r.large();(b-1)*x>=r.cells?r.small(b-1):(x-1)*b>=r.cells&&r.large(x-1)}else for(;r.cols*r.rows<r.cells;){var b=r.small(),x=r.large();(x+1)*b>=r.cells?r.large(x+1):r.small(b+1)}if(r.cellWidth=l/r.cols,r.cellHeight=u/r.rows,c&&(r.cellWidth=0,r.cellHeight=0),h||d){var S=(0,Mg.getFuncByUnknownType)(10,d),E=(0,Mg.getFuncByUnknownType)(30,p,!1);v.forEach(function(M){(!M.x||!M.y)&&(M.x=0,M.y=0);var T=E(M)||30,O,N;(0,Mg.isArray)(T)?(O=T[0],N=T[1]):(O=T,N=T);var R=S!==void 0?S(M):f,B=O+R,F=N+R;r.cellWidth=Math.max(r.cellWidth,B),r.cellHeight=Math.max(r.cellHeight,F)})}r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(var _=0;_<v.length;_++){var k=v[_],C=void 0;if(r.position&&(C=r.position(k)),C&&(C.row!==void 0||C.col!==void 0)){var A={row:C.row,col:C.col};if(A.col===void 0)for(A.col=0;r.used(A.row,A.col);)A.col++;else if(A.row===void 0)for(A.row=0;r.used(A.row,A.col);)A.row++;r.id2manPos[k.id]=A,r.use(A.row,A.col)}r.getPos(k)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:i,nodes:v}},e.prototype.small=function(r){var n=this,i,a=n.rows||5,o=n.cols||5;if(r==null)i=Math.min(a,o);else{var s=Math.min(a,o);s===n.rows?n.rows=r:n.cols=r}return i},e.prototype.large=function(r){var n=this,i,a=n.rows||5,o=n.cols||5;if(r==null)i=Math.max(a,o);else{var s=Math.max(a,o);s===n.rows?n.rows=r:n.cols=r}return i},e.prototype.used=function(r,n){var i=this;return i.cellUsed["c-".concat(r,"-").concat(n)]||!1},e.prototype.use=function(r,n){var i=this;i.cellUsed["c-".concat(r,"-").concat(n)]=!0},e.prototype.moveToNextCell=function(){var r=this,n=r.cols||5;r.col++,r.col>=n&&(r.col=0,r.row++)},e.prototype.getPos=function(r){var n=this,i=n.begin,a=n.cellWidth,o=n.cellHeight,s,l,u=n.id2manPos[r.id];if(u)s=u.col*a+a/2+i[0],l=u.row*o+o/2+i[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();s=n.col*a+a/2+i[0],l=n.row*o+o/2+i[1],n.use(n.row,n.col),n.moveToNextCell()}r.x=s,r.y=l},e.prototype.getType=function(){return"grid"},e}(JXe.Base);xb.GridLayout=eYe;var Sb={},tYe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Sb,"__esModule",{value:!0});Sb.RandomLayout=void 0;var rYe=si,nYe=function(t){tYe(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var r=this,n=r.nodes,i=.9,a=r.center;return!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),n&&n.forEach(function(o){o.x=(Math.random()-.5)*i*r.width+a[0],o.y=(Math.random()-.5)*i*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(rYe.Base);Sb.RandomLayout=nYe;var Eb={},iYe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Eb,"__esModule",{value:!0});Eb.GForceLayout=void 0;var aYe=si,Ba=Kn(),b3=function(t,e){var r;return t?(0,Ba.isNumber)(t)?r=function(n){return t}:r=t:r=function(n){return e||1},r},oYe=function(t){iYe(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var r,n,i=this,a=i.nodes;if(i.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(i.timeInterval),!a||a.length===0){(r=i.onLayoutEnd)===null||r===void 0||r.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var o=i.center;if(a.length===1){a[0].x=o[0],a[0].y=o[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var s={},l={};a.forEach(function(p,v){(0,Ba.isNumber)(p.x)||(p.x=Math.random()*i.width),(0,Ba.isNumber)(p.y)||(p.y=Math.random()*i.height),s[p.id]=p,l[p.id]=v}),i.nodeMap=s,i.nodeIdxMap=l,i.linkDistance=b3(i.linkDistance,1),i.nodeStrength=b3(i.nodeStrength,1),i.edgeStrength=b3(i.edgeStrength,1);var u=i.nodeSize,c;if(i.preventOverlap){var f=i.nodeSpacing,h;(0,Ba.isNumber)(f)?h=function(){return f}:(0,Ba.isFunction)(f)?h=f:h=function(){return 0},u?(0,Ba.isArray)(u)?c=function(p){return Math.max(u[0],u[1])+h(p)}:c=function(p){return u+h(p)}:c=function(p){return p.size?(0,Ba.isArray)(p.size)?Math.max(p.size[0],p.size[1])+h(p):(0,Ba.isObject)(p.size)?Math.max(p.size.width,p.size.height)+h(p):p.size+h(p):10+h(p)}}i.nodeSize=c;var d=i.edges;i.degrees=(0,Ba.getDegree)(a.length,i.nodeIdxMap,d),i.getMass||(i.getMass=function(p){var v=p.mass||i.degrees[i.nodeIdxMap[p.id]].all||1;return v}),i.run()},e.prototype.run=function(){var r,n=this,i=n.maxIteration,a=n.nodes,o=n.workerEnabled,s=n.minMovement,l=n.animate;if(a)if(o||!l){for(var u=0;u<i;u++){var c=n.runOneStep(u);if(n.reachMoveThreshold(a,c,s))break}(r=n.onLayoutEnd)===null||r===void 0||r.call(n)}else{if(typeof window>"u")return;var f=0;this.timeInterval=window.setInterval(function(){var h,d;if(a){var p=n.runOneStep(f)||[];n.reachMoveThreshold(a,p,s)&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval)),f++,f>=i&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(r,n,i){var a=0;return r.forEach(function(o,s){var l=o.x-n[s].x,u=o.y-n[s].y;a+=Math.sqrt(l*l+u*u)}),a/=r.length,a<i},e.prototype.runOneStep=function(r){var n,i=this,a=i.nodes,o=i.edges,s=[],l=[];if(a){a.forEach(function(f,h){s[2*h]=0,s[2*h+1]=0,l[2*h]=0,l[2*h+1]=0}),i.calRepulsive(s,a),o&&i.calAttractive(s,o),i.calGravity(s,a);var u=Math.max(.02,i.interval-r*.002);i.updateVelocity(s,l,u,a);var c=[];return a.forEach(function(f){c.push({x:f.x,y:f.y})}),i.updatePosition(l,u,a),(n=i.tick)===null||n===void 0||n.call(i),c}},e.prototype.calRepulsive=function(r,n){var i=this,a=i.getMass,o=i.factor,s=i.coulombDisScale,l=i.preventOverlap,u=i.collideStrength,c=u===void 0?1:u,f=i.nodeStrength,h=i.nodeSize;n.forEach(function(d,p){var v=a?a(d):1;n.forEach(function(g,m){if(!(p>=m)){var y=d.x-g.x,w=d.y-g.y;y===0&&w===0&&(y=Math.random()*.01,w=Math.random()*.01);var b=y*y+w*w,x=Math.sqrt(b),S=(x+.1)*s,E=y/x,_=w/x,k=(f(d)+f(g))*.5*o/(S*S),C=a?a(g):1;if(r[2*p]+=E*k,r[2*p+1]+=_*k,r[2*m]-=E*k,r[2*m+1]-=_*k,l&&(h(d)+h(g))/2>x){var A=c*(f(d)+f(g))*.5/b;r[2*p]+=E*A/v,r[2*p+1]+=_*A/v,r[2*m]-=E*A/C,r[2*m+1]-=_*A/C}}})})},e.prototype.calAttractive=function(r,n){var i=this,a=i.nodeMap,o=i.nodeIdxMap,s=i.linkDistance,l=i.edgeStrength,u=i.nodeSize,c=i.getMass;n.forEach(function(f,h){var d=(0,Ba.getEdgeTerminal)(f,"source"),p=(0,Ba.getEdgeTerminal)(f,"target"),v=a[d],g=a[p],m=g.x-v.x,y=g.y-v.y;m===0&&y===0&&(m=Math.random()*.01,y=Math.random()*.01);var w=Math.sqrt(m*m+y*y),b=m/w,x=y/w,S=s(f,v,g)||1+(u(v)+u(g)||0)/2,E=S-w,_=E*l(f),k=o[d],C=o[p],A=c?c(v):1,M=c?c(g):1;r[2*k]-=b*_/A,r[2*k+1]-=x*_/A,r[2*C]+=b*_/M,r[2*C+1]+=x*_/M})},e.prototype.calGravity=function(r,n){for(var i=this,a=i.center,o=i.gravity,s=i.degrees,l=n.length,u=0;u<l;u++){var c=n[u],f=c.x-a[0],h=c.y-a[1],d=o;if(i.getCenter){var p=i.getCenter(c,s[u].all);p&&(0,Ba.isNumber)(p[0])&&(0,Ba.isNumber)(p[1])&&(0,Ba.isNumber)(p[2])&&(f=c.x-p[0],h=c.y-p[1],d=p[2])}d&&(r[2*u]-=d*f,r[2*u+1]-=d*h)}},e.prototype.updateVelocity=function(r,n,i,a){var o=this,s=i*o.damping;a.forEach(function(l,u){var c=r[2*u]*s||.01,f=r[2*u+1]*s||.01,h=Math.sqrt(c*c+f*f);if(h>o.maxSpeed){var d=o.maxSpeed/h;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})},e.prototype.updatePosition=function(r,n,i){i.forEach(function(a,o){if((0,Ba.isNumber)(a.fx)&&(0,Ba.isNumber)(a.fy)){a.x=a.fx,a.y=a.fy;return}var s=r[2*o]*n,l=r[2*o+1]*n;a.x+=s,a.y+=l})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(aYe.Base);Eb.GForceLayout=oYe;var _b={},aT={};function sYe(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return _ue(this.cover(e,r),e,r,t)}function _ue(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function lYe(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)_ue(this,o[r],s[r],t[r]);return this}function uYe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function cYe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function fYe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function no(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function hYe(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new no(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new no(d[3],g,m,l,u),new no(d[2],o,m,g,u),new no(d[1],g,s,l,m),new no(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function dYe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function pYe(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function vYe(){return this._root}function gYe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function mYe(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new no(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new no(i,u,c,s,l)),(i=n[2])&&e.push(new no(i,a,c,u,l)),(i=n[1])&&e.push(new no(i,u,o,s,c)),(i=n[0])&&e.push(new no(i,a,o,u,c))}return this}function yYe(t){var e=[],r=[],n;for(this._root&&e.push(new no(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new no(a,o,s,c,f)),(a=i[1])&&e.push(new no(a,c,s,l,f)),(a=i[2])&&e.push(new no(a,o,f,c,u)),(a=i[3])&&e.push(new no(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function wYe(t){return t[0]}function bYe(t){return arguments.length?(this._x=t,this):this._x}function xYe(t){return t[1]}function SYe(t){return arguments.length?(this._y=t,this):this._y}function Cue(t,e,r){var n=new N6(e??wYe,r??xYe,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function N6(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function ZW(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var po=Cue.prototype=N6.prototype;po.copy=function(){var t=new N6(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=ZW(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=ZW(n));return t};po.add=sYe;po.addAll=lYe;po.cover=uYe;po.data=cYe;po.extent=fYe;po.find=hYe;po.remove=dYe;po.removeAll=pYe;po.root=vYe;po.size=gYe;po.visit=mYe;po.visitAfter=yYe;po.x=bYe;po.y=SYe;const EYe=Object.freeze(Object.defineProperty({__proto__:null,quadtree:Cue},Symbol.toStringTag,{value:"Module"})),_Ye=su(EYe);Object.defineProperty(aT,"__esModule",{value:!0});aT.forceNBody=void 0;var CYe=_Ye,kYe=.81,JW=.1;function MYe(t,e,r,n,i){var a=r/n,o=t.map(function(l,u){var c=e[l.id],f=c.data,h=c.x,d=c.y,p=c.size,v=f.layout.force.nodeStrength;return{x:h,y:d,size:p,index:u,vx:0,vy:0,weight:a*v}}),s=(0,CYe.quadtree)(o,function(l){return l.x},function(l){return l.y}).visitAfter(AYe);return o.forEach(function(l){IYe(l,s)}),o.map(function(l,u){var c=e[t[u].id],f=c.data.layout.force.mass,h=f===void 0?1:f;i[2*u]=l.vx/h,i[2*u+1]=l.vy/h}),i}aT.forceNBody=MYe;function AYe(t){var e=0,r=0,n=0;if(t.length){for(var i=0;i<4;i++){var a=t[i];a&&a.weight&&(e+=a.weight,r+=a.x*a.weight,n+=a.y*a.weight)}t.x=r/e,t.y=n/e,t.weight=e}else{var a=t;t.x=a.data.x,t.y=a.data.y,t.weight=a.data.weight}}var TYe=function(t,e,r,n,i,a){var o=a.x-t.x||JW,s=a.y-t.y||JW,l=n-e,u=o*o+s*s,c=Math.sqrt(u)*u;if(l*l*kYe<u){var f=t.weight/c;return a.vx+=o*f,a.vy+=s*f,!0}if(t.length)return!1;if(t.data!==a){var f=t.data.weight/c;a.vx+=o*f,a.vy+=s*f}};function IYe(t,e){e.visit(function(r,n,i,a,o){return TYe(r,n,i,a,o,t)})}var OYe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nl=Me&&Me.__assign||function(){return Nl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nl.apply(this,arguments)};Object.defineProperty(_b,"__esModule",{value:!0});_b.Force2Layout=void 0;var DYe=si,$i=Kn(),PYe=aT,x3=function(t,e){var r;return t?(0,$i.isNumber)(t)?r=function(n){return t}:r=t:r=function(n){return e||1},r},LYe=function(t){OYe(e,t);function e(r){var n=t.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(a){return{x:n.width/2,y:n.height/2}}};var i=r.getMass;return n.propsGetMass=i,n.updateCfg(r),n}return e.prototype.getCentripetalOptions=function(){var r=this,n=r.leafCluster,i=r.clustering,a=r.nodeClusterBy,o=r.nodes,s=r.nodeMap,l=r.clusterNodeStrength,u=function(w){return typeof l=="function"?l(w):l},c={},f;if(n){f=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(o==null?void 0:o.map(function(w){return w[a]})))||[];c={single:100,leaf:function(w,b,x){var S=f[w.id]||{},E=S.relativeLeafNodes,_=S.sameTypeLeafNodes;return(_==null?void 0:_.length)===(E==null?void 0:E.length)||(h==null?void 0:h.length)===1?1:u(w)},others:1,center:function(w,b,x){var S,E=(((S=w.data)===null||S===void 0?void 0:S.layout)||{}).degree;if(!E)return{x:100,y:100};var _;if(E===1){var k=(f[w.id]||{}).sameTypeLeafNodes,C=k===void 0?[]:k;C.length===1?_=void 0:C.length>1&&(_=(0,$i.getAvgNodePosition)(C))}else _=void 0;return{x:_==null?void 0:_.x,y:_==null?void 0:_.y}}}}if(i){f||(f=this.getSameTypeLeafMap());var d=Array.from(new Set(o.map(function(w,b){return w[a]}))).filter(function(w){return w!==void 0}),p={};d.forEach(function(w){var b=o.filter(function(x){return x[a]===w}).map(function(x){return s[x.id]});p[w]=(0,$i.getAvgNodePosition)(b)}),c={single:function(w){return u(w)},leaf:function(w){return u(w)},others:function(w){return u(w)},center:function(w,b,x){var S=p[w[a]];return{x:S==null?void 0:S.x,y:S==null?void 0:S.y}}}}this.centripetalOptions=Nl(Nl({},this.centripetalOptions),c);var v=this.centripetalOptions,g=v.leaf,m=v.single,y=v.others;g&&typeof g!="function"&&(this.centripetalOptions.leaf=function(){return g}),m&&typeof m!="function"&&(this.centripetalOptions.single=function(){return m}),y&&typeof y!="function"&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(r){r&&Object.assign(this,r)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var r=this;r.stop();var n=r.nodes,i=r.edges,a=r.defSpringLen;if(r.judgingDistance=0,!n||n.length===0){r.onLayoutEnd([]);return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],r.onLayoutEnd([Nl({},n[0])]);return}r.degreesMap=(0,$i.getDegreeMap)(n,i),r.propsGetMass?r.getMass=r.propsGetMass:r.getMass=function(d){var p=1;(0,$i.isNumber)(d.mass)&&(p=d.mass);var v=r.degreesMap[d.id].all;return!v||v<5?p:v*5*p};var s=r.nodeSize,l;if(r.preventOverlap){var u=r.nodeSpacing,c;(0,$i.isNumber)(u)?c=function(){return u}:(0,$i.isFunction)(u)?c=u:c=function(){return 0},s?(0,$i.isArray)(s)?l=function(d){return Math.max(s[0],s[1])+c(d)}:l=function(d){return s+c(d)}:l=function(d){return d.size?(0,$i.isArray)(d.size)?Math.max(d.size[0],d.size[1])+c(d):(0,$i.isObject)(d.size)?Math.max(d.size.width,d.size.height)+c(d):d.size+c(d):10+c(d)}}r.nodeSize=l,r.linkDistance=x3(r.linkDistance,1),r.nodeStrength=x3(r.nodeStrength,1),r.edgeStrength=x3(r.edgeStrength,1);var f={},h={};n.forEach(function(d,p){(0,$i.isNumber)(d.x)||(d.x=Math.random()*r.width),(0,$i.isNumber)(d.y)||(d.y=Math.random()*r.height);var v=r.degreesMap[d.id];f[d.id]=Nl(Nl({},d),{data:Nl(Nl({},d.data),{size:r.nodeSize(d)||30,layout:{inDegree:v.in,outDegree:v.out,degree:v.all,tDegree:v.in,sDegree:v.out,force:{mass:r.getMass(d),nodeStrength:r.nodeStrength(d,i)}}})}),h[d.id]=p}),r.nodeMap=f,r.nodeIdxMap=h,r.edgeInfos=[],i==null||i.forEach(function(d){var p=f[d.source],v=f[d.target];!p||!v?elf.edgeInfos.push({}):r.edgeInfos.push({edgeStrength:r.edgeStrength(d),linkDistance:a?a(Nl(Nl({},d),{source:p,target:v}),p,v):r.linkDistance(d,p,v)||1+(s(p)+s(p)||0)/2})}),this.getCentripetalOptions(),r.onLayoutEnd=r.onLayoutEnd||function(){},r.run()},e.prototype.run=function(){var r=this,n=r.maxIteration,i=r.nodes,a=r.edges,o=r.workerEnabled,s=r.minMovement,l=r.animate,u=r.nodeMap,c=r.height;if(r.currentMinY=0,r.currentMaxY=c,!!i){var f=[];if(i.forEach(function(m,y){f[2*y]=0,f[2*y+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var h={};a.forEach(function(m){var y=m.source,w=m.target;h[y]=h[y]||[],h[y].push(m),h[w]=h[w]||[],h[w].push(m)}),this.relatedEdges=h}var d=n,p=!l;if(o||p){for(var v=0;(r.judgingDistance>s||v<1)&&v<d;v++)r.runOneStep(v,f);r.onLayoutEnd(Object.values(u))}else{if(typeof window>"u")return;var g=0;this.timeInterval=window.setInterval(function(){i&&(r.runOneStep(g,f),g++,(g>=d||r.judgingDistance<s)&&(r.onLayoutEnd(Object.values(u)),window.clearInterval(r.timeInterval)))},0)}}},e.prototype.runOneStep=function(r,n){var i,a=this,o=a.nodes,s=a.edges;a.nodeMap;var l=a.monitor,u=[];if(o!=null&&o.length){a.calRepulsive(u),s&&a.calAttractive(u),a.calGravity(u),a.attractToSide(u);var c=a.interval;if(a.updateVelocity(u,n,c),a.updatePosition(n,c),(i=a.tick)===null||i===void 0||i.call(a),l){var f=this.calTotalEnergy(u);l({energy:f,nodes:o,edges:s,iterations:r})}}},e.prototype.calTotalEnergy=function(r){var n=this,i=n.nodes,a=n.nodeMap;if(!(i!=null&&i.length))return 0;var o=0;return i.forEach(function(s,l){var u=r[2*l],c=r[2*l+1],f=u*u+c*c,h=a[s.id].data.layout.force.mass,d=h===void 0?1:h;o+=d*f*.5}),o},e.prototype.calRepulsive=function(r){var n=this,i=n.nodes,a=n.nodeMap,o=n.factor,s=n.coulombDisScale;n.nodeSize,(0,PYe.forceNBody)(i,a,o,s*s,r)},e.prototype.calAttractive=function(r){var n=this,i=n.edges,a=n.nodeMap,o=n.nodeIdxMap,s=n.edgeInfos;n.nodeSize,i.forEach(function(l,u){var c=(0,$i.getEdgeTerminal)(l,"source"),f=(0,$i.getEdgeTerminal)(l,"target"),h=a[c],d=a[f];if(!(!h||!d)){var p=d.x-h.x,v=d.y-h.y;!p&&!v&&(p=Math.random()*.01,v=Math.random()*.01);var g=Math.sqrt(p*p+v*v),m=p/g,y=v/g,w=s[u]||{},b=w.linkDistance,x=b===void 0?200:b,S=w.edgeStrength,E=S===void 0?200:S,_=x-g,k=_*E,C=h.data.layout.force.mass||1,A=d.data.layout.force.mass||1,M=1/C,T=1/A,O=m*k,N=y*k,R=2*o[c],B=2*o[f];r[R]-=O*M,r[R+1]-=N*M,r[B]+=O*T,r[B+1]+=N*T}})},e.prototype.calGravity=function(r){var n,i=this,a=i.nodes,o=i.edges,s=o===void 0?[]:o,l=i.nodeMap,u=i.width,c=i.height,f=i.center,h=i.gravity,d=i.degreesMap,p=i.centripetalOptions;if(a)for(var v=a.length,g=0;g<v;g++){var m=2*g,y=l[a[g].id],w=y.data.layout.force.mass,b=w===void 0?1:w,x=0,S=0,E=h,_=d[y.id],k=_.in,C=_.out,A=_.all,M=(n=i.getCenter)===null||n===void 0?void 0:n.call(i,y,A);if(M){var T=M[0],O=M[1],N=M[2];x=y.x-T,S=y.y-O,E=N}else x=y.x-f[0],S=y.y-f[1];if(E&&(r[m]-=E*x/b,r[m+1]-=E*S/b),p){var R=p.leaf,B=p.single,F=p.others,D=p.center,L=(D==null?void 0:D(y,a,s,u,c))||{x:0,y:0,centerStrength:0},G=L.x,Y=L.y,Z=L.centerStrength;if(!(0,$i.isNumber)(G)||!(0,$i.isNumber)(Y))continue;var q=(y.x-G)/b,pe=(y.y-Y)/b;if(Z&&(r[m]-=Z*q,r[m+1]-=Z*pe),A===0){var Se=B(y);if(!Se)continue;r[m]-=Se*q,r[m+1]-=Se*pe;continue}if(k===0||C===0){var Ae=R(y,a,s);if(!Ae)continue;r[m]-=Ae*q,r[m+1]-=Ae*pe;continue}var He=F(y);if(!He)continue;r[m]-=He*q,r[m+1]-=He*pe}}},e.prototype.attractToSide=function(r){var n=this,i=n.defSideCoe;n.height;var a=n.nodes,o=n.relatedEdges,s=n.currentMinY,l=s===void 0?0:s,u=n.currentMaxY,c=u===void 0?this.height:u;!i||typeof i!="function"||!(a!=null&&a.length)||a.forEach(function(f,h){var d=i(f,o[f.id]||[]);if(d!==0){var p=d<0?l:c,v=Math.abs(d);r[2*h+1]-=v*(f.y-p)}})},e.prototype.updateVelocity=function(r,n,i){var a=this,o=a.nodes,s=a.damping,l=a.maxSpeed;o!=null&&o.length&&o.forEach(function(u,c){var f=(n[2*c]+r[2*c]*i)*s||.01,h=(n[2*c+1]+r[2*c+1]*i)*s||.01,d=Math.sqrt(f*f+h*h);if(d>l){var p=l/d;f=p*f,h=p*h}n[2*c]=f,n[2*c+1]=h})},e.prototype.updatePosition=function(r,n){var i=this,a=i.nodes,o=i.distanceThresholdMode,s=i.nodeMap;if(!(a!=null&&a.length)){this.judgingDistance=0;return}var l=0;o==="max"?i.judgingDistance=-1/0:o==="min"&&(i.judgingDistance=1/0);var u=1/0,c=-1/0;a.forEach(function(f,h){var d=s[f.id];if((0,$i.isNumber)(f.fx)&&(0,$i.isNumber)(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}var p=r[2*h]*n,v=r[2*h+1]*n;f.x+=p,f.y+=v,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);var g=Math.sqrt(p*p+v*v);switch(o){case"max":i.judgingDistance<g&&(i.judgingDistance=g);break;case"min":i.judgingDistance>g&&(i.judgingDistance=g);break;default:l=l+g;break}}),this.currentMinY=u,this.currentMaxY=c,(!o||o==="mean")&&(i.judgingDistance=l/a.length)},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var r=this,n=r.nodeClusterBy,i=r.nodes,a=r.edges,o=r.nodeMap,s=r.degreesMap;if(i!=null&&i.length){var l={};return i.forEach(function(u,c){var f=s[u.id].all;f===1&&(l[u.id]=(0,$i.getCoreNodeAndRelativeLeafNodes)("leaf",u,a,n,s,o))}),l}},e}(DYe.Base);_b.Force2Layout=LYe;var F6={},oT={};function RYe(t,e){var r,n=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=r.length,s,l=0,u=0;for(a=0;a<o;++a)s=r[a],l+=s.x,u+=s.y;for(l=(l/o-t)*n,u=(u/o-e)*n,a=0;a<o;++a)s=r[a],s.x-=l,s.y-=u}return i.initialize=function(a){r=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function NYe(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return kue(this.cover(e,r),e,r,t)}function kue(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function FYe(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)kue(this,o[r],s[r],t[r]);return this}function BYe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function $Ye(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function zYe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function io(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function jYe(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new io(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new io(d[3],g,m,l,u),new io(d[2],o,m,g,u),new io(d[1],g,s,l,m),new io(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function GYe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function UYe(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function WYe(){return this._root}function VYe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function HYe(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new io(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new io(i,u,c,s,l)),(i=n[2])&&e.push(new io(i,a,c,u,l)),(i=n[1])&&e.push(new io(i,u,o,s,c)),(i=n[0])&&e.push(new io(i,a,o,u,c))}return this}function XYe(t){var e=[],r=[],n;for(this._root&&e.push(new io(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new io(a,o,s,c,f)),(a=i[1])&&e.push(new io(a,c,s,l,f)),(a=i[2])&&e.push(new io(a,o,f,c,u)),(a=i[3])&&e.push(new io(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function YYe(t){return t[0]}function qYe(t){return arguments.length?(this._x=t,this):this._x}function KYe(t){return t[1]}function QYe(t){return arguments.length?(this._y=t,this):this._y}function B6(t,e,r){var n=new $6(e??YYe,r??KYe,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function $6(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function eV(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var vo=B6.prototype=$6.prototype;vo.copy=function(){var t=new $6(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=eV(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=eV(n));return t};vo.add=NYe;vo.addAll=FYe;vo.cover=BYe;vo.data=$Ye;vo.extent=zYe;vo.find=jYe;vo.remove=GYe;vo.removeAll=UYe;vo.root=WYe;vo.size=VYe;vo.visit=HYe;vo.visitAfter=XYe;vo.x=qYe;vo.y=QYe;function Yi(t){return function(){return t}}function Gh(t){return(t()-.5)*1e-6}function ZYe(t){return t.x+t.vx}function JYe(t){return t.y+t.vy}function eqe(t){var e,r,n,i=1,a=1;typeof t!="function"&&(t=Yi(t==null?1:+t));function o(){for(var u,c=e.length,f,h,d,p,v,g,m=0;m<a;++m)for(f=B6(e,ZYe,JYe).visitAfter(s),u=0;u<c;++u)h=e[u],v=r[h.index],g=v*v,d=h.x+h.vx,p=h.y+h.vy,f.visit(y);function y(w,b,x,S,E){var _=w.data,k=w.r,C=v+k;if(_){if(_.index>h.index){var A=d-_.x-_.vx,M=p-_.y-_.vy,T=A*A+M*M;T<C*C&&(A===0&&(A=Gh(n),T+=A*A),M===0&&(M=Gh(n),T+=M*M),T=(C-(T=Math.sqrt(T)))/T*i,h.vx+=(A*=T)*(C=(k*=k)/(g+k)),h.vy+=(M*=T)*C,_.vx-=A*(C=1-C),_.vy-=M*C)}return}return b>d+C||S<d-C||x>p+C||E<p-C}}function s(u){if(u.data)return u.r=r[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,f;for(r=new Array(c),u=0;u<c;++u)f=e[u],r[f.index]=+t(f,u,e)}}return o.initialize=function(u,c){e=u,n=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Yi(+u),l(),o):t},o}function tqe(t){return t.index}function tV(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function rqe(t){var e=tqe,r=f,n,i=Yi(30),a,o,s,l,u,c=1;t==null&&(t=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var m=0,y=t.length;m<c;++m)for(var w=0,b,x,S,E,_,k,C;w<y;++w)b=t[w],x=b.source,S=b.target,E=S.x+S.vx-x.x-x.vx||Gh(u),_=S.y+S.vy-x.y-x.vy||Gh(u),k=Math.sqrt(E*E+_*_),k=(k-a[w])/k*g*n[w],E*=k,_*=k,S.vx-=E*(C=l[w]),S.vy-=_*C,x.vx+=E*(C=1-C),x.vy+=_*C}function d(){if(o){var g,m=o.length,y=t.length,w=new Map(o.map((x,S)=>[e(x,S,o),x])),b;for(g=0,s=new Array(m);g<y;++g)b=t[g],b.index=g,typeof b.source!="object"&&(b.source=tV(w,b.source)),typeof b.target!="object"&&(b.target=tV(w,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)b=t[g],l[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);n=new Array(y),p(),a=new Array(y),v()}}function p(){if(o)for(var g=0,m=t.length;g<m;++g)n[g]=+r(t[g],g,t)}function v(){if(o)for(var g=0,m=t.length;g<m;++g)a[g]=+i(t[g],g,t)}return h.initialize=function(g,m){o=g,u=m,d()},h.links=function(g){return arguments.length?(t=g,d(),h):t},h.id=function(g){return arguments.length?(e=g,h):e},h.iterations=function(g){return arguments.length?(c=+g,h):c},h.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Yi(+g),p(),h):r},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Yi(+g),v(),h):i},h}var nqe={value:()=>{}};function Mue(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new T_(r)}function T_(t){this._=t}function iqe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}T_.prototype=Mue.prototype={constructor:T_,on:function(t,e){var r=this._,n=iqe(t+"",r),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(t=n[a]).type)&&(i=aqe(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=n[a]).type)r[i]=rV(r[i],t.name,e);else if(e==null)for(i in r)r[i]=rV(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new T_(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,i=a.length;n<i;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};function aqe(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function rV(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=nqe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}const oqe=1664525,sqe=1013904223,nV=4294967296;function lqe(){let t=1;return()=>(t=(oqe*t+sqe)%nV)/nV}function uqe(t){return t.x}function cqe(t){return t.y}var fqe=10,hqe=Math.PI*(3-Math.sqrt(5));function dqe(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=d6(f),u=Mue("tick","end"),c=lqe();t==null&&(t=[]);function f(){h(),u.call("tick",e),r<n&&(l.stop(),u.call("end",e))}function h(v){var g,m=t.length,y;v===void 0&&(v=1);for(var w=0;w<v;++w)for(r+=(a-r)*i,s.forEach(function(b){b(r)}),g=0;g<m;++g)y=t[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function d(){for(var v=0,g=t.length,m;v<g;++v){if(m=t[v],m.index=v,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=fqe*Math.sqrt(.5+v),w=v*hqe;m.x=y*Math.cos(w),m.y=y*Math.sin(w)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(v){return v.initialize&&v.initialize(t,c),v}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(v){return arguments.length?(t=v,d(),s.forEach(p),e):t},alpha:function(v){return arguments.length?(r=+v,e):r},alphaMin:function(v){return arguments.length?(n=+v,e):n},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(a=+v,e):a},velocityDecay:function(v){return arguments.length?(o=1-v,e):1-o},randomSource:function(v){return arguments.length?(c=v,s.forEach(p),e):c},force:function(v,g){return arguments.length>1?(g==null?s.delete(v):s.set(v,p(g)),e):s.get(v)},find:function(v,g,m){var y=0,w=t.length,b,x,S,E,_;for(m==null?m=1/0:m*=m,y=0;y<w;++y)E=t[y],b=v-E.x,x=g-E.y,S=b*b+x*x,S<m&&(_=E,m=S);return _},on:function(v,g){return arguments.length>1?(u.on(v,g),e):u.on(v)}}}function pqe(){var t,e,r,n,i=Yi(-30),a,o=1,s=1/0,l=.81;function u(d){var p,v=t.length,g=B6(t,uqe,cqe).visitAfter(f);for(n=d,p=0;p<v;++p)e=t[p],g.visit(h)}function c(){if(t){var d,p=t.length,v;for(a=new Array(p),d=0;d<p;++d)v=t[d],a[v.index]=+i(v,d,t)}}function f(d){var p=0,v,g,m=0,y,w,b;if(d.length){for(y=w=b=0;b<4;++b)(v=d[b])&&(g=Math.abs(v.value))&&(p+=v.value,m+=g,y+=g*v.x,w+=g*v.y);d.x=y/m,d.y=w/m}else{v=d,v.x=v.data.x,v.y=v.data.y;do p+=a[v.data.index];while(v=v.next)}d.value=p}function h(d,p,v,g){if(!d.value)return!0;var m=d.x-e.x,y=d.y-e.y,w=g-p,b=m*m+y*y;if(w*w/l<b)return b<s&&(m===0&&(m=Gh(r),b+=m*m),y===0&&(y=Gh(r),b+=y*y),b<o&&(b=Math.sqrt(o*b)),e.vx+=m*d.value*n/b,e.vy+=y*d.value*n/b),!0;if(d.length||b>=s)return;(d.data!==e||d.next)&&(m===0&&(m=Gh(r),b+=m*m),y===0&&(y=Gh(r),b+=y*y),b<o&&(b=Math.sqrt(o*b)));do d.data!==e&&(w=a[d.data.index]*n/b,e.vx+=m*w,e.vy+=y*w);while(d=d.next)}return u.initialize=function(d,p){t=d,r=p,c()},u.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Yi(+d),c(),u):i},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function vqe(t,e,r){var n,i=Yi(.1),a,o;typeof t!="function"&&(t=Yi(+t)),e==null&&(e=0),r==null&&(r=0);function s(u){for(var c=0,f=n.length;c<f;++c){var h=n[c],d=h.x-e||1e-6,p=h.y-r||1e-6,v=Math.sqrt(d*d+p*p),g=(o[c]-v)*a[c]*u/v;h.vx+=d*g,h.vy+=p*g}}function l(){if(n){var u,c=n.length;for(a=new Array(c),o=new Array(c),u=0;u<c;++u)o[u]=+t(n[u],u,n),a[u]=isNaN(o[u])?0:+i(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:Yi(+u),l(),s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Yi(+u),l(),s):t},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(r=+u,s):r},s}function gqe(t){var e=Yi(.1),r,n,i;typeof t!="function"&&(t=Yi(t==null?0:+t));function a(s){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vx+=(i[l]-c.x)*n[l]*s}function o(){if(r){var s,l=r.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+t(r[s],s,r))?0:+e(r[s],s,r)}}return a.initialize=function(s){r=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Yi(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:Yi(+s),o(),a):t},a}function mqe(t){var e=Yi(.1),r,n,i;typeof t!="function"&&(t=Yi(t==null?0:+t));function a(s){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vy+=(i[l]-c.y)*n[l]*s}function o(){if(r){var s,l=r.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+t(r[s],s,r))?0:+e(r[s],s,r)}}return a.initialize=function(s){r=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Yi(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:Yi(+s),o(),a):t},a}const yqe=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:RYe,forceCollide:eqe,forceLink:rqe,forceManyBody:pqe,forceRadial:vqe,forceSimulation:dqe,forceX:gqe,forceY:mqe},Symbol.toStringTag,{value:"Module"})),z6=su(yqe);var j6={},wqe=Me&&Me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bqe=Me&&Me.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xqe=Me&&Me.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wqe(e,t,r);return bqe(e,t),e};Object.defineProperty(j6,"__esModule",{value:!0});var Ag=xqe(z6),uE=Kn();function Sqe(){function t(q){return function(){return q}}var e=function(q){return q.cluster},r=t(1),n=t(-1),i=t(100),a=t(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,h={none:{x:0,y:0}},d=[],p,v="force",g=!0,m=.1;function y(q){if(!g)return y;p.tick(),_();for(var pe=0,Se=s.length,Ae=void 0,He=q*m;pe<Se;++pe)Ae=s[pe],Ae.vx+=(h[e(Ae)].x-Ae.x)*He,Ae.vy+=(h[e(Ae)].y-Ae.y)*He}function w(){s&&b()}function b(){if(!(!s||!s.length)){if(e(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var q=x();p=Ag.forceSimulation(q.nodes).force("x",Ag.forceX(c).strength(.1)).force("y",Ag.forceY(f).strength(.1)).force("collide",Ag.forceCollide(function(pe){return pe.r}).iterations(4)).force("charge",Ag.forceManyBody().strength(n)).force("links",Ag.forceLink(q.nodes.length?q.links:[]).distance(i).strength(a)),d=p.nodes(),_()}}function x(){var q=[],pe=[],Se={},Ae=[],He={},ct=[];return He=S(s),ct=E(u),Ae=Object.keys(He),Ae.forEach(function(st,Mt){var yt=He[st];q.push({id:st,size:yt.count,r:Math.sqrt(yt.sumforceNodeSize/Math.PI)}),Se[st]=Mt}),ct.forEach(function(st){var Mt=(0,uE.getEdgeTerminal)(st,"source"),yt=(0,uE.getEdgeTerminal)(st,"target"),ar=Se[Mt],Jt=Se[yt];ar!==void 0&&Jt!==void 0&&pe.push({source:ar,target:Jt,count:st.count})}),{nodes:q,links:pe}}function S(q){var pe={};return q.forEach(function(Se){var Ae=e(Se);pe[Ae]||(pe[Ae]={count:0,sumforceNodeSize:0})}),q.forEach(function(Se){var Ae=e(Se),He=r(Se),ct=pe[Ae];ct.count=ct.count+1,ct.sumforceNodeSize=ct.sumforceNodeSize+Math.PI*(He*He)*1.3,pe[Ae]=ct}),pe}function E(q){var pe={},Se=[];q.forEach(function(He){var ct=k(He),st=0;pe[ct]!==void 0&&(st=pe[ct]),st+=1,pe[ct]=st});var Ae=Object.entries(pe);return Ae.forEach(function(He){var ct=He[0],st=He[1],Mt=ct.split("~")[0],yt=ct.split("~")[1];Mt!==void 0&&yt!==void 0&&Se.push({source:Mt,target:yt,count:st})}),Se}function _(){return h={none:{x:0,y:0}},d.forEach(function(q){h[q.id]={x:q.x-o[0],y:q.y-o[1]}}),h}function k(q){var pe=(0,uE.getEdgeTerminal)(q,"source"),Se=(0,uE.getEdgeTerminal)(q,"target"),Ae=e(l[pe]),He=e(l[Se]);return Ae<=He?"".concat(Ae,"~").concat(He):"".concat(He,"~").concat(Ae)}function C(q){l={},q.forEach(function(pe){l[pe.id]=pe})}function A(q){return arguments.length?(v=q,w(),y):v}function M(q){return arguments.length?typeof q=="string"?(e=function(pe){return pe[q]},y):(e=q,y):e}function T(q){return arguments.length?(g=q,y):g}function O(q){return arguments.length?(m=q,y):m}function N(q){return arguments.length?(c=q,y):c}function R(q){return arguments.length?(f=q,y):f}function B(q){return arguments.length?(C(q||[]),s=q||[],y):s}function F(q){return arguments.length?(u=q||[],w(),y):u}function D(q){return arguments.length?(typeof q=="function"?r=q:r=t(+q),w(),y):r}function L(q){return arguments.length?(typeof q=="function"?n=q:n=t(+q),w(),y):n}function G(q){return arguments.length?(typeof q=="function"?i=q:i=t(+q),w(),y):i}function Y(q){return arguments.length?(typeof q=="function"?a=q:a=t(+q),w(),y):a}function Z(q){return arguments.length?(o=q,y):o}return y.initialize=function(q){s=q,w()},y.template=A,y.groupBy=M,y.enableGrouping=T,y.strength=O,y.centerX=N,y.centerY=R,y.nodes=B,y.links=F,y.forceNodeSize=D,y.nodeSize=y.forceNodeSize,y.forceCharge=L,y.forceLinkDistance=G,y.forceLinkStrength=Y,y.offset=Z,y.getFocis=_,y}j6.default=Sqe;var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.FORCE_LAYOUT_TYPE_MAP=Cf.LAYOUT_MESSAGE=void 0;Cf.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};Cf.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var Eqe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_qe=Me&&Me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cqe=Me&&Me.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kqe=Me&&Me.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_qe(e,t,r);return Cqe(e,t),e},Mqe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oT,"__esModule",{value:!0});oT.ForceLayout=void 0;var Tg=kqe(z6),Aqe=Mqe(j6),op=Kn(),Tqe=si,Iqe=Cf,Oqe=function(t){Eqe(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,r&&n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(r){var n=this;n.nodes=r.nodes||[];var i=r.edges||[];n.edges=i.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),n.ticking=!1},e.prototype.execute=function(r){var n=this,i=n.nodes,a=n.edges;if(!n.ticking){var o=n.forceSimulation,s=n.alphaMin,l=n.alphaDecay,u=n.alpha;if(o){if(r){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(i),n.clusterForce.links(a)),o.nodes(i),a&&n.edgeForce)n.edgeForce.links(a);else if(a&&!n.edgeForce){var h=Tg.forceLink().id(function(g){return g.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}}n.preventOverlap&&n.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Tg.forceManyBody();if(n.nodeStrength&&c.strength(n.nodeStrength),o=Tg.forceSimulation().nodes(i),n.clustering){var f=(0,Aqe.default)();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),a&&f.links(a),i&&f.nodes(i),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,o.force("group",f)}if(o.force("center",Tg.forceCenter(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(l).alphaMin(s),n.preventOverlap&&n.overlapProcess(o),a){var h=Tg.forceLink().id(function(v){return v.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}if(n.workerEnabled&&!Pqe()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)o.on("tick",function(){n.tick()}).on("end",function(){n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{o.stop();for(var d=Dqe(o),p=1;p<=d;p++)o.tick(),postMessage({nodes:i,currentTick:p,totalTicks:d,type:Iqe.LAYOUT_MESSAGE.TICK},void 0);n.ticking=!1}n.forceSimulation=o,n.ticking=!0}catch(v){n.ticking=!1,console.warn(v)}}},e.prototype.overlapProcess=function(r){var n=this,i=n.nodeSize,a=n.nodeSpacing,o,s,l=n.collideStrength;if((0,op.isNumber)(a)?s=function(){return a}:(0,op.isFunction)(a)?s=a:s=function(){return 0},!i)o=function(h){if(h.size){if((0,op.isArray)(h.size)){var d=h.size[0]>h.size[1]?h.size[0]:h.size[1];return d/2+s(h)}if((0,op.isObject)(h.size)){var d=h.size.width>h.size.height?h.size.width:h.size.height;return d/2+s(h)}return h.size/2+s(h)}return 10+s(h)};else if((0,op.isFunction)(i))o=function(h){var d=i(h);return d+s(h)};else if((0,op.isArray)(i)){var u=i[0]>i[1]?i[0]:i[1],c=u/2;o=function(h){return c+s(h)}}else if((0,op.isNumber)(i)){var f=i/2;o=function(h){return f+s(h)}}else o=function(){return 10};r.force("collisionForce",Tg.forceCollide(o).strength(l))},e.prototype.updateCfg=function(r){var n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,r)},e.prototype.destroy=function(){var r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0},e}(Tqe.Base);oT.ForceLayout=Oqe;function Dqe(t){var e=t.alphaMin(),r=t.alphaTarget(),n=t.alpha(),i=Math.log((e-r)/(n-r))/Math.log(1-t.alphaDecay()),a=Math.ceil(i);return a}function Pqe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(t){var e=Me&&Me.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Me&&Me.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(oT,t)})(F6);var Cb={},Lqe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Cb,"__esModule",{value:!0});Cb.CircularLayout=void 0;var Rqe=si,rc=Kn();function Nqe(t,e,r,n){t.forEach(function(i,a){t[a].children=[],t[a].parent=[]}),n?e.forEach(function(i){var a=(0,rc.getEdgeTerminal)(i,"source"),o=(0,rc.getEdgeTerminal)(i,"target"),s=0;a&&(s=r[a]);var l=0;o&&(l=r[o]);var u=t[s].children,c=t[l].parent;u.push(t[l].id),c.push(t[s].id)}):e.forEach(function(i){var a=(0,rc.getEdgeTerminal)(i,"source"),o=(0,rc.getEdgeTerminal)(i,"target"),s=0;a&&(s=r[a]);var l=0;o&&(l=r[o]);var u=t[s].children,c=t[l].children;u.push(t[l].id),c.push(t[s].id)})}function Fqe(t,e,r){for(var n=r.length,i=0;i<n;i++){var a=(0,rc.getEdgeTerminal)(r[i],"source"),o=(0,rc.getEdgeTerminal)(r[i],"target");if(t.id===a&&e.id===o||e.id===a&&t.id===o)return!0}return!1}function Bqe(t,e){var r=t.degree,n=e.degree;return r<n?-1:r>n?1:0}var $qe=function(t){Lqe(e,t);function e(r){var n=t.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var r,n=this,i=n.nodes,a=n.edges,o=i.length;if(o===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window<"u"&&(n.width=window.innerWidth),!n.height&&typeof window<"u"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(o===1){i[0].x=s[0],i[0].y=s[1],n.onLayoutEnd&&n.onLayoutEnd();return}var l=n.radius,u=n.startRadius,c=n.endRadius,f=n.divisions,h=n.startAngle,d=n.endAngle,p=n.angleRatio,v=n.ordering,g=n.clockwise,m=n.nodeSpacing,y=n.nodeSize,w=(d-h)/o,b={};i.forEach(function(R,B){b[R.id]=B}),n.nodeMap=b;var x=(0,rc.getDegree)(i.length,b,a);if(n.degrees=x,m){var S=(0,rc.getFuncByUnknownType)(10,m),E=(0,rc.getFuncByUnknownType)(10,y),_=-1/0;i.forEach(function(R){var B=E(R);_<B&&(_=B)});var k=0;i.forEach(function(R,B){B===0?k+=_||10:k+=(S(R)||0)+(_||10)}),l=k/(2*Math.PI)}else!l&&!u&&!c?l=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);var C=w*p,A=[];v==="topology"?A=n.topologyOrdering():v==="topology-directed"?A=n.topologyOrdering(!0):v==="degree"?A=n.degreeOrdering():A=i;for(var M=Math.ceil(o/f),T=0;T<o;++T){var O=l;!O&&u!==null&&c!==null&&(O=u+T*(c-u)/(o-1)),O||(O=10+T*100/(o-1));var N=h+T%M*C+2*Math.PI/f*Math.floor(T/M);g||(N=d-T%M*C-2*Math.PI/f*Math.floor(T/M)),A[T].x=s[0]+Math.cos(N)*O,A[T].y=s[1]+Math.sin(N)*O,A[T].weight=x[T].all}return(r=n.onLayoutEnd)===null||r===void 0||r.call(n),{nodes:A,edges:this.edges}},e.prototype.topologyOrdering=function(r){r===void 0&&(r=!1);var n=this,i=n.degrees,a=n.edges,o=n.nodes,s=(0,rc.clone)(o),l=n.nodeMap,u=[s[0]],c=[o[0]],f=[],h=o.length;f[0]=!0,Nqe(s,a,l,r);var d=0;return s.forEach(function(p,v){if(v!==0)if((v===h-1||i[v].all!==i[v+1].all||Fqe(u[d],p,a))&&!f[v])u.push(p),c.push(o[l[p.id]]),f[v]=!0,d++;else{for(var g=u[d].children,m=!1,y=0;y<g.length;y++){var w=l[g[y]];if(i[w].all===i[v].all&&!f[w]){u.push(s[w]),c.push(o[l[s[w].id]]),f[w]=!0,m=!0;break}}for(var b=0;!m&&(f[b]||(u.push(s[b]),c.push(o[l[s[b].id]]),f[b]=!0,m=!0),b++,b!==h););}}),c},e.prototype.degreeOrdering=function(){var r=this,n=r.nodes,i=[],a=r.degrees;return n.forEach(function(o,s){o.degree=a[s].all,i.push(o)}),i.sort(Bqe),i},e.prototype.getType=function(){return"circular"},e}(Rqe.Base);Cb.CircularLayout=$qe;var ry={},G6={},U6={},W6={},V6={},H6={};Object.defineProperty(H6,"__esModule",{value:!0});var zqe=function(t,e){if(t!=="next"&&t!=="prev")return e},iV=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},jqe=function(){function t(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return t.prototype.dequeue=function(){var e=this.shortcut,r=e.prev;if(r&&r!==e)return iV(r),r},t.prototype.enqueue=function(e){var r=this.shortcut;e.prev&&e.next&&iV(e),e.next=r.next,r.next.prev=e,r.next=e,e.prev=r},t.prototype.toString=function(){for(var e=[],r=this.shortcut,n=r.prev;n!==r;)e.push(JSON.stringify(n,zqe)),n=n==null?void 0:n.prev;return"[".concat(e.join(", "),"]")},t}();H6.default=jqe;var P0;(function(t){t.DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""})(P0||(P0={}));function aV(t,e){var r=t.get(e)||0;t.set(e,r+1)}function oV(t,e){var r=t.get(e);r!==void 0&&(r=r-1,r>0?t.set(e,r):t.delete(e))}function Aue(t,e,r,n){var i=String(e),a=String(r);if(!t&&i>a){var o=i;i=a,a=o}return i+P0.EDGE_KEY_DELIM+a+P0.EDGE_KEY_DELIM+(n===void 0?P0.DEFAULT_EDGE_NAME:n)}function sV(t,e,r,n){var i=String(e),a=String(r),o={v:e,w:r};if(!t&&i>a){var s=o.v;o.v=o.w,o.w=s}return n!==void 0&&(o.name=n),o}function S3(t,e){return Aue(t,e.v,e.w,e.name)}function lV(t){return typeof t=="function"}var Gqe=function(e){return e.nodes().map(function(r){var n=e.node(r),i=e.parent(r),a={id:r,value:n,parent:i};return a.value===void 0&&delete a.value,a.parent===void 0&&delete a.parent,a})},Uqe=function(e){return e.edges().map(function(r){var n=e.edge(r),i={v:r.v,w:r.w,value:n,name:r.name};return i.name===void 0&&delete i.name,i.value===void 0&&delete i.value,i})},Wqe=function(e){var r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Gqe(e),edges:Uqe(e),value:e.graph()};return r.value===void 0&&delete r.value,r},Vqe=function(e){var r=new Lv(e.options);return e.value!==void 0&&r.setGraph(e.value),e.nodes.forEach(function(n){r.setNode(n.id,n.value),n.parent&&r.setParent(n.id,n.parent)}),e.edges.forEach(function(n){r.setEdge(n.v,n.w,n.value,n.name)}),r};function uV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(r),!0).forEach(function(n){Hqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hqe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yqe(t,e,r){return e&&fV(t.prototype,e),r&&fV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var qqe={compound:!1,multigraph:!1,directed:!0},Lv=function(){function t(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xqe(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=P0.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(i){return e.label=i,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(i){return lV(i)?e.defaultNodeLabelFn=i:e.defaultNodeLabelFn=function(){return i},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(i){return e.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.inEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.sinks=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.outEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.setNodes=function(i,a){return i.map(function(o){return e.setNode(o,a)}),e},this.hasNode=function(i){return e.nodesLabelMap.has(i)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(e.isCompound()){var a,o=(a=e.parentMap)===null||a===void 0?void 0:a.get(i);if(o!==e.GRAPH_NODE)return o}},this.removeFromParentsChildList=function(i){var a=e.parentMap.get(i);e.childrenMap.get(a).delete(i)},this.setParent=function(i,a){var o,s;e.checkCompound();for(var l=a===void 0?e.GRAPH_NODE:a,u=e.parent(l);u;){if(i===u)throw new Error("Setting "+a+" as parent of "+i+" would create a cycle");u=e.parent(u)}a&&e.setNode(a),e.setNode(i),e.removeFromParentsChildList(i),(o=e.parentMap)===null||o===void 0||o.set(i,l);var c=e.childrenMap.get(l);return c.set(i,!0),(s=e.childrenMap)===null||s===void 0||s.set(l,c),e},this.children=function(i){var a=i===void 0?e.GRAPH_NODE:i;if(e.isCompound()){var o,s=(o=e.childrenMap)===null||o===void 0?void 0:o.get(a);return s?Array.from(s.keys()):void 0}if(a===e.GRAPH_NODE)return e.nodes();if(i&&e.hasNode(i))return[]},this.predecessors=function(i){var a=e.predecessorsMap.get(i);return a?Array.from(a.keys()):void 0},this.successors=function(i){var a=e.successorsMap.get(i);return a?Array.from(a.keys()):void 0},this.neighbors=function(i){var a;if(e.hasNode(i))return Array.from(new Set((a=e.predecessors(i))===null||a===void 0?void 0:a.concat(e.successors(i))))},this.isLeaf=function(i){var a;if(e.isDirected()){var o;return!(!((o=e.successors(i))===null||o===void 0)&&o.length)}return!(!((a=e.neighbors(i))===null||a===void 0)&&a.length)},this.filterNodes=function(i){var a=e.directed,o=e.multigraph,s=e.compound,l=new t({directed:a,multigraph:o,compound:s});if(l.setGraph(e.graph()),e.nodes().forEach(function(c){i(c)&&l.setNode(c,e.node(c))}),e.edges().forEach(function(c){l.hasNode(c.v)&&l.hasNode(c.w)&&l.setEdgeObj(c,e.edge(c))}),s){var u=function(f){for(var h=e.parent(f);h!==void 0&&!l.hasNode(h);)h=e.parent(h);return h};l.nodes().forEach(function(c){l.setParent(c,u(c))})}return l},this.setDefaultEdgeLabel=function(i){return lV(i)?e.defaultEdgeLabelFn=i:e.defaultEdgeLabelFn=function(){return i},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(i,a){return e.setEdge(i.v,i.w,a,i.name)},this.setPath=function(i,a){return i.reduce(function(o,s){return e.setEdge(o,s,a),s}),e},this.edgeFromArgs=function(i,a,o){return e.edge({v:i,w:a,name:o})},this.edge=function(i){return e.edgesLabelsMap.get(S3(e.isDirected(),i))},this.hasEdge=function(i,a,o){return e.edgesLabelsMap.has(S3(e.isDirected(),{v:i,w:a,name:o}))},this.removeEdgeObj=function(i){var a=i.v,o=i.w,s=i.name;return e.removeEdge(a,o,s)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(i,a){var o=e.inEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.v===a})},this.outEdges=function(i,a){var o=e.outEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.w===a})},this.nodeEdges=function(i,a){var o;if(e.hasNode(i))return(o=e.inEdges(i,a))===null||o===void 0?void 0:o.concat(e.outEdges(i,a))},this.toJSON=function(){return Wqe(e)},this.nodeInDegree=function(i){var a=e.inEdgesMap.get(i);return a?a.size:0},this.nodeOutDegree=function(i){var a=e.outEdgesMap.get(i);return a?a.size:0},this.nodeDegree=function(i){return e.nodeInDegree(i)+e.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var n=cV(cV({},qqe),r);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Yqe(t,[{key:"setNode",value:function(r,n){var i=this.nodesLabelMap,a=this.defaultNodeLabelFn,o=this.isCompound,s=this.parentMap,l=this.childrenMap,u=this.inEdgesMap,c=this.outEdgesMap,f=this.predecessorsMap,h=this.successorsMap;if(i.has(r))return n!==void 0&&i.set(r,n),this;if(i.set(r,n||a(r)),o()){var d;s==null||s.set(r,this.GRAPH_NODE),l==null||l.set(r,new Map),l!=null&&l.has(this.GRAPH_NODE)||l==null||l.set(this.GRAPH_NODE,new Map),l==null||(d=l.get(this.GRAPH_NODE))===null||d===void 0||d.set(r,!0)}return[u,c,f,h].forEach(function(p){return p.set(r,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(r){var n=this;if(this.hasNode(r)){var i=function(g){n.removeEdge(g.v,g.w,g.name)},a=this.inEdgesMap,o=this.outEdgesMap,s=this.predecessorsMap,l=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound()){var c,f,h;this.removeFromParentsChildList(r),(c=this.parentMap)===null||c===void 0||c.delete(r),(f=this.children(r))===null||f===void 0||f.forEach(function(v){return n.setParent(v)}),(h=this.childrenMap)===null||h===void 0||h.delete(r)}var d=a.get(r),p=o.get(r);Array.from(d.values()).forEach(function(v){return i(v)}),Array.from(p.values()).forEach(function(v){return i(v)}),u.delete(r),a.delete(r),o.delete(r),s.delete(r),l.delete(r),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(r,n,i,a){var o,s,l=sV(this.isDirected(),r,n,a),u=S3(this.isDirected(),l),c=l.v,f=l.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,i),this;if(a!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this.edgesLabelsMap.set(u,i||this.defaultEdgeLabelFn(c,f,a)),Object.freeze(l),this.edgesMap.set(u,l);var h=this.predecessorsMap.get(f),d=this.successorsMap.get(c);return aV(h,c),aV(d,f),(o=this.inEdgesMap.get(f))===null||o===void 0||o.set(u,l),(s=this.outEdgesMap.get(c))===null||s===void 0||s.set(u,l),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(r,n,i){var a=Aue(this.isDirected(),r,n,i),o=this.edgesMap.get(a);if(o){var s=sV(this.isDirected(),r,n,i),l=s.v,u=s.w;this.edgesLabelsMap.delete(a),this.edgesMap.delete(a);var c=this.predecessorsMap.get(u),f=this.successorsMap.get(l);oV(c,l),oV(f,u),this.inEdgesMap.get(u).delete(a),this.outEdgesMap.get(l).delete(a),this.edgeCountNum-=1}return this}}]),t}();Lv.fromJSON=Vqe;function qR(t){"@babel/helpers - typeof";return qR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qR(t)}function Kqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qqe(t,e,r){return e&&hV(t.prototype,e),r&&hV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dp(){return typeof Reflect<"u"&&Reflect.get?Dp=Reflect.get:Dp=function(e,r,n){var i=Zqe(e,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Dp.apply(this,arguments)}function Zqe(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=sf(t),t!==null););return t}function Jqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KR(t,e)}function KR(t,e){return KR=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},KR(t,e)}function eKe(t){var e=nKe();return function(){var n=sf(t),i;if(e){var a=sf(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return tKe(this,i)}}function tKe(t,e){if(e&&(qR(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rKe(t)}function rKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nKe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sf(t){return sf=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},sf(t)}var iKe=function(t){Jqe(r,t);var e=eKe(r);function r(){var n;Kqe(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a)),n.eventPool={},n}return Qqe(r,[{key:"appendEvent",value:function(i,a){this.eventPool[i]||(this.eventPool[i]=[]),this.eventPool[i].push(a)}},{key:"removeEvent",value:function(i,a){if(this.eventPool[i]){var o=this.eventPool[i].indexOf(a);o>-1&&this.eventPool[i].splice(o,1)}}},{key:"emitEvent",value:function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];this.eventPool[i]&&this.eventPool[i].forEach(function(l){l.apply(void 0,o)})}},{key:"setNode",value:function(i,a){return Dp(sf(r.prototype),"setNode",this).call(this,i,a),this.emitEvent("nodeAdd",i,a),this}},{key:"removeNode",value:function(i){return Dp(sf(r.prototype),"removeNode",this).call(this,i),this.emitEvent("nodeRemove",i),this}},{key:"setEdge",value:function(i,a,o,s){return Dp(sf(r.prototype),"setEdge",this).call(this,i,a,o,s),this.emitEvent("edgeAdd",i,a,o,s),this}},{key:"removeEdge",value:function(i,a,o){return Dp(sf(r.prototype),"removeEdge",this).call(this,i,a,o),this.emitEvent("edgeRemove",i,a,o),this}}]),r}(Lv);function dV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aKe(t,e,r){return e&&dV(t.prototype,e),r&&dV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Tue=aKe(function t(){var e=this;oKe(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(r){return r.key})},this.has=function(r){return e.keyIndice.has(r)},this.priority=function(r){var n=e.keyIndice.get(r);if(n!==void 0)return e.arr[n].priority},this.swap=function(r,n){var i=e.arr,a=e.keyIndice,o=[i[r],i[n]],s=o[0],l=o[1];i[r]=l,i[n]=s,a.set(s.key,n),a.set(l.key,r)},this.innerDecrease=function(r){for(var n=e.arr,i=n[r].priority,a,o=r;o!==0;){var s;if(a=o>>1,((s=n[a])===null||s===void 0?void 0:s.priority)<i)break;e.swap(o,a),o=a}},this.heapify=function(r){var n=e.arr,i=r<<1,a=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==r&&(e.swap(r,o),e.heapify(o)))},this.min=function(){if(e.size()===0)throw new Error("Queue underflow");return e.arr[0].key},this.add=function(r,n){var i=e.keyIndice,a=e.arr;if(!i.has(r)){var o=a.length;return i.set(r,o),a.push({key:r,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var r=e.arr.pop();return e.keyIndice.delete(r.key),e.heapify(0),r.key},this.decrease=function(r,n){if(!e.has(r))throw new Error("There's no key named ".concat(r));var i=e.keyIndice.get(r);if(n>e.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(r," Old: + ").concat(e.arr[i].priority," New: ").concat(n));e.arr[i].priority=n,e.innerDecrease(i)}}),sKe=function(e,r){var n=new Lv,i=new Map,a=new Tue,o;function s(c){var f=c.v===o?c.w:c.v,h=a.priority(f);if(h!==void 0){var d=r(c);d<h&&(i.set(f,o),a.decrease(f,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(c){a.add(c,Number.POSITIVE_INFINITY),n.setNode(c)}),a.decrease(e.nodes()[0],0);for(var l=!1;a.size()>0;){var u;if(o=a.removeMin(),i.has(o))n.setEdge(o,i.get(o));else{if(l)throw new Error("Input graph is not connected: "+e.graph());l=!0}(u=e.nodeEdges(o))===null||u===void 0||u.forEach(s)}return n},lKe=function(e){var r=new Set,n=[],i=e.nodes();return i.forEach(function(a){for(var o=[],s=[a];s.length>0;){var l=s.pop();if(!r.has(l)){var u,c;r.add(l),o.push(l),(u=e.successors(l))===null||u===void 0||u.forEach(function(f){return s.push(f)}),(c=e.predecessors(l))===null||c===void 0||c.forEach(function(f){return s.push(f)})}}o.length&&n.push(o)}),n},uKe=function t(e,r,n,i,a,o){i.includes(r)||(i.push(r),n||o.push(r),a(r).forEach(function(s){return t(e,s,n,i,a,o)}),n&&o.push(r))},X6=function(e,r,n){var i=Array.isArray(r)?r:[r],a=function(u){return e.isDirected()?e.successors(u):e.neighbors(u)},o=[],s=[];return i.forEach(function(l){if(e.hasNode(l))uKe(e,l,n==="post",s,a,o);else throw new Error("Graph does not have node: "+l)}),o};function cKe(t,e){return pKe(t)||dKe(t,e)||hKe(t,e)||fKe()}function fKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hKe(t,e){if(t){if(typeof t=="string")return pV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pV(t,e)}}function pV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dKe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function pKe(t){if(Array.isArray(t))return t}var vKe=function(){return 1},Iue=function(e,r,n,i){return gKe(e,r,n||vKe,i||function(a){return e.outEdges(a)})},gKe=function(e,r,n,i){var a=new Map,o=new Tue,s,l,u=function(h){var d=h.v!==s?h.v:h.w,p=a.get(d),v=n(h),g=l.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+v);g<p.distance&&(p.distance=g,p.predecessor=s,o.decrease(d,g))};for(e.nodes().forEach(function(f){var h=f===r?0:Number.POSITIVE_INFINITY;a.set(f,{distance:h}),o.add(f,h)});o.size()>0&&(s=o.removeMin(),l=a.get(s),!(l&&l.distance===Number.POSITIVE_INFINITY));)i(s).forEach(u);var c={};return Array.from(a.entries()).forEach(function(f){var h=cKe(f,2),d=h[0],p=h[1];return c[String(d)]=p,c}),c},mKe=function(e,r,n){var i={};return e.nodes().forEach(function(a){return i[String(a)]=Iue(e,a,r,n),i}),i},Oue=function(e){var r=0,n=[],i=new Map,a=[];function o(s){var l,u={onStack:!0,lowlink:r,index:r};if(i.set(s,u),r+=1,n.push(s),(l=e.successors(s))===null||l===void 0||l.forEach(function(d){var p;if(i.has(d)){if(!((p=i.get(d))===null||p===void 0)&&p.onStack){var g=i.get(d);u.lowlink=Math.min(u.lowlink,g.index)}}else{o(d);var v=i.get(d);u.lowlink=Math.min(u.lowlink,v.lowlink)}}),u.lowlink===u.index){var c=[],f;do{f=n.pop();var h=i.get(f);h.onStack=!1,c.push(f)}while(s!==f);a.push(c)}}return e.nodes().forEach(function(s){i.has(s)||o(s)}),a},yKe=function(e){return Oue(e).filter(function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})};function QR(t){"@babel/helpers - typeof";return QR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QR(t)}function vV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wKe(t,e,r){return e&&vV(t.prototype,e),r&&vV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v2(t,e)}function SKe(t){var e=Due();return function(){var n=g2(t),i;if(e){var a=g2(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return EKe(this,i)}}function EKe(t,e){if(e&&(QR(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Ke(t)}function _Ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZR(t){var e=typeof Map=="function"?new Map:void 0;return ZR=function(n){if(n===null||!CKe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return I_(n,arguments,g2(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),v2(i,n)},ZR(t)}function I_(t,e,r){return Due()?I_=Reflect.construct:I_=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&v2(u,o.prototype),u},I_.apply(null,arguments)}function Due(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function CKe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function v2(t,e){return v2=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},v2(t,e)}function g2(t){return g2=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},g2(t)}var JR=function(t){xKe(r,t);var e=SKe(r);function r(){return bKe(this,r),e.apply(this,arguments)}return wKe(r)}(ZR(Error));function Pue(t){var e=new Set,r=new Set,n=[];function i(a){if(r.has(a))throw new JR;if(!e.has(a)){var o;r.add(a),e.add(a),(o=t.predecessors(a))===null||o===void 0||o.forEach(i),r.delete(a),n.push(a)}}if(t.sinks().forEach(i),e.size!==t.nodeCount())throw new JR;return n}var kKe=function(e){try{Pue(e)}catch(r){if(r instanceof JR)return!1;throw r}return!0},MKe=function(e,r){return X6(e,r,"post")},AKe=function(e,r){return X6(e,r,"pre")},TKe=function(){return 1};function IKe(t,e,r){return OKe(t,e||TKe,r||function(n){return t.outEdges(n)})}function OKe(t,e,r){var n={},i=t.nodes();return i.forEach(function(a){var o=String(a);n[o]={},n[o][o]={distance:0},i.forEach(function(s){a!==s&&(n[o][String(s)]={distance:Number.POSITIVE_INFINITY})}),r(a).forEach(function(s){var l=s.v===a?s.w:s.v,u=e(s);n[o][String(l)]={distance:u,predecessor:a}})}),i.forEach(function(a){var o=String(a),s=n[o];i.forEach(function(l){var u=String(l),c=n[u];i.forEach(function(f){var h=String(f),d=c[o],p=s[h],v=c[h],g=d.distance+p.distance;g<v.distance&&(v.distance=g,v.predecessor=p.predecessor)})})}),n}const DKe=Object.freeze(Object.defineProperty({__proto__:null,components:lKe,dfs:X6,dijkstra:Iue,dijkstraAll:mKe,findCycles:yKe,floydWarshall:IKe,isAcyclic:kKe,postorder:MKe,preorder:AKe,prim:sKe,tarjan:Oue,topsort:Pue},Symbol.toStringTag,{value:"Module"}));var PKe=function(e,r){for(var n=e.nodes(),i=0;i<n.length;i++){var a=n[i];if(r.hasNode(a))return!0}return!1},Lue=function(e,r){for(var n=e.edges(),i=0;i<n.length;i++){var a=n[i];if(r.hasEdge(a.v,a.w,a.name))return!0}return!1},Rue=function(e,r){var n=e.nodes(),i=n.filter(function(a){return r.hasNode(a)});return i},Nue=function(e,r){var n=e.edges(),i=n.filter(function(a){return r.hasEdge(a.v,a.w,a.name)});return i},Fue=function(e,r){return e.isCompound()===r.isCompound()&&e.isDirected()===r.isDirected()&&e.isMultigraph()===r.isMultigraph()},sT=function(e,r){var n=Rue(e,r);return n.length===e.nodes().length},Y6=function(e,r){var n=Nue(e,r);return n.length===e.edges().length},LKe=function(e,r){return Fue(e,r)&&e.nodeCount()===r.nodeCount()&&sT(e,r)&&e.edgeCount()===r.edgeCount()&&Y6(e,r)},RKe=function(e,r){return sT(e,r)&&Y6(e,r)};function NKe(t,e){return zKe(t)||$Ke(t,e)||BKe(t,e)||FKe()}function FKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BKe(t,e){if(t){if(typeof t=="string")return gV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gV(t,e)}}function gV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $Ke(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function zKe(t){if(Array.isArray(t))return t}function jKe(t){return t instanceof Lv}function Uk(t){if(t.isMultigraph())return!1;for(var e=t.edges(),r=new Map,n=0;n<e.length;n++){var i=e[n];if(i.v===i.w)return!1;var a=[i.v,i.w].sort(),o=NKe(a,2),s=o[0],l=o[1],u="".concat(s,"-").concat(l);if(r.has(u))return!1;r.set(u,!0)}return!0}function GKe(t){return t.nodes().length===0}function UKe(t){for(var e=t.edges(),r=0;r<e.length;r++){var n=e[r];if(n.v===n.w)return!0}return!1}const WKe=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:UKe,isGraph:jKe,isNullGraph:GKe,isSimpleGraph:Uk},Symbol.toStringTag,{value:"Module"}));var VKe=function(e,r){if(!Uk(e)||!Uk(r)||!sT(e,r)||Lue(e,r))return!1;var n=e.nodeCount();return e.edgeCount()+r.edgeCount()===n*(n-1)/2};const HKe=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:Y6,containAllSameNodes:sT,containSameEdges:Lue,containSameNodes:PKe,getSameEdges:Nue,getSameNodes:Rue,isGraphComplement:VKe,isGraphContainsAnother:RKe,isGraphOptionSame:Fue,isGraphSame:LKe},Symbol.toStringTag,{value:"Module"}));var XKe=function(e){if(!Uk(e))return null;for(var r=e.nodeCount(),n=new Lv({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),i=e.nodes(),a=0;a<r;a++){var o=i[a];n.setNode(o,e.node(o));for(var s=a+1;s<r;s++){var l=i[s];e.hasEdge(o,l)||n.setEdge(o,l)}}return n};const YKe=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:XKe},Symbol.toStringTag,{value:"Module"})),qKe=Object.freeze(Object.defineProperty({__proto__:null,Graph:Lv,GraphWithEvent:iKe,algorithm:DKe,comparision:HKe,essence:WKe,generate:YKe},Symbol.toStringTag,{value:"Module"})),lT=su(qKe);var Bue=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KKe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(V6,"__esModule",{value:!0});var QKe=KKe(H6),ZKe=lT,JKe=function(t){Bue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(QKe.default),eQe=function(t){Bue(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(ZKe.Graph),tQe=function(){return 1},rQe=function(t,e){var r;if(t.nodeCount()<=1)return[];var n=iQe(t,e||tQe),i=nQe(n.graph,n.buckets,n.zeroIdx);return(r=i.map(function(a){return t.outEdges(a.v,a.w)}))===null||r===void 0?void 0:r.flat()},nQe=function(t,e,r){for(var n=[],i=e[e.length-1],a=e[0],o;t.nodeCount();){for(;o=a.dequeue();)E3(t,e,r,o);for(;o=i.dequeue();)E3(t,e,r,o);if(t.nodeCount()){for(var s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){n=n.concat(E3(t,e,r,o,!0));break}}}return n},E3=function(t,e,r,n,i){var a,o,s=[];return(a=t.inEdges(n.v))===null||a===void 0||a.forEach(function(l){var u=t.edge(l),c=t.node(l.v);i&&s.push({v:l.v,w:l.w,in:0,out:0}),c.out===void 0&&(c.out=0),c.out-=u,eN(e,r,c)}),(o=t.outEdges(n.v))===null||o===void 0||o.forEach(function(l){var u=t.edge(l),c=l.w,f=t.node(c);f.in===void 0&&(f.in=0),f.in-=u,eN(e,r,f)}),t.removeNode(n.v),i?s:void 0},iQe=function(t,e){var r=new eQe,n=0,i=0;t.nodes().forEach(function(u){r.setNode(u,{v:u,in:0,out:0})}),t.edges().forEach(function(u){var c=r.edge(u)||0,f=(e==null?void 0:e(u))||1,h=c+f;r.setEdge(u.v,u.w,h),i=Math.max(i,r.node(u.v).out+=f),n=Math.max(n,r.node(u.w).in+=f)});for(var a=[],o=i+n+3,s=0;s<o;s++)a.push(new JKe);var l=n+1;return r.nodes().forEach(function(u){eN(a,l,r.node(u))}),{buckets:a,zeroIdx:l,graph:r}},eN=function(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)};V6.default=rQe;var aQe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W6,"__esModule",{value:!0});var oQe=aQe(V6),sQe=function(t){var e=function(n){return function(i){var a;return((a=n.edge(i))===null||a===void 0?void 0:a.weight)||1}},r=t.graph().acyclicer==="greedy"?(0,oQe.default)(t,e(t)):lQe(t);r==null||r.forEach(function(n){var i=t.edge(n);t.removeEdgeObj(n),i.forwardName=n.name,i.reversed=!0,t.setEdge(n.w,n.v,i,"rev-".concat(Math.random()))})},lQe=function(t){var e=[],r={},n={},i=function(a){var o;n[a]||(n[a]=!0,r[a]=!0,(o=t.outEdges(a))===null||o===void 0||o.forEach(function(s){r[s.w]?e.push(s):i(s.w)}),delete r[a])};return t.nodes().forEach(i),e},uQe=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.reversed){t.removeEdgeObj(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})};W6.default={run:sQe,undo:uQe};var q6={},Os={},Rf={},cQe=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Rf,"__esModule",{value:!0});Rf.Graph=void 0;var fQe=lT,hQe=function(t){cQe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(fQe.Graph);Rf.Graph=hQe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.minBy=t.notime=t.time=t.partition=t.maxRank=t.addBorderNode=t.removeEmptyRanks=t.normalizeRanks=t.buildLayerMatrix=t.intersectRect=t.predecessorWeights=t.successorWeights=t.zipObject=t.asNonCompoundGraph=t.simplify=t.addDummyNode=void 0;var e=Kn(),r=Rf,n=function(b,x){return Number(b)-Number(x)},i=function(b,x,S,E){var _;do _="".concat(E).concat(Math.random());while(b.hasNode(_));return S.dummy=x,b.setNode(_,S),_};t.addDummyNode=i;var a=function(b){var x=new r.Graph().setGraph(b.graph());return b.nodes().forEach(function(S){x.setNode(S,b.node(S))}),b.edges().forEach(function(S){var E=x.edgeFromArgs(S.v,S.w)||{weight:0,minlen:1},_=b.edge(S);x.setEdge(S.v,S.w,{weight:E.weight+_.weight,minlen:Math.max(E.minlen,_.minlen)})}),x};t.simplify=a;var o=function(b){var x=new r.Graph({multigraph:b.isMultigraph()}).setGraph(b.graph());return b.nodes().forEach(function(S){var E;!((E=b.children(S))===null||E===void 0)&&E.length||x.setNode(S,b.node(S))}),b.edges().forEach(function(S){x.setEdgeObj(S,b.edge(S))}),x};t.asNonCompoundGraph=o;var s=function(b,x){return b==null?void 0:b.reduce(function(S,E,_){return S[E]=x[_],S},{})};t.zipObject=s;var l=function(b){var x={};return b.nodes().forEach(function(S){var E,_={};(E=b.outEdges(S))===null||E===void 0||E.forEach(function(k){var C;_[k.w]=(_[k.w]||0)+(((C=b.edge(k))===null||C===void 0?void 0:C.weight)||0)}),x[S]=_}),x};t.successorWeights=l;var u=function(b){var x=b.nodes(),S=x.map(function(E){var _,k={};return(_=b.inEdges(E))===null||_===void 0||_.forEach(function(C){k[C.v]=(k[C.v]||0)+b.edge(C).weight}),k});return(0,t.zipObject)(x,S)};t.predecessorWeights=u;var c=function(b,x){var S=Number(b.x),E=Number(b.y),_=Number(x.x)-S,k=Number(x.y)-E,C=Number(b.width)/2,A=Number(b.height)/2;if(!_&&!k)return{x:0,y:0};var M,T;return Math.abs(k)*C>Math.abs(_)*A?(k<0&&(A=-A),M=A*_/k,T=A):(_<0&&(C=-C),M=C,T=C*k/_),{x:S+M,y:E+T}};t.intersectRect=c;var f=function(b){for(var x=[],S=(0,t.maxRank)(b)+1,E=0;E<S;E++)x.push([]);b.nodes().forEach(function(_){var k=b.node(_);if(k){var C=k.rank;C!==void 0&&x[C]&&x[C].push(_)}});for(var E=0;E<S;E++)x[E]=x[E].sort(function(k,C){var A,M;return n((A=b.node(k))===null||A===void 0?void 0:A.order,(M=b.node(C))===null||M===void 0?void 0:M.order)});return x};t.buildLayerMatrix=f;var h=function(b){var x=b.nodes().filter(function(E){var _;return((_=b.node(E))===null||_===void 0?void 0:_.rank)!==void 0}).map(function(E){return b.node(E).rank}),S=Math.min.apply(Math,x);b.nodes().forEach(function(E){var _=b.node(E);_.hasOwnProperty("rank")&&S!==1/0&&(_.rank-=S)})};t.normalizeRanks=h;var d=function(b){var x=b.nodes(),S=x.filter(function(T){var O;return((O=b.node(T))===null||O===void 0?void 0:O.rank)!==void 0}).map(function(T){return b.node(T).rank}),E=Math.min.apply(Math,S),_=[];x.forEach(function(T){var O,N=(((O=b.node(T))===null||O===void 0?void 0:O.rank)||0)-E;_[N]||(_[N]=[]),_[N].push(T)});for(var k=0,C=b.graph().nodeRankFactor||0,A=0;A<_.length;A++){var M=_[A];M===void 0?A%C!==0&&(k-=1):k&&(M==null||M.forEach(function(T){var O=b.node(T);O&&(O.rank=O.rank||0,O.rank+=k)}))}};t.removeEmptyRanks=d;var p=function(b,x,S,E){var _={width:0,height:0};return(0,e.isNumber)(S)&&(0,e.isNumber)(E)&&(_.rank=S,_.order=E),(0,t.addDummyNode)(b,"border",_,x)};t.addBorderNode=p;var v=function(b){var x;return b.nodes().forEach(function(S){var E,_=(E=b.node(S))===null||E===void 0?void 0:E.rank;_!==void 0&&(x===void 0||_>x)&&(x=_)}),x||(x=0),x};t.maxRank=v;var g=function(b,x){var S={lhs:[],rhs:[]};return b==null||b.forEach(function(E){x(E)?S.lhs.push(E):S.rhs.push(E)}),S};t.partition=g;var m=function(b,x){var S=Date.now();try{return x()}finally{console.log("".concat(b," time: ").concat(Date.now()-S,"ms"))}};t.time=m;var y=function(b,x){return x()};t.notime=y;var w=function(b,x){return b.reduce(function(S,E){var _=x(S),k=x(E);return _>k?E:S})};t.minBy=w})(Os);Object.defineProperty(q6,"__esModule",{value:!0});var dQe=Os,pQe=function(t){t.graph().dummyChains=[],t.edges().forEach(function(e){return vQe(t,e)})},vQe=function(t,e){var r=e.v,n=t.node(r).rank,i=e.w,a=t.node(i).rank,o=e.name,s=t.edge(e),l=s.labelRank;if(a!==n+1){t.removeEdgeObj(e);var u=t.graph(),c,f,h;for(h=0,++n;n<a;++h,++n)s.points=[],f={edgeLabel:s,width:0,height:0,edgeObj:e,rank:n},c=(0,dQe.addDummyNode)(t,"edge",f,"_d"),n===l&&(f.width=s.width,f.height=s.height,f.dummy="edge-label",f.labelpos=s.labelpos),t.setEdge(r,c,{weight:s.weight},o),h===0&&(u.dummyChains||(u.dummyChains=[]),u.dummyChains.push(c)),r=c;t.setEdge(r,i,{weight:s.weight},o)}},gQe=function(t){var e;(e=t.graph().dummyChains)===null||e===void 0||e.forEach(function(r){var n=t.node(r),i=n.edgeLabel,a;n.edgeObj&&t.setEdgeObj(n.edgeObj,i);for(var o=r;n.dummy;)a=t.successors(o)[0],t.removeNode(o),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),o=a,n=t.node(o)})};q6.default={run:pQe,undo:gQe};var K6={},ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.slack=ru.longestPathWithLayer=ru.longestPath=void 0;var $ue=function(t){var e,r={},n=function(i){var a,o=t.node(i);if(!o)return 0;if(r[i])return o.rank;r[i]=!0;var s;return(a=t.outEdges(i))===null||a===void 0||a.forEach(function(l){var u=n(l.w),c=t.edge(l).minlen,f=u-c;f&&(s===void 0||f<s)&&(s=f)}),s||(s=0),o.rank=s,s};(e=t.sources())===null||e===void 0||e.forEach(function(i){return n(i)})};ru.longestPath=$ue;var zue=function(t){var e,r={},n,i=function(s){var l,u=t.node(s);if(!u)return 0;if(r[s])return u.rank;r[s]=!0;var c;return(l=t.outEdges(s))===null||l===void 0||l.forEach(function(f){var h=i(f.w),d=t.edge(f).minlen,p=h-d;p&&(c===void 0||p<c)&&(c=p)}),c||(c=0),(n===void 0||c<n)&&(n=c),u.rank=c,c};(e=t.sources())===null||e===void 0||e.forEach(function(s){t.node(s)&&i(s)}),n===void 0&&(n=0);var a={},o=function(s,l){var u,c=t.node(s),f=isNaN(c.layer)?l:c.layer;(c.rank===void 0||c.rank<f)&&(c.rank=f),!a[s]&&(a[s]=!0,(u=t.outEdges(s))===null||u===void 0||u.map(function(h){o(h.w,f+t.edge(h).minlen)}))};t.nodes().forEach(function(s){var l=t.node(s);l&&(isNaN(l.layer)?l.rank-=n:o(s,l.layer))})};ru.longestPathWithLayer=zue;var jue=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};ru.slack=jue;ru.default={longestPath:$ue,longestPathWithLayer:zue,slack:jue};var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});Sd.feasibleTreeWithLayer=Sd.feasibleTree=void 0;var bv=ru,mQe=Os,Gue=Rf,Uue=function(t){var e=new Gue.Graph({directed:!1}),r=t.nodes()[0],n=t.nodeCount();e.setNode(r,{});for(var i,a;yQe(e,t)<n;)i=Vue(e,t),a=e.hasNode(i.v)?(0,bv.slack)(t,i):-(0,bv.slack)(t,i),Hue(e,t,a);return e};Sd.feasibleTree=Uue;var yQe=function(t,e){var r=function(n){e.nodeEdges(n).forEach(function(i){var a=i.v,o=n===a?i.w:a;!t.hasNode(o)&&!(0,bv.slack)(e,i)&&(t.setNode(o,{}),t.setEdge(n,o,{}),r(o))})};return t.nodes().forEach(r),t.nodeCount()},Wue=function(t){var e=new Gue.Graph({directed:!1}),r=t.nodes()[0],n=t.nodes().filter(function(o){return!!t.node(o)}).length;e.setNode(r,{});for(var i,a;wQe(e,t)<n;)i=Vue(e,t),a=e.hasNode(i.v)?(0,bv.slack)(t,i):-(0,bv.slack)(t,i),Hue(e,t,a);return e};Sd.feasibleTreeWithLayer=Wue;var wQe=function(t,e){var r=function(n){var i;(i=e.nodeEdges(n))===null||i===void 0||i.forEach(function(a){var o=a.v,s=n===o?a.w:o;!t.hasNode(s)&&(e.node(s).layer!==void 0||!(0,bv.slack)(e,a))&&(t.setNode(s,{}),t.setEdge(n,s,{}),r(s))})};return t.nodes().forEach(r),t.nodeCount()},Vue=function(t,e){return(0,mQe.minBy)(e.edges(),function(r){return t.hasNode(r.v)!==t.hasNode(r.w)?(0,bv.slack)(e,r):1/0})},Hue=function(t,e,r){t.nodes().forEach(function(n){e.node(n).rank||(e.node(n).rank=0),e.node(n).rank+=r})};Sd.default={feasibleTree:Uue,feasibleTreeWithLayer:Wue};var Xue={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.exchangeEdges=t.enterEdge=t.leaveEdge=t.initLowLimValues=t.calcCutValue=t.initCutValues=void 0;var e=Sd,r=ru,n=Os,i=lT,a=i.algorithm.preorder,o=i.algorithm.postorder,s=function(w){var b=(0,n.simplify)(w);(0,r.longestPath)(b);var x=(0,e.feasibleTree)(b);(0,t.initLowLimValues)(x),(0,t.initCutValues)(x,b);for(var S,E;S=(0,t.leaveEdge)(x);)E=(0,t.enterEdge)(x,b,S),(0,t.exchangeEdges)(x,b,S,E)},l=function(w,b){var x=o(w,w.nodes());x=x==null?void 0:x.slice(0,(x==null?void 0:x.length)-1),x==null||x.forEach(function(S){u(w,b,S)})};t.initCutValues=l;var u=function(w,b,x){var S=w.node(x),E=S.parent;w.edgeFromArgs(x,E).cutvalue=(0,t.calcCutValue)(w,b,x)},c=function(w,b,x){var S,E=w.node(x),_=E.parent,k=!0,C=b.edgeFromArgs(x,_),A=0;return C||(k=!1,C=b.edgeFromArgs(_,x)),A=C.weight,(S=b.nodeEdges(x))===null||S===void 0||S.forEach(function(M){var T=M.v===x,O=T?M.w:M.v;if(O!==_){var N=T===k,R=b.edge(M).weight;if(A+=N?R:-R,m(w,x,O)){var B=w.edgeFromArgs(x,O).cutvalue;A+=N?-B:B}}}),A};t.calcCutValue=c;var f=function(w,b){b===void 0&&(b=w.nodes()[0]),h(w,{},1,b)};t.initLowLimValues=f;var h=function(w,b,x,S,E){var _,k=x,C=x,A=w.node(S);return b[S]=!0,(_=w.neighbors(S))===null||_===void 0||_.forEach(function(M){b[M]||(C=h(w,b,C,M,S))}),A.low=k,A.lim=C++,E?A.parent=E:delete A.parent,C},d=function(w){return w.edges().find(function(b){return w.edge(b).cutvalue<0})};t.leaveEdge=d;var p=function(w,b,x){var S=x.v,E=x.w;b.hasEdge(S,E)||(S=x.w,E=x.v);var _=w.node(S),k=w.node(E),C=_,A=!1;_.lim>k.lim&&(C=k,A=!0);var M=b.edges().filter(function(T){return A===y(w,w.node(T.v),C)&&A!==y(w,w.node(T.w),C)});return(0,n.minBy)(M,function(T){return(0,r.slack)(b,T)})};t.enterEdge=p;var v=function(w,b,x,S){var E=x.v,_=x.w;w.removeEdge(E,_),w.setEdge(S.v,S.w,{}),(0,t.initLowLimValues)(w),(0,t.initCutValues)(w,b),g(w,b)};t.exchangeEdges=v;var g=function(w,b){var x=w.nodes().find(function(E){var _;return!(!((_=b.node(E))===null||_===void 0)&&_.parent)}),S=a(w,x);S=S==null?void 0:S.slice(1),S==null||S.forEach(function(E){var _=w.node(E).parent,k=b.edgeFromArgs(E,_),C=!1;k||(k=b.edgeFromArgs(_,E),C=!0),b.node(E).rank=b.node(_).rank+(C?k.minlen:-k.minlen)})},m=function(w,b,x){return w.hasEdge(b,x)},y=function(w,b,x){return x.low<=b.lim&&b.lim<=x.lim};t.default=s})(Xue);var bQe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(K6,"__esModule",{value:!0});var Yue=ru,xQe=Sd,SQe=bQe(Xue),EQe=function(t){switch(t.graph().ranker){case"network-simplex":CQe(t);break;case"tight-tree":mV(t);break;case"longest-path":_Qe(t);break;default:mV(t)}},_Qe=Yue.longestPath,mV=function(t){(0,Yue.longestPathWithLayer)(t),(0,xQe.feasibleTreeWithLayer)(t)},CQe=function(t){(0,SQe.default)(t)};K6.default=EQe;var Q6={};Object.defineProperty(Q6,"__esModule",{value:!0});var kQe=function(t){var e,r={},n=0,i=function(a){var o,s=n;(o=t.children(a))===null||o===void 0||o.forEach(i),r[a]={low:s,lim:n++}};return(e=t.children())===null||e===void 0||e.forEach(i),r},MQe=function(t,e,r,n){var i=[],a=[],o=Math.min(e[r].low,e[n].low),s=Math.max(e[r].lim,e[n].lim),l,u;l=r;do l=t.parent(l),i.push(l);while(l&&(e[l].low>o||s>e[l].lim));for(u=l,l=n;l&&l!==u;)a.push(l),l=t.parent(l);return{lca:u,path:i.concat(a.reverse())}},AQe=function(t){var e,r=kQe(t);(e=t.graph().dummyChains)===null||e===void 0||e.forEach(function(n){var i,a,o=n,s=t.node(o),l=s.edgeObj;if(l)for(var u=MQe(t,r,l.v,l.w),c=u.path,f=u.lca,h=0,d=c[h],p=!0;o!==l.w;){if(s=t.node(o),p){for(;d!==f&&((i=t.node(d))===null||i===void 0?void 0:i.maxRank)<s.rank;)h++,d=c[h];d===f&&(p=!1)}if(!p){for(;h<c.length-1&&((a=t.node(c[h+1]))===null||a===void 0?void 0:a.minRank)<=s.rank;)h++;d=c[h]}t.setParent(o,d),o=t.successors(o)[0]}})};Q6.default=AQe;var Z6={};Object.defineProperty(Z6,"__esModule",{value:!0});var tN=Os,TQe=function(t){var e,r=(0,tN.addDummyNode)(t,"root",{},"_root"),n=IQe(t),i=Math.max.apply(Math,Object.values(n));Math.abs(i)===1/0&&(i=1);var a=i-1,o=2*a+1;t.graph().nestingRoot=r,t.edges().forEach(function(l){t.edge(l).minlen*=o});var s=OQe(t)+1;(e=t.children())===null||e===void 0||e.forEach(function(l){que(t,r,o,s,a,n,l)}),t.graph().nodeRankFactor=o},que=function(t,e,r,n,i,a,o){var s=t.children(o);if(!(s!=null&&s.length)){o!==e&&t.setEdge(e,o,{weight:0,minlen:r});return}var l=(0,tN.addBorderNode)(t,"_bt"),u=(0,tN.addBorderNode)(t,"_bb"),c=t.node(o);t.setParent(l,o),c.borderTop=l,t.setParent(u,o),c.borderBottom=u,s==null||s.forEach(function(f){que(t,e,r,n,i,a,f);var h=t.node(f),d=h.borderTop?h.borderTop:f,p=h.borderBottom?h.borderBottom:f,v=h.borderTop?n:2*n,g=d!==p?1:i-a[o]+1;t.setEdge(l,d,{minlen:g,weight:v,nestingEdge:!0}),t.setEdge(p,u,{minlen:g,weight:v,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,l,{weight:0,minlen:i+a[o]})},IQe=function(t){var e,r={},n=function(i,a){var o=t.children(i);o==null||o.forEach(function(s){return n(s,a+1)}),r[i]=a};return(e=t.children())===null||e===void 0||e.forEach(function(i){return n(i,1)}),r},OQe=function(t){var e=0;return t.edges().forEach(function(r){e+=t.edge(r).weight}),e},DQe=function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(function(r){var n=t.edge(r);n.nestingEdge&&t.removeEdgeObj(r)})};Z6.default={run:TQe,cleanup:DQe};var J6={};Object.defineProperty(J6,"__esModule",{value:!0});var PQe=Os,LQe=function(t){var e,r=function(n){var i=t.children(n),a=t.node(n);if(i!=null&&i.length&&i.forEach(function(l){return r(l)}),a.hasOwnProperty("minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,s=a.maxRank+1;o<s;o+=1)yV(t,"borderLeft","_bl",n,a,o),yV(t,"borderRight","_br",n,a,o)}};(e=t.children())===null||e===void 0||e.forEach(function(n){return r(n)})},yV=function(t,e,r,n,i,a){var o={rank:a,borderType:e,width:0,height:0},s=i[e][a-1],l=(0,PQe.addDummyNode)(t,"border",o,r);i[e][a]=l,t.setParent(l,n),s&&t.setEdge(s,l,{weight:1})};J6.default=LQe;var eF={};Object.defineProperty(eF,"__esModule",{value:!0});var RQe=function(t){var e,r=(e=t.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(r==="lr"||r==="rl")&&Kue(t)},NQe=function(t){var e,r=(e=t.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(r==="bt"||r==="rl")&&FQe(t),(r==="lr"||r==="rl")&&(BQe(t),Kue(t))},Kue=function(t){t.nodes().forEach(function(e){wV(t.node(e))}),t.edges().forEach(function(e){wV(t.edge(e))})},wV=function(t){var e=t.width;t.width=t.height,t.height=e},FQe=function(t){t.nodes().forEach(function(e){_3(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);(r=n.points)===null||r===void 0||r.forEach(function(i){return _3(i)}),n.hasOwnProperty("y")&&_3(n)})},_3=function(t){t!=null&&t.y&&(t.y=-t.y)},BQe=function(t){t.nodes().forEach(function(e){C3(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);(r=n.points)===null||r===void 0||r.forEach(function(i){return C3(i)}),n.hasOwnProperty("x")&&C3(n)})},C3=function(t){var e=t.x;t.x=t.y,t.y=e};eF.default={adjust:RQe,undo:NQe};var tF={},rF={};function Que(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function k3(t){var e=Math.round(t).toString(16);return e.length===1?"0"+e:e}function Zue(t){return"#"+k3(t[0])+k3(t[1])+k3(t[2])}var Wo=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},$Qe=function(t,e){return Wo(t)?t.indexOf(e)>-1:!1};const Wk=$Qe;var Jue=function(t,e){if(!Wo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];e(i,n)&&r.push(i)}return r},zQe=function(t,e){return e===void 0&&(e=[]),Jue(t,function(r){return!Wk(e,r)})};const jQe=zQe,Ds=function(t){return typeof t=="function"};var Pd=function(t){return t==null},GQe={}.toString,_c=function(t,e){return GQe.call(t)==="[object "+e+"]"};const xi=function(t){return Array.isArray?Array.isArray(t):_c(t,"Array")},uT=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function Dm(t,e){if(t){var r;if(xi(t))for(var n=0,i=t.length;n<i&&(r=e(t[n],n),r!==!1);n++);else if(uT(t)){for(var a in t)if(t.hasOwnProperty(a)&&(r=e(t[a],a),r===!1))break}}}var UQe=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Dm(t,function(r,n){Ds(t)&&n==="prototype"||e.push(n)}),e};const ece=UQe;function tce(t,e){var r=ece(e),n=r.length;if(Pd(t))return!n;for(var i=0;i<n;i+=1){var a=r[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var WQe=function(t){return typeof t=="object"&&t!==null};const Vk=WQe;var VQe=function(t){if(!Vk(t)||!_c(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const Pm=VQe;function HQe(t,e){if(!xi(t))return null;var r;if(Ds(e)&&(r=e),Pm(e)&&(r=function(i){return tce(i,e)}),r){for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n]}return null}function XQe(t,e,r){r===void 0&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1}var YQe=function(t,e){for(var r=null,n=0;n<t.length;n++){var i=t[n],a=i[e];if(!Pd(a)){xi(a)?r=a[0]:r=a;break}}return r};const qQe=YQe;var KQe=function(t){if(!xi(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e};const QQe=KQe;var rce=function(t,e){if(e===void 0&&(e=[]),!xi(t))e.push(t);else for(var r=0;r<t.length;r+=1)rce(t[r],e);return e};const ZQe=rce,nce=function(t){if(xi(t))return t.reduce(function(e,r){return Math.max(e,r)},t[0])},ice=function(t){if(xi(t))return t.reduce(function(e,r){return Math.min(e,r)},t[0])};var JQe=function(t){var e=t.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(xi(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var i=nce(e),a=ice(e);return{min:a,max:i}};const eZe=JQe;var ace=Array.prototype,tZe=ace.splice,rZe=ace.indexOf,nZe=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=rZe.call(t,i))>-1;)tZe.call(t,a,1);return t};const iZe=nZe;var aZe=Array.prototype.splice,oZe=function(e,r){if(!Wo(e))return[];for(var n=e?r.length:0,i=n-1;n--;){var a=void 0,o=r[n];(n===i||o!==a)&&(a=o,aZe.call(e,o,1))}return e};const oce=oZe;var sZe=function(t,e,r){if(!xi(t)&&!Pm(t))return t;var n=r;return Dm(t,function(i,a){n=e(n,i,a)}),n};const sce=sZe;var lZe=function(t,e){var r=[];if(!Wo(t))return r;for(var n=-1,i=[],a=t.length;++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return oce(t,i),r};const uZe=lZe,Ed=function(t){return _c(t,"String")};function cZe(t,e){var r;if(Ds(e))r=function(i,a){return e(i)-e(a)};else{var n=[];Ed(e)?n.push(e):xi(e)&&(n=e),r=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(r),t}function lce(t,e){e===void 0&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];e.has(a)||(r.push(a),e.set(a,!0))}return r}var fZe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lce([].concat.apply([],t))};const hZe=fZe,dZe=function(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[e];if(!Pd(o)){xi(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(r.push(l),n[l]=!0)}}}return r};function pZe(t){if(Wo(t))return t[0]}function vZe(t){if(Wo(t)){var e=t;return e[e.length-1]}}function gZe(t,e){return xi(t)||Ed(t)?t[0]===e:!1}function mZe(t,e){return xi(t)||Ed(t)?t[t.length-1]===e:!1}var yZe=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0};const wZe=yZe;var bZe=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1};const xZe=bZe;var SZe=Object.prototype.hasOwnProperty;function uce(t,e){if(!e||!xi(t))return{};for(var r={},n=Ds(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=n(o),SZe.call(r,i)?r[i].push(o):r[i]=[o]}return r}function cce(t,e){if(!e)return{0:t};if(!Ds(e)){var r=xi(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=r.length;a<o;a++)i+=n[r[a]]&&n[r[a]].toString();return i}}return uce(t,e)}const EZe=function(t,e){if(!e)return[t];var r=cce(t,e),n=[];for(var i in r)n.push(r[i]);return n};function _Ze(t,e){return t["_wrap_"+e]}function CZe(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(n){t[e](n)};return t["_wrap_"+e]=r,r}var bV={};function kZe(t){var e=bV[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,bV[t]=e}return e}function MZe(t){var e=0,r=0,n=0,i=0;return xi(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var AZe=function(t,e,r){return t<e?e:t>r?r:t};const TZe=AZe;var IZe=function(t,e){var r=e.toString(),n=r.indexOf(".");if(n===-1)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};const OZe=IZe;var Nf=function(t){return _c(t,"Number")},DZe=function(t){return Nf(t)&&t%1!==0};const PZe=DZe;var LZe=function(t){return Nf(t)&&t%2===0};const RZe=LZe;var NZe=Number.isInteger?Number.isInteger:function(t){return Nf(t)&&t%1===0};const FZe=NZe;var BZe=function(t){return Nf(t)&&t<0};const $Ze=BZe;var zZe=1e-5;function jZe(t,e,r){return r===void 0&&(r=zZe),Math.abs(t-e)<r}var GZe=function(t){return Nf(t)&&t%2!==0};const UZe=GZe;var WZe=function(t){return Nf(t)&&t>0};const VZe=WZe,HZe=function(t,e){if(xi(t)){for(var r,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Ds(e)?e(a):a[e];o>n&&(r=a,n=o)}return r}},XZe=function(t,e){if(xi(t)){for(var r,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Ds(e)?e(a):a[e];o<n&&(r=a,n=o)}return r}};var YZe=function(t,e){return(t%e+e)%e};const qZe=YZe;var KZe=180/Math.PI,QZe=function(t){return KZe*t};const ZZe=QZe,JZe=parseInt;var eJe=Math.PI/180,tJe=function(t){return eJe*t};const rJe=tJe,xV=function(t,e){return t.hasOwnProperty(e)};var fce=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Dm(t,function(r,n){Ds(t)&&n==="prototype"||e.push(r)}),e};const nJe=function(t,e){return Wk(fce(t),e)},kb=function(t){return Pd(t)?"":t.toString()};var iJe=function(t){return kb(t).toLowerCase()};const aJe=iJe;var oJe=function(t){var e=kb(t);return e.charAt(0).toLowerCase()+e.substring(1)};const sJe=oJe;function lJe(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(r,n){return r.charAt(0)==="\\"?r.slice(1):e[n]===void 0?"":e[n]})}var uJe=function(t){return kb(t).toUpperCase()};const cJe=uJe;var fJe=function(t){var e=kb(t);return e.charAt(0).toUpperCase()+e.substring(1)};const hJe=fJe;var dJe={}.toString,pJe=function(t){return dJe.call(t).replace(/^\[object /,"").replace(/]$/,"")};const hce=pJe;var vJe=function(t){return _c(t,"Arguments")};const gJe=vJe;var mJe=function(t){return _c(t,"Boolean")};const yJe=mJe;var wJe=function(t){return _c(t,"Date")};const bJe=wJe;var xJe=function(t){return _c(t,"Error")};const SJe=xJe;function EJe(t){return Nf(t)&&isFinite(t)}var _Je=function(t){return t===null};const CJe=_Je;var kJe=Object.prototype,MJe=function(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||kJe;return t===r};const dce=MJe;var AJe=function(t){return _c(t,"RegExp")};const TJe=AJe;var IJe=function(t){return t===void 0};const OJe=IJe;var DJe=function(t){return t instanceof Element||t instanceof Document};const PJe=DJe;function LJe(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(r){return setTimeout(r,16)};return e(t)}function RJe(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function M3(t,e){for(var r in e)e.hasOwnProperty(r)&&r!=="constructor"&&e[r]!==void 0&&(t[r]=e[r])}function L0(t,e,r,n){return e&&M3(t,e),r&&M3(t,r),n&&M3(t,n),t}var NJe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var i=t[n];Ds(i)&&(i=i.prototype),L0(r.prototype,i)}};const FJe=NJe;var rN=function(t){if(typeof t!="object"||t===null)return t;var e;if(xi(t)){e=[];for(var r=0,n=t.length;r<n;r++)typeof t[r]=="object"&&t[r]!=null?e[r]=rN(t[r]):e[r]=t[r]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=rN(t[i]):e[i]=t[i]}return e};const BJe=rN;function $Je(t,e,r){var n;return function(){var i=this,a=arguments,o=function(){n=null,r||t.apply(i,a)},s=r&&!n;clearTimeout(n),n=setTimeout(o,e),s&&t.apply(i,a)}}function zJe(t){var e,r,n,i=t||1;function a(s,l){++e>i&&(n=r,o(1),++e),r[s]=l}function o(s){e=0,r=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return r[s]!==void 0||n[s]!==void 0},get:function(s){var l=r[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){r[s]!==void 0?r[s]=l:a(s,l)}}}const pce=function(t,e,r){if(r===void 0&&(r=128),!Ds(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return n.cache=zJe(r),n};var jJe=5;function GJe(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function vce(t,e,r,n){r=r||0,n=n||jJe;for(var i in e)if(GJe(e,i)){var a=e[i];a!==null&&Pm(a)?(Pm(t[i])||(t[i]={}),r<n?vce(t[i],a,r+1,n):t[i]=e[i]):xi(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var UJe=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)vce(t,e[n]);return t};const WJe=UJe;var VJe=function(t,e,r,n){Ds(e)||(r=e,e=t,t=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,t);return t.prototype=L0(a,t.prototype),t.superclass=i(e.prototype,e),L0(a,r),L0(t,n),t};const HJe=VJe;var XJe=function(t,e){if(!Wo(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var n=-1,i=0;i<t.length;i++)if(t[i]===e){n=i;break}return n};const YJe=XJe;var qJe=Object.prototype.hasOwnProperty;function KJe(t){if(Pd(t))return!0;if(Wo(t))return!t.length;var e=hce(t);if(e==="Map"||e==="Set")return!t.size;if(dce(t))return!Object.keys(t).length;for(var r in t)if(qJe.call(t,r))return!1;return!0}var nN=function(t,e){if(t===e)return!0;if(!t||!e||Ed(t)||Ed(e))return!1;if(Wo(t)||Wo(e)){if(t.length!==e.length)return!1;for(var r=!0,n=0;n<t.length&&(r=nN(t[n],e[n]),!!r);n++);return r}if(Vk(t)||Vk(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var r=!0,n=0;n<i.length&&(r=nN(t[i[n]],e[i[n]]),!!r);n++);return r}return!1};const gce=nN,QJe=function(t,e,r){return Ds(r)?!!r(t,e):gce(t,e)};var ZJe=function(t,e){if(!Wo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push(e(i,n))}return r};const JJe=ZJe;var eet=function(t){return t};const tet=function(t,e){e===void 0&&(e=eet);var r={};return uT(t)&&!Pd(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},ret=function(t,e,r){for(var n=0,i=Ed(e)?e.split("."):e;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?r:t},net=function(t,e,r){var n=t,i=Ed(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(uT(n[a])||(n[a]=Nf(i[o+1])?[]:{}),n=n[a]):n[a]=r}),t};var iet=Object.prototype.hasOwnProperty;const aet=function(t,e){if(t===null||!Pm(t))return{};var r={};return Dm(e,function(n){iet.call(t,n)&&(r[n]=t[n])}),r},oet=function(t,e){return sce(t,function(r,n,i){return e.includes(i)||(r[i]=n),r},{})},set=function(t,e,r){var n,i,a,o,s=0;r||(r={});var l=function(){s=r.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&r.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=t.apply(i,a),n||(i=a=null)):!n&&r.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},uet=function(t){return Wo(t)?Array.prototype.slice.call(t):[]};var cE={};const cet=function(t){return t=t||"g",cE[t]?cE[t]+=1:cE[t]=1,t+cE[t]},fet=function(){},het=function(t){return t};function det(t){return Pd(t)?0:Wo(t)?t.length:Object.keys(t).length}var pet=function(){function t(){this.map={}}return t.prototype.has=function(e){return this.map[e]!==void 0},t.prototype.get=function(e,r){var n=this.map[e];return n===void 0?r:n},t.prototype.set=function(e,r){this.map[e]=r},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(e){delete this.map[e]},t.prototype.size=function(){return Object.keys(this.map).length},t}();const vet=pet;var get=/rgba?\(([\s.,0-9]+)\)/;function met(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}var fE;function yet(t){if(t[0]==="#"&&t.length===7)return t;fE||(fE=met()),fE.style.color=t;var e=document.defaultView.getComputedStyle(fE,"").getPropertyValue("color"),r=get.exec(e),n=r[1].split(/\s*,\s*/).map(function(i){return Number(i)});return e=Zue(n),e}var mce=pce(yet,function(t){return t},256);function A3(t,e,r,n){return t[n]+(e[n]-t[n])*r}function wet(t,e){var r=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=t.length-1,i=Math.floor(n*r),a=n*r-i,o=t[i],s=i===n?o:t[i+1];return Zue([A3(o,s,a,0),A3(o,s,a,1),A3(o,s,a,2)])}function bet(t){var e=typeof t=="string"?t.split("-"):t,r=e.map(function(n){return Que(n.indexOf("#")===-1?mce(n):n)});return function(n){return wet(r,n)}}var xet=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Eet=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_et=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Cet(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)}function ket(t){if(Cet(t)){var e,r=void 0;if(t[0]==="l"){var n=xet.exec(t),i=+n[1]+90;r=n[2],e="linear-gradient("+i+"deg, "}else if(t[0]==="r"){e="radial-gradient(";var n=Eet.exec(t);r=n[4]}var a=r.match(_et);return a.forEach(function(o,s){var l=o.split(":");e+=l[1]+" "+Number(l[0])*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return t}function Met(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return j8(n,r),Sc(t,n,e)}function Aet(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return G8(n,r),Sc(t,n,e)}function Tet(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return U8(n,r),Sc(t,n,e)}function Iet(t,e,r){return Sc(t,r,e)}function Oet(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":Met(r,r,[a[1],a[2]]);break;case"s":Tet(r,r,[a[1],a[2]]);break;case"r":Aet(r,r,a[1]);break;case"m":Iet(r,r,a[1]);break}}return r}function yce(t,e){return t[0]*e[1]-e[0]*t[1]}function Det(t,e,r){var n=boe(t,e),i=yce(t,e)>=0;return r?i?Math.PI*2-n:n:i?n:Math.PI*2-n}function Pet(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function Let(t,e){if(e==="off")return[].concat(t);var r=typeof e=="number"&&e>=1?Math.pow(10,e):1;return t.map(function(n){var i=n.slice(1).map(Number).map(function(a){return e?Math.round(a*r)/r:Math.round(a)});return[n[0]].concat(i)})}function Ret(t,e){return e===void 0&&(e="off"),Let(t,e).map(function(r){return r[0]+r.slice(1).join(" ")}).join("")}var wce={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Net(t,e,r){if(t[r].length>7){t[r].shift();for(var n=t[r],i=r;n.length;)e[r]="A",t.splice(i+=1,0,["C"].concat(n.splice(0,6)));t.splice(r,1)}}var iw={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function bce(t){return Array.isArray(t)&&t.every(function(e){var r=e[0].toLowerCase();return iw[r]===e.length-1&&"achlmqstvz".includes(r)})}function xce(t){return bce(t)&&t.every(function(e){var r=e[0];return r===r.toUpperCase()})}function Sce(t){return xce(t)&&t.every(function(e){var r=e[0];return"ACLMQZ".includes(r)})}function SV(t){for(var e=t.pathValue[t.segmentStart],r=e.toLowerCase(),n=t.data;n.length>=iw[r]&&(r==="m"&&n.length>2?(t.segments.push([e].concat(n.splice(0,2))),r="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(n.splice(0,iw[r]))),!!iw[r]););}function Fet(t){var e=t.index,r=t.pathValue,n=r.charCodeAt(e);if(n===48){t.param=0,t.index+=1;return}if(n===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'+r[e]+'", expecting 0 or 1 at index '+e}function Bet(t){return t>=48&&t<=57||t===43||t===45||t===46}function Ig(t){return t>=48&&t<=57}function $et(t){var e=t.max,r=t.pathValue,n=t.index,i=n,a=!1,o=!1,s=!1,l=!1,u;if(i>=e){t.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(u=r.charCodeAt(i),(u===43||u===45)&&(i+=1,u=r.charCodeAt(i)),!Ig(u)&&u!==46){t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" is not a number';return}if(u!==46){if(a=u===48,i+=1,u=r.charCodeAt(i),a&&i<e&&u&&Ig(u)){t.err="[path-util]: Invalid path value at index "+n+', "'+r[n]+'" illegal number';return}for(;i<e&&Ig(r.charCodeAt(i));)i+=1,o=!0;u=r.charCodeAt(i)}if(u===46){for(l=!0,i+=1;Ig(r.charCodeAt(i));)i+=1,s=!0;u=r.charCodeAt(i)}if(u===101||u===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" invalid float exponent';return}if(i+=1,u=r.charCodeAt(i),(u===43||u===45)&&(i+=1),i<e&&Ig(r.charCodeAt(i)))for(;i<e&&Ig(r.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" invalid integer exponent';return}}t.index=i,t.param=+t.pathValue.slice(n,i)}function zet(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e.includes(t)}function O_(t){for(var e=t.pathValue,r=t.max;t.index<r&&zet(e.charCodeAt(t.index));)t.index+=1}function jet(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Get(t){return(t|32)===97}function Uet(t){var e=t.max,r=t.pathValue,n=t.index,i=r.charCodeAt(n),a=iw[r[n].toLowerCase()];if(t.segmentStart=n,!jet(i)){t.err='[path-util]: Invalid path value "'+r[n]+'" is not a path command';return}if(t.index+=1,O_(t),t.data=[],!a){SV(t);return}for(;;){for(var o=a;o>0;o-=1){if(Get(i)&&(o===3||o===4)?Fet(t):$et(t),t.err.length)return;t.data.push(t.param),O_(t),t.index<e&&r.charCodeAt(t.index)===44&&(t.index+=1,O_(t))}if(t.index>=t.max||!Bet(r.charCodeAt(t.index)))break}SV(t)}var Wet=function(){function t(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function cT(t){if(bce(t))return[].concat(t);var e=new Wet(t);for(O_(e);e.index<e.max&&!e.err.length;)Uet(e);return e.err?e.err:e.segments}function Ece(t){if(xce(t))return[].concat(t);var e=cT(t),r=0,n=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],u=l.toUpperCase();if(l==="M")return r=s[0],n=s[1],i=r,a=n,["M",r,n];var c;if(l!==u)switch(u){case"A":c=[u,s[0],s[1],s[2],s[3],s[4],s[5]+r,s[6]+n];break;case"V":c=[u,s[0]+n];break;case"H":c=[u,s[0]+r];break;default:{var f=s.map(function(d,p){return d+(p%2?n:r)});c=[u].concat(f)}}else c=[u].concat(s);var h=c.length;switch(u){case"Z":r=i,n=a;break;case"H":r=c[1];break;case"V":n=c[1];break;default:r=c[h-2],n=c[h-1],u==="M"&&(i=r,a=n)}return c})}function Vet(t,e){var r=t[0],n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(r)||(e.qx=null,e.qy=null),r==="H")l=["L",t[1],i];else if(r==="V")l=["L",n,t[1]];else if(r==="S"){var u=n*2-a,c=i*2-o;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if(r==="T"){var f=n*2-e.qx,h=i*2-e.qy;e.qx=f,e.qy=h,l=["Q",f,h].concat(s)}else if(r==="Q"){var d=s[0],p=s[1];e.qx=d,e.qy=p}return l}function fT(t){if(Sce(t))return[].concat(t);for(var e=Ece(t),r=z({},wce),n=0;n<e.length;n+=1){e[n]=Vet(e[n],r);var i=e[n],a=i.length;r.x1=+i[a-2],r.y1=+i[a-1],r.x2=+i[a-4]||r.x1,r.y2=+i[a-3]||r.y1}return e}function Het(t){return Sce(t)&&t.every(function(e){var r=e[0];return"MC".includes(r)})}function hE(t,e,r){var n=t*Math.cos(r)-e*Math.sin(r),i=t*Math.sin(r)+e*Math.cos(r);return{x:n,y:i}}function nF(t,e,r,n,i,a,o,s,l,u){var c=t,f=e,h=r,d=n,p=s,v=l,g=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],w,b,x,S,E;if(u)b=u[0],x=u[1],S=u[2],E=u[3];else{w=hE(c,f,-m),c=w.x,f=w.y,w=hE(p,v,-m),p=w.x,v=w.y;var _=(c-p)/2,k=(f-v)/2,C=_*_/(h*h)+k*k/(d*d);C>1&&(C=Math.sqrt(C),h*=C,d*=C);var A=h*h,M=d*d,T=(a===o?-1:1)*Math.sqrt(Math.abs((A*M-A*k*k-M*_*_)/(A*k*k+M*_*_)));S=T*h*k/d+(c+p)/2,E=T*-d*_/h+(f+v)/2,b=Math.asin(((f-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),x=Math.asin(((v-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),b=c<S?Math.PI-b:b,x=p<S?Math.PI-x:x,b<0&&(b=Math.PI*2+b),x<0&&(x=Math.PI*2+x),o&&b>x&&(b-=Math.PI*2),!o&&x>b&&(x-=Math.PI*2)}var O=x-b;if(Math.abs(O)>g){var N=x,R=p,B=v;x=b+g*(o&&x>b?1:-1),p=S+h*Math.cos(x),v=E+d*Math.sin(x),y=nF(p,v,h,d,i,0,o,R,B,[x,N,S,E])}O=x-b;var F=Math.cos(b),D=Math.sin(b),L=Math.cos(x),G=Math.sin(x),Y=Math.tan(O/4),Z=4/3*h*Y,q=4/3*d*Y,pe=[c,f],Se=[c+Z*D,f-q*F],Ae=[p+Z*G,v-q*L],He=[p,v];if(Se[0]=2*pe[0]-Se[0],Se[1]=2*pe[1]-Se[1],u)return Se.concat(Ae,He,y);y=Se.concat(Ae,He,y);for(var ct=[],st=0,Mt=y.length;st<Mt;st+=1)ct[st]=st%2?hE(y[st-1],y[st],m).y:hE(y[st],y[st+1],m).x;return ct}function Xet(t,e,r,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*r,o*e+s*n,o*i+s*r,o*a+s*n,i,a]}function yh(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return[n+(a-n)*r,i+(o-i)*r]}var EV=function(t,e,r,n){var i=.5,a=yh([t,e],[r,n],i);return zo(zo([],a,!0),[r,n,r,n],!1)};function Yet(t,e){var r=t[0],n=t.slice(1).map(Number),i=n[0],a=n[1],o,s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=i,e.y=a,t;case"A":return o=[s,l].concat(n),["C"].concat(nF(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(n),["C"].concat(Xet(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(EV(s,l,i,a));case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:["C"].concat(EV(s,l,u,c))}return t}function _ce(t,e){if(e===void 0&&(e=!1),Het(t)){var r=[].concat(t);return e?[r,[]]:r}for(var n=fT(t),i=z({},wce),a=[],o="",s=n.length,l,u,c=[],f=0;f<s;f+=1){n[f]&&(o=n[f][0]),a[f]=o;var h=Yet(n[f],i);n[f]=h,Net(n,a,f),s=n.length,o==="Z"&&c.push(f),l=n[f],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return e?[n,c]:n}function qet(t){return cT(t)}function Ket(t){return t.map(function(e){return Array.isArray(e)?[].concat(e):e})}function Qet(t){var e=t.slice(1).map(function(r,n,i){return n?i[n-1].slice(-2).concat(r.slice(1)):t[0].slice(1).concat(r.slice(1))}).map(function(r){return r.map(function(n,i){return r[r.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(r){return["C"].concat(r.slice(2))}))}function ny(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function iN(t,e,r,n,i){var a=ny([t,e],[r,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:e};else if(i>=a)o={x:r,y:n};else{var s=yh([t,e],[r,n],i/a),l=s[0],u=s[1];o={x:l,y:u}}return{length:a,point:o,min:{x:Math.min(t,r),y:Math.min(e,n)},max:{x:Math.max(t,r),y:Math.max(e,n)}}}function _V(t,e){var r=t.x,n=t.y,i=e.x,a=e.y,o=r*i+n*a,s=Math.sqrt((Math.pow(r,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=r*a-n*i<0?-1:1,u=l*Math.acos(o/s);return u}function Zet(t,e,r,n,i,a,o,s,l,u){var c=Math.abs,f=Math.sin,h=Math.cos,d=Math.sqrt,p=Math.PI,v=c(r),g=c(n),m=(i%360+360)%360,y=m*(p/180);if(t===s&&e===l)return{x:t,y:e};if(v===0||g===0)return iN(t,e,s,l,u).point;var w=(t-s)/2,b=(e-l)/2,x={x:h(y)*w+f(y)*b,y:-f(y)*w+h(y)*b},S=Math.pow(x.x,2)/Math.pow(v,2)+Math.pow(x.y,2)/Math.pow(g,2);S>1&&(v*=d(S),g*=d(S));var E=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2),_=Math.pow(v,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2),k=E/_;k=k<0?0:k;var C=(a!==o?1:-1)*d(k),A={x:C*(v*x.y/g),y:C*(-(g*x.x)/v)},M={x:h(y)*A.x-f(y)*A.y+(t+s)/2,y:f(y)*A.x+h(y)*A.y+(e+l)/2},T={x:(x.x-A.x)/v,y:(x.y-A.y)/g},O=_V({x:1,y:0},T),N={x:(-x.x-A.x)/v,y:(-x.y-A.y)/g},R=_V(T,N);!o&&R>0?R-=2*p:o&&R<0&&(R+=2*p),R%=2*p;var B=O+R*u,F=v*h(B),D=g*f(B),L={x:h(y)*F-f(y)*D+M.x,y:f(y)*F+h(y)*D+M.y};return L}function Jet(t,e,r,n,i,a,o,s,l,u,c){var f,h=c.bbox,d=h===void 0?!0:h,p=c.length,v=p===void 0?!0:p,g=c.sampleSize,m=g===void 0?30:g,y=typeof u=="number",w=t,b=e,x=0,S=[w,b,x],E=[w,b],_=0,k={x:0,y:0},C=[{x:w,y:b}];y&&u<=0&&(k={x:w,y:b});for(var A=0;A<=m;A+=1){if(_=A/m,f=Zet(t,e,r,n,i,a,o,s,l,_),w=f.x,b=f.y,d&&C.push({x:w,y:b}),v&&(x+=ny(E,[w,b])),E=[w,b],y&&x>=u&&u>S[2]){var M=(x-u)/(x-S[2]);k={x:E[0]*(1-M)+S[0]*M,y:E[1]*(1-M)+S[1]*M}}S=[w,b,x]}return y&&u>=x&&(k={x:s,y:l}),{length:x,point:k,min:{x:Math.min.apply(null,C.map(function(T){return T.x})),y:Math.min.apply(null,C.map(function(T){return T.y}))},max:{x:Math.max.apply(null,C.map(function(T){return T.x})),y:Math.max.apply(null,C.map(function(T){return T.y}))}}}function ett(t,e,r,n,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,3)*t+3*Math.pow(u,2)*l*r+3*u*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*a+Math.pow(l,3)*s}}function Cce(t,e,r,n,i,a,o,s,l,u){var c,f=u.bbox,h=f===void 0?!0:f,d=u.length,p=d===void 0?!0:d,v=u.sampleSize,g=v===void 0?10:v,m=typeof l=="number",y=t,w=e,b=0,x=[y,w,b],S=[y,w],E=0,_={x:0,y:0},k=[{x:y,y:w}];m&&l<=0&&(_={x:y,y:w});for(var C=0;C<=g;C+=1){if(E=C/g,c=ett(t,e,r,n,i,a,o,s,E),y=c.x,w=c.y,h&&k.push({x:y,y:w}),p&&(b+=ny(S,[y,w])),S=[y,w],m&&b>=l&&l>x[2]){var A=(b-l)/(b-x[2]);_={x:S[0]*(1-A)+x[0]*A,y:S[1]*(1-A)+x[1]*A}}x=[y,w,b]}return m&&l>=b&&(_={x:o,y:s}),{length:b,point:_,min:{x:Math.min.apply(null,k.map(function(M){return M.x})),y:Math.min.apply(null,k.map(function(M){return M.y}))},max:{x:Math.max.apply(null,k.map(function(M){return M.x})),y:Math.max.apply(null,k.map(function(M){return M.y}))}}}function ttt(t,e,r,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*r+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*n+Math.pow(o,2)*a}}function rtt(t,e,r,n,i,a,o,s){var l,u=s.bbox,c=u===void 0?!0:u,f=s.length,h=f===void 0?!0:f,d=s.sampleSize,p=d===void 0?10:d,v=typeof o=="number",g=t,m=e,y=0,w=[g,m,y],b=[g,m],x=0,S={x:0,y:0},E=[{x:g,y:m}];v&&o<=0&&(S={x:g,y:m});for(var _=0;_<=p;_+=1){if(x=_/p,l=ttt(t,e,r,n,i,a,x),g=l.x,m=l.y,c&&E.push({x:g,y:m}),h&&(y+=ny(b,[g,m])),b=[g,m],v&&y>=o&&o>w[2]){var k=(y-o)/(y-w[2]);S={x:b[0]*(1-k)+w[0]*k,y:b[1]*(1-k)+w[1]*k}}w=[g,m,y]}return v&&o>=y&&(S={x:i,y:a}),{length:y,point:S,min:{x:Math.min.apply(null,E.map(function(C){return C.x})),y:Math.min.apply(null,E.map(function(C){return C.y}))},max:{x:Math.max.apply(null,E.map(function(C){return C.x})),y:Math.max.apply(null,E.map(function(C){return C.y}))}}}function hT(t,e,r){for(var n,i,a,o,s,l,u=fT(t),c=typeof e=="number",f,h=[],d,p=0,v=0,g=0,m=0,y,w=[],b=[],x=0,S={x:0,y:0},E=S,_=S,k=S,C=0,A=0,M=u.length;A<M;A+=1)y=u[A],d=y[0],f=d==="M",h=f?h:[p,v].concat(y.slice(1)),f?(g=y[1],m=y[2],S={x:g,y:m},E=S,x=0,c&&e<.001&&(k=S)):d==="L"?(n=iN(h[0],h[1],h[2],h[3],(e||0)-C),x=n.length,S=n.min,E=n.max,_=n.point):d==="A"?(i=Jet(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-C,r||{}),x=i.length,S=i.min,E=i.max,_=i.point):d==="C"?(a=Cce(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-C,r||{}),x=a.length,S=a.min,E=a.max,_=a.point):d==="Q"?(o=rtt(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-C,r||{}),x=o.length,S=o.min,E=o.max,_=o.point):d==="Z"&&(h=[p,v,g,m],s=iN(h[0],h[1],h[2],h[3],(e||0)-C),x=s.length,S=s.min,E=s.max,_=s.point),c&&C<e&&C+x>=e&&(k=_),b.push(E),w.push(S),C+=x,l=d!=="Z"?y.slice(-2):[g,m],p=l[0],v=l[1];return c&&e>=C&&(k={x:p,y:v}),{length:C,point:k,min:{x:Math.min.apply(null,w.map(function(T){return T.x})),y:Math.min.apply(null,w.map(function(T){return T.y}))},max:{x:Math.max.apply(null,b.map(function(T){return T.x})),y:Math.max.apply(null,b.map(function(T){return T.y}))}}}function ntt(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=hT(t,void 0,z(z({},e),{length:!1})),n=r.min,i=n.x,a=n.y,o=r.max,s=o.x,l=o.y,u=s-i,c=l-a;return{width:u,height:c,x:i,y:a,x2:s,y2:l,cx:i+u/2,cy:a+c/2,cz:Math.max(u,c)+Math.min(u,c)/2}}function aw(t,e){return hT(t,void 0,z(z({},e),{bbox:!1,length:!0})).length}function itt(t,e){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=hT(t,void 0,z(z({},e),{bbox:!0,length:!0})),n=r.length,i=r.min,a=i.x,o=i.y,s=r.max,l=s.x,u=s.y,c=l-a,f=u-o;return{length:n,width:c,height:f,x:a,y:o,x2:l,y2:u,cx:a+c/2,cy:o+f/2,cz:Math.max(c,f)+Math.min(c,f)/2}}function att(t){var e=t.length,r=e-1;return t.map(function(n,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=r),t[s])})})}function ott(t,e){var r=t.length-1,n=[],i=0,a=0,o=att(t);return o.forEach(function(s,l){t.slice(1).forEach(function(u,c){a+=ny(t[(l+c)%r].slice(-2),e[c%r].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function stt(t,e,r,n,i,a,o,s){return 3*((s-e)*(r+i)-(o-t)*(n+a)+n*(t-i)-r*(e-a)+s*(i+t/3)-o*(a+e/3))/20}function kce(t){var e=0,r=0,n=0;return _ce(t).map(function(i){var a;switch(i[0]){case"M":return e=i[1],r=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],u=o[2],c=o[3],f=o[4],h=o[5];return n=stt(e,r,s,l,u,c,f,h),a=i.slice(-2),e=a[0],r=a[1],n}}).reduce(function(i,a){return i+a},0)}function ltt(t){return kce(t)>=0}function D_(t,e,r){return hT(t,e,z(z({},r),{bbox:!1,length:!0})).point}function utt(t,e){var r=cT(t);if(typeof r=="string")throw TypeError(r);var n=r.slice(),i=aw(n),a=n.length-1,o=0,s=0,l=r[0],u=l.slice(-2),c=u[0],f=u[1],h={x:c,y:f};if(a<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:h,lengthAtSegment:o};if(e>=i)return n=r.slice(0,-1),o=aw(n),s=i-o,{segment:r[a],index:a,length:s,lengthAtSegment:o};for(var d=[];a>0;)l=n[a],n=n.slice(0,-1),o=aw(n),s=i-o,i=o,d.push({segment:l,index:a,length:s,lengthAtSegment:o}),a-=1;return d.find(function(p){var v=p.lengthAtSegment;return v<=e})}function ctt(t,e){for(var r=cT(t),n=fT(r),i=aw(r),a=function(x){var S=x.x-e.x,E=x.y-e.y;return S*S+E*E},o=8,s,l=0,u,c=0,f=1/0,h=0;h<=i;h+=o)s=D_(n,h),l=a(s),l<f&&(u=s,c=h,f=l);o/=2;for(var d,p,v=0,g=0,m=0,y=0;o>.5;)v=c-o,d=D_(n,v),m=a(d),g=c+o,p=D_(n,g),y=a(p),v>=0&&m<f?(u=d,c=v,f=m):g<=i&&y<f?(u=p,c=g,f=y):o/=2;var w=utt(r,c),b=Math.sqrt(f);return{closest:u,distance:b,segment:w}}function ftt(t,e){var r=ctt(t,e).distance;return Math.abs(r)<.001}function htt(t,e){e===void 0&&(e=.5);var r=t.slice(0,2),n=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=yh(r,n,e),s=yh(n,i,e),l=yh(i,a,e),u=yh(o,s,e),c=yh(s,l,e),f=yh(u,c,e);return[["C"].concat(o,u,f),["C"].concat(c,l,a)]}function CV(t){return t.map(function(e,r,n){var i=r&&n[r-1].slice(-2).concat(e.slice(1)),a=r?Cce(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return r?o=a?htt(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function Mce(t,e,r){var n=CV(t),i=CV(e),a=n.length,o=i.length,s=n.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,u=n.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/s||0,c=i.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/l||0,f=r||Math.max(a,o),h=[u,c],d=[f-a,f-o],p=0,v=[n,i].map(function(g,m){return g.l===f?g.map(function(y){return y.s}):g.map(function(y,w){return p=w&&d[m]&&y.l>=h[m],d[m]-=p?1:0,p?y.ss:[y.s]}).flat()});return v[0].length===v[1].length?v:Mce(v[0],v[1],f)}var dtt=1e-6;function T3(t){return Math.abs(t)<dtt?0:t<0?-1:1}function ptt(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function aN(t,e,r){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(ptt(o,s,[e,r]))return!0;T3(o[1]-r)>0!=T3(s[1]-r)>0&&T3(e-(r-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}var kV=function(t,e,r){return t>=e&&t<=r};function vtt(t,e,r,n){var i=.001,a={x:r.x-t.x,y:r.y-t.y},o={x:e.x-t.x,y:e.y-t.y},s={x:n.x-r.x,y:n.y-r.y},l=o.x*s.y-o.y*s.x,u=l*l,c=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,h=null;if(u>i*c*f){var d=(a.x*s.y-a.y*s.x)/l,p=(a.x*o.y-a.y*o.x)/l;kV(d,0,1)&&kV(p,0,1)&&(h={x:t.x+d*o.x,y:t.y+d*o.y})}return h}function MV(t){for(var e=[],r=t.length,n=0;n<r-1;n++){var i=t[n],a=t[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=t[0],s=t[r-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function gtt(t,e){var r=!1;return t.forEach(function(n){if(vtt(n.from,n.to,e.from,e.to))return r=!0,!1}),r}function AV(t){var e=t.map(function(n){return n[0]}),r=t.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}}function mtt(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function ytt(t,e){if(t.length<2||e.length<2)return!1;var r=AV(t),n=AV(e);if(!mtt(r,n))return!1;var i=!1;if(e.forEach(function(l){if(aN(t,l[0],l[1]))return i=!0,!1}),i||(t.forEach(function(l){if(aN(e,l[0],l[1]))return i=!0,!1}),i))return!0;var a=MV(t),o=MV(e),s=!1;return o.forEach(function(l){if(gtt(a,l))return s=!0,!1}),s}function wtt(t){var e=document.createElement("div");e.innerHTML=t;var r=e.childNodes[0];return r&&e.contains(r)&&e.removeChild(r),r}function btt(t,e){if(t)return Object.keys(e).forEach(function(r){t.style[r]=e[r]}),t}const xtt=Object.freeze(Object.defineProperty({__proto__:null,Cache:vet,angleTo:Det,arcToCubic:nF,assign:L0,augment:FJe,clamp:TZe,clearAnimationFrame:RJe,clone:BJe,clonePath:Ket,contains:Wk,createDOM:wtt,debounce:$Je,deepMix:WJe,difference:jQe,direction:yce,distanceSquareRoot:ny,each:Dm,endsWith:mZe,equalizeSegments:Mce,every:wZe,extend:HJe,filter:Jue,find:HQe,findIndex:XQe,firstValue:qQe,fixedBase:OZe,flatten:QQe,flattenDeep:ZQe,forIn:Dm,get:ret,getDrawDirection:ltt,getPathArea:kce,getPathBBox:ntt,getPathBBoxTotalLength:itt,getPointAtLength:D_,getRange:eZe,getRotatedCurve:ott,getTotalLength:aw,getType:hce,getWrapBehavior:_Ze,gradient:bet,group:EZe,groupBy:uce,groupToMap:cce,has:xV,hasKey:xV,hasValue:nJe,head:pZe,identity:het,includes:Wk,indexOf:YJe,isArguments:gJe,isArray:xi,isArrayLike:Wo,isBoolean:yJe,isDate:bJe,isDecimal:PZe,isElement:PJe,isEmpty:KJe,isEqual:gce,isEqualWith:QJe,isError:SJe,isEven:RZe,isFinite:EJe,isFunction:Ds,isInteger:FZe,isMatch:tce,isNegative:$Ze,isNil:Pd,isNull:CJe,isNumber:Nf,isNumberEqual:jZe,isObject:uT,isObjectLike:Vk,isOdd:UZe,isPlainObject:Pm,isPointInPolygon:aN,isPointInStroke:ftt,isPolygonsIntersect:ytt,isPositive:VZe,isPrototype:dce,isRegExp:TJe,isString:Ed,isType:_c,isUndefined:OJe,keys:ece,last:vZe,lowerCase:aJe,lowerFirst:sJe,map:JJe,mapValues:tet,max:nce,maxBy:HZe,memoize:pce,min:ice,minBy:XZe,mix:L0,mod:qZe,modifyCSS:btt,noop:fet,normalizePath:fT,number2color:kZe,omit:oet,parseRadius:MZe,path2Absolute:Ece,path2Array:qet,path2Curve:_ce,path2String:Ret,pick:aet,pull:iZe,pullAt:oce,reduce:sce,remove:uZe,requestAnimationFrame:LJe,reverseCurve:Qet,rgb2arr:Que,set:net,size:det,some:xZe,sortBy:cZe,startsWith:gZe,substitute:lJe,throttle:set,toArray:uet,toCSSGradient:ket,toDegree:ZZe,toInteger:JZe,toRGB:mce,toRadian:rJe,toString:kb,transform:Oet,union:hZe,uniq:lce,uniqueId:cet,upperCase:cJe,upperFirst:hJe,values:fce,valuesOfKey:dZe,vertical:Pet,wrapBehavior:CZe},Symbol.toStringTag,{value:"Module"})),Ace=su(xtt);Object.defineProperty(rF,"__esModule",{value:!0});var Stt=Ace,Ett=function(t){for(var e={},r=t.nodes().filter(function(f){var h;return!(!((h=t.children(f))===null||h===void 0)&&h.length)}),n=r.map(function(f){return t.node(f).rank}),i=(0,Stt.max)(n),a=[],o=0;o<i+1;o++)a.push([]);var s=function(f){var h;if(!e.hasOwnProperty(f)){e[f]=!0;var d=t.node(f);isNaN(d.rank)||a[d.rank].push(f),(h=t.successors(f))===null||h===void 0||h.forEach(function(p){return s(p)})}},l=r.sort(function(f,h){return t.node(f).rank-t.node(h).rank}),u=l.filter(function(f){return t.node(f).fixorder!==void 0}),c=u.sort(function(f,h){return t.node(f).fixorder-t.node(h).fixorder});return c==null||c.forEach(function(f){isNaN(t.node(f).rank)||a[t.node(f).rank].push(f),e[f]=!0}),l==null||l.forEach(s),a};rF.default=Ett;var iF={};Object.defineProperty(iF,"__esModule",{value:!0});var _tt=Os,Ctt=function(t,e,r){for(var n=(0,_tt.zipObject)(r,r.map(function(c,f){return f})),i=e.map(function(c){var f,h=(f=t.outEdges(c))===null||f===void 0?void 0:f.map(function(d){return{pos:n[d.w]||0,weight:t.edge(d).weight}});return h==null?void 0:h.sort(function(d,p){return d.pos-p.pos})}),a=i.flat().filter(function(c){return c!==void 0}),o=1;o<r.length;)o<<=1;var s=2*o-1;o-=1;var l=Array(s).fill(0,0,s),u=0;return a==null||a.forEach(function(c){if(c){var f=c.pos+o;l[f]+=c.weight;for(var h=0;f>0;)f%2&&(h+=l[f+1]),f=f-1>>1,l[f]+=c.weight;u+=c.weight*h}}),u},ktt=function(t,e){for(var r=0,n=1;n<(e==null?void 0:e.length);n+=1)r+=Ctt(t,e[n-1],e[n]);return r};iF.default=ktt;var aF={};Object.defineProperty(aF,"__esModule",{value:!0});var Mtt=Rf,Att=function(t,e,r){var n=Ttt(t),i=new Mtt.Graph({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return t.node(a)});return t.nodes().forEach(function(a){var o,s=t.node(a),l=t.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,l||n),(o=t[r](a))===null||o===void 0||o.forEach(function(u){var c=u.v===a?u.w:u.v,f=i.edgeFromArgs(c,a),h=f!==void 0?f.weight:0;i.setEdge(c,a,{weight:t.edge(u).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i},Ttt=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e};aF.default=Att;var oF={};Object.defineProperty(oF,"__esModule",{value:!0});var Itt=function(t,e,r){var n={},i;r==null||r.forEach(function(a){for(var o=t.parent(a),s,l;o;){if(s=t.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=s}})};oF.default=Itt;var sF={},lF={};Object.defineProperty(lF,"__esModule",{value:!0});var Ott=function(t,e){return e.map(function(r){var n=t.inEdges(r);if(!(n!=null&&n.length))return{v:r};{var i={sum:0,weight:0};return n==null||n.forEach(function(a){var o=t.edge(a),s=t.node(a.v);i.sum+=o.weight*s.order,i.weight+=o.weight}),{v:r,barycenter:i.sum/i.weight,weight:i.weight}}})};lF.default=Ott;var uF={};Object.defineProperty(uF,"__esModule",{value:!0});var Dtt=function(t,e){var r,n,i,a={};t==null||t.forEach(function(s,l){a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};var u=a[s.v];s.barycenter!==void 0&&(u.barycenter=s.barycenter,u.weight=s.weight)}),(r=e.edges())===null||r===void 0||r.forEach(function(s){var l=a[s.v],u=a[s.w];l!==void 0&&u!==void 0&&(u.indegree++,l.out.push(a[s.w]))});var o=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,function(s){return!s.indegree});return Ptt(o)},Ptt=function(t){for(var e,r,n=[],i=function(u){return function(c){c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&Ltt(u,c)}},a=function(u){return function(c){c.in.push(u),--c.indegree===0&&t.push(c)}},o=function(){var u=t.pop();n.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(function(c){return i(u)(c)}),(r=u.out)===null||r===void 0||r.forEach(function(c){return a(u)(c)})};t!=null&&t.length;)o();var s=n.filter(function(u){return!u.merged}),l=["vs","i","barycenter","weight"];return s.map(function(u){var c={};return l==null||l.forEach(function(f){u[f]!==void 0&&(c[f]=u[f])}),c})},Ltt=function(t,e){var r,n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.vs=(r=e.vs)===null||r===void 0?void 0:r.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};uF.default=Dtt;var cF={};Object.defineProperty(cF,"__esModule",{value:!0});var Rtt=Os,Ntt=function(t,e,r,n){var i=(0,Rtt.partition)(t,function(h){var d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort(function(h,d){return-h.i- -d.i}),s=[],l=0,u=0,c=0;a==null||a.sort(Ftt(!!e,!!r)),c=TV(s,o,c),a==null||a.forEach(function(h){var d;c+=(d=h.vs)===null||d===void 0?void 0:d.length,s.push(h.vs),l+=h.barycenter*h.weight,u+=h.weight,c=TV(s,o,c)});var f={vs:s.flat()};return u&&(f.barycenter=l/u,f.weight=u),f},TV=function(t,e,r){for(var n=r,i;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),t==null||t.push(i.vs),n++;return n},Ftt=function(t,e){return function(r,n){if(r.fixorder!==void 0&&n.fixorder!==void 0)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return-1;if(r.barycenter>n.barycenter)return 1;if(e&&r.order!==void 0&&n.order!==void 0){if(r.order<n.order)return-1;if(r.order>n.order)return 1}return t?n.i-r.i:r.i-n.i}};cF.default=Ntt;var fF=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sF,"__esModule",{value:!0});var Btt=fF(lF),$tt=fF(uF),ztt=fF(cF),Tce=function(t,e,r,n,i,a){var o,s,l,u,c=t.children(e),f=t.node(e),h=f?f.borderLeft:void 0,d=f?f.borderRight:void 0,p={};h&&(c=c==null?void 0:c.filter(function(b){return b!==h&&b!==d}));var v=(0,Btt.default)(t,c||[]);v==null||v.forEach(function(b){var x;if(!((x=t.children(b.v))===null||x===void 0)&&x.length){var S=Tce(t,b.v,r,n,a);p[b.v]=S,S.hasOwnProperty("barycenter")&&Gtt(b,S)}});var g=(0,$tt.default)(v,r);jtt(g,p),(o=g.filter(function(b){return b.vs.length>0}))===null||o===void 0||o.forEach(function(b){var x=t.node(b.vs[0]);x&&(b.fixorder=x.fixorder,b.order=x.order)});var m=(0,ztt.default)(g,n,i,a);if(h&&(m.vs=[h,m.vs,d].flat(),!((s=t.predecessors(h))===null||s===void 0)&&s.length)){var y=t.node(((l=t.predecessors(h))===null||l===void 0?void 0:l[0])||""),w=t.node(((u=t.predecessors(d))===null||u===void 0?void 0:u[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+w.order)/(m.weight+2),m.weight+=2}return m},jtt=function(t,e){t==null||t.forEach(function(r){var n,i=(n=r.vs)===null||n===void 0?void 0:n.map(function(a){return e[a]?e[a].vs:a});r.vs=i.flat()})},Gtt=function(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};sF.default=Tce;var Mb=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tF,"__esModule",{value:!0});var IV=Mb(rF),OV=Mb(iF),Utt=Mb(aF),Wtt=Mb(oF),Vtt=Mb(sF),DV=Kn(),Htt=Rf,I3=Os,Xtt=function(t,e){for(var r=(0,I3.maxRank)(t),n=[],i=[],a=1;a<r+1;a++)n.push(a);for(var a=r-1;a>-1;a--)i.push(a);var o=PV(t,n,"inEdges"),s=PV(t,i,"outEdges"),l=(0,IV.default)(t);O3(t,l);for(var u=Number.POSITIVE_INFINITY,c,a=0,f=0;f<4;++a,++f){LV(a%2?o:s,a%4>=2,!1,e),l=(0,I3.buildLayerMatrix)(t);var h=(0,OV.default)(t,l);h<u&&(f=0,c=(0,DV.clone)(l),u=h)}l=(0,IV.default)(t),O3(t,l);for(var a=0,f=0;f<4;++a,++f){LV(a%2?o:s,a%4>=2,!0,e),l=(0,I3.buildLayerMatrix)(t);var h=(0,OV.default)(t,l);h<u&&(f=0,c=(0,DV.clone)(l),u=h)}O3(t,c)},PV=function(t,e,r){return e.map(function(n){return(0,Utt.default)(t,n,r)})},LV=function(t,e,r,n){var i=new Htt.Graph;t==null||t.forEach(function(a){for(var o,s=a.graph().root,l=(0,Vtt.default)(a,s,i,e,r,n),u=0;u<((o=l.vs)===null||o===void 0?void 0:o.length);u++){var c=a.node(l.vs[u]);c&&(c.order=u)}(0,Wtt.default)(a,i,l.vs)})},O3=function(t,e){e==null||e.forEach(function(r){r==null||r.forEach(function(n,i){t.node(n).order=i})})};tF.default=Xtt;var hF={},Ice={};(function(t){var e=Me&&Me.__extends||function(){var b=function(x,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(E[k]=_[k])},b(x,S)};return function(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(x,S);function E(){this.constructor=x}x.prototype=S===null?Object.create(S):(E.prototype=S.prototype,new E)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.width=t.sep=t.positionX=t.balance=t.alignCoordinates=t.findSmallestWidthAlignment=t.buildBlockGraph=t.horizontalCompaction=t.verticalAlignment=t.hasConflict=t.addConflict=t.findOtherInnerSegmentNode=t.findType2Conflicts=t.findType1Conflicts=void 0;var r=lT,n=Ace,i=Os,a=function(b){e(x,b);function x(){return b!==null&&b.apply(this,arguments)||this}return x}(r.Graph),o=function(b,x){var S={},E=function(_,k){var C=0,A=0,M=_.length,T=k==null?void 0:k[(k==null?void 0:k.length)-1];return k==null||k.forEach(function(O,N){var R,B=(0,t.findOtherInnerSegmentNode)(b,O),F=B?b.node(B).order:M;(B||O===T)&&((R=k.slice(A,N+1))===null||R===void 0||R.forEach(function(D){var L;(L=b.predecessors(D))===null||L===void 0||L.forEach(function(G){var Y,Z=b.node(G),q=Z.order;(q<C||F<q)&&!(Z.dummy&&(!((Y=b.node(D))===null||Y===void 0)&&Y.dummy))&&(0,t.addConflict)(S,G,D)})}),A=N+1,C=F)}),k};return x!=null&&x.length&&x.reduce(E),S};t.findType1Conflicts=o;var s=function(b,x){var S={};function E(A,M,T,O,N){for(var R,B,F,D=M;D<T;D++)F=A[D],!((R=b.node(F))===null||R===void 0)&&R.dummy&&((B=b.predecessors(F))===null||B===void 0||B.forEach(function(L){var G=b.node(L);G.dummy&&(G.order<O||G.order>N)&&(0,t.addConflict)(S,L,F)}))}function _(A){return JSON.stringify(A.slice(1))}function k(A,M){var T=_(A);M.get(T)||(E.apply(void 0,A),M.set(T,!0))}var C=function(A,M){var T=-1,O,N=0,R=new Map;return M==null||M.forEach(function(B,F){var D;if(((D=b.node(B))===null||D===void 0?void 0:D.dummy)==="border"){var L=b.predecessors(B)||[];L.length&&(O=b.node(L[0]).order,k([M,N,F,T,O],R),N=F,T=O)}k([M,N,M.length,O,A.length],R)}),M};return x!=null&&x.length&&x.reduce(C),S};t.findType2Conflicts=s;var l=function(b,x){var S,E;if(!((S=b.node(x))===null||S===void 0)&&S.dummy)return(E=b.predecessors(x))===null||E===void 0?void 0:E.find(function(_){return b.node(_).dummy})};t.findOtherInnerSegmentNode=l;var u=function(b,x,S){var E=x,_=S;if(E>_){var k=E;E=_,_=k}var C=b[E];C||(b[E]=C={}),C[_]=!0};t.addConflict=u;var c=function(b,x,S){var E=x,_=S;if(E>_){var k=x;E=_,_=k}return!!b[E]};t.hasConflict=c;var f=function(b,x,S,E){var _={},k={},C={};return x==null||x.forEach(function(A){A==null||A.forEach(function(M,T){_[M]=M,k[M]=M,C[M]=T})}),x==null||x.forEach(function(A){var M=-1;A==null||A.forEach(function(T){var O=E(T);if(O.length){O=O.sort(function(D,L){return C[D]-C[L]});for(var N=(O.length-1)/2,R=Math.floor(N),B=Math.ceil(N);R<=B;++R){var F=O[R];k[T]===T&&M<C[F]&&!(0,t.hasConflict)(S,T,F)&&(k[F]=T,k[T]=_[T]=_[F],M=C[F])}}})}),{root:_,align:k}};t.verticalAlignment=f;var h=function(b,x,S,E,_){var k,C={},A=(0,t.buildBlockGraph)(b,x,S,_),M=_?"borderLeft":"borderRight",T=function(R,B){for(var F=A.nodes(),D=F.pop(),L={};D;)L[D]?R(D):(L[D]=!0,F.push(D),F=F.concat(B(D))),D=F.pop()},O=function(R){C[R]=(A.inEdges(R)||[]).reduce(function(B,F){return Math.max(B,(C[F.v]||0)+A.edge(F))},0)},N=function(R){var B=(A.outEdges(R)||[]).reduce(function(D,L){return Math.min(D,(C[L.w]||0)-A.edge(L))},Number.POSITIVE_INFINITY),F=b.node(R);B!==Number.POSITIVE_INFINITY&&F.borderType!==M&&(C[R]=Math.max(C[R],B))};return T(O,A.predecessors.bind(A)),T(N,A.successors.bind(A)),(k=Object.values(E))===null||k===void 0||k.forEach(function(R){C[R]=C[S[R]]}),C};t.horizontalCompaction=h;var d=function(b,x,S,E){var _=new a,k=b.graph(),C=(0,t.sep)(k.nodesep,k.edgesep,E);return x==null||x.forEach(function(A){var M;A==null||A.forEach(function(T){var O=S[T];if(_.setNode(O),M){var N=S[M],R=_.edgeFromArgs(N,O);_.setEdge(N,O,Math.max(C(b,T,M),R||0))}M=T})}),_};t.buildBlockGraph=d;var p=function(b,x){return(0,i.minBy)(Object.values(x),function(S){var E,_=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;return(E=Object.keys(S))===null||E===void 0||E.forEach(function(C){var A=S[C],M=(0,t.width)(b,C)/2;_=Math.max(A+M,_),k=Math.min(A-M,k)}),_-k})};t.findSmallestWidthAlignment=p;function v(b,x){var S=Object.values(x),E=(0,n.min)(S),_=(0,n.max)(S);["u","d"].forEach(function(k){["l","r"].forEach(function(C){var A=k+C,M=b[A],T;if(M!==x){var O=Object.values(M);T=C==="l"?E-(0,n.min)(O):_-(0,n.max)(O),T&&(b[A]={},Object.keys(M).forEach(function(N){b[A][N]=M[N]+T}))}})})}t.alignCoordinates=v;var g=function(b,x){var S={};return Object.keys(b.ul).forEach(function(E){if(x)S[E]=b[x.toLowerCase()][E];else{var _=Object.values(b).map(function(k){return k[E]});S[E]=(_[0]+_[1])/2}}),S};t.balance=g;var m=function(b){var x=(0,i.buildLayerMatrix)(b),S=Object.assign((0,t.findType1Conflicts)(b,x),(0,t.findType2Conflicts)(b,x)),E={},_;["u","d"].forEach(function(C){_=C==="u"?x:Object.values(x).reverse(),["l","r"].forEach(function(A){A==="r"&&(_=_.map(function(N){return Object.values(N).reverse()}));var M=(C==="u"?b.predecessors:b.successors).bind(b),T=(0,t.verticalAlignment)(b,_,S,M),O=(0,t.horizontalCompaction)(b,_,T.root,T.align,A==="r");A==="r"&&Object.keys(O).forEach(function(N){O[N]=-O[N]}),E[C+A]=O})});var k=(0,t.findSmallestWidthAlignment)(b,E);return v(E,k),(0,t.balance)(E,b.graph().align)};t.positionX=m;var y=function(b,x,S){return function(E,_,k){var C=E.node(_),A=E.node(k),M=0,T;if(M+=C.width/2,C.hasOwnProperty("labelpos"))switch((C.labelpos||"").toLowerCase()){case"l":T=-C.width/2;break;case"r":T=C.width/2;break}if(T&&(M+=S?T:-T),T=0,M+=(C.dummy?x:b)/2,M+=(A.dummy?x:b)/2,M+=A.width/2,A.labelpos)switch((A.labelpos||"").toLowerCase()){case"l":T=A.width/2;break;case"r":T=-A.width/2;break}return T&&(M+=S?T:-T),T=0,M}};t.sep=y;var w=function(b,x){return b.node(x).width||0};t.width=w})(Ice);var RV=Me&&Me.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(hF,"__esModule",{value:!0});var dF=Os,sp=Ice,Ytt=function(t){var e=(0,dF.buildLayerMatrix)(t),r=t.graph().ranksep,n=0;e==null||e.forEach(function(i){var a=i.map(function(s){return t.node(s).height}),o=Math.max.apply(Math,RV(RV([],a,!1),[0],!1));i==null||i.forEach(function(s){t.node(s).y=n+o/2}),n+=o+r})},qtt=function(t){var e=(0,dF.buildLayerMatrix)(t),r=Object.assign((0,sp.findType1Conflicts)(t,e),(0,sp.findType2Conflicts)(t,e)),n={},i=[];["u","d"].forEach(function(o){i=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(function(f){return Object.values(f).reverse()}));var l=(o==="u"?t.predecessors:t.successors).bind(t),u=(0,sp.verticalAlignment)(t,i,r,l),c=(0,sp.horizontalCompaction)(t,i,u.root,u.align,s==="r");s==="r"&&Object.keys(c).forEach(function(f){return c[f]=-c[f]}),n[o+s]=c})});var a=(0,sp.findSmallestWidthAlignment)(t,n);return a&&(0,sp.alignCoordinates)(n,a),(0,sp.balance)(n,t.graph().align)},Ktt=function(t){var e,r=(0,dF.asNonCompoundGraph)(t);Ytt(r);var n=qtt(r);(e=Object.keys(n))===null||e===void 0||e.forEach(function(i){r.node(i).x=n[i]})};hF.default=Ktt;var pF={};Object.defineProperty(pF,"__esModule",{value:!0});var Qtt=function(t,e){for(var r=t.nodes().filter(function(s){var l;return!(!((l=t.children(s))===null||l===void 0)&&l.length)}),n=r.map(function(s){return t.node(s).rank}),i=Math.max.apply(Math,n),a=[],o=0;o<i+1;o++)a[o]=[];e==null||e.forEach(function(s){var l=t.node(s);!l||l!=null&&l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(s))})};pF.default=Qtt;var Hk=Me&&Me.__assign||function(){return Hk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hk.apply(this,arguments)},Cc=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U6,"__esModule",{value:!0});var NV=Cc(W6),FV=Cc(q6),Ztt=Cc(K6),hc=Os,Jtt=Cc(Q6),BV=Cc(Z6),ert=Cc(J6),$V=Cc(eF),trt=Cc(tF),rrt=Cc(hF),nrt=Cc(pF),irt=Rf,art=function(t,e){var r=e&&e.debugTiming?hc.time:hc.notime;r("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&r("  inheritOrder",function(){srt(t,e.prevGraph)});var n=r("  buildLayoutGraph",function(){return vrt(t)});e&&e.edgeLabelSpace===!1||r("  makeSpaceForEdgeLabels",function(){grt(n)});try{r("  runLayout",function(){ort(n,r,e)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}throw i}r("  updateInputGraph",function(){lrt(t,n)})})},ort=function(t,e,r){e("    removeSelfEdges",function(){Crt(t)}),e("    acyclic",function(){NV.default.run(t)}),e("    nestingGraph.run",function(){BV.default.run(t)}),e("    rank",function(){(0,Ztt.default)((0,hc.asNonCompoundGraph)(t))}),e("    injectEdgeLabelProxies",function(){mrt(t)}),e("    removeEmptyRanks",function(){(0,hc.removeEmptyRanks)(t)}),e("    nestingGraph.cleanup",function(){BV.default.cleanup(t)}),e("    normalizeRanks",function(){(0,hc.normalizeRanks)(t)}),e("    assignRankMinMax",function(){yrt(t)}),e("    removeEdgeLabelProxies",function(){wrt(t)}),e("    normalize.run",function(){FV.default.run(t)}),e("    parentDummyChains",function(){(0,Jtt.default)(t)}),e("    addBorderSegments",function(){(0,ert.default)(t)}),r&&r.keepNodeOrder&&e("    initDataOrder",function(){(0,nrt.default)(t,r.nodeOrder)}),e("    order",function(){(0,trt.default)(t,r==null?void 0:r.keepNodeOrder)}),e("    insertSelfEdges",function(){krt(t)}),e("    adjustCoordinateSystem",function(){$V.default.adjust(t)}),e("    position",function(){(0,rrt.default)(t)}),e("    positionSelfEdges",function(){Mrt(t)}),e("    removeBorderNodes",function(){_rt(t)}),e("    normalize.undo",function(){FV.default.undo(t)}),e("    fixupEdgeLabelCoords",function(){Srt(t)}),e("    undoCoordinateSystem",function(){$V.default.undo(t)}),e("    translateGraph",function(){brt(t)}),e("    assignNodeIntersects",function(){xrt(t)}),e("    reversePoints",function(){Ert(t)}),e("    acyclic.undo",function(){NV.default.undo(t)})},srt=function(t,e){t.nodes().forEach(function(r){var n=t.node(r),i=e.node(r);i!==void 0?(n.fixorder=i._order,delete i._order):delete n.fixorder})},lrt=function(t,e){t.nodes().forEach(function(r){var n,i=t.node(r);if(i){var a=e.node(r);i.x=a.x,i.y=a.y,i._order=a.order,i._rank=a.rank,!((n=e.children(r))===null||n===void 0)&&n.length&&(i.width=a.width,i.height=a.height)}}),t.edges().forEach(function(r){var n=t.edge(r),i=e.edge(r);n.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height},urt=["nodesep","edgesep","ranksep","marginx","marginy"],crt={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},D3=["acyclicer","ranker","rankdir","align"],frt=["width","height","layer","fixorder"],hrt={width:0,height:0},drt=["minlen","weight","width","height","labeloffset"],prt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P3=["labelpos"],vrt=function(t){var e=new irt.Graph({multigraph:!0,compound:!0}),r=R3(t.graph()),n={};return D3==null||D3.forEach(function(i){r[i]!==void 0&&(n[i]=r[i])}),e.setGraph(Object.assign({},crt,L3(r,urt),n)),t.nodes().forEach(function(i){var a=R3(t.node(i)),o=Hk(Hk({},hrt),a),s=L3(o,frt);e.setNode(i,s),e.setParent(i,t.parent(i))}),t.edges().forEach(function(i){var a=R3(t.edge(i)),o={};P3==null||P3.forEach(function(s){a[s]!==void 0&&(o[s]=a[s])}),e.setEdgeObj(i,Object.assign({},prt,L3(a,drt),o))}),e},grt=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach(function(r){var n=t.node(r);isNaN(n.layer)||n.layer||(n.layer=0)}),t.edges().forEach(function(r){var n,i=t.edge(r);i.minlen*=2,((n=i.labelpos)===null||n===void 0?void 0:n.toLowerCase())!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},mrt=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i=t.node(e.w),a={e,rank:(i.rank-n.rank)/2+n.rank};(0,hc.addDummyNode)(t,"edge-proxy",a,"_ep")}})},yrt=function(t){var e=0;t.nodes().forEach(function(r){var n,i,a=t.node(r);a.borderTop&&(a.minRank=(n=t.node(a.borderTop))===null||n===void 0?void 0:n.rank,a.maxRank=(i=t.node(a.borderBottom))===null||i===void 0?void 0:i.rank,e=Math.max(e,a.maxRank||-1/0))}),t.graph().maxRank=e},wrt=function(t){t.nodes().forEach(function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})},brt=function(t){var e,r=0,n,i=0,a=t.graph(),o=a.marginx||0,s=a.marginy||0,l=function(u){if(u){var c=u.x,f=u.y,h=u.width,d=u.height;!isNaN(c)&&!isNaN(h)&&(e===void 0&&(e=c-h/2),e=Math.min(e,c-h/2),r=Math.max(r,c+h/2)),!isNaN(f)&&!isNaN(d)&&(n===void 0&&(n=f-d/2),n=Math.min(n,f-d/2),i=Math.max(i,f+d/2))}};t.nodes().forEach(function(u){l(t.node(u))}),t.edges().forEach(function(u){var c=t.edge(u);c!=null&&c.hasOwnProperty("x")&&l(c)}),e-=o,n-=s,t.nodes().forEach(function(u){var c=t.node(u);c&&(c.x-=e,c.y-=n)}),t.edges().forEach(function(u){var c,f=t.edge(u);(c=f.points)===null||c===void 0||c.forEach(function(h){h.x-=e,h.y-=n}),f.hasOwnProperty("x")&&(f.x-=e),f.hasOwnProperty("y")&&(f.y-=n)}),a.width=r-e+o,a.height=i-n+s},xrt=function(t){t.edges().forEach(function(e){var r=t.edge(e),n=t.node(e.v),i=t.node(e.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=i,o=n),r.points.unshift((0,hc.intersectRect)(n,a)),r.points.push((0,hc.intersectRect)(i,o))})},Srt=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r!=null&&r.hasOwnProperty("x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})},Ert=function(t){t.edges().forEach(function(e){var r,n=t.edge(e);n.reversed&&((r=n.points)===null||r===void 0||r.reverse())})},_rt=function(t){t.nodes().forEach(function(e){var r,n,i;if(!((r=t.children(e))===null||r===void 0)&&r.length){var a=t.node(e),o=t.node(a.borderTop),s=t.node(a.borderBottom),l=t.node(a.borderLeft[((n=a.borderLeft)===null||n===void 0?void 0:n.length)-1]),u=t.node(a.borderRight[((i=a.borderRight)===null||i===void 0?void 0:i.length)-1]);a.width=Math.abs((u==null?void 0:u.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((s==null?void 0:s.y)-(o==null?void 0:o.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((o==null?void 0:o.y)||0)+a.height/2}}),t.nodes().forEach(function(e){var r;((r=t.node(e))===null||r===void 0?void 0:r.dummy)==="border"&&t.removeNode(e)})},Crt=function(t){t.edges().forEach(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdgeObj(e)}})},krt=function(t){var e=(0,hc.buildLayerMatrix)(t);e==null||e.forEach(function(r){var n=0;r==null||r.forEach(function(i,a){var o,s=t.node(i);s.order=a+n,(o=s.selfEdges)===null||o===void 0||o.forEach(function(l){(0,hc.addDummyNode)(t,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})},Mrt=function(t){t.nodes().forEach(function(e){var r=t.node(e);if(r.dummy==="selfedge"){var n=t.node(r.e.v),i=n.x+n.width/2,a=n.y,o=r.x-i,s=n.height/2;t.setEdgeObj(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],r.label.x=r.x,r.label.y=r.y}})},L3=function(t,e){var r={};return e==null||e.forEach(function(n){t[n]!==void 0&&(r[n]=+t[n])}),r},R3=function(t){t===void 0&&(t={});var e={};return Object.keys(t).forEach(function(r){e[r.toLowerCase()]=t[r]}),e};U6.default=art;var Art=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(G6,"__esModule",{value:!0});var Trt=Art(U6),zV=Os;G6.default={layout:Trt.default,util:{time:zV.time,notime:zV.notime}};var Irt=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ort=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ry,"__esModule",{value:!0});ry.DagreLayout=void 0;var Drt=Ort(G6),Zo=Kn(),Prt=si,jV=Rf,Lrt=function(t){Irt(e,t);function e(r){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(i){var a=n,o=a.nodes,s=o.find(function(u){return u.id===i});if(s){var l=s.layout!==!1;return l}return!0},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var r=this,n,i,a,o,s=this,l=s.nodes,u=s.nodeSize,c=s.rankdir,f=s.combos,h=s.begin,d=s.radial,p=s.comboEdges,v=p===void 0?[]:p,g=s.vedges,m=g===void 0?[]:g;if(l){var y=s.edges||[],w=new jV.Graph({multigraph:!0,compound:!0});s.nodeMap={};var b={};l.forEach(function(oe){s.nodeMap[oe.id]=oe,oe.comboId&&(b[oe.comboId]=b[oe.comboId]||[],b[oe.comboId].push(oe.id))});var x=[],S={};!((n=s.nodeOrder)===null||n===void 0)&&n.length?(s.nodeOrder.forEach(function(oe){S[oe]=!0,x.push(s.nodeMap[oe])}),l.forEach(function(oe){S[oe.id]||x.push(oe)})):x=l;var E;u?(0,Zo.isArray)(u)?E=function(){return u}:E=function(){return[u,u]}:E=function(oe){return oe.size?(0,Zo.isArray)(oe.size)?oe.size:(0,Zo.isObject)(oe.size)?[oe.size.width||40,oe.size.height||40]:[oe.size,oe.size]:[40,40]};var _=(0,Zo.getFunc)(s.ranksep,50,s.ranksepFunc),k=(0,Zo.getFunc)(s.nodesep,50,s.nodesepFunc),C=k,A=_;(c==="LR"||c==="RL")&&(C=_,A=k),w.setDefaultEdgeLabel(function(){return{}}),w.setGraph(s);var M={};this.sortByCombo&&f&&f.forEach(function(oe){if(M[oe.id]=oe,oe.collapsed){var P=E(oe),_e=A(oe),Pe=C(oe),ye=P[0]+2*Pe,Fe=P[1]+2*_e;w.setNode(oe.id,{width:ye,height:Fe})}oe.parentId&&(M[oe.parentId]||w.setNode(oe.parentId,{}),w.setParent(oe.id,oe.parentId))}),x.filter(function(oe){return oe.layout!==!1}).forEach(function(oe){var P=E(oe),_e=A(oe),Pe=C(oe),ye=P[0]+2*Pe,Fe=P[1]+2*_e,Be=oe.layer;(0,Zo.isNumber)(Be)?w.setNode(oe.id,{width:ye,height:Fe,layer:Be}):w.setNode(oe.id,{width:ye,height:Fe}),r.sortByCombo&&oe.comboId&&(M[oe.comboId]||(M[oe.comboId]={id:oe.comboId},w.setNode(oe.comboId,{})),w.setParent(oe.id,oe.comboId))}),y.forEach(function(oe){var P=(0,Zo.getEdgeTerminal)(oe,"source"),_e=(0,Zo.getEdgeTerminal)(oe,"target");r.layoutNode(P)&&r.layoutNode(_e)&&w.setEdge(P,_e,{weight:oe.weight||1})}),(i=v==null?void 0:v.concat(m||[]))===null||i===void 0||i.forEach(function(oe){var P,_e,Pe=oe.source,ye=oe.target,Fe=!((P=M[Pe])===null||P===void 0)&&P.collapsed?[Pe]:b[Pe]||[Pe],Be=!((_e=M[ye])===null||_e===void 0)&&_e.collapsed?[ye]:b[ye]||[ye];Fe.forEach(function(Xe){Be.forEach(function(et){w.setEdge(Xe,et,{weight:oe.weight||1})})})});var T=void 0;!((a=s.preset)===null||a===void 0)&&a.nodes&&(T=new jV.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach(function(oe){T==null||T.setNode(oe.id,oe)})),Drt.default.layout(w,{prevGraph:T,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});var O=[0,0];if(h){var N=1/0,R=1/0;w.nodes().forEach(function(oe){var P=w.node(oe);N>P.x&&(N=P.x),R>P.y&&(R=P.y)}),w.edges().forEach(function(oe){var P,_e=w.edge(oe);(P=_e.points)===null||P===void 0||P.forEach(function(Pe){N>Pe.x&&(N=Pe.x),R>Pe.y&&(R=Pe.y)})}),O[0]=h[0]-N,O[1]=h[1]-R}var B=c==="LR"||c==="RL";if(d){var F=this,D=F.focusNode,L=F.ranksep,G=F.getRadialPos,Y=(0,Zo.isString)(D)?D:D==null?void 0:D.id,Z=Y?(o=w.node(Y))===null||o===void 0?void 0:o._rank:0,q=[],pe=B?"y":"x",Se=B?"height":"width",Ae=1/0,He=-1/0;w.nodes().forEach(function(oe){var P=w.node(oe);if(s.nodeMap[oe]){var _e=k(s.nodeMap[oe]);if(Z===0)q[P._rank]||(q[P._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),q[P._rank].nodes.push(oe),q[P._rank].totalWidth+=_e*2+P[Se],q[P._rank].maxSize<Math.max(P.width,P.height)&&(q[P._rank].maxSize=Math.max(P.width,P.height));else{var Pe=P._rank-Z;if(Pe===0)q[Pe]||(q[Pe]={nodes:[],totalWidth:0,maxSize:-1/0}),q[Pe].nodes.push(oe),q[Pe].totalWidth+=_e*2+P[Se],q[Pe].maxSize<Math.max(P.width,P.height)&&(q[Pe].maxSize=Math.max(P.width,P.height));else{var ye=Math.abs(Pe);q[ye]||(q[ye]={left:[],right:[],totalWidth:0,maxSize:-1/0}),q[ye].totalWidth+=_e*2+P[Se],q[ye].maxSize<Math.max(P.width,P.height)&&(q[ye].maxSize=Math.max(P.width,P.height)),Pe<0?q[ye].left.push(oe):q[ye].right.push(oe)}}var Fe=P[pe]-P[Se]/2-_e,Be=P[pe]+P[Se]/2+_e;Fe<Ae&&(Ae=Fe),Be>He&&(He=Be)}});var ct=L||50,st={},Mt=(He-Ae)/.9,yt=[(Ae+He-Mt)*.5,(Ae+He+Mt)*.5],ar=function(oe,P,_e,Pe){_e===void 0&&(_e=-1/0),Pe===void 0&&(Pe=[0,1]);var ye=_e;return oe.forEach(function(Fe){var Be=w.node(Fe);st[Fe]=P;var Xe=G(Be[pe],yt,Mt,P,Pe),et=Xe.x,Ot=Xe.y;if(s.nodeMap[Fe]){s.nodeMap[Fe].x=et+O[0],s.nodeMap[Fe].y=Ot+O[1],s.nodeMap[Fe]._order=Be._order;var nr=_(s.nodeMap[Fe]);ye<nr&&(ye=nr)}}),ye},Jt=!0,er=0;q.forEach(function(oe){var P,_e,Pe,ye,Fe,Be,Xe;if(!(!(!((P=oe==null?void 0:oe.nodes)===null||P===void 0)&&P.length)&&!(!((_e=oe==null?void 0:oe.left)===null||_e===void 0)&&_e.length)&&!(!((Pe=oe==null?void 0:oe.right)===null||Pe===void 0)&&Pe.length))){if(Jt&&oe.nodes.length===1){var et=oe.nodes[0];if(!s.nodeMap[et])return;s.nodeMap[et].x=O[0],s.nodeMap[et].y=O[1],st[oe.nodes[0]]=0,ct=_(s.nodeMap[et]),Jt=!1;return}ct=Math.max(ct,oe.totalWidth/(2*Math.PI));var Ot=-1/0;if(Z===0||!((ye=oe.nodes)===null||ye===void 0)&&ye.length)Ot=ar(oe.nodes,ct,Ot,[0,1]);else{var nr=((Fe=oe.left)===null||Fe===void 0?void 0:Fe.length)/(((Be=oe.left)===null||Be===void 0?void 0:Be.length)+((Xe=oe.right)===null||Xe===void 0?void 0:Xe.length));Ot=ar(oe.left,ct,Ot,[0,nr]),Ot=ar(oe.right,ct,Ot,[nr+.05,1])}ct+=Ot,Jt=!1,er-oe.maxSize}}),w.edges().forEach(function(oe){var P,_e,Pe,ye=w.edge(oe),Fe=y.findIndex(function(rr){var Qt=(0,Zo.getEdgeTerminal)(rr,"source"),hr=(0,Zo.getEdgeTerminal)(rr,"target");return Qt===oe.v&&hr===oe.w});if(!(Fe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[Fe].type!=="loop"){var Be=pe==="x"?"y":"x",Xe=(P=ye==null?void 0:ye.points)===null||P===void 0?void 0:P.slice(1,ye.points.length-1),et=[],Ot=(_e=w.node(oe.v))===null||_e===void 0?void 0:_e[Be],nr=Ot-((Pe=w.node(oe.w))===null||Pe===void 0?void 0:Pe[Be]),Kt=st[oe.v],At=Kt-st[oe.w];Xe==null||Xe.forEach(function(rr){var Qt=(rr[Be]-Ot)/nr*At+Kt,hr=G(rr[pe],yt,Mt,Qt);et.push({x:hr.x+O[0],y:hr.y+O[1]})}),y[Fe].controlPoints=et}})}else{var yr=new Set,or=c==="BT"||c==="RL",zt=or?function(oe,P){return P-oe}:function(oe,P){return oe-P};w.nodes().forEach(function(oe){var P=w.node(oe);if(P){var _e=r.nodeMap[oe];_e||(_e=f==null?void 0:f.find(function(Pe){return Pe.id===oe})),_e&&(_e.x=P.x+O[0],_e.y=P.y+O[1],_e._order=P._order,yr.add(B?_e.x:_e.y))}});var tr=Array.from(yr).sort(zt),Dr=B?function(oe,P){return oe.x!==P.x}:function(oe,P){return oe.y!==P.y},Ze=B?function(oe,P,_e){var Pe=Math.max(P.y,_e.y),ye=Math.min(P.y,_e.y);return oe.filter(function(Fe){return Fe.y<=Pe&&Fe.y>=ye})}:function(oe,P,_e){var Pe=Math.max(P.x,_e.x),ye=Math.min(P.x,_e.x);return oe.filter(function(Fe){return Fe.x<=Pe&&Fe.x>=ye})};w.edges().forEach(function(oe){var P,_e=w.edge(oe),Pe=y.findIndex(function(Be){var Xe=(0,Zo.getEdgeTerminal)(Be,"source"),et=(0,Zo.getEdgeTerminal)(Be,"target");return Xe===oe.v&&et===oe.w});if(!(Pe<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[Pe].type!=="loop"){(P=_e==null?void 0:_e.points)===null||P===void 0||P.forEach(function(Be){Be.x+=O[0],Be.y+=O[1]});var ye=s.nodeMap[oe.v],Fe=s.nodeMap[oe.w];y[Pe].controlPoints=Rrt(_e==null?void 0:_e.points,ye,Fe,tr,B,Dr,Ze)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:l,edges:y}}},e.prototype.getRadialPos=function(r,n,i,a,o){o===void 0&&(o=[0,1]);var s=(r-n[0])/i;s=s*(o[1]-o[0])+o[0];var l=s*2*Math.PI;return{x:Math.cos(l)*a,y:Math.sin(l)*a}},e.prototype.getType=function(){return"dagre"},e}(Prt.Base);ry.DagreLayout=Lrt;var Rrt=function(t,e,r,n,i,a,o){var s=(t==null?void 0:t.slice(1,t.length-1))||[];if(e&&r){var l=e.x,u=e.y,c=r.x,f=r.y;if(i&&(l=e.y,u=e.x,c=r.y,f=r.x),f!==u&&l!==c){var h=n.indexOf(u),d=n[h+1];if(d){var p=s[0],v=i?{x:(u+d)/2,y:(p==null?void 0:p.y)||c}:{x:(p==null?void 0:p.x)||c,y:(u+d)/2};(!p||a(p,v))&&s.unshift(v)}var g=n.indexOf(f),m=Math.abs(g-h);if(m===1)s=o(s,e,r),s.length||s.push(i?{x:(u+f)/2,y:l}:{x:l,y:(u+f)/2});else if(m>1){var y=n[g-1];if(y){var w=s[s.length-1],b=i?{x:(f+y)/2,y:(w==null?void 0:w.y)||c}:{x:(w==null?void 0:w.x)||l,y:(f+y)/2};(!w||a(w,b))&&s.push(b)}}}}return s},Ab={};const Xk={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function oN(t={},e=Xk){var r,n,i,a;const o=JSON.parse(JSON.stringify(e)),s=((r=t==null?void 0:t.graph)===null||r===void 0?void 0:r.meta)||{},l=((n=t==null?void 0:t.subScene)===null||n===void 0?void 0:n.meta)||{},u=((i=t==null?void 0:t.nodeSize)===null||i===void 0?void 0:i.meta)||{},c=((a=t==null?void 0:t.nodeSize)===null||a===void 0?void 0:a.node)||{},f=o.nodeSize.bridge;return{graph:{meta:Object.assign(o.graph.meta,s)},subScene:{meta:Object.assign(o.subScene.meta,l)},nodeSize:{meta:Object.assign(o.nodeSize.meta,u),node:Object.assign(o.nodeSize.node,c),bridge:f}}}function Oce(t){return`${t}`}const Lm=Oce("ROOT"),Dce=Oce("BRIDGE_GRAPH");var Po,xv,Rm,sN;(function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"})(Po||(Po={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(xv||(xv={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(Rm||(Rm={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(sN||(sN={}));var dE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vF(t,e){return t(e={exports:{}},e.exports),e.exports}var Nrt=function(){this.__data__=[],this.size=0},iy=function(t,e){return t===e||t!=t&&e!=e},dT=function(t,e){for(var r=t.length;r--;)if(iy(t[r][0],e))return r;return-1},Frt=Array.prototype.splice,Brt=function(t){var e=this.__data__,r=dT(e,t);return!(r<0)&&(r==e.length-1?e.pop():Frt.call(e,r,1),--this.size,!0)},$rt=function(t){var e=this.__data__,r=dT(e,t);return r<0?void 0:e[r][1]},zrt=function(t){return dT(this.__data__,t)>-1},jrt=function(t,e){var r=this.__data__,n=dT(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Wg(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wg.prototype.clear=Nrt,Wg.prototype.delete=Brt,Wg.prototype.get=$rt,Wg.prototype.has=zrt,Wg.prototype.set=jrt;var pT=Wg,Grt=function(){this.__data__=new pT,this.size=0},Urt=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Wrt=function(t){return this.__data__.get(t)},Vrt=function(t){return this.__data__.has(t)},Pce=typeof dE=="object"&&dE&&dE.Object===Object&&dE,Hrt=typeof self=="object"&&self&&self.Object===Object&&self,hu=Pce||Hrt||Function("return this")(),pl=hu.Symbol,Lce=Object.prototype,Xrt=Lce.hasOwnProperty,Yrt=Lce.toString,Qy=pl?pl.toStringTag:void 0,qrt=function(t){var e=Xrt.call(t,Qy),r=t[Qy];try{t[Qy]=void 0;var n=!0}catch{}var i=Yrt.call(t);return n&&(e?t[Qy]=r:delete t[Qy]),i},Krt=Object.prototype.toString,Qrt=function(t){return Krt.call(t)},GV=pl?pl.toStringTag:void 0,Ld=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":GV&&GV in Object(t)?qrt(t):Qrt(t)},Vo=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},UV,Tb=function(t){if(!Vo(t))return!1;var e=Ld(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},N3=hu["__core-js_shared__"],WV=(UV=/[^.]+$/.exec(N3&&N3.keys&&N3.keys.IE_PROTO||""))?"Symbol(src)_1."+UV:"",Zrt=function(t){return!!WV&&WV in t},Jrt=Function.prototype.toString,Rv=function(t){if(t!=null){try{return Jrt.call(t)}catch{}try{return t+""}catch{}}return""},ent=/^\[object .+?Constructor\]$/,tnt=Function.prototype,rnt=Object.prototype,nnt=tnt.toString,int=rnt.hasOwnProperty,ant=RegExp("^"+nnt.call(int).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ont=function(t){return!(!Vo(t)||Zrt(t))&&(Tb(t)?ant:ent).test(Rv(t))},snt=function(t,e){return t==null?void 0:t[e]},Nv=function(t,e){var r=snt(t,e);return ont(r)?r:void 0},m2=Nv(hu,"Map"),y2=Nv(Object,"create"),lnt=function(){this.__data__=y2?y2(null):{},this.size=0},unt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},cnt=Object.prototype.hasOwnProperty,fnt=function(t){var e=this.__data__;if(y2){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return cnt.call(e,t)?e[t]:void 0},hnt=Object.prototype.hasOwnProperty,dnt=function(t){var e=this.__data__;return y2?e[t]!==void 0:hnt.call(e,t)},pnt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=y2&&e===void 0?"__lodash_hash_undefined__":e,this};function Vg(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vg.prototype.clear=lnt,Vg.prototype.delete=unt,Vg.prototype.get=fnt,Vg.prototype.has=dnt,Vg.prototype.set=pnt;var VV=Vg,vnt=function(){this.size=0,this.__data__={hash:new VV,map:new(m2||pT),string:new VV}},gnt=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},vT=function(t,e){var r=t.__data__;return gnt(e)?r[typeof e=="string"?"string":"hash"]:r.map},mnt=function(t){var e=vT(this,t).delete(t);return this.size-=e?1:0,e},ynt=function(t){return vT(this,t).get(t)},wnt=function(t){return vT(this,t).has(t)},bnt=function(t,e){var r=vT(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Hg(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Hg.prototype.clear=vnt,Hg.prototype.delete=mnt,Hg.prototype.get=ynt,Hg.prototype.has=wnt,Hg.prototype.set=bnt;var gT=Hg,xnt=function(t,e){var r=this.__data__;if(r instanceof pT){var n=r.__data__;if(!m2||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new gT(n)}return r.set(t,e),this.size=r.size,this};function Xg(t){var e=this.__data__=new pT(t);this.size=e.size}Xg.prototype.clear=Grt,Xg.prototype.delete=Urt,Xg.prototype.get=Wrt,Xg.prototype.has=Vrt,Xg.prototype.set=xnt;var R0=Xg,gF=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t},Yk=function(){try{var t=Nv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),mT=function(t,e,r){e=="__proto__"&&Yk?Yk(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Snt=Object.prototype.hasOwnProperty,yT=function(t,e,r){var n=t[e];Snt.call(t,e)&&iy(n,r)&&(r!==void 0||e in t)||mT(t,e,r)},Ib=function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?mT(r,s,l):yT(r,s,l)}return r},Ent=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},ou=function(t){return t!=null&&typeof t=="object"},HV=function(t){return ou(t)&&Ld(t)=="[object Arguments]"},Rce=Object.prototype,_nt=Rce.hasOwnProperty,Cnt=Rce.propertyIsEnumerable,Nm=HV(function(){return arguments}())?HV:function(t){return ou(t)&&_nt.call(t,"callee")&&!Cnt.call(t,"callee")},oi=Array.isArray,knt=function(){return!1},Sv=vF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?hu.Buffer:void 0,a=(i?i.isBuffer:void 0)||knt;t.exports=a}),Mnt=/^(?:0|[1-9]\d*)$/,wT=function(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&(r=="number"||r!="symbol"&&Mnt.test(t))&&t>-1&&t%1==0&&t<e},mF=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},kn={};kn["[object Float32Array]"]=kn["[object Float64Array]"]=kn["[object Int8Array]"]=kn["[object Int16Array]"]=kn["[object Int32Array]"]=kn["[object Uint8Array]"]=kn["[object Uint8ClampedArray]"]=kn["[object Uint16Array]"]=kn["[object Uint32Array]"]=!0,kn["[object Arguments]"]=kn["[object Array]"]=kn["[object ArrayBuffer]"]=kn["[object Boolean]"]=kn["[object DataView]"]=kn["[object Date]"]=kn["[object Error]"]=kn["[object Function]"]=kn["[object Map]"]=kn["[object Number]"]=kn["[object Object]"]=kn["[object RegExp]"]=kn["[object Set]"]=kn["[object String]"]=kn["[object WeakMap]"]=!1;var Ant=function(t){return ou(t)&&mF(t.length)&&!!kn[Ld(t)]},bT=function(t){return function(e){return t(e)}},Fm=vF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&Pce.process,a=function(){try{var o=n&&n.require&&n.require("util").types;return o||i&&i.binding&&i.binding("util")}catch{}}();t.exports=a}),XV=Fm&&Fm.isTypedArray,Ob=XV?bT(XV):Ant,Tnt=Object.prototype.hasOwnProperty,Nce=function(t,e){var r=oi(t),n=!r&&Nm(t),i=!r&&!n&&Sv(t),a=!r&&!n&&!i&&Ob(t),o=r||n||i||a,s=o?Ent(t.length,String):[],l=s.length;for(var u in t)!e&&!Tnt.call(t,u)||o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wT(u,l))||s.push(u);return s},Int=Object.prototype,xT=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Int)},Fce=function(t,e){return function(r){return t(e(r))}},Ont=Fce(Object.keys,Object),Dnt=Object.prototype.hasOwnProperty,yF=function(t){if(!xT(t))return Ont(t);var e=[];for(var r in Object(t))Dnt.call(t,r)&&r!="constructor"&&e.push(r);return e},Ff=function(t){return t!=null&&mF(t.length)&&!Tb(t)},Rd=function(t){return Ff(t)?Nce(t):yF(t)},Pnt=function(t,e){return t&&Ib(e,Rd(e),t)},Lnt=function(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e},Rnt=Object.prototype.hasOwnProperty,Nnt=function(t){if(!Vo(t))return Lnt(t);var e=xT(t),r=[];for(var n in t)(n!="constructor"||!e&&Rnt.call(t,n))&&r.push(n);return r},Fv=function(t){return Ff(t)?Nce(t,!0):Nnt(t)},Fnt=function(t,e){return t&&Ib(e,Fv(e),t)},Bce=vF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?hu.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(o,s){if(s)return o.slice();var l=o.length,u=a?a(l):new o.constructor(l);return o.copy(u),u}}),$ce=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},zce=function(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a},jce=function(){return[]},Bnt=Object.prototype.propertyIsEnumerable,YV=Object.getOwnPropertySymbols,wF=YV?function(t){return t==null?[]:(t=Object(t),zce(YV(t),function(e){return Bnt.call(t,e)}))}:jce,$nt=function(t,e){return Ib(t,wF(t),e)},bF=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},ST=Fce(Object.getPrototypeOf,Object),Gce=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)bF(e,wF(t)),t=ST(t);return e}:jce,znt=function(t,e){return Ib(t,Gce(t),e)},Uce=function(t,e,r){var n=e(t);return oi(t)?n:bF(n,r(t))},lN=function(t){return Uce(t,Rd,wF)},jnt=function(t){return Uce(t,Fv,Gce)},uN=Nv(hu,"DataView"),cN=Nv(hu,"Promise"),N0=Nv(hu,"Set"),fN=Nv(hu,"WeakMap"),Gnt=Rv(uN),Unt=Rv(m2),Wnt=Rv(cN),Vnt=Rv(N0),Hnt=Rv(fN),mp=Ld;(uN&&mp(new uN(new ArrayBuffer(1)))!="[object DataView]"||m2&&mp(new m2)!="[object Map]"||cN&&mp(cN.resolve())!="[object Promise]"||N0&&mp(new N0)!="[object Set]"||fN&&mp(new fN)!="[object WeakMap]")&&(mp=function(t){var e=Ld(t),r=e=="[object Object]"?t.constructor:void 0,n=r?Rv(r):"";if(n)switch(n){case Gnt:return"[object DataView]";case Unt:return"[object Map]";case Wnt:return"[object Promise]";case Vnt:return"[object Set]";case Hnt:return"[object WeakMap]"}return e});var Ev=mp,Xnt=Object.prototype.hasOwnProperty,Ynt=function(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Xnt.call(t,"index")&&(r.index=t.index,r.input=t.input),r},qk=hu.Uint8Array,xF=function(t){var e=new t.constructor(t.byteLength);return new qk(e).set(new qk(t)),e},qnt=function(t,e){var r=e?xF(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Knt=/\w*$/,Qnt=function(t){var e=new t.constructor(t.source,Knt.exec(t));return e.lastIndex=t.lastIndex,e},qV=pl?pl.prototype:void 0,KV=qV?qV.valueOf:void 0,Znt=function(t){return KV?Object(KV.call(t)):{}},Wce=function(t,e){var r=e?xF(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},Jnt=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return xF(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return qnt(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wce(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Qnt(t);case"[object Set]":return new n;case"[object Symbol]":return Znt(t)}},QV=Object.create,Vce=function(){function t(){}return function(e){if(!Vo(e))return{};if(QV)return QV(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Hce=function(t){return typeof t.constructor!="function"||xT(t)?{}:Vce(ST(t))},eit=function(t){return ou(t)&&Ev(t)=="[object Map]"},ZV=Fm&&Fm.isMap,tit=ZV?bT(ZV):eit,rit=function(t){return ou(t)&&Ev(t)=="[object Set]"},JV=Fm&&Fm.isSet,nit=JV?bT(JV):rit,gn={};gn["[object Arguments]"]=gn["[object Array]"]=gn["[object ArrayBuffer]"]=gn["[object DataView]"]=gn["[object Boolean]"]=gn["[object Date]"]=gn["[object Float32Array]"]=gn["[object Float64Array]"]=gn["[object Int8Array]"]=gn["[object Int16Array]"]=gn["[object Int32Array]"]=gn["[object Map]"]=gn["[object Number]"]=gn["[object Object]"]=gn["[object RegExp]"]=gn["[object Set]"]=gn["[object String]"]=gn["[object Symbol]"]=gn["[object Uint8Array]"]=gn["[object Uint8ClampedArray]"]=gn["[object Uint16Array]"]=gn["[object Uint32Array]"]=!0,gn["[object Error]"]=gn["[object Function]"]=gn["[object WeakMap]"]=!1;var Xce=function t(e,r,n,i,a,o){var s,l=1&r,u=2&r,c=4&r;if(n&&(s=a?n(e,i,a,o):n(e)),s!==void 0)return s;if(!Vo(e))return e;var f=oi(e);if(f){if(s=Ynt(e),!l)return $ce(e,s)}else{var h=Ev(e),d=h=="[object Function]"||h=="[object GeneratorFunction]";if(Sv(e))return Bce(e,l);if(h=="[object Object]"||h=="[object Arguments]"||d&&!a){if(s=u||d?{}:Hce(e),!l)return u?znt(e,Fnt(s,e)):$nt(e,Pnt(s,e))}else{if(!gn[h])return a?e:{};s=Jnt(e,h,l)}}o||(o=new R0);var p=o.get(e);if(p)return p;o.set(e,s),nit(e)?e.forEach(function(g){s.add(t(g,r,n,g,e,o))}):tit(e)&&e.forEach(function(g,m){s.set(m,t(g,r,n,m,e,o))});var v=f?void 0:(c?u?jnt:lN:u?Fv:Rd)(e);return gF(v||e,function(g,m){v&&(g=e[m=g]),yT(s,m,t(g,r,n,m,e,o))}),s},iit=function(t){return Xce(t,4)},SF=function(t){return function(){return t}},EF=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}(),_F=function(t,e){return t&&EF(t,e,Rd)},ET=function(t,e){return function(r,n){if(r==null)return r;if(!Ff(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}(_F),Bv=function(t){return t},Yce=function(t){return typeof t=="function"?t:Bv},qce=function(t,e){return(oi(t)?gF:ET)(t,Yce(e))},Kce=qce,ait=function(t,e){var r=[];return ET(t,function(n,i,a){e(n,i,a)&&r.push(n)}),r},oit=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},sit=function(t){return this.__data__.has(t)};function P_(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new gT;++e<r;)this.add(t[e])}P_.prototype.add=P_.prototype.push=oit,P_.prototype.has=sit;var Qce=P_,lit=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},Zce=function(t,e){return t.has(e)},Jce=function(t,e,r,n,i,a){var o=1&r,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=2&r?new Qce:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var g=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!lit(e,function(m,y){if(!Zce(d,y)&&(p===m||i(p,m,r,n,a)))return d.push(y)})){h=!1;break}}else if(p!==v&&!i(p,v,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h},uit=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r},CF=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r},eH=pl?pl.prototype:void 0,F3=eH?eH.valueOf:void 0,cit=function(t,e,r,n,i,a,o){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new qk(t),new qk(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return iy(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=uit;case"[object Set]":var l=1&n;if(s||(s=CF),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var c=Jce(s(t),s(e),n,i,a,o);return o.delete(t),c;case"[object Symbol]":if(F3)return F3.call(t)==F3.call(e)}return!1},fit=Object.prototype.hasOwnProperty,hit=function(t,e,r,n,i,a){var o=1&r,s=lN(t),l=s.length;if(l!=lN(e).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in e:fit.call(e,c)))return!1}var f=a.get(t),h=a.get(e);if(f&&h)return f==e&&h==t;var d=!0;a.set(t,e),a.set(e,t);for(var p=o;++u<l;){var v=t[c=s[u]],g=e[c];if(n)var m=o?n(g,v,c,e,t,a):n(v,g,c,t,e,a);if(!(m===void 0?v===g||i(v,g,r,n,a):m)){d=!1;break}p||(p=c=="constructor")}if(d&&!p){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w||(d=!1)}return a.delete(t),a.delete(e),d},tH=Object.prototype.hasOwnProperty,dit=function(t,e,r,n,i,a){var o=oi(t),s=oi(e),l=o?"[object Array]":Ev(t),u=s?"[object Array]":Ev(e),c=(l=l=="[object Arguments]"?"[object Object]":l)=="[object Object]",f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",h=l==u;if(h&&Sv(t)){if(!Sv(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new R0),o||Ob(t)?Jce(t,e,r,n,i,a):cit(t,e,l,r,n,i,a);if(!(1&r)){var d=c&&tH.call(t,"__wrapped__"),p=f&&tH.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return a||(a=new R0),i(v,g,r,n,a)}}return!!h&&(a||(a=new R0),hit(t,e,r,n,i,a))},efe=function t(e,r,n,i,a){return e===r||(e==null||r==null||!ou(e)&&!ou(r)?e!=e&&r!=r:dit(e,r,n,i,t,a))},pit=function(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var l=(s=r[i])[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new R0;if(n)var h=n(u,c,l,t,e,f);if(!(h===void 0?efe(c,u,3,n,f):h))return!1}}return!0},tfe=function(t){return t==t&&!Vo(t)},vit=function(t){for(var e=Rd(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,tfe(i)]}return e},rfe=function(t,e){return function(r){return r!=null&&r[t]===e&&(e!==void 0||t in Object(r))}},git=function(t){var e=vit(t);return e.length==1&&e[0][2]?rfe(e[0][0],e[0][1]):function(r){return r===t||pit(r,t,e)}},_v=function(t){return typeof t=="symbol"||ou(t)&&Ld(t)=="[object Symbol]"},mit=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yit=/^\w*$/,kF=function(t,e){if(oi(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!_v(t))||yit.test(t)||!mit.test(t)||e!=null&&t in Object(e)};function MF(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(MF.Cache||gT),r}MF.Cache=gT;var wit=MF,bit=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xit=/\\(\\)?/g,Sit=function(t){var e=wit(t,function(n){return r.size===500&&r.clear(),n}),r=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bit,function(r,n,i,a){e.push(i?a.replace(xit,"$1"):n||r)}),e}),F0=function(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},rH=pl?pl.prototype:void 0,nH=rH?rH.toString:void 0,Eit=function t(e){if(typeof e=="string")return e;if(oi(e))return F0(e,t)+"";if(_v(e))return nH?nH.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r},nfe=function(t){return t==null?"":Eit(t)},_T=function(t,e){return oi(t)?t:kF(t,e)?[t]:Sit(nfe(t))},Db=function(t){if(typeof t=="string"||_v(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},CT=function(t,e){for(var r=0,n=(e=_T(e,t)).length;t!=null&&r<n;)t=t[Db(e[r++])];return r&&r==n?t:void 0},_it=function(t,e,r){var n=t==null?void 0:CT(t,e);return n===void 0?r:n},Cit=function(t,e){return t!=null&&e in Object(t)},ife=function(t,e,r){for(var n=-1,i=(e=_T(e,t)).length,a=!1;++n<i;){var o=Db(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=t==null?0:t.length)&&mF(i)&&wT(o,i)&&(oi(t)||Nm(t))},afe=function(t,e){return t!=null&&ife(t,e,Cit)},kit=function(t,e){return kF(t)&&tfe(e)?rfe(Db(t),e):function(r){var n=_it(r,t);return n===void 0&&n===e?afe(r,t):efe(e,n,3)}},ofe=function(t){return function(e){return e==null?void 0:e[t]}},Mit=function(t){return function(e){return CT(e,t)}},Ait=function(t){return kF(t)?ofe(Db(t)):Mit(t)},Bf=function(t){return typeof t=="function"?t:t==null?Bv:typeof t=="object"?oi(t)?kit(t[0],t[1]):git(t):Ait(t)},sfe=function(t,e){return(oi(t)?zce:ait)(t,Bf(e))},Tit=Object.prototype.hasOwnProperty,Iit=function(t,e){return t!=null&&Tit.call(t,e)},lfe=function(t,e){return t!=null&&ife(t,e,Iit)},Oit=Object.prototype.hasOwnProperty,Dit=function(t){if(t==null)return!0;if(Ff(t)&&(oi(t)||typeof t=="string"||typeof t.splice=="function"||Sv(t)||Ob(t)||Nm(t)))return!t.length;var e=Ev(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(xT(t))return!yF(t).length;for(var r in t)if(Oit.call(t,r))return!1;return!0},ufe=function(t){return t===void 0},cfe=function(t,e){var r=-1,n=Ff(t)?Array(t.length):[];return ET(t,function(i,a,o){n[++r]=e(i,a,o)}),n},ffe=function(t,e){return(oi(t)?F0:cfe)(t,Bf(e))},Pit=function(t,e,r,n){var i=-1,a=t==null?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r},Lit=function(t,e,r,n,i){return i(t,function(a,o,s){r=n?(n=!1,a):e(r,a,o,s)}),r},hfe=function(t,e,r){var n=oi(t)?Pit:Lit,i=arguments.length<3;return n(t,Bf(e),r,i,ET)},Rit=function(t){return typeof t=="string"||!oi(t)&&ou(t)&&Ld(t)=="[object String]"},Nit=ofe("length"),Fit=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Bit=function(t){return Fit.test(t)},$it="[\\ud800-\\udfff]",hN="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dN="\\ud83c[\\udffb-\\udfff]",dfe="[^\\ud800-\\udfff]",pfe="(?:\\ud83c[\\udde6-\\uddff]){2}",vfe="[\\ud800-\\udbff][\\udc00-\\udfff]",iH="(?:"+hN+"|"+dN+")?",zit="[\\ufe0e\\ufe0f]?"+iH+("(?:\\u200d(?:"+[dfe,pfe,vfe].join("|")+")[\\ufe0e\\ufe0f]?"+iH+")*"),jit="(?:"+[dfe+hN+"?",hN,pfe,vfe,$it].join("|")+")",aH=RegExp(dN+"(?="+dN+")|"+jit+zit,"g"),Git=function(t){for(var e=aH.lastIndex=0;aH.test(t);)++e;return e},Uit=function(t){return Bit(t)?Git(t):Nit(t)},Wit=function(t){if(t==null)return 0;if(Ff(t))return Rit(t)?Uit(t):t.length;var e=Ev(t);return e=="[object Map]"||e=="[object Set]"?t.size:yF(t).length},Vit=function(t,e,r){var n=oi(t),i=n||Sv(t)||Ob(t);if(e=Bf(e),r==null){var a=t&&t.constructor;r=i?n?new a:[]:Vo(t)&&Tb(a)?Vce(ST(t)):{}}return(i?gF:_F)(t,function(o,s,l){return e(r,o,s,l)}),r},oH=pl?pl.isConcatSpreadable:void 0,Hit=function(t){return oi(t)||Nm(t)||!!(oH&&t&&t[oH])},AF=function t(e,r,n,i,a){var o=-1,s=e.length;for(n||(n=Hit),a||(a=[]);++o<s;){var l=e[o];r>0&&n(l)?r>1?t(l,r-1,n,i,a):bF(a,l):i||(a[a.length]=l)}return a},Xit=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},sH=Math.max,gfe=function(t,e,r){return e=sH(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=sH(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),Xit(t,this,s)}},Yit=Yk?function(t,e){return Yk(t,"toString",{configurable:!0,enumerable:!1,value:SF(e),writable:!0})}:Bv,qit=Date.now,mfe=function(t){var e=0,r=0;return function(){var n=qit(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Yit),kT=function(t,e){return mfe(gfe(t,e,Bv),t+"")},yfe=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1},Kit=function(t){return t!=t},Qit=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1},Zit=function(t,e,r){return e==e?Qit(t,e,r):yfe(t,Kit,r)},Jit=function(t,e){return!!(t!=null&&t.length)&&Zit(t,e,0)>-1},eat=function(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1},tat=function(){},rat=N0&&1/CF(new N0([,-0]))[1]==1/0?function(t){return new N0(t)}:tat,nat=function(t,e,r){var n=-1,i=Jit,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=eat;else if(a>=200){var u=e?null:rat(t);if(u)return CF(u);o=!1,i=Zce,l=new Qce}else l=e?[]:s;e:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s},wfe=function(t){return ou(t)&&Ff(t)},iat=kT(function(t){return nat(AF(t,1,wfe,!0))}),aat=function(t,e){return F0(e,function(r){return t[r]})},Kk,bfe=function(t){return t==null?[]:aat(t,Rd(t))};try{Kk={clone:iit,constant:SF,each:Kce,filter:sfe,has:lfe,isArray:oi,isEmpty:Dit,isFunction:Tb,isUndefined:ufe,keys:Rd,map:ffe,reduce:hfe,size:Wit,transform:Vit,union:iat,values:bfe}}catch{}Kk||(Kk=window._);var Et=Kk,TF=Wr;function Wr(t){this._isDirected=!Et.has(t,"directed")||t.directed,this._isMultigraph=!!Et.has(t,"multigraph")&&t.multigraph,this._isCompound=!!Et.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=Et.constant(void 0),this._defaultEdgeLabelFn=Et.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function lH(t,e){t[e]?t[e]++:t[e]=1}function uH(t,e){--t[e]||delete t[e]}function P1(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var o=i;i=a,a=o}return i+""+a+""+(Et.isUndefined(n)?"\0":n)}function oat(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function B3(t,e){return P1(t,e.v,e.w,e.name)}Wr.prototype._nodeCount=0,Wr.prototype._edgeCount=0,Wr.prototype.isDirected=function(){return this._isDirected},Wr.prototype.isMultigraph=function(){return this._isMultigraph},Wr.prototype.isCompound=function(){return this._isCompound},Wr.prototype.setGraph=function(t){return this._label=t,this},Wr.prototype.graph=function(){return this._label},Wr.prototype.setDefaultNodeLabel=function(t){return Et.isFunction(t)||(t=Et.constant(t)),this._defaultNodeLabelFn=t,this},Wr.prototype.nodeCount=function(){return this._nodeCount},Wr.prototype.nodes=function(){return Et.keys(this._nodes)},Wr.prototype.sources=function(){var t=this;return Et.filter(this.nodes(),function(e){return Et.isEmpty(t._in[e])})},Wr.prototype.sinks=function(){var t=this;return Et.filter(this.nodes(),function(e){return Et.isEmpty(t._out[e])})},Wr.prototype.setNodes=function(t,e){var r=arguments,n=this;return Et.each(t,function(i){r.length>1?n.setNode(i,e):n.setNode(i)}),this},Wr.prototype.setNode=function(t,e){return Et.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},Wr.prototype.node=function(t){return this._nodes[t]},Wr.prototype.hasNode=function(t){return Et.has(this._nodes,t)},Wr.prototype.removeNode=function(t){var e=this;if(Et.has(this._nodes,t)){var r=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],Et.each(this.children(t),function(n){e.setParent(n)}),delete this._children[t]),Et.each(Et.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],Et.each(Et.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},Wr.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Et.isUndefined(e))e="\0";else{for(var r=e+="";!Et.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},Wr.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},Wr.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!=="\0")return e}},Wr.prototype.children=function(t){if(Et.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return Et.keys(e)}else{if(t==="\0")return this.nodes();if(this.hasNode(t))return[]}},Wr.prototype.predecessors=function(t){var e=this._preds[t];if(e)return Et.keys(e)},Wr.prototype.successors=function(t){var e=this._sucs[t];if(e)return Et.keys(e)},Wr.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return Et.union(e,this.successors(t))},Wr.prototype.isLeaf=function(t){return(this.isDirected()?this.successors(t):this.neighbors(t)).length===0},Wr.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;Et.each(this._nodes,function(a,o){t(o)&&e.setNode(o,a)}),Et.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,r.edge(a))});var n={};function i(a){var o=r.parent(a);return o===void 0||e.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&Et.each(e.nodes(),function(a){e.setParent(a,i(a))}),e},Wr.prototype.setDefaultEdgeLabel=function(t){return Et.isFunction(t)||(t=Et.constant(t)),this._defaultEdgeLabelFn=t,this},Wr.prototype.edgeCount=function(){return this._edgeCount},Wr.prototype.edges=function(){return Et.values(this._edgeObjs)},Wr.prototype.setPath=function(t,e){var r=this,n=arguments;return Et.reduce(t,function(i,a){return n.length>1?r.setEdge(i,a,e):r.setEdge(i,a),a}),this},Wr.prototype.setEdge=function(){var t,e,r,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,e=a.w,r=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(t=a,e=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),t=""+t,e=""+e,Et.isUndefined(r)||(r=""+r);var o=P1(this._isDirected,t,e,r);if(Et.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!Et.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(t,e,r);var s=oat(this._isDirected,t,e,r);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,lH(this._preds[e],t),lH(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this},Wr.prototype.edge=function(t,e,r){var n=arguments.length===1?B3(this._isDirected,arguments[0]):P1(this._isDirected,t,e,r);return this._edgeLabels[n]},Wr.prototype.hasEdge=function(t,e,r){var n=arguments.length===1?B3(this._isDirected,arguments[0]):P1(this._isDirected,t,e,r);return Et.has(this._edgeLabels,n)},Wr.prototype.removeEdge=function(t,e,r){var n=arguments.length===1?B3(this._isDirected,arguments[0]):P1(this._isDirected,t,e,r),i=this._edgeObjs[n];return i&&(t=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],uH(this._preds[e],t),uH(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},Wr.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=Et.values(r);return e?Et.filter(n,function(i){return i.v===e}):n}},Wr.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=Et.values(r);return e?Et.filter(n,function(i){return i.w===e}):n}},Wr.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};var cH={Graph:TF,version:"2.1.8"},sat={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:lat(t),edges:uat(t)};return Et.isUndefined(t.graph())||(e.value=Et.clone(t.graph())),e},read:function(t){var e=new TF(t.options).setGraph(t.value);return Et.each(t.nodes,function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),Et.each(t.edges,function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}};function lat(t){return Et.map(t.nodes(),function(e){var r=t.node(e),n=t.parent(e),i={v:e};return Et.isUndefined(r)||(i.value=r),Et.isUndefined(n)||(i.parent=n),i})}function uat(t){return Et.map(t.edges(),function(e){var r=t.edge(e),n={v:e.v,w:e.w};return Et.isUndefined(e.name)||(n.name=e.name),Et.isUndefined(r)||(n.value=r),n})}var cat=function(t){var e,r={},n=[];function i(a){Et.has(r,a)||(r[a]=!0,e.push(a),Et.each(t.successors(a),i),Et.each(t.predecessors(a),i))}return Et.each(t.nodes(),function(a){e=[],i(a),e.length&&n.push(e)}),n},xfe=Ws;function Ws(){this._arr=[],this._keyIndices={}}Ws.prototype.size=function(){return this._arr.length},Ws.prototype.keys=function(){return this._arr.map(function(t){return t.key})},Ws.prototype.has=function(t){return Et.has(this._keyIndices,t)},Ws.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority},Ws.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Ws.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!Et.has(r,t)){var n=this._arr,i=n.length;return r[t]=i,n.push({key:t,priority:e}),this._decrease(i),!0}return!1},Ws.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},Ws.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},Ws.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,i=t;r<e.length&&(i=e[r].priority<e[i].priority?r:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==t&&(this._swap(t,i),this._heapify(i)))},Ws.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;t!==0&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},Ws.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,i=r[t],a=r[e];r[t]=a,r[e]=i,n[a.key]=t,n[i.key]=e};var Sfe=function(t,e,r,n){return function(i,a,o,s){var l,u,c={},f=new xfe,h=function(d){var p=d.v!==l?d.v:d.w,v=c[p],g=o(d),m=u.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+g);m<v.distance&&(v.distance=m,v.predecessor=l,f.decrease(p,m))};for(i.nodes().forEach(function(d){var p=d===a?0:Number.POSITIVE_INFINITY;c[d]={distance:p},f.add(d,p)});f.size()>0&&(l=f.removeMin(),(u=c[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(h);return c}(t,String(e),r||fat,n||function(i){return t.outEdges(i)})},fat=Et.constant(1),hat=function(t,e,r){return Et.transform(t.nodes(),function(n,i){n[i]=Sfe(t,i,e,r)},{})},Efe=function(t){var e=0,r=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:e,index:e++};if(r.push(o),t.successors(o).forEach(function(c){Et.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var l,u=[];do l=r.pop(),n[l].onStack=!1,u.push(l);while(o!==l);i.push(u)}}return t.nodes().forEach(function(o){Et.has(n,o)||a(o)}),i},dat=function(t){return Et.filter(Efe(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})},pat=function(t,e,r){return function(n,i,a){var o={},s=n.nodes();return s.forEach(function(l){o[l]={},o[l][l]={distance:0},s.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var c=u.v===l?u.w:u.v,f=i(u);o[l][c]={distance:f,predecessor:l}})}),s.forEach(function(l){var u=o[l];s.forEach(function(c){var f=o[c];s.forEach(function(h){var d=f[l],p=u[h],v=f[h],g=d.distance+p.distance;g<v.distance&&(v.distance=g,v.predecessor=p.predecessor)})})}),o}(t,e||vat,r||function(n){return t.outEdges(n)})},vat=Et.constant(1),$3=_fe;function _fe(t){var e={},r={},n=[];if(Et.each(t.sinks(),function i(a){if(Et.has(r,a))throw new Qk;Et.has(e,a)||(r[a]=!0,e[a]=!0,Et.each(t.predecessors(a),i),delete r[a],n.push(a))}),Et.size(e)!==t.nodeCount())throw new Qk;return n}function Qk(){}_fe.CycleException=Qk,Qk.prototype=new Error;var fH=function(t,e,r){Et.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return Et.each(e,function(o){if(!t.hasNode(o))throw new Error("Graph does not have node: "+o);Cfe(t,o,r==="post",a,n,i)}),i};function Cfe(t,e,r,n,i,a){Et.has(n,e)||(n[e]=!0,r||a.push(e),Et.each(i(e),function(o){Cfe(t,o,r,n,i,a)}),r&&a.push(e))}var Zk,gat={Graph:cH.Graph,json:sat,alg:{components:cat,dijkstra:Sfe,dijkstraAll:hat,findCycles:dat,floydWarshall:pat,isAcyclic:function(t){try{$3(t)}catch(e){if(e instanceof $3.CycleException)return!1;throw e}return!0},postorder:function(t,e){return fH(t,e,"post")},preorder:function(t,e){return fH(t,e,"pre")},prim:function(t,e){var r,n=new TF,i={},a=new xfe;function o(l){var u=l.v===r?l.w:l.v,c=a.priority(u);if(c!==void 0){var f=e(l);f<c&&(i[u]=r,a.decrease(u,f))}}if(t.nodeCount()===0)return n;Et.each(t.nodes(),function(l){a.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),a.decrease(t.nodes()[0],0);for(var s=!1;a.size()>0;){if(r=a.removeMin(),Et.has(i,r))n.setEdge(r,i[r]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(r).forEach(o)}return n},tarjan:Efe,topsort:$3},version:cH.version};try{Zk=gat}catch{}Zk||(Zk=window.graphlib);var du=Zk,mat=function(t){return Xce(t,5)},w2=function(t,e,r){if(!Vo(r))return!1;var n=typeof e;return!!(n=="number"?Ff(r)&&wT(e,r.length):n=="string"&&e in r)&&iy(r[e],t)},kfe=Object.prototype,yat=kfe.hasOwnProperty,wat=kT(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&w2(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=Fv(a),s=-1,l=o.length;++s<l;){var u=o[s],c=t[u];(c===void 0||iy(c,kfe[u])&&!yat.call(t,u))&&(t[u]=a[u])}return t}),bat=function(t){return function(e,r,n){var i=Object(e);if(!Ff(e)){var a=Bf(r);e=Rd(e),r=function(s){return a(i[s],s,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}},xat=/^\s+|\s+$/g,Sat=/^[-+]0x[0-9a-f]+$/i,Eat=/^0b[01]+$/i,_at=/^0o[0-7]+$/i,Cat=parseInt,kat=function(t){if(typeof t=="number")return t;if(_v(t))return NaN;if(Vo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(xat,"");var r=Eat.test(t);return r||_at.test(t)?Cat(t.slice(2),r?2:8):Sat.test(t)?NaN:+t},L_=function(t){return t?(t=kat(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:t===0?t:0},Mat=function(t){var e=L_(t),r=e%1;return e==e?r?e-r:e:0},Aat=Math.max,Tat=bat(function(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Mat(r);return i<0&&(i=Aat(n+i,0)),yfe(t,Bf(e),i)}),Mfe=function(t){return t!=null&&t.length?AF(t,1):[]},Iat=function(t,e){return t==null?t:EF(t,Yce(e),Fv)},Oat=function(t){var e=t==null?0:t.length;return e?t[e-1]:void 0},Dat=function(t,e){var r={};return e=Bf(e),_F(t,function(n,i,a){mT(r,i,e(n,i,a))}),r},IF=function(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(o!=null&&(s===void 0?o==o&&!_v(o):r(o,s)))var s=o,l=a}return l},Pat=function(t,e){return t>e},Lat=function(t){return t&&t.length?IF(t,Bv,Pat):void 0},pN=function(t,e,r){(r!==void 0&&!iy(t[e],r)||r===void 0&&!(e in t))&&mT(t,e,r)},Rat=Function.prototype,Nat=Object.prototype,Afe=Rat.toString,Fat=Nat.hasOwnProperty,Bat=Afe.call(Object),$at=function(t){if(!ou(t)||Ld(t)!="[object Object]")return!1;var e=ST(t);if(e===null)return!0;var r=Fat.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Afe.call(r)==Bat},vN=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]},zat=function(t){return Ib(t,Fv(t))},jat=function(t,e,r,n,i,a,o){var s=vN(t,r),l=vN(e,r),u=o.get(l);if(u)pN(t,r,u);else{var c=a?a(s,l,r+"",t,e,o):void 0,f=c===void 0;if(f){var h=oi(l),d=!h&&Sv(l),p=!h&&!d&&Ob(l);c=l,h||d||p?oi(s)?c=s:wfe(s)?c=$ce(s):d?(f=!1,c=Bce(l,!0)):p?(f=!1,c=Wce(l,!0)):c=[]:$at(l)||Nm(l)?(c=s,Nm(s)?c=zat(s):Vo(s)&&!Tb(s)||(c=Hce(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),pN(t,r,c)}},Gat=function t(e,r,n,i,a){e!==r&&EF(r,function(o,s){if(a||(a=new R0),Vo(o))jat(e,r,s,n,t,i,a);else{var l=i?i(vN(e,s),o,s+"",e,r,a):void 0;l===void 0&&(l=o),pN(e,s,l)}},Fv)},Uat=function(t){return kT(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&w2(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}(function(t,e,r){Gat(t,e,r)}),Tfe=function(t,e){return t<e},Wat=function(t){return t&&t.length?IF(t,Bv,Tfe):void 0},Vat=function(t,e){return t&&t.length?IF(t,Bf(e),Tfe):void 0},Hat=function(){return hu.Date.now()},Xat=function(t,e,r,n){if(!Vo(t))return t;for(var i=-1,a=(e=_T(e,t)).length,o=a-1,s=t;s!=null&&++i<a;){var l=Db(e[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var c=s[l];(u=n?n(c,l,s):void 0)===void 0&&(u=Vo(c)?c:wT(e[i+1])?[]:{})}yT(s,l,u),s=s[l]}return t},Yat=function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=CT(t,o);r(s,o)&&Xat(a,_T(o,t),s)}return a},qat=function(t,e){return Yat(t,e,function(r,n){return afe(t,n)})},Kat=function(t){return mfe(gfe(t,void 0,Mfe),t+"")}(function(t,e){return t==null?{}:qat(t,e)}),Qat=Math.ceil,Zat=Math.max,Jat=function(t,e,r,n){for(var i=-1,a=Zat(Qat((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=r;return o},eot=function(t){return function(e,r,n){return n&&typeof n!="number"&&w2(e,r,n)&&(r=n=void 0),e=L_(e),r===void 0?(r=e,e=0):r=L_(r),n=n===void 0?e<r?1:-1:L_(n),Jat(e,r,n,t)}}(),tot=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t},rot=function(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t==t,a=_v(t),o=e!==void 0,s=e===null,l=e==e,u=_v(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&t<e||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0},not=function(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var l=rot(i[n],a[n]);if(l)return n>=s?l:l*(r[n]=="desc"?-1:1)}return t.index-e.index},iot=function(t,e,r){e=e.length?F0(e,function(a){return oi(a)?function(o){return CT(o,a.length===1?a[0]:a)}:a}):[Bv];var n=-1;e=F0(e,bT(Bf));var i=cfe(t,function(a,o,s){return{criteria:F0(e,function(l){return l(a)}),index:++n,value:a}});return tot(i,function(a,o){return not(a,o,r)})},aot=kT(function(t,e){if(t==null)return[];var r=e.length;return r>1&&w2(t,e[0],e[1])?e=[]:r>2&&w2(e[0],e[1],e[2])&&(e=[e[0]]),iot(t,AF(e,1),[])}),oot=0,sot=function(t){var e=++oot;return nfe(t)+e},lot=function(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;r(o,t[n],s)}return o},Jk,uot=function(t,e){return lot(t||[],e||[],yT)};try{Jk={cloneDeep:mat,constant:SF,defaults:wat,each:Kce,filter:sfe,find:Tat,flatten:Mfe,forEach:qce,forIn:Iat,has:lfe,isUndefined:ufe,last:Oat,map:ffe,mapValues:Dat,max:Lat,merge:Uat,min:Wat,minBy:Vat,now:Hat,pick:Kat,range:eot,reduce:hfe,sortBy:aot,uniqueId:sot,values:bfe,zipObject:uot}}catch{}Jk||(Jk=window._);var re=Jk,cot=R_;function R_(){var t={};t._next=t._prev=t,this._sentinel=t}function hH(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function fot(t,e){if(t!=="_next"&&t!=="_prev")return e}R_.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return hH(e),e},R_.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&hH(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},R_.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,fot)),r=r._prev;return"["+t.join(", ")+"]"};var hot=du.Graph,dot=function(t,e){if(t.nodeCount()<=1)return[];var r=function(i,a){var o=new hot,s=0,l=0;re.forEach(i.nodes(),function(f){o.setNode(f,{v:f,in:0,out:0})}),re.forEach(i.edges(),function(f){var h=o.edge(f.v,f.w)||0,d=a(f),p=h+d;o.setEdge(f.v,f.w,p),l=Math.max(l,o.node(f.v).out+=d),s=Math.max(s,o.node(f.w).in+=d)});var u=re.range(l+s+3).map(function(){return new cot}),c=s+1;return re.forEach(o.nodes(),function(f){gN(u,c,o.node(f))}),{graph:o,buckets:u,zeroIdx:c}}(t,e||pot),n=function(i,a,o){for(var s,l=[],u=a[a.length-1],c=a[0];i.nodeCount();){for(;s=c.dequeue();)z3(i,a,o,s);for(;s=u.dequeue();)z3(i,a,o,s);if(i.nodeCount()){for(var f=a.length-2;f>0;--f)if(s=a[f].dequeue()){l=l.concat(z3(i,a,o,s,!0));break}}}return l}(r.graph,r.buckets,r.zeroIdx);return re.flatten(re.map(n,function(i){return t.outEdges(i.v,i.w)}),!0)},pot=re.constant(1);function z3(t,e,r,n,i){var a=i?[]:void 0;return re.forEach(t.inEdges(n.v),function(o){var s=t.edge(o),l=t.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,gN(e,r,l)}),re.forEach(t.outEdges(n.v),function(o){var s=t.edge(o),l=o.w,u=t.node(l);u.in-=s,gN(e,r,u)}),t.removeNode(n.v),a}function gN(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var dH={run:function(t){var e=t.graph().acyclicer==="greedy"?dot(t,function(r){return function(n){return r.edge(n).weight}}(t)):function(r){var n=[],i={},a={};function o(s){re.has(a,s)||(a[s]=!0,i[s]=!0,re.forEach(r.outEdges(s),function(l){re.has(i,l.w)?n.push(l):o(l.w)}),delete i[s])}return re.forEach(r.nodes(),o),n}(t);re.forEach(e,function(r){var n=t.edge(r);t.removeEdge(r),n.forwardName=r.name,n.reversed=!0,t.setEdge(r.w,r.v,n,re.uniqueId("rev"))})},undo:function(t){re.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}},pH=du.Graph,ca={addDummyNode:vH,simplify:function(t){var e=new pH().setGraph(t.graph());return re.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),re.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},i=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new pH({multigraph:t.isMultigraph()}).setGraph(t.graph());return re.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),re.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e},successorWeights:function(t){var e=re.map(t.nodes(),function(r){var n={};return re.forEach(t.outEdges(r),function(i){n[i.w]=(n[i.w]||0)+t.edge(i).weight}),n});return re.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=re.map(t.nodes(),function(r){var n={};return re.forEach(t.inEdges(r),function(i){n[i.v]=(n[i.v]||0)+t.edge(i).weight}),n});return re.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,i=t.x,a=t.y,o=e.x-i,s=e.y-a,l=t.width/2,u=t.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(o)*u?(s<0&&(u=-u),r=u*o/s,n=u):(o<0&&(l=-l),r=l,n=l*s/o),{x:i+r,y:a+n}},buildLayerMatrix:function(t){var e=re.map(re.range(gH(t)+1),function(){return[]});return re.forEach(t.nodes(),function(r){var n=t.node(r),i=n.rank;re.isUndefined(i)||(e[i][n.order]=r)}),e},normalizeRanks:function(t){var e=re.min(re.map(t.nodes(),function(r){return t.node(r).rank}));re.forEach(t.nodes(),function(r){var n=t.node(r);re.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(t){var e=re.min(re.map(t.nodes(),function(a){return t.node(a).rank})),r=[];re.forEach(t.nodes(),function(a){var o=t.node(a).rank-e;r[o]||(r[o]=[]),r[o].push(a)});var n=0,i=t.graph().nodeRankFactor;re.forEach(r,function(a,o){re.isUndefined(a)&&o%i!=0?--n:n&&re.forEach(a,function(s){t.node(s).rank+=n})})},addBorderNode:function(t,e,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),vH(t,"border",i,e)},maxRank:gH,partition:function(t,e){var r={lhs:[],rhs:[]};return re.forEach(t,function(n){e(n)?r.lhs.push(n):r.rhs.push(n)}),r},time:function(t,e){var r=re.now();try{return e()}finally{console.log(t+" time: "+(re.now()-r)+"ms")}},notime:function(t,e){return e()}};function vH(t,e,r,n){var i;do i=re.uniqueId(n);while(t.hasNode(i));return r.dummy=e,t.setNode(i,r),i}function gH(t){return re.max(re.map(t.nodes(),function(e){var r=t.node(e).rank;if(!re.isUndefined(r))return r}))}var mH={run:function(t){t.graph().dummyChains=[],re.forEach(t.edges(),function(e){(function(r,n){var i,a,o,s=n.v,l=r.node(s).rank,u=n.w,c=r.node(u).rank,f=n.name,h=r.edge(n),d=h.labelRank;if(c!==l+1){for(r.removeEdge(n),o=0,++l;l<c;++o,++l)h.points=[],a={width:0,height:0,edgeLabel:h,edgeObj:n,rank:l},i=ca.addDummyNode(r,"edge",a,"_d"),l===d&&(a.width=h.width,a.height=h.height,a.dummy="edge-label",a.labelpos=h.labelpos),r.setEdge(s,i,{weight:h.weight},f),o===0&&r.graph().dummyChains.push(i),s=i;r.setEdge(s,u,{weight:h.weight},f)}})(t,e)})},undo:function(t){re.forEach(t.graph().dummyChains,function(e){var r,n=t.node(e),i=n.edgeLabel;for(t.setEdge(n.edgeObj,i);n.dummy;)r=t.successors(e)[0],t.removeNode(e),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=r,n=t.node(e)})}},Ife=function(t){var e={};re.forEach(t.sources(),function r(n){var i=t.node(n);if(re.has(e,n))return i.rank;e[n]=!0;var a=re.min(re.map(t.outEdges(n),function(o){return r(o.w)-t.edge(o).minlen}));return a!==Number.POSITIVE_INFINITY&&a!=null||(a=0),i.rank=a})},Ofe=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},vot=du.Graph,eM=Ofe,Dfe=function(t){var e,r,n=new vot({directed:!1}),i=t.nodes()[0],a=t.nodeCount();for(n.setNode(i,{});got(n,t)<a;)e=mot(n,t),r=n.hasNode(e.v)?eM(t,e):-eM(t,e),yot(n,t,r);return n};function got(t,e){return re.forEach(t.nodes(),function r(n){re.forEach(e.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;t.hasNode(o)||eM(e,i)||(t.setNode(o,{}),t.setEdge(n,o,{}),r(o))})}),t.nodeCount()}function mot(t,e){return re.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return eM(e,r)})}function yot(t,e,r){re.forEach(t.nodes(),function(n){e.node(n).rank+=r})}var wot=Ofe,bot=Ife,xot=du.alg.preorder,Sot=du.alg.postorder,Eot=ca.simplify,_ot=yp;function yp(t){t=Eot(t),bot(t);var e,r=Dfe(t);for(DF(r),OF(r,t);e=Rfe(r);)Ffe(r,t,e,Nfe(r,t,e))}function OF(t,e){var r=Sot(t,t.nodes());r=r.slice(0,r.length-1),re.forEach(r,function(n){(function(i,a,o){var s=i.node(o).parent;i.edge(o,s).cutvalue=Pfe(i,a,o)})(t,e,n)})}function Pfe(t,e,r){var n=t.node(r).parent,i=!0,a=e.edge(r,n),o=0;return a||(i=!1,a=e.edge(n,r)),o=a.weight,re.forEach(e.nodeEdges(r),function(s){var l,u,c=s.v===r,f=c?s.w:s.v;if(f!==n){var h=c===i,d=e.edge(s).weight;if(o+=h?d:-d,l=r,u=f,t.hasEdge(l,u)){var p=t.edge(r,f).cutvalue;o+=h?-p:p}}}),o}function DF(t,e){arguments.length<2&&(e=t.nodes()[0]),Lfe(t,{},1,e)}function Lfe(t,e,r,n,i){var a=r,o=t.node(n);return e[n]=!0,re.forEach(t.neighbors(n),function(s){re.has(e,s)||(r=Lfe(t,e,r,s,n))}),o.low=a,o.lim=r++,i?o.parent=i:delete o.parent,r}function Rfe(t){return re.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function Nfe(t,e,r){var n=r.v,i=r.w;e.hasEdge(n,i)||(n=r.w,i=r.v);var a=t.node(n),o=t.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=re.filter(e.edges(),function(c){return l===yH(t,t.node(c.v),s)&&l!==yH(t,t.node(c.w),s)});return re.minBy(u,function(c){return wot(e,c)})}function Ffe(t,e,r,n){var i=r.v,a=r.w;t.removeEdge(i,a),t.setEdge(n.v,n.w,{}),DF(t),OF(t,e),function(o,s){var l=re.find(o.nodes(),function(c){return!s.node(c).parent}),u=xot(o,l);u=u.slice(1),re.forEach(u,function(c){var f=o.node(c).parent,h=s.edge(c,f),d=!1;h||(h=s.edge(f,c),d=!0),s.node(c).rank=s.node(f).rank+(d?h.minlen:-h.minlen)})}(t,e)}function yH(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}yp.initLowLimValues=DF,yp.initCutValues=OF,yp.calcCutValue=Pfe,yp.leaveEdge=Rfe,yp.enterEdge=Nfe,yp.exchangeEdges=Ffe;var Bfe=Ife,Cot=function(t){switch(t.graph().ranker){case"network-simplex":wH(t);break;case"tight-tree":(function(e){Bfe(e),Dfe(e)})(t);break;case"longest-path":kot(t);break;default:wH(t)}},kot=Bfe;function wH(t){_ot(t)}var Mot=function(t){var e=function(r){var n={},i=0;function a(o){var s=i;re.forEach(r.children(o),a),n[o]={low:s,lim:i++}}return re.forEach(r.children(),a),n}(t);re.forEach(t.graph().dummyChains,function(r){for(var n=t.node(r),i=n.edgeObj,a=function(f,h,d,p){var v,g,m=[],y=[],w=Math.min(h[d].low,h[p].low),b=Math.max(h[d].lim,h[p].lim);v=d;do v=f.parent(v),m.push(v);while(v&&(h[v].low>w||b>h[v].lim));for(g=v,v=p;(v=f.parent(v))!==g;)y.push(v);return{path:m.concat(y.reverse()),lca:g}}(t,e,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],c=!0;r!==i.w;){if(n=t.node(r),c){for(;(u=o[l])!==s&&t.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&t.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}t.setParent(r,u),r=t.successors(r)[0]}})},bH={run:function(t){var e=ca.addDummyNode(t,"root",{},"_root"),r=function(o){var s={};function l(u,c){var f=o.children(u);f&&f.length&&re.forEach(f,function(h){l(h,c+1)}),s[u]=c}return re.forEach(o.children(),function(u){l(u,1)}),s}(t),n=re.max(re.values(r))-1,i=2*n+1;t.graph().nestingRoot=e,re.forEach(t.edges(),function(o){t.edge(o).minlen*=i});var a=function(o){return re.reduce(o.edges(),function(s,l){return s+o.edge(l).weight},0)}(t)+1;re.forEach(t.children(),function(o){$fe(t,e,i,a,n,r,o)}),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,re.forEach(t.edges(),function(r){t.edge(r).nestingEdge&&t.removeEdge(r)})}};function $fe(t,e,r,n,i,a,o){var s=t.children(o);if(s.length){var l=ca.addBorderNode(t,"_bt"),u=ca.addBorderNode(t,"_bb"),c=t.node(o);t.setParent(l,o),c.borderTop=l,t.setParent(u,o),c.borderBottom=u,re.forEach(s,function(f){$fe(t,e,r,n,i,a,f);var h=t.node(f),d=h.borderTop?h.borderTop:f,p=h.borderBottom?h.borderBottom:f,v=h.borderTop?n:2*n,g=d!==p?1:i-a[o]+1;t.setEdge(l,d,{weight:v,minlen:g,nestingEdge:!0}),t.setEdge(p,u,{weight:v,minlen:g,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,l,{weight:0,minlen:i+a[o]})}else o!==e&&t.setEdge(e,o,{weight:0,minlen:r})}var Aot=function(t){re.forEach(t.children(),function e(r){var n=t.children(r),i=t.node(r);if(n.length&&re.forEach(n,e),re.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)xH(t,"borderLeft","_bl",r,i,a),xH(t,"borderRight","_br",r,i,a)}})};function xH(t,e,r,n,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],l=ca.addDummyNode(t,"border",o,r);i[e][a]=l,t.setParent(l,n),s&&t.setEdge(s,l,{weight:1})}var SH={adjust:function(t){var e=t.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||EH(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(r){re.forEach(r.nodes(),function(n){j3(r.node(n))}),re.forEach(r.edges(),function(n){var i=r.edge(n);re.forEach(i.points,j3),re.has(i,"y")&&j3(i)})}(t),e!=="lr"&&e!=="rl"||(function(r){re.forEach(r.nodes(),function(n){G3(r.node(n))}),re.forEach(r.edges(),function(n){var i=r.edge(n);re.forEach(i.points,G3),re.has(i,"x")&&G3(i)})}(t),EH(t))}};function EH(t){re.forEach(t.nodes(),function(e){_H(t.node(e))}),re.forEach(t.edges(),function(e){_H(t.edge(e))})}function _H(t){var e=t.width;t.width=t.height,t.height=e}function j3(t){t.y=-t.y}function G3(t){var e=t.x;t.x=t.y,t.y=e}var Tot=function(t){var e={},r=re.filter(t.nodes(),function(s){return!t.children(s).length}),n=re.max(re.map(r,function(s){return t.node(s).rank})),i=re.map(re.range(n+1),function(){return[]});function a(s){if(!re.has(e,s)){e[s]=!0;var l=t.node(s);i[l.rank].push(s),re.forEach(t.successors(s),a)}}var o=re.sortBy(r,function(s){return t.node(s).rank});return re.forEach(o,a),i},Iot=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=Oot(t,e[n-1],e[n]);return r};function Oot(t,e,r){for(var n=re.zipObject(r,re.map(r,function(u,c){return c})),i=re.flatten(re.map(e,function(u){return re.sortBy(re.map(t.outEdges(u),function(c){return{pos:n[c.w],weight:t.edge(c).weight}}),"pos")}),!0),a=1;a<r.length;)a<<=1;var o=2*a-1;a-=1;var s=re.map(new Array(o),function(){return 0}),l=0;return re.forEach(i.forEach(function(u){var c=u.pos+a;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),s[c=c-1>>1]+=u.weight;l+=u.weight*f})),l}var Dot=function(t,e){return re.map(e,function(r){var n=t.inEdges(r);if(n.length){var i=re.reduce(n,function(a,o){var s=t.edge(o),l=t.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}return{v:r}})},Pot=function(t,e){var r={};return re.forEach(t,function(n,i){var a=r[n.v]={indegree:0,in:[],out:[],vs:[n.v],i};re.isUndefined(n.barycenter)||(a.barycenter=n.barycenter,a.weight=n.weight)}),re.forEach(e.edges(),function(n){var i=r[n.v],a=r[n.w];re.isUndefined(i)||re.isUndefined(a)||(a.indegree++,i.out.push(r[n.w]))}),function(n){var i=[];function a(l){return function(u){u.merged||(re.isUndefined(u.barycenter)||re.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&function(c,f){var h=0,d=0;c.weight&&(h+=c.barycenter*c.weight,d+=c.weight),f.weight&&(h+=f.barycenter*f.weight,d+=f.weight),c.vs=f.vs.concat(c.vs),c.barycenter=h/d,c.weight=d,c.i=Math.min(f.i,c.i),f.merged=!0}(l,u)}}function o(l){return function(u){u.in.push(l),--u.indegree==0&&n.push(u)}}for(;n.length;){var s=n.pop();i.push(s),re.forEach(s.in.reverse(),a(s)),re.forEach(s.out,o(s))}return re.map(re.filter(i,function(l){return!l.merged}),function(l){return re.pick(l,["vs","i","barycenter","weight"])})}(re.filter(r,function(n){return!n.indegree}))},Lot=function(t,e){var r=ca.partition(t,function(f){return re.has(f,"barycenter")}),n=r.lhs,i=re.sortBy(r.rhs,function(f){return-f.i}),a=[],o=0,s=0,l=0;n.sort((u=!!e,function(f,h){return f.barycenter<h.barycenter?-1:f.barycenter>h.barycenter?1:u?h.i-f.i:f.i-h.i})),l=CH(a,i,l),re.forEach(n,function(f){l+=f.vs.length,a.push(f.vs),o+=f.barycenter*f.weight,s+=f.weight,l=CH(a,i,l)});var u,c={vs:re.flatten(a,!0)};return s&&(c.barycenter=o/s,c.weight=s),c};function CH(t,e,r){for(var n;e.length&&(n=re.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}var Rot=function t(e,r,n,i){var a=e.children(r),o=e.node(r),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=re.filter(a,function(v){return v!==s&&v!==l}));var c=Dot(e,a);re.forEach(c,function(v){if(e.children(v.v).length){var g=t(e,v.v,n,i);u[v.v]=g,re.has(g,"barycenter")&&(m=v,y=g,re.isUndefined(m.barycenter)?(m.barycenter=y.barycenter,m.weight=y.weight):(m.barycenter=(m.barycenter*m.weight+y.barycenter*y.weight)/(m.weight+y.weight),m.weight+=y.weight))}var m,y});var f=Pot(c,n);(function(v,g){re.forEach(v,function(m){m.vs=re.flatten(m.vs.map(function(y){return g[y]?g[y].vs:y}),!0)})})(f,u);var h=Lot(f,i);if(s&&(h.vs=re.flatten([s,h.vs,l],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(l)[0]);re.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+p.order)/(h.weight+2),h.weight+=2}return h},Not=du.Graph,Fot=function(t,e,r){var n=function(a){for(var o;a.hasNode(o=re.uniqueId("_root")););return o}(t),i=new Not({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return t.node(a)});return re.forEach(t.nodes(),function(a){var o=t.node(a),s=t.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),re.forEach(t[r](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=re.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:t.edge(l).weight+f})}),re.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i},Bot=function(t,e,r){var n,i={};re.forEach(r,function(a){for(var o,s,l=t.parent(a);l;){if((o=t.parent(l))?(s=i[o],i[o]=l):(s=n,n=l),s&&s!==l)return void e.setEdge(s,l);l=o}})},$ot=du.Graph,zot=function(t){var e=ca.maxRank(t),r=kH(t,re.range(1,e+1),"inEdges"),n=kH(t,re.range(e-1,-1,-1),"outEdges"),i=Tot(t);MH(t,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){jot(s%2?r:n,s%4>=2),i=ca.buildLayerMatrix(t);var u=Iot(t,i);u<o&&(l=0,a=re.cloneDeep(i),o=u)}MH(t,a)};function kH(t,e,r){return re.map(e,function(n){return Fot(t,n,r)})}function jot(t,e){var r=new $ot;re.forEach(t,function(n){var i=n.graph().root,a=Rot(n,i,r,e);re.forEach(a.vs,function(o,s){n.node(o).order=s}),Bot(n,r,a.vs)})}function MH(t,e){re.forEach(e,function(r){re.forEach(r,function(n,i){t.node(n).order=i})})}var Got=du.Graph,Uot=function(t){var e,r=ca.buildLayerMatrix(t),n=re.merge(Wot(t,r),Vot(t,r)),i={};re.forEach(["u","d"],function(o){e=o==="u"?r:re.values(r).reverse(),re.forEach(["l","r"],function(s){s==="r"&&(e=re.map(e,function(f){return re.values(f).reverse()}));var l=(o==="u"?t.predecessors:t.successors).bind(t),u=Xot(t,e,n,l),c=Yot(t,e,u.root,u.align,s==="r");s==="r"&&(c=re.mapValues(c,function(f){return-f})),i[o+s]=c})});var a=qot(t,i);return Kot(i,a),Qot(i,t.graph().align)};function Wot(t,e){var r={};return re.reduce(e,function(n,i){var a=0,o=0,s=n.length,l=re.last(i);return re.forEach(i,function(u,c){var f=function(d,p){if(d.node(p).dummy)return re.find(d.predecessors(p),function(v){return d.node(v).dummy})}(t,u),h=f?t.node(f).order:s;(f||u===l)&&(re.forEach(i.slice(o,c+1),function(d){re.forEach(t.predecessors(d),function(p){var v=t.node(p),g=v.order;!(g<a||h<g)||v.dummy&&t.node(d).dummy||zfe(r,p,d)})}),o=c+1,a=h)}),i}),r}function Vot(t,e){var r={};function n(i,a,o,s,l){var u;re.forEach(re.range(a,o),function(c){u=i[c],t.node(u).dummy&&re.forEach(t.predecessors(u),function(f){var h=t.node(f);h.dummy&&(h.order<s||h.order>l)&&zfe(r,f,u)})})}return re.reduce(e,function(i,a){var o,s=-1,l=0;return re.forEach(a,function(u,c){if(t.node(u).dummy==="border"){var f=t.predecessors(u);f.length&&(o=t.node(f[0]).order,n(a,l,c,s,o),l=c,s=o)}n(a,l,a.length,o,i.length)}),a}),r}function zfe(t,e,r){if(e>r){var n=e;e=r,r=n}var i=t[e];i||(t[e]=i={}),i[r]=!0}function Hot(t,e,r){if(e>r){var n=e;e=r,r=n}return re.has(t[e],r)}function Xot(t,e,r,n){var i={},a={},o={};return re.forEach(e,function(s){re.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),re.forEach(e,function(s){var l=-1;re.forEach(s,function(u){var c=n(u);if(c.length)for(var f=((c=re.sortBy(c,function(v){return o[v]})).length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var p=c[h];a[u]===u&&l<o[p]&&!Hot(r,u,p)&&(a[p]=u,a[u]=i[u]=i[p],l=o[p])}})}),{root:i,align:a}}function Yot(t,e,r,n,i){var a={},o=function(u,c,f,h){var d=new Got,p=u.graph(),v=function(g,m,y){return function(w,b,x){var S,E=w.node(b),_=w.node(x),k=0;if(k+=E.width/2,re.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":S=-E.width/2;break;case"r":S=E.width/2}if(S&&(k+=y?S:-S),S=0,k+=(E.dummy?m:g)/2,k+=(_.dummy?m:g)/2,k+=_.width/2,re.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":S=_.width/2;break;case"r":S=-_.width/2}return S&&(k+=y?S:-S),S=0,k}}(p.nodesep,p.edgesep,h);return re.forEach(c,function(g){var m;re.forEach(g,function(y){var w=f[y];if(d.setNode(w),m){var b=f[m],x=d.edge(b,w);d.setEdge(b,w,Math.max(v(u,y,m),x||0))}m=y})}),d}(t,e,r,i),s=i?"borderLeft":"borderRight";function l(u,c){for(var f=o.nodes(),h=f.pop(),d={};h;)d[h]?u(h):(d[h]=!0,f.push(h),f=f.concat(c(h))),h=f.pop()}return l(function(u){a[u]=o.inEdges(u).reduce(function(c,f){return Math.max(c,a[f.v]+o.edge(f))},0)},o.predecessors.bind(o)),l(function(u){var c=o.outEdges(u).reduce(function(h,d){return Math.min(h,a[d.w]-o.edge(d))},Number.POSITIVE_INFINITY),f=t.node(u);c!==Number.POSITIVE_INFINITY&&f.borderType!==s&&(a[u]=Math.max(a[u],c))},o.successors.bind(o)),re.forEach(n,function(u){a[u]=a[r[u]]}),a}function qot(t,e){return re.minBy(re.values(e),function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return re.forIn(r,function(a,o){var s=function(l,u){return l.node(u).width}(t,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function Kot(t,e){var r=re.values(e),n=re.min(r),i=re.max(r);re.forEach(["u","d"],function(a){re.forEach(["l","r"],function(o){var s,l=a+o,u=t[l];if(u!==e){var c=re.values(u);(s=o==="l"?n-re.min(c):i-re.max(c))&&(t[l]=re.mapValues(u,function(f){return f+s}))}})})}function Qot(t,e){return re.mapValues(t.ul,function(r,n){if(e)return t[e.toLowerCase()][n];var i=re.sortBy(re.map(t,n));return(i[1]+i[2])/2})}var Zot=Uot,Jot=function(t){(function(e){var r=ca.buildLayerMatrix(e),n=e.graph().ranksep,i=0;re.forEach(r,function(a){var o=re.max(re.map(a,function(s){return e.node(s).height}));re.forEach(a,function(s){e.node(s).y=i+o/2}),i+=o+n})})(t=ca.asNonCompoundGraph(t)),re.forEach(Zot(t),function(e,r){t.node(r).x=e})},est=ca.normalizeRanks,tst=ca.removeEmptyRanks,ih=ca,rst=du.Graph,nst=function(t,e){var r=e&&e.debugTiming?ih.time:ih.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return function(i){var a=new rst({multigraph:!0,compound:!0}),o=W3(i.graph());return a.setGraph(re.merge({},ast,U3(o,ist),re.pick(o,ost))),re.forEach(i.nodes(),function(s){var l=W3(i.node(s));a.setNode(s,re.defaults(U3(l,sst),lst)),a.setParent(s,i.parent(s))}),re.forEach(i.edges(),function(s){var l=W3(i.edge(s));a.setEdge(s,re.merge({},cst,U3(l,ust),re.pick(l,fst)))}),a}(t)});r("  runLayout",function(){(function(i,a){a("    makeSpaceForEdgeLabels",function(){(function(o){var s=o.graph();s.ranksep/=2,re.forEach(o.edges(),function(l){var u=o.edge(l);u.minlen*=2,u.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?u.width+=u.labeloffset:u.height+=u.labeloffset)})})(i)}),a("    removeSelfEdges",function(){(function(o){re.forEach(o.edges(),function(s){if(s.v===s.w){var l=o.node(s.v);l.selfEdges||(l.selfEdges=[]),l.selfEdges.push({e:s,label:o.edge(s)}),o.removeEdge(s)}})})(i)}),a("    acyclic",function(){dH.run(i)}),a("    nestingGraph.run",function(){bH.run(i)}),a("    rank",function(){Cot(ih.asNonCompoundGraph(i))}),a("    injectEdgeLabelProxies",function(){(function(o){re.forEach(o.edges(),function(s){var l=o.edge(s);if(l.width&&l.height){var u=o.node(s.v),c={rank:(o.node(s.w).rank-u.rank)/2+u.rank,e:s};ih.addDummyNode(o,"edge-proxy",c,"_ep")}})})(i)}),a("    removeEmptyRanks",function(){tst(i)}),a("    nestingGraph.cleanup",function(){bH.cleanup(i)}),a("    normalizeRanks",function(){est(i)}),a("    assignRankMinMax",function(){(function(o){var s=0;re.forEach(o.nodes(),function(l){var u=o.node(l);u.borderTop&&(u.minRank=o.node(u.borderTop).rank,u.maxRank=o.node(u.borderBottom).rank,s=re.max(s,u.maxRank))}),o.graph().maxRank=s})(i)}),a("    removeEdgeLabelProxies",function(){(function(o){re.forEach(o.nodes(),function(s){var l=o.node(s);l.dummy==="edge-proxy"&&(o.edge(l.e).labelRank=l.rank,o.removeNode(s))})})(i)}),a("    normalize.run",function(){mH.run(i)}),a("    parentDummyChains",function(){Mot(i)}),a("    addBorderSegments",function(){Aot(i)}),a("    order",function(){zot(i)}),a("    insertSelfEdges",function(){(function(o){var s=ih.buildLayerMatrix(o);re.forEach(s,function(l){var u=0;re.forEach(l,function(c,f){var h=o.node(c);h.order=f+u,re.forEach(h.selfEdges,function(d){ih.addDummyNode(o,"selfedge",{width:d.label.width,height:d.label.height,rank:h.rank,order:f+ ++u,e:d.e,label:d.label},"_se")}),delete h.selfEdges})})})(i)}),a("    adjustCoordinateSystem",function(){SH.adjust(i)}),a("    position",function(){Jot(i)}),a("    positionSelfEdges",function(){(function(o){re.forEach(o.nodes(),function(s){var l=o.node(s);if(l.dummy==="selfedge"){var u=o.node(l.e.v),c=u.x+u.width/2,f=u.y,h=l.x-c,d=u.height/2;o.setEdge(l.e,l.label),o.removeNode(s),l.label.points=[{x:c+2*h/3,y:f-d},{x:c+5*h/6,y:f-d},{x:c+h,y:f},{x:c+5*h/6,y:f+d},{x:c+2*h/3,y:f+d}],l.label.x=l.x,l.label.y=l.y}})})(i)}),a("    removeBorderNodes",function(){(function(o){re.forEach(o.nodes(),function(s){if(o.children(s).length){var l=o.node(s),u=o.node(l.borderTop),c=o.node(l.borderBottom),f=o.node(re.last(l.borderLeft)),h=o.node(re.last(l.borderRight));l.width=Math.abs(h.x-f.x),l.height=Math.abs(c.y-u.y),l.x=f.x+l.width/2,l.y=u.y+l.height/2}}),re.forEach(o.nodes(),function(s){o.node(s).dummy==="border"&&o.removeNode(s)})})(i)}),a("    normalize.undo",function(){mH.undo(i)}),a("    fixupEdgeLabelCoords",function(){(function(o){re.forEach(o.edges(),function(s){var l=o.edge(s);if(re.has(l,"x"))switch(l.labelpos!=="l"&&l.labelpos!=="r"||(l.width-=l.labeloffset),l.labelpos){case"l":l.x-=l.width/2+l.labeloffset;break;case"r":l.x+=l.width/2+l.labeloffset}})})(i)}),a("    undoCoordinateSystem",function(){SH.undo(i)}),a("    translateGraph",function(){(function(o){var s=Number.POSITIVE_INFINITY,l=0,u=Number.POSITIVE_INFINITY,c=0,f=o.graph(),h=f.marginx||0,d=f.marginy||0;function p(v){var g=v.x,m=v.y,y=v.width,w=v.height;s=Math.min(s,g-y/2),l=Math.max(l,g+y/2),u=Math.min(u,m-w/2),c=Math.max(c,m+w/2)}re.forEach(o.nodes(),function(v){p(o.node(v))}),re.forEach(o.edges(),function(v){var g=o.edge(v);re.has(g,"x")&&p(g)}),s-=h,u-=d,re.forEach(o.nodes(),function(v){var g=o.node(v);g.x-=s,g.y-=u}),re.forEach(o.edges(),function(v){var g=o.edge(v);re.forEach(g.points,function(m){m.x-=s,m.y-=u}),re.has(g,"x")&&(g.x-=s),re.has(g,"y")&&(g.y-=u)}),f.width=l-s+h,f.height=c-u+d})(i)}),a("    assignNodeIntersects",function(){(function(o){re.forEach(o.edges(),function(s){var l,u,c=o.edge(s),f=o.node(s.v),h=o.node(s.w);c.points?(l=c.points[0],u=c.points[c.points.length-1]):(c.points=[],l=h,u=f),c.points.unshift(ih.intersectRect(f,l)),c.points.push(ih.intersectRect(h,u))})})(i)}),a("    reversePoints",function(){(function(o){re.forEach(o.edges(),function(s){var l=o.edge(s);l.reversed&&l.points.reverse()})})(i)}),a("    acyclic.undo",function(){dH.undo(i)})})(n,r)}),r("  updateInputGraph",function(){(function(i,a){re.forEach(i.nodes(),function(o){var s=i.node(o),l=a.node(o);s&&(s.x=l.x,s.y=l.y,a.children(o).length&&(s.width=l.width,s.height=l.height))}),re.forEach(i.edges(),function(o){var s=i.edge(o),l=a.edge(o);s.points=l.points,re.has(l,"x")&&(s.x=l.x,s.y=l.y)}),i.graph().width=a.graph().width,i.graph().height=a.graph().height})(t,n)})})},ist=["nodesep","edgesep","ranksep","marginx","marginy"],ast={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ost=["acyclicer","ranker","rankdir","align"],sst=["width","height"],lst={width:0,height:0},ust=["minlen","weight","width","height","labeloffset"],cst={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},fst=["labelpos"];function U3(t,e){return re.mapValues(re.pick(t,e),Number)}function W3(t){var e={};return re.forEach(t,function(r,n){e[n.toLowerCase()]=r}),e}var hst=du.Graph,jfe={graphlib:du,layout:nst,debug:{debugOrdering:function(t){var e=ca.buildLayerMatrix(t),r=new hst({compound:!0,multigraph:!0}).setGraph({});return re.forEach(t.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+t.node(n).rank)}),re.forEach(t.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),re.forEach(e,function(n,i){var a="layer"+i;r.setNode(a,{rank:"same"}),re.reduce(n,function(o,s){return r.setEdge(o,s,{style:"invis"}),s})}),r}},util:{time:ca.time,notime:ca.notime},version:"0.8.5"},dst=jfe.graphlib,pst=jfe.layout;class vst{constructor(e){this.cardinality=1,this.include=xv.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Po.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class gst{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function mst(t){const e=new gst;return t.nodes.map(r=>new vst(r)).forEach(r=>{e.nodes[r.name]=r,r.inputs.forEach(n=>{(function(i,a,o){o.name!==a.name&&i.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:a.name}))})(e,r,n)})}),e}class yst{constructor(e,r={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=xv.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Po.META,this.path=[],this.name=e,this.metaGraph=PF(e,Rm.META,r)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(e=>this.metaGraph.node(e))}leaves(){let e,r=[],n=[this];for(;n.length;){let i=n.shift();i.isGroupNode?(e=i.metaGraph,e.nodes().forEach(a=>n.push(e.node(a)))):r.push(i.name)}return r}}class wst{constructor(e,r){this.v=e,this.w=r,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,r){this.baseEdgeList.push(e)}}function Gfe(t,e={}){return new yst(t,e)}function Ufe(t,e){return new wst(t,e)}function PF(t,e,r){const n=r||{},i=new dst.Graph(n);return i.setGraph({name:t,rankdir:n.rankdir,type:e,align:n.align}),i}class bst{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=Gfe(Lm,this.graphOptions),this.index[Lm]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,r){this.index[e]=r}getBridgeGraph(e){const r=this.index[e];if(!r)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in r))return null;const n=r;if(n.bridgeGraph)return n.bridgeGraph;const i=PF(Dce,Rm.BRIDGE,this.graphOptions);if(n.bridgeGraph=i,!r.parentNode||!("metaGraph"in r.parentNode))return i;const a=r.parentNode;return[a.metaGraph,this.getBridgeGraph(a.name)].forEach(o=>{o.edges().filter(s=>s.v===e||s.w===e).forEach(s=>{const l=s.w===e;o.edge(s).baseEdgeList.forEach(u=>{const[c,f]=l?[u.w,s.v]:[u.v,s.w],h=this.getChildName(e,c),d={v:l?f:h,w:l?h:f};let p=i.edge(d);p||(p=Ufe(d.v,d.w),p.inbound=l,i.setEdge(d.v,d.w,p)),p.addBaseEdge(u,this)})})}),i}getChildName(e,r){let n=this.index[r];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+r)}getPredecessors(e){const r=this.index[e];if(!r)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(r,!0)}getSuccessors(e){const r=this.index[e];if(!r)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(r,!1)}getOneWayEdges(e,r){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const i=e.parentNode,a=i.metaGraph,o=this.getBridgeGraph(i.name);return AH(a,e,r,n),AH(o,e,r,n),n}}function xst(t,e){const{rankDirection:r,align:n}=e,i=new bst({rankdir:r,align:n});return function(a,o){Object.keys(o.nodes).forEach(s=>{const l=o.nodes[s],u=l.path;let c=a.root;c.depth=Math.max(u.length,c.depth);for(let f=0;f<u.length&&(c.depth=Math.max(c.depth,u.length-f),c.cardinality+=l.cardinality,f!==u.length-1);f++){const h=u[f];let d=a.node(h);d||(d=Gfe(h,a.graphOptions),d.path=l.path.slice(0,f+1),d.parentNode=c,a.setNode(h,d),c.metaGraph.setNode(h,d)),c=d}a.setNode(l.name,l),l.parentNode=c,c.metaGraph.setNode(l.name,l)})}(i,t),function(a,o){const s=a.getNodeMap();let l=[],u=[];const c=(f,h)=>{let d=0;for(;f;)h[d++]=f.name,f=f.parentNode;return d-1};o.edges.forEach(f=>{l=[],u=[];let h=c(o.nodes[f.v],l),d=c(o.nodes[f.w],u);for(;l[h]===u[d];)if(h--,d--,h<0||d<0)throw Error("No difference found between ancestor paths.");const p=s[l[h+1]],v=l[h],g=u[d];let m=p.metaGraph.edge(v,g);m||(m=Ufe(v,g),p.metaGraph.setEdge(v,g,m)),m.addBaseEdge(f,a)})}(i,t),i}function AH(t,e,r,n){(r?t.inEdges(e.name):t.outEdges(e.name)).forEach(i=>{const a=t.edge(i);n.push(a)})}class Sst{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new IH(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const r=this.index[e];if(r.node.type!==Po.META)return;const n=r,i=n.node.metaGraph,a=n.coreGraph;i.nodes().forEach(c=>{const f=this.getOrCreateRenderNodeByName(c);a.setNode(c,f)}),i.edges().forEach(c=>{const f=i.edge(c),h=new TH(f);a.setEdge(c.v,c.w,h)});const o=n.node.parentNode;if(!o)return;const s=this.getRenderNodeByName(o.name),l=(c,...f)=>f.concat([c?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach(c=>{const f=u.edge(c),h=!!i.node(c.w),[d,p]=h?[c.w,c.v]:[c.v,c.w],v=x=>{const S=h?{v:x,w:e}:{v:e,w:x};return s.coreGraph.edge(S)};let g=v(p);g||(g=v(l(h,p,o.name)));const m=l(h,e),y=l(h,p,e);let w=a.node(y);if(!w){let x=a.node(m);if(!x){const E={name:m,type:Po.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:xv.UNSPECIFIED,inbound:h,attr:{}};x=new N_(E),this.index[m]=x,a.setNode(m,x)}const S={name:y,type:Po.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:xv.UNSPECIFIED,inbound:h,attr:{}};w=new N_(S),this.index[y]=w,a.setNode(y,w),a.setParent(y,m),x.node.cardinality++}const b=new TH(f);b.adjoiningMetaEdge=g,h?a.setEdge(y,d,b):a.setEdge(d,y,b)})}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const r=this.getNodeByName(e);return r?(this.index[e]=r.isGroupNode?new IH(r,this.hierarchy.graphOptions):new N_(r),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class N_{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class TH{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class IH extends N_{constructor(e,r){super(e);const n=e.metaGraph.graph();r.compound=!0,this.coreGraph=PF(n.name,Rm.CORE,r)}}function Wfe(t,e){t.node.isGroupNode&&function(r,n){const i=oN(n);r.coreGraph.nodes().map(a=>r.coreGraph.node(a)).forEach(a=>{var o,s,l,u,c,f;const{height:h,width:d}=a;switch(a.node.type){case Po.NODE:Object.assign(a,i.nodeSize.node),a.height=h||i.nodeSize.node.height,a.width=d||i.nodeSize.node.width;break;case Po.BRIDGE:Object.assign(a,i.nodeSize.bridge);break;case Po.META:a.expanded?Wfe(a,n):(Object.assign(a,i.nodeSize.meta),a.height=i.nodeSize.meta.height,a.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+a.node.type)}if(!a.expanded){const p=a.attr;(function(v,g=!1){if(v.coreBox.width=v.width,v.coreBox.height=v.height,!g){const m=`${v.displayName}`.length,y=3;v.width=Math.max(v.coreBox.width,m*y)}})(a,n&&(a.node.type===0&&!!(!((s=(o=n==null?void 0:n.nodeSize)===null||o===void 0?void 0:o.meta)===null||s===void 0)&&s.width)||a.node.type===1&&(!!(!((u=(l=n==null?void 0:n.nodeSize)===null||l===void 0?void 0:l.node)===null||u===void 0)&&u.width)||!!p.width)||a.node.type===2&&!!(!((f=(c=n==null?void 0:n.nodeSize)===null||c===void 0?void 0:c.bridge)===null||f===void 0)&&f.width)))}})}(t,e),t.node.type===Po.META&&function(r,n){const i=oN(n),a=i.subScene.meta;Object.assign(r,a);const{nodeSep:o,rankSep:s,edgeSep:l,align:u}=i.graph.meta,c={nodesep:o,ranksep:s,edgesep:l,align:u};Object.assign(r.coreBox,function(d,p){const{ranksep:v,nodesep:g,edgesep:m,align:y}=p;Object.assign(d.graph(),{ranksep:v,nodesep:g,edgesep:m,align:y});const w=[];if(d.nodes().forEach(_=>{d.node(_).node.type!==Po.BRIDGE&&w.push(_)}),!w.length)return{width:0,height:0};pst(d);let b=1/0,x=1/0,S=-1/0,E=-1/0;return w.forEach(_=>{const k=d.node(_),C=.5*k.width,A=k.x-C,M=k.x+C;b=A<b?A:b,S=M>S?M:S;const T=.5*k.height,O=k.y-T,N=k.y+T;x=O<x?O:x,E=N>E?N:E}),d.edges().forEach(_=>{const k=d.edge(_),C=d.node(k.metaEdge.v),A=d.node(k.metaEdge.w);if(k.points.length===3&&function(O){let N=OH(O[0],O[1]);for(let R=1;R<O.length-1;R++){const B=OH(O[R],O[R+1]);if(Math.abs(B-N)>1)return!1;N=B}return!0}(k.points)){if(C!=null){const O=C.expanded?C.x:mN(C);k.points[0].x=O}if(A!=null){const O=A.expanded?A.x:mN(A);k.points[2].x=O}k.points=[k.points[0],k.points[1]]}const M=k.points[k.points.length-2];A!=null&&(k.points[k.points.length-1]=DH(M,A));const T=k.points[1];C!=null&&(k.points[0]=DH(T,C)),k.points.forEach(O=>{b=O.x<b?O.x:b,S=O.x>S?O.x:S,x=O.y<x?O.y:x,E=O.y>E?O.y:E})}),d.nodes().forEach(_=>{const k=d.node(_);k.x-=b,k.y-=x}),d.edges().forEach(_=>{d.edge(_).points.forEach(k=>{k.x-=b,k.y-=x})}),{width:S-b,height:E-x}}(r.coreGraph,c));let f=0;r.coreGraph.nodeCount()>0&&f++;const h=f<=1?0:f;r.coreBox.width+=h+h,r.coreBox.height=a.labelHeight+r.coreBox.height,r.width=r.coreBox.width+a.paddingLeft+a.paddingRight,r.height=r.paddingTop+r.coreBox.height+r.paddingBottom}(t,e)}function OH(t,e){const r=e.x-t.x,n=e.y-t.y;return 180*Math.atan(n/r)/Math.PI}function mN(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function DH(t,e){const r=e.expanded?e.x:mN(e),n=e.y,i=t.x-r,a=t.y-n;let o,s,l=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(a)*l/2>Math.abs(i)*u/2?(a<0&&(u=-u),o=a===0?0:u/2*i/a,s=u/2):(i<0&&(l=-l),o=l/2,s=i===0?0:l/2*a/i),{x:r+o,y:n+s}}function Est(t,e,r){var n,i,a,o;const s=t.nodes.filter((f,h,d)=>d.findIndex(p=>p.id===f.id)!==h).map(f=>f.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const l=function(f){const h={nodes:[]},d=f.compound,p=Object.keys(d||{}),v=new Map,g=(y,w=[])=>{if(v.has(y))return v.get(y);for(let b=0;b<p.length;b++){let x=p[b];if(d&&d[x].indexOf(y)!==-1)return w.unshift(x),g(x,w)}return w.length===0&&v.set(y,w),w},m=y=>f.edges.filter(w=>w.w===y).map(w=>({name:w.v}));return f.nodes.forEach(y=>{const w=y.id,b=[...g(w),w];let x=m(w);h.nodes.push({name:w,path:b,inputs:x,width:y.width,height:y.height,attr:Object.assign({},y)})}),h}(t),u=function(f,h){const d=(v,g)=>{for(let m of g.values())if(m.includes(v))return!0;return!1},p=(v,g=[])=>{if(Object.keys(v).length===0)return[...new Set(g)];const m=new Map(Object.keys(v).map(w=>[w,v[w]])),y={};for(let[w,b]of m)d(w,m)?y[w]=b:g=g.concat(w,b);return p(y,g)};return p(f).filter(v=>h.includes(v))}(t.compound||{},(e==null?void 0:e.expanded)||[]),c=function(f,h){return function(d){return new Sst(d)}(xst(mst(f),h))}(l,{rankDirection:((i=(n=r==null?void 0:r.graph)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.rankDir)||(e==null?void 0:e.rankDirection)||Xk.graph.meta.rankDir,align:((o=(a=r==null?void 0:r.graph)===null||a===void 0?void 0:a.meta)===null||o===void 0?void 0:o.align)||Xk.graph.meta.align});return function(f,h){h.forEach(d=>{const p=f.getRenderInfoNodes().find(m=>m.displayName===d);let v=p&&p.node&&p.node.name||"";const g=f.getRenderNodeByName(v);if(!g)throw new Error(`No nodes found: ${v}`);g.expanded=!0,f.buildSubHierarchy(v)})}(c,u),Wfe(c.root,r),Vfe(c.root)}function _st(t,e=!1){const r=JSON.parse(JSON.stringify(t)),n={nodes:[r],edges:[...r.edges]};return r.nodes.forEach(function i(a){(a.type===0||a.type===1)&&n.nodes.push(a),a.type===0&&(n.edges=n.edges.concat(a.edges)),Array.isArray(a.nodes)&&a.nodes.forEach(i)}),e&&n.nodes.forEach(i=>{const a=n.nodes.find(o=>o.id===i.parentNodeName);if(a){const o=a.x-a.width/2+a.paddingLeft,s=a.y-a.height/2+a.labelHeight+a.paddingTop;a.id!==Lm&&(i.x+=o,i.y+=s),i.type===0&&i.edges.forEach(l=>{l.points.forEach(u=>{u.x+=i.x-i.width/2+i.paddingLeft,u.y+=i.y-i.height/2+i.labelHeight+i.paddingTop})})}}),n}function Cst(t,e,r,n){var i,a;let o=[];const s=((i=r.find(f=>f.id===t))===null||i===void 0?void 0:i.path)||[],l=((a=r.find(f=>f.id===e))===null||a===void 0?void 0:a.path)||[],u=[Lm,...s].slice(0,s.length).reverse(),c=[Lm,...l].slice(0,l.length);return u.forEach(f=>{const h=r.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(p=>p.v===((n==null?void 0:n.v)||t)&&p.w===((n==null?void 0:n.w)||e))))}),c.filter(f=>!u.includes(f)).forEach(f=>{const h=r.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(p=>p.v===((n==null?void 0:n.v)||t)&&p.w===((n==null?void 0:n.w)||e))))}),o}function Vfe(t){const e=t.coreGraph.nodes().map(n=>t.coreGraph.node(n));return Object.assign(Object.assign({},PH(t)),{expanded:t.expanded,nodes:t.expanded?(r=e,r.map(n=>n.node.type===Po.META?Vfe(n):PH(n))):[],edges:t.expanded?kst(t):[]});var r}function PH(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function kst(t){return t.coreGraph.edges().map(e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:e})=>e.metaEdge).map(({edge:e,renderInfoEdge:r})=>{const n=function(i,a){const o=a.points.map(s=>Object.assign({},s));if(a.adjoiningMetaEdge){const s=a.adjoiningMetaEdge.points,l=a.metaEdge.inbound,u=l?s[s.length-1]:s[0],c=o[l?0:o.length-1],f=i.x-i.width/2,h=i.y-i.height/2,d=u.x-f,p=u.y-h,v=-i.paddingLeft,g=-(i.paddingTop+i.labelHeight);c.x=d+v,c.y=p+g}return o}(t,r);return{adjoiningEdge:r.adjoiningMetaEdge?{w:r.adjoiningMetaEdge.metaEdge.w,v:r.adjoiningMetaEdge.metaEdge.v}:null,inbound:r.metaEdge.inbound,w:e.w,v:e.v,points:n,weight:r.weight,baseEdgeList:r.metaEdge.baseEdgeList,parentNodeName:t.node.name}})}const Mst=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:Dce,get GraphType(){return Rm},get HierarchyNodeType(){return sN},get InclusionType(){return xv},LAYOUT_CONFIG:Xk,get NodeType(){return Po},ROOT_NAME:Lm,buildGraph:Est,flatGraph:_st,getEdges:Cst,mergeConfig:oN},Symbol.toStringTag,{value:"Module"})),Ast=su(Mst);var Tst=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fl=Me&&Me.__assign||function(){return Fl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fl.apply(this,arguments)},Og=Me&&Me.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.DagreCompoundLayout=void 0;var Ist=si,js=Ast,pE=Kn(),Ost=function(t){Tst(e,t);function e(r){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(r){var n=r.hiddenNodes||[],i=r.hiddenEdges||[],a=r.hiddenCombos||[];this.nodes=this.getDataByOrder((r.nodes||[]).concat(n)),this.edges=this.getDataByOrder((r.edges||[]).concat(i)),this.combos=(r.combos||[]).concat(a.map(function(o){return Fl(Fl({},o),{collapsed:!0})}))},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges;if(n){var a=r.getLayoutConfig(),o=a.graphDef,s=a.graphOption,l=a.graphSettings,u=(0,js.buildGraph)(o,s,l),c=(0,js.flatGraph)(u,!0);return this.updatePosition(c),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i}}},e.prototype.getNodePath=function(r){var n=this,i=n.nodes,a=n.combos,o=i.find(function(l){return l.id===r}),s=function(l,u){u===void 0&&(u=[]);var c=a.find(function(f){return f.id===l});return c?(u.unshift(l),c.parentId?s(c.parentId,u):u):u};return o&&o.comboId?s(o.comboId,[r]):[r]},e.prototype.getLayoutConfig=function(){var r,n,i,a=this,o=a.nodes,s=a.edges,l=a.combos,u=a.nodeSize,c=a.rankdir,f=a.align,h=a.edgesep,d=a.nodesep,p=a.ranksep,v=a.settings,g=(l||[]).reduce(function(R,B){var F=o.filter(function(L){return L.comboId===B.id}).map(function(L){return L.id}),D=(l||[]).filter(function(L){return L.parentId===B.id}).map(function(L){return L.id});return(F.length||D.length)&&(R[B.id]=Og(Og([],F,!0),D,!0)),R},{}),m;u?(0,pE.isArray)(u)?m=function(){return u}:m=function(){return[u,u]}:m=function(R){return R&&R.size?(0,pE.isArray)(R.size)?R.size:(0,pE.isObject)(R.size)?[R.size.width||40,R.size.height||40]:[R.size,R.size]:[40,40]};var y=function(R){return R&&R.size?(0,pE.isArray)(R.size)?R.size:[R.size,R.size]:[80,40]},w=y(l==null?void 0:l[0]),b=w[0],x=w[1],S=(n=(r=a.graphSettings)===null||r===void 0?void 0:r.subScene)===null||n===void 0?void 0:n.meta,E=((i=l.find(function(R){return!R.collapsed}))===null||i===void 0?void 0:i.padding)||[20,20,20,20],_=E[0],k=E[1],C=E[2],A=E[3],M={compound:g,nodes:Og([],(o||[]).map(function(R){var B=m(R),F=B[0],D=B[1];return Fl(Fl({},R),{width:F,height:D})}),!0),edges:Og([],(s||[]).map(function(R){return Fl(Fl({},R),{v:R.source,w:R.target})}),!0)},T={expanded:(l||[]).filter(function(R){return!R.collapsed}).map(function(R){return R.id})},O={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:h,rankSep:p}},subScene:{meta:{paddingTop:_||(S==null?void 0:S.paddingTop)||20,paddingRight:k||(S==null?void 0:S.paddingRight)||20,paddingBottom:C||(S==null?void 0:S.paddingBottom)||20,paddingLeft:A||(S==null?void 0:S.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:b,height:x}}},N=(0,js.mergeConfig)(v,Fl({},(0,js.mergeConfig)(O,js.LAYOUT_CONFIG)));return a.graphSettings=N,{graphDef:M,graphOption:T,graphSettings:N}},e.prototype.updatePosition=function(r){var n=r.nodes,i=r.edges;this.updateNodePosition(n,i),this.updateEdgePosition(n,i)},e.prototype.getBegin=function(r,n){var i=this,a=i.begin,o=[0,0];if(a){var s=1/0,l=1/0;r.forEach(function(u){s>u.x&&(s=u.x),l>u.y&&(l=u.y)}),n.forEach(function(u){u.points.forEach(function(c){s>c.x&&(s=c.x),l>c.y&&(l=c.y)})}),o[0]=a[0]-s,o[1]=a[1]-l}return o},e.prototype.updateNodePosition=function(r,n){var i=this,a=i.combos,o=i.nodes,s=i.edges,l=i.anchorPoint,u=i.graphSettings,c=this.getBegin(r,n);r.forEach(function(f){var h,d=f.x,p=f.y,v=f.id,g=f.type,m=f.coreBox;if(g===js.HierarchyNodeType.META&&v!==js.ROOT_NAME){var y=a.findIndex(function(E){return E.id===v}),w=(h=u==null?void 0:u.subScene)===null||h===void 0?void 0:h.meta;a[y].offsetX=d+c[0],a[y].offsetY=p+c[1],a[y].fixSize=[m.width,m.height],a[y].fixCollapseSize=[m.width,m.height],f.expanded?a[y].padding=[w==null?void 0:w.paddingTop,w==null?void 0:w.paddingRight,w==null?void 0:w.paddingBottom,w==null?void 0:w.paddingLeft]:a[y].padding=[0,0,0,0]}else if(g===js.HierarchyNodeType.OP){var y=o.findIndex(function(_){return _.id===v});if(o[y].x=d+c[0],o[y].y=p+c[1],l){var b=[],x=n.filter(function(_){return _.v===v}),S=n.filter(function(_){return _.w===v});x.length>0&&x.forEach(function(_){var k=_.points[0],C=(k.x-d)/f.width+.5,A=(k.y-p)/f.height+.5;b.push([C,A]),_.baseEdgeList.forEach(function(M){var T=s.find(function(O){return O.source===M.v&&O.target===M.w});T&&(T.sourceAnchor=b.length-1)})}),S.length>0&&S.forEach(function(_){var k=_.points[_.points.length-1],C=(k.x-d)/f.width+.5,A=(k.y-p)/f.height+.5;b.push([C,A]),_.baseEdgeList.forEach(function(M){var T=s.find(function(O){return O.source===M.v&&O.target===M.w});T&&(T.targetAnchor=b.length-1)})}),o[y].anchorPoints=b.length>0?b:o[y].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(r,n){var i=this,a=i.combos,o=i.edges,s=i.controlPoints,l=this.getBegin(r,n);s&&(a.forEach(function(u){u.inEdges=[],u.outEdges=[]}),o.forEach(function(u){var c,f,h,d,p=r.find(function(E){return E.id===u.source}),v=r.find(function(E){return E.id===u.target}),g=[],m=[];if(p&&v)m=(0,js.getEdges)(p==null?void 0:p.id,v==null?void 0:v.id,r);else if(!p||!v){var y=i.getNodePath(u.source),w=i.getNodePath(u.target),b=y.reverse().slice(p?0:1).find(function(E){return r.find(function(_){return _.id===E})}),x=w.reverse().slice(v?0:1).find(function(E){return r.find(function(_){return _.id===E})});p=r.find(function(E){return E.id===b}),v=r.find(function(E){return E.id===x}),m=(0,js.getEdges)(p==null?void 0:p.id,v==null?void 0:v.id,r,{v:u.source,w:u.target})}if(g=m.reduce(function(E,_){return Og(Og([],E,!0),_.points.map(function(k){return Fl(Fl({},k),{x:k.x+l[0],y:k.y+l[1]})}),!0)},[]),g=g.slice(1,-1),u.controlPoints=g,(v==null?void 0:v.type)===js.NodeType.META){var S=a.findIndex(function(E){return E.id===(v==null?void 0:v.id)});if(!a[S]||!((c=a[S].inEdges)===null||c===void 0)&&c.some(function(E){return E.source===p.id&&E.target===v.id}))return;(f=a[S].inEdges)===null||f===void 0||f.push({source:p.id,target:v.id,controlPoints:g})}if((p==null?void 0:p.type)===js.NodeType.META){var S=a.findIndex(function(_){return _.id===(p==null?void 0:p.id)});if(!a[S]||!((h=a[S].outEdges)===null||h===void 0)&&h.some(function(_){return _.source===p.id&&_.target===v.id}))return;(d=a[S].outEdges)===null||d===void 0||d.push({source:p.id,target:v.id,controlPoints:g})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(r){return r.every(function(n){return n.layoutOrder!==void 0})||r.forEach(function(n,i){n.layoutOrder=i}),r.sort(function(n,i){return n.layoutOrder-i.layoutOrder})},e}(Ist.Base);Ab.DagreCompoundLayout=Ost;var LF={},MT={},RF={};const Dst=Object.prototype.toString;function tM(t){const e=Dst.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function Pst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!tM(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,i=e.toIndex,a=i===void 0?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],s=n+1;s<a;s++)t[s]>o&&(o=t[s]);return o}function Lst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!tM(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,i=e.toIndex,a=i===void 0?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],s=n+1;s<a;s++)t[s]<o&&(o=t[s]);return o}function LH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(tM(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(e.output!==void 0){if(!tM(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=Lst(t),i=Pst(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?n:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),c=0;c<t.length;c++)r[c]=(t[c]-n)*u+o;return r}const vE=" ".repeat(2),Hfe=" ".repeat(4);function Rst(){return Xfe(this)}function Xfe(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${t.constructor.name} {
${vE}[
${Hfe}${Nst(t,r,n,i)}
${vE}]
${vE}rows: ${t.rows}
${vE}columns: ${t.columns}
}`}function Nst(t,e,r,n){const{rows:i,columns:a}=t,o=Math.min(i,e),s=Math.min(a,r),l=[];for(let u=0;u<o;u++){let c=[];for(let f=0;f<s;f++)c.push(Fst(t.get(u,f),n));l.push(`${c.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-r} more columns`),o!==i&&l.push(`... ${i-e} more rows`),l.join(`
${Hfe}`)}function Fst(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const n=t.toPrecision(e-2);if(n.length<=e)return n;const i=t.toExponential(e-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,e-o.length)+o}function Bst(t,e){t.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},t.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},t.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},t.add=function(n,i){return new e(n).add(i)},t.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},t.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},t.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},t.sub=function(n,i){return new e(n).sub(i)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},t.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},t.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},t.mul=function(n,i){return new e(n).mul(i)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},t.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},t.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},t.div=function(n,i){return new e(n).div(i)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},t.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},t.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},t.mod=function(n,i){return new e(n).mod(i)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},t.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},t.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},t.and=function(n,i){return new e(n).and(i)},t.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},t.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},t.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},t.or=function(n,i){return new e(n).or(i)},t.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},t.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},t.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},t.xor=function(n,i){return new e(n).xor(i)},t.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},t.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},t.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},t.leftShift=function(n,i){return new e(n).leftShift(i)},t.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},t.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},t.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},t.signPropagatingRightShift=function(n,i){return new e(n).signPropagatingRightShift(i)},t.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},t.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},t.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},t.rightShift=function(n,i){return new e(n).rightShift(i)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},t.not=function(n){return new e(n).not()},t.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},t.abs=function(n){return new e(n).abs()},t.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},t.acos=function(n){return new e(n).acos()},t.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},t.acosh=function(n){return new e(n).acosh()},t.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},t.asin=function(n){return new e(n).asin()},t.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},t.asinh=function(n){return new e(n).asinh()},t.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},t.atan=function(n){return new e(n).atan()},t.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},t.atanh=function(n){return new e(n).atanh()},t.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},t.cbrt=function(n){return new e(n).cbrt()},t.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},t.ceil=function(n){return new e(n).ceil()},t.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},t.clz32=function(n){return new e(n).clz32()},t.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},t.cos=function(n){return new e(n).cos()},t.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},t.cosh=function(n){return new e(n).cosh()},t.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},t.exp=function(n){return new e(n).exp()},t.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},t.expm1=function(n){return new e(n).expm1()},t.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},t.floor=function(n){return new e(n).floor()},t.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},t.fround=function(n){return new e(n).fround()},t.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},t.log=function(n){return new e(n).log()},t.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},t.log1p=function(n){return new e(n).log1p()},t.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},t.log10=function(n){return new e(n).log10()},t.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},t.log2=function(n){return new e(n).log2()},t.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},t.round=function(n){return new e(n).round()},t.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},t.sign=function(n){return new e(n).sign()},t.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},t.sin=function(n){return new e(n).sin()},t.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},t.sinh=function(n){return new e(n).sinh()},t.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},t.sqrt=function(n){return new e(n).sqrt()},t.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},t.tan=function(n){return new e(n).tan()},t.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},t.tanh=function(n){return new e(n).tanh()},t.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},t.trunc=function(n){return new e(n).trunc()},t.pow=function(n,i){return new e(n).pow(i)},t.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},t.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},t.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function Hs(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function Xs(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function Yg(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function qg(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Yfe(t,e,r){return{row:qfe(t,e),column:Kfe(t,r)}}function qfe(t,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");if(e.some(n=>n<0||n>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Kfe(t,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");if(e.some(n=>n<0||n>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function yN(t,e,r,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(gE("startRow",e),gE("endRow",r),gE("startColumn",n),gE("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function AT(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function gE(t,e){if(typeof e!="number")throw new TypeError(`${t} must be a number`)}function $st(t){let e=AT(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}function zst(t){let e=AT(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}function jst(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}function Gst(t){let e=AT(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}function Ust(t){let e=AT(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}function Wst(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}function Vst(t,e,r){const n=t.rows,i=t.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let c=0;c<i;c++)u=t.get(o,c)-r[o],s+=u,l+=u*u;e?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function Hst(t,e,r){const n=t.rows,i=t.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let c=0;c<n;c++)u=t.get(c,o)-r[o],s+=u,l+=u*u;e?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function Xst(t,e,r){const n=t.rows,i=t.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let c=0;c<i;c++)l=t.get(u,c)-r,o+=l,s+=l*l;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}function Yst(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}function qst(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}function Kst(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}function Qst(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let i=0;i<t.columns;i++)n+=Math.pow(t.get(r,i),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}function Zst(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}function Jst(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}function elt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}function tlt(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}function rlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}class Pr{static from1DArray(e,r,n){if(e*r!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Rt(e,r);for(let o=0;o<e;o++)for(let s=0;s<r;s++)a.set(o,s,n[o*r+s]);return a}static rowVector(e){let r=new Rt(1,e.length);for(let n=0;n<e.length;n++)r.set(0,n,e[n]);return r}static columnVector(e){let r=new Rt(e.length,1);for(let n=0;n<e.length;n++)r.set(n,0,e[n]);return r}static zeros(e,r){return new Rt(e,r)}static ones(e,r){return new Rt(e,r).fill(1)}static rand(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Rt(e,r);for(let o=0;o<e;o++)for(let s=0;s<r;s++)a.set(o,s,i());return a}static randInt(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Rt(e,r);for(let u=0;u<e;u++)for(let c=0;c<r;c++){let f=i+Math.round(o()*s);l.set(u,c,f)}return l}static eye(e,r,n){r===void 0&&(r=e),n===void 0&&(n=1);let i=Math.min(e,r),a=this.zeros(e,r);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(e,r,n){let i=e.length;r===void 0&&(r=i),n===void 0&&(n=r);let a=Math.min(i,r,n),o=this.zeros(r,n);for(let s=0;s<a;s++)o.set(s,s,e[s]);return o}static min(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,i=e.columns,a=new Rt(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(e.get(o,s),r.get(o,s)));return a}static max(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,i=e.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(e.get(o,s),r.get(o,s)));return a}static checkMatrix(e){return Pr.isMatrix(e)?e:new Rt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.call(this,r,n);return this}to1DArray(){let e=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.push(this.get(r,n));return e}to2DArray(){let e=[];for(let r=0;r<this.rows;r++){e.push([]);for(let n=0;n<this.columns;n++)e[r].push(this.get(r,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let r=0;r<=e;r++)if(this.get(e,r)!==this.get(r,e))return!1;return!0}return!1}isEchelonForm(){let e=0,r=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(a=!0,n=r):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,r=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(a=!0,n=r):(i=!1,a=!0);for(let o=r+1;o<this.rows;o++)this.get(e,o)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),r=0,n=0;for(;r<e.rows&&n<e.columns;){let i=r;for(let a=r;a<e.rows;a++)e.get(a,n)>e.get(i,n)&&(i=a);if(e.get(i,n)===0)n++;else{e.swapRows(r,i);let a=e.get(r,n);for(let o=n;o<e.columns;o++)e.set(r,o,e.get(r,o)/a);for(let o=r+1;o<e.rows;o++){let s=e.get(o,n)/e.get(r,n);e.set(o,n,0);for(let l=n+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(r,l)*s)}r++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),r=e.columns,n=e.rows,i=n-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)e.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=e.get(s,a);for(let u=a;u<r;u++){let c=e.get(s,u)-l*e.get(i,u);e.set(s,u,c)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:r=1,columns:n=1}=e;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Rt(this.rows*r,this.columns*n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(e){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,e);return this}neg(){return this.mulS(-1)}getRow(e){Hs(this,e);let r=[];for(let n=0;n<this.columns;n++)r.push(this.get(e,n));return r}getRowVector(e){return Rt.rowVector(this.getRow(e))}setRow(e,r){Hs(this,e),r=Yg(this,r);for(let n=0;n<this.columns;n++)this.set(e,n,r[n]);return this}swapRows(e,r){Hs(this,e),Hs(this,r);for(let n=0;n<this.columns;n++){let i=this.get(e,n);this.set(e,n,this.get(r,n)),this.set(r,n,i)}return this}getColumn(e){Xs(this,e);let r=[];for(let n=0;n<this.rows;n++)r.push(this.get(n,e));return r}getColumnVector(e){return Rt.columnVector(this.getColumn(e))}setColumn(e,r){Xs(this,e),r=qg(this,r);for(let n=0;n<this.rows;n++)this.set(n,e,r[n]);return this}swapColumns(e,r){Xs(this,e),Xs(this,r);for(let n=0;n<this.rows;n++){let i=this.get(n,e);this.set(n,e,this.get(n,r)),this.set(n,r,i)}return this}addRowVector(e){e=Yg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[n]);return this}subRowVector(e){e=Yg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[n]);return this}mulRowVector(e){e=Yg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[n]);return this}divRowVector(e){e=Yg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[n]);return this}addColumnVector(e){e=qg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[r]);return this}subColumnVector(e){e=qg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[r]);return this}mulColumnVector(e){e=qg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[r]);return this}divColumnVector(e){e=qg(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[r]);return this}mulRow(e,r){Hs(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*r);return this}mulColumn(e,r){Xs(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*r);return this}max(){let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>e&&(e=this.get(r,n));return e}maxIndex(){let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),r[0]=n,r[1]=i);return r}min(){let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<e&&(e=this.get(r,n));return e}minIndex(){let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),r[0]=n,r[1]=i);return r}maxRow(e){Hs(this,e);let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>r&&(r=this.get(e,n));return r}maxRowIndex(e){Hs(this,e);let r=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>r&&(r=this.get(e,i),n[1]=i);return n}minRow(e){Hs(this,e);let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<r&&(r=this.get(e,n));return r}minRowIndex(e){Hs(this,e);let r=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<r&&(r=this.get(e,i),n[1]=i);return n}maxColumn(e){Xs(this,e);let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>r&&(r=this.get(n,e));return r}maxColumnIndex(e){Xs(this,e);let r=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>r&&(r=this.get(i,e),n[0]=i);return n}minColumn(e){Xs(this,e);let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<r&&(r=this.get(n,e));return r}minColumnIndex(e){Xs(this,e);let r=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<r&&(r=this.get(i,e),n[0]=i);return n}diag(){let e=Math.min(this.rows,this.columns),r=[];for(let n=0;n<e;n++)r.push(this.get(n,n));return r}norm(e="frobenius"){let r=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)r=r+this.get(n,i)*this.get(n,i);return Math.sqrt(r)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e+=this.get(r,n),this.set(r,n,e);return this}dot(e){Pr.isMatrix(e)&&(e=e.to1DArray());let r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<r.length;i++)n+=r[i]*e[i];return n}mmul(e){e=Rt.checkMatrix(e);let r=this.rows,n=this.columns,i=e.columns,a=new Rt(r,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=e.get(l,s);for(let l=0;l<r;l++){let u=0;for(let c=0;c<n;c++)u+=this.get(l,c)*o[c];a.set(l,s,u)}}return a}strassen2x2(e){e=Rt.checkMatrix(e);let r=new Rt(2,2);const n=this.get(0,0),i=e.get(0,0),a=this.get(0,1),o=e.get(0,1),s=this.get(1,0),l=e.get(1,0),u=this.get(1,1),c=e.get(1,1),f=(n+u)*(i+c),h=(s+u)*i,d=n*(o-c),p=u*(l-i),v=(n+a)*c,g=(s-n)*(i+o),m=(a-u)*(l+c),y=f+p-v+m,w=d+v,b=h+p,x=f-h+d+g;return r.set(0,0,y),r.set(0,1,w),r.set(1,0,b),r.set(1,1,x),r}strassen3x3(e){e=Rt.checkMatrix(e);let r=new Rt(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),h=e.get(0,0),d=e.get(0,1),p=e.get(0,2),v=e.get(1,0),g=e.get(1,1),m=e.get(1,2),y=e.get(2,0),w=e.get(2,1),b=e.get(2,2),x=(n+i+a-o-s-c-f)*g,S=(n-o)*(-d+g),E=s*(-h+d+v-g-m-y+b),_=(-n+o+s)*(h-d+g),k=(o+s)*(-h+d),C=n*h,A=(-n+u+c)*(h-p+m),M=(-n+u)*(p-m),T=(u+c)*(-h+p),O=(n+i+a-s-l-u-c)*m,N=c*(-h+p+v-g-m-y+w),R=(-a+c+f)*(g+y-w),B=(a-f)*(g-w),F=a*y,D=(c+f)*(-y+w),L=(-a+s+l)*(m+y-b),G=(a-l)*(m-b),Y=(s+l)*(-y+b),Z=i*v,q=l*w,pe=o*p,Se=u*d,Ae=f*b,He=C+F+Z,ct=x+_+k+C+R+F+D,st=C+A+T+O+F+L+Y,Mt=S+E+_+C+F+L+G,yt=S+_+k+C+q,ar=F+L+G+Y+pe,Jt=C+A+M+N+R+B+F,er=R+B+F+D+Se,yr=C+A+M+T+Ae;return r.set(0,0,He),r.set(0,1,ct),r.set(0,2,st),r.set(1,0,Mt),r.set(1,1,yt),r.set(1,2,ar),r.set(2,0,Jt),r.set(2,1,er),r.set(2,2,yr),r}mmulStrassen(e){e=Rt.checkMatrix(e);let r=this.clone(),n=r.rows,i=r.columns,a=e.rows,o=e.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(f,h,d){let p=f.rows,v=f.columns;if(p===h&&v===d)return f;{let g=Pr.zeros(h,d);return g=g.setSubMatrix(f,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);r=s(r,l,u),e=s(e,l,u);function c(f,h,d,p){if(d<=512||p<=512)return f.mmul(h);d%2===1&&p%2===1?(f=s(f,d+1,p+1),h=s(h,d+1,p+1)):d%2===1?(f=s(f,d+1,p),h=s(h,d+1,p)):p%2===1&&(f=s(f,d,p+1),h=s(h,d,p+1));let v=parseInt(f.rows/2,10),g=parseInt(f.columns/2,10),m=f.subMatrix(0,v-1,0,g-1),y=h.subMatrix(0,v-1,0,g-1),w=f.subMatrix(0,v-1,g,f.columns-1),b=h.subMatrix(0,v-1,g,h.columns-1),x=f.subMatrix(v,f.rows-1,0,g-1),S=h.subMatrix(v,h.rows-1,0,g-1),E=f.subMatrix(v,f.rows-1,g,f.columns-1),_=h.subMatrix(v,h.rows-1,g,h.columns-1),k=c(Pr.add(m,E),Pr.add(y,_),v,g),C=c(Pr.add(x,E),y,v,g),A=c(m,Pr.sub(b,_),v,g),M=c(E,Pr.sub(S,y),v,g),T=c(Pr.add(m,w),_,v,g),O=c(Pr.sub(x,m),Pr.add(y,b),v,g),N=c(Pr.sub(w,E),Pr.add(S,_),v,g),R=Pr.add(k,M);R.sub(T),R.add(N);let B=Pr.add(A,T),F=Pr.add(C,M),D=Pr.sub(k,C);D.add(A),D.add(O);let L=Pr.zeros(2*R.rows,2*R.columns);return L=L.setSubMatrix(R,0,0),L=L.setSubMatrix(B,R.rows,0),L=L.setSubMatrix(F,0,R.columns),L=L.setSubMatrix(D,R.rows,R.columns),L.subMatrix(0,d-1,0,p-1)}return c(r,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let i=new Rt(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);LH(o,{min:r,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let i=new Rt(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);LH(o,{min:r,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let n=0;n<e;n++){let i=this.get(r,n),a=this.get(r,this.columns-1-n);this.set(r,n,a),this.set(r,this.columns-1-n,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let n=0;n<e;n++){let i=this.get(n,r),a=this.get(this.rows-1-n,r);this.set(n,r,a),this.set(this.rows-1-n,r,i)}return this}kroneckerProduct(e){e=Rt.checkMatrix(e);let r=this.rows,n=this.columns,i=e.rows,a=e.columns,o=new Rt(r*i,n*a);for(let s=0;s<r;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let c=0;c<a;c++)o.set(i*s+u,a*l+c,this.get(s,l)*e.get(u,c));return o}transpose(){let e=new Rt(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(n,r,this.get(r,n));return e}sortRows(e=RH){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(e));return this}sortColumns(e=RH){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(e));return this}subMatrix(e,r,n,i){yN(this,e,r,n,i);let a=new Rt(r-e+1,i-n+1);for(let o=e;o<=r;o++)for(let s=n;s<=i;s++)a.set(o-e,s-n,this.get(o,s));return a}subMatrixRow(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Rt(e.length,n-r+1);for(let a=0;a<e.length;a++)for(let o=r;o<=n;o++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,o-r,this.get(e[a],o))}return i}subMatrixColumn(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Rt(n-r+1,e.length);for(let a=0;a<e.length;a++)for(let o=r;o<=n;o++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(o-r,a,this.get(o,e[a]))}return i}setSubMatrix(e,r,n){e=Rt.checkMatrix(e);let i=r+e.rows-1,a=n+e.columns-1;yN(this,r,i,n,a);for(let o=0;o<e.rows;o++)for(let s=0;s<e.columns;s++)this.set(r+o,n+s,e.get(o,s));return this}selection(e,r){let n=Yfe(this,e,r),i=new Rt(e.length,r.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let e=Math.min(this.rows,this.columns),r=0;for(let n=0;n<e;n++)r+=this.get(n,n);return r}clone(){let e=new Rt(this.rows,this.columns);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(r,n,this.get(r,n));return e}sum(e){switch(e){case"row":return $st(this);case"column":return zst(this);case void 0:return jst(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return Gst(this);case"column":return Ust(this);case void 0:return Wst(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const r=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)r[n]/=this.columns;return r}case"column":{for(let n=0;n<this.columns;n++)r[n]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(e)}=r;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return Vst(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return Hst(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return Xst(this,n,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,r){typeof e=="object"&&(r=e,e=void 0);const n=this.variance(e,r);if(e===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=r;switch(e){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return Yst(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return qst(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return Kst(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let n=r.scale;switch(e){case"row":{if(n===void 0)n=Qst(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return Zst(this,n),this}case"column":{if(n===void 0)n=Jst(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return elt(this,n),this}case void 0:{if(n===void 0)n=tlt(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return rlt(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return Xfe(this,e)}}Pr.prototype.klass="Matrix";typeof Symbol<"u"&&(Pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Rst);function RH(t,e){return t-e}Pr.random=Pr.rand;Pr.randomInt=Pr.randInt;Pr.diagonal=Pr.diag;Pr.prototype.diagonal=Pr.prototype.diag;Pr.identity=Pr.eye;Pr.prototype.negate=Pr.prototype.neg;Pr.prototype.tensorProduct=Pr.prototype.kroneckerProduct;class Rt extends Pr{constructor(e,r){if(super(),Rt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>0)if(this.data=[],Number.isInteger(r)&&r>0)for(let n=0;n<e;n++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){const n=e;if(e=n.length,r=n[0].length,typeof r!="number"||r===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<e;i++){if(n[i].length!==r)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=r,this}set(e,r,n){return this.data[e][r]=n,this}get(e,r){return this.data[e][r]}removeRow(e){if(Hs(this,e),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(e,1),this.rows-=1,this}addRow(e,r){return r===void 0&&(r=e,e=this.rows),Hs(this,e,!0),r=Float64Array.from(Yg(this,r)),this.data.splice(e,0,r),this.rows+=1,this}removeColumn(e){if(Xs(this,e),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns-1);for(let i=0;i<e;i++)n[i]=this.data[r][i];for(let i=e+1;i<this.columns;i++)n[i-1]=this.data[r][i];this.data[r]=n}return this.columns-=1,this}addColumn(e,r){typeof r>"u"&&(r=e,e=this.columns),Xs(this,e,!0),r=qg(this,r);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<e;a++)i[a]=this.data[n][a];for(i[a++]=r[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}Bst(Pr,Rt);class $f extends Pr{constructor(e,r,n){super(),this.matrix=e,this.rows=r,this.columns=n}}class nlt extends $f{constructor(e,r){Xs(e,r),super(e,e.rows,1),this.column=r}set(e,r,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class ilt extends $f{constructor(e,r){r=Kfe(e,r),super(e,e.rows,r.length),this.columnIndices=r}set(e,r,n){return this.matrix.set(e,this.columnIndices[r],n),this}get(e,r){return this.matrix.get(e,this.columnIndices[r])}}class alt extends $f{constructor(e){super(e,e.rows,e.columns)}set(e,r,n){return this.matrix.set(e,this.columns-r-1,n),this}get(e,r){return this.matrix.get(e,this.columns-r-1)}}class olt extends $f{constructor(e){super(e,e.rows,e.columns)}set(e,r,n){return this.matrix.set(this.rows-e-1,r,n),this}get(e,r){return this.matrix.get(this.rows-e-1,r)}}class slt extends $f{constructor(e,r){Hs(e,r),super(e,1,e.columns),this.row=r}set(e,r,n){return this.matrix.set(this.row,r,n),this}get(e,r){return this.matrix.get(this.row,r)}}class llt extends $f{constructor(e,r){r=qfe(e,r),super(e,r.length,e.columns),this.rowIndices=r}set(e,r,n){return this.matrix.set(this.rowIndices[e],r,n),this}get(e,r){return this.matrix.get(this.rowIndices[e],r)}}class F_ extends $f{constructor(e,r,n){let i=Yfe(e,r,n);super(e,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(e,r,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[r],n),this}get(e,r){return this.matrix.get(this.rowIndices[e],this.columnIndices[r])}}class ult extends $f{constructor(e,r,n,i,a){yN(e,r,n,i,a),super(e,n-r+1,a-i+1),this.startRow=r,this.startColumn=i}set(e,r,n){return this.matrix.set(this.startRow+e,this.startColumn+r,n),this}get(e,r){return this.matrix.get(this.startRow+e,this.startColumn+r)}}class clt extends $f{constructor(e){super(e,e.columns,e.rows)}set(e,r,n){return this.matrix.set(r,e,n),this}get(e,r){return this.matrix.get(r,e)}}class Qfe extends Pr{constructor(e,r={}){const{rows:n=1}=r;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,r,n){let i=this._calculateIndex(e,r);return this.data[i]=n,this}get(e,r){let n=this._calculateIndex(e,r);return this.data[n]}_calculateIndex(e,r){return e*this.columns+r}}class ks extends Pr{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,r,n){return this.data[e][r]=n,this}get(e,r){return this.data[e][r]}}function flt(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new ks(t):new Qfe(t,e);throw new Error("the argument is not an array")}class rM{constructor(e){e=ks.checkMatrix(e);let r=e.clone(),n=r.rows,i=r.columns,a=new Float64Array(n),o=1,s,l,u,c,f,h,d,p,v;for(s=0;s<n;s++)a[s]=s;for(p=new Float64Array(n),l=0;l<i;l++){for(s=0;s<n;s++)p[s]=r.get(s,l);for(s=0;s<n;s++){for(v=Math.min(s,l),f=0,u=0;u<v;u++)f+=r.get(s,u)*p[u];p[s]-=f,r.set(s,l,p[s])}for(c=l,s=l+1;s<n;s++)Math.abs(p[s])>Math.abs(p[c])&&(c=s);if(c!==l){for(u=0;u<i;u++)h=r.get(c,u),r.set(c,u,r.get(l,u)),r.set(l,u,h);d=a[c],a[c]=a[l],a[l]=d,o=-o}if(l<n&&r.get(l,l)!==0)for(s=l+1;s<n;s++)r.set(s,l,r.get(s,l)/r.get(l,l))}this.LU=r,this.pivotVector=a,this.pivotSign=o}isSingular(){let e=this.LU,r=e.columns;for(let n=0;n<r;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=Rt.checkMatrix(e);let r=this.LU;if(r.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),o=r.columns,s,l,u;for(u=0;u<o;u++)for(s=u+1;s<o;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u));for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/r.get(u,u));for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let r=this.pivotSign,n=e.columns;for(let i=0;i<n;i++)r*=e.get(i,i);return r}get lowerTriangularMatrix(){let e=this.LU,r=e.rows,n=e.columns,i=new Rt(r,n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)a>o?i.set(a,o,e.get(a,o)):a===o?i.set(a,o,1):i.set(a,o,0);return i}get upperTriangularMatrix(){let e=this.LU,r=e.rows,n=e.columns,i=new Rt(r,n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)a<=o?i.set(a,o,e.get(a,o)):i.set(a,o,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function tf(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):e!==0?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class wN{constructor(e){e=ks.checkMatrix(e);let r=e.clone(),n=e.rows,i=e.columns,a=new Float64Array(i),o,s,l,u;for(l=0;l<i;l++){let c=0;for(o=l;o<n;o++)c=tf(c,r.get(o,l));if(c!==0){for(r.get(l,l)<0&&(c=-c),o=l;o<n;o++)r.set(o,l,r.get(o,l)/c);for(r.set(l,l,r.get(l,l)+1),s=l+1;s<i;s++){for(u=0,o=l;o<n;o++)u+=r.get(o,l)*r.get(o,s);for(u=-u/r.get(l,l),o=l;o<n;o++)r.set(o,s,r.get(o,s)+u*r.get(o,l))}}a[l]=-c}this.QR=r,this.Rdiag=a}solve(e){e=Rt.checkMatrix(e);let r=this.QR,n=r.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),o=r.columns,s,l,u,c;for(u=0;u<o;u++)for(l=0;l<i;l++){for(c=0,s=u;s<n;s++)c+=r.get(s,u)*a.get(s,l);for(c=-c/r.get(u,u),s=u;s<n;s++)a.set(s,l,a.get(s,l)+c*r.get(s,u))}for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/this.Rdiag[u]);for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u))}return a.subMatrix(0,o-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let r=0;r<e;r++)if(this.Rdiag[r]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,r=e.columns,n=new Rt(r,r),i,a;for(i=0;i<r;i++)for(a=0;a<r;a++)i<a?n.set(i,a,e.get(i,a)):i===a?n.set(i,a,this.Rdiag[i]):n.set(i,a,0);return n}get orthogonalMatrix(){let e=this.QR,r=e.rows,n=e.columns,i=new Rt(r,n),a,o,s,l;for(s=n-1;s>=0;s--){for(a=0;a<r;a++)i.set(a,s,0);for(i.set(s,s,1),o=s;o<n;o++)if(e.get(s,s)!==0){for(l=0,a=s;a<r;a++)l+=e.get(a,s)*i.get(a,o);for(l=-l/e.get(s,s),a=s;a<r;a++)i.set(a,o,i.get(a,o)+l*e.get(a,s))}}return i}}class Bm{constructor(e,r={}){e=ks.checkMatrix(e);let n=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=r;let l=!!a,u=!!o,c=!1,f;if(n<i)if(!s)f=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=e.transpose(),n=f.rows,i=f.columns,c=!0;let C=l;l=u,u=C}else f=e.clone();let h=Math.min(n,i),d=Math.min(n+1,i),p=new Float64Array(d),v=new Rt(n,h),g=new Rt(i,i),m=new Float64Array(i),y=new Float64Array(n),w=new Float64Array(d);for(let C=0;C<d;C++)w[C]=C;let b=Math.min(n-1,i),x=Math.max(0,Math.min(i-2,n)),S=Math.max(b,x);for(let C=0;C<S;C++){if(C<b){p[C]=0;for(let A=C;A<n;A++)p[C]=tf(p[C],f.get(A,C));if(p[C]!==0){f.get(C,C)<0&&(p[C]=-p[C]);for(let A=C;A<n;A++)f.set(A,C,f.get(A,C)/p[C]);f.set(C,C,f.get(C,C)+1)}p[C]=-p[C]}for(let A=C+1;A<i;A++){if(C<b&&p[C]!==0){let M=0;for(let T=C;T<n;T++)M+=f.get(T,C)*f.get(T,A);M=-M/f.get(C,C);for(let T=C;T<n;T++)f.set(T,A,f.get(T,A)+M*f.get(T,C))}m[A]=f.get(C,A)}if(l&&C<b)for(let A=C;A<n;A++)v.set(A,C,f.get(A,C));if(C<x){m[C]=0;for(let A=C+1;A<i;A++)m[C]=tf(m[C],m[A]);if(m[C]!==0){m[C+1]<0&&(m[C]=0-m[C]);for(let A=C+1;A<i;A++)m[A]/=m[C];m[C+1]+=1}if(m[C]=-m[C],C+1<n&&m[C]!==0){for(let A=C+1;A<n;A++)y[A]=0;for(let A=C+1;A<n;A++)for(let M=C+1;M<i;M++)y[A]+=m[M]*f.get(A,M);for(let A=C+1;A<i;A++){let M=-m[A]/m[C+1];for(let T=C+1;T<n;T++)f.set(T,A,f.get(T,A)+M*y[T])}}if(u)for(let A=C+1;A<i;A++)g.set(A,C,m[A])}}let E=Math.min(i,n+1);if(b<i&&(p[b]=f.get(b,b)),n<E&&(p[E-1]=0),x+1<E&&(m[x]=f.get(x,E-1)),m[E-1]=0,l){for(let C=b;C<h;C++){for(let A=0;A<n;A++)v.set(A,C,0);v.set(C,C,1)}for(let C=b-1;C>=0;C--)if(p[C]!==0){for(let A=C+1;A<h;A++){let M=0;for(let T=C;T<n;T++)M+=v.get(T,C)*v.get(T,A);M=-M/v.get(C,C);for(let T=C;T<n;T++)v.set(T,A,v.get(T,A)+M*v.get(T,C))}for(let A=C;A<n;A++)v.set(A,C,-v.get(A,C));v.set(C,C,1+v.get(C,C));for(let A=0;A<C-1;A++)v.set(A,C,0)}else{for(let A=0;A<n;A++)v.set(A,C,0);v.set(C,C,1)}}if(u)for(let C=i-1;C>=0;C--){if(C<x&&m[C]!==0)for(let A=C+1;A<i;A++){let M=0;for(let T=C+1;T<i;T++)M+=g.get(T,C)*g.get(T,A);M=-M/g.get(C+1,C);for(let T=C+1;T<i;T++)g.set(T,A,g.get(T,A)+M*g.get(T,C))}for(let A=0;A<i;A++)g.set(A,C,0);g.set(C,C,1)}let _=E-1,k=Number.EPSILON;for(;E>0;){let C,A;for(C=E-2;C>=-1&&C!==-1;C--){const M=Number.MIN_VALUE+k*Math.abs(p[C]+Math.abs(p[C+1]));if(Math.abs(m[C])<=M||Number.isNaN(m[C])){m[C]=0;break}}if(C===E-2)A=4;else{let M;for(M=E-1;M>=C&&M!==C;M--){let T=(M!==E?Math.abs(m[M]):0)+(M!==C+1?Math.abs(m[M-1]):0);if(Math.abs(p[M])<=k*T){p[M]=0;break}}M===C?A=3:M===E-1?A=1:(A=2,C=M)}switch(C++,A){case 1:{let M=m[E-2];m[E-2]=0;for(let T=E-2;T>=C;T--){let O=tf(p[T],M),N=p[T]/O,R=M/O;if(p[T]=O,T!==C&&(M=-R*m[T-1],m[T-1]=N*m[T-1]),u)for(let B=0;B<i;B++)O=N*g.get(B,T)+R*g.get(B,E-1),g.set(B,E-1,-R*g.get(B,T)+N*g.get(B,E-1)),g.set(B,T,O)}break}case 2:{let M=m[C-1];m[C-1]=0;for(let T=C;T<E;T++){let O=tf(p[T],M),N=p[T]/O,R=M/O;if(p[T]=O,M=-R*m[T],m[T]=N*m[T],l)for(let B=0;B<n;B++)O=N*v.get(B,T)+R*v.get(B,C-1),v.set(B,C-1,-R*v.get(B,T)+N*v.get(B,C-1)),v.set(B,T,O)}break}case 3:{const M=Math.max(Math.abs(p[E-1]),Math.abs(p[E-2]),Math.abs(m[E-2]),Math.abs(p[C]),Math.abs(m[C])),T=p[E-1]/M,O=p[E-2]/M,N=m[E-2]/M,R=p[C]/M,B=m[C]/M,F=((O+T)*(O-T)+N*N)/2,D=T*N*(T*N);let L=0;(F!==0||D!==0)&&(F<0?L=0-Math.sqrt(F*F+D):L=Math.sqrt(F*F+D),L=D/(F+L));let G=(R+T)*(R-T)+L,Y=R*B;for(let Z=C;Z<E-1;Z++){let q=tf(G,Y);q===0&&(q=Number.MIN_VALUE);let pe=G/q,Se=Y/q;if(Z!==C&&(m[Z-1]=q),G=pe*p[Z]+Se*m[Z],m[Z]=pe*m[Z]-Se*p[Z],Y=Se*p[Z+1],p[Z+1]=pe*p[Z+1],u)for(let Ae=0;Ae<i;Ae++)q=pe*g.get(Ae,Z)+Se*g.get(Ae,Z+1),g.set(Ae,Z+1,-Se*g.get(Ae,Z)+pe*g.get(Ae,Z+1)),g.set(Ae,Z,q);if(q=tf(G,Y),q===0&&(q=Number.MIN_VALUE),pe=G/q,Se=Y/q,p[Z]=q,G=pe*m[Z]+Se*p[Z+1],p[Z+1]=-Se*m[Z]+pe*p[Z+1],Y=Se*m[Z+1],m[Z+1]=pe*m[Z+1],l&&Z<n-1)for(let Ae=0;Ae<n;Ae++)q=pe*v.get(Ae,Z)+Se*v.get(Ae,Z+1),v.set(Ae,Z+1,-Se*v.get(Ae,Z)+pe*v.get(Ae,Z+1)),v.set(Ae,Z,q)}m[E-2]=G;break}case 4:{if(p[C]<=0&&(p[C]=p[C]<0?-p[C]:0,u))for(let M=0;M<=_;M++)g.set(M,C,-g.get(M,C));for(;C<_&&!(p[C]>=p[C+1]);){let M=p[C];if(p[C]=p[C+1],p[C+1]=M,u&&C<i-1)for(let T=0;T<i;T++)M=g.get(T,C+1),g.set(T,C+1,g.get(T,C)),g.set(T,C,M);if(l&&C<n-1)for(let T=0;T<n;T++)M=v.get(T,C+1),v.set(T,C+1,v.get(T,C)),v.set(T,C,M);C++}E--;break}}}if(c){let C=g;g=v,v=C}this.m=n,this.n=i,this.s=p,this.U=v,this.V=g}solve(e){let r=e,n=this.threshold,i=this.s.length,a=Rt.zeros(i,i);for(let h=0;h<i;h++)Math.abs(this.s[h])<=n?a.set(h,h,0):a.set(h,h,1/this.s[h]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,c=o.rows,f=Rt.zeros(u,c);for(let h=0;h<u;h++)for(let d=0;d<c;d++){let p=0;for(let v=0;v<i;v++)p+=l.get(h,v)*o.get(d,v);f.set(h,d,p)}return f.mmul(r)}solveForDiagonal(e){return this.solve(Rt.diag(e))}inverse(){let e=this.V,r=this.threshold,n=e.rows,i=e.columns,a=new Rt(n,this.s.length);for(let c=0;c<n;c++)for(let f=0;f<i;f++)Math.abs(this.s[f])>r&&a.set(c,f,e.get(c,f)/this.s[f]);let o=this.U,s=o.rows,l=o.columns,u=new Rt(n,s);for(let c=0;c<n;c++)for(let f=0;f<s;f++){let h=0;for(let d=0;d<l;d++)h+=a.get(c,d)*o.get(f,d);u.set(c,f,h)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>e&&r++;return r}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Rt.diag(this.s)}}function hlt(t,e=!1){return t=ks.checkMatrix(t),e?new Bm(t).inverse():Zfe(t,Rt.eye(t.rows))}function Zfe(t,e,r=!1){return t=ks.checkMatrix(t),e=ks.checkMatrix(e),r?new Bm(t).solve(e):t.isSquare()?new rM(t).solve(e):new wN(t).solve(e)}function B_(t){if(t=Rt.checkMatrix(t),t.isSquare()){let e,r,n,i;if(t.columns===2)return e=t.get(0,0),r=t.get(0,1),n=t.get(1,0),i=t.get(1,1),e*i-r*n;if(t.columns===3){let a,o,s;return a=new F_(t,[1,2],[1,2]),o=new F_(t,[1,2],[0,2]),s=new F_(t,[1,2],[0,1]),e=t.get(0,0),r=t.get(0,1),n=t.get(0,2),e*B_(a)-r*B_(o)+n*B_(s)}else return new rM(t).determinant}else throw Error("determinant can only be calculated for a square matrix")}function dlt(t,e){let r=[];for(let n=0;n<t;n++)n!==e&&r.push(n);return r}function plt(t,e,r,n=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(r,[0]);for(let o=0;o<a.rows;o++)Math.abs(a.get(o,0))<n&&a.set(o,0,0);return a.to1DArray()}}function vlt(t,e={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=e;t=Rt.checkMatrix(t);let i=t.rows,a=new Rt(i,i);for(let o=0;o<i;o++){let s=Rt.columnVector(t.getRow(o)),l=t.subMatrixRow(dlt(i,o)).transpose(),c=new Bm(l).solve(s),f=Rt.sub(s,l.mmul(c)).abs().max();a.setRow(o,plt(f,c,o,r,n))}return a}function glt(t,e=Number.EPSILON){t=Rt.checkMatrix(t);let r=new Bm(t,{autoTranspose:!0}),n=r.leftSingularVectors,i=r.rightSingularVectors,a=r.diagonal;for(let o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(Rt.diag(a).mmul(n.transpose()))}function mlt(t,e=t,r={}){t=new Rt(t);let n=!1;if(typeof e=="object"&&!Rt.isMatrix(e)&&!Array.isArray(e)?(r=e,e=t,n=!0):e=new Rt(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=r;i&&(t=t.center("column"),n||(e=e.center("column")));const a=t.transpose().mmul(e);for(let o=0;o<a.rows;o++)for(let s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(t.rows-1)));return a}function ylt(t,e=t,r={}){t=new Rt(t);let n=!1;if(typeof e=="object"&&!Rt.isMatrix(e)&&!Array.isArray(e)?(r=e,e=t,n=!0):e=new Rt(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=r;i&&(t.center("column"),n||e.center("column")),a&&(t.scale("column"),n||e.scale("column"));const o=t.standardDeviation("column",{unbiased:!0}),s=n?o:e.standardDeviation("column",{unbiased:!0}),l=t.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let c=0;c<l.columns;c++)l.set(u,c,l.get(u,c)*(1/(o[u]*s[c]))*(1/(t.rows-1)));return l}class NH{constructor(e,r={}){const{assumeSymmetric:n=!1}=r;if(e=ks.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");let i=e.columns,a=new Rt(i,i),o=new Float64Array(i),s=new Float64Array(i),l=e,u,c,f=!1;if(n?f=!0:f=e.isSymmetric(),f){for(u=0;u<i;u++)for(c=0;c<i;c++)a.set(u,c,l.get(u,c));wlt(i,s,o,a),blt(i,s,o,a)}else{let h=new Rt(i,i),d=new Float64Array(i);for(c=0;c<i;c++)for(u=0;u<i;u++)h.set(u,c,l.get(u,c));xlt(i,h,d,a),Slt(i,s,o,a,h)}this.n=i,this.e=s,this.d=o,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,r=this.e,n=this.d,i=new Rt(e,e),a,o;for(a=0;a<e;a++){for(o=0;o<e;o++)i.set(a,o,0);i.set(a,a,n[a]),r[a]>0?i.set(a,a+1,r[a]):r[a]<0&&i.set(a,a-1,r[a])}return i}}function wlt(t,e,r,n){let i,a,o,s,l,u,c,f;for(l=0;l<t;l++)r[l]=n.get(t-1,l);for(s=t-1;s>0;s--){for(f=0,o=0,u=0;u<s;u++)f=f+Math.abs(r[u]);if(f===0)for(e[s]=r[s-1],l=0;l<s;l++)r[l]=n.get(s-1,l),n.set(s,l,0),n.set(l,s,0);else{for(u=0;u<s;u++)r[u]/=f,o+=r[u]*r[u];for(i=r[s-1],a=Math.sqrt(o),i>0&&(a=-a),e[s]=f*a,o=o-i*a,r[s-1]=i-a,l=0;l<s;l++)e[l]=0;for(l=0;l<s;l++){for(i=r[l],n.set(l,s,i),a=e[l]+n.get(l,l)*i,u=l+1;u<=s-1;u++)a+=n.get(u,l)*r[u],e[u]+=n.get(u,l)*i;e[l]=a}for(i=0,l=0;l<s;l++)e[l]/=o,i+=e[l]*r[l];for(c=i/(o+o),l=0;l<s;l++)e[l]-=c*r[l];for(l=0;l<s;l++){for(i=r[l],a=e[l],u=l;u<=s-1;u++)n.set(u,l,n.get(u,l)-(i*e[u]+a*r[u]));r[l]=n.get(s-1,l),n.set(s,l,0)}}r[s]=o}for(s=0;s<t-1;s++){if(n.set(t-1,s,n.get(s,s)),n.set(s,s,1),o=r[s+1],o!==0){for(u=0;u<=s;u++)r[u]=n.get(u,s+1)/o;for(l=0;l<=s;l++){for(a=0,u=0;u<=s;u++)a+=n.get(u,s+1)*n.get(u,l);for(u=0;u<=s;u++)n.set(u,l,n.get(u,l)-a*r[u])}}for(u=0;u<=s;u++)n.set(u,s+1,0)}for(l=0;l<t;l++)r[l]=n.get(t-1,l),n.set(t-1,l,0);n.set(t-1,t-1,1),e[0]=0}function blt(t,e,r,n){let i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;let b=0,x=0,S=Number.EPSILON;for(u=0;u<t;u++){for(x=Math.max(x,Math.abs(r[u])+Math.abs(e[u])),c=u;c<t&&!(Math.abs(e[c])<=S*x);)c++;if(c>u)do{for(i=r[u],f=(r[u+1]-i)/(2*e[u]),h=tf(f,1),f<0&&(h=-h),r[u]=e[u]/(f+h),r[u+1]=e[u]*(f+h),d=r[u+1],a=i-r[u],o=u+2;o<t;o++)r[o]-=a;for(b=b+a,f=r[c],p=1,v=p,g=p,m=e[u+1],y=0,w=0,o=c-1;o>=u;o--)for(g=v,v=p,w=y,i=p*e[o],a=p*f,h=tf(f,e[o]),e[o+1]=y*h,y=e[o]/h,p=f/h,f=p*r[o]-y*i,r[o+1]=a+y*(p*i+y*r[o]),l=0;l<t;l++)a=n.get(l,o+1),n.set(l,o+1,y*n.get(l,o)+p*a),n.set(l,o,p*n.get(l,o)-y*a);f=-y*w*g*m*e[u]/d,e[u]=y*f,r[u]=p*f}while(Math.abs(e[u])>S*x);r[u]=r[u]+b,e[u]=0}for(o=0;o<t-1;o++){for(l=o,f=r[o],s=o+1;s<t;s++)r[s]<f&&(l=s,f=r[s]);if(l!==o)for(r[l]=r[o],r[o]=f,s=0;s<t;s++)f=n.get(s,o),n.set(s,o,n.get(s,l)),n.set(s,l,f)}}function xlt(t,e,r,n){let i=0,a=t-1,o,s,l,u,c,f,h;for(f=i+1;f<=a-1;f++){for(h=0,u=f;u<=a;u++)h=h+Math.abs(e.get(u,f-1));if(h!==0){for(l=0,u=a;u>=f;u--)r[u]=e.get(u,f-1)/h,l+=r[u]*r[u];for(s=Math.sqrt(l),r[f]>0&&(s=-s),l=l-r[f]*s,r[f]=r[f]-s,c=f;c<t;c++){for(o=0,u=a;u>=f;u--)o+=r[u]*e.get(u,c);for(o=o/l,u=f;u<=a;u++)e.set(u,c,e.get(u,c)-o*r[u])}for(u=0;u<=a;u++){for(o=0,c=a;c>=f;c--)o+=r[c]*e.get(u,c);for(o=o/l,c=f;c<=a;c++)e.set(u,c,e.get(u,c)-o*r[c])}r[f]=h*r[f],e.set(f,f-1,h*s)}}for(u=0;u<t;u++)for(c=0;c<t;c++)n.set(u,c,u===c?1:0);for(f=a-1;f>=i+1;f--)if(e.get(f,f-1)!==0){for(u=f+1;u<=a;u++)r[u]=e.get(u,f-1);for(c=f;c<=a;c++){for(s=0,u=f;u<=a;u++)s+=r[u]*n.get(u,c);for(s=s/r[f]/e.get(f,f-1),u=f;u<=a;u++)n.set(u,c,n.get(u,c)+s*r[u])}}}function Slt(t,e,r,n,i){let a=t-1,o=0,s=t-1,l=Number.EPSILON,u=0,c=0,f=0,h=0,d=0,p=0,v=0,g=0,m,y,w,b,x,S,E,_,k,C,A,M,T,O,N;for(m=0;m<t;m++)for((m<o||m>s)&&(r[m]=i.get(m,m),e[m]=0),y=Math.max(m-1,0);y<t;y++)c=c+Math.abs(i.get(m,y));for(;a>=o;){for(b=a;b>o&&(p=Math.abs(i.get(b-1,b-1))+Math.abs(i.get(b,b)),p===0&&(p=c),!(Math.abs(i.get(b,b-1))<l*p));)b--;if(b===a)i.set(a,a,i.get(a,a)+u),r[a]=i.get(a,a),e[a]=0,a--,g=0;else if(b===a-1){if(E=i.get(a,a-1)*i.get(a-1,a),f=(i.get(a-1,a-1)-i.get(a,a))/2,h=f*f+E,v=Math.sqrt(Math.abs(h)),i.set(a,a,i.get(a,a)+u),i.set(a-1,a-1,i.get(a-1,a-1)+u),_=i.get(a,a),h>=0){for(v=f>=0?f+v:f-v,r[a-1]=_+v,r[a]=r[a-1],v!==0&&(r[a]=_-E/v),e[a-1]=0,e[a]=0,_=i.get(a,a-1),p=Math.abs(_)+Math.abs(v),f=_/p,h=v/p,d=Math.sqrt(f*f+h*h),f=f/d,h=h/d,y=a-1;y<t;y++)v=i.get(a-1,y),i.set(a-1,y,h*v+f*i.get(a,y)),i.set(a,y,h*i.get(a,y)-f*v);for(m=0;m<=a;m++)v=i.get(m,a-1),i.set(m,a-1,h*v+f*i.get(m,a)),i.set(m,a,h*i.get(m,a)-f*v);for(m=o;m<=s;m++)v=n.get(m,a-1),n.set(m,a-1,h*v+f*n.get(m,a)),n.set(m,a,h*n.get(m,a)-f*v)}else r[a-1]=_+f,r[a]=_+f,e[a-1]=v,e[a]=-v;a=a-2,g=0}else{if(_=i.get(a,a),k=0,E=0,b<a&&(k=i.get(a-1,a-1),E=i.get(a,a-1)*i.get(a-1,a)),g===10){for(u+=_,m=o;m<=a;m++)i.set(m,m,i.get(m,m)-_);p=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),_=k=.75*p,E=-.4375*p*p}if(g===30&&(p=(k-_)/2,p=p*p+E,p>0)){for(p=Math.sqrt(p),k<_&&(p=-p),p=_-E/((k-_)/2+p),m=o;m<=a;m++)i.set(m,m,i.get(m,m)-p);u+=p,_=k=E=.964}for(g=g+1,x=a-2;x>=b&&(v=i.get(x,x),d=_-v,p=k-v,f=(d*p-E)/i.get(x+1,x)+i.get(x,x+1),h=i.get(x+1,x+1)-v-d-p,d=i.get(x+2,x+1),p=Math.abs(f)+Math.abs(h)+Math.abs(d),f=f/p,h=h/p,d=d/p,!(x===b||Math.abs(i.get(x,x-1))*(Math.abs(h)+Math.abs(d))<l*(Math.abs(f)*(Math.abs(i.get(x-1,x-1))+Math.abs(v)+Math.abs(i.get(x+1,x+1))))));)x--;for(m=x+2;m<=a;m++)i.set(m,m-2,0),m>x+2&&i.set(m,m-3,0);for(w=x;w<=a-1&&(O=w!==a-1,w!==x&&(f=i.get(w,w-1),h=i.get(w+1,w-1),d=O?i.get(w+2,w-1):0,_=Math.abs(f)+Math.abs(h)+Math.abs(d),_!==0&&(f=f/_,h=h/_,d=d/_)),_!==0);w++)if(p=Math.sqrt(f*f+h*h+d*d),f<0&&(p=-p),p!==0){for(w!==x?i.set(w,w-1,-p*_):b!==x&&i.set(w,w-1,-i.get(w,w-1)),f=f+p,_=f/p,k=h/p,v=d/p,h=h/f,d=d/f,y=w;y<t;y++)f=i.get(w,y)+h*i.get(w+1,y),O&&(f=f+d*i.get(w+2,y),i.set(w+2,y,i.get(w+2,y)-f*v)),i.set(w,y,i.get(w,y)-f*_),i.set(w+1,y,i.get(w+1,y)-f*k);for(m=0;m<=Math.min(a,w+3);m++)f=_*i.get(m,w)+k*i.get(m,w+1),O&&(f=f+v*i.get(m,w+2),i.set(m,w+2,i.get(m,w+2)-f*d)),i.set(m,w,i.get(m,w)-f),i.set(m,w+1,i.get(m,w+1)-f*h);for(m=o;m<=s;m++)f=_*n.get(m,w)+k*n.get(m,w+1),O&&(f=f+v*n.get(m,w+2),n.set(m,w+2,n.get(m,w+2)-f*d)),n.set(m,w,n.get(m,w)-f),n.set(m,w+1,n.get(m,w+1)-f*h)}}}if(c!==0){for(a=t-1;a>=0;a--)if(f=r[a],h=e[a],h===0)for(b=a,i.set(a,a,1),m=a-1;m>=0;m--){for(E=i.get(m,m)-f,d=0,y=b;y<=a;y++)d=d+i.get(m,y)*i.get(y,a);if(e[m]<0)v=E,p=d;else if(b=m,e[m]===0?i.set(m,a,E!==0?-d/E:-d/(l*c)):(_=i.get(m,m+1),k=i.get(m+1,m),h=(r[m]-f)*(r[m]-f)+e[m]*e[m],S=(_*p-v*d)/h,i.set(m,a,S),i.set(m+1,a,Math.abs(_)>Math.abs(v)?(-d-E*S)/_:(-p-k*S)/v)),S=Math.abs(i.get(m,a)),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a,i.get(y,a)/S)}else if(h<0)for(b=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,h/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-f)/i.get(a,a-1))):(N=mE(0,-i.get(a-1,a),i.get(a-1,a-1)-f,h),i.set(a-1,a-1,N[0]),i.set(a-1,a,N[1])),i.set(a,a-1,0),i.set(a,a,1),m=a-2;m>=0;m--){for(C=0,A=0,y=b;y<=a;y++)C=C+i.get(m,y)*i.get(y,a-1),A=A+i.get(m,y)*i.get(y,a);if(E=i.get(m,m)-f,e[m]<0)v=E,d=C,p=A;else if(b=m,e[m]===0?(N=mE(-C,-A,E,h),i.set(m,a-1,N[0]),i.set(m,a,N[1])):(_=i.get(m,m+1),k=i.get(m+1,m),M=(r[m]-f)*(r[m]-f)+e[m]*e[m]-h*h,T=(r[m]-f)*2*h,M===0&&T===0&&(M=l*c*(Math.abs(E)+Math.abs(h)+Math.abs(_)+Math.abs(k)+Math.abs(v))),N=mE(_*d-v*C+h*A,_*p-v*A-h*C,M,T),i.set(m,a-1,N[0]),i.set(m,a,N[1]),Math.abs(_)>Math.abs(v)+Math.abs(h)?(i.set(m+1,a-1,(-C-E*i.get(m,a-1)+h*i.get(m,a))/_),i.set(m+1,a,(-A-E*i.get(m,a)-h*i.get(m,a-1))/_)):(N=mE(-d-k*i.get(m,a-1),-p-k*i.get(m,a),v,h),i.set(m+1,a-1,N[0]),i.set(m+1,a,N[1]))),S=Math.max(Math.abs(i.get(m,a-1)),Math.abs(i.get(m,a))),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a-1,i.get(y,a-1)/S),i.set(y,a,i.get(y,a)/S)}for(m=0;m<t;m++)if(m<o||m>s)for(y=m;y<t;y++)n.set(m,y,i.get(m,y));for(y=t-1;y>=o;y--)for(m=o;m<=s;m++){for(v=0,w=o;w<=Math.min(y,s);w++)v=v+n.get(m,w)*i.get(w,y);n.set(m,y,v)}}}function mE(t,e,r,n){let i,a;return Math.abs(r)>Math.abs(n)?(i=n/r,a=r+i*n,[(t+i*e)/a,(e-i*t)/a]):(i=r/n,a=n+i*r,[(i*t+e)/a,(i*e-t)/a])}class FH{constructor(e){if(e=ks.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let r=e,n=r.rows,i=new Rt(n,n),a=!0,o,s,l;for(s=0;s<n;s++){let u=0;for(l=0;l<s;l++){let c=0;for(o=0;o<l;o++)c+=i.get(l,o)*i.get(s,o);c=(r.get(s,l)-c)/i.get(l,l),i.set(s,l,c),u=u+c*c}for(u=r.get(s,s)-u,a&=u>0,i.set(s,s,Math.sqrt(Math.max(u,0))),l=s+1;l<n;l++)i.set(s,l,0)}this.L=i,this.positiveDefinite=!!a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=ks.checkMatrix(e);let r=this.L,n=r.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),o,s,l;for(l=0;l<n;l++)for(s=0;s<i;s++){for(o=0;o<l;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*r.get(l,o));a.set(l,s,a.get(l,s)/r.get(l,l))}for(l=n-1;l>=0;l--)for(s=0;s<i;s++){for(o=l+1;o<n;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*r.get(o,l));a.set(l,s,a.get(l,s)/r.get(l,l))}return a}get lowerTriangularMatrix(){return this.L}}class BH{constructor(e,r={}){e=ks.checkMatrix(e);let{Y:n}=r;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=r;let s;if(n){if(Array.isArray(n)&&typeof n[0]=="number"?n=Rt.columnVector(n):n=ks.checkMatrix(n),!n.isColumnVector()||n.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");s=n}else s=e.getColumnVector(0);let l=1,u,c,f,h;for(let d=0;d<a&&l>o;d++)f=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),f=f.div(f.norm()),u=e.mmul(f).div(f.transpose().mmul(f).get(0,0)),d>0&&(l=u.clone().sub(h).pow(2).sum()),h=u.clone(),n?(c=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),s=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=u;if(n){let d=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));d=d.div(d.norm());let p=e.clone().sub(u.clone().mmul(d.transpose())),v=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),g=n.clone().sub(u.clone().mulS(v.get(0,0)).mmul(c.transpose()));this.t=u,this.p=d.transpose(),this.w=f.transpose(),this.q=c,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=p,this.yResidual=g,this.betas=v}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),i?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(f.transpose()))}}const Elt=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:Pr,CHO:FH,CholeskyDecomposition:FH,EVD:NH,EigenvalueDecomposition:NH,LU:rM,LuDecomposition:rM,Matrix:Rt,MatrixColumnSelectionView:ilt,MatrixColumnView:nlt,MatrixFlipColumnView:alt,MatrixFlipRowView:olt,MatrixRowSelectionView:llt,MatrixRowView:slt,MatrixSelectionView:F_,MatrixSubView:ult,MatrixTransposeView:clt,NIPALS:BH,Nipals:BH,QR:wN,QrDecomposition:wN,SVD:Bm,SingularValueDecomposition:Bm,WrapperMatrix1D:Qfe,WrapperMatrix2D:ks,correlation:ylt,covariance:mlt,default:Rt,determinant:B_,inverse:hlt,linearDependencies:vlt,pseudoInverse:glt,solve:Zfe,wrap:flt},Symbol.toStringTag,{value:"Module"})),Jfe=su(Elt);Object.defineProperty(RF,"__esModule",{value:!0});var Zy=Jfe,_lt=function(){function t(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return t.prototype.layout=function(){var e=this,r=e.dimension,n=e.distances,i=e.linkDistance;try{var a=Zy.Matrix.mul(Zy.Matrix.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Zy.SingularValueDecomposition(a),c=Zy.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(v){return Zy.Matrix.mul([v],[c]).toJSON()[0].splice(0,r)})}catch{for(var f=[],h=0;h<n.length;h++){var d=Math.random()*i,p=Math.random()*i;f.push([d,p])}return f}},t}();RF.default=_lt;var NF={};Object.defineProperty(NF,"__esModule",{value:!0});var Clt=800,klt=function(){function t(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return t.prototype.layout=function(){var e=this,r=e.positions,n=[],i=e.iterations,a=e.width/10;e.maxDisplace=a,e.disp=n;for(var o=0;o<i;o++)r.forEach(function(s,l){n[l]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return r},t.prototype.getRepulsion=function(){var e=this,r=e.positions,n=e.nodes,i=e.disp,a=e.k,o=e.radii||[];r.forEach(function(s,l){i[l]={x:0,y:0},r.forEach(function(u,c){if(l!==c&&o[l]===o[c]){var f=s[0]-u[0],h=s[1]-u[1],d=Math.sqrt(f*f+h*h);if(d===0){d=1;var p=l>c?1:-1;f=.01*p,h=.01*p}if(d<e.nodeSizeFunc(n[l])/2+e.nodeSizeFunc(n[c])/2){var v=a*a/d;i[l].x+=f/d*v,i[l].y+=h/d*v}}})})},t.prototype.updatePositions=function(){var e=this,r=e.positions,n=e.disp,i=e.speed,a=e.strictRadial,o=e.focusID,s=e.maxDisplace||e.width/10;a&&n.forEach(function(u,c){var f=r[c][0]-r[o][0],h=r[c][1]-r[o][1],d=Math.sqrt(f*f+h*h),p=h/d,v=-f/d,g=Math.sqrt(u.x*u.x+u.y*u.y),m=Math.acos((p*u.x+v*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,p*=-1,v*=-1);var y=Math.cos(m)*g;u.x=p*y,u.y=v*y});var l=e.radii;r.forEach(function(u,c){if(c!==o){var f=Math.sqrt(n[c].x*n[c].x+n[c].y*n[c].y);if(f>0&&c!==o){var h=Math.min(s*(i/Clt),f);if(u[0]+=n[c].x/f*h,u[1]+=n[c].y/f*h,a){var d=u[0]-r[o][0],p=u[1]-r[o][1],v=Math.sqrt(d*d+p*p);d=d/v*l[c],p=p/v*l[c],u[0]=r[o][0]+d,u[1]=r[o][1]+p}}}})},t}();NF.default=klt;var Mlt=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ehe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MT,"__esModule",{value:!0});MT.RadialLayout=void 0;var Gs=Kn(),Alt=si,Tlt=ehe(RF),Ilt=ehe(NF);function Olt(t){for(var e=t.length,r=t[0].length,n=[],i=0;i<e;i++){for(var a=[],o=0;o<r;o++)t[i][o]!==0?a.push(1/(t[i][o]*t[i][o])):a.push(0);n.push(a)}return n}function Dlt(t,e){var r=-1;return t.forEach(function(n,i){n.id===e&&(r=i)}),r}function $H(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Plt=function(t){Mlt(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges||[];if(!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var a=r.center;if(n.length===1){n[0].x=a[0],n[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}var o=r.linkDistance,s=null;if((0,Gs.isString)(r.focusNode)){for(var l=!1,u=0;u<n.length;u++)n[u].id===r.focusNode&&(s=n[u],r.focusNode=s,l=!0,u=n.length);l||(s=null)}else s=r.focusNode;s||(s=n[0],r.focusNode=s);var c=Dlt(n,s.id);c<0&&(c=0),r.focusIndex=c;var f=(0,Gs.getAdjMatrix)({nodes:n,edges:i},!1),h=(0,Gs.floydWarshall)(f),d=r.maxToFocus(h,c);r.handleInfinity(h,c,d+1),r.distances=h;var p=h[c],v=r.width||500,g=r.height||500,m=v-a[0]>a[0]?a[0]:v-a[0],y=g-a[1]>a[1]?a[1]:g-a[1];m===0&&(m=v/2),y===0&&(y=g/2);var w=y>m?m:y,b=Math.max.apply(Math,p),x=[];p.forEach(function(F,D){r.unitRadius||(r.unitRadius=w/b),x[D]=F*r.unitRadius}),r.radii=x;var S=r.eIdealDisMatrix();r.eIdealDistances=S;var E=Olt(S);r.weights=E;var _=new Tlt.default({linkDistance:o,distances:S}),k=_.layout();k.forEach(function(F){(0,Gs.isNaN)(F[0])&&(F[0]=Math.random()*o),(0,Gs.isNaN)(F[1])&&(F[1]=Math.random()*o)}),r.positions=k,k.forEach(function(F,D){n[D].x=F[0]+a[0],n[D].y=F[1]+a[1]}),k.forEach(function(F){F[0]-=k[c][0],F[1]-=k[c][1]}),r.run();var C=r.preventOverlap,A=r.nodeSize,M,T=r.strictRadial;if(C){var O=r.nodeSpacing,N;(0,Gs.isNumber)(O)?N=function(){return O}:(0,Gs.isFunction)(O)?N=O:N=function(){return 0},A?(0,Gs.isArray)(A)?M=function(F){var D=A[0]>A[1]?A[0]:A[1];return D+N(F)}:M=function(F){return A+N(F)}:M=function(F){if(F.size){if((0,Gs.isArray)(F.size)){var D=F.size[0]>F.size[1]?F.size[0]:F.size[1];return D+N(F)}if((0,Gs.isObject)(F.size)){var D=F.size.width>F.size.height?F.size.width:F.size.height;return D+N(F)}return F.size+N(F)}return 10+N(F)};var R={nodes:n,nodeSizeFunc:M,adjMatrix:f,positions:k,radii:x,height:g,width:v,strictRadial:T,focusID:c,iterations:r.maxPreventOverlapIteration||200,k:k.length/4.5},B=new Ilt.default(R);k=B.layout()}return k.forEach(function(F,D){n[D].x=F[0]+a[0],n[D].y=F[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i}},e.prototype.run=function(){for(var r=this,n=r.maxIteration,i=r.positions||[],a=r.weights||[],o=r.eIdealDistances||[],s=r.radii||[],l=0;l<=n;l++){var u=l/n;r.oneIteration(u,i,s,o,a)}},e.prototype.oneIteration=function(r,n,i,a,o){var s=this,l=1-r,u=s.focusIndex;n.forEach(function(c,f){var h=$H(c,[0,0]),d=h===0?0:1/h;if(f!==u){var p=0,v=0,g=0;n.forEach(function(y,w){if(f!==w){var b=$H(c,y),x=b===0?0:1/b,S=a[w][f];g+=o[f][w],p+=o[f][w]*(y[0]+S*(c[0]-y[0])*x),v+=o[f][w]*(y[1]+S*(c[1]-y[1])*x)}});var m=i[f]===0?0:1/i[f];g*=l,g+=r*m*m,p*=l,p+=r*m*c[0]*d,c[0]=p/g,v*=l,v+=r*m*c[1]*d,c[1]=v/g}})},e.prototype.eIdealDisMatrix=function(){var r=this,n=r.nodes;if(!n)return[];var i=r.distances,a=r.linkDistance,o=r.radii||[],s=r.unitRadius||50,l=[];return i&&i.forEach(function(u,c){var f=[];u.forEach(function(h,d){if(c===d)f.push(0);else if(o[c]===o[d])if(r.sortBy==="data")f.push(h*(Math.abs(c-d)*r.sortStrength)/(o[c]/s));else if(r.sortBy){var p=n[c][r.sortBy]||0,v=n[d][r.sortBy]||0;(0,Gs.isString)(p)&&(p=p.charCodeAt(0)),(0,Gs.isString)(v)&&(v=v.charCodeAt(0)),f.push(h*(Math.abs(p-v)*r.sortStrength)/(o[c]/s))}else f.push(h*a/(o[c]/s));else{var g=(a+s)/2;f.push(h*g)}}),l.push(f)}),l},e.prototype.handleInfinity=function(r,n,i){for(var a=r.length,o=0;o<a;o++)if(r[n][o]===1/0){r[n][o]=i,r[o][n]=i;for(var s=0;s<a;s++)r[o][s]!==1/0&&r[n][s]===1/0&&(r[n][s]=i+r[o][s],r[s][n]=i+r[o][s])}for(var o=0;o<a;o++)if(o!==n){for(var s=0;s<a;s++)if(r[o][s]===1/0){var l=Math.abs(r[n][o]-r[n][s]);l=l===0?1:l,r[o][s]=l}}},e.prototype.maxToFocus=function(r,n){for(var i=0,a=0;a<r[n].length;a++)r[n][a]!==1/0&&(i=r[n][a]>i?r[n][a]:i);return i},e.prototype.getType=function(){return"radial"},e}(Alt.Base);MT.RadialLayout=Plt;(function(t){var e=Me&&Me.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Me&&Me.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(MT,t)})(LF);var Pb={},Llt=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Pb,"__esModule",{value:!0});Pb.ConcentricLayout=void 0;var Mu=Kn(),Rlt=si,Nlt=function(t){Llt(e,t);function e(r){var n=t.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=3/2*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var r,n,i=this,a=i.nodes,o=i.edges,s=a.length;if(s===0){(r=i.onLayoutEnd)===null||r===void 0||r.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var l=i.center;if(s===1){a[0].x=l[0],a[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var u=i.nodeSize,c=i.nodeSpacing,f=[],h,d=0;(0,Mu.isArray)(u)?h=Math.max(u[0],u[1]):h=u,(0,Mu.isArray)(c)?d=Math.max(c[0],c[1]):(0,Mu.isNumber)(c)&&(d=c),a.forEach(function(T){f.push(T);var O=h;(0,Mu.isArray)(T.size)?O=Math.max(T.size[0],T.size[1]):(0,Mu.isNumber)(T.size)?O=T.size:(0,Mu.isObject)(T.size)&&(O=Math.max(T.size.width,T.size.height)),h=Math.max(h,O),(0,Mu.isFunction)(c)&&(d=Math.max(c(T),d))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;var p={},v={};if(f.forEach(function(T,O){p[T.id]=T,v[T.id]=O}),(i.sortBy==="degree"||!(0,Mu.isString)(i.sortBy)||f[0][i.sortBy]===void 0)&&(i.sortBy="degree",!(0,Mu.isNumber)(a[0].degree))){var g=(0,Mu.getDegree)(a.length,v,o);f.forEach(function(T,O){T.degree=g[O].all})}f.sort(function(T,O){return O[i.sortBy]-T[i.sortBy]}),i.maxValueNode=f[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;var m=[[]],y=m[0];f.forEach(function(T){if(y.length>0){var O=Math.abs(y[0][i.sortBy]-T[i.sortBy]);i.maxLevelDiff&&O>=i.maxLevelDiff&&(y=[],m.push(y))}y.push(T)});var w=h+(d||i.minNodeSpacing);if(!i.preventOverlap){var b=m.length>0&&m[0].length>1,x=Math.min(i.width,i.height)/2-w,S=x/(m.length+(b?1:0));w=Math.min(w,S)}var E=0;if(m.forEach(function(T){var O=i.sweep;O===void 0&&(O=2*Math.PI-2*Math.PI/T.length);var N=T.dTheta=O/Math.max(1,T.length-1);if(T.length>1&&i.preventOverlap){var R=Math.cos(N)-Math.cos(0),B=Math.sin(N)-Math.sin(0),F=Math.sqrt(w*w/(R*R+B*B));E=Math.max(F,E)}T.r=E,E+=w}),i.equidistant){for(var _=0,k=0,C=0;C<m.length;C++){var A=m[C],M=A.r-k;_=Math.max(_,M)}k=0,m.forEach(function(T,O){O===0&&(k=T.r),T.r=k,k+=_})}return m.forEach(function(T){var O=T.dTheta,N=T.r;T.forEach(function(R,B){var F=i.startAngle+(i.clockwise?1:-1)*O*B;R.x=l[0]+N*Math.cos(F),R.y=l[1]+N*Math.sin(F)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:o}},e.prototype.getType=function(){return"concentric"},e}(Rlt.Base);Pb.ConcentricLayout=Nlt;var Lb={},Flt=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Lb,"__esModule",{value:!0});Lb.MDSLayout=void 0;var Jy=Jfe,V3=Kn(),Blt=si,$lt=function(t){Flt(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges,a=i===void 0?[]:i,o=r.center;if(!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],r.onLayoutEnd&&r.onLayoutEnd();return}var s=r.linkDistance,l=(0,V3.getAdjMatrix)({nodes:n,edges:a},!1),u=(0,V3.floydWarshall)(l);r.handleInfinity(u);var c=(0,V3.scaleMatrix)(u,s);r.scaledDistances=c;var f=r.runMDS();return r.positions=f,f.forEach(function(h,d){n[d].x=h[0]+o[0],n[d].y=h[1]+o[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:a}},e.prototype.runMDS=function(){var r=this,n=2,i=r.scaledDistances,a=Jy.Matrix.mul(Jy.Matrix.pow(i,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Jy.SingularValueDecomposition(a),c=Jy.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(f){return Jy.Matrix.mul([f],[c]).toJSON()[0].splice(0,n)})},e.prototype.handleInfinity=function(r){var n=-999999;r.forEach(function(i){i.forEach(function(a){a!==1/0&&n<a&&(n=a)})}),r.forEach(function(i,a){i.forEach(function(o,s){o===1/0&&(r[a][s]=n)})})},e.prototype.getType=function(){return"mds"},e}(Blt.Base);Lb.MDSLayout=$lt;var Rb={},zlt=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Rb,"__esModule",{value:!0});Rb.FruchtermanLayout=void 0;var jlt=si,ii=Kn(),Glt=800,Ult=function(t){zlt(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var r=this,n,i,a=this,o=a.nodes;if(a.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(a.timeInterval),!o||o.length===0){(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var s=a.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],(i=a.onLayoutEnd)===null||i===void 0||i.call(a);return}var l={},u={};return o.forEach(function(c,f){(0,ii.isNumber)(c.x)||(c.x=Math.random()*r.width),(0,ii.isNumber)(c.y)||(c.y=Math.random()*r.height),l[c.id]=c,u[c.id]=f}),a.nodeMap=l,a.nodeIdxMap=u,a.run()},e.prototype.run=function(){var r,n=this,i=n.nodes;if(i){var a=n.edges,o=n.maxIteration,s=n.workerEnabled,l=n.clustering,u=n.animate,c={};if(l&&i.forEach(function(d){c[d.cluster]===void 0&&(c[d.cluster]={name:d.cluster,cx:0,cy:0,count:0})}),s||!u){for(var f=0;f<o;f++)n.runOneStep(c);(r=n.onLayoutEnd)===null||r===void 0||r.call(n)}else{if(typeof window>"u")return;var h=0;this.timeInterval=window.setInterval(function(){var d;n.runOneStep(c),h++,h>=o&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:i,edges:a}}},e.prototype.runOneStep=function(r){var n,i=this,a=i.nodes;if(a){var o=i.edges,s=i.center,l=i.gravity,u=i.speed,c=i.clustering,f=i.height*i.width,h=Math.sqrt(f)/10,d=f/(a.length+1),p=Math.sqrt(d),v=[];if(a.forEach(function(y,w){v[w]={x:0,y:0}}),i.applyCalculate(a,o,v,p,d),c){for(var g in r)r[g].cx=0,r[g].cy=0,r[g].count=0;a.forEach(function(y){var w=r[y.cluster];(0,ii.isNumber)(y.x)&&(w.cx+=y.x),(0,ii.isNumber)(y.y)&&(w.cy+=y.y),w.count++});for(var g in r)r[g].cx/=r[g].count,r[g].cy/=r[g].count;var m=i.clusterGravity||l;a.forEach(function(y,w){if(!(!(0,ii.isNumber)(y.x)||!(0,ii.isNumber)(y.y))){var b=r[y.cluster],x=Math.sqrt((y.x-b.cx)*(y.x-b.cx)+(y.y-b.cy)*(y.y-b.cy)),S=p*m;v[w].x-=S*(y.x-b.cx)/x,v[w].y-=S*(y.y-b.cy)/x}})}a.forEach(function(y,w){if(!(!(0,ii.isNumber)(y.x)||!(0,ii.isNumber)(y.y))){var b=.01*p*l;v[w].x-=b*(y.x-s[0]),v[w].y-=b*(y.y-s[1])}}),a.forEach(function(y,w){if((0,ii.isNumber)(y.fx)&&(0,ii.isNumber)(y.fy)){y.x=y.fx,y.y=y.fy;return}if(!(!(0,ii.isNumber)(y.x)||!(0,ii.isNumber)(y.y))){var b=Math.sqrt(v[w].x*v[w].x+v[w].y*v[w].y);if(b>0){var x=Math.min(h*(u/Glt),b);y.x+=v[w].x/b*x,y.y+=v[w].y/b*x}}}),(n=i.tick)===null||n===void 0||n.call(i)}},e.prototype.applyCalculate=function(r,n,i,a,o){var s=this;s.calRepulsive(r,i,o),n&&s.calAttractive(n,i,a)},e.prototype.calRepulsive=function(r,n,i){r.forEach(function(a,o){n[o]={x:0,y:0},r.forEach(function(s,l){if(o!==l&&!(!(0,ii.isNumber)(a.x)||!(0,ii.isNumber)(s.x)||!(0,ii.isNumber)(a.y)||!(0,ii.isNumber)(s.y))){var u=a.x-s.x,c=a.y-s.y,f=u*u+c*c;if(f===0){f=1;var h=o>l?1:-1;u=.01*h,c=.01*h}var d=i/f;n[o].x+=u*d,n[o].y+=c*d}})})},e.prototype.calAttractive=function(r,n,i){var a=this;r.forEach(function(o){var s=(0,ii.getEdgeTerminal)(o,"source"),l=(0,ii.getEdgeTerminal)(o,"target");if(!(!s||!l)){var u=a.nodeIdxMap[s],c=a.nodeIdxMap[l];if(u!==c){var f=a.nodeMap[s],h=a.nodeMap[l];if(!(!(0,ii.isNumber)(h.x)||!(0,ii.isNumber)(f.x)||!(0,ii.isNumber)(h.y)||!(0,ii.isNumber)(f.y))){var d=h.x-f.x,p=h.y-f.y,v=Math.sqrt(d*d+p*p),g=v*v/i;n[c].x-=d/v*g,n[c].y-=p/v*g,n[u].x+=d/v*g,n[u].y+=p/v*g}}}})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(jlt.Base);Rb.FruchtermanLayout=Ult;var Nb={};function zH(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(u){r(u);return}s.done?e(l):Promise.resolve(l).then(n,i)}function Uh(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(l){zH(a,n,i,o,s,"next",l)}function s(l){zH(a,n,i,o,s,"throw",l)}o(void 0)})}}function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(t)}function Wlt(t,e){if($m(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function the(t){var e=Wlt(t,"string");return $m(e)=="symbol"?e:String(e)}function pt(t,e,r){return e=the(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,the(n.key),n)}}function vu(t,e,r){return e&&jH(t.prototype,e),r&&jH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Vlt=typeof Me=="object"&&Me&&Me.Object===Object&&Me,rhe=Vlt,Hlt=rhe,Xlt=typeof self=="object"&&self&&self.Object===Object&&self,Ylt=Hlt||Xlt||Function("return this")(),qlt=Ylt,Klt=qlt,Qlt=Klt.Symbol,nhe=Qlt,GH=nhe,ihe=Object.prototype,Zlt=ihe.hasOwnProperty,Jlt=ihe.toString,e1=GH?GH.toStringTag:void 0;function eut(t){var e=Zlt.call(t,e1),r=t[e1];try{t[e1]=void 0;var n=!0}catch{}var i=Jlt.call(t);return n&&(e?t[e1]=r:delete t[e1]),i}var tut=eut,rut=Object.prototype,nut=rut.toString;function iut(t){return nut.call(t)}var aut=iut,UH=nhe,out=tut,sut=aut,lut="[object Null]",uut="[object Undefined]",WH=UH?UH.toStringTag:void 0;function cut(t){return t==null?t===void 0?uut:lut:WH&&WH in Object(t)?out(t):sut(t)}var FF=cut,fut=9007199254740991;function hut(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fut}var dut=hut;function put(t){return t!=null&&typeof t=="object"}var BF=put,vut=FF,gut=dut,mut=BF,yut="[object Arguments]",wut="[object Array]",but="[object Boolean]",xut="[object Date]",Sut="[object Error]",Eut="[object Function]",_ut="[object Map]",Cut="[object Number]",kut="[object Object]",Mut="[object RegExp]",Aut="[object Set]",Tut="[object String]",Iut="[object WeakMap]",Out="[object ArrayBuffer]",Dut="[object DataView]",Put="[object Float32Array]",Lut="[object Float64Array]",Rut="[object Int8Array]",Nut="[object Int16Array]",Fut="[object Int32Array]",But="[object Uint8Array]",$ut="[object Uint8ClampedArray]",zut="[object Uint16Array]",jut="[object Uint32Array]",Tn={};Tn[Put]=Tn[Lut]=Tn[Rut]=Tn[Nut]=Tn[Fut]=Tn[But]=Tn[$ut]=Tn[zut]=Tn[jut]=!0;Tn[yut]=Tn[wut]=Tn[Out]=Tn[but]=Tn[Dut]=Tn[xut]=Tn[Sut]=Tn[Eut]=Tn[_ut]=Tn[Cut]=Tn[kut]=Tn[Mut]=Tn[Aut]=Tn[Tut]=Tn[Iut]=!1;function Gut(t){return mut(t)&&gut(t.length)&&!!Tn[vut(t)]}var Uut=Gut;function Wut(t){return function(e){return t(e)}}var Vut=Wut,nM={exports:{}};nM.exports;(function(t,e){var r=rhe,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(nM,nM.exports);var Hut=nM.exports,Xut=Uut,Yut=Vut,VH=Hut,HH=VH&&VH.isTypedArray,qut=HH?Yut(HH):Xut,Kut=qut;const iM=Ms(Kut);var Qut=FF,Zut=BF,Jut="[object Number]";function ect(t){return typeof t=="number"||Zut(t)&&Qut(t)==Jut}var tct=ect;const rct=Ms(tct);var nct=Array.isArray,ict=nct;const act=Ms(ict);var ahe={exports:{}},ohe={exports:{}};(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(ohe);var oct=ohe.exports;(function(t){var e=oct.default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(D,L,G){D[L]=G.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function h(D,L,G){return Object.defineProperty(D,L,{value:G,enumerable:!0,configurable:!0,writable:!0}),D[L]}try{h({},"")}catch{h=function(G,Y,Z){return G[Y]=Z}}function d(D,L,G,Y){var Z=L&&L.prototype instanceof b?L:b,q=Object.create(Z.prototype),pe=new B(Y||[]);return s(q,"_invoke",{value:T(D,G,pe)}),q}function p(D,L,G){try{return{type:"normal",arg:D.call(L,G)}}catch(Y){return{type:"throw",arg:Y}}}i.wrap=d;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",w={};function b(){}function x(){}function S(){}var E={};h(E,u,function(){return this});var _=Object.getPrototypeOf,k=_&&_(_(F([])));k&&k!==a&&o.call(k,u)&&(E=k);var C=S.prototype=b.prototype=Object.create(E);function A(D){["next","throw","return"].forEach(function(L){h(D,L,function(G){return this._invoke(L,G)})})}function M(D,L){function G(Z,q,pe,Se){var Ae=p(D[Z],D,q);if(Ae.type!=="throw"){var He=Ae.arg,ct=He.value;return ct&&e(ct)=="object"&&o.call(ct,"__await")?L.resolve(ct.__await).then(function(st){G("next",st,pe,Se)},function(st){G("throw",st,pe,Se)}):L.resolve(ct).then(function(st){He.value=st,pe(He)},function(st){return G("throw",st,pe,Se)})}Se(Ae.arg)}var Y;s(this,"_invoke",{value:function(q,pe){function Se(){return new L(function(Ae,He){G(q,pe,Ae,He)})}return Y=Y?Y.then(Se,Se):Se()}})}function T(D,L,G){var Y=v;return function(Z,q){if(Y===m)throw new Error("Generator is already running");if(Y===y){if(Z==="throw")throw q;return{value:n,done:!0}}for(G.method=Z,G.arg=q;;){var pe=G.delegate;if(pe){var Se=O(pe,G);if(Se){if(Se===w)continue;return Se}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(Y===v)throw Y=y,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);Y=m;var Ae=p(D,L,G);if(Ae.type==="normal"){if(Y=G.done?y:g,Ae.arg===w)continue;return{value:Ae.arg,done:G.done}}Ae.type==="throw"&&(Y=y,G.method="throw",G.arg=Ae.arg)}}}function O(D,L){var G=L.method,Y=D.iterator[G];if(Y===n)return L.delegate=null,G==="throw"&&D.iterator.return&&(L.method="return",L.arg=n,O(D,L),L.method==="throw")||G!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+G+"' method")),w;var Z=p(Y,D.iterator,L.arg);if(Z.type==="throw")return L.method="throw",L.arg=Z.arg,L.delegate=null,w;var q=Z.arg;return q?q.done?(L[D.resultName]=q.value,L.next=D.nextLoc,L.method!=="return"&&(L.method="next",L.arg=n),L.delegate=null,w):q:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,w)}function N(D){var L={tryLoc:D[0]};1 in D&&(L.catchLoc=D[1]),2 in D&&(L.finallyLoc=D[2],L.afterLoc=D[3]),this.tryEntries.push(L)}function R(D){var L=D.completion||{};L.type="normal",delete L.arg,D.completion=L}function B(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(N,this),this.reset(!0)}function F(D){if(D||D===""){var L=D[u];if(L)return L.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var G=-1,Y=function Z(){for(;++G<D.length;)if(o.call(D,G))return Z.value=D[G],Z.done=!1,Z;return Z.value=n,Z.done=!0,Z};return Y.next=Y}}throw new TypeError(e(D)+" is not iterable")}return x.prototype=S,s(C,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:x,configurable:!0}),x.displayName=h(S,f,"GeneratorFunction"),i.isGeneratorFunction=function(D){var L=typeof D=="function"&&D.constructor;return!!L&&(L===x||(L.displayName||L.name)==="GeneratorFunction")},i.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,S):(D.__proto__=S,h(D,f,"GeneratorFunction")),D.prototype=Object.create(C),D},i.awrap=function(D){return{__await:D}},A(M.prototype),h(M.prototype,c,function(){return this}),i.AsyncIterator=M,i.async=function(D,L,G,Y,Z){Z===void 0&&(Z=Promise);var q=new M(d(D,L,G,Y),Z);return i.isGeneratorFunction(L)?q:q.next().then(function(pe){return pe.done?pe.value:q.next()})},A(C),h(C,f,"Generator"),h(C,u,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),i.keys=function(D){var L=Object(D),G=[];for(var Y in L)G.push(Y);return G.reverse(),function Z(){for(;G.length;){var q=G.pop();if(q in L)return Z.value=q,Z.done=!1,Z}return Z.done=!0,Z}},i.values=F,B.prototype={constructor:B,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!L)for(var G in this)G.charAt(0)==="t"&&o.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=n)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var G=this;function Y(He,ct){return pe.type="throw",pe.arg=L,G.next=He,ct&&(G.method="next",G.arg=n),!!ct}for(var Z=this.tryEntries.length-1;Z>=0;--Z){var q=this.tryEntries[Z],pe=q.completion;if(q.tryLoc==="root")return Y("end");if(q.tryLoc<=this.prev){var Se=o.call(q,"catchLoc"),Ae=o.call(q,"finallyLoc");if(Se&&Ae){if(this.prev<q.catchLoc)return Y(q.catchLoc,!0);if(this.prev<q.finallyLoc)return Y(q.finallyLoc)}else if(Se){if(this.prev<q.catchLoc)return Y(q.catchLoc,!0)}else{if(!Ae)throw new Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return Y(q.finallyLoc)}}}},abrupt:function(L,G){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var Z=this.tryEntries[Y];if(Z.tryLoc<=this.prev&&o.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var q=Z;break}}q&&(L==="break"||L==="continue")&&q.tryLoc<=G&&G<=q.finallyLoc&&(q=null);var pe=q?q.completion:{};return pe.type=L,pe.arg=G,q?(this.method="next",this.next=q.finallyLoc,w):this.complete(pe)},complete:function(L,G){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&G&&(this.next=G),w},finish:function(L){for(var G=this.tryEntries.length-1;G>=0;--G){var Y=this.tryEntries[G];if(Y.finallyLoc===L)return this.complete(Y.completion,Y.afterLoc),R(Y),w}},catch:function(L){for(var G=this.tryEntries.length-1;G>=0;--G){var Y=this.tryEntries[G];if(Y.tryLoc===L){var Z=Y.completion;if(Z.type==="throw"){var q=Z.arg;R(Y)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(L,G,Y){return this.delegate={iterator:F(L),resultName:G,nextLoc:Y},this.method==="next"&&(this.arg=n),w}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(ahe);var sct=ahe.exports,$_=sct(),lct=$_;try{regeneratorRuntime=$_}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=$_:Function("r","regeneratorRuntime = r")($_)}const za=Ms(lct);var uct=1;function she(){return uct++}var Ge;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ge||(Ge={}));var cct=function(){function t(){pu(this,t),this.config=void 0}return vu(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(r){this.config=r}}]),t}(),b2;(function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"})(b2||(b2={}));var XH;(function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"})(XH||(XH={}));var zm;(function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"})(zm||(zm={}));var ow;(function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"})(ow||(ow={}));var fct="__DefineValuePlaceholder__";function hct(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function YH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YH(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var lhe=function(){function t(e,r){pu(this,t),this.engine=e,this.configService=r,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return vu(t,[{key:"init",value:function(){var r=this.configService.get(),n=r.canvas,i=r.engineOptions;this.initPromise=this.engine.init(qH({canvas:n||hct(),antialiasing:!1},i))}},{key:"setBundle",value:function(r){this.compiledBundle=JSON.parse(JSON.stringify(r))}},{key:"setDispatch",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=r),this}},{key:"setMaxIteration",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=r),this}},{key:"setBinding",value:function(r,n){var i=this;if(typeof r=="string"){var a=rct(n)||iM(n)||act(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===r});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===r});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===zm.Uniform?this.model&&this.model.updateUniform(r,n):this.model&&this.model.updateBuffer(r,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(r).forEach(function(l){i.setBinding(l,r[l])});return this}},{key:"execute",value:function(){var e=Uh(za.mark(function n(){var i=this,a,o,s=arguments;return za.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,h=c.name;i.model.confirmInput(f.model,h)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"getOutput",value:function(){var e=Uh(za.mark(function n(){return za.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"compile",value:function(){var e=Uh(za.mark(function n(){var i,a,o;return za.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=qH({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?ow.WGSL:ow.GLSL450:ow.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(fct).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===zm.StorageBuffer){var c=1;u.type===b2.FloatArray?c=1:u.type===b2.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()}]),t}(),uhe={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Me,function(){var r=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},n=function(I,j){for(var Q=Object.keys(j),me=0;me<Q.length;++me)I[Q[me]]=j[Q[me]];return I},i=`
`;function a(I){return typeof atob<"u"?atob(I):"base64:"+I}function o(I){var j=new Error("(regl) "+I);throw console.error(j),j}function s(I,j){I||o(j)}function l(I){return I?": "+I:""}function u(I,j,Q){I in j||o("unknown parameter ("+I+")"+l(Q)+". possible values: "+Object.keys(j).join())}function c(I,j){r(I)||o("invalid parameter type"+l(j)+". must be a typed array")}function f(I,j){switch(j){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return typeof I>"u";case"symbol":return typeof I=="symbol"}}function h(I,j,Q){f(I,j)||o("invalid parameter type"+l(Q)+". expected "+j+", got "+typeof I)}function d(I,j){I>=0&&(I|0)===I||o("invalid parameter type, ("+I+")"+l(j)+". must be a nonnegative integer")}function p(I,j,Q){j.indexOf(I)<0&&o("invalid value"+l(Q)+". must be one of: "+j)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(I){Object.keys(I).forEach(function(j){v.indexOf(j)<0&&o('invalid regl constructor argument "'+j+'". must be one of '+v)})}function m(I,j){for(I=I+"";I.length<j;)I=" "+I;return I}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function w(I,j){this.number=I,this.line=j,this.errors=[]}function b(I,j,Q){this.file=I,this.line=j,this.message=Q}function x(){var I=new Error,j=(I.stack||I).toString(),Q=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(j);if(Q)return Q[1];var me=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(j);return me?me[1]:"unknown"}function S(){var I=new Error,j=(I.stack||I).toString(),Q=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(j);if(Q)return Q[1];var me=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(j);return me?me[1]:"unknown"}function E(I,j){var Q=I.split(`
`),me=1,Te=0,ge={unknown:new y,0:new y};ge.unknown.name=ge[0].name=j||x(),ge.unknown.lines.push(new w(0,""));for(var be=0;be<Q.length;++be){var ze=Q[be],Ue=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ze);if(Ue)switch(Ue[1]){case"line":var Ke=/(\d+)(\s+\d+)?/.exec(Ue[2]);Ke&&(me=Ke[1]|0,Ke[2]&&(Te=Ke[2]|0,Te in ge||(ge[Te]=new y)));break;case"define":var We=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ue[2]);We&&(ge[Te].name=We[1]?a(We[2]):We[2]);break}ge[Te].lines.push(new w(me++,ze))}return Object.keys(ge).forEach(function(rt){var lt=ge[rt];lt.lines.forEach(function(je){lt.index[je.number]=je})}),ge}function _(I){var j=[];return I.split(`
`).forEach(function(Q){if(!(Q.length<5)){var me=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Q);me?j.push(new b(me[1]|0,me[2]|0,me[3].trim())):Q.length>0&&j.push(new b("unknown",0,Q))}}),j}function k(I,j){j.forEach(function(Q){var me=I[Q.file];if(me){var Te=me.index[Q.line];if(Te){Te.errors.push(Q),me.hasErrors=!0;return}}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(Q)})}function C(I,j,Q,me,Te){if(!I.getShaderParameter(j,I.COMPILE_STATUS)){var ge=I.getShaderInfoLog(j),be=me===I.FRAGMENT_SHADER?"fragment":"vertex";B(Q,"string",be+" shader source must be a string",Te);var ze=E(Q,Te),Ue=_(ge);k(ze,Ue),Object.keys(ze).forEach(function(Ke){var We=ze[Ke];if(!We.hasErrors)return;var rt=[""],lt=[""];function je(nt,fe){rt.push(nt),lt.push(fe||"")}je("file number "+Ke+": "+We.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),We.lines.forEach(function(nt){if(nt.errors.length>0){je(m(nt.number,4)+"|  ","background-color:yellow; font-weight:bold"),je(nt.line+i,"color:red; background-color:yellow; font-weight:bold");var fe=0;nt.errors.forEach(function(xe){var qe=xe.message,ft=/^\s*'(.*)'\s*:\s*(.*)$/.exec(qe);if(ft){var Le=ft[1];switch(qe=ft[2],Le){case"assign":Le="=";break}fe=Math.max(nt.line.indexOf(Le,fe),0)}else fe=0;je(m("| ",6)),je(m("^^^",fe+3)+i,"font-weight:bold"),je(m("| ",6)),je(qe+i,"font-weight:bold")}),je(m("| ",6)+i)}else je(m(nt.number,4)+"|  "),je(nt.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(lt[0]=rt.join("%c"),console.log.apply(console,lt)):console.log(rt.join(""))}),s.raise("Error compiling "+be+" shader, "+ze[0].name)}}function A(I,j,Q,me,Te){if(!I.getProgramParameter(j,I.LINK_STATUS)){var ge=I.getProgramInfoLog(j),be=E(Q,Te),ze=E(me,Te),Ue='Error linking program with vertex shader, "'+ze[0].name+'", and fragment shader "'+be[0].name+'"';typeof document<"u"?console.log("%c"+Ue+i+"%c"+ge,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ue+i+ge),s.raise(Ue)}}function M(I){I._commandRef=x()}function T(I,j,Q,me){M(I);function Te(Ue){return Ue?me.id(Ue):0}I._fragId=Te(I.static.frag),I._vertId=Te(I.static.vert);function ge(Ue,Ke){Object.keys(Ke).forEach(function(We){Ue[me.id(We)]=!0})}var be=I._uniformSet={};ge(be,j.static),ge(be,j.dynamic);var ze=I._attributeSet={};ge(ze,Q.static),ge(ze,Q.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function O(I,j){var Q=S();o(I+" in command "+(j||x())+(Q==="unknown"?"":" called from "+Q))}function N(I,j,Q){I||O(j,Q||x())}function R(I,j,Q,me){I in j||O("unknown parameter ("+I+")"+l(Q)+". possible values: "+Object.keys(j).join(),me||x())}function B(I,j,Q,me){f(I,j)||O("invalid parameter type"+l(Q)+". expected "+j+", got "+typeof I,me||x())}function F(I){I()}function D(I,j,Q){I.texture?p(I.texture._texture.internalformat,j,"unsupported texture format for attachment"):p(I.renderbuffer._renderbuffer.format,Q,"unsupported renderbuffer format for attachment")}var L=33071,G=9728,Y=9984,Z=9985,q=9986,pe=9987,Se=5120,Ae=5121,He=5122,ct=5123,st=5124,Mt=5125,yt=5126,ar=32819,Jt=32820,er=33635,yr=34042,or=36193,zt={};zt[Se]=zt[Ae]=1,zt[He]=zt[ct]=zt[or]=zt[er]=zt[ar]=zt[Jt]=2,zt[st]=zt[Mt]=zt[yt]=zt[yr]=4;function tr(I,j){return I===Jt||I===ar||I===er?2:I===yr?4:zt[I]*j}function Dr(I){return!(I&I-1)&&!!I}function Ze(I,j,Q){var me,Te=j.width,ge=j.height,be=j.channels;s(Te>0&&Te<=Q.maxTextureSize&&ge>0&&ge<=Q.maxTextureSize,"invalid texture shape"),(I.wrapS!==L||I.wrapT!==L)&&s(Dr(Te)&&Dr(ge),"incompatible wrap mode for texture, both width and height must be power of 2"),j.mipmask===1?Te!==1&&ge!==1&&s(I.minFilter!==Y&&I.minFilter!==q&&I.minFilter!==Z&&I.minFilter!==pe,"min filter requires mipmap"):(s(Dr(Te)&&Dr(ge),"texture must be a square power of 2 to support mipmapping"),s(j.mipmask===(Te<<1)-1,"missing or incomplete mipmap data")),j.type===yt&&(Q.extensions.indexOf("oes_texture_float_linear")<0&&s(I.minFilter===G&&I.magFilter===G,"filter not supported, must enable oes_texture_float_linear"),s(!I.genMipmaps,"mipmap generation not supported with float textures"));var ze=j.images;for(me=0;me<16;++me)if(ze[me]){var Ue=Te>>me,Ke=ge>>me;s(j.mipmask&1<<me,"missing mipmap data");var We=ze[me];if(s(We.width===Ue&&We.height===Ke,"invalid shape for mip images"),s(We.format===j.format&&We.internalformat===j.internalformat&&We.type===j.type,"incompatible type for mip image"),!We.compressed)if(We.data){var rt=Math.ceil(tr(We.type,be)*Ue/We.unpackAlignment)*We.unpackAlignment;s(We.data.byteLength===rt*Ke,"invalid data for image, buffer size is inconsistent with image format")}else We.element||We.copy}else I.genMipmaps||s((j.mipmask&1<<me)===0,"extra mipmap data");j.compressed&&s(!I.genMipmaps,"mipmap generation for compressed images not supported")}function oe(I,j,Q,me){var Te=I.width,ge=I.height,be=I.channels;s(Te>0&&Te<=me.maxTextureSize&&ge>0&&ge<=me.maxTextureSize,"invalid texture shape"),s(Te===ge,"cube map must be square"),s(j.wrapS===L&&j.wrapT===L,"wrap mode not supported by cube map");for(var ze=0;ze<Q.length;++ze){var Ue=Q[ze];s(Ue.width===Te&&Ue.height===ge,"inconsistent cube map face shape"),j.genMipmaps&&(s(!Ue.compressed,"can not generate mipmap for compressed textures"),s(Ue.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ke=Ue.images,We=0;We<16;++We){var rt=Ke[We];if(rt){var lt=Te>>We,je=ge>>We;s(Ue.mipmask&1<<We,"missing mipmap data"),s(rt.width===lt&&rt.height===je,"invalid shape for mip images"),s(rt.format===I.format&&rt.internalformat===I.internalformat&&rt.type===I.type,"incompatible type for mip image"),rt.compressed||(rt.data?s(rt.data.byteLength===lt*je*Math.max(tr(rt.type,be),rt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):rt.element||rt.copy)}}}}var P=n(s,{optional:F,raise:o,commandRaise:O,command:N,parameter:u,commandParameter:R,constructor:g,type:h,commandType:B,isTypedArray:c,nni:d,oneOf:p,shaderError:C,linkError:A,callSite:S,saveCommandRef:M,saveDrawInfo:T,framebufferFormat:D,guessCommand:x,texture2D:Ze,textureCube:oe}),_e=0,Pe=0,ye=5,Fe=6;function Be(I,j){this.id=_e++,this.type=I,this.data=j}function Xe(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function et(I){if(I.length===0)return[];var j=I.charAt(0),Q=I.charAt(I.length-1);if(I.length>1&&j===Q&&(j==='"'||j==="'"))return['"'+Xe(I.substr(1,I.length-2))+'"'];var me=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(me)return et(I.substr(0,me.index)).concat(et(me[1])).concat(et(I.substr(me.index+me[0].length)));var Te=I.split(".");if(Te.length===1)return['"'+Xe(I)+'"'];for(var ge=[],be=0;be<Te.length;++be)ge=ge.concat(et(Te[be]));return ge}function Ot(I){return"["+et(I).join("][")+"]"}function nr(I,j){return new Be(I,Ot(j+""))}function Kt(I){return typeof I=="function"&&!I._reglType||I instanceof Be}function At(I,j){if(typeof I=="function")return new Be(Pe,I);if(typeof I=="number"||typeof I=="boolean")return new Be(ye,I);if(Array.isArray(I))return new Be(Fe,I.map((Q,me)=>At(Q,j+"["+me+"]")));if(I instanceof Be)return I;P(!1,"invalid option type in uniform "+j)}var rr={DynamicVariable:Be,define:nr,isDynamic:Kt,unbox:At,accessor:Ot},Qt={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},hr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Xr(){var I={"":0},j=[""];return{id:function(Q){var me=I[Q];return me||(me=I[Q]=j.length,j.push(Q),me)},str:function(Q){return j[Q]}}}function Zn(I,j,Q){var me=document.createElement("canvas");n(me.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(me),I===document.body&&(me.style.position="absolute",n(I.style,{margin:0,padding:0}));function Te(){var ze=window.innerWidth,Ue=window.innerHeight;if(I!==document.body){var Ke=I.getBoundingClientRect();ze=Ke.right-Ke.left,Ue=Ke.bottom-Ke.top}me.width=Q*ze,me.height=Q*Ue,n(me.style,{width:ze+"px",height:Ue+"px"})}var ge;I!==document.body&&typeof ResizeObserver=="function"?(ge=new ResizeObserver(function(){setTimeout(Te)}),ge.observe(I)):window.addEventListener("resize",Te,!1);function be(){ge?ge.disconnect():window.removeEventListener("resize",Te),I.removeChild(me)}return Te(),{canvas:me,onDestroy:be}}function Tr(I,j){function Q(me){try{return I.getContext(me,j)}catch{return null}}return Q("webgl")||Q("experimental-webgl")||Q("webgl-experimental")}function pn(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function li(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function vn(I){return typeof I=="string"?I.split():(P(Array.isArray(I),"invalid extension array"),I)}function Xo(I){return typeof I=="string"?(P(typeof document<"u","not supported outside of DOM"),document.querySelector(I)):I}function ha(I){var j=I||{},Q,me,Te,ge,be={},ze=[],Ue=[],Ke=typeof window>"u"?1:window.devicePixelRatio,We=!1,rt=function(nt){nt&&P.raise(nt)},lt=function(){};if(typeof j=="string"?(P(typeof document<"u","selector queries only supported in DOM enviroments"),Q=document.querySelector(j),P(Q,"invalid query string for element")):typeof j=="object"?pn(j)?Q=j:li(j)?(ge=j,Te=ge.canvas):(P.constructor(j),"gl"in j?ge=j.gl:"canvas"in j?Te=Xo(j.canvas):"container"in j&&(me=Xo(j.container)),"attributes"in j&&(be=j.attributes,P.type(be,"object","invalid context attributes")),"extensions"in j&&(ze=vn(j.extensions)),"optionalExtensions"in j&&(Ue=vn(j.optionalExtensions)),"onDone"in j&&(P.type(j.onDone,"function","invalid or missing onDone callback"),rt=j.onDone),"profile"in j&&(We=!!j.profile),"pixelRatio"in j&&(Ke=+j.pixelRatio,P(Ke>0,"invalid pixel ratio"))):P.raise("invalid arguments to regl"),Q&&(Q.nodeName.toLowerCase()==="canvas"?Te=Q:me=Q),!ge){if(!Te){P(typeof document<"u","must manually specify webgl context outside of DOM environments");var je=Zn(me||document.body,rt,Ke);if(!je)return null;Te=je.canvas,lt=je.onDestroy}be.premultipliedAlpha===void 0&&(be.premultipliedAlpha=!0),ge=Tr(Te,be)}return ge?{gl:ge,canvas:Te,container:me,extensions:ze,optionalExtensions:Ue,pixelRatio:Ke,profile:We,onDone:rt,onDestroy:lt}:(lt(),rt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ps(I,j){var Q={};function me(be){P.type(be,"string","extension name must be string");var ze=be.toLowerCase(),Ue;try{Ue=Q[ze]=I.getExtension(ze)}catch{}return!!Ue}for(var Te=0;Te<j.extensions.length;++Te){var ge=j.extensions[Te];if(!me(ge))return j.onDestroy(),j.onDone('"'+ge+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return j.optionalExtensions.forEach(me),{extensions:Q,restore:function(){Object.keys(Q).forEach(function(be){if(Q[be]&&!me(be))throw new Error("(regl): error restoring extension "+be)})}}}function Sn(I,j){for(var Q=Array(I),me=0;me<I;++me)Q[me]=j(me);return Q}var da=5120,Qi=5121,Nn=5122,Ls=5123,Rs=5124,Si=5125,rn=5126;function nn(I){for(var j=16;j<=1<<28;j*=16)if(I<=j)return j;return 0}function Vt(I){var j,Q;return j=(I>65535)<<4,I>>>=j,Q=(I>255)<<3,I>>>=Q,j|=Q,Q=(I>15)<<2,I>>>=Q,j|=Q,Q=(I>3)<<1,I>>>=Q,j|=Q,j|I>>1}function kr(){var I=Sn(8,function(){return[]});function j(ge){var be=nn(ge),ze=I[Vt(be)>>2];return ze.length>0?ze.pop():new ArrayBuffer(be)}function Q(ge){I[Vt(ge.byteLength)>>2].push(ge)}function me(ge,be){var ze=null;switch(ge){case da:ze=new Int8Array(j(be),0,be);break;case Qi:ze=new Uint8Array(j(be),0,be);break;case Nn:ze=new Int16Array(j(2*be),0,be);break;case Ls:ze=new Uint16Array(j(2*be),0,be);break;case Rs:ze=new Int32Array(j(4*be),0,be);break;case Si:ze=new Uint32Array(j(4*be),0,be);break;case rn:ze=new Float32Array(j(4*be),0,be);break;default:return null}return ze.length!==be?ze.subarray(0,be):ze}function Te(ge){Q(ge.buffer)}return{alloc:j,free:Q,allocType:me,freeType:Te}}var _t=kr();_t.zero=kr();var Yr=3408,an=3410,Ei=3411,_i=3412,Jn=3413,ui=3414,Ci=3415,ki=33901,mo=33902,yo=3379,wo=3386,bo=34921,xo=36347,So=36348,Eo=35661,Nd=35660,$v=34930,Fd=36349,zv=34076,jv=34024,Ac=7936,Gv=7937,Uv=7938,jf=35724,Wb=34047,Bd=36063,Wv=34852,En=3553,Vv=34067,ay=34069,Vb=33984,Gf=6408,ci=5126,oy=5121,Hv=36160,$d=36053,sy=36064,ly=16384,Hb=function(I,j){var Q=1;j.ext_texture_filter_anisotropic&&(Q=I.getParameter(Wb));var me=1,Te=1;j.webgl_draw_buffers&&(me=I.getParameter(Wv),Te=I.getParameter(Bd));var ge=!!j.oes_texture_float;if(ge){var be=I.createTexture();I.bindTexture(En,be),I.texImage2D(En,0,Gf,1,1,0,Gf,ci,null);var ze=I.createFramebuffer();if(I.bindFramebuffer(Hv,ze),I.framebufferTexture2D(Hv,sy,En,be,0),I.bindTexture(En,null),I.checkFramebufferStatus(Hv)!==$d)ge=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear(ly);var Ue=_t.allocType(ci,4);I.readPixels(0,0,1,1,Gf,ci,Ue),I.getError()?ge=!1:(I.deleteFramebuffer(ze),I.deleteTexture(be),ge=Ue[0]===1),_t.freeType(Ue)}}var Ke=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),We=!0;if(!Ke){var rt=I.createTexture(),lt=_t.allocType(oy,36);I.activeTexture(Vb),I.bindTexture(Vv,rt),I.texImage2D(ay,0,Gf,3,3,0,Gf,oy,lt),_t.freeType(lt),I.bindTexture(Vv,null),I.deleteTexture(rt),We=!I.getError()}return{colorBits:[I.getParameter(an),I.getParameter(Ei),I.getParameter(_i),I.getParameter(Jn)],depthBits:I.getParameter(ui),stencilBits:I.getParameter(Ci),subpixelBits:I.getParameter(Yr),extensions:Object.keys(j).filter(function(je){return!!j[je]}),maxAnisotropic:Q,maxDrawbuffers:me,maxColorAttachments:Te,pointSizeDims:I.getParameter(ki),lineWidthDims:I.getParameter(mo),maxViewportDims:I.getParameter(wo),maxCombinedTextureUnits:I.getParameter(Eo),maxCubeMapSize:I.getParameter(zv),maxRenderbufferSize:I.getParameter(jv),maxTextureUnits:I.getParameter($v),maxTextureSize:I.getParameter(yo),maxAttributes:I.getParameter(bo),maxVertexUniforms:I.getParameter(xo),maxVertexTextureUnits:I.getParameter(Nd),maxVaryingVectors:I.getParameter(So),maxFragmentUniforms:I.getParameter(Fd),glsl:I.getParameter(jf),renderer:I.getParameter(Gv),vendor:I.getParameter(Ac),version:I.getParameter(Uv),readFloat:ge,npotTextureCube:We}};function Ni(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||r(I.data))}var Da=function(I){return Object.keys(I).map(function(j){return I[j]})},Uf={shape:Xv,flatten:uy};function Tc(I,j,Q){for(var me=0;me<j;++me)Q[me]=I[me]}function Xb(I,j,Q,me){for(var Te=0,ge=0;ge<j;++ge)for(var be=I[ge],ze=0;ze<Q;++ze)me[Te++]=be[ze]}function Ic(I,j,Q,me,Te,ge){for(var be=ge,ze=0;ze<j;++ze)for(var Ue=I[ze],Ke=0;Ke<Q;++Ke)for(var We=Ue[Ke],rt=0;rt<me;++rt)Te[be++]=We[rt]}function Mi(I,j,Q,me,Te){for(var ge=1,be=Q+1;be<j.length;++be)ge*=j[be];var ze=j[Q];if(j.length-Q===4){var Ue=j[Q+1],Ke=j[Q+2],We=j[Q+3];for(be=0;be<ze;++be)Ic(I[be],Ue,Ke,We,me,Te),Te+=ge}else for(be=0;be<ze;++be)Mi(I[be],j,Q+1,me,Te),Te+=ge}function uy(I,j,Q,me){var Te=1;if(j.length)for(var ge=0;ge<j.length;++ge)Te*=j[ge];else Te=0;var be=me||_t.allocType(Q,Te);switch(j.length){case 0:break;case 1:Tc(I,j[0],be);break;case 2:Xb(I,j[0],j[1],be);break;case 3:Ic(I,j[0],j[1],j[2],be,0);break;default:Mi(I,j,0,be,0)}return be}function Xv(I){for(var j=[],Q=I;Q.length;Q=Q[0])j.push(Q.length);return j}var Yv={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Yb=5120,qb=5122,Kb=5124,Qb=5121,Zb=5123,Jb=5125,gu=5126,bl=5126,Yo={int8:Yb,int16:qb,int32:Kb,uint8:Qb,uint16:Zb,uint32:Jb,float:gu,float32:bl},Wf=35048,xl=35040,zd={dynamic:Wf,stream:xl,static:35044},qv=Uf.flatten,cy=Uf.shape,mu=35044,qo=35040,Kv=5121,Qv=5126,Sl=[];Sl[5120]=1,Sl[5122]=2,Sl[5124]=4,Sl[5121]=1,Sl[5123]=2,Sl[5125]=4,Sl[5126]=4;function jd(I){return Yv[Object.prototype.toString.call(I)]|0}function Zv(I,j){for(var Q=0;Q<j.length;++Q)I[Q]=j[Q]}function Gd(I,j,Q,me,Te,ge,be){for(var ze=0,Ue=0;Ue<Q;++Ue)for(var Ke=0;Ke<me;++Ke)I[ze++]=j[Te*Ue+ge*Ke+be]}function ex(I,j,Q,me){var Te=0,ge={};function be(fe){this.id=Te++,this.buffer=I.createBuffer(),this.type=fe,this.usage=mu,this.byteLength=0,this.dimension=1,this.dtype=Kv,this.persistentData=null,Q.profile&&(this.stats={size:0})}be.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},be.prototype.destroy=function(){lt(this)};var ze=[];function Ue(fe,xe){var qe=ze.pop();return qe||(qe=new be(fe)),qe.bind(),rt(qe,xe,qo,0,1,!1),qe}function Ke(fe){ze.push(fe)}function We(fe,xe,qe){fe.byteLength=xe.byteLength,I.bufferData(fe.type,xe,qe)}function rt(fe,xe,qe,ft,Le,vt){var Ne;if(fe.usage=qe,Array.isArray(xe)){if(fe.dtype=ft||Qv,xe.length>0){var at;if(Array.isArray(xe[0])){Ne=cy(xe);for(var Re=1,ot=1;ot<Ne.length;++ot)Re*=Ne[ot];fe.dimension=Re,at=qv(xe,Ne,fe.dtype),We(fe,at,qe),vt?fe.persistentData=at:_t.freeType(at)}else if(typeof xe[0]=="number"){fe.dimension=Le;var Nt=_t.allocType(fe.dtype,xe.length);Zv(Nt,xe),We(fe,Nt,qe),vt?fe.persistentData=Nt:_t.freeType(Nt)}else r(xe[0])?(fe.dimension=xe[0].length,fe.dtype=ft||jd(xe[0])||Qv,at=qv(xe,[xe.length,xe[0].length],fe.dtype),We(fe,at,qe),vt?fe.persistentData=at:_t.freeType(at)):P.raise("invalid buffer data")}}else if(r(xe))fe.dtype=ft||jd(xe),fe.dimension=Le,We(fe,xe,qe),vt&&(fe.persistentData=new Uint8Array(new Uint8Array(xe.buffer)));else if(Ni(xe)){Ne=xe.shape;var ir=xe.stride,ut=xe.offset,Je=0,De=0,Zt=0,pr=0;Ne.length===1?(Je=Ne[0],De=1,Zt=ir[0],pr=0):Ne.length===2?(Je=Ne[0],De=Ne[1],Zt=ir[0],pr=ir[1]):P.raise("invalid shape"),fe.dtype=ft||jd(xe.data)||Qv,fe.dimension=De;var bt=_t.allocType(fe.dtype,Je*De);Gd(bt,xe.data,Je,De,Zt,pr,ut),We(fe,bt,qe),vt?fe.persistentData=bt:_t.freeType(bt)}else xe instanceof ArrayBuffer?(fe.dtype=Kv,fe.dimension=Le,We(fe,xe,qe),vt&&(fe.persistentData=new Uint8Array(new Uint8Array(xe)))):P.raise("invalid buffer data")}function lt(fe){j.bufferCount--,me(fe);var xe=fe.buffer;P(xe,"buffer must not be deleted already"),I.deleteBuffer(xe),fe.buffer=null,delete ge[fe.id]}function je(fe,xe,qe,ft){j.bufferCount++;var Le=new be(xe);ge[Le.id]=Le;function vt(Re){var ot=mu,Nt=null,ir=0,ut=0,Je=1;return Array.isArray(Re)||r(Re)||Ni(Re)||Re instanceof ArrayBuffer?Nt=Re:typeof Re=="number"?ir=Re|0:Re&&(P.type(Re,"object","buffer arguments must be an object, a number or an array"),"data"in Re&&(P(Nt===null||Array.isArray(Nt)||r(Nt)||Ni(Nt),"invalid data for buffer"),Nt=Re.data),"usage"in Re&&(P.parameter(Re.usage,zd,"invalid buffer usage"),ot=zd[Re.usage]),"type"in Re&&(P.parameter(Re.type,Yo,"invalid buffer type"),ut=Yo[Re.type]),"dimension"in Re&&(P.type(Re.dimension,"number","invalid dimension"),Je=Re.dimension|0),"length"in Re&&(P.nni(ir,"buffer length must be a nonnegative integer"),ir=Re.length|0)),Le.bind(),Nt?rt(Le,Nt,ot,ut,Je,ft):(ir&&I.bufferData(Le.type,ir,ot),Le.dtype=ut||Kv,Le.usage=ot,Le.dimension=Je,Le.byteLength=ir),Q.profile&&(Le.stats.size=Le.byteLength*Sl[Le.dtype]),vt}function Ne(Re,ot){P(ot+Re.byteLength<=Le.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Re.byteLength+" starting from offset "+ot+" to a buffer of size "+Le.byteLength),I.bufferSubData(Le.type,ot,Re)}function at(Re,ot){var Nt=(ot||0)|0,ir;if(Le.bind(),r(Re)||Re instanceof ArrayBuffer)Ne(Re,Nt);else if(Array.isArray(Re)){if(Re.length>0)if(typeof Re[0]=="number"){var ut=_t.allocType(Le.dtype,Re.length);Zv(ut,Re),Ne(ut,Nt),_t.freeType(ut)}else if(Array.isArray(Re[0])||r(Re[0])){ir=cy(Re);var Je=qv(Re,ir,Le.dtype);Ne(Je,Nt),_t.freeType(Je)}else P.raise("invalid buffer data")}else if(Ni(Re)){ir=Re.shape;var De=Re.stride,Zt=0,pr=0,bt=0,wr=0;ir.length===1?(Zt=ir[0],pr=1,bt=De[0],wr=0):ir.length===2?(Zt=ir[0],pr=ir[1],bt=De[0],wr=De[1]):P.raise("invalid shape");var sr=Array.isArray(Re.data)?Le.dtype:jd(Re.data),mr=_t.allocType(sr,Zt*pr);Gd(mr,Re.data,Zt,pr,bt,wr,Re.offset),Ne(mr,Nt),_t.freeType(mr)}else P.raise("invalid data for buffer subdata");return vt}return qe||vt(fe),vt._reglType="buffer",vt._buffer=Le,vt.subdata=at,Q.profile&&(vt.stats=Le.stats),vt.destroy=function(){lt(Le)},vt}function nt(){Da(ge).forEach(function(fe){fe.buffer=I.createBuffer(),I.bindBuffer(fe.type,fe.buffer),I.bufferData(fe.type,fe.persistentData||fe.byteLength,fe.usage)})}return Q.profile&&(j.getTotalBufferSize=function(){var fe=0;return Object.keys(ge).forEach(function(xe){fe+=ge[xe].stats.size}),fe}),{create:je,createStream:Ue,destroyStream:Ke,clear:function(){Da(ge).forEach(lt),ze.forEach(lt)},getBuffer:function(fe){return fe&&fe._buffer instanceof be?fe._buffer:null},restore:nt,_initBuffer:rt}}var DT=0,PT=0,tx=1,Jv=1,rx=4,nx=4,Oc={points:DT,point:PT,lines:tx,line:Jv,triangles:rx,triangle:nx,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ix=0,LT=1,Ud=4,El=5120,_l=5121,Wd=5122,Ai=5123,Cl=5124,_o=5125,_n=34963,Ns=35040,Vd=35044;function Ka(I,j,Q,me){var Te={},ge=0,be={uint8:_l,uint16:Ai};j.oes_element_index_uint&&(be.uint32=_o);function ze(nt){this.id=ge++,Te[this.id]=this,this.buffer=nt,this.primType=Ud,this.vertCount=0,this.type=0}ze.prototype.bind=function(){this.buffer.bind()};var Ue=[];function Ke(nt){var fe=Ue.pop();return fe||(fe=new ze(Q.create(null,_n,!0,!1)._buffer)),rt(fe,nt,Ns,-1,-1,0,0),fe}function We(nt){Ue.push(nt)}function rt(nt,fe,xe,qe,ft,Le,vt){nt.buffer.bind();var Ne;if(fe){var at=vt;!vt&&(!r(fe)||Ni(fe)&&!r(fe.data))&&(at=j.oes_element_index_uint?_o:Ai),Q._initBuffer(nt.buffer,fe,xe,at,3)}else I.bufferData(_n,Le,xe),nt.buffer.dtype=Ne||_l,nt.buffer.usage=xe,nt.buffer.dimension=3,nt.buffer.byteLength=Le;if(Ne=vt,!vt){switch(nt.buffer.dtype){case _l:case El:Ne=_l;break;case Ai:case Wd:Ne=Ai;break;case _o:case Cl:Ne=_o;break;default:P.raise("unsupported type for element array")}nt.buffer.dtype=Ne}nt.type=Ne,P(Ne!==_o||!!j.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Re=ft;Re<0&&(Re=nt.buffer.byteLength,Ne===Ai?Re>>=1:Ne===_o&&(Re>>=2)),nt.vertCount=Re;var ot=qe;if(qe<0){ot=Ud;var Nt=nt.buffer.dimension;Nt===1&&(ot=ix),Nt===2&&(ot=LT),Nt===3&&(ot=Ud)}nt.primType=ot}function lt(nt){me.elementsCount--,P(nt.buffer!==null,"must not double destroy elements"),delete Te[nt.id],nt.buffer.destroy(),nt.buffer=null}function je(nt,fe){var xe=Q.create(null,_n,!0),qe=new ze(xe._buffer);me.elementsCount++;function ft(Le){if(!Le)xe(),qe.primType=Ud,qe.vertCount=0,qe.type=_l;else if(typeof Le=="number")xe(Le),qe.primType=Ud,qe.vertCount=Le|0,qe.type=_l;else{var vt=null,Ne=Vd,at=-1,Re=-1,ot=0,Nt=0;Array.isArray(Le)||r(Le)||Ni(Le)?vt=Le:(P.type(Le,"object","invalid arguments for elements"),"data"in Le&&(vt=Le.data,P(Array.isArray(vt)||r(vt)||Ni(vt),"invalid data for element buffer")),"usage"in Le&&(P.parameter(Le.usage,zd,"invalid element buffer usage"),Ne=zd[Le.usage]),"primitive"in Le&&(P.parameter(Le.primitive,Oc,"invalid element buffer primitive"),at=Oc[Le.primitive]),"count"in Le&&(P(typeof Le.count=="number"&&Le.count>=0,"invalid vertex count for elements"),Re=Le.count|0),"type"in Le&&(P.parameter(Le.type,be,"invalid buffer type"),Nt=be[Le.type]),"length"in Le?ot=Le.length|0:(ot=Re,Nt===Ai||Nt===Wd?ot*=2:(Nt===_o||Nt===Cl)&&(ot*=4))),rt(qe,vt,Ne,at,Re,ot,Nt)}return ft}return ft(nt),ft._reglType="elements",ft._elements=qe,ft.subdata=function(Le,vt){return xe.subdata(Le,vt),ft},ft.destroy=function(){lt(qe)},ft}return{create:je,createStream:Ke,destroyStream:We,getElements:function(nt){return typeof nt=="function"&&nt._elements instanceof ze?nt._elements:null},clear:function(){Da(Te).forEach(lt)}}}var pa=new Float32Array(1),Dc=new Uint32Array(pa.buffer),Pc=5123;function eg(I){for(var j=_t.allocType(Pc,I.length),Q=0;Q<I.length;++Q)if(isNaN(I[Q]))j[Q]=65535;else if(I[Q]===1/0)j[Q]=31744;else if(I[Q]===-1/0)j[Q]=64512;else{pa[0]=I[Q];var me=Dc[0],Te=me>>>31<<15,ge=(me<<1>>>24)-127,be=me>>13&1023;if(ge<-24)j[Q]=Te;else if(ge<-14){var ze=-14-ge;j[Q]=Te+(be+1024>>ze)}else ge>15?j[Q]=Te+31744:j[Q]=Te+(ge+15<<10)+be}return j}function tn(I){return Array.isArray(I)||r(I)}var Lc=function(I){return!(I&I-1)&&!!I},fy=34467,va=3553,kl=34067,Rc=34069,yu=6408,hy=6406,tg=6407,Nc=6409,Hd=6410,ax=32854,dy=32855,rg=36194,RT=32819,Ti=32820,gt=33635,it=34042,wt=6402,kt=34041,cr=35904,dr=35906,U=36193,Ko=33776,X=33777,Fs=33778,Vf=33779,Hf=35986,Xd=35987,Fn=34798,fi=35840,Bs=35841,Ml=35842,ox=35843,sx=36196,hi=5121,Al=5123,Pa=5125,Fc=5126,Xf=10242,ng=10243,Tl=10497,ig=33071,ag=33648,py=10240,Yf=10241,NT=9728,wde=9729,FT=9984,iB=9985,aB=9986,BT=9987,bde=33170,lx=4352,xde=4353,Sde=4354,Ede=34046,_de=3317,Cde=37440,kde=37441,Mde=37443,oB=37444,vy=33984,Ade=[FT,aB,iB,BT],ux=[0,Nc,Hd,tg,yu],$s={};$s[Nc]=$s[hy]=$s[wt]=1,$s[kt]=$s[Hd]=2,$s[tg]=$s[cr]=3,$s[yu]=$s[dr]=4;function og(I){return"[object "+I+"]"}var sB=og("HTMLCanvasElement"),lB=og("OffscreenCanvas"),uB=og("CanvasRenderingContext2D"),cB=og("ImageBitmap"),fB=og("HTMLImageElement"),hB=og("HTMLVideoElement"),Tde=Object.keys(Yv).concat([sB,lB,uB,cB,fB,hB]),sg=[];sg[hi]=1,sg[Fc]=4,sg[U]=2,sg[Al]=2,sg[Pa]=4;var Zi=[];Zi[ax]=2,Zi[dy]=2,Zi[rg]=2,Zi[kt]=4,Zi[Ko]=.5,Zi[X]=.5,Zi[Fs]=1,Zi[Vf]=1,Zi[Hf]=.5,Zi[Xd]=1,Zi[Fn]=1,Zi[fi]=.5,Zi[Bs]=.25,Zi[Ml]=.5,Zi[ox]=.25,Zi[sx]=.5;function dB(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function pB(I){if(!Array.isArray(I))return!1;var j=I.length;return!(j===0||!tn(I[0]))}function Yd(I){return Object.prototype.toString.call(I)}function vB(I){return Yd(I)===sB}function gB(I){return Yd(I)===lB}function Ide(I){return Yd(I)===uB}function Ode(I){return Yd(I)===cB}function Dde(I){return Yd(I)===fB}function Pde(I){return Yd(I)===hB}function $T(I){if(!I)return!1;var j=Yd(I);return Tde.indexOf(j)>=0?!0:dB(I)||pB(I)||Ni(I)}function mB(I){return Yv[Object.prototype.toString.call(I)]|0}function Lde(I,j){var Q=j.length;switch(I.type){case hi:case Al:case Pa:case Fc:var me=_t.allocType(I.type,Q);me.set(j),I.data=me;break;case U:I.data=eg(j);break;default:P.raise("unsupported texture type, must specify a typed array")}}function yB(I,j){return _t.allocType(I.type===U?Fc:I.type,j)}function wB(I,j){I.type===U?(I.data=eg(j),_t.freeType(j)):I.data=j}function Rde(I,j,Q,me,Te,ge){for(var be=I.width,ze=I.height,Ue=I.channels,Ke=be*ze*Ue,We=yB(I,Ke),rt=0,lt=0;lt<ze;++lt)for(var je=0;je<be;++je)for(var nt=0;nt<Ue;++nt)We[rt++]=j[Q*je+me*lt+Te*nt+ge];wB(I,We)}function cx(I,j,Q,me,Te,ge){var be;if(typeof Zi[I]<"u"?be=Zi[I]:be=$s[I]*sg[j],ge&&(be*=6),Te){for(var ze=0,Ue=Q;Ue>=1;)ze+=be*Ue*Ue,Ue/=2;return ze}else return be*Q*me}function Nde(I,j,Q,me,Te,ge,be){var ze={"don't care":lx,"dont care":lx,nice:Sde,fast:xde},Ue={repeat:Tl,clamp:ig,mirror:ag},Ke={nearest:NT,linear:wde},We=n({mipmap:BT,"nearest mipmap nearest":FT,"linear mipmap nearest":iB,"nearest mipmap linear":aB,"linear mipmap linear":BT},Ke),rt={none:0,browser:oB},lt={uint8:hi,rgba4:RT,rgb565:gt,"rgb5 a1":Ti},je={alpha:hy,luminance:Nc,"luminance alpha":Hd,rgb:tg,rgba:yu,rgba4:ax,"rgb5 a1":dy,rgb565:rg},nt={};j.ext_srgb&&(je.srgb=cr,je.srgba=dr),j.oes_texture_float&&(lt.float32=lt.float=Fc),j.oes_texture_half_float&&(lt.float16=lt["half float"]=U),j.webgl_depth_texture&&(n(je,{depth:wt,"depth stencil":kt}),n(lt,{uint16:Al,uint32:Pa,"depth stencil":it})),j.webgl_compressed_texture_s3tc&&n(nt,{"rgb s3tc dxt1":Ko,"rgba s3tc dxt1":X,"rgba s3tc dxt3":Fs,"rgba s3tc dxt5":Vf}),j.webgl_compressed_texture_atc&&n(nt,{"rgb atc":Hf,"rgba atc explicit alpha":Xd,"rgba atc interpolated alpha":Fn}),j.webgl_compressed_texture_pvrtc&&n(nt,{"rgb pvrtc 4bppv1":fi,"rgb pvrtc 2bppv1":Bs,"rgba pvrtc 4bppv1":Ml,"rgba pvrtc 2bppv1":ox}),j.webgl_compressed_texture_etc1&&(nt["rgb etc1"]=sx);var fe=Array.prototype.slice.call(I.getParameter(fy));Object.keys(nt).forEach(function(K){var we=nt[K];fe.indexOf(we)>=0&&(je[K]=we)});var xe=Object.keys(je);Q.textureFormats=xe;var qe=[];Object.keys(je).forEach(function(K){var we=je[K];qe[we]=K});var ft=[];Object.keys(lt).forEach(function(K){var we=lt[K];ft[we]=K});var Le=[];Object.keys(Ke).forEach(function(K){var we=Ke[K];Le[we]=K});var vt=[];Object.keys(We).forEach(function(K){var we=We[K];vt[we]=K});var Ne=[];Object.keys(Ue).forEach(function(K){var we=Ue[K];Ne[we]=K});var at=xe.reduce(function(K,we){var ve=je[we];return ve===Nc||ve===hy||ve===Nc||ve===Hd||ve===wt||ve===kt||j.ext_srgb&&(ve===cr||ve===dr)?K[ve]=ve:ve===dy||we.indexOf("rgba")>=0?K[ve]=yu:K[ve]=tg,K},{});function Re(){this.internalformat=yu,this.format=yu,this.type=hi,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=oB,this.width=0,this.height=0,this.channels=0}function ot(K,we){K.internalformat=we.internalformat,K.format=we.format,K.type=we.type,K.compressed=we.compressed,K.premultiplyAlpha=we.premultiplyAlpha,K.flipY=we.flipY,K.unpackAlignment=we.unpackAlignment,K.colorSpace=we.colorSpace,K.width=we.width,K.height=we.height,K.channels=we.channels}function Nt(K,we){if(!(typeof we!="object"||!we)){if("premultiplyAlpha"in we&&(P.type(we.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),K.premultiplyAlpha=we.premultiplyAlpha),"flipY"in we&&(P.type(we.flipY,"boolean","invalid texture flip"),K.flipY=we.flipY),"alignment"in we&&(P.oneOf(we.alignment,[1,2,4,8],"invalid texture unpack alignment"),K.unpackAlignment=we.alignment),"colorSpace"in we&&(P.parameter(we.colorSpace,rt,"invalid colorSpace"),K.colorSpace=rt[we.colorSpace]),"type"in we){var ve=we.type;P(j.oes_texture_float||!(ve==="float"||ve==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),P(j.oes_texture_half_float||!(ve==="half float"||ve==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),P(j.webgl_depth_texture||!(ve==="uint16"||ve==="uint32"||ve==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(ve,lt,"invalid texture type"),K.type=lt[ve]}var mt=K.width,br=K.height,V=K.channels,$=!1;"shape"in we?(P(Array.isArray(we.shape)&&we.shape.length>=2,"shape must be an array"),mt=we.shape[0],br=we.shape[1],we.shape.length===3&&(V=we.shape[2],P(V>0&&V<=4,"invalid number of channels"),$=!0),P(mt>=0&&mt<=Q.maxTextureSize,"invalid width"),P(br>=0&&br<=Q.maxTextureSize,"invalid height")):("radius"in we&&(mt=br=we.radius,P(mt>=0&&mt<=Q.maxTextureSize,"invalid radius")),"width"in we&&(mt=we.width,P(mt>=0&&mt<=Q.maxTextureSize,"invalid width")),"height"in we&&(br=we.height,P(br>=0&&br<=Q.maxTextureSize,"invalid height")),"channels"in we&&(V=we.channels,P(V>0&&V<=4,"invalid number of channels"),$=!0)),K.width=mt|0,K.height=br|0,K.channels=V|0;var te=!1;if("format"in we){var ce=we.format;P(j.webgl_depth_texture||!(ce==="depth"||ce==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(ce,je,"invalid texture format");var he=K.internalformat=je[ce];K.format=at[he],ce in lt&&("type"in we||(K.type=lt[ce])),ce in nt&&(K.compressed=!0),te=!0}!$&&te?K.channels=$s[K.format]:$&&!te?K.channels!==ux[K.format]&&(K.format=K.internalformat=ux[K.channels]):te&&$&&P(K.channels===$s[K.format],"number of channels inconsistent with specified format")}}function ir(K){I.pixelStorei(Cde,K.flipY),I.pixelStorei(kde,K.premultiplyAlpha),I.pixelStorei(Mde,K.colorSpace),I.pixelStorei(_de,K.unpackAlignment)}function ut(){Re.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Je(K,we){var ve=null;if($T(we)?ve=we:we&&(P.type(we,"object","invalid pixel data type"),Nt(K,we),"x"in we&&(K.xOffset=we.x|0),"y"in we&&(K.yOffset=we.y|0),$T(we.data)&&(ve=we.data)),P(!K.compressed||ve instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),we.copy){P(!ve,"can not specify copy and data field for the same texture");var mt=Te.viewportWidth,br=Te.viewportHeight;K.width=K.width||mt-K.xOffset,K.height=K.height||br-K.yOffset,K.needsCopy=!0,P(K.xOffset>=0&&K.xOffset<mt&&K.yOffset>=0&&K.yOffset<br&&K.width>0&&K.width<=mt&&K.height>0&&K.height<=br,"copy texture read out of bounds")}else if(!ve)K.width=K.width||1,K.height=K.height||1,K.channels=K.channels||4;else if(r(ve))K.channels=K.channels||4,K.data=ve,!("type"in we)&&K.type===hi&&(K.type=mB(ve));else if(dB(ve))K.channels=K.channels||4,Lde(K,ve),K.alignment=1,K.needsFree=!0;else if(Ni(ve)){var V=ve.data;!Array.isArray(V)&&K.type===hi&&(K.type=mB(V));var $=ve.shape,te=ve.stride,ce,he,ie,ne,se,H;$.length===3?(ie=$[2],H=te[2]):(P($.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ie=1,H=1),ce=$[0],he=$[1],ne=te[0],se=te[1],K.alignment=1,K.width=ce,K.height=he,K.channels=ie,K.format=K.internalformat=ux[ie],K.needsFree=!0,Rde(K,V,ne,se,H,ve.offset)}else if(vB(ve)||gB(ve)||Ide(ve))vB(ve)||gB(ve)?K.element=ve:K.element=ve.canvas,K.width=K.element.width,K.height=K.element.height,K.channels=4;else if(Ode(ve))K.element=ve,K.width=ve.width,K.height=ve.height,K.channels=4;else if(Dde(ve))K.element=ve,K.width=ve.naturalWidth,K.height=ve.naturalHeight,K.channels=4;else if(Pde(ve))K.element=ve,K.width=ve.videoWidth,K.height=ve.videoHeight,K.channels=4;else if(pB(ve)){var J=K.width||ve[0].length,W=K.height||ve.length,le=K.channels;tn(ve[0][0])?le=le||ve[0][0].length:le=le||1;for(var de=Uf.shape(ve),ke=1,Ie=0;Ie<de.length;++Ie)ke*=de[Ie];var Ee=yB(K,ke);Uf.flatten(ve,de,"",Ee),wB(K,Ee),K.alignment=1,K.width=J,K.height=W,K.channels=le,K.format=K.internalformat=ux[le],K.needsFree=!0}K.type===Fc?P(Q.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):K.type===U&&P(Q.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function De(K,we,ve){var mt=K.element,br=K.data,V=K.internalformat,$=K.format,te=K.type,ce=K.width,he=K.height;ir(K),mt?I.texImage2D(we,ve,$,$,te,mt):K.compressed?I.compressedTexImage2D(we,ve,V,ce,he,0,br):K.needsCopy?(me(),I.copyTexImage2D(we,ve,$,K.xOffset,K.yOffset,ce,he,0)):I.texImage2D(we,ve,$,ce,he,0,$,te,br||null)}function Zt(K,we,ve,mt,br){var V=K.element,$=K.data,te=K.internalformat,ce=K.format,he=K.type,ie=K.width,ne=K.height;ir(K),V?I.texSubImage2D(we,br,ve,mt,ce,he,V):K.compressed?I.compressedTexSubImage2D(we,br,ve,mt,te,ie,ne,$):K.needsCopy?(me(),I.copyTexSubImage2D(we,br,ve,mt,K.xOffset,K.yOffset,ie,ne)):I.texSubImage2D(we,br,ve,mt,ie,ne,ce,he,$)}var pr=[];function bt(){return pr.pop()||new ut}function wr(K){K.needsFree&&_t.freeType(K.data),ut.call(K),pr.push(K)}function sr(){Re.call(this),this.genMipmaps=!1,this.mipmapHint=lx,this.mipmask=0,this.images=Array(16)}function mr(K,we,ve){var mt=K.images[0]=bt();K.mipmask=1,mt.width=K.width=we,mt.height=K.height=ve,mt.channels=K.channels=4}function jr(K,we){var ve=null;if($T(we))ve=K.images[0]=bt(),ot(ve,K),Je(ve,we),K.mipmask=1;else if(Nt(K,we),Array.isArray(we.mipmap))for(var mt=we.mipmap,br=0;br<mt.length;++br)ve=K.images[br]=bt(),ot(ve,K),ve.width>>=br,ve.height>>=br,Je(ve,mt[br]),K.mipmask|=1<<br;else ve=K.images[0]=bt(),ot(ve,K),Je(ve,we),K.mipmask=1;ot(K,K.images[0]),K.compressed&&(K.internalformat===Ko||K.internalformat===X||K.internalformat===Fs||K.internalformat===Vf)&&P(K.width%4===0&&K.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ti(K,we){for(var ve=K.images,mt=0;mt<ve.length;++mt){if(!ve[mt])return;De(ve[mt],we,mt)}}var Ii=[];function _r(){var K=Ii.pop()||new sr;Re.call(K),K.mipmask=0;for(var we=0;we<16;++we)K.images[we]=null;return K}function di(K){for(var we=K.images,ve=0;ve<we.length;++ve)we[ve]&&wr(we[ve]),we[ve]=null;Ii.push(K)}function un(){this.minFilter=NT,this.magFilter=NT,this.wrapS=ig,this.wrapT=ig,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=lx}function ri(K,we){if("min"in we){var ve=we.min;P.parameter(ve,We),K.minFilter=We[ve],Ade.indexOf(K.minFilter)>=0&&!("faces"in we)&&(K.genMipmaps=!0)}if("mag"in we){var mt=we.mag;P.parameter(mt,Ke),K.magFilter=Ke[mt]}var br=K.wrapS,V=K.wrapT;if("wrap"in we){var $=we.wrap;typeof $=="string"?(P.parameter($,Ue),br=V=Ue[$]):Array.isArray($)&&(P.parameter($[0],Ue),P.parameter($[1],Ue),br=Ue[$[0]],V=Ue[$[1]])}else{if("wrapS"in we){var te=we.wrapS;P.parameter(te,Ue),br=Ue[te]}if("wrapT"in we){var ce=we.wrapT;P.parameter(ce,Ue),V=Ue[ce]}}if(K.wrapS=br,K.wrapT=V,"anisotropic"in we){var he=we.anisotropic;P(typeof he=="number"&&he>=1&&he<=Q.maxAnisotropic,"aniso samples must be between 1 and "),K.anisotropic=we.anisotropic}if("mipmap"in we){var ie=!1;switch(typeof we.mipmap){case"string":P.parameter(we.mipmap,ze,"invalid mipmap hint"),K.mipmapHint=ze[we.mipmap],K.genMipmaps=!0,ie=!0;break;case"boolean":ie=K.genMipmaps=we.mipmap;break;case"object":P(Array.isArray(we.mipmap),"invalid mipmap type"),K.genMipmaps=!1,ie=!0;break;default:P.raise("invalid mipmap type")}ie&&!("min"in we)&&(K.minFilter=FT)}}function pi(K,we){I.texParameteri(we,Yf,K.minFilter),I.texParameteri(we,py,K.magFilter),I.texParameteri(we,Xf,K.wrapS),I.texParameteri(we,ng,K.wrapT),j.ext_texture_filter_anisotropic&&I.texParameteri(we,Ede,K.anisotropic),K.genMipmaps&&(I.hint(bde,K.mipmapHint),I.generateMipmap(we))}var vi=0,Fi={},Ji=Q.maxTextureUnits,Wn=Array(Ji).map(function(){return null});function vr(K){Re.call(this),this.mipmask=0,this.internalformat=yu,this.id=vi++,this.refCount=1,this.target=K,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new un,be.profile&&(this.stats={size:0})}function ea(K){I.activeTexture(vy),I.bindTexture(K.target,K.texture)}function qr(){var K=Wn[0];K?I.bindTexture(K.target,K.texture):I.bindTexture(va,null)}function Ut(K){var we=K.texture;P(we,"must not double destroy texture");var ve=K.unit,mt=K.target;ve>=0&&(I.activeTexture(vy+ve),I.bindTexture(mt,null),Wn[ve]=null),I.deleteTexture(we),K.texture=null,K.params=null,K.pixels=null,K.refCount=0,delete Fi[K.id],ge.textureCount--}n(vr.prototype,{bind:function(){var K=this;K.bindCount+=1;var we=K.unit;if(we<0){for(var ve=0;ve<Ji;++ve){var mt=Wn[ve];if(mt){if(mt.bindCount>0)continue;mt.unit=-1}Wn[ve]=K,we=ve;break}we>=Ji&&P.raise("insufficient number of texture units"),be.profile&&ge.maxTextureUnits<we+1&&(ge.maxTextureUnits=we+1),K.unit=we,I.activeTexture(vy+we),I.bindTexture(K.target,K.texture)}return we},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ut(this)}});function Er(K,we){var ve=new vr(va);Fi[ve.id]=ve,ge.textureCount++;function mt($,te){var ce=ve.texInfo;un.call(ce);var he=_r();return typeof $=="number"?typeof te=="number"?mr(he,$|0,te|0):mr(he,$|0,$|0):$?(P.type($,"object","invalid arguments to regl.texture"),ri(ce,$),jr(he,$)):mr(he,1,1),ce.genMipmaps&&(he.mipmask=(he.width<<1)-1),ve.mipmask=he.mipmask,ot(ve,he),P.texture2D(ce,he,Q),ve.internalformat=he.internalformat,mt.width=he.width,mt.height=he.height,ea(ve),ti(he,va),pi(ce,va),qr(),di(he),be.profile&&(ve.stats.size=cx(ve.internalformat,ve.type,he.width,he.height,ce.genMipmaps,!1)),mt.format=qe[ve.internalformat],mt.type=ft[ve.type],mt.mag=Le[ce.magFilter],mt.min=vt[ce.minFilter],mt.wrapS=Ne[ce.wrapS],mt.wrapT=Ne[ce.wrapT],mt}function br($,te,ce,he){P(!!$,"must specify image data");var ie=te|0,ne=ce|0,se=he|0,H=bt();return ot(H,ve),H.width=0,H.height=0,Je(H,$),H.width=H.width||(ve.width>>se)-ie,H.height=H.height||(ve.height>>se)-ne,P(ve.type===H.type&&ve.format===H.format&&ve.internalformat===H.internalformat,"incompatible format for texture.subimage"),P(ie>=0&&ne>=0&&ie+H.width<=ve.width&&ne+H.height<=ve.height,"texture.subimage write out of bounds"),P(ve.mipmask&1<<se,"missing mipmap data"),P(H.data||H.element||H.needsCopy,"missing image data"),ea(ve),Zt(H,va,ie,ne,se),qr(),wr(H),mt}function V($,te){var ce=$|0,he=te|0||ce;if(ce===ve.width&&he===ve.height)return mt;mt.width=ve.width=ce,mt.height=ve.height=he,ea(ve);for(var ie=0;ve.mipmask>>ie;++ie){var ne=ce>>ie,se=he>>ie;if(!ne||!se)break;I.texImage2D(va,ie,ve.format,ne,se,0,ve.format,ve.type,null)}return qr(),be.profile&&(ve.stats.size=cx(ve.internalformat,ve.type,ce,he,!1,!1)),mt}return mt(K,we),mt.subimage=br,mt.resize=V,mt._reglType="texture2d",mt._texture=ve,be.profile&&(mt.stats=ve.stats),mt.destroy=function(){ve.decRef()},mt}function Rr(K,we,ve,mt,br,V){var $=new vr(kl);Fi[$.id]=$,ge.cubeCount++;var te=new Array(6);function ce(ne,se,H,J,W,le){var de,ke=$.texInfo;for(un.call(ke),de=0;de<6;++de)te[de]=_r();if(typeof ne=="number"||!ne){var Ie=ne|0||1;for(de=0;de<6;++de)mr(te[de],Ie,Ie)}else if(typeof ne=="object")if(se)jr(te[0],ne),jr(te[1],se),jr(te[2],H),jr(te[3],J),jr(te[4],W),jr(te[5],le);else if(ri(ke,ne),Nt($,ne),"faces"in ne){var Ee=ne.faces;for(P(Array.isArray(Ee)&&Ee.length===6,"cube faces must be a length 6 array"),de=0;de<6;++de)P(typeof Ee[de]=="object"&&!!Ee[de],"invalid input for cube map face"),ot(te[de],$),jr(te[de],Ee[de])}else for(de=0;de<6;++de)jr(te[de],ne);else P.raise("invalid arguments to cube map");for(ot($,te[0]),Q.npotTextureCube||P(Lc($.width)&&Lc($.height),"your browser does not support non power or two texture dimensions"),ke.genMipmaps?$.mipmask=(te[0].width<<1)-1:$.mipmask=te[0].mipmask,P.textureCube($,ke,te,Q),$.internalformat=te[0].internalformat,ce.width=te[0].width,ce.height=te[0].height,ea($),de=0;de<6;++de)ti(te[de],Rc+de);for(pi(ke,kl),qr(),be.profile&&($.stats.size=cx($.internalformat,$.type,ce.width,ce.height,ke.genMipmaps,!0)),ce.format=qe[$.internalformat],ce.type=ft[$.type],ce.mag=Le[ke.magFilter],ce.min=vt[ke.minFilter],ce.wrapS=Ne[ke.wrapS],ce.wrapT=Ne[ke.wrapT],de=0;de<6;++de)di(te[de]);return ce}function he(ne,se,H,J,W){P(!!se,"must specify image data"),P(typeof ne=="number"&&ne===(ne|0)&&ne>=0&&ne<6,"invalid face");var le=H|0,de=J|0,ke=W|0,Ie=bt();return ot(Ie,$),Ie.width=0,Ie.height=0,Je(Ie,se),Ie.width=Ie.width||($.width>>ke)-le,Ie.height=Ie.height||($.height>>ke)-de,P($.type===Ie.type&&$.format===Ie.format&&$.internalformat===Ie.internalformat,"incompatible format for texture.subimage"),P(le>=0&&de>=0&&le+Ie.width<=$.width&&de+Ie.height<=$.height,"texture.subimage write out of bounds"),P($.mipmask&1<<ke,"missing mipmap data"),P(Ie.data||Ie.element||Ie.needsCopy,"missing image data"),ea($),Zt(Ie,Rc+ne,le,de,ke),qr(),wr(Ie),ce}function ie(ne){var se=ne|0;if(se!==$.width){ce.width=$.width=se,ce.height=$.height=se,ea($);for(var H=0;H<6;++H)for(var J=0;$.mipmask>>J;++J)I.texImage2D(Rc+H,J,$.format,se>>J,se>>J,0,$.format,$.type,null);return qr(),be.profile&&($.stats.size=cx($.internalformat,$.type,ce.width,ce.height,!1,!0)),ce}}return ce(K,we,ve,mt,br,V),ce.subimage=he,ce.resize=ie,ce._reglType="textureCube",ce._texture=$,be.profile&&(ce.stats=$.stats),ce.destroy=function(){$.decRef()},ce}function Vn(){for(var K=0;K<Ji;++K)I.activeTexture(vy+K),I.bindTexture(va,null),Wn[K]=null;Da(Fi).forEach(Ut),ge.cubeCount=0,ge.textureCount=0}be.profile&&(ge.getTotalTextureSize=function(){var K=0;return Object.keys(Fi).forEach(function(we){K+=Fi[we].stats.size}),K});function bu(){for(var K=0;K<Ji;++K){var we=Wn[K];we&&(we.bindCount=0,we.unit=-1,Wn[K]=null)}Da(Fi).forEach(function(ve){ve.texture=I.createTexture(),I.bindTexture(ve.target,ve.texture);for(var mt=0;mt<32;++mt)if(ve.mipmask&1<<mt)if(ve.target===va)I.texImage2D(va,mt,ve.internalformat,ve.width>>mt,ve.height>>mt,0,ve.internalformat,ve.type,null);else for(var br=0;br<6;++br)I.texImage2D(Rc+br,mt,ve.internalformat,ve.width>>mt,ve.height>>mt,0,ve.internalformat,ve.type,null);pi(ve.texInfo,ve.target)})}function tp(){for(var K=0;K<Ji;++K){var we=Wn[K];we&&(we.bindCount=0,we.unit=-1,Wn[K]=null),I.activeTexture(vy+K),I.bindTexture(va,null),I.bindTexture(kl,null)}}return{create2D:Er,createCube:Rr,clear:Vn,getTexture:function(K){return null},restore:bu,refresh:tp}}var qf=36161,fx=32854,bB=32855,xB=36194,SB=33189,EB=36168,_B=34041,CB=35907,kB=34836,MB=34842,AB=34843,Il=[];Il[fx]=2,Il[bB]=2,Il[xB]=2,Il[SB]=2,Il[EB]=1,Il[_B]=4,Il[CB]=4,Il[kB]=16,Il[MB]=8,Il[AB]=6;function TB(I,j,Q){return Il[I]*j*Q}var Fde=function(I,j,Q,me,Te){var ge={rgba4:fx,rgb565:xB,"rgb5 a1":bB,depth:SB,stencil:EB,"depth stencil":_B};j.ext_srgb&&(ge.srgba=CB),j.ext_color_buffer_half_float&&(ge.rgba16f=MB,ge.rgb16f=AB),j.webgl_color_buffer_float&&(ge.rgba32f=kB);var be=[];Object.keys(ge).forEach(function(je){var nt=ge[je];be[nt]=je});var ze=0,Ue={};function Ke(je){this.id=ze++,this.refCount=1,this.renderbuffer=je,this.format=fx,this.width=0,this.height=0,Te.profile&&(this.stats={size:0})}Ke.prototype.decRef=function(){--this.refCount<=0&&We(this)};function We(je){var nt=je.renderbuffer;P(nt,"must not double destroy renderbuffer"),I.bindRenderbuffer(qf,null),I.deleteRenderbuffer(nt),je.renderbuffer=null,je.refCount=0,delete Ue[je.id],me.renderbufferCount--}function rt(je,nt){var fe=new Ke(I.createRenderbuffer());Ue[fe.id]=fe,me.renderbufferCount++;function xe(ft,Le){var vt=0,Ne=0,at=fx;if(typeof ft=="object"&&ft){var Re=ft;if("shape"in Re){var ot=Re.shape;P(Array.isArray(ot)&&ot.length>=2,"invalid renderbuffer shape"),vt=ot[0]|0,Ne=ot[1]|0}else"radius"in Re&&(vt=Ne=Re.radius|0),"width"in Re&&(vt=Re.width|0),"height"in Re&&(Ne=Re.height|0);"format"in Re&&(P.parameter(Re.format,ge,"invalid renderbuffer format"),at=ge[Re.format])}else typeof ft=="number"?(vt=ft|0,typeof Le=="number"?Ne=Le|0:Ne=vt):ft?P.raise("invalid arguments to renderbuffer constructor"):vt=Ne=1;if(P(vt>0&&Ne>0&&vt<=Q.maxRenderbufferSize&&Ne<=Q.maxRenderbufferSize,"invalid renderbuffer size"),!(vt===fe.width&&Ne===fe.height&&at===fe.format))return xe.width=fe.width=vt,xe.height=fe.height=Ne,fe.format=at,I.bindRenderbuffer(qf,fe.renderbuffer),I.renderbufferStorage(qf,at,vt,Ne),P(I.getError()===0,"invalid render buffer format"),Te.profile&&(fe.stats.size=TB(fe.format,fe.width,fe.height)),xe.format=be[fe.format],xe}function qe(ft,Le){var vt=ft|0,Ne=Le|0||vt;return vt===fe.width&&Ne===fe.height||(P(vt>0&&Ne>0&&vt<=Q.maxRenderbufferSize&&Ne<=Q.maxRenderbufferSize,"invalid renderbuffer size"),xe.width=fe.width=vt,xe.height=fe.height=Ne,I.bindRenderbuffer(qf,fe.renderbuffer),I.renderbufferStorage(qf,fe.format,vt,Ne),P(I.getError()===0,"invalid render buffer format"),Te.profile&&(fe.stats.size=TB(fe.format,fe.width,fe.height))),xe}return xe(je,nt),xe.resize=qe,xe._reglType="renderbuffer",xe._renderbuffer=fe,Te.profile&&(xe.stats=fe.stats),xe.destroy=function(){fe.decRef()},xe}Te.profile&&(me.getTotalRenderbufferSize=function(){var je=0;return Object.keys(Ue).forEach(function(nt){je+=Ue[nt].stats.size}),je});function lt(){Da(Ue).forEach(function(je){je.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(qf,je.renderbuffer),I.renderbufferStorage(qf,je.format,je.width,je.height)}),I.bindRenderbuffer(qf,null)}return{create:rt,clear:function(){Da(Ue).forEach(We)},restore:lt}},Bc=36160,zT=36161,qd=3553,hx=34069,IB=36064,OB=36096,DB=36128,PB=33306,LB=36053,Bde=36054,$de=36055,zde=36057,jde=36061,Gde=36193,Ude=5121,Wde=5126,RB=6407,NB=6408,Vde=6402,Hde=[RB,NB],jT=[];jT[NB]=4,jT[RB]=3;var dx=[];dx[Ude]=1,dx[Wde]=4,dx[Gde]=2;var Xde=32854,Yde=32855,qde=36194,Kde=33189,Qde=36168,FB=34041,Zde=35907,Jde=34836,epe=34842,tpe=34843,rpe=[Xde,Yde,qde,Zde,epe,tpe,Jde],lg={};lg[LB]="complete",lg[Bde]="incomplete attachment",lg[zde]="incomplete dimensions",lg[$de]="incomplete, missing attachment",lg[jde]="unsupported";function npe(I,j,Q,me,Te,ge){var be={cur:null,next:null,dirty:!1,setFBO:null},ze=["rgba"],Ue=["rgba4","rgb565","rgb5 a1"];j.ext_srgb&&Ue.push("srgba"),j.ext_color_buffer_half_float&&Ue.push("rgba16f","rgb16f"),j.webgl_color_buffer_float&&Ue.push("rgba32f");var Ke=["uint8"];j.oes_texture_half_float&&Ke.push("half float","float16"),j.oes_texture_float&&Ke.push("float","float32");function We(ut,Je,De){this.target=ut,this.texture=Je,this.renderbuffer=De;var Zt=0,pr=0;Je?(Zt=Je.width,pr=Je.height):De&&(Zt=De.width,pr=De.height),this.width=Zt,this.height=pr}function rt(ut){ut&&(ut.texture&&ut.texture._texture.decRef(),ut.renderbuffer&&ut.renderbuffer._renderbuffer.decRef())}function lt(ut,Je,De){if(ut)if(ut.texture){var Zt=ut.texture._texture,pr=Math.max(1,Zt.width),bt=Math.max(1,Zt.height);P(pr===Je&&bt===De,"inconsistent width/height for supplied texture"),Zt.refCount+=1}else{var wr=ut.renderbuffer._renderbuffer;P(wr.width===Je&&wr.height===De,"inconsistent width/height for renderbuffer"),wr.refCount+=1}}function je(ut,Je){Je&&(Je.texture?I.framebufferTexture2D(Bc,ut,Je.target,Je.texture._texture.texture,0):I.framebufferRenderbuffer(Bc,ut,zT,Je.renderbuffer._renderbuffer.renderbuffer))}function nt(ut){var Je=qd,De=null,Zt=null,pr=ut;typeof ut=="object"&&(pr=ut.data,"target"in ut&&(Je=ut.target|0)),P.type(pr,"function","invalid attachment data");var bt=pr._reglType;return bt==="texture2d"?(De=pr,P(Je===qd)):bt==="textureCube"?(De=pr,P(Je>=hx&&Je<hx+6,"invalid cube map target")):bt==="renderbuffer"?(Zt=pr,Je=zT):P.raise("invalid regl object for attachment"),new We(Je,De,Zt)}function fe(ut,Je,De,Zt,pr){if(De){var bt=me.create2D({width:ut,height:Je,format:Zt,type:pr});return bt._texture.refCount=0,new We(qd,bt,null)}else{var wr=Te.create({width:ut,height:Je,format:Zt});return wr._renderbuffer.refCount=0,new We(zT,null,wr)}}function xe(ut){return ut&&(ut.texture||ut.renderbuffer)}function qe(ut,Je,De){ut&&(ut.texture?ut.texture.resize(Je,De):ut.renderbuffer&&ut.renderbuffer.resize(Je,De),ut.width=Je,ut.height=De)}var ft=0,Le={};function vt(){this.id=ft++,Le[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ne(ut){ut.colorAttachments.forEach(rt),rt(ut.depthAttachment),rt(ut.stencilAttachment),rt(ut.depthStencilAttachment)}function at(ut){var Je=ut.framebuffer;P(Je,"must not double destroy framebuffer"),I.deleteFramebuffer(Je),ut.framebuffer=null,ge.framebufferCount--,delete Le[ut.id]}function Re(ut){var Je;I.bindFramebuffer(Bc,ut.framebuffer);var De=ut.colorAttachments;for(Je=0;Je<De.length;++Je)je(IB+Je,De[Je]);for(Je=De.length;Je<Q.maxColorAttachments;++Je)I.framebufferTexture2D(Bc,IB+Je,qd,null,0);I.framebufferTexture2D(Bc,PB,qd,null,0),I.framebufferTexture2D(Bc,OB,qd,null,0),I.framebufferTexture2D(Bc,DB,qd,null,0),je(OB,ut.depthAttachment),je(DB,ut.stencilAttachment),je(PB,ut.depthStencilAttachment);var Zt=I.checkFramebufferStatus(Bc);!I.isContextLost()&&Zt!==LB&&P.raise("framebuffer configuration not supported, status = "+lg[Zt]),I.bindFramebuffer(Bc,be.next?be.next.framebuffer:null),be.cur=be.next,I.getError()}function ot(ut,Je){var De=new vt;ge.framebufferCount++;function Zt(bt,wr){var sr;P(be.next!==De,"can not update framebuffer which is currently in use");var mr=0,jr=0,ti=!0,Ii=!0,_r=null,di=!0,un="rgba",ri="uint8",pi=1,vi=null,Fi=null,Ji=null,Wn=!1;if(typeof bt=="number")mr=bt|0,jr=wr|0||mr;else if(!bt)mr=jr=1;else{P.type(bt,"object","invalid arguments for framebuffer");var vr=bt;if("shape"in vr){var ea=vr.shape;P(Array.isArray(ea)&&ea.length>=2,"invalid shape for framebuffer"),mr=ea[0],jr=ea[1]}else"radius"in vr&&(mr=jr=vr.radius),"width"in vr&&(mr=vr.width),"height"in vr&&(jr=vr.height);("color"in vr||"colors"in vr)&&(_r=vr.color||vr.colors,Array.isArray(_r)&&P(_r.length===1||j.webgl_draw_buffers,"multiple render targets not supported")),_r||("colorCount"in vr&&(pi=vr.colorCount|0,P(pi>0,"invalid color buffer count")),"colorTexture"in vr&&(di=!!vr.colorTexture,un="rgba4"),"colorType"in vr&&(ri=vr.colorType,di?(P(j.oes_texture_float||!(ri==="float"||ri==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),P(j.oes_texture_half_float||!(ri==="half float"||ri==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ri==="half float"||ri==="float16"?(P(j.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),un="rgba16f"):(ri==="float"||ri==="float32")&&(P(j.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),un="rgba32f"),P.oneOf(ri,Ke,"invalid color type")),"colorFormat"in vr&&(un=vr.colorFormat,ze.indexOf(un)>=0?di=!0:Ue.indexOf(un)>=0?di=!1:di?P.oneOf(vr.colorFormat,ze,"invalid color format for texture"):P.oneOf(vr.colorFormat,Ue,"invalid color format for renderbuffer"))),("depthTexture"in vr||"depthStencilTexture"in vr)&&(Wn=!!(vr.depthTexture||vr.depthStencilTexture),P(!Wn||j.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in vr&&(typeof vr.depth=="boolean"?ti=vr.depth:(vi=vr.depth,Ii=!1)),"stencil"in vr&&(typeof vr.stencil=="boolean"?Ii=vr.stencil:(Fi=vr.stencil,ti=!1)),"depthStencil"in vr&&(typeof vr.depthStencil=="boolean"?ti=Ii=vr.depthStencil:(Ji=vr.depthStencil,ti=!1,Ii=!1))}var qr=null,Ut=null,Er=null,Rr=null;if(Array.isArray(_r))qr=_r.map(nt);else if(_r)qr=[nt(_r)];else for(qr=new Array(pi),sr=0;sr<pi;++sr)qr[sr]=fe(mr,jr,di,un,ri);P(j.webgl_draw_buffers||qr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),P(qr.length<=Q.maxColorAttachments,"too many color attachments, not supported"),mr=mr||qr[0].width,jr=jr||qr[0].height,vi?Ut=nt(vi):ti&&!Ii&&(Ut=fe(mr,jr,Wn,"depth","uint32")),Fi?Er=nt(Fi):Ii&&!ti&&(Er=fe(mr,jr,!1,"stencil","uint8")),Ji?Rr=nt(Ji):!vi&&!Fi&&Ii&&ti&&(Rr=fe(mr,jr,Wn,"depth stencil","depth stencil")),P(!!vi+!!Fi+!!Ji<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Vn=null;for(sr=0;sr<qr.length;++sr)if(lt(qr[sr],mr,jr),P(!qr[sr]||qr[sr].texture&&Hde.indexOf(qr[sr].texture._texture.format)>=0||qr[sr].renderbuffer&&rpe.indexOf(qr[sr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+sr+" is invalid"),qr[sr]&&qr[sr].texture){var bu=jT[qr[sr].texture._texture.format]*dx[qr[sr].texture._texture.type];Vn===null?Vn=bu:P(Vn===bu,"all color attachments much have the same number of bits per pixel.")}return lt(Ut,mr,jr),P(!Ut||Ut.texture&&Ut.texture._texture.format===Vde||Ut.renderbuffer&&Ut.renderbuffer._renderbuffer.format===Kde,"invalid depth attachment for framebuffer object"),lt(Er,mr,jr),P(!Er||Er.renderbuffer&&Er.renderbuffer._renderbuffer.format===Qde,"invalid stencil attachment for framebuffer object"),lt(Rr,mr,jr),P(!Rr||Rr.texture&&Rr.texture._texture.format===FB||Rr.renderbuffer&&Rr.renderbuffer._renderbuffer.format===FB,"invalid depth-stencil attachment for framebuffer object"),Ne(De),De.width=mr,De.height=jr,De.colorAttachments=qr,De.depthAttachment=Ut,De.stencilAttachment=Er,De.depthStencilAttachment=Rr,Zt.color=qr.map(xe),Zt.depth=xe(Ut),Zt.stencil=xe(Er),Zt.depthStencil=xe(Rr),Zt.width=De.width,Zt.height=De.height,Re(De),Zt}function pr(bt,wr){P(be.next!==De,"can not resize a framebuffer which is currently in use");var sr=Math.max(bt|0,1),mr=Math.max(wr|0||sr,1);if(sr===De.width&&mr===De.height)return Zt;for(var jr=De.colorAttachments,ti=0;ti<jr.length;++ti)qe(jr[ti],sr,mr);return qe(De.depthAttachment,sr,mr),qe(De.stencilAttachment,sr,mr),qe(De.depthStencilAttachment,sr,mr),De.width=Zt.width=sr,De.height=Zt.height=mr,Re(De),Zt}return Zt(ut,Je),n(Zt,{resize:pr,_reglType:"framebuffer",_framebuffer:De,destroy:function(){at(De),Ne(De)},use:function(bt){be.setFBO({framebuffer:Zt},bt)}})}function Nt(ut){var Je=Array(6);function De(pr){var bt;P(Je.indexOf(be.next)<0,"can not update framebuffer which is currently in use");var wr={color:null},sr=0,mr=null,jr="rgba",ti="uint8",Ii=1;if(typeof pr=="number")sr=pr|0;else if(!pr)sr=1;else{P.type(pr,"object","invalid arguments for framebuffer");var _r=pr;if("shape"in _r){var di=_r.shape;P(Array.isArray(di)&&di.length>=2,"invalid shape for framebuffer"),P(di[0]===di[1],"cube framebuffer must be square"),sr=di[0]}else"radius"in _r&&(sr=_r.radius|0),"width"in _r?(sr=_r.width|0,"height"in _r&&P(_r.height===sr,"must be square")):"height"in _r&&(sr=_r.height|0);("color"in _r||"colors"in _r)&&(mr=_r.color||_r.colors,Array.isArray(mr)&&P(mr.length===1||j.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in _r&&(Ii=_r.colorCount|0,P(Ii>0,"invalid color buffer count")),"colorType"in _r&&(P.oneOf(_r.colorType,Ke,"invalid color type"),ti=_r.colorType),"colorFormat"in _r&&(jr=_r.colorFormat,P.oneOf(_r.colorFormat,ze,"invalid color format for texture"))),"depth"in _r&&(wr.depth=_r.depth),"stencil"in _r&&(wr.stencil=_r.stencil),"depthStencil"in _r&&(wr.depthStencil=_r.depthStencil)}var un;if(mr)if(Array.isArray(mr))for(un=[],bt=0;bt<mr.length;++bt)un[bt]=mr[bt];else un=[mr];else{un=Array(Ii);var ri={radius:sr,format:jr,type:ti};for(bt=0;bt<Ii;++bt)un[bt]=me.createCube(ri)}for(wr.color=Array(un.length),bt=0;bt<un.length;++bt){var pi=un[bt];P(typeof pi=="function"&&pi._reglType==="textureCube","invalid cube map"),sr=sr||pi.width,P(pi.width===sr&&pi.height===sr,"invalid cube map shape"),wr.color[bt]={target:hx,data:un[bt]}}for(bt=0;bt<6;++bt){for(var vi=0;vi<un.length;++vi)wr.color[vi].target=hx+bt;bt>0&&(wr.depth=Je[0].depth,wr.stencil=Je[0].stencil,wr.depthStencil=Je[0].depthStencil),Je[bt]?Je[bt](wr):Je[bt]=ot(wr)}return n(De,{width:sr,height:sr,color:un})}function Zt(pr){var bt,wr=pr|0;if(P(wr>0&&wr<=Q.maxCubeMapSize,"invalid radius for cube fbo"),wr===De.width)return De;var sr=De.color;for(bt=0;bt<sr.length;++bt)sr[bt].resize(wr);for(bt=0;bt<6;++bt)Je[bt].resize(wr);return De.width=De.height=wr,De}return De(ut),n(De,{faces:Je,resize:Zt,_reglType:"framebufferCube",destroy:function(){Je.forEach(function(pr){pr.destroy()})}})}function ir(){be.cur=null,be.next=null,be.dirty=!0,Da(Le).forEach(function(ut){ut.framebuffer=I.createFramebuffer(),Re(ut)})}return n(be,{getFramebuffer:function(ut){if(typeof ut=="function"&&ut._reglType==="framebuffer"){var Je=ut._framebuffer;if(Je instanceof vt)return Je}return null},create:ot,createCube:Nt,clear:function(){Da(Le).forEach(at)},restore:ir})}var ipe=5126,BB=34962;function GT(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ipe,this.offset=0,this.stride=0,this.divisor=0}function ape(I,j,Q,me,Te){for(var ge=Q.maxAttributes,be=new Array(ge),ze=0;ze<ge;++ze)be[ze]=new GT;var Ue=0,Ke={},We={Record:GT,scope:{},state:be,currentVAO:null,targetVAO:null,restore:lt()?Le:function(){},createVAO:vt,getVAO:nt,destroyBuffer:rt,setVAO:lt()?fe:xe,clear:lt()?qe:function(){}};function rt(Ne){for(var at=0;at<be.length;++at){var Re=be[at];Re.buffer===Ne&&(I.disableVertexAttribArray(at),Re.buffer=null)}}function lt(){return j.oes_vertex_array_object}function je(){return j.angle_instanced_arrays}function nt(Ne){return typeof Ne=="function"&&Ne._vao?Ne._vao:null}function fe(Ne){if(Ne!==We.currentVAO){var at=lt();Ne?at.bindVertexArrayOES(Ne.vao):at.bindVertexArrayOES(null),We.currentVAO=Ne}}function xe(Ne){if(Ne!==We.currentVAO){if(Ne)Ne.bindAttrs();else for(var at=je(),Re=0;Re<be.length;++Re){var ot=be[Re];ot.buffer?(I.enableVertexAttribArray(Re),I.vertexAttribPointer(Re,ot.size,ot.type,ot.normalized,ot.stride,ot.offfset),at&&ot.divisor&&at.vertexAttribDivisorANGLE(Re,ot.divisor)):(I.disableVertexAttribArray(Re),I.vertexAttrib4f(Re,ot.x,ot.y,ot.z,ot.w))}We.currentVAO=Ne}}function qe(){Da(Ke).forEach(function(Ne){Ne.destroy()})}function ft(){this.id=++Ue,this.attributes=[];var Ne=lt();Ne?this.vao=Ne.createVertexArrayOES():this.vao=null,Ke[this.id]=this,this.buffers=[]}ft.prototype.bindAttrs=function(){for(var Ne=je(),at=this.attributes,Re=0;Re<at.length;++Re){var ot=at[Re];ot.buffer?(I.enableVertexAttribArray(Re),I.bindBuffer(BB,ot.buffer.buffer),I.vertexAttribPointer(Re,ot.size,ot.type,ot.normalized,ot.stride,ot.offset),Ne&&ot.divisor&&Ne.vertexAttribDivisorANGLE(Re,ot.divisor)):(I.disableVertexAttribArray(Re),I.vertexAttrib4f(Re,ot.x,ot.y,ot.z,ot.w))}for(var Nt=at.length;Nt<ge;++Nt)I.disableVertexAttribArray(Nt)},ft.prototype.refresh=function(){var Ne=lt();Ne&&(Ne.bindVertexArrayOES(this.vao),this.bindAttrs(),We.currentVAO=this)},ft.prototype.destroy=function(){if(this.vao){var Ne=lt();this===We.currentVAO&&(We.currentVAO=null,Ne.bindVertexArrayOES(null)),Ne.deleteVertexArrayOES(this.vao),this.vao=null}Ke[this.id]&&(delete Ke[this.id],me.vaoCount-=1)};function Le(){var Ne=lt();Ne&&Da(Ke).forEach(function(at){at.refresh()})}function vt(Ne){var at=new ft;me.vaoCount+=1;function Re(ot){P(Array.isArray(ot),"arguments to vertex array constructor must be an array"),P(ot.length<ge,"too many attributes"),P(ot.length>0,"must specify at least one attribute");var Nt={},ir=at.attributes;ir.length=ot.length;for(var ut=0;ut<ot.length;++ut){var Je=ot[ut],De=ir[ut]=new GT,Zt=Je.data||Je;if(Array.isArray(Zt)||r(Zt)||Ni(Zt)){var pr;at.buffers[ut]&&(pr=at.buffers[ut],r(Zt)&&pr._buffer.byteLength>=Zt.byteLength?pr.subdata(Zt):(pr.destroy(),at.buffers[ut]=null)),at.buffers[ut]||(pr=at.buffers[ut]=Te.create(Je,BB,!1,!0)),De.buffer=Te.getBuffer(pr),De.size=De.buffer.dimension|0,De.normalized=!1,De.type=De.buffer.dtype,De.offset=0,De.stride=0,De.divisor=0,De.state=1,Nt[ut]=1}else Te.getBuffer(Je)?(De.buffer=Te.getBuffer(Je),De.size=De.buffer.dimension|0,De.normalized=!1,De.type=De.buffer.dtype,De.offset=0,De.stride=0,De.divisor=0,De.state=1):Te.getBuffer(Je.buffer)?(De.buffer=Te.getBuffer(Je.buffer),De.size=(+Je.size||De.buffer.dimension)|0,De.normalized=!!Je.normalized||!1,"type"in Je?(P.parameter(Je.type,Yo,"invalid buffer type"),De.type=Yo[Je.type]):De.type=De.buffer.dtype,De.offset=(Je.offset||0)|0,De.stride=(Je.stride||0)|0,De.divisor=(Je.divisor||0)|0,De.state=1,P(De.size>=1&&De.size<=4,"size must be between 1 and 4"),P(De.offset>=0,"invalid offset"),P(De.stride>=0&&De.stride<=255,"stride must be between 0 and 255"),P(De.divisor>=0,"divisor must be positive"),P(!De.divisor||!!j.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Je?(P(ut>0,"first attribute must not be a constant"),De.x=+Je.x||0,De.y=+Je.y||0,De.z=+Je.z||0,De.w=+Je.w||0,De.state=2):P(!1,"invalid attribute spec for location "+ut)}for(var bt=0;bt<at.buffers.length;++bt)!Nt[bt]&&at.buffers[bt]&&(at.buffers[bt].destroy(),at.buffers[bt]=null);return at.refresh(),Re}return Re.destroy=function(){for(var ot=0;ot<at.buffers.length;++ot)at.buffers[ot]&&at.buffers[ot].destroy();at.buffers.length=0,at.destroy()},Re._vao=at,Re._reglType="vao",Re(Ne)}return We}var $B=35632,ope=35633,spe=35718,lpe=35721;function upe(I,j,Q,me){var Te={},ge={};function be(fe,xe,qe,ft){this.name=fe,this.id=xe,this.location=qe,this.info=ft}function ze(fe,xe){for(var qe=0;qe<fe.length;++qe)if(fe[qe].id===xe.id){fe[qe].location=xe.location;return}fe.push(xe)}function Ue(fe,xe,qe){var ft=fe===$B?Te:ge,Le=ft[xe];if(!Le){var vt=j.str(xe);Le=I.createShader(fe),I.shaderSource(Le,vt),I.compileShader(Le),P.shaderError(I,Le,vt,fe,qe),ft[xe]=Le}return Le}var Ke={},We=[],rt=0;function lt(fe,xe){this.id=rt++,this.fragId=fe,this.vertId=xe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,me.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function je(fe,xe,qe){var ft,Le,vt=Ue($B,fe.fragId),Ne=Ue(ope,fe.vertId),at=fe.program=I.createProgram();if(I.attachShader(at,vt),I.attachShader(at,Ne),qe)for(ft=0;ft<qe.length;++ft){var Re=qe[ft];I.bindAttribLocation(at,Re[0],Re[1])}I.linkProgram(at),P.linkError(I,at,j.str(fe.fragId),j.str(fe.vertId),xe);var ot=I.getProgramParameter(at,spe);me.profile&&(fe.stats.uniformsCount=ot);var Nt=fe.uniforms;for(ft=0;ft<ot;++ft)if(Le=I.getActiveUniform(at,ft),Le)if(Le.size>1)for(var ir=0;ir<Le.size;++ir){var ut=Le.name.replace("[0]","["+ir+"]");ze(Nt,new be(ut,j.id(ut),I.getUniformLocation(at,ut),Le))}else ze(Nt,new be(Le.name,j.id(Le.name),I.getUniformLocation(at,Le.name),Le));var Je=I.getProgramParameter(at,lpe);me.profile&&(fe.stats.attributesCount=Je);var De=fe.attributes;for(ft=0;ft<Je;++ft)Le=I.getActiveAttrib(at,ft),Le&&ze(De,new be(Le.name,j.id(Le.name),I.getAttribLocation(at,Le.name),Le))}me.profile&&(Q.getMaxUniformsCount=function(){var fe=0;return We.forEach(function(xe){xe.stats.uniformsCount>fe&&(fe=xe.stats.uniformsCount)}),fe},Q.getMaxAttributesCount=function(){var fe=0;return We.forEach(function(xe){xe.stats.attributesCount>fe&&(fe=xe.stats.attributesCount)}),fe});function nt(){Te={},ge={};for(var fe=0;fe<We.length;++fe)je(We[fe],null,We[fe].attributes.map(function(xe){return[xe.location,xe.name]}))}return{clear:function(){var fe=I.deleteShader.bind(I);Da(Te).forEach(fe),Te={},Da(ge).forEach(fe),ge={},We.forEach(function(xe){I.deleteProgram(xe.program)}),We.length=0,Ke={},Q.shaderCount=0},program:function(fe,xe,qe,ft){P.command(fe>=0,"missing vertex shader",qe),P.command(xe>=0,"missing fragment shader",qe);var Le=Ke[xe];Le||(Le=Ke[xe]={});var vt=Le[fe];if(vt&&(vt.refCount++,!ft))return vt;var Ne=new lt(xe,fe);return Q.shaderCount++,je(Ne,qe,ft),vt||(Le[fe]=Ne),We.push(Ne),n(Ne,{destroy:function(){if(Ne.refCount--,Ne.refCount<=0){I.deleteProgram(Ne.program);var at=We.indexOf(Ne);We.splice(at,1),Q.shaderCount--}Le[Ne.vertId].refCount<=0&&(I.deleteShader(ge[Ne.vertId]),delete ge[Ne.vertId],delete Ke[Ne.fragId][Ne.vertId]),Object.keys(Ke[Ne.fragId]).length||(I.deleteShader(Te[Ne.fragId]),delete Te[Ne.fragId],delete Ke[Ne.fragId])}})},restore:nt,shader:Ue,frag:-1,vert:-1}}var cpe=6408,gy=5121,fpe=3333,px=5126;function hpe(I,j,Q,me,Te,ge,be){function ze(We){var rt;j.next===null?(P(Te.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),rt=gy):(P(j.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),rt=j.next.colorAttachments[0].texture._texture.type,ge.oes_texture_float?(P(rt===gy||rt===px,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),rt===px&&P(be.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):P(rt===gy,"Reading from a framebuffer is only allowed for the type 'uint8'"));var lt=0,je=0,nt=me.framebufferWidth,fe=me.framebufferHeight,xe=null;r(We)?xe=We:We&&(P.type(We,"object","invalid arguments to regl.read()"),lt=We.x|0,je=We.y|0,P(lt>=0&&lt<me.framebufferWidth,"invalid x offset for regl.read"),P(je>=0&&je<me.framebufferHeight,"invalid y offset for regl.read"),nt=(We.width||me.framebufferWidth-lt)|0,fe=(We.height||me.framebufferHeight-je)|0,xe=We.data||null),xe&&(rt===gy?P(xe instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):rt===px&&P(xe instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),P(nt>0&&nt+lt<=me.framebufferWidth,"invalid width for read pixels"),P(fe>0&&fe+je<=me.framebufferHeight,"invalid height for read pixels"),Q();var qe=nt*fe*4;return xe||(rt===gy?xe=new Uint8Array(qe):rt===px&&(xe=xe||new Float32Array(qe))),P.isTypedArray(xe,"data buffer for regl.read() must be a typedarray"),P(xe.byteLength>=qe,"data buffer for regl.read() too small"),I.pixelStorei(fpe,4),I.readPixels(lt,je,nt,fe,cpe,rt,xe),xe}function Ue(We){var rt;return j.setFBO({framebuffer:We.framebuffer},function(){rt=ze(We)}),rt}function Ke(We){return!We||!("framebuffer"in We)?ze(We):Ue(We)}return Ke}function ug(I){return Array.prototype.slice.call(I)}function cg(I){return ug(I).join("")}function dpe(){var I=0,j=[],Q=[];function me(rt){for(var lt=0;lt<Q.length;++lt)if(Q[lt]===rt)return j[lt];var je="g"+I++;return j.push(je),Q.push(rt),je}function Te(){var rt=[];function lt(){rt.push.apply(rt,ug(arguments))}var je=[];function nt(){var fe="v"+I++;return je.push(fe),arguments.length>0&&(rt.push(fe,"="),rt.push.apply(rt,ug(arguments)),rt.push(";")),fe}return n(lt,{def:nt,toString:function(){return cg([je.length>0?"var "+je.join(",")+";":"",cg(rt)])}})}function ge(){var rt=Te(),lt=Te(),je=rt.toString,nt=lt.toString;function fe(xe,qe){lt(xe,qe,"=",rt.def(xe,qe),";")}return n(function(){rt.apply(rt,ug(arguments))},{def:rt.def,entry:rt,exit:lt,save:fe,set:function(xe,qe,ft){fe(xe,qe),rt(xe,qe,"=",ft,";")},toString:function(){return je()+nt()}})}function be(){var rt=cg(arguments),lt=ge(),je=ge(),nt=lt.toString,fe=je.toString;return n(lt,{then:function(){return lt.apply(lt,ug(arguments)),this},else:function(){return je.apply(je,ug(arguments)),this},toString:function(){var xe=fe();return xe&&(xe="else{"+xe+"}"),cg(["if(",rt,"){",nt(),"}",xe])}})}var ze=Te(),Ue={};function Ke(rt,lt){var je=[];function nt(){var Le="a"+je.length;return je.push(Le),Le}lt=lt||0;for(var fe=0;fe<lt;++fe)nt();var xe=ge(),qe=xe.toString,ft=Ue[rt]=n(xe,{arg:nt,toString:function(){return cg(["function(",je.join(),"){",qe(),"}"])}});return ft}function We(){var rt=['"use strict";',ze,"return {"];Object.keys(Ue).forEach(function(nt){rt.push('"',nt,'":',Ue[nt].toString(),",")}),rt.push("}");var lt=cg(rt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),je=Function.apply(null,j.concat(lt));return je.apply(null,Q)}return{global:ze,link:me,block:Te,proc:Ke,scope:ge,cond:be,compile:We}}var fg="xyzw".split(""),zB=5121,hg=1,UT=2,WT=0,VT=1,HT=2,XT=3,vx=4,jB=5,GB=6,UB="dither",WB="blend.enable",VB="blend.color",YT="blend.equation",qT="blend.func",HB="depth.enable",XB="depth.func",YB="depth.range",qB="depth.mask",KT="colorMask",KB="cull.enable",QB="cull.face",QT="frontFace",ZT="lineWidth",ZB="polygonOffset.enable",JT="polygonOffset.offset",JB="sample.alpha",e$="sample.enable",eI="sample.coverage",t$="stencil.enable",r$="stencil.mask",tI="stencil.func",rI="stencil.opFront",my="stencil.opBack",n$="scissor.enable",gx="scissor.box",$c="viewport",yy="profile",Kd="framebuffer",wy="vert",by="frag",Qd="elements",Zd="primitive",Jd="count",mx="offset",yx="instances",xy="vao",nI="Width",iI="Height",dg=Kd+nI,pg=Kd+iI,ppe=$c+nI,vpe=$c+iI,i$="drawingBuffer",a$=i$+nI,o$=i$+iI,gpe=[qT,YT,tI,rI,my,eI,$c,gx,JT],vg=34962,mpe=34963,ype=35632,wpe=35633,s$=3553,bpe=34067,xpe=2884,Spe=3042,Epe=3024,_pe=2960,Cpe=2929,kpe=3089,Mpe=32823,Ape=32926,Tpe=32928,aI=5126,wx=35664,bx=35665,xx=35666,oI=5124,Sx=35667,Ex=35668,_x=35669,sI=35670,Cx=35671,kx=35672,Mx=35673,Sy=35674,Ey=35675,_y=35676,Cy=35678,ky=35680,l$=4,My=1028,ep=1029,u$=2304,lI=2305,Ipe=32775,Ope=32776,Dpe=519,Kf=7680,c$=0,f$=1,h$=32774,Ppe=513,d$=36160,Lpe=36064,wu={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},p$=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],gg={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Qf={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},v$={frag:ype,vert:wpe},uI={cw:u$,ccw:lI};function Ax(I){return Array.isArray(I)||r(I)||Ni(I)}function g$(I){return I.sort(function(j,Q){return j===$c?-1:Q===$c?1:j<Q?-1:1})}function Qa(I,j,Q,me){this.thisDep=I,this.contextDep=j,this.propDep=Q,this.append=me}function Zf(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function ei(I){return new Qa(!1,!1,!1,I)}function Co(I,j){var Q=I.type;if(Q===WT){var me=I.data.length;return new Qa(!0,me>=1,me>=2,j)}else if(Q===vx){var Te=I.data;return new Qa(Te.thisDep,Te.contextDep,Te.propDep,j)}else{if(Q===jB)return new Qa(!1,!1,!1,j);if(Q===GB){for(var ge=!1,be=!1,ze=!1,Ue=0;Ue<I.data.length;++Ue){var Ke=I.data[Ue];if(Ke.type===VT)ze=!0;else if(Ke.type===HT)be=!0;else if(Ke.type===XT)ge=!0;else if(Ke.type===WT){ge=!0;var We=Ke.data;We>=1&&(be=!0),We>=2&&(ze=!0)}else Ke.type===vx&&(ge=ge||Ke.data.thisDep,be=be||Ke.data.contextDep,ze=ze||Ke.data.propDep)}return new Qa(ge,be,ze,j)}else return new Qa(Q===XT,Q===HT,Q===VT,j)}}var m$=new Qa(!1,!1,!1,function(){});function Rpe(I,j,Q,me,Te,ge,be,ze,Ue,Ke,We,rt,lt,je,nt){var fe=Ke.Record,xe={add:32774,subtract:32778,"reverse subtract":32779};Q.ext_blend_minmax&&(xe.min=Ipe,xe.max=Ope);var qe=Q.angle_instanced_arrays,ft=Q.webgl_draw_buffers,Le={dirty:!0,profile:nt.profile},vt={},Ne=[],at={},Re={};function ot(V){return V.replace(".","_")}function Nt(V,$,te){var ce=ot(V);Ne.push(V),vt[ce]=Le[ce]=!!te,at[ce]=$}function ir(V,$,te){var ce=ot(V);Ne.push(V),Array.isArray(te)?(Le[ce]=te.slice(),vt[ce]=te.slice()):Le[ce]=vt[ce]=te,Re[ce]=$}Nt(UB,Epe),Nt(WB,Spe),ir(VB,"blendColor",[0,0,0,0]),ir(YT,"blendEquationSeparate",[h$,h$]),ir(qT,"blendFuncSeparate",[f$,c$,f$,c$]),Nt(HB,Cpe,!0),ir(XB,"depthFunc",Ppe),ir(YB,"depthRange",[0,1]),ir(qB,"depthMask",!0),ir(KT,KT,[!0,!0,!0,!0]),Nt(KB,xpe),ir(QB,"cullFace",ep),ir(QT,QT,lI),ir(ZT,ZT,1),Nt(ZB,Mpe),ir(JT,"polygonOffset",[0,0]),Nt(JB,Ape),Nt(e$,Tpe),ir(eI,"sampleCoverage",[1,!1]),Nt(t$,_pe),ir(r$,"stencilMask",-1),ir(tI,"stencilFunc",[Dpe,0,-1]),ir(rI,"stencilOpSeparate",[My,Kf,Kf,Kf]),ir(my,"stencilOpSeparate",[ep,Kf,Kf,Kf]),Nt(n$,kpe),ir(gx,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),ir($c,$c,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var ut={gl:I,context:lt,strings:j,next:vt,current:Le,draw:rt,elements:ge,buffer:Te,shader:We,attributes:Ke.state,vao:Ke,uniforms:Ue,framebuffer:ze,extensions:Q,timer:je,isBufferArgs:Ax},Je={primTypes:Oc,compareFuncs:gg,blendFuncs:wu,blendEquations:xe,stencilOps:Qf,glTypes:Yo,orientationType:uI};P.optional(function(){ut.isArrayLike=tn}),ft&&(Je.backBuffer=[ep],Je.drawBuffer=Sn(me.maxDrawbuffers,function(V){return V===0?[0]:Sn(V,function($){return Lpe+$})}));var De=0;function Zt(){var V=dpe(),$=V.link,te=V.global;V.id=De++,V.batchId="0";var ce=$(ut),he=V.shared={props:"a0"};Object.keys(ut).forEach(function(J){he[J]=te.def(ce,".",J)}),P.optional(function(){V.CHECK=$(P),V.commandStr=P.guessCommand(),V.command=$(V.commandStr),V.assert=function(J,W,le){J("if(!(",W,"))",this.CHECK,".commandRaise(",$(le),",",this.command,");")},Je.invalidBlendCombinations=p$});var ie=V.next={},ne=V.current={};Object.keys(Re).forEach(function(J){Array.isArray(Le[J])&&(ie[J]=te.def(he.next,".",J),ne[J]=te.def(he.current,".",J))});var se=V.constants={};Object.keys(Je).forEach(function(J){se[J]=te.def(JSON.stringify(Je[J]))}),V.invoke=function(J,W){switch(W.type){case WT:var le=["this",he.context,he.props,V.batchId];return J.def($(W.data),".call(",le.slice(0,Math.max(W.data.length+1,4)),")");case VT:return J.def(he.props,W.data);case HT:return J.def(he.context,W.data);case XT:return J.def("this",W.data);case vx:return W.data.append(V,J),W.data.ref;case jB:return W.data.toString();case GB:return W.data.map(function(de){return V.invoke(J,de)})}},V.attribCache={};var H={};return V.scopeAttrib=function(J){var W=j.id(J);if(W in H)return H[W];var le=Ke.scope[W];le||(le=Ke.scope[W]=new fe);var de=H[W]=$(le);return de},V}function pr(V){var $=V.static,te=V.dynamic,ce;if(yy in $){var he=!!$[yy];ce=ei(function(ne,se){return he}),ce.enable=he}else if(yy in te){var ie=te[yy];ce=Co(ie,function(ne,se){return ne.invoke(se,ie)})}return ce}function bt(V,$){var te=V.static,ce=V.dynamic;if(Kd in te){var he=te[Kd];return he?(he=ze.getFramebuffer(he),P.command(he,"invalid framebuffer object"),ei(function(ne,se){var H=ne.link(he),J=ne.shared;se.set(J.framebuffer,".next",H);var W=J.context;return se.set(W,"."+dg,H+".width"),se.set(W,"."+pg,H+".height"),H})):ei(function(ne,se){var H=ne.shared;se.set(H.framebuffer,".next","null");var J=H.context;return se.set(J,"."+dg,J+"."+a$),se.set(J,"."+pg,J+"."+o$),"null"})}else if(Kd in ce){var ie=ce[Kd];return Co(ie,function(ne,se){var H=ne.invoke(se,ie),J=ne.shared,W=J.framebuffer,le=se.def(W,".getFramebuffer(",H,")");P.optional(function(){ne.assert(se,"!"+H+"||"+le,"invalid framebuffer object")}),se.set(W,".next",le);var de=J.context;return se.set(de,"."+dg,le+"?"+le+".width:"+de+"."+a$),se.set(de,"."+pg,le+"?"+le+".height:"+de+"."+o$),le})}else return null}function wr(V,$,te){var ce=V.static,he=V.dynamic;function ie(H){if(H in ce){var J=ce[H];P.commandType(J,"object","invalid "+H,te.commandStr);var W=!0,le=J.x|0,de=J.y|0,ke,Ie;return"width"in J?(ke=J.width|0,P.command(ke>=0,"invalid "+H,te.commandStr)):W=!1,"height"in J?(Ie=J.height|0,P.command(Ie>=0,"invalid "+H,te.commandStr)):W=!1,new Qa(!W&&$&&$.thisDep,!W&&$&&$.contextDep,!W&&$&&$.propDep,function(Tt,gr){var xt=Tt.shared.context,Ht=ke;"width"in J||(Ht=gr.def(xt,".",dg,"-",le));var ur=Ie;return"height"in J||(ur=gr.def(xt,".",pg,"-",de)),[le,de,Ht,ur]})}else if(H in he){var Ee=he[H],Ye=Co(Ee,function(Tt,gr){var xt=Tt.invoke(gr,Ee);P.optional(function(){Tt.assert(gr,xt+"&&typeof "+xt+'==="object"',"invalid "+H)});var Ht=Tt.shared.context,ur=gr.def(xt,".x|0"),Gr=gr.def(xt,".y|0"),Bn=gr.def('"width" in ',xt,"?",xt,".width|0:","(",Ht,".",dg,"-",ur,")"),Za=gr.def('"height" in ',xt,"?",xt,".height|0:","(",Ht,".",pg,"-",Gr,")");return P.optional(function(){Tt.assert(gr,Bn+">=0&&"+Za+">=0","invalid "+H)}),[ur,Gr,Bn,Za]});return $&&(Ye.thisDep=Ye.thisDep||$.thisDep,Ye.contextDep=Ye.contextDep||$.contextDep,Ye.propDep=Ye.propDep||$.propDep),Ye}else return $?new Qa($.thisDep,$.contextDep,$.propDep,function(Tt,gr){var xt=Tt.shared.context;return[0,0,gr.def(xt,".",dg),gr.def(xt,".",pg)]}):null}var ne=ie($c);if(ne){var se=ne;ne=new Qa(ne.thisDep,ne.contextDep,ne.propDep,function(H,J){var W=se.append(H,J),le=H.shared.context;return J.set(le,"."+ppe,W[2]),J.set(le,"."+vpe,W[3]),W})}return{viewport:ne,scissor_box:ie(gx)}}function sr(V,$){var te=V.static,ce=typeof te[by]=="string"&&typeof te[wy]=="string";if(ce){if(Object.keys($.dynamic).length>0)return null;var he=$.static,ie=Object.keys(he);if(ie.length>0&&typeof he[ie[0]]=="number"){for(var ne=[],se=0;se<ie.length;++se)P(typeof he[ie[se]]=="number","must specify all vertex attribute locations when using vaos"),ne.push([he[ie[se]]|0,ie[se]]);return ne}}return null}function mr(V,$,te){var ce=V.static,he=V.dynamic;function ie(W){if(W in ce){var le=j.id(ce[W]);P.optional(function(){We.shader(v$[W],le,P.guessCommand())});var de=ei(function(){return le});return de.id=le,de}else if(W in he){var ke=he[W];return Co(ke,function(Ie,Ee){var Ye=Ie.invoke(Ee,ke),Tt=Ee.def(Ie.shared.strings,".id(",Ye,")");return P.optional(function(){Ee(Ie.shared.shader,".shader(",v$[W],",",Tt,",",Ie.command,");")}),Tt})}return null}var ne=ie(by),se=ie(wy),H=null,J;return Zf(ne)&&Zf(se)?(H=We.program(se.id,ne.id,null,te),J=ei(function(W,le){return W.link(H)})):J=new Qa(ne&&ne.thisDep||se&&se.thisDep,ne&&ne.contextDep||se&&se.contextDep,ne&&ne.propDep||se&&se.propDep,function(W,le){var de=W.shared.shader,ke;ne?ke=ne.append(W,le):ke=le.def(de,".",by);var Ie;se?Ie=se.append(W,le):Ie=le.def(de,".",wy);var Ee=de+".program("+Ie+","+ke;return P.optional(function(){Ee+=","+W.command}),le.def(Ee+")")}),{frag:ne,vert:se,progVar:J,program:H}}function jr(V,$){var te=V.static,ce=V.dynamic;function he(){if(Qd in te){var W=te[Qd];Ax(W)?W=ge.getElements(ge.create(W,!0)):W&&(W=ge.getElements(W),P.command(W,"invalid elements",$.commandStr));var le=ei(function(ke,Ie){if(W){var Ee=ke.link(W);return ke.ELEMENTS=Ee,Ee}return ke.ELEMENTS=null,null});return le.value=W,le}else if(Qd in ce){var de=ce[Qd];return Co(de,function(ke,Ie){var Ee=ke.shared,Ye=Ee.isBufferArgs,Tt=Ee.elements,gr=ke.invoke(Ie,de),xt=Ie.def("null"),Ht=Ie.def(Ye,"(",gr,")"),ur=ke.cond(Ht).then(xt,"=",Tt,".createStream(",gr,");").else(xt,"=",Tt,".getElements(",gr,");");return P.optional(function(){ke.assert(ur.else,"!"+gr+"||"+xt,"invalid elements")}),Ie.entry(ur),Ie.exit(ke.cond(Ht).then(Tt,".destroyStream(",xt,");")),ke.ELEMENTS=xt,xt})}return null}var ie=he();function ne(){if(Zd in te){var W=te[Zd];return P.commandParameter(W,Oc,"invalid primitve",$.commandStr),ei(function(de,ke){return Oc[W]})}else if(Zd in ce){var le=ce[Zd];return Co(le,function(de,ke){var Ie=de.constants.primTypes,Ee=de.invoke(ke,le);return P.optional(function(){de.assert(ke,Ee+" in "+Ie,"invalid primitive, must be one of "+Object.keys(Oc))}),ke.def(Ie,"[",Ee,"]")})}else if(ie)return Zf(ie)?ie.value?ei(function(de,ke){return ke.def(de.ELEMENTS,".primType")}):ei(function(){return l$}):new Qa(ie.thisDep,ie.contextDep,ie.propDep,function(de,ke){var Ie=de.ELEMENTS;return ke.def(Ie,"?",Ie,".primType:",l$)});return null}function se(W,le){if(W in te){var de=te[W]|0;return P.command(!le||de>=0,"invalid "+W,$.commandStr),ei(function(Ie,Ee){return le&&(Ie.OFFSET=de),de})}else if(W in ce){var ke=ce[W];return Co(ke,function(Ie,Ee){var Ye=Ie.invoke(Ee,ke);return le&&(Ie.OFFSET=Ye,P.optional(function(){Ie.assert(Ee,Ye+">=0","invalid "+W)})),Ye})}else if(le&&ie)return ei(function(Ie,Ee){return Ie.OFFSET="0",0});return null}var H=se(mx,!0);function J(){if(Jd in te){var W=te[Jd]|0;return P.command(typeof W=="number"&&W>=0,"invalid vertex count",$.commandStr),ei(function(){return W})}else if(Jd in ce){var le=ce[Jd];return Co(le,function(Ie,Ee){var Ye=Ie.invoke(Ee,le);return P.optional(function(){Ie.assert(Ee,"typeof "+Ye+'==="number"&&'+Ye+">=0&&"+Ye+"===("+Ye+"|0)","invalid vertex count")}),Ye})}else if(ie)if(Zf(ie)){if(ie)return H?new Qa(H.thisDep,H.contextDep,H.propDep,function(Ie,Ee){var Ye=Ee.def(Ie.ELEMENTS,".vertCount-",Ie.OFFSET);return P.optional(function(){Ie.assert(Ee,Ye+">=0","invalid vertex offset/element buffer too small")}),Ye}):ei(function(Ie,Ee){return Ee.def(Ie.ELEMENTS,".vertCount")});var de=ei(function(){return-1});return P.optional(function(){de.MISSING=!0}),de}else{var ke=new Qa(ie.thisDep||H.thisDep,ie.contextDep||H.contextDep,ie.propDep||H.propDep,function(Ie,Ee){var Ye=Ie.ELEMENTS;return Ie.OFFSET?Ee.def(Ye,"?",Ye,".vertCount-",Ie.OFFSET,":-1"):Ee.def(Ye,"?",Ye,".vertCount:-1")});return P.optional(function(){ke.DYNAMIC=!0}),ke}return null}return{elements:ie,primitive:ne(),count:J(),instances:se(yx,!1),offset:H}}function ti(V,$){var te=V.static,ce=V.dynamic,he={};return Ne.forEach(function(ie){var ne=ot(ie);function se(H,J){if(ie in te){var W=H(te[ie]);he[ne]=ei(function(){return W})}else if(ie in ce){var le=ce[ie];he[ne]=Co(le,function(de,ke){return J(de,ke,de.invoke(ke,le))})}}switch(ie){case KB:case WB:case UB:case t$:case HB:case n$:case ZB:case JB:case e$:case qB:return se(function(H){return P.commandType(H,"boolean",ie,$.commandStr),H},function(H,J,W){return P.optional(function(){H.assert(J,"typeof "+W+'==="boolean"',"invalid flag "+ie,H.commandStr)}),W});case XB:return se(function(H){return P.commandParameter(H,gg,"invalid "+ie,$.commandStr),gg[H]},function(H,J,W){var le=H.constants.compareFuncs;return P.optional(function(){H.assert(J,W+" in "+le,"invalid "+ie+", must be one of "+Object.keys(gg))}),J.def(le,"[",W,"]")});case YB:return se(function(H){return P.command(tn(H)&&H.length===2&&typeof H[0]=="number"&&typeof H[1]=="number"&&H[0]<=H[1],"depth range is 2d array",$.commandStr),H},function(H,J,W){P.optional(function(){H.assert(J,H.shared.isArrayLike+"("+W+")&&"+W+".length===2&&typeof "+W+'[0]==="number"&&typeof '+W+'[1]==="number"&&'+W+"[0]<="+W+"[1]","depth range must be a 2d array")});var le=J.def("+",W,"[0]"),de=J.def("+",W,"[1]");return[le,de]});case qT:return se(function(H){P.commandType(H,"object","blend.func",$.commandStr);var J="srcRGB"in H?H.srcRGB:H.src,W="srcAlpha"in H?H.srcAlpha:H.src,le="dstRGB"in H?H.dstRGB:H.dst,de="dstAlpha"in H?H.dstAlpha:H.dst;return P.commandParameter(J,wu,ne+".srcRGB",$.commandStr),P.commandParameter(W,wu,ne+".srcAlpha",$.commandStr),P.commandParameter(le,wu,ne+".dstRGB",$.commandStr),P.commandParameter(de,wu,ne+".dstAlpha",$.commandStr),P.command(p$.indexOf(J+", "+le)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+J+", "+le+")",$.commandStr),[wu[J],wu[le],wu[W],wu[de]]},function(H,J,W){var le=H.constants.blendFuncs;P.optional(function(){H.assert(J,W+"&&typeof "+W+'==="object"',"invalid blend func, must be an object")});function de(xt,Ht){var ur=J.def('"',xt,Ht,'" in ',W,"?",W,".",xt,Ht,":",W,".",xt);return P.optional(function(){H.assert(J,ur+" in "+le,"invalid "+ie+"."+xt+Ht+", must be one of "+Object.keys(wu))}),ur}var ke=de("src","RGB"),Ie=de("dst","RGB");P.optional(function(){var xt=H.constants.invalidBlendCombinations;H.assert(J,xt+".indexOf("+ke+'+", "+'+Ie+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ee=J.def(le,"[",ke,"]"),Ye=J.def(le,"[",de("src","Alpha"),"]"),Tt=J.def(le,"[",Ie,"]"),gr=J.def(le,"[",de("dst","Alpha"),"]");return[Ee,Tt,Ye,gr]});case YT:return se(function(H){if(typeof H=="string")return P.commandParameter(H,xe,"invalid "+ie,$.commandStr),[xe[H],xe[H]];if(typeof H=="object")return P.commandParameter(H.rgb,xe,ie+".rgb",$.commandStr),P.commandParameter(H.alpha,xe,ie+".alpha",$.commandStr),[xe[H.rgb],xe[H.alpha]];P.commandRaise("invalid blend.equation",$.commandStr)},function(H,J,W){var le=H.constants.blendEquations,de=J.def(),ke=J.def(),Ie=H.cond("typeof ",W,'==="string"');return P.optional(function(){function Ee(Ye,Tt,gr){H.assert(Ye,gr+" in "+le,"invalid "+Tt+", must be one of "+Object.keys(xe))}Ee(Ie.then,ie,W),H.assert(Ie.else,W+"&&typeof "+W+'==="object"',"invalid "+ie),Ee(Ie.else,ie+".rgb",W+".rgb"),Ee(Ie.else,ie+".alpha",W+".alpha")}),Ie.then(de,"=",ke,"=",le,"[",W,"];"),Ie.else(de,"=",le,"[",W,".rgb];",ke,"=",le,"[",W,".alpha];"),J(Ie),[de,ke]});case VB:return se(function(H){return P.command(tn(H)&&H.length===4,"blend.color must be a 4d array",$.commandStr),Sn(4,function(J){return+H[J]})},function(H,J,W){return P.optional(function(){H.assert(J,H.shared.isArrayLike+"("+W+")&&"+W+".length===4","blend.color must be a 4d array")}),Sn(4,function(le){return J.def("+",W,"[",le,"]")})});case r$:return se(function(H){return P.commandType(H,"number",ne,$.commandStr),H|0},function(H,J,W){return P.optional(function(){H.assert(J,"typeof "+W+'==="number"',"invalid stencil.mask")}),J.def(W,"|0")});case tI:return se(function(H){P.commandType(H,"object",ne,$.commandStr);var J=H.cmp||"keep",W=H.ref||0,le="mask"in H?H.mask:-1;return P.commandParameter(J,gg,ie+".cmp",$.commandStr),P.commandType(W,"number",ie+".ref",$.commandStr),P.commandType(le,"number",ie+".mask",$.commandStr),[gg[J],W,le]},function(H,J,W){var le=H.constants.compareFuncs;P.optional(function(){function Ee(){H.assert(J,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ee(W+"&&typeof ",W,'==="object"'),Ee('!("cmp" in ',W,")||(",W,".cmp in ",le,")")});var de=J.def('"cmp" in ',W,"?",le,"[",W,".cmp]",":",Kf),ke=J.def(W,".ref|0"),Ie=J.def('"mask" in ',W,"?",W,".mask|0:-1");return[de,ke,Ie]});case rI:case my:return se(function(H){P.commandType(H,"object",ne,$.commandStr);var J=H.fail||"keep",W=H.zfail||"keep",le=H.zpass||"keep";return P.commandParameter(J,Qf,ie+".fail",$.commandStr),P.commandParameter(W,Qf,ie+".zfail",$.commandStr),P.commandParameter(le,Qf,ie+".zpass",$.commandStr),[ie===my?ep:My,Qf[J],Qf[W],Qf[le]]},function(H,J,W){var le=H.constants.stencilOps;P.optional(function(){H.assert(J,W+"&&typeof "+W+'==="object"',"invalid "+ie)});function de(ke){return P.optional(function(){H.assert(J,'!("'+ke+'" in '+W+")||("+W+"."+ke+" in "+le+")","invalid "+ie+"."+ke+", must be one of "+Object.keys(Qf))}),J.def('"',ke,'" in ',W,"?",le,"[",W,".",ke,"]:",Kf)}return[ie===my?ep:My,de("fail"),de("zfail"),de("zpass")]});case JT:return se(function(H){P.commandType(H,"object",ne,$.commandStr);var J=H.factor|0,W=H.units|0;return P.commandType(J,"number",ne+".factor",$.commandStr),P.commandType(W,"number",ne+".units",$.commandStr),[J,W]},function(H,J,W){P.optional(function(){H.assert(J,W+"&&typeof "+W+'==="object"',"invalid "+ie)});var le=J.def(W,".factor|0"),de=J.def(W,".units|0");return[le,de]});case QB:return se(function(H){var J=0;return H==="front"?J=My:H==="back"&&(J=ep),P.command(!!J,ne,$.commandStr),J},function(H,J,W){return P.optional(function(){H.assert(J,W+'==="front"||'+W+'==="back"',"invalid cull.face")}),J.def(W,'==="front"?',My,":",ep)});case ZT:return se(function(H){return P.command(typeof H=="number"&&H>=me.lineWidthDims[0]&&H<=me.lineWidthDims[1],"invalid line width, must be a positive number between "+me.lineWidthDims[0]+" and "+me.lineWidthDims[1],$.commandStr),H},function(H,J,W){return P.optional(function(){H.assert(J,"typeof "+W+'==="number"&&'+W+">="+me.lineWidthDims[0]+"&&"+W+"<="+me.lineWidthDims[1],"invalid line width")}),W});case QT:return se(function(H){return P.commandParameter(H,uI,ne,$.commandStr),uI[H]},function(H,J,W){return P.optional(function(){H.assert(J,W+'==="cw"||'+W+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),J.def(W+'==="cw"?'+u$+":"+lI)});case KT:return se(function(H){return P.command(tn(H)&&H.length===4,"color.mask must be length 4 array",$.commandStr),H.map(function(J){return!!J})},function(H,J,W){return P.optional(function(){H.assert(J,H.shared.isArrayLike+"("+W+")&&"+W+".length===4","invalid color.mask")}),Sn(4,function(le){return"!!"+W+"["+le+"]"})});case eI:return se(function(H){P.command(typeof H=="object"&&H,ne,$.commandStr);var J="value"in H?H.value:1,W=!!H.invert;return P.command(typeof J=="number"&&J>=0&&J<=1,"sample.coverage.value must be a number between 0 and 1",$.commandStr),[J,W]},function(H,J,W){P.optional(function(){H.assert(J,W+"&&typeof "+W+'==="object"',"invalid sample.coverage")});var le=J.def('"value" in ',W,"?+",W,".value:1"),de=J.def("!!",W,".invert");return[le,de]})}}),he}function Ii(V,$){var te=V.static,ce=V.dynamic,he={};return Object.keys(te).forEach(function(ie){var ne=te[ie],se;if(typeof ne=="number"||typeof ne=="boolean")se=ei(function(){return ne});else if(typeof ne=="function"){var H=ne._reglType;H==="texture2d"||H==="textureCube"?se=ei(function(J){return J.link(ne)}):H==="framebuffer"||H==="framebufferCube"?(P.command(ne.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ie+'"',$.commandStr),se=ei(function(J){return J.link(ne.color[0])})):P.commandRaise('invalid data for uniform "'+ie+'"',$.commandStr)}else tn(ne)?se=ei(function(J){var W=J.global.def("[",Sn(ne.length,function(le){return P.command(typeof ne[le]=="number"||typeof ne[le]=="boolean","invalid uniform "+ie,J.commandStr),ne[le]}),"]");return W}):P.commandRaise('invalid or missing data for uniform "'+ie+'"',$.commandStr);se.value=ne,he[ie]=se}),Object.keys(ce).forEach(function(ie){var ne=ce[ie];he[ie]=Co(ne,function(se,H){return se.invoke(H,ne)})}),he}function _r(V,$){var te=V.static,ce=V.dynamic,he={};return Object.keys(te).forEach(function(ie){var ne=te[ie],se=j.id(ie),H=new fe;if(Ax(ne))H.state=hg,H.buffer=Te.getBuffer(Te.create(ne,vg,!1,!0)),H.type=0;else{var J=Te.getBuffer(ne);if(J)H.state=hg,H.buffer=J,H.type=0;else if(P.command(typeof ne=="object"&&ne,"invalid data for attribute "+ie,$.commandStr),"constant"in ne){var W=ne.constant;H.buffer="null",H.state=UT,typeof W=="number"?H.x=W:(P.command(tn(W)&&W.length>0&&W.length<=4,"invalid constant for attribute "+ie,$.commandStr),fg.forEach(function(Tt,gr){gr<W.length&&(H[Tt]=W[gr])}))}else{Ax(ne.buffer)?J=Te.getBuffer(Te.create(ne.buffer,vg,!1,!0)):J=Te.getBuffer(ne.buffer),P.command(!!J,'missing buffer for attribute "'+ie+'"',$.commandStr);var le=ne.offset|0;P.command(le>=0,'invalid offset for attribute "'+ie+'"',$.commandStr);var de=ne.stride|0;P.command(de>=0&&de<256,'invalid stride for attribute "'+ie+'", must be integer betweeen [0, 255]',$.commandStr);var ke=ne.size|0;P.command(!("size"in ne)||ke>0&&ke<=4,'invalid size for attribute "'+ie+'", must be 1,2,3,4',$.commandStr);var Ie=!!ne.normalized,Ee=0;"type"in ne&&(P.commandParameter(ne.type,Yo,"invalid type for attribute "+ie,$.commandStr),Ee=Yo[ne.type]);var Ye=ne.divisor|0;"divisor"in ne&&(P.command(Ye===0||qe,'cannot specify divisor for attribute "'+ie+'", instancing not supported',$.commandStr),P.command(Ye>=0,'invalid divisor for attribute "'+ie+'"',$.commandStr)),P.optional(function(){var Tt=$.commandStr,gr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ne).forEach(function(xt){P.command(gr.indexOf(xt)>=0,'unknown parameter "'+xt+'" for attribute pointer "'+ie+'" (valid parameters are '+gr+")",Tt)})}),H.buffer=J,H.state=hg,H.size=ke,H.normalized=Ie,H.type=Ee||J.dtype,H.offset=le,H.stride=de,H.divisor=Ye}}he[ie]=ei(function(Tt,gr){var xt=Tt.attribCache;if(se in xt)return xt[se];var Ht={isStream:!1};return Object.keys(H).forEach(function(ur){Ht[ur]=H[ur]}),H.buffer&&(Ht.buffer=Tt.link(H.buffer),Ht.type=Ht.type||Ht.buffer+".dtype"),xt[se]=Ht,Ht})}),Object.keys(ce).forEach(function(ie){var ne=ce[ie];function se(H,J){var W=H.invoke(J,ne),le=H.shared,de=H.constants,ke=le.isBufferArgs,Ie=le.buffer;P.optional(function(){H.assert(J,W+"&&(typeof "+W+'==="object"||typeof '+W+'==="function")&&('+ke+"("+W+")||"+Ie+".getBuffer("+W+")||"+Ie+".getBuffer("+W+".buffer)||"+ke+"("+W+'.buffer)||("constant" in '+W+"&&(typeof "+W+'.constant==="number"||'+le.isArrayLike+"("+W+".constant))))",'invalid dynamic attribute "'+ie+'"')});var Ee={isStream:J.def(!1)},Ye=new fe;Ye.state=hg,Object.keys(Ye).forEach(function(Ht){Ee[Ht]=J.def(""+Ye[Ht])});var Tt=Ee.buffer,gr=Ee.type;J("if(",ke,"(",W,")){",Ee.isStream,"=true;",Tt,"=",Ie,".createStream(",vg,",",W,");",gr,"=",Tt,".dtype;","}else{",Tt,"=",Ie,".getBuffer(",W,");","if(",Tt,"){",gr,"=",Tt,".dtype;",'}else if("constant" in ',W,"){",Ee.state,"=",UT,";","if(typeof "+W+'.constant === "number"){',Ee[fg[0]],"=",W,".constant;",fg.slice(1).map(function(Ht){return Ee[Ht]}).join("="),"=0;","}else{",fg.map(function(Ht,ur){return Ee[Ht]+"="+W+".constant.length>"+ur+"?"+W+".constant["+ur+"]:0;"}).join(""),"}}else{","if(",ke,"(",W,".buffer)){",Tt,"=",Ie,".createStream(",vg,",",W,".buffer);","}else{",Tt,"=",Ie,".getBuffer(",W,".buffer);","}",gr,'="type" in ',W,"?",de.glTypes,"[",W,".type]:",Tt,".dtype;",Ee.normalized,"=!!",W,".normalized;");function xt(Ht){J(Ee[Ht],"=",W,".",Ht,"|0;")}return xt("size"),xt("offset"),xt("stride"),xt("divisor"),J("}}"),J.exit("if(",Ee.isStream,"){",Ie,".destroyStream(",Tt,");","}"),Ee}he[ie]=Co(ne,se)}),he}function di(V,$){var te=V.static,ce=V.dynamic;if(xy in te){var he=te[xy];return he!==null&&Ke.getVAO(he)===null&&(he=Ke.createVAO(he)),ei(function(ne){return ne.link(Ke.getVAO(he))})}else if(xy in ce){var ie=ce[xy];return Co(ie,function(ne,se){var H=ne.invoke(se,ie);return se.def(ne.shared.vao+".getVAO("+H+")")})}return null}function un(V){var $=V.static,te=V.dynamic,ce={};return Object.keys($).forEach(function(he){var ie=$[he];ce[he]=ei(function(ne,se){return typeof ie=="number"||typeof ie=="boolean"?""+ie:ne.link(ie)})}),Object.keys(te).forEach(function(he){var ie=te[he];ce[he]=Co(ie,function(ne,se){return ne.invoke(se,ie)})}),ce}function ri(V,$,te,ce,he){var ie=V.static,ne=V.dynamic;P.optional(function(){var xt=[Kd,wy,by,Qd,Zd,mx,Jd,yx,yy,xy].concat(Ne);function Ht(ur){Object.keys(ur).forEach(function(Gr){P.command(xt.indexOf(Gr)>=0,'unknown parameter "'+Gr+'"',he.commandStr)})}Ht(ie),Ht(ne)});var se=sr(V,$),H=bt(V),J=wr(V,H,he),W=jr(V,he),le=ti(V,he),de=mr(V,he,se);function ke(xt){var Ht=J[xt];Ht&&(le[xt]=Ht)}ke($c),ke(ot(gx));var Ie=Object.keys(le).length>0,Ee={framebuffer:H,draw:W,shader:de,state:le,dirty:Ie,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ee.profile=pr(V),Ee.uniforms=Ii(te,he),Ee.drawVAO=Ee.scopeVAO=di(V),!Ee.drawVAO&&de.program&&!se&&Q.angle_instanced_arrays){var Ye=!0,Tt=de.program.attributes.map(function(xt){var Ht=$.static[xt];return Ye=Ye&&!!Ht,Ht});if(Ye&&Tt.length>0){var gr=Ke.getVAO(Ke.createVAO(Tt));Ee.drawVAO=new Qa(null,null,null,function(xt,Ht){return xt.link(gr)}),Ee.useVAO=!0}}return se?Ee.useVAO=!0:Ee.attributes=_r($,he),Ee.context=un(ce),Ee}function pi(V,$,te){var ce=V.shared,he=ce.context,ie=V.scope();Object.keys(te).forEach(function(ne){$.save(he,"."+ne);var se=te[ne],H=se.append(V,$);Array.isArray(H)?ie(he,".",ne,"=[",H.join(),"];"):ie(he,".",ne,"=",H,";")}),$(ie)}function vi(V,$,te,ce){var he=V.shared,ie=he.gl,ne=he.framebuffer,se;ft&&(se=$.def(he.extensions,".webgl_draw_buffers"));var H=V.constants,J=H.drawBuffer,W=H.backBuffer,le;te?le=te.append(V,$):le=$.def(ne,".next"),ce||$("if(",le,"!==",ne,".cur){"),$("if(",le,"){",ie,".bindFramebuffer(",d$,",",le,".framebuffer);"),ft&&$(se,".drawBuffersWEBGL(",J,"[",le,".colorAttachments.length]);"),$("}else{",ie,".bindFramebuffer(",d$,",null);"),ft&&$(se,".drawBuffersWEBGL(",W,");"),$("}",ne,".cur=",le,";"),ce||$("}")}function Fi(V,$,te){var ce=V.shared,he=ce.gl,ie=V.current,ne=V.next,se=ce.current,H=ce.next,J=V.cond(se,".dirty");Ne.forEach(function(W){var le=ot(W);if(!(le in te.state)){var de,ke;if(le in ne){de=ne[le],ke=ie[le];var Ie=Sn(Le[le].length,function(Ye){return J.def(de,"[",Ye,"]")});J(V.cond(Ie.map(function(Ye,Tt){return Ye+"!=="+ke+"["+Tt+"]"}).join("||")).then(he,".",Re[le],"(",Ie,");",Ie.map(function(Ye,Tt){return ke+"["+Tt+"]="+Ye}).join(";"),";"))}else{de=J.def(H,".",le);var Ee=V.cond(de,"!==",se,".",le);J(Ee),le in at?Ee(V.cond(de).then(he,".enable(",at[le],");").else(he,".disable(",at[le],");"),se,".",le,"=",de,";"):Ee(he,".",Re[le],"(",de,");",se,".",le,"=",de,";")}}}),Object.keys(te.state).length===0&&J(se,".dirty=false;"),$(J)}function Ji(V,$,te,ce){var he=V.shared,ie=V.current,ne=he.current,se=he.gl;g$(Object.keys(te)).forEach(function(H){var J=te[H];if(!(ce&&!ce(J))){var W=J.append(V,$);if(at[H]){var le=at[H];Zf(J)?W?$(se,".enable(",le,");"):$(se,".disable(",le,");"):$(V.cond(W).then(se,".enable(",le,");").else(se,".disable(",le,");")),$(ne,".",H,"=",W,";")}else if(tn(W)){var de=ie[H];$(se,".",Re[H],"(",W,");",W.map(function(ke,Ie){return de+"["+Ie+"]="+ke}).join(";"),";")}else $(se,".",Re[H],"(",W,");",ne,".",H,"=",W,";")}})}function Wn(V,$){qe&&(V.instancing=$.def(V.shared.extensions,".angle_instanced_arrays"))}function vr(V,$,te,ce,he){var ie=V.shared,ne=V.stats,se=ie.current,H=ie.timer,J=te.profile;function W(){return typeof performance>"u"?"Date.now()":"performance.now()"}var le,de;function ke(xt){le=$.def(),xt(le,"=",W(),";"),typeof he=="string"?xt(ne,".count+=",he,";"):xt(ne,".count++;"),je&&(ce?(de=$.def(),xt(de,"=",H,".getNumPendingQueries();")):xt(H,".beginQuery(",ne,");"))}function Ie(xt){xt(ne,".cpuTime+=",W(),"-",le,";"),je&&(ce?xt(H,".pushScopeStats(",de,",",H,".getNumPendingQueries(),",ne,");"):xt(H,".endQuery();"))}function Ee(xt){var Ht=$.def(se,".profile");$(se,".profile=",xt,";"),$.exit(se,".profile=",Ht,";")}var Ye;if(J){if(Zf(J)){J.enable?(ke($),Ie($.exit),Ee("true")):Ee("false");return}Ye=J.append(V,$),Ee(Ye)}else Ye=$.def(se,".profile");var Tt=V.block();ke(Tt),$("if(",Ye,"){",Tt,"}");var gr=V.block();Ie(gr),$.exit("if(",Ye,"){",gr,"}")}function ea(V,$,te,ce,he){var ie=V.shared;function ne(H){switch(H){case wx:case Sx:case Cx:return 2;case bx:case Ex:case kx:return 3;case xx:case _x:case Mx:return 4;default:return 1}}function se(H,J,W){var le=ie.gl,de=$.def(H,".location"),ke=$.def(ie.attributes,"[",de,"]"),Ie=W.state,Ee=W.buffer,Ye=[W.x,W.y,W.z,W.w],Tt=["buffer","normalized","offset","stride"];function gr(){$("if(!",ke,".buffer){",le,".enableVertexAttribArray(",de,");}");var Ht=W.type,ur;if(W.size?ur=$.def(W.size,"||",J):ur=J,$("if(",ke,".type!==",Ht,"||",ke,".size!==",ur,"||",Tt.map(function(Bn){return ke+"."+Bn+"!=="+W[Bn]}).join("||"),"){",le,".bindBuffer(",vg,",",Ee,".buffer);",le,".vertexAttribPointer(",[de,ur,Ht,W.normalized,W.stride,W.offset],");",ke,".type=",Ht,";",ke,".size=",ur,";",Tt.map(function(Bn){return ke+"."+Bn+"="+W[Bn]+";"}).join(""),"}"),qe){var Gr=W.divisor;$("if(",ke,".divisor!==",Gr,"){",V.instancing,".vertexAttribDivisorANGLE(",[de,Gr],");",ke,".divisor=",Gr,";}")}}function xt(){$("if(",ke,".buffer){",le,".disableVertexAttribArray(",de,");",ke,".buffer=null;","}if(",fg.map(function(Ht,ur){return ke+"."+Ht+"!=="+Ye[ur]}).join("||"),"){",le,".vertexAttrib4f(",de,",",Ye,");",fg.map(function(Ht,ur){return ke+"."+Ht+"="+Ye[ur]+";"}).join(""),"}")}Ie===hg?gr():Ie===UT?xt():($("if(",Ie,"===",hg,"){"),gr(),$("}else{"),xt(),$("}"))}ce.forEach(function(H){var J=H.name,W=te.attributes[J],le;if(W){if(!he(W))return;le=W.append(V,$)}else{if(!he(m$))return;var de=V.scopeAttrib(J);P.optional(function(){V.assert($,de+".state","missing attribute "+J)}),le={},Object.keys(new fe).forEach(function(ke){le[ke]=$.def(de,".",ke)})}se(V.link(H),ne(H.info.type),le)})}function qr(V,$,te,ce,he){for(var ie=V.shared,ne=ie.gl,se,H=0;H<ce.length;++H){var J=ce[H],W=J.name,le=J.info.type,de=te.uniforms[W],ke=V.link(J),Ie=ke+".location",Ee;if(de){if(!he(de))continue;if(Zf(de)){var Ye=de.value;if(P.command(Ye!==null&&typeof Ye<"u",'missing uniform "'+W+'"',V.commandStr),le===Cy||le===ky){P.command(typeof Ye=="function"&&(le===Cy&&(Ye._reglType==="texture2d"||Ye._reglType==="framebuffer")||le===ky&&(Ye._reglType==="textureCube"||Ye._reglType==="framebufferCube")),"invalid texture for uniform "+W,V.commandStr);var Tt=V.link(Ye._texture||Ye.color[0]._texture);$(ne,".uniform1i(",Ie,",",Tt+".bind());"),$.exit(Tt,".unbind();")}else if(le===Sy||le===Ey||le===_y){P.optional(function(){P.command(tn(Ye),"invalid matrix for uniform "+W,V.commandStr),P.command(le===Sy&&Ye.length===4||le===Ey&&Ye.length===9||le===_y&&Ye.length===16,"invalid length for matrix uniform "+W,V.commandStr)});var gr=V.global.def("new Float32Array(["+Array.prototype.slice.call(Ye)+"])"),xt=2;le===Ey?xt=3:le===_y&&(xt=4),$(ne,".uniformMatrix",xt,"fv(",Ie,",false,",gr,");")}else{switch(le){case aI:P.commandType(Ye,"number","uniform "+W,V.commandStr),se="1f";break;case wx:P.command(tn(Ye)&&Ye.length===2,"uniform "+W,V.commandStr),se="2f";break;case bx:P.command(tn(Ye)&&Ye.length===3,"uniform "+W,V.commandStr),se="3f";break;case xx:P.command(tn(Ye)&&Ye.length===4,"uniform "+W,V.commandStr),se="4f";break;case sI:P.commandType(Ye,"boolean","uniform "+W,V.commandStr),se="1i";break;case oI:P.commandType(Ye,"number","uniform "+W,V.commandStr),se="1i";break;case Cx:P.command(tn(Ye)&&Ye.length===2,"uniform "+W,V.commandStr),se="2i";break;case Sx:P.command(tn(Ye)&&Ye.length===2,"uniform "+W,V.commandStr),se="2i";break;case kx:P.command(tn(Ye)&&Ye.length===3,"uniform "+W,V.commandStr),se="3i";break;case Ex:P.command(tn(Ye)&&Ye.length===3,"uniform "+W,V.commandStr),se="3i";break;case Mx:P.command(tn(Ye)&&Ye.length===4,"uniform "+W,V.commandStr),se="4i";break;case _x:P.command(tn(Ye)&&Ye.length===4,"uniform "+W,V.commandStr),se="4i";break}$(ne,".uniform",se,"(",Ie,",",tn(Ye)?Array.prototype.slice.call(Ye):Ye,");")}continue}else Ee=de.append(V,$)}else{if(!he(m$))continue;Ee=$.def(ie.uniforms,"[",j.id(W),"]")}le===Cy?(P(!Array.isArray(Ee),"must specify a scalar prop for textures"),$("if(",Ee,"&&",Ee,'._reglType==="framebuffer"){',Ee,"=",Ee,".color[0];","}")):le===ky&&(P(!Array.isArray(Ee),"must specify a scalar prop for cube maps"),$("if(",Ee,"&&",Ee,'._reglType==="framebufferCube"){',Ee,"=",Ee,".color[0];","}")),P.optional(function(){function Za(Ol,_$){V.assert($,Ol,'bad data or missing for uniform "'+W+'".  '+_$)}function cI(Ol){P(!Array.isArray(Ee),"must not specify an array type for uniform"),Za("typeof "+Ee+'==="'+Ol+'"',"invalid type, expected "+Ol)}function zs(Ol,_$){Array.isArray(Ee)?P(Ee.length===Ol,"must have length "+Ol):Za(ie.isArrayLike+"("+Ee+")&&"+Ee+".length==="+Ol,"invalid vector, should have length "+Ol,V.commandStr)}function E$(Ol){P(!Array.isArray(Ee),"must not specify a value type"),Za("typeof "+Ee+'==="function"&&'+Ee+'._reglType==="texture'+(Ol===s$?"2d":"Cube")+'"',"invalid texture type",V.commandStr)}switch(le){case oI:cI("number");break;case Sx:zs(2);break;case Ex:zs(3);break;case _x:zs(4);break;case aI:cI("number");break;case wx:zs(2);break;case bx:zs(3);break;case xx:zs(4);break;case sI:cI("boolean");break;case Cx:zs(2);break;case kx:zs(3);break;case Mx:zs(4);break;case Sy:zs(4);break;case Ey:zs(9);break;case _y:zs(16);break;case Cy:E$(s$);break;case ky:E$(bpe);break}});var Ht=1;switch(le){case Cy:case ky:var ur=$.def(Ee,"._texture");$(ne,".uniform1i(",Ie,",",ur,".bind());"),$.exit(ur,".unbind();");continue;case oI:case sI:se="1i";break;case Sx:case Cx:se="2i",Ht=2;break;case Ex:case kx:se="3i",Ht=3;break;case _x:case Mx:se="4i",Ht=4;break;case aI:se="1f";break;case wx:se="2f",Ht=2;break;case bx:se="3f",Ht=3;break;case xx:se="4f",Ht=4;break;case Sy:se="Matrix2fv";break;case Ey:se="Matrix3fv";break;case _y:se="Matrix4fv";break}if($(ne,".uniform",se,"(",Ie,","),se.charAt(0)==="M"){var Gr=Math.pow(le-Sy+2,2),Bn=V.global.def("new Float32Array(",Gr,")");Array.isArray(Ee)?$("false,(",Sn(Gr,function(Za){return Bn+"["+Za+"]="+Ee[Za]}),",",Bn,")"):$("false,(Array.isArray(",Ee,")||",Ee," instanceof Float32Array)?",Ee,":(",Sn(Gr,function(Za){return Bn+"["+Za+"]="+Ee+"["+Za+"]"}),",",Bn,")")}else Ht>1?$(Sn(Ht,function(Za){return Array.isArray(Ee)?Ee[Za]:Ee+"["+Za+"]"})):(P(!Array.isArray(Ee),"uniform value must not be an array"),$(Ee));$(");")}}function Ut(V,$,te,ce){var he=V.shared,ie=he.gl,ne=he.draw,se=ce.draw;function H(){var ur=se.elements,Gr,Bn=$;return ur?((ur.contextDep&&ce.contextDynamic||ur.propDep)&&(Bn=te),Gr=ur.append(V,Bn)):Gr=Bn.def(ne,".",Qd),Gr&&Bn("if("+Gr+")"+ie+".bindBuffer("+mpe+","+Gr+".buffer.buffer);"),Gr}function J(){var ur=se.count,Gr,Bn=$;return ur?((ur.contextDep&&ce.contextDynamic||ur.propDep)&&(Bn=te),Gr=ur.append(V,Bn),P.optional(function(){ur.MISSING&&V.assert($,"false","missing vertex count"),ur.DYNAMIC&&V.assert(Bn,Gr+">=0","missing vertex count")})):(Gr=Bn.def(ne,".",Jd),P.optional(function(){V.assert(Bn,Gr+">=0","missing vertex count")})),Gr}var W=H();function le(ur){var Gr=se[ur];return Gr?Gr.contextDep&&ce.contextDynamic||Gr.propDep?Gr.append(V,te):Gr.append(V,$):$.def(ne,".",ur)}var de=le(Zd),ke=le(mx),Ie=J();if(typeof Ie=="number"){if(Ie===0)return}else te("if(",Ie,"){"),te.exit("}");var Ee,Ye;qe&&(Ee=le(yx),Ye=V.instancing);var Tt=W+".type",gr=se.elements&&Zf(se.elements);function xt(){function ur(){te(Ye,".drawElementsInstancedANGLE(",[de,Ie,Tt,ke+"<<(("+Tt+"-"+zB+")>>1)",Ee],");")}function Gr(){te(Ye,".drawArraysInstancedANGLE(",[de,ke,Ie,Ee],");")}W?gr?ur():(te("if(",W,"){"),ur(),te("}else{"),Gr(),te("}")):Gr()}function Ht(){function ur(){te(ie+".drawElements("+[de,Ie,Tt,ke+"<<(("+Tt+"-"+zB+")>>1)"]+");")}function Gr(){te(ie+".drawArrays("+[de,ke,Ie]+");")}W?gr?ur():(te("if(",W,"){"),ur(),te("}else{"),Gr(),te("}")):Gr()}qe&&(typeof Ee!="number"||Ee>=0)?typeof Ee=="string"?(te("if(",Ee,">0){"),xt(),te("}else if(",Ee,"<0){"),Ht(),te("}")):xt():Ht()}function Er(V,$,te,ce,he){var ie=Zt(),ne=ie.proc("body",he);return P.optional(function(){ie.commandStr=$.commandStr,ie.command=ie.link($.commandStr)}),qe&&(ie.instancing=ne.def(ie.shared.extensions,".angle_instanced_arrays")),V(ie,ne,te,ce),ie.compile().body}function Rr(V,$,te,ce){Wn(V,$),te.useVAO?te.drawVAO?$(V.shared.vao,".setVAO(",te.drawVAO.append(V,$),");"):$(V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"):($(V.shared.vao,".setVAO(null);"),ea(V,$,te,ce.attributes,function(){return!0})),qr(V,$,te,ce.uniforms,function(){return!0}),Ut(V,$,$,te)}function Vn(V,$){var te=V.proc("draw",1);Wn(V,te),pi(V,te,$.context),vi(V,te,$.framebuffer),Fi(V,te,$),Ji(V,te,$.state),vr(V,te,$,!1,!0);var ce=$.shader.progVar.append(V,te);if(te(V.shared.gl,".useProgram(",ce,".program);"),$.shader.program)Rr(V,te,$,$.shader.program);else{te(V.shared.vao,".setVAO(null);");var he=V.global.def("{}"),ie=te.def(ce,".id"),ne=te.def(he,"[",ie,"]");te(V.cond(ne).then(ne,".call(this,a0);").else(ne,"=",he,"[",ie,"]=",V.link(function(se){return Er(Rr,V,$,se,1)}),"(",ce,");",ne,".call(this,a0);"))}Object.keys($.state).length>0&&te(V.shared.current,".dirty=true;")}function bu(V,$,te,ce){V.batchId="a1",Wn(V,$);function he(){return!0}ea(V,$,te,ce.attributes,he),qr(V,$,te,ce.uniforms,he),Ut(V,$,$,te)}function tp(V,$,te,ce){Wn(V,$);var he=te.contextDep,ie=$.def(),ne="a0",se="a1",H=$.def();V.shared.props=H,V.batchId=ie;var J=V.scope(),W=V.scope();$(J.entry,"for(",ie,"=0;",ie,"<",se,";++",ie,"){",H,"=",ne,"[",ie,"];",W,"}",J.exit);function le(Tt){return Tt.contextDep&&he||Tt.propDep}function de(Tt){return!le(Tt)}if(te.needsContext&&pi(V,W,te.context),te.needsFramebuffer&&vi(V,W,te.framebuffer),Ji(V,W,te.state,le),te.profile&&le(te.profile)&&vr(V,W,te,!1,!0),ce)te.useVAO?te.drawVAO?le(te.drawVAO)?W(V.shared.vao,".setVAO(",te.drawVAO.append(V,W),");"):J(V.shared.vao,".setVAO(",te.drawVAO.append(V,J),");"):J(V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"):(J(V.shared.vao,".setVAO(null);"),ea(V,J,te,ce.attributes,de),ea(V,W,te,ce.attributes,le)),qr(V,J,te,ce.uniforms,de),qr(V,W,te,ce.uniforms,le),Ut(V,J,W,te);else{var ke=V.global.def("{}"),Ie=te.shader.progVar.append(V,W),Ee=W.def(Ie,".id"),Ye=W.def(ke,"[",Ee,"]");W(V.shared.gl,".useProgram(",Ie,".program);","if(!",Ye,"){",Ye,"=",ke,"[",Ee,"]=",V.link(function(Tt){return Er(bu,V,te,Tt,2)}),"(",Ie,");}",Ye,".call(this,a0[",ie,"],",ie,");")}}function K(V,$){var te=V.proc("batch",2);V.batchId="0",Wn(V,te);var ce=!1,he=!0;Object.keys($.context).forEach(function(ke){ce=ce||$.context[ke].propDep}),ce||(pi(V,te,$.context),he=!1);var ie=$.framebuffer,ne=!1;ie?(ie.propDep?ce=ne=!0:ie.contextDep&&ce&&(ne=!0),ne||vi(V,te,ie)):vi(V,te,null),$.state.viewport&&$.state.viewport.propDep&&(ce=!0);function se(ke){return ke.contextDep&&ce||ke.propDep}Fi(V,te,$),Ji(V,te,$.state,function(ke){return!se(ke)}),(!$.profile||!se($.profile))&&vr(V,te,$,!1,"a1"),$.contextDep=ce,$.needsContext=he,$.needsFramebuffer=ne;var H=$.shader.progVar;if(H.contextDep&&ce||H.propDep)tp(V,te,$,null);else{var J=H.append(V,te);if(te(V.shared.gl,".useProgram(",J,".program);"),$.shader.program)tp(V,te,$,$.shader.program);else{te(V.shared.vao,".setVAO(null);");var W=V.global.def("{}"),le=te.def(J,".id"),de=te.def(W,"[",le,"]");te(V.cond(de).then(de,".call(this,a0,a1);").else(de,"=",W,"[",le,"]=",V.link(function(ke){return Er(tp,V,$,ke,2)}),"(",J,");",de,".call(this,a0,a1);"))}}Object.keys($.state).length>0&&te(V.shared.current,".dirty=true;")}function we(V,$){var te=V.proc("scope",3);V.batchId="a2";var ce=V.shared,he=ce.current;pi(V,te,$.context),$.framebuffer&&$.framebuffer.append(V,te),g$(Object.keys($.state)).forEach(function(ne){var se=$.state[ne],H=se.append(V,te);tn(H)?H.forEach(function(J,W){te.set(V.next[ne],"["+W+"]",J)}):te.set(ce.next,"."+ne,H)}),vr(V,te,$,!0,!0),[Qd,mx,Jd,yx,Zd].forEach(function(ne){var se=$.draw[ne];se&&te.set(ce.draw,"."+ne,""+se.append(V,te))}),Object.keys($.uniforms).forEach(function(ne){var se=$.uniforms[ne].append(V,te);Array.isArray(se)&&(se="["+se.join()+"]"),te.set(ce.uniforms,"["+j.id(ne)+"]",se)}),Object.keys($.attributes).forEach(function(ne){var se=$.attributes[ne].append(V,te),H=V.scopeAttrib(ne);Object.keys(new fe).forEach(function(J){te.set(H,"."+J,se[J])})}),$.scopeVAO&&te.set(ce.vao,".targetVAO",$.scopeVAO.append(V,te));function ie(ne){var se=$.shader[ne];se&&te.set(ce.shader,"."+ne,se.append(V,te))}ie(wy),ie(by),Object.keys($.state).length>0&&(te(he,".dirty=true;"),te.exit(he,".dirty=true;")),te("a1(",V.shared.context,",a0,",V.batchId,");")}function ve(V){if(!(typeof V!="object"||tn(V))){for(var $=Object.keys(V),te=0;te<$.length;++te)if(rr.isDynamic(V[$[te]]))return!0;return!1}}function mt(V,$,te){var ce=$.static[te];if(!ce||!ve(ce))return;var he=V.global,ie=Object.keys(ce),ne=!1,se=!1,H=!1,J=V.global.def("{}");ie.forEach(function(le){var de=ce[le];if(rr.isDynamic(de)){typeof de=="function"&&(de=ce[le]=rr.unbox(de));var ke=Co(de,null);ne=ne||ke.thisDep,H=H||ke.propDep,se=se||ke.contextDep}else{switch(he(J,".",le,"="),typeof de){case"number":he(de);break;case"string":he('"',de,'"');break;case"object":Array.isArray(de)&&he("[",de.join(),"]");break;default:he(V.link(de));break}he(";")}});function W(le,de){ie.forEach(function(ke){var Ie=ce[ke];if(rr.isDynamic(Ie)){var Ee=le.invoke(de,Ie);de(J,".",ke,"=",Ee,";")}})}$.dynamic[te]=new rr.DynamicVariable(vx,{thisDep:ne,contextDep:se,propDep:H,ref:J,append:W}),delete $.static[te]}function br(V,$,te,ce,he){var ie=Zt();ie.stats=ie.link(he),Object.keys($.static).forEach(function(se){mt(ie,$,se)}),gpe.forEach(function(se){mt(ie,V,se)});var ne=ri(V,$,te,ce,ie);return Vn(ie,ne),we(ie,ne),K(ie,ne),n(ie.compile(),{destroy:function(){ne.shader.program.destroy()}})}return{next:vt,current:Le,procs:function(){var V=Zt(),$=V.proc("poll"),te=V.proc("refresh"),ce=V.block();$(ce),te(ce);var he=V.shared,ie=he.gl,ne=he.next,se=he.current;ce(se,".dirty=false;"),vi(V,$),vi(V,te,null,!0);var H;qe&&(H=V.link(qe)),Q.oes_vertex_array_object&&te(V.link(Q.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var J=0;J<me.maxAttributes;++J){var W=te.def(he.attributes,"[",J,"]"),le=V.cond(W,".buffer");le.then(ie,".enableVertexAttribArray(",J,");",ie,".bindBuffer(",vg,",",W,".buffer.buffer);",ie,".vertexAttribPointer(",J,",",W,".size,",W,".type,",W,".normalized,",W,".stride,",W,".offset);").else(ie,".disableVertexAttribArray(",J,");",ie,".vertexAttrib4f(",J,",",W,".x,",W,".y,",W,".z,",W,".w);",W,".buffer=null;"),te(le),qe&&te(H,".vertexAttribDivisorANGLE(",J,",",W,".divisor);")}return te(V.shared.vao,".currentVAO=null;",V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"),Object.keys(at).forEach(function(de){var ke=at[de],Ie=ce.def(ne,".",de),Ee=V.block();Ee("if(",Ie,"){",ie,".enable(",ke,")}else{",ie,".disable(",ke,")}",se,".",de,"=",Ie,";"),te(Ee),$("if(",Ie,"!==",se,".",de,"){",Ee,"}")}),Object.keys(Re).forEach(function(de){var ke=Re[de],Ie=Le[de],Ee,Ye,Tt=V.block();if(Tt(ie,".",ke,"("),tn(Ie)){var gr=Ie.length;Ee=V.global.def(ne,".",de),Ye=V.global.def(se,".",de),Tt(Sn(gr,function(xt){return Ee+"["+xt+"]"}),");",Sn(gr,function(xt){return Ye+"["+xt+"]="+Ee+"["+xt+"];"}).join("")),$("if(",Sn(gr,function(xt){return Ee+"["+xt+"]!=="+Ye+"["+xt+"]"}).join("||"),"){",Tt,"}")}else Ee=ce.def(ne,".",de),Ye=ce.def(se,".",de),Tt(Ee,");",se,".",de,"=",Ee,";"),$("if(",Ee,"!==",Ye,"){",Tt,"}");te(Tt)}),V.compile()}(),compile:br}}function Npe(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Fpe=34918,Bpe=34919,y$=35007,$pe=function(I,j){if(!j.ext_disjoint_timer_query)return null;var Q=[];function me(){return Q.pop()||j.ext_disjoint_timer_query.createQueryEXT()}function Te(qe){Q.push(qe)}var ge=[];function be(qe){var ft=me();j.ext_disjoint_timer_query.beginQueryEXT(y$,ft),ge.push(ft),je(ge.length-1,ge.length,qe)}function ze(){j.ext_disjoint_timer_query.endQueryEXT(y$)}function Ue(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ke=[];function We(){return Ke.pop()||new Ue}function rt(qe){Ke.push(qe)}var lt=[];function je(qe,ft,Le){var vt=We();vt.startQueryIndex=qe,vt.endQueryIndex=ft,vt.sum=0,vt.stats=Le,lt.push(vt)}var nt=[],fe=[];function xe(){var qe,ft,Le=ge.length;if(Le!==0){fe.length=Math.max(fe.length,Le+1),nt.length=Math.max(nt.length,Le+1),nt[0]=0,fe[0]=0;var vt=0;for(qe=0,ft=0;ft<ge.length;++ft){var Ne=ge[ft];j.ext_disjoint_timer_query.getQueryObjectEXT(Ne,Bpe)?(vt+=j.ext_disjoint_timer_query.getQueryObjectEXT(Ne,Fpe),Te(Ne)):ge[qe++]=Ne,nt[ft+1]=vt,fe[ft+1]=qe}for(ge.length=qe,qe=0,ft=0;ft<lt.length;++ft){var at=lt[ft],Re=at.startQueryIndex,ot=at.endQueryIndex;at.sum+=nt[ot]-nt[Re];var Nt=fe[Re],ir=fe[ot];ir===Nt?(at.stats.gpuTime+=at.sum/1e6,rt(at)):(at.startQueryIndex=Nt,at.endQueryIndex=ir,lt[qe++]=at)}lt.length=qe}}return{beginQuery:be,endQuery:ze,pushScopeStats:je,update:xe,getNumPendingQueries:function(){return ge.length},clear:function(){Q.push.apply(Q,ge);for(var qe=0;qe<Q.length;qe++)j.ext_disjoint_timer_query.deleteQueryEXT(Q[qe]);ge.length=0,Q.length=0},restore:function(){ge.length=0,Q.length=0}}},zpe=16384,jpe=256,Gpe=1024,Upe=34962,w$="webglcontextlost",b$="webglcontextrestored",x$=1,Wpe=2,Vpe=3;function S$(I,j){for(var Q=0;Q<I.length;++Q)if(I[Q]===j)return Q;return-1}function Hpe(I){var j=ha(I);if(!j)return null;var Q=j.gl,me=Q.getContextAttributes(),Te=Q.isContextLost(),ge=Ps(Q,j);if(!ge)return null;var be=Xr(),ze=Npe(),Ue=ge.extensions,Ke=$pe(Q,Ue),We=hr(),rt=Q.drawingBufferWidth,lt=Q.drawingBufferHeight,je={tick:0,time:0,viewportWidth:rt,viewportHeight:lt,framebufferWidth:rt,framebufferHeight:lt,drawingBufferWidth:rt,drawingBufferHeight:lt,pixelRatio:j.pixelRatio},nt={},fe={elements:null,primitive:4,count:-1,offset:0,instances:-1},xe=Hb(Q,Ue),qe=ex(Q,ze,j,Le),ft=ape(Q,Ue,xe,ze,qe);function Le(Ut){return ft.destroyBuffer(Ut)}var vt=Ka(Q,Ue,qe,ze),Ne=upe(Q,be,ze,j),at=Nde(Q,Ue,xe,function(){Nt.procs.poll()},je,ze,j),Re=Fde(Q,Ue,xe,ze,j),ot=npe(Q,Ue,xe,at,Re,ze),Nt=Rpe(Q,be,Ue,xe,qe,vt,at,ot,nt,ft,Ne,fe,je,Ke,j),ir=hpe(Q,ot,Nt.procs.poll,je,me,Ue,xe),ut=Nt.next,Je=Q.canvas,De=[],Zt=[],pr=[],bt=[j.onDestroy],wr=null;function sr(){if(De.length===0){Ke&&Ke.update(),wr=null;return}wr=Qt.next(sr),Ji();for(var Ut=De.length-1;Ut>=0;--Ut){var Er=De[Ut];Er&&Er(je,null,0)}Q.flush(),Ke&&Ke.update()}function mr(){!wr&&De.length>0&&(wr=Qt.next(sr))}function jr(){wr&&(Qt.cancel(sr),wr=null)}function ti(Ut){Ut.preventDefault(),Te=!0,jr(),Zt.forEach(function(Er){Er()})}function Ii(Ut){Q.getError(),Te=!1,ge.restore(),Ne.restore(),qe.restore(),at.restore(),Re.restore(),ot.restore(),ft.restore(),Ke&&Ke.restore(),Nt.procs.refresh(),mr(),pr.forEach(function(Er){Er()})}Je&&(Je.addEventListener(w$,ti,!1),Je.addEventListener(b$,Ii,!1));function _r(){De.length=0,jr(),Je&&(Je.removeEventListener(w$,ti),Je.removeEventListener(b$,Ii)),Ne.clear(),ot.clear(),Re.clear(),at.clear(),vt.clear(),qe.clear(),ft.clear(),Ke&&Ke.clear(),bt.forEach(function(Ut){Ut()})}function di(Ut){P(!!Ut,"invalid args to regl({...})"),P.type(Ut,"object","invalid args to regl({...})");function Er(he){var ie=n({},he);delete ie.uniforms,delete ie.attributes,delete ie.context,delete ie.vao,"stencil"in ie&&ie.stencil.op&&(ie.stencil.opBack=ie.stencil.opFront=ie.stencil.op,delete ie.stencil.op);function ne(se){if(se in ie){var H=ie[se];delete ie[se],Object.keys(H).forEach(function(J){ie[se+"."+J]=H[J]})}}return ne("blend"),ne("depth"),ne("cull"),ne("stencil"),ne("polygonOffset"),ne("scissor"),ne("sample"),"vao"in he&&(ie.vao=he.vao),ie}function Rr(he,ie){var ne={},se={};return Object.keys(he).forEach(function(H){var J=he[H];if(rr.isDynamic(J)){se[H]=rr.unbox(J,H);return}else if(ie&&Array.isArray(J)){for(var W=0;W<J.length;++W)if(rr.isDynamic(J[W])){se[H]=rr.unbox(J,H);return}}ne[H]=J}),{dynamic:se,static:ne}}var Vn=Rr(Ut.context||{},!0),bu=Rr(Ut.uniforms||{},!0),tp=Rr(Ut.attributes||{},!1),K=Rr(Er(Ut),!1),we={gpuTime:0,cpuTime:0,count:0},ve=Nt.compile(K,tp,bu,Vn,we),mt=ve.draw,br=ve.batch,V=ve.scope,$=[];function te(he){for(;$.length<he;)$.push(null);return $}function ce(he,ie){var ne;if(Te&&P.raise("context lost"),typeof he=="function")return V.call(this,null,he,0);if(typeof ie=="function")if(typeof he=="number")for(ne=0;ne<he;++ne)V.call(this,null,ie,ne);else if(Array.isArray(he))for(ne=0;ne<he.length;++ne)V.call(this,he[ne],ie,ne);else return V.call(this,he,ie,0);else if(typeof he=="number"){if(he>0)return br.call(this,te(he|0),he|0)}else if(Array.isArray(he)){if(he.length)return br.call(this,he,he.length)}else return mt.call(this,he)}return n(ce,{stats:we,destroy:function(){ve.destroy()}})}var un=ot.setFBO=di({framebuffer:rr.define.call(null,x$,"framebuffer")});function ri(Ut,Er){var Rr=0;Nt.procs.poll();var Vn=Er.color;Vn&&(Q.clearColor(+Vn[0]||0,+Vn[1]||0,+Vn[2]||0,+Vn[3]||0),Rr|=zpe),"depth"in Er&&(Q.clearDepth(+Er.depth),Rr|=jpe),"stencil"in Er&&(Q.clearStencil(Er.stencil|0),Rr|=Gpe),P(!!Rr,"called regl.clear with no buffer specified"),Q.clear(Rr)}function pi(Ut){if(P(typeof Ut=="object"&&Ut,"regl.clear() takes an object as input"),"framebuffer"in Ut)if(Ut.framebuffer&&Ut.framebuffer_reglType==="framebufferCube")for(var Er=0;Er<6;++Er)un(n({framebuffer:Ut.framebuffer.faces[Er]},Ut),ri);else un(Ut,ri);else ri(null,Ut)}function vi(Ut){P.type(Ut,"function","regl.frame() callback must be a function"),De.push(Ut);function Er(){var Rr=S$(De,Ut);P(Rr>=0,"cannot cancel a frame twice");function Vn(){var bu=S$(De,Vn);De[bu]=De[De.length-1],De.length-=1,De.length<=0&&jr()}De[Rr]=Vn}return mr(),{cancel:Er}}function Fi(){var Ut=ut.viewport,Er=ut.scissor_box;Ut[0]=Ut[1]=Er[0]=Er[1]=0,je.viewportWidth=je.framebufferWidth=je.drawingBufferWidth=Ut[2]=Er[2]=Q.drawingBufferWidth,je.viewportHeight=je.framebufferHeight=je.drawingBufferHeight=Ut[3]=Er[3]=Q.drawingBufferHeight}function Ji(){je.tick+=1,je.time=vr(),Fi(),Nt.procs.poll()}function Wn(){at.refresh(),Fi(),Nt.procs.refresh(),Ke&&Ke.update()}function vr(){return(hr()-We)/1e3}Wn();function ea(Ut,Er){P.type(Er,"function","listener callback must be a function");var Rr;switch(Ut){case"frame":return vi(Er);case"lost":Rr=Zt;break;case"restore":Rr=pr;break;case"destroy":Rr=bt;break;default:P.raise("invalid event, must be one of frame,lost,restore,destroy")}return Rr.push(Er),{cancel:function(){for(var Vn=0;Vn<Rr.length;++Vn)if(Rr[Vn]===Er){Rr[Vn]=Rr[Rr.length-1],Rr.pop();return}}}}var qr=n(di,{clear:pi,prop:rr.define.bind(null,x$),context:rr.define.bind(null,Wpe),this:rr.define.bind(null,Vpe),draw:di({}),buffer:function(Ut){return qe.create(Ut,Upe,!1,!1)},elements:function(Ut){return vt.create(Ut,!1)},texture:at.create2D,cube:at.createCube,renderbuffer:Re.create,framebuffer:ot.create,framebufferCube:ot.createCube,vao:ft.createVAO,attributes:me,frame:vi,on:ea,limits:xe,hasExtension:function(Ut){return xe.extensions.indexOf(Ut.toLowerCase())>=0},read:ir,destroy:_r,_gl:Q,_refresh:Wn,poll:function(){Ji(),Ke&&Ke.update()},now:vr,stats:ze});return j.onDone(null,qr),qr}return Hpe})})(uhe);var dct=uhe.exports;const pct=Ms(dct);var vct=function(){function t(e,r){pu(this,t),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,i=r.offset,a=r.stride,o=r.normalized,s=r.size,l=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return vu(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Uc,t1,Wc,Us,r1,ah,n1,yE,Au,lp,ga,Tu,Iu,wE,gct=(Uc={},pt(Uc,Ge.POINTS,"points"),pt(Uc,Ge.LINES,"lines"),pt(Uc,Ge.LINE_LOOP,"line loop"),pt(Uc,Ge.LINE_STRIP,"line strip"),pt(Uc,Ge.TRIANGLES,"triangles"),pt(Uc,Ge.TRIANGLE_FAN,"triangle fan"),pt(Uc,Ge.TRIANGLE_STRIP,"triangle strip"),Uc),che=(t1={},pt(t1,Ge.STATIC_DRAW,"static"),pt(t1,Ge.DYNAMIC_DRAW,"dynamic"),pt(t1,Ge.STREAM_DRAW,"stream"),t1),$F=(Wc={},pt(Wc,Ge.BYTE,"int8"),pt(Wc,Ge.UNSIGNED_INT,"int16"),pt(Wc,Ge.INT,"int32"),pt(Wc,Ge.UNSIGNED_BYTE,"uint8"),pt(Wc,Ge.UNSIGNED_SHORT,"uint16"),pt(Wc,Ge.UNSIGNED_INT,"uint32"),pt(Wc,Ge.FLOAT,"float"),Wc),mct=(Us={},pt(Us,Ge.ALPHA,"alpha"),pt(Us,Ge.LUMINANCE,"luminance"),pt(Us,Ge.LUMINANCE_ALPHA,"luminance alpha"),pt(Us,Ge.RGB,"rgb"),pt(Us,Ge.RGBA,"rgba"),pt(Us,Ge.RGBA4,"rgba4"),pt(Us,Ge.RGB5_A1,"rgb5 a1"),pt(Us,Ge.RGB565,"rgb565"),pt(Us,Ge.DEPTH_COMPONENT,"depth"),pt(Us,Ge.DEPTH_STENCIL,"depth stencil"),Us),yct=(r1={},pt(r1,Ge.DONT_CARE,"dont care"),pt(r1,Ge.NICEST,"nice"),pt(r1,Ge.FASTEST,"fast"),r1),KH=(ah={},pt(ah,Ge.NEAREST,"nearest"),pt(ah,Ge.LINEAR,"linear"),pt(ah,Ge.LINEAR_MIPMAP_LINEAR,"mipmap"),pt(ah,Ge.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),pt(ah,Ge.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),pt(ah,Ge.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),ah),QH=(n1={},pt(n1,Ge.REPEAT,"repeat"),pt(n1,Ge.CLAMP_TO_EDGE,"clamp"),pt(n1,Ge.MIRRORED_REPEAT,"mirror"),n1),wct=(yE={},pt(yE,Ge.NONE,"none"),pt(yE,Ge.BROWSER_DEFAULT_WEBGL,"browser"),yE),bct=(Au={},pt(Au,Ge.NEVER,"never"),pt(Au,Ge.ALWAYS,"always"),pt(Au,Ge.LESS,"less"),pt(Au,Ge.LEQUAL,"lequal"),pt(Au,Ge.GREATER,"greater"),pt(Au,Ge.GEQUAL,"gequal"),pt(Au,Ge.EQUAL,"equal"),pt(Au,Ge.NOTEQUAL,"notequal"),Au),ZH=(lp={},pt(lp,Ge.FUNC_ADD,"add"),pt(lp,Ge.MIN_EXT,"min"),pt(lp,Ge.MAX_EXT,"max"),pt(lp,Ge.FUNC_SUBTRACT,"subtract"),pt(lp,Ge.FUNC_REVERSE_SUBTRACT,"reverse subtract"),lp),bE=(ga={},pt(ga,Ge.ZERO,"zero"),pt(ga,Ge.ONE,"one"),pt(ga,Ge.SRC_COLOR,"src color"),pt(ga,Ge.ONE_MINUS_SRC_COLOR,"one minus src color"),pt(ga,Ge.SRC_ALPHA,"src alpha"),pt(ga,Ge.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),pt(ga,Ge.DST_COLOR,"dst color"),pt(ga,Ge.ONE_MINUS_DST_COLOR,"one minus dst color"),pt(ga,Ge.DST_ALPHA,"dst alpha"),pt(ga,Ge.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),pt(ga,Ge.CONSTANT_COLOR,"constant color"),pt(ga,Ge.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),pt(ga,Ge.CONSTANT_ALPHA,"constant alpha"),pt(ga,Ge.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),pt(ga,Ge.SRC_ALPHA_SATURATE,"src alpha saturate"),ga),xct=(Tu={},pt(Tu,Ge.NEVER,"never"),pt(Tu,Ge.ALWAYS,"always"),pt(Tu,Ge.LESS,"less"),pt(Tu,Ge.LEQUAL,"lequal"),pt(Tu,Ge.GREATER,"greater"),pt(Tu,Ge.GEQUAL,"gequal"),pt(Tu,Ge.EQUAL,"equal"),pt(Tu,Ge.NOTEQUAL,"notequal"),Tu),Dg=(Iu={},pt(Iu,Ge.ZERO,"zero"),pt(Iu,Ge.KEEP,"keep"),pt(Iu,Ge.REPLACE,"replace"),pt(Iu,Ge.INVERT,"invert"),pt(Iu,Ge.INCR,"increment"),pt(Iu,Ge.DECR,"decrement"),pt(Iu,Ge.INCR_WRAP,"increment wrap"),pt(Iu,Ge.DECR_WRAP,"decrement wrap"),Iu),Sct=(wE={},pt(wE,Ge.FRONT,"front"),pt(wE,Ge.BACK,"back"),wE),Ect=function(){function t(e,r){pu(this,t),this.buffer=void 0;var n=r.data,i=r.usage,a=r.type;this.buffer=e.buffer({data:n,usage:che[i||Ge.STATIC_DRAW],type:$F[a||Ge.UNSIGNED_BYTE]})}return vu(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(r){var n=r.data,i=r.offset;this.buffer.subdata(n,i)}}]),t}();function bN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _ct(t){if(Array.isArray(t))return bN(t)}function Cct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kct(t,e){if(t){if(typeof t=="string")return bN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(t,e)}}function Mct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Act(t){return _ct(t)||Cct(t)||kct(t)||Mct()}function JH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JH(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JH(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Tct=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,tX=0,Ict=function(){function t(e,r){var n=this;pu(this,t),this.reGl=e,this.context=r,this.entity=she(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,h=u.data,d=u.isReferer,p=u.storageClass;if(p===zm.StorageBuffer){if(d)n.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return h.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,h);var v=n.textureCache[c],g=v.textureWidth,m=v.isOutput;i["".concat(c,"Size")]=[g,g],m&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,h)))}i[c]=function(){return n.textureCache[c].texture}}else if(p===zm.Uniform){if(h&&(Array.isArray(h)||iM(h))&&h.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:Tct,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return vu(t,[{key:"run",value:function(){var r=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){r.computeCommand()})}},{key:"readData",value:function(){var e=Uh(za.mark(function n(){var i=this,a,o,s,l,u,c,f,h;return za.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){p.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(h=0;h<a.length;h+=4)l===1?f.push(a[h]):l===2?f.push(a[h],a[h+1]):f.push(a[h],a[h+1],a[h+2]);else f=a;return p.abrupt("return",new c(f.slice(0,s)));case 6:return p.abrupt("return",new Float32Array);case 7:case"end":return p.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"confirmInput",value:function(r,n){var i;this.entity===r.entity?(this.dynamicPingpong=!0,i=this):i=r,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(r,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===r});if(i){var a=this.calcDataTexture(r,i.type,n),o=a.texture,s=a.data;this.textureCache[r].data=s,this.textureCache[r].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var r=this.context.output.name;this.textureCache[r].id=this.getOuputDataTexture().id,this.textureCache[r].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var r=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=r}},{key:"cloneDataTexture",value:function(r){var n=r.data,i=r.textureWidth;return eX(eX({},r),{},{id:tX++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(r,n,i){var a=1;n===b2.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,Act(new Array((f-u)*4).fill(0)));var h=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:tX++,data:o,originalDataLength:l,typedArrayConstructor:iM(i)?i.constructor:void 0,textureWidth:c,texture:h,texelCount:u,elementsPerTexel:a,isOutput:r===this.context.output.name}}}]),t}(),Oct=function(){function t(e,r){pu(this,t),this.elements=void 0;var n=r.data,i=r.usage,a=r.type,o=r.count;this.elements=e.elements({data:n,usage:che[i||Ge.STATIC_DRAW],type:$F[a||Ge.UNSIGNED_BYTE],count:o})}return vu(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var n=r.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Dct=function(){function t(e,r){pu(this,t),this.framebuffer=void 0;var n=r.width,i=r.height,a=r.color,o=r.colors;r.depth,r.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=e.framebuffer(s)}return vu(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var n=r.width,i=r.height;this.framebuffer.resize(n,i)}}]),t}();function Pct(t,e){return function(r){return t(e(r))}}var Lct=Pct,Rct=Lct,Nct=Rct(Object.getPrototypeOf,Object),Fct=Nct,Bct=FF,$ct=Fct,zct=BF,jct="[object Object]",Gct=Function.prototype,Uct=Object.prototype,fhe=Gct.toString,Wct=Uct.hasOwnProperty,Vct=fhe.call(Object);function Hct(t){if(!zct(t)||Bct(t)!=jct)return!1;var e=$ct(t);if(e===null)return!0;var r=Wct.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&fhe.call(r)==Vct}var Xct=Hct;const Yct=Ms(Xct);function H3(t){var e={};return Object.keys(t).forEach(function(r){xN(r,t[r],e,"")}),e}function xN(t,e,r,n){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||iM(e)||e===""||e.resize!==void 0){r["".concat(n&&n+".").concat(t)]=e;return}Yct(e)&&Object.keys(e).forEach(function(i){xN(i,e[i],r,"".concat(n&&n+".").concat(t))}),Array.isArray(e)&&e.forEach(function(i,a){Object.keys(i).forEach(function(o){xN(o,i[o],r,"".concat(n&&n+".").concat(t,"[").concat(a,"]"))})})}function rX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rX(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var qct=function(){function t(e,r){pu(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=r.vs,i=r.fs,a=r.defines,o=r.attributes,s=r.uniforms,l=r.primitive,u=r.count,c=r.elements,f=r.depth,h=r.blend,d=r.stencil,p=r.cull,v=r.instances,g=r.scissor,m=r.viewport,y={};s&&(this.uniforms=H3(s),Object.keys(s).forEach(function(S){y[S]=e.prop(S)}));var w={};Object.keys(o).forEach(function(S){w[S]=o[S].get()});var b=a&&this.generateDefines(a)||"",x={attributes:w,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(b,`
`).concat(i),uniforms:y,vert:`
`.concat(b,`
`).concat(n),primitive:gct[l===void 0?Ge.TRIANGLES:l]};v&&(x.instances=v),u&&(x.count=u),c&&(x.elements=c.get()),g&&(x.scissor=g),m&&(x.viewport=m),this.initDepthDrawParams({depth:f},x),this.initBlendDrawParams({blend:h},x),this.initStencilDrawParams({stencil:d},x),this.initCullDrawParams({cull:p},x),this.drawCommand=e(x)}return vu(t,[{key:"addUniforms",value:function(r){this.uniforms=Pg(Pg({},this.uniforms),H3(r))}},{key:"draw",value:function(r){var n=Pg(Pg({},this.uniforms),H3(r.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=$m(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(r,n){var i=r.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:bct[i.func||Ge.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(r,n){var i=r.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:bE[o&&o.srcRGB||Ge.SRC_ALPHA],srcAlpha:bE[o&&o.srcAlpha||Ge.SRC_ALPHA],dstRGB:bE[o&&o.dstRGB||Ge.ONE_MINUS_SRC_ALPHA],dstAlpha:bE[o&&o.dstAlpha||Ge.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ZH[s&&s.rgb||Ge.FUNC_ADD],alpha:ZH[s&&s.alpha||Ge.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(r,n){var i=r.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Ge.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:Ge.KEEP,zfail:Ge.KEEP,zpass:Ge.KEEP}:c,h=i.opBack,d=h===void 0?{fail:Ge.KEEP,zfail:Ge.KEEP,zpass:Ge.KEEP}:h;n.stencil={enable:!!a,mask:s,func:Pg(Pg({},u),{},{cmp:xct[u.cmp]}),opFront:{fail:Dg[f.fail],zfail:Dg[f.zfail],zpass:Dg[f.zpass]},opBack:{fail:Dg[d.fail],zfail:Dg[d.zfail],zpass:Dg[d.zpass]}}}}},{key:"initCullDrawParams",value:function(r,n){var i=r.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Ge.BACK:o;n.cull={enable:!!a,face:Sct[s]}}}},{key:"generateDefines",value:function(r){return Object.keys(r).map(function(n){return"#define ".concat(n," ").concat(Number(r[n]))}).join(`
`)}}]),t}(),Kct=function(){function t(e,r){pu(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,i=r.type,a=i===void 0?Ge.UNSIGNED_BYTE:i,o=r.width,s=r.height,l=r.flipY,u=l===void 0?!1:l,c=r.format,f=c===void 0?Ge.RGBA:c,h=r.mipmap,d=h===void 0?!1:h,p=r.wrapS,v=p===void 0?Ge.CLAMP_TO_EDGE:p,g=r.wrapT,m=g===void 0?Ge.CLAMP_TO_EDGE:g,y=r.aniso,w=y===void 0?0:y,b=r.alignment,x=b===void 0?1:b,S=r.premultiplyAlpha,E=S===void 0?!1:S,_=r.mag,k=_===void 0?Ge.NEAREST:_,C=r.min,A=C===void 0?Ge.NEAREST:C,M=r.colorSpace,T=M===void 0?Ge.BROWSER_DEFAULT_WEBGL:M;this.width=o,this.height=s;var O={width:o,height:s,type:$F[a],format:mct[f],wrapS:QH[v],wrapT:QH[m],mag:KH[k],min:KH[A],alignment:x,flipY:u,colorSpace:wct[T],premultiplyAlpha:E,aniso:w};n&&(O.data=n),typeof d=="number"?O.mipmap=yct[d]:typeof d=="boolean"&&(O.mipmap=d),this.texture=e.texture(O)}return vu(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var n=r.width,i=r.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),Qct=function(){function t(){var e=this;pu(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=Uh(za.mark(function n(i){return za.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=Uh(za.mark(function l(u){var c;return za.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){h.next=5;break}return h.next=3,i.uniforms[u].load();case 3:c=h.sent,i.uniforms[u]=c;case 5:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new qct(e.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new vct(e.gl,r)},this.createBuffer=function(r){return new Ect(e.gl,r)},this.createElements=function(r){return new Oct(e.gl,r)},this.createTexture2D=function(r){return new Kct(e.gl,r)},this.createFramebuffer=function(r){return new Dct(e.gl,r)},this.useFramebuffer=function(r,n){e.gl({framebuffer:r?r.get():null})(n)},this.createComputeModel=function(){var r=Uh(za.mark(function n(i){return za.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Ict(e.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.clear=function(r){var n=r.color,i=r.depth,a=r.stencil,o=r.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),e.gl.clear(l)},this.setScissor=function(r){e.gl&&e.gl._gl&&(r.enable&&r.box?(e.gl._gl.enable(Ge.SCISSOR_TEST),e.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):e.gl._gl.disable(Ge.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(r){var n=r.x,i=r.y,a=r.width,o=r.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,i,a,o),e.gl._refresh())},this.readPixels=function(r){var n=r.framebuffer,i=r.x,a=r.y,o=r.width,s=r.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),e.gl.read(l)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return vu(t,[{key:"init",value:function(){var e=Uh(za.mark(function n(i){return za.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){pct({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function r(n){return e.apply(this,arguments)}return r}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),Zct=function(){function t(){pu(this,t),this.engine=void 0,this.configService=new cct}return vu(t,[{key:"setConfig",value:function(r){this.configService.set(r)}},{key:"setEngine",value:function(r){this.engine=r}},{key:"createEntity",value:function(){return she()}},{key:"createKernel",value:function(r){var n=new lhe(this.engine,this.configService);return typeof r=="string"?n.setBundle(JSON.parse(r)):n.setBundle(r),n.init(),n}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new t;return n.setConfig(r),n.setEngine(new Qct),n}}]),t}();const Jct=Object.freeze(Object.defineProperty({__proto__:null,Kernel:lhe,World:Zct},Symbol.toStringTag,{value:"Module"})),hhe=su(Jct);var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.arrayToTextureData=cs.attributesToTextureData=cs.buildTextureDataWithTwoEdgeAttr=cs.buildTextureData=cs.proccessToFunc=void 0;var eft=Kn(),aM=iT,tft=function(t,e){var r;return t?(0,eft.isNumber)(t)?r=function(){return t}:r=t:r=function(){return e||1},r};cs.proccessToFunc=tft;var rft=function(t,e){var r=[],n=[],i={},a=0;for(a=0;a<t.length;a++){var o=t[a];i[o.id]=a,r.push(o.x),r.push(o.y),r.push(0),r.push(0),n.push([])}for(a=0;a<e.length;a++){var s=e[a],l=(0,aM.getEdgeTerminal)(s,"source"),u=(0,aM.getEdgeTerminal)(s,"target");!isNaN(i[l])&&!isNaN(i[u])&&(n[i[l]].push(i[u]),n[i[u]].push(i[l]))}var c=0;for(a=0;a<t.length;a++){var f=r.length,h=n[a],d=h.length;r[a*4+2]=f,r[a*4+3]=d,c=Math.max(c,d);for(var p=0;p<d;++p){var v=h[p];r.push(+v)}}for(;r.length%4!==0;)r.push(0);return{maxEdgePerVetex:c,array:new Float32Array(r)}};cs.buildTextureData=rft;var nft=function(t,e,r,n){var i=[],a=[],o={},s=0;for(s=0;s<t.length;s++){var l=t[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s],c=(0,aM.getEdgeTerminal)(u,"source"),f=(0,aM.getEdgeTerminal)(u,"target");a[o[c]].push(o[f]),a[o[c]].push(r(u)),a[o[c]].push(n(u)),a[o[c]].push(0),a[o[f]].push(o[c]),a[o[f]].push(r(u)),a[o[f]].push(n(u)),a[o[f]].push(0)}var h=0;for(s=0;s<t.length;s++){var d=i.length,p=a[s],v=p.length;i[s*4+2]=d+1048576*v/4,i[s*4+3]=0,h=Math.max(h,v/4);for(var g=0;g<v;++g){var m=p[g];i.push(+m)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}};cs.buildTextureDataWithTwoEdgeAttr=nft;var ift=function(t,e){var r=[],n=t.length,i={};return e.forEach(function(a){t.forEach(function(o,s){if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),r.push(i[a[o]]),s===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}};cs.attributesToTextureData=ift;var aft=function(t){for(var e=[],r=t.length,n=t[0].length,i=function(o){t.forEach(function(s,l){if(e.push(s[o]),l===r-1)for(;e.length%4!==0;)e.push(0)})},a=0;a<n;a++)i(a);return new Float32Array(e)};cs.arrayToTextureData=aft;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.clusterBundle=nc.clusterCode=nc.fruchtermanBundle=nc.fruchtermanCode=void 0;nc.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;nc.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';nc.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;nc.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var oft=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=Me&&Me.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},SE=Me&&Me.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Nb,"__esModule",{value:!0});Nb.FruchtermanGPULayout=void 0;var sft=si,Lg=Kn(),nX=hhe,iX=cs,aX=nc,lft=Cf,uft=function(t){oft(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return xE(this,void 0,void 0,function(){var r,n,i,a,o,s=this;return SE(this,function(l){switch(l.label){case 0:return r=this,n=r.nodes,!n||n.length===0?(r.onLayoutEnd&&r.onLayoutEnd(),[2]):(!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]),i=r.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(u,c){(0,Lg.isNumber)(u.x)||(u.x=Math.random()*s.width),(0,Lg.isNumber)(u.y)||(u.y=Math.random()*s.height),a[u.id]=u,o[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=o,[4,r.run()]));case 1:return l.sent(),[2]}})})},e.prototype.executeWithWorker=function(r,n){return xE(this,void 0,void 0,function(){var i,a,o,s,l,u=this;return SE(this,function(c){switch(c.label){case 0:return i=this,a=i.nodes,o=i.center,!a||a.length===0?[2]:a.length===1?(a[0].x=o[0],a[0].y=o[1],[2]):(s={},l={},a.forEach(function(f,h){(0,Lg.isNumber)(f.x)||(f.x=Math.random()*u.width),(0,Lg.isNumber)(f.y)||(f.y=Math.random()*u.height),s[f.id]=f,l[f.id]=h}),i.nodeMap=s,i.nodeIdxMap=l,[4,i.run(r,n)]);case 1:return c.sent(),[2]}})})},e.prototype.run=function(r,n){return xE(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,A,M,T,O=this;return SE(this,function(N){switch(N.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,l=i.center,u=i.height*i.width,c=Math.sqrt(u)/10,f=u/(a.length+1),h=Math.sqrt(f),d=i.speed,p=i.clustering,v=(0,iX.attributesToTextureData)([i.clusterField],a),g=v.array,m=v.count,a.forEach(function(R,B){var F=0,D=0;(0,Lg.isNumber)(R.fx)&&(0,Lg.isNumber)(R.fy)&&(F=R.fx||.001,D=R.fy||.001),g[4*B+1]=F,g[4*B+2]=D}),y=a.length,w=(0,iX.buildTextureData)(a,o),b=w.maxEdgePerVetex,x=w.array,S=i.workerEnabled,S?E=nX.World.create({canvas:r,engineOptions:{supportCompute:!0}}):E=nX.World.create({engineOptions:{supportCompute:!0}}),_=i.onLayoutEnd,k=[],C=0;C<m;C++)k.push(0,0,0,0);return A=E.createKernel(aX.fruchtermanBundle).setDispatch([y,1,1]).setBinding({u_Data:x,u_K:h,u_K2:f,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:p?1:0,u_Center:l,u_AttributeArray:g,u_ClusterCenters:k,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),p&&(M=E.createKernel(aX.clusterBundle).setDispatch([m,1,1]).setBinding({u_Data:x,u_NodeAttributes:g,u_ClusterCenters:k,VERTEX_COUNT:y,CLUSTER_COUNT:m})),T=function(){return xE(O,void 0,void 0,function(){var R,B;return SE(this,function(F){switch(F.label){case 0:R=0,F.label=1;case 1:return R<s?[4,A.execute()]:[3,6];case 2:return F.sent(),p?(M.setBinding({u_Data:A}),[4,M.execute()]):[3,4];case 3:F.sent(),A.setBinding({u_ClusterCenters:M}),F.label=4;case 4:A.setBinding({u_MaxDisplace:c*=.99}),F.label=5;case 5:return R++,[3,1];case 6:return[4,A.getOutput()];case 7:return B=F.sent(),r?n.postMessage({type:lft.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:B}):a.forEach(function(D,L){var G=B[4*L],Y=B[4*L+1];D.x=G,D.y=Y}),_&&_(),[2]}})})},[4,T()];case 1:return N.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(sft.Base);Nb.FruchtermanGPULayout=uft;var Fb={},ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.aveMovementBundle=ic.aveMovementCode=ic.gForceBundle=ic.gForceCode=void 0;ic.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i  p 
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;ic.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';ic.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;ic.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var cft=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X3=Me&&Me.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},Y3=Me&&Me.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Fb,"__esModule",{value:!0});Fb.GForceGPULayout=void 0;var fft=si,Vc=Kn(),oX=hhe,Hc=cs,hft=iT,sX=ic,dft=Cf,pft=function(t){cft(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return X3(this,void 0,void 0,function(){var r,n,i,a,o;return Y3(this,function(s){switch(s.label){case 0:return r=this,n=r.nodes,!n||n.length===0?(r.onLayoutEnd&&r.onLayoutEnd(),[2]):(!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]),i=r.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(l,u){(0,Vc.isNumber)(l.x)||(l.x=Math.random()*r.width),(0,Vc.isNumber)(l.y)||(l.y=Math.random()*r.height),a[l.id]=l,o[l.id]=u}),r.nodeMap=a,r.nodeIdxMap=o,r.nodeStrength=(0,Hc.proccessToFunc)(r.nodeStrength,1),r.edgeStrength=(0,Hc.proccessToFunc)(r.edgeStrength,1),[4,r.run()]));case 1:return s.sent(),[2]}})})},e.prototype.executeWithWorker=function(r,n){var i=this,a=i.nodes,o=i.center;if(!(!a||a.length===0)){if(a.length===1){a[0].x=o[0],a[0].y=o[1];return}var s={},l={};a.forEach(function(u,c){(0,Vc.isNumber)(u.x)||(u.x=Math.random()*i.width),(0,Vc.isNumber)(u.y)||(u.y=Math.random()*i.height),s[u.id]=u,l[u.id]=c}),i.nodeMap=s,i.nodeIdxMap=l,i.nodeStrength=(0,Hc.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,Hc.proccessToFunc)(i.edgeStrength,1),i.run(r,n)}},e.prototype.run=function(r,n){return X3(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,A,M,T,O,N=this;return Y3(this,function(R){switch(R.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),l=a.length,i.linkDistance=(0,Hc.proccessToFunc)(i.linkDistance),i.edgeStrength=(0,Hc.proccessToFunc)(i.edgeStrength),u=(0,Hc.buildTextureDataWithTwoEdgeAttr)(a,o,i.linkDistance,i.edgeStrength),c=u.maxEdgePerVetex,f=u.array,i.degrees=(0,hft.getDegree)(a.length,i.nodeIdxMap,o).map(function(B){return B.all}),h=[],d=[],p=[],v=[],g=[],m=[],y=[],i.getMass||(i.getMass=function(B){return i.degrees[i.nodeIdxMap[B.id]]||1}),w=i.gravity,b=i.center,a.forEach(function(B,F){h.push(i.getMass(B)),d.push(i.nodeStrength(B)),i.degrees[F]||(i.degrees[F]=0);var D=[b[0],b[1],w];if(i.getCenter){var L=i.getCenter(B,i.degrees[F]);L&&(0,Vc.isNumber)(L[0])&&(0,Vc.isNumber)(L[1])&&(0,Vc.isNumber)(L[2])&&(D=L)}p.push(D[0]),v.push(D[1]),g.push(D[2]),(0,Vc.isNumber)(B.fx)&&(0,Vc.isNumber)(B.fy)?(m.push(B.fx||.001),y.push(B.fy||.001)):(m.push(0),y.push(0))}),x=(0,Hc.arrayToTextureData)([h,i.degrees,d,m]),S=(0,Hc.arrayToTextureData)([p,v,g,y]),E=i.workerEnabled,E?_=oX.World.create({canvas:r,engineOptions:{supportCompute:!0}}):_=oX.World.create({engineOptions:{supportCompute:!0}}),k=i.onLayoutEnd,C=[],f.forEach(function(B){C.push(B)}),A=0;A<4;A++)C.push(0);return M=_.createKernel(sX.gForceBundle).setDispatch([l,1,1]).setBinding({u_Data:f,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:x,u_NodeAttributeArray2:S,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:l,u_AveMovement:C,u_interval:i.interval}),T=_.createKernel(sX.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:l,u_AveMovement:[0,0,0,0]}),O=function(){return X3(N,void 0,void 0,function(){var B,F,D;return Y3(this,function(L){switch(L.label){case 0:B=0,L.label=1;case 1:return B<s?[4,M.execute()]:[3,5];case 2:return L.sent(),T.setBinding({u_Data:M}),[4,T.execute()];case 3:L.sent(),F=Math.max(.02,i.interval-B*.002),M.setBinding({u_interval:F,u_AveMovement:T}),L.label=4;case 4:return B++,[3,1];case 5:return[4,M.getOutput()];case 6:return D=L.sent(),r?n.postMessage({type:dft.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:D}):a.forEach(function(G,Y){var Z=D[4*Y],q=D[4*Y+1];G.x=Z,G.y=q}),k&&k(),[2]}})})},[4,O()];case 1:return R.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(fft.Base);Fb.GForceGPULayout=pft;var Bb={},vft=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Bb,"__esModule",{value:!0});Bb.ComboForceLayout=void 0;var gft=si,Ar=Kn(),mft=function(t){vft(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()},e.prototype.run=function(){var r=this,n=r.nodes,i=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);var a=r.center,o=r.velocityDecay,s=r.comboMap;r.previousLayouted||r.initPos(s);for(var l=function(h){var d=[];n.forEach(function(p,v){d[v]={x:0,y:0}}),r.applyCalculate(d),r.applyComboCenterForce(d),n.forEach(function(p,v){!(0,Ar.isNumber)(p.x)||!(0,Ar.isNumber)(p.y)||(p.x+=d[v].x*o,p.y+=d[v].y*o)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()},u=0;u<i;u++)l();var c=[0,0];n.forEach(function(h){!(0,Ar.isNumber)(h.x)||!(0,Ar.isNumber)(h.y)||(c[0]+=h.x,c[1]+=h.y)}),c[0]/=n.length,c[1]/=n.length;var f=[a[0]-c[0],a[1]-c[1]];n.forEach(function(h,d){!(0,Ar.isNumber)(h.x)||!(0,Ar.isNumber)(h.y)||(h.x+=f[0],h.y+=f[1])}),r.combos.forEach(function(h){var d=s[h.id];d&&d.empty&&(h.x=d.cx||h.x,h.y=d.cy||h.y)}),r.previousLayouted=!0},e.prototype.initVals=function(){var r=this,n=r.edges,i=r.nodes,a=r.combos,o={},s={},l={};i.forEach(function(B,F){s[B.id]=B,l[B.id]=F}),r.nodeMap=s,r.indexMap=l;var u={};a.forEach(function(B){u[B.id]=B}),r.oriComboMap=u,r.comboMap=r.getComboMap();var c=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||c,r.preventNodeOverlap=r.preventNodeOverlap||c;var f=r.collideStrength;f&&(r.comboCollideStrength=f,r.nodeCollideStrength=f),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(var h=0;h<n.length;++h){var d=(0,Ar.getEdgeTerminal)(n[h],"source"),p=(0,Ar.getEdgeTerminal)(n[h],"target");o[d]?o[d]++:o[d]=1,o[p]?o[p]++:o[p]=1}for(var v=[],h=0;h<n.length;++h){var d=(0,Ar.getEdgeTerminal)(n[h],"source"),p=(0,Ar.getEdgeTerminal)(n[h],"target");v[h]=o[d]/(o[d]+o[p])}this.bias=v;var g=r.nodeSize,m=r.nodeSpacing,y,w;if((0,Ar.isNumber)(m)?w=function(){return m}:(0,Ar.isFunction)(m)?w=m:w=function(){return 0},this.nodeSpacing=w,!g)y=function(B){if(B.size){if((0,Ar.isArray)(B.size)){var F=B.size[0]>B.size[1]?B.size[0]:B.size[1];return F/2}if((0,Ar.isObject)(B.size)){var F=B.size.width>B.size.height?B.size.width:B.size.height;return F/2}return B.size/2}return 10};else if((0,Ar.isFunction)(g))y=function(B){return g(B)};else if((0,Ar.isArray)(g)){var b=g[0]>g[1]?g[0]:g[1],x=b/2;y=function(B){return x}}else{var S=g/2;y=function(B){return S}}this.nodeSize=y;var E=r.comboSpacing,_;(0,Ar.isNumber)(E)?_=function(){return E}:(0,Ar.isFunction)(E)?_=E:_=function(){return 0},this.comboSpacing=_;var k=r.comboPadding,C;(0,Ar.isNumber)(k)?C=function(){return k}:(0,Ar.isArray)(k)?C=function(){return Math.max.apply(null,k)}:(0,Ar.isFunction)(k)?C=k:C=function(){return 0},this.comboPadding=C;var A=this.linkDistance,M;A||(A=10),(0,Ar.isNumber)(A)?M=function(B){return A}:M=A,this.linkDistance=M;var T=this.edgeStrength,O;T||(T=1),(0,Ar.isNumber)(T)?O=function(B){return T}:O=T,this.edgeStrength=O;var N=this.nodeStrength,R;N||(N=30),(0,Ar.isNumber)(N)?R=function(B){return N}:R=N,this.nodeStrength=R},e.prototype.initPos=function(r){var n=this,i=n.nodes;i.forEach(function(a,o){var s=a.comboId,l=r[s];s&&l?(a.x=l.cx+100/(o+1),a.y=l.cy+100/(o+1)):(a.x=100/(o+1),a.y=100/(o+1))})},e.prototype.getComboMap=function(){var r=this,n=r.nodeMap,i=r.comboTrees,a=r.oriComboMap,o={};return(i||[]).forEach(function(s){var l=[];(0,Ar.traverseTreeUp)(s,function(u){if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){var c={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:r.oriComboMap[u.id].depth||0,children:[]};o[u.id]=c}var f=u.children;f&&f.forEach(function(p){if(!o[p.id]&&!n[p.id])return!0;l.push(p)});var h=o[u.id];if(h.cx=0,h.cy=0,l.length===0){h.empty=!0;var d=a[u.id];h.cx=d.x,h.cy=d.y}return l.forEach(function(p){if(h.count++,p.itemType!=="node"){var v=o[p.id];(0,Ar.isNumber)(v.cx)&&(h.cx+=v.cx),(0,Ar.isNumber)(v.cy)&&(h.cy+=v.cy);return}var g=n[p.id];g&&((0,Ar.isNumber)(g.x)&&(h.cx+=g.x),(0,Ar.isNumber)(g.y)&&(h.cy+=g.y))}),h.cx/=h.count||1,h.cy/=h.count||1,h.children=l,!0})}),o},e.prototype.applyComboCenterForce=function(r){var n=this,i=n.gravity,a=n.comboGravity||i,o=this.alpha,s=n.comboTrees,l=n.indexMap,u=n.nodeMap,c=n.comboMap;(s||[]).forEach(function(f){(0,Ar.traverseTreeUp)(f,function(h){if(h.itemType==="node")return!0;var d=c[h.id];if(!d)return!0;var p=c[h.id],v=(p.depth+1)/10*.5,g=p.cx,m=p.cy;return p.cx=0,p.cy=0,p.children.forEach(function(y){if(y.itemType!=="node"){var w=c[y.id];w&&(0,Ar.isNumber)(w.cx)&&(p.cx+=w.cx),w&&(0,Ar.isNumber)(w.cy)&&(p.cy+=w.cy);return}var b=u[y.id],x=b.x-g||.005,S=b.y-m||.005,E=Math.sqrt(x*x+S*S),_=l[b.id],k=a*o/E*v;r[_].x-=x*k,r[_].y-=S*k,(0,Ar.isNumber)(b.x)&&(p.cx+=b.x),(0,Ar.isNumber)(b.y)&&(p.cy+=b.y)}),p.cx/=p.count||1,p.cy/=p.count||1,!0})})},e.prototype.applyCalculate=function(r){var n=this,i=n.comboMap,a=n.nodes,o={};a.forEach(function(l,u){a.forEach(function(c,f){if(!(u<f)){var h=l.x-c.x||.005,d=l.y-c.y||.005,p=h*h+d*d,v=Math.sqrt(p);p<1&&(p=v),o["".concat(l.id,"-").concat(c.id)]={vx:h,vy:d,vl2:p,vl:v},o["".concat(c.id,"-").concat(l.id)]={vl2:p,vl:v,vx:-h,vy:-d}}})}),n.updateComboSizes(i),n.calRepulsive(r,o),n.calAttractive(r,o);var s=n.preventComboOverlap;s&&n.comboNonOverlapping(r,i)},e.prototype.updateComboSizes=function(r){var n=this,i=n.comboTrees,a=n.nodeMap,o=n.nodeSize,s=n.comboSpacing,l=n.comboPadding;(i||[]).forEach(function(u){var c=[];(0,Ar.traverseTreeUp)(u,function(f){if(f.itemType==="node")return!0;var h=r[f.id];if(!h)return!1;var d=f.children;d&&d.forEach(function(g){!r[g.id]&&!a[g.id]||c.push(g)}),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0,c.forEach(function(g){if(g.itemType!=="node")return!0;var m=a[g.id];if(!m)return!0;var y=o(m),w=m.x-y,b=m.y-y,x=m.x+y,S=m.y+y;h.minX>w&&(h.minX=w),h.minY>b&&(h.minY=b),h.maxX<x&&(h.maxX=x),h.maxY<S&&(h.maxY=S)});var p=n.oriComboMap[f.id].size||10;(0,Ar.isArray)(p)&&(p=p[0]);var v=Math.max(h.maxX-h.minX,h.maxY-h.minY,p);return h.r=v/2+s(h)/2+l(h),!0})})},e.prototype.comboNonOverlapping=function(r,n){var i=this,a=i.comboTree,o=i.comboCollideStrength,s=i.indexMap,l=i.nodeMap;(0,Ar.traverseTreeUp)(a,function(u){if(!n[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")return!1;var c=u.children;return c&&c.length>1&&c.forEach(function(f,h){if(f.itemType==="node")return!1;var d=n[f.id];d&&c.forEach(function(p,v){if(h<=v||p.itemType==="node")return!1;var g=n[p.id];if(!g)return!1;var m=d.cx-g.cx||.005,y=d.cy-g.cy||.005,w=m*m+y*y,b=d.r||1,x=g.r||1,S=b+x,E=x*x,_=b*b;if(w<S*S){var k=f.children;if(!k||k.length===0)return!1;var C=p.children;if(!C||C.length===0)return!1;var A=Math.sqrt(w),M=(S-A)/A*o,T=m*M,O=y*M,N=E/(_+E),R=1-N;k.forEach(function(B){if(B.itemType!=="node")return!1;if(l[B.id]){var F=s[B.id];C.forEach(function(D){if(D.itemType!=="node"||!l[D.id])return!1;var L=s[D.id];r[F].x+=T*N,r[F].y+=O*N,r[L].x-=T*R,r[L].y-=O*R})}})}})}),!0})},e.prototype.calRepulsive=function(r,n){var i=this,a=i.nodes,o=i.width*i.optimizeRangeFactor,s=i.nodeStrength,l=i.alpha,u=i.nodeCollideStrength,c=i.preventNodeOverlap,f=i.nodeSize,h=i.nodeSpacing,d=i.depthRepulsiveForceScale,p=i.center;a.forEach(function(v,g){if(!(!v.x||!v.y)){if(p){var m=i.gravity,y=v.x-p[0]||.005,w=v.y-p[1]||.005,b=Math.sqrt(y*y+w*w);r[g].x-=y*m*l/b,r[g].y-=w*m*l/b}a.forEach(function(x,S){if(g!==S&&!(!x.x||!x.y)){var E=n["".concat(v.id,"-").concat(x.id)],_=E.vl2,k=E.vl;if(!(k>o)){var C=n["".concat(v.id,"-").concat(x.id)],A=C.vx,M=C.vy,T=Math.log(Math.abs(x.depth-v.depth)/10)+1||1;T=T<1?1:T,x.comboId!==v.comboId&&(T+=1);var O=T?Math.pow(d,T):1,N=s(x)*l/_*O;if(r[g].x+=A*N,r[g].y+=M*N,g<S&&c){var R=f(v)+h(v)||1,B=f(x)+h(x)||1,F=R+B;if(_<F*F){var D=(F-k)/k*u,L=B*B,G=L/(R*R+L),Y=A*D,Z=M*D;r[g].x+=Y*G,r[g].y+=Z*G,G=1-G,r[S].x-=Y*G,r[S].y-=Z*G}}}}})}})},e.prototype.calAttractive=function(r,n){var i=this,a=i.edges,o=i.linkDistance,s=i.alpha,l=i.edgeStrength,u=i.bias,c=i.depthAttractiveForceScale;a.forEach(function(f,h){var d=(0,Ar.getEdgeTerminal)(f,"source"),p=(0,Ar.getEdgeTerminal)(f,"target");if(!(!d||!p||d===p)){var v=i.indexMap[d],g=i.indexMap[p],m=i.nodeMap[d],y=i.nodeMap[p];if(!(!m||!y)){var w=m.depth===y.depth?0:Math.log(Math.abs(m.depth-y.depth)/10);m.comboId===y.comboId&&(w=w/2);var b=w?Math.pow(c,w):1;if(m.comboId!==y.comboId&&b===1?b=c/2:m.comboId===y.comboId&&(b=2),!(!(0,Ar.isNumber)(y.x)||!(0,Ar.isNumber)(m.x)||!(0,Ar.isNumber)(y.y)||!(0,Ar.isNumber)(m.y))){var x=n["".concat(p,"-").concat(d)],S=x.vl,E=x.vx,_=x.vy,k=(S-o(f))/S*s*l(f)*b,C=E*k,A=_*k,M=u[h];r[g].x-=C*M,r[g].y-=A*M,r[v].x+=C*(1-M),r[v].y+=A*(1-M)}}}})},e.prototype.getType=function(){return"comboForce"},e}(gft.Base);Bb.ComboForceLayout=mft;var i1={},lX;function dhe(){if(lX)return i1;lX=1;var t=Me&&Me.__extends||function(){var s=function(l,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");s(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),e=Me&&Me.__assign||function(){return e=Object.assign||function(s){for(var l,u=1,c=arguments.length;u<c;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])}return s},e.apply(this,arguments)};Object.defineProperty(i1,"__esModule",{value:!0}),i1.ComboCombinedLayout=void 0;var r=Cf,n=si,i=Kn(),a=xhe(),o=function(s){t(l,s);function l(u){var c=s.call(this)||this;return c.center=[0,0],c.nodes=[],c.edges=[],c.combos=[],c.comboEdges=[],c.comboPadding=10,c.comboTrees=[],c.updateCfg(u),c}return l.prototype.getDefaultCfg=function(){return{}},l.prototype.execute=function(){var u=this,c=u.nodes,f=u.center;if(!c||c.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}if(c.length===1){c[0].x=f[0],c[0].y=f[1],u.onLayoutEnd&&u.onLayoutEnd();return}u.initVals(),u.run(),u.onLayoutEnd&&u.onLayoutEnd()},l.prototype.run=function(){var u,c=this,f=c.nodes,h=c.edges,d=c.combos,p=c.comboEdges,v=c.center,g={};f.forEach(function(N){g[N.id]=N});var m={};d.forEach(function(N){m[N.id]=N});var y=c.getInnerGraphs(g),w=[],b=[],x={},S=!0;this.comboTrees.forEach(function(N){var R=y[N.id];if(R){var B=e(e({},N),{x:R.x||m[N.id].x,y:R.y||m[N.id].y,fx:R.fx||m[N.id].fx,fy:R.fy||m[N.id].fy,mass:R.mass||m[N.id].mass,size:R.size});b.push(B),!isNaN(B.x)&&B.x!==0&&!isNaN(B.y)&&B.y!==0?S=!1:(B.x=Math.random()*100,B.y=Math.random()*100),w.push(N.id),(0,i.traverseTreeUp)(N,function(F){return F.id!==N.id&&(x[F.id]=N.id),!0})}}),f.forEach(function(N){if(!(N.comboId&&m[N.comboId])){var R=e({},N);b.push(R),!isNaN(R.x)&&R.x!==0&&!isNaN(R.y)&&R.y!==0?S=!1:(R.x=Math.random()*100,R.y=Math.random()*100),w.push(N.id)}});var E=[];if(h.concat(p).forEach(function(N){var R=x[N.source]||N.source,B=x[N.target]||N.target;R!==B&&w.includes(R)&&w.includes(B)&&E.push({source:R,target:B})}),b!=null&&b.length){if(b.length===1)b[0].x=v[0],b[0].y=v[1];else{var _={nodes:b,edges:E},k=this.outerLayout||new a.GForceLayout({gravity:1,factor:4,linkDistance:function(N,R,B){var F,D,L=((((F=R.size)===null||F===void 0?void 0:F[0])||30)+(((D=B.size)===null||D===void 0?void 0:D[0])||30))/2;return Math.min(L*1.5,700)}}),C=(u=k.getType)===null||u===void 0?void 0:u.call(k);if(k.updateCfg({center:v,kg:5,preventOverlap:!0,animate:!1}),S&&r.FORCE_LAYOUT_TYPE_MAP[C]){var A=b.length<100?new a.MDSLayout:new a.GridLayout;A.layout(_)}k.layout(_)}b.forEach(function(N){var R=y[N.id];if(!R){var B=g[N.id];B&&(B.x=N.x,B.y=N.y);return}R.visited=!0,R.x=N.x,R.y=N.y,R.nodes.forEach(function(F){F.x+=N.x,F.y+=N.y})})}for(var M=Object.keys(y),T=function(N){var R=M[N],B=y[R];if(!B)return"continue";B.nodes.forEach(function(F){B.visited||(F.x+=B.x||0,F.y+=B.y||0),g[F.id]&&(g[F.id].x=F.x,g[F.id].y=F.y)}),m[R]&&(m[R].x=B.x,m[R].y=B.y)},O=M.length-1;O>=0;O--)T(O);return{nodes:f,edges:h,combos:d,comboEdges:p}},l.prototype.getInnerGraphs=function(u){var c=this,f=c.comboTrees,h=c.nodeSize,d=c.edges,p=c.comboPadding,v=c.spacing,g={},m=this.innerLayout||new a.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=v,(f||[]).forEach(function(y){(0,i.traverseTreeUp)(y,function(w){var b,x=(p==null?void 0:p(w))||10;if((0,i.isArray)(x)&&(x=Math.max.apply(Math,x)),!((b=w.children)===null||b===void 0)&&b.length){var E=w.children.map(function(D){if(D.itemType==="combo")return g[D.id];var L=u[D.id]||{};return e(e({},L),D)}),_=E.map(function(D){return D.id}),k={nodes:E,edges:d.filter(function(D){return _.includes(D.source)&&_.includes(D.target)})},C=1/0;E.forEach(function(D){var L;D.size||(D.size=((L=g[D.id])===null||L===void 0?void 0:L.size)||(h==null?void 0:h(D))||[30,30]),(0,i.isNumber)(D.size)&&(D.size=[D.size,D.size]),C>D.size[0]&&(C=D.size[0]),C>D.size[1]&&(C=D.size[1])}),m.layout(k);var A=(0,i.getLayoutBBox)(E),M=A.minX,T=A.minY,O=A.maxX,N=A.maxY,R={x:(O+M)/2,y:(N+T)/2};k.nodes.forEach(function(D){D.x-=R.x,D.y-=R.y});var B=Math.max(O-M,C)+x*2,F=Math.max(N-T,C)+x*2;g[w.id]={id:w.id,nodes:E,size:[B,F]}}else if(w.itemType==="combo"){var S=x?[x*2,x*2]:[30,30];g[w.id]={id:w.id,nodes:[],size:S}}return!0})}),g},l.prototype.initVals=function(){var u=this,c=u.nodeSize,f=u.spacing,h,d;if((0,i.isNumber)(f)?d=function(){return f}:(0,i.isFunction)(f)?d=f:d=function(){return 0},this.spacing=d,!c)h=function(w){var b=d(w);if(w.size){if((0,i.isArray)(w.size)){var x=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(x+b)/2}if((0,i.isObject)(w.size)){var x=w.size.width>w.size.height?w.size.width:w.size.height;return(x+b)/2}return(w.size+b)/2}return 10+b/2};else if((0,i.isFunction)(c))h=function(w){var b=c(w),x=d(w);if((0,i.isArray)(w.size)){var S=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(S+x)/2}return((b||10)+x)/2};else if((0,i.isArray)(c)){var p=c[0]>c[1]?c[0]:c[1],v=p/2;h=function(w){return v+d(w)/2}}else{var g=c/2;h=function(w){return g+d(w)/2}}this.nodeSize=h;var m=u.comboPadding,y;(0,i.isNumber)(m)?y=function(){return m}:(0,i.isArray)(m)?y=function(){return Math.max.apply(null,m)}:(0,i.isFunction)(m)?y=m:y=function(){return 0},this.comboPadding=y},l.prototype.getType=function(){return"comboCombined"},l}(n.Base);return i1.ComboCombinedLayout=o,i1}var $b={},zF={};Object.defineProperty(zF,"__esModule",{value:!0});var yft=function(){function t(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return t.prototype.distanceTo=function(e){var r=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(r,n)},t.prototype.setPos=function(e,r){this.rx=e,this.ry=r},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(e){var r=e.rx-this.rx,n=e.ry-this.ry,i=Math.hypot(r,n);i=i<1e-4?1e-4:i;var a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*r/i,this.fy+=a*n/i},t.prototype.in=function(e){return e.contains(this.rx,this.ry)},t.prototype.add=function(e){var r=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/r,i=(this.ry*this.mass+e.ry*e.mass)/r,a=this.degree+e.degree,o={rx:n,ry:i,mass:r,degree:a};return new t(o)},t}();zF.default=yft;var jF={};Object.defineProperty(jF,"__esModule",{value:!0});var wft=function(){function t(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(e,r){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&r<=this.ymid+n&&r>=this.ymid-n},t.prototype.NW=function(){var e=this.xmid-this.length/4,r=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.NE=function(){var e=this.xmid+this.length/4,r=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.SW=function(){var e=this.xmid-this.length/4,r=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.SE=function(){var e=this.xmid+this.length/4,r=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t}();jF.default=wft;var GF={};Object.defineProperty(GF,"__esModule",{value:!0});var bft=function(){function t(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}return t.prototype.insert=function(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))},t.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},t.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},t.prototype.updateForce=function(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{var r=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);r/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}},t}();GF.default=bft;var xft=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UF=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($b,"__esModule",{value:!0});$b.ForceAtlas2Layout=void 0;var Sft=si,Xc=Kn(),Eft=UF(zF),_ft=UF(jF),Cft=UF(GF),kft=function(t){xft(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.onLayoutEnd,a=r.prune,o=r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);for(var s=[],l=n.length,u=0;u<l;u+=1){var c=n[u],f=10,h=10;(0,Xc.isNumber)(c.size)&&(f=c.size,h=c.size),(0,Xc.isArray)(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(h=c.size[1])):(0,Xc.isObject)(c.size)&&(f=c.size.width,h=c.size.height),r.getWidth&&!isNaN(r.getWidth(c))&&(h=r.getWidth(c)),r.getHeight&&!isNaN(r.getHeight(c))&&(f=r.getHeight(c));var d=Math.max(f,h);s.push(d)}r.barnesHut===void 0&&l>250&&(r.barnesHut=!0),r.prune===void 0&&l>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(o=250,l<=200&&l>100?o=1e3:l>200&&(o=1200),this.maxIteration=o):this.maxIteration===0&&a&&(o=100,l<=200&&l>100?o=500:l>200&&(o=950),this.maxIteration=o),r.kr||(r.kr=50,l>100&&l<=500?r.kr=20:l>500&&(r.kr=1)),r.kg||(r.kg=20,l>100&&l<=500?r.kg=10:l>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(s),i()},e.prototype.updateNodesByForces=function(r){for(var n=this,i=n.edges,a=n.maxIteration,o=n.nodes,s=i.filter(function(E){var _=(0,Xc.getEdgeTerminal)(E,"source"),k=(0,Xc.getEdgeTerminal)(E,"target");return _!==k}),l=o.length,u=s.length,c=[],f={},h={},d=[],p=0;p<l;p+=1)f[o[p].id]=p,c[p]=0,(o[p].x===void 0||isNaN(o[p].x))&&(o[p].x=Math.random()*1e3),(o[p].y===void 0||isNaN(o[p].y))&&(o[p].y=Math.random()*1e3),d.push({x:o[p].x,y:o[p].y});for(var p=0;p<u;p+=1){for(var v=void 0,g=void 0,m=0,y=0,w=0;w<l;w+=1){var b=(0,Xc.getEdgeTerminal)(s[p],"source"),x=(0,Xc.getEdgeTerminal)(s[p],"target");o[w].id===b?(v=o[w],m=w):o[w].id===x&&(g=o[w],y=w),h[p]={sourceIdx:m,targetIdx:y}}v&&(c[f[v.id]]+=1),g&&(c[f[g.id]]+=1)}var S=a;if(o=this.iterate(S,f,h,u,c,r),n.prune){for(var w=0;w<u;w+=1)c[h[w].sourceIdx]<=1?(o[h[w].sourceIdx].x=o[h[w].targetIdx].x,o[h[w].sourceIdx].y=o[h[w].targetIdx].y):c[h[w].targetIdx]<=1&&(o[h[w].targetIdx].x=o[h[w].sourceIdx].x,o[h[w].targetIdx].y=o[h[w].sourceIdx].y);n.prune=!1,n.barnesHut=!1,S=100,o=this.iterate(S,f,h,u,c,r)}return o},e.prototype.iterate=function(r,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.kr,f=l.preventOverlap,h=l.barnesHut,d=u.length,p=0,v=100,g=r,m=50,y=[],w=[],b=[],x=0;x<d;x+=1)if(y[2*x]=0,y[2*x+1]=0,h){var S={id:x,rx:u[x].x,ry:u[x].y,mass:1,g:c,degree:o[x]};b[x]=new Eft.default(S)}for(;g>0;){for(var x=0;x<d;x+=1)w[2*x]=y[2*x],w[2*x+1]=y[2*x+1],y[2*x]=0,y[2*x+1]=0;y=this.getAttrForces(g,m,a,n,i,o,s,y),h&&(f&&g>m||!f)?y=this.getOptRepGraForces(y,b,o):y=this.getRepGraForces(g,m,y,v,s,o);var E=this.updatePos(y,w,p,o);u=E.nodes,p=E.sg,g--,l.tick&&l.tick()}return u},e.prototype.getAttrForces=function(r,n,i,a,o,s,l,u){for(var c=this,f=c.nodes,h=c.preventOverlap,d=c.dissuadeHubs,p=c.mode,v=c.prune,g=0;g<i;g+=1){var m=f[o[g].sourceIdx],y=o[g].sourceIdx,w=f[o[g].targetIdx],b=o[g].targetIdx;if(!(v&&(s[y]<=1||s[b]<=1))){var x=[w.x-m.x,w.y-m.y],S=Math.hypot(x[0],x[1]);S=S<1e-4?1e-4:S,x[0]=x[0]/S,x[1]=x[1]/S,h&&r<n&&(S=S-l[y]-l[b]);var E=S,_=E;p==="linlog"&&(E=Math.log(1+S),_=E),d&&(E=S/s[y],_=S/s[b]),h&&r<n&&S<=0?(E=0,_=0):h&&r<n&&S>0&&(E=S,_=S),u[2*a[m.id]]+=E*x[0],u[2*a[w.id]]-=_*x[0],u[2*a[m.id]+1]+=E*x[1],u[2*a[w.id]+1]-=_*x[1]}}return u},e.prototype.getRepGraForces=function(r,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.preventOverlap,f=l.kr,h=l.kg,d=l.center,p=l.prune,v=u.length,g=0;g<v;g+=1){for(var m=g+1;m<v;m+=1)if(!(p&&(s[g]<=1||s[m]<=1))){var y=[u[m].x-u[g].x,u[m].y-u[g].y],w=Math.hypot(y[0],y[1]);w=w<1e-4?1e-4:w,y[0]=y[0]/w,y[1]=y[1]/w,c&&r<n&&(w=w-o[g]-o[m]);var b=f*(s[g]+1)*(s[m]+1)/w;c&&r<n&&w<0?b=a*(s[g]+1)*(s[m]+1):c&&r<n&&w===0?b=0:c&&r<n&&w>0&&(b=f*(s[g]+1)*(s[m]+1)/w),i[2*g]-=b*y[0],i[2*m]+=b*y[0],i[2*g+1]-=b*y[1],i[2*m+1]+=b*y[1]}var x=[u[g].x-d[0],u[g].y-d[1]],S=Math.hypot(x[0],x[1]);x[0]=x[0]/S,x[1]=x[1]/S;var E=h*(s[g]+1);i[2*g]-=E*x[0],i[2*g+1]-=E*x[1]}return i},e.prototype.getOptRepGraForces=function(r,n,i){for(var a=this,o=a.nodes,s=a.kg,l=a.center,u=a.prune,c=o.length,f=9e10,h=-9e10,d=9e10,p=-9e10,v=0;v<c;v+=1)u&&i[v]<=1||(n[v].setPos(o[v].x,o[v].y),o[v].x>=h&&(h=o[v].x),o[v].x<=f&&(f=o[v].x),o[v].y>=p&&(p=o[v].y),o[v].y<=d&&(d=o[v].y));for(var g=Math.max(h-f,p-d),m={xmid:(h+f)/2,ymid:(p+d)/2,length:g,massCenter:l,mass:c},y=new _ft.default(m),w=new Cft.default(y),v=0;v<c;v+=1)u&&i[v]<=1||n[v].in(y)&&w.insert(n[v]);for(var v=0;v<c;v+=1)if(!(u&&i[v]<=1)){n[v].resetForce(),w.updateForce(n[v]),r[2*v]-=n[v].fx,r[2*v+1]-=n[v].fy;var b=[o[v].x-l[0],o[v].y-l[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var S=s*(i[v]+1);r[2*v]-=S*b[0],r[2*v+1]-=S*b[1]}return r},e.prototype.updatePos=function(r,n,i,a){for(var o=this,s=o.nodes,l=o.ks,u=o.tao,c=o.prune,f=o.ksmax,h=s.length,d=[],p=[],v=0,g=0,m=0;m<h;m+=1)if(!(c&&a[m]<=1)){var y=[r[2*m]-n[2*m],r[2*m+1]-n[2*m+1]],w=Math.hypot(y[0],y[1]),b=[r[2*m]+n[2*m],r[2*m+1]+n[2*m+1]],x=Math.hypot(b[0],b[1]);d[m]=w,p[m]=x/2,v+=(a[m]+1)*d[m],g+=(a[m]+1)*p[m]}var S=i;i=u*g/v,S!==0&&(i=i>1.5*S?1.5*S:i);for(var m=0;m<h;m+=1)if(!(c&&a[m]<=1)&&!((0,Xc.isNumber)(s[m].fx)&&(0,Xc.isNumber)(s[m].fy))){var E=l*i/(1+i*Math.sqrt(d[m])),_=Math.hypot(r[2*m],r[2*m+1]);_=_<1e-4?1e-4:_;var k=f/_;E=E>k?k:E;var C=E*r[2*m],A=E*r[2*m+1];s[m].x+=C,s[m].y+=A}return{nodes:s,sg:i}},e}(Sft.Base);$b.ForceAtlas2Layout=kft;var zb={},WF={},VF={},HF={},d0=Me&&Me.__assign||function(){return d0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d0.apply(this,arguments)};Object.defineProperty(HF,"__esModule",{value:!0});var Mft=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,r,n){this.cells=[],this.CELL_W=n.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(r/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(r,2);for(var i=0;i<this.columnNum;i++){for(var a=[],o=0;o<this.rowNum;o++){var s={dx:i,dy:o,x:i*this.CELL_W,y:o*this.CELL_H,occupied:!1};a.push(s)}this.cells.push(a)}},t.prototype.findGridByNodeId=function(e){for(var r,n,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)if(this.cells[i][a].node&&((n=(r=this.cells[i][a])===null||r===void 0?void 0:r.node)===null||n===void 0?void 0:n.id)===e)return{column:i,row:a};return null},t.prototype.sqdist=function(e,r){return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)},t.prototype.occupyNearest=function(e){for(var r=t.MIN_DIST,n,i=null,a=0;a<this.columnNum;a++)for(var o=0;o<this.rowNum;o++)!this.cells[a][o].occupied&&(n=this.sqdist(e,this.cells[a][o]))<r&&(r=n,i=this.cells[a][o]);return i&&(i.occupied=!0),i},t.prototype.insertColumn=function(e,r){if(!(r<=0)){for(var n=0;n<r;n++){this.cells[n+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[n+this.columnNum][i]={dx:n,dy:i,x:n*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(var n=this.columnNum-1;n>e;n--)for(var i=0;i<this.rowNum;i++)this.cells[n+r][i]=d0(d0({},this.cells[n][i]),{x:(n+r)*this.CELL_W,y:i*this.CELL_H}),this.cells[n][i]={x:n*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(var i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=e&&(this.additionColumn[i]+=r);for(var n=0;n<r;n++)this.additionColumn.push(e+n+1);this.columnNum+=r}},t.prototype.insertRow=function(e,r){if(!(r<=0)){for(var n=0;n<r;n++)for(var i=0;i<this.columnNum;i++)this.cells[i][n+this.rowNum]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var i=0;i<this.columnNum;i++)for(var n=this.rowNum-1;n>e;n--)this.cells[i][n+r]=d0(d0({},this.cells[i][n]),{dx:i,dy:n+r,x:i*this.CELL_W,y:(n+r)*this.CELL_H}),this.cells[i][n]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=r);for(var i=0;i<r;i++)this.additionRow.push(e+i+1);this.rowNum+=r}},t.prototype.getNodes=function(){for(var e=[],r=0;r<this.columnNum;r++)for(var n=0;n<this.rowNum;n++)this.cells[r][n].node&&e.push(this.cells[r][n]);return e},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();HF.default=Mft;var Aft=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(VF,"__esModule",{value:!0});var Tft=Aft(HF);function Ift(t,e){if(!t.nodes||t.nodes.length===0)return t;var r=e.width,n=e.height,i=e.nodeMinGap,a=1e4,o=1e4;t.nodes.forEach(function(y){var w=y.size[0]||50,b=y.size[1]||50;a=Math.min(w,a),o=Math.min(b,o)});var s=new Tft.default;s.init(r,n,{CELL_H:o,CELL_W:a}),t.nodes.forEach(function(y){var w=s.occupyNearest(y);w&&(w.node={id:y.id,size:y.size},y.x=w.x,y.y=w.y,y.dx=w.dx,y.dy=w.dy)});for(var l=0;l<t.nodes.length;l++){var u=t.nodes[l],c=s.findGridByNodeId(u.id);if(!c)throw new Error("can not find node cell");var f=c.column,h=c.row;if(u.size[0]+i>a){for(var d=Math.ceil((u.size[0]+i)/a)-1,p=d,v=0;v<d;v++){var g=s.additionColumn.indexOf(f+v+1)>-1;if(g&&!s.cells[f+v+1][h].node)p--;else break}s.insertColumn(f,p)}if(u.size[1]+i>o){for(var d=Math.ceil((u.size[1]+i)/o)-1,p=d,v=0;v<d;v++){var g=s.additionRow.indexOf(h+v+1)>-1;if(g&&!s.cells[f][h+v+1].node)p--;else break}s.insertRow(h,p)}}for(var l=0;l<s.columnNum;l++)for(var m=function(w){var b=s.cells[l][w];if(b.node){var x=t.nodes.find(function(S){var E;return S.id===((E=b==null?void 0:b.node)===null||E===void 0?void 0:E.id)});x&&(x.x=b.x+x.size[0]/2,x.y=b.y+x.size[1]/2)}},v=0;v<s.rowNum;v++)m(v)}VF.default=Ift;var XF={};Object.defineProperty(XF,"__esModule",{value:!0});var phe=1200,vhe=800,EE=1e7,a1=10,ghe=3.141592653589793,q3=1.5707963267948966,Oft=ghe*.375,Dft=ghe*.625,z_=new Map,Pft=10,Lft=10,K3=.8,uX=.1,Rft=.5;function Nft(t,e,r){var n=t.x-t.size[0]/2,i=t.y-t.size[1]/2,a=t.x+t.size[0]/2,o=t.y+t.size[1]/2,s=e.x-e.size[0]/2,l=e.y-e.size[1]/2,u=e.x+e.size[0]/2,c=e.y+e.size[1]/2,f=t.x,h=t.y,d=e.x,p=e.y,v=d-f,g=Math.atan2(v,p-h),m=0,y=0,w=0,b=0;g>q3?(y=i-c,m=s-a,w=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)),b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):0<g&&g<=q3?(y=l-o,m=s-a,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):g<-q3?(y=i-c,m=-(u-n),y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):(y=l-o,Math.abs(v)>(a-n)/2?m=n-u:m=v,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m&&g!==0?(m/Math.sin(g)).toFixed(2):y.toFixed(2)));var x=parseFloat(g.toFixed(2)),S=r;return r&&(S=Oft<x&&x<Dft),{distance:Math.abs(w<b?w:b),isHoriz:S}}function mhe(t,e){var r=z_.get(t.id)||[],n=r.find(function(R){return R.source===e.id||R.target===e.id}),i=t.size[0]*t.size[1],a=e.size[0]*e.size[1],o=i>a?e:t,s=i>a?t:e,l=o.x-o.size[0]/2,u=o.y-o.size[1]/2,c=o.x+o.size[0]/2,f=o.y+o.size[1]/2,h=s.x-s.size[0]/2,d=s.y-s.size[1]/2,p=s.x+s.size[0]/2,v=s.y+s.size[1]/2,g=o.x,m=o.y,y=s.x,w=s.y,b=c>=h&&p>=l&&f>=d&&v>=u,x=0,S=0;if(b){S=Math.sqrt(Math.pow(y-g,2)+Math.pow(w-m,2));var E=l>h?l:h,_=u>d?u:d,k=c<p?c:p,C=f<v?f:v,A=k-E,M=C-_,T=A*M;S===0&&(S=1e-7),x=a1*1/S*100+T,x*=EE}else{var O=!1,N=Nft(o,s,O);S=N.distance,O=N.isHoriz,S<=a1?S!==0?n?x+=a1+EE*1/S:x+=a1+EE*a1/S:x+=EE:(x+=S,n&&(x+=S*S))}return x}function yhe(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];(n.x<0||n.y<0||n.x>phe||n.y>vhe)&&(e+=1e12);for(var i=r+1;i<t.length;i++)e+=mhe(n,t[i])}return e}function Fft(t,e,r,n){var i=new Map;r.forEach(function(g,m){i.set(g.id,g)});var a=n.filter(function(g){return g.source===t.id||g.target===t.id})||[],o=[];a.forEach(function(g){var m=g.source===t.id?g.target:g.source,y=i.get(m);y&&o.push(y)});for(var s=!0,l=0;l<o.length;l++){var u=o[l],c=Math.atan((t.y-u.y)/(u.x-t.y))*180,f=Math.atan((e.y-u.y)/(u.x-e.y))*180,h=c<30||c>150,d=f<30||f>150,p=c>70&&c<110,v=f>70&&f<110;if(h&&!d||c*f<0){s=!1;break}else if(p&&!v||c*f<0){s=!1;break}else if((u.x-t.x)*(u.x-e.x)<0){s=!1;break}else if((u.y-t.y)*(u.y-e.y)<0){s=!1;break}}return s}function Bft(t,e){for(var r=!1,n=1,i=Pft*n,a=Lft*n,o=[i,-i,0,0],s=[0,0,a,-a],l=0;l<t.length;++l)for(var u=t[l],c=cX(u,t),f=0;f<o.length;f++){var h=Fft(u,{x:u.x+o[f],y:u.y+s[f]},t,e);if(h){u.x+=o[f],u.y+=s[f];var d=cX(u,t),p=Math.random();d<c||p<K3&&p>uX?(c=d,r=!0):(u.x-=o[f],u.y-=s[f])}}return K3>uX&&(K3*=Rft),r?yhe(t):0}function cX(t,e){var r=0;(t.x<0||t.y<0||t.x+t.size[0]+20>phe||t.y+t.size[1]+20>vhe)&&(r+=1e12);for(var n=0;n<e.length;++n)t.id!==e[n].id&&(r+=mhe(t,e[n]));return r}function $ft(t,e){if(t.length===0)return{nodes:t,edges:e};t.forEach(function(u){var c=e.filter(function(f){return f.source===u.id||f.target===u.id});z_.set(u,c)}),t.sort(function(u,c){var f,h;return((f=z_.get(u.id))===null||f===void 0?void 0:f.length)-((h=z_.get(c.id))===null||h===void 0?void 0:h.length)});for(var r=yhe(t),n=20,i=1,a=0,o=50,s=0;n>0&&(s++,!(s>=o));){var l=Bft(t,e);l!==0&&(a=l),i=a-r,r=a,i===0?--n:n=20}return t.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:t,edges:e}}XF.default=$ft;var SN=Me&&Me.__assign||function(){return SN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},SN.apply(this,arguments)},zft=Me&&Me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jft=Me&&Me.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gft=Me&&Me.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zft(e,t,r);return jft(e,t),e},whe=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(WF,"__esModule",{value:!0});var Rg=Gft(z6),Uft=whe(VF),Wft=whe(XF),Vft=ry;function Hft(t,e){var r=t.nodes,n=t.edges,i=e.width,a=e.height;if(!(r!=null&&r.length))return Promise.resolve();var o=[];r.forEach(function(p){var v=n.filter(function(m){return m.source===p.id||m.target===p.id});if(v.length>1){var g=SN({},p);delete g.size,o.push(g)}});var s=[];n.forEach(function(p){var v=o.find(function(m){return m.id===p.source}),g=o.find(function(m){return m.id===p.target});v&&g&&s.push(p)});var l=new Vft.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),u=l.layout({nodes:o,edges:s}).nodes;r.forEach(function(p){var v=(u||[]).find(function(g){return g.id===p.id});p.x=(v==null?void 0:v.x)||i/2,p.y=(v==null?void 0:v.y)||a/2});var c=JSON.parse(JSON.stringify(r)),f=JSON.parse(JSON.stringify(n)),h=Rg.forceSimulation().nodes(c).force("link",Rg.forceLink(f).id(function(p){return p.id}).distance(function(p){var v=s.find(function(g){return g.source===p.source&&g.target===p.target});return v?30:20})).force("charge",Rg.forceManyBody()).force("center",Rg.forceCenter(i/2,a/2)).force("x",Rg.forceX(i/2)).force("y",Rg.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),d=new Promise(function(p){h.on("end",function(){r.forEach(function(x){var S=c.find(function(E){return E.id===x.id});S&&(x.x=S.x,x.y=S.y)});var v=Math.min.apply(Math,r.map(function(x){return x.x})),g=Math.max.apply(Math,r.map(function(x){return x.x})),m=Math.min.apply(Math,r.map(function(x){return x.y})),y=Math.max.apply(Math,r.map(function(x){return x.y})),w=i/(g-v),b=a/(y-m);r.forEach(function(x){x.x!==void 0&&w<1&&(x.x=(x.x-v)*w),x.y!==void 0&&b<1&&(x.y=(x.y-m)*b)}),r.forEach(function(x){x.sizeTemp=x.size,x.size=[10,10]}),(0,Wft.default)(r,n),r.forEach(function(x){x.size=x.sizeTemp||[],delete x.sizeTemp}),(0,Uft.default)({nodes:r,edges:n},e),p()})});return d}WF.default=Hft;var Xft=Me&&Me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yft=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zb,"__esModule",{value:!0});zb.ERLayout=void 0;var qft=si,Kft=Yft(WF),Qft=function(t){Xft(e,t);function e(r){var n=t.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},r&&n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges;return n==null||n.forEach(function(a){a.size||(a.size=[50,50])}),(0,Kft.default)({nodes:n,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){r.onLayoutEnd&&r.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(qft.Base);zb.ERLayout=Qft;var up={},fX;function Zft(){if(fX)return up;fX=1,Object.defineProperty(up,"__esModule",{value:!0}),up.Layouts=up.Layout=void 0;var t=pf,e=xb,r=Sb,n=_b,i=Eb,a=F6,o=Cb,s=ry,l=LF,u=Pb,c=Lb,f=Rb,h=Nb,d=Fb,p=Bb,v=dhe(),g=$b,m=zb,y=Ab,w=Kn(),b=function(){function x(S){var E=(0,t.getLayoutByName)(S.type);this.layoutInstance=new E(S)}return x.prototype.layout=function(S){return this.layoutInstance.layout(S)},x.prototype.updateCfg=function(S){this.layoutInstance.updateCfg(S)},x.prototype.init=function(S){this.correctLayers(S.nodes),this.layoutInstance.init(S)},x.prototype.correctLayers=function(S){if(S!=null&&S.length){var E=1/0,_=[];if(S.forEach(function(C){(0,w.isString)(C.layer)&&(C.layer=parseInt(C.layer,10)),!(C.layer===void 0||isNaN(C.layer))&&(_.push(C),C.layer<E&&(E=C.layer))}),E<=0){var k=Math.abs(E)+1;_.forEach(function(C){return C.layer+=k})}}},x.prototype.execute=function(){this.layoutInstance.execute()},x.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},x.prototype.destroy=function(){return this.layoutInstance.destroy()},x}();return up.Layout=b,up.Layouts={force:a.ForceLayout,fruchterman:f.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:i.GForceLayout,force2:n.Force2Layout,dagre:s.DagreLayout,dagreCompound:y.DagreCompoundLayout,circular:o.CircularLayout,radial:l.RadialLayout,concentric:u.ConcentricLayout,grid:e.GridLayout,mds:c.MDSLayout,comboForce:p.ComboForceLayout,comboCombined:v.ComboCombinedLayout,random:r.RandomLayout,"gForce-gpu":d.GForceGPULayout,"fruchterman-gpu":h.FruchtermanGPULayout,er:m.ERLayout},up}var bhe={};Object.defineProperty(bhe,"__esModule",{value:!0});var hX;function xhe(){return hX||(hX=1,function(t){var e=Me&&Me.__createBinding||(Object.create?function(S,E,_,k){k===void 0&&(k=_);var C=Object.getOwnPropertyDescriptor(E,_);(!C||("get"in C?!E.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return E[_]}}),Object.defineProperty(S,k,C)}:function(S,E,_,k){k===void 0&&(k=_),S[k]=E[_]}),r=Me&&Me.__exportStar||function(S,E){for(var _ in S)_!=="default"&&!Object.prototype.hasOwnProperty.call(E,_)&&e(E,S,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=t.ForceAtlas2Layout=t.ComboCombinedLayout=t.ComboForceLayout=t.GForceGPULayout=t.FruchtermanGPULayout=t.FruchtermanLayout=t.MDSLayout=t.ConcentricLayout=t.RadialLayout=t.DagreCompoundLayout=t.DagreLayout=t.CircularLayout=t.ForceLayout=t.Force2Layout=t.GForceLayout=t.RandomLayout=t.GridLayout=t.Layouts=t.Layout=void 0;var n=xb;Object.defineProperty(t,"GridLayout",{enumerable:!0,get:function(){return n.GridLayout}});var i=Sb;Object.defineProperty(t,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var a=Eb;Object.defineProperty(t,"GForceLayout",{enumerable:!0,get:function(){return a.GForceLayout}});var o=_b;Object.defineProperty(t,"Force2Layout",{enumerable:!0,get:function(){return o.Force2Layout}});var s=F6;Object.defineProperty(t,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var l=Cb;Object.defineProperty(t,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var u=ry;Object.defineProperty(t,"DagreLayout",{enumerable:!0,get:function(){return u.DagreLayout}});var c=Ab;Object.defineProperty(t,"DagreCompoundLayout",{enumerable:!0,get:function(){return c.DagreCompoundLayout}});var f=LF;Object.defineProperty(t,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}});var h=Pb;Object.defineProperty(t,"ConcentricLayout",{enumerable:!0,get:function(){return h.ConcentricLayout}});var d=Lb;Object.defineProperty(t,"MDSLayout",{enumerable:!0,get:function(){return d.MDSLayout}});var p=Rb;Object.defineProperty(t,"FruchtermanLayout",{enumerable:!0,get:function(){return p.FruchtermanLayout}});var v=Nb;Object.defineProperty(t,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}});var g=Fb;Object.defineProperty(t,"GForceGPULayout",{enumerable:!0,get:function(){return g.GForceGPULayout}});var m=Bb;Object.defineProperty(t,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var y=dhe();Object.defineProperty(t,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var w=$b;Object.defineProperty(t,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}});var b=zb;Object.defineProperty(t,"ERLayout",{enumerable:!0,get:function(){return b.ERLayout}});var x=Zft();Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return x.Layout}}),Object.defineProperty(t,"Layouts",{enumerable:!0,get:function(){return x.Layouts}}),r(bhe,t)}(w3)),w3}(function(t){var e=Me&&Me.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,l)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),r=Me&&Me.__exportStar||function(i,a){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,i,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0;var n=pf;Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return n.registerLayout}}),Object.defineProperty(t,"unRegisterLayout",{enumerable:!0,get:function(){return n.unRegisterLayout}}),Object.defineProperty(t,"getLayoutByName",{enumerable:!0,get:function(){return n.getLayoutByName}}),r(xhe(),t)})(Or);var She={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Me,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=36)}([function(r,n,i){var a=i(3);n.a=function(o){return Array.isArray?Array.isArray(o):Object(a.a)(o,"Array")}},function(r,n,i){var a=function(o){return o!==null&&typeof o!="function"&&isFinite(o.length)};n.a=a},function(r,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"Function")}},function(r,n,i){var a={}.toString,o=function(s,l){return a.call(s)==="[object "+l+"]"};n.a=o},function(r,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"String")}},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Number")};n.a=o},function(r,n,i){var a=i(38),o=a.mix;function s(l,u,c,f){return f===void 0&&(f="height"),c==="center"?(l[f]+u[f])/2:l.height}r.exports={assign:o,getHeight:s}},function(r,n,i){var a=function(o){return o==null};n.a=a},function(r,n,i){var a=i(0),o=i(12);function s(l,u){if(l){var c;if(Object(a.a)(l))for(var f=0,h=l.length;f<h&&(c=u(l[f],f),c!==!1);f++);else if(Object(o.a)(l)){for(var d in l)if(l.hasOwnProperty(d)&&(c=u(l[d],d),c===!1))break}}}n.a=s},function(r,n,i){var a=i(7);n.a=function(o){return Object(a.a)(o)?"":o.toString()}},function(r,n,i){var a=i(14),o=i(3),s=function(l){if(!Object(a.a)(l)||!Object(o.a)(l,"Object"))return!1;if(Object.getPrototypeOf(l)===null)return!0;for(var u=l;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(l)===u};n.a=s},function(r,n,i){var a=i(18),o=function(){function s(u,c){c===void 0&&(c={});var f=this;f.options=c,f.rootNode=a(u,c)}var l=s.prototype;return l.execute=function(){throw new Error("please override this method")},s}();r.exports=o},function(r,n,i){n.a=function(a){var o=typeof a;return a!==null&&o==="object"||o==="function"}},function(r,n,i){var a=i(1),o=function(s,l){return Object(a.a)(s)?s.indexOf(l)>-1:!1};n.a=o},function(r,n,i){var a=function(o){return typeof o=="object"&&o!==null};n.a=a},function(r,n,i){var a=i(8),o=i(2),s=Object.values?function(l){return Object.values(l)}:function(l){var u=[];return Object(a.a)(l,function(c,f){Object(o.a)(l)&&f==="prototype"||u.push(c)}),u};n.a=s},function(r,n,i){n.a=o;function a(s,l){for(var u in l)l.hasOwnProperty(u)&&u!=="constructor"&&l[u]!==void 0&&(s[u]=l[u])}function o(s,l,u,c){return l&&a(s,l),u&&a(s,u),c&&a(s,c),s}},function(r,n,i){var a=i(35),o=["LR","RL","TB","BT","H","V"],s=["LR","RL","H"],l=function(f){return s.indexOf(f)>-1},u=o[0];r.exports=function(c,f,h){var d=f.direction||u;if(f.isHorizontal=l(d),d&&o.indexOf(d)===-1)throw new TypeError("Invalid direction: "+d);if(d===o[0])h(c,f);else if(d===o[1])h(c,f),c.right2left();else if(d===o[2])h(c,f);else if(d===o[3])h(c,f),c.bottom2top();else if(d===o[4]||d===o[5]){var p=a(c,f),v=p.left,g=p.right;h(v,f),h(g,f),f.isHorizontal?v.right2left():v.bottom2top(),g.translate(v.x-g.x,v.y-g.y),c.x=v.x,c.y=g.y;var m=c.getBoundingBox();f.isHorizontal?m.top<0&&c.translate(0,-m.top):m.left<0&&c.translate(-m.left,0)}var y=f.fixedRoot;return y===void 0&&(y=!0),y&&c.translate(-(c.x+c.width/2+c.hgap),-(c.y+c.height/2+c.vgap)),c}},function(r,n,i){var a=i(6),o=18,s=o*2,l=o,u={getId:function(d){return d.id||d.name},getPreH:function(d){return d.preH||0},getPreV:function(d){return d.preV||0},getHGap:function(d){return d.hgap||l},getVGap:function(d){return d.vgap||l},getChildren:function(d){return d.children},getHeight:function(d){return d.height||s},getWidth:function(d){var p=d.label||" ";return d.width||p.split("").length*o}};function c(h,d){var p=this;if(p.vgap=p.hgap=0,h instanceof c)return h;p.data=h;var v=d.getHGap(h),g=d.getVGap(h);return p.preH=d.getPreH(h),p.preV=d.getPreV(h),p.width=d.getWidth(h),p.height=d.getHeight(h),p.width+=p.preH,p.height+=p.preV,p.id=d.getId(h),p.x=p.y=0,p.depth=0,p.children||(p.children=[]),p.addGap(v,g),p}a.assign(c.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(d,p){var v=this;v.hgap+=d,v.vgap+=p,v.width+=2*d,v.height+=2*p},eachNode:function(d){for(var p=this,v=[p],g;g=v.shift();)d(g),v=g.children.concat(v)},DFTraverse:function(d){this.eachNode(d)},BFTraverse:function(d){for(var p=this,v=[p],g;g=v.shift();)d(g),v=v.concat(g.children)},getBoundingBox:function(){var d={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(p){d.left=Math.min(d.left,p.x),d.top=Math.min(d.top,p.y),d.width=Math.max(d.width,p.x+p.width),d.height=Math.max(d.height,p.y+p.height)}),d},translate:function(d,p){d===void 0&&(d=0),p===void 0&&(p=0),this.eachNode(function(v){v.x+=d,v.y+=p,v.x+=v.preH,v.y+=v.preV})},right2left:function(){var d=this,p=d.getBoundingBox();d.eachNode(function(v){v.x=v.x-(v.x-p.left)*2-v.width}),d.translate(p.width,0)},bottom2top:function(){var d=this,p=d.getBoundingBox();d.eachNode(function(v){v.y=v.y-(v.y-p.top)*2-v.height}),d.translate(0,p.height)}});function f(h,d,p){d===void 0&&(d={}),d=a.assign({},u,d);var v=new c(h,d),g=[v],m;if(!p&&!h.collapsed){for(;m=g.shift();)if(!m.data.collapsed){var y=d.getChildren(m.data),w=y?y.length:0;if(m.children=new Array(w),y&&w)for(var b=0;b<w;b++){var x=new c(y[b],d);m.children[b]=x,g.push(x),x.parent=m,x.depth=m.depth+1}}}return v}r.exports=f},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],c=0;c<s.length;c++){var f=s[c];l(f,c)&&u.push(f)}return u};n.a=o},function(r,n,i){var a=i(7),o=i(21);function s(l,u){var c=Object(o.a)(u),f=c.length;if(Object(a.a)(l))return!f;for(var h=0;h<f;h+=1){var d=c[h];if(u[d]!==l[d]||!(d in l))return!1}return!0}n.a=s},function(r,n,i){var a=i(8),o=i(2),s=Object.keys?function(l){return Object.keys(l)}:function(l){var u=[];return Object(a.a)(l,function(c,f){Object(o.a)(l)&&f==="prototype"||u.push(f)}),u};n.a=s},function(r,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.max(s,l)},o[0])}},function(r,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.min(s,l)},o[0])}},function(r,n,i){var a=i(1),o=Array.prototype.splice,s=function(u,c){if(!Object(a.a)(u))return[];for(var f=u?c.length:0,h=f-1;f--;){var d=void 0,p=c[f];(f===h||p!==d)&&(d=p,o.call(u,p,1))}return u};n.a=s},function(r,n,i){var a=i(8),o=i(0),s=i(10),l=function(u,c,f){if(!Object(o.a)(u)&&!Object(s.a)(u))return u;var h=f;return Object(a.a)(u,function(d,p){h=c(h,d,p)}),h};n.a=l},function(r,n,i){n.a=a;function a(o,s){s===void 0&&(s=new Map);var l=[];if(Array.isArray(o))for(var u=0,c=o.length;u<c;u++){var f=o[u];s.has(f)||(l.push(f),s.set(f,!0))}return l}},function(r,n,i){n.a=l;var a=i(0),o=i(2),s=i(28);function l(u,c){if(!c)return{0:u};if(!Object(o.a)(c)){var f=Object(a.a)(c)?c:c.replace(/\s+/g,"").split("*");c=function(h){for(var d="_",p=0,v=f.length;p<v;p++)d+=h[f[p]]&&h[f[p]].toString();return d}}return Object(s.a)(u,c)}},function(r,n,i){var a=i(0),o=i(2),s=Object.prototype.hasOwnProperty;function l(u,c){if(!c||!Object(a.a)(u))return{};for(var f={},h=Object(o.a)(c)?c:function(g){return g[c]},d,p=0;p<u.length;p++){var v=u[p];d=h(v),s.call(f,d)?f[d].push(v):f[d]=[v]}return f}n.a=l},function(r,n,i){n.a=function(a,o){return a.hasOwnProperty(o)}},function(r,n,i){var a={}.toString,o=function(s){return a.call(s).replace(/^\[object /,"").replace(/]$/,"")};n.a=o},function(r,n,i){var a=Object.prototype,o=function(s){var l=s&&s.constructor,u=typeof l=="function"&&l.prototype||a;return s===u};n.a=o},function(r,n,i){var a=i(2);n.a=function(o,s){if(!Object(a.a)(o))throw new TypeError("Expected a function");var l=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var f=s?s.apply(this,u):u[0],h=l.cache;if(h.has(f))return h.get(f);var d=o.apply(this,u);return h.set(f,d),d};return l.cache=new Map,l}},function(r,n,i){var a=i(14),o=i(1),s=i(4),l=function(u,c){if(u===c)return!0;if(!u||!c||Object(s.a)(u)||Object(s.a)(c))return!1;if(Object(o.a)(u)||Object(o.a)(c)){if(u.length!==c.length)return!1;for(var f=!0,h=0;h<u.length&&(f=l(u[h],c[h]),!!f);h++);return f}if(Object(a.a)(u)||Object(a.a)(c)){var d=Object.keys(u),p=Object.keys(c);if(d.length!==p.length)return!1;for(var f=!0,h=0;h<d.length&&(f=l(u[d[h]],c[d[h]]),!!f);h++);return f}return!1};n.a=l},function(r,n,i){var a=i(116),o=i(15),s=i(32),l=i(4),u;n.a=Object(s.a)(function(c,f){f===void 0&&(f={});var h=f.fontSize,d=f.fontFamily,p=f.fontWeight,v=f.fontStyle,g=f.fontVariant;return u||(u=document.createElement("canvas").getContext("2d")),u.font=[v,g,p,h+"px",d].join(" "),u.measureText(Object(l.a)(c)?c:"").width},function(c,f){return f===void 0&&(f={}),Object(a.a)([c],Object(o.a)(f)).join("")})},function(r,n,i){var a=i(18);r.exports=function(o,s){for(var l=a(o.data,s,!0),u=a(o.data,s,!0),c=o.children.length,f=Math.round(c/2),h=s.getSide||function(g,m){return m<f?"right":"left"},d=0;d<c;d++){var p=o.children[d],v=h(p,d);v==="right"?u.children.push(p):l.children.push(p)}return l.eachNode(function(g){g.isRoot()||(g.side="left")}),u.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:l,right:u}}},function(r,n,i){var a={compactBox:i(37),dendrogram:i(120),indented:i(122),mindmap:i(124)};r.exports=a},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(119),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(13);i.d(n,"contains",function(){return a.a}),i.d(n,"includes",function(){return a.a});var o=i(39);i.d(n,"difference",function(){return o.a});var s=i(40);i.d(n,"find",function(){return s.a});var l=i(41);i.d(n,"findIndex",function(){return l.a});var u=i(42);i.d(n,"firstValue",function(){return u.a});var c=i(43);i.d(n,"flatten",function(){return c.a});var f=i(44);i.d(n,"flattenDeep",function(){return f.a});var h=i(45);i.d(n,"getRange",function(){return h.a});var d=i(46);i.d(n,"pull",function(){return d.a});var p=i(24);i.d(n,"pullAt",function(){return p.a});var v=i(25);i.d(n,"reduce",function(){return v.a});var g=i(47);i.d(n,"remove",function(){return g.a});var m=i(48);i.d(n,"sortBy",function(){return m.a});var y=i(49);i.d(n,"union",function(){return y.a});var w=i(26);i.d(n,"uniq",function(){return w.a});var b=i(50);i.d(n,"valuesOfKey",function(){return b.a});var x=i(51);i.d(n,"head",function(){return x.a});var S=i(52);i.d(n,"last",function(){return S.a});var E=i(53);i.d(n,"startsWith",function(){return E.a});var _=i(54);i.d(n,"endsWith",function(){return _.a});var k=i(19);i.d(n,"filter",function(){return k.a});var C=i(55);i.d(n,"every",function(){return C.a});var A=i(56);i.d(n,"some",function(){return A.a});var M=i(57);i.d(n,"group",function(){return M.a});var T=i(28);i.d(n,"groupBy",function(){return T.a});var O=i(27);i.d(n,"groupToMap",function(){return O.a});var N=i(58);i.d(n,"getWrapBehavior",function(){return N.a});var R=i(59);i.d(n,"wrapBehavior",function(){return R.a});var B=i(60);i.d(n,"number2color",function(){return B.a});var F=i(61);i.d(n,"parseRadius",function(){return F.a});var D=i(62);i.d(n,"clamp",function(){return D.a});var L=i(63);i.d(n,"fixedBase",function(){return L.a});var G=i(64);i.d(n,"isDecimal",function(){return G.a});var Y=i(65);i.d(n,"isEven",function(){return Y.a});var Z=i(66);i.d(n,"isInteger",function(){return Z.a});var q=i(67);i.d(n,"isNegative",function(){return q.a});var pe=i(68);i.d(n,"isNumberEqual",function(){return pe.a});var Se=i(69);i.d(n,"isOdd",function(){return Se.a});var Ae=i(70);i.d(n,"isPositive",function(){return Ae.a});var He=i(22);i.d(n,"max",function(){return He.a});var ct=i(71);i.d(n,"maxBy",function(){return ct.a});var st=i(23);i.d(n,"min",function(){return st.a});var Mt=i(72);i.d(n,"minBy",function(){return Mt.a});var yt=i(73);i.d(n,"mod",function(){return yt.a});var ar=i(74);i.d(n,"toDegree",function(){return ar.a});var Jt=i(75);i.d(n,"toInteger",function(){return Jt.a});var er=i(76);i.d(n,"toRadian",function(){return er.a});var yr=i(77);i.d(n,"forIn",function(){return yr.a});var or=i(29);i.d(n,"has",function(){return or.a});var zt=i(78);i.d(n,"hasKey",function(){return zt.a});var tr=i(79);i.d(n,"hasValue",function(){return tr.a});var Dr=i(21);i.d(n,"keys",function(){return Dr.a});var Ze=i(20);i.d(n,"isMatch",function(){return Ze.a});var oe=i(15);i.d(n,"values",function(){return oe.a});var P=i(80);i.d(n,"lowerCase",function(){return P.a});var _e=i(81);i.d(n,"lowerFirst",function(){return _e.a});var Pe=i(82);i.d(n,"substitute",function(){return Pe.a});var ye=i(83);i.d(n,"upperCase",function(){return ye.a});var Fe=i(84);i.d(n,"upperFirst",function(){return Fe.a});var Be=i(30);i.d(n,"getType",function(){return Be.a});var Xe=i(85);i.d(n,"isArguments",function(){return Xe.a});var et=i(0);i.d(n,"isArray",function(){return et.a});var Ot=i(1);i.d(n,"isArrayLike",function(){return Ot.a});var nr=i(86);i.d(n,"isBoolean",function(){return nr.a});var Kt=i(87);i.d(n,"isDate",function(){return Kt.a});var At=i(88);i.d(n,"isError",function(){return At.a});var rr=i(2);i.d(n,"isFunction",function(){return rr.a});var Qt=i(89);i.d(n,"isFinite",function(){return Qt.a});var hr=i(7);i.d(n,"isNil",function(){return hr.a});var Xr=i(90);i.d(n,"isNull",function(){return Xr.a});var Zn=i(5);i.d(n,"isNumber",function(){return Zn.a});var Tr=i(12);i.d(n,"isObject",function(){return Tr.a});var pn=i(14);i.d(n,"isObjectLike",function(){return pn.a});var li=i(10);i.d(n,"isPlainObject",function(){return li.a});var vn=i(31);i.d(n,"isPrototype",function(){return vn.a});var Xo=i(91);i.d(n,"isRegExp",function(){return Xo.a});var ha=i(4);i.d(n,"isString",function(){return ha.a});var Ps=i(3);i.d(n,"isType",function(){return Ps.a});var Sn=i(92);i.d(n,"isUndefined",function(){return Sn.a});var da=i(93);i.d(n,"isElement",function(){return da.a});var Qi=i(94);i.d(n,"requestAnimationFrame",function(){return Qi.a});var Nn=i(95);i.d(n,"clearAnimationFrame",function(){return Nn.a});var Ls=i(96);i.d(n,"augment",function(){return Ls.a});var Rs=i(97);i.d(n,"clone",function(){return Rs.a});var Si=i(98);i.d(n,"debounce",function(){return Si.a});var rn=i(32);i.d(n,"memoize",function(){return rn.a});var nn=i(99);i.d(n,"deepMix",function(){return nn.a});var Vt=i(8);i.d(n,"each",function(){return Vt.a});var kr=i(100);i.d(n,"extend",function(){return kr.a});var _t=i(101);i.d(n,"indexOf",function(){return _t.a});var Yr=i(102);i.d(n,"isEmpty",function(){return Yr.a});var an=i(33);i.d(n,"isEqual",function(){return an.a});var Ei=i(103);i.d(n,"isEqualWith",function(){return Ei.a});var _i=i(104);i.d(n,"map",function(){return _i.a});var Jn=i(105);i.d(n,"mapValues",function(){return Jn.a});var ui=i(16);i.d(n,"mix",function(){return ui.a}),i.d(n,"assign",function(){return ui.a});var Ci=i(106);i.d(n,"get",function(){return Ci.a});var ki=i(107);i.d(n,"set",function(){return ki.a});var mo=i(108);i.d(n,"pick",function(){return mo.a});var yo=i(109);i.d(n,"omit",function(){return yo.a});var wo=i(110);i.d(n,"throttle",function(){return wo.a});var bo=i(111);i.d(n,"toArray",function(){return bo.a});var xo=i(9);i.d(n,"toString",function(){return xo.a});var So=i(112);i.d(n,"uniqueId",function(){return So.a});var Eo=i(113);i.d(n,"noop",function(){return Eo.a});var Nd=i(114);i.d(n,"identity",function(){return Nd.a});var $v=i(115);i.d(n,"size",function(){return $v.a});var Fd=i(34);i.d(n,"measureTextWidth",function(){return Fd.a});var zv=i(117);i.d(n,"getEllipsisText",function(){return zv.a});var jv=i(118);i.d(n,"Cache",function(){return jv.a})},function(r,n,i){var a=i(19),o=i(13),s=function(l,u){return u===void 0&&(u=[]),Object(a.a)(l,function(c){return!Object(o.a)(u,c)})};n.a=s},function(r,n,i){var a=i(2),o=i(20),s=i(0),l=i(10);function u(c,f){if(!Object(s.a)(c))return null;var h;if(Object(a.a)(f)&&(h=f),Object(l.a)(f)&&(h=function(p){return Object(o.a)(p,f)}),h){for(var d=0;d<c.length;d+=1)if(h(c[d]))return c[d]}return null}n.a=u},function(r,n,i){function a(o,s,l){l===void 0&&(l=0);for(var u=l;u<o.length;u++)if(s(o[u],u))return u;return-1}n.a=a},function(r,n,i){var a=i(7),o=i(0),s=function(l,u){for(var c=null,f=0;f<l.length;f++){var h=l[f],d=h[u];if(!Object(a.a)(d)){Object(o.a)(d)?c=d[0]:c=d;break}}return c};n.a=s},function(r,n,i){var a=i(0),o=function(s){if(!Object(a.a)(s))return[];for(var l=[],u=0;u<s.length;u++)l=l.concat(s[u]);return l};n.a=o},function(r,n,i){var a=i(0),o=function(s,l){if(l===void 0&&(l=[]),!Object(a.a)(s))l.push(s);else for(var u=0;u<s.length;u+=1)o(s[u],l);return l};n.a=o},function(r,n,i){var a=i(0),o=i(22),s=i(23),l=function(u){var c=u.filter(function(v){return!isNaN(v)});if(!c.length)return{min:0,max:0};if(Object(a.a)(u[0])){for(var f=[],h=0;h<u.length;h++)f=f.concat(u[h]);c=f}var d=Object(o.a)(c),p=Object(s.a)(c);return{min:p,max:d}};n.a=l},function(r,n,i){var a=Array.prototype,o=a.splice,s=a.indexOf,l=function(u){for(var c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];for(var h=0;h<c.length;h++)for(var d=c[h],p=-1;(p=s.call(u,d))>-1;)o.call(u,p,1);return u};n.a=l},function(r,n,i){var a=i(1),o=i(24),s=function(l,u){var c=[];if(!Object(a.a)(l))return c;for(var f=-1,h=[],d=l.length;++f<d;){var p=l[f];u(p,f,l)&&(c.push(p),h.push(f))}return Object(o.a)(l,h),c};n.a=s},function(r,n,i){var a=i(0),o=i(4),s=i(2);function l(u,c){var f;if(Object(s.a)(c))f=function(d,p){return c(d)-c(p)};else{var h=[];Object(o.a)(c)?h.push(c):Object(a.a)(c)&&(h=c),f=function(d,p){for(var v=0;v<h.length;v+=1){var g=h[v];if(d[g]>p[g])return 1;if(d[g]<p[g])return-1}return 0}}return u.sort(f),u}n.a=l},function(r,n,i){var a=i(26),o=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return Object(a.a)([].concat.apply([],s))};n.a=o},function(r,n,i){var a=i(0),o=i(7);n.a=function(s,l){for(var u=[],c={},f=0;f<s.length;f++){var h=s[f],d=h[l];if(!Object(o.a)(d)){Object(a.a)(d)||(d=[d]);for(var p=0;p<d.length;p++){var v=d[p];c[v]||(u.push(v),c[v]=!0)}}}return u}},function(r,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s))return s[0]}},function(r,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s)){var l=s;return l[l.length-1]}}},function(r,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[0]===u:!1}n.a=s},function(r,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[l.length-1]===u:!1}n.a=s},function(r,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(!s(o[l],l))return!1;return!0};n.a=a},function(r,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(s(o[l],l))return!0;return!1};n.a=a},function(r,n,i){var a=i(27);n.a=function(o,s){if(!s)return[o];var l=Object(a.a)(o,s),u=[];for(var c in l)u.push(l[c]);return u}},function(r,n,i){function a(o,s){return o["_wrap_"+s]}n.a=a},function(r,n,i){function a(o,s){if(o["_wrap_"+s])return o["_wrap_"+s];var l=function(u){o[s](u)};return o["_wrap_"+s]=l,l}n.a=a},function(r,n,i){var a={};function o(s){var l=a[s];if(!l){for(var u=s.toString(16),c=u.length;c<6;c++)u="0"+u;l="#"+u,a[s]=l}return l}n.a=o},function(r,n,i){var a=i(0);function o(s){var l=0,u=0,c=0,f=0;return Object(a.a)(s)?s.length===1?l=u=c=f=s[0]:s.length===2?(l=c=s[0],u=f=s[1]):s.length===3?(l=s[0],u=f=s[1],c=s[2]):(l=s[0],u=s[1],c=s[2],f=s[3]):l=u=c=f=s,{r1:l,r2:u,r3:c,r4:f}}n.a=o},function(r,n,i){var a=function(o,s,l){return o<s?s:o>l?l:o};n.a=a},function(r,n,i){var a=function(o,s){var l=s.toString(),u=l.indexOf(".");if(u===-1)return Math.round(o);var c=l.substr(u+1).length;return c>20&&(c=20),parseFloat(o.toFixed(c))};n.a=a},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%1!==0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2===0};n.a=o},function(r,n,i){var a=i(5),o=Number.isInteger?Number.isInteger:function(s){return Object(a.a)(s)&&s%1===0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s<0};n.a=o},function(r,n,i){n.a=o;var a=1e-5;function o(s,l,u){return u===void 0&&(u=a),Math.abs(s-l)<u}},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2!==0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s>0};n.a=o},function(r,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,c=-1/0,f=0;f<s.length;f++){var h=s[f],d=Object(o.a)(l)?l(h):h[l];d>c&&(u=h,c=d)}return u}}},function(r,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,c=1/0,f=0;f<s.length;f++){var h=s[f],d=Object(o.a)(l)?l(h):h[l];d<c&&(u=h,c=d)}return u}}},function(r,n,i){var a=function(o,s){return(o%s+s)%s};n.a=a},function(r,n,i){var a=180/Math.PI,o=function(s){return a*s};n.a=o},function(r,n,i){n.a=parseInt},function(r,n,i){var a=Math.PI/180,o=function(s){return a*s};n.a=o},function(r,n,i){var a=i(8);n.a=a.a},function(r,n,i){var a=i(29);n.a=a.a},function(r,n,i){var a=i(13),o=i(15);n.a=function(s,l){return Object(a.a)(Object(o.a)(s),l)}},function(r,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toLowerCase()};n.a=o},function(r,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toLowerCase()+l.substring(1)};n.a=o},function(r,n,i){function a(o,s){return!o||!s?o:o.replace(/\\?\{([^{}]+)\}/g,function(l,u){return l.charAt(0)==="\\"?l.slice(1):s[u]===void 0?"":s[u]})}n.a=a},function(r,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toUpperCase()};n.a=o},function(r,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toUpperCase()+l.substring(1)};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Arguments")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Boolean")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Date")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Error")};n.a=o},function(r,n,i){var a=i(5);n.a=function(o){return Object(a.a)(o)&&isFinite(o)}},function(r,n,i){var a=function(o){return o===null};n.a=a},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"RegExp")};n.a=o},function(r,n,i){var a=function(o){return o===void 0};n.a=a},function(r,n,i){var a=function(o){return o instanceof Element||o instanceof HTMLDocument};n.a=a},function(r,n,i){n.a=a;function a(o){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(l){return setTimeout(l,16)};return s(o)}},function(r,n,i){n.a=a;function a(o){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(o)}},function(r,n,i){var a=i(16),o=i(2),s=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];for(var c=l[0],f=1;f<l.length;f++){var h=l[f];Object(o.a)(h)&&(h=h.prototype),Object(a.a)(c.prototype,h)}};n.a=s},function(r,n,i){var a=i(0),o=function(s){if(typeof s!="object"||s===null)return s;var l;if(Object(a.a)(s)){l=[];for(var u=0,c=s.length;u<c;u++)typeof s[u]=="object"&&s[u]!=null?l[u]=o(s[u]):l[u]=s[u]}else{l={};for(var f in s)typeof s[f]=="object"&&s[f]!=null?l[f]=o(s[f]):l[f]=s[f]}return l};n.a=o},function(r,n,i){function a(o,s,l){var u;return function(){var c=this,f=arguments,h=function(){u=null,l||o.apply(c,f)},d=l&&!u;clearTimeout(u),u=setTimeout(h,s),d&&o.apply(c,f)}}n.a=a},function(r,n,i){var a=i(0),o=i(10),s=5;function l(c,f,h,d){h=h||0,d=d||s;for(var p in f)if(f.hasOwnProperty(p)){var v=f[p];v!==null&&Object(o.a)(v)?(Object(o.a)(c[p])||(c[p]={}),h<d?l(c[p],v,h+1,d):c[p]=f[p]):Object(a.a)(v)?(c[p]=[],c[p]=c[p].concat(v)):v!==void 0&&(c[p]=v)}}var u=function(c){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];for(var d=0;d<f.length;d+=1)l(c,f[d]);return c};n.a=u},function(r,n,i){var a=i(16),o=i(2),s=function(l,u,c,f){Object(o.a)(u)||(c=u,u=l,l=function(){});var h=Object.create?function(p,v){return Object.create(p,{constructor:{value:v}})}:function(p,v){function g(){}g.prototype=p;var m=new g;return m.constructor=v,m},d=h(u.prototype,l);return l.prototype=Object(a.a)(d,l.prototype),l.superclass=h(u.prototype,u),Object(a.a)(d,c),Object(a.a)(l,f),l};n.a=s},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return-1;var u=Array.prototype.indexOf;if(u)return u.call(s,l);for(var c=-1,f=0;f<s.length;f++)if(s[f]===l){c=f;break}return c};n.a=o},function(r,n,i){var a=i(7),o=i(1),s=i(30),l=i(31),u=Object.prototype.hasOwnProperty;function c(f){if(Object(a.a)(f))return!0;if(Object(o.a)(f))return!f.length;var h=Object(s.a)(f);if(h==="Map"||h==="Set")return!f.size;if(Object(l.a)(f))return!Object.keys(f).length;for(var d in f)if(u.call(f,d))return!1;return!0}n.a=c},function(r,n,i){var a=i(2),o=i(33);n.a=function(s,l,u){return Object(a.a)(u)?!!u(s,l):Object(o.a)(s,l)}},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],c=0;c<s.length;c++){var f=s[c];u.push(l(f,c))}return u};n.a=o},function(r,n,i){var a=i(7),o=i(12),s=function(l){return l};n.a=function(l,u){u===void 0&&(u=s);var c={};return Object(o.a)(l)&&!Object(a.a)(l)&&Object.keys(l).forEach(function(f){c[f]=u(l[f],f)}),c}},function(r,n,i){var a=i(4);n.a=function(o,s,l){for(var u=0,c=Object(a.a)(s)?s.split("."):s;o&&u<c.length;)o=o[c[u++]];return o===void 0||u<c.length?l:o}},function(r,n,i){var a=i(12),o=i(4),s=i(5);n.a=function(l,u,c){var f=l,h=Object(o.a)(u)?u.split("."):u;return h.forEach(function(d,p){p<h.length-1?(Object(a.a)(f[d])||(f[d]=Object(s.a)(h[p+1])?[]:{}),f=f[d]):f[d]=c}),l}},function(r,n,i){var a=i(8),o=i(10),s=Object.prototype.hasOwnProperty;n.a=function(l,u){if(l===null||!Object(o.a)(l))return{};var c={};return Object(a.a)(u,function(f){s.call(l,f)&&(c[f]=l[f])}),c}},function(r,n,i){var a=i(25);n.a=function(o,s){return Object(a.a)(o,function(l,u,c){return s.includes(c)||(l[c]=u),l},{})}},function(r,n,i){n.a=function(a,o,s){var l,u,c,f,h=0;s||(s={});var d=function(){h=s.leading===!1?0:Date.now(),l=null,f=a.apply(u,c),l||(u=c=null)},p=function(){var v=Date.now();!h&&s.leading===!1&&(h=v);var g=o-(v-h);return u=this,c=arguments,g<=0||g>o?(l&&(clearTimeout(l),l=null),h=v,f=a.apply(u,c),l||(u=c=null)):!l&&s.trailing!==!1&&(l=setTimeout(d,g)),f};return p.cancel=function(){clearTimeout(l),h=0,l=u=c=null},p}},function(r,n,i){var a=i(1);n.a=function(o){return Object(a.a)(o)?Array.prototype.slice.call(o):[]}},function(r,n,i){var a={};n.a=function(o){return o=o||"g",a[o]?a[o]+=1:a[o]=1,o+a[o]}},function(r,n,i){n.a=function(){}},function(r,n,i){n.a=function(a){return a}},function(r,n,i){n.a=s;var a=i(7),o=i(1);function s(l){return Object(a.a)(l)?0:Object(o.a)(l)?l.length:Object.keys(l).length}},function(r,n,i){n.a=a;function a(){for(var o=0,s=0,l=arguments.length;s<l;s++)o+=arguments[s].length;for(var u=Array(o),c=0,s=0;s<l;s++)for(var f=arguments[s],h=0,d=f.length;h<d;h++,c++)u[c]=f[h];return u}},function(r,n,i){var a=i(4),o=i(9),s=i(34);n.a=function(l,u,c,f){f===void 0&&(f="...");var h=16,d=Object(s.a)(f,c),p=Object(a.a)(l)?l:Object(o.a)(l),v=u,g=[],m,y;if(Object(s.a)(l,c)<=u)return l;for(;m=p.substr(0,h),y=Object(s.a)(m,c),!(y+d>v&&y>v);)if(g.push(m),v-=y,p=p.substr(h),!p)return g.join("");for(;m=p.substr(0,1),y=Object(s.a)(m,c),!(y+d>v);)if(g.push(m),v-=y,p=p.substr(1),!p)return g.join("");return""+g.join("")+f}},function(r,n,i){var a=function(){function o(){this.map={}}return o.prototype.has=function(s){return this.map[s]!==void 0},o.prototype.get=function(s,l){var u=this.map[s];return u===void 0?l:u},o.prototype.set=function(s,l){this.map[s]=l},o.prototype.clear=function(){this.map={}},o.prototype.delete=function(s){delete this.map[s]},o.prototype.size=function(){return Object.keys(this.map).length},o}();n.a=a},function(r,n){function i(c,f,h,d){d===void 0&&(d=[]);var p=this;p.w=c||0,p.h=f||0,p.y=h||0,p.x=0,p.c=d||[],p.cs=d.length,p.prelim=0,p.mod=0,p.shift=0,p.change=0,p.tl=null,p.tr=null,p.el=null,p.er=null,p.msel=0,p.mser=0}i.fromNode=function(c,f){if(!c)return null;var h=[];return c.children.forEach(function(d){h.push(i.fromNode(d,f))}),f?new i(c.height,c.width,c.x,h):new i(c.width,c.height,c.y,h)};function a(c,f,h){h?c.y+=f:c.x+=f,c.children.forEach(function(d){a(d,f,h)})}function o(c,f){var h=f?c.y:c.x;return c.children.forEach(function(d){h=Math.min(o(d,f),h)}),h}function s(c,f){var h=o(c,f);a(c,-h,f)}function l(c,f,h){h?f.y=c.x:f.x=c.x,c.c.forEach(function(d,p){l(d,f.children[p],h)})}function u(c,f,h){h===void 0&&(h=0),f?(c.x=h,h+=c.width):(c.y=h,h+=c.height),c.children.forEach(function(d){u(d,f,h)})}r.exports=function(c,f){f===void 0&&(f={});var h=f.isHorizontal;function d(M){if(M.cs===0){p(M);return}d(M.c[0]);for(var T=C(w(M.c[0].el),0,null),O=1;O<M.cs;++O){d(M.c[O]);var N=w(M.c[O].er);v(M,O,T),T=C(N,O,T)}S(M),p(M)}function p(M){M.cs===0?(M.el=M,M.er=M,M.msel=M.mser=0):(M.el=M.c[0].el,M.msel=M.c[0].msel,M.er=M.c[M.cs-1].er,M.mser=M.c[M.cs-1].mser)}function v(M,T,O){for(var N=M.c[T-1],R=N.mod,B=M.c[T],F=B.mod;N!==null&&B!==null;){w(N)>O.low&&(O=O.nxt);var D=R+N.prelim+N.w-(F+B.prelim);D>0&&(F+=D,g(M,T,O.index,D));var L=w(N),G=w(B);L<=G&&(N=y(N),N!==null&&(R+=N.mod)),L>=G&&(B=m(B),B!==null&&(F+=B.mod))}!N&&B?b(M,T,B,F):N&&!B&&x(M,T,N,R)}function g(M,T,O,N){M.c[T].mod+=N,M.c[T].msel+=N,M.c[T].mser+=N,_(M,T,O,N)}function m(M){return M.cs===0?M.tl:M.c[0]}function y(M){return M.cs===0?M.tr:M.c[M.cs-1]}function w(M){return M.y+M.h}function b(M,T,O,N){var R=M.c[0].el;R.tl=O;var B=N-O.mod-M.c[0].msel;R.mod+=B,R.prelim-=B,M.c[0].el=M.c[T].el,M.c[0].msel=M.c[T].msel}function x(M,T,O,N){var R=M.c[T].er;R.tr=O;var B=N-O.mod-M.c[T].mser;R.mod+=B,R.prelim-=B,M.c[T].er=M.c[T-1].er,M.c[T].mser=M.c[T-1].mser}function S(M){M.prelim=(M.c[0].prelim+M.c[0].mod+M.c[M.cs-1].mod+M.c[M.cs-1].prelim+M.c[M.cs-1].w)/2-M.w/2}function E(M,T){T+=M.mod,M.x=M.prelim+T,k(M);for(var O=0;O<M.cs;O++)E(M.c[O],T)}function _(M,T,O,N){if(O!==T-1){var R=T-O;M.c[O+1].shift+=N/R,M.c[T].shift-=N/R,M.c[T].change-=N-N/R}}function k(M){for(var T=0,O=0,N=0;N<M.cs;N++)T+=M.c[N].shift,O+=T+M.c[N].change,M.c[N].mod+=O}function C(M,T,O){for(;O!==null&&M>=O.low;)O=O.nxt;return{low:M,index:T,nxt:O}}u(c,h);var A=i.fromNode(c,h);return d(A),E(A,0),l(A,c,h),s(c,h),c}},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(121),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return y.rootNode.width=0,u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){var a=i(6);function o(u,c){c===void 0&&(c=[]);var f=this;f.x=f.y=0,f.leftChild=f.rightChild=null,f.height=0,f.children=c}var s={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function l(u,c,f){f?(c.x=u.x,c.y=u.y):(c.x=u.y,c.y=u.x),u.children.forEach(function(h,d){l(h,c.children[d],f)})}r.exports=function(u,c){c===void 0&&(c={}),c=a.assign({},s,c);var f=0;function h(m){if(!m)return null;m.width=0,m.depth&&m.depth>f&&(f=m.depth);var y=m.children,w=y.length,b=new o(m.height,[]);return y.forEach(function(x,S){var E=h(x);b.children.push(E),S===0&&(b.leftChild=E),S===w-1&&(b.rightChild=E)}),b.originNode=m,b.isLeaf=m.isLeaf(),b}function d(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=f;else{var y=m.children.map(function(b){return d(b)}),w=Math.min.apply(null,y);m.drawingDepth=w-1}return m.drawingDepth}var p;function v(m){m.x=m.drawingDepth*c.rankSep,m.isLeaf?(m.y=0,p&&(m.y=p.y+p.height+c.nodeSep,m.originNode.parent!==p.originNode.parent&&(m.y+=c.subTreeSep)),p=m):(m.children.forEach(function(y){v(y)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var g=h(u);return d(g),v(g),l(g,u,c.isHorizontal),u}},function(r,n,i){function a(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,o(g,m)}function o(g,m){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,b){return w.__proto__=b,w},o(g,m)}var s=i(11),l=i(123),u=i(35),c=i(6),f=["LR","RL","H"],h=f[0],d=function(g){a(m,g);function m(){return g.apply(this,arguments)||this}var y=m.prototype;return y.execute=function(){var b=this,x=b.options,S=b.rootNode;x.isHorizontal=!0;var E=x.indent,_=E===void 0?20:E,k=x.dropCap,C=k===void 0?!0:k,A=x.direction,M=A===void 0?h:A,T=x.align;if(M&&f.indexOf(M)===-1)throw new TypeError("Invalid direction: "+M);if(M===f[0])l(S,_,C,T);else if(M===f[1])l(S,_,C,T),S.right2left();else if(M===f[2]){var O=u(S,x),N=O.left,R=O.right;l(N,_,C,T),N.right2left(),l(R,_,C,T);var B=N.getBoundingBox();R.translate(B.width,0),S.x=R.x-S.width/2}return S},m}(s),p={};function v(g,m){return m=c.assign({},p,m),new d(g,m).execute()}r.exports=v},function(r,n,i){var a=i(6);function o(s,l,u,c,f){var h=typeof u=="function"?u(s):u*s.depth;if(!c)try{if(s.id===s.parent.children[0].id){s.x+=h,s.y=l?l.y:0;return}}catch{}if(s.x+=h,l){if(s.y=l.y+a.getHeight(l,s,f),l.parent&&s.parent.id!==l.parent.id){var d=l.parent,p=d.y+a.getHeight(d,s,f);s.y=p>s.y?p:s.y}}else s.y=0}r.exports=function(s,l,u,c){var f=null;s.eachNode(function(h){o(h,f,l,u,c),f=h})}},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(125),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){var a=i(6);function o(u,c){var f=0;return u.children.length?u.children.forEach(function(h){f+=o(h,c)}):f=u.height,u._subTreeSep=c.getSubTreeSep(u.data),u.totalHeight=Math.max(u.height,f)+2*u._subTreeSep,u.totalHeight}function s(u){var c=u.children,f=c.length;if(f){c.forEach(function(m){s(m)});var h=c[0],d=c[f-1],p=d.y-h.y+d.height,v=0;if(c.forEach(function(m){v+=m.totalHeight}),p>u.height)u.y=h.y+p/2-u.height/2;else if(c.length!==1||u.height>v){var g=u.y+(u.height-p)/2-h.y;c.forEach(function(m){m.translate(0,g)})}else u.y=(h.y+h.height/2+d.y+d.height/2)/2-u.height/2}}var l={getSubTreeSep:function(){return 0}};r.exports=function(u,c){c===void 0&&(c={}),c=a.assign({},l,c),u.parent={x:0,width:0,height:0,y:0},u.BFTraverse(function(f){f.x=f.parent.x+f.parent.width}),u.parent=null,o(u,c),u.startY=0,u.y=u.totalHeight/2-u.height/2,u.eachNode(function(f){var h=f.children,d=h.length;if(d){var p=h[0];if(p.startY=f.startY+f._subTreeSep,d===1)p.y=f.y+f.height/2-p.height/2;else{p.y=p.startY+p.totalHeight/2-p.height/2;for(var v=1;v<d;v++){var g=h[v];g.startY=h[v-1].startY+h[v-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),s(u)}}])})})(She);var Jft=She.exports;const oM=Ms(Jft);var dX=Ta.traverseTree,eht=function(e,r){var n;return e?Pt(e)?n=function(a){return e}:n=e:n=function(a){return r||1},n},tht=function(e,r){var n=[],i=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<r.length;o++){var l=r[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<e.length;o++){var c=n.length,f=i[o],h=f.length;n[o*4+2]=c,n[o*4+3]=f.length,u=Math.max(u,f.length);for(var d=0;d<h;++d){var p=f[d];n.push(+p)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},rht=function(e,r,n){var i=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var l=e[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<r.length;s++){var u=r[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var c=0;for(s=0;s<e.length;s++){var f=i.length,h=a[s],d=h.length;i[s*4+2]=f,i[s*4+3]=d/2,c=Math.max(c,d/2);for(var p=0;p<d;++p){var v=h[p];i.push(+v)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},nht=function(e,r,n,i){var a=[],o=[],s={},l=0;for(l=0;l<e.length;l++){var u=e[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<r.length;l++){var c=r[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<e.length;l++){var h=a.length,d=o[l],p=d.length;a[l*4+2]=h+1048576*p/4,a[l*4+3]=0,f=Math.max(f,p/4);for(var v=0;v<p;++v){var g=d[v];a.push(+g)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},iht=function(e,r){var n=[],i=e.length,a={};return r.forEach(function(o){e.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},aht=function(e){for(var r=[],n=e.length,i=e[0].length,a=function(l){e.forEach(function(u,c){if(r.push(u[l]),c===n-1)for(;r.length%4!==0;)r.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(r)},oht=function(e,r){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";r&&n.indexOf(r)>=0&&(s="x",o="y");var l=0;dX(e,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||dX(e,function(f){var h=(f[s]-i[s])/c*(Math.PI*2-u)+u,d=Math.abs(o==="x"?f.x-e.x:f.y-e.y);return f.x=d*Math.cos(h),f.y=d*Math.sin(h),!0}),e};const sht=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:aht,attributesToTextureData:iht,buildTextureData:tht,buildTextureDataWithOneEdgeAttr:rht,buildTextureDataWithTwoEdgeAttr:nht,proccessToFunc:eht,radialLayout:oht},Symbol.toStringTag,{value:"Module"}));var Ehe=function t(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var r=document.createElement("div");return r.id="webgl-error-message",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",this.webgl||(r.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),r},addGetWebGLMessage:function(r){r=r||{};var n=r.parent!==void 0?r.parent:document.body,i=r.id!==void 0?r.id:"oldie",a=t().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}};const lht=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:Ehe},Symbol.toStringTag,{value:"Module"}));var _he=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const uht=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:_he},Symbol.toStringTag,{value:"Module"}));var zf=z(z(z(z(z({},Ta),PXe),sht),lht),uht),cht=zf.radialLayout,fht=function(){function t(e){this.type=e.type,this.radial=e.radial,this.config=e}return t.prototype.init=function(e){var r=this;if(this.data=e,this.radial){this.layoutMethod=function(n){var i=oM[r.type](n,r.config);return cht(i),i};return}this.layoutMethod=function(n){return oM[r.type](n,r.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(e){return this.init(e),this.execute()},t}();Or.registerLayout("grid",Or.GridLayout);Or.registerLayout("random",Or.RandomLayout);Or.registerLayout("force",Or.ForceLayout);Or.registerLayout("circular",Or.CircularLayout);Or.registerLayout("dagre",Or.DagreLayout);Or.registerLayout("dagreCompound",Or.DagreCompoundLayout);Or.registerLayout("radial",Or.RadialLayout);Or.registerLayout("concentric",Or.ConcentricLayout);Or.registerLayout("mds",Or.MDSLayout);Or.registerLayout("fruchterman",Or.FruchtermanLayout);Or.registerLayout("fruchterman-gpu",Or.FruchtermanGPULayout);Or.registerLayout("gForce",Or.GForceLayout);Or.registerLayout("force2",Or.Force2Layout);Or.registerLayout("gForce-gpu",Or.GForceGPULayout);Or.registerLayout("comboForce",Or.ComboForceLayout);Or.registerLayout("comboCombined",Or.ComboCombinedLayout);Or.registerLayout("forceAtlas2",Or.ForceAtlas2Layout);var hht=function(e,r){r.isCustomLayout=!0,Or.Layouts[e]=Or.registerLayout(e,r)},dht=function(){function t(e,r){var n=e.toString(),i=new Blob(["importScripts('".concat(r,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return t}(),pht=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function r(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,h=c.edges,d=c.layoutCfg,p=d===void 0?{}:d,v=p.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(v," not found")});break}var m;p.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),m==null||m.destroy()},m=new g(p),m.init({nodes:f,edges:h}),m.execute();break}case i.GPURUN:{var y=s.data,w=y.nodes,h=y.edges,b=y.layoutCfg,p=b===void 0?{}:b,x=y.canvas,v=p.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(v," not found")});break}if(v.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout ".concat(v," does not support GPU")});break}var S=new g(p);S.init({nodes:w,edges:h}),S.executeWithWorker(x,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new dht(r,e);return n},Ng={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function EN(t){"@babel/helpers - typeof";return EN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EN(t)}var pX=function(e){return setTimeout(e,16)},vX=function(e){return clearTimeout(e)},_E={requestAnimationFrame:function(e){var r=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||pX;return r(e)},cancelAnimationFrame:function(e){var r=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||vX;return r(e)}},vht=["fruchterman","gForce"],ght=["force","grid","circular"],mht=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this;return n.graph=r,n.layoutCfg=r.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=pht(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var r=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,r.requestId&&(_E.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(_E.cancelAnimationFrame(r.requestId2),r.requestId2=null))},e.prototype.execLayoutMethod=function(r,n){var i=this;return new Promise(function(a,o){return is(i,void 0,void 0,function(){var s,l,u,c,f,v,h,d,p,v,g;return as(this,function(m){switch(m.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(Che(l)?l="".concat(l,"-gpu"):console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU."))),Ta.isForce(l)?(u=r.onTick,c=r.animate,f=c===void 0&&(l==="force"||l==="force2"),v=function(){u&&u(),(c||f)&&s.refreshPositions()},r.tick=v):(l==="comboForce"||l==="comboCombined")&&(r.comboTrees=s.get("comboTrees")),h=!1;try{d=new Or.Layouts[l](r),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=d}catch{console.warn("The layout method: '".concat(l,"' does not exist! Please specify it first.")),o()}return h=d.enableTick,h&&(p=r.onTick,v=function(){p&&p(),s.refreshPositions()},d.tick=v),g=this.filterLayoutData(this.data,r),bht(g,n),d.init(g),s.emit("beforesublayout",{type:l}),[4,d.execute()];case 1:return m.sent(),d.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(r,n){var i=this;return new Promise(function(a,o){return is(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return as(this,function(p){switch(p.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},Ta.isForce(l)&&(u=n.onTick,c=n.animate,f=c===void 0&&(l==="force"||l==="force2"),h=function(){u==null||u(),(c||f)&&s.refreshPositions()},n.tick=h),d=this.filterLayoutData(this.data,n),r.init(d),r.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,r.execute()];case 1:return p.sent(),r.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(r){var n=this,i,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,l=o.hiddenNodes;if(!s)return!1;var u=a.get("width"),c=a.get("height"),f={};Object.assign(f,{width:u,height:c,center:[u/2,c/2]},this.layoutCfg),this.layoutCfg=f;var h=f.type,d=!1;(i=this.layoutMethods)===null||i===void 0||i.forEach(function(x){var S;return d=!!(!((S=x.nodes)===null||S===void 0)&&S.length)||d});var p=this.destoryLayoutMethods();a.emit("beforelayout");var v=Promise.resolve();d&&h&&(p==null?void 0:p.length)===1&&p[0]===h?this.tweakInit():v=this.initPositions(f.center,s);var g=this.initPositions(f.center,l);g.then(),this.isGPU=gX(f,h);var m=f.onLayoutEnd,y=f.layoutEndFormatted,w=f.adjust;if(y||(f.layoutEndFormatted=!0,f.onAllLayoutEnd=function(){return is(n,void 0,void 0,function(){return as(this,function(x){switch(x.label){case 0:return m&&m(s),this.refreshLayout(),w&&f.pipes?[4,this.adjustPipesBox(this.data,w)]:[3,2];case 1:x.sent(),this.refreshLayout(),x.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),f.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;var b=!1;return f.type?(b=!0,v=v.then(function(){return is(n,void 0,void 0,function(){return as(this,function(x){switch(x.label){case 0:return[4,this.execLayoutMethod(f,0)];case 1:return[2,x.sent()]}})})})):f.pipes&&(b=!0,f.pipes.forEach(function(x,S){v=v.then(function(){return is(n,void 0,void 0,function(){return as(this,function(E){switch(E.label){case 0:return[4,this.execLayoutMethod(x,S)];case 1:return[2,E.sent()]}})})})})),b?v.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd(),r&&r()}).catch(function(x){console.warn("graph layout failed,",x)}):(a.refreshPositions(),r==null||r()),!1}},e.prototype.tweakInit=function(){var r=this,n=r.data,i=r.graph,a=n.nodes,o=n.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var f=c.x,h=c.y;!isNaN(f)&&!isNaN(h)&&(s[c.id]={x:f,y:h},c.mass=c.mass||2)}),o.forEach(function(c){var f=c.source,h=c.target,d=s[f],p=s[h];!d&&p?s[f]={x:p.x+(Math.random()-.5)*80,y:p.y+(Math.random()-.5)*80}:!p&&d&&(s[h]={x:d.x+(Math.random()-.5)*80,y:d.y+(Math.random()-.5)*80})});var l=i.get("width"),u=i.get("height");a.forEach(function(c){var f=s[c.id]||{x:l/2+(Math.random()-.5)*20,y:u/2+(Math.random()-.5)*20};c.x=f.x,c.y=f.y})}},e.prototype.initWithPreset=function(r,n){var i=this;return new Promise(function(a,o){return is(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return as(this,function(p){switch(p.label){case 0:return s=this,l=s.layoutCfg,u=s.data,c=l.preset,!(c!=null&&c.type)||!Or.Layouts[c==null?void 0:c.type]?(n==null||n(),a(),[2,!1]):(f=gX(c,c.type),h=f?"".concat(c.type,"-gpu"):c.type,d=new Or.Layouts[h](c),delete l.preset,d.init(u),[4,d.execute()]);case 1:return p.sent(),r==null||r(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(r,n){var i=this,a=this,o=a.layoutCfg,s=a.graph,l=this.getWorker(),u=this.workerData;if(!l)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),f=!1;if(o.type)f=!0,c=c.then(function(){return i.runWebworker(l,r,o)});else if(o.pipes){f=!0;for(var h=function(m){c=c.then(function(){return i.runWebworker(l,r,m)})},d=0,p=o.pipes;d<p.length;d++){var v=p[d];h(v)}}return f&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),n==null||n()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(r,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,h=yht(i,function(p){return typeof p!="function"});if(!f)r.postMessage({type:Ng.RUN,nodes:l,edges:u,layoutCfg:h});else{var d=c.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),r.postMessage({type:Ng.GPURUN,nodes:l,edges:u,layoutCfg:h,canvas:d},[d])}return new Promise(function(p,v){r.onmessage=function(g){a.handleWorkerMessage(p,v,g,s,i)}})},e.prototype.handleWorkerMessage=function(r,n,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,h=function(){o.onTick&&o.onTick()};switch(f){case Ng.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=_E.requestAnimationFrame(function(){Q3(a,c),l.refreshPositions(),h(),c.currentTick===c.totalTicks?r():u.currentTick===c.totalTicks&&(u.requestId2=_E.requestAnimationFrame(function(){Q3(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,h(),r()})),u.requestId=null}));break;case Ng.END:u.currentTick==null&&(Q3(a,c),r());break;case Ng.GPUEND:u.currentTick==null&&(wht(a,c),r());break;case Ng.ERROR:console.warn("Web-Worker layout error!",c.message),n();break;default:n();break}},e.prototype.updateLayoutCfg=function(r){var n=this,i=this,a=i.graph,o=i.layoutMethods;if(!(!a||a.get("destroyed"))){var s=r.disableTriggerLayout,l=wi(r,["disableTriggerLayout"]),u=$t({},this.layoutCfg,l);if(this.layoutCfg=u,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(l.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),f=!1;(o==null?void 0:o.length)===1?(f=!0,c=c.then(function(){return is(n,void 0,void 0,function(){return as(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,h.sent()]}})})})):o!=null&&o.length&&(f=!0,o.forEach(function(h,d){var p=u.pipes[d];c=c.then(function(){return is(n,void 0,void 0,function(){return as(this,function(v){switch(v.label){case 0:return[4,this.updateLayoutMethod(h,p)];case 1:return[2,v.sent()]}})})})})),f&&c.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(h){console.warn("layout failed",h)})}}}},e.prototype.adjustPipesBox=function(r,n){var i=this;return new Promise(function(a){var o=r.nodes;o!=null&&o.length||a(),ght.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:i.layoutCfg.center,nodeSize:function(p){return Math.max(p.height,p.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=Ir(c);s.onLayoutEnd=function(){c==null||c.forEach(function(d,p){var v,g,m,y=d.x-((v=f[p])===null||v===void 0?void 0:v.x),w=d.y-((g=f[p])===null||g===void 0?void 0:g.y);(m=u[p])===null||m===void 0||m.forEach(function(b){b.x+=y,b.y+=w})}),a()};var h=new Or.Layouts[n](s);h.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var r=this.worker;r&&(r.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(mle);function Q3(t,e){for(var r=t.nodes,n=e.nodes,i=r.length,a=0;a<i;a++){var o=r[a];o.x=n[a].x,o.y=n[a].y}}function yht(t,e){var r={};return t&&EN(t)==="object"?(Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n])}),r):t}function wht(t,e){for(var r=t.nodes,n=e.vertexEdgeData,i=r.length,a=0;a<i;a++){var o=r[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function bht(t,e){var r;if(!((r=t==null?void 0:t.nodes)===null||r===void 0)&&r.length){var n=t.nodes;n.forEach(function(i){i.layoutOrder=e})}}function Che(t){return vht.includes(t)}function gX(t,e){var r=e;e&&e.split("-")[1]==="gpu"&&(r=e.split("-")[0],t.gpuEnabled=!0);var n=!1;return t.gpuEnabled&&(n=!0,Ehe().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!Che(r)&&(console.warn("The '".concat(r,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var mX=yl,xht="svg",khe=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return e.prototype.initLayoutController=function(){var r=new mht(this);this.set({layoutController:r})},e.prototype.initEventController=function(){var r=new zXe(this);this.set({eventController:r})},e.prototype.initCanvas=function(){var r=this.get("container");if(typeof r=="string"&&(r=document.getElementById(r),this.set("container",r)),!r)throw new Error("invalid container");var n=r.clientWidth,i=r.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===xht)l=new tw({container:r,width:a,height:o});else{var u={container:r,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c,window.devicePixelRatio=c),l=new nf(u)}this.set("canvas",l)},e.prototype.initPlugins=function(){var r=this;Ce(r.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(r)})},e.prototype.downloadImageWatermark=function(r,n,i,a){return is(this,void 0,void 0,function(){var o,s,l;return as(this,function(u){switch(u.label){case 0:return o=r.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=f,n.fill(),c("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(r,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),h=s||c.get("el"),d="";r||(r="image/png"),setTimeout(function(){return is(l,void 0,void 0,function(){var p,v,g,m,y,w,b,x,S,E;return as(this,function(_){switch(_.label){case 0:return f!=="svg"?[3,1]:(p=h.cloneNode(!0),v=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",v),g.replaceChild(p,g.documentElement),m=new XMLSerializer().serializeToString(g),d="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(m)),[3,4]);case 1:return y=void 0,w=h.getContext("2d"),b=a||this.get("width"),x=o||this.get("height"),S=void 0,u?[4,this.downloadImageWatermark(u,w,b,x)]:[3,3];case 2:_.sent(),_.label=3;case 3:if(n){E=typeof window<"u"?window.devicePixelRatio:1;try{y=w.getImageData(0,0,b*E,x*E),S=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=n,w.fillRect(0,0,b,x)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}d=h.toDataURL(r),n&&(w.clearRect(0,0,b,x),w.putImageData(y,0,0),w.globalCompositeOperation=S),_.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(r,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");r||(r="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(f))}else{var h=void 0,d=o.getContext("2d"),p=Math.max(this.get("width"),500),v=Math.max(this.get("height"),500),g=void 0;if(n){var m=typeof window<"u"&&window.devicePixelRatio||1;try{h=d.getImageData(0,0,p*m,v*m),g=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=n,d.fillRect(0,0,p,v)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(r),n&&(d.clearRect(0,0,p,v),d.putImageData(h,0,0),d.globalCompositeOperation=g)}return s},e.prototype.toFullDataURL=function(r,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=wn('<div id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?Pt(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=o+f[0]+f[2],d=s+f[1]+f[3],p={container:u,height:h,width:d,quickHit:!0},v=l==="svg"?new tw(p):new nf(p),g=this.get("group"),m=g.clone(),y=Ir(m.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var w=(a.maxX+a.minX)/2,b=(a.maxY+a.minY)/2;y=mX(y,[["t",-w,-b],["t",s/2+f[3],o/2+f[0]]]),m.resetMatrix(),m.setMatrix(y),v.add(m);var x=v.get("el"),S="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var E=x.cloneNode(!0),_=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_);k.replaceChild(E,k.documentElement);var C=new XMLSerializer().serializeToString(k);S="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(C))}else{var A=void 0,M=x.getContext("2d"),T=void 0;if(c){var O=typeof window<"u"?window.devicePixelRatio:1;try{A=M.getImageData(0,0,d*O,h*O),T=M.globalCompositeOperation,M.globalCompositeOperation="destination-over",M.fillStyle=c,M.fillRect(0,0,d,h)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}S=x.toDataURL(n),c&&(M.clearRect(0,0,d,h),M.putImageData(A,0,0),M.globalCompositeOperation=T)}r&&r(S)},16)},e.prototype.downloadFullImage=function(r,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=wn('<div id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?Pt(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var p=s+d[0]+d[2],v=l+d[1]+d[3];if(f){var g=this.get("graphWaterMarker").cfg||{},m=g.width,y=g.height;p=Math.ceil(p/y)*y,v=Math.ceil(v/m)*m}var w={container:c,height:p,width:v},b=u==="svg"?new tw(w):new nf(w),x=this.get("group"),S=NXe(x),E=Ir(S.getMatrix());E||(E=[1,0,0,0,1,0,0,0,1]);var _=(o.maxX+o.minX)/2,k=(o.maxY+o.minY)/2;E=mX(E,[["t",-_,-k],["t",l/2+d[3],s/2+d[0]]]),S.resetMatrix(),S.setMatrix(E),b.add(S);var C=b.get("el");n||(n="image/png"),this.asyncToDataUrl(n,h,function(A){var M=document.createElement("a"),T=(r||"graph")+(u==="svg"?".svg":".".concat(n.split("/")[1]));a.dataURLToImage(A,u,M,T);var O=document.createEvent("MouseEvents");O.initEvent("click",!1,!1),M.dispatchEvent(O)},v,p,C)},e.prototype.downloadImage=function(r,n,i){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(r||"graph")+(l==="svg"?".svg":".".concat(n.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(n,i,function(f){a.dataURLToImage(f,l,c,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},e.prototype.dataURLToImage=function(r,n,i,a){if(!r||r==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=r.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var h=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=a,i.href=r})},e.prototype.addPlugin=function(r){var n=this;r.destroyed||(n.get("plugins").push(r),r.initPlugin(n))},e.prototype.removePlugin=function(r){var n=this.get("plugins"),i=n.indexOf(r);i>=0&&(r.destroyPlugin(),n.splice(i,1))},e.prototype.setImageWaterMarker=function(r,n){r===void 0&&(r=Kp.waterMarkerImage);var i=this.get("container");Ve(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=cn({},Kp.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!r){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new nf(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var p=a.get("context"),v=c.rotate,g=c.x,m=c.y;p.rotate(-v*Math.PI/180);var y=new Image;y.crossOrigin="anonymous",y.src=r,y.onload=function(){if(p.drawImage(y,g,m,c.width,c.height),p.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var w=document.querySelector(".g6-graph-watermarker");w||(w=document.createElement("div"),w.className="g6-graph-watermarker"),w.className="g6-graph-watermarker",a.destroyed||(w.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(w))}}},e.prototype.setTextWaterMarker=function(r,n){var i=this.get("container");Ve(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=cn({},Kp.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!(r!=null&&r.length)){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new nf(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var p=a.get("context"),v=c.rotate,g=c.fill,m=c.fontFamily,y=c.fontSize,w=c.baseline,b=c.x,x=c.y,S=c.lineHeight;p.rotate(-v*Math.PI/180),p.font="".concat(y,"px ").concat(m),p.fillStyle=g,p.textBaseline=w;for(var E=Ve(r)?[r]:r,_=E.length-1;_>=0;_--)p.fillText(E[_],b,x+_*S);if(p.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var k=document.querySelector(".g6-graph-watermarker");k||(k=document.createElement("div"),k.className="g6-graph-watermarker"),k.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(k)}},e.prototype.destroy=function(){var r,n,i,a;Ce(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(l){var u=l.parentElement;u&&u.removeChild(l)}}(r=this.get("eventController"))===null||r===void 0||r.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),t.prototype.destroy.call(this)},e}(dle);function _N(t){"@babel/helpers - typeof";return _N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_N(t)}function Mhe(t,e){if(e===void 0&&(e=new WeakMap),t===null)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if(_N(t)!=="object")return t;if(e.get(t))return e.get(t);var r=Array.isArray(t)?[]:{};e.set(t,r);for(var n in t)t.hasOwnProperty(n)&&t[n]!==void 0&&(r[n]=Mhe(t[n],e));return r}function Sht(t){try{return structuredClone(t)}catch{return Mhe(t)}}var Eht=zf.radialLayout,Z3=zf.traverseTree,_ht=function(t){lr(e,t);function e(r){var n=t.call(this,r)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return e.prototype.getLayout=function(){var r=this.get("layout");return r?typeof r=="function"?r:(r.type||(r.type="dendrogram"),r.direction||(r.direction=r.type==="indented"?"LR":"TB"),r.radial?function(n){var i=oM[r.type](n,r);return Eht(i),i}:function(n){return oM[r.type](n,r)}):null},e.indexOfChild=function(r,n){var i=-1;return Ce(r,function(a,o){if(n===a.id)return i=o,!1}),i},e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.animate=!0,r},e.prototype.innerAddChild=function(r,n,i){var a=this,o=r.data;o&&(o.x=r.x,o.y=r.y,o.depth=r.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:"".concat(n.get("id"),":").concat(s.get("id"))},!1)}return Ce(r.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},e.prototype.innerUpdateChild=function(r,n,i){var a=this,o=a.findById(r.id);if(!o){a.innerAddChild(r,n,i);return}Ce(r.children||[],function(p){a.innerUpdateChild(p,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();e.indexOfChild(r.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:r.x,y:r.y},i),s.splice(u,1))}}var f,h;o.get("originAttrs")&&(f=o.get("originAttrs").x,h=o.get("originAttrs").y);var d=o.getModel();i&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",Object.assign(d,r.data)),(f!==r.x||h!==r.y)&&o.updatePosition({x:r.x,y:r.y})},e.prototype.innerRemoveChild=function(r,n,i){var a=this,o=a.findById(r);if(o)if(Ce(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(r,n){n===void 0&&(n=!0);var i=this;this.getNodes().map(function(a){return i.clearItemStates(a)}),this.getEdges().map(function(a){return i.clearItemStates(a)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:r||i.get("data")}),r?(i.data(r),i.render(!1)):i.layout(this.get("fitView"))},e.prototype.changeLayout=function(r){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(r)},e.prototype.updateLayout=function(r,n,i,a){a===void 0&&(a=!0);var o=this;if(!r){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:r}),o.set("layout",r),o.set("layoutMethod",o.getLayout()),o.layout(),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*l[0]+l[6],s.y=s.y*l[0]+l[7];var u=this.getGroup().getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY,p={x:(c+f)/2,y:(h+d)/2};n==="begin"&&(p.x=c,p.y=h),this.translate(s.x-p.x,s.y-p.y)}},e.prototype.refreshLayout=function(r){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(r)},e.prototype.layout=function(r){var n=this,i=this,a=i.get("data"),o=i.get("layoutMethod"),s=i.get("layout"),l=a;if(s!=null&&s.excludeInvisibles){a=Ir(i.get("data"));var u={};Z3(a,function(h){var d=h.children;if(!(d!=null&&d.length))return!0;for(var p=d.length-1;p>=0;p--){var v=n.findById(d[p].id),g=v?!v.isVisible():d[p].visible===!1;g&&(u[h.id]=u[h.id]||[],u[h.id].push({idx:p,child:d.splice(p,1)[0]}))}}),l=o?o(a,i.get("layout")):a,Z3(l,function(h){var d=u[h.id];if(d!=null&&d.length)for(var p=d.length-1;p>=0;p--){var v=d[p],g=v.idx,m=v.child;h.children.splice(g,0,m)}})}else l=o?o(a,i.get("layout")):a;var c=i.get("animate");if(i.emit("beforerefreshlayout",{data:a,layoutData:l}),i.emit("beforelayout"),i.innerUpdateChild(l,void 0,c),r){var f=i.get("viewController");f.fitView()}c?i.layoutAnimate(l):(i.refresh(),i.paint()),i.emit("afterrefreshlayout",{data:a,layoutData:l}),i.emit("afterlayout")},e.prototype.addChild=function(r,n,i){i===void 0&&(i=!0);var a=this;a.emit("beforeaddchild",{model:r,parent:n}),Ve(n)||(n=n.get("id"));var o=a.findDataById(n);if(o){o.children||(o.children=[]),o.children.push(r);var s=a.findById(n);s.refresh(),a.changeData(void 0,i)}},e.prototype.updateChildren=function(r,n,i){i===void 0&&(i=!0);var a=this,o=a.findById(n);if(!n||!o){console.warn("Update children failed! There is no node with id '".concat(n,"'"));return}var s=a.findDataById(n);s.children=r,o.refresh(),a.changeData(void 0,i)},e.prototype.updateChild=function(r,n,i){i===void 0&&(i=!0);var a=this;if(!n||!a.findById(n)){a.changeData(r,i);return}var o=a.findDataById(n),s=a.findById(r.id);if(o.children||(o.children=[]),!s)o.children.push(r);else{var l=e.indexOfChild(o.children,r.id);l>-1&&(o.children[l]=r)}var u=a.findById(n);u==null||u.refresh(),a.changeData(void 0,i)},e.prototype.removeChild=function(r,n){n===void 0&&(n=!0);var i=this,a=i.findById(r),o;if(a?o=a==null?void 0:a.get("parent"):o=i.getNodes().find(function(f){var h=f.getModel().children||[];return!!h.find(function(d){return d.id===r})}),o&&!o.destroyed){var s=o.get("id"),l=i.findDataById(s),u=l&&l.children||[],c=e.indexOfChild(u,r);u.splice(c,1),o.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(r,n){var i=this;if(n||(n=i.get("data")),r===n.id)return n;var a=null;return Ce(n.children||[],function(o){if(o.id===r)return a=o,!1;if(a=i.findDataById(r,o),a)return!1}),a},e.prototype.layoutAnimate=function(r,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:r}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Z3(r,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),n){var f=n(l,o,u,r);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),Ce(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){Ce(i.getNodes(),function(s){s.set("originAttrs",null)}),Ce(i.get("removeList"),function(s){i.removeItem(s,!1)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:r})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(r){r===void 0&&(r=!0);var n=this,i=n.get("data");if(!i||!ua(i)||!Object.keys(i).length)throw new Error("data must be defined first");n.clear(),r&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(r){t.prototype.data.call(this,r),this.set("originData",Sht(r))},e}(khe),Cht=function(){function t(e){this._cfgs=cn(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(e){var r=this;r.set("graph",e);var n=r.getEvents(),i={};Ce(n,function(a,o){var s=Ap(r,a);i[o]=s,e.on(o,s)}),this._events=i,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(e){var r;return(r=this._cfgs)===null||r===void 0?void 0:r[e]},t.prototype.set=function(e,r){this._cfgs[e]=r},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),r=this._events;Ce(r,function(n,i){e.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},t}();const Ho=Cht;var kht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yX="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Mht=function(t){kht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{img:yX,follow:!0}},e.prototype.init=function(){var r=this.get("graph"),n=r.get("container"),i=r.get("canvas").get("el"),a=this.get("img")||yX;a.includes("url(")||(a='url("'.concat(a,'")'));var o=wn(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=wn(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},e.prototype.positionInit=function(){var r=this.get("graph"),n=r.get("minZoom"),i=r.get("width"),a=r.get("height");Cr(this.get("container"),{width:"".concat(i,"px"),height:"".concat(a,"px")});var o=i*80/n,s=a*80/n;Cr(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(r){var n=this.get("gridContainer"),i=r.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(a?i[6]:"0",", ").concat(a?i[7]:"0",")");Cr(n,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var r=this.get("graph"),n=r.get("container"),i=this.get("container");n.removeChild(i)},e}(Ho);const Aht=Mht;var YF={exports:{}},wX=[],o1=[],Tht="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Ahe(t,e){if(e=e||{},t===void 0)throw new Error(Tht);var r=e.prepend===!0?"prepend":"append",n=e.container!==void 0?e.container:document.querySelector("head"),i=wX.indexOf(n);i===-1&&(i=wX.push(n)-1,o1[i]={});var a;return o1[i]!==void 0&&o1[i][r]!==void 0?a=o1[i][r]:(a=o1[i][r]=Iht(),r==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),t.charCodeAt(0)===65279&&(t=t.substr(1,t.length)),a.styleSheet?a.styleSheet.cssText+=t:a.textContent+=t,a}function Iht(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}YF.exports=Ahe;YF.exports.insertCss=Ahe;var Oht=YF.exports;const TT=Ms(Oht);var Dht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();typeof document<"u"&&TT(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Pht=function(t){Dht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>1</li>
            <li>2</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var r=this.get("className"),n=wn("<div class=".concat(r||"g6-component-contextmenu","></div>"));Cr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),Ve(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(r){var n=this;r.preventDefault();var i=this.get("itemTypes");if(r.item){if(r.item&&r.item.getType&&i.indexOf(r.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(a(r)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(r,l);Ve(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(_){c(_.target,r.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var h=l.get("width"),d=l.get("height"),p=o.getBoundingClientRect(),v=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,y=l.getContainer().offsetLeft,w=r.canvasX+y+v,b=r.canvasY+m+g;w+p.width>h&&(w=r.canvasX-p.width-v+y),b+p.height>d&&(b=r.canvasY-p.height-g+m),b<0&&(b=0),Cr(o,{top:"".concat(b,"px"),left:"".concat(w,"px"),visibility:"visible"});var x=this.get("trigger")==="click",S=function(_){if(x){x=!1;return}n.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},e.prototype.removeMenuEventListener=function(){var r=this.get("handleMenuClickWrapper"),n=this.get("handler");if(r){var i=this.get("menu");i.removeEventListener("click",r),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var r=this.get("menu");r&&Cr(r,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var r=this.get("menu");if(this.removeMenuEventListener(),r){var n=this.get("container");n||(n=this.get("graph").get("container")),Ve(n)&&(n=document.getElementById(n)),n.removeChild(r)}},e}(Ho);const Lht=Pht;var Rht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CN=function(){return CN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},CN.apply(this,arguments)},bX=Math.max,Nht=yl,Fht="default",Bht="keyShape",$ht="delegate",xX="svg",zht=function(t){Rht(e,t);function e(r){var n=t.call(this,r)||this;return n.handleUpdateCanvas=hb(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var r=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=wn(`
      <div
        class=`.concat(n.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(u||l),`
      </div>`)),f=0,h=0,d=!1,p=0,v=0,g=0,m=0,y=0,w=0,b=u||l?"mousedown":"dragstart";c.addEventListener(b,function(_){var k,C;if(_.dataTransfer){var A=new Image;A.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(C=(k=_.dataTransfer).setDragImage)===null||C===void 0||C.call(k,A,0,0);try{_.dataTransfer.setData("text/html","view-port-minimap")}catch{_.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,_.target===c){var M=c.style;p=parseInt(M.left,10),v=parseInt(M.top,10),g=parseInt(M.width,10),m=parseInt(M.height,10),!(g>i[0]||m>i[1])&&(w=a.getZoom(),y=r.get("ratio"),d=!0,f=_.clientX,h=_.clientY)}},!1);var x=function(k){if(!(!d||Dt(k.clientX)||Dt(k.clientY))){var C=f-k.clientX,A=h-k.clientY;(p-C<0||p-C+g>=i[0])&&(C=0),(v-A<0||v-A+m>=i[1])&&(A=0),p-=C,v-=A,Cr(c,{left:"".concat(p,"px"),top:"".concat(v,"px")}),a.translate(C*w/y,A*w/y),f=k.clientX,h=k.clientY}};!u&&!l&&c.addEventListener("drag",x,!1);var S=function(){d=!1,n.refresh=!0},E=u||l?"mouseup":"dragend";c.addEventListener(E,S,!1),s.addEventListener("mouseleave",S),s.addEventListener("mouseup",S),(u||l)&&s.addEventListener("mousemove",x,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var r=this.get("ratio"),n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),l=a.get("width")||s.scrollWidth||500,u=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),f=a.getPointByCanvas(l,u),h=this.get("viewport");h||this.initViewport();var d=(f.x-c.x)*r,p=(f.y-c.y)*r,v=c.x*r+n,g=c.y*r+i,m=v+d,y=g+p;v<0&&(d+=v,v=0),m>o[0]&&(d=d-(m-o[0])),g<0&&(p+=g,g=0),y>o[1]&&(p=p-(y-o[1])),this.set("ratio",r);var w="".concat(v,"px"),b="".concat(g,"px");Cr(h,{left:w,top:b,width:"".concat(d,"px"),height:"".concat(p,"px")})}},e.prototype.updateGraphShapes=function(){var r=this._cfgs.graph,n=this.get("canvas"),i=r.get("group");if(!i.destroyed){n.clear();var a;this.get("hideEdge")?(a=n.addGroup(),i.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=i.clone(),a.resetMatrix(),n.add(a));var o=r.get("renderer");o===xX&&this.updateVisible(a)}},e.prototype.updateVisible=function(r){var n=this;if(!r.isGroup()&&!r.get("visible"))r.hide();else{var i=r.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var r=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Ce(n.getEdges(),function(l){r.updateOneEdgeKeyShape(l,a)}),Ce(n.getNodes(),function(l){r.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){r.destroyed||(Ce(o,function(l){r.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),r.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(r,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[r.get("id")],o=r.getBBox(),s=r.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),r.isVisible()?a.show():a.hide(),a.exist=!0;var f=r.getModel().depth;isNaN(f)||a.set("zIndex",f),i[r.get("id")]=a,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(r,n){var i=this.get("itemMap")||{},a=i[r.get("id")],o=r.getBBox(),s=r.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?(u=Object.assign(l,u),a.toFront()):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),r.isVisible()?a.show():a.hide(),a.exist=!0;var f=r.getModel().depth;isNaN(f)||a.set("zIndex",f),i[r.get("id")]=a,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var r=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Ce(n.getEdges(),function(l){r.updateOneEdgeKeyShape(l,a)}),Ce(n.getNodes(),function(l){r.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){r.destroyed||(Ce(o,function(l){r.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),r.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var r=this.get("itemMap")||{},n=Object.keys(r);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=r[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete r[n[i]])}},e.prototype.updateOneEdgeKeyShape=function(r,n){var i=this.get("itemMap")||{},a=i[r.get("id")];if(a){var o=r.get("keyShape").attr("path");a.attr("path",o)}else a=r.get("keyShape").clone(),n.add(a);r.isVisible()?a.show():a.hide(),a.exist=!0,i[r.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(r,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[r.get("id")],s=r.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l),o.toFront()}else o=n.addShape("rect",{attrs:CN({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});r.isVisible()?o.show():o.hide(),o.exist=!0,a[r.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var r=this,n=r.get("graph"),i=r.get("size"),a=r.get("className"),o=r.get("container"),s=wn("<div class='".concat(a,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));Ve(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),r.set("container",s);var l=wn('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=n.get("renderer");c===xX?u=new tw({container:l,width:i[0],height:i[1]}):u=new nf({container:l,width:i[0],height:i[1]}),r.set("canvas",u),r.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var r=this.get("refresh");if(r){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Fht:this.updateGraphShapes();break;case Bht:this.updateKeyShapes();break;case $ht:this.updateDelegateShapes();break}var l=a.get("children")[0];if(l){l.resetMatrix();var u=l.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,h=c.width/f,d=c.height/f;Number.isFinite(u.width)&&(h=bX(u.width,h),d=bX(u.height,d)),h+=2*s,d+=2*s;var p=Math.min(i[0]/h,i[1]/d),v=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var y=(i[0]-(h-2*s)*p)/2,w=(i[1]-(d-2*s)*p)/2;v=Nht(v,[["t",g,m],["s",p,p],["t",y,w]]),l.setMatrix(v),this.set("ratio",p),this.set("totaldx",y+g*p),this.set("totaldy",w+m*p),this.set("dx",y),this.set("dy",w),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var r;(r=this.get("canvas"))===null||r===void 0||r.destroy();var n=this.get("container");n!=null&&n.parentNode&&n.parentNode.removeChild(n)},e}(Ho),jht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ou(t,e,r){var n=t.x-e.x,i=t.y-e.y;return!r||Math.abs(n)>r||Math.abs(i)>r?Math.sqrt(n*n+i*i):r}function Ght(t,e){return t.x*e.x+t.y*e.y}function SX(t,e){var r=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(r*r*e.source.x+r*(t.y-e.source.y)+t.x)/(r*r+1),i=r*(n-e.source.x)+e.source.y;return{x:n,y:i}}var Uht=function(t){jht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var r=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),r.refreshPositions()};this.set("tick",i)},e.prototype.bundling=function(r){var n=this;if(n.set("data",r),!n.isTicking()){var i=r.edges||[],a=r.nodes||[],o={},s=!1;if(a.forEach(function(b){(b.x===null||!b.y===null||b.x===void 0||!b.y===void 0)&&(s=!0),o[b.id]=b}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),c=n.divideEdges(l);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var h=n.get("cycles"),d=n.get("iterations"),p=n.get("iterRate"),v=n.get("lambda"),g=0;g<h;g++){for(var m=function(x){var S=[];i.forEach(function(E,_){if(E.source!==E.target){var k=o[E.source],C=o[E.target];S[_]=n.getEdgeForces({source:k,target:C},_,l,v);for(var A=0;A<l+1;A++)c[_][A].x+=S[_][A].x,c[_][A].y+=S[_][A].y}})},y=0;y<d;y++)m(y);v=v/2,l*=u,d*=p,c=n.divideEdges(l),n.set("edgePoints",c)}i.forEach(function(b,x){b.source!==b.target&&(b.type="polyline",b.controlPoints=c[x].slice(1,c[x].length-1))});var w=n.get("graph");w.refresh()}},e.prototype.updateBundling=function(r){var n=this,i=r.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(r).forEach(function(o){n.set(o,r[o])}),r.onTick){var a=this.get("graph");n.set("tick",function(){r.onTick(),a.refresh()})}n.bundling(i)},e.prototype.divideEdges=function(r){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){var u;(!o[l]||o[l]===void 0)&&(o[l]=[]);var c=a[s.source],f=a[s.target];if(r===1)o[l].push({x:c.x,y:c.y}),o[l].push({x:.5*(c.x+f.x),y:.5*(c.y+f.y)}),o[l].push({x:f.x,y:f.y});else{var h=0;!((u=o[l])===null||u===void 0)&&u.length?h=n.getEdgeLength(o[l]):h=Ou({x:c.x,y:c.y},{x:f.x,y:f.y});var d=h/(r+1),p=d,v=[{x:c.x,y:c.y}];o[l].forEach(function(g,m){if(m!==0){for(var y=Ou(g,o[l][m-1]);y>p;){var w=p/y,b={x:o[l][m-1].x,y:o[l][m-1].y};b.x+=w*(g.x-o[l][m-1].x),b.y+=w*(g.y-o[l][m-1].y),v.push(b),y-=p,p=d}p-=y}}),v.push({x:f.x,y:f.y}),o[l]=v}}),o},e.prototype.getEdgeLength=function(r){var n=0;return r.forEach(function(i,a){a!==0&&(n+=Ou(i,r[a-1]))}),n},e.prototype.getEdgeBundles=function(){var r=this,n=r.get("data"),i=n.edges||[],a=r.get("bundleThreshold"),o=r.get("nodeIdMap"),s=r.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(h,d){if(!(d<=u)){var p=o[h.source],v=o[h.target],g=r.getBundleScore({source:c,target:f},{source:p,target:v});g>=a&&(s[u].push(d),s[d].push(u))}})}),s},e.prototype.getBundleScore=function(r,n){var i=this;r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,r.length=Ou({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y}),n.length=Ou({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(r,n),o=i.getScaleScore(r,n),s=i.getPositionScore(r,n),l=i.getVisibilityScore(r,n);return a*o*s*l},e.prototype.getAngleScore=function(r,n){var i=Ght({x:r.vx,y:r.vy},{x:n.vx,y:n.vy});return i/(r.length*n.length)},e.prototype.getScaleScore=function(r,n){var i=(r.length+n.length)/2,a=2/(i/Math.min(r.length,n.length)+Math.max(r.length,n.length)/i);return a},e.prototype.getPositionScore=function(r,n){var i=(r.length+n.length)/2,a={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=Ou(a,o);return i/(i+s)},e.prototype.getVisibilityScore=function(r,n){var i=this.getEdgeVisibility(r,n),a=this.getEdgeVisibility(n,r);return i<a?i:a},e.prototype.getEdgeVisibility=function(r,n){var i=SX(n.source,r),a=SX(n.target,r),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2};return Math.max(0,1-2*Ou(o,s)/Ou(i,a))},e.prototype.getEdgeForces=function(r,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Ou(r.source,r.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var h={x:0,y:0},d=o.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},u),p=o.getElectrostaticForce(f,n);h.x=a*(d.x+p.x),h.y=a*(d.y+p.y),c.push(h)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(r,n){var i=r.pre.x+r.next.x-2*r.cur.x,a=r.pre.y+r.next.y-2*r.cur.y;return i*=n,a*=n,{x:i,y:a}},e.prototype.getElectrostaticForce=function(r,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][r].x-s[n][r].x,y:s[c][r].y-s[n][r].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var h=Ou(s[c][r],s[n][r]),d=1/h;u.x+=f.x*d,u.y+=f.y*d}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(Ho);const Wht=Uht;var Vht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kN=function(){return kN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},kN.apply(this,arguments)},CE=.05,EX={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Hht=function(t){Vht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Ir(EX),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var r;switch(this.get("trigger")){case"click":r={click:"magnify"};break;case"drag":r={click:"createDelegate"};break;default:r={mousemove:"magnify"};break}return r},e.prototype.init=function(){var r=this,n=r.get("r");r.set("cachedMagnifiedModels",[]),r.set("cachedOriginPositions",{}),r.set("r2",n*n);var i=r.get("d");r.set("molecularParam",(i+1)*n)},e.prototype.createDelegate=function(r){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(r),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(r){var n=this;if(!(!r||!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(r.clientX,r.clientY);r.originalEvent.wheelDelta<0?a=1-CE:a=1/(1-CE);var u=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.set("r2",f*f);var h=n.get("d");n.set("molecularParam",(h+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(r,l)}},e.prototype.scaleRByDrag=function(r){var n=this;if(r){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(r.clientX,r.clientY);r.x-i.x<0?o=1-CE:o=1/(1-CE);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,n.set("r",c),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(r,s),n.set("dragPrePos",{x:r.x,y:r.y})}},e.prototype.scaleDByWheel=function(r){var n=this;if(!(!r&&!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=0;r.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(r,f)}}},e.prototype.scaleDByDrag=function(r){var n=this,i=n.get("dragPrePos"),a=r.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(r)}n.set("dragPrePos",{x:r.x,y:r.y})},e.prototype.magnify=function(r,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),h=i.get("molecularParam"),d=a.getNodes(),p=d.length,v=n?{x:n.x,y:n.y}:{x:r.x,y:r.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(v=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(v.x+=g.x,v.y+=g.y),i.updateDelegate(v,u);for(var m=0;m<p;m++){var y=d[m].getModel(),w=y.x,b=y.y;if(!(isNaN(w)||isNaN(b))){var x=(w-v.x)*(w-v.x)+(b-v.y)*(b-v.y);if(!isNaN(x)&&x<c&&x!==0){var S=Math.sqrt(x),E=h*S/(f*S+u),_=(w-v.x)/S,k=(b-v.y)/S;if(y.x=_*E+v.x,y.y=k*E+v.y,s[y.id]||(s[y.id]={x:w,y:b,texts:[]}),o.push(y),l&&2*S<u)for(var C=d[m],A=C.getContainer(),M=A.getChildren(),T=M.length,O=0;O<T;O++){var N=M[O];N.get("type")==="text"&&(s[y.id].texts.push({visible:N.get("visible"),shape:N}),N.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var r=this,n=r.get("cachedMagnifiedModels"),i=r.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var h=u.texts[f];h.shape.set("visible",h.visible)}}r.set("cachedMagnifiedModels",[]),r.set("cachedOriginPositions",{})},e.prototype.updateParams=function(r){var n=this,i=r.r,a=r.d,o=r.trigger,s=r.minD,l=r.maxD,u=r.minR,c=r.maxR,f=r.scaleDBy,h=r.scaleRBy;isNaN(r.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u);var d=n.get("d"),p=n.get("r");if(n.set("molecularParam",(d+1)*p),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}if(h==="drag"||h==="wheel"||h==="unset"){n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}},e.prototype.updateDelegate=function(r,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||EX;s=l.addShape("circle",{attrs:kN({r:n/1.5,x:r.x,y:r.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(p){a.scaleRByWheel(p)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(p){a.set("dragging",!0),a.set("cacheCenter",{x:p.x,y:p.y}),a.set("dragPrePos",{x:p.x,y:p.y})}),s.on("drag",function(p){a.scaleRByDrag(p)}),s.on("dragend",function(p){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(p){i.scaleDByWheel(p)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(p){a.set("dragging",!0),a.set("cacheCenter",{x:p.x,y:p.y}),a.set("dragPrePos",{x:p.x,y:p.y})}),s.on("drag",function(p){i.scaleDByDrag(p)}),s.on("dragend",function(p){a.set("dragging",!1)})))}else s.attr({x:r.x,y:r.y,r:n/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),h=r.y+n/1.5+16;if(!f||f.destroyed){var d=o.get("group");f=d.addShape("text",{attrs:{text:"".concat(c,"%"),x:r.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:"".concat(c,"%"),x:r.x,y:h})}a.set("delegate",s)},e.prototype.clear=function(){var r=this.get("graph");this.restoreCache(),r.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Ho),Xht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_X=.05;typeof document<"u"&&TT(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Yht=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var r=[],n=e.target;n;){if(r.push(n),n.tagName==="HTML")return r.push(document,window),r;n=n.parentElement}return r},qht=function(t){Xht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var r=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;Ve(a)&&(o=wn(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),Ve(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var h=Yht(f).filter(function(p){return p.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");d&&(u?u(d,n):r.handleDefaultOperator(d))}});var c=this.get("position");c&&Cr(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var r=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),r.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===0?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var r=this.get("graph"),n=r.getUndoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action;r.pushStack(a,Ir(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=r.findById(d.id);d.visible?r.showItem(p,!1):r.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=r.findById(d.id);delete d.id,r.updateItem(p,d,!1),p.getType()==="combo"&&r.updateCombo(p)})});break;case"changedata":r.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=d.itemType;delete d.itemType,r.addItem(p,d,!1)})});break}case"add":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,l=s[s.length-1];Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.updateComboTree(d.id,d.parentId,!1)})}),r.removeItem(l.id,!1);break;case"uncombo":var u=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(f){return f.id}).filter(function(f){return f!==u.id});r.createCombo(u,c,!1);break;case"layout":r.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.redo=function(){var r=this.get("graph"),n=r.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(r.pushStack(a,Ir(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=r.findById(h.id);h.visible?r.showItem(d,!1):r.hideItem(d,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=r.findById(h.id);delete h.id,r.updateItem(d,h,!1),d.getType()==="combo"&&r.updateCombo(d)})});break;case"changedata":r.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){r.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){r.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){r.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=h.itemType;delete h.itemType,r.addItem(d,h,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){r.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];r.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var l=i.data.before.combos,u=l[l.length-1];r.uncombo(u.id,!1);break;case"layout":r.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.zoomOut=function(){var r=this.get("graph"),n=r.getZoom(),i=1/(1-_X*this.get("zoomSensitivity")),a=this.get("maxZoom")||r.get("maxZoom");i*n>a||r.zoomTo(n*i)},e.prototype.zoomIn=function(){var r=this.get("graph"),n=r.getZoom(),i=1-_X*this.get("zoomSensitivity"),a=this.get("minZoom")||r.get("minZoom");i*n<a||r.zoomTo(n*i)},e.prototype.realZoom=function(){var r=this.get("graph");r.zoomTo(1)},e.prototype.autoZoom=function(){var r=this.get("graph");r.fitView([20,20])},e.prototype.handleDefaultOperator=function(r){switch(r){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},e.prototype.destroy=function(){var r=this.get("toolBar");if(r){var n=this.get("container");n||(n=this.get("graph").get("container")),Ve(n)&&(n=document.getElementById(n)),n.removeChild(r)}var i=this.get("handleClick");i&&r.removeEventListener("click",i)},e}(Ho);const Kht=qht;var Qht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();typeof document<"u"&&TT(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Zht=function(t){Qht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>`.concat(n.item.getType(),`</h4>
          <span class='tooltip-id'>ID`).concat(n.item.getID(),`</span>
        `)},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var r=this,n=r.get("className")||"g6-component-tooltip",i=wn("<div class='".concat(n,"'></div>")),a=r.get("container");a||(a=r.get("graph").get("container")),Ve(a)&&(a=document.getElementById(a)),Cr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),r.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){Cr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){r.hideTooltip()})),r.set("tooltip",i)},e.prototype.onClick=function(r){var n=this.get("itemTypes");if(!(r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=r.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:r.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(r),a.emit("tooltipchange",{item:r.item,action:"show"}))}},e.prototype.onMouseEnter=function(r){var n=this.get("itemTypes");if(!(r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=r.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(r),a.emit("tooltipchange",{item:r.item,action:"show"})}},e.prototype.onMouseMove=function(r){var n=this.get("itemTypes");r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1||!this.currentTarget||r.item!==this.currentTarget||this.showTooltip(r)},e.prototype.onMouseLeave=function(){this.hideTooltip();var r=this.get("graph");r.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var r=this.get("tooltip");r&&(r.innerHTML="")},e.prototype.showTooltip=function(r){if(r.item){var n=this.get("itemTypes");if(!(r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(r);Ve(o)?i.innerHTML=o:(this.clearContainer(),i.appendChild(o)),this.updatePosition(r)}}},e.prototype.hideTooltip=function(){var r=this.get("tooltip");r&&Cr(r,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(r){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(r)){Cr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(r.clientX,r.clientY),f=this.get("fixToNode"),h=r.item;if(h.getType&&h.getType()==="node"&&f&&Ft(f)&&f.length>=2){var d=h.getBBox();c={x:d.minX+d.width*f[0],y:d.minY+d.height*f[1]}}var p=a.getCanvasByPoint(c.x,c.y),v=p.x,g=p.y,m=a.getContainer(),y={x:v+m.offsetLeft+l,y:g+m.offsetTop+u};Cr(i,{visibility:"visible",display:"unset"});var w=i.getBoundingClientRect();v+w.width+l>o&&(y.x-=w.width+l),g+w.height+u>s&&(y.y-=w.height+u,y.y<0&&(y.y=0)),Cr(i,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var r=this.get("tooltip");if(r){var n=this.get("container");n||(n=this.get("graph").get("container")),Ve(n)&&(n=document.getElementById(n)),n.removeChild(r)}},e}(Ho);const Jht=Zht;var The="timebarstartplay",Ihe="timebarendplay",Yu="valuechange",Qp="timebarConfigChanged",Wh="playPauseBtn",x2="nextStepBtn",S2="preStepBtn",edt=function(){function t(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.container,s=e.text,l=e.padding,u=l===void 0?[4,4,4,4]:l,c=e.className,f=c===void 0?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=h===void 0?"#000":h,p=e.textColor,v=p===void 0?"#fff":p,g=e.opacity,m=g===void 0?.8:g,y=e.fontSize,w=y===void 0?12:y;this.container=o,this.className=f,this.backgroundColor=d,this.textColor=v,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=w,this.render()}return t.prototype.render=function(){var e=this,r=e.className;e.x,e.y;var n=e.backgroundColor,i=e.textColor,a=e.text,o=e.padding,s=e.opacity,l=e.fontSize,u=e.container,c=wn("<div class='".concat(r,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(s,'"></div>'));Ve(u)&&(u=document.getElementById(u)),u.appendChild(c),e.parentHeight=u.offsetHeight,e.parentWidth=u.offsetWidth,Cr(c,{visibility:"hidden",top:0,left:0});var f=wn(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(n,"; font-size: ").concat(l,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));f.innerHTML=a,c.appendChild(f),e.backgroundDOM=f;var h=wn("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));c.appendChild(h),e.arrowDOM=h,e.container=c},t.prototype.show=function(e){var r=this,n=e.text,i=e.x;e.y,e.clientX,e.clientY,r.backgroundDOM.innerHTML=n;var a=r.backgroundDOM.offsetWidth,o=r.backgroundDOM.offsetHeight,s=r.arrowDOM.offsetWidth,l=r.arrowDOM.offsetHeight;Cr(r.container,{top:"".concat(-o-l,"px"),left:"".concat(i,"px"),visibility:"visible"}),Cr(r.backgroundDOM,{marginLeft:"".concat(-a/2,"px")}),Cr(r.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(o,"px")});var u=i-a/2,c=i+a/2;u<0?Cr(r.backgroundDOM,{marginLeft:"".concat(-a/2-u,"px")}):c>r.parentWidth&&Cr(r.backgroundDOM,{marginLeft:"".concat(-a/2-c+r.parentWidth+12,"px")})},t.prototype.hide=function(){Cr(this.container,{top:0,left:0,visibility:"hidden"})},t}();const tdt=edt;var MN=function(){return MN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},MN.apply(this,arguments)},rdt=function(){function t(e){this.config=cn({},e),this.init()}return t.prototype.update=function(e){this.config=cn({},this.config,e),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var e=this.config,r=e.group,n=e.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,h=r.addGroup({name:Wh});this.startMarkerGroup=h.addGroup({name:Wh}),this.circle=r.addShape("circle",{attrs:MN({x:c,y:f,r:this.config.r*a},n),name:Wh}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:Wh});var d=.25*this.config.r*a,p=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-p/2,width:d,height:p,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-p/2,width:d,height:p,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var e=this.config.style,r=e.scale,n=r===void 0?1:r,i=e.offsetX,a=i===void 0?0:i,o=e.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(e,r,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-i/Math.sqrt(3)/2,r-i/2],["L",e+i/Math.sqrt(3),r],["L",e-i/Math.sqrt(3)/2,r+i/2]]},t}();const ndt=rdt;var gi=function(){return gi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gi.apply(this,arguments)},s1=yl,idt="#aaa",adt="green",odt={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},sdt={fill:"#fff"},ldt={fill:"green"},Ohe={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Dhe={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},udt={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Ohe,timeTypeControllerStyle:Dhe},J3=110,oh=50,Gu={SINGLE:"single",RANGE:"range"},cdt=function(){function t(e){this.controllerCfg=cn({},udt,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Gu.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(e,r,n){return[["M",e,r-n],["L",e+n,r],["L",e,r+n],["Z",e,r-n],["M",e,r],["L",e-n,r-n],["L",e-n,r+n],["Z"]]},t.prototype.getPreMarkerPath=function(e,r,n){return[["M",e,r-n],["L",e-n,r],["L",e,r+n],["L",e,r-n],["M",e,r],["L",e+n,r-n],["L",e+n,r+n],["Z"]]},t.prototype.renderPlayButton=function(){var e=this.controllerCfg,r=e.width,n=e.height,i=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,l=s===void 0?idt:s,u=e.stroke,c=u===void 0?adt:u,f=e.containerStyle,h=f===void 0?{}:f,d=gi(gi({},odt),e.playBtnStyle||{}),p=gi(gi({},sdt),e.preBtnStyle||{}),v=gi(gi({},ldt),e.nextBtnStyle||{}),g=n/2-5,m=a+10,y=this.controllerGroup.addShape("rect",{attrs:gi({x:i,y:m,width:r,height:n,stroke:c,fill:l},h),name:"container-rect"});this.playButton?this.playButton.update({x:r/2,y:m,r:g}):this.playButton=new ndt({group:this.controllerGroup,x:r/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var w=p.offsetX||0,b=p.offsetY||0,x=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:gi({path:this.getPreMarkerPath(r/2-5*g+w,m+g+5+b,x*.5)},p),name:S2});var S=v.offsetX||0,E=v.offsetY||0,_=(v.scale||1)*g;this.controllerGroup.addShape("path",{attrs:gi({path:this.getNextMarkerPath(r/2+5*g+S,m+g+5+E,_*.5)},v),name:x2}),y.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var k=this.controllerCfg.scale,C=k===void 0?1:k,A=this.controllerGroup.getCanvasBBox(),M=(A.maxX+A.minX)/2,T=(A.maxY+A.minY)/2,O=s1([1,0,0,0,1,0,0,0,1],[["t",-M,-T],["s",C,C],["t",M,T]]);this.controllerGroup.setMatrix(O)},t.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,r=e.y,n=e.width,i=e.hideTimeTypeController,a=gi(gi({},Ohe),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,h=a.scale,d=h===void 0?1:h,p=a.offsetX,v=p===void 0?0:p,g=a.offsetY,m=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var w=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var x=r+this.speedAxisY[b],S=n-(i?oh:J3);y.addShape("line",{attrs:gi({x1:S,x2:S+15,y1:x,y2:x},s),speed:w,name:"speed-rect"}),this.speedAxisY[b]=x,w=w-1}this.speedText=y.addShape("text",{attrs:gi({x:n-(i?oh:J3)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:gi({path:this.getPointerPath(n-(i?oh:J3),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f),name:"speed-pointer"});var E=this.speedGroup.getCanvasBBox(),_=(E.maxX+E.minX)/2,k=(E.maxY+E.minY)/2,C=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];C=s1(C,[["t",-_,-k],["s",d,d],["t",_+v*d,k+m*d]]),this.speedGroup.setMatrix(C)},t.prototype.getPointerPath=function(e,r){return[["M",e,r],["L",e-10,r-4],["L",e-10,r+4],["Z"]]},t.prototype.renderToggleTime=function(){var e,r,n=this.controllerCfg,i=n.width,a=n.defaultTimeType,o=gi(gi({},Dhe),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,l=s===void 0?1:s,u=o.offsetX,c=u===void 0?0:u,f=o.offsetY,h=f===void 0?0:f,d=o.box,p=d===void 0?{}:d,v=o.check,g=v===void 0?{}:v,m=o.text,y=m===void 0?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var w=a===Gu.SINGLE;this.toggleGroup.addShape("rect",{attrs:gi({x:i-oh,y:this.speedAxisY[0]+3.5},p),isChecked:w,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:gi({path:[["M",i-oh+3,this.speedAxisY[1]+6],["L",i-oh+7,this.speedAxisY[1]+10],["L",i-oh+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),w||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:gi({text:w?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"":((r=this.controllerCfg)===null||r===void 0?void 0:r.timePointControllerText)||"",x:i-oh+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,S=(b.maxY+b.minY)/2,E=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=s1(E,[["t",-x,-S],["s",l,l],["t",x+c*l,S+h*l]]),this.toggleGroup.setMatrix(E)},t.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(r){var n=r.target.attr("y1"),i=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(i[7]||0),o=e.speedAxisY.indexOf(n),s=e.speedAxisY[o]-e.speedAxisY[a];i=s1(i,[["t",0,s]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Qp,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(r){r.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=e.speedAxisY.indexOf(i);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}r.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-i;n=s1(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Qp,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(r){var n,i,a=r.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((i=e.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||""),e.currentType=Gu.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||""),e.currentType=Gu.SINGLE),r.target.set("isChecked",!a),e.group.emit(Qp,{type:e.currentType,speed:e.currentSpeed})})},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}();const Phe=cdt;var sw=function(){return sw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},sw.apply(this,arguments)},fdt=yl,hdt={fill:"#5B8FF9"},ddt={fill:"#e6e8e9"},pdt=function(){function t(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var r=e.graph,n=e.canvas,i=e.group,a=e.width,o=e.height,s=e.padding,l=e.data,u=e.start,c=e.end,f=e.x,h=f===void 0?0:f,d=e.y,p=d===void 0?0:d,v=e.tickLabelFormatter,g=e.selectedTickStyle,m=g===void 0?hdt:g,y=e.unselectedTickStyle,w=y===void 0?ddt:y,b=e.tooltipBackgroundColor,x=e.tooltipFomatter,S=e.tickLabelStyle,E=e.controllerCfg,_=E===void 0?{speed:1}:E;this.graph=r,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=v,this.tickLabelStyle=S||{},this.selectedTickStyle=m,this.unselectedTickStyle=w,this.controllerCfg=_,this.currentSpeed=_.speed||1,this.x=h,this.y=p,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var e=this,r=this,n=r.width,i=r.height,a=r.padding,o=r.data,s=r.start,l=r.end,u=r.tickLabelFormatter,c=r.selectedTickStyle,f=r.unselectedTickStyle,h=r.tickLabelStyle,d=n-2*a,p=10,v=4,g=3*a+v+p,m=i-g-2*a,y=2,w=o.length,b=(d-y*(w-1))/w;this.tickWidth=b;var x=this.sliceGroup,S=[],E=[],_=Math.round(w*s),k=Math.round(w*l);this.startTickRectId=_,this.endTickRectId=k;var C=h.rotate;delete h.rotate,o.forEach(function(M,T){var O=T>=_&&T<=k,N=O?c:f,R=x.addShape("rect",{attrs:sw({x:a+T*(b+y),y:a,width:b,height:m},N),draggable:!0,name:"tick-rect-".concat(T)}),B=x.addShape("rect",{attrs:{x:a+T*b+y*(2*T-1)/2,y:a,width:T===0||T===w-1?b+y/2:b+y,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(T)});B.toFront();var F=R.getBBox(),D=(F.minX+F.maxX)/2;S.push({rect:R,pickRect:B,value:M.date,x:D,y:F.minY});var L;if(u?(L=u(M),!Ve(L)&&L&&(L=M.date)):T%Math.round(w/10)===0&&(L=M.date),L){E.push(L);var G=F.maxY+a*2;x.addShape("line",{attrs:{stroke:"#BFBFBF",x1:D,y1:G,x2:D,y2:G+v},name:"tick-line"});var Y=G+v+a,Z=x.addShape("text",{attrs:sw({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:D,y:Y,textAlign:"center",text:L,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),q=Z.getBBox();if(q.maxX>n?Z.attr("textAlign","right"):q.minX<0&&Z.attr("textAlign","left"),Pt(C)&&E.length!==10){var pe=fdt([1,0,0,0,1,0,0,0,1],[["t",-D,-Y],["r",C],["t",D-5,Y+2]]);Z.attr({textAlign:"left",matrix:pe})}E.length===1?Z.attr({textAlign:"left"}):E.length===10&&Z.attr({textAlign:"right"})}}),this.tickRects=S;var A=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Phe(sw({group:A,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var e=this,r=this.sliceGroup;r.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var h=parseInt(f.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,p=e.unselectedTickStyle;d.forEach(function(y){y.rect.attr(p)});var v=e.selectedTickStyle;d[h].rect.attr(v),e.startTickRectId=h,e.endTickRectId=h;var g=d.length,m=h/g;e.graph.emit(Yu,{value:[m,m]})}}}),r.on("dragstart",function(c){var f=e.tickRects,h=e.unselectedTickStyle;f.forEach(function(y){y.rect.attr(h)});var d=c.target,p=parseInt(d.get("name").split("-")[2],10),v=e.selectedTickStyle;f[p].rect.attr(v),e.startTickRectId=p;var g=f.length,m=p/g;e.graph.emit(Yu,{value:[m,m]}),e.dragging=!0}),r.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,p=e.selectedTickStyle,v=e.unselectedTickStyle,g=0;g<d.length;g++){var m=g>=h&&g<=f?p:v;d[g].rect.attr(m)}var y=d.length;e.endTickRectId=f;var w=h/y,b=f/y;e.graph.emit(Yu,{value:[w,b]})}}),r.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var f=e.startTickRectId,h=parseInt(c.target.get("name").split("-")[2],10);if(!(h<f)){var d=e.selectedTickStyle,p=e.tickRects;p[h].rect.attr(d),e.endTickRectId=h;var v=p.length,g=f/v,m=h/v;e.graph.emit(Yu,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new tdt({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(h){var d=h.target;if(d.get("type")==="rect"){var p=parseInt(d.get("name").split("-")[2],10),v=o.getClientByPoint(l[p].x,l[p].y);s.show({x:l[p].x,y:l[p].y,clientX:v.x,clientY:v.y,text:a?a(l[p].value):l[p].value})}}),f.on("mouseleave",function(h){s.hide()})});var u=this.group;u.on("".concat(Wh,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on("".concat(x2,":click"),function(){e.updateStartEnd(1)}),u.on("".concat(S2,":click"),function(){e.updateStartEnd(-1)}),u.on(Qp,function(c){c.type;var f=c.speed;e.currentSpeed=f})},t.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(The,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Ihe,null))},t.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var r=e.currentSpeed;e.frameCount%(60/r)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},t.prototype.updateStartEnd=function(e){var r=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=r.endTickRectId;if(e>0?r.endTickRectId++:(n[r.endTickRectId].rect.attr(a),r.endTickRectId--),s!==r.startTickRectId)r.endTickRectId<r.startTickRectId&&(r.startTickRectId=r.endTickRectId);else{for(var l=r.startTickRectId;l<=r.endTickRectId-1;l++)n[l].rect.attr(a);r.startTickRectId=r.endTickRectId}if(n[r.endTickRectId]){n[r.endTickRectId].rect.attr(o);var u=r.startTickRectId/i,c=r.endTickRectId/i;this.graph.emit(Yu,{value:[u,c]})}},t.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(r){var n=r.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Wh,":click")),e.off("".concat(x2,":click")),e.off("".concat(S2,":click")),e.off(Qp),this.sliceGroup.destroy()},t}();const vdt=pdt;var Lhe={};function gdt(t){return Lhe[t]}function kc(t,e){Lhe[t]=e}var qF=function(){function t(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return t.prototype.translate=function(e){return e},t.prototype.change=function(e){$t(this.__cfg__,e),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var e=this;return gv(this.ticks,function(r,n){return ua(r)?r:{text:e.getText(r,n),tickValue:r,value:e.scale(r)}})},t.prototype.getText=function(e,r){var n=this.formatter,i=n?n(e,r):e;return Dt(i)||!Rn(i.toString)?"":i.toString()},t.prototype.getConfig=function(e){return this.__cfg__[e]},t.prototype.init=function(){$t(this,this.__cfg__),this.setDomain(),lae(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var e=this.tickMethod,r=[];if(Ve(e)){var n=gdt(e);if(!n)throw new Error("There is no method to to calculate ticks!");r=n(this)}else Rn(e)&&(r=e(this));return r},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(e,r,n){return Pt(e)?(e-r)/(n-r):NaN},t.prototype.calcValue=function(e,r,n){return r+e*(n-r)},t}(),jb=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="cat",r.isCategory=!0,r}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var r=0;r<this.values.length;r++)this.translateIndexMap.set(this.values[r],r)}},e.prototype.translate=function(r){this.buildIndexMap();var n=this.translateIndexMap.get(r);return n===void 0&&(n=Pt(r)?r:NaN),n},e.prototype.scale=function(r){var n=this.translate(r),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(r){var n=this.max-this.min,i=this.calcPercent(r,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=r;return Pt(r)&&!this.values.includes(r)&&(a=this.values[a]),t.prototype.getText.apply(this,KM([a],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Dt(this.getConfig("min"))&&(this.min=0),Dt(this.getConfig("max"))){var r=this.values.length;this.max=r>1?r-1:r}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(qF),Rhe=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,fh="\\d\\d?",sh="\\d\\d",mdt="\\d{3}",ydt="\\d{4}",lw="[^\\s]+",Nhe=/\[([^]*?)\]/gm;function Fhe(t,e){for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].substr(0,e));return r}var CX=function(t){return function(e,r){var n=r[t].map(function(a){return a.toLowerCase()}),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function _d(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,i=e;n<i.length;n++){var a=i[n];for(var o in a)t[o]=a[o]}return t}var Bhe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$he=["January","February","March","April","May","June","July","August","September","October","November","December"],wdt=Fhe($he,3),bdt=Fhe(Bhe,3),KF={dayNamesShort:bdt,dayNames:Bhe,monthNamesShort:wdt,monthNames:$he,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},sM=_d({},KF),zhe=function(t){return sM=_d(sM,t)},kX=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Mo=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},xdt={D:function(t){return String(t.getDate())},DD:function(t){return Mo(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Mo(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Mo(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Mo(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Mo(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Mo(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Mo(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Mo(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Mo(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Mo(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Mo(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Mo(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Mo(Math.floor(Math.abs(e)/60),2)+":"+Mo(Math.abs(e)%60,2)}},MX=function(t){return+t-1},AX=[null,fh],TX=[null,lw],IX=["isPm",lw,function(t,e){var r=t.toLowerCase();return r===e.amPm[0]?0:r===e.amPm[1]?1:null}],OX=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var r=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?r:-r}return 0}],Sdt={D:["day",fh],DD:["day",sh],Do:["day",fh+lw,function(t){return parseInt(t,10)}],M:["month",fh,MX],MM:["month",sh,MX],YY:["year",sh,function(t){var e=new Date,r=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?r-1:r)+t)}],h:["hour",fh,void 0,"isPm"],hh:["hour",sh,void 0,"isPm"],H:["hour",fh],HH:["hour",sh],m:["minute",fh],mm:["minute",sh],s:["second",fh],ss:["second",sh],YYYY:["year",ydt],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",sh,function(t){return+t*10}],SSS:["millisecond",mdt],d:AX,dd:AX,ddd:TX,dddd:TX,MMM:["month",lw,CX("monthNamesShort")],MMMM:["month",lw,CX("monthNames")],a:IX,A:IX,ZZ:OX,Z:OX},lM={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},jhe=function(t){return _d(lM,t)},Ghe=function(t,e,r){if(e===void 0&&(e=lM.default),r===void 0&&(r={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=lM[e]||e;var n=[];e=e.replace(Nhe,function(a,o){return n.push(o),"@@@"});var i=_d(_d({},sM),r);return e=e.replace(Rhe,function(a){return xdt[a](t,i)}),e.replace(/@@@/g,function(){return n.shift()})};function Uhe(t,e,r){if(r===void 0&&(r={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=lM[e]||e,t.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Nhe,function(b,x){return o.push(kX(x)),"@@@"}),l={},u={};s=kX(s).replace(Rhe,function(b){var x=Sdt[b],S=x[0],E=x[1],_=x[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,_&&(u[_]=!0),a.push(x),"("+E+")"}),Object.keys(u).forEach(function(b){if(!l[b])throw new Error("Invalid format. "+b+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=t.match(new RegExp(s,"i"));if(!c)return null;for(var f=_d(_d({},sM),r),h=1;h<c.length;h++){var d=a[h-1],p=d[0],v=d[2],g=v?v(c[h],f):+c[h];if(g==null)return null;i[p]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,w=y.length;h<w;h++)if(l[y[h][0]]&&i[y[h][0]]!==m[y[h][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var Whe={format:Ghe,parse:Uhe,defaultI18n:KF,setGlobalDateI18n:zhe,setGlobalDateMasks:jhe};const Edt=Object.freeze(Object.defineProperty({__proto__:null,assign:_d,default:Whe,defaultI18n:KF,format:Ghe,parse:Uhe,setGlobalDateI18n:zhe,setGlobalDateMasks:jhe},Symbol.toStringTag,{value:"Module"}));function _dt(t){return function(e,r,n,i){for(var a=Dt(n)?0:n,o=Dt(i)?e.length:i;a<o;){var s=a+o>>>1;t(e[s])>r?o=s:a=s+1}return a}}var DX="format";function Vhe(t,e){var r=Edt[DX]||Whe[DX];return r(t,e)}function uM(t){return Ve(t)&&(t.indexOf("T")>0?t=new Date(t).getTime():t=new Date(t.replace(/-/gi,"/")).getTime()),F8(t)&&(t=t.getTime()),t}var Gl=1e3,Zp=60*Gl,Jp=60*Zp,lf=24*Jp,uw=lf*31,PX=lf*365,l1=[["HH:mm:ss",Gl],["HH:mm:ss",Gl*10],["HH:mm:ss",Gl*30],["HH:mm",Zp],["HH:mm",Zp*10],["HH:mm",Zp*30],["HH",Jp],["HH",Jp*6],["HH",Jp*12],["YYYY-MM-DD",lf],["YYYY-MM-DD",lf*4],["YYYY-WW",lf*7],["YYYY-MM",uw],["YYYY-MM",uw*4],["YYYY-MM",uw*6],["YYYY",lf*380]];function Cdt(t,e,r){var n=(e-t)/r,i=_dt(function(o){return o[1]})(l1,n)-1,a=l1[i];return i<0?a=l1[0]:i>=l1.length&&(a=ul(l1)),a}var kdt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="timeCat",r}return e.prototype.translate=function(r){r=uM(r);var n=this.values.indexOf(r);return n===-1&&(Pt(r)&&r<this.values.length?n=r:n=NaN),n},e.prototype.getText=function(r,n){var i=this.translate(r);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):Vhe(a,this.mask),a}return r},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var r=this.values;Ce(r,function(n,i){r[i]=uM(n)}),r.sort(function(n,i){return n-i}),t.prototype.setDomain.call(this)},e}(jb),IT=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.isContinuous=!0,r}return e.prototype.scale=function(r){if(Dt(r))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(r);return n+s*(i-n)},e.prototype.init=function(){t.prototype.init.call(this);var r=this.ticks,n=cc(r),i=ul(r);n<this.min&&(this.min=n),i>this.max&&(this.max=i),Dt(this.minLimit)||(this.min=n),Dt(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var r=Kie(this.values),n=r.min,i=r.max;Dt(this.min)&&(this.min=n),Dt(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var r=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=LA(n,function(i){return i>=r.min&&i<=r.max})),n},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;return(r-i)/(n-i)},e.prototype.getInvertPercent=function(r){return(r-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(qF),Gb=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="linear",r.isLinear=!0,r}return e.prototype.invert=function(r){var n=this.getInvertPercent(r);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(IT);function wh(t,e){var r=Math.E,n;return e>=0?n=Math.pow(r,Math.log(e)/t):n=Math.pow(r,Math.log(-e)/t)*-1,n}function Ys(t,e){return t===1?1:Math.log(e)/Math.log(t)}function Hhe(t,e,r){Dt(r)&&(r=Math.max.apply(null,t));var n=r;return Ce(t,function(i){i>0&&i<n&&(n=i)}),n===r&&(n=r/e),n>1&&(n=1),n}var Mdt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="log",r}return e.prototype.invert=function(r){var n=this.base,i=Ys(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(r===0)return 0;s=Ys(n,l/n);var u=1/(i-s)*o;if(r<u)return r/u*l}else s=Ys(n,this.min);var c=(r-a)/o,f=c*(i-s)+s;return Math.pow(n,f)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var r=this.min;if(r<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");r===0&&(this.positiveMin=Hhe(this.values,this.base,this.max))},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;if(n===i||r<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return r<o?s=r/o/(Ys(a,n)-Ys(a,i)):s=(Ys(a,r)-Ys(a,i))/(Ys(a,n)-Ys(a,i)),s},e}(IT),Adt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="pow",r}return e.prototype.invert=function(r){var n=this.getInvertPercent(r),i=this.exponent,a=wh(i,this.max),o=wh(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(wh(a,r)-wh(a,i))/(wh(a,n)-wh(a,i));return o},e}(IT),Tdt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="time",r}return e.prototype.getText=function(r,n){var i=this.translate(r),a=this.formatter;return a?a(i,n):Vhe(i,this.mask)},e.prototype.scale=function(r){var n=r;return(Ve(n)||F8(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(r){return uM(r)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var r=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!Dt(n)||!Pt(n))&&(this.min=this.translate(this.min)),(!Dt(i)||!Pt(i))&&(this.max=this.translate(this.max)),r&&r.length){var a=[],o=1/0,s=o,l=0;Ce(r,function(u){var c=uM(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),r.length>1&&(this.minTickInterval=s-o),Dt(n)&&(this.min=o),Dt(i)&&(this.max=l)}},e}(Gb),Xhe=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="quantize",r}return e.prototype.invert=function(r){var n=this.ticks,i=n.length,a=this.getInvertPercent(r),o=Math.floor(a*(i-1));if(o>=i-1)return ul(n);if(o<0)return cc(n);var s=n[o],l=n[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var r=t.prototype.calculateTicks.call(this);return this.nice||(ul(r)!==this.max&&r.push(this.max),cc(r)!==this.min&&r.unshift(this.min)),r},e.prototype.getScalePercent=function(r){var n=this.ticks;if(r<cc(n))return 0;if(r>ul(n))return 1;var i=0;return Ce(n,function(a,o){if(r>=a)i=o;else return!1}),i/(n.length-1)},e}(IT),Idt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="quantile",r}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Xhe),Yhe={};function Odt(t){return Yhe[t]}function Mc(t,e){if(Odt(t))throw new Error("type '"+t+"' existed.");Yhe[t]=e}var Ddt=function(t){lr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="identity",r.isIdentity=!0,r}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(r){return this.values[0]!==r&&Pt(r)?r:this.range[0]},e.prototype.invert=function(r){var n=this.range;return r<n[0]||r>n[1]?NaN:this.values[0]},e}(qF);function qhe(t){var e=t.values,r=t.tickInterval,n=t.tickCount,i=t.showLast;if(Pt(r)){var a=LA(e,function(p,v){return v%r===0}),o=ul(e);return i&&ul(a)!==o&&a.push(o),a}var s=e.length,l=t.min,u=t.max;if(Dt(l)&&(l=0),Dt(u)&&(u=e.length-1),!Pt(n)||n>=s)return e.slice(l,u+1);if(n<=0||u<=0)return[];for(var c=n===1?s:Math.floor(s/(n-1)),f=[],h=l,d=0;d<n&&!(h>=u);d++)h=Math.min(l+d*c,u),d===n-1&&i?f.push(e[u]):f.push(e[h]);return f}function Pdt(t){var e=t.min,r=t.max,n=t.nice,i=t.tickCount,a=new Ldt;return a.domain([e,r]),n&&a.nice(i),a.ticks(i)}var eD=5,LX=Math.sqrt(50),RX=Math.sqrt(10),NX=Math.sqrt(2),Ldt=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},t.prototype.nice=function(e){var r,n;e===void 0&&(e=eD);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(r=[l,s],s=r[0],l=r[1],n=[o,a],a=n[0],o=n[1]),u=j_(s,l,e),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=j_(s,l,e)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=j_(s,l,e)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},t.prototype.ticks=function(e){return e===void 0&&(e=eD),Rdt(this._domain[0],this._domain[this._domain.length-1],e||eD)},t}();function Rdt(t,e,r){var n,i=-1,a,o,s;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((n=e<t)&&(a=t,t=e,e=a),(s=j_(t,e,r))===0||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(t+i)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(t-i)/s;return n&&o.reverse(),o}function j_(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=LX?10:a>=RX?5:a>=NX?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=LX?10:a>=RX?5:a>=NX?2:1)}function FX(t,e,r){var n;return r==="ceil"?n=Math.ceil(t/e):r==="floor"?n=Math.floor(t/e):n=Math.round(t/e),n*e}function QF(t,e,r){var n=FX(t,r,"floor"),i=FX(e,r,"ceil");n=m_(n,r),i=m_(i,r);for(var a=[],o=Math.max((i-n)/(Math.pow(2,12)-1),r),s=n;s<=i;s=s+o){var l=m_(s,o);a.push(l)}return{min:n,max:i,ticks:a}}function ZF(t,e,r){var n,i=t.minLimit,a=t.maxLimit,o=t.min,s=t.max,l=t.tickCount,u=l===void 0?5:l,c=Dt(i)?Dt(e)?o:e:i,f=Dt(a)?Dt(r)?s:r:a;if(c>f&&(n=[c,f],f=n[0],c=n[1]),u<=2)return[c,f];for(var h=(f-c)/(u-1),d=[],p=0;p<u;p++)d.push(c+h*p);return d}function Ndt(t){var e=t.min,r=t.max,n=t.tickInterval,i=t.minLimit,a=t.maxLimit,o=Pdt(t);return!Dt(i)||!Dt(a)?ZF(t,cc(o),ul(o)):n?QF(e,r,n).ticks:o}function wp(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var Fdt=[1,5,2,2.5,4,3],BX=Number.EPSILON*100;function Bdt(t,e){return(t%e+e)%e}function $dt(t){return Math.round(t*1e12)/1e12}function zdt(t,e,r,n,i,a){var o=FA(e),s=B8(e,t),l=0,u=Bdt(n,a);return(u<BX||a-u<BX)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-r+l}function jdt(t,e,r){var n=FA(e),i=B8(e,t),a=1;return 1-i/(n-1)-r+a}function Gdt(t,e,r,n,i,a){var o=(t-1)/(a-i),s=(e-1)/(Math.max(a,n)-Math.min(r,i));return 2-Math.max(o/s,s/o)}function Udt(t,e){return t>=e?2-(t-1)/(e-1):1}function Wdt(t,e,r,n){var i=e-t;return 1-.5*(Math.pow(e-n,2)+Math.pow(t-r,2))/Math.pow(.1*i,2)}function Vdt(t,e,r){var n=e-t;if(r>n){var i=(r-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function Hdt(){return 1}function Xdt(t,e,r,n,i,a){r===void 0&&(r=5),n===void 0&&(n=!0),i===void 0&&(i=Fdt),a===void 0&&(a=[.25,.2,.5,.05]);var o=r<0?0:Math.round(r);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-t<1e-15||o===1)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=r||5,l=(e-t)/s;return{min:t,max:e,ticks:Array(s).fill(null).map(function(G,Y){return wp(t+l*Y)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var f=0;f<i.length;f+=1){var h=i[f],d=jdt(h,i,c);if(a[0]*d+a[1]+a[2]+a[3]<u.score){c=1/0;break}for(var p=2;p<1/0;){var v=Udt(p,o);if(a[0]*d+a[1]+a[2]*v+a[3]<u.score)break;for(var g=(e-t)/(p+1)/c/h,m=Math.ceil(Math.log10(g));m<1/0;){var y=c*h*Math.pow(10,m),w=Vdt(t,e,y*(p-1));if(a[0]*d+a[1]*w+a[2]*v+a[3]<u.score)break;var b=Math.floor(e/y)*c-(p-1)*c,x=Math.ceil(t/y)*c;if(b<=x)for(var s=x-b,S=0;S<=s;S+=1){var E=b+S,_=E*(y/c),k=_+y*(p-1),C=y,A=zdt(h,i,c,_,k,C),M=Wdt(t,e,_,k),T=Gdt(p,o,t,e,_,k),O=Hdt(),N=a[0]*A+a[1]*M+a[2]*T+a[3]*O;N>u.score&&(!n||_<=t&&k>=e)&&(u.lmin=_,u.lmax=k,u.lstep=C,u.score=N)}m+=1}p+=1}}c+=1}var R=wp(u.lmax),B=wp(u.lmin),F=wp(u.lstep),D=Math.floor($dt((R-B)/F))+1,L=new Array(D);L[0]=wp(B);for(var f=1;f<D;f++)L[f]=wp(L[f-1]+F);return{min:Math.min(t,cc(L)),max:Math.max(e,ul(L)),ticks:L}}function Ydt(t){var e=t.min,r=t.max,n=t.tickCount,i=t.nice,a=t.tickInterval,o=t.minLimit,s=t.maxLimit,l=Xdt(e,r,n,i).ticks;return!Dt(o)||!Dt(s)?ZF(t,cc(l),ul(l)):a?QF(e,r,a).ticks:l}function qdt(t){var e=t.base,r=t.tickCount,n=t.min,i=t.max,a=t.values,o,s=Ys(e,i);if(n>0)o=Math.floor(Ys(e,n));else{var l=Hhe(a,e,i);o=Math.floor(Ys(e,l))}for(var u=s-o,c=Math.ceil(u/r),f=[],h=o;h<s+c;h=h+c)f.push(Math.pow(e,h));return n<=0&&f.unshift(0),f}function Khe(t,e,r){if(r===void 0&&(r=5),t===e)return{max:e,min:t,ticks:[t]};var n=r<0?0:Math.round(r);if(n===0)return{max:e,min:t,ticks:[]};var i=1.5,a=.5+1.5*i,o=e-t,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(e/u),f=Math.floor(t/u),h=Math.max(c*u,e),d=Math.min(f*u,t),p=Math.floor((h-d)/u)+1,v=new Array(p),g=0;g<p;g++)v[g]=wp(d+g*u);return{min:d,max:h,ticks:v}}function Kdt(t){var e=t.exponent,r=t.tickCount,n=Math.ceil(wh(e,t.max)),i=Math.floor(wh(e,t.min)),a=Khe(i,n,r).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function Qdt(t,e){var r=t.length*e;return e===1?t[t.length-1]:e===0?t[0]:r%1!==0?t[Math.ceil(r)-1]:t.length%2===0?(t[r-1]+t[r])/2:t[r]}function Zdt(t){var e=t.tickCount,r=t.values;if(!r||!r.length)return[];for(var n=r.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(Qdt(n,o))}return i}function Jdt(t){var e=t.min,r=t.max,n=t.tickCount,i=t.tickInterval,a=t.minLimit,o=t.maxLimit,s=Khe(e,r,n).ticks;return!Dt(a)||!Dt(o)?ZF(t,cc(s),ul(s)):i?QF(e,r,i).ticks:s}function ept(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickInterval,a=t.tickCount;if(i)a=Math.ceil((r-e)/i);else{i=Cdt(e,r,a)[1];var o=(r-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),i);for(var l=[],u=e;u<r+i;u+=i)l.push(u);return l}function tpt(t){var e=qhe(z({showLast:!0},t));return e}function cM(t){return new Date(t).getFullYear()}function rpt(t){return new Date(t,0,1).getTime()}function AN(t){return new Date(t).getMonth()}function npt(t,e){var r=cM(t),n=cM(e),i=AN(t),a=AN(e);return(n-r)*12+(a-i)%12}function ipt(t,e){return new Date(t,e,1).getTime()}function apt(t,e){return Math.ceil((e-t)/lf)}function opt(t,e){return Math.ceil((e-t)/Jp)}function spt(t,e){return Math.ceil((e-t)/(60*1e3))}function lpt(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickCount,a=t.tickInterval,o=[];a||(a=(r-e)/i,n&&a<n&&(a=n)),a=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),a);var s=cM(e);if(a>PX)for(var l=cM(r),u=Math.ceil(a/PX),c=s;c<=l+u;c=c+u)o.push(rpt(c));else if(a>uw)for(var f=Math.ceil(a/uw),h=AN(e),d=npt(e,r),c=0;c<=d+f;c=c+f)o.push(ipt(s,c+h));else if(a>lf)for(var p=new Date(e),v=p.getFullYear(),g=p.getMonth(),m=p.getDate(),y=Math.ceil(a/lf),w=apt(e,r),c=0;c<w+y;c=c+y)o.push(new Date(v,g,m+c).getTime());else if(a>Jp)for(var p=new Date(e),v=p.getFullYear(),g=p.getMonth(),y=p.getDate(),b=p.getHours(),x=Math.ceil(a/Jp),S=opt(e,r),c=0;c<=S+x;c=c+x)o.push(new Date(v,g,y,b+c).getTime());else if(a>Zp)for(var E=spt(e,r),_=Math.ceil(a/Zp),c=0;c<=E+_;c=c+_)o.push(e+c*Zp);else{var k=a;k<Gl&&(k=Gl);for(var C=Math.floor(e/Gl)*Gl,A=Math.ceil((r-e)/Gl),M=Math.ceil(k/Gl),c=0;c<A+M;c=c+M)o.push(C+c*Gl)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}kc("cat",qhe);kc("time-cat",tpt);kc("wilkinson-extended",Ydt);kc("r-pretty",Jdt);kc("time",ept);kc("time-pretty",lpt);kc("log",qdt);kc("pow",Kdt);kc("quantile",Zdt);kc("d3-linear",Ndt);Mc("cat",jb);Mc("category",jb);Mc("identity",Ddt);Mc("linear",Gb);Mc("log",Mdt);Mc("pow",Adt);Mc("time",Tdt);Mc("timeCat",kdt);Mc("quantize",Xhe);Mc("quantile",Idt);var upt=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};function cpt(t){return gv(t,function(e,r){var n=r===0?"M":"L",i=e[0],a=e[1];return[n,i,a]})}function Qhe(t){return cpt(t)}function fpt(t){if(t.length<=2)return Qhe(t);var e=[];Ce(t,function(o){md(o,e.slice(e.length-2))||e.push(o[0],o[1])});var r=qse(e,!1),n=cc(t),i=n[0],a=n[1];return r.unshift(["M",i,a]),r}function hpt(t,e,r,n){n===void 0&&(n=!0);var i=new Gb({values:t}),a=new jb({values:gv(t,function(s,l){return l})}),o=gv(t,function(s,l){return[a.scale(l)*e,r-i.scale(s)*r]});return n?fpt(o):Qhe(o)}function dpt(t,e,r,n){n===void 0&&(n=5);for(var i=new Gb({values:t}),a=new jb({values:gv(t,function(h,d){return d})}),o=gv(t,function(h,d){return[a.scale(d)*e,r-i.scale(h)*r]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:r,size:n},f=gpt(c);s.push.apply(s,f)}return mpt(s)}function ppt(t,e){var r=new Gb({values:t}),n=Math.max(0,r.min);return e-r.scale(n)*e}function vpt(t,e,r,n){var i=upt([],t,!0),a=ppt(n,r);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}function gpt(t){var e=t.x,r=t.y,n=t.y0,i=t.size,a,o;Ft(r)?(a=r[0],o=r[1]):(a=n,o=r);var s,l;Ft(e)?(s=e[0],l=e[1]):(s=e-i/2,l=e+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function mpt(t,e){e===void 0&&(e=!0);var r=[],n=t[0];r.push(["M",n.x,n.y]);for(var i=1,a=t.length;i<a;i++)r.push(["L",t[i].x,t[i].y]);return e&&(r.push(["L",n.x,n.y]),r.push(["z"])),r}var cw=function(){return cw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},cw.apply(this,arguments)},ypt={stroke:"#C5C5C5",strokeOpacity:.85},wpt={fill:"#CACED4",opacity:.85},bpt=function(){function t(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?200:o,l=e.height,u=l===void 0?26:l,c=e.smooth,f=c===void 0?!0:c,h=e.isArea,d=h===void 0?!1:h,p=e.data,v=p===void 0?[]:p,g=e.lineStyle,m=e.areaStyle,y=e.group,w=e.interval,b=w===void 0?null:w;this.group=y,this.x=n,this.y=a,this.width=s,this.height=u,this.data=v,this.smooth=f,this.isArea=d,this.lineStyle=Object.assign({},ypt,g),this.areaStyle=Object.assign({},wpt,m),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var e=this,r=e.x,n=e.y,i=e.width,a=e.height;e.barWidth;var o=e.data,s=e.smooth,l=e.isArea,u=e.lineStyle,c=e.areaStyle,f=this.group.addGroup({name:"trend-group"});if(o){var h=hpt(o,i,a,s);if(f.addShape("path",{attrs:cw({path:h},u),name:"trend-line"}),l){var d=vpt(h,i,a,o);f.addShape("path",{attrs:cw({path:d},c),name:"trend-area"})}}this.intervalConfig&&f.addShape("path",{attrs:cw({path:dpt(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),f.move(r,n)},t.prototype.destory=function(){this.group.destroy()},t}();const xpt=bpt;var p0=function(){return p0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},p0.apply(this,arguments)},Spt={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ept={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},_pt=function(){function t(e){var r=e.group,n=e.name,i=e.type,a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s,u=e.width,c=u===void 0?2:u,f=e.height,h=f===void 0?24:f,d=e.style,p=d===void 0?{}:d;this.group=r,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=h,i==="trend"?this.style=p0(p0({},Spt),p):i==="simple"&&(this.style=p0(p0({},Ept),p)),this.renderHandle()}return t.prototype.setX=function(e){this.setXY(e,void 0)},t.prototype.setY=function(e){this.setXY(void 0,e)},t.prototype.setXY=function(e,r){Pt(e)&&(this.x=e),Pt(r)&&(this.y=r),this.updateXY()},t.prototype.renderHandle=function(){var e=this,r=e.width,n=e.height,i=e.style,a=e.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:r,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:0,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:n,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:n/2,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var e=this,r=this.name;this.handleGroup.on("".concat(r,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.topCircle.attr("fill",n)}),this.handleGroup.on("".concat(r,"-handler:mouseleave"),function(){var n=e.style.fill;e.topCircle.attr("fill",n)})},t.prototype.bindTrendEvents=function(){var e=this,r=this.name;this.handleGroup.on("".concat(r,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(r,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}();const $X=_pt;var hn=function(){return hn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hn.apply(this,arguments)},Cpt=yl,kpt={fill:"#416180",opacity:.05},Mpt={fill:"#416180",opacity:.15,radius:5},Apt={fill:"#5B8FF9",opacity:.3,cursor:"grab"},TN=2,Tpt={width:TN,height:24},Ipt={textBaseline:"middle",fill:"#000",opacity:.45},Opt={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Dpt={lineWidth:1,stroke:"#ccc"},Ppt=function(){function t(e){var r=this;this.prevX=0,this.onMouseDown=function(G){return function(Y){r.currentHandler=G;var Z=Y.originalEvent;Z.stopPropagation(),Z.preventDefault(),r.prevX=Zc(Z,"touches.0.pageX",Z.pageX);var q=r.canvas.get("container");q.addEventListener("mousemove",r.onMouseMove),q.addEventListener("mouseup",r.onMouseUp),q.addEventListener("mouseleave",r.onMouseUp),q.addEventListener("touchmove",r.onMouseMove),q.addEventListener("touchend",r.onMouseUp),q.addEventListener("touchcancel",r.onMouseUp)}},this.onMouseMove=function(G){G.stopPropagation(),G.preventDefault();var Y=Zc(G,"touches.0.pageX",G.pageX),Z=Y-r.prevX,q=r.adjustOffsetRange(Z/r.width);r.updateStartEnd(q),r.updateUI(),r.prevX=Y},this.onMouseUp=function(){r.currentHandler&&(r.currentHandler=void 0);var G=r.canvas.get("container");G&&(G.removeEventListener("mousemove",r.onMouseMove),G.removeEventListener("mouseup",r.onMouseUp),G.removeEventListener("mouseleave",r.onMouseUp),G.removeEventListener("touchmove",r.onMouseMove),G.removeEventListener("touchend",r.onMouseUp),G.removeEventListener("touchcancel",r.onMouseUp))};var n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=s===void 0?100:s,u=e.height,c=e.padding,f=c===void 0?10:c,h=e.trendCfg,d=e.controllerCfg,p=d===void 0?{speed:1}:d,v=e.backgroundStyle,g=v===void 0?{}:v,m=e.foregroundStyle,y=m===void 0?{}:m,w=e.handlerStyle,b=w===void 0?{}:w,x=e.textStyle,S=x===void 0?{}:x,E=e.start,_=E===void 0?0:E,k=e.end,C=k===void 0?1:k,A=e.minText,M=A===void 0?"":A,T=e.maxText,O=T===void 0?"":T,N=e.group,R=e.graph,B=e.canvas,F=e.tick,D=F===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Y){return Y},ticks:[]}:F,L=e.type;this.graph=R,this.canvas=B,this.group=N,this.timeBarType=L,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=D.ticks,this.trendCfg=h,this.controllerCfg=p,this.currentSpeed=p.speed||1,this.tickLabelFormatter=D.tickLabelFormatter,L==="trend"?this.backgroundStyle=hn(hn({},kpt),g):L==="simple"&&(this.backgroundStyle=hn(hn({},Mpt),g)),this.foregroundStyle=hn(hn({},Apt),y),this.handlerStyle=hn(hn({},Tpt),b),this.textStyle=hn(hn({},Ipt),S),this.tickLabelStyle=hn(hn({},Opt),D.tickLabelStyle),this.tickLineStyle=hn(hn({},Dpt),D.tickLineStyle),this.currentMode=p.defaultTimeType||Gu.RANGE,this.start=_,this.end=C,this.minText=M,this.maxText=O,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(e){var r=e.x,n=e.y,i=e.width,a=e.height,o=e.minText,s=e.maxText,l=e.start,u=e.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),$t(this,{x:r,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},t.prototype.setText=function(e,r){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",r)},t.prototype.renderSlider=function(){var e=this,r=this,n=r.width,i=r.height,a=r.timeBarType;if(a==="trend"&&FA(Zc(this.trendCfg,"data"))){var o=new xpt(hn(hn({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:hn({x:0,y:0,width:n,height:i},this.backgroundStyle),name:"background"});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:hn({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:hn({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=l.addShape("text",{attrs:hn({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:hn({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:hn({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=Zc(this.handlerStyle,"width",2),c=Zc(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new $X({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new $X({name:"maxHandlerShape",group:h,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.ticks,p=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var v=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map(function(m,y){e.tickPosList.push(e.x+y*p);var w;e.tickLabelFormatter?(w=e.tickLabelFormatter(m),!Ve(w)&&w&&(w=m.date)):w=m.date;var b=e.x+y*p,x=e.y+i+5,S=e.group.addShape("text",{attrs:hn({x:b,y:x,text:w,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(Pt(g)&&y!==d.length-1){var E=Cpt([1,0,0,0,1,0,0,0,1],[["t",-b,-x],["r",g],["t",b-5,x+2]]);S.attr({textAlign:"left",matrix:E})}y===0?S.attr({textAlign:"left"}):y!==d.length-1&&S.attr({textAlign:"right"});var _=e.group.addShape("line",{attrs:hn({x1:e.x+y*p,y1:e.y+i+2,x2:e.x+y*p,y2:e.y+i+6},e.tickLineStyle),name:"tick-line"});_.toBack();var k=S.getBBox();return k.minX>v?(S.show(),_.show(),v=k.minX+k.width+10):(S.hide(),_.hide()),S}),this.controllerBtnGroup=new Phe(hn({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Gu.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var e=this,r=this.group.find(function(i){return i.get("name")==="minHandlerShape"});r&&(r.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),r.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Wh,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(x2,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(S2,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Qp,function(i){var a=i.type,o=i.speed;e.currentSpeed=o,e.currentMode=a,a===Gu.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Gu.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},t.prototype.adjustTickIndex=function(e){for(var r=0;r<this.tickPosList.length-1;r++)if(this.tickPosList[r]<=e&&e<=this.tickPosList[r+1])return Math.abs(this.tickPosList[r]-e)<Math.abs(e-this.tickPosList[r+1])?r:r+1;return 0},t.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var r=0-this.start,n=1-this.start;return Math.min(n,Math.max(r,e))}case this.maxHandlerShape:{var r=0-this.end,n=1-this.end;return Math.min(n,Math.max(r,e))}case this.foregroundShape:{var r=0-this.start,n=1-this.end;return Math.min(n,Math.max(r,e))}default:return 0}},t.prototype.updateStartEnd=function(e){var r=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n==null?void 0:n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},t.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var r=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",r),this.foregroundShape.attr("width",n-r);var i=Zc(this.handlerStyle,"width",TN);this.setText(this.minText,this.maxText);var a=this.dodgeText([r,n]),o=a[0],s=a[1];this.minHandlerShape.setX(r-i/2),Ce(o,function(l,u){return e.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),Ce(s,function(l,u){return e.maxTextShape.attr(u,l)}),this.currentMode===Gu.RANGE?this.graph.emit(Yu,{value:[this.start,this.end].sort()}):this.currentMode===Gu.SINGLE&&this.graph.emit(Yu,{value:[this.end,this.end]})},t.prototype.dodgeText=function(e){var r,n,i=2,a=Zc(this.handlerStyle,"width",TN),o=this.minTextShape,s=this.maxTextShape,l=e[0],u=e[1],c=!1;l>u&&(r=[u,l],l=r[0],u=r[1],n=[s,o],o=n[0],s=n[1],c=!0);var f=o.getBBox(),h=s.getBBox(),d=null,p=null;return this.timeBarType==="trend"?(d=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},p=u+h.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(d=o.attr("x")>f.width?{x:l,textAlign:"center"}:{x:l,textAlign:"left"},p=s.attr("x")>this.width-h.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),c?[p,d]:[d,p]},t.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var r=e,n=r.ticks,i=r.width,a=e.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=e.adjustOffsetRange(s/e.width);e.updateStartEnd(l),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},t.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(The,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Ihe,null))},t.prototype.destory=function(){this.graph.off(Yu,function(){});var e=this.group,r=e.find(function(i){return i.get("name")==="minHandlerShape"});r&&(r.off("minHandlerShape-handler:mousedown"),r.off("minHandlerShape-handler:touchstart"),r.destroy());var n=e.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Wh,":click")),e.off("".concat(x2,":click")),e.off("".concat(S2,":click")),e.off(Qp),e.destroy(),this.trendComponent&&this.trendComponent.destory()},t}();const Lpt=Ppt;var Rpt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jc=function(){return Jc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jc.apply(this,arguments)},Npt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Fpt=4,Bpt=26,$pt=function(t){Rpt(e,t);function e(r){var n=t.call(this,r)||this;return n.afterrenderListener=function(i){return n.filterData({})},n.valueChangeListener=t2(function(i){return n.filterData(i)},200,{trailing:!0,leading:!0}),n.changeData=function(i){var a=n.get("graph");n.cacheGraphData=a.get("data"),n.filterData({})},n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var r=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=n.putInGraphContainer,s=this.get("className")||"g6-component-timebar",l=this.get("container"),u;if(l?(Ve(l)&&(l=document.getElementById(l)),u=l):(u=wn("<div class='".concat(s,"'></div>")),Cr(u,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(u)}this.set("timeBarContainer",u);var f,h=r.get("renderer");h==="SVG"?f=new tw({container:u,width:i,height:a}):f=new nf({container:u,width:i,height:a}),this.get("containerCSS")&&Cr(u,this.get("containerCSS")),this.set("canvas",f)},e.prototype.init=function(){this.initContainer();var r=this.get("canvas"),n=r.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(r){var n=this.get("timebar");n&&(n.isPlay=!!r,n.changePlayStatus())},e.prototype.renderTrend=function(){var r=this,n=this._cfgs,i=n.width,a=n.x,o=n.y,s=n.padding,l=n.type,u=n.trend,c=n.slider,f=n.controllerCfg,h=n.textStyle,d=n.tick,p=n.backgroundStyle,v=n.foregroundStyle,g=u.data,m=Npt(u,["data"]),y=i-2*s,w=l==="trend"?Bpt:Fpt,b=this.get("graph"),x=this.get("timeBarGroup"),S=this.get("canvas"),E=null;if(l==="trend"||l==="simple"){var _=this.get("getValue");E=new Lpt(Jc(Jc({graph:b,canvas:S,group:x,type:l,x:a+s,y:l==="trend"?o+s:o+s+15,width:y,height:w,padding:s,backgroundStyle:p,foregroundStyle:v,trendCfg:Jc(Jc({},m),{data:g.map(function(C){return(_==null?void 0:_(C))||C.value})})},c),{tick:{ticks:g,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:Jc(Jc({},c.handlerStyle),{height:c.height||w}),controllerCfg:f,textStyle:h}))}else l==="tick"&&(E=new vdt(Jc({graph:b,canvas:S,group:x,x:a+s,y:o+s,width:i,height:42,padding:2,controllerCfg:f},d)));var k=function C(){var A=r.get("timebar");A.draggingHandler=!1,A.isPlay&&(A.isPlay=!1,A.currentHandler=A.maxHandlerShape,A.changePlayStatus()),document.removeEventListener("mouseup",C)};S.on("mousedown",function(C){(C.target.get("name")==="maxHandlerShape-handler"||C.target.get("name")==="minHandlerShape-handler"||C.target===E.foregroundShape)&&document.addEventListener("mouseup",k)}),this.set("timebar",E)},e.prototype.filterData=function(r){var n,i=r.value;if(!i){i=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end):a==="tick"&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn(" TimeBar ");return}var l=this.get("rangeChange"),u=this.get("graph"),c=Math.round(o.length*i[0]),f=Math.round(o.length*i[1]);f=f>=o.length?o.length-1:f,c=c>=o.length?o.length-1:c;var h=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=h?h(o[c]):o[c].date,p=h?h(o[f]):o[f].date;if(s!=="tick"){var v=this.get("timebar");v.setText(d,p)}if(l)l(u,d,p);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=u.get("data"));var g=this.get("filterItemTypes"),m=this.get("changeData"),y=this.get("getDate"),w=this.get("shouldIgnore"),b=o[c].date,x=o[f].date;if(m||m===void 0){var S=this.cacheGraphData.nodes,E=this.cacheGraphData.edges,_={},k={};u.getNodes().forEach(function(C){return _[C.getID()]=!0}),u.getEdges().forEach(function(C){return k[C.getID()]=!0}),g.includes("node")&&(S==null||S.forEach(function(C){var A=+((y==null?void 0:y(C))||C.date),M=A>=b&&A<=x||(w==null?void 0:w("node",C,{min:b,max:x})),T=_[C.id];T&&!M?(u.removeItem(C.id),_[C.id]=!1):!T&&M&&(u.addItem("node",C),_[C.id]=!0)}),E==null||E.forEach(function(C){var A=_[C.source]&&_[C.target]||(w==null?void 0:w("edge",C,{min:b,max:x})),M=!!u.findById(C.id);M&&!A?(u.removeItem(C.id),k[C.id]=!1):!M&&A?(u.addItem("edge",C),k[C.id]=!0):M||(k[C.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(E==null||E.filter(function(C){var A=+((y==null?void 0:y(C))||C.date),M=A>=b&&A<=x||(w==null?void 0:w("edge",C,{min:b,max:x})),T=_[C.source]&&_[C.target],O=M&&T,N=k[C.id];N&&!O?(k[C.id]=!1,u.removeItem(C.id)):!N&&O&&(k[C.id]=!0,u.addItem("edge",C))}))}else g.includes("node")&&u.getNodes().forEach(function(C){var A=C.getModel();if(!(w!=null&&w("node",A,{min:b,max:x}))){var M=+((y==null?void 0:y(A))||A.date);M<b||M>x?u.hideItem(C):u.showItem(C)}}),(this.get("filterEdge")||g.includes("edge"))&&u.getEdges().forEach(function(C){var A=C.getModel();if(!(w!=null&&w("edge",A,{min:o[c].date,max:o[f].date}))){var M=+((y==null?void 0:y(A))||A.date);if(M<o[c].date||M>o[f].date)u.hideItem(C);else{var T=C.getSource().isVisible(),O=C.getTarget().isVisible();T&&O&&u.showItem(C)}}})}},e.prototype.initEvent=function(){var r=this.get("graph");r.on("afterchangedata",this.changeData),r.on("afterrender",this.afterrenderListener),r.on(Yu,this.valueChangeListener)},e.prototype.destroy=function(){var r=this.get("graph");r.off("afterchangedata",this.changeData),r.off("afterrender",this.afterrenderListener),r.off(Yu,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),t.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var a=this.get("container");a||(a=this.get("graph").get("container")),Ve(a)&&(a=document.getElementById(a)),a===i&&(a=a.parentElement),a.removeChild(i)}},e}(Ho);const zpt=$pt;var jpt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gpt=Ta.applyMatrix;function Upt(t,e){var r,n;if(t.naturalWidth)r=t.naturalWidth,n=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){e&&e(i.width,i.height)}}return[r,n]}var Wpt=function(t){jpt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var r=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");Ve(a)&&(a=document.getElementById(a));var o=wn("<div class=".concat(n.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,l=0,u=!1,c=0,f=0,h=0,d=0,p=0,v=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;h=parseInt(m.width,10),d=parseInt(m.height,10);var y=r.get("width"),w=r.get("height");h>y||d>w||(v=i.getZoom(),p=r.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||Dt(g.clientX)||Dt(g.clientY))){var m=r.get("width"),y=r.get("height"),w=o.style;c=parseInt(w.left,10),f=parseInt(w.top,10),h=parseInt(w.width,10),d=parseInt(w.height,10);var b=s-g.clientX,x=l-g.clientY;c-b<0?b=c:c-b+h>=m&&(b=0),f-x<0?x=f:f-x+d>=y&&(x=0),c-=b,f-=x,Cr(o,{left:"".concat(c,"px"),top:"".concat(f,"px")}),i.translate(b*v/p,x*v/p),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var r=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(d.width=h[0],d.height=d.width/l):(d.height=h[1],d.width=d.height*l),d.minX=f[0]-d.width/2,d.minY=f[1]-d.height/2;var p=u.getMatrix();p||(p=[1,0,0,0,1,0,0,0,1]);var v=z8([1,0,0,0,1,0,0,0,1],p),g=Gpt({x:d.minX,y:d.minY},v),m=a.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var w=o/d.width,b=w*n,x=w*i,S=n*-m.x/d.width,E=i*-m.y/d.height,_=S+b,k=E+x;S<0&&(b+=S,S=0),_>n&&(b=b-(_-n)),E<0&&(x+=E,E=0),k>i&&(x=x-(k-i)),this.set("ratio",r);var C="".concat(S,"px"),A="".concat(E,"px");Cr(y,{left:C,top:A,width:"".concat(b,"px"),height:"".concat(x,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var r=this,n=r.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=r.get("className"),l=r.get("container"),u=r.get("width"),c=r.get("height");!u&&!c&&(u=200),u?(c=o*u,r.set("height",c)):(u=1/o*c,r.set("width",u));var f=wn("<div class='".concat(s,"' style='width: ").concat(u,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));Ve(l)&&(l=document.getElementById(l)),l?l.appendChild(f):n.get("container").appendChild(f),r.set("container",f);var h=wn('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(h);var d=wn('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),r.set("containerDOM",h),r.set("containerSpan",d);var p=wn('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));r.set("imgDOM",p),r.updateImgSize(),d.appendChild(p),r.updateCanvas()},e.prototype.updateImgSize=function(){var r=this,n=r.get("imgDOM"),i=r.get("width"),a=r.get("height");n.onload=function(){var o=Upt(n);o[0]>o[1]?n.width=i:n.height=a}},e.prototype.updateCanvas=function(){var r=this.get("refresh");if(r){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(r){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",r);var a=wn('<img alt="" src="'.concat(r,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",a),a.src=r,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},e.prototype.destroy=function(){var r=this.get("container");r.parentNode.removeChild(r)},e}(Ho);const Vpt=Wpt;var Hpt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IN=function(){return IN=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},IN.apply(this,arguments)},Xpt=Ta.distance,zX=.05,jX={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Ypt=function(t){Hpt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Ir(jX),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var r;switch(this.get("trigger")){case"click":r={click:"filter"};break;case"drag":r={click:"createDelegate"};break;default:r={mousemove:"filter"};break}return r},e.prototype.init=function(){var r=this,n=r.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";r.set("showNodeLabel",i),r.set("showEdgeLabel",a);var o=r.get("shouldShow");o||r.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(r){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(r),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(r){var n=this;if(!(!r||!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(r.clientX,r.clientY),r.originalEvent.wheelDelta<0?a=1-zX:a=1/(1-zX);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||i.get("height"))&&a>1||c<(u||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.filter(r)}},e.prototype.filter=function(r){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:r.x,y:r.y};n.updateDelegate(u,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(m){m.remove(),m.destroy()}),f=[],a.forEach(function(m){var y=m.getModel(),w=y.x,b=y.y;Xpt({x:w,y:b},u)<s&&(o[y.id]=m)});var h=i.getEdges(),d=[];h.forEach(function(m){var y=m.getModel(),w=y.source,b=y.target;c(y)&&(l==="only-source"||l==="one"?o[w]&&!o[b]&&d.push(m):l==="only-target"||l==="one"?o[b]&&!o[w]&&d.push(m):l==="both"&&o[w]&&o[b]&&d.push(m))});var p=n.get("showNodeLabel"),v=n.get("showEdgelabel"),g=i.get("group");d.forEach(function(m){var y=m.get("group").get("children");y.forEach(function(w){var b=w.get("type"),x=g.addShape(b,{attrs:w.attr()});f.push(x),p&&b==="text"&&x.set("visible",!0)})}),Object.keys(o).forEach(function(m){var y=o[m],w=y.get("group").clone();if(g.add(w),f.push(w),v)for(var b=w.get("children"),x=0;x<b.length;x++){var S=b[x];S.get("type")==="text"&&S.set("visible",!0)}}),n.set("vShapes",f)},e.prototype.updateParams=function(r){var n=this,i=r.r,a=r.trigger,o=r.minR,s=r.maxR,l=r.scaleRBy,u=r.showLabel,c=r.shouldShow;if(isNaN(r.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},e.prototype.updateDelegate=function(r,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||jX;o=s.addShape("circle",{attrs:IN({r:n,x:r.x,y:r.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:r.x,y:r.y,r:n});i.set("delegate",o)},e.prototype.clear=function(){var r=this,n=r.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],r.set("vShapes",n);var i=r.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(Ho);const qpt=Ypt;var Kpt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qpt=Ta.pointLineDistance,Zpt={stroke:"#FA8C16",lineWidth:1},Jpt=function(t){Kpt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{line:Zpt,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(r){var n=r.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var r=this._cfgs,n=r.horizontalLines,i=r.verticalLines,a=r.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(n["".concat(c,"tltr")]=[u.minX,u.minY,u.maxX,u.minY,l],n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l],n["".concat(c,"blbr")]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i["".concat(c,"tlbl")]=[u.minX,u.minY,u.minX,u.maxY,l],i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l],i["".concat(c,"trbr")]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},e.prototype.show=function(r,n){var i=$t({},r);return this.itemAlign(r,n,i),r},e.prototype.itemAlign=function(r,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x+n.width/2,y:i.y+n.height},d={x:i.x,y:i.y+n.height/2},p={x:i.x+n.width,y:i.y+n.height/2},v=[],g=[],m=null;if(this.clearAlignLine(),Ce(s,function(w){w[4].isVisible&&(v.push(a.getLineDisObject(w,c)),v.push(a.getLineDisObject(w,f)),v.push(a.getLineDisObject(w,h)))}),Ce(l,function(w){w[4].isVisible&&(g.push(a.getLineDisObject(w,d)),g.push(a.getLineDisObject(w,f)),g.push(a.getLineDisObject(w,p)))}),v.sort(function(w,b){return w.dis-b.dis}),g.sort(function(w,b){return w.dis-b.dis}),v.length!==0&&v[0].dis<u){r.y=v[0].line[1]-v[0].point.y+i.y,m={type:"item",horizontals:[v[0]]};for(var y=1;y<3;y++)v[0].dis===v[y].dis&&m.horizontals.push(v[y])}if(g.length!==0&&g[0].dis<u){r.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.verticals.push(g[y])}m&&(m.bbox=n,this.addAlignLine(m))},e.prototype.addAlignLine=function(r){var n=r.bbox,i=r.type,a=r.horizontals,o=r.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&Ce(a,function(h){var d=h.line,p=h.point,v=(d[0]+d[2])/2,g,m;p.x<v?(g=p.x-n.width/2,m=Math.max(d[0],d[2])):(g=p.x+n.width/2,m=Math.min(d[0],d[2]));var y=$t({x1:g,y1:d[1],x2:m,y2:d[1]},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}),o&&Ce(o,function(h){var d=h.line,p=h.point,v=(d[1]+d[3])/2,g,m;p.y<v?(g=p.y-n.height/2,m=Math.max(d[1],d[3])):(g=p.y+n.height/2,m=Math.min(d[1],d[3]));var y=$t({x1:d[0],y1:g,x2:d[0],y2:m},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}))},e.prototype.getLineDisObject=function(r,n){return{line:r,point:n,dis:Qpt(r,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var r=this._cfgs.alignLines;Ce(r,function(n){n.remove()}),r.length=0},e.prototype.destory=function(){var r=this._cfgs,n=r.horizontalLines,i=r.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n["".concat(l,"tltr")],delete n["".concat(l,"lcrc")],delete n["".concat(l,"blbr")],delete i["".concat(l,"tlbl")],delete i["".concat(l,"tcbc")],delete i["".concat(l,"trbr")]}),this.clearAlignLine()},e}(Ho),evt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=function(){return $n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$n.apply(this,arguments)},tvt=["click","mouseenter"],rvt=function(t){evt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var r=this.get("filter")||{},n=r.multiple;n&&r.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=wn(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();Cr(l,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(r){r===void 0&&(r=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,h={left:(i.getWidth()-r[0])/2+c,top:(i.getHeight()-r[1])/2+f};return l.forEach(function(d){var p=s[u[d]],v=d;switch(d){case"top":p+=f;break;case"left":p+=c;break;case"bottom":p=i.getHeight()-r[1]-p+f,v="top";break;default:p=i.getWidth()-r[0]-p+c,v="left";break}h[v]=p}),h.top+=o+i.getContainer().offsetTop,h.left+=a+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]="".concat(h[d],"px")}),h},e.prototype.bindEvents=function(){var r=this,n=r.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";tvt.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=r.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return r.filterData(o)}),a.on("node-container:mouseleave",function(o){r.clearFilter(),r.clearActiveLegend()})):(a.on("node-container:click",function(o){return r.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(r.clearFilter(),r.clearActiveLegend())}))}},e.prototype.changeData=function(r){this.set("data",r);var n=this.render();Cr(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(r){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=r.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var h=f.get("children"),d=h[0],p=h[1];d.attr($n($n({},d.get("oriAttrs")),s)),p.attr($n($n({},p.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var h=f.get("children"),d=h[0],p=h[1];d.attr($n($n({},d.get("oriAttrs")),u)),p.attr($n($n({},p.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(r,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(r)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(r)===i}):o.get("children").filter(function(l){return!!l.get(r)===i}).concat(s.get("children").filter(function(l){return!!l.get(r)===i}))},e.prototype.clearActiveLegend=function(){var r=this.get("legendCanvas"),n=r.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(r){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(r.target);var c=a.find(function(m){return m.get("name")==="root"}),f=c.find(function(m){return m.get("name")==="node-group"}),h=c.find(function(m){return m.get("name")==="edge-group"}),d=f.get("children").filter(function(m){return m.get("active")}),p=h.get("children").filter(function(m){return m.get("active")}),v=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(y){var w=!1,b=m==="getNodes"?d:p;b.forEach(function(x){var S=i[x.get("id")];w=w||S(y.getModel())}),w?(o.setItemState(y,l,!1),o.setItemState(y,s,!0),v++):(o.setItemState(y,s,!1),o.setItemState(y,l,!0))})}),v||g.forEach(function(m){o[m]().forEach(function(y){o.clearItemStates(y,[l])})})}},e.prototype.clearFilter=function(){var r=this.get("graph"),n=this.get("filter");if(n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";r.getNodes().forEach(function(o){r.clearItemStates(o,[i,a])}),r.getEdges().forEach(function(o){r.clearItemStates(o,[i,a])})}},e.prototype.render=function(){var r=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new nf({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"}),a=i.addGroup({name:"node-group"}),o=i.addGroup({name:"edge-group"});this.set("legendCanvas",n);var s=this.get("itemsData"),l=["nodes","edges"],u=[a,o];l.forEach(function(R,B){s[R].forEach(function(F){var D,L=u[B].addGroup({id:F.id,name:"node-container"}),G,Y=F.type,Z=r.getShapeSize(F),q=Z.width,pe=Z.height,Se=Z.r,Ae=r.getStyle(R.substr(0,4),F);switch(F.type){case"circle":G={r:Se,x:0,y:0};break;case"rect":G={width:q,height:pe,x:-q/2,y:-pe/2};break;case"ellipse":G={rx:q,ry:pe,x:0,y:0},Y="ellipse";break;case"line":G={x1:-q/2,y1:0,x2:q/2,y2:0},Y="line";break;case"quadratic":G={path:[["M",-q/2,0],["Q",0,q/2,q/2,0]]},Y="path";break;case"cubic":G={path:[["M",-q/2,0],["C",-q/6,q/2,q/6,-q/2,q/2,0]]},Y="path";break;case"diamond":G={path:[["M",0,-pe],["L",q,0],["L",0,pe],["L",-q,0],["Z"]]},Y="path";break;case"triangle":G={path:[["M",-q,pe],["L",0,-pe],["L",q,pe],["Z"]]},Y="path";break;case"star":G={path:Ta.getStarPath(Se*3,Se*1.2)},Y="path";break;default:G={r:Se,x:0,y:0};break}var He=L.addShape(Y,{attrs:$n($n({},G),Ae),name:"".concat(F.type,"-node-keyShape"),oriAttrs:$n({opacity:1},Ae)});if(F.label){var ct=He.getBBox(),st=((D=F.labelCfg)===null||D===void 0?void 0:D.style)||{},Mt=$n({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},st);L.addShape("text",{attrs:$n({x:ct.maxX+4,y:0,text:F.label},Mt),className:"legend-label",name:"".concat(F.type,"-node-text"),oriAttrs:Mt})}})});var c=this.get("padding"),f,h=i.find(function(R){return R.get("name")==="title-container"}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},v=this.get("titleConfig")||{},g=Object.assign(p,v.style||{});f=h.addShape("text",{attrs:$n({text:this.get("title")},g)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,v.offsetX,v.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),y=a.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=d.maxY<y.minY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1];a.setMatrix(x),m=i.getCanvasBBox();var S=[m.minX+m.width+c[1],m.minY+m.height+c[2]];if(f){var v=$n({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=h.getCanvasBBox();var E=h.getMatrix()||[1,0,0,0,1,0,0,0,1];v.position==="center"?E[6]=S[0]/2+v.offsetX:v.position==="right"?(E[6]=S[0]-c[3]+v.offsetX,f.attr({textAlign:"right"})):(E[6]=c[3]+v.offsetX,f.attr({textAlign:"left"})),h.setMatrix(E),d=h.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=y.minY<d.maxY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1],a.setMatrix(x);var _=[1,0,0,0,1,0,w,b,1];this.get("layout")==="vertical"?_[6]+=y.maxX+this.get("horiSep"):_[7]+=y.maxY+this.get("vertiSep"),o.setMatrix(_)}else{y=a.getCanvasBBox();var k=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?k[6]+=x[6]+y.maxX+this.get("horiSep"):k[7]+=x[7]+y.maxY+this.get("vertiSep"),o.setMatrix(k)}m=i.getCanvasBBox(),y=a.getCanvasBBox(),x=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var C=o.getMatrix()||[1,0,0,0,1,0,0,0,1],A=o.getCanvasBBox();S=[Math.max(y.width+x[6],A.width+C[6])+c[1],Math.max(y.height+x[7],A.height+C[7])+c[2]],n.changeSize(S[0],S[1]);var M=this.get("containerStyle"),T=i.getMatrix()||[1,0,0,0,1,0,0,0,1],O=Ta.invertMatrix({x:0,y:0},T),N=i.addShape("rect",{attrs:$n({x:O.x+(M.lineWidth||1),y:O.y+(M.lineWidth||1),width:S[0]-2*(M.lineWidth||1),height:S[1]-2*(M.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},M),name:"legend-back-rect",capture:!1});return N.toBack(),S},e.prototype.layoutItems=function(){var r=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=r.find(function(w){return w.get("name")==="root"}),u=l.find(function(w){return w.get("name")==="node-group"}),c=l.find(function(w){return w.get("name")==="edge-group"}),f={min:0,max:-1/0};u.get("children").forEach(function(w,b){b===0&&(f.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),E=x.getBBox(),_=E.width,k=E.height,C=0,A=0;a==="vertical"?(C=s[1],A=s[0]+_/2,s[0]=A+S.height+i,S.maxX+C+_/2):(C=s[0]+_/2,A=s[1],s[0]=C+S.width+n,S.maxY+A+k/2),s[0]>f.max&&(f.max=s[0]),w.setMatrix([1,0,0,0,1,0,C,A,1])});var h=f.max-f.min,d={min:0,max:-1/0},p=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?p.maxX+n:p.maxY+i,c.get("children").forEach(function(w,b){b===0&&(d.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),E=x.getBBox(),_=E.width,k=E.height,C=0,A=0;a==="vertical"?(C=s[1],A=s[0],s[0]=A+S.height+i,w.setMatrix([1,0,0,0,1,0,0,A+k/2,1])):(C=s[0],A=s[1],s[0]=C+S.width+n,w.setMatrix([1,0,0,0,1,0,C+_/2,0,1])),s[0]>d.max&&(d.max=s[0])});var v=d.max-d.min;if(o&&o!==""&&o!=="left"){var g=h-v,m=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:c;y.get("children").forEach(function(w){var b=w.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?b[7]+=m:b[6]+=m,w.setMatrix(b)})}},e.prototype.processData=function(){var r=this.get("data"),n={nodes:[],edges:[]};r.nodes&&(r.nodes.sort(function(i,a){return i.order-a.order}),r.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||yc(),type:i.type||"circle",style:$n({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:$n({fontFamily:"Arial"},f)}})})),r.edges&&(r.edges.sort(function(i,a){return i.order-a.order}),r.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||yc(),type:s,size:u,style:$n({lineWidth:Ft(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:$n({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(r){var n=this.get(r);if(Pt(n))this.set(r,[n,n,n,n]);else if(Ft(n))switch(n.length){case 0:this.set(r,[0,0,0,0]);break;case 1:this.set(r,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(r,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(r,[n[0],n[1],n[2],n[1]]);break}return this.get(r)},e.prototype.getShapeSize=function(r){var n,i,a;return r.size&&(Ft(r.size)?(n=r.size[0],i=r.size[1]||r.size[0],a=r.size[0]/2):Pt(r.size)&&(n=r.size,i=r.size,a=r.size/2)),r.style&&(r.style.width&&(n=r.style.width),r.style.height&&(i=r.style.height),r.style.r&&(a=r.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},e.prototype.getStyle=function(r,n){var i=r==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return $n($n({},i),n.style||{})},e.prototype.destroy=function(){var r=this.get("legendCanvas");r==null||r.destroy();var n=this.get("graph"),i=n.get("container"),a=this.get("container");i.removeChild(a)},e}(Ho);const nvt=rvt;var ivt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vs=function(){return Vs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vs.apply(this,arguments)},GX=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};typeof document<"u"&&TT(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var UX="canvas-annotation",avt=function(t){ivt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var r={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":r=Vs(Vs({},r),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return r},e.prototype.getDOMContent=function(r){if(!this.destroyed){var n=r.collapsed,i=r.maxWidth,a=r.title,o=a===void 0?"":a,s=r.content,l=s===void 0?"":s,u=r.borderRadius,c=u===void 0?5:u,f=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",h=n?"":" <p class='g6-annotation-content'>".concat(l,"</p>"),d="<p class='g6-annotation-close'>x</p>",p=n?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(i,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(p,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(f,`
          `).concat(d,`
        </div>
        `).concat(h,`
      </div>`)}},e.prototype.init=function(){var r=this;if(!r.destroyed){var n=r.get("graph"),i=n.getContainer(),a=r.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),i.appendChild(a)):a=i,this.set("container",a);var s=i.getBoundingClientRect(),l=new nf({container:i,width:s.right-s.left,height:s.bottom-s.top});Cr(l.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",hb(function(){return r.resizeCanvas(r)},100));var u=l.addGroup({id:"annotation-link-group"});r.set("linkGroup",u),r.set("canvas",l),r.get("getTitle")||r.set("getTitle",function(f){var h,d=((h=f==null?void 0:f.getModel)===null||h===void 0?void 0:h.call(f))||{},p=d.label,v=d.id;return p||v||"-"}),r.get("getContent")||r.set("getContent",function(f){var h,d;if(!f)return"-";var p=((h=f.getModel)===null||h===void 0?void 0:h.call(f))||{},v=p.label,g=p.id,m=(d=f.getType)===null||d===void 0?void 0:d.call(f),y=m?"".concat(m,": "):"";return"".concat(y).concat(v||g||"")});var c=r.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var r=this;if(!this.destroyed){var n=this.get("containerCfg"),i=this.get("graph"),a=i.getContainer(),o=a.getBoundingClientRect(),s=o.left,l=o.right,u=o.top,c=o.bottom,f=c-u,h=l-s,d=n.position,p=d===void 0?"top":d,v=n.offsetX,g=v===void 0?0:v,m=n.offsetY,y=m===void 0?0:m,w=GX(n,["position","offsetX","offsetY"]),b=n.height,x=b===void 0?"fit-content":b,S=n.width,E=S===void 0?i.getWidth():S;x==="100%"&&(x=f),E==="100%"&&(E=h);var _="unset",k="unset",C={};switch(p){case"right":_="".concat(f,"px"),C={top:0,right:0},C.right+=s+g,C.top+=u+y;break;case"bottom":k="".concat(h,"px"),C={bottom:0,left:0},C.left+=s+g,C.bottom+=u+y;break;case"top":k="".concat(h,"px");case"left":_="".concat(f,"px");default:C={top:0,left:0},C.left+=s+g,C.top+=u+y;break}Object.keys(C).forEach(function(M){C[M]="".concat(C[M],"px")});var A=wn("<div class='".concat(n.className," g6-annotation-container'></div>"));return Cr(A,Vs(Vs({position:"absolute",display:p==="top"||p==="bottom"?"inline-flex":"unset",width:Pt(E)?"".concat(E,"px"):E,height:Pt(x)?"".concat(x,"px"):x,maxHeight:_,maxWidth:k,overflow:"scroll"},C),w)),a.appendChild(A),A.addEventListener("scroll",function(M){r.updateLinks()}),A}},e.prototype.resizeCanvas=function(r){clearTimeout(r.resizeTimer),r.resizeTimer=setTimeout(function(){if(!(!r||r.destroyed)){var n=r.get("container").getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top;r.get("canvas").changeSize(i,a),r.updateOutsideCards(r)}},250)},e.prototype.updateOutsideCards=function(r){var n=r||this,i=n.get("cardInfoMap")||{},a=n.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),l=a.getClientByPoint(o.x,o.y),u=l.x,c=l.y,f=a.getClientByPoint(s.x,s.y),h=f.x,d=f.y;Object.values(i).forEach(function(p){var v=p.card;if(v){var g=v.style,m=cp(g.left),y=cp(g.top),w=v.getBoundingClientRect(),b=w.width,x=w.height,S=m,E=y;m+b>h-u&&(S=h-u-b),m<0&&(S=0),y+x>d-c&&(E=d-c-x),y<0&&(E=0),Cr(v,{left:"".concat(S,"px"),top:"".concat(E,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(r){if(!this.destroyed){var n=r.item;this.toggleAnnotation(n)}},e.prototype.hideCards=function(){var r=this;if(!r.destroyed){var n=r.get("cardInfoMap")||{};Object.keys(n).forEach(function(i){r.hideCard(i)})}},e.prototype.toggleAnnotation=function(r,n){var i,a;n===void 0&&(n={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},l=o.get("graph"),u=o.get("container"),c=o.get("containerCfg"),f=Object.assign({},o.get("cardCfg")||{},n),h=f.minHeight,d=f.minWidth,p=f.width,v=f.height,g=f.collapsed,m=g===void 0?!1:g,y=f.x,w=f.y,b=f.title,x=f.content,S=f.maxTitleLength,E=f.defaultBegin,_=GX(f,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),k=o.get("linkGroup"),C=this.get("rows")||[[]],A=(i=r.isCanvas)===null||i===void 0?void 0:i.call(r),M=A?UX:r.getID(),T=s[M]||{},O=T.card,N=T.link,R=T.x,B=T.y,F=T.title,D=T.content,L=this.get("getTitle"),G=this.get("getContent"),Y=this.get("getContentPlaceholder")||function(){return""},Z=this.get("getTitlePlaceHolder")||function(){return""},q=Y(r),pe=Z(r),Se=wn(this.getDOMContent(Vs({itemId:M,collapsed:m,title:((a=F||b||(L==null?void 0:L(r)))===null||a===void 0?void 0:a.substr(0,S))||pe,content:D||x||(G==null?void 0:G(r))||q},_))),Ae=Pt(h)?"".concat(h,"px"):h;Cr(Se,{minHeight:m?"unset":Ae,minWidth:Pt(d)?"".concat(d,"px"):d,height:v,width:p});var He=!!O;He?(N==null||N.remove(!0),u.replaceChild(Se,O)):u.appendChild(Se);var ct;if(!c){if(ct=u.getBoundingClientRect()||{},y!==void 0&&w!==void 0)R=y,B=w;else if(!He&&!A){var st=ct.top,Mt=E||{},yt=Mt.left,ar=Mt.right,Jt=ar===void 0?16:ar,er=Mt.top,yr=er===void 0?8:er,or=Mt.bottom,zt=Jt,tr=yr;isNaN(yt)||(zt=u.scrollWidth-yt),isNaN(or)||(tr=u.scrollHeight-or);var Dr=Pt(d)?d:100;R=u.scrollWidth-Se.scrollWidth-(C.length-1)*Dr-zt;var Ze=C[C.length-1],oe=(Ze[Ze.length-1]||{}).bbox;B=(oe==null?void 0:oe.bottom)-st||tr}Cr(Se,{position:"absolute",left:"".concat(R,"px"),top:"".concat(B,"px"),cusor:c?"unset":"move"})}this.bindListener(Se,M);var P=Se.getBoundingClientRect();if(!A){var _e=tD(r,P,l,this.get("canvas")),Pe=this.get("linkStyle");N=k.addShape("path",{attrs:Vs({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:_e},Pe)})}if(s[M]=Vs(Vs({},s[M]||{}),{id:M,collapsed:m,card:Se,link:N,x:R,y:B,cardBBox:P,content:D||x,title:F||b,contentPlaceholder:q,titlePlaceholder:pe,isCanvas:A}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var ye=!isNaN(y)&&!isNaN(w);if(!He&&!A&&!ye){var Fe=ct.bottom,Be=Fe===void 0?0:Fe,st=ct.top;C[C.length-1].push({id:M,bbox:P}),P.top>Be-st-P.height-16&&C.push([]),this.set("rows",C)}}this.updateCardSize(M);var Xe=this.get("onAnnotationChange");Xe==null||Xe(s[M],He?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("container"),i=this.get("containerCfg").position,a=n.getBoundingClientRect().width,o=getComputedStyle(n),s=cp(o.paddingLeft)+cp(o.paddingRight);a-=s,Object.values(r).forEach(function(l){var u=l.card,c=u.getBoundingClientRect().width;switch(i){case"right":Cr(u,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Cr(u,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(r){if(!this.destroyed){var n=this.get("graph"),i=this.get("cardInfoMap");if(i){var a=i[r].collapsed,o=n.findById(r);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(r):this.toggleAnnotation(o,{collapsed:!a}),i[r]=Vs(Vs({},i[r]),{collapsed:!a})}}}},e.prototype.hideCard=function(r){if(!this.destroyed){var n=this.get("cardInfoMap");if(!(!n||!n[r])){var i=n[r],a=i.card,o=i.link;Cr(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(n[r],"hide")}}},e.prototype.removeCard=function(r){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=n[r],a=i.card,o=i.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete n[r];var l=this.get("onAnnotationChange");l(i,"remove")}}},e.prototype.bindListener=function(r,n){var i=this;if(!this.destroyed){r.addEventListener("mousemove",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseEnterIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),r.addEventListener("mouseout",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseLeaveIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),r.addEventListener("mouseenter",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!0)}var d=u[n].link;if(d){var p=i.get("linkHighlightStyle")||{};d.attr(p)}}}),r.addEventListener("mouseleave",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!1)}var d=u[n].link;if(d){var p=i.get("linkHighlightStyle")||{};Object.keys(p).forEach(function(g){d.attr(g,void 0),d.attr(g,void 0)});var v=i.get("linkStyle");d.attr(v)}}}),r.addEventListener("click",function(l){var u=(i.get("cardCfg")||{}).onClickIcon;if(l.target.className==="g6-annotation-collapse"||l.target.className==="g6-annotation-expand"){var c=i.get("cardCfg").collapseType;c==="hide"?i.hideCard(n):i.handleExpandCollapseCard(n),u==null||u(l,n,l.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(l.target.className==="g6-annotation-close"){var f=i.get("cardCfg").closeType;f==="remove"?i.removeCard(n):i.hideCard(n),u==null||u(l,n,"close")}});var a=this.get("editable");a&&r.addEventListener("dblclick",function(l){var u=i.get("cardInfoMap"),c=(i.get("cardCfg")||{}).maxTitleLength,f=c===void 0?20:c;if(u){var h=l.target,d=h.className;if(!(d!=="g6-annotation-title"&&d!=="g6-annotation-content")){var p=d==="g6-annotation-title"?h.getBoundingClientRect():h.parentNode.getBoundingClientRect(),v=p.width,g=p.height,m=getComputedStyle(h),y=d==="g6-annotation-title"?"input":"textarea",w=wn("<".concat(y,' class="').concat(d,'-input" type="textarea" style="width:').concat(v,"px; height: ").concat(g,'px; min-width: 16px;"/>')),b=wn('<div class="'.concat(d,'-input-wrapper" style="width: ').concat(v,"px; height: ").concat(g,"px; min-width: 16px; margin-right: ").concat(m.marginRight,'" />'));b.appendChild(w),h.parentNode.replaceChild(b,h);var x=u[n],S=x.contentPlaceholder,E=x.titlePlaceholder,_=x.content,k=x.title,C=_;d==="g6-annotation-title"?(w.name="title",w.maxLength=f,C=k):w.name="content",C?(w.innerHTML=h.innerHTML,w.value=h.innerHTML):w.placeholder=d==="g6-annotation-title"?E:S,w.focus(),w.addEventListener("blur",function(A){w.value&&(h.innerHTML=w.value,x[w.name||"title"]=w.value),b.parentNode.replaceChild(h,b),i.updateCardSize(n);var M=i.get("onAnnotationChange");M==null||M(x,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];r.draggable=!0,r.addEventListener("dragstart",function(l){var u=l.target.className;if(!o.includes(u)){var c=r.style;i.set("dragging",{card:r,x:l.clientX,y:l.clientY,left:cp(c.left),top:cp(c.top)})}}),r.addEventListener("drag",function(l){l.preventDefault();var u=i.get("cardInfoMap");if(u){var c=l.clientX,f=l.clientY,h=i.get("dragging");if(!(isNaN(c)||isNaN(f)||!h)){var d=h.x,p=h.y,v=h.left,g=h.top,m=h.card,y=c-d,w=f-p;v+=y,g+=w;var b=i.get("graph"),x=b.getPointByCanvas(0,0),S=b.getPointByCanvas(b.getWidth(),b.getHeight()),E=b.getClientByPoint(x.x,x.y),_=E.x,k=E.y,C=b.getClientByPoint(S.x,S.y),A=C.x,M=C.y,T=m.getBoundingClientRect(),O=T.right-T.left,N=T.bottom-T.top;(v>A-_-O&&y>0||v<0&&y<0)&&(v-=y),(g>M-k-N&&w>0||g<0&&w<0)&&(g-=w),Cr(m,{left:"".concat(v,"px"),top:"".concat(g,"px"),visibility:"hidden"}),d=c,p=f;var R=(u[n]||{}).link;if(R){var B=b.findById(n);R.attr("path",tD(B,T,b,i.get("canvas")))}i.set("dragging",{x:d,y:p,left:v,top:g,card:m})}}});var s=function(u){var c=i.get("cardInfoMap");if(c){var f=i.get("dragging");if(f){var h=f.left,d=f.top,p=f.card;c[n].x=h,c[n].y=d,Cr(p,{visibility:"visible"}),i.set("dragging",!1);var v=i.get("rows");v==null||v.forEach(function(m){for(var y=m.length-1;y>=0;y--)m[y].id===n&&m.splice(y,1)});var g=i.get("onAnnotationChange");g==null||g(c[n],"update")}}};r.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(r){var n=this.get("cardInfoMap");if(n){var i=n[r].card,a=i.getBoundingClientRect().width,o=i.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),l=cp(s.marginLeft),u=o.getBoundingClientRect().width;Cr(o,{marginRight:"".concat(a-l-24-16-u,"px")})}}},e.prototype.updateLink=function(r){var n=r.item;if(n){var i=this.get("cardInfoMap");if(i){var a=this.get("canvas"),o=this.get("graph"),s=n.getID(),l=i[s]||{},u=l.link,c=l.card;if(u){var f=tD(n,c.getBoundingClientRect(),o,a);u.attr("path",f)}}}},e.prototype.updateLinks=function(){var r=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=i.findById(o);r.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var r=this,n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=a.card,l=a.isCanvas;if(!(!s||l||s.style.display==="none")){var u=i.findById(o);u&&u.isVisible()?r.toggleAnnotation(u):r.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(r){var n=r.item,i=r.visible;if(!(!n||n.destroyed)){var a=this.get("cardInfoMap");if(a){var o=n.getID();a[o]&&(i||this.hideCard(o))}}},e.prototype.saveData=function(r){r===void 0&&(r=!1);var n=this.get("cardInfoMap");if(n){var i=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(n).forEach(function(l){var u=l.title,c=l.content,f=l.x,h=l.y,d=l.id,p=l.collapsed,v=l.card;if(!(v&&v.style.display==="none"&&!r)){var g=i.findById(d)||i.get("canvas");s.push({id:d,x:f,y:h,collapsed:p,title:u||(a==null?void 0:a(g)),content:c||(o==null?void 0:o(g)),visible:v&&v.style.display!=="none"})}}),s}},e.prototype.readData=function(r){var n=this,i=this.get("graph");r.forEach(function(a){var o=a.id,s=a.x,l=a.y,u=a.title,c=a.content,f=a.collapsed,h=a.visible,d=i.findById(o);if(!d&&o===UX&&(d=i.get("canvas")),!d){var p=n.get("cardInfoMap")||{};p[o]=a,n.set("cardInfoMap",p);return}n.toggleAnnotation(d,{x:s,y:l,title:u,content:c,collapsed:f}),h||n.hideCard(o)})},e.prototype.clear=function(){var r=this.get("cardInfoMap");if(r){var n=this.get("container");Object.values(r).forEach(function(i){var a=i.card,o=i.link;n.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var r;this.clear(),(r=this.get("canvas"))===null||r===void 0||r.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Ho);const ovt=avt;var svt=function(e,r){var n,i,a=1/0;Object.keys(e).forEach(function(l){var u=e[l];Object.keys(r).forEach(function(c){var f=r[c],h=u.x-f.x,d=u.y-f.y,p=h*h+d*d;a>p&&(a=p,n=u,i=f)})});var o=20,s=Ta.getControlPoint(n,i,.5,o);return[["M",n.x,n.y],["Q",s.x,s.y,i.x,i.y]]},tD=function(e,r,n,i){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var l=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY,d=e.getModel(),p=d.x,v=d.y;u+=p,c+=v,f+=p,h+=v,o={left:{x:u,y:(c+h)/2},right:{x:f,y:(c+h)/2},top:{x:(u+f)/2,y:c},bottom:{x:(u+f)/2,y:h}}}Object.keys(o).forEach(function(k){var C=o[k],A=C.x,M=C.y,T=n.getClientByPoint(A,M);o[k]=i.getPointByClient(T.x,T.y)});var g=r.top,m=g===void 0?0:g,y=r.left,w=y===void 0?0:y,b=r.right,x=b===void 0?0:b,S=r.bottom,E=S===void 0?0:S,_={left:i.getPointByClient(w,(m+E)/2),right:i.getPointByClient(x,(m+E)/2),top:i.getPointByClient((w+x)/2,m),bottom:i.getPointByClient((w+x)/2,E)};return svt(o,_)},cp=function(e){return Number(e.replace(/\s+|px/gi,""))||0},os={PluginBase:Ho,Menu:Lht,Grid:Aht,Minimap:zht,Bundling:Wht,ToolBar:Kht,Tooltip:Jht,Fisheye:Hht,TimeBar:zpt,ImageMinimap:Vpt,EdgeFilterLens:qpt,SnapLine:Jpt,Legend:nvt,Annotation:ovt};Lf("circle",{options:{size:dt.defaultNode.size,style:{x:0,y:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:z({},dt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=cn({},i,e.icon),s="".concat(this.type,"-keyShape"),l=r.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});r.shapeMap[s]=l;var u=o.width,c=o.height,f=o.show,h=o.text;if(f){var d="".concat(this.type,"-icon");h?r.shapeMap[d]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):r.shapeMap[d]=r.addShape("image",{attrs:z({x:-u/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,r),l},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=wi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2;if(o){var p="link-point-left";r.shapeMap[p]=r.addShape("circle",{attrs:z(z({},f),{x:-d,y:0,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var v="link-point-right";r.shapeMap[v]=r.addShape("circle",{attrs:z(z({},f),{x:d,y:0,r:u/2||c||5}),className:v,name:v,isAnchorPoint:!0})}if(a){var g="link-point-top";r.shapeMap[g]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:-d,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";r.shapeMap[m]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:d,r:u/2||c||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=cn({},r,n),a=this.getSize(e),o=a[0]/2,s=z({x:0,y:0,r:o},i);return s},update:function(e,r,n){var i=r.getContainer(),a=this.getSize(e),o=z({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,r,o,!0,n),this.updateLinkPoints(e,i)}},"single-node");Lf("rect",{options:{size:[100,30],style:{radius:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:z({},dt.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return r.shapeMap["".concat(this.type,"-keyShape")]=i,this.drawLinkPoints(e,r),i},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=wi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=z({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=r.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=$t({},a,s.attr(),l);u=$t(u,e.style),this.updateShape(e,r,u,!1,n),this.updateLinkPoints(e,i)}},"single-node");Lf("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:z({},dt.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});r.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:z({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=wi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,p=h[1]/2;o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},f),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},f),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:-p,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:p,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getSize(e),o=a[0]/2,s=a[1]/2,l=z({x:0,y:0,rx:o,ry:s},i);return l},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},l=r.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");Lf("diamond",{options:{size:[80,80],style:{stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:z({},dt.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:z({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=wi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var r=this.getSize(e),n=r[0],i=r[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getPath(e),o=z({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");Lf("triangle",{options:{size:40,direction:"up",style:{stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:z({},dt.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(e),l=e.direction||o,u=r.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=u;var c=a.width,f=a.height,h=a.show,d=a.offset,p=a.text;if(h)if(p)r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var v=-c/2,g=-f/2;(l==="up"||l==="down")&&(g+=d),(l==="left"||l==="right")&&(v+=d),r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:z({x:v,y:g},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,r),u},drawLinkPoints:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=e.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,h=a.size,d=a.r,p=wi(a,["top","left","right","bottom","size","r"]),v=this.getSize(e),g=v[0];if(u){var m=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?m=[-w,y]:s==="down"?m=[-w,-y]:s==="left"&&(m=[-w,w-y]),m&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},p),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var b=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?b=[w,y]:s==="down"?b=[w,-y]:s==="right"&&(b=[w,w-y]),b&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},p),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var x=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?x=[w-y,-y]:s==="left"?x=[w,-y]:s==="right"&&(x=[-w,-y]),x&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},p),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var S=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="down"?S=[-w+y,y]:s==="left"?S=[w,y]:s==="right"&&(S=[-w,y]),S&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},p),{x:S[0],y:S[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var r=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||r,i=this.getSize(e),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getPath(e),o=z({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,r){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=e.direction||a,s=r.shapeMap["link-point-left"]||r.find(function(R){return R.get("className")==="link-point-left"}),l=r.shapeMap["link-point-right"]||r.find(function(R){return R.get("className")==="link-point-right"}),u=r.shapeMap["link-point-top"]||r.find(function(R){return R.get("className")==="link-point-top"}),c=r.shapeMap["link-point-bottom"]||r.find(function(R){return R.get("className")==="link-point-bottom"}),f=i,h=s||l||u||c;h&&(f=h.attr());var d=$t({},f,e.linkPoints),p=d.fill,v=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var y=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},w=y.left,b=y.right,x=y.top,S=y.bottom,E=this.getSize(e),_=E[0],k={r:m,fill:p,stroke:v,lineWidth:g},C=null,A=_*Math.sin(1/3*Math.PI),M=_*Math.sin(1/3*Math.PI);o==="up"?C=[-M,A]:o==="down"?C=[-M,-A]:o==="left"&&(C=[-M,M-A]),C&&(s?!w&&w!==void 0?(s.remove(),delete r.shapeMap["link-point-left"]):s.attr(z(z({},k),{x:C[0],y:C[1]})):w&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},k),{x:C[0],y:C[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var T=null;o==="up"?T=[M,A]:o==="down"?T=[M,-A]:o==="right"&&(T=[M,M-A]),T&&(l?!b&&b!==void 0?(l.remove(),delete r.shapeMap["link-point-right"]):l.attr(z(z({},k),{x:T[0],y:T[1]})):b&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},k),{x:T[0],y:T[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var O=null;o==="up"?O=[M-A,-A]:o==="left"?O=[M,-A]:o==="right"&&(O=[-M,-A]),O&&(u?!x&&x!==void 0?(u.remove(),delete r.shapeMap["link-point-top"]):u.attr(z(z({},k),{x:O[0],y:O[1]})):x&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},k),{x:O[0],y:O[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var N=null;o==="down"?N=[-M+A,A]:o==="left"?N=[M,A]:o==="right"&&(N=[-M,A]),N&&(c?!S&&S!==void 0?(c.remove(),delete r.shapeMap["link-point-bottom"]):c.attr(z(z({},k),{x:N[0],y:N[1]})):S&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},k),{x:N[0],y:N[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");Lf("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:dt.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:dt.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:dt.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],l=o[1],u=r.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=u;var c=i.show,f=wi(i,["show"]);return c&&(r.shapeMap["pre-rect"]=r.addShape("rect",{attrs:z({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,r),this.drawStateIcon(e,r),this.drawLinkPoints(e,r),u},drawLogoIcon:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=wi(i,["width","height","x","y","offset","text"]);h?r.shapeMap["rect-logo-icon"]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):r.shapeMap["rect-logo-icon"]=r.addShape("image",{attrs:z(z({},d),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=wi(i,["width","height","x","y","offset","text"]);h?r.shapeMap["rect-state-icon"]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):r.shapeMap["rect-state-icon"]=r.addShape("image",{attrs:z(z({},d),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=wi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,r){var n=this.getOptions(e),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=null,d=s.show,p=s.width,v=-f/2+a.offset;d&&(v=-f/2+p+a.offset);var g=a.style,m=u.style,y=u.paddingTop;return Ve(e.description)?(h=r.addShape("text",{attrs:z(z({},g),{x:v,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),r.shapeMap["text-shape"]=h,r.shapeMap["rect-description"]=r.addShape("text",{attrs:z(z({},m),{x:v,y:17+(y||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=r.addShape("text",{attrs:z(z({},g),{x:v,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),r.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=z({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=c[1],d=r.get("keyShape");d.attr(z(z({},a),{x:-f/2,y:-h/2,width:f,height:h}));var p=r.getContainer(),v=p.shapeMap["rect-logo-icon"]||p.find(function(Se){return Se.get("className")==="rect-logo-icon"}),g=v?v.attr():{},m=$t({},g,e.logoIcon),y=m.width;y===void 0&&(y=this.options.logoIcon.width);var w=e.logoIcon?e.logoIcon.show:void 0,b=s.offset,x=-f/2+y+b;!w&&w!==void 0&&(x=-f/2+b);var S=p.shapeMap["node-label"]||p.find(function(Se){return Se.get("className")==="node-label"}),E=p.shapeMap["rect-description"]||p.find(function(Se){return Se.get("className")==="rect-description"});if(e.label)if(!S)p.shapeMap["node-label"]=p.addShape("text",{attrs:z(z({},s.style),{x,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var _=e.labelCfg?e.labelCfg.style:{},k=$t({},S.attr(),_);e.label&&(k.text=e.label),k.x=x,Ve(e.description)&&(k.y=-5),E&&(E.resetMatrix(),E.attr({x})),S.resetMatrix(),S.attr(k)}if(Ve(e.description)){var C=u.paddingTop;if(!E)p.shapeMap["rect-description"]=p.addShape("text",{attrs:z(z({},u.style),{x,y:17+(C||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var _=e.descriptionCfg?e.descriptionCfg.style:{},A=$t({},E.attr(),_);Ve(e.description)&&(A.text=e.description),A.x=x,E.resetMatrix(),E.attr(z(z({},A),{y:17+(C||0)}))}}var M=p.shapeMap["pre-rect"]||p.find(function(Se){return Se.get("className")==="pre-rect"});if(M&&!M.destroyed){var T=$t({},M.attr(),e.preRect);M.attr(z(z({},T),{x:-f/2,y:-h/2,height:h}))}if(v&&!v.destroyed)if(!w&&w!==void 0)v.remove(),delete p.shapeMap["pre-rect"];else{var O=m.width,N=m.height,R=m.x,B=m.y,F=m.offset,D=wi(m,["width","height","x","y","offset"]);v.attr(z(z({},D),{x:R||-f/2+O+F,y:B||-N/2,width:O,height:N}))}else w&&this.drawLogoIcon(e,p);var L=p.shapeMap["rect-state-icon"]||p.find(function(Se){return Se.get("className")==="rect-state-icon"}),G=L?L.attr():{},Y=$t({},G,e.stateIcon);if(L){!Y.show&&Y.show!==void 0&&(L.remove(),delete p.shapeMap["rect-state-icon"]);var Z=Y.width,N=Y.height,R=Y.x,B=Y.y,q=Y.offset,pe=wi(Y,["width","height","x","y","offset"]);L.attr(z(z({},pe),{x:R||f/2-Z+q,y:B||-N/2,width:Z,height:N}))}else Y.show&&this.drawStateIcon(e,p);this.updateLinkPoints(e,p)},getOptions:function(e,r){return r==="move"?e:cn({},this.options,this.getCustomConfig(e)||{},e)}},"single-node");Lf("star",{options:{size:60,style:{stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:z({},dt.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:z({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,h=wi(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e),p=d[0];if(s){var v=Math.cos(.1*Math.PI)*p,g=Math.sin((18+72*0)/180*Math.PI)*p;r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var v=Math.cos(.5*Math.PI)*p,g=Math.sin((18+72*1)/180*Math.PI)*p;r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var v=Math.cos(.9*Math.PI)*p,g=Math.sin((18+72*2)/180*Math.PI)*p;r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var v=Math.cos(1.3*Math.PI)*p,g=Math.sin((18+72*3)/180*Math.PI)*p;r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:z(z({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var v=Math.cos(1.7*Math.PI)*p,g=Math.sin((18+72*4)/180*Math.PI)*p;r.shapeMap["link-point-right-bottom"]=r.addShape("circle",{attrs:z(z({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var r=this.getSize(e),n=r[0],i=n*3/8,a=e.innerR||i;return Ta.getStarPath(n,a)},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=$t({},r,n),a=this.getPath(e),o=z({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,r){var n=this.getOptions({}).linkPoints,i=r.shapeMap["link-point-left"]||r.find(function(A){return A.get("className")==="link-point-left"}),a=r.shapeMap["link-point-right"]||r.find(function(A){return A.get("className")==="link-point-right"}),o=r.shapeMap["link-point-top"]||r.find(function(A){return A.get("className")==="link-point-top"}),s=r.shapeMap["link-point-left-bottom"]||r.find(function(A){return A.get("className")==="link-point-left-bottom"}),l=r.shapeMap["link-point-left-bottom"]||r.find(function(A){return A.get("className")==="link-point-right-bottom"}),u=n,c=i||a||o||s||l;c&&(u=c.attr());var f=$t({},u,e.linkPoints),h=f.fill,d=f.stroke,p=f.lineWidth,v=f.size/2;v||(v=f.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,w=g.top,b=g.leftBottom,x=g.rightBottom,S=this.getSize(e),E=S[0],_={r:v,fill:h,stroke:d,lineWidth:p},k=Math.cos((18+72*0)/180*Math.PI)*E,C=Math.sin((18+72*0)/180*Math.PI)*E;a?!y&&y!==void 0?(a.remove(),delete r.shapeMap["link-point-right"]):a.attr(z(z({},_),{x:k,y:-C})):y&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:z(z({},_),{x:k,y:-C}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),k=Math.cos((18+72*1)/180*Math.PI)*E,C=Math.sin((18+72*1)/180*Math.PI)*E,o?!w&&w!==void 0?(o.remove(),delete r.shapeMap["link-point-top"]):o.attr(z(z({},_),{x:k,y:-C})):w&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:z(z({},_),{x:k,y:-C}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),k=Math.cos((18+72*2)/180*Math.PI)*E,C=Math.sin((18+72*2)/180*Math.PI)*E,i?!m&&m!==void 0?(i.remove(),delete r.shapeMap["link-point-left"]):i.attr(z(z({},_),{x:k,y:-C})):m&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:z(z({},_),{x:k,y:-C}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),k=Math.cos((18+72*3)/180*Math.PI)*E,C=Math.sin((18+72*3)/180*Math.PI)*E,s?!b&&b!==void 0?(s.remove(),delete r.shapeMap["link-point-left-bottom"]):s.attr(z(z({},_),{x:k,y:-C})):b&&(r.shapeMap["link-point-left-bottom"]=r.addShape("circle",{attrs:z(z({},_),{x:k,y:-C}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),k=Math.cos((18+72*4)/180*Math.PI)*E,C=Math.sin((18+72*4)/180*Math.PI)*E,l?!x&&x!==void 0?(l.remove(),delete r.shapeMap["link-point-right-bottom"]):l.attr(z(z({},_),{x:k,y:-C})):x&&(r.shapeMap["link-point-right-bottom"]=r.addShape("circle",{attrs:z(z({},_),{x:k,y:-C}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var WX=Ta.defaultSubjectColors,fw="fan-shape-";Lf("donut",{options:{size:dt.defaultNode.size,style:{x:0,y:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dt.defaultNode.linkPoints.size,lineWidth:dt.defaultNode.linkPoints.lineWidth,fill:dt.defaultNode.linkPoints.fill,stroke:dt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:z({},dt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=cn({},i,e.icon),s=r.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});r.shapeMap["".concat(this.type,"-keyShape")]=s;var l=o.width,u=o.height,c=o.show,f=o.text;return c&&(f?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:z({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:z({x:-l/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),lvt(e,r,s),this.drawLinkPoints(e,r),s},updateShape:function(e,r,n,i,a){var o=r.get("keyShape");o.attr(z({},n)),uvt(e,r,o),this.updateLabel(e,r,a),i&&this.updateIcon(e,r)}},"circle");var lvt=function(e,r,n){var i=e.donutAttrs,a=i===void 0?{}:i,o=e.donutColorMap,s=o===void 0?{}:o,l=Object.keys(a).length;if(a&&l>1){var u=Zhe(a,s),c=u.configs,f=u.totalValue;if(f){var h=Jhe(n),d=h.lineWidth,p=h.arcR,v=[p,0],g=0;if(l===1){ON(r,{arcR:p,arcBegin:v,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:f,drawWhole:!0});return}for(var m=0;m<c.length;m++){var y=ON(r,{arcR:p,arcBegin:v,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f});if(y.shouldEnd)return;v=y.arcBegin,g=y.beginAngle}}}},ON=function(e,r){var n=r.arcR,i=r.arcBegin,a=r.beginAngle,o=r.config,s=r.fanIndex,l=r.lineWidth,u=r.totalValue,c=r.drawWhole,f=c===void 0?!1:c,h=r.updateShape,d=h===void 0?void 0:h,p=o.value/u;if(p<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};var v,g,m;if(f||p>.999)v=[n,1e-4],m=1;else{var y=p*Math.PI*2;g=a+y,v=[n*Math.cos(g),-n*Math.sin(g)],m=y>Math.PI?1:0}var w={path:[["M",i[0],i[1]],["A",n,n,0,m,0,v[0],v[1]]],stroke:o.color||(d==null?void 0:d.attr("stroke"))||WX[s%WX.length],lineWidth:l};return d?d.attr(w):e.shapeMap["".concat(fw).concat(s)]=e.addShape("path",{attrs:w,name:"".concat(fw).concat(s),draggable:!0}),{beginAngle:g,arcBegin:v,shape:e.shapeMap["".concat(fw).concat(s)],shouldEnd:f||p>.999}},uvt=function(e,r,n){var i=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},l=r.getContainer();if(i){var u=Zhe(i,o),c=u.configs,f=u.totalValue;if(f)for(var h=Jhe(n),d=h.lineWidth,p=h.arcR,v=[p,0],g=0,m=0;m<c.length;m++){var y="".concat(fw).concat(m),w=ON(l,{arcR:p,arcBegin:v,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f,drawWhole:c.length===1,updateShape:l.shapeMap[y]});if(w.shape&&(s[y]=!0),w.shouldEnd)break;v=w.arcBegin,g=w.beginAngle}}var b=Object.keys(l.shapeMap).filter(function(x){return x.includes(fw)});b.forEach(function(x){s[x]||(l.shapeMap[x].remove(!0),delete l.shapeMap[x])})},Zhe=function(e,r){var n=0,i=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(i.push({key:a,value:o,color:r[a]}),n+=o)}),{totalValue:n,configs:i}},Jhe=function(e){var r=e.attr("r"),n=.6*r,i=(r+n)/2,a=r-n;return{lineWidth:a,arcR:i}},kE=function(e){var r=e.x,n=e.y;return{x:r,y:n,centerX:r,centerY:n,minX:r,minY:n,maxX:r,maxY:n,height:0,width:0}},cvt=function(e){e===void 0&&(e=[]);var r=[],n=[];e.forEach(function(l){r.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,r),a=Math.max.apply(Math,r),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},JF=function(e){for(var r=[],n={},i=e.length,a=i-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,r.push(o))}return r},ede=function(e){return JF(e)},fM=function(e,r){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-r,minY:e.minY-r,maxX:e.maxX+r,maxY:e.maxY+r,height:e.height+2*r,width:e.width+2*r}:e},fvt=function(e,r){var n=Math.abs(e.x-r.centerX),i=Math.abs(e.y-r.centerY);return n===0&&i===0?0:n/r.width>i/r.height},DN=function(e,r,n){var i=fvt(r,e);if(i===0){var a=e.centerX,o=e.centerY;return n.y<r.y?o=e.minY:n.x>r.x?a=e.maxX:n.x<r.x?a=e.minX:n.x===r.x&&(o=e.maxY),{x:a,y:o}}return i?{x:r.x>e.centerX?e.maxX:e.minX,y:r.y}:{x:r.x,y:r.y>e.centerY?e.maxY:e.minY}},VX=function(e,r){var n=Math.min(e.minX,r.minX),i=Math.min(e.minY,r.minY),a=Math.max(e.maxX,r.maxX),o=Math.max(e.maxY,r.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},PN=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},ME=function(e,r){var n=e.x,i=e.y;return n<r.minX||n>r.maxX||i<r.minY||i>r.maxY},hvt=function(e,r){return r<e.minX||r>e.maxX?[]:[{x:r,y:e.minY},{x:r,y:e.maxY}]},dvt=function(e,r){return r<e.minY||r>e.maxY?[]:[{x:e.minX,y:r},{x:e.maxX,y:r}]},pvt=function(e,r){return hvt(e,r.x).concat(dvt(e,r.y))},E2=function(e,r){return Math.abs(e.x-r.x)+Math.abs(e.y-r.y)},vvt=function(e,r){var n=-2,i=0;return r.forEach(function(a){a&&(e.x===a.x&&(i+=n),e.y===a.y&&(i+=n))}),i},HX=function(e,r,n,i,a){return E2(e,r)+E2(e,n)+vvt(e,[r,n,i,a])},gvt=function t(e,r,n,i,a){a===void 0&&(a=0),e.unshift(r[i]),n[i]&&n[i]!==i&&a<=100&&t(e,r,n,n[i],a+1)},AE=function(e,r,n,i){var a=n.x-e.x,o=n.y-e.y,s=i.x-e.x,l=i.y-e.y,u=n.x-r.x,c=n.y-r.y,f=i.x-r.x,h=i.y-r.y,d=a*l-o*s,p=u*h-c*f,v=a*c-o*u,g=s*h-l*f;return d*p<=0&&v*g<=0},LN=function(e,r,n){if(n.width||n.height){var i=PN(n),a=i[0],o=i[1],s=i[2],l=i[3];return AE(e,r,a,o)||AE(e,r,a,l)||AE(e,r,o,s)||AE(e,r,s,l)}return!1},mvt=function(e,r,n,i){var a=[];return e.forEach(function(o){if(o!==r&&(o.x===r.x||o.y===r.y)){if(LN(o,r,n)||LN(o,r,i))return;a.push(o)}}),JF(a)},yvt=function(e,r,n,i,a,o,s){var l,u=[],c=(l={},l[r.id]=r,l),f={},h={},d={};h[r.id]=0,d[r.id]=HX(r,n,r);var p=new rde;p.add({id:r.id,value:d[r.id]});var v={};e.forEach(function(x){v[x.id]=x});for(var g;Object.keys(c).length;){var m=p.minId(!1);if(m)g=c[m];else break;if(g===n){var y=[];return gvt(y,v,f,n.id),y}delete c[g.id],p.remove(g.id),u.push(g);var w=mvt(e,g,i,a),b=function(S){S.forEach(function(E){if(u.indexOf(E)===-1){var _=E.id;c[_]||(c[_]=E);var k=d[g.id]+E2(g,E);if(h[_]&&k>=h[_]){p.add({id:_,value:d[_]});return}f[_]=g.id,h[_]=k,d[_]=h[_]+HX(E,n,r,o,s),p.add({id:_,value:d[_]})}})};b(w)}return[r,n]},wvt=function(e,r,n){return!(e.x===r.x&&r.x===n.x||e.y===r.y&&r.y===n.y)},bvt=function(e,r,n,i){var a=E2(e,r),o=E2(n,r);a<i&&(i=a),o<i&&(i=o);var s={x:r.x-i/a*(r.x-e.x),y:r.y-i/a*(r.y-e.y)},l={x:r.x-i/o*(r.x-n.x),y:r.y-i/o*(r.y-n.y)};return[s,l]},XX=function(e,r){var n=[],i=e[0];return n.push("M".concat(i.x," ").concat(i.y)),e.forEach(function(a,o){var s=e[o+1],l=e[o+2];if(s&&l)if(wvt(a,s,l)){var u=bvt(a,s,l,r),c=u[0],f=u[1];n.push("L".concat(c.x," ").concat(c.y)),n.push("Q".concat(s.x," ").concat(s.y," ").concat(f.x," ").concat(f.y)),n.push("L".concat(f.x," ").concat(f.y))}else n.push("L".concat(s.x," ").concat(s.y));else s&&n.push("L".concat(s.x," ").concat(s.y))}),n.join("")},tde=function(e,r,n,i,a){var o,s;if(!n||!n.getType())o=kE(e);else if(n.getType()==="combo"){var l=n.getKeyShape().getBBox();if(l){var u=n.getModel(),c=u.x,f=u.y;o={x:c,y:f,width:l.width,height:l.height,minX:l.minX+c,maxX:l.maxX+c,minY:l.minY+f,maxY:l.maxY+f},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=kE(e)}else o=n&&n.getBBox();if(!i||!i.getType())s=kE(r);else if(i.getType()==="combo"){var h=i.getKeyShape().getBBox();if(h){var d=i.getModel(),p=d.x,v=d.y;s={x:p,y:v,width:h.width,height:h.height,minX:h.minX+p,maxX:h.maxX+p,minY:h.minY+v,maxY:h.maxY+v},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=kE(r)}else s=i&&i.getBBox();var g=fM(o,a),m=fM(s,a),y=DN(g,e,r),w=DN(m,r,e),b=cvt([y,w]),x=VX(g,b),S=VX(m,b),E=[];E=E.concat(PN(x)).concat(PN(S));var _={x:(e.x+r.x)/2,y:(e.y+r.y)/2};[b,x,S].forEach(function(C){E=E.concat(pvt(C,_).filter(function(A){return ME(A,g)&&ME(A,m)}))}),[{x:y.x,y:w.y},{x:w.x,y:y.y}].forEach(function(C){ME(C,g)&&ME(C,m)&&E.push(C)}),E.unshift(y),E.push(w),E=JF(E);var k=yvt(E,y,w,o,s,e,r);return k.unshift(e),k.push(r),ede(k)},xvt=function(e){if(!(e!=null&&e.length))return e;for(var r=e[e.length-1],n={x:r.x,y:r.y},i=[r],a=[r],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===n.x?i.push(s):(i=[s],n.x=s.x),s.y===n.y?a.push(s):(a=[s],n.y=s.y),i.length>2){var l=e.indexOf(i[1]);l>-1&&e.splice(l,1);continue}if(a.length>2){var l=e.indexOf(a[1]);l>-1&&e.splice(l,1)}}return e},rde=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(e,r){for(var n=[0,r-1];n[1]-n[0]>1;){var i=Math.floor((n[0]+n[1])/2);if(this.arr[i].value>e.value)n[1]=i;else if(this.arr[i].value<e.value)n[0]=i;else{this.arr.splice(i,0,e),this.map[e.id]=!0;return}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},t.prototype.add=function(e){delete this.map[e.id];var r=this.arr.length;if(!r){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[r-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,r)},t.prototype.remove=function(e){this.map[e]&&delete this.map[e]},t.prototype._clearAndGetMinId=function(){for(var e,r=this.arr.length-1;r>=0;r--)this.map[this.arr[r].id]?e=this.arr[r].id:this.arr.splice(r,1);return e},t.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},t.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},t}(),Svt=function(e,r){return Math.abs(e.x-r.x)+Math.abs(e.y-r.y)},Evt=function(e,r,n,i,a){return ede(tde(e,r,n,i,a.offset))},_vt={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Svt,fallbackRoute:Evt},uf=function(e,r){var n=Math.round(Math.abs(e/r)),i=e<0?-1:1;return n<0?0:i*n},Cvt=function(e,r,n){var i={};return e.forEach(function(a){if(a)for(var o=fM(a.getBBox(),n),s=uf(o.minX,r);s<=uf(o.maxX,r);s+=1)for(var l=uf(o.minY,r);l<=uf(o.maxY,r);l+=1)i["".concat(s,"|||").concat(l)]=!0}),i},rD=function(e,r){var n=r.x-e.x,i=r.y-e.y;return n||i?Math.atan2(i,n):0},YX=function(e,r){var n=Math.abs(e-r);return n>Math.PI?2*Math.PI-n:n},qX=function(e,r,n){for(var i=1/0,a=0,o=r.length;a<o;a++){var s=n(e,r[a]);s<i&&(i=s)}return i},KX=function(e,r,n,i,a){var o=[];if(!n)return[e];var s=a.directions,l=a.offset,u=n.getBBox(),c=r.x>u.minX&&r.x<u.maxX&&r.y>u.minY&&r.y<u.maxY,f=fM(u,l);for(var h in f)f[h]=uf(f[h],a.gridSize);if(c){for(var d=0,p=s;d<p.length;d++)for(var v=p[d],g=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],h=0;h<4;h++){var m=g[h],y=Ta.getLineIntersect(e,{x:e.x+v.stepX*f.width,y:e.y+v.stepY*f.height},m[0],m[1]);y&&!LN(e,y,u)&&(y.id="".concat(y.x,"|||").concat(y.y),o.push(y))}return o}var w=DN(f,e,i);return w.id="".concat(w.x,"|||").concat(w.y),[w]},RN=function(e,r,n,i){var a=rD(e,r),o=n[e.id];if(!o){var s=rD(i,e);return YX(s,a)}var l=rD({x:o.x,y:o.y},e);return YX(l,a)},kvt=function(e,r,n,i,a,o,s){var l=[i],u=i,c=e.id,f=e.x,h=e.y,d={x:f,y:h,id:c};RN(d,o,r,n)&&(u={x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s},l.unshift(u));for(var p=r[c];p&&p.id!==c;){var v={x:f,y:h,id:c},g={x:p.x,y:p.y,id:p.id},m=RN(g,v,r,n);m&&(u={x:g.x===v.x?u.x:g.x*s,y:g.y===v.y?u.y:g.y*s},l.unshift(u)),c=g.id,f=g.x,h=g.y,p=r[c]}return l[0].x=f===n.x?a.x:u.x,l[0].y=h===n.y?a.y:u.y,l.unshift(a),l},Mvt=function(e,r,n,i,a){if(isNaN(e.x)||isNaN(r.x))return[];var o=cn(_vt,a);o.obstacles=o.obstacles||[];var s=o.penalties,l=o.gridSize,u=Cvt(o.obstacles.concat([n,i]),l,o.offset),c={x:uf(e.x,l),y:uf(e.y,l)},f={x:uf(r.x,l),y:uf(r.y,l)};e.id="".concat(c.x,"|||").concat(c.y),r.id="".concat(f.x,"|||").concat(f.y);var h=KX(c,e,n,f,o),d=KX(f,r,i,c,o);h.forEach(function(D){delete u[D.id]}),d.forEach(function(D){delete u[D.id]});for(var p={},v={},g={},m={},y={},w=new rde,b=0;b<h.length;b++){var x=h[b];p[x.id]=x,m[x.id]=0,y[x.id]=qX(x,d,o.distFunc),w.add({id:x.id,value:y[x.id]})}var S=o.maximumLoops,E,_,k,C,A,M,T=1/0,O={};for(d.forEach(function(D){O["".concat(D.x,"|||").concat(D.y)]=!0}),Object.keys(p).forEach(function(D){var L=p[D].id;y[L]<=T&&(T=y[L],E=p[L])});Object.keys(p).length>0&&S>0;){var N=w.minId((S+1)%30===0);if(N)E=p[N];else break;if(O["".concat(E.x,"|||").concat(E.y)])return kvt(E,g,c,r,e,f,l);delete p[E.id],w.remove(E.id),v[E.id]=!0;for(var b=0;b<o.directions.length;b++){_=o.directions[b];var R="".concat(Math.round(E.x)+_.stepX,"|||").concat(Math.round(E.y)+_.stepY);if(k={x:E.x+_.stepX,y:E.y+_.stepY,id:R},!v[R]&&(M=RN(E,k,g,c),!(M>o.maxAllowedDirectionChange)&&!u[R])){p[R]||(p[R]=k);var B=s[M];C=o.distFunc(E,k)+(isNaN(B)?l:B),A=m[E.id]+C;var F=m[R];F&&A>=F||(g[R]=E,m[R]=A,y[R]=A+qX(k,d,o.distFunc),w.add({id:R,value:y[R]}))}}S-=1}return o.fallbackRoute(e,r,n,i,o)};wle("polyline",{options:{color:dt.defaultEdge.color,size:dt.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:dt.defaultEdge.style.stroke,lineAppendWidth:dt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:dt.edgeLabel.style.fill,fontSize:dt.edgeLabel.style.fontSize,fontFamily:dt.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:z({},dt.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e);n.radius===0&&delete n.radius;var i=r.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return r.shapeMap["edge-shape"]=i,i},getShapeStyle:function(e){var r=this.options.style,n={stroke:e.color},i=$t({},r,n,e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),l=[a];s&&(l=l.concat(s)),l.push(o);var u=e.sourceNode,c=e.targetNode,f=i.radius,h=this.options.routeCfg,d=$t({},h,e.routeCfg);d.offset=i.offset;var p=this.getPath(l,u,c,f,d,!s);(Ft(p)&&p.length<=1||Ve(p)&&p.indexOf("L")===-1)&&(p="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(p="M0 0, L0 0");var v=$t({},dt.defaultEdge.style,i,{lineWidth:e.size,path:p});return v},updateShapeStyle:function(e,r){var n=r.getContainer();if(r.isVisible()){var i={stroke:e.color},a=n.shapeMap["edge-shape"]||n.find(function(b){return b.get("className")==="edge-shape"})||r.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),h=$t({},i,f,e.style),d=e.sourceNode,p=e.targetNode,v=h.radius,g=this.options.routeCfg,m=$t({},g,e.routeCfg);m.offset=h.offset;var y=this.getPath(c,d,p,v,m,!u);(Ft(y)&&y.length<=1||Ve(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(y="M0 0, L0 0"),f.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),f.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var w=$t(i,a.attr(),{lineWidth:o,path:y},e.style);a&&a.attr(w)}},getPath:function(e,r,n,i,a,o){var s=a.offset,l=a.obstacles,u=a.simple;if(!s||e.length>2||o===!1){if(i)return XX(e,i);var c=[];return Ce(e,function(p,v){v===0?c.push(["M",p.x,p.y]):c.push(["L",p.x,p.y])}),c}u!==!1&&!(l!=null&&l.length)&&(u=!0);var f=u?tde(e[e.length-1],e[0],n,r,s):Mvt(e[0],e[e.length-1],r,n,a);if(!f||!f.length)return"M0 0, L0 0";if(i){var h=XX(f,i);return h}f=xvt(f);var d=Ta.pointsToPolygon(f);return d}},"single-edge");var QX=zf.cloneEvent,ZX=zf.isNaN,JX=Math.abs,Avt=10,Tvt=["shift","ctrl","alt","control"];const Ivt={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var r=this.origin,n=+e.clientX,i=+e.clientY;if(!(ZX(n)||ZX(i))){var a=n-r.x,o=i-r.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var r=this,n=e.originalEvent.touches,i=n[0],a=n[1];i&&a||(e.preventDefault(),this.mousedown=!0,r.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var r=this,n=e.originalEvent;if(!(n&&e.name!=="touchstart"&&n.button!==0)&&!(e.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!r.keydown&&this.allowDrag(e)){if(r.origin={x:e.clientX,y:e.clientY},r.dragging=!1,this.enableOptimize){for(var i=this.graph,a=i.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");l&&l.forEach(function(w){w.set("ori-visibility",w.get("ori-visibility")||w.get("visible")),w.hide()})}for(var u=i.getNodes(),c=0,f=u.length;c<f;c++)for(var h=u[c].getContainer(),d=h.get("children"),p=0,v=d;p<v.length;p++){var g=v[p],m=g.get("isKeyShape");m||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if(typeof window<"u"){var y=this;this.handleDOMContextMenu=function(w){return y.onMouseUp(w)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var r=this,n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(e);return}e.preventDefault(),r.onDrag(e)},onDrag:function(e){if(this.mousedown){var r=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=QX(e),!!this.origin)){if(this.dragging)e.type="drag",r.emit("canvas:drag",e);else{if(JX(this.origin.x-e.clientX)+JX(this.origin.y-e.clientY)<Avt)return;this.shouldBegin(e,this)&&(e.type="dragstart",r.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var r,n;this.mousedown=!1,this.dragstart=!1;var i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(r=o==null?void 0:o.modes[o.mode])===null||r===void 0?void 0:r.filter(function(E){return E.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var h=u[c].get("group").get("children");h&&h.forEach(function(E){var _=E.get("ori-visibility");E.set("ori-visibility",void 0),_&&E.show()})}if(a>l)for(var d=i.getNodes(),p=0,v=d.length;p<v;p++)for(var g=d[p].getContainer(),m=g.get("children"),y=0,w=m;y<w.length;y++){var b=w[y],x=b.get("isKeyShape");if(!x){var S=b.get("ori-visibility");b.set("ori-visibility",void 0),S&&b.show()}}}if(!this.dragging){this.origin=null;return}e=QX(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,i.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var r=this,n=e.key;n&&(Tvt.indexOf(n.toLowerCase())>-1?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var r,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(fb(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(ua(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}},Ovt={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var r=e.getType();return r==="combo"},onTouchStart:function(e){if(e.item){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,r.onDragStart(e)}},onTouchMove:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){r.onDragEnd(e);return}e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var r,n;if(((n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(z(z({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var r=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(z(z({},e),this.mousedown),this)){var n=this.mousedown,i=n.item,a=n.target;if(!(!i||i.destroyed||i.hasLocked())){var o=i.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(i),a){var s=a.get("isAnchorPoint");if(s)return}var l=this.graph;this.targets=[],this.targetCombo=null;var u=l.findAllByState("node",this.selectedState),c=i.get("id"),f=u.filter(function(d){var p=d.get("id");return c===p});if(f.length===0?this.targets.push(i):u.length>1?u.forEach(function(d){var p=d.hasLocked();p||r.targets.push(d)}):this.targets.push(i),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach(function(d){var p=d.getModel(),v=p.x,g=p.y,m=p.id;h.push({x:v,y:g,id:m})}),this.set("beforeDragNodes",h)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var p=d.getEdges();p.forEach(function(v){v.isVisible()&&(r.hidenEdge[v.getID()]=!0,v.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var r=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(i){r.update(i,e);var a=i.getModel().comboId;a&&(n[a]=r.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var r=this,n;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){r.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),l=s.x,u=s.y,c=s.id;a.after.nodes.push({x:l,y:u,id:c})}),i.pushStack("update",Ir(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(r))){var n=this.graph;if(this.comboActiveState&&n.setItemState(r,this.comboActiveState,!1),this.targetCombo=r,this.onlyChangeComboSize)n.updateCombos();else{var i=r.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(r)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var r=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&r.updateComboTree(n)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var r=this,n=e.item,i=r.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=i.findById(a);r.comboActiveState&&i.setItemState(s,r.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var r=e.item;if(this.validationCombo(r)){var n=this.graph;this.comboActiveState&&n.setItemState(r,this.comboActiveState,!0)}},onDragLeave:function(e){var r=e.item;if(this.validationCombo(r)){var n=this.graph;this.comboActiveState&&n.setItemState(r,this.comboActiveState,!1)}},updatePositions:function(e,r){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):r||this.targets.map(function(i){return n.update(i,e)}):this.targets.map(function(i){return n.update(i,e,r)}))},update:function(e,r,n){var i=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=r.x-i.x+this.point[o].x,l=r.y-i.y+this.point[o].y;n&&(s+=i.x-r.x,l+=i.y-r.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:hb(function(t){var e=t.targets,r=t.graph,n=t.point,i=t.origin,a=t.evt,o=t.updateEdge,s=t.onlyChangeComboSize,l=t.updateParentCombos;e.map(function(u){var c=u.get("model"),f=u.get("id");n[f]||(n[f]={x:c.x||0,y:c.y||0});var h=a.x-i.x+n[f].x,d=a.y-i.y+n[f].y,p={x:h,y:d};o?r.updateItem(u,p,!1):u.updatePosition(p)}),s&&l(r,e)},50,!0),updateDelegate:function(e){var r=this.graph;if(this.delegateRect){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var n=r.get("group"),i=cn({},Kp.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=n.addShape("rect",{attrs:z({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var r=this.targets;r.length===0&&r.push(e.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<r.length;s++){var l=r[s],u=l.getBBox(),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY;c<n&&(n=c),f<a&&(a=f),h>i&&(i=h),d>o&&(o=d)}var p=Math.floor(n),v=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:p,y:v,width:g,height:m,minX:n,minY:a}},updateParentCombos:function(e,r){var n=e||this.graph,i=r||this.targets,a={};i==null||i.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=n.findById(s))}),Object.values(a).forEach(function(o){o&&n.updateCombo(o)})}};var TE=null;const Dvt={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.setAllItemStates(e)},clearOnTouchStart:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var r=this,n=this.shouldClearStatusOnSecond;n&&(TE=null),this.timer=setTimeout(function(){r.throttleClearActiveState(e,r)},50)},throttleSetAllItemStates:t2(function(t,e){var r=t.item,n=e.graph;if(!(!n||n.destroyed)&&(e.item=r,!!e.shouldUpdate(t.item,{event:t,action:"activate"},e))){var i=e.shouldClearStatusOnSecond,a=r.getModel().id;if(TE===a&&i){e.throttleClearActiveState(t,e),TE=null;return}for(var o=e.activeState,s=e.inactiveState,l=n.getNodes(),u=n.getCombos(),c=n.getEdges(),f=n.get("vedges"),h=l.length,d=u.length,p=c.length,v=f.length,g=e.inactiveItems||{},m=e.activeItems||{},y=0;y<h;y++){var w=l[y],b=w.getID(),x=w.hasState("selected");e.resetSelected&&x&&n.setItemState(w,"selected",!1),m[b]&&(n.setItemState(w,o,!1),delete m[b]),s&&!g[b]&&(n.setItemState(w,s,!0),g[b]=w)}for(var y=0;y<d;y++){var S=u[y],E=S.getID(),x=S.hasState("selected");e.resetSelected&&x&&n.setItemState(S,"selected",!1),m[E]&&(n.setItemState(S,o,!1),delete m[E]),s&&!g[E]&&(n.setItemState(S,s,!0),g[E]=S)}for(var y=0;y<p;y++){var _=c[y],k=_.getID();m[k]&&(n.setItemState(_,o,!1),delete m[k]),s&&!g[k]&&(n.setItemState(_,s,!0),g[k]=_)}for(var y=0;y<v;y++){var C=f[y],A=C.getID();m[A]&&(n.setItemState(C,o,!1),delete m[A]),s&&!g[A]&&(n.setItemState(C,s,!0),g[A]=C)}if(r&&!r.destroyed){s&&(n.setItemState(r,s,!1),delete g[r.getID()]),m[r.getID()]||(n.setItemState(r,o,!0),m[r.getID()]=r);for(var M=r.getEdges(),T=M.length,y=0;y<T;y++){var _=M[y],k=_.getID(),O=void 0;_.getSource()===r?O=_.getTarget():O=_.getSource();var N=O.getID();s&&g[N]&&(n.setItemState(O,s,!1),delete g[N]),m[N]||(n.setItemState(O,o,!0),m[N]=O),g[k]&&(n.setItemState(_,s,!1),delete g[k]),m[k]||(n.setItemState(_,o,!0),m[k]=_),_.toFront()}}e.activeItems=m,e.inactiveItems=g,i&&(TE=r.getModel().id),n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:t2(function(t,e){var r=e.get("graph");if(!(!r||r.destroyed)&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var n=e.activeState,i=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){r.clearItemStates(s,n)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){r.clearItemStates(s,i)}),e.activeItems={},e.inactiveItems={},r.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var IE=Math.min,eY=Math.max,tY=Math.abs,rY="shift",Pvt=["drag","shift","ctrl","alt","control"];const Lvt={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:rY,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Pvt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=rY,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var r=e.item,n=this.brush,i=this.selectOnCombo,a=(r==null?void 0:r.getType())==="combo";a&&!i||!a&&r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1))},clearStates:function(){var e=this,r=e.graph,n=e.selectedState,i=r.findAllByState("node",n),a=r.findAllByState("edge",n),o=r.findAllByState("combo",n);i.forEach(function(s){return r.setItemState(s,n,!1)}),a.forEach(function(s){return r.setItemState(s,n,!1)}),o.forEach(function(s){return r.setItemState(s,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,r,n,i,a){var o=e.getBBox();return o.centerX>=r&&o.centerX<=n&&o.centerY>=i&&o.centerY<=a},getSelectedNodes:function(e){var r=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=n.isBBoxCenterInRect,l=this.selectedState,u={x:e.x,y:e.y},c=i.getPointByCanvas(a.x,a.y),f=IE(u.x,c.x),h=eY(u.x,c.x),d=IE(u.y,c.y),p=eY(u.y,c.y),v=[],g=[];i.getNodes().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,p)&&o(w,"select",r)){v.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}});var m=[];this.includeEdges&&v.forEach(function(w){var b=w.getOutEdges();b.forEach(function(x){if(x.isVisible()){var S=x.getModel(),E=S.source,_=S.target;g.includes(E)&&g.includes(_)&&o(x,"select",r)&&(m.push(x),i.setItemState(x,r.selectedState,!0))}})});var y=[];this.includeCombos&&i.getCombos().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,p)&&o(w,"select",r)){y.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}}),this.selectedEdges=m,this.selectedNodes=v,this.selectedCombos=y,this.onSelect&&this.onSelect(v,m,y),i.emit("nodeselectchange",{selectedItems:{nodes:v,edges:m,combos:y},select:!0})},createBrush:function(){var e=this,r=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=r,this.delegate=r,r},updateBrush:function(e){var r=this.originPoint;this.brush.attr({width:tY(e.canvasX-r.x),height:tY(e.canvasY-r.y),x:IE(e.canvasX,r.x),y:IE(e.canvasY,r.y)})},onKeyDown:function(e){var r=e.key;if(r){var n=this.trigger.toLowerCase(),i=r.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var nY="shift",Rvt=["shift","ctrl","alt","control"];const Nvt={getDefaultCfg:function(){return{multiple:!0,trigger:nY,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Rvt.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=nY,console.warn("Behavior click-select  trigger  'drag''shift''ctrl'  'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var r=this,n=e.item;if(!(!n||n.destroyed)){var i=n.getType(),a=r.graph,o=r.keydown,s=r.multiple,l=r.shouldUpdate,u=r.shouldBegin;if(u(e,r)){if(!o||!s){var c=a.findAllByState("node",r.selectedState).concat(a.findAllByState("edge",r.selectedState)).concat(a.findAllByState("combo",r.selectedState));Ce(c,function(v){v!==n&&a.setItemState(v,r.selectedState,!1)})}var f=function(){switch(i){case"node":return r.selectNode;case"edge":return r.selectEdge;case"combo":return r.selectCombo;default:return!1}}();if(!f){var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:p},select:!1});return}if(n.hasState(r.selectedState)){l(e,r)&&a.setItemState(n,r.selectedState,!1);var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:p},select:!1})}else{l(e,r)&&a.setItemState(n,r.selectedState,!0);var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:p},select:!0})}}}},onCanvasClick:function(e){var r=this,n=this,i=n.graph,a=n.shouldBegin;if(a(e,this)){var o=i.findAllByState("node",this.selectedState);Ce(o,function(u){i.setItemState(u,r.selectedState,!1)});var s=i.findAllByState("edge",this.selectedState);Ce(s,function(u){i.setItemState(u,r.selectedState,!1)});var l=i.findAllByState("combo",this.selectedState);Ce(l,function(u){i.setItemState(u,r.selectedState,!1)}),i.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var r=this,n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}};var Fvt=yl,OE=.05;const Bvt={getDefaultCfg:function(){return this.isFireFox=_he()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var r=e.originalEvent.touches,n=r[0],i=r[1];e.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var r=e.originalEvent.touches,n=r[0],i=r[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(v,g){return Math.hypot(g.x-v.x,g.y-v.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.get("animate"),f=this.get("animateCfg"),h=this.graph.get("canvas"),d=h.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:d.x,y:d.y},c,f),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var r=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-OE*l:c=1/(1-OE*l):e.wheelDelta<0?c=1-OE*l:c=1/(1-OE*l),f=u*c;var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");f>d?f=d:f<h&&(f=h);var p=this.get("enableOptimize");if(p){var v=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),y=i.getEdges(),w=m.length,b=y.length;if(!g){for(var x=0;x<w;x++){var S=m[x];if(!S.destroyed)for(var E=S.get("group").get("children"),_=E.length,k=0;k<_;k++){var C=E[k];!C.destoryed&&!C.get("isKeyShape")&&(C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide())}}for(var A=0;A<b;A++)for(var M=y[A],E=M.get("group").get("children"),_=E.length,k=0;k<_;k++){var C=E[k];C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var T=setTimeout(function(){var Ze=i.getZoom(),oe=r.get("optimized");if(oe){r.set("optimized",!1);for(var P=0;P<w;P++){var _e=m[P],Pe=_e.get("group").get("children"),ye=Pe.length;if(Ze<v){var Fe=_e.getKeyShape(),Be=Fe.get("ori-visibility");Fe.set("ori-visibility",void 0),Be&&Fe.show()}else for(var Xe=0;Xe<ye;Xe++){var et=Pe[Xe],Be=et.get("ori-visibility");et.set("ori-visibility",void 0),!et.get("visible")&&Be&&Be&&et.show()}}for(var Ot=0;Ot<b;Ot++){var nr=y[Ot],Pe=nr.get("group").get("children"),ye=Pe.length;if(Ze<v){var Fe=nr.getKeyShape(),Be=Fe.get("ori-visibility");Fe.set("ori-visibility",void 0),Be&&Fe.show()}else for(var Xe=0;Xe<ye;Xe++){var et=Pe[Xe];if(!et.get("visible")){var Be=et.get("ori-visibility");et.set("ori-visibility",void 0),Be&&et.show()}}}}},100);this.set("timeout",T)}if(u<=1){var O=void 0,N=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){O=i.findAllByState("node",a.fixState),N=i.findAllByState("edge",a.fixState);for(var R=u/f,B=O.length,F=0;F<B;F++){var S=O[F],D=S.getContainer(),L=S.getModel(),G=S.getOriginStyle(),Y=S.getStateStyle(a.fixState),Z=S.get("shapeFactory").getShape(L.type).getStateStyle(a.fixState,S)[a.fixState];if(a.fixAll){if(f<=1){var q=Ir(D.getMatrix());q||(q=[1,0,0,0,1,0,0,0,1]);var pe=S.getModel(),Se=pe.x,Ae=pe.y;q=Fvt(q,[["t",-Se,-Ae],["s",R,R],["t",Se,Ae]]),D.setMatrix(q)}}else for(var E=D.get("children"),_=E.length,k=0;k<_;k++){var C=E[k],He=void 0,ct=void 0;if(a.fixLabel){var st=C.get("type");if(st==="text"){He=C.attr("fontSize")||12;var Mt=Y[C.get("name")],yt=Z[C.get("name")],ar=Mt?Mt.fontSize:12,Jt=yt?yt.fontSize:12,er=ar||Jt||12;if(f<=1&&C.attr("fontSize",er/f),ct)break}}if(a.fixLineWidth&&C.get("isKeyShape")){ct=C.attr("lineWidth")||0;var yr=Y.lineWidth||Z.lineWidth||G.lineWidth||0;if(f<=1&&C.attr("lineWidth",yr/f),He)break}}}for(var or=N.length,zt=0;zt<or;zt++)for(var M=N[zt],D=M.getContainer(),E=D.get("children"),L=M.getModel(),Y=M.getStateStyle(a.fixState),Z=M.get("shapeFactory").getShape(L.type).getStateStyle(a.fixState,M)[a.fixState],_=E.length,k=0;k<_;k++){var C=E[k],He=void 0,ct=void 0;if(a.fixLabel||a.fixAll){var st=C.get("type");if(st==="text"){He=C.attr("fontSize")||12;var Mt=Y[C.get("name")],yt=Z[C.get("name")],ar=Mt?Mt.fontSize:12,Jt=yt?yt.fontSize:12,er=ar||Jt||12;if(f<=1&&C.attr("fontSize",er/f),ct)break}}if((a.fixLineWidth||a.fixAll)&&C.get("isKeyShape")){ct=C.attr("lineWidth")||0;var yr=Y.lineWidth||Z.lineWidth||1;if(f<=1&&C.attr("lineWidth",yr/f),He)break}}}}var tr=this.get("animate"),Dr=this.get("animateCfg");i.zoomTo(f,{x:s.x,y:s.y},tr,Dr),i.emit("wheelzoom",e)}}},nde={onMouseEnter:function(e){var r=e.item;this.currentTarget=r,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var r=this.container;if(!(!e.item||e.item.destroyed)){r||(r=this.createTooltip(this.graph.get("canvas")),this.container=r);var n=this.formatText(e.item.get("model"),e);r.innerHTML=n,Cr(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Cr(this.container,{visibility:"hidden"})},updatePosition:function(e){var r=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!r(e,this)){Cr(o,{visibility:"hidden"});return}var l=s.getPointByClient(e.clientX,e.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,h=o.getBoundingClientRect();c>i/2?c-=h.width:c+=this.offset,f>a/2?f-=h.height:f+=this.offset;var d="".concat(c,"px"),p="".concat(f,"px");Cr(this.container,{left:d,top:p,visibility:"visible"})},createTooltip:function(e){var r=e.get("el");r.style.position="relative";var n=wn('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return r.parentNode.appendChild(n),Cr(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},$vt=z({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(r){return r.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},nde),zvt=z({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(r){return"source: ".concat(r.source," target: ").concat(r.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},nde);var iY="click",jvt=["click","dblclick"];const Gvt={getDefaultCfg:function(){return{trigger:iY,onChange:function(){}}},getEvents:function(){var e,r;return jvt.includes(this.trigger)?r=this.trigger:(r=iY,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),e={},e["node:".concat(r)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var r=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){r.toggle(e),clearTimeout(r.timer),r.timer=0},200)}else this.toggle(e)},toggle:function(e){var r=e.item;if(r){var n=this.graph.findDataById(r.get("id"));if(n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;this.shouldBegin(e,a,this)&&(n.collapsed=a,r.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(r,a,this),this.graph.layout()))}}}}};var Uvt=zf.calculationItemsBBox,Wvt=function t(e,r){if(r(e)!==!1&&e){var n=e.get("combos");if(n.length===0)return!1;Ce(n,function(i){t(i,r)})}};const Vvt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var r=e.item;if(!r||r.destroyed||!this.shouldUpdate(e,this))return!1;var n=r.getType();return n==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var r=this,n=this.graph,i=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(u){var c=u.get("id");return o===c});s.length===0?this.targets.push(i):this.targets=a;var l=[];this.targets.forEach(function(u){var c=u.getModel(),f=c.x,h=c.y,d=c.id;l.push({x:f,y:h,id:d})}),this.set("beforeDragItems",l),this.activeState&&this.targets.map(function(u){var c=u.getModel();if(c.parentId){var f=n.findById(c.parentId);f&&n.setItemState(f,r.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Wvt(i,function(u){if(u.destroyed)return!1;var c=u.getModel();return r.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var r=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,i=e.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(h){var d=h.getModel();return a.parentId,d.id!==a.id&&!r.currentItemChildCombos.includes(d.id)});f.map(function(h){var d=h.getBBox(),p=d.centerX,v=d.centerY,g=d.width,m=l-p,y=u-v,w=2*Math.sqrt(m*m+y*y);c+g-w>.8*c?n.setItemState(h,r.activeState,!0):n.setItemState(h,r.activeState,!1)})}Ce(this.targets,function(h){r.updateCombo(h,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,r){var n=this;(this.enableDelegate||r)&&Ce(this.targets,function(i){n.updateCombo(i,e,r)})},onDrop:function(e){var r=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(r.activeState&&i.setItemState(n,r.activeState,!1),r.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id,!1)):i.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var r=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=e.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){r.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a,!1))})}else this.targets.map(function(u){if(r.onlyChangeComboSize)n.updateCombo(u);else{var c=u.getModel();c.comboId&&n.updateComboTree(u,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var r=e.item,n=this.graph;this.activeState&&n.setItemState(r,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var r=e.item,n=this.graph;this.activeState&&n.setItemState(r,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var r=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(r.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,r){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&i.setItemState(e,this.activeState,!1),!e){var o=i.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(l){if(!n.onlyChangeComboSize)i.updateComboTree(l,void 0,o);else{i.updateCombo(l);var u=l.getModel(),c=u.x,f=u.y,h=u.id;s.after.combos.push({x:c,y:f,id:h}),i.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,r,n){var i=this;if(n===void 0&&(n={}),r(e,n)!==!1&&e){var a=e.get("combos");Ce(a,function(s){i.traverse(s,r,n)});var o=e.get("nodes");Ce(o,function(s){i.traverse(s,r,n)})}},updateCombo:function(e,r,n){this.updateSingleItem(e,r,n);var i={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},i),Object.values(i).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,r,n){var i=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=r.x-i.x+this.point[s].x,u=r.y-i.y+this.point[s].y;n&&(l+=i.x-r.x,u+=i.y-r.y),a.updateItem(e,{x:l,y:u},!1)},getParentCombo:function(e){var r=this.graph;if(e){var n=r.findById(e);if(n)return n}},updateDelegate:function(e){var r=this.graph;if(this.delegateShape){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:h,y:d})}else{var n=r.get("delegateGroup"),i=null;this.targets.length>1?i=Uvt(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=z(z({},Kp.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:z({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,r=e.graph,n=e.targets,i={};n==null||n.forEach(function(a){var o=a.getModel().parentId;o&&(i[o]=r.findById(o))}),Object.values(i).forEach(function(a){a&&r.updateCombo(a)})}};var aY="dblclick",Hvt=["click","dblclick"];const Xvt={getDefaultCfg:function(){return{trigger:aY,relayout:!0}},getEvents:function(){var e,r;return Hvt.includes(this.trigger)?r=this.trigger:(r=aY,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),e={},e["combo:".concat(r)]="onComboClick",e},onComboClick:function(e){var r=e.item,n=this,i=n.graph,a=n.relayout;if(!(!r||r.destroyed||r.getType()!=="combo")){var o=r.getModel(),s=o.id;s&&(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}};var Yvt=zf.isPolygonsIntersect,qvt=zf.pathToPoints,oY="shift",Kvt=["drag","shift","ctrl","alt","control"],Qvt=function(e,r){var n,i=e.getKeyShape();if(e.get("type")==="path")n=qvt(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return Yvt(r,n)};const Zvt={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:oY,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Kvt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=oY,console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var r=this.lasso,n=e.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),r||(r=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),r.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,r=[];return e.length&&(e.forEach(function(n,i){i===0?r.push(["M",n.x,n.y]):r.push(["L",n.x,n.y])}),r.push(["L",e[0].x,e[0].y])),r},clearStates:function(e){e===void 0&&(e="canvas:click");var r=this,n=r.graph,i=r.selectedState,a=r.shouldDeselect,o=n.findAllByState("node",i),s=n.findAllByState("edge",i);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(l){return n.setItemState(l,i,!1)}),s.forEach(function(l){return n.setItemState(l,i,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,r=this,n=r.graph,i=r.shouldUpdate,a=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(c){if(c.isVisible()&&Qvt(c,a)&&i(c,"select",e)){s.push(c);var f=c.getModel();l.push(f.id),n.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(h){if(h.isVisible()){var d=h.getModel(),p=d.source,v=d.target;l.includes(p)&&l.includes(v)&&i(h,"select",e)&&(u.push(h),n.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var e=this,r=e.graph.get("delegateGroup").addShape("path",{attrs:z({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=r,this.delegate=r,this.points=[],r},updateLasso:function(e){var r=this;this.lasso.attr({path:r.getLassoPath()})},onKeyDown:function(e){var r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var sY="click",Jvt=["click","drag"],lY=void 0,egt=["shift","ctrl","control","alt","meta",void 0];const tgt={getDefaultCfg:function(){return{trigger:sY,key:lY,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;Jvt.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=sY,console.warn("Behavior create-edge  trigger  'click''drag'")),e.key&&egt.indexOf(e.key.toLowerCase())===-1&&(e.trigger=lY,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined"));var r;return e.trigger==="drag"?r={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(r={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(r.keydown="onKeyDown",r.keyup="onKeyUp"),r},onDragEnd:function(e){var r=this;if(!(r.key&&!r.keydown)){var n=e.item;(!n||n.getID()===r.source||n.getType()!=="node")&&r.cancelCreating({item:r.edge,x:e.x,y:e.y})}},onClick:function(e){var r=this;if(!(r.key&&!r.keydown)){var n=e.item,i=r.graph,a=n.getModel(),o=r.getEdgeConfig;if(r.addingEdge&&r.edge){if(!r.shouldEnd(e,r))return;var s=void 0;o&&Rn(o)?s=o({source:r.source,target:a.id},r):s=r.edgeConfig;var l=z({target:a.id},s);if(r.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(r.edge,l,!1),i.get("enabledStack")){var u=z(z({},r.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:r.edge}),r.edge.getKeyShape().set("capture",!0),r.edge=null,r.addingEdge=!1}else{if(!r.shouldBegin(e,r))return;var s=void 0;o&&Rn(o)?s=o({source:a.id,target:a.id},r):s=r.edgeConfig,r.edge=i.addItem("edge",z({source:a.id,target:a.id},s),!1),r.source=a.id,r.addingEdge=!0,r.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var r=this;if(!(r.key&&!r.keydown)){r.edge&&r.edge.destroyed&&r.cancelCreating({item:r.edge});var n={x:e.x,y:e.y};if(!r.graph.findById(r.source)){r.addingEdge=!1;return}r.addingEdge&&r.edge&&r.graph.updateItem(r.edge,{target:n},!1)}},cancelCreating:function(e){var r,n,i=this;if(!(i.key&&!i.keydown)){var a=i.graph,o=e.item;if(i.addingEdge&&(i.edge===o||!((n=(r=e.target)===null||r===void 0?void 0:r.isCanvas)===null||n===void 0)&&n.call(r))){i.edge&&!i.edge.destroyed&&a.removeItem(i.edge,!1),i.edge=null,i.addingEdge=!1;return}}},onKeyDown:function(e){var r=this,n=e.key;n&&(n.toLowerCase()===r.key.toLowerCase()?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var uY="ctrl",rgt=["shift","ctrl","alt","control"],ngt="1";const igt={getDefaultCfg:function(){return{trigger:uY,combinedKey:ngt,functionName:"fitView",functionParams:[]}},getEvents:function(){return rgt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=uY,console.warn("Behavior shortcuts-fit-view  trigger  '".concat(this.trigger,"'  'drag''shift''ctrl'  'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var r=e.key;if(r){var n=this.trigger.toLowerCase(),i=r.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '".concat(this.functionName,"'  Graph ")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var agt=["shift","ctrl","alt","control","meta"];const ogt={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||agt.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var r=this;if(this.allowDrag(e)){var n=this.graph,i=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];i.includes("control")&&i.push("ctrl");var a=i.some(function(L){return e["".concat(L,"Key")]});if(a){var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=n.getZoom();e.wheelDelta>0?l=l+l*.05:l=l-l*.05,n.zoomTo(l,{x:s.x,y:s.y})}else{var u=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var f=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),p=this.scalableRange,v=this.scalableRange;p<1&&p>-1&&(p=f*p,v=h*v);var g=d.minX,m=d.maxX,y=d.minY,w=d.maxY;u>0?m<-p?u=0:m-u<-p&&(u=m+p):u<0&&(g>f+p?u=0:g-u>f+p&&(u=g-(f+p))),c>0?w<-v?c=0:w-c<-v&&(c=w+v):c<0&&(y>h+v?c=0:y-c>h+v&&(c=y-(h+v))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(u=0),n.translate(-u,-c)}e.preventDefault();var b=this.get("enableOptimize");if(b){var x=this.get("optimizeZoom"),S=this.get("optimized"),E=n.getNodes(),_=n.getEdges(),k=E.length,C=_.length;if(!S){for(var A=0;A<k;A++){var M=E[A];if(!M.destroyed)for(var T=M.get("group").get("children"),O=T.length,N=0;N<O;N++){var R=T[N];!R.destoryed&&!R.get("isKeyShape")&&(R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide())}}for(var B=0;B<C;B++)for(var F=_[B],T=F.get("group").get("children"),O=T.length,N=0;N<O;N++){var R=T[N];R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var D=setTimeout(function(){var L=n.getZoom(),G=r.get("optimized");if(G){r.set("optimized",!1);for(var Y=0;Y<k;Y++){var Z=E[Y],q=Z.get("group").get("children"),pe=q.length;if(L<x){var Se=Z.getKeyShape(),Ae=Se.get("ori-visibility");Ae&&Se.show()}else for(var He=0;He<pe;He++){var ct=q[He],Ae=ct.get("ori-visibility");!ct.get("visible")&&Ae&&Ae&&ct.show()}}for(var st=0;st<C;st++){var Mt=_[st],q=Mt.get("group").get("children"),pe=q.length;if(L<x){var Se=Mt.getKeyShape(),Ae=Se.get("ori-visibility");Ae&&Se.show()}else for(var He=0;He<pe;He++){var ct=q[He];if(!ct.get("visible")){var Ae=ct.get("ori-visibility");Ae&&ct.show()}}}}},100);this.set("timeout",D)}}},allowDrag:function(e){var r,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(fb(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(ua(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}};var sgt={"drag-canvas":Ivt,"zoom-canvas":Bvt,"drag-node":Ovt,"activate-relations":Dvt,"brush-select":Lvt,"click-select":Nvt,"lasso-select":Zvt,tooltip:$vt,"edge-tooltip":zvt,"collapse-expand":Gvt,"drag-combo":Vvt,"collapse-expand-combo":Xvt,"create-edge":tgt,"shortcuts-call":igt,"scroll-canvas":ogt};Ce(sgt,function(t,e){ble(e,t)});var lgt=z(z({},d9e),wVe),ugt=os.Fisheye,cgt=os.TimeBar,fgt=os.ImageMinimap,hgt=os.EdgeFilterLens,dgt=os.SnapLine,pgt=os.Annotation;const Pi={version:Kp.version,Graph:khe,TreeGraph:_ht,Util:zf,Layout:Or.Layouts,TreeLayout:fht,registerLayout:hht,Global:Kp,registerBehavior:ble,registerCombo:tUe,registerEdge:wle,registerNode:Lf,Minimap:os.Minimap,Grid:os.Grid,Bundling:os.Bundling,Menu:os.Menu,ToolBar:os.ToolBar,Tooltip:os.Tooltip,Legend:os.Legend,TimeBar:cgt,SnapLine:dgt,Fisheye:ugt,ImageMinimap:fgt,EdgeFilterLens:hgt,Annotation:pgt,Algorithm:lgt,Arrow:ple,Marker:vle,Shape:fn};Pi.version="4.8.23";var vgt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom(),n=e.get("canvas"),i=n.getPointByClient(n.get("width")/2,n.get("height")/2),a=n.get("pixelRatio")||1,o=1+.05*5;if(!(o*r>5))return e.zoom(o,{x:i.x/a,y:i.y/a},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*r*100),"%"),ratio:o*r}}}},ggt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom(),n=e.get("canvas"),i=n.getPointByClient(n.get("width")/2,n.get("height")/2),a=n.get("pixelRatio")||1,o=1-.05*5;if(!(o*r<.3))return e.zoom(o,{x:i.x/a,y:i.y/a},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*r*100),"%"),ratio:o*r}}}},mgt=function(e){return function(r){var n=r.text,i=r.ratio;if(!(!e||e.destroyed)){var a=e.get("canvas"),o=a.getPointByClient(a.get("width")/2,a.get("height")/2),s=a.get("pixelRatio")||1;return e.zoomTo(i,{x:o.x/s,y:o.y/s},!0,{easing:"easeCubic",duration:150}),{text:n,ratio:i}}}},ygt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom();return e.zoom(1/r),e.fitCenter(),{text:"100%",ratio:1}}}},wgt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getNodes();r.length>0&&e.fitView([20,20],{},!0);var n=e.getZoom();return{text:"".concat(Math.round(n*100),"%"),ratio:n}}}};const bgt=Object.freeze(Object.defineProperty({__proto__:null,handleAutoZoom:wgt,handleChangeZoom:mgt,handleRealZoom:ygt,handleZoomIn:ggt,handleZoomOut:vgt},Symbol.toStringTag,{value:"Module"}));var xgt=function(e){return function(r){e.getNodes().forEach(function(n){e.clearItemStates(n,["active","inactive"]),r.indexOf(n.get("id"))!==-1?e.setItemState(n,"active",!0):e.setItemState(n,"active",!1)})}},Sgt=function(e){return function(r){if(!(!e||typeof r!="string")){var n=e.findById(r);if(!n){console.warn("The node ".concat(r," does not exist!"));return}e.focusItem(r,!0,{duration:200,easing:"easeCubic"}),e.setItemState(n,"selected",!0),n.toFront()}}};const Egt=Object.freeze(Object.defineProperty({__proto__:null,focusNodeById:Sgt,highlightNodeById:xgt},Symbol.toStringTag,{value:"Module"}));function _gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cY=Object.assign(Object.assign({},bgt),Egt),fY=function(e){var r=Object.keys(cY);return r.reduce(function(n,i){return Object.assign(Object.assign({},n),_gt({},i,cY[i](e)))},{})},Cgt={type:"compactBox",direction:"LR",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 20}},hY=["dendrogram","compactBox","mindmap","indented"],kgt={type:"force2"},DE=function(){return Math.round((Math.random()-.5)*80)},dY=500,pY=300,Mgt=function(e,r){var n=e.nodes,i=e.edges,a=r.nodes,o=new Map;a.forEach(function(u){var c=u.id,f=u.x,h=u.y;o.set(c,{x:f,y:h})});var s=new Map;n.forEach(function(u){var c=u.id,f=o.get(c),h=f.x,d=f.y;!window.isNaN(h)&&!window.isNaN(d)?(u.x=h,u.y=d):s.set(c,u)});var l=new Map;return i.forEach(function(u){var c=u.source,f=u.target,h=s.get(c),d=s.get(f),p=o.get(c),v=!window.isNaN(p.x)&&!window.isNaN(p.y),g=o.get(f),m=!window.isNaN(g.x)&&!window.isNaN(g.y);h&&m&&l.set(c,{x:g.x+DE(),y:g.y+DE()}),d&&v&&l.set(f,{x:p.x+DE(),y:p.y+DE()})}),n.forEach(function(u){var c=u.id,f=o.get(c);(window.isNaN(f.x)||window.isNaN(f.y))&&(f=l.get(c)||{}),!window.isNaN(f.x)&&!window.isNaN(f.y)?(u.x=f.x,u.y=f.y):(u.x=dY/2+Math.round(Math.random()*dY),u.y=pY/2+Math.round(Math.random()*pY))}),Object.assign(Object.assign({},e),{nodes:n,edges:i})};function Agt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tgt(t,e,r){return e&&vY(t.prototype,e),r&&vY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var PE=function(e){return!(e&&e.nodes&&e.nodes.length!==0)},LE=["force","graphin-force","g6force","gForce","comboForce"],Igt=function(){function t(e){var r=this;Agt(this,t),this.updateOptions=function(){var n={type:"concentric"},i=r.graphin,a=i.width,o=i.height,s=i.props,l=s.layout,u=l===void 0?n:l,c=u.type,f=c===void 0?"concentric":c,h=u.preset,d={width:a,height:o,center:[a/2,o/2]};if(r.options=Object.assign(Object.assign(Object.assign({},d),xG[f]||{}),u),PE(r.graphin.data)){r.prevOptions={};return}if(LE.indexOf(f)!==-1){var p=r.prevOptions.type||"grid";h!=null&&h.type&&(p=h.type),PE(r.graphin.data)&&(p=h.type||"grid"),r.options.preset=Object.assign(Object.assign(Object.assign({type:p},d),xG[p]||{}),h)}},this.processForce=function(){var n=r,i=n.options,a=n.graphin,o=a.graph,s=i.type,l=i.animation,u=i.animate;if(s==="graphin-force"&&(n.options.graph=o),s==="force"||s==="g6force"||s==="gForce"||s==="comboCombined"){var c=n.options.onTick,f=function(){c&&c(),(l||u)&&n.refreshPosition()};n.options.tick=f;var h=n.options.onLayoutEnd;n.options.onLayoutEnd=function(){n.refreshPosition(),h==null||h(),o.emit("afterlayout")}}(s==="comboForce"||s==="comboCombined")&&(n.options.comboTrees=o.get("comboTrees"));var d={prev:LE.indexOf(n.prevOptions.type)!==-1,current:LE.indexOf(n.options.type)!==-1},p=n.options.type===n.prevOptions.type;if(!PE(a.data)){if(d.current&&!p){var v=n.options.preset;n.presetLayout=new Pi.Layout[v.type](Object.assign({},v)||{}),n.presetLayout.init(a.data),n.presetLayout.execute(),n.presetLayout.data=Object.assign({},a.data)}if(d.current&&d.prev&&!n.hasPosition()){var g=n.graph.save(),m=n.options.preset;PE(g)&&(n.presetLayout=new Pi.Layout[m.type](Object.assign({},m)||{}),n.presetLayout.init(a.data),n.presetLayout.execute(),g=a.data),a.data=Mgt(a.data,g)}}},this.refreshPosition=function(){var n=r.graphin,i=n.options,a=i.animate,o=i.layoutAnimate,s=r.options.type;a&&!o&&!r.options.animation?r.graph.positionsAnimate(s==="comboCombined"):r.graph.refreshPositions(s==="comboCombined")},this.destroy=function(){r.presetLayout&&r.presetLayout.destroy&&r.presetLayout.destroy(),r.instance&&r.instance.destroy&&r.instance.destroy(),r.presetLayout=null,r.instance=null},this.getDataFromGraph=function(){for(var n=[],i=[],a=[],o=[],s=r.graph.getNodes(),l=r.graph.getEdges(),u=r.graph.getCombos(),c=s.length,f=0;f<c;f++){var h=s[f];if(h&&h.isVisible()){var d=h.getModel();n.push(d)}}for(var p=l.length,v=0;v<p;v++){var g=l[v];if(g&&g.isVisible()){var m=g.getModel();m.isComboEdge?o.push(m):i.push(m)}}for(var y=u.length,w=0;w<y;w++){var b=u[w];if(b&&b.isVisible()){var x=b.getModel();a.push(x)}}return{nodes:n,edges:i,combos:a,comboEdges:o}},this.graphin=e,this.graph=this.graphin.graph,this.presetLayout=null,this.prevOptions={},this.init()}return Tgt(t,[{key:"hasPosition",value:function(){var r=this.graphin,n=r.data,i=n===void 0?{}:n;return!i.nodes||i.nodes.length===0?!1:i.nodes.every(function(a){return!window.isNaN(Number(a.x))&&!window.isNaN(Number(a.y))})}},{key:"init",value:function(){this.updateOptions();var r=this.options,n=this.graphin,i=n.data,a=r.type;this.processForce(),Pi.Layout[a]||console.warn("".concat(a," layout not found, current layout is grid"));var o=Pi.Layout[a]||Pi.Layout.grid;this.graph.emit("beforelayout"),this.instance=new o(this.options),this.instance.init(i)}},{key:"start",value:function(){var r=this.options.type;this.instance.execute(),!(r==="force"||r==="g6force"||r==="gForce"||r==="comboCombined"||r==="force2")&&(this.refreshPosition(),this.graph.emit("afterlayout"))}},{key:"changeLayout",value:function(){var r=this.graphin,n=r.graph,i=r.data,a=r.isTree,o=r.layoutCache;if(!n||n.destroyed||!i||!i.nodes||!i.nodes.length||o&&this.hasPosition()||a)return!1;LE.indexOf(this.options.type)!==-1&&this.destroy(),this.prevOptions=Object.assign({},this.options),this.init(),this.start()}}]),t}();const gY=Igt;var Ogt={mode:"light",primaryColor:"#873bf4",nodeSize:26,edgeSize:1,primaryEdgeColor:"#ddd"},eB=function(e){var r=Object.assign(Object.assign({},Ogt),e),n=r.primaryColor,i=r.primaryEdgeColor,a=r.nodeSize,o=r.edgeSize,s=r.mode,l=r.background,u=Fie({primaryColor:n,nodeSize:a,mode:s}),c=Nie({primaryEdgeColor:i,edgeSize:o,mode:s}),f=Rie(),h={light:"#fff",dark:"#1f1f1f"};return Object.assign(Object.assign({},r),{mode:s,background:l||h[s],defaultNodeStyle:{type:u.type,style:u.style},defaultNodeStatusStyle:{status:u.status},defaultEdgeStyle:{type:c.type,style:c.style},defaultEdgeStatusStyle:{status:c.status},defaultComboStyle:{type:f.type,style:f.style},defaultComboStatusStyle:{status:f.status}})},Dgt={animation:"animate",minDistanceThreshold:"minMovement",maxIterations:"maxIterations"},nD=function t(e,r){if(!e)return e;var n={};if(Object.keys(e).forEach(function(c){var f;if(c==="preset"&&(!((f=e.preset)===null||f===void 0)&&f.type)){n.preset=t(e.preset,r);return}var h=Dgt[c];h?n[h]=e[c]:n[c]=e[c]}),e.done&&(e.onLayoutEnd?n.onLayoutEnd=function(c){e.onLayoutEnd(r,c),e.done(r,c)}:n.onLayoutEnd=function(c){e.done(r,c)}),n.type==="concentric"){var i=n.minNodeSpacing,a=i===void 0?60:i,o=n.preventOverlap,s=o===void 0?!0:o,l=n.nodeSize,u=l===void 0?60:l;n.minNodeSpacing=a,n.preventOverlap=s,n.nodeSize=u}return n};function NN(t){"@babel/helpers - typeof";return NN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NN(t)}function Pgt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lgt(t,e,r){return e&&mY(t.prototype,e),r&&mY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rgt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FN(t,e)}function FN(t,e){return FN=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},FN(t,e)}function Ngt(t){var e=Bgt();return function(){var n=hM(t),i;if(e){var a=hM(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Fgt(this,i)}}function Fgt(t,e){if(e&&(NN(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ide(t)}function ide(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bgt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hM(t){return hM=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hM(t)}var RE=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},$gt=Dv.DragCanvas,zgt=Dv.ZoomCanvas,jgt=Dv.DragNode,Ggt=Dv.DragCombo,Ugt=Dv.ClickSelect,Wgt=Dv.BrushSelect,Vgt=Dv.ResizeCanvas,OT=function(t){Rgt(r,t);var e=Ngt(r);function r(n){var i;Pgt(this,r),i=e.call(this,n),i.graphDOM=null,i.initData=function(f){f.children&&(i.isTree=!0),i.data=cG(f)},i.initGraphInstance=function(){var f=i.props,h=f.theme,d=f.data,p=f.layout,v=f.width,g=f.height,m=f.defaultCombo,y=m===void 0?{style:{},type:"graphin-combo"}:m,w=f.defaultEdge,b=w===void 0?{style:{},type:"graphin-line"}:w,x=f.defaultNode,S=x===void 0?{style:{},type:"graphin-circle"}:x,E=f.nodeStateStyles,_=f.edgeStateStyles,k=f.comboStateStyles,C=f.modes,A=C===void 0?{default:[]}:C,M=f.animate,T=f.handleAfterLayout,O=RE(f,["theme","data","layout","width","height","defaultCombo","defaultEdge","defaultNode","nodeStateStyles","edgeStateStyles","comboStateStyles","modes","animate","handleAfterLayout"]);A.default.length>0&&console.info("%c suggestion: you can use @antv/graphin Behaviors components","color:lightgreen");var N=i.graphDOM,R=N.clientWidth,B=N.clientHeight;i.initData(d),i.width=Number(v)||R||500,i.height=Number(g)||B||500;var F=eB(h);F.defaultNodeStyle,F.defaultEdgeStyle,F.defaultComboStyle,F.defaultNodeStatusStyle,F.defaultEdgeStatusStyle,F.defaultComboStatusStyle;var D=RE(F,["defaultNodeStyle","defaultEdgeStyle","defaultComboStyle","defaultNodeStatusStyle","defaultEdgeStatusStyle","defaultComboStatusStyle"]);i.isTree=!!d.children||hY.indexOf(String(p&&p.type))!==-1;var L={defaultNode:{style:Object.assign(Object.assign({},S.style),{_theme:h}),type:S.type||"graphin-circle"},defaultEdge:{style:Object.assign(Object.assign({},b.style),{_theme:h}),type:b.type||"graphin-line"},defaultCombo:{style:Object.assign(Object.assign({},y.style),{_theme:h}),type:y.type||"combo",labelCfg:y.labelCfg},nodeStateStyles:E,edgeStateStyles:_,comboStateStyles:k};i.theme=Object.assign(Object.assign({},L),D),i.options=Object.assign(Object.assign(Object.assign({container:i.graphDOM,renderer:"canvas",width:i.width,height:i.height,animate:M!==!1},L),{modes:A}),O),i.isTree?(i.options.layout=p||Cgt,i.graph=new Pi.TreeGraph(i.options)):(i.useGraphinLayoutController||(i.options.layout=nD(p,i.graph)||kgt),i.graph=new Pi.Graph(i.options)),i.graph.on("afterlayout",function(){T&&T(i.graph)}),i.graph.data(i.data),i.setTextDirection(),i.graph.render(),!i.isTree&&i.useGraphinLayoutController&&(i.layout=new gY(ide(i)),i.layout.start()),i.initStatus(),i.apis=fY(i.graph),i.setState({isReady:!0,context:{graph:i.graph,apis:i.apis,theme:i.theme,layout:i.layout,dragNodes:i.dragNodes,updateContext:i.updateContext}})},i.updateLayout=function(){i.useGraphinLayoutController&&i.layout.changeLayout()},i.updateOptions=function(){var f=RE(i.props,[]);return f},i.initStatus=function(){if(!i.isTree){var f=i.props.data,h=f.nodes,d=h===void 0?[]:h,p=f.edges,v=p===void 0?[]:p;d.forEach(function(g){var m=g.status;m&&Object.keys(m).forEach(function(y){i.graph.setItemState(g.id,y,!!m[y])})}),v.forEach(function(g){var m=g.status;m&&Object.keys(m).forEach(function(y){i.graph.setItemState(g.id,y,!!m[y])})})}},i.updateContext=function(f){i.setState(function(h){return{context:Object.assign(Object.assign({},h.context),f)}})},i.clear=function(){i.layout&&i.layout.destroy&&i.layout.destroy(),i.layout={},i.graph.clear(),i.data={nodes:[],edges:[],combos:[]},i.graph.destroy()};var a=n.data,o=n.layout,s=n.width,l=n.height,u=n.layoutCache,c=RE(n,["data","layout","width","height","layoutCache"]);return i.data=a,i.isTree=!!(n.data&&n.data.children)||hY.indexOf(String(o&&o.type))!==-1,i.graph={},i.height=Number(l),i.width=Number(s),i.theme={},i.apis={},i.layoutCache=u,i.layout={},i.dragNodes=[],i.useGraphinLayoutController=(o==null?void 0:o.type)==="graphin-force",i.options=Object.assign({},c),i.state={isReady:!1,context:{graph:i.graph,apis:i.apis,theme:i.theme,layout:i.layout,dragNodes:i.dragNodes,updateContext:i.updateContext}},i}return Lgt(r,[{key:"setTextDirection",value:function(){var i=this.props.dir,a=i===void 0?"ltr":i;this.graph.get("canvas").get("el").setAttribute("dir",a)}},{key:"componentDidMount",value:function(){this.initGraphInstance()}},{key:"componentDidUpdate",value:function(i){var a=this,o,s,l=this.shouldUpdate(i,"data"),u=this.shouldUpdate(i,"layout"),c=this.shouldUpdate(i,"options");this.shouldUpdate(i,"theme");var f=this.props,h=f.data,d=f.layoutCache,p=f.rtl,v=f.layout,g=cG(v);this.layoutCache=d,c&&i.rtl!==p&&(this.setTextDirection(),this.graph.render());var m;if(l){if(this.initData(h),this.isTree)this.graph.changeData(this.data);else{var y=this.state.context.dragNodes;if(m=y.filter(function(S){var E;return((E=a.data)===null||E===void 0?void 0:E.nodes)&&a.data.nodes.find(function(_){return _.id===S.id})}),(s=(o=this.data)===null||o===void 0?void 0:o.nodes)===null||s===void 0||s.forEach(function(S){var E,_,k,C,A=m.find(function(M){return M.id===S.id});A&&(S.mass=(_=(E=A.layout)===null||E===void 0?void 0:E.force)===null||_===void 0?void 0:_.mass,S.layout=Object.assign(Object.assign({},S.layout),{force:{mass:(C=(k=A.layout)===null||k===void 0?void 0:k.force)===null||C===void 0?void 0:C.mass}}))}),this.useGraphinLayoutController)this.graph.data(this.data),this.graph.set("layoutController",null),this.graph.changeData(this.data),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{if(g&&(g.disableTriggerLayout=!0),this.layoutCache)this.graph.destroyLayout();else{var w=nD(g,this.graph);this.graph.updateLayout(w)}this.graph.data(this.data),this.graph.changeData(this.data),this.data=this.graph.get("data")}}this.initStatus(),this.apis=fY(this.graph),this.setState(function(S){return Object.assign(Object.assign({},S),{context:{graph:a.graph,apis:a.apis,theme:a.theme,layout:a.layout,dragNodes:m||S.context.dragNodes,updateContext:a.updateContext}})},function(){a.graph.emit("graphin:datachange"),u&&a.graph.emit("graphin:layoutchange",{prevLayout:i.layout,layout:g})});return}if(u){if(this.useGraphinLayoutController=(g==null?void 0:g.type)==="graphin-force",this.isTree){this.graph.updateLayout(g);return}if(this.useGraphinLayoutController)Object.keys(this.layout).length===0&&(this.layout=new gY(this)),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{var b=this.graph.get("layoutController");b||this.graph.initLayoutController();var x=nD(g,this.graph);x&&(x.disableTriggerLayout=!1),this.graph.updateLayout(x),this.data=this.graph.get("data")}this.graph.emit("graphin:layoutchange",{prevLayout:i.layout,layout:g})}}},{key:"componentWillUnmount",value:function(){var i=this.props.willUnmount;i?(i(),this.layout&&this.layout.destroy&&this.layout.destroy(),this.layout={},this.graph.destroyLayout()):this.clear()}},{key:"componentDidCatch",value:function(i,a){console.error("Catch component error: ",i,a)}},{key:"shouldUpdate",value:function(i,a){var o=i[a],s=this.props[a];return!XRe(o,s)}},{key:"render",value:function(){var i=this,a,o=this.state.isReady,s=this.props,l=s.modes,u=s.style,c=s.containerId,f=s.containerStyle;return ee.createElement(Oa.Provider,{value:this.state.context},ee.createElement("div",{id:c||"graphin-container",style:Object.assign({height:"100%",width:"100%",position:"relative"},f)},ee.createElement("div",{"data-testid":"custom-element",className:"graphin-core",ref:function(d){i.graphDOM=d},style:Object.assign({height:"100%",width:" 100%",minHeight:"500px",background:((a=this.theme)===null||a===void 0?void 0:a.background)||"#fff"},u)}),ee.createElement("div",{className:"graphin-components"},o&&ee.createElement(ee.Fragment,null,!l&&ee.createElement(ee.Fragment,null,ee.createElement($gt,null),ee.createElement(zgt,null),ee.createElement(jgt,null),ee.createElement(Ggt,null),ee.createElement(Ugt,null),ee.createElement(Wgt,null)),ee.createElement(Vgt,{graphDOM:this.graphDOM}),this.props.children))))}}],[{key:"registerBehavior",value:function(i,a){Pi.registerBehavior(i,a)}},{key:"registerFontFamily",value:function(i){var a=i(),o=a.glyphs,s=a.fontFamily,l=o.map(function(u){return{name:u.name,unicode:String.fromCodePoint(u.unicode_decimal)}});return new Proxy(l,{get:function(c,f){var h=c.find(function(d){return d.name===f});return h?h==null?void 0:h.unicode:(console.error("%c fontFamily:".concat(s,",does not found ").concat(f," icon")),"")}})}},{key:"registerLayout",value:function(i,a){Pi.registerLayout(i,a)}}]),r}(ee.PureComponent);OT.registerNode=function(t,e,r){Pi.registerNode(t,e,r)};OT.registerEdge=function(t,e,r){Pi.registerEdge(t,e,r)};OT.registerCombo=function(t,e,r){Pi.registerCombo(t,e,r)};const ade=OT;function Hgt(t){return Kgt(t)||qgt(t)||Ygt(t)||Xgt()}function Xgt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ygt(t,e){if(t){if(typeof t=="string")return BN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BN(t,e)}}function qgt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kgt(t){if(Array.isArray(t))return BN(t)}function BN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qgt=function(e,r){var n=e.data.id,i=0,a=0,o=0;return r.forEach(function(s){s.source.id===n&&(a+=1,i+=1),s.target.id===n&&(o+=1,i+=1)}),{degree:i,sDegree:a,tDegree:o}},Zgt=function(e,r){return Hgt(new Set(e==null?void 0:e.map(function(n){var i;return(i=n==null?void 0:n.data)===null||i===void 0?void 0:i[r]})))||[]},$N=function(e,r,n){var i,a;return e==="source"?((i=n==null?void 0:n.find(function(o){var s;return((s=o.target)===null||s===void 0?void 0:s.id)===r.id}))===null||i===void 0?void 0:i.source)||{}:((a=n==null?void 0:n.find(function(o){var s;return((s=o.source)===null||s===void 0?void 0:s.id)===r.id}))===null||a===void 0?void 0:a.target)||{}},ode=function(e,r,n,i){var a,o=((a=n==null?void 0:n.data)===null||a===void 0?void 0:a[r])||"",s=(i==null?void 0:i.filter(function(l){var u;return((u=l==null?void 0:l.data)===null||u===void 0?void 0:u[r])===o}))||[];return e==="leaf"&&(s=s.filter(function(l){var u,c,f,h;return((c=(u=l.data)===null||u===void 0?void 0:u.layout)===null||c===void 0?void 0:c.sDegree)===0||((h=(f=l.data)===null||f===void 0?void 0:f.layout)===null||h===void 0?void 0:h.tDegree)===0})),s},yY=function(e,r,n){var i=[];switch(e){case"source":i=n==null?void 0:n.filter(function(a){var o;return((o=a.source)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.target});break;case"target":i=n==null?void 0:n.filter(function(a){var o;return((o=a.target)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.source});break;case"both":i=n==null?void 0:n.filter(function(a){var o;return((o=a.source)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.target}).concat(n==null?void 0:n.filter(function(a){var o;return((o=a.target)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.source}));break}return i=JRe(i,"id"),i},Jgt=function(e,r,n,i){var a,o=((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.layout)||{},s=o.sDegree,l=o.tDegree,u=r,c=[];s===0?(u=$N("source",r,n),c=yY("both",u,n)):l===0&&(u=$N("target",r,n),c=yY("both",u,n)),c=c.filter(function(h){var d;return((d=h.data)===null||d===void 0?void 0:d.layout)&&(h.data.layout.sDegree===0||h.data.layout.tDegree===0)});var f=ode(e,i,r,c);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:f}},e0t=function(e){var r=e.map(function(l){return l.x}),n=e.map(function(l){return l.y}),i=(Math.max.apply(null,r)+Math.min.apply(null,r))/2,a=(Math.max.apply(null,n)+Math.min.apply(null,n))/2,o=function(u,c){return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))},s=e.map(function(l){return o(l.x||0,l.y||0)});return e[s.findIndex(function(l){return l===Math.min.apply(null,s)})]},t0t=function(e){var r={x:0,y:0};e.forEach(function(i){r.x+=i.x||0,r.y+=i.y||0});var n=e.length||1;return{x:r.x/n,y:r.y/n}};const Fg={getDegree:Qgt,getRelativeNodesType:Zgt,getCoreNodeAndRelativeLeafNodes:Jgt,getCoreNode:$N,getSameTypeNodes:ode,getMinDistanceNode:e0t,getAvgNodePosition:t0t};function wY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sde(t,e,r){return e&&wY(t.prototype,e),r&&wY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r0t=sde(function t(e){lde(this,t),this.id=e.id,this.data=e||{},this.x=e.x||0,this.y=e.y||0}),n0t=sde(function t(e,r,n,i){lde(this,t),this.id=e,this.source=r,this.target=n,this.data=i||{}});function i0t(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return ude(this.cover(e,r),e,r,t)}function ude(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function a0t(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)ude(this,o[r],s[r],t[r]);return this}function o0t(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function s0t(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function l0t(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ao(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function u0t(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new ao(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new ao(d[3],g,m,l,u),new ao(d[2],o,m,g,u),new ao(d[1],g,s,l,m),new ao(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function c0t(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function f0t(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function h0t(){return this._root}function d0t(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function p0t(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new ao(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new ao(i,u,c,s,l)),(i=n[2])&&e.push(new ao(i,a,c,u,l)),(i=n[1])&&e.push(new ao(i,u,o,s,c)),(i=n[0])&&e.push(new ao(i,a,o,u,c))}return this}function v0t(t){var e=[],r=[],n;for(this._root&&e.push(new ao(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new ao(a,o,s,c,f)),(a=i[1])&&e.push(new ao(a,c,s,l,f)),(a=i[2])&&e.push(new ao(a,o,f,c,u)),(a=i[3])&&e.push(new ao(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function g0t(t){return t[0]}function m0t(t){return arguments.length?(this._x=t,this):this._x}function y0t(t){return t[1]}function w0t(t){return arguments.length?(this._y=t,this):this._y}function cde(t,e,r){var n=new tB(e??g0t,r??y0t,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function tB(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function bY(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var go=cde.prototype=tB.prototype;go.copy=function(){var t=new tB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=bY(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=bY(n));return t};go.add=i0t;go.addAll=a0t;go.cover=o0t;go.data=s0t;go.extent=l0t;go.find=u0t;go.remove=c0t;go.removeAll=f0t;go.root=h0t;go.size=d0t;go.visit=p0t;go.visitAfter=v0t;go.x=m0t;go.y=w0t;var b0t=.81,xY=.1;function x0t(t,e,r){var n=r/(e*e),i=t.map(function(o,s){return Object.assign(Object.assign({index:s},o),{vx:0,vy:0,weight:n})}),a=cde(i,function(o){return o.x},function(o){return o.y}).visitAfter(S0t);return i.forEach(function(o){E0t(o,a)}),i.map(function(o){return{vx:o.vx,vy:o.vy}})}function S0t(t){var e=0,r=0,n=0;if(t.length){for(var i=0;i<4;i++){var a=t[i];a&&a.weight&&(e+=a.weight,r+=a.x*a.weight,n+=a.y*a.weight)}t.x=r/e,t.y=n/e,t.weight=e}else{var o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}function E0t(t,e){var r=function(i,a,o,s,l){var u=t.x-i.x||.001,c=t.y-i.y||.001,f=s-a,h=u*u+c*c+xY,d=Math.sqrt(h)+xY;if(f*f/b0t<h)return t.vx+=u/d*i.weight/h,t.vy+=c/d*i.weight/h,!0;if(i.length)return!1;i.data!==t&&(t.vx+=u/d*i.data.weight/h,t.vy+=c/d*i.data.weight/h)};e.visit(r)}function SY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _0t(t,e,r){return e&&SY(t.prototype,e),r&&SY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function C0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nu=_0t(function t(e,r){var n=this;C0t(this,t),this.getvec=function(){return n},this.add=function(i){return new t(n.x+i.x,n.y+i.y)},this.subtract=function(i){return new t(n.x-i.x,n.y-i.y)},this.magnitude=function(){return Math.sqrt(n.x*n.x+n.y*n.y)},this.normalise=function(){return n.divide(n.magnitude())},this.divide=function(i){return new t(n.x/i||0,n.y/i||0)},this.scalarMultip=function(i){return new t(n.x*i,n.y*i)},this.x=e,this.y=r});function EY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k0t(t,e,r){return e&&EY(t.prototype,e),r&&EY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var A0t=k0t(function t(e,r,n){var i=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;M0t(this,t),this.updateAcc=function(o){i.a=i.a.add(o.divide(i.m))},this.p=e,this.m=a,this.v=new Nu(0,0),this.a=new Nu(0,0),this.id=r,this.data=n});const _Y=A0t;function CY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T0t(t,e,r){return e&&CY(t.prototype,e),r&&CY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function I0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var O0t=T0t(function t(e,r,n){I0t(this,t),this.source=e,this.target=r,this.length=n});const kY=O0t;function MY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D0t(t,e,r){return e&&MY(t.prototype,e),r&&MY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var L0t=D0t(function t(e){var r=this;P0t(this,t),this.updateOptions=function(n){n&&Object.keys(n).forEach(function(i){r.props[i]=n[i]})},this.setData=function(n){r.nodes=[],r.edges=[],r.nodeSet={},r.edgeSet={},r.nodePoints=new Map,r.edgeSprings=new Map,r.sourceData=n,r.judgingDistance=0,("nodes"in n||"edges"in n)&&(r.addNodes(n.nodes),r.addEdges(n.edges))},this.getMass=function(n){var i,a=n.layout||{},o=a.degree,s=o===void 0?(i=Fg.getDegree(n,r.edges))===null||i===void 0?void 0:i.degree:o,l=a.force;return l&&l.mass?l.mass:s<5?1:s*5},this.init=function(){var n=r.props,i=n.width,a=n.height,o=r.props.centripetalOptions,s=r.props,l=s.leafCluster,u=s.clustering,c=s.nodeClusterBy,f=s.clusterNodeStrength,h=function(b){return typeof f=="function"?f(b):f},d;if(r.nodes.forEach(function(w){var b=w.data.x||i/2,x=w.data.y||a/2,S=new Nu(b,x);w.data.layout||(w.data.layout={});var E=Fg.getDegree(w,r.edges);w.data.layout=Object.assign(Object.assign({},w.data.layout),E);var _=r.getMass(w.data);r.nodePoints.set(w.id,new _Y(S,String(w.id),w.data,_))}),r.edges.forEach(function(w){var b=r.nodePoints.get(w.source.id),x=r.nodePoints.get(w.target.id),S=r.props.defSpringLen(w,b,x);r.edgeSprings.set(w.id,new kY(b,x,S))}),l){d=r.getSameTypeLeafMap();var p=Fg.getRelativeNodesType(r.nodes,c);o={single:100,leaf:function(b,x,S){var E=d[b.id]||{},_=E.relativeLeafNodes,k=E.sameTypeLeafNodes;return(k==null?void 0:k.length)===(_==null?void 0:_.length)||(p==null?void 0:p.length)===1?1:h(b)},others:1,center:function(b,x,S){var E,_=((E=b.data)===null||E===void 0?void 0:E.layout)||{},k=_.degree;if(!k)return{x:100,y:100};var C;if(k===1){var A=d[b.id]||{},M=A.sameTypeLeafNodes,T=M===void 0?[]:M;T.length===1?C=void 0:T.length>1&&(C=Fg.getAvgNodePosition(T))}else C=void 0;return{x:C==null?void 0:C.x,y:C==null?void 0:C.y}}}}if(u){d||(d=r.getSameTypeLeafMap());var v=Array.from(new Set(r.nodes.map(function(w){var b;return(b=w.data)===null||b===void 0?void 0:b[c]}))).filter(function(w){return w!==void 0}),g={};v.forEach(function(w){var b=r.nodes.filter(function(x){var S;return((S=x.data)===null||S===void 0?void 0:S[c])===w});g[w]=Fg.getAvgNodePosition(b)}),o={single:function(b){return h(b)},leaf:function(b){return h(b)},others:function(b){return h(b)},center:function(b,x,S){var E,_=g[(E=b.data)===null||E===void 0?void 0:E[c]];return{x:_==null?void 0:_.x,y:_==null?void 0:_.y}}}}r.centripetalOptions=Object.assign(Object.assign({},r.centripetalOptions),o);var m=r.nodePoints.size,y=Math.pow(10,2);r.props.minEnergyThreshold=1/2*Math.pow(1,2)*1*m*y},this.start=function(){r.init(),r.props.animation?r.animation():r.slienceForce()},this.calTotalEnergy=function(){var n=0;return r.nodes.forEach(function(i){var a=r.nodePoints.get(i.id),o=a.v.magnitude(),s=a.m;n+=s*Math.pow(o,2)*.5}),n},this.slienceForce=function(){for(var n=r.props,i=n.done,a=n.maxIterations,o=n.minDistanceThreshold,s=0;(r.judgingDistance>o||s<1)&&s<a;s++)r.tick(r.props.tickInterval),r.iterations++;r.render(),i&&i(r.renderNodes)},this.requestAnimationFrame=function(n){var i=r.props.enableWorker;return i?setInterval(function(){n()},16):window.requestAnimationFrame(n)},this.cancelAnimationFrame=function(n){var i=r.props.enableWorker;i?clearInterval(n):window.cancelAnimationFrame(n)},this.animation=function(){var n=r.props,i=n.enableWorker,a=n.maxIterations,o=n.minDistanceThreshold,s=n.done,l=n.tickInterval;if(i){for(var u=new Date().valueOf(),c=.22,f=function(w){return w>10?2e3:20*w*w},h=0;h<a;h++){var d=Math.max(.02,c-h*.002);r.tick(d);var p=new Date().valueOf()-u;p>=f(h)&&(r.render(),u=new Date().valueOf());var v=r.calTotalEnergy(),g=r.registers.get("monitor");if(g&&g(r.reportMointor(v)),r.judgingDistance<o){r.render(),s&&s(r.renderNodes);return}}return}var m=function y(){r.tick(l),r.render(),r.iterations++;var w=r.calTotalEnergy(),b=r.registers.get("monitor");b&&b(r.reportMointor(w)),r.judgingDistance<o||r.iterations>r.props.maxIterations?(r.cancelAnimationFrame(r.timer),r.iterations=0,r.done=!0,s&&s(r.renderNodes)):r.timer=r.requestAnimationFrame(y)};r.timer=r.requestAnimationFrame(m)},this.render=function(){var n=r.registers.get("render");r.renderNodes=[],r.nodePoints.forEach(function(i){r.renderNodes.push(Object.assign(Object.assign({},r.nodeSet[i.id]&&r.nodeSet[i.id].data),{x:i.p.x,y:i.p.y}))}),n?n({nodes:r.renderNodes,edges:r.sourceData.edges}):console.error("need a render function")},this.reportMointor=function(n){var i={energy:n,iterations:r.iterations,nodes:r.nodes,edges:r.edges};return i},this.tick=function(n){r.updateCoulombsLawOptimized(),r.updateHookesLaw(),r.attractToCentre(),r.attractToSide(),r.updateVelocity(n),r.updatePosition(n)},this.updateCoulombsLawOptimized=function(){var n=r.props.coulombDisScale,i=r.props.repulsion,a=r.nodes.map(function(s){var l=r.nodePoints.get(s.id).p;return{x:l.x,y:l.y}}),o=x0t(a,n,i);r.nodes.forEach(function(s,l){r.nodePoints.get(s.id).updateAcc(new Nu(o[l].vx,o[l].vy))})},this.updateCoulombsLaw=function(){for(var n=r.nodes.length,i=0;i<n;i++)for(var a=i+1;a<n;a++)if(i!==a){var o=r.nodes[i],s=r.nodes[a],l=r.props.coulombDisScale,u=r.props.repulsion,c=r.nodePoints.get(o.id).p.subtract(r.nodePoints.get(s.id).p),f=(c.magnitude()+.1)*l,h=c.normalise(),d=1;r.nodePoints.get(o.id).updateAcc(h.scalarMultip(u*d).divide(Math.pow(f,2))),r.nodePoints.get(s.id).updateAcc(h.scalarMultip(u*d).divide(-Math.pow(f,2)))}},this.updateHookesLaw=function(){r.edges.forEach(function(n){var i=r.edgeSprings.get(n.id),a=i.target.p.subtract(i.source.p),o=i.length-a.magnitude(),s=a.normalise();i.source.updateAcc(s.scalarMultip(-r.props.stiffness*o)),i.target.updateAcc(s.scalarMultip(r.props.stiffness*o))})},this.implementForce=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,o=r.nodePoints.get(n.id),s=o.p.subtract(i);o.updateAcc(s.scalarMultip(-a))},this.attractToCentre=function(){r.nodes.forEach(function(n){var i,a=(i=n.data)===null||i===void 0?void 0:i.layout,o=a.degree,s=a.sDegree,l=a.tDegree,u=r.centripetalOptions,c=u.leaf,f=u.single,h=u.others,d=u.center,p=r.props,v=p.width,g=p.height;if(d!==void 0){var m=d(n,r.nodes,r.edges,v,g),y=m.x,w=m.y,b=m.centerStrength;if(!(y===void 0||w===void 0)){var x=new Nu(y,w);if(b){r.implementForce(n,x,b);return}var S=typeof c=="function"?c(n,r.nodes,r.edges):c,E=typeof f=="function"?f(n):f,_=typeof h=="function"?h(n):h,k=l===0||s===0,C=o===0;if(!(S===0||E===0||_===0)){if(C){r.implementForce(n,x,E);return}if(k){r.implementForce(n,x,S);return}r.implementForce(n,x,_)}}}})},this.attractToSide=function(){if(!(!r.props.defSideCoe||typeof r.props.defSideCoe!="function")){var n=r.props.height;r.nodes.forEach(function(i){var a=r.props.defSideCoe(i);if(a!==0){var o=r.nodePoints.get(i.id),s=o.p.x,l=a>0?0:n,u=new Nu(s,l);r.implementForce(i,u,Math.abs(a))}})}},this.updateVelocity=function(n){r.nodes.forEach(function(i){var a=r.nodePoints.get(i.id);a.v=a.v.add(a.a.scalarMultip(n)).scalarMultip(r.props.damping),a.v.magnitude()>r.props.maxSpeed&&(a.v=a.v.normalise().scalarMultip(r.props.maxSpeed)),a.a=new Nu(0,0)})},this.updatePosition=function(n){var i;if(!(!((i=r.nodes)===null||i===void 0)&&i.length)){r.judgingDistance=0;return}var a=r.props.distanceThresholdMode,o=0;a==="max"?r.judgingDistance=-1/0:a==="min"&&(r.judgingDistance=1/0),r.nodes.forEach(function(s){var l=r.nodePoints.get(s.id);l.p=l.p.add(l.v.scalarMultip(n));var u=l.v.scalarMultip(n),c=u.magnitude();switch(a){case"max":r.judgingDistance<c&&(r.judgingDistance=c);break;case"min":r.judgingDistance>c&&(r.judgingDistance=c);break;default:o=o+c;break}}),(!a||a==="mean")&&(r.judgingDistance=o/r.nodes.length)},this.addNode=function(n){var i=r.props.ignore;i&&i(n)||(n.id in r.nodeSet||r.nodes.push(n),r.nodeSet[n.id]=n)},this.addNodes=function(n){n.forEach(function(i){r.addNode(new r0t(i))})},this.addEdge=function(n){return n.id in r.edgeSet||r.edges.push(n),r.edgeSet[n.id]=n,n},this.addEdges=function(n){try{for(var i=n.length,a=0;a<i;a++){var o=n[a],s=o.source,l=o.target,u=r.nodeSet[s];if(u===void 0)throw new TypeError("invalid node name: ".concat(o.source));var c=r.nodeSet[l];if(c===void 0)throw new TypeError("invalid node name: ".concat(o.target));var f=o.data,h=new n0t(String(r.nextEdgeId++),u,c,f);r.addEdge(h)}}catch(d){console.error(d)}},this.register=function(n,i){r.registers.set(n,i)},this.restart=function(n,i){var a=r.props.ignore;i.getNodes().forEach(function(s){var l=s.get("model");if(!(a&&a(l))){var u=new Nu(l.x,l.y),c=r.nodePoints.get(l.id);c&&(c.p=u,r.nodePoints.set(l.id,c))}});var o=function(l){var u=new Nu(l.x,l.y),c=r.getMass(l);r.nodePoints.set(l.id,new _Y(u,l.id,l.data,c)),r.edges.forEach(function(f){var h=r.nodePoints.get(f.source.id),d=r.nodePoints.get(f.target.id);if(h.id===l.id||d.id===l.id){var p=r.edgeSprings.get(f.id).length||100;r.edgeSprings.set(f.id,new kY(h,d,p))}})};n.forEach(o),r.props.restartAnimation?r.animation():r.slienceForce()},this.stop=function(){window.cancelAnimationFrame(r.timer),r.done=!0},this.getSameTypeLeafMap=function(){var n=r.props.nodeClusterBy,i={};return r.nodes.forEach(function(a){var o,s=((o=a.data)===null||o===void 0?void 0:o.layout)||{},l=s.degree;l===1&&(i[a.id]=Fg.getCoreNodeAndRelativeLeafNodes("leaf",a,r.edges,n))}),i},this.props={stiffness:200,enableWorker:!1,defSpringLen:function(i){return i.data.spring||200},repulsion:200*5,centripetalOptions:{leaf:2,single:2},leafCluster:!1,clustering:!1,nodeClusterBy:"cluster",clusterNodeStrength:20,damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,coulombDisScale:.005,tickInterval:.02,groupFactor:4,maxIterations:7440,minDistanceThreshold:.4,distanceThresholdMode:"mean",animation:!0,restartAnimation:!0,width:200,height:200},this.updateOptions(e),this.sourceData={nodes:[],edges:[],combos:[]},this.nodes=[],this.edges=[],this.nodeSet={},this.edgeSet={},this.renderNodes=[],this.nodePoints=new Map,this.edgeSprings=new Map,this.registers=new Map,this.done=!1,this.judgingDistance=0,this.iterations=0,this.nextEdgeId=0,this.timer=0,this.center=new Nu(0,0),this.centripetalOptions={leaf:2,single:2,others:1,center:function(i){return{x:r.props.width/2,y:r.props.height/2}}},this.dragNodes=[]});const R0t=L0t;var AY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const N0t=function(){Pi.registerLayout("graphin-force",{getDefaultCfg:function(){return{preset:{name:"grid",options:{}},stiffness:200,repulsion:200*5,centripetalOptions:{leaf:1.6,single:1.6},damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,MaxIterations:1e4,animation:!0}},init:function(e){this.nodes=e.nodes,this.edges=e.edges;var r=this,n=r.graph,i=AY(r,["graph"]),a=Object.assign(Object.assign({},this.getDefaultCfg()),i),o=a.width,s=a.height,l=a.animation,u=a.done,c=u===void 0?function(){}:u,f=AY(a,["width","height","animation","done"]);this.simulation=new R0t(Object.assign(Object.assign(Object.assign({width:o,height:s,animation:l},f),i),{done:function(d){c(n,d)}})),this.simulation.setData(e),this.simulation.register("render",function(h){if(!l&&e&&e.nodes&&e.nodes.length>0){var d=h.nodes;return e.nodes.forEach(function(v,g){var m=d[g];if(m&&m.id===v.id)v.x=d[g].x,v.y=d[g].y;else{var y=d.find(function(w){return w.id===v.id});y&&(v.x=y.x,v.y=y.y)}}),Object.assign({},h)}try{if(!n||n.destroyed)return;var p=!1;h.nodes.forEach(function(v){var g=n.findById(v.id);if(g){var m=g.get("model");m.x=v.x,m.y=v.y,g.getType()==="combo"&&(p=!0)}}),n.refreshPositions(p)}catch(v){console.error(v)}})},execute:function(){this.simulation.start()},layout:function(e){this.init(e),this.execute()},updateCfg:function(e){this.cfg=Object.assign(Object.assign({},this.cfg),e)},destroy:function(){this.destroyed=!0,this.simulation.stop(),this.simulation=null},getType:function(){return"graphin-force"}})},F0t=function(){Pi.registerLayout("preset",{init:function(){},execute:function(){},destroy:function(){this.destroyed=!0}})};function zN(t,e){return j0t(t)||z0t(t,e)||$0t(t,e)||B0t()}function B0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $0t(t,e){if(t){if(typeof t=="string")return TY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TY(t,e)}}function TY(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z0t(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function j0t(t){if(Array.isArray(t))return t}var IY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Pp=function(e,r,n){if(r)try{e.forEach(function(i){var a=i.cfg.name,o=r[a];if(o){var s=n(r,a),l=s.animate,u=s.visible,c=IY(s,["animate","visible"]);if(i.attrs.img)c.opacity!==void 0&&i.attr({opacity:c.opacity});else if(i.attr(c),i.cfg.visible=u!==!1,l){var f=l.attrs,h=IY(l,["attrs"]);i.animate(f,h)}}})}catch(i){console.error(i)}};function rB(t){return Object.keys(t).forEach(function(e){t[e]===void 0&&delete t[e]}),t}var dM=function(e){if(!e)return[0,0];var r=0,n=0;if(typeof e=="number")r=e,n=e;else if(Array.isArray(e)){if(e.length===1){var i=zN(e,1),a=i[0];r=a,n=a}else if(e.length===2){var o=zN(e,2),s=o[0],l=o[1];r=s,n=l}}return[r,n]},G0t=function(e){var r=e.label,n=e.keyshape;if(!(n!=null&&n.size)&&!(r!=null&&r.offset))return{x:void 0,y:void 0,textBaseline:r==null?void 0:r.textBaseline};!(n!=null&&n.size)&&(r!=null&&r.offset)&&(n.size=26,console.info("you should set keyshape.size when you update label position,the default keyshape size value is  26"));var i=n.size,a=[0,0],o=r.position,s=r.offset,l=s===void 0?a:s;(typeof l=="number"||typeof l=="string")&&(a=[Number(l),Number(l)]),l.length>0&&(a=l);var u=a,c=zN(u,2),f=c[0],h=c[1];if(o==="center")return{x:0+f,y:0+h};var d=dM(i),p=d[0],v=d[1],g;switch(o){case"top":g={x:0+f,y:-v/2-h,textBaseline:"bottom"};break;case"bottom":g={x:0+f,y:v/2+h,textBaseline:"top"};break;case"left":g={x:0-p-f,y:0+h,textAlign:"right"};break;case"right":g={x:0+p+f,y:0+h,textAlign:"left"};break;default:g={x:0+f,y:v/2+h,textBaseline:"top"};break}return g},U0t=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"RT",r=arguments.length>1?arguments[1]:void 0,n=0,i=0;return e==="LT"?(n=r*Math.cos(Math.PI*3/4),i=-r*Math.sin(Math.PI*3/4)):e==="LB"?(n=r*Math.cos(Math.PI*5/4),i=-r*Math.sin(Math.PI*5/4)):e==="RT"?(n=r*Math.cos(Math.PI*1/4),i=-r*Math.sin(Math.PI*1/4)):e==="RB"&&(n=r*Math.cos(Math.PI*7/4),i=-r*Math.sin(Math.PI*7/4)),{x:n,y:i}};function W0t(t){return X0t(t)||H0t(t)||hde(t)||V0t()}function V0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X0t(t){if(Array.isArray(t))return jN(t)}function fde(t,e){return K0t(t)||q0t(t,e)||hde(t,e)||Y0t()}function Y0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hde(t,e){if(t){if(typeof t=="string")return jN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jN(t,e)}}function jN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function q0t(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function K0t(t){if(Array.isArray(t))return t}var Ub=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function _2(t){var e;return typeof t=="number"?e=t/2:Array.isArray(t)&&(e=t[0]/2),e}var Q0t=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=eB(e),n=r.defaultNodeStyle,i=r.defaultNodeStatusStyle;return{style:n.style,status:i.status}},dde=function(e){var r=e.halo,n=e.keyshape,i=r.size,a=r.visible,o=r.fill,s=r.fillOpacity,l=Ub(r,["size","visible","fill","fillOpacity"]),u=_2(i),c,f,h;if(n&&n.size){var d=_2(n.size);c=d+15}n&&n.fill&&(f=n.fill),n&&n.stroke&&(h=n.stroke);var p=Object.assign({x:0,y:0,r:u||c,fill:o||f||h,fillOpacity:s||.1,visible:a!==!1},l);return{name:"halo",visible:a!==!1,attrs:rB(p)}},pde=function(e){var r=e.keyshape,n=r.size,i=r.visible,a=r.stroke,o=r.fill,s=r.fillOpacity,l=r.strokeOpacity,u=Ub(r,["size","visible","stroke","fill","fillOpacity","strokeOpacity"]),c=_2(n),f=Object.assign({x:0,y:0,r:c,cursor:"pointer",visible:i!==!1,stroke:a,strokeOpacity:l||1,fill:o||a,fillOpacity:s||.2},u);return{name:"keyshape",visible:i!==!1,attrs:rB(f)}},vde=function(e){var r=e.label,n=r.value,i=r.fill,a=r.fontSize,o=r.visible,s=Ub(r,["value","fill","fontSize","visible"]),l=G0t(e),u=Object.assign({x:l.x,y:l.y,fontSize:a,text:n,textAlign:"center",fill:i,textBaseline:l.textBaseline,visible:o!==!1},s);return{name:"label",visible:o!==!1,attrs:rB(u)}},GN=function(e){var r=e.icon,n=r.value,i=n===void 0?"":n,a=r.type,o=r.fontFamily,s=r.textAlign,l=s===void 0?"center":s,u=r.textBaseline,c=u===void 0?"middle":u,f=r.fill,h=r.size,d=r.visible;r.clip;var p=Ub(r,["value","type","fontFamily","textAlign","textBaseline","fill","size","visible","clip"]),v=dM(h),g=fde(v,2),m=g[0],y=g[1],w={name:"icon",visible:d!==!1,capture:!1};return a==="text"||a==="font"?Object.assign(Object.assign({},w),{attrs:Object.assign({x:0,y:0,textAlign:l,textBaseline:c,text:i,fontSize:m,fontFamily:o,fill:f,visible:d!==!1},p)}):Object.assign(Object.assign({},w),{attrs:Object.assign({x:-m/2,y:-y/2,img:i,width:m,height:y,visible:d!==!1},p)})},NE=function(e,r){return r==="keyshape"?pde(e).attrs:r==="halo"?dde(e).attrs:r==="label"?vde(e).attrs:r==="icon"?GN(e).attrs:e[r]||{}},OY=function(e,r,n){var i=e.type,a=e.position,o=e.value,s=o===void 0?"":o,l=e.size,u=e.fill,c=e.stroke,f=e.color,h=e.fontSize,d=e.fontFamily,p=e.padding,v=p===void 0?0:p,g=e.offset,m=g===void 0?[0,0]:g,y=e.id,w=dM(m),b=dM(l),x=fde(b,2),S=x[0],E=x[1],_=U0t(a,n),k=_.x,C=_.y,A=k,M=C;if(S===E){A+=w[0],M+=w[1];var T={attrs:{r:S/2+v,fill:u,stroke:c,x:A,y:M},name:"badges-circle"};y&&(T.id=y),r.addShape("circle",T)}else{A=k-S-v*2,M=C-E-v*2,a==="LB"?M=C:a==="RT"?(A=k,M=C-E-v*2):a==="RB"&&(A=k,M=C),A+=w[0],M+=w[1];var O={attrs:{width:S+v*2,height:E+v*2,fill:u,stroke:c,x:A,y:M,radius:(E+v*2)/3},name:"badges-rect"};y&&(O.id=y),r.addShape("rect",O)}i==="font"||i==="text"?r.addShape("text",{attrs:{x:S!==E?A+S/2+v:A,y:S!==E?M+E/2+v:M,text:s,fontSize:h,textAlign:"center",textBaseline:"middle",fontFamily:d,fill:f},capture:!1,name:"badges-text"}):i==="image"&&r.addShape("image",{attrs:{x:A-S/2,y:M-E/2,width:S,height:E,img:s},capture:!1,name:"badges-image"})};const Z0t=function(){Pi.registerNode("graphin-circle",{options:{style:{},status:{}},draw:function(e,r){var n=e.style._theme;this.options=Q0t(n);var i=Hp({},this.options.style,e.style);e._initialStyle=Object.assign({},i);var a=i.icon,o=i.badges,s=o===void 0?[]:o,l=i.keyshape,u=_2(l.size);r.addShape("circle",dde(i));var c=r.addShape("circle",pde(i));r.addShape("text",vde(i));var f=a.type;if((f==="text"||f==="font")&&r.addShape("text",GN(i)),f==="image"){var h=GN(i),d=r.addShape("image",h),p=i.icon.clip;if(p){var v=p.r,g=Ub(p,["r"]);d.setClip({type:"circle",attrs:Object.assign({x:0,y:0,r:v},g)})}}return s.forEach(function(m){OY(m,r,u)}),c},setState:function(e,r,n){var i;if(e){var a=n.getModel(),o=n.getContainer().get("children"),s=Hp({},this.options.status,a.style.status),l=n.getModel()._initialStyle,u=((i=n._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(s).forEach(function(c){e===c&&(r?Pp(o,s[c],NE):(Pp(o,l,NE),u.forEach(function(f){Pp(o,s[f],NE)})))})}catch(c){console.error(c)}}},update:function(e,r){if(e.style)try{var n=Hp({},e._initialStyle,e.style);e._initialStyle=Object.assign({},n);var i=n.badges,a=n.keyshape,o=_2(a.size),s=r.getContainer(),l=s.get("children");Pp(l,n,NE);var u=W0t(l);if(i){var c=0;u.forEach(function(f){f.cfg.name.startsWith("badges")?l.splice(c,1):c=c+1}),i.forEach(function(f){OY(f,s,o)})}}catch{console.error("error")}}})};function J0t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function emt(t,e){return imt(t)||nmt(t,e)||rmt(t,e)||tmt()}function tmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rmt(t,e){if(t){if(typeof t=="string")return DY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DY(t,e)}}function DY(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nmt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function imt(t){if(Array.isArray(t))return t}var C2=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},amt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=eB(e),n=r.defaultEdgeStyle,i=r.defaultEdgeStatusStyle;return{style:n.style,status:i.status}},PY;(function(t){t.NORMAL="normal",t.SELECTED="selected",t.HOVERED="hovered",t.DISABLED="disabled"})(PY||(PY={}));function nB(t){return Object.keys(t).forEach(function(e){t[e]===void 0&&delete t[e]}),t}function omt(t){var e=t.value,r=C2(t,["value"]),n=Object.assign({id:"label",text:e},r);return nB(n)}function smt(t){var e=C2(t,[]),r=Object.assign({id:"keyshape"},e);return nB(r)}function lmt(t){var e=C2(t,[]),r=Object.assign({id:"halo"},e);return nB(r)}function umt(t){return Object.assign({id:"label-background"},t)}var iD=function(e,r){return r==="keyshape"?smt(e.keyshape||{}):r==="halo"?lmt(e.halo||{}):r==="label"?omt(e.label||{}):r==="label-background"?umt(e[r]||{}):e[r]||{}},gde=function(e,r,n){var i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},a=r.x-e.x,o=r.y-e.y,s=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),l=i.y-a*n/s||0,u=i.x+o*n/s||0;return{x:u,y:l}},cmt=function(e,r){var n,i,a,o=e.startPoint,s=o===void 0?{x:0,y:0}:o,l=e.endPoint,u=l===void 0?{x:0,y:0}:l,c=e.sourceNode,f=e.targetNode,h=r.keyshape,d=h.type,p=d===void 0?"line":d,v=h.poly,g=v===void 0?{distance:0}:v,m=h.loop,y=m===void 0?{}:m,w=c.get("model"),b=((n=f)===null||n===void 0?void 0:n.get("model"))||{id:"temp"};if(p==="loop"||w.id===b.id){var x=((a=(i=w.style)===null||i===void 0?void 0:i.keyshape)===null||a===void 0?void 0:a.size)||26,S=Object.assign({distance:0,dx:8,rx:void 0,ry:void 0},y),E=S.distance,_=S.dx,k=S.rx,C=S.ry,A=x/2,M=Math.sqrt(Math.max(Math.pow(A,2)-Math.pow(_,2),0)),T=k||A*2*.5,O=C||A*2*.6;return[["M",s.x-_,s.y-M],["A",T+E,O+E,0,1,1,s.x+_,s.y-M]]}if(p==="poly"){var N=gde(s,u,(g==null?void 0:g.distance)||0);return[["M",s.x,s.y],["Q",N.x,N.y,u.x,u.y]]}return[["M",s.x,s.y],["L",u.x,u.y]]};const fmt=function(){Pi.registerEdge("graphin-line",{draw:function(e,r){var n,i,a,o,s,l,u,c=e.style._theme;this.options=amt(c);var f=Hp({},this.options.style,e.style);e&&(e._initialStyle=Object.assign({},f));var h=e.startPoint,d=h===void 0?{x:0,y:0}:h,p=e.endPoint,v=p===void 0?{x:0,y:0}:p,g=e.sourceNode,m=e.targetNode,y=f.label,w=f.halo,b=f.keyshape,x=g.get("model"),S=((n=m)===null||n===void 0?void 0:n.get("model"))||{id:"temp"},E=((a=(i=x.style)===null||i===void 0?void 0:i.keyshape)===null||a===void 0?void 0:a.size)||28,_=(b==null?void 0:b.type)==="loop"||x.id===S.id,k=y.value,C=(b==null?void 0:b.type)==="poly",A=gde(d,v,((o=b==null?void 0:b.poly)===null||o===void 0?void 0:o.distance)||0),M=(b==null?void 0:b.lineWidth)||1,T=M+5,O=cmt(e,f);r.addShape("path",{attrs:Object.assign({id:"halo",path:O,lineWidth:M+10,stroke:w.stroke||b.stroke,strokeOpacity:w.strokeOpacity||.4},w),draggable:!0,name:"halo",visible:w.visible!==!1});var N=r.addShape("path",{attrs:Object.assign({id:"keyshape",path:O,endArrow:_?void 0:{d:0,path:"M 0,0 L ".concat(T,",").concat(T/2," L ").concat(T,",-").concat(T/2," Z"),fill:b.stroke},startArrow:_?{d:0,path:"M 0,0 L ".concat(T,",").concat(T/2," L ").concat(T,",-").concat(T/2," Z"),fill:b.stroke}:void 0},b),draggable:!0,name:"keyshape"});if(k){var R=y.value,B=y.fontSize,F=B===void 0?8:B,D=y.offset,L=D===void 0?[0,0]:D,G=y.background,Y=C2(y,["value","fontSize","offset","background"]),Z=!!G,q=emt(L,2),pe=q[0],Se=q[1],Ae=Math.atan((v.y-d.y)/(v.x-d.x)),He=[(d.x+v.x)/2,(d.y+v.y)/2];if(C&&(He=[(A.x+He[0])/2,(A.y+He[1])/2]),v.x-d.x===0&&(Ae=Math.PI/2),_&&(Ae=2*Math.PI),Z){var ct=Bie(R),st=ct*F*.6,Mt=F*1.8,yt={fill:"#fff",width:st,height:Mt,stroke:b.stroke,lineWidth:1,radius:6},ar=Object.assign(Object.assign({},yt),G),Jt=ar.fill,er=ar.width,yr=ar.height,or=ar.stroke,zt=C2(ar,["fill","width","height","stroke"]),tr=-yr/2+Se;_&&(tr=-(yr/2+Se+F+E*1+(((s=b==null?void 0:b.loop)===null||s===void 0?void 0:s.distance)||0)*2));var Dr=r.addShape("rect",{attrs:Object.assign({id:"label-background",x:-er/2+pe,y:tr,width:er,height:yr,fill:Jt,stroke:or},zt),draggable:!0,name:"label-background"});Dr.rotate(Ae),Dr.translate(He[0],He[1])}var Ze=Se-F/2;Z&&(Ze=Se+F/2),_&&(Z?Ze=-(Se+F/2+E*1+(((l=b==null?void 0:b.loop)===null||l===void 0?void 0:l.distance)||0)*2):Ze=-(Se+F+E*1+(((u=b==null?void 0:b.loop)===null||u===void 0?void 0:u.distance)||0)*2));var oe=r.addShape("text",{attrs:Object.assign({id:"label",x:pe,y:Ze,text:R,fontSize:F},Y),draggable:!0,name:"label"});oe.rotate(Ae),oe.translate(He[0],He[1])}return N},setState:function(e,r,n){var i;if(e){var a=n.getModel(),o=n.getContainer().get("children"),s=Hp({},this.options.status,a.style.status),l=n.getModel()._initialStyle,u=((i=n._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(s).forEach(function(c){var f;e===c&&(r?Pp(o,s[c],iD):(Pp(o,Object.assign(Object.assign({},l),J0t({},"label-background",(f=l.label)===null||f===void 0?void 0:f.background)),iD),u.forEach(function(h){Pp(o,s[h],iD)})))})}catch(c){console.error(c)}}},afterDraw:function(e,r){var n=Hp({},this.options.style,e.style),i=n.animate,a=n.keyshape;if(!(!i||!i.type||i.visible===!1)){var o=r.get("children").find(function(y){return y.get("name")==="keyshape"}),s=i.color,l=i.type,u=i.repeat,c=u===void 0?!0:u,f=i.duration,h=f===void 0?3e3:f;if(l==="circle-running"){var d=o.getPoint(0),p=r.addShape("circle",{attrs:{x:d.x,y:d.y,fill:s||a.stroke,r:a.lineWidth*1.5+2},name:"circle-shape"});p.animate(function(y){var w=o.getPoint(y);return{x:w.x,y:w.y}},{repeat:c,duration:h})}if(l==="line-dash"){var v=0,g=i.lineDash||a.lineDash||[4,2,1,2];o.animate(function(){return v++,v>9&&(v=0),{lineDash:g,lineDashOffset:-v}},{repeat:c,duration:h})}if(l==="line-growth"){var m=o.getTotalLength();o.animate(function(y){var w=y*m;return{lineDash:[w,m-w]}},{repeat:c,duration:h})}}}})};N0t();F0t();Z0t();fmt();ade.registerFontFamily;function hmt(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pM={exports:{}};const dmt={},pmt=Object.freeze(Object.defineProperty({__proto__:null,default:dmt},Symbol.toStringTag,{value:"Module"})),LY=su(pmt);pM.exports;(function(t,e){var r=function(){var n=function(gt,it,wt,kt){for(wt=wt||{},kt=gt.length;kt--;wt[gt[kt]]=it);return wt},i=[6,12,15,24,34,43,48,99,109,112,114,115,124,125,130,298,299,300,301,302],a=[2,196],o=[99,109,112,114,115,124,125,130,298,299,300,301,302],s=[1,18],l=[1,27],u=[6,83],c=[38,39,51],f=[38,51],h=[1,55],d=[1,57],p=[1,53],v=[1,56],g=[28,29,293],m=[13,16,286],y=[111,133,296,303],w=[13,16,111,133,286],b=[1,80],x=[1,84],S=[1,86],E=[111,133,296,297,303],_=[13,16,111,133,286,297],k=[1,92],C=[2,236],A=[1,91],M=[13,16,28,29,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],T=[6,38,39,51,61,68,71,79,81,83],O=[6,13,16,28,38,39,51,61,68,71,79,81,83,286],N=[6,13,16,28,29,31,32,38,39,41,51,61,68,71,79,80,81,83,86,92,108,111,124,125,127,132,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,306,307,309,310,311,312,313,314,315,316],R=[1,107],B=[1,108],F=[6,13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],D=[2,295],L=[1,125],G=[1,123],Y=[6,183],Z=[2,312],q=[2,300],pe=[38,127],Se=[6,41,68,71,79,81,83],Ae=[2,238],He=[1,139],ct=[1,141],st=[1,151],Mt=[1,157],yt=[1,160],ar=[1,156],Jt=[1,158],er=[1,154],yr=[1,155],or=[1,161],zt=[1,162],tr=[1,165],Dr=[1,166],Ze=[1,167],oe=[1,168],P=[1,169],_e=[1,170],Pe=[1,171],ye=[1,172],Fe=[1,173],Be=[1,174],Xe=[1,175],et=[1,176],Ot=[6,61,68,71,79,81,83],nr=[28,29,38,39,51],Kt=[13,16,28,29,80,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,316,317,318,319,320,321],At=[2,409],rr=[1,189],Qt=[1,190],hr=[1,191],Xr=[13,16,41,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Zn=[41,86],Tr=[28,32],pn=[6,108,183],li=[41,111],vn=[6,41,71,79,81,83],Xo=[2,324],ha=[2,316],Ps=[1,226],Sn=[1,228],da=[41,111,304],Qi=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,187,208,213,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],Nn=[13,16,28,29,31,32,39,41,80,83,86,92,111,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316],Ls=[13,16,28,29,31,32,39,41,80,83,86,92,111,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316],Rs=[31,32,183,223,251],Si=[31,32,183,223,227,251],rn=[31,32,183,223,227,231,246,251,268,280,281,282,283,284,285,310,311,312,313,314,315,316],nn=[31,32,183,223,227,231,246,251,268,280,281,282,283,284,285,293,307,310,311,312,313,314,315,316],Vt=[1,260],kr=[1,261],_t=[1,263],Yr=[1,264],an=[1,265],Ei=[1,266],_i=[1,268],Jn=[1,269],ui=[2,416],Ci=[1,271],ki=[1,272],mo=[1,273],yo=[1,279],wo=[1,274],bo=[1,275],xo=[1,276],So=[1,277],Eo=[1,278],Nd=[1,286],$v=[1,299],Fd=[6,41,79,81,83],zv=[1,316],jv=[1,315],Ac=[39,41,83,111,159,160,162,165,166],Gv=[1,324],Uv=[1,325],jf=[41,111,183,216,304],Wb=[2,354],Bd=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Wv=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],En=[13,16,28,29,80,208,246,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,310,316,317,318,319,320,321],Vv=[1,349],ay=[1,350],Vb=[1,352],Gf=[1,351],ci=[6,13,16,28,29,31,32,39,41,68,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316,317,318,319,320,321],oy=[1,360],Hv=[1,359],$d=[29,86],sy=[13,16,32,41,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],ly=[29,41],Hb=[2,315],Ni=[6,41,83],Da=[6,13,16,29,41,71,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],Uf=[6,13,16,28,29,39,41,71,74,76,79,80,81,83,86,111,159,160,162,165,166,215,218,219,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304,316,317,318,319,320,321],Tc=[6,13,16,28,29,41,68,71,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],Xb=[6,13,16,28,29,31,32,39,41,61,68,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,305,307,310,311,312,313,314,315,316,317,318,319,320,321],Ic=[13,16,29,187,208,213,286],Mi=[2,366],uy=[1,401],Xv=[39,41,83,111,159,160,162,165,166,304],Yv=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,187,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],Yb=[13,16,28,29,80,208,246,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,310,316,317,318,319,320,321],qb=[1,450],Kb=[1,447],Qb=[1,448],Zb=[13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Jb=[13,16,28,286],gu=[13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],bl=[2,327],Yo=[39,41,83,111,159,160,162,165,166,183,216,304],Wf=[6,13,16,28,29,41,74,76,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],xl=[2,322],zd=[13,16,29,187,208,286],qv=[13,16,32,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],cy=[13,16,28,29,41,80,86,111,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],mu=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,306,307],qo=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,306,307,309,310],Kv=[1,561],Qv=[1,562],Sl=[2,310],jd=[13,16,32,187,213,286],Zv={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClause:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifier:21,SubSelect:22,SubSelect_option0:23,SELECT:24,SelectClause_option0:25,SelectClause_group0:26,SelectClauseItem:27,VAR:28,"(":29,Expression:30,AS:31,")":32,ConstructQuery:33,CONSTRUCT:34,ConstructTemplate:35,ConstructQuery_repetition0:36,ConstructQuery_repetition1:37,WHERE:38,"{":39,ConstructQuery_option0:40,"}":41,DescribeQuery:42,DESCRIBE:43,DescribeQuery_group0:44,DescribeQuery_repetition0:45,DescribeQuery_option0:46,AskQuery:47,ASK:48,AskQuery_repetition0:49,DatasetClause:50,FROM:51,DatasetClause_option0:52,iri:53,WhereClause_option0:54,GroupGraphPattern:55,SolutionModifier_option0:56,SolutionModifier_option1:57,SolutionModifier_option2:58,SolutionModifier_option3:59,GroupClause:60,GROUP:61,BY:62,GroupClause_repetition_plus0:63,GroupCondition:64,BuiltInCall:65,FunctionCall:66,HavingClause:67,HAVING:68,HavingClause_repetition_plus0:69,OrderClause:70,ORDER:71,OrderClause_repetition_plus0:72,OrderCondition:73,ASC:74,BrackettedExpression:75,DESC:76,Constraint:77,LimitOffsetClauses:78,LIMIT:79,INTEGER:80,OFFSET:81,ValuesClause:82,VALUES:83,InlineData:84,InlineData_repetition0:85,NIL:86,InlineData_repetition1:87,InlineData_repetition_plus2:88,InlineData_repetition3:89,DataBlockValue:90,Literal:91,UNDEF:92,DataBlockValueList:93,DataBlockValueList_repetition_plus0:94,Update:95,Update_repetition0:96,Update1:97,Update_option0:98,LOAD:99,Update1_option0:100,Update1_option1:101,Update1_group0:102,Update1_option2:103,GraphRefAll:104,Update1_group1:105,Update1_option3:106,GraphOrDefault:107,TO:108,CREATE:109,Update1_option4:110,GRAPH:111,INSERTDATA:112,QuadPattern:113,DELETEDATA:114,DELETEWHERE:115,Update1_option5:116,InsertClause:117,Update1_option6:118,Update1_repetition0:119,Update1_option7:120,DeleteClause:121,Update1_option8:122,Update1_repetition1:123,DELETE:124,INSERT:125,UsingClause:126,USING:127,UsingClause_option0:128,WithClause:129,WITH:130,IntoGraphClause:131,INTO:132,DEFAULT:133,GraphOrDefault_option0:134,GraphRefAll_group0:135,QuadPattern_option0:136,QuadPattern_repetition0:137,QuadsNotTriples:138,QuadsNotTriples_group0:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GraphPatternNotTriples_repetition0:158,OPTIONAL:159,MINUS:160,GraphPatternNotTriples_group0:161,SERVICE:162,GraphPatternNotTriples_option0:163,GraphPatternNotTriples_group1:164,FILTER:165,BIND:166,FunctionCall_option0:167,FunctionCall_repetition0:168,ExpressionList:169,ExpressionList_repetition0:170,ConstructTemplate_option0:171,ConstructTriples:172,ConstructTriples_repetition0:173,ConstructTriples_option0:174,VarOrTerm:175,PropertyListNotEmpty:176,TriplesNode:177,PropertyList:178,PropertyList_option0:179,VerbObjectList:180,PropertyListNotEmpty_repetition0:181,SemiOptionalVerbObjectList:182,";":183,SemiOptionalVerbObjectList_option0:184,Verb:185,ObjectList:186,a:187,ObjectList_repetition0:188,GraphNode:189,PropertyListPathNotEmpty:190,TriplesNodePath:191,TriplesSameSubjectPath_option0:192,PropertyListPathNotEmpty_group0:193,PropertyListPathNotEmpty_repetition0:194,GraphNodePath:195,PropertyListPathNotEmpty_repetition1:196,PropertyListPathNotEmptyTail:197,PropertyListPathNotEmptyTail_group0:198,Path:199,Path_repetition0:200,PathSequence:201,PathSequence_repetition0:202,PathEltOrInverse:203,PathElt:204,PathPrimary:205,PathElt_option0:206,PathEltOrInverse_option0:207,"!":208,PathNegatedPropertySet:209,PathOneInPropertySet:210,PathNegatedPropertySet_repetition0:211,PathNegatedPropertySet_option0:212,"^":213,TriplesNode_repetition_plus0:214,"[":215,"]":216,TriplesNodePath_repetition_plus0:217,BLANK_NODE_LABEL:218,ANON:219,ConditionalAndExpression:220,Expression_repetition0:221,ExpressionTail:222,"||":223,RelationalExpression:224,ConditionalAndExpression_repetition0:225,ConditionalAndExpressionTail:226,"&&":227,AdditiveExpression:228,RelationalExpression_group0:229,RelationalExpression_option0:230,IN:231,MultiplicativeExpression:232,AdditiveExpression_repetition0:233,AdditiveExpressionTail:234,AdditiveExpressionTail_group0:235,NumericLiteralPositive:236,AdditiveExpressionTail_repetition0:237,NumericLiteralNegative:238,AdditiveExpressionTail_repetition1:239,UnaryExpression:240,MultiplicativeExpression_repetition0:241,MultiplicativeExpressionTail:242,MultiplicativeExpressionTail_group0:243,UnaryExpression_option0:244,PrimaryExpression:245,"-":246,Aggregate:247,FUNC_ARITY0:248,FUNC_ARITY1:249,FUNC_ARITY2:250,",":251,IF:252,BuiltInCall_group0:253,BOUND:254,BNODE:255,BuiltInCall_option0:256,EXISTS:257,COUNT:258,Aggregate_option0:259,Aggregate_group0:260,FUNC_AGGREGATE:261,Aggregate_option1:262,GROUP_CONCAT:263,Aggregate_option2:264,Aggregate_option3:265,GroupConcatSeparator:266,SEPARATOR:267,"=":268,String:269,LANGTAG:270,"^^":271,DECIMAL:272,DOUBLE:273,true:274,false:275,STRING_LITERAL1:276,STRING_LITERAL2:277,STRING_LITERAL_LONG1:278,STRING_LITERAL_LONG2:279,INTEGER_POSITIVE:280,DECIMAL_POSITIVE:281,DOUBLE_POSITIVE:282,INTEGER_NEGATIVE:283,DECIMAL_NEGATIVE:284,DOUBLE_NEGATIVE:285,PNAME_LN:286,QueryOrUpdate_group0_option0:287,Prologue_repetition0_group0:288,SelectClause_option0_group0:289,DISTINCT:290,REDUCED:291,SelectClause_group0_repetition_plus0:292,"*":293,DescribeQuery_group0_repetition_plus0_group0:294,DescribeQuery_group0_repetition_plus0:295,NAMED:296,SILENT:297,CLEAR:298,DROP:299,ADD:300,MOVE:301,COPY:302,ALL:303,".":304,UNION:305,"|":306,"/":307,PathElt_option0_group0:308,"?":309,"+":310,"!=":311,"<":312,">":313,"<=":314,">=":315,NOT:316,CONCAT:317,COALESCE:318,SUBSTR:319,REGEX:320,REPLACE:321,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"SELECT",28:"VAR",29:"(",31:"AS",32:")",34:"CONSTRUCT",38:"WHERE",39:"{",41:"}",43:"DESCRIBE",48:"ASK",51:"FROM",61:"GROUP",62:"BY",68:"HAVING",71:"ORDER",74:"ASC",76:"DESC",79:"LIMIT",80:"INTEGER",81:"OFFSET",83:"VALUES",86:"NIL",92:"UNDEF",99:"LOAD",108:"TO",109:"CREATE",111:"GRAPH",112:"INSERTDATA",114:"DELETEDATA",115:"DELETEWHERE",124:"DELETE",125:"INSERT",127:"USING",130:"WITH",132:"INTO",133:"DEFAULT",159:"OPTIONAL",160:"MINUS",162:"SERVICE",165:"FILTER",166:"BIND",183:";",187:"a",208:"!",213:"^",215:"[",216:"]",218:"BLANK_NODE_LABEL",219:"ANON",223:"||",227:"&&",231:"IN",246:"-",248:"FUNC_ARITY0",249:"FUNC_ARITY1",250:"FUNC_ARITY2",251:",",252:"IF",254:"BOUND",255:"BNODE",257:"EXISTS",258:"COUNT",261:"FUNC_AGGREGATE",263:"GROUP_CONCAT",267:"SEPARATOR",268:"=",270:"LANGTAG",271:"^^",272:"DECIMAL",273:"DOUBLE",274:"true",275:"false",276:"STRING_LITERAL1",277:"STRING_LITERAL2",278:"STRING_LITERAL_LONG1",279:"STRING_LITERAL_LONG2",280:"INTEGER_POSITIVE",281:"DECIMAL_POSITIVE",282:"DOUBLE_POSITIVE",283:"INTEGER_NEGATIVE",284:"DECIMAL_NEGATIVE",285:"DOUBLE_NEGATIVE",286:"PNAME_LN",290:"DISTINCT",291:"REDUCED",293:"*",296:"NAMED",297:"SILENT",298:"CLEAR",299:"DROP",300:"ADD",301:"MOVE",302:"COPY",303:"ALL",304:".",305:"UNION",306:"|",307:"/",309:"?",310:"+",311:"!=",312:"<",313:">",314:"<=",315:">=",316:"NOT",317:"CONCAT",318:"COALESCE",319:"SUBSTR",320:"REGEX",321:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[22,4],[18,3],[27,1],[27,5],[33,5],[33,7],[42,5],[47,4],[50,3],[20,2],[21,4],[60,3],[64,1],[64,1],[64,3],[64,5],[64,1],[67,2],[70,3],[73,2],[73,2],[73,1],[73,1],[78,2],[78,2],[78,4],[78,4],[82,2],[84,4],[84,4],[84,6],[90,1],[90,1],[90,1],[93,3],[95,3],[97,4],[97,3],[97,5],[97,4],[97,2],[97,2],[97,2],[97,6],[97,6],[121,2],[117,2],[126,3],[129,2],[131,3],[107,1],[107,2],[104,2],[104,1],[113,4],[138,7],[143,3],[55,3],[55,3],[147,2],[150,3],[154,3],[151,2],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[77,1],[77,1],[77,1],[66,2],[66,6],[169,1],[169,4],[35,3],[172,3],[145,2],[145,2],[178,1],[176,2],[182,2],[180,2],[185,1],[185,1],[185,1],[186,2],[156,2],[156,2],[190,4],[197,1],[197,3],[199,2],[201,2],[204,2],[203,2],[205,1],[205,1],[205,2],[205,3],[209,1],[209,1],[209,4],[210,1],[210,1],[210,2],[210,2],[177,3],[177,3],[191,3],[191,3],[189,1],[189,1],[195,1],[195,1],[175,1],[175,1],[175,1],[175,1],[175,1],[175,1],[30,2],[222,2],[220,2],[226,2],[224,1],[224,3],[224,4],[228,2],[234,2],[234,2],[234,2],[232,2],[242,2],[240,2],[240,2],[240,2],[245,1],[245,1],[245,1],[245,1],[245,1],[245,1],[75,3],[65,1],[65,2],[65,4],[65,6],[65,8],[65,2],[65,4],[65,2],[65,4],[65,3],[247,5],[247,5],[247,6],[266,4],[91,1],[91,2],[91,3],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[269,1],[269,1],[269,1],[269,1],[236,1],[236,1],[236,1],[238,1],[238,1],[238,1],[53,1],[53,1],[53,1],[287,0],[287,1],[5,1],[5,1],[288,1],[288,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,1],[289,1],[289,1],[25,0],[25,1],[292,1],[292,2],[26,1],[26,1],[36,0],[36,2],[37,0],[37,2],[40,0],[40,1],[294,1],[294,1],[295,1],[295,2],[44,1],[44,1],[45,0],[45,2],[46,0],[46,1],[49,0],[49,2],[52,0],[52,1],[54,0],[54,1],[56,0],[56,1],[57,0],[57,1],[58,0],[58,1],[59,0],[59,1],[63,1],[63,2],[69,1],[69,2],[72,1],[72,2],[85,0],[85,2],[87,0],[87,2],[88,1],[88,2],[89,0],[89,2],[94,1],[94,2],[96,0],[96,4],[98,0],[98,2],[100,0],[100,1],[101,0],[101,1],[102,1],[102,1],[103,0],[103,1],[105,1],[105,1],[105,1],[106,0],[106,1],[110,0],[110,1],[116,0],[116,1],[118,0],[118,1],[119,0],[119,2],[120,0],[120,1],[122,0],[122,1],[123,0],[123,2],[128,0],[128,1],[134,0],[134,1],[135,1],[135,1],[135,1],[136,0],[136,1],[137,0],[137,2],[139,1],[139,1],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[158,0],[158,3],[161,1],[161,1],[163,0],[163,1],[164,1],[164,1],[167,0],[167,1],[168,0],[168,3],[170,0],[170,3],[171,0],[171,1],[173,0],[173,3],[174,0],[174,1],[179,0],[179,1],[181,0],[181,2],[184,0],[184,1],[188,0],[188,3],[192,0],[192,1],[193,1],[193,1],[194,0],[194,3],[196,0],[196,2],[198,1],[198,1],[200,0],[200,3],[202,0],[202,3],[308,1],[308,1],[308,1],[206,0],[206,1],[207,0],[207,1],[211,0],[211,3],[212,0],[212,1],[214,1],[214,2],[217,1],[217,2],[221,0],[221,2],[225,0],[225,2],[229,1],[229,1],[229,1],[229,1],[229,1],[229,1],[230,0],[230,1],[233,0],[233,2],[235,1],[235,1],[237,0],[237,2],[239,0],[239,2],[241,0],[241,2],[243,1],[243,1],[244,0],[244,1],[253,1],[253,1],[253,1],[253,1],[253,1],[256,0],[256,1],[259,0],[259,1],[260,1],[260,1],[262,0],[262,1],[264,0],[264,1],[265,0],[265,1]],performAction:function(it,wt,kt,cr,dr,U,Ko){var X=U.length-1;switch(dr){case 1:return U[X-1]=U[X-1]||{},Ti.base&&(U[X-1].base=Ti.base),Ti.base=El=_l=Wd="",U[X-1].prefixes=Ti.prefixes,Ti.prefixes=null,U[X-1];case 3:this.$=_n(U[X-1],U[X],{type:"query"});break;case 4:Ti.base=Vd(U[X]),El=_l=Wd="";break;case 5:Ti.prefixes||(Ti.prefixes={}),U[X-1]=U[X-1].substr(0,U[X-1].length-1),U[X]=Vd(U[X]),Ti.prefixes[U[X-1]]=U[X];break;case 6:this.$=_n(U[X-3],tn(U[X-2]),U[X-1],U[X]);break;case 7:this.$=_n(U[X-3],U[X-2],U[X-1],U[X],{type:"query"});break;case 8:this.$=_n({queryType:"SELECT",variables:U[X]==="*"?["*"]:U[X]},U[X-1]&&(U[X-2]=Ai(U[X-1]),U[X-1]={},U[X-1][U[X-2]]=!0,U[X-1]));break;case 9:case 92:case 124:case 151:this.$=Ka(U[X]);break;case 10:case 22:this.$=Dc(U[X-3],{variable:Ka(U[X-1])});break;case 11:this.$=_n({queryType:"CONSTRUCT",template:U[X-3]},tn(U[X-2]),U[X-1],U[X]);break;case 12:this.$=_n({queryType:"CONSTRUCT",template:U[X-2]=U[X-2]?U[X-2].triples:[]},tn(U[X-5]),{where:[{type:"bgp",triples:_o([],U[X-2])}]},U[X]);break;case 13:this.$=_n({queryType:"DESCRIBE",variables:U[X-3]==="*"?["*"]:U[X-3].map(Ka)},tn(U[X-2]),U[X-1],U[X]);break;case 14:this.$=_n({queryType:"ASK"},tn(U[X-2]),U[X-1],U[X]);break;case 15:case 54:this.$={iri:U[X],named:!!U[X-1]};break;case 16:this.$={where:U[X].patterns};break;case 17:this.$=_n(U[X-3],U[X-2],U[X-1],U[X]);break;case 18:this.$={group:U[X]};break;case 19:case 20:case 26:case 28:this.$=Dc(U[X]);break;case 21:this.$=Dc(U[X-1]);break;case 23:case 29:this.$=Dc(Ka(U[X]));break;case 24:this.$={having:U[X]};break;case 25:this.$={order:U[X]};break;case 27:this.$=Dc(U[X],{descending:!0});break;case 30:this.$={limit:Lc(U[X])};break;case 31:this.$={offset:Lc(U[X])};break;case 32:this.$={limit:Lc(U[X-2]),offset:Lc(U[X])};break;case 33:this.$={limit:Lc(U[X]),offset:Lc(U[X-2])};break;case 34:this.$={type:"values",values:U[X]};break;case 35:U[X-3]=Ka(U[X-3]),this.$=U[X-1].map(function(fi){var Bs={};return Bs[U[X-3]]=fi,Bs});break;case 36:this.$=U[X-1].map(function(){return{}});break;case 37:var Fs=U[X-4].length;U[X-4]=U[X-4].map(Ka),this.$=U[X-1].map(function(fi){if(fi.length!==Fs)throw Error("Inconsistent VALUES length");for(var Bs={},Ml=0;Ml<Fs;Ml++)Bs[U[X-4][Ml]]=fi[Ml];return Bs});break;case 40:this.$=void 0;break;case 41:case 84:case 108:case 152:this.$=U[X-1];break;case 42:this.$={type:"update",updates:Cl(U[X-2],U[X-1])};break;case 43:this.$=_n({type:"load",silent:!!U[X-2],source:U[X-1]},U[X]&&{destination:U[X]});break;case 44:this.$={type:Ai(U[X-2]),silent:!!U[X-1],graph:U[X]};break;case 45:this.$={type:Ai(U[X-4]),silent:!!U[X-3],source:U[X-2],destination:U[X]};break;case 46:this.$={type:"create",silent:!!U[X-2],graph:{type:"graph",name:U[X]}};break;case 47:this.$={updateType:"insert",insert:U[X]};break;case 48:this.$={updateType:"delete",delete:U[X]};break;case 49:this.$={updateType:"deletewhere",delete:U[X]};break;case 50:this.$=_n({updateType:"insertdelete"},U[X-5],{insert:U[X-4]||[]},{delete:U[X-3]||[]},tn(U[X-2]),{where:U[X].patterns});break;case 51:this.$=_n({updateType:"insertdelete"},U[X-5],{delete:U[X-4]||[]},{insert:U[X-3]||[]},tn(U[X-2]),{where:U[X].patterns});break;case 52:case 53:case 56:case 143:this.$=U[X];break;case 55:this.$={graph:U[X]};break;case 57:this.$={type:"graph",default:!0};break;case 58:case 59:this.$={type:"graph",name:U[X]};break;case 60:this.$={},this.$[Ai(U[X])]=!0;break;case 61:this.$=U[X-2]?Ns(U[X-1],[U[X-2]]):Ns(U[X-1]);break;case 62:var Vf=_n(U[X-3]||{triples:[]},{type:"graph",name:Ka(U[X-5])});this.$=U[X]?[Vf,U[X]]:[Vf];break;case 63:case 68:this.$={type:"bgp",triples:Ns(U[X-2],[U[X-1]])};break;case 64:this.$={type:"group",patterns:[U[X-1]]};break;case 65:this.$={type:"group",patterns:U[X-1]};break;case 66:this.$=U[X-1]?Ns([U[X-1]],U[X]):Ns(U[X]);break;case 67:this.$=U[X]?[U[X-2],U[X]]:U[X-2];break;case 69:U[X-1].length?this.$={type:"union",patterns:Ns(U[X-1].map(fy),[fy(U[X])])}:this.$=U[X];break;case 70:this.$=_n(U[X],{type:"optional"});break;case 71:this.$=_n(U[X],{type:"minus"});break;case 72:this.$=_n(U[X],{type:"graph",name:Ka(U[X-1])});break;case 73:this.$=_n(U[X],{type:"service",name:Ka(U[X-1]),silent:!!U[X-2]});break;case 74:this.$={type:"filter",expression:U[X]};break;case 75:this.$={type:"bind",variable:Ka(U[X-1]),expression:U[X-3]};break;case 80:this.$={type:"functionCall",function:U[X-1],args:[]};break;case 81:this.$={type:"functionCall",function:U[X-5],args:Cl(U[X-2],U[X-1]),distinct:!!U[X-3]};break;case 82:case 99:case 110:case 196:case 204:case 216:case 218:case 228:case 232:case 252:case 254:case 258:case 262:case 285:case 291:case 302:case 312:case 318:case 324:case 328:case 338:case 340:case 344:case 350:case 354:case 360:case 362:case 366:case 368:case 377:case 385:case 387:case 397:case 401:case 403:case 405:this.$=[];break;case 83:this.$=Cl(U[X-2],U[X-1]);break;case 85:this.$=Ns(U[X-2],[U[X-1]]);break;case 86:case 96:this.$=U[X].map(function(fi){return _n(kl(U[X-1]),fi)});break;case 87:this.$=_o(U[X].map(function(fi){return _n(kl(U[X-1].entity),fi)}),U[X-1].triples);break;case 89:this.$=Ns([U[X-1]],U[X]);break;case 90:this.$=Ns(U[X]);break;case 91:this.$=rg(U[X-1],U[X]);break;case 94:case 106:case 113:this.$=ex;break;case 95:this.$=Cl(U[X-1],U[X]);break;case 97:this.$=U[X]?_o(U[X].map(function(fi){return _n(kl(U[X-1].entity),fi)}),U[X-1].triples):U[X-1].triples;break;case 98:this.$=rg(Ka(U[X-3]),Cl(U[X-2],U[X-1]),U[X]);break;case 100:this.$=rg(Ka(U[X-1]),U[X]);break;case 101:this.$=U[X-1].length?Pc("|",Cl(U[X-1],U[X])):U[X];break;case 102:this.$=U[X-1].length?Pc("/",Cl(U[X-1],U[X])):U[X];break;case 103:this.$=U[X]?Pc(U[X],[U[X-1]]):U[X-1];break;case 104:this.$=U[X-1]?Pc(U[X-1],[U[X]]):U[X];break;case 107:case 114:this.$=Pc(U[X-1],[U[X]]);break;case 111:this.$=Pc("|",Cl(U[X-2],U[X-1]));break;case 115:this.$=Pc(U[X-1],[ex]);break;case 116:case 118:this.$=ax(U[X-1]);break;case 117:case 119:this.$=dy(U[X-1]);break;case 120:this.$={entity:U[X],triples:[]};break;case 122:this.$={entity:U[X],triples:[]};break;case 128:this.$=Rc();break;case 129:this.$=tx;break;case 130:case 132:case 137:case 141:this.$=eg(U[X-1],U[X]);break;case 131:this.$=["||",U[X]];break;case 133:this.$=["&&",U[X]];break;case 135:this.$=pa(U[X-1],[U[X-2],U[X]]);break;case 136:this.$=pa(U[X-2]?"notin":"in",[U[X-3],U[X]]);break;case 138:case 142:this.$=[U[X-1],U[X]];break;case 139:this.$=["+",eg(U[X-1],U[X])];break;case 140:this.$=["-",eg(U[X-1].replace("-",""),U[X])];break;case 144:this.$=pa(U[X-1],[U[X]]);break;case 145:this.$=pa("UMINUS",[U[X]]);break;case 154:this.$=pa(Ai(U[X-1]));break;case 155:this.$=pa(Ai(U[X-3]),[U[X-1]]);break;case 156:this.$=pa(Ai(U[X-5]),[U[X-3],U[X-1]]);break;case 157:this.$=pa(Ai(U[X-7]),[U[X-5],U[X-3],U[X-1]]);break;case 158:this.$=pa(Ai(U[X-1]),U[X]);break;case 159:this.$=pa("bound",[Ka(U[X-1])]);break;case 160:this.$=pa(U[X-1],[]);break;case 161:this.$=pa(U[X-3],[U[X-1]]);break;case 162:this.$=pa(U[X-2]?"notexists":"exists",[fy(U[X])]);break;case 163:case 164:this.$=Dc(U[X-1],{type:"aggregate",aggregation:Ai(U[X-4]),distinct:!!U[X-2]});break;case 165:this.$=Dc(U[X-2],{type:"aggregate",aggregation:Ai(U[X-5]),distinct:!!U[X-3],separator:U[X-1]||" "});break;case 166:this.$=U[X].substr(1,U[X].length-2);break;case 168:this.$=U[X-1]+Ai(U[X]);break;case 169:this.$=U[X-2]+"^^"+U[X];break;case 170:case 184:this.$=va(U[X],rx);break;case 171:case 185:this.$=va(U[X],nx);break;case 172:case 186:this.$=va(Ai(U[X]),Oc);break;case 175:this.$=LT;break;case 176:this.$=Ud;break;case 177:case 178:this.$=Hd(U[X],1);break;case 179:case 180:this.$=Hd(U[X],3);break;case 181:this.$=va(U[X].substr(1),rx);break;case 182:this.$=va(U[X].substr(1),nx);break;case 183:this.$=va(U[X].substr(1).toLowerCase(),Oc);break;case 187:this.$=Vd(U[X]);break;case 188:var Hf=U[X].indexOf(":"),Xd=U[X].substr(0,Hf),Fn=Ti.prefixes[Xd];if(!Fn)throw new Error("Unknown prefix: "+Xd);this.$=Vd(Fn+U[X].substr(Hf+1));break;case 189:if(U[X]=U[X].substr(0,U[X].length-1),!(U[X]in Ti.prefixes))throw new Error("Unknown prefix: "+U[X]);this.$=Vd(Ti.prefixes[U[X]]);break;case 197:case 205:case 213:case 217:case 219:case 225:case 229:case 233:case 247:case 249:case 251:case 253:case 255:case 257:case 259:case 261:case 286:case 292:case 303:case 319:case 351:case 363:case 382:case 384:case 386:case 388:case 398:case 402:case 404:case 406:U[X-1].push(U[X]);break;case 212:case 224:case 246:case 248:case 250:case 256:case 260:case 381:case 383:this.$=[U[X]];break;case 263:U[X-3].push(U[X-2]);break;case 313:case 325:case 329:case 339:case 341:case 345:case 355:case 361:case 367:case 369:case 378:U[X-2].push(U[X-1]);break}},table:[n(i,a,{3:1,4:2,7:3}),{1:[3]},n(o,[2,262],{5:4,8:5,287:6,9:7,95:8,17:9,33:10,42:11,47:12,96:13,18:14,6:[2,190],24:s,34:[1,15],43:[1,16],48:[1,17]}),n([6,24,34,43,48,99,109,112,114,115,124,125,130,298,299,300,301,302],[2,2],{288:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,192]},{6:[2,193]},{6:[2,202],10:25,82:26,83:l},{6:[2,191]},n(u,[2,198]),n(u,[2,199]),n(u,[2,200]),n(u,[2,201]),{97:28,99:[1,29],102:30,105:31,109:[1,32],112:[1,33],114:[1,34],115:[1,35],116:36,120:37,124:[2,287],125:[2,281],129:43,130:[1,44],298:[1,38],299:[1,39],300:[1,40],301:[1,41],302:[1,42]},n(c,[2,204],{19:45}),n(f,[2,218],{35:46,37:47,39:[1,48]}),{13:h,16:d,28:p,44:49,53:54,286:v,293:[1,51],294:52,295:50},n(c,[2,232],{49:58}),n(g,[2,210],{25:59,289:60,290:[1,61],291:[1,62]}),n(i,[2,197]),n(i,[2,194]),n(i,[2,195]),{13:[1,63]},{16:[1,64]},{1:[2,1]},{6:[2,3]},{6:[2,203]},{28:[1,66],29:[1,68],84:65,86:[1,67]},{6:[2,264],98:69,183:[1,70]},n(m,[2,266],{100:71,297:[1,72]}),n(y,[2,272],{103:73,297:[1,74]}),n(w,[2,277],{106:75,297:[1,76]}),{110:77,111:[2,279],297:[1,78]},{39:b,113:79},{39:b,113:81},{39:b,113:82},{117:83,125:x},{121:85,124:S},n(E,[2,270]),n(E,[2,271]),n(_,[2,274]),n(_,[2,275]),n(_,[2,276]),{124:[2,288],125:[2,282]},{13:h,16:d,53:87,286:v},{20:88,38:k,39:C,50:89,51:A,54:90},n(c,[2,216],{36:93}),{38:[1,94],50:95,51:A},n(M,[2,344],{171:96,172:97,173:98,41:[2,342]}),n(T,[2,228],{45:99}),n(T,[2,226],{53:54,294:100,13:h,16:d,28:p,286:v}),n(T,[2,227]),n(O,[2,224]),n(O,[2,222]),n(O,[2,223]),n(N,[2,187]),n(N,[2,188]),n(N,[2,189]),{20:101,38:k,39:C,50:102,51:A,54:90},{26:103,27:106,28:R,29:B,292:104,293:[1,105]},n(g,[2,211]),n(g,[2,208]),n(g,[2,209]),n(i,[2,4]),{13:[1,109]},n(F,[2,34]),{39:[1,110]},{39:[1,111]},{28:[1,113],88:112},{6:[2,42]},n(i,a,{7:3,4:114}),{13:h,16:d,53:115,286:v},n(m,[2,267]),{104:116,111:[1,117],133:[1,119],135:118,296:[1,120],303:[1,121]},n(y,[2,273]),n(m,D,{107:122,134:124,111:L,133:G}),n(w,[2,278]),{111:[1,126]},{111:[2,280]},n(Y,[2,47]),n(M,Z,{136:127,143:128,144:129,41:q,111:q}),n(Y,[2,48]),n(Y,[2,49]),n(pe,[2,283],{118:130,121:131,124:S}),{39:b,113:132},n(pe,[2,289],{122:133,117:134,125:x}),{39:b,113:135},n([124,125],[2,55]),n(Se,Ae,{21:136,56:137,60:138,61:He}),n(c,[2,205]),{39:ct,55:140},n(m,[2,234],{52:142,296:[1,143]}),{39:[2,237]},{20:144,38:k,39:C,50:145,51:A,54:90},{39:[1,146]},n(f,[2,219]),{41:[1,147]},{41:[2,343]},{13:h,16:d,28:st,29:Mt,53:152,80:yt,86:ar,91:153,145:148,175:149,177:150,215:Jt,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Ot,[2,230],{54:90,46:177,50:178,20:179,38:k,39:C,51:A}),n(O,[2,225]),n(Se,Ae,{56:137,60:138,21:180,61:He}),n(c,[2,233]),n(c,[2,8]),n(c,[2,214],{27:181,28:R,29:B}),n(c,[2,215]),n(nr,[2,212]),n(nr,[2,9]),n(Kt,At,{30:182,220:183,224:184,228:185,232:186,240:187,244:188,208:rr,246:Qt,310:hr}),n(i,[2,5]),n(Xr,[2,252],{85:192}),n(Zn,[2,254],{87:193}),{28:[1,195],32:[1,194]},n(Tr,[2,256]),n(o,[2,263],{6:[2,265]}),n(Y,[2,268],{101:196,131:197,132:[1,198]}),n(Y,[2,44]),{13:h,16:d,53:199,286:v},n(Y,[2,60]),n(Y,[2,297]),n(Y,[2,298]),n(Y,[2,299]),{108:[1,200]},n(pn,[2,57]),{13:h,16:d,53:201,286:v},n(m,[2,296]),{13:h,16:d,53:202,286:v},n(li,[2,302],{137:203}),n(li,[2,301]),{13:h,16:d,28:st,29:Mt,53:152,80:yt,86:ar,91:153,145:204,175:149,177:150,215:Jt,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(pe,[2,285],{119:205}),n(pe,[2,284]),n([38,124,127],[2,53]),n(pe,[2,291],{123:206}),n(pe,[2,290]),n([38,125,127],[2,52]),n(u,[2,6]),n(vn,[2,240],{57:207,67:208,68:[1,209]}),n(Se,[2,239]),{62:[1,210]},n([6,41,61,68,71,79,81,83],[2,16]),n(M,Xo,{22:211,147:212,18:213,148:214,154:215,155:216,24:s,39:ha,41:ha,83:ha,111:ha,159:ha,160:ha,162:ha,165:ha,166:ha}),{13:h,16:d,53:217,286:v},n(m,[2,235]),n(Se,Ae,{56:137,60:138,21:218,61:He}),n(c,[2,217]),n(M,Z,{144:129,40:219,143:220,41:[2,220]}),n(c,[2,84]),{41:[2,346],174:221,304:[1,222]},{13:h,16:d,28:Ps,53:227,176:223,180:224,185:225,187:Sn,286:v},n(da,[2,348],{180:224,185:225,53:227,178:229,179:230,176:231,13:h,16:d,28:Ps,187:Sn,286:v}),n(Qi,[2,124]),n(Qi,[2,125]),n(Qi,[2,126]),n(Qi,[2,127]),n(Qi,[2,128]),n(Qi,[2,129]),{13:h,16:d,28:st,29:Mt,53:152,80:yt,86:ar,91:153,175:234,177:235,189:233,214:232,215:Jt,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},{13:h,16:d,28:Ps,53:227,176:236,180:224,185:225,187:Sn,286:v},n(Nn,[2,167],{270:[1,237],271:[1,238]}),n(Nn,[2,170]),n(Nn,[2,171]),n(Nn,[2,172]),n(Nn,[2,173]),n(Nn,[2,174]),n(Nn,[2,175]),n(Nn,[2,176]),n(Ls,[2,177]),n(Ls,[2,178]),n(Ls,[2,179]),n(Ls,[2,180]),n(Nn,[2,181]),n(Nn,[2,182]),n(Nn,[2,183]),n(Nn,[2,184]),n(Nn,[2,185]),n(Nn,[2,186]),n(Se,Ae,{56:137,60:138,21:239,61:He}),n(T,[2,229]),n(Ot,[2,231]),n(u,[2,14]),n(nr,[2,213]),{31:[1,240]},n(Rs,[2,385],{221:241}),n(Si,[2,387],{225:242}),n(Si,[2,134],{229:243,230:244,231:[2,395],268:[1,245],311:[1,246],312:[1,247],313:[1,248],314:[1,249],315:[1,250],316:[1,251]}),n(rn,[2,397],{233:252}),n(nn,[2,405],{241:253}),{13:h,16:d,28:Vt,29:kr,53:257,65:256,66:258,75:255,80:yt,91:259,236:163,238:164,245:254,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},{13:h,16:d,28:Vt,29:kr,53:257,65:256,66:258,75:255,80:yt,91:259,236:163,238:164,245:280,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},{13:h,16:d,28:Vt,29:kr,53:257,65:256,66:258,75:255,80:yt,91:259,236:163,238:164,245:281,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},n(Kt,[2,410]),{13:h,16:d,41:[1,282],53:284,80:yt,90:283,91:285,92:Nd,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},{41:[1,287],86:[1,288]},{39:[1,289]},n(Tr,[2,257]),n(Y,[2,43]),n(Y,[2,269]),{111:[1,290]},n(Y,[2,59]),n(m,D,{134:124,107:291,111:L,133:G}),n(pn,[2,58]),n(Y,[2,46]),{41:[1,292],111:[1,294],138:293},n(li,[2,314],{146:295,304:[1,296]}),{38:[1,297],126:298,127:$v},{38:[1,300],126:301,127:$v},n(Fd,[2,242],{58:302,70:303,71:[1,304]}),n(vn,[2,241]),{13:h,16:d,29:kr,53:310,65:308,66:309,69:305,75:307,77:306,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},{13:h,16:d,28:zv,29:jv,53:310,63:311,64:312,65:313,66:314,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},{41:[1,317]},{41:[1,318]},{20:319,38:k,39:C,54:90},n(Ac,[2,318],{149:320}),n(Ac,[2,317]),{13:h,16:d,28:st,29:Gv,53:152,80:yt,86:ar,91:153,156:321,175:322,191:323,215:Uv,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(T,[2,15]),n(u,[2,11]),{41:[1,326]},{41:[2,221]},{41:[2,85]},n(M,[2,345],{41:[2,347]}),n(da,[2,86]),n(jf,[2,350],{181:327}),n(M,Wb,{186:328,188:329}),n(M,[2,92]),n(M,[2,93]),n(M,[2,94]),n(da,[2,87]),n(da,[2,88]),n(da,[2,349]),{13:h,16:d,28:st,29:Mt,32:[1,330],53:152,80:yt,86:ar,91:153,175:234,177:235,189:331,215:Jt,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Bd,[2,381]),n(Wv,[2,120]),n(Wv,[2,121]),{216:[1,332]},n(Nn,[2,168]),{13:h,16:d,53:333,286:v},n(u,[2,13]),{28:[1,334]},n([31,32,183,251],[2,130],{222:335,223:[1,336]}),n(Rs,[2,132],{226:337,227:[1,338]}),n(Kt,At,{232:186,240:187,244:188,228:339,208:rr,246:Qt,310:hr}),{231:[1,340]},n(En,[2,389]),n(En,[2,390]),n(En,[2,391]),n(En,[2,392]),n(En,[2,393]),n(En,[2,394]),{231:[2,396]},n([31,32,183,223,227,231,251,268,311,312,313,314,315,316],[2,137],{234:341,235:342,236:343,238:344,246:[1,346],280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,310:[1,345]}),n(rn,[2,141],{242:347,243:348,293:Vv,307:ay}),n(nn,[2,143]),n(nn,[2,146]),n(nn,[2,147]),n(nn,[2,148],{29:Vb,86:Gf}),n(nn,[2,149]),n(nn,[2,150]),n(nn,[2,151]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:353,208:rr,246:Qt,310:hr}),n(ci,[2,153]),{86:[1,354]},{29:[1,355]},{29:[1,356]},{29:[1,357]},{29:oy,86:Hv,169:358},{29:[1,361]},{29:[1,363],86:[1,362]},{257:[1,364]},{29:[1,365]},{29:[1,366]},{29:[1,367]},n($d,[2,411]),n($d,[2,412]),n($d,[2,413]),n($d,[2,414]),n($d,[2,415]),{257:[2,417]},n(nn,[2,144]),n(nn,[2,145]),n(F,[2,35]),n(Xr,[2,253]),n(sy,[2,38]),n(sy,[2,39]),n(sy,[2,40]),n(F,[2,36]),n(Zn,[2,255]),n(ly,[2,258],{89:368}),{13:h,16:d,53:369,286:v},n(Y,[2,45]),n([6,38,124,125,127,183],[2,61]),n(li,[2,303]),{13:h,16:d,28:[1,371],53:372,139:370,286:v},n(li,[2,63]),n(M,[2,313],{41:Hb,111:Hb}),{39:ct,55:373},n(pe,[2,286]),n(m,[2,293],{128:374,296:[1,375]}),{39:ct,55:376},n(pe,[2,292]),n(Ni,[2,244],{59:377,78:378,79:[1,379],81:[1,380]}),n(Fd,[2,243]),{62:[1,381]},n(vn,[2,24],{247:262,253:267,256:270,75:307,65:308,66:309,53:310,77:382,13:h,16:d,29:kr,248:_t,249:Yr,250:an,252:Ei,254:_i,255:Jn,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo}),n(Da,[2,248]),n(Uf,[2,77]),n(Uf,[2,78]),n(Uf,[2,79]),{29:Vb,86:Gf},n(Se,[2,18],{247:262,253:267,256:270,53:310,65:313,66:314,64:383,13:h,16:d,28:zv,29:jv,248:_t,249:Yr,250:an,252:Ei,254:_i,255:Jn,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo}),n(Tc,[2,246]),n(Tc,[2,19]),n(Tc,[2,20]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:384,208:rr,246:Qt,310:hr}),n(Tc,[2,23]),n(Xb,[2,64]),n(Xb,[2,65]),n(Se,Ae,{56:137,60:138,21:385,61:He}),{39:[2,328],41:[2,66],82:395,83:l,111:[1,391],150:386,151:387,158:388,159:[1,389],160:[1,390],162:[1,392],165:[1,393],166:[1,394]},n(Ac,[2,326],{157:396,304:[1,397]}),n(Ic,Mi,{190:398,193:399,199:400,200:402,28:uy}),n(Xv,[2,356],{193:399,199:400,200:402,192:403,190:404,13:Mi,16:Mi,29:Mi,187:Mi,208:Mi,213:Mi,286:Mi,28:uy}),{13:h,16:d,28:st,29:Gv,53:152,80:yt,86:ar,91:153,175:407,191:408,195:406,215:Uv,217:405,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Ic,Mi,{193:399,199:400,200:402,190:409,28:uy}),n(Se,Ae,{56:137,60:138,21:410,61:He}),n([41,111,216,304],[2,89],{182:411,183:[1,412]}),n(jf,[2,91]),{13:h,16:d,28:st,29:Mt,53:152,80:yt,86:ar,91:153,175:234,177:235,189:413,215:Jt,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Yv,[2,116]),n(Bd,[2,382]),n(Yv,[2,117]),n(Nn,[2,169]),{32:[1,414]},n(Rs,[2,386]),n(Kt,At,{224:184,228:185,232:186,240:187,244:188,220:415,208:rr,246:Qt,310:hr}),n(Si,[2,388]),n(Kt,At,{228:185,232:186,240:187,244:188,224:416,208:rr,246:Qt,310:hr}),n(Si,[2,135]),{29:oy,86:Hv,169:417},n(rn,[2,398]),n(Kt,At,{240:187,244:188,232:418,208:rr,246:Qt,310:hr}),n(nn,[2,401],{237:419}),n(nn,[2,403],{239:420}),n(En,[2,399]),n(En,[2,400]),n(nn,[2,406]),n(Kt,At,{244:188,240:421,208:rr,246:Qt,310:hr}),n(En,[2,407]),n(En,[2,408]),n(ci,[2,80]),n(En,[2,336],{167:422,290:[1,423]}),{32:[1,424]},n(ci,[2,154]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:425,208:rr,246:Qt,310:hr}),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:426,208:rr,246:Qt,310:hr}),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:427,208:rr,246:Qt,310:hr}),n(ci,[2,158]),n(ci,[2,82]),n(En,[2,340],{170:428}),{28:[1,429]},n(ci,[2,160]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:430,208:rr,246:Qt,310:hr}),{39:ct,55:431},n(Yb,[2,418],{259:432,290:[1,433]}),n(En,[2,422],{262:434,290:[1,435]}),n(En,[2,424],{264:436,290:[1,437]}),{29:[1,440],41:[1,438],93:439},n(Y,[2,56]),{39:[1,441]},{39:[2,304]},{39:[2,305]},n(Y,[2,50]),{13:h,16:d,53:442,286:v},n(m,[2,294]),n(Y,[2,51]),n(Ni,[2,17]),n(Ni,[2,245]),{80:[1,443]},{80:[1,444]},{13:h,16:d,28:qb,29:kr,53:310,65:308,66:309,72:445,73:446,74:Kb,75:307,76:Qb,77:449,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},n(Da,[2,249]),n(Tc,[2,247]),{31:[1,452],32:[1,451]},{23:453,41:[2,206],82:454,83:l},n(Ac,[2,319]),n(Zb,[2,320],{152:455,304:[1,456]}),{39:ct,55:457},{39:ct,55:458},{39:ct,55:459},{13:h,16:d,28:[1,461],53:462,161:460,286:v},n(Jb,[2,332],{163:463,297:[1,464]}),{13:h,16:d,29:kr,53:310,65:308,66:309,75:307,77:465,247:262,248:_t,249:Yr,250:an,252:Ei,253:267,254:_i,255:Jn,256:270,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo},{29:[1,466]},n(gu,[2,76]),n(Ac,[2,68]),n(M,[2,325],{39:bl,41:bl,83:bl,111:bl,159:bl,160:bl,162:bl,165:bl,166:bl}),n(Xv,[2,96]),n(M,[2,360],{194:467}),n(M,[2,358]),n(M,[2,359]),n(Ic,[2,368],{201:468,202:469}),n(Xv,[2,97]),n(Xv,[2,357]),{13:h,16:d,28:st,29:Gv,32:[1,470],53:152,80:yt,86:ar,91:153,175:407,191:408,195:471,215:Uv,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Bd,[2,383]),n(Wv,[2,122]),n(Wv,[2,123]),{216:[1,472]},n(u,[2,12]),n(jf,[2,351]),n(jf,[2,352],{185:225,53:227,184:473,180:474,13:h,16:d,28:Ps,187:Sn,286:v}),n(Yo,[2,95],{251:[1,475]}),n(nr,[2,10]),n(Rs,[2,131]),n(Si,[2,133]),n(Si,[2,136]),n(rn,[2,138]),n(rn,[2,139],{243:348,242:476,293:Vv,307:ay}),n(rn,[2,140],{243:348,242:477,293:Vv,307:ay}),n(nn,[2,142]),n(En,[2,338],{168:478}),n(En,[2,337]),n([6,13,16,28,29,31,32,39,41,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316,317,318,319,320,321],[2,152]),{32:[1,479]},{251:[1,480]},{251:[1,481]},n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:482,208:rr,246:Qt,310:hr}),{32:[1,483]},{32:[1,484]},n(ci,[2,162]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,260:485,30:487,208:rr,246:Qt,293:[1,486],310:hr}),n(Yb,[2,419]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:488,208:rr,246:Qt,310:hr}),n(En,[2,423]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:489,208:rr,246:Qt,310:hr}),n(En,[2,425]),n(F,[2,37]),n(ly,[2,259]),{13:h,16:d,53:284,80:yt,90:491,91:285,92:Nd,94:490,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(M,Z,{144:129,140:492,143:493,41:[2,306]}),n(pe,[2,54]),n(Ni,[2,30],{81:[1,494]}),n(Ni,[2,31],{79:[1,495]}),n(Fd,[2,25],{247:262,253:267,256:270,75:307,65:308,66:309,53:310,77:449,73:496,13:h,16:d,28:qb,29:kr,74:Kb,76:Qb,248:_t,249:Yr,250:an,252:Ei,254:_i,255:Jn,257:ui,258:Ci,261:ki,263:mo,286:v,316:yo,317:wo,318:bo,319:xo,320:So,321:Eo}),n(Wf,[2,250]),{29:kr,75:497},{29:kr,75:498},n(Wf,[2,28]),n(Wf,[2,29]),n(Tc,[2,21]),{28:[1,499]},{41:[2,7]},{41:[2,207]},n(M,Xo,{155:216,153:500,154:501,39:xl,41:xl,83:xl,111:xl,159:xl,160:xl,162:xl,165:xl,166:xl}),n(Zb,[2,321]),n(gu,[2,69],{305:[1,502]}),n(gu,[2,70]),n(gu,[2,71]),{39:ct,55:503},{39:[2,330]},{39:[2,331]},{13:h,16:d,28:[1,505],53:506,164:504,286:v},n(Jb,[2,333]),n(gu,[2,74]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:507,208:rr,246:Qt,310:hr}),{13:h,16:d,28:st,29:Gv,53:152,80:yt,86:ar,91:153,175:407,191:408,195:508,215:Uv,218:er,219:yr,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(Bd,[2,101],{306:[1,509]}),n(zd,[2,375],{203:510,207:511,213:[1,512]}),n(Qi,[2,118]),n(Bd,[2,384]),n(Qi,[2,119]),n(jf,[2,90]),n(jf,[2,353]),n(M,[2,355]),n(nn,[2,402]),n(nn,[2,404]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:513,208:rr,246:Qt,310:hr}),n(ci,[2,155]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:514,208:rr,246:Qt,310:hr}),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:515,208:rr,246:Qt,310:hr}),{32:[1,516],251:[1,517]},n(ci,[2,159]),n(ci,[2,161]),{32:[1,518]},{32:[2,420]},{32:[2,421]},{32:[1,519]},{32:[2,426],183:[1,522],265:520,266:521},{13:h,16:d,32:[1,523],53:284,80:yt,90:524,91:285,92:Nd,236:163,238:164,269:159,272:or,273:zt,274:tr,275:Dr,276:Ze,277:oe,278:P,279:_e,280:Pe,281:ye,282:Fe,283:Be,284:Xe,285:et,286:v},n(qv,[2,260]),{41:[1,525]},{41:[2,307]},{80:[1,526]},{80:[1,527]},n(Wf,[2,251]),n(Wf,[2,26]),n(Wf,[2,27]),{32:[1,528]},n(Ac,[2,67]),n(Ac,[2,323]),{39:[2,329]},n(gu,[2,72]),{39:ct,55:529},{39:[2,334]},{39:[2,335]},{31:[1,530]},n(Yo,[2,362],{196:531,251:[1,532]}),n(Ic,[2,367]),n([13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,306],[2,102],{307:[1,533]}),{13:h,16:d,29:[1,539],53:536,187:[1,537],204:534,205:535,208:[1,538],286:v},n(zd,[2,376]),{32:[1,540],251:[1,541]},{32:[1,542]},{251:[1,543]},n(ci,[2,83]),n(En,[2,341]),n(ci,[2,163]),n(ci,[2,164]),{32:[1,544]},{32:[2,427]},{267:[1,545]},n(ly,[2,41]),n(qv,[2,261]),n(cy,[2,308],{141:546,304:[1,547]}),n(Ni,[2,32]),n(Ni,[2,33]),n(Tc,[2,22]),n(gu,[2,73]),{28:[1,548]},n([39,41,83,111,159,160,162,165,166,216,304],[2,98],{197:549,183:[1,550]}),n(M,[2,361]),n(Ic,[2,369]),n(mu,[2,104]),n(mu,[2,373],{206:551,308:552,293:[1,554],309:[1,553],310:[1,555]}),n(qo,[2,105]),n(qo,[2,106]),{13:h,16:d,29:[1,559],53:560,86:[1,558],187:Kv,209:556,210:557,213:Qv,286:v},n(Ic,Mi,{200:402,199:563}),n(ci,[2,81]),n(En,[2,339]),n(ci,[2,156]),n(Kt,At,{220:183,224:184,228:185,232:186,240:187,244:188,30:564,208:rr,246:Qt,310:hr}),n(ci,[2,165]),{268:[1,565]},n(M,Z,{144:129,142:566,143:567,41:Sl,111:Sl}),n(cy,[2,309]),{32:[1,568]},n(Yo,[2,363]),n(Yo,[2,99],{200:402,198:569,199:570,13:Mi,16:Mi,29:Mi,187:Mi,208:Mi,213:Mi,286:Mi,28:[1,571]}),n(mu,[2,103]),n(mu,[2,374]),n(mu,[2,370]),n(mu,[2,371]),n(mu,[2,372]),n(qo,[2,107]),n(qo,[2,109]),n(qo,[2,110]),n(jd,[2,377],{211:572}),n(qo,[2,112]),n(qo,[2,113]),{13:h,16:d,53:573,187:[1,574],286:v},{32:[1,575]},{32:[1,576]},{269:577,276:Ze,277:oe,278:P,279:_e},n(li,[2,62]),n(li,[2,311]),n(gu,[2,75]),n(M,Wb,{188:329,186:578}),n(M,[2,364]),n(M,[2,365]),{13:h,16:d,32:[2,379],53:560,187:Kv,210:580,212:579,213:Qv,286:v},n(qo,[2,114]),n(qo,[2,115]),n(qo,[2,108]),n(ci,[2,157]),{32:[2,166]},n(Yo,[2,100]),{32:[1,581]},{32:[2,380],306:[1,582]},n(qo,[2,111]),n(jd,[2,378])],defaultActions:{5:[2,192],6:[2,193],8:[2,191],24:[2,1],25:[2,3],26:[2,203],69:[2,42],78:[2,280],92:[2,237],97:[2,343],220:[2,221],221:[2,85],251:[2,396],279:[2,417],371:[2,304],372:[2,305],453:[2,7],454:[2,207],461:[2,330],462:[2,331],486:[2,420],487:[2,421],493:[2,307],502:[2,329],505:[2,334],506:[2,335],521:[2,427],577:[2,166]},parseError:function(it,wt){if(wt.recoverable)this.trace(it);else{var kt=new Error(it);throw kt.hash=wt,kt}},parse:function(it){var wt=this,kt=[0],cr=[null],dr=[],U=this.table,Ko="",X=0,Fs=0,Vf=2,Hf=1,Xd=dr.slice.call(arguments,1),Fn=Object.create(this.lexer),fi={yy:{}};for(var Bs in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bs)&&(fi.yy[Bs]=this.yy[Bs]);Fn.setInput(it,fi.yy),fi.yy.lexer=Fn,fi.yy.parser=this,typeof Fn.yylloc>"u"&&(Fn.yylloc={});var Ml=Fn.yylloc;dr.push(Ml);var ox=Fn.options&&Fn.options.ranges;typeof fi.yy.parseError=="function"?this.parseError=fi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var sx=function(){var Yf;return Yf=Fn.lex()||Hf,typeof Yf!="number"&&(Yf=wt.symbols_[Yf]||Yf),Yf},hi,Al,Pa,Fc,Xf={},ng,Tl,ig,ag;;){if(Al=kt[kt.length-1],this.defaultActions[Al]?Pa=this.defaultActions[Al]:((hi===null||typeof hi>"u")&&(hi=sx()),Pa=U[Al]&&U[Al][hi]),typeof Pa>"u"||!Pa.length||!Pa[0]){var py="";ag=[];for(ng in U[Al])this.terminals_[ng]&&ng>Vf&&ag.push("'"+this.terminals_[ng]+"'");Fn.showPosition?py="Parse error on line "+(X+1)+`:
`+Fn.showPosition()+`
Expecting `+ag.join(", ")+", got '"+(this.terminals_[hi]||hi)+"'":py="Parse error on line "+(X+1)+": Unexpected "+(hi==Hf?"end of input":"'"+(this.terminals_[hi]||hi)+"'"),this.parseError(py,{text:Fn.match,token:this.terminals_[hi]||hi,line:Fn.yylineno,loc:Ml,expected:ag})}if(Pa[0]instanceof Array&&Pa.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Al+", token: "+hi);switch(Pa[0]){case 1:kt.push(hi),cr.push(Fn.yytext),dr.push(Fn.yylloc),kt.push(Pa[1]),hi=null,Fs=Fn.yyleng,Ko=Fn.yytext,X=Fn.yylineno,Ml=Fn.yylloc;break;case 2:if(Tl=this.productions_[Pa[1]][1],Xf.$=cr[cr.length-Tl],Xf._$={first_line:dr[dr.length-(Tl||1)].first_line,last_line:dr[dr.length-1].last_line,first_column:dr[dr.length-(Tl||1)].first_column,last_column:dr[dr.length-1].last_column},ox&&(Xf._$.range=[dr[dr.length-(Tl||1)].range[0],dr[dr.length-1].range[1]]),Fc=this.performAction.apply(Xf,[Ko,Fs,X,fi.yy,Pa[1],cr,dr].concat(Xd)),typeof Fc<"u")return Fc;Tl&&(kt=kt.slice(0,-1*Tl*2),cr=cr.slice(0,-1*Tl),dr=dr.slice(0,-1*Tl)),kt.push(this.productions_[Pa[1]][0]),cr.push(Xf.$),dr.push(Xf._$),ig=U[kt[kt.length-2]][kt[kt.length-1]],kt.push(ig);break;case 3:return!0}}return!0}},Gd="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ex=Gd+"type",DT=Gd+"first",PT=Gd+"rest",tx=Gd+"nil",Jv="http://www.w3.org/2001/XMLSchema#",rx=Jv+"integer",nx=Jv+"decimal",Oc=Jv+"double",ix=Jv+"boolean",LT='"true"^^'+ix,Ud='"false"^^'+ix,El="",_l="",Wd="";function Ai(gt){return gt.toLowerCase()}function Cl(gt,it){return gt.push(it),gt}function _o(gt,it){return gt.push.apply(gt,it),gt}function _n(gt){gt||(gt={});for(var it=1,wt=arguments.length,kt;it<wt&&(kt=arguments[it]||{});it++)for(var cr in kt)gt[cr]=kt[cr];return gt}function Ns(){for(var gt=[],it=0,wt=arguments.length;it<wt;it++)gt=gt.concat.apply(gt,arguments[it]);return gt}function Vd(gt){if(gt[0]==="<"&&(gt=gt.substring(1,gt.length-1)),/^[a-z]+:/.test(gt))return gt;if(!Ti.base)throw new Error("Cannot resolve relative IRI "+gt+" because no base IRI was set.");switch(El||(El=Ti.base,_l=El.replace(/[^\/:]*$/,""),Wd=El.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),gt[0]){case void 0:return El;case"#":return El+gt;case"?":return El.replace(/(?:\?.*)?$/,gt);case"/":return Wd+gt;default:return _l+gt}}function Ka(gt){if(gt){var it=gt[0];if(it==="?")return gt;if(it==="$")return"?"+gt.substr(1)}return gt}function pa(gt,it){return{type:"operation",operator:gt,args:it||[]}}function Dc(gt,it){var wt={expression:gt};if(it)for(var kt in it)wt[kt]=it[kt];return wt}function Pc(gt,it){return{type:"path",pathType:gt,items:it}}function eg(gt,it){for(var wt=0,kt=it.length,cr;wt<kt&&(cr=it[wt]);wt++)gt=pa(cr[0],[gt,cr[1]]);return gt}function tn(gt){for(var it=[],wt=[],kt=gt.length,cr,dr=0;dr<kt&&(cr=gt[dr]);dr++)(cr.named?wt:it).push(cr.iri);return kt?{from:{default:it,named:wt}}:null}function Lc(gt){return parseInt(gt,10)}function fy(gt){return gt.type==="group"&&gt.patterns.length===1?gt.patterns[0]:gt}function va(gt,it){return'"'+gt+'"^^'+it}function kl(gt,it,wt){var kt={};return gt!=null&&(kt.subject=gt),it!=null&&(kt.predicate=it),wt!=null&&(kt.object=wt),kt}function Rc(){return"_:b"+yu++}var yu=0;Ti._resetBlanks=function(){yu=0};var hy=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,tg={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Nc=String.fromCharCode;function Hd(gt,it){gt=gt.substring(it,gt.length-it);try{gt=gt.replace(hy,function(wt,kt,cr,dr){var U;if(kt){if(U=parseInt(kt,16),isNaN(U))throw new Error;return Nc(U)}else if(cr){if(U=parseInt(cr,16),isNaN(U))throw new Error;return U<65535?Nc(U):Nc(55296+((U-=65536)>>10),56320+(U&1023))}else{var Ko=tg[dr];if(!Ko)throw new Error;return Ko}})}catch{return""}return'"'+gt+'"'}function ax(gt){var it=Rc(),wt=it,kt=[],cr,dr=[];gt.forEach(function(Fs){kt.push(Fs.entity),_o(dr,Fs.triples)});for(var U=0,Ko=0,X=kt.length,cr=Array(X*2);U<X;)cr[Ko++]=kl(wt,DT,kt[U]),cr[Ko++]=kl(wt,PT,wt=++U<X?Rc():tx);return{entity:it,triples:_o(cr,dr)}}function dy(gt){var it=Rc();return{entity:it,triples:gt.map(function(wt){return _n(kl(it),wt)})}}function rg(gt,it,wt){var kt=[],cr=[];return it.forEach(function(dr){kt.push(kl(null,gt,dr.entity)),_o(cr,dr.triples)}),Ns(kt,wt||[],cr)}var RT=function(){var gt={EOF:1,parseError:function(wt,kt){if(this.yy.parser)this.yy.parser.parseError(wt,kt);else throw new Error(wt)},setInput:function(it,wt){return this.yy=wt||this.yy||{},this._input=it,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var it=this._input[0];this.yytext+=it,this.yyleng++,this.offset++,this.match+=it,this.matched+=it;var wt=it.match(/(?:\r\n?|\n).*/g);return wt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),it},unput:function(it){var wt=it.length,kt=it.split(/(?:\r\n?|\n)/g);this._input=it+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-wt),this.offset-=wt;var cr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kt.length-1&&(this.yylineno-=kt.length-1);var dr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kt?(kt.length===cr.length?this.yylloc.first_column:0)+cr[cr.length-kt.length].length-kt[0].length:this.yylloc.first_column-wt},this.options.ranges&&(this.yylloc.range=[dr[0],dr[0]+this.yyleng-wt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(it){this.unput(this.match.slice(it))},pastInput:function(){var it=this.matched.substr(0,this.matched.length-this.match.length);return(it.length>20?"...":"")+it.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var it=this.match;return it.length<20&&(it+=this._input.substr(0,20-it.length)),(it.substr(0,20)+(it.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var it=this.pastInput(),wt=new Array(it.length+1).join("-");return it+this.upcomingInput()+`
`+wt+"^"},test_match:function(it,wt){var kt,cr,dr;if(this.options.backtrack_lexer&&(dr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dr.yylloc.range=this.yylloc.range.slice(0))),cr=it[0].match(/(?:\r\n?|\n).*/g),cr&&(this.yylineno+=cr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:cr?cr[cr.length-1].length-cr[cr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+it[0].length},this.yytext+=it[0],this.match+=it[0],this.matches=it,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(it[0].length),this.matched+=it[0],kt=this.performAction.call(this,this.yy,this,wt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kt)return kt;if(this._backtrack){for(var U in dr)this[U]=dr[U];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var it,wt,kt,cr;this._more||(this.yytext="",this.match="");for(var dr=this._currentRules(),U=0;U<dr.length;U++)if(kt=this._input.match(this.rules[dr[U]]),kt&&(!wt||kt[0].length>wt[0].length)){if(wt=kt,cr=U,this.options.backtrack_lexer){if(it=this.test_match(kt,dr[U]),it!==!1)return it;if(this._backtrack){wt=!1;continue}else return!1}else if(!this.options.flex)break}return wt?(it=this.test_match(wt,dr[cr]),it!==!1?it:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var wt=this.next();return wt||this.lex()},begin:function(wt){this.conditionStack.push(wt)},popState:function(){var wt=this.conditionStack.length-1;return wt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(wt){return wt=this.conditionStack.length-1-Math.abs(wt||0),wt>=0?this.conditionStack[wt]:"INITIAL"},pushState:function(wt){this.begin(wt)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(wt,kt,cr,dr){switch(cr){case 0:break;case 1:return 12;case 2:return 15;case 3:return 24;case 4:return 290;case 5:return 291;case 6:return 29;case 7:return 31;case 8:return 32;case 9:return 293;case 10:return 34;case 11:return 38;case 12:return 39;case 13:return 41;case 14:return 43;case 15:return 48;case 16:return 51;case 17:return 296;case 18:return 61;case 19:return 62;case 20:return 68;case 21:return 71;case 22:return 74;case 23:return 76;case 24:return 79;case 25:return 81;case 26:return 83;case 27:return 183;case 28:return 99;case 29:return 297;case 30:return 132;case 31:return 298;case 32:return 299;case 33:return 109;case 34:return 300;case 35:return 108;case 36:return 301;case 37:return 302;case 38:return 112;case 39:return 114;case 40:return 115;case 41:return 130;case 42:return 124;case 43:return 125;case 44:return 127;case 45:return 133;case 46:return 111;case 47:return 303;case 48:return 304;case 49:return 159;case 50:return 162;case 51:return 166;case 52:return 92;case 53:return 160;case 54:return 305;case 55:return 165;case 56:return 251;case 57:return 187;case 58:return 306;case 59:return 307;case 60:return 213;case 61:return 309;case 62:return 310;case 63:return 208;case 64:return 215;case 65:return 216;case 66:return 223;case 67:return 227;case 68:return 268;case 69:return 311;case 70:return 312;case 71:return 313;case 72:return 314;case 73:return 315;case 74:return 231;case 75:return 316;case 76:return 246;case 77:return 254;case 78:return 255;case 79:return 248;case 80:return 249;case 81:return 250;case 82:return 317;case 83:return 318;case 84:return 252;case 85:return 320;case 86:return 319;case 87:return 321;case 88:return 257;case 89:return 258;case 90:return 261;case 91:return 263;case 92:return 267;case 93:return 271;case 94:return 274;case 95:return 275;case 96:return 13;case 97:return 16;case 98:return 286;case 99:return 218;case 100:return 28;case 101:return 270;case 102:return 80;case 103:return 272;case 104:return 273;case 105:return 280;case 106:return 281;case 107:return 282;case 108:return 283;case 109:return 284;case 110:return 285;case 111:return"EXPONENT";case 112:return 276;case 113:return 277;case 114:return 278;case 115:return 279;case 116:return 86;case 117:return 219;case 118:return 6;case 119:return"INVALID";case 120:console.log(kt.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT\s+DATA)/i,/^(?:DELETE\s+DATA)/i,/^(?:DELETE\s+WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(<([^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?))/i,/^(?:([\?\$]((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(([^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*'))/i,/^(?:("(([^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*"))/i,/^(?:('''(('|'')?([^'\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*'''))/i,/^(?:("""(("|"")?([^\"\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],inclusive:!0}}};return gt}();Zv.lexer=RT;function Ti(){this.yy={}}return Ti.prototype=Zv,Zv.Parser=Ti,new Ti}();typeof hmt<"u"&&(e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)},e.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),process.exit(1));var a=LY.readFileSync(LY.normalize(i[1]),"utf8");return e.parser.parse(a)},require.main===t&&e.main(process.argv.slice(1)))})(pM,pM.exports);var vmt=pM.exports,gmt="http://www.w3.org/2001/XMLSchema#integer";function Qn(t,e){this._options=t=t||{},e=e||{},this._prefixByIri={};var r=[];for(var n in e){var i=e[n];Ql(i)&&(this._prefixByIri[i]=n,r.push(i))}var a=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._indent=Ql(t.indent)?t.indent:"  ",this._newline=Ql(t.newline)?t.newline:`
`}Qn.prototype.toQuery=function(t){var e="";return t.queryType&&(e+=t.queryType.toUpperCase()+" "),t.reduced&&(e+="REDUCED "),t.distinct&&(e+="DISTINCT "),t.variables?e+=To(t.variables,void 0,function(r){return Ql(r)?this.toEntity(r):"("+this.toExpression(r.expression)+" AS "+r.variable+")"},this)+" ":t.template&&(e+=this.group(t.template,!0)+this._newline),t.from&&(e+=To(t.from.default||[],"",function(r){return"FROM "+this.toEntity(r)+this._newline},this)+To(t.from.named||[],"",function(r){return"FROM NAMED "+this.toEntity(r)+this._newline},this)),t.where&&(e+="WHERE "+this.group(t.where,!0)+this._newline),t.updates&&(e+=To(t.updates,";"+this._newline,this.toUpdate,this)),t.group&&(e+="GROUP BY "+To(t.group,void 0,function(r){var n=Ql(r.expression)?r.expression:"("+this.toExpression(r.expression)+")";return r.variable?"("+n+" AS "+r.variable+")":n},this)+this._newline),t.having&&(e+="HAVING ("+To(t.having,void 0,this.toExpression,this)+")"+this._newline),t.order&&(e+="ORDER BY "+To(t.order,void 0,function(r){var n="("+this.toExpression(r.expression)+")";return r.descending?"DESC "+n:n},this)+this._newline),t.offset&&(e+="OFFSET "+t.offset+this._newline),t.limit&&(e+="LIMIT "+t.limit+this._newline),t.values&&(e+=this.values(t)),e=this.baseAndPrefixes(t)+e,e.trim()};Qn.prototype.baseAndPrefixes=function(t){var e=t.base?"BASE <"+t.base+">"+this._newline:"",r="";for(var n in t.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+t.prefixes[n]+">"+this._newline);return e+r};Qn.prototype.toPattern=function(t){var e=t.type||t instanceof Array&&"array"||(t.subject&&t.predicate&&t.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](t)};Qn.prototype.triple=function(t){return this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+"."};Qn.prototype.array=function(t){return To(t,this._newline,this.toPattern,this)};Qn.prototype.bgp=function(t){return this.encodeTriples(t.triples)};Qn.prototype.encodeTriples=function(t){if(!t.length)return"";for(var e=[],r="",n="",i=0;i<t.length;i++){var a=t[i];a.subject!==r?(r&&e.push("."+this._newline),r=a.subject,n=a.predicate,e.push(this.toEntity(r)," ",this.toEntity(n))):a.predicate!==n?(n=a.predicate,e.push(";"+this._newline,this._indent,this.toEntity(n))):e.push(","),e.push(" ",this.toEntity(a.object))}return e.push("."),e.join("")};Qn.prototype.graph=function(t){return"GRAPH "+this.toEntity(t.name)+" "+this.group(t)};Qn.prototype.group=function(t,e){return t=e!==!0?this.array(t.patterns||t.triples):this.toPattern(t.type!=="group"?t:t.patterns),t.indexOf(this._newline)===-1?"{ "+t+" }":"{"+this._newline+this.indent(t)+this._newline+"}"};Qn.prototype.query=function(t){return this.toQuery(t)};Qn.prototype.filter=function(t){return"FILTER("+this.toExpression(t.expression)+")"};Qn.prototype.bind=function(t){return"BIND("+this.toExpression(t.expression)+" AS "+t.variable+")"};Qn.prototype.optional=function(t){return"OPTIONAL "+this.group(t)};Qn.prototype.union=function(t){return To(t.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Qn.prototype.minus=function(t){return"MINUS "+this.group(t)};Qn.prototype.values=function(t){var e=Object.keys(t.values.reduce(function(i,a){for(var o in a)i[o]=!0;return i},{})),r,n;return e.length===1?r=n="":(r="(",n=")"),"VALUES "+r+e.join(" ")+n+" {"+this._newline+To(t.values,this._newline,function(i){return"  "+r+To(e,void 0,function(a){return i[a]!==void 0?this.toEntity(i[a]):"UNDEF"},this)+n},this)+this._newline+"}"};Qn.prototype.service=function(t){return"SERVICE "+(t.silent?"SILENT ":"")+this.toEntity(t.name)+" "+this.group(t)};Qn.prototype.toExpression=function(t){if(Ql(t))return this.toEntity(t);switch(t.type.toLowerCase()){case"aggregate":return t.aggregation.toUpperCase()+"("+(t.distinct?"DISTINCT ":"")+this.toExpression(t.expression)+(t.separator?"; SEPARATOR = "+this.toEntity('"'+t.separator+'"'):"")+")";case"functioncall":return this.toEntity(t.function)+"("+To(t.args,", ",this.toExpression,this)+")";case"operation":var e=t.operator.toUpperCase(),r=t.args||[];switch(t.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(Ql(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+e+" "+(Ql(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return"!("+this.toExpression(r[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(r[0])+" "+e+"("+(Ql(r[1])?r[1]:To(r[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(r[0],!0);default:return e+"("+To(r,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+t.type)}};Qn.prototype.toEntity=function(t){if(Ql(t))switch(t[0]){case"?":case"$":case"*":case"_":return t;case'"':var e=t.match(/^"([^]*)"(?:(@.+)|\^\^(.+))?$/)||{},r=e[1]||"",n=e[2]||"",i=e[3];if(t='"'+r.replace(mmt,ymt)+'"'+n,i){if(i===gmt&&/^\d+$/.test(r))return r+" ";t+="^^"+this.encodeIRI(i)}return t;default:return this.encodeIRI(t)}else{var a=t.items.map(this.toEntity,this),o=t.pathType;switch(o){case"^":case"!":return o+a[0];case"*":case"+":case"?":return"("+a[0]+o+")";default:return"("+a.join(o)+")"}}};var mmt=/["\\\t\n\r\b\f]/g,ymt=function(t){return wmt[t]},wmt={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Qn.prototype.encodeIRI=function(t){var e=this._prefixRegex.exec(t);if(e){var r=this._prefixByIri[e[1]];return this._usedPrefixes[r]=!0,r+":"+e[2]}return"<"+t+">"};Qn.prototype.toUpdate=function(t){switch(t.type||t.updateType){case"load":return"LOAD"+(t.source?" "+this.toEntity(t.source):"")+(t.destination?" INTO GRAPH "+this.toEntity(t.destination):"");case"insert":return"INSERT DATA "+this.group(t.insert,!0);case"delete":return"DELETE DATA "+this.group(t.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(t.delete,!0);case"insertdelete":return(t.graph?"WITH "+this.toEntity(t.graph)+this._newline:"")+(t.delete.length?"DELETE "+this.group(t.delete,!0)+this._newline:"")+(t.insert.length?"INSERT "+this.group(t.insert,!0)+this._newline:"")+"WHERE "+this.group(t.where,!0);case"add":case"copy":case"move":return t.type.toUpperCase()+(t.source.default?" DEFAULT ":" ")+"TO "+this.toEntity(t.destination.name);case"create":case"clear":case"drop":return t.type.toUpperCase()+(t.silent?" SILENT ":" ")+(t.graph.default?"DEFAULT":t.graph.named?"NAMED":t.graph.all?"ALL":"GRAPH "+this.toEntity(t.graph.name));default:throw new Error("Unknown update query type: "+t.type)}};Qn.prototype.indent=function(t){return t.replace(/^/gm,this._indent)};function Ql(t){return typeof t=="string"}function To(t,e,r,n){return t.map(r,n).join(Ql(e)?e:" ")}var bmt=function(e){return{stringify:function(r){return new Qn(e,r.prefixes).toQuery(r)}}},u1=vmt.Parser,xmt=bmt,Smt={Parser:function(t,e){var r={};for(var n in t||{})r[n]=t[n];var i=new u1;return i.parse=function(){return u1.base=e||"",u1.prefixes=Object.create(r),u1.prototype.parse.apply(i,arguments)},i._resetBlanks=u1._resetBlanks,i},Generator:xmt};const Emt=Ms(Smt),_mt=`PREFIX bd: <bd:>
PREFIX cc: <http://creativecommons.org/ns#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX ontolex: <http://www.w3.org/ns/lemon/ontolex#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX pqn: <http://www.wikidata.org/prop/qualifier/value-normalized/>
PREFIX pqv: <http://www.wikidata.org/prop/qualifier/value/>
PREFIX pr: <http://www.wikidata.org/prop/reference/>
PREFIX prn: <http://www.wikidata.org/prop/reference/value-normalized/>
PREFIX prov: <http://www.w3.org/ns/prov#>
PREFIX prv: <http://www.wikidata.org/prop/reference/value/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX psn: <http://www.wikidata.org/prop/statement/value-normalized/>
PREFIX psv: <http://www.wikidata.org/prop/statement/value/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX schema: <http://schema.org/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX wdata: <http://www.wikidata.org/wiki/Special:EntityData/>
PREFIX wdno: <http://www.wikidata.org/prop/novalue/>
PREFIX wdref: <http://www.wikidata.org/reference/>
PREFIX wds: <http://www.wikidata.org/entity/statement/>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wdtn: <http://www.wikidata.org/prop/direct-normalized/>
PREFIX wdv: <http://www.wikidata.org/value/>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>`,Cmt=t=>t.type==="bgp",kmt=t=>typeof t.predicate=="string",Mmt=t=>typeof t=="string",aD=t=>{const e=t.split("/");return e?e[e.length-1]:t},Amt=t=>{var l;const r=new Emt.Parser({skipValidation:!0}).parse(_mt+t),o=r.where.filter(Cmt).map(u=>u.triples).flat().filter(kmt).map(u=>({object:aD(u.object),predicate:aD(u.predicate),subject:aD(u.subject)})),s=((l=r.variables)==null?void 0:l.filter(Mmt))||[];return{triples:o,variables:s}},mde=t=>{switch(t){case UN.Variable:return"#c44601";case UN.Term:return"#8babf1";default:return"red"}},yde=(t,e)=>e?`${t}
${e}`:t,Tmt=(t,e,r)=>{const n=mde(e);return{id:t,type:"graphin-circle",data:{type:e},style:{label:{value:yde(t,r)},keyshape:{fill:n,stroke:n,fillOpacity:.1,size:30,lineWidth:1}}}},Imt=(t,e,r)=>({source:t.subject,target:t.object,style:{label:{value:yde(t.predicate,r),fill:"black"},keyshape:{stroke:mde(e),lineWidth:2}}});var UN=(t=>(t.Term="Term",t.Variable="Variable",t))(UN||{});const Omt=t=>t.startsWith("?"),RY=t=>Omt(t)?"Variable":"Term",Dmt=t=>{const e=new Set;return t.forEach(r=>{e.add(r.subject),e.add(r.object)}),[...e]},NY=(t,e)=>{var r,n,i;return e&&((i=(n=(r=e[t])==null?void 0:r.labels)==null?void 0:n.en)==null?void 0:i.value)},Pmt=({triples:t},e)=>{const n=Dmt(t).map(a=>Tmt(a,RY(a),NY(a,e))),i=R8.processEdges(t.map(a=>Imt(a,RY(a.predicate),NY(a.predicate,e))),{poly:50});return{nodes:n,edges:i}},{Legend:FY}=A4e,Lmt=()=>{const t=hf(n=>n.queryValue.queryValue),{data:e}=eie(t),r=ae.useMemo(()=>{const n=Amt(t);return Pmt(n,e==null?void 0:e.entities)},[t,e]);return Oe.jsxs("div",{children:[Oe.jsx(hd,{style:{color:"white",marginLeft:13,marginBottom:7,marginTop:7,padding:1},order:4,children:"Query Structure Graph"}),Oe.jsx("div",{style:{height:"400px"},children:Oe.jsx(ade,{data:r,layout:{type:"dagre",rankdir:"LR"},style:{minHeight:"unset"},children:Oe.jsx(FY,{bindType:"node",sortKey:"data.type",children:n=>Oe.jsx(FY.Node,{...n})})})})]})},Rmt=ae.createContext(null),oD={didCatch:!1,error:null};class Nmt extends ae.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=oD}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:a,reason:"imperative-api"}),this.setState(oD)}}componentDidCatch(e,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,e,r)}componentDidUpdate(e,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&Fmt(e.resetKeys,i)){var a,o;(a=(o=this.props).onReset)===null||a===void 0||a.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(oD)}}render(){const{children:e,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:a,error:o}=this.state;let s=e;if(a){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")s=r(l);else if(n)s=ae.createElement(n,l);else if(i===null||ae.isValidElement(i))s=i;else throw o}return ae.createElement(Rmt.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},s)}}function Fmt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((r,n)=>!Object.is(r,e[n]))}const Bmt=()=>Oe.jsx(Oe.Fragment,{}),$mt=()=>{const t=hf(n=>n.queryValue.queryValue),[e,r]=ae.useState(0);return ae.useEffect(()=>{r(n=>n+1)},[t]),Oe.jsx(Nmt,{FallbackComponent:Bmt,children:Oe.jsx(Lmt,{})},e)},zmt="_app_2d8tg_1",jmt="_sidebar_2d8tg_1",Gmt="_content_2d8tg_1",L1={app:zmt,sidebar:jmt,content:Gmt,"results-content":"_results-content_2d8tg_1","empty-results-message":"_empty-results-message_2d8tg_1"};function Umt(){const[t,{close:e}]=bee(!0);return vd?Oe.jsxs(xs,{opened:t,onClose:e,withCloseButton:!0,title:"Demo Mode",children:[Oe.jsx("p",{children:"LinkQ is currently in demo mode and populated with example data. This example shows how ChatGPT4 can interact with the Wikidata API to convert the user's natural language question into a SPARQL query."}),Oe.jsxs("p",{children:["To use LinkQ yourself, you should visit ",Oe.jsxs("a",{href:"https://github.com/mit-ll/linkq",target:"_blank",children:["our repo ",Oe.jsx(jCe,{style:{marginBottom:-7}})]}),"."]}),Oe.jsx("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Oe.jsx(Hu,{onClick:e,children:"Got it"})})]}):null}function Wmt(){return Oe.jsx(XAe,{children:Oe.jsxs(YAe,{children:[Oe.jsxs("div",{id:L1.app,children:[Oe.jsx("div",{id:L1.sidebar,children:Oe.jsx(xOe,{})}),Oe.jsxs("div",{id:L1.content,children:[Oe.jsx(qAe,{}),Oe.jsx(MOe,{}),Oe.jsx($mt,{}),Oe.jsx("div",{id:L1["results-content"],children:Oe.jsx(Vmt,{})})]})]}),Oe.jsx(Umt,{})]})})}function Vmt(){const{runQueryIsPending:t}=f8(),e=hf(r=>r.results.results);return t?Oe.jsx("p",{children:"Loading..."}):e!=null&&e.error?Oe.jsxs(Oe.Fragment,{children:[Oe.jsx("p",{children:"There was an error running your query"}),Oe.jsx("pre",{children:e.error})]}):e!=null&&e.data?Oe.jsxs(Oe.Fragment,{children:[Oe.jsx(hd,{order:4,children:"Results Summary from LLM"}),e.summary?Oe.jsx("p",{children:e.summary}):Oe.jsx(dne,{children:"There was an error generating a summary."}),Oe.jsx("hr",{}),Oe.jsx(hd,{order:4,children:"Results Table from KG"}),Oe.jsx(LTe,{data:e.data})]}):Oe.jsx("p",{id:L1["empty-results-message"],children:Oe.jsx("b",{children:"Run a query to see results!"})})}const Hmt=new eAe({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:1/0}}}),Xmt={};sD.createRoot(document.getElementById("root")).render(Oe.jsx(pke,{store:BMe,children:Oe.jsx(aAe,{client:Hmt,children:Oe.jsx(Jee,{theme:Xmt,children:Oe.jsx(Wmt,{})})})}))});export default Ymt();
