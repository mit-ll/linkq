var cve=Object.defineProperty;var fve=(t,e,r)=>e in t?cve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var hve=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qx=(t,e,r)=>(fve(t,typeof e!="symbol"?e+"":e,r),r),LT=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var ce=(t,e,r)=>(LT(t,e,"read from private field"),r?r.call(t):e.get(t)),Kt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ft=(t,e,r,n)=>(LT(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var Zx=(t,e,r,n)=>({set _(i){Ft(t,e,i,r)},get _(){return ce(t,e,n)}}),Tr=(t,e,r)=>(LT(t,e,"access private method"),r);var xyt=hve((ds,ps)=>{function gq(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const dR=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ru},get Circle(){return ZVe},get Ellipse(){return JVe},get Image(){return eHe},get Line(){return tHe},get Marker(){return nHe},get Path(){return tF},get Polygon(){return cHe},get Polyline(){return fHe},get Rect(){return pHe},get Text(){return vHe}},Symbol.toStringTag,{value:"Module"})),pR=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return pl},get Circle(){return wHe},get Dom(){return bHe},get Ellipse(){return xHe},get Image(){return SHe},get Line(){return EHe},get Marker(){return _He},get Path(){return CHe},get Polygon(){return kHe},get Polyline(){return MHe},get Rect(){return THe},get Text(){return PHe}},Symbol.toStringTag,{value:"Module"}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var mq={exports:{}},Bk={},yq={exports:{}},Qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb=Symbol.for("react.element"),dve=Symbol.for("react.portal"),pve=Symbol.for("react.fragment"),vve=Symbol.for("react.strict_mode"),gve=Symbol.for("react.profiler"),mve=Symbol.for("react.provider"),yve=Symbol.for("react.context"),wve=Symbol.for("react.forward_ref"),bve=Symbol.for("react.suspense"),xve=Symbol.for("react.memo"),Sve=Symbol.for("react.lazy"),X9=Symbol.iterator;function Eve(t){return t===null||typeof t!="object"?null:(t=X9&&t[X9]||t["@@iterator"],typeof t=="function"?t:null)}var wq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bq=Object.assign,xq={};function Zm(t,e,r){this.props=t,this.context=e,this.refs=xq,this.updater=r||wq}Zm.prototype.isReactComponent={};Zm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sq(){}Sq.prototype=Zm.prototype;function vR(t,e,r){this.props=t,this.context=e,this.refs=xq,this.updater=r||wq}var gR=vR.prototype=new Sq;gR.constructor=vR;bq(gR,Zm.prototype);gR.isPureReactComponent=!0;var Y9=Array.isArray,Eq=Object.prototype.hasOwnProperty,mR={current:null},_q={key:!0,ref:!0,__self:!0,__source:!0};function Cq(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Eq.call(e,n)&&!_q.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:nb,type:t,key:a,ref:o,props:i,_owner:mR.current}}function _ve(t,e){return{$$typeof:nb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yR(t){return typeof t=="object"&&t!==null&&t.$$typeof===nb}function Cve(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var q9=/\/+/g;function RT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cve(""+t.key):e.toString(36)}function a_(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nb:case dve:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+RT(o,0):n,Y9(i)?(r="",t!=null&&(r=t.replace(q9,"$&/")+"/"),a_(i,e,r,"",function(u){return u})):i!=null&&(yR(i)&&(i=_ve(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(q9,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Y9(t))for(var s=0;s<t.length;s++){a=t[s];var l=n+RT(a,s);o+=a_(a,e,r,l,i)}else if(l=Eve(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=n+RT(a,s++),o+=a_(a,e,r,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jx(t,e,r){if(t==null)return t;var n=[],i=0;return a_(t,n,"","",function(a){return e.call(r,a,i++)}),n}function kve(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var co={current:null},o_={transition:null},Mve={ReactCurrentDispatcher:co,ReactCurrentBatchConfig:o_,ReactCurrentOwner:mR};Qr.Children={map:Jx,forEach:function(t,e,r){Jx(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jx(t,function(){e++}),e},toArray:function(t){return Jx(t,function(e){return e})||[]},only:function(t){if(!yR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qr.Component=Zm;Qr.Fragment=pve;Qr.Profiler=gve;Qr.PureComponent=vR;Qr.StrictMode=vve;Qr.Suspense=bve;Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mve;Qr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=bq({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=mR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Eq.call(e,l)&&!_q.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:nb,type:t.type,key:i,ref:a,props:n,_owner:o}};Qr.createContext=function(t){return t={$$typeof:yve,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mve,_context:t},t.Consumer=t};Qr.createElement=Cq;Qr.createFactory=function(t){var e=Cq.bind(null,t);return e.type=t,e};Qr.createRef=function(){return{current:null}};Qr.forwardRef=function(t){return{$$typeof:wve,render:t}};Qr.isValidElement=yR;Qr.lazy=function(t){return{$$typeof:Sve,_payload:{_status:-1,_result:t},_init:kve}};Qr.memo=function(t,e){return{$$typeof:xve,type:t,compare:e===void 0?null:e}};Qr.startTransition=function(t){var e=o_.transition;o_.transition={};try{t()}finally{o_.transition=e}};Qr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qr.useCallback=function(t,e){return co.current.useCallback(t,e)};Qr.useContext=function(t){return co.current.useContext(t)};Qr.useDebugValue=function(){};Qr.useDeferredValue=function(t){return co.current.useDeferredValue(t)};Qr.useEffect=function(t,e){return co.current.useEffect(t,e)};Qr.useId=function(){return co.current.useId()};Qr.useImperativeHandle=function(t,e,r){return co.current.useImperativeHandle(t,e,r)};Qr.useInsertionEffect=function(t,e){return co.current.useInsertionEffect(t,e)};Qr.useLayoutEffect=function(t,e){return co.current.useLayoutEffect(t,e)};Qr.useMemo=function(t,e){return co.current.useMemo(t,e)};Qr.useReducer=function(t,e,r){return co.current.useReducer(t,e,r)};Qr.useRef=function(t){return co.current.useRef(t)};Qr.useState=function(t){return co.current.useState(t)};Qr.useSyncExternalStore=function(t,e,r){return co.current.useSyncExternalStore(t,e,r)};Qr.useTransition=function(){return co.current.useTransition()};Qr.version="18.2.0";yq.exports=Qr;var oe=yq.exports;const te=_s(oe),K9=gq({__proto__:null,default:te},[oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ave=oe,Tve=Symbol.for("react.element"),Ove=Symbol.for("react.fragment"),Ive=Object.prototype.hasOwnProperty,Dve=Ave.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pve={key:!0,ref:!0,__self:!0,__source:!0};function kq(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Ive.call(e,n)&&!Pve.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Tve,type:t,key:a,ref:o,props:i,_owner:Dve.current}}Bk.Fragment=Ove;Bk.jsx=kq;Bk.jsxs=kq;mq.exports=Bk;var Ne=mq.exports,TD={},Mq={exports:{}},Cs={},Aq={exports:{}},Tq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,O){var L=N.length;N.push(O);e:for(;0<L;){var G=L-1>>>1,q=N[G];if(0<i(q,O))N[G]=O,N[L]=q,L=G;else break e}}function r(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var O=N[0],L=N.pop();if(L!==O){N[0]=L;e:for(var G=0,q=N.length,K=q>>>1;G<K;){var V=2*(G+1)-1,le=N[V],ge=V+1,xe=N[ge];if(0>i(le,L))ge<q&&0>i(xe,le)?(N[G]=xe,N[ge]=L,G=ge):(N[G]=le,N[V]=L,G=V);else if(ge<q&&0>i(xe,L))N[G]=xe,N[ge]=L,G=ge;else break e}}return O}function i(N,O){var L=N.sortIndex-O.sortIndex;return L!==0?L:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var O=r(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=N)n(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=r(u)}}function b(N){if(v=!1,w(N),!p)if(r(l)!==null)p=!0,R(x);else{var O=r(u);O!==null&&B(b,O.startTime-N)}}function x(N,O){p=!1,v&&(v=!1,m(_),_=-1),d=!0;var L=h;try{for(w(O),f=r(l);f!==null&&(!(f.expirationTime>O)||N&&!M());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var q=G(f.expirationTime<=O);O=t.unstable_now(),typeof q=="function"?f.callback=q:f===r(l)&&n(l),w(O)}else n(l);f=r(l)}if(f!==null)var K=!0;else{var V=r(u);V!==null&&B(b,V.startTime-O),K=!1}return K}finally{f=null,h=L,d=!1}}var S=!1,E=null,_=-1,k=5,C=-1;function M(){return!(t.unstable_now()-C<k)}function A(){if(E!==null){var N=t.unstable_now();C=N;var O=!0;try{O=E(!0,N)}finally{O?T():(S=!1,E=null)}}else S=!1}var T;if(typeof y=="function")T=function(){y(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=A,T=function(){F.postMessage(null)}}else T=function(){g(A,0)};function R(N){E=N,S||(S=!0,T())}function B(N,O){_=g(function(){N(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,R(x))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var L=h;h=O;try{return N()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=h;h=N;try{return O()}finally{h=L}},t.unstable_scheduleCallback=function(N,O,L){var G=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?G+L:G):L=G,N){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,N={id:c++,callback:O,priorityLevel:N,startTime:L,expirationTime:q,sortIndex:-1},L>G?(N.sortIndex=L,e(u,N),r(l)===null&&N===r(u)&&(v?(m(_),_=-1):v=!0,B(b,L-G))):(N.sortIndex=q,e(l,N),p||d||(p=!0,R(x))),N},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(N){var O=h;return function(){var L=h;h=O;try{return N.apply(this,arguments)}finally{h=L}}}})(Tq);Aq.exports=Tq;var Lve=Aq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oq=oe,gs=Lve;function bt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iq=new Set,O2={};function Rv(t,e){cm(t,e),cm(t+"Capture",e)}function cm(t,e){for(O2[t]=e,t=0;t<e.length;t++)Iq.add(e[t])}var xf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OD=Object.prototype.hasOwnProperty,Rve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q9={},Z9={};function Nve(t){return OD.call(Z9,t)?!0:OD.call(Q9,t)?!1:Rve.test(t)?Z9[t]=!0:(Q9[t]=!0,!1)}function Fve(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bve(t,e,r,n){if(e===null||typeof e>"u"||Fve(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fo(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Sa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Sa[t]=new fo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Sa[e]=new fo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Sa[t]=new fo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Sa[t]=new fo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Sa[t]=new fo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Sa[t]=new fo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Sa[t]=new fo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Sa[t]=new fo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Sa[t]=new fo(t,5,!1,t.toLowerCase(),null,!1,!1)});var wR=/[\-:]([a-z])/g;function bR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wR,bR);Sa[e]=new fo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wR,bR);Sa[e]=new fo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wR,bR);Sa[e]=new fo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Sa[t]=new fo(t,1,!1,t.toLowerCase(),null,!1,!1)});Sa.xlinkHref=new fo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Sa[t]=new fo(t,1,!1,t.toLowerCase(),null,!0,!0)});function xR(t,e,r,n){var i=Sa.hasOwnProperty(e)?Sa[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bve(e,r,i,n)&&(r=null),n||i===null?Nve(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Df=Oq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eS=Symbol.for("react.element"),o0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),SR=Symbol.for("react.strict_mode"),ID=Symbol.for("react.profiler"),Dq=Symbol.for("react.provider"),Pq=Symbol.for("react.context"),ER=Symbol.for("react.forward_ref"),DD=Symbol.for("react.suspense"),PD=Symbol.for("react.suspense_list"),_R=Symbol.for("react.memo"),_h=Symbol.for("react.lazy"),Lq=Symbol.for("react.offscreen"),J9=Symbol.iterator;function Hy(t){return t===null||typeof t!="object"?null:(t=J9&&t[J9]||t["@@iterator"],typeof t=="function"?t:null)}var ri=Object.assign,NT;function M1(t){if(NT===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);NT=e&&e[1]||""}return`
`+NT+t}var FT=!1;function BT(t,e){if(!t||FT)return"";FT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{FT=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?M1(t):""}function $ve(t){switch(t.tag){case 5:return M1(t.type);case 16:return M1("Lazy");case 13:return M1("Suspense");case 19:return M1("SuspenseList");case 0:case 2:case 15:return t=BT(t.type,!1),t;case 11:return t=BT(t.type.render,!1),t;case 1:return t=BT(t.type,!0),t;default:return""}}function LD(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case s0:return"Fragment";case o0:return"Portal";case ID:return"Profiler";case SR:return"StrictMode";case DD:return"Suspense";case PD:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pq:return(t.displayName||"Context")+".Consumer";case Dq:return(t._context.displayName||"Context")+".Provider";case ER:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _R:return e=t.displayName||null,e!==null?e:LD(t.type)||"Memo";case _h:e=t._payload,t=t._init;try{return LD(t(e))}catch{}}return null}function zve(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LD(e);case 8:return e===SR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function md(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jve(t){var e=Rq(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tS(t){t._valueTracker||(t._valueTracker=jve(t))}function Nq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Rq(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function c3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function RD(t,e){var r=e.checked;return ri({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function e7(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=md(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fq(t,e){e=e.checked,e!=null&&xR(t,"checked",e,!1)}function ND(t,e){Fq(t,e);var r=md(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?FD(t,e.type,r):e.hasOwnProperty("defaultValue")&&FD(t,e.type,md(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t7(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function FD(t,e,r){(e!=="number"||c3(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var A1=Array.isArray;function C0(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+md(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function BD(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(bt(91));return ri({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r7(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(bt(92));if(A1(r)){if(1<r.length)throw Error(bt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:md(r)}}function Bq(t,e){var r=md(e.value),n=md(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function n7(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $q(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $D(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$q(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rS,zq=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rS=rS||document.createElement("div"),rS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function I2(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Z1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gve=["Webkit","ms","Moz","O"];Object.keys(Z1).forEach(function(t){Gve.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Z1[e]=Z1[t]})});function jq(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Z1.hasOwnProperty(t)&&Z1[t]?(""+e).trim():e+"px"}function Gq(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=jq(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Uve=ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zD(t,e){if(e){if(Uve[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(bt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(bt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(bt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(bt(62))}}function jD(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GD=null;function CR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var UD=null,k0=null,M0=null;function i7(t){if(t=ob(t)){if(typeof UD!="function")throw Error(bt(280));var e=t.stateNode;e&&(e=Uk(e),UD(t.stateNode,t.type,e))}}function Uq(t){k0?M0?M0.push(t):M0=[t]:k0=t}function Wq(){if(k0){var t=k0,e=M0;if(M0=k0=null,i7(t),e)for(t=0;t<e.length;t++)i7(e[t])}}function Vq(t,e){return t(e)}function Hq(){}var $T=!1;function Xq(t,e,r){if($T)return t(e,r);$T=!0;try{return Vq(t,e,r)}finally{$T=!1,(k0!==null||M0!==null)&&(Hq(),Wq())}}function D2(t,e){var r=t.stateNode;if(r===null)return null;var n=Uk(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(bt(231,e,typeof r));return r}var WD=!1;if(xf)try{var Xy={};Object.defineProperty(Xy,"passive",{get:function(){WD=!0}}),window.addEventListener("test",Xy,Xy),window.removeEventListener("test",Xy,Xy)}catch{WD=!1}function Wve(t,e,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var J1=!1,f3=null,h3=!1,VD=null,Vve={onError:function(t){J1=!0,f3=t}};function Hve(t,e,r,n,i,a,o,s,l){J1=!1,f3=null,Wve.apply(Vve,arguments)}function Xve(t,e,r,n,i,a,o,s,l){if(Hve.apply(this,arguments),J1){if(J1){var u=f3;J1=!1,f3=null}else throw Error(bt(198));h3||(h3=!0,VD=u)}}function Nv(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Yq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function a7(t){if(Nv(t)!==t)throw Error(bt(188))}function Yve(t){var e=t.alternate;if(!e){if(e=Nv(t),e===null)throw Error(bt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return a7(i),t;if(a===n)return a7(i),e;a=a.sibling}throw Error(bt(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(bt(189))}}if(r.alternate!==n)throw Error(bt(190))}if(r.tag!==3)throw Error(bt(188));return r.stateNode.current===r?t:e}function qq(t){return t=Yve(t),t!==null?Kq(t):null}function Kq(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kq(t);if(e!==null)return e;t=t.sibling}return null}var Qq=gs.unstable_scheduleCallback,o7=gs.unstable_cancelCallback,qve=gs.unstable_shouldYield,Kve=gs.unstable_requestPaint,bi=gs.unstable_now,Qve=gs.unstable_getCurrentPriorityLevel,kR=gs.unstable_ImmediatePriority,Zq=gs.unstable_UserBlockingPriority,d3=gs.unstable_NormalPriority,Zve=gs.unstable_LowPriority,Jq=gs.unstable_IdlePriority,$k=null,sc=null;function Jve(t){if(sc&&typeof sc.onCommitFiberRoot=="function")try{sc.onCommitFiberRoot($k,t,void 0,(t.current.flags&128)===128)}catch{}}var Wl=Math.clz32?Math.clz32:rge,ege=Math.log,tge=Math.LN2;function rge(t){return t>>>=0,t===0?32:31-(ege(t)/tge|0)|0}var nS=64,iS=4194304;function T1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function p3(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var s=o&~i;s!==0?n=T1(s):(a&=o,a!==0&&(n=T1(a)))}else o=r&~i,o!==0?n=T1(o):a!==0&&(n=T1(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Wl(e),i=1<<r,n|=t[r],e&=~i;return n}function nge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ige(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Wl(a),s=1<<o,l=i[o];l===-1?(!(s&r)||s&n)&&(i[o]=nge(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function HD(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eK(){var t=nS;return nS<<=1,!(nS&4194240)&&(nS=64),t}function zT(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ib(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wl(e),t[e]=r}function age(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Wl(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function MR(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Wl(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var dn=0;function tK(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rK,AR,nK,iK,aK,XD=!1,aS=[],nd=null,id=null,ad=null,P2=new Map,L2=new Map,Dh=[],oge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s7(t,e){switch(t){case"focusin":case"focusout":nd=null;break;case"dragenter":case"dragleave":id=null;break;case"mouseover":case"mouseout":ad=null;break;case"pointerover":case"pointerout":P2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":L2.delete(e.pointerId)}}function Yy(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=ob(e),e!==null&&AR(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sge(t,e,r,n,i){switch(e){case"focusin":return nd=Yy(nd,t,e,r,n,i),!0;case"dragenter":return id=Yy(id,t,e,r,n,i),!0;case"mouseover":return ad=Yy(ad,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return P2.set(a,Yy(P2.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,L2.set(a,Yy(L2.get(a)||null,t,e,r,n,i)),!0}return!1}function oK(t){var e=Pp(t.target);if(e!==null){var r=Nv(e);if(r!==null){if(e=r.tag,e===13){if(e=Yq(r),e!==null){t.blockedOn=e,aK(t.priority,function(){nK(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function s_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=YD(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);GD=n,r.target.dispatchEvent(n),GD=null}else return e=ob(r),e!==null&&AR(e),t.blockedOn=r,!1;e.shift()}return!0}function l7(t,e,r){s_(t)&&r.delete(e)}function lge(){XD=!1,nd!==null&&s_(nd)&&(nd=null),id!==null&&s_(id)&&(id=null),ad!==null&&s_(ad)&&(ad=null),P2.forEach(l7),L2.forEach(l7)}function qy(t,e){t.blockedOn===e&&(t.blockedOn=null,XD||(XD=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,lge)))}function R2(t){function e(i){return qy(i,t)}if(0<aS.length){qy(aS[0],t);for(var r=1;r<aS.length;r++){var n=aS[r];n.blockedOn===t&&(n.blockedOn=null)}}for(nd!==null&&qy(nd,t),id!==null&&qy(id,t),ad!==null&&qy(ad,t),P2.forEach(e),L2.forEach(e),r=0;r<Dh.length;r++)n=Dh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Dh.length&&(r=Dh[0],r.blockedOn===null);)oK(r),r.blockedOn===null&&Dh.shift()}var A0=Df.ReactCurrentBatchConfig,v3=!0;function uge(t,e,r,n){var i=dn,a=A0.transition;A0.transition=null;try{dn=1,TR(t,e,r,n)}finally{dn=i,A0.transition=a}}function cge(t,e,r,n){var i=dn,a=A0.transition;A0.transition=null;try{dn=4,TR(t,e,r,n)}finally{dn=i,A0.transition=a}}function TR(t,e,r,n){if(v3){var i=YD(t,e,r,n);if(i===null)KT(t,e,n,g3,r),s7(t,n);else if(sge(i,t,e,r,n))n.stopPropagation();else if(s7(t,n),e&4&&-1<oge.indexOf(t)){for(;i!==null;){var a=ob(i);if(a!==null&&rK(a),a=YD(t,e,r,n),a===null&&KT(t,e,n,g3,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else KT(t,e,n,null,r)}}var g3=null;function YD(t,e,r,n){if(g3=null,t=CR(n),t=Pp(t),t!==null)if(e=Nv(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Yq(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return g3=t,null}function sK(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qve()){case kR:return 1;case Zq:return 4;case d3:case Zve:return 16;case Jq:return 536870912;default:return 16}default:return 16}}var Wh=null,OR=null,l_=null;function lK(){if(l_)return l_;var t,e=OR,r=e.length,n,i="value"in Wh?Wh.value:Wh.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return l_=i.slice(t,1<n?1-n:void 0)}function u_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oS(){return!0}function u7(){return!1}function ks(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?oS:u7,this.isPropagationStopped=u7,this}return ri(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oS)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oS)},persist:function(){},isPersistent:oS}),e}var Jm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IR=ks(Jm),ab=ri({},Jm,{view:0,detail:0}),fge=ks(ab),jT,GT,Ky,zk=ri({},ab,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ky&&(Ky&&t.type==="mousemove"?(jT=t.screenX-Ky.screenX,GT=t.screenY-Ky.screenY):GT=jT=0,Ky=t),jT)},movementY:function(t){return"movementY"in t?t.movementY:GT}}),c7=ks(zk),hge=ri({},zk,{dataTransfer:0}),dge=ks(hge),pge=ri({},ab,{relatedTarget:0}),UT=ks(pge),vge=ri({},Jm,{animationName:0,elapsedTime:0,pseudoElement:0}),gge=ks(vge),mge=ri({},Jm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yge=ks(mge),wge=ri({},Jm,{data:0}),f7=ks(wge),bge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ege(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sge[t])?!!e[t]:!1}function DR(){return Ege}var _ge=ri({},ab,{key:function(t){if(t.key){var e=bge[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=u_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xge[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DR,charCode:function(t){return t.type==="keypress"?u_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?u_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cge=ks(_ge),kge=ri({},zk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h7=ks(kge),Mge=ri({},ab,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DR}),Age=ks(Mge),Tge=ri({},Jm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oge=ks(Tge),Ige=ri({},zk,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dge=ks(Ige),Pge=[9,13,27,32],PR=xf&&"CompositionEvent"in window,e2=null;xf&&"documentMode"in document&&(e2=document.documentMode);var Lge=xf&&"TextEvent"in window&&!e2,uK=xf&&(!PR||e2&&8<e2&&11>=e2),d7=" ",p7=!1;function cK(t,e){switch(t){case"keyup":return Pge.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fK(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var l0=!1;function Rge(t,e){switch(t){case"compositionend":return fK(e);case"keypress":return e.which!==32?null:(p7=!0,d7);case"textInput":return t=e.data,t===d7&&p7?null:t;default:return null}}function Nge(t,e){if(l0)return t==="compositionend"||!PR&&cK(t,e)?(t=lK(),l_=OR=Wh=null,l0=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uK&&e.locale!=="ko"?null:e.data;default:return null}}var Fge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v7(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fge[t.type]:e==="textarea"}function hK(t,e,r,n){Uq(n),e=m3(e,"onChange"),0<e.length&&(r=new IR("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var t2=null,N2=null;function Bge(t){EK(t,0)}function jk(t){var e=f0(t);if(Nq(e))return t}function $ge(t,e){if(t==="change")return e}var dK=!1;if(xf){var WT;if(xf){var VT="oninput"in document;if(!VT){var g7=document.createElement("div");g7.setAttribute("oninput","return;"),VT=typeof g7.oninput=="function"}WT=VT}else WT=!1;dK=WT&&(!document.documentMode||9<document.documentMode)}function m7(){t2&&(t2.detachEvent("onpropertychange",pK),N2=t2=null)}function pK(t){if(t.propertyName==="value"&&jk(N2)){var e=[];hK(e,N2,t,CR(t)),Xq(Bge,e)}}function zge(t,e,r){t==="focusin"?(m7(),t2=e,N2=r,t2.attachEvent("onpropertychange",pK)):t==="focusout"&&m7()}function jge(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jk(N2)}function Gge(t,e){if(t==="click")return jk(e)}function Uge(t,e){if(t==="input"||t==="change")return jk(e)}function Wge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ql=typeof Object.is=="function"?Object.is:Wge;function F2(t,e){if(ql(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!OD.call(e,i)||!ql(t[i],e[i]))return!1}return!0}function y7(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w7(t,e){var r=y7(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=y7(r)}}function vK(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vK(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gK(){for(var t=window,e=c3();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=c3(t.document)}return e}function LR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vge(t){var e=gK(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&vK(r.ownerDocument.documentElement,r)){if(n!==null&&LR(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=w7(r,a);var o=w7(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hge=xf&&"documentMode"in document&&11>=document.documentMode,u0=null,qD=null,r2=null,KD=!1;function b7(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;KD||u0==null||u0!==c3(n)||(n=u0,"selectionStart"in n&&LR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),r2&&F2(r2,n)||(r2=n,n=m3(qD,"onSelect"),0<n.length&&(e=new IR("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=u0)))}function sS(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var c0={animationend:sS("Animation","AnimationEnd"),animationiteration:sS("Animation","AnimationIteration"),animationstart:sS("Animation","AnimationStart"),transitionend:sS("Transition","TransitionEnd")},HT={},mK={};xf&&(mK=document.createElement("div").style,"AnimationEvent"in window||(delete c0.animationend.animation,delete c0.animationiteration.animation,delete c0.animationstart.animation),"TransitionEvent"in window||delete c0.transitionend.transition);function Gk(t){if(HT[t])return HT[t];if(!c0[t])return t;var e=c0[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in mK)return HT[t]=e[r];return t}var yK=Gk("animationend"),wK=Gk("animationiteration"),bK=Gk("animationstart"),xK=Gk("transitionend"),SK=new Map,x7="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bd(t,e){SK.set(t,e),Rv(e,[t])}for(var XT=0;XT<x7.length;XT++){var YT=x7[XT],Xge=YT.toLowerCase(),Yge=YT[0].toUpperCase()+YT.slice(1);Bd(Xge,"on"+Yge)}Bd(yK,"onAnimationEnd");Bd(wK,"onAnimationIteration");Bd(bK,"onAnimationStart");Bd("dblclick","onDoubleClick");Bd("focusin","onFocus");Bd("focusout","onBlur");Bd(xK,"onTransitionEnd");cm("onMouseEnter",["mouseout","mouseover"]);cm("onMouseLeave",["mouseout","mouseover"]);cm("onPointerEnter",["pointerout","pointerover"]);cm("onPointerLeave",["pointerout","pointerover"]);Rv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qge=new Set("cancel close invalid load scroll toggle".split(" ").concat(O1));function S7(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Xve(n,e,void 0,t),t.currentTarget=null}function EK(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;S7(i,s,u),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;S7(i,s,u),a=l}}}if(h3)throw t=VD,h3=!1,VD=null,t}function An(t,e){var r=e[tP];r===void 0&&(r=e[tP]=new Set);var n=t+"__bubble";r.has(n)||(_K(e,t,2,!1),r.add(n))}function qT(t,e,r){var n=0;e&&(n|=4),_K(r,t,n,e)}var lS="_reactListening"+Math.random().toString(36).slice(2);function B2(t){if(!t[lS]){t[lS]=!0,Iq.forEach(function(r){r!=="selectionchange"&&(qge.has(r)||qT(r,!1,t),qT(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lS]||(e[lS]=!0,qT("selectionchange",!1,e))}}function _K(t,e,r,n){switch(sK(e)){case 1:var i=uge;break;case 4:i=cge;break;default:i=TR}r=i.bind(null,e,r,t),i=void 0,!WD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function KT(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Pp(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}Xq(function(){var u=a,c=CR(r),f=[];e:{var h=SK.get(t);if(h!==void 0){var d=IR,p=t;switch(t){case"keypress":if(u_(r)===0)break e;case"keydown":case"keyup":d=Cge;break;case"focusin":p="focus",d=UT;break;case"focusout":p="blur",d=UT;break;case"beforeblur":case"afterblur":d=UT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=c7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=dge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Age;break;case yK:case wK:case bK:d=gge;break;case xK:d=Oge;break;case"scroll":d=fge;break;case"wheel":d=Dge;break;case"copy":case"cut":case"paste":d=yge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=h7}var v=(e&4)!==0,g=!v&&t==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=D2(y,m),b!=null&&v.push($2(y,b,w)))),g)break;y=y.return}0<v.length&&(h=new d(h,p,null,r,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==GD&&(p=r.relatedTarget||r.fromElement)&&(Pp(p)||p[Sf]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=u,p=p?Pp(p):null,p!==null&&(g=Nv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(v=c7,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=h7,b="onPointerLeave",m="onPointerEnter",y="pointer"),g=d==null?h:f0(d),w=p==null?h:f0(p),h=new v(b,y+"leave",d,r,c),h.target=g,h.relatedTarget=w,b=null,Pp(c)===u&&(v=new v(m,y+"enter",p,r,c),v.target=w,v.relatedTarget=g,b=v),g=b,d&&p)t:{for(v=d,m=p,y=0,w=v;w;w=Mg(w))y++;for(w=0,b=m;b;b=Mg(b))w++;for(;0<y-w;)v=Mg(v),y--;for(;0<w-y;)m=Mg(m),w--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=Mg(v),m=Mg(m)}v=null}else v=null;d!==null&&E7(f,h,d,v,!1),p!==null&&g!==null&&E7(f,g,p,v,!0)}}e:{if(h=u?f0(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=$ge;else if(v7(h))if(dK)x=Uge;else{x=jge;var S=zge}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Gge);if(x&&(x=x(t,u))){hK(f,x,r,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&FD(h,"number",h.value)}switch(S=u?f0(u):window,t){case"focusin":(v7(S)||S.contentEditable==="true")&&(u0=S,qD=u,r2=null);break;case"focusout":r2=qD=u0=null;break;case"mousedown":KD=!0;break;case"contextmenu":case"mouseup":case"dragend":KD=!1,b7(f,r,c);break;case"selectionchange":if(Hge)break;case"keydown":case"keyup":b7(f,r,c)}var E;if(PR)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else l0?cK(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(uK&&r.locale!=="ko"&&(l0||_!=="onCompositionStart"?_==="onCompositionEnd"&&l0&&(E=lK()):(Wh=c,OR="value"in Wh?Wh.value:Wh.textContent,l0=!0)),S=m3(u,_),0<S.length&&(_=new f7(_,t,null,r,c),f.push({event:_,listeners:S}),E?_.data=E:(E=fK(r),E!==null&&(_.data=E)))),(E=Lge?Rge(t,r):Nge(t,r))&&(u=m3(u,"onBeforeInput"),0<u.length&&(c=new f7("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=E))}EK(f,e)})}function $2(t,e,r){return{instance:t,listener:e,currentTarget:r}}function m3(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=D2(t,r),a!=null&&n.unshift($2(t,a,i)),a=D2(t,e),a!=null&&n.push($2(t,a,i))),t=t.return}return n}function Mg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E7(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=D2(r,a),l!=null&&o.unshift($2(r,l,s))):i||(l=D2(r,a),l!=null&&o.push($2(r,l,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Kge=/\r\n?/g,Qge=/\u0000|\uFFFD/g;function _7(t){return(typeof t=="string"?t:""+t).replace(Kge,`
`).replace(Qge,"")}function uS(t,e,r){if(e=_7(e),_7(t)!==e&&r)throw Error(bt(425))}function y3(){}var QD=null,ZD=null;function JD(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eP=typeof setTimeout=="function"?setTimeout:void 0,Zge=typeof clearTimeout=="function"?clearTimeout:void 0,C7=typeof Promise=="function"?Promise:void 0,Jge=typeof queueMicrotask=="function"?queueMicrotask:typeof C7<"u"?function(t){return C7.resolve(null).then(t).catch(e0e)}:eP;function e0e(t){setTimeout(function(){throw t})}function QT(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),R2(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);R2(e)}function od(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k7(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ey=Math.random().toString(36).slice(2),Vu="__reactFiber$"+ey,z2="__reactProps$"+ey,Sf="__reactContainer$"+ey,tP="__reactEvents$"+ey,t0e="__reactListeners$"+ey,r0e="__reactHandles$"+ey;function Pp(t){var e=t[Vu];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Sf]||r[Vu]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=k7(t);t!==null;){if(r=t[Vu])return r;t=k7(t)}return e}t=r,r=t.parentNode}return null}function ob(t){return t=t[Vu]||t[Sf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function f0(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(bt(33))}function Uk(t){return t[z2]||null}var rP=[],h0=-1;function $d(t){return{current:t}}function Nn(t){0>h0||(t.current=rP[h0],rP[h0]=null,h0--)}function kn(t,e){h0++,rP[h0]=t.current,t.current=e}var yd={},Wa=$d(yd),Do=$d(!1),cv=yd;function fm(t,e){var r=t.type.contextTypes;if(!r)return yd;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Po(t){return t=t.childContextTypes,t!=null}function w3(){Nn(Do),Nn(Wa)}function M7(t,e,r){if(Wa.current!==yd)throw Error(bt(168));kn(Wa,e),kn(Do,r)}function CK(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(bt(108,zve(t)||"Unknown",i));return ri({},r,n)}function b3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yd,cv=Wa.current,kn(Wa,t),kn(Do,Do.current),!0}function A7(t,e,r){var n=t.stateNode;if(!n)throw Error(bt(169));r?(t=CK(t,e,cv),n.__reactInternalMemoizedMergedChildContext=t,Nn(Do),Nn(Wa),kn(Wa,t)):Nn(Do),kn(Do,r)}var sf=null,Wk=!1,ZT=!1;function kK(t){sf===null?sf=[t]:sf.push(t)}function n0e(t){Wk=!0,kK(t)}function zd(){if(!ZT&&sf!==null){ZT=!0;var t=0,e=dn;try{var r=sf;for(dn=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}sf=null,Wk=!1}catch(i){throw sf!==null&&(sf=sf.slice(t+1)),Qq(kR,zd),i}finally{dn=e,ZT=!1}}return null}var d0=[],p0=0,x3=null,S3=0,Ys=[],qs=0,fv=null,ff=1,hf="";function bp(t,e){d0[p0++]=S3,d0[p0++]=x3,x3=t,S3=e}function MK(t,e,r){Ys[qs++]=ff,Ys[qs++]=hf,Ys[qs++]=fv,fv=t;var n=ff;t=hf;var i=32-Wl(n)-1;n&=~(1<<i),r+=1;var a=32-Wl(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ff=1<<32-Wl(e)+i|r<<i|n,hf=a+t}else ff=1<<a|r<<i|n,hf=t}function RR(t){t.return!==null&&(bp(t,1),MK(t,1,0))}function NR(t){for(;t===x3;)x3=d0[--p0],d0[p0]=null,S3=d0[--p0],d0[p0]=null;for(;t===fv;)fv=Ys[--qs],Ys[qs]=null,hf=Ys[--qs],Ys[qs]=null,ff=Ys[--qs],Ys[qs]=null}var vs=null,ls=null,Wn=!1,Nl=null;function AK(t,e){var r=Zs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function T7(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vs=t,ls=od(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vs=t,ls=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=fv!==null?{id:ff,overflow:hf}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Zs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vs=t,ls=null,!0):!1;default:return!1}}function nP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iP(t){if(Wn){var e=ls;if(e){var r=e;if(!T7(t,e)){if(nP(t))throw Error(bt(418));e=od(r.nextSibling);var n=vs;e&&T7(t,e)?AK(n,r):(t.flags=t.flags&-4097|2,Wn=!1,vs=t)}}else{if(nP(t))throw Error(bt(418));t.flags=t.flags&-4097|2,Wn=!1,vs=t}}}function O7(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vs=t}function cS(t){if(t!==vs)return!1;if(!Wn)return O7(t),Wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!JD(t.type,t.memoizedProps)),e&&(e=ls)){if(nP(t))throw TK(),Error(bt(418));for(;e;)AK(t,e),e=od(e.nextSibling)}if(O7(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(bt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ls=od(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ls=null}}else ls=vs?od(t.stateNode.nextSibling):null;return!0}function TK(){for(var t=ls;t;)t=od(t.nextSibling)}function hm(){ls=vs=null,Wn=!1}function FR(t){Nl===null?Nl=[t]:Nl.push(t)}var i0e=Df.ReactCurrentBatchConfig;function Il(t,e){if(t&&t.defaultProps){e=ri({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var E3=$d(null),_3=null,v0=null,BR=null;function $R(){BR=v0=_3=null}function zR(t){var e=E3.current;Nn(E3),t._currentValue=e}function aP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function T0(t,e){_3=t,BR=v0=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(To=!0),t.firstContext=null)}function al(t){var e=t._currentValue;if(BR!==t)if(t={context:t,memoizedValue:e,next:null},v0===null){if(_3===null)throw Error(bt(308));v0=t,_3.dependencies={lanes:0,firstContext:t}}else v0=v0.next=t;return e}var Lp=null;function jR(t){Lp===null?Lp=[t]:Lp.push(t)}function OK(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,jR(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ef(t,n)}function Ef(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ch=!1;function GR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IK(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,rn&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ef(t,r)}return i=n.interleaved,i===null?(e.next=e,jR(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ef(t,r)}function c_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,MR(t,r)}}function I7(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function C3(t,e,r,n){var i=t.updateQueue;Ch=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var h=s.lane,d=s.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,d=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=ri({},f,h);break e;case 2:Ch=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);dv|=o,t.lanes=o,t.memoizedState=f}}function D7(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(bt(191,i));i.call(n)}}}var DK=new Oq.Component().refs;function oP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ri({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Vk={isMounted:function(t){return(t=t._reactInternals)?Nv(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ao(),i=ud(t),a=gf(n,i);a.payload=e,r!=null&&(a.callback=r),e=sd(t,a,i),e!==null&&(Vl(e,t,i,n),c_(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ao(),i=ud(t),a=gf(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=sd(t,a,i),e!==null&&(Vl(e,t,i,n),c_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ao(),n=ud(t),i=gf(r,n);i.tag=2,e!=null&&(i.callback=e),e=sd(t,i,n),e!==null&&(Vl(e,t,n,r),c_(e,t,n))}};function P7(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!F2(r,n)||!F2(i,a):!0}function PK(t,e,r){var n=!1,i=yd,a=e.contextType;return typeof a=="object"&&a!==null?a=al(a):(i=Po(e)?cv:Wa.current,n=e.contextTypes,a=(n=n!=null)?fm(t,i):yd),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vk,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function L7(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Vk.enqueueReplaceState(e,e.state,null)}function sP(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=DK,GR(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=al(a):(a=Po(e)?cv:Wa.current,i.context=fm(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oP(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vk.enqueueReplaceState(i,i.state,null),C3(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qy(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(bt(309));var n=r.stateNode}if(!n)throw Error(bt(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===DK&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(bt(284));if(!r._owner)throw Error(bt(290,t))}return t}function fS(t,e){throw t=Object.prototype.toString.call(e),Error(bt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R7(t){var e=t._init;return e(t._payload)}function LK(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function r(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=cd(m,y),m.index=0,m.sibling=null,m}function a(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,y,w,b){return y===null||y.tag!==6?(y=aO(w,m.mode,b),y.return=m,y):(y=i(y,w),y.return=m,y)}function l(m,y,w,b){var x=w.type;return x===s0?c(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===_h&&R7(x)===y.type)?(b=i(y,w.props),b.ref=Qy(m,y,w),b.return=m,b):(b=g_(w.type,w.key,w.props,null,m.mode,b),b.ref=Qy(m,y,w),b.return=m,b)}function u(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=oO(w,m.mode,b),y.return=m,y):(y=i(y,w.children||[]),y.return=m,y)}function c(m,y,w,b,x){return y===null||y.tag!==7?(y=Jp(w,m.mode,b,x),y.return=m,y):(y=i(y,w),y.return=m,y)}function f(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=aO(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case eS:return w=g_(y.type,y.key,y.props,null,m.mode,w),w.ref=Qy(m,null,y),w.return=m,w;case o0:return y=oO(y,m.mode,w),y.return=m,y;case _h:var b=y._init;return f(m,b(y._payload),w)}if(A1(y)||Hy(y))return y=Jp(y,m.mode,w,null),y.return=m,y;fS(m,y)}return null}function h(m,y,w,b){var x=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:s(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eS:return w.key===x?l(m,y,w,b):null;case o0:return w.key===x?u(m,y,w,b):null;case _h:return x=w._init,h(m,y,x(w._payload),b)}if(A1(w)||Hy(w))return x!==null?null:c(m,y,w,b,null);fS(m,w)}return null}function d(m,y,w,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,s(y,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eS:return m=m.get(b.key===null?w:b.key)||null,l(y,m,b,x);case o0:return m=m.get(b.key===null?w:b.key)||null,u(y,m,b,x);case _h:var S=b._init;return d(m,y,w,S(b._payload),x)}if(A1(b)||Hy(b))return m=m.get(w)||null,c(y,m,b,x,null);fS(y,b)}return null}function p(m,y,w,b){for(var x=null,S=null,E=y,_=y=0,k=null;E!==null&&_<w.length;_++){E.index>_?(k=E,E=null):k=E.sibling;var C=h(m,E,w[_],b);if(C===null){E===null&&(E=k);break}t&&E&&C.alternate===null&&e(m,E),y=a(C,y,_),S===null?x=C:S.sibling=C,S=C,E=k}if(_===w.length)return r(m,E),Wn&&bp(m,_),x;if(E===null){for(;_<w.length;_++)E=f(m,w[_],b),E!==null&&(y=a(E,y,_),S===null?x=E:S.sibling=E,S=E);return Wn&&bp(m,_),x}for(E=n(m,E);_<w.length;_++)k=d(E,m,_,w[_],b),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?_:k.key),y=a(k,y,_),S===null?x=k:S.sibling=k,S=k);return t&&E.forEach(function(M){return e(m,M)}),Wn&&bp(m,_),x}function v(m,y,w,b){var x=Hy(w);if(typeof x!="function")throw Error(bt(150));if(w=x.call(w),w==null)throw Error(bt(151));for(var S=x=null,E=y,_=y=0,k=null,C=w.next();E!==null&&!C.done;_++,C=w.next()){E.index>_?(k=E,E=null):k=E.sibling;var M=h(m,E,C.value,b);if(M===null){E===null&&(E=k);break}t&&E&&M.alternate===null&&e(m,E),y=a(M,y,_),S===null?x=M:S.sibling=M,S=M,E=k}if(C.done)return r(m,E),Wn&&bp(m,_),x;if(E===null){for(;!C.done;_++,C=w.next())C=f(m,C.value,b),C!==null&&(y=a(C,y,_),S===null?x=C:S.sibling=C,S=C);return Wn&&bp(m,_),x}for(E=n(m,E);!C.done;_++,C=w.next())C=d(E,m,_,C.value,b),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?_:C.key),y=a(C,y,_),S===null?x=C:S.sibling=C,S=C);return t&&E.forEach(function(A){return e(m,A)}),Wn&&bp(m,_),x}function g(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===s0&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case eS:e:{for(var x=w.key,S=y;S!==null;){if(S.key===x){if(x=w.type,x===s0){if(S.tag===7){r(m,S.sibling),y=i(S,w.props.children),y.return=m,m=y;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===_h&&R7(x)===S.type){r(m,S.sibling),y=i(S,w.props),y.ref=Qy(m,S,w),y.return=m,m=y;break e}r(m,S);break}else e(m,S);S=S.sibling}w.type===s0?(y=Jp(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=g_(w.type,w.key,w.props,null,m.mode,b),b.ref=Qy(m,y,w),b.return=m,m=b)}return o(m);case o0:e:{for(S=w.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(m,y.sibling),y=i(y,w.children||[]),y.return=m,m=y;break e}else{r(m,y);break}else e(m,y);y=y.sibling}y=oO(w,m.mode,b),y.return=m,m=y}return o(m);case _h:return S=w._init,g(m,y,S(w._payload),b)}if(A1(w))return p(m,y,w,b);if(Hy(w))return v(m,y,w,b);fS(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(m,y.sibling),y=i(y,w),y.return=m,m=y):(r(m,y),y=aO(w,m.mode,b),y.return=m,m=y),o(m)):r(m,y)}return g}var dm=LK(!0),RK=LK(!1),sb={},lc=$d(sb),j2=$d(sb),G2=$d(sb);function Rp(t){if(t===sb)throw Error(bt(174));return t}function UR(t,e){switch(kn(G2,e),kn(j2,t),kn(lc,sb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$D(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$D(e,t)}Nn(lc),kn(lc,e)}function pm(){Nn(lc),Nn(j2),Nn(G2)}function NK(t){Rp(G2.current);var e=Rp(lc.current),r=$D(e,t.type);e!==r&&(kn(j2,t),kn(lc,r))}function WR(t){j2.current===t&&(Nn(lc),Nn(j2))}var ei=$d(0);function k3(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var JT=[];function VR(){for(var t=0;t<JT.length;t++)JT[t]._workInProgressVersionPrimary=null;JT.length=0}var f_=Df.ReactCurrentDispatcher,eO=Df.ReactCurrentBatchConfig,hv=0,ti=null,ji=null,ra=null,M3=!1,n2=!1,U2=0,a0e=0;function Ia(){throw Error(bt(321))}function HR(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ql(t[r],e[r]))return!1;return!0}function XR(t,e,r,n,i,a){if(hv=a,ti=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,f_.current=t===null||t.memoizedState===null?u0e:c0e,t=r(n,i),n2){a=0;do{if(n2=!1,U2=0,25<=a)throw Error(bt(301));a+=1,ra=ji=null,e.updateQueue=null,f_.current=f0e,t=r(n,i)}while(n2)}if(f_.current=A3,e=ji!==null&&ji.next!==null,hv=0,ra=ji=ti=null,M3=!1,e)throw Error(bt(300));return t}function YR(){var t=U2!==0;return U2=0,t}function Ru(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?ti.memoizedState=ra=t:ra=ra.next=t,ra}function ol(){if(ji===null){var t=ti.alternate;t=t!==null?t.memoizedState:null}else t=ji.next;var e=ra===null?ti.memoizedState:ra.next;if(e!==null)ra=e,ji=t;else{if(t===null)throw Error(bt(310));ji=t,t={memoizedState:ji.memoizedState,baseState:ji.baseState,baseQueue:ji.baseQueue,queue:ji.queue,next:null},ra===null?ti.memoizedState=ra=t:ra=ra.next=t}return ra}function W2(t,e){return typeof e=="function"?e(t):e}function tO(t){var e=ol(),r=e.queue;if(r===null)throw Error(bt(311));r.lastRenderedReducer=t;var n=ji,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((hv&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=n):l=l.next=f,ti.lanes|=c,dv|=c}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=s,ql(n,e.memoizedState)||(To=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,ti.lanes|=a,dv|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function rO(t){var e=ol(),r=e.queue;if(r===null)throw Error(bt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ql(a,e.memoizedState)||(To=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function FK(){}function BK(t,e){var r=ti,n=ol(),i=e(),a=!ql(n.memoizedState,i);if(a&&(n.memoizedState=i,To=!0),n=n.queue,qR(jK.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||ra!==null&&ra.memoizedState.tag&1){if(r.flags|=2048,V2(9,zK.bind(null,r,n,i,e),void 0,null),oa===null)throw Error(bt(349));hv&30||$K(r,e,i)}return i}function $K(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ti.updateQueue,e===null?(e={lastEffect:null,stores:null},ti.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function zK(t,e,r,n){e.value=r,e.getSnapshot=n,GK(e)&&UK(t)}function jK(t,e,r){return r(function(){GK(e)&&UK(t)})}function GK(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ql(t,r)}catch{return!0}}function UK(t){var e=Ef(t,1);e!==null&&Vl(e,t,1,-1)}function N7(t){var e=Ru();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:W2,lastRenderedState:t},e.queue=t,t=t.dispatch=l0e.bind(null,ti,t),[e.memoizedState,t]}function V2(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ti.updateQueue,e===null?(e={lastEffect:null,stores:null},ti.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function WK(){return ol().memoizedState}function h_(t,e,r,n){var i=Ru();ti.flags|=t,i.memoizedState=V2(1|e,r,void 0,n===void 0?null:n)}function Hk(t,e,r,n){var i=ol();n=n===void 0?null:n;var a=void 0;if(ji!==null){var o=ji.memoizedState;if(a=o.destroy,n!==null&&HR(n,o.deps)){i.memoizedState=V2(e,r,a,n);return}}ti.flags|=t,i.memoizedState=V2(1|e,r,a,n)}function F7(t,e){return h_(8390656,8,t,e)}function qR(t,e){return Hk(2048,8,t,e)}function VK(t,e){return Hk(4,2,t,e)}function HK(t,e){return Hk(4,4,t,e)}function XK(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YK(t,e,r){return r=r!=null?r.concat([t]):null,Hk(4,4,XK.bind(null,e,t),r)}function KR(){}function qK(t,e){var r=ol();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function KK(t,e){var r=ol();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HR(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function QK(t,e,r){return hv&21?(ql(r,e)||(r=eK(),ti.lanes|=r,dv|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,To=!0),t.memoizedState=r)}function o0e(t,e){var r=dn;dn=r!==0&&4>r?r:4,t(!0);var n=eO.transition;eO.transition={};try{t(!1),e()}finally{dn=r,eO.transition=n}}function ZK(){return ol().memoizedState}function s0e(t,e,r){var n=ud(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JK(t))eQ(e,r);else if(r=OK(t,e,r,n),r!==null){var i=ao();Vl(r,t,n,i),tQ(r,e,n)}}function l0e(t,e,r){var n=ud(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JK(t))eQ(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,r);if(i.hasEagerState=!0,i.eagerState=s,ql(s,o)){var l=e.interleaved;l===null?(i.next=i,jR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=OK(t,e,i,n),r!==null&&(i=ao(),Vl(r,t,n,i),tQ(r,e,n))}}function JK(t){var e=t.alternate;return t===ti||e!==null&&e===ti}function eQ(t,e){n2=M3=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function tQ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,MR(t,r)}}var A3={readContext:al,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useInsertionEffect:Ia,useLayoutEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useMutableSource:Ia,useSyncExternalStore:Ia,useId:Ia,unstable_isNewReconciler:!1},u0e={readContext:al,useCallback:function(t,e){return Ru().memoizedState=[t,e===void 0?null:e],t},useContext:al,useEffect:F7,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,h_(4194308,4,XK.bind(null,e,t),r)},useLayoutEffect:function(t,e){return h_(4194308,4,t,e)},useInsertionEffect:function(t,e){return h_(4,2,t,e)},useMemo:function(t,e){var r=Ru();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ru();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=s0e.bind(null,ti,t),[n.memoizedState,t]},useRef:function(t){var e=Ru();return t={current:t},e.memoizedState=t},useState:N7,useDebugValue:KR,useDeferredValue:function(t){return Ru().memoizedState=t},useTransition:function(){var t=N7(!1),e=t[0];return t=o0e.bind(null,t[1]),Ru().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ti,i=Ru();if(Wn){if(r===void 0)throw Error(bt(407));r=r()}else{if(r=e(),oa===null)throw Error(bt(349));hv&30||$K(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,F7(jK.bind(null,n,a,t),[t]),n.flags|=2048,V2(9,zK.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Ru(),e=oa.identifierPrefix;if(Wn){var r=hf,n=ff;r=(n&~(1<<32-Wl(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=U2++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=a0e++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c0e={readContext:al,useCallback:qK,useContext:al,useEffect:qR,useImperativeHandle:YK,useInsertionEffect:VK,useLayoutEffect:HK,useMemo:KK,useReducer:tO,useRef:WK,useState:function(){return tO(W2)},useDebugValue:KR,useDeferredValue:function(t){var e=ol();return QK(e,ji.memoizedState,t)},useTransition:function(){var t=tO(W2)[0],e=ol().memoizedState;return[t,e]},useMutableSource:FK,useSyncExternalStore:BK,useId:ZK,unstable_isNewReconciler:!1},f0e={readContext:al,useCallback:qK,useContext:al,useEffect:qR,useImperativeHandle:YK,useInsertionEffect:VK,useLayoutEffect:HK,useMemo:KK,useReducer:rO,useRef:WK,useState:function(){return rO(W2)},useDebugValue:KR,useDeferredValue:function(t){var e=ol();return ji===null?e.memoizedState=t:QK(e,ji.memoizedState,t)},useTransition:function(){var t=rO(W2)[0],e=ol().memoizedState;return[t,e]},useMutableSource:FK,useSyncExternalStore:BK,useId:ZK,unstable_isNewReconciler:!1};function vm(t,e){try{var r="",n=e;do r+=$ve(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function nO(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function lP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var h0e=typeof WeakMap=="function"?WeakMap:Map;function rQ(t,e,r){r=gf(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){O3||(O3=!0,yP=n),lP(t,e)},r}function nQ(t,e,r){r=gf(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){lP(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){lP(t,e),typeof n!="function"&&(ld===null?ld=new Set([this]):ld.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function B7(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new h0e;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=k0e.bind(null,t,e,r),e.then(t,t))}function $7(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z7(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gf(-1,1),e.tag=2,sd(r,e,1))),r.lanes|=1),t)}var d0e=Df.ReactCurrentOwner,To=!1;function Ja(t,e,r,n){e.child=t===null?RK(e,null,r,n):dm(e,t.child,r,n)}function j7(t,e,r,n,i){r=r.render;var a=e.ref;return T0(e,i),n=XR(t,e,r,n,a,i),r=YR(),t!==null&&!To?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_f(t,e,i)):(Wn&&r&&RR(e),e.flags|=1,Ja(t,e,n,i),e.child)}function G7(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!iN(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,iQ(t,e,a,n,i)):(t=g_(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:F2,r(o,n)&&t.ref===e.ref)return _f(t,e,i)}return e.flags|=1,t=cd(a,n),t.ref=e.ref,t.return=e,e.child=t}function iQ(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(F2(a,n)&&t.ref===e.ref)if(To=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(To=!0);else return e.lanes=t.lanes,_f(t,e,i)}return uP(t,e,r,n,i)}function aQ(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(m0,Zo),Zo|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kn(m0,Zo),Zo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,kn(m0,Zo),Zo|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,kn(m0,Zo),Zo|=n;return Ja(t,e,i,r),e.child}function oQ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function uP(t,e,r,n,i){var a=Po(r)?cv:Wa.current;return a=fm(e,a),T0(e,i),r=XR(t,e,r,n,a,i),n=YR(),t!==null&&!To?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_f(t,e,i)):(Wn&&n&&RR(e),e.flags|=1,Ja(t,e,r,i),e.child)}function U7(t,e,r,n,i){if(Po(r)){var a=!0;b3(e)}else a=!1;if(T0(e,i),e.stateNode===null)d_(t,e),PK(e,r,n),sP(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=al(u):(u=Po(r)?cv:Wa.current,u=fm(e,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&L7(e,o,n,u),Ch=!1;var h=e.memoizedState;o.state=h,C3(e,n,o,i),l=e.memoizedState,s!==n||h!==l||Do.current||Ch?(typeof c=="function"&&(oP(e,r,c,n),l=e.memoizedState),(s=Ch||P7(e,r,s,n,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,IK(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Il(e.type,s),o.props=u,f=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=al(l):(l=Po(r)?cv:Wa.current,l=fm(e,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==l)&&L7(e,o,n,l),Ch=!1,h=e.memoizedState,o.state=h,C3(e,n,o,i);var p=e.memoizedState;s!==f||h!==p||Do.current||Ch?(typeof d=="function"&&(oP(e,r,d,n),p=e.memoizedState),(u=Ch||P7(e,r,u,n,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return cP(t,e,r,n,a,i)}function cP(t,e,r,n,i,a){oQ(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&A7(e,r,!1),_f(t,e,a);n=e.stateNode,d0e.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=dm(e,t.child,null,a),e.child=dm(e,null,s,a)):Ja(t,e,s,a),e.memoizedState=n.state,i&&A7(e,r,!0),e.child}function sQ(t){var e=t.stateNode;e.pendingContext?M7(t,e.pendingContext,e.pendingContext!==e.context):e.context&&M7(t,e.context,!1),UR(t,e.containerInfo)}function W7(t,e,r,n,i){return hm(),FR(i),e.flags|=256,Ja(t,e,r,n),e.child}var fP={dehydrated:null,treeContext:null,retryLane:0};function hP(t){return{baseLanes:t,cachePool:null,transitions:null}}function lQ(t,e,r){var n=e.pendingProps,i=ei.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),kn(ei,i&1),t===null)return iP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=qk(o,n,0,null),t=Jp(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=hP(r),e.memoizedState=fP,t):QR(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return p0e(t,e,o,n,s,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=cd(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=cd(s,a):(a=Jp(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?hP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=fP,n}return a=t.child,t=a.sibling,n=cd(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function QR(t,e){return e=qk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hS(t,e,r,n){return n!==null&&FR(n),dm(e,t.child,null,r),t=QR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function p0e(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=nO(Error(bt(422))),hS(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=qk({mode:"visible",children:n.children},i,0,null),a=Jp(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&dm(e,t.child,null,o),e.child.memoizedState=hP(o),e.memoizedState=fP,a);if(!(e.mode&1))return hS(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(bt(419)),n=nO(a,n,void 0),hS(t,e,o,n)}if(s=(o&t.childLanes)!==0,To||s){if(n=oa,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ef(t,i),Vl(n,t,i,-1))}return nN(),n=nO(Error(bt(421))),hS(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=M0e.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ls=od(i.nextSibling),vs=e,Wn=!0,Nl=null,t!==null&&(Ys[qs++]=ff,Ys[qs++]=hf,Ys[qs++]=fv,ff=t.id,hf=t.overflow,fv=e),e=QR(e,n.children),e.flags|=4096,e)}function V7(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),aP(t.return,e,r)}function iO(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function uQ(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ja(t,e,n.children,r),n=ei.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V7(t,r,e);else if(t.tag===19)V7(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(kn(ei,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&k3(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),iO(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&k3(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}iO(e,!0,r,null,a);break;case"together":iO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function d_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _f(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),dv|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(bt(153));if(e.child!==null){for(t=e.child,r=cd(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=cd(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function v0e(t,e,r){switch(e.tag){case 3:sQ(e),hm();break;case 5:NK(e);break;case 1:Po(e.type)&&b3(e);break;case 4:UR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kn(E3,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kn(ei,ei.current&1),e.flags|=128,null):r&e.child.childLanes?lQ(t,e,r):(kn(ei,ei.current&1),t=_f(t,e,r),t!==null?t.sibling:null);kn(ei,ei.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return uQ(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kn(ei,ei.current),n)break;return null;case 22:case 23:return e.lanes=0,aQ(t,e,r)}return _f(t,e,r)}var cQ,dP,fQ,hQ;cQ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dP=function(){};fQ=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Rp(lc.current);var a=null;switch(r){case"input":i=RD(t,i),n=RD(t,n),a=[];break;case"select":i=ri({},i,{value:void 0}),n=ri({},n,{value:void 0}),a=[];break;case"textarea":i=BD(t,i),n=BD(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=y3)}zD(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(O2.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(O2.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&An("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};hQ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Zy(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Da(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function g0e(t,e,r){var n=e.pendingProps;switch(NR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Da(e),null;case 1:return Po(e.type)&&w3(),Da(e),null;case 3:return n=e.stateNode,pm(),Nn(Do),Nn(Wa),VR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nl!==null&&(xP(Nl),Nl=null))),dP(t,e),Da(e),null;case 5:WR(e);var i=Rp(G2.current);if(r=e.type,t!==null&&e.stateNode!=null)fQ(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(bt(166));return Da(e),null}if(t=Rp(lc.current),cS(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Vu]=e,n[z2]=a,t=(e.mode&1)!==0,r){case"dialog":An("cancel",n),An("close",n);break;case"iframe":case"object":case"embed":An("load",n);break;case"video":case"audio":for(i=0;i<O1.length;i++)An(O1[i],n);break;case"source":An("error",n);break;case"img":case"image":case"link":An("error",n),An("load",n);break;case"details":An("toggle",n);break;case"input":e7(n,a),An("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},An("invalid",n);break;case"textarea":r7(n,a),An("invalid",n)}zD(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&uS(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&uS(n.textContent,s,t),i=["children",""+s]):O2.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&An("scroll",n)}switch(r){case"input":tS(n),t7(n,a,!0);break;case"textarea":tS(n),n7(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=y3)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$q(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Vu]=e,t[z2]=n,cQ(t,e,!1,!1),e.stateNode=t;e:{switch(o=jD(r,n),r){case"dialog":An("cancel",t),An("close",t),i=n;break;case"iframe":case"object":case"embed":An("load",t),i=n;break;case"video":case"audio":for(i=0;i<O1.length;i++)An(O1[i],t);i=n;break;case"source":An("error",t),i=n;break;case"img":case"image":case"link":An("error",t),An("load",t),i=n;break;case"details":An("toggle",t),i=n;break;case"input":e7(t,n),i=RD(t,n),An("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ri({},n,{value:void 0}),An("invalid",t);break;case"textarea":r7(t,n),i=BD(t,n),An("invalid",t);break;default:i=n}zD(r,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Gq(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zq(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&I2(t,l):typeof l=="number"&&I2(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(O2.hasOwnProperty(a)?l!=null&&a==="onScroll"&&An("scroll",t):l!=null&&xR(t,a,l,o))}switch(r){case"input":tS(t),t7(t,n,!1);break;case"textarea":tS(t),n7(t);break;case"option":n.value!=null&&t.setAttribute("value",""+md(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?C0(t,!!n.multiple,a,!1):n.defaultValue!=null&&C0(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=y3)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Da(e),null;case 6:if(t&&e.stateNode!=null)hQ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(bt(166));if(r=Rp(G2.current),Rp(lc.current),cS(e)){if(n=e.stateNode,r=e.memoizedProps,n[Vu]=e,(a=n.nodeValue!==r)&&(t=vs,t!==null))switch(t.tag){case 3:uS(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uS(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Vu]=e,e.stateNode=n}return Da(e),null;case 13:if(Nn(ei),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wn&&ls!==null&&e.mode&1&&!(e.flags&128))TK(),hm(),e.flags|=98560,a=!1;else if(a=cS(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(bt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(bt(317));a[Vu]=e}else hm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Da(e),a=!1}else Nl!==null&&(xP(Nl),Nl=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ei.current&1?Wi===0&&(Wi=3):nN())),e.updateQueue!==null&&(e.flags|=4),Da(e),null);case 4:return pm(),dP(t,e),t===null&&B2(e.stateNode.containerInfo),Da(e),null;case 10:return zR(e.type._context),Da(e),null;case 17:return Po(e.type)&&w3(),Da(e),null;case 19:if(Nn(ei),a=e.memoizedState,a===null)return Da(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Zy(a,!1);else{if(Wi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=k3(t),o!==null){for(e.flags|=128,Zy(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kn(ei,ei.current&1|2),e.child}t=t.sibling}a.tail!==null&&bi()>gm&&(e.flags|=128,n=!0,Zy(a,!1),e.lanes=4194304)}else{if(!n)if(t=k3(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Zy(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Wn)return Da(e),null}else 2*bi()-a.renderingStartTime>gm&&r!==1073741824&&(e.flags|=128,n=!0,Zy(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bi(),e.sibling=null,r=ei.current,kn(ei,n?r&1|2:r&1),e):(Da(e),null);case 22:case 23:return rN(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Zo&1073741824&&(Da(e),e.subtreeFlags&6&&(e.flags|=8192)):Da(e),null;case 24:return null;case 25:return null}throw Error(bt(156,e.tag))}function m0e(t,e){switch(NR(e),e.tag){case 1:return Po(e.type)&&w3(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pm(),Nn(Do),Nn(Wa),VR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WR(e),null;case 13:if(Nn(ei),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(bt(340));hm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nn(ei),null;case 4:return pm(),null;case 10:return zR(e.type._context),null;case 22:case 23:return rN(),null;case 24:return null;default:return null}}var dS=!1,$a=!1,y0e=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function g0(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fi(t,e,n)}else r.current=null}function pP(t,e,r){try{r()}catch(n){fi(t,e,n)}}var H7=!1;function w0e(t,e){if(QD=v3,t=gK(),LR(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==r||i!==0&&f.nodeType!==3||(s=o+i),f!==a||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===r&&++u===i&&(s=o),h===a&&++c===n&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ZD={focusedElem:t,selectionRange:r},v3=!1,Yt=e;Yt!==null;)if(e=Yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Yt=t;else for(;Yt!==null;){e=Yt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,g=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Il(e.type,v),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(b){fi(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Yt=t;break}Yt=e.return}return p=H7,H7=!1,p}function i2(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&pP(e,r,a)}i=i.next}while(i!==n)}}function Xk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function vP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function dQ(t){var e=t.alternate;e!==null&&(t.alternate=null,dQ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vu],delete e[z2],delete e[tP],delete e[t0e],delete e[r0e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pQ(t){return t.tag===5||t.tag===3||t.tag===4}function X7(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pQ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=y3));else if(n!==4&&(t=t.child,t!==null))for(gP(t,e,r),t=t.sibling;t!==null;)gP(t,e,r),t=t.sibling}function mP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(mP(t,e,r),t=t.sibling;t!==null;)mP(t,e,r),t=t.sibling}var da=null,Ll=!1;function fh(t,e,r){for(r=r.child;r!==null;)vQ(t,e,r),r=r.sibling}function vQ(t,e,r){if(sc&&typeof sc.onCommitFiberUnmount=="function")try{sc.onCommitFiberUnmount($k,r)}catch{}switch(r.tag){case 5:$a||g0(r,e);case 6:var n=da,i=Ll;da=null,fh(t,e,r),da=n,Ll=i,da!==null&&(Ll?(t=da,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):da.removeChild(r.stateNode));break;case 18:da!==null&&(Ll?(t=da,r=r.stateNode,t.nodeType===8?QT(t.parentNode,r):t.nodeType===1&&QT(t,r),R2(t)):QT(da,r.stateNode));break;case 4:n=da,i=Ll,da=r.stateNode.containerInfo,Ll=!0,fh(t,e,r),da=n,Ll=i;break;case 0:case 11:case 14:case 15:if(!$a&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&pP(r,e,o),i=i.next}while(i!==n)}fh(t,e,r);break;case 1:if(!$a&&(g0(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){fi(r,e,s)}fh(t,e,r);break;case 21:fh(t,e,r);break;case 22:r.mode&1?($a=(n=$a)||r.memoizedState!==null,fh(t,e,r),$a=n):fh(t,e,r);break;default:fh(t,e,r)}}function Y7(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new y0e),e.forEach(function(n){var i=A0e.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Cl(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:da=s.stateNode,Ll=!1;break e;case 3:da=s.stateNode.containerInfo,Ll=!0;break e;case 4:da=s.stateNode.containerInfo,Ll=!0;break e}s=s.return}if(da===null)throw Error(bt(160));vQ(a,o,i),da=null,Ll=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){fi(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gQ(e,t),e=e.sibling}function gQ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cl(e,t),Eu(t),n&4){try{i2(3,t,t.return),Xk(3,t)}catch(v){fi(t,t.return,v)}try{i2(5,t,t.return)}catch(v){fi(t,t.return,v)}}break;case 1:Cl(e,t),Eu(t),n&512&&r!==null&&g0(r,r.return);break;case 5:if(Cl(e,t),Eu(t),n&512&&r!==null&&g0(r,r.return),t.flags&32){var i=t.stateNode;try{I2(i,"")}catch(v){fi(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Fq(i,a),jD(s,o);var u=jD(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?Gq(i,f):c==="dangerouslySetInnerHTML"?zq(i,f):c==="children"?I2(i,f):xR(i,c,f,u)}switch(s){case"input":ND(i,a);break;case"textarea":Bq(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?C0(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?C0(i,!!a.multiple,a.defaultValue,!0):C0(i,!!a.multiple,a.multiple?[]:"",!1))}i[z2]=a}catch(v){fi(t,t.return,v)}}break;case 6:if(Cl(e,t),Eu(t),n&4){if(t.stateNode===null)throw Error(bt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){fi(t,t.return,v)}}break;case 3:if(Cl(e,t),Eu(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{R2(e.containerInfo)}catch(v){fi(t,t.return,v)}break;case 4:Cl(e,t),Eu(t);break;case 13:Cl(e,t),Eu(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(eN=bi())),n&4&&Y7(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?($a=(u=$a)||c,Cl(e,t),$a=u):Cl(e,t),Eu(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Yt=t,c=t.child;c!==null;){for(f=Yt=c;Yt!==null;){switch(h=Yt,d=h.child,h.tag){case 0:case 11:case 14:case 15:i2(4,h,h.return);break;case 1:g0(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){fi(n,r,v)}}break;case 5:g0(h,h.return);break;case 22:if(h.memoizedState!==null){K7(f);continue}}d!==null?(d.return=h,Yt=d):K7(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=jq("display",o))}catch(v){fi(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){fi(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cl(e,t),Eu(t),n&4&&Y7(t);break;case 21:break;default:Cl(e,t),Eu(t)}}function Eu(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(pQ(r)){var n=r;break e}r=r.return}throw Error(bt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(I2(i,""),n.flags&=-33);var a=X7(t);mP(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=X7(t);gP(t,s,o);break;default:throw Error(bt(161))}}catch(l){fi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b0e(t,e,r){Yt=t,mQ(t)}function mQ(t,e,r){for(var n=(t.mode&1)!==0;Yt!==null;){var i=Yt,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||dS;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||$a;s=dS;var u=$a;if(dS=o,($a=l)&&!u)for(Yt=i;Yt!==null;)o=Yt,l=o.child,o.tag===22&&o.memoizedState!==null?Q7(i):l!==null?(l.return=o,Yt=l):Q7(i);for(;a!==null;)Yt=a,mQ(a),a=a.sibling;Yt=i,dS=s,$a=u}q7(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Yt=a):q7(t)}}function q7(t){for(;Yt!==null;){var e=Yt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$a||Xk(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$a)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Il(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&D7(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}D7(e,o,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&R2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}$a||e.flags&512&&vP(e)}catch(h){fi(e,e.return,h)}}if(e===t){Yt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Yt=r;break}Yt=e.return}}function K7(t){for(;Yt!==null;){var e=Yt;if(e===t){Yt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Yt=r;break}Yt=e.return}}function Q7(t){for(;Yt!==null;){var e=Yt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Xk(4,e)}catch(l){fi(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){fi(e,i,l)}}var a=e.return;try{vP(e)}catch(l){fi(e,a,l)}break;case 5:var o=e.return;try{vP(e)}catch(l){fi(e,o,l)}}}catch(l){fi(e,e.return,l)}if(e===t){Yt=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Yt=s;break}Yt=e.return}}var x0e=Math.ceil,T3=Df.ReactCurrentDispatcher,ZR=Df.ReactCurrentOwner,el=Df.ReactCurrentBatchConfig,rn=0,oa=null,Mi=null,xa=0,Zo=0,m0=$d(0),Wi=0,H2=null,dv=0,Yk=0,JR=0,a2=null,Co=null,eN=0,gm=1/0,rf=null,O3=!1,yP=null,ld=null,pS=!1,Vh=null,I3=0,o2=0,wP=null,p_=-1,v_=0;function ao(){return rn&6?bi():p_!==-1?p_:p_=bi()}function ud(t){return t.mode&1?rn&2&&xa!==0?xa&-xa:i0e.transition!==null?(v_===0&&(v_=eK()),v_):(t=dn,t!==0||(t=window.event,t=t===void 0?16:sK(t.type)),t):1}function Vl(t,e,r,n){if(50<o2)throw o2=0,wP=null,Error(bt(185));ib(t,r,n),(!(rn&2)||t!==oa)&&(t===oa&&(!(rn&2)&&(Yk|=r),Wi===4&&Ph(t,xa)),Lo(t,n),r===1&&rn===0&&!(e.mode&1)&&(gm=bi()+500,Wk&&zd()))}function Lo(t,e){var r=t.callbackNode;ige(t,e);var n=p3(t,t===oa?xa:0);if(n===0)r!==null&&o7(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&o7(r),e===1)t.tag===0?n0e(Z7.bind(null,t)):kK(Z7.bind(null,t)),Jge(function(){!(rn&6)&&zd()}),r=null;else{switch(tK(n)){case 1:r=kR;break;case 4:r=Zq;break;case 16:r=d3;break;case 536870912:r=Jq;break;default:r=d3}r=CQ(r,yQ.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function yQ(t,e){if(p_=-1,v_=0,rn&6)throw Error(bt(327));var r=t.callbackNode;if(O0()&&t.callbackNode!==r)return null;var n=p3(t,t===oa?xa:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=D3(t,n);else{e=n;var i=rn;rn|=2;var a=bQ();(oa!==t||xa!==e)&&(rf=null,gm=bi()+500,Zp(t,e));do try{_0e();break}catch(s){wQ(t,s)}while(!0);$R(),T3.current=a,rn=i,Mi!==null?e=0:(oa=null,xa=0,e=Wi)}if(e!==0){if(e===2&&(i=HD(t),i!==0&&(n=i,e=bP(t,i))),e===1)throw r=H2,Zp(t,0),Ph(t,n),Lo(t,bi()),r;if(e===6)Ph(t,n);else{if(i=t.current.alternate,!(n&30)&&!S0e(i)&&(e=D3(t,n),e===2&&(a=HD(t),a!==0&&(n=a,e=bP(t,a))),e===1))throw r=H2,Zp(t,0),Ph(t,n),Lo(t,bi()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(bt(345));case 2:xp(t,Co,rf);break;case 3:if(Ph(t,n),(n&130023424)===n&&(e=eN+500-bi(),10<e)){if(p3(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ao(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=eP(xp.bind(null,t,Co,rf),e);break}xp(t,Co,rf);break;case 4:if(Ph(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Wl(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=bi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*x0e(n/1960))-n,10<n){t.timeoutHandle=eP(xp.bind(null,t,Co,rf),n);break}xp(t,Co,rf);break;case 5:xp(t,Co,rf);break;default:throw Error(bt(329))}}}return Lo(t,bi()),t.callbackNode===r?yQ.bind(null,t):null}function bP(t,e){var r=a2;return t.current.memoizedState.isDehydrated&&(Zp(t,e).flags|=256),t=D3(t,e),t!==2&&(e=Co,Co=r,e!==null&&xP(e)),t}function xP(t){Co===null?Co=t:Co.push.apply(Co,t)}function S0e(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!ql(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ph(t,e){for(e&=~JR,e&=~Yk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Wl(e),n=1<<r;t[r]=-1,e&=~n}}function Z7(t){if(rn&6)throw Error(bt(327));O0();var e=p3(t,0);if(!(e&1))return Lo(t,bi()),null;var r=D3(t,e);if(t.tag!==0&&r===2){var n=HD(t);n!==0&&(e=n,r=bP(t,n))}if(r===1)throw r=H2,Zp(t,0),Ph(t,e),Lo(t,bi()),r;if(r===6)throw Error(bt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xp(t,Co,rf),Lo(t,bi()),null}function tN(t,e){var r=rn;rn|=1;try{return t(e)}finally{rn=r,rn===0&&(gm=bi()+500,Wk&&zd())}}function pv(t){Vh!==null&&Vh.tag===0&&!(rn&6)&&O0();var e=rn;rn|=1;var r=el.transition,n=dn;try{if(el.transition=null,dn=1,t)return t()}finally{dn=n,el.transition=r,rn=e,!(rn&6)&&zd()}}function rN(){Zo=m0.current,Nn(m0)}function Zp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Zge(r)),Mi!==null)for(r=Mi.return;r!==null;){var n=r;switch(NR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&w3();break;case 3:pm(),Nn(Do),Nn(Wa),VR();break;case 5:WR(n);break;case 4:pm();break;case 13:Nn(ei);break;case 19:Nn(ei);break;case 10:zR(n.type._context);break;case 22:case 23:rN()}r=r.return}if(oa=t,Mi=t=cd(t.current,null),xa=Zo=e,Wi=0,H2=null,JR=Yk=dv=0,Co=a2=null,Lp!==null){for(e=0;e<Lp.length;e++)if(r=Lp[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Lp=null}return t}function wQ(t,e){do{var r=Mi;try{if($R(),f_.current=A3,M3){for(var n=ti.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}M3=!1}if(hv=0,ra=ji=ti=null,n2=!1,U2=0,ZR.current=null,r===null||r.return===null){Wi=1,H2=e,Mi=null;break}e:{var a=t,o=r.return,s=r,l=e;if(e=xa,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=$7(o);if(d!==null){d.flags&=-257,z7(d,o,s,a,e),d.mode&1&&B7(a,u,e),e=d,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){B7(a,u,e),nN();break e}l=Error(bt(426))}}else if(Wn&&s.mode&1){var g=$7(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),z7(g,o,s,a,e),FR(vm(l,s));break e}}a=l=vm(l,s),Wi!==4&&(Wi=2),a2===null?a2=[a]:a2.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=rQ(a,l,e);I7(a,m);break e;case 1:s=l;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ld===null||!ld.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=nQ(a,s,e);I7(a,b);break e}}a=a.return}while(a!==null)}SQ(r)}catch(x){e=x,Mi===r&&r!==null&&(Mi=r=r.return);continue}break}while(!0)}function bQ(){var t=T3.current;return T3.current=A3,t===null?A3:t}function nN(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),oa===null||!(dv&268435455)&&!(Yk&268435455)||Ph(oa,xa)}function D3(t,e){var r=rn;rn|=2;var n=bQ();(oa!==t||xa!==e)&&(rf=null,Zp(t,e));do try{E0e();break}catch(i){wQ(t,i)}while(!0);if($R(),rn=r,T3.current=n,Mi!==null)throw Error(bt(261));return oa=null,xa=0,Wi}function E0e(){for(;Mi!==null;)xQ(Mi)}function _0e(){for(;Mi!==null&&!qve();)xQ(Mi)}function xQ(t){var e=_Q(t.alternate,t,Zo);t.memoizedProps=t.pendingProps,e===null?SQ(t):Mi=e,ZR.current=null}function SQ(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=m0e(r,e),r!==null){r.flags&=32767,Mi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wi=6,Mi=null;return}}else if(r=g0e(r,e,Zo),r!==null){Mi=r;return}if(e=e.sibling,e!==null){Mi=e;return}Mi=e=t}while(e!==null);Wi===0&&(Wi=5)}function xp(t,e,r){var n=dn,i=el.transition;try{el.transition=null,dn=1,C0e(t,e,r,n)}finally{el.transition=i,dn=n}return null}function C0e(t,e,r,n){do O0();while(Vh!==null);if(rn&6)throw Error(bt(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(bt(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(age(t,a),t===oa&&(Mi=oa=null,xa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pS||(pS=!0,CQ(d3,function(){return O0(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=el.transition,el.transition=null;var o=dn;dn=1;var s=rn;rn|=4,ZR.current=null,w0e(t,r),gQ(r,t),Vge(ZD),v3=!!QD,ZD=QD=null,t.current=r,b0e(r),Kve(),rn=s,dn=o,el.transition=a}else t.current=r;if(pS&&(pS=!1,Vh=t,I3=i),a=t.pendingLanes,a===0&&(ld=null),Jve(r.stateNode),Lo(t,bi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(O3)throw O3=!1,t=yP,yP=null,t;return I3&1&&t.tag!==0&&O0(),a=t.pendingLanes,a&1?t===wP?o2++:(o2=0,wP=t):o2=0,zd(),null}function O0(){if(Vh!==null){var t=tK(I3),e=el.transition,r=dn;try{if(el.transition=null,dn=16>t?16:t,Vh===null)var n=!1;else{if(t=Vh,Vh=null,I3=0,rn&6)throw Error(bt(331));var i=rn;for(rn|=4,Yt=t.current;Yt!==null;){var a=Yt,o=a.child;if(Yt.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Yt=u;Yt!==null;){var c=Yt;switch(c.tag){case 0:case 11:case 15:i2(8,c,a)}var f=c.child;if(f!==null)f.return=c,Yt=f;else for(;Yt!==null;){c=Yt;var h=c.sibling,d=c.return;if(dQ(c),c===u){Yt=null;break}if(h!==null){h.return=d,Yt=h;break}Yt=d}}}var p=a.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Yt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Yt=o;else e:for(;Yt!==null;){if(a=Yt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:i2(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,Yt=m;break e}Yt=a.return}}var y=t.current;for(Yt=y;Yt!==null;){o=Yt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Yt=w;else e:for(o=y;Yt!==null;){if(s=Yt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Xk(9,s)}}catch(x){fi(s,s.return,x)}if(s===o){Yt=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,Yt=b;break e}Yt=s.return}}if(rn=i,zd(),sc&&typeof sc.onPostCommitFiberRoot=="function")try{sc.onPostCommitFiberRoot($k,t)}catch{}n=!0}return n}finally{dn=r,el.transition=e}}return!1}function J7(t,e,r){e=vm(r,e),e=rQ(t,e,1),t=sd(t,e,1),e=ao(),t!==null&&(ib(t,1,e),Lo(t,e))}function fi(t,e,r){if(t.tag===3)J7(t,t,r);else for(;e!==null;){if(e.tag===3){J7(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ld===null||!ld.has(n))){t=vm(r,t),t=nQ(e,t,1),e=sd(e,t,1),t=ao(),e!==null&&(ib(e,1,t),Lo(e,t));break}}e=e.return}}function k0e(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ao(),t.pingedLanes|=t.suspendedLanes&r,oa===t&&(xa&r)===r&&(Wi===4||Wi===3&&(xa&130023424)===xa&&500>bi()-eN?Zp(t,0):JR|=r),Lo(t,e)}function EQ(t,e){e===0&&(t.mode&1?(e=iS,iS<<=1,!(iS&130023424)&&(iS=4194304)):e=1);var r=ao();t=Ef(t,e),t!==null&&(ib(t,e,r),Lo(t,r))}function M0e(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),EQ(t,r)}function A0e(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(bt(314))}n!==null&&n.delete(e),EQ(t,r)}var _Q;_Q=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Do.current)To=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return To=!1,v0e(t,e,r);To=!!(t.flags&131072)}else To=!1,Wn&&e.flags&1048576&&MK(e,S3,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;d_(t,e),t=e.pendingProps;var i=fm(e,Wa.current);T0(e,r),i=XR(null,e,n,t,i,r);var a=YR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Po(n)?(a=!0,b3(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,GR(e),i.updater=Vk,e.stateNode=i,i._reactInternals=e,sP(e,n,t,r),e=cP(null,e,n,!0,a,r)):(e.tag=0,Wn&&a&&RR(e),Ja(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(d_(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=O0e(n),t=Il(n,t),i){case 0:e=uP(null,e,n,t,r);break e;case 1:e=U7(null,e,n,t,r);break e;case 11:e=j7(null,e,n,t,r);break e;case 14:e=G7(null,e,n,Il(n.type,t),r);break e}throw Error(bt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Il(n,i),uP(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Il(n,i),U7(t,e,n,i,r);case 3:e:{if(sQ(e),t===null)throw Error(bt(387));n=e.pendingProps,a=e.memoizedState,i=a.element,IK(t,e),C3(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=vm(Error(bt(423)),e),e=W7(t,e,n,r,i);break e}else if(n!==i){i=vm(Error(bt(424)),e),e=W7(t,e,n,r,i);break e}else for(ls=od(e.stateNode.containerInfo.firstChild),vs=e,Wn=!0,Nl=null,r=RK(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hm(),n===i){e=_f(t,e,r);break e}Ja(t,e,n,r)}e=e.child}return e;case 5:return NK(e),t===null&&iP(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,JD(n,i)?o=null:a!==null&&JD(n,a)&&(e.flags|=32),oQ(t,e),Ja(t,e,o,r),e.child;case 6:return t===null&&iP(e),null;case 13:return lQ(t,e,r);case 4:return UR(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=dm(e,null,n,r):Ja(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Il(n,i),j7(t,e,n,i,r);case 7:return Ja(t,e,e.pendingProps,r),e.child;case 8:return Ja(t,e,e.pendingProps.children,r),e.child;case 12:return Ja(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,kn(E3,n._currentValue),n._currentValue=o,a!==null)if(ql(a.value,o)){if(a.children===i.children&&!Do.current){e=_f(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=gf(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),aP(a.return,r,e),s.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(bt(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),aP(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ja(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,T0(e,r),i=al(i),n=n(i),e.flags|=1,Ja(t,e,n,r),e.child;case 14:return n=e.type,i=Il(n,e.pendingProps),i=Il(n.type,i),G7(t,e,n,i,r);case 15:return iQ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Il(n,i),d_(t,e),e.tag=1,Po(n)?(t=!0,b3(e)):t=!1,T0(e,r),PK(e,n,i),sP(e,n,i,r),cP(null,e,n,!0,t,r);case 19:return uQ(t,e,r);case 22:return aQ(t,e,r)}throw Error(bt(156,e.tag))};function CQ(t,e){return Qq(t,e)}function T0e(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(t,e,r,n){return new T0e(t,e,r,n)}function iN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function O0e(t){if(typeof t=="function")return iN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ER)return 11;if(t===_R)return 14}return 2}function cd(t,e){var r=t.alternate;return r===null?(r=Zs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function g_(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")iN(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case s0:return Jp(r.children,i,a,e);case SR:o=8,i|=8;break;case ID:return t=Zs(12,r,e,i|2),t.elementType=ID,t.lanes=a,t;case DD:return t=Zs(13,r,e,i),t.elementType=DD,t.lanes=a,t;case PD:return t=Zs(19,r,e,i),t.elementType=PD,t.lanes=a,t;case Lq:return qk(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dq:o=10;break e;case Pq:o=9;break e;case ER:o=11;break e;case _R:o=14;break e;case _h:o=16,n=null;break e}throw Error(bt(130,t==null?t:typeof t,""))}return e=Zs(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Jp(t,e,r,n){return t=Zs(7,t,n,e),t.lanes=r,t}function qk(t,e,r,n){return t=Zs(22,t,n,e),t.elementType=Lq,t.lanes=r,t.stateNode={isHidden:!1},t}function aO(t,e,r){return t=Zs(6,t,null,e),t.lanes=r,t}function oO(t,e,r){return e=Zs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I0e(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zT(0),this.expirationTimes=zT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zT(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function aN(t,e,r,n,i,a,o,s,l){return t=new I0e(t,e,r,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Zs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},GR(a),t}function D0e(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o0,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function kQ(t){if(!t)return yd;t=t._reactInternals;e:{if(Nv(t)!==t||t.tag!==1)throw Error(bt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Po(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(bt(171))}if(t.tag===1){var r=t.type;if(Po(r))return CK(t,r,e)}return e}function MQ(t,e,r,n,i,a,o,s,l){return t=aN(r,n,!0,t,i,a,o,s,l),t.context=kQ(null),r=t.current,n=ao(),i=ud(r),a=gf(n,i),a.callback=e??null,sd(r,a,i),t.current.lanes=i,ib(t,i,n),Lo(t,n),t}function Kk(t,e,r,n){var i=e.current,a=ao(),o=ud(i);return r=kQ(r),e.context===null?e.context=r:e.pendingContext=r,e=gf(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=sd(i,e,o),t!==null&&(Vl(t,i,o,a),c_(t,i,o)),o}function P3(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function oN(t,e){e$(t,e),(t=t.alternate)&&e$(t,e)}function P0e(){return null}var AQ=typeof reportError=="function"?reportError:function(t){console.error(t)};function sN(t){this._internalRoot=t}Qk.prototype.render=sN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(bt(409));Kk(t,e,null,null)};Qk.prototype.unmount=sN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pv(function(){Kk(null,t,null,null)}),e[Sf]=null}};function Qk(t){this._internalRoot=t}Qk.prototype.unstable_scheduleHydration=function(t){if(t){var e=iK();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Dh.length&&e!==0&&e<Dh[r].priority;r++);Dh.splice(r,0,t),r===0&&oK(t)}};function lN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t$(){}function L0e(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=P3(o);a.call(u)}}var o=MQ(e,n,t,0,null,!1,!1,"",t$);return t._reactRootContainer=o,t[Sf]=o.current,B2(t.nodeType===8?t.parentNode:t),pv(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=P3(l);s.call(u)}}var l=aN(t,0,!1,null,null,!1,!1,"",t$);return t._reactRootContainer=l,t[Sf]=l.current,B2(t.nodeType===8?t.parentNode:t),pv(function(){Kk(e,l,r,n)}),l}function Jk(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=P3(o);s.call(l)}}Kk(e,o,t,i)}else o=L0e(r,e,t,i,n);return P3(o)}rK=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=T1(e.pendingLanes);r!==0&&(MR(e,r|1),Lo(e,bi()),!(rn&6)&&(gm=bi()+500,zd()))}break;case 13:pv(function(){var n=Ef(t,1);if(n!==null){var i=ao();Vl(n,t,1,i)}}),oN(t,1)}};AR=function(t){if(t.tag===13){var e=Ef(t,134217728);if(e!==null){var r=ao();Vl(e,t,134217728,r)}oN(t,134217728)}};nK=function(t){if(t.tag===13){var e=ud(t),r=Ef(t,e);if(r!==null){var n=ao();Vl(r,t,e,n)}oN(t,e)}};iK=function(){return dn};aK=function(t,e){var r=dn;try{return dn=t,e()}finally{dn=r}};UD=function(t,e,r){switch(e){case"input":if(ND(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Uk(n);if(!i)throw Error(bt(90));Nq(n),ND(n,i)}}}break;case"textarea":Bq(t,r);break;case"select":e=r.value,e!=null&&C0(t,!!r.multiple,e,!1)}};Vq=tN;Hq=pv;var R0e={usingClientEntryPoint:!1,Events:[ob,f0,Uk,Uq,Wq,tN]},Jy={findFiberByHostInstance:Pp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},N0e={bundleType:Jy.bundleType,version:Jy.version,rendererPackageName:Jy.rendererPackageName,rendererConfig:Jy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Df.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qq(t),t===null?null:t.stateNode},findFiberByHostInstance:Jy.findFiberByHostInstance||P0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vS.isDisabled&&vS.supportsFiber)try{$k=vS.inject(N0e),sc=vS}catch{}}Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R0e;Cs.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lN(e))throw Error(bt(200));return D0e(t,e,null,r)};Cs.createRoot=function(t,e){if(!lN(t))throw Error(bt(299));var r=!1,n="",i=AQ;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=aN(t,1,!1,null,null,r,!1,n,i),t[Sf]=e.current,B2(t.nodeType===8?t.parentNode:t),new sN(e)};Cs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(bt(188)):(t=Object.keys(t).join(","),Error(bt(268,t)));return t=qq(e),t=t===null?null:t.stateNode,t};Cs.flushSync=function(t){return pv(t)};Cs.hydrate=function(t,e,r){if(!Zk(e))throw Error(bt(200));return Jk(null,t,e,!0,r)};Cs.hydrateRoot=function(t,e,r){if(!lN(t))throw Error(bt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=AQ;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=MQ(e,null,t,1,r??null,i,!1,a,o),t[Sf]=e.current,B2(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Qk(e)};Cs.render=function(t,e,r){if(!Zk(e))throw Error(bt(200));return Jk(null,t,e,!1,r)};Cs.unmountComponentAtNode=function(t){if(!Zk(t))throw Error(bt(40));return t._reactRootContainer?(pv(function(){Jk(null,null,t,!1,function(){t._reactRootContainer=null,t[Sf]=null})}),!0):!1};Cs.unstable_batchedUpdates=tN;Cs.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zk(r))throw Error(bt(200));if(t==null||t._reactInternals===void 0)throw Error(bt(38));return Jk(t,e,r,!1,n)};Cs.version="18.2.0-next-9e3b772b8-20220608";function TQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TQ)}catch(t){console.error(t)}}TQ(),Mq.exports=Cs;var OQ=Mq.exports,r$=OQ;TD.createRoot=r$.createRoot,TD.hydrateRoot=r$.hydrateRoot;function SP(){return SP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SP.apply(this,arguments)}function F0e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}let hn=class IQ{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){[e,r]=mm(this,e,r);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(r,this.length,i,1),Hu.from(i,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){[e,r]=mm(this,e,r);let n=[];return this.decompose(e,r,n,0),Hu.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new s2(this),a=new s2(e);for(let o=r,s=r;;){if(i.next(o),a.next(o),o=0,i.lineBreak!=a.lineBreak||i.done!=a.done||i.value!=a.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(e=1){return new s2(this,e)}iterRange(e,r=this.length){return new DQ(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new PQ(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?IQ.empty:e.length<=32?new wi(e):Hu.from(wi.split(e,[]))}};class wi extends hn{constructor(e,r=B0e(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,i){for(let a=0;;a++){let o=this.text[a],s=i+o.length;if((r?n:s)>=e)return new $0e(i,s,n,o);i=s+1,n++}}decompose(e,r,n,i){let a=e<=0&&r>=this.length?this:new wi(n$(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),s=m_(a.text,o.text.slice(),0,a.length);if(s.length<=32)n.push(new wi(s,o.length+a.length));else{let l=s.length>>1;n.push(new wi(s.slice(0,l)),new wi(s.slice(l)))}}else n.push(a)}replace(e,r,n){if(!(n instanceof wi))return super.replace(e,r,n);[e,r]=mm(this,e,r);let i=m_(this.text,m_(n.text,n$(this.text,0,e)),r),a=this.length+n.length-(r-e);return i.length<=32?new wi(i,a):Hu.from(wi.split(i,[]),a)}sliceString(e,r=this.length,n=`
`){[e,r]=mm(this,e,r);let i="";for(let a=0,o=0;a<=r&&o<this.text.length;o++){let s=this.text[o],l=a+s.length;a>e&&o&&(i+=n),e<l&&r>a&&(i+=s.slice(Math.max(0,e-a),r-a)),a=l+1}return i}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],i=-1;for(let a of e)n.push(a),i+=a.length+1,n.length==32&&(r.push(new wi(n,i)),n=[],i=-1);return i>-1&&r.push(new wi(n,i)),r}}class Hu extends hn{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,i){for(let a=0;;a++){let o=this.children[a],s=i+o.length,l=n+o.lines-1;if((r?l:s)>=e)return o.lineInner(e,r,n,i);i=s+1,n=l+1}}decompose(e,r,n,i){for(let a=0,o=0;o<=r&&a<this.children.length;a++){let s=this.children[a],l=o+s.length;if(e<=l&&r>=o){let u=i&((o<=e?1:0)|(l>=r?2:0));o>=e&&l<=r&&!u?n.push(s):s.decompose(e-o,r-o,n,u)}o=l+1}}replace(e,r,n){if([e,r]=mm(this,e,r),n.lines<this.lines)for(let i=0,a=0;i<this.children.length;i++){let o=this.children[i],s=a+o.length;if(e>=a&&r<=s){let l=o.replace(e-a,r-a,n),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new Hu(c,this.length-(r-e)+n.length)}return super.replace(a,s,l)}a=s+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){[e,r]=mm(this,e,r);let i="";for(let a=0,o=0;a<this.children.length&&o<=r;a++){let s=this.children[a],l=o+s.length;o>e&&a&&(i+=n),e<l&&r>o&&(i+=s.sliceString(e-o,r-o,n)),o=l+1}return i}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof Hu))return 0;let n=0,[i,a,o,s]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=r,a+=r){if(i==o||a==s)return n;let l=this.children[i],u=e.children[a];if(l!=u)return n+l.scanIdentical(u,r);n+=l.length+1}}static from(e,r=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let p of e)p.flatten(d);return new wi(d,r)}let i=Math.max(32,n>>5),a=i<<1,o=i>>1,s=[],l=0,u=-1,c=[];function f(d){let p;if(d.lines>a&&d instanceof Hu)for(let v of d.children)f(v);else d.lines>o&&(l>o||!l)?(h(),s.push(d)):d instanceof wi&&l&&(p=c[c.length-1])instanceof wi&&d.lines+p.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new wi(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,u+=d.length+1,c.push(d))}function h(){l!=0&&(s.push(c.length==1?c[0]:Hu.from(c,u)),u=-1,l=c.length=0)}for(let d of e)f(d);return h(),s.length==1?s[0]:new Hu(s,r)}}hn.empty=new wi([""],0);function B0e(t){let e=-1;for(let r of t)e+=r.length+1;return e}function m_(t,e,r=0,n=1e9){for(let i=0,a=0,o=!0;a<t.length&&i<=n;a++){let s=t[a],l=i+s.length;l>=r&&(l>n&&(s=s.slice(0,n-i)),i<r&&(s=s.slice(r-i)),o?(e[e.length-1]+=s,o=!1):e.push(s)),i=l+1}return e}function n$(t,e,r){return m_(t,[""],e,r)}class s2{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof wi?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],a=this.offsets[n],o=a>>1,s=i instanceof wi?i.text.length:i.children.length;if(o==(r>0?s:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof wi){let l=i.text[o+(r<0?-1:0)];if(this.offsets[n]+=r,l.length>Math.max(0,e))return this.value=e==0?l:r>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(r<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(r>0?1:(l instanceof wi?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class DQ{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new s2(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*r,this.value=i.length<=n?i:r<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class PQ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:i}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(hn.prototype[Symbol.iterator]=function(){return this.iter()},s2.prototype[Symbol.iterator]=DQ.prototype[Symbol.iterator]=PQ.prototype[Symbol.iterator]=function(){return this});let $0e=class{constructor(e,r,n,i){this.from=e,this.to=r,this.number=n,this.text=i}get length(){return this.to-this.from}};function mm(t,e,r){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,r))]}let I0="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<I0.length;t++)I0[t]+=I0[t-1];function z0e(t){for(let e=1;e<I0.length;e+=2)if(I0[e]>t)return I0[e-1]<=t;return!1}function i$(t){return t>=127462&&t<=127487}const a$=8205;function ba(t,e,r=!0,n=!0){return(r?LQ:j0e)(t,e,n)}function LQ(t,e,r){if(e==t.length)return e;e&&RQ(t.charCodeAt(e))&&NQ(t.charCodeAt(e-1))&&e--;let n=ga(t,e);for(e+=Ks(n);e<t.length;){let i=ga(t,e);if(n==a$||i==a$||r&&z0e(i))e+=Ks(i),n=i;else if(i$(i)){let a=0,o=e-2;for(;o>=0&&i$(ga(t,o));)a++,o-=2;if(a%2==0)break;e+=2}else break}return e}function j0e(t,e,r){for(;e>0;){let n=LQ(t,e-2,r);if(n<e)return n;e--}return 0}function RQ(t){return t>=56320&&t<57344}function NQ(t){return t>=55296&&t<56320}function ga(t,e){let r=t.charCodeAt(e);if(!NQ(r)||e+1==t.length)return r;let n=t.charCodeAt(e+1);return RQ(n)?(r-55296<<10)+(n-56320)+65536:r}function uN(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ks(t){return t<65536?1:2}const EP=/\r\n?|\n/;var to=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(to||(to={}));class uc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,i=0;r<this.sections.length;){let a=this.sections[r++],o=this.sections[r++];o<0?(e(n,i,a),i+=a):i+=o,n+=a}}iterChangedRanges(e,r=!1){_P(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];i<0?e.push(n,i):e.push(i,n)}return new uc(e)}composeDesc(e){return this.empty?e:e.empty?this:FQ(this,e)}mapDesc(e,r=!1){return e.empty?this:CP(this,e,r)}mapPos(e,r=-1,n=to.Simple){let i=0,a=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],u=i+s;if(l<0){if(u>e)return a+(e-i);a+=s}else{if(n!=to.Simple&&u>=e&&(n==to.TrackDel&&i<e&&u>e||n==to.TrackBefore&&i<e||n==to.TrackAfter&&u>e))return null;if(u>e||u==e&&r<0&&!s)return e==i||r<0?a:a+l;a+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return a}touchesRange(e,r=e){for(let n=0,i=0;n<this.sections.length&&i<=r;){let a=this.sections[n++],o=this.sections[n++],s=i+a;if(o>=0&&i<=r&&s>=e)return i<e&&s>r?"cover":!0;i=s}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],i=this.sections[r++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new uc(e)}static create(e){return new uc(e)}}class Gi extends uc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return _P(this,(r,n,i,a,o)=>e=e.replace(i,i+(n-r),o),!1),e}mapDesc(e,r=!1){return CP(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let i=0,a=0;i<r.length;i+=2){let o=r[i],s=r[i+1];if(s>=0){r[i]=s,r[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(hn.empty);n.push(o?e.slice(a,a+o):hn.empty)}a+=o}return new Gi(r,n)}compose(e){return this.empty?e:e.empty?this:FQ(this,e,!0)}map(e,r=!1){return e.empty?this:CP(this,e,r,!0)}iterChanges(e,r=!1){_P(this,e,r)}get desc(){return uc.create(this.sections)}filter(e){let r=[],n=[],i=[],a=new X2(this);e:for(let o=0,s=0;;){let l=o==e.length?1e9:e[o++];for(;s<l||s==l&&a.len==0;){if(a.done)break e;let c=Math.min(a.len,l-s);Ba(i,c,-1);let f=a.ins==-1?-1:a.off==0?a.ins:0;Ba(r,c,f),f>0&&Hh(n,r,a.text),a.forward(c),s+=c}let u=e[o++];for(;s<u;){if(a.done)break e;let c=Math.min(a.len,u-s);Ba(r,c,-1),Ba(i,c,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(c),s+=c}}return{changes:new Gi(r,n),filtered:uc.create(i)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],i=this.sections[r+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let i=[],a=[],o=0,s=null;function l(c=!1){if(!c&&!i.length)return;o<r&&Ba(i,r-o,-1);let f=new Gi(i,a);s=s?s.compose(f.map(s)):f,i=[],a=[],o=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof Gi){if(c.length!=r)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${r})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>r)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${r})`);let p=d?typeof d=="string"?hn.of(d.split(n||EP)):d:hn.empty,v=p.length;if(f==h&&v==0)return;f<o&&l(),f>o&&Ba(i,f-o,-1),Ba(i,h-f,v),Hh(a,i,p),o=h}}return u(e),l(!s),s}static empty(e){return new Gi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let i=0;i<e.length;i++){let a=e[i];if(typeof a=="number")r.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((o,s)=>s&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)r.push(a[0],0);else{for(;n.length<i;)n.push(hn.empty);n[i]=hn.of(a.slice(1)),r.push(a[0],n[i].length)}}}return new Gi(r,n)}static createSet(e,r){return new Gi(e,r)}}function Ba(t,e,r,n=!1){if(e==0&&r<=0)return;let i=t.length-2;i>=0&&r<=0&&r==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=r:n?(t[i]+=e,t[i+1]+=r):t.push(e,r)}function Hh(t,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(r);else{for(;t.length<n;)t.push(hn.empty);t.push(r)}}function _P(t,e,r){let n=t.inserted;for(let i=0,a=0,o=0;o<t.sections.length;){let s=t.sections[o++],l=t.sections[o++];if(l<0)i+=s,a+=s;else{let u=i,c=a,f=hn.empty;for(;u+=s,c+=l,l&&n&&(f=f.append(n[o-2>>1])),!(r||o==t.sections.length||t.sections[o+1]<0);)s=t.sections[o++],l=t.sections[o++];e(i,u,a,c,f),i=u,a=c}}}function CP(t,e,r,n=!1){let i=[],a=n?[]:null,o=new X2(t),s=new X2(e);for(let l=-1;;)if(o.ins==-1&&s.ins==-1){let u=Math.min(o.len,s.len);Ba(i,u,-1),o.forward(u),s.forward(u)}else if(s.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(s.len<o.len||s.len==o.len&&!r))){let u=s.len;for(Ba(i,s.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Ba(i,0,o.ins),a&&Hh(a,i,o.text),l=o.i),o.forward(c),u-=c}s.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(s.ins==-1){let f=Math.min(c,s.len);u+=f,c-=f,s.forward(f)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;Ba(i,u,l<o.i?o.ins:0),a&&l<o.i&&Hh(a,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&s.done)return a?Gi.createSet(i,a):uc.create(i);throw new Error("Mismatched change set lengths")}}function FQ(t,e,r=!1){let n=[],i=r?[]:null,a=new X2(t),o=new X2(e);for(let s=!1;;){if(a.done&&o.done)return i?Gi.createSet(n,i):uc.create(n);if(a.ins==0)Ba(n,a.len,0,s),a.next();else if(o.len==0&&!o.done)Ba(n,0,o.ins,s),i&&Hh(i,n,o.text),o.next();else{if(a.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,o.len),u=n.length;if(a.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Ba(n,l,c,s),i&&c&&Hh(i,n,o.text)}else o.ins==-1?(Ba(n,a.off?0:a.len,l,s),i&&Hh(i,n,a.textBit(l))):(Ba(n,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&Hh(i,n,o.text));s=(a.ins>l||o.ins>=0&&o.len>l)&&(s||n.length>u),a.forward2(l),o.forward(l)}}}}class X2{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?hn.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?hn.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Np{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Np(n,i,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return it.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return it.range(this.anchor,n)}eq(e,r=!1){return this.anchor==e.anchor&&this.head==e.head&&(!r||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return it.range(e.anchor,e.head)}static create(e,r,n){return new Np(e,r,n)}}class it{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:it.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e,r=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new it([this.main],0)}addRange(e,r=!0){return it.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,it.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new it(e.ranges.map(r=>Np.fromJSON(r)),e.main)}static single(e,r=e){return new it([it.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let a=e[i];if(a.empty?a.from<=n:a.from<n)return it.normalized(e.slice(),r);n=a.to}return new it(e,r)}static cursor(e,r=0,n,i){return Np.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,r,n,i){let a=(n??16777215)<<6|(i==null?7:Math.min(6,i));return r<e?Np.create(r,e,48|a):Np.create(e,r,(r>e?8:0)|a)}static normalized(e,r=0){let n=e[r];e.sort((i,a)=>i.from-a.from),r=e.indexOf(n);for(let i=1;i<e.length;i++){let a=e[i],o=e[i-1];if(a.empty?a.from<=o.to:a.from<o.to){let s=o.from,l=Math.max(a.to,o.to);i<=r&&r--,e.splice(--i,2,a.anchor>a.head?it.range(l,s):it.range(s,l))}}return new it(e,r)}}function BQ(t,e){for(let r of t.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let cN=0;class Qt{constructor(e,r,n,i,a){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=i,this.id=cN++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Qt(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:fN),!!e.static,e.enables)}of(e){return new y_([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new y_(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new y_(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function fN(t,e){return t==e||t.length==e.length&&t.every((r,n)=>r===e[n])}class y_{constructor(e,r,n,i){this.dependencies=e,this.facet=r,this.type=n,this.value=i,this.id=cN++}dynamicSlot(e){var r;let n=this.value,i=this.facet.compareInput,a=this.id,o=e[a]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((r=e[f.id])!==null&&r!==void 0?r:1)&1||c.push(e[f.id]);return{create(f){return f.values[o]=n(f),1},update(f,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||kP(f,c)){let d=n(f);if(s?!o$(d,f.values[o],i):!i(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[a];if(p!=null){let v=R3(h,p);if(this.dependencies.every(g=>g instanceof Qt?h.facet(g)===f.facet(g):g instanceof Ca?h.field(g,!1)==f.field(g,!1):!0)||(s?o$(d=n(f),v,i):i(d=n(f),v)))return f.values[o]=v,0}else d=n(f);return f.values[o]=d,1}}}}function o$(t,e,r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}function kP(t,e){let r=!1;for(let n of e)l2(t,n)&1&&(r=!0);return r}function G0e(t,e,r){let n=r.map(l=>t[l.id]),i=r.map(l=>l.type),a=n.filter(l=>!(l&1)),o=t[e.id]>>1;function s(l){let u=[];for(let c=0;c<n.length;c++){let f=R3(l,n[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(l){for(let u of n)l2(l,u);return l.values[o]=s(l),1},update(l,u){if(!kP(l,a))return 0;let c=s(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=kP(l,n),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&fN(r,f))return l.values[o]=h,0;let d=s(l);return e.compare(d,h)?(l.values[o]=h,0):(l.values[o]=d,1)}}}const s$=Qt.define({static:!0});class Ca{constructor(e,r,n,i,a){this.id=e,this.createF=r,this.updateF=n,this.compareF=i,this.spec=a,this.provides=void 0}static define(e){let r=new Ca(cN++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(s$).find(n=>n.field==this);return((r==null?void 0:r.create)||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,i)=>{let a=n.values[r],o=this.updateF(a,i);return this.compareF(a,o)?0:(n.values[r]=o,1)},reconfigure:(n,i)=>i.config.address[this.id]!=null?(n.values[r]=i.field(this),0):(n.values[r]=this.create(n),1)}}init(e){return[this,s$.of({field:this,create:e})]}get extension(){return this}}const Tp={lowest:4,low:3,default:2,high:1,highest:0};function e1(t){return e=>new $Q(e,t)}const ty={highest:e1(Tp.highest),high:e1(Tp.high),default:e1(Tp.default),low:e1(Tp.low),lowest:e1(Tp.lowest)};class $Q{constructor(e,r){this.inner=e,this.prec=r}}class eM{of(e){return new MP(this,e)}reconfigure(e){return eM.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class MP{constructor(e,r){this.compartment=e,this.inner=r}}class L3{constructor(e,r,n,i,a,o){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let i=[],a=Object.create(null),o=new Map;for(let h of U0e(e,r,o))h instanceof Ca?i.push(h):(a[h.facet.id]||(a[h.facet.id]=[])).push(h);let s=Object.create(null),l=[],u=[];for(let h of i)s[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=n==null?void 0:n.config.facets;for(let h in a){let d=a[h],p=d[0].facet,v=c&&c[h]||[];if(d.every(g=>g.type==0))if(s[p.id]=l.length<<1|1,fN(v,d))l.push(n.facet(p));else{let g=p.combine(d.map(m=>m.value));l.push(n&&p.compare(g,n.facet(p))?n.facet(p):g)}else{for(let g of d)g.type==0?(s[g.id]=l.length<<1|1,l.push(g.value)):(s[g.id]=u.length<<1,u.push(m=>g.dynamicSlot(m)));s[p.id]=u.length<<1,u.push(g=>G0e(g,p,d))}}let f=u.map(h=>h(s));return new L3(e,o,f,s,l,a)}}function U0e(t,e,r){let n=[[],[],[],[],[]],i=new Map;function a(o,s){let l=i.get(o);if(l!=null){if(l<=s)return;let u=n[l].indexOf(o);u>-1&&n[l].splice(u,1),o instanceof MP&&r.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let u of o)a(u,s);else if(o instanceof MP){if(r.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;r.set(o.compartment,u),a(u,s)}else if(o instanceof $Q)a(o.inner,o.prec);else if(o instanceof Ca)n[s].push(o),o.provides&&a(o.provides,s);else if(o instanceof y_)n[s].push(o),o.facet.extensions&&a(o.facet.extensions,Tp.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(u,s)}}return a(t,Tp.default),n.reduce((o,s)=>o.concat(s))}function l2(t,e){if(e&1)return 2;let r=e>>1,n=t.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[r]=4;let i=t.computeSlot(t,t.config.dynamicSlots[r]);return t.status[r]=2|i}function R3(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const zQ=Qt.define(),AP=Qt.define({combine:t=>t.some(e=>e),static:!0}),jQ=Qt.define({combine:t=>t.length?t[0]:void 0,static:!0}),GQ=Qt.define(),UQ=Qt.define(),WQ=Qt.define(),VQ=Qt.define({combine:t=>t.length?t[0]:!1});let Sc=class{constructor(e,r){this.type=e,this.value=r}static define(){return new W0e}};class W0e{of(e){return new Sc(this,e)}}class V0e{constructor(e){this.map=e}of(e){return new Br(this,e)}}class Br{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new Br(this.type,r)}is(e){return this.type==e}static define(e={}){return new V0e(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let i of e){let a=i.map(r);a&&n.push(a)}return n}}Br.reconfigure=Br.define();Br.appendConfig=Br.define();class Vi{constructor(e,r,n,i,a,o){this.startState=e,this.changes=r,this.selection=n,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,n&&BQ(n,r.newLength),a.some(s=>s.type==Vi.time)||(this.annotations=a.concat(Vi.time.of(Date.now())))}static create(e,r,n,i,a,o){return new Vi(e,r,n,i,a,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Vi.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Vi.time=Sc.define();Vi.userEvent=Sc.define();Vi.addToHistory=Sc.define();Vi.remote=Sc.define();function H0e(t,e){let r=[];for(let n=0,i=0;;){let a,o;if(n<t.length&&(i==e.length||e[i]>=t[n]))a=t[n++],o=t[n++];else if(i<e.length)a=e[i++],o=e[i++];else return r;!r.length||r[r.length-1]<a?r.push(a,o):r[r.length-1]<o&&(r[r.length-1]=o)}}function HQ(t,e,r){var n;let i,a,o;return r?(i=e.changes,a=Gi.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),a=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(a):(n=t.selection)===null||n===void 0?void 0:n.map(i),effects:Br.mapEffects(t.effects,i).concat(Br.mapEffects(e.effects,a)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function TP(t,e,r){let n=e.selection,i=D0(e.annotations);return e.userEvent&&(i=i.concat(Vi.userEvent.of(e.userEvent))),{changes:e.changes instanceof Gi?e.changes:Gi.of(e.changes||[],r,t.facet(jQ)),selection:n&&(n instanceof it?n:it.single(n.anchor,n.head)),effects:D0(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function XQ(t,e,r){let n=TP(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(r=!1);let o=!!e[a].sequential;n=HQ(n,TP(t,e[a],o?n.changes.newLength:t.doc.length),o)}let i=Vi.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Y0e(r?X0e(i):i)}function X0e(t){let e=t.startState,r=!0;for(let i of e.facet(GQ)){let a=i(t);if(a===!1){r=!1;break}Array.isArray(a)&&(r=r===!0?a:H0e(r,a))}if(r!==!0){let i,a;if(r===!1)a=t.changes.invertedDesc,i=Gi.empty(e.doc.length);else{let o=t.changes.filter(r);i=o.changes,a=o.filtered.mapDesc(o.changes).invertedDesc}t=Vi.create(e,i,t.selection&&t.selection.map(a),Br.mapEffects(t.effects,a),t.annotations,t.scrollIntoView)}let n=e.facet(UQ);for(let i=n.length-1;i>=0;i--){let a=n[i](t);a instanceof Vi?t=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Vi?t=a[0]:t=XQ(e,D0(a),!1)}return t}function Y0e(t){let e=t.startState,r=e.facet(WQ),n=t;for(let i=r.length-1;i>=0;i--){let a=r[i](t);a&&Object.keys(a).length&&(n=HQ(n,TP(e,a,t.changes.newLength),!0))}return n==t?t:Vi.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const q0e=[];function D0(t){return t==null?q0e:Array.isArray(t)?t:[t]}var Vn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Vn||(Vn={}));const K0e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let OP;try{OP=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Q0e(t){if(OP)return OP.test(t);for(let e=0;e<t.length;e++){let r=t[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||K0e.test(r)))return!0}return!1}function Z0e(t){return e=>{if(!/\S/.test(e))return Vn.Space;if(Q0e(e))return Vn.Word;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return Vn.Word;return Vn.Other}}class en{constructor(e,r,n,i,a,o){this.config=e,this.doc=r,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)l2(this,s<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return l2(this,n),R3(this,n)}update(...e){return XQ(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:i}=r;for(let s of e.effects)s.is(eM.reconfigure)?(r&&(i=new Map,r.compartments.forEach((l,u)=>i.set(u,l)),r=null),i.set(s.value.compartment,s.value.extension)):s.is(Br.reconfigure)?(r=null,n=s.value):s.is(Br.appendConfig)&&(r=null,n=D0(n).concat(s.value));let a;r?a=e.startState.values.slice():(r=L3.resolve(n,i,this),a=new en(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(AP)?e.newSelection:e.newSelection.asSingle();new en(r,e.newDoc,o,a,(s,l)=>l.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:it.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),i=this.changes(n.changes),a=[n.range],o=D0(n.effects);for(let s=1;s<r.ranges.length;s++){let l=e(r.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<s;h++)a[h]=a[h].map(c);let f=i.mapDesc(u,!0);a.push(l.range.map(f)),i=i.compose(c),o=Br.mapEffects(o,c).concat(Br.mapEffects(D0(l.effects),f))}return{changes:i,selection:it.create(a,r.mainIndex),effects:o}}changes(e=[]){return e instanceof Gi?e:Gi.of(e,this.doc.length,this.facet(en.lineSeparator))}toText(e){return hn.of(e.split(this.facet(en.lineSeparator)||EP))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(l2(this,r),R3(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof Ca&&this.config.address[i.id]!=null&&(r[n]=i.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let o=n[a],s=e[a];i.push(o.init(l=>o.spec.fromJSON(s,l)))}}return en.create({doc:e.doc,selection:it.fromJSON(e.selection),extensions:r.extensions?i.concat([r.extensions]):i})}static create(e={}){let r=L3.resolve(e.extensions||[],new Map),n=e.doc instanceof hn?e.doc:hn.of((e.doc||"").split(r.staticFacet(en.lineSeparator)||EP)),i=e.selection?e.selection instanceof it?e.selection:it.single(e.selection.anchor,e.selection.head):it.single(0);return BQ(i,n.length),r.staticFacet(AP)||(i=i.asSingle()),new en(r,n,i,r.dynamicSlots.map(()=>null),(a,o)=>o.create(a),null)}get tabSize(){return this.facet(en.tabSize)}get lineBreak(){return this.facet(en.lineSeparator)||`
`}get readOnly(){return this.facet(VQ)}phrase(e,...r){for(let n of this.facet(en.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let a=+(i||1);return!a||a>r.length?n:r[a-1]})),e}languageDataAt(e,r,n=-1){let i=[];for(let a of this.facet(zQ))for(let o of a(this,r,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Z0e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:i}=this.doc.lineAt(e),a=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let l=ba(r,o,!1);if(a(r.slice(l,o))!=Vn.Word)break;o=l}for(;s<i;){let l=ba(r,s);if(a(r.slice(s,l))!=Vn.Word)break;s=l}return o==s?null:it.range(o+n,s+n)}}en.allowMultipleSelections=AP;en.tabSize=Qt.define({combine:t=>t.length?t[0]:4});en.lineSeparator=jQ;en.readOnly=VQ;en.phrases=Qt.define({compare(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length==n.length&&r.every(i=>t[i]==e[i])}});en.languageData=zQ;en.changeFilter=GQ;en.transactionFilter=UQ;en.transactionExtender=WQ;eM.reconfigure=Br.define();function Ec(t,e,r={}){let n={};for(let i of t)for(let a of Object.keys(i)){let o=i[a],s=n[a];if(s===void 0)n[a]=o;else if(!(s===o||o===void 0))if(Object.hasOwnProperty.call(r,a))n[a]=r[a](s,o);else throw new Error("Config merge conflict for field "+a)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class vv{eq(e){return this==e}range(e,r=e){return IP.create(e,r,this)}}vv.prototype.startSide=vv.prototype.endSide=0;vv.prototype.point=!1;vv.prototype.mapMode=to.TrackDel;let IP=class YQ{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new YQ(e,r,n)}};function DP(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class hN{constructor(e,r,n,i){this.from=e,this.to=r,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,i=0){let a=n?this.to:this.from;for(let o=i,s=a.length;;){if(o==s)return o;let l=o+s>>1,u=a[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-r;if(l==o)return u>=0?o:s;u>=0?s=l:o=l+1}}between(e,r,n,i){for(let a=this.findIndex(r,-1e9,!0),o=this.findIndex(n,1e9,!1,a);a<o;a++)if(i(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,r){let n=[],i=[],a=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,h,d;if(c==f){let p=r.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=d=p,u.startSide!=u.endSide&&(d=r.mapPos(c,u.endSide),d<h)))continue}else if(h=r.mapPos(c,u.startSide),d=r.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(s=Math.max(s,d-h)),n.push(u),i.push(h-o),a.push(d-o))}return{mapped:n.length?new hN(i,a,n,s):null,pos:o}}}class tn{constructor(e,r,n,i){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=i}static create(e,r,n,i){return new tn(e,r,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:i=0,filterTo:a=this.length}=e,o=e.filter;if(r.length==0&&!o)return this;if(n&&(r=r.slice().sort(DP)),this.isEmpty)return r.length?tn.of(r):this;let s=new qQ(this,null,-1).goto(0),l=0,u=[],c=new wd;for(;s.value||l<r.length;)if(l<r.length&&(s.from-r[l].from||s.startSide-r[l].value.startSide)>=0){let f=r[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==r.length||this.chunkEnd(s.chunkIndex)<r[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||a<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||a<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(IP.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?tn.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let s=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),r.push(l),n.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:f}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),r.push(c),n.push(f))}}let a=this.nextLayer.map(e);return r.length==0?a:new tn(n,r,a||tn.empty,i)}between(e,r,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let a=this.chunkPos[i],o=this.chunk[i];if(r>=a&&e<=a+o.length&&o.between(a,e-a,r-a,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return Y2.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return Y2.from(e).goto(r)}static compare(e,r,n,i,a=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),s=r.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=a),l=l$(o,s,n),u=new t1(o,l,a),c=new t1(s,l,a);n.iterGaps((f,h,d)=>u$(u,f,c,h,d,i)),n.empty&&n.length==0&&u$(u,0,c,0,0,i)}static eq(e,r,n=0,i){i==null&&(i=999999999);let a=e.filter(c=>!c.isEmpty&&r.indexOf(c)<0),o=r.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(a.length!=o.length)return!1;if(!a.length)return!0;let s=l$(a,o),l=new t1(a,s,0).goto(n),u=new t1(o,s,0).goto(n);for(;;){if(l.to!=u.to||!PP(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,r,n,i,a=-1){let o=new t1(e,null,a).goto(r),s=r,l=o.openStart;for(;;){let u=Math.min(o.to,n);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<r?c.length+1:Math.min(c.length,l);i.point(s,u,o.point,c,f,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>s&&(i.span(s,u,o.active,l),l=o.openEnd(u));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,r=!1){let n=new wd;for(let i of e instanceof IP?[e]:r?J0e(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return tn.empty;let r=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=tn.empty;i=i.nextLayer)r=new tn(i.chunkPos,i.chunk,r,Math.max(i.maxPoint,r.maxPoint));return r}}tn.empty=new tn([],[],null,-1);function J0e(t){if(t.length>1)for(let e=t[0],r=1;r<t.length;r++){let n=t[r];if(DP(e,n)>0)return t.slice().sort(DP);e=n}return t}tn.empty.nextLayer=tn.empty;class wd{finishChunk(e){this.chunks.push(new hN(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new wd)).add(e,r,n)}addInner(e,r,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(tn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=tn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function l$(t,e,r){let n=new Map;for(let a of t)for(let o=0;o<a.chunk.length;o++)a.chunk[o].maxPoint<=0&&n.set(a.chunk[o],a.chunkPos[o]);let i=new Set;for(let a of e)for(let o=0;o<a.chunk.length;o++){let s=n.get(a.chunk[o]);s!=null&&(r?r.mapPos(s):s)==a.chunkPos[o]&&!(r!=null&&r.touchesRange(s,s+a.chunk[o].length))&&i.add(a.chunk[o])}return i}class qQ{constructor(e,r,n,i=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Y2{constructor(e){this.heap=e}static from(e,r=null,n=-1){let i=[];for(let a=0;a<e.length;a++)for(let o=e[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new qQ(o,r,n,a));return i.length==1?i[0]:new Y2(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)sO(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)sO(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),sO(this.heap,0)}}}function sO(t,e){for(let r=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let i=t[n];if(n+1<t.length&&i.compare(t[n+1])>=0&&(i=t[n+1],n++),r.compare(i)<0)break;t[n]=r,t[e]=i,e=n}}class t1{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Y2.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){gS(this.active,e),gS(this.activeTo,e),gS(this.activeRank,e),this.minActive=c$(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:i,rank:a}=this.cursor;for(;r<this.activeRank.length&&(a-this.activeRank[r]||i-this.activeTo[r])>0;)r++;mS(this.active,r,n),mS(this.activeTo,r,i),mS(this.activeRank,r,a),e&&mS(e,r,this.cursor.from),this.minActive=c$(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&gS(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function u$(t,e,r,n,i,a){t.goto(e),r.goto(n);let o=n+i,s=n,l=n-e;for(;;){let u=t.to+l-r.to||t.endSide-r.endSide,c=u<0?t.to+l:r.to,f=Math.min(c,o);if(t.point||r.point?t.point&&r.point&&(t.point==r.point||t.point.eq(r.point))&&PP(t.activeForPoint(t.to),r.activeForPoint(r.to))||a.comparePoint(s,f,t.point,r.point):f>s&&!PP(t.active,r.active)&&a.compareRange(s,f,t.active,r.active),c>o)break;s=c,u<=0&&t.next(),u>=0&&r.next()}}function PP(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r]&&!t[r].eq(e[r]))return!1;return!0}function gS(t,e){for(let r=e,n=t.length-1;r<n;r++)t[r]=t[r+1];t.pop()}function mS(t,e,r){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=r}function c$(t,e){let r=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||t[i].endSide-t[r].endSide)<0&&(r=i,n=e[i]);return r}function ry(t,e,r=t.length){let n=0;for(let i=0;i<r;)t.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=ba(t,i));return n}function LP(t,e,r,n){for(let i=0,a=0;;){if(a>=e)return i;if(i==t.length)break;a+=t.charCodeAt(i)==9?r-a%r:1,i=ba(t,i)}return n===!0?-1:t.length}const RP="ͼ",f$=typeof Symbol>"u"?"__"+RP:Symbol.for(RP),NP=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),h$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class bd{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function a(o,s,l,u){let c=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&s==null)return l.push(o[0]+";");for(let d in s){let p=s[d];if(/&/.test(d))a(d.split(/,\s*/).map(v=>o.map(g=>v.replace(/&/,g))).reduce((v,g)=>v.concat(g)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");a(i(d),p,c,h)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((n&&!f&&!u?o.map(n):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)a(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=h$[f$]||1;return h$[f$]=e+1,RP+e.toString(36)}static mount(e,r,n){let i=e[NP],a=n&&n.nonce;i?a&&i.setNonce(a):i=new eme(e,a),i.mount(Array.isArray(r)?r:[r])}}let d$=new Map;class eme{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=d$.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[NP]=a;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],d$.set(n,this)}else{this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[NP]=this}mount(e){let r=this.sheet,n=0,i=0;for(let a=0;a<e.length;a++){let o=e[a],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),s==-1){if(this.modules.splice(i++,0,o),r)for(let l=0;l<o.rules.length;l++)r.insertRule(o.rules[l],n++)}else{for(;i<s;)n+=this.modules[i++].rules.length;n+=o.rules.length,i++}}if(!r){let a="";for(let o=0;o<this.modules.length;o++)a+=this.modules[o].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var xd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},q2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tme=typeof navigator<"u"&&/Mac/.test(navigator.platform),rme=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ma=0;ma<10;ma++)xd[48+ma]=xd[96+ma]=String(ma);for(var ma=1;ma<=24;ma++)xd[ma+111]="F"+ma;for(var ma=65;ma<=90;ma++)xd[ma]=String.fromCharCode(ma+32),q2[ma]=String.fromCharCode(ma);for(var lO in xd)q2.hasOwnProperty(lO)||(q2[lO]=xd[lO]);function nme(t){var e=tme&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||rme&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?q2:xd)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function N3(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function FP(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ime(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function w_(t,e){if(!e.anchorNode)return!1;try{return FP(t,e.anchorNode)}catch{return!1}}function ym(t){return t.nodeType==3?gv(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function u2(t,e,r,n){return r?p$(t,e,r,n,-1)||p$(t,e,r,n,1):!1}function K2(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function p$(t,e,r,n,i){for(;;){if(t==r&&e==n)return!0;if(e==(i<0?0:Cf(t))){if(t.nodeName=="DIV")return!1;let a=t.parentNode;if(!a||a.nodeType!=1)return!1;e=K2(t)+(i<0?0:1),t=a}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Cf(t):0}else return!1}}function Cf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function tM(t,e){let r=e?t.left:t.right;return{left:r,right:r,top:t.top,bottom:t.bottom}}function ame(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function KQ(t,e){let r=e.width/t.offsetWidth,n=e.height/t.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.width-t.offsetWidth)<1)&&(r=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-t.offsetHeight)<1)&&(n=1),{scaleX:r,scaleY:n}}function ome(t,e,r,n,i,a,o,s){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==l.body,p=1,v=1;if(d)h=ame(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:v}=KQ(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*v}}let g=0,m=0;if(i=="nearest")e.top<h.top?(m=-(h.top-e.top+o),r>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,r<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let y=e.bottom-e.top,w=h.bottom-h.top;m=(i=="center"&&y<=w?e.top+y/2-w/2:i=="start"||i=="center"&&r<0?e.top-o:e.bottom-w+o)-h.top}if(n=="nearest"?e.left<h.left?(g=-(h.left-e.left+a),r>0&&e.right>h.right+g&&(g=e.right-h.right+g+a)):e.right>h.right&&(g=e.right-h.right+a,r<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+a))):g=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==s?e.left-a:e.right-(h.right-h.left)+a)-h.left,g||m)if(d)u.scrollBy(g,m);else{let y=0,w=0;if(m){let b=c.scrollTop;c.scrollTop+=m/v,w=(c.scrollTop-b)*v}if(g){let b=c.scrollLeft;c.scrollLeft+=g/p,y=(c.scrollLeft-b)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-g)<1&&(n="nearest"),w&&Math.abs(w-m)<1&&(i="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function sme(t){let e=t.ownerDocument;for(let r=t.parentNode;r&&r!=e.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class lme{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?Cf(r):0),n,Math.min(e.focusOffset,n?Cf(n):0))}set(e,r,n,i){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=i}}let Ag=null;function QQ(t){if(t.setActive)return t.setActive();if(Ag)return t.focus(Ag);let e=[];for(let r=t;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(t.focus(Ag==null?{get preventScroll(){return Ag={preventScroll:!0},!0}}:void 0),!Ag){Ag=!1;for(let r=0;r<e.length;){let n=e[r++],i=e[r++],a=e[r++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let v$;function gv(t,e,r=e){let n=v$||(v$=document.createRange());return n.setEnd(t,r),n.setStart(t,e),n}function P0(t,e,r){let n={key:e,code:e,keyCode:r,which:r,cancelable:!0},i=new KeyboardEvent("keydown",n);i.synthetic=!0,t.dispatchEvent(i);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,t.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function ume(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function ZQ(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function cme(t,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,Cf(r));;)if(n){if(r.nodeType!=1)return!1;let i=r.childNodes[n-1];i.contentEditable=="false"?n--:(r=i,n=Cf(r))}else{if(r==t)return!0;n=K2(r),r=r.parentNode}}function JQ(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class ja{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new ja(e.parentNode,K2(e),r)}static after(e,r){return new ja(e.parentNode,K2(e)+1,r)}}const dN=[];class Rn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,i=null,a;for(let o of this.children){if(o.flags&7){if(!o.dom&&(a=i?i.nextSibling:n.firstChild)){let s=Rn.get(a);(!s||!s.parent&&s.canReuseDOM(o))&&o.reuseDOM(a)}o.sync(e,r),o.flags&=-8}if(a=i?i.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&a!=o.dom&&(r.written=!0),o.dom.parentNode==n)for(;a&&a!=o.dom;)a=g$(a);else n.insertBefore(o.dom,a);i=o.dom}for(a=i?i.nextSibling:n.firstChild,a&&r&&r.node==n&&(r.written=!0);a;)a=g$(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let i=Cf(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;i==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?i=-1:i=1),e=a}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Rn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,a=0;;i++){let o=this.children[i];if(o.dom==n)return a;a+=o.length+o.breakAfter}}domBoundsAround(e,r,n=0){let i=-1,a=-1,o=-1,s=-1;for(let l=0,u=n,c=n;l<this.children.length;l++){let f=this.children[l],h=u+f.length;if(u<e&&h>r)return f.domBoundsAround(e,r,u);if(h>=e&&i==-1&&(i=l,a=u),u>r&&f.dom.parentNode==this.dom){o=l,s=c;break}c=h,u=h+f.breakAfter}return{from:a,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=dN){this.markDirty();for(let i=e;i<r;i++){let a=this.children[i];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,r-e,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new eZ(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,i,a,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Rn.prototype.breakAfter=0;function g$(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class eZ{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function tZ(t,e,r,n,i,a,o,s,l){let{children:u}=t,c=u.length?u[e]:null,f=a.length?a[a.length-1]:null,h=f?f.breakAfter:o;if(!(e==n&&c&&!o&&!h&&a.length<2&&c.merge(r,i,a.length?f:null,r==0,s,l))){if(n<u.length){let d=u[n];d&&(i<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==n&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,l)?a[a.length-1]=d:((i||d.children.length&&!d.children[0].length)&&d.merge(0,i,null,!1,0,l),a.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),n++}for(c&&(c.breakAfter=o,r>0&&(!o&&a.length&&c.merge(r,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(r<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(r,c.length,null,!1,s,0),e++));e<n&&a.length;)if(u[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:s;else if(u[e].become(a[0]))e++,a.shift(),s=a.length?0:l;else break;!a.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,s,l)&&e--,(e<n||a.length)&&t.replaceChildren(e,n,a)}}function rZ(t,e,r,n,i,a){let o=t.childCursor(),{i:s,off:l}=o.findPos(r,1),{i:u,off:c}=o.findPos(e,-1),f=e-r;for(let h of n)f+=h.length;t.length+=f,tZ(t,u,c,s,l,n,0,i,a)}let is=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},BP=typeof document<"u"?document:{documentElement:{style:{}}};const $P=/Edge\/(\d+)/.exec(is.userAgent),nZ=/MSIE \d/.test(is.userAgent),zP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(is.userAgent),rM=!!(nZ||zP||$P),m$=!rM&&/gecko\/(\d+)/i.test(is.userAgent),uO=!rM&&/Chrome\/(\d+)/.exec(is.userAgent),y$="webkitFontSmoothing"in BP.documentElement.style,iZ=!rM&&/Apple Computer/.test(is.vendor),w$=iZ&&(/Mobile\/\w+/.test(is.userAgent)||is.maxTouchPoints>2);var er={mac:w$||/Mac/.test(is.platform),windows:/Win/.test(is.platform),linux:/Linux|X11/.test(is.platform),ie:rM,ie_version:nZ?BP.documentMode||6:zP?+zP[1]:$P?+$P[1]:0,gecko:m$,gecko_version:m$?+(/Firefox\/(\d+)/.exec(is.userAgent)||[0,0])[1]:0,chrome:!!uO,chrome_version:uO?+uO[1]:0,ios:w$,android:/Android\b/.test(is.userAgent),webkit:y$,safari:iZ,webkit_version:y$?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:BP.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const fme=256;class kf extends Rn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof kf)||this.length-(r-e)+n.length>fme||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new kf(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new ja(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return hme(this.dom,e,r)}}class Mf extends Rn{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let i of r)i.setParent(this)}setAttrs(e){if(ZQ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,i,a,o){return n&&(!(n instanceof Mf&&n.mark.eq(this.mark))||e&&a<=0||r<this.length&&o<=0)?!1:(rZ(this,e,r,n?n.children.slice():[],a-1,o-1),this.markDirty(),!0)}split(e){let r=[],n=0,i=-1,a=0;for(let s of this.children){let l=n+s.length;l>e&&r.push(n<e?s.split(e-n):s),i<0&&n>=e&&(i=a),n=l,a++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Mf(this.mark,r,o)}domAtPos(e){return aZ(this,e)}coordsAt(e,r){return sZ(this,e,r)}}function hme(t,e,r){let n=t.nodeValue.length;e>n&&(e=n);let i=e,a=e,o=0;e==0&&r<0||e==n&&r>=0?er.chrome||er.gecko||(e?(i--,o=1):a<n&&(a++,o=-1)):r<0?i--:a<n&&a++;let s=gv(t,i,a).getClientRects();if(!s.length)return null;let l=s[(o?o<0:r>=0)?0:s.length-1];return er.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),o?tM(l,o<0):l||null}class Xh extends Rn{static create(e,r,n){return new Xh(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=Xh.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,r,n,i,a,o){return n&&(!(n instanceof Xh)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof Xh&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return hn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):hn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ja.before(this.dom):ja.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let i=this.dom.getClientRects(),a=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?i.length-1:0;a=i[s],!(e>0?s==0:s==i.length-1||a.top<a.bottom);s+=o?-1:1);return tM(a,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wm extends Rn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof wm&&e.side==this.side}split(){return new wm(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ja.before(this.dom):ja.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return hn.empty}get isHidden(){return!0}}kf.prototype.children=Xh.prototype.children=wm.prototype.children=dN;function aZ(t,e){let r=t.dom,{children:n}=t,i=0;for(let a=0;i<n.length;i++){let o=n[i],s=a+o.length;if(!(s==a&&o.getSide()<=0)){if(e>a&&e<s&&o.dom.parentNode==r)return o.domAtPos(e-a);if(e<=a)break;a=s}}for(let a=i;a>0;a--){let o=n[a-1];if(o.dom.parentNode==r)return o.domAtPos(o.length)}for(let a=i;a<n.length;a++){let o=n[a];if(o.dom.parentNode==r)return o.domAtPos(0)}return new ja(r,0)}function oZ(t,e,r){let n,{children:i}=t;r>0&&e instanceof Mf&&i.length&&(n=i[i.length-1])instanceof Mf&&n.mark.eq(e.mark)?oZ(n,e.children[0],r-1):(i.push(e),e.setParent(t)),t.length+=e.length}function sZ(t,e,r){let n=null,i=-1,a=null,o=-1;function s(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],p=h+d.length;p>=c&&(d.children.length?s(d,c-h):(!a||a.isHidden&&r>0)&&(p>c||h==p&&d.getSide()>0)?(a=d,o=c-h):(h<c||h==p&&d.getSide()<0&&!d.isHidden)&&(n=d,i=c-h)),h=p}}s(t,e);let l=(r<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?i:o),r):dme(t)}function dme(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let r=ym(e);return r[r.length-1]||null}function jP(t,e){for(let r in t)r=="class"&&e.class?e.class+=" "+t.class:r=="style"&&e.style?e.style+=";"+t.style:e[r]=t[r];return e}const b$=Object.create(null);function pN(t,e,r){if(t==e)return!0;t||(t=b$),e||(e=b$);let n=Object.keys(t),i=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=i.length-(r&&i.indexOf(r)>-1?1:0))return!1;for(let a of n)if(a!=r&&(i.indexOf(a)==-1||t[a]!==e[a]))return!1;return!0}function GP(t,e,r){let n=!1;if(e)for(let i in e)r&&i in r||(n=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(r)for(let i in r)e&&e[i]==r[i]||(n=!0,i=="style"?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n}function pme(t){let e=Object.create(null);for(let r=0;r<t.attributes.length;r++){let n=t.attributes[r];e[n.name]=n.value}return e}class $i extends Rn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,i,a,o){if(n){if(!(n instanceof $i))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),rZ(this,e,r,n?n.children.slice():[],a,o),!0}split(e){let r=new $i;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:i}=this.childPos(e);i&&(r.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)r.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pN(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){oZ(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=jP(r,this.attrs||{})),n&&(this.attrs=jP({class:n},this.attrs||{}))}domAtPos(e){return aZ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(ZQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(GP(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let i=this.dom.lastChild;for(;i&&Rn.get(i)instanceof Mf;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=Rn.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!er.ios||!this.children.some(a=>a instanceof kf))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof kf)||/[^ -~]/.test(n.text))return null;let i=ym(n.dom);if(i.length!=1)return null;e+=i[0].width,r=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=sZ(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-i.lineHeight)<2&&i.textHeight<a){let o=(a-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,r){for(let n=0,i=0;n<e.children.length;n++){let a=e.children[n],o=i+a.length;if(o>=r){if(a instanceof $i)return a;if(o>r)break}i=o+a.breakAfter}return null}}class fd extends Rn{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,i,a,o){return n&&(!(n instanceof fd)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?ja.before(this.dom):ja.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new fd(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return dN}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):hn.empty}domBoundsAround(){return null}become(e){return e instanceof fd&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){return this.widget.coordsAt(this.dom,e,r)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class Pf{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var oo=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(oo||(oo={}));class hr extends vv{constructor(e,r,n,i){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new lb(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new Sd(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:a,end:o}=lZ(e,r);n=(a?r?-3e8:-1:5e8)-1,i=(o?r?2e8:1:-6e8)+1}return new Sd(e,n,i,r,e.widget||null,!0)}static line(e){return new ub(e)}static set(e,r=!1){return tn.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}hr.none=tn.empty;class lb extends hr{constructor(e){let{start:r,end:n}=lZ(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof lb&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&pN(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}lb.prototype.point=!1;class ub extends hr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ub&&this.spec.class==e.spec.class&&pN(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}ub.prototype.mapMode=to.TrackBefore;ub.prototype.point=!0;class Sd extends hr{constructor(e,r,n,i,a,o){super(r,n,a,e),this.block=i,this.isReplace=o,this.mapMode=i?r<=0?to.TrackBefore:to.TrackAfter:to.TrackDel}get type(){return this.startSide!=this.endSide?oo.WidgetRange:this.startSide<=0?oo.WidgetBefore:oo.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Sd&&vme(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}Sd.prototype.point=!0;function lZ(t,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=t;return r==null&&(r=t.inclusive),n==null&&(n=t.inclusive),{start:r??e,end:n??e}}function vme(t,e){return t==e||!!(t&&e&&t.compare(e))}function UP(t,e,r,n=0){let i=r.length-1;i>=0&&r[i]+n>=t?r[i]=Math.max(r[i],e):r.push(t,e)}class c2{constructor(e,r,n,i){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fd&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new $i),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(yS(new wm(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof fd)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(yS(new kf(this.text.slice(this.textOff,this.textOff+i)),r),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,r,n,i){this.buildText(r-e,n,i),this.pos=r,this.openStart<0&&(this.openStart=i)}point(e,r,n,i,a,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Sd){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=r-e;if(n instanceof Sd)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fd(n.widget||new x$("div"),s,n));else{let l=Xh.create(n.widget||new x$("span"),s,s?0:n.startSide),u=this.atCursorPos&&!l.isEditable&&a<=i.length&&(e<r||n.startSide>0),c=!l.isEditable&&(e<r||a>i.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(yS(new wm(1),i),a),a=i.length+Math.max(0,a-i.length)),f.append(yS(l,i),a),this.atCursorPos=c,this.pendingBuffer=c?e<r||a>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=a)}static build(e,r,n,i,a){let o=new c2(e,r,n,a);return o.openEnd=tn.spans(i,r,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function yS(t,e){for(let r of e)t=new Mf(r,[t],t.length);return t}class x$ extends Pf{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Fn=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Fn||(Fn={}));const mv=Fn.LTR,vN=Fn.RTL;function uZ(t){let e=[];for(let r=0;r<t.length;r++)e.push(1<<+t[r]);return e}const gme=uZ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),mme=uZ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),WP=Object.create(null),_u=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),r=t.charCodeAt(1);WP[e]=r,WP[r]=-e}function cZ(t){return t<=247?gme[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?mme[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const yme=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Yh{get dir(){return this.level%2?vN:mv}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}forward(e,r){return e==(this.dir==r)}static find(e,r,n,i){let a=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=r&&s.to>=r){if(s.level==n)return o;(a<0||(i!=0?i<0?s.from<r:s.to>r:e[a].level>s.level))&&(a=o)}}if(a<0)throw new RangeError("Index out of range");return a}}function fZ(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!fZ(n.inner,i.inner))return!1}return!0}const bn=[];function wme(t,e,r,n,i){for(let a=0;a<=n.length;a++){let o=a?n[a-1].to:e,s=a<n.length?n[a].from:r,l=a?256:i;for(let u=o,c=l,f=l;u<s;u++){let h=cZ(t.charCodeAt(u));h==512?h=c:h==8&&f==4&&(h=16),bn[u]=h==4?2:h,h&7&&(f=h),c=h}for(let u=o,c=l,f=l;u<s;u++){let h=bn[u];if(h==128)u<s-1&&c==bn[u+1]&&c&24?h=bn[u]=c:bn[u]=256;else if(h==64){let d=u+1;for(;d<s&&bn[d]==64;)d++;let p=u&&c==8||d<r&&bn[d]==8?f==1?1:8:256;for(let v=u;v<d;v++)bn[v]=p;u=d-1}else h==8&&f==1&&(bn[u]=1);c=h,h&7&&(f=h)}}}function bme(t,e,r,n,i){let a=i==1?2:1;for(let o=0,s=0,l=0;o<=n.length;o++){let u=o?n[o-1].to:e,c=o<n.length?n[o].from:r;for(let f=u,h,d,p;f<c;f++)if(d=WP[h=t.charCodeAt(f)])if(d<0){for(let v=s-3;v>=0;v-=3)if(_u[v+1]==-d){let g=_u[v+2],m=g&2?i:g&4?g&1?a:i:0;m&&(bn[f]=bn[_u[v]]=m),s=v;break}}else{if(_u.length==189)break;_u[s++]=f,_u[s++]=h,_u[s++]=l}else if((p=bn[f])==2||p==1){let v=p==i;l=v?0:1;for(let g=s-3;g>=0;g-=3){let m=_u[g+2];if(m&2)break;if(v)_u[g+2]|=2;else{if(m&4)break;_u[g+2]|=4}}}}}function xme(t,e,r,n){for(let i=0,a=n;i<=r.length;i++){let o=i?r[i-1].to:t,s=i<r.length?r[i].from:e;for(let l=o;l<s;){let u=bn[l];if(u==256){let c=l+1;for(;;)if(c==s){if(i==r.length)break;c=r[i++].to,s=i<r.length?r[i].from:e}else if(bn[c]==256)c++;else break;let f=a==1,h=(c<e?bn[c]:n)==1,d=f==h?f?1:2:n;for(let p=c,v=i,g=v?r[v-1].to:t;p>l;)p==g&&(p=r[--v].from,g=v?r[v-1].to:t),bn[--p]=d;l=c}else a=u,l++}}}function VP(t,e,r,n,i,a,o){let s=n%2?2:1;if(n%2==i%2)for(let l=e,u=0;l<r;){let c=!0,f=!1;if(u==a.length||l<a[u].from){let v=bn[l];v!=s&&(c=!1,f=v==16)}let h=!c&&s==1?[]:null,d=c?n:n+1,p=l;e:for(;;)if(u<a.length&&p==a[u].from){if(f)break e;let v=a[u];if(!c)for(let g=v.to,m=u+1;;){if(g==r)break e;if(m<a.length&&a[m].from==g)g=a[m++].to;else{if(bn[g]==s)break e;break}}if(u++,h)h.push(v);else{v.from>l&&o.push(new Yh(l,v.from,d));let g=v.direction==mv!=!(d%2);HP(t,g?n+1:n,i,v.inner,v.from,v.to,o),l=v.to}p=v.to}else{if(p==r||(c?bn[p]!=s:bn[p]==s))break;p++}h?VP(t,l,p,n+1,i,h,o):l<p&&o.push(new Yh(l,p,d)),l=p}else for(let l=r,u=a.length;l>e;){let c=!0,f=!1;if(!u||l>a[u-1].to){let v=bn[l-1];v!=s&&(c=!1,f=v==16)}let h=!c&&s==1?[]:null,d=c?n:n+1,p=l;e:for(;;)if(u&&p==a[u-1].to){if(f)break e;let v=a[--u];if(!c)for(let g=v.from,m=u;;){if(g==e)break e;if(m&&a[m-1].to==g)g=a[--m].from;else{if(bn[g-1]==s)break e;break}}if(h)h.push(v);else{v.to<l&&o.push(new Yh(v.to,l,d));let g=v.direction==mv!=!(d%2);HP(t,g?n+1:n,i,v.inner,v.from,v.to,o),l=v.from}p=v.from}else{if(p==e||(c?bn[p-1]!=s:bn[p-1]==s))break;p--}h?VP(t,p,l,n+1,i,h,o):p<l&&o.push(new Yh(p,l,d)),l=p}}function HP(t,e,r,n,i,a,o){let s=e%2?2:1;wme(t,i,a,n,s),bme(t,i,a,n,s),xme(i,a,n,s),VP(t,i,a,e,r,n,o)}function Sme(t,e,r){if(!t)return[new Yh(0,0,e==vN?1:0)];if(e==mv&&!r.length&&!yme.test(t))return hZ(t.length);if(r.length)for(;t.length>bn.length;)bn[bn.length]=256;let n=[],i=e==mv?0:1;return HP(t,i,i,r,0,t.length,n),n}function hZ(t){return[new Yh(0,t,0)]}let dZ="";function Eme(t,e,r,n,i){var a;let o=n.head-t.from,s=Yh.find(e,o,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=e[s],u=l.side(i,r);if(o==u){let h=s+=i?1:-1;if(h<0||h>=e.length)return null;l=e[s=h],o=l.side(!i,r),u=l.side(i,r)}let c=ba(t.text,o,l.forward(i,r));(c<l.from||c>l.to)&&(c=u),dZ=t.text.slice(Math.min(o,c),Math.max(o,c));let f=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return f&&c==u&&f.level+(i?0:1)<l.level?it.cursor(f.side(!i,r)+t.from,f.forward(i,r)?1:-1,f.level):it.cursor(c+t.from,l.forward(i,r)?-1:1,l.level)}function _me(t,e,r){for(let n=e;n<r;n++){let i=cZ(t.charCodeAt(n));if(i==1)return mv;if(i==2||i==4)return vN}return mv}const pZ=Qt.define(),vZ=Qt.define(),gZ=Qt.define(),mZ=Qt.define(),XP=Qt.define(),yZ=Qt.define(),wZ=Qt.define(),bZ=Qt.define({combine:t=>t.some(e=>e)}),xZ=Qt.define({combine:t=>t.some(e=>e)});class L0{constructor(e,r="nearest",n="nearest",i=5,a=5,o=!1){this.range=e,this.y=r,this.x=n,this.yMargin=i,this.xMargin=a,this.isSnapshot=o}map(e){return e.empty?this:new L0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new L0(it.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const wS=Br.define({map:(t,e)=>t.map(e)});function tl(t,e,r){let n=t.facet(mZ);n.length?n[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const nM=Qt.define({combine:t=>t.length?t[0]:!0});let Cme=0;const I1=Qt.define();class Si{constructor(e,r,n,i,a){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=i,this.extension=a(this)}static define(e,r){const{eventHandlers:n,eventObservers:i,provide:a,decorations:o}=r||{};return new Si(Cme++,e,n,i,s=>{let l=[I1.of(s)];return o&&l.push(Q2.of(u=>{let c=u.plugin(s);return c?o(c):hr.none})),a&&l.push(a(s)),l})}static fromClass(e,r){return Si.define(n=>new e(n),r)}}class cO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(tl(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){tl(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){tl(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const SZ=Qt.define(),gN=Qt.define(),Q2=Qt.define(),EZ=Qt.define(),mN=Qt.define(),_Z=Qt.define();function S$(t,e){let r=t.state.facet(_Z);if(!r.length)return r;let n=r.map(a=>a instanceof Function?a(t):a),i=[];return tn.spans(n,e.from,e.to,{point(){},span(a,o,s,l){let u=a-e.from,c=o-e.from,f=i;for(let h=s.length-1;h>=0;h--,l--){let d=s[h].spec.bidiIsolate,p;if(d==null&&(d=_me(e.text,u,c)),l>0&&f.length&&(p=f[f.length-1]).to==u&&p.direction==d)p.to=c,f=p.inner;else{let v={from:u,to:c,direction:d,inner:[]};f.push(v),f=v.inner}}}}),i}const CZ=Qt.define();function kZ(t){let e=0,r=0,n=0,i=0;for(let a of t.state.facet(CZ)){let o=a(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(r=Math.max(r,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:r,top:n,bottom:i}}const D1=Qt.define();class rl{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}join(e){return new rl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let i=e[r-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let i=0,a=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],u=o-s,c=l?l.fromB:1e9;for(;a<r.length&&r[a]<c;){let f=r[a],h=r[a+1],d=Math.max(s,f),p=Math.min(c,h);if(d<=p&&new rl(d+u,p+u,d,p).addToSet(n),h>c)break;a+=2}if(!l)return n;new rl(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class F3{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Gi.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let i=[];this.changes.iterChangedRanges((a,o,s,l)=>i.push(new rl(a,o,s,l))),this.changedRanges=i}static create(e,r,n){return new F3(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class E$ extends Rn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new $i],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new rl(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?i=this.domChanged.newSel.head:!Dme(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let a=i>-1?Mme(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;n=new rl(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(er.ie||er.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),l=Ome(o,s,e.changes);return n=rl.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=er.chrome||er.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof fd&&o.widget instanceof _$&&a.push(o.dom);i.updateGaps(a)}updateChildren(e,r,n){let i=n?n.range.addToSet(e.slice()):e,a=this.childCursor(r);for(let o=i.length-1;;o--){let s=o>=0?i[o]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:f}=s,h,d,p,v;if(n&&n.range.fromB<f&&n.range.toB>c){let b=c2.build(this.view.state.doc,c,n.range.fromB,this.decorations,this.dynamicDecorationMap),x=c2.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);d=b.breakAtStart,p=b.openStart,v=x.openEnd;let S=this.compositionView(n);x.breakAtStart?S.breakAfter=1:x.content.length&&S.merge(S.length,S.length,x.content[0],!1,x.openStart,0)&&(S.breakAfter=x.content[0].breakAfter,x.content.shift()),b.content.length&&S.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),h=b.content.concat(S).concat(x.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:v}=c2.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:g,off:m}=a.findPos(u,1),{i:y,off:w}=a.findPos(l,-1);tZ(this,y,w,g,m,h,d,p,v)}n&&this.fixCompositionDOM(n)}compositionView(e){let r=new kf(e.text.nodeValue);r.flags|=8;for(let{deco:i}of e.marks)r=new Mf(i,[r],r.length);let n=new $i;return n.append(r,0),n}fixCompositionDOM(e){let r=(a,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let s=Rn.get(a);s&&s!=o&&(s.dom=null),o.setDOM(a)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];r(e.line,i);for(let a=e.marks.length-1;a>=-1;a--)n=i.childPos(n.off,1),i=i.children[n.i],r(a>=0?e.marks[a].node:e.text,i)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,a=!i&&w_(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||r||a))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(s.anchor)),u=s.empty?l:this.moveToLine(this.domAtPos(s.head));if(er.gecko&&s.empty&&!this.hasComposition&&kme(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new ja(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!u2(l.node,l.offset,c.anchorNode,c.anchorOffset)||!u2(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,s))&&(this.view.observer.ignore(()=>{er.android&&er.chrome&&this.dom.contains(c.focusNode)&&Ime(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=N3(this.view.root);if(f)if(s.empty){if(er.gecko){let h=Ame(l.node,l.offset);if(h&&h!=3){let d=AZ(l.node,l.offset,h==1?1:-1);d&&(l=new ja(d.node,d.offset))}}f.collapse(l.node,l.offset),s.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=s.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(h)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new ja(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new ja(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,r){return this.hasComposition&&r.empty&&u2(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=N3(e.root),{anchorNode:i,anchorOffset:a}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let o=$i.find(this,r.head);if(!o)return;let s=o.posAtStart;if(r.head==s||r.head==s+o.length)return;let l=this.coordsAt(r.head,-1),u=this.coordsAt(r.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(r.head+r.assoc);n.collapse(c.node,c.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=r.from&&n.collapse(i,a)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let i=e.offset;!n&&i<r.childNodes.length;i++){let a=Rn.get(r.childNodes[i]);a instanceof $i&&(n=a.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let a=Rn.get(r.childNodes[i]);a instanceof $i&&(n=a.domAtPos(a.length))}return n?new ja(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=Rn.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let i=this.children[r];if(n<i.length||i instanceof $i)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,i=0;for(let a=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=a-s.breakAfter,u=l-s.length;if(l<e)break;u<=e&&(u<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof $i&&!(n instanceof $i&&r>=0))&&(n=s,i=u),a=u}return n?n.coordsAt(e-i,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),i=this.children[r];if(!(i instanceof $i))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(n,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}n=l}if(!(i instanceof kf))return null;let a=ba(i.text,n);if(a==n)return null;let o=gv(i.dom,n,a).getClientRects();for(let s=0;s<o.length;s++){let l=o[s];if(s==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:i}=e,a=this.view.contentDOM.clientWidth,o=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==Fn.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=n){let d=f.dom.getBoundingClientRect();if(r.push(d.height),o){let p=f.dom.lastChild,v=p?ym(p):[];if(v.length){let g=v[v.length-1],m=l?g.right-d.left:d.right-g.left;m>s&&(s=m,this.minWidth=a,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Fn.RTL:Fn.LTR}measureTextSize(){for(let a of this.children)if(a instanceof $i){let o=a.measureTextSize();if(o)return o}let e=document.createElement("div"),r,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=ym(e.firstChild)[0];r=e.getBoundingClientRect().height,n=a?a.width/27:7,i=a?a.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:i}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new eZ(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,i=0;;i++){let a=i==r.viewports.length?null:r.viewports[i],o=a?a.from-1:this.length;if(o>n){let s=(r.lineBlockAt(o).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(hr.replace({widget:new _$(s),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!a)break;n=a.to+1}return hr.set(e)}updateDeco(){let e=this.view.state.facet(Q2).map((i,a)=>(this.dynamicDecorationMap[a]=typeof i=="function")?i(this.view):i),r=!1,n=this.view.state.facet(EZ).map((i,a)=>{let o=typeof i=="function";return o&&(r=!0),o?i(this.view):i});n.length&&(this.dynamicDecorationMap[e.length]=r,e.push(tn.join(n)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),i;if(!n)return;!r.empty&&(i=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let a=kZ(this.view),o={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;ome(this.view.scrollDOM,o,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Fn.LTR)}}function kme(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class _$ extends Pf{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function MZ(t,e){let r=t.observer.selectionRange,n=r.focusNode&&AZ(r.focusNode,r.focusOffset,0);if(!n)return null;let i=e-n.offset;return{from:i,to:i+n.node.nodeValue.length,node:n.node}}function Mme(t,e,r){let n=MZ(t,r);if(!n)return null;let{node:i,from:a,to:o}=n,s=i.nodeValue;if(/[\n\r]/.test(s)||t.state.doc.sliceString(n.from,n.to)!=s)return null;let l=e.invertedDesc,u=new rl(l.mapPos(a),l.mapPos(o),a,o),c=[];for(let f=i.parentNode;;f=f.parentNode){let h=Rn.get(f);if(h instanceof Mf)c.push({node:f,deco:h.mark});else{if(h instanceof $i||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:f};if(f!=t.contentDOM)c.push({node:f,deco:new lb({inclusive:!0,attributes:pme(f),tagName:f.tagName.toLowerCase()})});else return null}}}function AZ(t,e,r){if(r<=0)for(let n=t,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i>0)n=n.childNodes[i-1],i=Cf(n);else break}if(r>=0)for(let n=t,i=e;;){if(n.nodeType==3)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length&&r>=0)n=n.childNodes[i],i=0;else break}return null}function Ame(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Tme=class{constructor(){this.changes=[]}compareRange(e,r){UP(e,r,this.changes)}comparePoint(e,r){UP(e,r,this.changes)}};function Ome(t,e,r){let n=new Tme;return tn.compare(t,e,r,n),n.changes}function Ime(t,e){for(let r=t;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function Dme(t,e){let r=!1;return e&&t.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(r=!0)}),r}function Pme(t,e,r=1){let n=t.charCategorizer(e),i=t.doc.lineAt(e),a=e-i.from;if(i.length==0)return it.cursor(e);a==0?r=1:a==i.length&&(r=-1);let o=a,s=a;r<0?o=ba(i.text,a,!1):s=ba(i.text,a);let l=n(i.text.slice(o,s));for(;o>0;){let u=ba(i.text,o,!1);if(n(i.text.slice(u,o))!=l)break;o=u}for(;s<i.length;){let u=ba(i.text,s);if(n(i.text.slice(s,u))!=l)break;s=u}return it.range(o+i.from,s+i.from)}function Lme(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Rme(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function fO(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function C$(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function k$(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function YP(t,e,r){let n,i,a,o,s=!1,l,u,c,f;for(let p=t.firstChild;p;p=p.nextSibling){let v=ym(p);for(let g=0;g<v.length;g++){let m=v[g];i&&fO(i,m)&&(m=C$(k$(m,i.bottom),i.top));let y=Lme(e,m),w=Rme(r,m);if(y==0&&w==0)return p.nodeType==3?M$(p,e,r):YP(p,e,r);if(!n||o>w||o==w&&a>y){n=p,i=m,a=y,o=w;let b=w?r<m.top?-1:1:y?e<m.left?-1:1:0;s=!b||(b>0?g<v.length-1:g>0)}y==0?r>m.bottom&&(!c||c.bottom<m.bottom)?(l=p,c=m):r<m.top&&(!f||f.top>m.top)&&(u=p,f=m):c&&fO(c,m)?c=k$(c,m.bottom):f&&fO(f,m)&&(f=C$(f,m.top))}}if(c&&c.bottom>=r?(n=l,i=c):f&&f.top<=r&&(n=u,i=f),!n)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return M$(n,h,r);if(s&&n.contentEditable!="false")return YP(n,h,r);let d=Array.prototype.indexOf.call(t.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function M$(t,e,r){let n=t.nodeValue.length,i=-1,a=1e9,o=0;for(let s=0;s<n;s++){let l=gv(t,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<a){let h=e>=(c.left+c.right)/2,d=h;if((er.chrome||er.gecko)&&gv(t,s).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:t,offset:s+(d?1:0)};i=s+(d?1:0),a=f}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function TZ(t,e,r,n=-1){var i,a;let o=t.contentDOM.getBoundingClientRect(),s=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-s;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let b=t.viewState.heightOracle.textHeight/2,x=!1;l=t.elementAtHeight(h),l.type!=oo.Text;)for(;h=n>0?l.bottom+b:l.top-b,!(h>=0&&h<=u);){if(x)return r?null:0;x=!0,n=-n}f=s+h;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:r?null:A$(t,o,l,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:A$(t,o,l,c,f);let p=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:p,g=v.elementFromPoint(c,f);g&&!t.contentDOM.contains(g)&&(g=null),g||(c=Math.max(o.left+1,Math.min(o.right-1,c)),g=v.elementFromPoint(c,f),g&&!t.contentDOM.contains(g)&&(g=null));let m,y=-1;if(g&&((i=t.docView.nearest(g))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let b=p.caretPositionFromPoint(c,f);b&&({offsetNode:m,offset:y}=b)}else if(p.caretRangeFromPoint){let b=p.caretRangeFromPoint(c,f);b&&({startContainer:m,startOffset:y}=b,(!t.contentDOM.contains(m)||er.safari&&Nme(m,y,c)||er.chrome&&Fme(m,y,c))&&(m=void 0))}}if(!m||!t.docView.dom.contains(m)){let b=$i.find(t.docView,d);if(!b)return h>l.top+l.height/2?l.to:l.from;({node:m,offset:y}=YP(b.dom,c,f))}let w=t.docView.nearest(m);if(!w)return null;if(w.isWidget&&((a=w.dom)===null||a===void 0?void 0:a.nodeType)==1){let b=w.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(m,y)+w.posAtStart}function A$(t,e,r,n,i){let a=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&r.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,l=Math.floor((i-r.top-(t.defaultLineHeight-s)*.5)/s);a+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(r.from,r.to);return r.from+LP(o,a,t.state.tabSize)}function Nme(t,e,r){let n;if(t.nodeType!=3||e!=(n=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return gv(t,n-1,n).getBoundingClientRect().left>r}function Fme(t,e,r){if(e!=0)return!1;for(let i=t;;){let a=i.parentNode;if(!a||a.nodeType!=1||a.firstChild!=i)return!1;if(a.classList.contains("cm-line"))break;i=a}let n=t.nodeType==1?t.getBoundingClientRect():gv(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function qP(t,e){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){for(let n of r.type)if(n.to>e||n.to==e&&(n.to==r.to||n.type==oo.Text))return n}return r}function Bme(t,e,r,n){let i=qP(t,e.head),a=!n||i.type!=oo.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(a){let o=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),l=t.posAtCoords({x:r==(s==Fn.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(l!=null)return it.cursor(l,r?-1:1)}return it.cursor(r?i.to:i.from,r?-1:1)}function T$(t,e,r,n){let i=t.state.doc.lineAt(e.head),a=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let s=e,l=null;;){let u=Eme(i,a,o,s,r),c=dZ;if(!u){if(i.number==(r?t.state.doc.lines:1))return s;c=`
`,i=t.state.doc.line(i.number+(r?1:-1)),a=t.bidiSpans(i),u=t.visualLineSide(i,!r)}if(l){if(!l(c))return s}else{if(!n)return u;l=n(c)}s=u}}function $me(t,e,r){let n=t.state.charCategorizer(e),i=n(r);return a=>{let o=n(a);return i==Vn.Space&&(i=o),i==o}}function zme(t,e,r,n){let i=e.head,a=r?1:-1;if(i==(r?t.state.doc.length:0))return it.cursor(i,e.assoc);let o=e.goalColumn,s,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),s=a<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),s=(a<0?d.top:d.bottom)+c}let f=l.left+o,h=n??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=s+(h+d)*a,v=TZ(t,{x:f,y:p},!1,a);if(p<l.top||p>l.bottom||(a<0?v<i:v>i)){let g=t.docView.coordsForChar(v),m=!g||p<g.top?-1:1;return it.cursor(v,m,void 0,o)}}}function b_(t,e,r){for(;;){let n=0;for(let i of t)i.between(e-1,e+1,(a,o,s)=>{if(e>a&&e<o){let l=n||r||(e-a<o-e?-1:1);e=l<0?a:o,n=l}});if(!n)return e}}function hO(t,e,r){let n=b_(t.state.facet(mN).map(i=>i(t)),r.from,e.head>r.from?-1:1);return n==r.from?r:it.cursor(n,n<r.from?1:-1)}class jme{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,er.safari&&e.contentDOM.addEventListener("input",()=>null),er.gecko&&nye(e.contentDOM.ownerDocument)}handleEvent(e){!qme(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,r){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,r);for(let i of n.handlers){if(r.defaultPrevented)break;if(i(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=Gme(e),n=this.handlers,i=this.view.contentDOM;for(let a in r)if(a!="scroll"){let o=!r[a].handlers.length,s=n[a];s&&o!=!s.handlers.length&&(i.removeEventListener(a,this.handleEvent),s=null),s||i.addEventListener(a,this.handleEvent,{passive:o})}for(let a in n)a!="scroll"&&!r[a]&&i.removeEventListener(a,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&IZ.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),er.android&&er.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return er.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=OZ.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Ume.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,P0(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:er.safari&&!er.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function O$(t,e){return(r,n)=>{try{return e.call(t,n,r)}catch(i){tl(r.state,i)}}}function Gme(t){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of t){let i=n.spec;if(i&&i.domEventHandlers)for(let a in i.domEventHandlers){let o=i.domEventHandlers[a];o&&r(a).handlers.push(O$(n.value,o))}if(i&&i.domEventObservers)for(let a in i.domEventObservers){let o=i.domEventObservers[a];o&&r(a).observers.push(O$(n.value,o))}}for(let n in Kl)r(n).handlers.push(Kl[n]);for(let n in Ql)r(n).observers.push(Ql[n]);return e}const OZ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ume="dthko",IZ=[16,17,18,20,91,92,224,225],bS=6;function xS(t){return Math.max(0,t)*.7+8}function Wme(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Vme{constructor(e,r,n,i){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=sme(e.contentDOM),this.atoms=e.state.facet(mN).map(o=>o(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(en.allowMultipleSelections)&&Hme(e,r),this.dragging=Yme(e,r)&&RZ(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var r;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Wme(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,a=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=kZ(this.view);e.clientX-o.left<=a.left+bS?n=-xS(a.left-e.clientX):e.clientX+o.right>=a.right-bS&&(n=xS(e.clientX-a.right)),e.clientY-o.top<=a.top+bS?i=-xS(a.top-e.clientY):e.clientY+o.bottom>=a.bottom-bS&&(i=xS(e.clientY-a.bottom)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let r=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],a=null;if(i.empty){let o=b_(this.atoms,i.from,0);o!=i.from&&(a=it.cursor(o,-1))}else{let o=b_(this.atoms,i.from,-1),s=b_(this.atoms,i.to,1);(o!=i.from||s!=i.to)&&(a=it.range(i.from==i.anchor?o:s,i.from==i.head?o:s))}a&&(r||(r=e.ranges.slice()),r[n]=a)}return r?it.create(r,e.mainIndex):e}select(e){let{view:r}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Hme(t,e){let r=t.state.facet(pZ);return r.length?r[0](e):er.mac?e.metaKey:e.ctrlKey}function Xme(t,e){let r=t.state.facet(vZ);return r.length?r[0](e):er.mac?!e.altKey:!e.ctrlKey}function Yme(t,e){let{main:r}=t.state.selection;if(r.empty)return!1;let n=N3(t.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let a=0;a<i.length;a++){let o=i[a];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function qme(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=t.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=Rn.get(r))&&n.ignoreEvent(e))return!1;return!0}const Kl=Object.create(null),Ql=Object.create(null),DZ=er.ie&&er.ie_version<15||er.ios&&er.webkit_version<604;function Kme(t){let e=t.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.remove(),PZ(t,r.value)},50)}function PZ(t,e){let{state:r}=t,n,i=1,a=r.toText(e),o=a.lines==r.selection.ranges.length;if(KP!=null&&r.selection.ranges.every(l=>l.empty)&&KP==a.toString()){let l=-1;n=r.changeByRange(u=>{let c=r.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=r.toText((o?a.line(i++).text:e)+r.lineBreak);return{changes:{from:c.from,insert:f},range:it.cursor(u.from+f.length)}})}else o?n=r.changeByRange(l=>{let u=a.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:it.cursor(l.from+u.length)}}):n=r.replaceSelection(a);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ql.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Kl.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);Ql.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ql.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Kl.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of t.state.facet(gZ))if(r=n(t,e),r)break;if(!r&&e.button==0&&(r=Jme(t,e)),r){let n=!t.hasFocus;t.inputState.startMouseSelection(new Vme(t,e,r,n)),n&&t.observer.ignore(()=>QQ(t.contentDOM));let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function I$(t,e,r,n){if(n==1)return it.cursor(e,r);if(n==2)return Pme(t.state,e,r);{let i=$i.find(t.docView,e),a=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<t.state.doc.length&&s==a.to&&s++,it.range(o,s)}}let LZ=(t,e)=>t>=e.top&&t<=e.bottom,D$=(t,e,r)=>LZ(e,r)&&t>=r.left&&t<=r.right;function Qme(t,e,r,n){let i=$i.find(t.docView,e);if(!i)return 1;let a=e-i.posAtStart;if(a==0)return 1;if(a==i.length)return-1;let o=i.coordsAt(a,-1);if(o&&D$(r,n,o))return-1;let s=i.coordsAt(a,1);return s&&D$(r,n,s)?1:o&&LZ(n,o)?-1:1}function P$(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:Qme(t,r,e.clientX,e.clientY)}}const Zme=er.ie&&er.ie_version<=11;let L$=null,R$=0,N$=0;function RZ(t){if(!Zme)return t.detail;let e=L$,r=N$;return L$=t,N$=Date.now(),R$=!e||r>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(R$+1)%3:1}function Jme(t,e){let r=P$(t,e),n=RZ(e),i=t.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),i=i.map(a.changes))},get(a,o,s){let l=P$(t,a),u,c=I$(t,l.pos,l.bias,n);if(r.pos!=l.pos&&!o){let f=I$(t,r.pos,r.bias,n),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?it.range(h,d):it.range(d,h)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&n==1&&i.ranges.length>1&&(u=eye(i,l.pos))?u:s?i.addRange(c):it.create([c])}}}function eye(t,e){for(let r=0;r<t.ranges.length;r++){let{from:n,to:i}=t.ranges[r];if(n<=e&&i>=e)return it.create(t.ranges.slice(0,r).concat(t.ranges.slice(r+1)),t.mainIndex==r?0:t.mainIndex-(t.mainIndex>r?1:0))}return null}Kl.dragstart=(t,e)=>{let{selection:{main:r}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let a=i.posAtStart,o=a+i.length;(a>=r.to||o<=r.from)&&(r=it.range(a,o))}}let{inputState:n}=t;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(r.from,r.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Kl.dragend=t=>(t.inputState.draggedContent=null,!1);function F$(t,e,r,n){if(!r)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=t.inputState,o=n&&a&&Xme(t,e)?{from:a.from,to:a.to}:null,s={from:i,insert:r},l=t.state.changes(o?[o,s]:s);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Kl.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),i=0,a=()=>{++i==r.length&&F$(t,e,n.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<r.length;o++){let s=new FileReader;s.onerror=a,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(n[o]=s.result),a()},s.readAsText(r[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return F$(t,e,n,!0),!0}return!1};Kl.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let r=DZ?null:e.clipboardData;return r?(PZ(t,r.getData("text/plain")||r.getData("text/uri-text")),!0):(Kme(t),!1)};function tye(t,e){let r=t.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function rye(t){let e=[],r=[],n=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),r.push(i));if(!e.length){let i=-1;for(let{from:a}of t.selection.ranges){let o=t.doc.lineAt(a);o.number>i&&(e.push(o.text),r.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}n=!0}return{text:e.join(t.lineBreak),ranges:r,linewise:n}}let KP=null;Kl.copy=Kl.cut=(t,e)=>{let{text:r,ranges:n,linewise:i}=rye(t.state);if(!r&&!i)return!1;KP=i?r:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=DZ?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",r),!0):(tye(t,r),!1)};const NZ=Sc.define();function FZ(t,e){let r=[];for(let n of t.facet(wZ)){let i=n(t,e);i&&r.push(i)}return r?t.update({effects:r,annotations:NZ.of(!0)}):null}function BZ(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let r=FZ(t.state,e);r?t.dispatch(r):t.update([])}},10)}Ql.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),BZ(t)};Ql.blur=t=>{t.observer.clearSelectionRange(),BZ(t)};Ql.compositionstart=Ql.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Ql.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,er.chrome&&er.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Ql.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Kl.beforeinput=(t,e)=>{var r;let n;if(er.chrome&&er.android&&(n=OZ.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let i=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const B$=new Set;function nye(t){B$.has(t)||(B$.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const $$=["pre-wrap","normal","pre-line","break-spaces"];class iye{constructor(e){this.lineWrapping=e,this.doc=hn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $$.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(r=!0,this.heightSamples[Math.floor(i*10)]=!0)}return r}refresh(e,r,n,i,a,o){let s=$$.indexOf(e)>-1,l=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=r,this.charWidth=n,this.textHeight=i,this.lineLength=a,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class aye{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class Xu{constructor(e,r,n,i,a){this.from=e,this.length=r,this.top=n,this.height=i,this._content=a}get type(){return typeof this._content=="number"?oo.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Sd?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Xu(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var Pn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Pn||(Pn={}));const x_=.001;class so{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,r){this.height!=r&&(Math.abs(this.height-r)>x_&&(e.heightChanged=!0),this.height=r)}replace(e,r,n){return so.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,i){let a=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:f}=i[s],h=a.lineAt(l,Pn.ByPosNoHeight,n.setDoc(r),0,0),d=h.to>=u?h:a.lineAt(u,Pn.ByPosNoHeight,n,0,0);for(f+=d.to-u,u=d.to;s>0&&h.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<h.from&&(h=a.lineAt(l,Pn.ByPosNoHeight,n,0,0));c+=h.from-l,l=h.from;let p=yN.build(n.setDoc(o),e,c,f);a=a.replace(l,u,p)}return a.updateHeight(n,0)}static empty(){return new Jo(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,i=0,a=0;for(;;)if(r==n)if(i>a*2){let s=e[r-1];s.break?e.splice(--r,1,s.left,null,s.right):e.splice(--r,1,s.left,s.right),n+=1+s.break,i-=s.size}else if(a>i*2){let s=e[n];s.break?e.splice(n,1,s.left,null,s.right):e.splice(n,1,s.left,s.right),n+=2+s.break,a-=s.size}else break;else if(i<a){let s=e[r++];s&&(i+=s.size)}else{let s=e[--n];s&&(a+=s.size)}let o=0;return e[r-1]==null?(o=1,r--):e[r]==null&&(o=1,n++),new oye(so.of(e.slice(0,r)),o,so.of(e.slice(n)))}}so.prototype.size=1;class $Z extends so{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,i){return new Xu(i,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,i,a){return this.blockAt(0,n,i,a)}forEachLine(e,r,n,i,a,o){e<=a+this.length&&r>=a&&o(this.blockAt(0,n,i,a))}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Jo extends $Z{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,i){return new Xu(i,this.length,n,this.height,this.breaks)}replace(e,r,n){let i=n[0];return n.length==1&&(i instanceof Jo||i instanceof pa&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof pa?i=new Jo(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):so.of(n)}updateHeight(e,r=0,n=!1,i){return i&&i.from<=r&&i.more?this.setHeight(e,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class pa extends so{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,i=e.doc.lineAt(r+this.length).number,a=i-n+1,o,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);o=l/a,this.length>a+1&&(s=(this.height-l)/(this.length-a-1))}else o=this.height/a;return{firstLine:n,lastLine:i,perLine:o,perChar:s}}blockAt(e,r,n,i){let{firstLine:a,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(r,i);if(r.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),c=r.doc.lineAt(u),f=s+c.length*l,h=Math.max(n,e-f/2);return new Xu(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(o-a,Math.floor((e-n)/s))),{from:c,length:f}=r.doc.line(a+u);return new Xu(c,f,n+s*u,s,0)}}lineAt(e,r,n,i,a){if(r==Pn.ByHeight)return this.blockAt(e,n,i,a);if(r==Pn.ByPosNoHeight){let{from:d,to:p}=n.doc.lineAt(e);return new Xu(d,p-d,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(n,a),u=n.doc.lineAt(e),c=s+u.length*l,f=u.number-o,h=i+s*f+l*(u.from-a-f);return new Xu(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,r,n,i,a,o){e=Math.max(e,a),r=Math.min(r,a+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(n,a);for(let c=e,f=i;c<=r;){let h=n.doc.lineAt(c);if(c==e){let p=h.number-s;f+=l*p+u*(e-a-p)}let d=l+u*h.length;o(new Xu(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,r,n){let i=this.length-r;if(i>0){let a=n[n.length-1];a instanceof pa?n[n.length-1]=new pa(a.length+i):n.push(null,new pa(i-1))}if(e>0){let a=n[0];a instanceof pa?n[0]=new pa(e+a.length):n.unshift(new pa(e-1),null)}return so.of(n)}decomposeLeft(e,r){r.push(new pa(e-1),null)}decomposeRight(e,r){r.push(null,new pa(this.length-e-1))}updateHeight(e,r=0,n=!1,i){let a=r+this.length;if(i&&i.from<=r+this.length&&i.more){let o=[],s=Math.max(r,i.from),l=-1;for(i.from>r&&o.push(new pa(i.from-r-1).updateHeight(e,r));s<=a&&i.more;){let c=e.doc.lineAt(s).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=x_&&(l=-2);let h=new Jo(c,f);h.outdated=!1,o.push(h),s+=c+1}s<=a&&o.push(null,new pa(a-s).updateHeight(e,s));let u=so.of(o);return(l<0||Math.abs(u.height-this.height)>=x_||Math.abs(l-this.heightMetrics(e,r).perLine)>=x_)&&(e.heightChanged=!0),u}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class oye extends so{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,i){let a=n+this.left.height;return e<a?this.left.blockAt(e,r,n,i):this.right.blockAt(e,r,a,i+this.left.length+this.break)}lineAt(e,r,n,i,a){let o=i+this.left.height,s=a+this.left.length+this.break,l=r==Pn.ByHeight?e<o:e<s,u=l?this.left.lineAt(e,r,n,i,a):this.right.lineAt(e,r,n,o,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=r==Pn.ByPosNoHeight?Pn.ByPosNoHeight:Pn.ByPos;return l?u.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,a).join(u)}forEachLine(e,r,n,i,a,o){let s=i+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,r,n,i,a,o),r>=l&&this.right.forEachLine(e,r,n,s,l,o);else{let u=this.lineAt(l,Pn.ByPos,n,i,a);e<u.from&&this.left.forEachLine(e,u.from-1,n,i,a,o),u.to>=e&&u.from<=r&&o(u),r>u.to&&this.right.forEachLine(u.to+1,r,n,s,l,o)}}replace(e,r,n){let i=this.left.length+this.break;if(r<i)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,r-i,n));let a=[];e>0&&this.decomposeLeft(e,a);let o=a.length;for(let s of n)a.push(s);if(e>0&&z$(a,o-1),r<this.length){let s=a.length;this.decomposeRight(r,a),z$(a,s)}return so.of(a)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<i&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?so.of(this.break?[e,null,r]:[e,r]):(this.left=e,this.right=r,this.height=e.height+r.height,this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,i){let{left:a,right:o}=this,s=r+a.length+this.break,l=null;return i&&i.from<=r+a.length&&i.more?l=a=a.updateHeight(e,r,n,i):a.updateHeight(e,r,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,n,i):o.updateHeight(e,s,n),l?this.balanced(a,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function z$(t,e){let r,n;t[e]==null&&(r=t[e-1])instanceof pa&&(n=t[e+1])instanceof pa&&t.splice(e-1,3,new pa(r.length+1+n.length))}const sye=5;class yN{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Jo?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Jo(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=r-e;n.block?this.addBlock(new $Z(o,i,n)):(o||a||i>=sye)&&this.addLineDeco(i,a,o)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new pa(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jo)return e;let r=new Jo(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof Jo)&&!this.isCovered?this.nodes.push(new Jo(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Jo&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,r,n,i){let a=new yN(n,e);return tn.spans(r,n,i,a,0),a.finish(n)}}function lye(t,e,r){let n=new uye;return tn.compare(t,e,r,n,0),n.changes}class uye{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,i){(e<r||n&&n.heightRelevant||i&&i.heightRelevant)&&UP(e,r,this.changes,5)}}function cye(t,e){let r=t.getBoundingClientRect(),n=t.ownerDocument,i=n.defaultView||window,a=Math.max(0,r.left),o=Math.min(i.innerWidth,r.right),s=Math.max(0,r.top),l=Math.min(i.innerHeight,r.bottom);for(let u=t.parentNode;u&&u!=n.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();a=Math.max(a,h.left),o=Math.min(o,h.right),s=Math.max(s,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:a-r.left,right:Math.max(a,o)-r.left,top:s-(r.top+e),bottom:Math.max(s,l)-(r.top+e)}}function fye(t,e){let r=t.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class dO{constructor(e,r,n){this.from=e,this.to=r,this.size=n}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],a=r[n];if(i.from!=a.from||i.to!=a.to||i.size!=a.size)return!1}return!0}draw(e,r){return hr.replace({widget:new hye(this.size*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class hye extends Pf{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class j${constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=G$,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Fn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(gN).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new iye(r),this.stateDeco=e.facet(Q2).filter(n=>typeof n!="function"),this.heightMap=so.empty().applyChanges(this.stateDeco,hn.empty,this.heightOracle.setDoc(e.doc),[new rl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=hr.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let i=n?r.head:r.anchor;if(!e.some(({from:a,to:o})=>i>=a&&i<=o)){let{from:a,to:o}=this.lineBlockAt(i);e.push(new SS(a,o))}}this.viewports=e.sort((n,i)=>n.from-i.from),this.scaler=this.heightMap.height<=7e6?G$:new vye(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:P1(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Q2).filter(c=>typeof c!="function");let i=e.changedRanges,a=rl.extendWithRanges(i,lye(n,this.stateDeco,e?e.changes:Gi.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<l.from||r.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,r));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(xZ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),i=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Fn.RTL:Fn.LTR;let o=this.heightOracle.mustRefreshForWrapping(a),s=r.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0;if(s.width&&s.height){let{scaleX:b,scaleY:x}=KQ(r,s);(this.scaleX!=b||this.scaleY!=x)&&(this.scaleX=b,this.scaleY=x,u|=8,o=l=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=JQ(e.scrollDOM);let p=(this.printing?fye:cye)(r,this.paddingTop),v=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=s.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:x,charWidth:S,textHeight:E}=e.docView.measureTextSize();o=x>0&&i.refresh(a,x,S,E,y/S,b),o&&(e.docView.minWidth=0,u|=8)}v>0&&g>0?c=Math.max(v,g):v<0&&g<0&&(c=Math.min(v,g)),i.heightChanged=!1;for(let x of this.viewports){let S=x.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(x);this.heightMap=(o?so.empty().applyChanges(this.stateDeco,hn.empty,this.heightOracle,[new rl(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new aye(x.from,S))}i.heightChanged&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,a=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new SS(i.lineAt(o-n*1e3,Pn.ByHeight,a,0,0).from,i.lineAt(s+(1-n)*1e3,Pn.ByHeight,a,0,0).to);if(r){let{head:u}=r.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,Pn.ByPos,a,0,0),h;r.y=="center"?h=(f.top+f.bottom)/2-c/2:r.y=="start"||r.y=="nearest"&&u<l.from?h=f.top:h=f.bottom-c,l=new SS(i.lineAt(h-1e3/2,Pn.ByHeight,a,0,0).from,i.lineAt(h+c+1e3/2,Pn.ByHeight,a,0,0).to)}}return l}mapViewport(e,r){let n=r.mapPos(e.from,-1),i=r.mapPos(e.to,1);return new SS(this.heightMap.lineAt(n,Pn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Pn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Pn.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(r,Pn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||a>=s+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&a<s+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let i of e)r.touchesRange(i.from,i.to)||n.push(new dO(r.mapPos(i.from),r.mapPos(i.to),i.size));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,a=i>>1,o=i<<1;if(this.defaultTextDirection!=Fn.LTR&&!n)return[];let s=[],l=(u,c,f,h)=>{if(c-u<a)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let g of p)if(g>u&&g<c){l(u,g-10,f,h),l(g+10,c,f,h);return}let v=pye(e,g=>g.from>=f.from&&g.to<=f.to&&Math.abs(g.from-u)<a&&Math.abs(g.to-c)<a&&!p.some(m=>g.from<m&&g.to>m));if(!v){if(c<f.to&&r&&n&&r.visibleRanges.some(g=>g.from<=c&&g.to>=c)){let g=r.moveToLineBoundary(it.cursor(c),!1,!0).head;g>u&&(c=g)}v=new dO(u,c,this.gapSize(f,u,c,h))}s.push(v)};for(let u of this.viewportLines){if(u.length<o)continue;let c=dye(u.from,u.to,this.stateDeco);if(c.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(n){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,g;if(f!=null){let m=_S(c,f),y=((this.visibleBottom-this.visibleTop)/2+p)/u.height;v=m-y,g=m+y}else v=(this.visibleTop-u.top-p)/u.height,g=(this.visibleBottom-u.top+p)/u.height;h=ES(c,v),d=ES(c,g)}else{let p=c.total*this.heightOracle.charWidth,v=i*this.heightOracle.charWidth,g,m;if(f!=null){let y=_S(c,f),w=((this.pixelViewport.right-this.pixelViewport.left)/2+v)/p;g=y-w,m=y+w}else g=(this.pixelViewport.left-v)/p,m=(this.pixelViewport.right+v)/p;h=ES(c,g),d=ES(c,m)}h>u.from&&l(u.from,h,u,c),d<u.to&&l(d,u.to,u,c)}return s}gapSize(e,r,n,i){let a=_S(i,n)-_S(i,r);return this.heightOracle.lineWrapping?e.height*a:i.total*this.heightOracle.charWidth*a}updateLineGaps(e){dO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=hr.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];tn.spans(e,this.viewport.from,this.viewport.to,{span(i,a){r.push({from:i,to:a})},point(){}},20);let n=r.length!=this.visibleRanges.length||this.visibleRanges.some((i,a)=>i.from!=r[a].from||i.to!=r[a].to);return this.visibleRanges=r,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||P1(this.heightMap.lineAt(e,Pn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return P1(this.heightMap.lineAt(this.scaler.fromDOM(e),Pn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return P1(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class SS{constructor(e,r){this.from=e,this.to=r}}function dye(t,e,r){let n=[],i=t,a=0;return tn.spans(r,t,e,{span(){},point(o,s){o>i&&(n.push({from:i,to:o}),a+=o-i),i=s}},20),i<e&&(n.push({from:i,to:e}),a+=e-i),{total:a,ranges:n}}function ES({total:t,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(t*r);for(let i=0;;i++){let{from:a,to:o}=e[i],s=o-a;if(n<=s)return a+n;n-=s}}function _S(t,e){let r=0;for(let{from:n,to:i}of t.ranges){if(e<=i){r+=e-n;break}r+=i-n}return r/t.total}function pye(t,e){for(let r of t)if(e(r))return r}const G$={toDOM(t){return t},fromDOM(t){return t},scale:1};class vye{constructor(e,r,n){let i=0,a=0,o=0;this.viewports=n.map(({from:s,to:l})=>{let u=r.lineAt(s,Pn.ByPos,e,0,0).top,c=r.lineAt(l,Pn.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(r.height-i);for(let s of this.viewports)s.domTop=o+(s.top-a)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),a=s.bottom}toDOM(e){for(let r=0,n=0,i=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.top)return i+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,i=a.domBottom}}fromDOM(e){for(let r=0,n=0,i=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.domTop)return n+(e-i)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,i=a.domBottom}}}function P1(t,e){if(e.scale==1)return t;let r=e.toDOM(t.top),n=e.toDOM(t.bottom);return new Xu(t.from,t.length,r,n-r,Array.isArray(t._content)?t._content.map(i=>P1(i,e)):t._content)}const CS=Qt.define({combine:t=>t.join(" ")}),QP=Qt.define({combine:t=>t.indexOf(!0)>-1}),ZP=bd.newName(),zZ=bd.newName(),jZ=bd.newName(),GZ={"&light":"."+zZ,"&dark":"."+jZ};function JP(t,e,r){return new bd(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return t;if(!r||!r[i])throw new RangeError(`Unsupported selector: ${i}`);return r[i]}):t+" "+n}})}const gye=JP("."+ZP,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},GZ),L1="￿";class mye{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(en.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=L1}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let a=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==r)break;let s=Rn.get(i),l=Rn.get(o);(s&&l?s.breakAfter:(s?s.breakAfter:U$(i))||U$(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>a)&&this.lineBreak(),i=o}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,o=1,s;if(this.lineSeparator?(a=r.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(r))&&(a=s.index,o=s[0].length),this.append(r.slice(n,a<0?r.length:a)),a<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=a+o}}readNode(e){if(e.cmIgnore)return;let r=Rn.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(yye(e,n.node,n.offset)?r:0))}}function yye(t,e,r){for(;;){if(!e||r<Cf(e))return!1;if(e==t)return!0;r=K2(e)+1,e=e.parentNode}}function U$(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class W${constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class wye{constructor(e,r,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let s=a||o?[]:Sye(e),l=new mye(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Eye(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=a&&a.node==s.focusNode&&a.offset==s.focusOffset||!FP(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=o&&o.node==s.anchorNode&&o.offset==s.anchorOffset||!FP(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),c=e.viewport;if((er.ios||er.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let f=Math.min(l,u),h=Math.max(l,u),d=c.from-f,p=c.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=it.single(u,l)}}}function UZ(t,e){let r,{newSel:n}=e,i=t.state.selection.main,a=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,l=i.from,u=null;(a===8||er.android&&e.text.length<s-o)&&(l=i.to,u="end");let c=xye(t.state.doc.sliceString(o,s,L1),e.text,l-o,u);c&&(er.chrome&&a==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==L1+L1&&c.toB--,r={from:o+c.from,to:o+c.toA,insert:hn.of(e.text.slice(c.from,c.toB).split(L1))})}else n&&(!t.hasFocus&&t.state.facet(nM)||n.main.eq(i))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!i.empty&&n&&n.main.empty?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:r&&r.from>=i.from&&r.to<=i.to&&(r.from!=i.from||r.to!=i.to)&&i.to-i.from-(r.to-r.from)<=4?r={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,i.to))}:(er.mac||er.android)&&r&&r.from==r.to&&r.from==i.head-1&&/^\. ?$/.test(r.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=it.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:hn.of([" "])}):er.chrome&&r&&r.from==r.to&&r.from==i.head&&r.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=it.single(n.main.anchor-1,n.main.head-1)),r={from:i.from,to:i.to,insert:hn.of([" "])}),r){if(er.ios&&t.inputState.flushIOSKey()||er.android&&(r.from==i.from&&r.to==i.to&&r.insert.length==1&&r.insert.lines==2&&P0(t.contentDOM,"Enter",13)||(r.from==i.from-1&&r.to==i.to&&r.insert.length==0||a==8&&r.insert.length<r.to-r.from&&r.to>i.head)&&P0(t.contentDOM,"Backspace",8)||r.from==i.from&&r.to==i.to+1&&r.insert.length==0&&P0(t.contentDOM,"Delete",46)))return!0;let o=r.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let s,l=()=>s||(s=bye(t,r,n));return t.state.facet(yZ).some(u=>u(t,r.from,r.to,o,l))||t.dispatch(l()),!0}else if(n&&!n.main.eq(i)){let o=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),s=t.inputState.lastSelectionOrigin),t.dispatch({selection:n,scrollIntoView:o,userEvent:s}),!0}else return!1}function bye(t,e,r){let n,i=t.state,a=i.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let s=a.from<e.from?i.sliceDoc(a.from,e.from):"",l=a.to>e.to?i.sliceDoc(e.to,a.to):"";n=i.replaceSelection(t.state.toText(s+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let s=i.changes(e),l=r&&r.main.to<=s.newLength?r.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let u=t.state.sliceDoc(e.from,e.to),c,f=r&&MZ(t,r.main.head);if(f){let p=e.insert.length-(e.to-e.from);c={from:f.from,to:f.to-p}}else c=t.state.doc.lineAt(a.head);let h=a.to-e.to,d=a.to-a.from;n=i.changeByRange(p=>{if(p.from==a.from&&p.to==a.to)return{changes:s,range:l||p.map(s)};let v=p.to-h,g=v-u.length;if(p.to-p.from!=d||t.state.sliceDoc(g,v)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let m=i.changes({from:g,to:v,insert:e.insert}),y=p.to-a.to;return{changes:m,range:l?it.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(m)}})}else n={changes:s,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function xye(t,e,r,n){let i=Math.min(t.length,e.length),a=0;for(;a<i&&t.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==i&&t.length==e.length)return null;let o=t.length,s=e.length;for(;o>0&&s>0&&t.charCodeAt(o-1)==e.charCodeAt(s-1);)o--,s--;if(n=="end"){let l=Math.max(0,a-Math.min(o,s));r-=o+l-a}if(o<a&&t.length<e.length){let l=r<=a&&r>=o?a-r:0;a-=l,s=a+(s-o),o=a}else if(s<a){let l=r<=a&&r>=s?a-r:0;a-=l,o=a+(o-s),s=a}return{from:a,toA:o,toB:s}}function Sye(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:a}=t.observer.selectionRange;return r&&(e.push(new W$(r,n)),(i!=r||a!=n)&&e.push(new W$(i,a))),e}function Eye(t,e){if(t.length==0)return null;let r=t[0].pos,n=t.length==2?t[1].pos:r;return r>-1&&n>-1?it.single(r+e,n+e):null}const _ye={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},pO=er.ie&&er.ie_version<=11;class Cye{constructor(e){this.view=e,this.active=!1,this.selectionRange=new lme,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(er.ie&&er.ie_version<=11||er.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),pO&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(nM)?n.root.activeElement!=this.dom:!w_(n.dom,i))return;let a=i.anchorNode&&n.docView.nearest(i.anchorNode);if(a&&a.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(er.ie&&er.ie_version<=11||er.android&&er.chrome)&&!n.state.selection.main.empty&&i.focusNode&&u2(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=er.safari&&e.root.nodeType==11&&ime(this.dom.ownerDocument)==this.dom&&kye(this.view)||N3(e.root);if(!r||this.selectionRange.eq(r))return!1;let n=w_(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&cme(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,_ye),pO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),pO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let i=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&P0(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,i=!1;for(let a of e){let o=this.readMutation(a);o&&(o.typeOver&&(i=!0),r==-1?{from:r,to:n}=o:(r=Math.min(o.from,r),n=Math.max(o.to,n)))}return{from:r,to:n,typeOver:i}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),i=this.selectionChanged&&w_(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new wye(this.view,e,r,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,i=UZ(this.view,r);return this.view.state==n&&this.view.update([]),i}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=V$(r,e.previousSibling||e.target.previousSibling,-1),i=V$(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:i?r.posBefore(i):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function V$(t,e,r){for(;e;){let n=Rn.get(e);if(n&&n.parent==t)return n;let i=e.parentNode;e=i!=t.dom?i:r>0?e.nextSibling:e.previousSibling}return null}function kye(t){let e=null;function r(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),!e)return null;let n=e.startContainer,i=e.startOffset,a=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return u2(s.node,s.offset,a,o)&&([n,i,a,o]=[a,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o}}class Wt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(i=>r(i,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ume(e.parent)||document,this.viewState=new j$(e.state||en.create(e)),e.scrollTo&&e.scrollTo.is(wS)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(I1).map(n=>new cO(n));for(let n of this.plugins)n.update(this);this.observer=new Cye(this),this.inputState=new jme(this),this.inputState.ensureHandlers(this.plugins),this.docView=new E$(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let r=e.length==1&&e[0]instanceof Vi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,i,a=this.state;for(let h of e){if(h.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=h.state}if(this.destroyed){this.viewState.state=a;return}let o=this.hasFocus,s=0,l=null;e.some(h=>h.annotation(NZ))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=FZ(a,o),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(c=null)):this.observer.clear(),a.facet(en.phrases)!=this.state.facet(en.phrases))return this.setState(a);i=F3.create(this,a,e),i.flags|=s;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new L0(d.empty?d:it.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(wS)&&(f=d.value.clip(this.state))}this.viewState.update(i,f),this.bidiCache=B3.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),r=this.docView.update(i),this.state.facet(D1)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(CS)!=i.state.facet(CS)&&(this.viewState.mustMeasureContent=!0),(r||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(XP))try{h(i)}catch(d){tl(this.state,d,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!UZ(this,c)&&u.force&&P0(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new j$(e),this.plugins=e.facet(I1).map(n=>new cO(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new E$(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(I1),n=e.state.facet(I1);if(r!=n){let i=[];for(let a of n){let o=r.indexOf(a);if(o<0)i.push(new cO(a));else{let s=this.plugins[o];s.mustUpdate=e,i.push(s)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(o<0)if(JQ(n))a=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);a=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return tl(this.state,p),H$}}),f=F3.create(this,this.state,[]),h=!1;f.flags|=l,r?r.flags|=l:r=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f));for(let d=0;d<u.length;d++)if(c[d]!=H$)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){tl(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-o;if(p>1||p<-1){i=i+p,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let s of this.state.facet(XP))s(r)}get themeClasses(){return ZP+" "+(this.state.facet(QP)?jZ:zZ)+" "+this.state.facet(CS)}updateAttrs(){let e=X$(this,SZ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(nM)?"true":"false",class:"cm-content",style:`${er.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),X$(this,gN,r);let n=this.observer.ignore(()=>{let i=GP(this.contentDOM,this.contentAttrs,r),a=GP(this.dom,this.editorAttrs,e);return i||a});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let i of n.effects)if(i.is(Wt.announce)){r&&(this.announceDOM.textContent=""),r=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(D1);let e=this.state.facet(Wt.cspNonce);bd.mount(this.root,this.styleModules.concat(gye).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return hO(this,e,T$(this,e,r,n))}moveByGroup(e,r){return hO(this,e,T$(this,e,r,n=>$me(this,e.head,n)))}visualLineSide(e,r){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),a=n[r?n.length-1:0];return it.cursor(a.side(r,i)+e.from,a.forward(!r,i)?1:-1)}moveToLineBoundary(e,r,n=!0){return Bme(this,e,r,n)}moveVertically(e,r,n){return hO(this,e,zme(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),TZ(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),a=this.bidiSpans(i),o=a[Yh.find(a,e-i.from,-1,r)];return tM(n,o.dir==Fn.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(bZ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Mye)return hZ(e.length);let r=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==r&&(a.fresh||fZ(a.isolates,n=S$(this,e))))return a.order;n||(n=S$(this,e));let i=Sme(e.text,r,n);return this.bidiCache.push(new B3(e.from,e.to,r,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||er.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{QQ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return wS.of(new L0(typeof e=="number"?it.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return wS.of(new L0(it.cursor(n.from),"start","start",n.top-e,r,!0))}static domEventHandlers(e){return Si.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Si.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=bd.newName(),i=[CS.of(n),D1.of(JP(`.${n}`,e))];return r&&r.dark&&i.push(QP.of(!0)),i}static baseTheme(e){return ty.lowest(D1.of(JP("."+ZP,e,GZ)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),i=n&&Rn.get(n)||Rn.get(e);return((r=i==null?void 0:i.rootView)===null||r===void 0?void 0:r.view)||null}}Wt.styleModule=D1;Wt.inputHandler=yZ;Wt.focusChangeEffect=wZ;Wt.perLineTextDirection=bZ;Wt.exceptionSink=mZ;Wt.updateListener=XP;Wt.editable=nM;Wt.mouseSelectionStyle=gZ;Wt.dragMovesSelection=vZ;Wt.clickAddsSelectionRange=pZ;Wt.decorations=Q2;Wt.outerDecorations=EZ;Wt.atomicRanges=mN;Wt.bidiIsolatedRanges=_Z;Wt.scrollMargins=CZ;Wt.darkTheme=QP;Wt.cspNonce=Qt.define({combine:t=>t.length?t[0]:""});Wt.contentAttributes=gN;Wt.editorAttributes=SZ;Wt.lineWrapping=Wt.contentAttributes.of({class:"cm-lineWrapping"});Wt.announce=Br.define();const Mye=4096,H$={};class B3{constructor(e,r,n,i,a,o){this.from=e,this.to=r,this.dir=n,this.isolates=i,this.fresh=a,this.order=o}static update(e,r){if(r.empty&&!e.some(a=>a.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Fn.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let o=e[a];o.dir==i&&!r.touchesRange(o.from,o.to)&&n.push(new B3(r.mapPos(o.from,1),r.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function X$(t,e,r){for(let n=t.state.facet(e),i=n.length-1;i>=0;i--){let a=n[i],o=typeof a=="function"?a(t):a;o&&jP(o,r)}return r}const Aye=er.mac?"mac":er.windows?"win":er.linux?"linux":"key";function Tye(t,e){const r=t.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let i,a,o,s;for(let l=0;l<r.length-1;++l){const u=r[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))a=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:a=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),a&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function kS(t,e,r){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Oye=ty.default(Wt.domEventHandlers({keydown(t,e){return VZ(WZ(e.state),t,e,"editor")}})),iM=Qt.define({enables:Oye}),Y$=new WeakMap;function WZ(t){let e=t.facet(iM),r=Y$.get(e);return r||Y$.set(e,r=Pye(e.reduce((n,i)=>n.concat(i),[]))),r}function Iye(t,e,r){return VZ(WZ(t.state),e,t,r)}let Lh=null;const Dye=4e3;function Pye(t,e=Aye){let r=Object.create(null),n=Object.create(null),i=(o,s)=>{let l=n[o];if(l==null)n[o]=s;else if(l!=s)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},a=(o,s,l,u,c)=>{var f,h;let d=r[o]||(r[o]=Object.create(null)),p=s.split(/ (?!$)/).map(m=>Tye(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");i(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let b=Lh={view:w,prefix:y,scope:o};return setTimeout(()=>{Lh==b&&(Lh=null)},Dye),!0}]})}let v=p.join(" ");i(v,!1);let g=d[v]||(d[v]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});l&&g.run.push(l),u&&(g.preventDefault=!0),c&&(g.stopPropagation=!0)};for(let o of t){let s=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of s){let c=r[u]||(r[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in c)c[f].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of s)a(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return r}function VZ(t,e,r,n){let i=nme(e),a=ga(i,0),o=Ks(a)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;Lh&&Lh.view==r&&Lh.scope==n&&(s=Lh.prefix+" ",IZ.indexOf(e.keyCode)<0&&(u=!0,Lh=null));let f=new Set,h=g=>{if(g){for(let m of g.run)if(!f.has(m)&&(f.add(m),m(r,e)))return g.stopPropagation&&(c=!0),!0;g.preventDefault&&(g.stopPropagation&&(c=!0),u=!0)}return!1},d=t[n],p,v;return d&&(h(d[s+kS(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(er.windows&&e.ctrlKey&&e.altKey)&&(p=xd[e.keyCode])&&p!=i?(h(d[s+kS(p,e,!0)])||e.shiftKey&&(v=q2[e.keyCode])!=i&&v!=p&&h(d[s+kS(v,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(d[s+kS(i,e,!0)])&&(l=!0),!l&&h(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class cb{constructor(e,r,n,i,a){this.className=e,this.left=r,this.top=n,this.width=i,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let a=HZ(e);return[new cb(r,i.left-a.left,i.top-a.top,null,i.bottom-i.top)]}else return Lye(e,r,n)}}function HZ(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Fn.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function q$(t,e,r){let n=it.cursor(e);return{from:Math.max(r.from,t.moveToLineBoundary(n,!1,!0).from),to:Math.min(r.to,t.moveToLineBoundary(n,!0,!0).from),type:oo.Text}}function Lye(t,e,r){if(r.to<=t.viewport.from||r.from>=t.viewport.to)return[];let n=Math.max(r.from,t.viewport.from),i=Math.min(r.to,t.viewport.to),a=t.textDirection==Fn.LTR,o=t.contentDOM,s=o.getBoundingClientRect(),l=HZ(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=s.right-(c?parseInt(c.paddingRight):0),d=qP(t,n),p=qP(t,i),v=d.type==oo.Text?d:null,g=p.type==oo.Text?p:null;if(v&&(t.lineWrapping||d.widgetLineBreaks)&&(v=q$(t,n,v)),g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=q$(t,i,g)),v&&g&&v.from==g.from)return y(w(r.from,r.to,v));{let x=v?w(r.from,null,v):b(d,!1),S=g?w(null,r.to,g):b(p,!0),E=[];return(v||d).to<(g||p).from-(v&&g?1:0)||d.widgetLineBreaks>1&&x.bottom+t.defaultLineHeight/2<S.top?E.push(m(f,x.bottom,h,S.top)):x.bottom<S.top&&t.elementAtHeight((x.bottom+S.top)/2).type==oo.Text&&(x.bottom=S.top=(x.bottom+S.top)/2),y(x).concat(E).concat(y(S))}function m(x,S,E,_){return new cb(e,x-l.left,S-l.top-.01,E-x,_-S+.01)}function y({top:x,bottom:S,horizontal:E}){let _=[];for(let k=0;k<E.length;k+=2)_.push(m(E[k],x,E[k+1],S));return _}function w(x,S,E){let _=1e9,k=-1e9,C=[];function M(D,F,R,B,N){let O=t.coordsAtPos(D,D==E.to?-2:2),L=t.coordsAtPos(R,R==E.from?2:-2);!O||!L||(_=Math.min(O.top,L.top,_),k=Math.max(O.bottom,L.bottom,k),N==Fn.LTR?C.push(a&&F?f:O.left,a&&B?h:L.right):C.push(!a&&B?f:L.left,!a&&F?h:O.right))}let A=x??E.from,T=S??E.to;for(let D of t.visibleRanges)if(D.to>A&&D.from<T)for(let F=Math.max(D.from,A),R=Math.min(D.to,T);;){let B=t.state.doc.lineAt(F);for(let N of t.bidiSpans(B)){let O=N.from+B.from,L=N.to+B.from;if(O>=R)break;L>F&&M(Math.max(O,F),x==null&&O<=A,Math.min(L,R),S==null&&L>=T,N.dir)}if(F=B.to+1,F>=R)break}return C.length==0&&M(A,x==null,T,S==null,t.textDirection),{top:_,bottom:k,horizontal:C}}function b(x,S){let E=s.top+(S?x.top:x.bottom);return{top:E,bottom:E,horizontal:[]}}}function Rye(t,e){return t.constructor==e.constructor&&t.eq(e)}class Nye{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(S_)!=e.state.facet(S_)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let r=0,n=e.facet(S_);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!Rye(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let i of e)i.update&&r&&i.constructor&&this.drawn[n].constructor&&i.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(i.draw(),r);for(;r;){let i=r.nextSibling;r.remove(),r=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const S_=Qt.define();function XZ(t){return[Si.define(e=>new Nye(e,t)),S_.of(t)]}const YZ=!er.ios,Z2=Qt.define({combine(t){return Ec(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function Fye(t={}){return[Z2.of(t),Bye,$ye,zye,xZ.of(!0)]}function qZ(t){return t.startState.facet(Z2)!=t.state.facet(Z2)}const Bye=XZ({above:!0,markers(t){let{state:e}=t,r=e.facet(Z2),n=[];for(let i of e.selection.ranges){let a=i==e.selection.main;if(i.empty?!a||YZ:r.drawRangeCursor){let o=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:it.cursor(i.head,i.head>i.anchor?-1:1);for(let l of cb.forRange(t,o,s))n.push(l)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=qZ(t);return r&&K$(t.state,e),t.docChanged||t.selectionSet||r},mount(t,e){K$(e.state,t)},class:"cm-cursorLayer"});function K$(t,e){e.style.animationDuration=t.facet(Z2).cursorBlinkRate+"ms"}const $ye=XZ({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:cb.forRange(t,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||qZ(t)},class:"cm-selectionLayer"}),e5={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};YZ&&(e5[".cm-line"].caretColor="transparent !important",e5[".cm-content"]={caretColor:"transparent !important"});const zye=ty.highest(Wt.theme(e5)),KZ=Br.define({map(t,e){return t==null?null:e.mapPos(t)}}),R1=Ca.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((r,n)=>n.is(KZ)?n.value:r,t)}}),jye=Si.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let r=t.state.field(R1);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(R1)!=r||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(R1),r=e!=null&&t.coordsAtPos(e);if(!r)return null;let n=t.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+t.scrollDOM.scrollLeft*t.scaleX,top:r.top-n.top+t.scrollDOM.scrollTop*t.scaleY,height:r.bottom-r.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/r+"px",this.cursor.style.height=t.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(R1)!=t&&this.view.dispatch({effects:KZ.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Gye(){return[R1,jye]}function Q$(t,e,r,n,i){e.lastIndex=0;for(let a=t.iterRange(r,n),o=r,s;!a.next().done;o+=a.value.length)if(!a.lineBreak)for(;s=e.exec(a.value);)i(o+s.index,s)}function Uye(t,e){let r=t.visibleRanges;if(r.length==1&&r[0].from==t.viewport.from&&r[0].to==t.viewport.to)return r;let n=[];for(let{from:i,to:a}of r)i=Math.max(t.state.doc.lineAt(i).from,i-e),a=Math.min(t.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=a:n.push({from:i,to:a});return n}class Wye{constructor(e){const{regexp:r,decoration:n,decorate:i,boundary:a,maxLength:o=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,i)this.addMatch=(s,l,u,c)=>i(c,u,u+s[0].length,s,l);else if(typeof n=="function")this.addMatch=(s,l,u,c)=>{let f=n(s,l,u);f&&c(u,u+s[0].length,f)};else if(n)this.addMatch=(s,l,u,c)=>c(u,u+s[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=o}createDeco(e){let r=new wd,n=r.add.bind(r);for(let{from:i,to:a}of Uye(e,this.maxLength))Q$(e.state.doc,this.regexp,i,a,(o,s)=>this.addMatch(s,e,o,n));return r.finish()}updateDeco(e,r){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((a,o,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),i=Math.max(l,i))}),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,r.map(e.changes),n,i):r}updateRange(e,r,n,i){for(let a of e.visibleRanges){let o=Math.max(a.from,n),s=Math.min(a.to,i);if(s>o){let l=e.state.doc.lineAt(o),u=l.to<s?e.state.doc.lineAt(s):l,c=Math.max(a.from,l.from),f=Math.min(a.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){f=s;break}}let h=[],d,p=(v,g,m)=>h.push(m.range(v,g));if(l==u)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<f-l.from;)this.addMatch(d,e,d.index+l.from,p);else Q$(e.state.doc,this.regexp,c,f,(v,g)=>this.addMatch(g,e,v,p));r=r.update({filterFrom:c,filterTo:f,filter:(v,g)=>v<c||g>f,add:h})}}return r}}const t5=/x/.unicode!=null?"gu":"g",Vye=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,t5),Hye={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let vO=null;function Xye(){var t;if(vO==null&&typeof document<"u"&&document.body){let e=document.body.style;vO=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return vO||!1}const E_=Qt.define({combine(t){let e=Ec(t,{render:null,specialChars:Vye,addSpecialChars:null});return(e.replaceTabs=!Xye())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,t5)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,t5)),e}});function Yye(t={}){return[E_.of(t),qye()]}let Z$=null;function qye(){return Z$||(Z$=Si.fromClass(class{constructor(t){this.view=t,this.decorations=hr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(E_)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Wye({regexp:t.specialChars,decoration:(e,r,n)=>{let{doc:i}=r.state,a=ga(e[0],0);if(a==9){let o=i.lineAt(n),s=r.state.tabSize,l=ry(o.text,s,n-o.from);return hr.replace({widget:new Jye((s-l%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=hr.replace({widget:new Zye(t,a)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(E_);t.startState.facet(E_)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Kye="•";function Qye(t){return t>=32?Kye:t==10?"␤":String.fromCharCode(9216+t)}class Zye extends Pf{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=Qye(this.code),n=e.state.phrase("Control character")+" "+(Hye[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,r);if(i)return i;let a=document.createElement("span");return a.textContent=r,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class Jye extends Pf{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function e1e(){return r1e}const t1e=hr.line({class:"cm-activeLine"}),r1e=Si.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,r=[];for(let n of t.state.selection.ranges){let i=t.lineBlockAt(n.head);i.from>e&&(r.push(t1e.range(i.from)),e=i.from)}return hr.set(r)}},{decorations:t=>t.decorations});class n1e extends Pf{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let r=e.firstChild?ym(e.firstChild):[];if(!r.length)return null;let n=window.getComputedStyle(e.parentNode),i=tM(r[0],n.direction!="rtl"),a=parseInt(n.lineHeight);return i.bottom-i.top>a*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+a}:i}ignoreEvent(){return!1}}function i1e(t){return Si.fromClass(class{constructor(e){this.view=e,this.placeholder=t?hr.set([hr.widget({widget:new n1e(t),side:1}).range(0)]):hr.none}get decorations(){return this.view.state.doc.length?hr.none:this.placeholder}},{decorations:e=>e.decorations})}const r5=2e3;function a1e(t,e,r){let n=Math.min(e.line,r.line),i=Math.max(e.line,r.line),a=[];if(e.off>r5||r.off>r5||e.col<0||r.col<0){let o=Math.min(e.off,r.off),s=Math.max(e.off,r.off);for(let l=n;l<=i;l++){let u=t.doc.line(l);u.length<=s&&a.push(it.range(u.from+o,u.to+s))}}else{let o=Math.min(e.col,r.col),s=Math.max(e.col,r.col);for(let l=n;l<=i;l++){let u=t.doc.line(l),c=LP(u.text,o,t.tabSize,!0);if(c<0)a.push(it.cursor(u.to));else{let f=LP(u.text,s,t.tabSize);a.push(it.range(u.from+c,u.from+f))}}}return a}function o1e(t,e){let r=t.coordsAtPos(t.viewport.from);return r?Math.round(Math.abs((r.left-e)/t.defaultCharacterWidth)):-1}function J$(t,e){let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),n=t.state.doc.lineAt(r),i=r-n.from,a=i>r5?-1:i==n.length?o1e(t,e.clientX):ry(n.text,t.state.tabSize,r-n.from);return{line:n.number,col:a,off:i}}function s1e(t,e){let r=J$(t,e),n=t.state.selection;return r?{update(i){if(i.docChanged){let a=i.changes.mapPos(i.startState.doc.line(r.line).from),o=i.state.doc.lineAt(a);r={line:o.number,col:r.col,off:Math.min(r.off,o.length)},n=n.map(i.changes)}},get(i,a,o){let s=J$(t,i);if(!s)return n;let l=a1e(t.state,r,s);return l.length?o?it.create(l.concat(n.ranges)):it.create(l):n}}:null}function l1e(t){let e=(t==null?void 0:t.eventFilter)||(r=>r.altKey&&r.button==0);return Wt.mouseSelectionStyle.of((r,n)=>e(n)?s1e(r,n):null)}const u1e={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},c1e={style:"cursor: crosshair"};function f1e(t={}){let[e,r]=u1e[t.key||"Alt"],n=Si.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||r(i))},keyup(i){(i.keyCode==e||!r(i))&&this.set(!1)},mousemove(i){this.set(r(i))}}});return[n,Wt.contentAttributes.of(i=>{var a;return!((a=i.plugin(n))===null||a===void 0)&&a.isDown?c1e:null})]}const r1="-10000px";class QZ{constructor(e,r,n,i){this.facet=r,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o);let a=null;this.tooltipViews=this.tooltips.map(o=>a=n(o,a))}update(e,r){var n;let i=e.state.facet(this.facet),a=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],s=r?[]:null;for(let l=0;l<a.length;l++){let u=a[l],c=-1;if(u){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==u.create&&(c=f)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),s&&(s[l]=!!u.above);else{let f=o[l]=this.tooltipViews[c];s&&(s[l]=r[c]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return r&&(s.forEach((l,u)=>r[u]=l),r.length=s.length),this.input=i,this.tooltips=a,this.tooltipViews=o,!0}}function h1e(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const gO=Qt.define({combine:t=>{var e,r,n;return{position:er.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=t.find(i=>i.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=t.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||h1e}}}),ez=new WeakMap,wN=Si.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(gO);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new QZ(t,bN,(r,n)=>this.createTooltip(r,n),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let r=e||t.geometryChanged,n=t.state.facet(gO);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(t,e){let r=t.create(this.view),n=e?e.dom:null;if(r.dom.classList.add("cm-tooltip"),t.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",r.dom.insertBefore(i,n)}return r.dom.style.position=this.position,r.dom.style.top=r1,r.dom.style.left="0px",this.container.insertBefore(r.dom,n),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var t,e,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,r=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(er.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==r1&&i.style.left=="0px"){let a=i.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,r=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:r}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(gO).tooltipSpace(this.view),scaleX:e,scaleY:r,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{editor:r,space:n,scaleX:i,scaleY:a}=t,o=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:c}=u,f=t.pos[s],h=t.size[s];if(!f||f.bottom<=Math.max(r.top,n.top)||f.top>=Math.min(r.bottom,n.bottom)||f.right<Math.max(r.left,n.left)-.1||f.left>Math.min(r.right,n.right)+.1){c.style.top=r1;continue}let d=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,v=h.right-h.left,g=(e=ez.get(u))!==null&&e!==void 0?e:h.bottom-h.top,m=u.offset||p1e,y=this.view.textDirection==Fn.LTR,w=h.width>n.right-n.left?y?n.left:n.right-h.width:y?Math.min(f.left-(d?14:0)+m.x,n.right-v):Math.max(n.left,f.left-v+(d?14:0)-m.x),b=this.above[s];!l.strictSide&&(b?f.top-(h.bottom-h.top)-m.y<n.top:f.bottom+(h.bottom-h.top)+m.y>n.bottom)&&b==n.bottom-f.bottom>f.top-n.top&&(b=this.above[s]=!b);let x=(b?f.top-n.top:n.bottom-f.bottom)-p;if(x<g&&u.resize!==!1){if(x<this.view.defaultLineHeight){c.style.top=r1;continue}ez.set(u,g),c.style.height=(g=x)/a+"px"}else c.style.height&&(c.style.height="");let S=b?f.top-g-p-m.y:f.bottom+p+m.y,E=w+v;if(u.overlap!==!0)for(let _ of o)_.left<E&&_.right>w&&_.top<S+g&&_.bottom>S&&(S=b?_.top-g-2-p:_.bottom+p+2);if(this.position=="absolute"?(c.style.top=(S-t.parent.top)/a+"px",c.style.left=(w-t.parent.left)/i+"px"):(c.style.top=S/a+"px",c.style.left=w/i+"px"),d){let _=f.left+(y?m.x:-m.x)-(w+14-7);d.style.left=_/i+"px"}u.overlap!==!0&&o.push({left:w,top:S,right:E,bottom:S+g}),c.classList.toggle("cm-tooltip-above",b),c.classList.toggle("cm-tooltip-below",!b),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=r1}},{eventObservers:{scroll(){this.maybeMeasure()}}}),d1e=Wt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),p1e={x:0,y:0},bN=Qt.define({enables:[wN,d1e]}),$3=Qt.define({combine:t=>t.reduce((e,r)=>e.concat(r),[])});class aM{static create(e){return new aM(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new QZ(e,$3,(r,n)=>this.createHostedView(r,n),r=>r.dom.remove())}createHostedView(e,r){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const v1e=bN.compute([$3],t=>{let e=t.facet($3);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:aM.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class g1e{constructor(e,r,n,i,a){this.view=e,this.source=r,this.field=n,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.nearest(r.target);if(!n)return;let i,a=1;if(n instanceof Xh)i=n.posAtStart;else{if(i=e.posAtCoords(r),i==null)return;let s=e.coordsAtPos(i);if(!s||r.y<s.top||r.y>s.bottom||r.x<s.left-e.defaultCharacterWidth||r.x>s.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==Fn.RTL?-1:1;a=r.x<s.left?-u:u}let o=this.source(e,i,a);if(o!=null&&o.then){let s=this.pending={pos:i};o.then(l=>{this.pending==s&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>tl(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(wN),r=e?e.manager.tooltips.findIndex(n=>n.create==aM.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:a}=this;if(i.length&&a&&!m1e(a.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,s=(n=(r=i[0])===null||r===void 0?void 0:r.end)!==null&&n!==void 0?n:o;(o==s?this.view.posAtCoords(this.lastMove)!=o:!y1e(this.view,o,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const MS=4;function m1e(t,e){let r=t.getBoundingClientRect();return e.clientX>=r.left-MS&&e.clientX<=r.right+MS&&e.clientY>=r.top-MS&&e.clientY<=r.bottom+MS}function y1e(t,e,r,n,i,a){let o=t.scrollDOM.getBoundingClientRect(),s=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,s)<i)return!1;let l=t.posAtCoords({x:n,y:i},!1);return l>=e&&l<=r}function w1e(t,e={}){let r=Br.define(),n=Ca.define({create(){return[]},update(i,a){if(i.length&&(e.hideOnChange&&(a.docChanged||a.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(a,o))),a.docChanged))for(let o of i){let s=a.changes.mapPos(o.pos,-1,to.TrackDel);if(s!=null){let l=Object.assign(Object.create(null),o);l.pos=s,l.end!=null&&(l.end=a.changes.mapPos(l.end))}}for(let o of a.effects)o.is(r)&&(i=o.value),o.is(b1e)&&(i=[]);return i},provide:i=>$3.from(i)});return[n,Si.define(i=>new g1e(i,t,n,r,e.hoverTime||300)),v1e]}function ZZ(t,e){let r=t.plugin(wN);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const b1e=Br.define(),tz=Qt.define({combine(t){let e,r;for(let n of t)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function J2(t,e){let r=t.plugin(JZ),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const JZ=Si.fromClass(class{constructor(t){this.input=t.state.facet(ew),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(t));let e=t.state.facet(tz);this.top=new AS(t,!0,e.topContainer),this.bottom=new AS(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(t){let e=t.state.facet(tz);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new AS(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new AS(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=t.state.facet(ew);if(r!=this.input){let n=r.filter(l=>l),i=[],a=[],o=[],s=[];for(let l of n){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),s.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?a:o).push(c)}this.specs=n,this.panels=i,this.top.sync(a),this.bottom.sync(o);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Wt.scrollMargins.of(e=>{let r=e.plugin(t);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class AS{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=rz(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=rz(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rz(t){let e=t.nextSibling;return t.remove(),e}const ew=Qt.define({enables:JZ});class Af extends vv{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Af.prototype.elementClass="";Af.prototype.toDOM=void 0;Af.prototype.mapMode=to.TrackBefore;Af.prototype.startSide=Af.prototype.endSide=-1;Af.prototype.point=!0;const __=Qt.define(),x1e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>tn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},f2=Qt.define();function S1e(t){return[eJ(),f2.of(Object.assign(Object.assign({},x1e),t))]}const n5=Qt.define({combine:t=>t.some(e=>e)});function eJ(t){let e=[E1e];return t&&t.fixed===!1&&e.push(n5.of(!0)),e}const E1e=Si.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(f2).map(e=>new iz(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(n5),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,r=t.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(n5)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let r=tn.iter(this.view.state.facet(__),this.view.viewport.from),n=[],i=this.gutters.map(a=>new _1e(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let o=!0;for(let s of a.type)if(s.type==oo.Text&&o){i5(r,n,s.from);for(let l of i)l.line(this.view,s,n);o=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(a.type==oo.Text){i5(r,n,a.from);for(let o of i)o.line(this.view,a,n)}else if(a.widget)for(let o of i)o.widget(this.view,a);for(let a of i)a.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(f2),r=t.state.facet(f2),n=t.docChanged||t.heightChanged||t.viewportChanged||!tn.eq(t.startState.facet(__),t.state.facet(__),t.view.viewport.from,t.view.viewport.to);if(e==r)for(let i of this.gutters)i.update(t)&&(n=!0);else{n=!0;let i=[];for(let a of r){let o=e.indexOf(a);o<0?i.push(new iz(this.view,a)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let a of this.gutters)a.dom.remove(),i.indexOf(a)<0&&a.destroy();for(let a of i)this.dom.appendChild(a.dom);this.gutters=i}return n}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Wt.scrollMargins.of(e=>{let r=e.plugin(t);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==Fn.LTR?{left:r.dom.offsetWidth*e.scaleX}:{right:r.dom.offsetWidth*e.scaleX}})});function nz(t){return Array.isArray(t)?t:[t]}function i5(t,e,r){for(;t.value&&t.from<=r;)t.from==r&&e.push(t.value),t.next()}class _1e{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=tn.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:i}=this,a=(r.top-this.height)/e.scaleY,o=r.height/e.scaleY;if(this.i==i.elements.length){let s=new tJ(e,o,a,n);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,o,a,n);this.height=r.bottom,this.i++}line(e,r,n){let i=[];i5(this.cursor,i,r.from),n.length&&(i=i.concat(n));let a=this.gutter.config.lineMarker(e,r,i);a&&i.unshift(a);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,r,i)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r);n&&this.addElement(e,r,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class iz{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,i=>{let a=i.target,o;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);r.domEventHandlers[n](e,s,i)&&i.preventDefault()});this.markers=nz(r.markers(e)),r.initialSpacer&&(this.spacer=new tJ(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=nz(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!tn.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class tJ{constructor(e,r,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,i)}update(e,r,n,i){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),C1e(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,r){let n="cm-gutterElement",i=this.dom.firstChild;for(let a=0,o=0;;){let s=o,l=a<r.length?r[a++]:null,u=!1;if(l){let c=l.elementClass;c&&(n+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){s=f,u=!0;break}}else s=this.markers.length;for(;o<s;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function C1e(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].compare(e[r]))return!1;return!0}const k1e=Qt.define(),y0=Qt.define({combine(t){return Ec(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let i in r){let a=n[i],o=r[i];n[i]=a?(s,l,u)=>a(s,l,u)||o(s,l,u):o}return n}})}});class mO extends Af{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function yO(t,e){return t.state.facet(y0).formatNumber(e,t.state)}const M1e=f2.compute([y0],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(k1e)},lineMarker(e,r,n){return n.some(i=>i.toDOM)?null:new mO(yO(e,e.state.doc.lineAt(r.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(y0)!=e.state.facet(y0),initialSpacer(e){return new mO(yO(e,az(e.state.doc.lines)))},updateSpacer(e,r){let n=yO(r.view,az(r.view.state.doc.lines));return n==e.number?e:new mO(n)},domEventHandlers:t.facet(y0).domEventHandlers}));function A1e(t={}){return[y0.of(t),eJ(),M1e]}function az(t){let e=9;for(;e<t;)e=e*10+9;return e}const T1e=new class extends Af{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},O1e=__.compute(["selection"],t=>{let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.head).from;i>r&&(r=i,e.push(T1e.range(i)))}return tn.of(e)});function I1e(){return O1e}const D1e=1024;let P1e=0;class wO{constructor(e,r){this.from=e,this.to=r}}class Kr{constructor(e={}){this.id=P1e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Fo.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}Kr.closedBy=new Kr({deserialize:t=>t.split(" ")});Kr.openedBy=new Kr({deserialize:t=>t.split(" ")});Kr.group=new Kr({deserialize:t=>t.split(" ")});Kr.isolate=new Kr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Kr.contextHash=new Kr({perNode:!0});Kr.lookAhead=new Kr({perNode:!0});Kr.mounted=new Kr({perNode:!0});class z3{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[Kr.mounted.id]}}const L1e=Object.create(null);class Fo{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):L1e,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Fo(e.name||"",r,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(Kr.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(Kr.group),a=-1;a<(i?i.length:0);a++){let o=r[a<0?n.name:i[a]];if(o)return o}}}}Fo.none=new Fo("",Object.create(null),0,8);class xN{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let a of e){let o=a(n);o&&(i||(i=Object.assign({},n.props)),i[o[0].id]=o[1])}r.push(i?new Fo(n.name,i,n.id,n.flags):n)}return new xN(r)}}const TS=new WeakMap,oz=new WeakMap;var ya;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ya||(ya={}));let Ti=class a5{constructor(e,r,n,i,a){if(this.type=e,this.children=r,this.positions=n,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=z3.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new s5(this.topNode,e)}cursorAt(e,r=0,n=0){let i=TS.get(this)||this.topNode,a=new s5(i);return a.moveTo(e,r),TS.set(this,a._tree),a}get topNode(){return new nl(this,0,0,null)}resolve(e,r=0){let n=tw(TS.get(this)||this.topNode,e,r,!1);return TS.set(this,n),n}resolveInner(e,r=0){let n=tw(oz.get(this)||this.topNode,e,r,!0);return oz.set(this,n),n}resolveStack(e,r=0){return F1e(this,e,r)}iterate(e){let{enter:r,leave:n,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&ya.IncludeAnonymous)>0;for(let l=this.cursor(o|ya.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&n&&(s||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:_N(Fo.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new a5(this.type,r,n,i,this.propValues),e.makeTree||((r,n,i)=>new a5(Fo.none,r,n,i)))}static build(e){return B1e(e)}};Ti.empty=new Ti(Fo.none,[],[],0);class SN{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new SN(this.buffer,this.index)}}class Ed{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return Fo.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,r,n,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=r&&!(rJ(a,i,o[l+1],o[l+2])&&(s=l,n>0));l=o[l+3]);return s}slice(e,r,n){let i=this.buffer,a=new Uint16Array(r-e),o=0;for(let s=e,l=0;s<r;){a[l++]=i[s++],a[l++]=i[s++]-n;let u=a[l++]=i[s++]-n;a[l++]=i[s++]-e,o=Math.max(o,u)}return new Ed(a,o,this.set)}}function rJ(t,e,r,n){switch(t){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function tw(t,e,r,n){for(var i;t.from==t.to||(r<1?t.from>=e:t.from>e)||(r>-1?t.to<=e:t.to<e);){let o=!n&&t instanceof nl&&t.index<0?null:t.parent;if(!o)return t;t=o}let a=n?0:ya.IgnoreOverlays;if(n)for(let o=t,s=o.parent;s;o=s,s=o.parent)o instanceof nl&&o.index<0&&((i=s.enter(e,r,a))===null||i===void 0?void 0:i.from)!=o.from&&(t=s);for(;;){let o=t.enter(e,r,a);if(!o)return t;t=o}}class nJ{cursor(e=0){return new s5(this,e)}getChild(e,r=null,n=null){let i=sz(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return sz(this,e,r,n)}resolve(e,r=0){return tw(this,e,r,!1)}resolveInner(e,r=0){return tw(this,e,r,!0)}matchContext(e){return o5(this,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let i=r.lastChild;if(!i||i.to!=r.to)break;i.type.isError&&i.from==i.to?(n=r,r=i.prevSibling):r=i}return n}get node(){return this}get next(){return this.parent}}class nl extends nJ{constructor(e,r,n,i){super(),this._tree=e,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=r>0?s.length:-1;e!=u;e+=r){let c=s[e],f=l[e]+o.from;if(rJ(i,n,f,f+c.length)){if(c instanceof Ed){if(a&ya.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,r,n-f,i);if(h>-1)return new qh(new R1e(o,c,e,f),null,h)}else if(a&ya.IncludeAnonymous||!c.type.isAnonymous||EN(c)){let h;if(!(a&ya.IgnoreMounts)&&(h=z3.get(c))&&!h.overlay)return new nl(h.tree,f,e,o);let d=new nl(c,f,e,o);return a&ya.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(r<0?c.children.length-1:0,r,n,i)}}}if(a&ya.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+r:e=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let i;if(!(n&ya.IgnoreOverlays)&&(i=z3.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((r>0?o<=a:o<a)&&(r<0?s>=a:s>a))return new nl(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function sz(t,e,r,n){let i=t.cursor(),a=[];if(!i.firstChild())return a;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return a}for(;;){if(n!=null&&i.type.is(n))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return n==null?a:[]}}function o5(t,e,r=e.length-1){for(let n=t.parent;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class R1e{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}}class qh extends nJ{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.context.start,n);return a<0?null:new qh(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&ya.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return a<0?null:new qh(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qh(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new qh(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,i=this.index+4,a=n.buffer[this.index+3];if(a>i){let o=n.buffer[this.index+1];e.push(n.slice(i,a,o)),r.push(0)}return new Ti(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iJ(t){if(!t.length)return null;let e=0,r=t[0];for(let a=1;a<t.length;a++){let o=t[a];(o.from>r.from||o.to<r.to)&&(r=o,e=a)}let n=r instanceof nl&&r.index<0?null:r.parent,i=t.slice();return n?i[e]=n:i.splice(e,1),new N1e(i,r)}class N1e{constructor(e,r){this.heads=e,this.node=r}get next(){return iJ(this.heads)}}function F1e(t,e,r){let n=t.resolveInner(e,r),i=null;for(let a=n instanceof nl?n:n.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[n])).push(o.resolve(e,r)),a=o}else{let o=z3.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new nl(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[n])).push(tw(s,e,r,!1))}}return i?iJ(i):n}class s5{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof nl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof nl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,r-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&ya.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ya.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ya.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,0,4))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let a=r+e,o=e<0?-1:n._tree.children.length;a!=o;a+=e){let s=n._tree.children[a];if(this.mode&ya.IncludeAnonymous||s instanceof Ed||!s.type.isAnonymous||EN(s))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=a+1;break e}i=this.stack[--a]}for(let i=n;i<this.stack.length;i++)r=new qh(this.buffer,r,this.stack[i]);return this.bufferNode=new qh(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&r&&r(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return o5(this.node,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return o5(this.node,e,i);let o=n[r.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function EN(t){return t.children.some(e=>e instanceof Ed||!e.type.isAnonymous||EN(e))}function B1e(t){var e;let{buffer:r,nodeSet:n,maxBufferLength:i=D1e,reused:a=[],minRepeatType:o=n.types.length}=t,s=Array.isArray(r)?new SN(r,r.length):r,l=n.types,u=0,c=0;function f(x,S,E,_,k,C){let{id:M,start:A,end:T,size:D}=s,F=c;for(;D<0;)if(s.next(),D==-1){let L=a[M];E.push(L),_.push(A-x);return}else if(D==-3){u=M;return}else if(D==-4){c=M;return}else throw new RangeError(`Unrecognized record size: ${D}`);let R=l[M],B,N,O=A-x;if(T-A<=i&&(N=g(s.pos-S,k))){let L=new Uint16Array(N.size-N.skip),G=s.pos-N.size,q=L.length;for(;s.pos>G;)q=m(N.start,L,q);B=new Ed(L,T-N.start,n),O=N.start-x}else{let L=s.pos-D;s.next();let G=[],q=[],K=M>=o?M:-1,V=0,le=T;for(;s.pos>L;)K>=0&&s.id==K&&s.size>=0?(s.end<=le-i&&(p(G,q,A,V,s.end,le,K,F),V=G.length,le=s.end),s.next()):C>2500?h(A,L,G,q):f(A,L,G,q,K,C+1);if(K>=0&&V>0&&V<G.length&&p(G,q,A,V,A,le,K,F),G.reverse(),q.reverse(),K>-1&&V>0){let ge=d(R);B=_N(R,G,q,0,G.length,0,T-A,ge,ge)}else B=v(R,G,q,T-A,F-T)}E.push(B),_.push(O)}function h(x,S,E,_){let k=[],C=0,M=-1;for(;s.pos>S;){let{id:A,start:T,end:D,size:F}=s;if(F>4)s.next();else{if(M>-1&&T<M)break;M<0&&(M=D-i),k.push(A,T,D),C++,s.next()}}if(C){let A=new Uint16Array(C*4),T=k[k.length-2];for(let D=k.length-3,F=0;D>=0;D-=3)A[F++]=k[D],A[F++]=k[D+1]-T,A[F++]=k[D+2]-T,A[F++]=F;E.push(new Ed(A,k[2]-T,n)),_.push(T-x)}}function d(x){return(S,E,_)=>{let k=0,C=S.length-1,M,A;if(C>=0&&(M=S[C])instanceof Ti){if(!C&&M.type==x&&M.length==_)return M;(A=M.prop(Kr.lookAhead))&&(k=E[C]+M.length+A)}return v(x,S,E,_,k)}}function p(x,S,E,_,k,C,M,A){let T=[],D=[];for(;x.length>_;)T.push(x.pop()),D.push(S.pop()+E-k);x.push(v(n.types[M],T,D,C-k,A-C)),S.push(k-E)}function v(x,S,E,_,k=0,C){if(u){let M=[Kr.contextHash,u];C=C?[M].concat(C):[M]}if(k>25){let M=[Kr.lookAhead,k];C=C?[M].concat(C):[M]}return new Ti(x,S,E,_,C)}function g(x,S){let E=s.fork(),_=0,k=0,C=0,M=E.end-i,A={size:0,start:0,skip:0};e:for(let T=E.pos-x;E.pos>T;){let D=E.size;if(E.id==S&&D>=0){A.size=_,A.start=k,A.skip=C,C+=4,_+=4,E.next();continue}let F=E.pos-D;if(D<0||F<T||E.start<M)break;let R=E.id>=o?4:0,B=E.start;for(E.next();E.pos>F;){if(E.size<0)if(E.size==-3)R+=4;else break e;else E.id>=o&&(R+=4);E.next()}k=B,_+=D,C+=R}return(S<0||_==x)&&(A.size=_,A.start=k,A.skip=C),A.size>4?A:void 0}function m(x,S,E){let{id:_,start:k,end:C,size:M}=s;if(s.next(),M>=0&&_<o){let A=E;if(M>4){let T=s.pos-(M-4);for(;s.pos>T;)E=m(x,S,E)}S[--E]=A,S[--E]=C-x,S[--E]=k-x,S[--E]=_}else M==-3?u=_:M==-4&&(c=_);return E}let y=[],w=[];for(;s.pos>0;)f(t.start||0,t.bufferStart||0,y,w,-1,0);let b=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Ti(l[t.topID],y.reverse(),w.reverse(),b)}const lz=new WeakMap;function C_(t,e){if(!t.isAnonymous||e instanceof Ed||e.type!=t)return 1;let r=lz.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=t||!(n instanceof Ti)){r=1;break}r+=C_(t,n)}lz.set(e,r)}return r}function _N(t,e,r,n,i,a,o,s,l){let u=0;for(let p=n;p<i;p++)u+=C_(t,e[p]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(p,v,g,m,y){for(let w=g;w<m;){let b=w,x=v[w],S=C_(t,p[w]);for(w++;w<m;w++){let E=C_(t,p[w]);if(S+E>=c)break;S+=E}if(w==b+1){if(S>c){let E=p[b];d(E.children,E.positions,0,E.children.length,v[b]+y);continue}f.push(p[b])}else{let E=v[w-1]+p[w-1].length-x;f.push(_N(t,p,v,b,w,x,E,null,l))}h.push(x+y-a)}}return d(e,r,n,i,0),(s||l)(f,h,o)}class ev{constructor(e,r,n,i,a=!1,o=!1){this.from=e,this.to=r,this.tree=n,this.offset=i,this.open=(a?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let i=[new ev(0,e.length,e,0,!1,n)];for(let a of r)a.to>e.length&&i.push(a);return i}static applyChanges(e,r,n=128){if(!r.length)return e;let i=[],a=1,o=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<r.length?r[s]:null,f=c?c.fromA:1e9;if(f-l>=n)for(;o&&o.from<f;){let h=o;if(l>=h.from||f<=h.to||u){let d=Math.max(h.from,l)-u,p=Math.min(h.to,f)-u;h=d>=p?null:new ev(d,p,h.tree,h.offset+u,s>0,!!c)}if(h&&i.push(h),o.to>f)break;o=a<e.length?e[a++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let aJ=class{startParse(e,r,n){return typeof e=="string"&&(e=new $1e(e)),n=n?n.length?n.map(i=>new wO(i.from,i.to)):[new wO(0,0)]:[new wO(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let i=this.startParse(e,r,n);for(;;){let a=i.advance();if(a)return a}}};class $1e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new Kr({perNode:!0});let z1e=0;class Uu{constructor(e,r,n){this.set=e,this.base=r,this.modified=n,this.id=z1e++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let r=new Uu([],null,[]);if(r.set.push(r),e)for(let n of e.set)r.set.push(n);return r}static defineModifier(){let e=new j3;return r=>r.modified.indexOf(e)>-1?r:j3.get(r.base||r,r.modified.concat(e).sort((n,i)=>n.id-i.id))}}let j1e=0;class j3{constructor(){this.instances=[],this.id=j1e++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(s=>s.base==e&&G1e(r,s.modified));if(n)return n;let i=[],a=new Uu(i,e,r);for(let s of r)s.instances.push(a);let o=U1e(r);for(let s of e.set)if(!s.modified.length)for(let l of o)i.push(j3.get(s,l));return a}}function G1e(t,e){return t.length==e.length&&t.every((r,n)=>r==e[n])}function U1e(t){let e=[[]];for(let r=0;r<t.length;r++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(t[r]));return e.sort((r,n)=>n.length-r.length)}function W1e(t){let e=Object.create(null);for(let r in t){let n=t[r];Array.isArray(n)||(n=[n]);for(let i of r.split(" "))if(i){let a=[],o=2,s=i;for(let f=0;;){if(s=="..."&&f>0&&f+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!h)throw new RangeError("Invalid path: "+i);if(a.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);s=i.slice(f)}let l=a.length-1,u=a[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new G3(n,o,l>0?a.slice(0,l):null);e[u]=c.sort(e[u])}}return oJ.add(e)}const oJ=new Kr;class G3{constructor(e,r,n,i){this.tags=e,this.mode=r,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}G3.empty=new G3([],2,null);function sJ(t,e){let r=Object.create(null);for(let a of t)if(!Array.isArray(a.tag))r[a.tag.id]=a.class;else for(let o of a.tag)r[o.id]=a.class;let{scope:n,all:i=null}=e||{};return{style:a=>{let o=i;for(let s of a)for(let l of s.set){let u=r[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:n}}function V1e(t,e){let r=null;for(let n of t){let i=n.style(e);i&&(r=r?r+" "+i:i)}return r}function H1e(t,e,r,n=0,i=t.length){let a=new X1e(n,Array.isArray(e)?e:[e],r);a.highlightRange(t.cursor(),n,i,"",a.highlighters),a.flush(i)}class X1e{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,i,a){let{type:o,from:s,to:l}=e;if(s>=n||l<=r)return;o.isTop&&(a=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=i,c=Y1e(e)||G3.empty,f=V1e(a,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(r,s),u),c.opaque)return;let h=e.tree&&e.tree.prop(Kr.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+s,1),p=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),v=e.firstChild();for(let g=0,m=s;;g++){let y=g<h.overlay.length?h.overlay[g]:null,w=y?y.from+s:l,b=Math.max(r,m),x=Math.min(n,w);if(b<x&&v)for(;e.from<x&&(this.highlightRange(e,b,x,i,a),this.startSpan(Math.min(x,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>n)break;m=y.to+s,m>r&&(this.highlightRange(d.cursor(),Math.max(r,y.from+s),Math.min(n,m),"",p),this.startSpan(Math.min(n,m),u))}v&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,i,a),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}function Y1e(t){let e=t.type.prop(oJ);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Lt=Uu.define,OS=Lt(),kh=Lt(),uz=Lt(kh),cz=Lt(kh),Mh=Lt(),IS=Lt(Mh),bO=Lt(Mh),Lu=Lt(),fp=Lt(Lu),Cu=Lt(),ku=Lt(),l5=Lt(),n1=Lt(l5),DS=Lt(),Ye={comment:OS,lineComment:Lt(OS),blockComment:Lt(OS),docComment:Lt(OS),name:kh,variableName:Lt(kh),typeName:uz,tagName:Lt(uz),propertyName:cz,attributeName:Lt(cz),className:Lt(kh),labelName:Lt(kh),namespace:Lt(kh),macroName:Lt(kh),literal:Mh,string:IS,docString:Lt(IS),character:Lt(IS),attributeValue:Lt(IS),number:bO,integer:Lt(bO),float:Lt(bO),bool:Lt(Mh),regexp:Lt(Mh),escape:Lt(Mh),color:Lt(Mh),url:Lt(Mh),keyword:Cu,self:Lt(Cu),null:Lt(Cu),atom:Lt(Cu),unit:Lt(Cu),modifier:Lt(Cu),operatorKeyword:Lt(Cu),controlKeyword:Lt(Cu),definitionKeyword:Lt(Cu),moduleKeyword:Lt(Cu),operator:ku,derefOperator:Lt(ku),arithmeticOperator:Lt(ku),logicOperator:Lt(ku),bitwiseOperator:Lt(ku),compareOperator:Lt(ku),updateOperator:Lt(ku),definitionOperator:Lt(ku),typeOperator:Lt(ku),controlOperator:Lt(ku),punctuation:l5,separator:Lt(l5),bracket:n1,angleBracket:Lt(n1),squareBracket:Lt(n1),paren:Lt(n1),brace:Lt(n1),content:Lu,heading:fp,heading1:Lt(fp),heading2:Lt(fp),heading3:Lt(fp),heading4:Lt(fp),heading5:Lt(fp),heading6:Lt(fp),contentSeparator:Lt(Lu),list:Lt(Lu),quote:Lt(Lu),emphasis:Lt(Lu),strong:Lt(Lu),link:Lt(Lu),monospace:Lt(Lu),strikethrough:Lt(Lu),inserted:Lt(),deleted:Lt(),changed:Lt(),invalid:Lt(),meta:DS,documentMeta:Lt(DS),annotation:Lt(DS),processingInstruction:Lt(DS),definition:Uu.defineModifier(),constant:Uu.defineModifier(),function:Uu.defineModifier(),standard:Uu.defineModifier(),local:Uu.defineModifier(),special:Uu.defineModifier()};sJ([{tag:Ye.link,class:"tok-link"},{tag:Ye.heading,class:"tok-heading"},{tag:Ye.emphasis,class:"tok-emphasis"},{tag:Ye.strong,class:"tok-strong"},{tag:Ye.keyword,class:"tok-keyword"},{tag:Ye.atom,class:"tok-atom"},{tag:Ye.bool,class:"tok-bool"},{tag:Ye.url,class:"tok-url"},{tag:Ye.labelName,class:"tok-labelName"},{tag:Ye.inserted,class:"tok-inserted"},{tag:Ye.deleted,class:"tok-deleted"},{tag:Ye.literal,class:"tok-literal"},{tag:Ye.string,class:"tok-string"},{tag:Ye.number,class:"tok-number"},{tag:[Ye.regexp,Ye.escape,Ye.special(Ye.string)],class:"tok-string2"},{tag:Ye.variableName,class:"tok-variableName"},{tag:Ye.local(Ye.variableName),class:"tok-variableName tok-local"},{tag:Ye.definition(Ye.variableName),class:"tok-variableName tok-definition"},{tag:Ye.special(Ye.variableName),class:"tok-variableName2"},{tag:Ye.definition(Ye.propertyName),class:"tok-propertyName tok-definition"},{tag:Ye.typeName,class:"tok-typeName"},{tag:Ye.namespace,class:"tok-namespace"},{tag:Ye.className,class:"tok-className"},{tag:Ye.macroName,class:"tok-macroName"},{tag:Ye.propertyName,class:"tok-propertyName"},{tag:Ye.operator,class:"tok-operator"},{tag:Ye.comment,class:"tok-comment"},{tag:Ye.meta,class:"tok-meta"},{tag:Ye.invalid,class:"tok-invalid"},{tag:Ye.punctuation,class:"tok-punctuation"}]);var xO;const w0=new Kr;function q1e(t){return Qt.define({combine:t?e=>e.concat(t):void 0})}const K1e=new Kr;class zl{constructor(e,r,n=[],i=""){this.data=e,this.name=i,en.prototype.hasOwnProperty("tree")||Object.defineProperty(en.prototype,"tree",{get(){return Ea(this)}}),this.parser=r,this.extension=[_d.of(this),en.languageData.of((a,o,s)=>{let l=fz(a,o,s),u=l.type.prop(w0);if(!u)return[];let c=a.facet(u),f=l.type.prop(K1e);if(f){let h=l.resolve(o-l.from,s);for(let d of f)if(d.test(h,a)){let p=a.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(n)}isActiveAt(e,r,n=-1){return fz(e,r,n).type.prop(w0)==this.data}findRegions(e){let r=e.facet(_d);if((r==null?void 0:r.data)==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],i=(a,o)=>{if(a.prop(w0)==this.data){n.push({from:o,to:o+a.length});return}let s=a.prop(Kr.mounted);if(s){if(s.tree.prop(w0)==this.data){if(s.overlay)for(let l of s.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+a.length});return}else if(s.overlay){let l=n.length;if(i(s.tree,s.overlay[0].from+o),n.length>l)return}}for(let l=0;l<a.children.length;l++){let u=a.children[l];u instanceof Ti&&i(u,a.positions[l]+o)}};return i(Ea(e),0),n}get allowsNesting(){return!0}}zl.setState=Br.define();function fz(t,e,r){let n=t.facet(_d),i=Ea(t).topNode;if(!n||n.allowsNesting)for(let a=i;a;a=a.enter(e,r,ya.ExcludeBuffers))a.type.isTop&&(i=a);return i}function Ea(t){let e=t.field(zl.state,!1);return e?e.tree:Ti.empty}class Q1e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let i1=null;class bm{constructor(e,r,n=[],i,a,o,s,l){this.parser=e,this.state=r,this.fragments=n,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new bm(e,r,[],Ti.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Q1e(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Ti.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ev.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(ev.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=i1;i1=this;try{return e()}finally{i1=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=hz(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:i,treeLen:a,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,h)=>l.push({fromA:u,toA:c,fromB:f,toB:h})),n=ev.applyChanges(n,l),i=Ti.empty,a=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&s.push({from:c,to:f})}}}return new bm(this.parser,r,n,i,a,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:a}=this.skipped[n];i<e.to&&a>e.from&&(this.fragments=hz(this.fragments,i,a),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends aJ{createParse(r,n,i){let a=i[0].from,o=i[i.length-1].to;return{parsedPos:a,advance(){let l=i1;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ti(Fo.none,[],[],o-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return i1}}function hz(t,e,r){return ev.applyChanges(t,[{fromA:e,toA:r,fromB:e,toB:r}])}class xm{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new xm(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=bm.create(e.facet(_d).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new xm(n)}}zl.state=Ca.define({create:xm.init,update(t,e){for(let r of e.effects)if(r.is(zl.setState))return r.value;return e.startState.facet(_d)!=e.state.facet(_d)?xm.init(e.state):t.apply(e)}});let lJ=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(lJ=t=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const SO=typeof navigator<"u"&&(!((xO=navigator.scheduling)===null||xO===void 0)&&xO.isInputPending)?()=>navigator.scheduling.isInputPending():null,Z1e=Si.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(zl.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(zl.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=lJ(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,a=n.field(zl.state);if(a.tree==a.context.tree&&a.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!SO?Math.max(25,e.timeRemaining()-5):1e9),s=a.context.treeLen<i&&n.doc.length>i+1e3,l=a.context.work(()=>SO&&SO()||Date.now()>o,i+(s?0:1e5));this.chunkBudget-=Date.now()-r,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:zl.setState.of(new xm(a.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>tl(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_d=Qt.define({combine(t){return t.length?t[0]:null},enables:t=>[zl.state,Z1e,Wt.contentAttributes.compute([t],e=>{let r=e.facet(t);return r&&r.name?{"data-language":r.name}:{}})]}),uJ=Qt.define(),oM=Qt.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function yv(t){let e=t.facet(oM);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function rw(t,e){let r="",n=t.tabSize,i=t.facet(oM)[0];if(i=="	"){for(;e>=n;)r+="	",e-=n;i=" "}for(let a=0;a<e;a++)r+=i;return r}function CN(t,e){t instanceof en&&(t=new sM(t));for(let n of t.state.facet(uJ)){let i=n(t,e);if(i!==void 0)return i}let r=Ea(t.state);return r.length>=e?e2e(t,r,e):null}class sM{constructor(e,r={}){this.state=e,this.options=r,this.unit=yv(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:a}=this.options;return i!=null&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(r<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,r);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,r=1){let{text:n,from:i}=this.lineAt(e,r),a=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,r=e.length){return ry(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:i}=this.lineAt(e,r),a=this.options.overrideIndentation;if(a){let o=a(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const J1e=new Kr;function e2e(t,e,r){let n=e.resolveStack(r),i=n.node.enterUnfinishedNodesBefore(r);if(i!=n.node){let a=[];for(let o=i;o!=n.node;o=o.parent)a.push(o);for(let o=a.length-1;o>=0;o--)n={node:a[o],next:n}}return cJ(n,t,r)}function cJ(t,e,r){for(let n=t;n;n=n.next){let i=r2e(n.node);if(i)return i(kN.create(e,r,n))}return 0}function t2e(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function r2e(t){let e=t.type.prop(J1e);if(e)return e;let r=t.firstChild,n;if(r&&(n=r.type.prop(Kr.closedBy))){let i=t.lastChild,a=i&&n.indexOf(i.name)>-1;return o=>o2e(o,!0,1,void 0,a&&!t2e(o)?i.from:void 0)}return t.parent==null?n2e:null}function n2e(){return 0}class kN extends sM{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new kN(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(i2e(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return cJ(this.context.next,this.base,this.pos)}}function i2e(t,e){for(let r=e;r;r=r.parent)if(t==r)return!0;return!1}function a2e(t){let e=t.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let i=t.options.simulateBreak,a=t.state.doc.lineAt(r.from),o=i==null||i<=a.from?a.to:Math.min(a.to,i);for(let s=r.to;;){let l=e.childAfter(s);if(!l||l==n)return null;if(!l.type.isSkipped)return l.from<o?r:null;s=l.to}}function o2e(t,e,r,n,i){let a=t.textAfter,o=a.match(/^\s*/)[0].length,s=n&&a.slice(o,o+n.length)==n||i==t.pos+o,l=e?a2e(t):null;return l?s?t.column(l.from):t.column(l.to):t.baseIndent+(s?0:t.unit*r)}const s2e=200;function l2e(){return en.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let r=t.newDoc,{head:n}=t.newSelection.main,i=r.lineAt(n);if(n>i.from+s2e)return t;let a=r.sliceString(i.from,n);if(!e.some(u=>u.test(a)))return t;let{state:o}=t,s=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==s)continue;s=c.from;let f=CN(o,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=rw(o,f);h!=d&&l.push({from:c.from,to:c.from+h.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const u2e=Qt.define(),c2e=new Kr;function f2e(t,e,r){let n=Ea(t);if(n.length<r)return null;let i=n.resolveStack(r,1),a=null;for(let o=i;o;o=o.next){let s=o.node;if(s.to<=r||s.from>r)continue;if(a&&s.from<e)break;let l=s.type.prop(c2e);if(l&&(s.to<n.length-50||n.length==t.doc.length||!h2e(s))){let u=l(s,t);u&&u.from<=r&&u.from>=e&&u.to>r&&(a=u)}}return a}function h2e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function U3(t,e,r){for(let n of t.facet(u2e)){let i=n(t,e,r);if(i)return i}return f2e(t,e,r)}function fJ(t,e){let r=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return r>=n?void 0:{from:r,to:n}}const lM=Br.define({map:fJ}),fb=Br.define({map:fJ});function hJ(t){let e=[];for(let{head:r}of t.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(t.lineBlockAt(r));return e}const wv=Ca.define({create(){return hr.none},update(t,e){t=t.map(e.changes);for(let r of e.effects)if(r.is(lM)&&!d2e(t,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(MN),i=n?hr.replace({widget:new b2e(n(e.state,r.value))}):dz;t=t.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(fb)&&(t=t.update({filter:(n,i)=>r.value.from!=n||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:n}=e.selection.main;t.between(n,n,(i,a)=>{i<n&&a>n&&(r=!0)}),r&&(t=t.update({filterFrom:n,filterTo:n,filter:(i,a)=>a<=n||i>=n}))}return t},provide:t=>Wt.decorations.from(t),toJSON(t,e){let r=[];return t.between(0,e.doc.length,(n,i)=>{r.push(n,i)}),r},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<t.length;){let n=t[r++],i=t[r++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(dz.range(n,i))}return hr.set(e,!0)}});function W3(t,e,r){var n;let i=null;return(n=t.field(wv,!1))===null||n===void 0||n.between(e,r,(a,o)=>{(!i||i.from>a)&&(i={from:a,to:o})}),i}function d2e(t,e,r){let n=!1;return t.between(e,e,(i,a)=>{i==e&&a==r&&(n=!0)}),n}function dJ(t,e){return t.field(wv,!1)?e:e.concat(Br.appendConfig.of(vJ()))}const p2e=t=>{for(let e of hJ(t)){let r=U3(t.state,e.from,e.to);if(r)return t.dispatch({effects:dJ(t.state,[lM.of(r),pJ(t,r)])}),!0}return!1},v2e=t=>{if(!t.state.field(wv,!1))return!1;let e=[];for(let r of hJ(t)){let n=W3(t.state,r.from,r.to);n&&e.push(fb.of(n),pJ(t,n,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function pJ(t,e,r=!0){let n=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Wt.announce.of(`${t.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${t.state.phrase("to")} ${i}.`)}const g2e=t=>{let{state:e}=t,r=[];for(let n=0;n<e.doc.length;){let i=t.lineBlockAt(n),a=U3(e,i.from,i.to);a&&r.push(lM.of(a)),n=(a?t.lineBlockAt(a.to):i).to+1}return r.length&&t.dispatch({effects:dJ(t.state,r)}),!!r.length},m2e=t=>{let e=t.state.field(wv,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,t.state.doc.length,(n,i)=>{r.push(fb.of({from:n,to:i}))}),t.dispatch({effects:r}),!0},y2e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:p2e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:v2e},{key:"Ctrl-Alt-[",run:g2e},{key:"Ctrl-Alt-]",run:m2e}],w2e={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},MN=Qt.define({combine(t){return Ec(t,w2e)}});function vJ(t){let e=[wv,E2e];return t&&e.push(MN.of(t)),e}function gJ(t,e){let{state:r}=t,n=r.facet(MN),i=o=>{let s=t.lineBlockAt(t.posAtDOM(o.target)),l=W3(t.state,s.from,s.to);l&&t.dispatch({effects:fb.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",r.phrase("folded code")),a.title=r.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=i,a}const dz=hr.replace({widget:new class extends Pf{toDOM(t){return gJ(t,null)}}});class b2e extends Pf{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gJ(e,this.value)}}const x2e={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class EO extends Af{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function S2e(t={}){let e=Object.assign(Object.assign({},x2e),t),r=new EO(e,!0),n=new EO(e,!1),i=Si.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(_d)!=o.state.facet(_d)||o.startState.field(wv,!1)!=o.state.field(wv,!1)||Ea(o.startState)!=Ea(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let s=new wd;for(let l of o.viewportLineBlocks){let u=W3(o.state,l.from,l.to)?n:U3(o.state,l.from,l.to)?r:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:a}=e;return[i,S1e({class:"cm-foldGutter",markers(o){var s;return((s=o.plugin(i))===null||s===void 0?void 0:s.markers)||tn.empty},initialSpacer(){return new EO(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(o,s,l)=>{if(a.click&&a.click(o,s,l))return!0;let u=W3(o.state,s.from,s.to);if(u)return o.dispatch({effects:fb.of(u)}),!0;let c=U3(o.state,s.from,s.to);return c?(o.dispatch({effects:lM.of(c)}),!0):!1}})}),vJ()]}const E2e=Wt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class hb{constructor(e,r){this.specs=e;let n;function i(s){let l=bd.newName();return(n||(n=Object.create(null)))["."+l]=s,l}const a=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof zl?s=>s.prop(w0)==o.data:o?s=>s==o:void 0,this.style=sJ(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:a}).style,this.module=n?new bd(n):null,this.themeType=r.themeType}static define(e,r){return new hb(e,r||{})}}const u5=Qt.define(),mJ=Qt.define({combine(t){return t.length?[t[0]]:null}});function _O(t){let e=t.facet(u5);return e.length?e:t.facet(mJ)}function yJ(t,e){let r=[C2e],n;return t instanceof hb&&(t.module&&r.push(Wt.styleModule.of(t.module)),n=t.themeType),e!=null&&e.fallback?r.push(mJ.of(t)):n?r.push(u5.computeN([Wt.darkTheme],i=>i.facet(Wt.darkTheme)==(n=="dark")?[t]:[])):r.push(u5.of(t)),r}class _2e{constructor(e){this.markCache=Object.create(null),this.tree=Ea(e.state),this.decorations=this.buildDeco(e,_O(e.state)),this.decoratedTo=e.viewport.to}update(e){let r=Ea(e.state),n=_O(e.state),i=n!=_O(e.startState),{viewport:a}=e.view,o=e.changes.mapPos(this.decoratedTo,1);r.length<a.to&&!i&&r.type==this.tree.type&&o>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(r!=this.tree||e.viewportChanged||i)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=a.to)}buildDeco(e,r){if(!r||!this.tree.length)return hr.none;let n=new wd;for(let{from:i,to:a}of e.visibleRanges)H1e(this.tree,r,(o,s,l)=>{n.add(o,s,this.markCache[l]||(this.markCache[l]=hr.mark({class:l})))},i,a);return n.finish()}}const C2e=ty.high(Si.fromClass(_2e,{decorations:t=>t.decorations})),k2e=hb.define([{tag:Ye.meta,color:"#404740"},{tag:Ye.link,textDecoration:"underline"},{tag:Ye.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ye.emphasis,fontStyle:"italic"},{tag:Ye.strong,fontWeight:"bold"},{tag:Ye.strikethrough,textDecoration:"line-through"},{tag:Ye.keyword,color:"#708"},{tag:[Ye.atom,Ye.bool,Ye.url,Ye.contentSeparator,Ye.labelName],color:"#219"},{tag:[Ye.literal,Ye.inserted],color:"#164"},{tag:[Ye.string,Ye.deleted],color:"#a11"},{tag:[Ye.regexp,Ye.escape,Ye.special(Ye.string)],color:"#e40"},{tag:Ye.definition(Ye.variableName),color:"#00f"},{tag:Ye.local(Ye.variableName),color:"#30a"},{tag:[Ye.typeName,Ye.namespace],color:"#085"},{tag:Ye.className,color:"#167"},{tag:[Ye.special(Ye.variableName),Ye.macroName],color:"#256"},{tag:Ye.definition(Ye.propertyName),color:"#00c"},{tag:Ye.comment,color:"#940"},{tag:Ye.invalid,color:"#f00"}]),M2e=Wt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),wJ=1e4,bJ="()[]{}",xJ=Qt.define({combine(t){return Ec(t,{afterCursor:!0,brackets:bJ,maxScanDistance:wJ,renderMatch:O2e})}}),A2e=hr.mark({class:"cm-matchingBracket"}),T2e=hr.mark({class:"cm-nonmatchingBracket"});function O2e(t){let e=[],r=t.matched?A2e:T2e;return e.push(r.range(t.start.from,t.start.to)),t.end&&e.push(r.range(t.end.from,t.end.to)),e}const I2e=Ca.define({create(){return hr.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let r=[],n=e.state.facet(xJ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let a=Qu(e.state,i.head,-1,n)||i.head>0&&Qu(e.state,i.head-1,1,n)||n.afterCursor&&(Qu(e.state,i.head,1,n)||i.head<e.state.doc.length&&Qu(e.state,i.head+1,-1,n));a&&(r=r.concat(n.renderMatch(a,e.state)))}return hr.set(r,!0)},provide:t=>Wt.decorations.from(t)}),D2e=[I2e,M2e];function P2e(t={}){return[xJ.of(t),D2e]}const L2e=new Kr;function c5(t,e,r){let n=t.prop(e<0?Kr.openedBy:Kr.closedBy);if(n)return n;if(t.name.length==1){let i=r.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[r[i+e]]}return null}function f5(t){let e=t.type.prop(L2e);return e?e(t.node):t}function Qu(t,e,r,n={}){let i=n.maxScanDistance||wJ,a=n.brackets||bJ,o=Ea(t),s=o.resolveInner(e,r);for(let l=s;l;l=l.parent){let u=c5(l.type,r,a);if(u&&l.from<l.to){let c=f5(l);if(c&&(r>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return R2e(t,e,r,l,c,u,a)}}return N2e(t,e,r,o,s.type,i,a)}function R2e(t,e,r,n,i,a,o){let s=n.parent,l={from:i.from,to:i.to},u=0,c=s==null?void 0:s.cursor();if(c&&(r<0?c.childBefore(n.from):c.childAfter(n.to)))do if(r<0?c.to<=n.from:c.from>=n.to){if(u==0&&a.indexOf(c.type.name)>-1&&c.from<c.to){let f=f5(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(c5(c.type,r,o))u++;else if(c5(c.type,-r,o)){if(u==0){let f=f5(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(r<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function N2e(t,e,r,n,i,a,o){let s=r<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(s);if(l<0||l%2==0!=r>0)return null;let u={from:r<0?e-1:e,to:r>0?e+1:e},c=t.doc.iterRange(e,r>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=a;){let d=c.value;r<0&&(h+=d.length);let p=e+h*r;for(let v=r>0?0:d.length-1,g=r>0?d.length:-1;v!=g;v+=r){let m=o.indexOf(d[v]);if(!(m<0||n.resolveInner(p+v,1).type!=i))if(m%2==0==r>0)f++;else{if(f==1)return{start:u,end:{from:p+v,to:p+v+1},matched:m>>1==l>>1};f--}}r>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}function pz(t,e,r,n=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let a=i;for(let o=n;o<e;o++)t.charCodeAt(o)==9?a+=r-a%r:a++;return a}class SJ{constructor(e,r,n,i){this.string=e,this.tabSize=r,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let r=this.string.charAt(this.pos),n;if(typeof e=="string"?n=r==e:n=r&&(e instanceof RegExp?e.test(r):e(r)),n)return++this.pos,r}eatWhile(e){let r=this.pos;for(;this.eat(e););return this.pos>r}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let r=this.string.indexOf(e,this.pos);if(r>-1)return this.pos=r,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=pz(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:pz(this.string,null,this.tabSize)}match(e,r,n){if(typeof e=="string"){let i=o=>n?o.toLowerCase():o,a=this.string.substr(this.pos,e.length);return i(a)==i(e)?(r!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&r!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function F2e(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||B2e,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||TN}}function B2e(t){if(typeof t!="object")return t;let e={};for(let r in t){let n=t[r];e[r]=n instanceof Array?n.slice():n}return e}const vz=new WeakMap;class uM extends zl{constructor(e){let r=q1e(e.languageData),n=F2e(e),i,a=new class extends aJ{createParse(o,s,l){return new z2e(i,o,s,l)}};super(r,a,[uJ.of((o,s)=>this.getIndent(o,s))],e.name),this.topNode=U2e(r),i=this,this.streamParser=n,this.stateAfter=new Kr({perNode:!0}),this.tokenTable=e.tokenTable?new kJ(n.tokenTable):G2e}static define(e){return new uM(e)}getIndent(e,r){let n=Ea(e.state),i=n.resolve(r);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let a,{overrideIndentation:o}=e.options;o&&(a=vz.get(e.state),a!=null&&a<r-1e4&&(a=void 0));let s=AN(this,n,0,i.from,a??r),l,u;if(s?(u=s.state,l=s.pos+1):(u=this.streamParser.startState(e.unit),l=0),r-l>1e4)return null;for(;l<r;){let f=e.state.doc.lineAt(l),h=Math.min(r,f.to);if(f.length){let d=o?o(f.from):-1,p=new SJ(f.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;p.pos<h-f.from;)_J(this.streamParser.token,p,u)}else this.streamParser.blankLine(u,e.unit);if(h==r)break;l=f.to+1}let c=e.lineAt(r);return o&&a==null&&vz.set(e.state,c.from),this.streamParser.indent(u,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function AN(t,e,r,n,i){let a=r>=n&&r+e.length<=i&&e.prop(t.stateAfter);if(a)return{state:t.streamParser.copyState(a),pos:r+e.length};for(let o=e.children.length-1;o>=0;o--){let s=e.children[o],l=r+e.positions[o],u=s instanceof Ti&&l<i&&AN(t,s,l,n,i);if(u)return u}return null}function EJ(t,e,r,n,i){if(i&&r<=0&&n>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let a=e.children.length-1;a>=0;a--){let o=e.positions[a],s=e.children[a],l;if(o<n&&s instanceof Ti){if(!(l=EJ(t,s,r-o,n-o,i)))break;return i?new Ti(e.type,e.children.slice(0,a).concat(l),e.positions.slice(0,a+1),o+l.length):l}}return null}function $2e(t,e,r,n){for(let i of e){let a=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),s=a<=r&&o>r&&AN(t,i.tree,0-i.offset,r,o),l;if(s&&(l=EJ(t,i.tree,r+i.offset,s.pos+i.offset,!1)))return{state:s.state,tree:l}}return{state:t.streamParser.startState(n?yv(n):4),tree:Ti.empty}}class z2e{constructor(e,r,n,i){this.lang=e,this.input=r,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let a=bm.get(),o=i[0].from,{state:s,tree:l}=$2e(e,n,o,a==null?void 0:a.state);this.state=s,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(yv(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=bm.get(),r=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(r,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=r?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,r),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let r=this.input.chunk(e);if(this.input.lineChunks)r==`
`&&(r="");else{let n=r.indexOf(`
`);n>-1&&(r=r.slice(0,n))}return e+r.length<=this.to?r:r.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,r=this.lineAfter(e),n=e+r.length;for(let i=this.rangeIndex;;){let a=this.ranges[i].to;if(a>=n||(r=r.slice(0,a-(n-r.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,s=this.lineAfter(o);r+=s,n=o+s.length}return{line:r,end:n}}skipGapsTo(e,r,n){for(;;){let i=this.ranges[this.rangeIndex].to,a=e+r;if(n>0?i>a:i>=a)break;let o=this.ranges[++this.rangeIndex].from;r+=o-i}return r}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,r,n,i,a){if(this.ranges.length>1){a=this.skipGapsTo(r,a,1),r+=a;let o=this.chunk.length;a=this.skipGapsTo(n,a,-1),n+=a,i+=this.chunk.length-o}return this.chunk.push(e,r,n,i),a}parseLine(e){let{line:r,end:n}=this.nextLine(),i=0,{streamParser:a}=this.lang,o=new SJ(r,e?e.state.tabSize:4,e?yv(e.state):2);if(o.eol())a.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let s=_J(a.token,o,this.state);if(s&&(i=this.emitToken(this.lang.tokenTable.resolve(s),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ti.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:j2e,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Ti(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ti(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function _J(t,e,r){e.start=e.pos;for(let n=0;n<10;n++){let i=t(e,r);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const TN=Object.create(null),nw=[Fo.none],j2e=new xN(nw),gz=[],mz=Object.create(null),CJ=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CJ[t]=MJ(TN,e);class kJ{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),CJ)}resolve(e){return e?this.table[e]||(this.table[e]=MJ(this.extra,e)):0}}const G2e=new kJ(TN);function CO(t,e){gz.indexOf(t)>-1||(gz.push(t),console.warn(e))}function MJ(t,e){let r=[];for(let s of e.split(" ")){let l=[];for(let u of s.split(".")){let c=t[u]||Ye[u];c?typeof c=="function"?l.length?l=l.map(c):CO(u,`Modifier ${u} used at start of tag`):l.length?CO(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:CO(u,`Unknown highlighting tag ${u}`)}for(let u of l)r.push(u)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+r.map(s=>s.id),a=mz[i];if(a)return a.id;let o=mz[i]=Fo.define({id:nw.length,name:n,props:[W1e({[n]:r})]});return nw.push(o),o.id}function U2e(t){let e=Fo.define({id:nw.length,name:"Document",props:[w0.add(()=>t)],top:!0});return nw.push(e),e}Fn.RTL,Fn.LTR;const W2e=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),n=IN(t.state,r.from);return n.line?V2e(t):n.block?X2e(t):!1};function ON(t,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let i=t(e,r);return i?(n(r.update(i)),!0):!1}}const V2e=ON(K2e,0),H2e=ON(AJ,0),X2e=ON((t,e)=>AJ(t,e,q2e(e)),0);function IN(t,e){let r=t.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const a1=50;function Y2e(t,{open:e,close:r},n,i){let a=t.sliceDoc(n-a1,n),o=t.sliceDoc(i,i+a1),s=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(o)[0].length,u=a.length-s;if(a.slice(u-e.length,u)==e&&o.slice(l,l+r.length)==r)return{open:{pos:n-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-n<=2*a1?c=f=t.sliceDoc(n,i):(c=t.sliceDoc(n,n+a1),f=t.sliceDoc(i-a1,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-r.length;return c.slice(h,h+e.length)==e&&f.slice(p,p+r.length)==r?{open:{pos:n+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-r.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function q2e(t){let e=[];for(let r of t.selection.ranges){let n=t.doc.lineAt(r.from),i=r.to<=n.to?n:t.doc.lineAt(r.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function AJ(t,e,r=e.selection.ranges){let n=r.map(a=>IN(e,a.from).block);if(!n.every(a=>a))return null;let i=r.map((a,o)=>Y2e(e,n[o],a.from,a.to));if(t!=2&&!i.every(a=>a))return{changes:e.changes(r.map((a,o)=>i[o]?[]:[{from:a.from,insert:n[o].open+" "},{from:a.to,insert:" "+n[o].close}]))};if(t!=1&&i.some(a=>a)){let a=[];for(let o=0,s;o<i.length;o++)if(s=i[o]){let l=n[o],{open:u,close:c}=s;a.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:a}}return null}function K2e(t,e,r=e.selection.ranges){let n=[],i=-1;for(let{from:a,to:o}of r){let s=n.length,l=1e9,u=IN(e,a).line;if(u){for(let c=a;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(a==o||o>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<l&&(l=h),n.push({line:f,comment:p,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(l<1e9)for(let c=s;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=l);n.length==s+1&&(n[s].single=!0)}}if(t!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:s,token:l,indent:u,empty:c,single:f}of n)(f||!c)&&a.push({from:s.from+u,insert:l+" "});let o=e.changes(a);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:o,comment:s,token:l}of n)if(s>=0){let u=o.from+s,c=u+l.length;o.text[c-o.from]==" "&&c++,a.push({from:u,to:c})}return{changes:a}}return null}const h5=Sc.define(),Q2e=Sc.define(),Z2e=Qt.define(),TJ=Qt.define({combine(t){return Ec(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,i)=>e(n,i)||r(n,i)})}}),OJ=Ca.define({create(){return Zu.empty},update(t,e){let r=e.state.facet(TJ),n=e.annotation(h5);if(n){let l=Oo.fromTransaction(e,n.selection),u=n.side,c=u==0?t.undone:t.done;return l?c=V3(c,c.length,r.minDepth,l):c=PJ(c,e.startState.selection),new Zu(u==0?n.rest:c,u==0?c:n.rest)}let i=e.annotation(Q2e);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Vi.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let a=Oo.fromTransaction(e),o=e.annotation(Vi.time),s=e.annotation(Vi.userEvent);return a?t=t.addChanges(a,o,s,r,e):e.selection&&(t=t.addSelection(e.startState.selection,o,s,r.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Zu(t.done.map(Oo.fromJSON),t.undone.map(Oo.fromJSON))}});function J2e(t={}){return[OJ,TJ.of(t),Wt.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?IJ:e.inputType=="historyRedo"?d5:null;return n?(e.preventDefault(),n(r)):!1}})]}function cM(t,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let i=r.field(OJ,!1);if(!i)return!1;let a=i.pop(t,r,e);return a?(n(a),!0):!1}}const IJ=cM(0,!1),d5=cM(1,!1),ewe=cM(0,!0),twe=cM(1,!0);class Oo{constructor(e,r,n,i,a){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=i,this.selectionsAfter=a}setSelAfter(e){return new Oo(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Oo(e.changes&&Gi.fromJSON(e.changes),[],e.mapped&&uc.fromJSON(e.mapped),e.startSelection&&it.fromJSON(e.startSelection),e.selectionsAfter.map(it.fromJSON))}static fromTransaction(e,r){let n=Js;for(let i of e.startState.facet(Z2e)){let a=i(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new Oo(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,Js)}static selection(e){return new Oo(void 0,Js,void 0,void 0,e)}}function V3(t,e,r,n){let i=e+1>r+20?e-r-1:0,a=t.slice(i,e);return a.push(n),a}function rwe(t,e){let r=[],n=!1;return t.iterChangedRanges((i,a)=>r.push(i,a)),e.iterChangedRanges((i,a,o,s)=>{for(let l=0;l<r.length;){let u=r[l++],c=r[l++];s>=u&&o<=c&&(n=!0)}}),n}function nwe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function DJ(t,e){return t.length?e.length?t.concat(e):t:e}const Js=[],iwe=200;function PJ(t,e){if(t.length){let r=t[t.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-iwe));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),V3(t,t.length-1,1e9,r.setSelAfter(n)))}else return[Oo.selection([e])]}function awe(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function kO(t,e){if(!t.length)return t;let r=t.length,n=Js;for(;r;){let i=owe(t[r-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let a=t.slice(0,r);return a[r-1]=i,a}else e=i.mapped,r--,n=i.selectionsAfter}return n.length?[Oo.selection(n)]:Js}function owe(t,e,r){let n=DJ(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):Js,r);if(!t.changes)return Oo.selection(n);let i=t.changes.map(e),a=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(a):a;return new Oo(i,Br.mapEffects(t.effects,e),o,t.startSelection.map(a),n)}const swe=/^(input\.type|delete)($|\.)/;class Zu{constructor(e,r,n=0,i=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Zu(this.done,this.undone):this}addChanges(e,r,n,i,a){let o=this.done,s=o[o.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!n||swe.test(n))&&(!s.selectionsAfter.length&&r-this.prevTime<i.newGroupDelay&&i.joinToEvent(a,rwe(s.changes,e.changes))||n=="input.type.compose")?o=V3(o,o.length-1,i.minDepth,new Oo(e.changes.compose(s.changes),DJ(e.effects,s.effects),s.mapped,s.startSelection,Js)):o=V3(o,o.length,i.minDepth,e),new Zu(o,Js,r,n)}addSelection(e,r,n,i){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:Js;return a.length>0&&r-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&nwe(a[a.length-1],e)?this:new Zu(PJ(this.done,e),this.undone,r,n)}addMapping(e){return new Zu(kO(this.done,e),kO(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let a=i[i.length-1],o=a.selectionsAfter[0]||r.selection;if(n&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:h5.of({side:e,rest:awe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let s=i.length==1?Js:i.slice(0,i.length-1);return a.mapped&&(s=kO(s,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:h5.of({side:e,rest:s,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Zu.empty=new Zu(Js,Js);const lwe=[{key:"Mod-z",run:IJ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:d5,preventDefault:!0},{linux:"Ctrl-Shift-z",run:d5,preventDefault:!0},{key:"Mod-u",run:ewe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:twe,preventDefault:!0}];function ny(t,e){return it.create(t.ranges.map(e),t.mainIndex)}function _c(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Jl({state:t,dispatch:e},r){let n=ny(t.selection,r);return n.eq(t.selection,!0)?!1:(e(_c(t,n)),!0)}function fM(t,e){return it.cursor(e?t.to:t.from)}function LJ(t,e){return Jl(t,r=>r.empty?t.moveByChar(r,e):fM(r,e))}function Ha(t){return t.textDirectionAt(t.state.selection.main.head)==Fn.LTR}const RJ=t=>LJ(t,!Ha(t)),NJ=t=>LJ(t,Ha(t));function FJ(t,e){return Jl(t,r=>r.empty?t.moveByGroup(r,e):fM(r,e))}const uwe=t=>FJ(t,!Ha(t)),cwe=t=>FJ(t,Ha(t));function fwe(t,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function hM(t,e,r){let n=Ea(t).resolveInner(e.head),i=r?Kr.closedBy:Kr.openedBy;for(let l=e.head;;){let u=r?n.childAfter(l):n.childBefore(l);if(!u)break;fwe(t,u,i)?n=u:l=r?u.to:u.from}let a=n.type.prop(i),o,s;return a&&(o=r?Qu(t,n.from,1):Qu(t,n.to,-1))&&o.matched?s=r?o.end.to:o.end.from:s=r?n.to:n.from,it.cursor(s,r?-1:1)}const hwe=t=>Jl(t,e=>hM(t.state,e,!Ha(t))),dwe=t=>Jl(t,e=>hM(t.state,e,Ha(t)));function BJ(t,e){return Jl(t,r=>{if(!r.empty)return fM(r,e);let n=t.moveVertically(r,e);return n.head!=r.head?n:t.moveToLineBoundary(r,e)})}const $J=t=>BJ(t,!1),zJ=t=>BJ(t,!0);function jJ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,n=0,i;if(e){for(let a of t.state.facet(Wt.scrollMargins)){let o=a(t);o!=null&&o.top&&(r=Math.max(o==null?void 0:o.top,r)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=t.scrollDOM.clientHeight-r-n}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function GJ(t,e){let r=jJ(t),{state:n}=t,i=ny(n.selection,o=>o.empty?t.moveVertically(o,e,r.height):fM(o,e));if(i.eq(n.selection))return!1;let a;if(r.selfScroll){let o=t.coordsAtPos(n.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),l=s.top+r.marginTop,u=s.bottom-r.marginBottom;o&&o.top>l&&o.bottom<u&&(a=Wt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(_c(n,i),{effects:a}),!0}const yz=t=>GJ(t,!1),p5=t=>GJ(t,!0);function jd(t,e,r){let n=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,r);if(i.head==e.head&&i.head!=(r?n.to:n.from)&&(i=t.moveToLineBoundary(e,r,!1)),!r&&i.head==n.from&&n.length){let a=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(i=it.cursor(n.from+a))}return i}const pwe=t=>Jl(t,e=>jd(t,e,!0)),vwe=t=>Jl(t,e=>jd(t,e,!1)),gwe=t=>Jl(t,e=>jd(t,e,!Ha(t))),mwe=t=>Jl(t,e=>jd(t,e,Ha(t))),ywe=t=>Jl(t,e=>it.cursor(t.lineBlockAt(e.head).from,1)),wwe=t=>Jl(t,e=>it.cursor(t.lineBlockAt(e.head).to,-1));function bwe(t,e,r){let n=!1,i=ny(t.selection,a=>{let o=Qu(t,a.head,-1)||Qu(t,a.head,1)||a.head>0&&Qu(t,a.head-1,1)||a.head<t.doc.length&&Qu(t,a.head+1,-1);if(!o||!o.end)return a;n=!0;let s=o.start.from==a.head?o.end.to:o.end.from;return r?it.range(a.anchor,s):it.cursor(s)});return n?(e(_c(t,i)),!0):!1}const xwe=({state:t,dispatch:e})=>bwe(t,e,!1);function cl(t,e){let r=ny(t.state.selection,n=>{let i=e(n);return it.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(_c(t.state,r)),!0)}function UJ(t,e){return cl(t,r=>t.moveByChar(r,e))}const WJ=t=>UJ(t,!Ha(t)),VJ=t=>UJ(t,Ha(t));function HJ(t,e){return cl(t,r=>t.moveByGroup(r,e))}const Swe=t=>HJ(t,!Ha(t)),Ewe=t=>HJ(t,Ha(t)),_we=t=>cl(t,e=>hM(t.state,e,!Ha(t))),Cwe=t=>cl(t,e=>hM(t.state,e,Ha(t)));function XJ(t,e){return cl(t,r=>t.moveVertically(r,e))}const YJ=t=>XJ(t,!1),qJ=t=>XJ(t,!0);function KJ(t,e){return cl(t,r=>t.moveVertically(r,e,jJ(t).height))}const wz=t=>KJ(t,!1),bz=t=>KJ(t,!0),kwe=t=>cl(t,e=>jd(t,e,!0)),Mwe=t=>cl(t,e=>jd(t,e,!1)),Awe=t=>cl(t,e=>jd(t,e,!Ha(t))),Twe=t=>cl(t,e=>jd(t,e,Ha(t))),Owe=t=>cl(t,e=>it.cursor(t.lineBlockAt(e.head).from)),Iwe=t=>cl(t,e=>it.cursor(t.lineBlockAt(e.head).to)),xz=({state:t,dispatch:e})=>(e(_c(t,{anchor:0})),!0),Sz=({state:t,dispatch:e})=>(e(_c(t,{anchor:t.doc.length})),!0),Ez=({state:t,dispatch:e})=>(e(_c(t,{anchor:t.selection.main.anchor,head:0})),!0),_z=({state:t,dispatch:e})=>(e(_c(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Dwe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Pwe=({state:t,dispatch:e})=>{let r=dM(t).map(({from:n,to:i})=>it.range(n,Math.min(i+1,t.doc.length)));return e(t.update({selection:it.create(r),userEvent:"select"})),!0},Lwe=({state:t,dispatch:e})=>{let r=ny(t.selection,n=>{var i;let a=Ea(t).resolveStack(n.from,1);for(let o=a;o;o=o.next){let{node:s}=o;if((s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from)&&(!((i=s.parent)===null||i===void 0)&&i.parent))return it.range(s.to,s.from)}return n});return e(_c(t,r)),!0},Rwe=({state:t,dispatch:e})=>{let r=t.selection,n=null;return r.ranges.length>1?n=it.create([r.main]):r.main.empty||(n=it.create([it.cursor(r.main.head)])),n?(e(_c(t,n)),!0):!1};function db(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:n}=t,i=n.changeByRange(a=>{let{from:o,to:s}=a;if(o==s){let l=e(a);l<o?(r="delete.backward",l=PS(t,l,!1)):l>o&&(r="delete.forward",l=PS(t,l,!0)),o=Math.min(o,l),s=Math.max(s,l)}else o=PS(t,o,!1),s=PS(t,s,!0);return o==s?{range:a}:{changes:{from:o,to:s},range:it.cursor(o,o<a.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?Wt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function PS(t,e,r){if(t instanceof Wt)for(let n of t.state.facet(Wt.atomicRanges).map(i=>i(t)))n.between(e,e,(i,a)=>{i<e&&a>e&&(e=r?a:i)});return e}const QJ=(t,e)=>db(t,r=>{let n=r.from,{state:i}=t,a=i.doc.lineAt(n),o,s;if(!e&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,n-a.from))){if(o[o.length-1]=="	")return n-1;let l=ry(o,i.tabSize),u=l%yv(i)||yv(i);for(let c=0;c<u&&o[o.length-1-c]==" ";c++)n--;s=n}else s=ba(a.text,n-a.from,e,e)+a.from,s==n&&a.number!=(e?i.doc.lines:1)?s+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(s-a.from,n-a.from))&&(s=ba(a.text,s-a.from,!1,!1)+a.from);return s}),v5=t=>QJ(t,!1),ZJ=t=>QJ(t,!0),JJ=(t,e)=>db(t,r=>{let n=r.head,{state:i}=t,a=i.doc.lineAt(n),o=i.charCategorizer(n);for(let s=null;;){if(n==(e?a.to:a.from)){n==r.head&&a.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=ba(a.text,n-a.from,e)+a.from,u=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),c=o(u);if(s!=null&&c!=s)break;(u!=" "||n!=r.head)&&(s=c),n=l}return n}),eee=t=>JJ(t,!1),Nwe=t=>JJ(t,!0),Fwe=t=>db(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),Bwe=t=>db(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),$we=t=>db(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),zwe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:hn.of(["",""])},range:it.cursor(n.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},jwe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let i=n.from,a=t.doc.lineAt(i),o=i==a.from?i-1:ba(a.text,i-a.from,!1)+a.from,s=i==a.to?i+1:ba(a.text,i-a.from,!0)+a.from;return{changes:{from:o,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(o,i))},range:it.cursor(s)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function dM(t){let e=[],r=-1;for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),a=t.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=t.doc.lineAt(n.to-1)),r>=i.number){let o=e[e.length-1];o.to=a.to,o.ranges.push(n)}else e.push({from:i.from,to:a.to,ranges:[n]});r=a.number+1}return e}function tee(t,e,r){if(t.readOnly)return!1;let n=[],i=[];for(let a of dM(t)){if(r?a.to==t.doc.length:a.from==0)continue;let o=t.doc.lineAt(r?a.to+1:a.from-1),s=o.length+1;if(r){n.push({from:a.to,to:o.to},{from:a.from,insert:o.text+t.lineBreak});for(let l of a.ranges)i.push(it.range(Math.min(t.doc.length,l.anchor+s),Math.min(t.doc.length,l.head+s)))}else{n.push({from:o.from,to:a.from},{from:a.to,insert:t.lineBreak+o.text});for(let l of a.ranges)i.push(it.range(l.anchor-s,l.head-s))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:it.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Gwe=({state:t,dispatch:e})=>tee(t,e,!1),Uwe=({state:t,dispatch:e})=>tee(t,e,!0);function ree(t,e,r){if(t.readOnly)return!1;let n=[];for(let i of dM(t))r?n.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):n.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Wwe=({state:t,dispatch:e})=>ree(t,e,!1),Vwe=({state:t,dispatch:e})=>ree(t,e,!0),Hwe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(dM(e).map(({from:i,to:a})=>(i>0?i--:a<e.doc.length&&a++,{from:i,to:a}))),n=ny(e.selection,i=>t.moveVertically(i,!0)).map(r);return t.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Xwe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=Ea(t).resolveInner(e),n=r.childBefore(e),i=r.childAfter(e),a;return n&&i&&n.to<=e&&i.from>=e&&(a=n.type.prop(Kr.closedBy))&&a.indexOf(i.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const Ywe=nee(!1),qwe=nee(!0);function nee(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:a,to:o}=i,s=e.doc.lineAt(a),l=!t&&a==o&&Xwe(e,a);t&&(a=o=(o<=s.to?s:e.doc.lineAt(o)).to);let u=new sM(e,{simulateBreak:a,simulateDoubleBreak:!!l}),c=CN(u,a);for(c==null&&(c=ry(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));o<s.to&&/\s/.test(s.text[o-s.from]);)o++;l?{from:a,to:o}=l:a>s.from&&a<s.from+100&&!/\S/.test(s.text.slice(0,a))&&(a=s.from);let f=["",rw(e,c)];return l&&f.push(rw(e,u.lineIndent(s.from,-1))),{changes:{from:a,to:o,insert:hn.of(f)},range:it.cursor(a+1+f[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function DN(t,e){let r=-1;return t.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let s=t.doc.lineAt(o);s.number>r&&(n.empty||n.to>s.from)&&(e(s,i,n),r=s.number),o=s.to+1}let a=t.changes(i);return{changes:i,range:it.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const Kwe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),n=new sM(t,{overrideIndentation:a=>{let o=r[a];return o??-1}}),i=DN(t,(a,o,s)=>{let l=CN(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let u=/^\s*/.exec(a.text)[0],c=rw(t,l);(u!=c||s.from<a.from+u.length)&&(r[a.from]=l,o.push({from:a.from,to:a.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},iee=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DN(t,(r,n)=>{n.push({from:r.from,insert:t.facet(oM)})}),{userEvent:"input.indent"})),!0),aee=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DN(t,(r,n)=>{let i=/^\s*/.exec(r.text)[0];if(!i)return;let a=ry(i,t.tabSize),o=0,s=rw(t,Math.max(0,a-yv(t)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:r.from+o,to:r.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),Qwe=[{key:"Ctrl-b",run:RJ,shift:WJ,preventDefault:!0},{key:"Ctrl-f",run:NJ,shift:VJ},{key:"Ctrl-p",run:$J,shift:YJ},{key:"Ctrl-n",run:zJ,shift:qJ},{key:"Ctrl-a",run:ywe,shift:Owe},{key:"Ctrl-e",run:wwe,shift:Iwe},{key:"Ctrl-d",run:ZJ},{key:"Ctrl-h",run:v5},{key:"Ctrl-k",run:Fwe},{key:"Ctrl-Alt-h",run:eee},{key:"Ctrl-o",run:zwe},{key:"Ctrl-t",run:jwe},{key:"Ctrl-v",run:p5}],Zwe=[{key:"ArrowLeft",run:RJ,shift:WJ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:uwe,shift:Swe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:gwe,shift:Awe,preventDefault:!0},{key:"ArrowRight",run:NJ,shift:VJ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cwe,shift:Ewe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:mwe,shift:Twe,preventDefault:!0},{key:"ArrowUp",run:$J,shift:YJ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:xz,shift:Ez},{mac:"Ctrl-ArrowUp",run:yz,shift:wz},{key:"ArrowDown",run:zJ,shift:qJ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Sz,shift:_z},{mac:"Ctrl-ArrowDown",run:p5,shift:bz},{key:"PageUp",run:yz,shift:wz},{key:"PageDown",run:p5,shift:bz},{key:"Home",run:vwe,shift:Mwe,preventDefault:!0},{key:"Mod-Home",run:xz,shift:Ez},{key:"End",run:pwe,shift:kwe,preventDefault:!0},{key:"Mod-End",run:Sz,shift:_z},{key:"Enter",run:Ywe},{key:"Mod-a",run:Dwe},{key:"Backspace",run:v5,shift:v5},{key:"Delete",run:ZJ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:eee},{key:"Mod-Delete",mac:"Alt-Delete",run:Nwe},{mac:"Mod-Backspace",run:Bwe},{mac:"Mod-Delete",run:$we}].concat(Qwe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Jwe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hwe,shift:_we},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:dwe,shift:Cwe},{key:"Alt-ArrowUp",run:Gwe},{key:"Shift-Alt-ArrowUp",run:Wwe},{key:"Alt-ArrowDown",run:Uwe},{key:"Shift-Alt-ArrowDown",run:Vwe},{key:"Escape",run:Rwe},{key:"Mod-Enter",run:qwe},{key:"Alt-l",mac:"Ctrl-l",run:Pwe},{key:"Mod-i",run:Lwe,preventDefault:!0},{key:"Mod-[",run:aee},{key:"Mod-]",run:iee},{key:"Mod-Alt-\\",run:Kwe},{key:"Shift-Mod-k",run:Hwe},{key:"Shift-Mod-\\",run:xwe},{key:"Mod-/",run:W2e},{key:"Alt-A",run:H2e}].concat(Zwe),ebe={key:"Tab",run:iee,shift:aee};function _n(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];typeof i=="string"?t.setAttribute(n,i):i!=null&&(t[n]=i)}e++}for(;e<arguments.length;e++)oee(t,arguments[e]);return t}function oee(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)oee(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}const Cz=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Sm{constructor(e,r,n=0,i=e.length,a,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=a?s=>a(Cz(s)):Cz,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ga(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=uN(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Ks(e);let i=this.normalize(r);for(let a=0,o=n;;a++){let s=i.charCodeAt(a),l=this.match(s,o,this.bufferPos+this.bufferStart);if(a==i.length-1){if(l)return this.value=l,this;break}o==n&&a<r.length&&r.charCodeAt(a)==s&&o++}}}match(e,r,n){let i=null;for(let a=0;a<this.matches.length;a+=2){let o=this.matches[a],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[a+1],to:n}:(this.matches[a]++,s=!0)),s||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:r,to:n}:this.matches.push(1,r)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Sm.prototype[Symbol.iterator]=function(){return this});const see={from:-1,to:-1,match:/.*/.exec("")},PN="gm"+(/x/.unicode==null?"":"u");class lee{constructor(e,r,n,i=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=see,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new uee(e,r,n,i,a);this.re=new RegExp(r,PN+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=H3(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,i=n+r[0].length;if(this.matchPos=H3(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const MO=new WeakMap;class R0{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let i=MO.get(e);if(!i||i.from>=n||i.to<=r){let s=new R0(r,e.sliceString(r,n));return MO.set(e,s),s}if(i.from==r&&i.to==n)return i;let{text:a,from:o}=i;return o>r&&(a=e.sliceString(r,o)+a,o=r),i.to<n&&(a+=e.sliceString(i.to,n)),MO.set(e,new R0(o,a)),new R0(r,a.slice(r-o,n-o))}}class uee{constructor(e,r,n,i,a){this.text=e,this.to=a,this.done=!1,this.value=see,this.matchPos=H3(e,i),this.re=new RegExp(r,PN+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=R0.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,i=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,r)))return this.value={from:n,to:i,match:r},this.matchPos=H3(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=R0.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(lee.prototype[Symbol.iterator]=uee.prototype[Symbol.iterator]=function(){return this});function tbe(t){try{return new RegExp(t,PN),!0}catch{return!1}}function H3(t,e){if(e>=t.length)return e;let r=t.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function g5(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),r=_n("input",{class:"cm-textfield",name:"line",value:e}),n=_n("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),t.dispatch({effects:X3.of(!1)}),t.focus()):a.keyCode==13&&(a.preventDefault(),i())},onsubmit:a=>{a.preventDefault(),i()}},_n("label",t.state.phrase("Go to line"),": ",r)," ",_n("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!a)return;let{state:o}=t,s=o.doc.lineAt(o.selection.main.head),[,l,u,c,f]=a,h=c?+c.slice(1):0,d=u?+u:s.number;if(u&&f){let g=d/100;l&&(g=g*(l=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else u&&l&&(d=d*(l=="-"?-1:1)+s.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),v=it.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[X3.of(!1),Wt.scrollIntoView(v.from,{y:"center"})],selection:v}),t.focus()}return{dom:n}}const X3=Br.define(),kz=Ca.define({create(){return!0},update(t,e){for(let r of e.effects)r.is(X3)&&(t=r.value);return t},provide:t=>ew.from(t,e=>e?g5:null)}),rbe=t=>{let e=J2(t,g5);if(!e){let r=[X3.of(!0)];t.state.field(kz,!1)==null&&r.push(Br.appendConfig.of([kz,nbe])),t.dispatch({effects:r}),e=J2(t,g5)}return e&&e.dom.querySelector("input").select(),!0},nbe=Wt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),ibe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},cee=Qt.define({combine(t){return Ec(t,ibe,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function abe(t){let e=[cbe,ube];return t&&e.push(cee.of(t)),e}const obe=hr.mark({class:"cm-selectionMatch"}),sbe=hr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Mz(t,e,r,n){return(r==0||t(e.sliceDoc(r-1,r))!=Vn.Word)&&(n==e.doc.length||t(e.sliceDoc(n,n+1))!=Vn.Word)}function lbe(t,e,r,n){return t(e.sliceDoc(r,r+1))==Vn.Word&&t(e.sliceDoc(n-1,n))==Vn.Word}const ube=Si.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(cee),{state:r}=t,n=r.selection;if(n.ranges.length>1)return hr.none;let i=n.main,a,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return hr.none;let l=r.wordAt(i.head);if(!l)return hr.none;o=r.charCategorizer(i.head),a=r.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return hr.none;if(e.wholeWords){if(a=r.sliceDoc(i.from,i.to),o=r.charCategorizer(i.head),!(Mz(o,r,i.from,i.to)&&lbe(o,r,i.from,i.to)))return hr.none}else if(a=r.sliceDoc(i.from,i.to),!a)return hr.none}let s=[];for(let l of t.visibleRanges){let u=new Sm(r.doc,a,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!o||Mz(o,r,c,f))&&(i.empty&&c<=i.from&&f>=i.to?s.push(sbe.range(c,f)):(c>=i.to||f<=i.from)&&s.push(obe.range(c,f)),s.length>e.maxMatches))return hr.none}}return hr.set(s)}},{decorations:t=>t.decorations}),cbe=Wt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),fbe=({state:t,dispatch:e})=>{let{selection:r}=t,n=it.create(r.ranges.map(i=>t.wordAt(i.head)||it.cursor(i.head)),r.mainIndex);return n.eq(r)?!1:(e(t.update({selection:n})),!0)};function hbe(t,e){let{main:r,ranges:n}=t.selection,i=t.wordAt(r.head),a=i&&i.from==r.from&&i.to==r.to;for(let o=!1,s=new Sm(t.doc,e,n[n.length-1].to);;)if(s.next(),s.done){if(o)return null;s=new Sm(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==s.value.from))continue;if(a){let l=t.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const dbe=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(a=>a.from===a.to))return fbe({state:t,dispatch:e});let n=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(a=>t.sliceDoc(a.from,a.to)!=n))return!1;let i=hbe(t,n);return i?(e(t.update({selection:t.selection.addRange(it.range(i.from,i.to),!1),effects:Wt.scrollIntoView(i.to)})),!0):!1},iy=Qt.define({combine(t){return Ec(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Cbe(e),scrollToMatch:e=>Wt.scrollIntoView(e)})}});class fee{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||tbe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new mbe(this):new vbe(this)}getCursor(e,r=0,n){let i=e.doc?e:en.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?qg(this,i,r,n):Yg(this,i,r,n)}}class hee{constructor(e){this.spec=e}}function Yg(t,e,r,n){return new Sm(e.doc,t.unquoted,r,n,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?pbe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function pbe(t,e){return(r,n,i,a)=>((a>r||a+i.length<n)&&(a=Math.max(0,r-2),i=t.sliceString(a,Math.min(t.length,n+2))),(e(Y3(i,r-a))!=Vn.Word||e(q3(i,r-a))!=Vn.Word)&&(e(q3(i,n-a))!=Vn.Word||e(Y3(i,n-a))!=Vn.Word))}class vbe extends hee{constructor(e){super(e)}nextMatch(e,r,n){let i=Yg(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=Yg(this.spec,e,0,r).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=n;;){let a=Math.max(r,i-1e4-this.spec.unquoted.length),o=Yg(this.spec,e,a,i),s=null;for(;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(a==r)return null;i-=1e4}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=Yg(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let a=Yg(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}function qg(t,e,r,n){return new lee(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?gbe(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function Y3(t,e){return t.slice(ba(t,e,!1),e)}function q3(t,e){return t.slice(e,ba(t,e))}function gbe(t){return(e,r,n)=>!n[0].length||(t(Y3(n.input,n.index))!=Vn.Word||t(q3(n.input,n.index))!=Vn.Word)&&(t(q3(n.input,n.index+n[0].length))!=Vn.Word||t(Y3(n.input,n.index+n[0].length))!=Vn.Word)}class mbe extends hee{nextMatch(e,r,n){let i=qg(this.spec,e,n,e.doc.length).next();return i.done&&(i=qg(this.spec,e,0,r).next()),i.done?null:i.value}prevMatchInRange(e,r,n){for(let i=1;;i++){let a=Math.max(r,n-i*1e4),o=qg(this.spec,e,a,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(a==r||s.from>a+10))return s;if(a==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:r)}matchAll(e,r){let n=qg(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=r)return null;i.push(n.value)}return i}highlight(e,r,n,i){let a=qg(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)i(a.value.from,a.value.to)}}const iw=Br.define(),LN=Br.define(),hd=Ca.define({create(t){return new AO(m5(t).create(),null)},update(t,e){for(let r of e.effects)r.is(iw)?t=new AO(r.value.create(),t.panel):r.is(LN)&&(t=new AO(t.query,r.value?RN:null));return t},provide:t=>ew.from(t,e=>e.panel)});class AO{constructor(e,r){this.query=e,this.panel=r}}const ybe=hr.mark({class:"cm-searchMatch"}),wbe=hr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),bbe=Si.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(hd))}update(t){let e=t.state.field(hd);(e!=t.startState.field(hd)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return hr.none;let{view:r}=this,n=new wd;for(let i=0,a=r.visibleRanges,o=a.length;i<o;i++){let{from:s,to:l}=a[i];for(;i<o-1&&l>a[i+1].from-2*250;)l=a[++i].to;t.highlight(r.state,s,l,(u,c)=>{let f=r.state.selection.ranges.some(h=>h.from==u&&h.to==c);n.add(u,c,f?wbe:ybe)})}return n.finish()}},{decorations:t=>t.decorations});function pb(t){return e=>{let r=e.state.field(hd,!1);return r&&r.query.spec.valid?t(e,r):vee(e)}}const K3=pb((t,{query:e})=>{let{to:r}=t.state.selection.main,n=e.nextMatch(t.state,r,r);if(!n)return!1;let i=it.single(n.from,n.to),a=t.state.facet(iy);return t.dispatch({selection:i,effects:[NN(t,n),a.scrollToMatch(i.main,t)],userEvent:"select.search"}),pee(t),!0}),Q3=pb((t,{query:e})=>{let{state:r}=t,{from:n}=r.selection.main,i=e.prevMatch(r,n,n);if(!i)return!1;let a=it.single(i.from,i.to),o=t.state.facet(iy);return t.dispatch({selection:a,effects:[NN(t,i),o.scrollToMatch(a.main,t)],userEvent:"select.search"}),pee(t),!0}),xbe=pb((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:it.create(r.map(n=>it.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Sbe=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:i}=r.main,a=[],o=0;for(let s=new Sm(t.doc,t.sliceDoc(n,i));!s.next().done;){if(a.length>1e3)return!1;s.value.from==n&&(o=a.length),a.push(it.range(s.value.from,s.value.to))}return e(t.update({selection:it.create(a,o),userEvent:"select.search.matches"})),!0},Az=pb((t,{query:e})=>{let{state:r}=t,{from:n,to:i}=r.selection.main;if(r.readOnly)return!1;let a=e.nextMatch(r,n,n);if(!a)return!1;let o=[],s,l,u=[];if(a.from==n&&a.to==i&&(l=r.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:l}),a=e.nextMatch(r,a.from,a.to),u.push(Wt.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),a){let c=o.length==0||o[0].from>=a.to?0:a.to-a.from-l.length;s=it.single(a.from-c,a.to-c),u.push(NN(t,a)),u.push(r.facet(iy).scrollToMatch(s.main,t))}return t.dispatch({changes:o,selection:s,effects:u,userEvent:"input.replace"}),!0}),Ebe=pb((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(i=>{let{from:a,to:o}=i;return{from:a,to:o,insert:e.getReplacement(i)}});if(!r.length)return!1;let n=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:Wt.announce.of(n),userEvent:"input.replace.all"}),!0});function RN(t){return t.state.facet(iy).createPanel(t)}function m5(t,e){var r,n,i,a,o;let s=t.selection.main,l=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!l)return e;let u=t.facet(iy);return new fee({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function dee(t){let e=J2(t,RN);return e&&e.dom.querySelector("[main-field]")}function pee(t){let e=dee(t);e&&e==t.root.activeElement&&e.select()}const vee=t=>{let e=t.state.field(hd,!1);if(e&&e.panel){let r=dee(t);if(r&&r!=t.root.activeElement){let n=m5(t.state,e.query.spec);n.valid&&t.dispatch({effects:iw.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[LN.of(!0),e?iw.of(m5(t.state,e.query.spec)):Br.appendConfig.of(Mbe)]});return!0},gee=t=>{let e=t.state.field(hd,!1);if(!e||!e.panel)return!1;let r=J2(t,RN);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:LN.of(!1)}),!0},_be=[{key:"Mod-f",run:vee,scope:"editor search-panel"},{key:"F3",run:K3,shift:Q3,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:K3,shift:Q3,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:gee,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Sbe},{key:"Mod-Alt-g",run:rbe},{key:"Mod-d",run:dbe,preventDefault:!0}];class Cbe{constructor(e){this.view=e;let r=this.query=e.state.field(hd).query.spec;this.commit=this.commit.bind(this),this.searchField=_n("input",{value:r.search,placeholder:Xo(e,"Find"),"aria-label":Xo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=_n("input",{value:r.replace,placeholder:Xo(e,"Replace"),"aria-label":Xo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=_n("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=_n("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=_n("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(i,a,o){return _n("button",{class:"cm-button",name:i,onclick:a,type:"button"},o)}this.dom=_n("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>K3(e),[Xo(e,"next")]),n("prev",()=>Q3(e),[Xo(e,"previous")]),n("select",()=>xbe(e),[Xo(e,"all")]),_n("label",null,[this.caseField,Xo(e,"match case")]),_n("label",null,[this.reField,Xo(e,"regexp")]),_n("label",null,[this.wordField,Xo(e,"by word")]),...e.state.readOnly?[]:[_n("br"),this.replaceField,n("replace",()=>Az(e),[Xo(e,"replace")]),n("replaceAll",()=>Ebe(e),[Xo(e,"replace all")])],_n("button",{name:"close",onclick:()=>gee(e),"aria-label":Xo(e,"close"),type:"button"},["×"])])}commit(){let e=new fee({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:iw.of(e)}))}keydown(e){Iye(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Q3:K3)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Az(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(iw)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(iy).top}}function Xo(t,e){return t.state.phrase(e)}const LS=30,RS=/[\s\.,:;?!]/;function NN(t,{from:e,to:r}){let n=t.state.doc.lineAt(e),i=t.state.doc.lineAt(r).to,a=Math.max(n.from,e-LS),o=Math.min(i,r+LS),s=t.state.sliceDoc(a,o);if(a!=n.from){for(let l=0;l<LS;l++)if(!RS.test(s[l+1])&&RS.test(s[l])){s=s.slice(l);break}}if(o!=i){for(let l=s.length-1;l>s.length-LS;l--)if(!RS.test(s[l-1])&&RS.test(s[l])){s=s.slice(0,l);break}}return Wt.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${n.number}.`)}const kbe=Wt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Mbe=[hd,ty.low(bbe),kbe];class mee{constructor(e,r,n){this.state=e,this.pos=r,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let r=Ea(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),i=r.text.slice(n-r.from,this.pos-r.from),a=i.search(yee(e,!1));return a<0?null:{from:n+a,to:this.pos,text:i.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,r){e=="abort"&&this.abortListeners&&this.abortListeners.push(r)}}function Tz(t){let e=Object.keys(t).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Abe(t){let e=Object.create(null),r=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let a=1;a<i.length;a++)r[i[a]]=!0}let n=Tz(e)+Tz(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function Tbe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[r,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Abe(e);return i=>{let a=i.matchBefore(n);return a||i.explicit?{from:a?a.from:i.pos,options:e,validFor:r}:null}}class Oz{constructor(e,r,n,i){this.completion=e,this.source=r,this.match=n,this.score=i}}function dd(t){return t.selection.main.from}function yee(t,e){var r;let{source:n}=t,i=e&&n[0]!="^",a=n[n.length-1]!="$";return!i&&!a?t:new RegExp(`${i?"^":""}(?:${n})${a?"$":""}`,(r=t.flags)!==null&&r!==void 0?r:t.ignoreCase?"i":"")}const Obe=Sc.define();function Ibe(t,e,r,n){let{main:i}=t.selection,a=r-i.from,o=n-i.from;return Object.assign(Object.assign({},t.changeByRange(s=>s!=i&&r!=n&&t.sliceDoc(s.from+a,s.from+o)!=t.sliceDoc(r,n)?{range:s}:{changes:{from:s.from+a,to:n==i.from?s.to:s.from+o,insert:e},range:it.cursor(s.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Iz=new WeakMap;function Dbe(t){if(!Array.isArray(t))return t;let e=Iz.get(t);return e||Iz.set(t,e=Tbe(t)),e}const Z3=Br.define(),aw=Br.define();class Pbe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=ga(e,r),i=Ks(n);this.chars.push(n);let a=e.slice(r,r+i),o=a.toUpperCase();this.folded.push(ga(o==a?a.toLowerCase():o,0)),r+=i}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:r,folded:n,any:i,precise:a,byWord:o}=this;if(r.length==1){let y=ga(e,0),w=Ks(y),b=w==e.length?0:-100;if(y!=r[0])if(y==n[0])b+=-200;else return!1;return this.ret(b,[0,w])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=r.length,u=0;if(s<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let b=ga(e,y);(b==r[u]||b==n[u])&&(i[u++]=y),y+=Ks(b)}if(u<l)return!1}let c=0,f=0,h=!1,d=0,p=-1,v=-1,g=/[a-z]/.test(e),m=!0;for(let y=0,w=Math.min(e.length,200),b=0;y<w&&f<l;){let x=ga(e,y);s<0&&(c<l&&x==r[c]&&(a[c++]=y),d<l&&(x==r[d]||x==n[d]?(d==0&&(p=y),v=y+1,d++):d=0));let S,E=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(S=uN(x))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||E==1&&g||b==0&&E!=0)&&(r[f]==x||n[f]==x&&(h=!0)?o[f++]=y:o.length&&(m=!1)),b=E,y+=Ks(x)}return f==l&&o[0]==0&&m?this.result(-100+(h?-200:0),o,e):d==l&&p==0?this.ret(-200-e.length+(v==e.length?0:-100),[0,v]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==l?this.ret(-900-e.length,[p,v]):f==l?this.result(-100+(h?-200:0)+-700+(m?0:-1100),o,e):r.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,r,n){let i=[],a=0;for(let o of r){let s=o+(this.astral?Ks(ga(n,o)):1);a&&i[a-1]==o?i[a-1]=s:(i[a++]=o,i[a++]=s)}return this.ret(e-n.length,i)}}const wa=Qt.define({combine(t){return Ec(t,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Lbe,compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>Dz(e(n),r(n)),optionClass:(e,r)=>n=>Dz(e(n),r(n)),addToOptions:(e,r)=>e.concat(r)})}});function Dz(t,e){return t?e?t+" "+e:t:e}function Lbe(t,e,r,n,i,a){let o=t.textDirection==Fn.RTL,s=o,l=!1,u="top",c,f,h=e.left-i.left,d=i.right-e.right,p=n.right-n.left,v=n.bottom-n.top;if(s&&h<Math.min(p,d)?s=!1:!s&&d<Math.min(p,h)&&(s=!0),p<=(s?h:d))c=Math.max(i.top,Math.min(r.top,i.bottom-v))-e.top,f=Math.min(400,s?h:d);else{l=!0,f=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=v||y>e.top?c=r.bottom-e.top:(u="bottom",c=e.bottom-r.top)}let g=(e.bottom-e.top)/a.offsetHeight,m=(e.right-e.left)/a.offsetWidth;return{style:`${u}: ${c/g}px; max-width: ${f/m}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":s?"left":"right")}}function Rbe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,i,a){let o=document.createElement("span");o.className="cm-completionLabel";let s=r.displayLabel||r.label,l=0;for(let u=0;u<a.length;){let c=a[u++],f=a[u++];c>l&&o.appendChild(document.createTextNode(s.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(s.slice(c,f))),h.className="cm-completionMatchedText",l=f}return l<s.length&&o.appendChild(document.createTextNode(s.slice(l))),o},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function TO(t,e,r){if(t<=r)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/r);return{from:i*r,to:(i+1)*r}}let n=Math.floor((t-e)/r);return{from:t-(n+1)*r,to:t-n*r}}class Nbe{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(r),{options:a,selected:o}=i.open,s=e.state.facet(wa);this.optionContent=Rbe(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=TO(a.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(r).open;for(let c=l.target,f;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(f=/-(\d+)$/.exec(c.id))&&+f[1]<u.length){this.applyCompletion(e,u[+f[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(wa).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:aw.of(null)})}),this.showOptions(a,i.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:a,selected:o,disabled:s}=n.open;(!i.open||i.open.options!=a)&&(this.range=TO(a.length,o,e.state.facet(wa).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),s!=((r=i.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=TO(r.options.length,r.selected,this.view.state.facet(wa).maxRenderedOptions),this.showOptions(r.options,e.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:n}=r.options[r.selected],{info:i}=n;if(!i)return;let a=typeof i=="string"?document.createTextNode(i):i(n);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>tl(this.view.state,o,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:a}=e;n.appendChild(i),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return r&&Bbe(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),a=this.space;if(!a){let o=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(a.bottom,r.bottom)-10||i.bottom<Math.max(a.top,r.top)+10?null:this.view.state.facet(wa).positionInfo(this.view,r,i,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const i=document.createElement("ul");i.id=r,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:u}=s;if(u){let h=typeof u=="string"?u:u.name;if(h!=a&&(o>n.from||n.from==0))if(a=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=r+"-"+o,c.setAttribute("role","option");let f=this.optionClass(s);f&&(c.className=f);for(let h of this.optionContent){let d=h(s,this.view.state,this.view,l);d&&c.appendChild(d)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Fbe(t,e){return r=>new Nbe(r,t,e)}function Bbe(t,e){let r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=r.height/t.offsetHeight;n.top<r.top?t.scrollTop-=(r.top-n.top)/i:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/i)}function Pz(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function $be(t,e){let r=[],n=null,i=l=>{r.push(l);let{section:u}=l.completion;if(u){n||(n=[]);let c=typeof u=="string"?u:u.name;n.some(f=>f.name==c)||n.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult()){let u=l.result.getMatch;if(l.result.filter===!1)for(let c of l.result.options)i(new Oz(c,l.source,u?u(c):[],1e9-r.length));else{let c=new Pbe(e.sliceDoc(l.from,l.to));for(let f of l.result.options)if(c.match(f.label)){let h=f.displayLabel?u?u(f,c.matched):[]:c.matched;i(new Oz(f,l.source,h,c.score+(f.boost||0)))}}}if(n){let l=Object.create(null),u=0,c=(f,h)=>{var d,p;return((d=f.rank)!==null&&d!==void 0?d:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(f.name<h.name?-1:1)};for(let f of n.sort(c))u-=1e5,l[f.name]=u;for(let f of r){let{section:h}=f.completion;h&&(f.score+=l[typeof h=="string"?h:h.name])}}let a=[],o=null,s=e.facet(wa).compareCompletions;for(let l of r.sort((u,c)=>c.score-u.score||s(u.completion,c.completion))){let u=l.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?a.push(l):Pz(l.completion)>Pz(o)&&(a[a.length-1]=l),o=l.completion}return a}class b0{constructor(e,r,n,i,a,o){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=i,this.selected=a,this.disabled=o}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new b0(this.options,Lz(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,i,a){let o=$be(e,r);if(!o.length)return i&&e.some(l=>l.state==1)?new b0(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=r.facet(wa).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){s=u;break}}return new b0(o,Lz(n,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:Wbe,above:a.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new b0(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class J3{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new J3(Gbe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(wa),a=(n.override||r.languageDataAt("autocomplete",dd(r)).map(Dbe)).map(s=>(this.active.find(u=>u.source==s)||new ko(s,this.active.some(u=>u.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((s,l)=>s==this.active[l])&&(a=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||a.some(s=>s.hasResult()&&e.changes.touchesRange(s.from,s.to))||!zbe(a,this.active)?o=b0.build(a,r,this.id,o,n):o&&o.disabled&&!a.some(s=>s.state==1)&&(o=null),!o&&a.every(s=>s.state!=1)&&a.some(s=>s.hasResult())&&(a=a.map(s=>s.hasResult()?new ko(s.source,0):s));for(let s of e.effects)s.is(bee)&&(o=o&&o.setSelected(s.value,this.id));return a==this.active&&o==this.open?this:new J3(a,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:jbe}}function zbe(t,e){if(t==e)return!0;for(let r=0,n=0;;){for(;r<t.length&&!t[r].hasResult;)r++;for(;n<e.length&&!e[n].hasResult;)n++;let i=r==t.length,a=n==e.length;if(i||a)return i==a;if(t[r++].result!=e[n++].result)return!1}}const jbe={"aria-autocomplete":"list"};function Lz(t,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(r["aria-activedescendant"]=t+"-"+e),r}const Gbe=[];function y5(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class ko{constructor(e,r,n=-1){this.source=e,this.state=r,this.explicitPos=n}hasResult(){return!1}update(e,r){let n=y5(e),i=this;n?i=i.handleUserEvent(e,n,r):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new ko(i.source,0));for(let a of e.effects)if(a.is(Z3))i=new ko(i.source,1,a.value?dd(e.state):-1);else if(a.is(aw))i=new ko(i.source,0);else if(a.is(wee))for(let o of a.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,r,n){return r=="delete"||!n.activateOnTyping?this.map(e.changes):new ko(this.source,1)}handleChange(e){return e.changes.touchesRange(dd(e.startState))?new ko(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ko(this.source,this.state,e.mapPos(this.explicitPos))}}class N0 extends ko{constructor(e,r,n,i,a){super(e,2,r),this.result=n,this.from=i,this.to=a}hasResult(){return!0}handleUserEvent(e,r,n){var i;let a=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=dd(e.state);if((this.explicitPos<0?s<=a:s<this.from)||s>o||r=="delete"&&dd(e.startState)==this.from)return new ko(this.source,r=="input"&&n.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return Ube(this.result.validFor,e.state,a,o)?new N0(this.source,l,this.result,a,o):this.result.update&&(u=this.result.update(this.result,a,o,new mee(e.state,s,l>=0)))?new N0(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:dd(e.state)):new ko(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ko(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new N0(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Ube(t,e,r,n){if(!t)return!1;let i=e.sliceDoc(r,n);return typeof t=="function"?t(i,r,n,e):yee(t,!0).test(i)}const wee=Br.define({map(t,e){return t.map(r=>r.map(e))}}),bee=Br.define(),ns=Ca.define({create(){return J3.start()},update(t,e){return t.update(e)},provide:t=>[bN.from(t,e=>e.tooltip),Wt.contentAttributes.from(t,e=>e.attrs)]});function xee(t,e){const r=e.completion.apply||e.completion.label;let n=t.state.field(ns).active.find(i=>i.source==e.source);return n instanceof N0?(typeof r=="string"?t.dispatch(Object.assign(Object.assign({},Ibe(t.state,r,n.from,n.to)),{annotations:Obe.of(e.completion)})):r(t,e.completion,n.from,n.to),!0):!1}const Wbe=Fbe(ns,xee);function NS(t,e="option"){return r=>{let n=r.state.field(ns,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(wa).interactionDelay)return!1;let i=1,a;e=="page"&&(a=ZZ(r,n.open.tooltip))&&(i=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,s=n.open.selected>-1?n.open.selected+i*(t?1:-1):t?0:o-1;return s<0?s=e=="page"?0:o-1:s>=o&&(s=e=="page"?o-1:0),r.dispatch({effects:bee.of(s)}),!0}}const Vbe=t=>{let e=t.state.field(ns,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(wa).interactionDelay?!1:xee(t,e.open.options[e.open.selected])},Hbe=t=>t.state.field(ns,!1)?(t.dispatch({effects:Z3.of(!0)}),!0):!1,Xbe=t=>{let e=t.state.field(ns,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(t.dispatch({effects:aw.of(null)}),!0)};class Ybe{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const qbe=50,Kbe=1e3,Qbe=Si.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(ns).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(ns);if(!t.selectionSet&&!t.docChanged&&t.startState.field(ns)==e)return;let r=t.transactions.some(i=>(i.selection||i.docChanged)&&!y5(i));for(let i=0;i<this.running.length;i++){let a=this.running[i];if(r||a.updates.length+t.transactions.length>qbe&&Date.now()-a.time>Kbe){for(let o of a.context.abortListeners)try{o()}catch(s){tl(this.view.state,s)}a.context.abortListeners=null,this.running.splice(i--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(i=>i.effects.some(a=>a.is(Z3)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.state.facet(wa).activateOnTypingDelay;if(this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(a=>a.active.source==i.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let i of t.transactions)y5(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(ns);for(let r of e.active)r.state==1&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r)}startQuery(t){let{state:e}=this.view,r=dd(e),n=new mee(e,r,t.explicitPos==r),i=new Ybe(t,n);this.running.push(i),Promise.resolve(t.source(n)).then(a=>{i.context.aborted||(i.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:aw.of(null)}),tl(this.view.state,a)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(wa).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(wa);for(let n=0;n<this.running.length;n++){let i=this.running[n];if(i.done===void 0)continue;if(this.running.splice(n--,1),i.done){let o=new N0(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:dd(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)o=o.update(s,r);if(o.hasResult()){e.push(o);continue}}let a=this.view.state.field(ns).active.find(o=>o.source==i.active.source);if(a&&a.state==1)if(i.done==null){let o=new ko(i.active.source,0);for(let s of i.updates)o=o.update(s,r);o.state!=1&&e.push(o)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:wee.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(ns,!1);if(e&&e.tooltip&&this.view.state.facet(wa).closeOnBlur){let r=e.open&&ZZ(this.view,e.open.tooltip);(!r||!r.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:aw.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Z3.of(!1)}),20),this.composing=0}}}),Zbe=Wt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),ow={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fp=Br.define({map(t,e){let r=e.mapPos(t,-1,to.TrackAfter);return r??void 0}}),FN=new class extends vv{};FN.startSide=1;FN.endSide=-1;const See=Ca.define({create(){return tn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(Fp)&&(t=t.update({add:[FN.range(r.value,r.value+1)]}));return t}});function Jbe(){return[txe,See]}const OO="()[]{}<>";function Eee(t){for(let e=0;e<OO.length;e+=2)if(OO.charCodeAt(e)==t)return OO.charAt(e+1);return uN(t<128?t:t+1)}function _ee(t,e){return t.languageDataAt("closeBrackets",e)[0]||ow}const exe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),txe=Wt.inputHandler.of((t,e,r,n)=>{if((exe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(n.length>2||n.length==2&&Ks(ga(n,0))==1||e!=i.from||r!=i.to)return!1;let a=ixe(t.state,n);return a?(t.dispatch(a),!0):!1}),rxe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=_ee(t,t.selection.main.head).brackets||ow.brackets,i=null,a=t.changeByRange(o=>{if(o.empty){let s=axe(t.doc,o.head);for(let l of n)if(l==s&&pM(t.doc,o.head)==Eee(ga(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:it.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},nxe=[{key:"Backspace",run:rxe}];function ixe(t,e){let r=_ee(t,t.selection.main.head),n=r.brackets||ow.brackets;for(let i of n){let a=Eee(ga(i,0));if(e==i)return a==i?lxe(t,i,n.indexOf(i+i+i)>-1,r):oxe(t,i,a,r.before||ow.before);if(e==a&&Cee(t,t.selection.main.from))return sxe(t,i,a)}return null}function Cee(t,e){let r=!1;return t.field(See).between(0,t.doc.length,n=>{n==e&&(r=!0)}),r}function pM(t,e){let r=t.sliceString(e,e+2);return r.slice(0,Ks(ga(r,0)))}function axe(t,e){let r=t.sliceString(e-2,e);return Ks(ga(r,0))==r.length?r:r.slice(1)}function oxe(t,e,r,n){let i=null,a=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:r,from:o.to}],effects:Fp.of(o.to+e.length),range:it.range(o.anchor+e.length,o.head+e.length)};let s=pM(t.doc,o.head);return!s||/\s/.test(s)||n.indexOf(s)>-1?{changes:{insert:e+r,from:o.head},effects:Fp.of(o.head+e.length),range:it.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function sxe(t,e,r){let n=null,i=t.changeByRange(a=>a.empty&&pM(t.doc,a.head)==r?{changes:{from:a.head,to:a.head+r.length,insert:r},range:it.cursor(a.head+r.length)}:n={range:a});return n?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function lxe(t,e,r,n){let i=n.stringPrefixes||ow.stringPrefixes,a=null,o=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Fp.of(s.to+e.length),range:it.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=pM(t.doc,l),c;if(u==e){if(Rz(t,l))return{changes:{insert:e+e,from:l},effects:Fp.of(l+e.length),range:it.cursor(l+e.length)};if(Cee(t,l)){let h=r&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:it.cursor(l+h.length)}}}else{if(r&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=Nz(t,l-2*e.length,i))>-1&&Rz(t,c))return{changes:{insert:e+e+e+e,from:l},effects:Fp.of(l+e.length),range:it.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=Vn.Word&&Nz(t,l,i)>-1&&!uxe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Fp.of(l+e.length),range:it.cursor(l+e.length)}}return{range:a=s}});return a?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Rz(t,e){let r=Ea(t).resolveInner(e+1);return r.parent&&r.from==e}function uxe(t,e,r,n){let i=Ea(t).resolveInner(e,-1),a=n.reduce((o,s)=>Math.max(o,s.length),0);for(let o=0;o<5;o++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+r.length+a)),l=s.indexOf(r);if(!l||l>-1&&n.indexOf(s.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>r.length+l;){if(t.sliceDoc(c.to-r.length,c.to)==r)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function Nz(t,e,r){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Vn.Word)return e;for(let i of r){let a=e-i.length;if(t.sliceDoc(a,e)==i&&n(t.sliceDoc(a-1,a))!=Vn.Word)return a}return-1}function cxe(t={}){return[ns,wa.of(t),Qbe,fxe,Zbe]}const kee=[{key:"Ctrl-Space",run:Hbe},{key:"Escape",run:Xbe},{key:"ArrowDown",run:NS(!0)},{key:"ArrowUp",run:NS(!1)},{key:"PageDown",run:NS(!0,"page")},{key:"PageUp",run:NS(!1,"page")},{key:"Enter",run:Vbe}],fxe=ty.highest(iM.computeN([wa],t=>t.facet(wa).defaultKeymap?[kee]:[]));class hxe{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class Op{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let i=e,a=n.facet(Tee).markerFilter;a&&(i=a(i,n));let o=hr.set(i.map(s=>s.from==s.to||s.from==s.to-1&&n.doc.lineAt(s.from).to==s.from?hr.widget({widget:new xxe(s),diagnostic:s}).range(s.from):hr.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s,inclusive:!0}).range(s.from,s.to)),!0);return new Op(o,r,Em(o))}}function Em(t,e=null,r=0){let n=null;return t.between(r,1e9,(i,a,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new hxe(i,a,o.diagnostic),!1}),n}function dxe(t,e){let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(n=>n.is(Mee))||t.changes.touchesRange(r.from,r.to))}function pxe(t,e){return t.field(us,!1)?e:e.concat(Br.appendConfig.of(_xe))}const Mee=Br.define(),BN=Br.define(),Aee=Br.define(),us=Ca.define({create(){return new Op(hr.none,null,null)},update(t,e){if(e.docChanged){let r=t.diagnostics.map(e.changes),n=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);n=Em(r,t.selected.diagnostic,i)||Em(r,null,i)}t=new Op(r,t.panel,n)}for(let r of e.effects)r.is(Mee)?t=Op.init(r.value,t.panel,e.state):r.is(BN)?t=new Op(t.diagnostics,r.value?vM.open:null,t.selected):r.is(Aee)&&(t=new Op(t.diagnostics,t.panel,r.value));return t},provide:t=>[ew.from(t,e=>e.panel),Wt.decorations.from(t,e=>e.diagnostics)]}),vxe=hr.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function gxe(t,e,r){let{diagnostics:n}=t.state.field(us),i=[],a=2e8,o=0;n.between(e-(r<0?1:0),e+(r>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||r>0)&&(e<u||r<0))&&(i.push(c.diagnostic),a=Math.min(l,a),o=Math.max(u,o))});let s=t.state.facet(Tee).tooltipFilter;return s&&(i=s(i,t.state)),i.length?{pos:a,end:o,above:t.state.doc.lineAt(a).to<o,create(){return{dom:mxe(t,i)}}}:null}function mxe(t,e){return _n("ul",{class:"cm-tooltip-lint"},e.map(r=>Iee(t,r,!1)))}const yxe=t=>{let e=t.state.field(us,!1);(!e||!e.panel)&&t.dispatch({effects:pxe(t.state,[BN.of(!0)])});let r=J2(t,vM.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},Fz=t=>{let e=t.state.field(us,!1);return!e||!e.panel?!1:(t.dispatch({effects:BN.of(!1)}),!0)},wxe=t=>{let e=t.state.field(us,!1);if(!e)return!1;let r=t.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(t.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},bxe=[{key:"Mod-Shift-m",run:yxe,preventDefault:!0},{key:"F8",run:wxe}],Tee=Qt.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Ec(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r}))}});function Oee(t){let e=[];if(t)e:for(let{name:r}of t){for(let n=0;n<r.length;n++){let i=r[n];if(/[a-zA-Z]/.test(i)&&!e.some(a=>a.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Iee(t,e,r){var n;let i=r?Oee(e.actions):[];return _n("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},_n("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,o)=>{let s=!1,l=h=>{if(h.preventDefault(),s)return;s=!0;let d=Em(t.state.field(us).diagnostics,e);d&&a.apply(t,d.from,d.to)},{name:u}=a,c=i[o]?u.indexOf(i[o]):-1,f=c<0?u:[u.slice(0,c),_n("u",u.slice(c,c+1)),u.slice(c+1)];return _n("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&_n("div",{class:"cm-diagnosticSource"},e.source))}class xxe extends Pf{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return _n("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Bz{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Iee(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class vM{constructor(e){this.view=e,this.items=[];let r=i=>{if(i.keyCode==27)Fz(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],o=Oee(a.actions);for(let s=0;s<o.length;s++)if(o[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=Em(this.view.state.field(us).diagnostics,a);l&&a.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(i.target)&&this.moveSelection(a)};this.list=_n("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=_n("div",{class:"cm-panel-lint"},this.list,_n("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Fz(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(us).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(us),n=0,i=!1,a=null;for(e.between(0,this.view.state.doc.length,(o,s,{spec:l})=>{let u=-1,c;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new Bz(this.view,l.diagnostic),this.items.splice(n,0,c),i=!0):(c=this.items[u],u>n&&(this.items.splice(n,u-n),i=!0)),r&&c.diagnostic==r.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),a=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Bz(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:s})=>{let l=s.height/this.list.offsetHeight;o.top<s.top?this.list.scrollTop-=(s.top-o.top)/l:o.bottom>s.bottom&&(this.list.scrollTop+=(o.bottom-s.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(us),n=Em(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Aee.of(n)})}static open(e){return new vM(e)}}function Sxe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function FS(t){return Sxe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Exe=Wt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:FS("#d11")},".cm-lintRange-warning":{backgroundImage:FS("orange")},".cm-lintRange-info":{backgroundImage:FS("#999")},".cm-lintRange-hint":{backgroundImage:FS("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),_xe=[us,Wt.decorations.compute([us],t=>{let{selected:e,panel:r}=t.field(us);return!e||!r||e.from==e.to?hr.none:hr.set([vxe.range(e.from,e.to)])}),w1e(gxe,{hideOn:dxe}),Exe];var $z=function(e){e===void 0&&(e={});var{crosshairCursor:r=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(nxe)),e.defaultKeymap!==!1&&(n=n.concat(Jwe)),e.searchKeymap!==!1&&(n=n.concat(_be)),e.historyKeymap!==!1&&(n=n.concat(lwe)),e.foldKeymap!==!1&&(n=n.concat(y2e)),e.completionKeymap!==!1&&(n=n.concat(kee)),e.lintKeymap!==!1&&(n=n.concat(bxe));var i=[];return e.lineNumbers!==!1&&i.push(A1e()),e.highlightActiveLineGutter!==!1&&i.push(I1e()),e.highlightSpecialChars!==!1&&i.push(Yye()),e.history!==!1&&i.push(J2e()),e.foldGutter!==!1&&i.push(S2e()),e.drawSelection!==!1&&i.push(Fye()),e.dropCursor!==!1&&i.push(Gye()),e.allowMultipleSelections!==!1&&i.push(en.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(l2e()),e.syntaxHighlighting!==!1&&i.push(yJ(k2e,{fallback:!0})),e.bracketMatching!==!1&&i.push(P2e()),e.closeBrackets!==!1&&i.push(Jbe()),e.autocompletion!==!1&&i.push(cxe()),e.rectangularSelection!==!1&&i.push(l1e()),r!==!1&&i.push(f1e()),e.highlightActiveLine!==!1&&i.push(e1e()),e.highlightSelectionMatches!==!1&&i.push(abe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(oM.of(" ".repeat(e.tabSize))),i.concat([iM.of(n.flat())]).filter(Boolean)};const Cxe="#e5c07b",zz="#e06c75",kxe="#56b6c2",Mxe="#ffffff",k_="#abb2bf",w5="#7d8799",Axe="#61afef",Txe="#98c379",jz="#d19a66",Oxe="#c678dd",Ixe="#21252b",Gz="#2c313a",Uz="#282c34",IO="#353a42",Dxe="#3E4451",Wz="#528bff",Pxe=Wt.theme({"&":{color:k_,backgroundColor:Uz},".cm-content":{caretColor:Wz},".cm-cursor, .cm-dropCursor":{borderLeftColor:Wz},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Dxe},".cm-panels":{backgroundColor:Ixe,color:k_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Uz,color:w5,border:"none"},".cm-activeLineGutter":{backgroundColor:Gz},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:IO},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:IO,borderBottomColor:IO},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Gz,color:k_}}},{dark:!0}),Lxe=hb.define([{tag:Ye.keyword,color:Oxe},{tag:[Ye.name,Ye.deleted,Ye.character,Ye.propertyName,Ye.macroName],color:zz},{tag:[Ye.function(Ye.variableName),Ye.labelName],color:Axe},{tag:[Ye.color,Ye.constant(Ye.name),Ye.standard(Ye.name)],color:jz},{tag:[Ye.definition(Ye.name),Ye.separator],color:k_},{tag:[Ye.typeName,Ye.className,Ye.number,Ye.changed,Ye.annotation,Ye.modifier,Ye.self,Ye.namespace],color:Cxe},{tag:[Ye.operator,Ye.operatorKeyword,Ye.url,Ye.escape,Ye.regexp,Ye.link,Ye.special(Ye.string)],color:kxe},{tag:[Ye.meta,Ye.comment],color:w5},{tag:Ye.strong,fontWeight:"bold"},{tag:Ye.emphasis,fontStyle:"italic"},{tag:Ye.strikethrough,textDecoration:"line-through"},{tag:Ye.link,color:w5,textDecoration:"underline"},{tag:Ye.heading,fontWeight:"bold",color:zz},{tag:[Ye.atom,Ye.bool,Ye.special(Ye.variableName)],color:jz},{tag:[Ye.processingInstruction,Ye.string,Ye.inserted],color:Txe},{tag:Ye.invalid,color:Mxe}]),Rxe=[Pxe,yJ(Lxe)];var Nxe=Wt.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Fxe=function(e){e===void 0&&(e={});var{indentWithTab:r=!0,editable:n=!0,readOnly:i=!1,theme:a="light",placeholder:o="",basicSetup:s=!0}=e,l=[];switch(r&&l.unshift(iM.of([ebe])),s&&(typeof s=="boolean"?l.unshift($z()):l.unshift($z(s))),o&&l.unshift(i1e(o)),a){case"light":l.push(Nxe);break;case"dark":l.push(Rxe);break;case"none":break;default:l.push(a);break}return n===!1&&l.push(Wt.editable.of(!1)),i&&l.push(en.readOnly.of(!0)),[...l]},Bxe=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)}),Vz=Sc.define(),$xe=[];function zxe(t){var{value:e,selection:r,onChange:n,onStatistics:i,onCreateEditor:a,onUpdate:o,extensions:s=$xe,autoFocus:l,theme:u="light",height:c=null,minHeight:f=null,maxHeight:h=null,width:d=null,minWidth:p=null,maxWidth:v=null,placeholder:g="",editable:m=!0,readOnly:y=!1,indentWithTab:w=!0,basicSetup:b=!0,root:x,initialState:S}=t,[E,_]=oe.useState(),[k,C]=oe.useState(),[M,A]=oe.useState(),T=Wt.theme({"&":{height:c,minHeight:f,maxHeight:h,width:d,minWidth:p,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),D=Wt.updateListener.of(B=>{if(B.docChanged&&typeof n=="function"&&!B.transactions.some(L=>L.annotation(Vz))){var N=B.state.doc,O=N.toString();n(O,B)}i&&i(Bxe(B))}),F=Fxe({theme:u,editable:m,readOnly:y,placeholder:g,indentWithTab:w,basicSetup:b}),R=[D,T,...F];return o&&typeof o=="function"&&R.push(Wt.updateListener.of(o)),R=R.concat(s),oe.useEffect(()=>{if(E&&!M){var B={doc:e,selection:r,extensions:R},N=S?en.fromJSON(S.json,B,S.fields):en.create(B);if(A(N),!k){var O=new Wt({state:N,parent:E,root:x});C(O),a&&a(O,N)}}return()=>{k&&(A(void 0),C(void 0))}},[E,M]),oe.useEffect(()=>_(t.container),[t.container]),oe.useEffect(()=>()=>{k&&(k.destroy(),C(void 0))},[k]),oe.useEffect(()=>{l&&k&&k.focus()},[l,k]),oe.useEffect(()=>{k&&k.dispatch({effects:Br.reconfigure.of(R)})},[u,s,c,f,h,d,p,v,g,m,y,w,b,n,o]),oe.useEffect(()=>{if(e!==void 0){var B=k?k.state.doc.toString():"";k&&e!==B&&k.dispatch({changes:{from:0,to:B.length,insert:e||""},annotations:[Vz.of(!0)]})}},[e,k]),{state:M,setState:A,view:k,setView:C,container:E,setContainer:_}}var jxe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],$N=oe.forwardRef((t,e)=>{var{className:r,value:n="",selection:i,extensions:a=[],onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,autoFocus:c,theme:f="light",height:h,minHeight:d,maxHeight:p,width:v,minWidth:g,maxWidth:m,basicSetup:y,placeholder:w,indentWithTab:b,editable:x,readOnly:S,root:E,initialState:_}=t,k=F0e(t,jxe),C=oe.useRef(null),{state:M,view:A,container:T}=zxe({container:C.current,root:E,value:n,autoFocus:c,theme:f,height:h,minHeight:d,maxHeight:p,width:v,minWidth:g,maxWidth:m,basicSetup:y,placeholder:w,indentWithTab:b,editable:x,readOnly:S,selection:i,onChange:o,onStatistics:s,onCreateEditor:l,onUpdate:u,extensions:a,initialState:_});if(oe.useImperativeHandle(e,()=>({editor:C.current,state:M,view:A}),[C,T,M,A]),typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var D=typeof f=="string"?"cm-theme-"+f:"cm-theme";return Ne.jsx("div",SP({ref:C,className:""+D+(r?" "+r:"")},k))});$N.displayName="CodeMirror";var nf;function Dee(t){return new RegExp("^(?:"+t.join("|")+")$","i")}var Gxe=Dee(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),Uxe=Dee(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load","into"]),Wxe=/[*+\-<>=&|\^\/!\?]/,Hz="[A-Za-z_\\-0-9]",Vxe=new RegExp("[A-Za-z]"),Hxe=new RegExp("(("+Hz+"|\\.)*("+Hz+"))?:");function Pee(t,e){var r=t.next();if(nf=null,r=="$"||r=="?")return r=="?"&&t.match(/\s/,!1)?"operator":(t.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variableName.local");if(r=="<"&&!t.match(/^[\s\u00a0=]/,!1))return t.match(/^[^\s\u00a0>]*>?/),"atom";if(r=='"'||r=="'")return e.tokenize=Xxe(r),e.tokenize(t,e);if(/[{}\(\),\.;\[\]]/.test(r))return nf=r,"bracket";if(r=="#")return t.skipToEnd(),"comment";if(Wxe.test(r))return"operator";if(r==":")return Xz(t),"atom";if(r=="@")return t.eatWhile(/[a-z\d\-]/i),"meta";if(Vxe.test(r)&&t.match(Hxe))return Xz(t),"atom";t.eatWhile(/[_\w\d]/);var n=t.current();return Gxe.test(n)?"builtin":Uxe.test(n)?"keyword":"variable"}function Xz(t){t.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function Xxe(t){return function(e,r){for(var n=!1,i;(i=e.next())!=null;){if(i==t&&!n){r.tokenize=Pee;break}n=!n&&i=="\\"}return"string"}}function BS(t,e,r){t.context={prev:t.context,indent:t.indent,col:r,type:e}}function $S(t){t.indent=t.context.indent,t.context=t.context.prev}const Lee={name:"sparql",startState:function(){return{tokenize:Pee,context:null,indent:0,col:0}},token:function(t,e){if(t.sol()&&(e.context&&e.context.align==null&&(e.context.align=!1),e.indent=t.indentation()),t.eatSpace())return null;var r=e.tokenize(t,e);if(r!="comment"&&e.context&&e.context.align==null&&e.context.type!="pattern"&&(e.context.align=!0),nf=="(")BS(e,")",t.column());else if(nf=="[")BS(e,"]",t.column());else if(nf=="{")BS(e,"}",t.column());else if(/[\]\}\)]/.test(nf)){for(;e.context&&e.context.type=="pattern";)$S(e);e.context&&nf==e.context.type&&($S(e),nf=="}"&&e.context&&e.context.type=="pattern"&&$S(e))}else nf=="."&&e.context&&e.context.type=="pattern"?$S(e):/atom|string|variable/.test(r)&&e.context&&(/[\}\]]/.test(e.context.type)?BS(e,"pattern",t.column()):e.context.type=="pattern"&&!e.context.align&&(e.context.align=!0,e.context.col=t.column()));return r},indent:function(t,e,r){var n=e&&e.charAt(0),i=t.context;if(/[\]\}]/.test(n))for(;i&&i.type=="pattern";)i=i.prev;var a=i&&n==i.type;return i?i.type=="pattern"?i.col:i.align?i.col+(a?0:1):i.indent+(a?0:r.unit):0},languageData:{commentTokens:{line:"#"}}};function Ree(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Ip(t){const e=oe.useRef(t);return oe.useEffect(()=>{e.current=t}),oe.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function gM(t,e){const r=Ip(t),n=oe.useRef(0);return oe.useEffect(()=>()=>window.clearTimeout(n.current),[]),oe.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Yxe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function qxe(t,e){return typeof e=="boolean"?e:typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function Kxe(t,e,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,i]=oe.useState(r?e:qxe(t)),a=oe.useRef();return oe.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(t),i(a.current.matches),Yxe(a.current,o=>i(o.matches))},[t]),n}const vb=typeof document<"u"?oe.useLayoutEffect:oe.useEffect;function Nee(t,e){const r=oe.useRef(!1);oe.useEffect(()=>()=>{r.current=!1},[]),oe.useEffect(()=>{if(r.current)return t();r.current=!0},e)}function Qxe({opened:t,shouldReturnFocus:e=!0}){const r=oe.useRef(),n=()=>{var i;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((i=r.current)==null||i.focus({preventScroll:!0}))};return Nee(()=>{let i=-1;const a=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",a),t?r.current=document.activeElement:e&&(i=window.setTimeout(n,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",a)}},[t,e]),n}function Zxe(t,e="body > :not(script)"){const r=Ree(),n=Array.from(document.querySelectorAll(e)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(t)||i.contains(t))return;const a=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),s=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",r),a===null||a==="false"?i.setAttribute("aria-hidden","true"):!o&&!s&&i.setAttribute("data-hidden",a),{node:i,ariaHidden:o||null}});return()=>{n.forEach(i=>{!i||r!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Jxe=/input|select|textarea|button|object/,Fee="a, input, select, textarea, button, object, [tabindex]";function eSe(t){return t.style.display==="none"}function tSe(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let r=t;for(;r&&!(r===document.body||r.nodeType===11);){if(eSe(r))return!1;r=r.parentNode}return!0}function Bee(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function b5(t){const e=t.nodeName.toLowerCase(),r=!Number.isNaN(Bee(t));return(Jxe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||r)&&tSe(t)}function $ee(t){const e=Bee(t);return(Number.isNaN(e)||e>=0)&&b5(t)}function rSe(t){return Array.from(t.querySelectorAll(Fee)).filter($ee)}function nSe(t,e){const r=rSe(t);if(!r.length){e.preventDefault();return}const n=r[e.shiftKey?0:r.length-1],i=t.getRootNode();let a=n===i.activeElement||t===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(a=r.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(n)),!a)return;e.preventDefault();const l=r[e.shiftKey?r.length-1:0];l&&l.focus()}function iSe(t=!0){const e=oe.useRef(),r=oe.useRef(null),n=a=>{let o=a.querySelector("[data-autofocus]");if(!o){const s=Array.from(a.querySelectorAll(Fee));o=s.find($ee)||s.find(b5)||null,!o&&b5(a)&&(o=a)}o&&o.focus({preventScroll:!0})},i=oe.useCallback(a=>{if(t){if(a===null){r.current&&(r.current(),r.current=null);return}r.current=Zxe(a),e.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&n(a)}),e.current=a):e.current=null)}},[t]);return oe.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const a=o=>{o.key==="Tab"&&e.current&&nSe(e.current,o)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a),r.current&&r.current()}},[t]),i}const aSe=te.useId||(()=>{});function oSe(){const t=aSe();return t?`mantine-${t.replace(/:/g,"")}`:""}function zN(t){const e=oSe(),[r,n]=oe.useState(e);return vb(()=>{n(Ree())},[]),typeof t=="string"?t:typeof window>"u"?e:r}function sSe(t,e,r){oe.useEffect(()=>(window.addEventListener(t,e,r),()=>window.removeEventListener(t,e,r)),[t,e])}function zee(t,e){typeof t=="function"?t(e):typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function lSe(...t){return e=>{t.forEach(r=>zee(r,e))}}function Fv(...t){return oe.useCallback(lSe(...t),t)}function uSe({value:t,defaultValue:e,finalValue:r,onChange:n=()=>{}}){const[i,a]=oe.useState(e!==void 0?e:r),o=(s,...l)=>{a(s),n==null||n(s,...l)};return t!==void 0?[t,n,!0]:[i,o,!1]}function jee(t,e){return Kxe("(prefers-reduced-motion: reduce)",t,e)}function Gee(t=!1,e){const{onOpen:r,onClose:n}=e||{},[i,a]=oe.useState(t),o=oe.useCallback(()=>{a(u=>u||(r==null||r(),!0))},[r]),s=oe.useCallback(()=>{a(u=>u&&(n==null||n(),!1))},[n]),l=oe.useCallback(()=>{i?s():o()},[s,o,i]);return[i,{open:o,close:s,toggle:l}]}var x5=function(t,e){return x5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},x5(t,e)};function cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");x5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var j=function(){return j=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},j.apply(this,arguments)};function xi(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Uee(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Wee(t,e){return function(r,n){e(r,n,t)}}function cSe(t,e,r,n,i,a){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=n.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,d=r.length-1;d>=0;d--){var p={};for(var v in n)p[v]=v==="access"?{}:n[v];for(var v in n.access)p.access[v]=n.access[v];p.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(m||null))};var g=(0,r[d])(s==="accessor"?{get:c.get,set:c.set}:c[l],p);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(f=o(g.get))&&(c.get=f),(f=o(g.set))&&(c.set=f),(f=o(g.init))&&i.unshift(f)}else(f=o(g))&&(s==="field"?i.unshift(f):c[l]=f)}u&&Object.defineProperty(u,n.name,c),h=!0}function fSe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function hSe(t){return typeof t=="symbol"?t:"".concat(t)}function dSe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Vee(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function es(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})}function ts(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var mM=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Hee(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mM(e,t,r)}function eC(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jN(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function Xee(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jN(arguments[e]));return t}function yM(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Ro(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function _m(t){return this instanceof _m?(this.v=t,this):new _m(t)}function Yee(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(d){return new Promise(function(p,v){a.push([h,d,p,v])>1||s(h,d)})})}function s(h,d){try{l(n[h](d))}catch(p){f(a[0][3],p)}}function l(h){h.value instanceof _m?Promise.resolve(h.value.v).then(u,c):f(a[0][2],h)}function u(h){s("next",h)}function c(h){s("throw",h)}function f(h,d){h(d),a.shift(),a.length&&s(a[0][0],a[0][1])}}function qee(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:_m(t[i](o)),done:!1}:a?a(o):o}:a}}function Kee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof eC=="function"?eC(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function Qee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var pSe=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Zee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mM(e,t,r);return pSe(e,t),e}function Jee(t){return t&&t.__esModule?t:{default:t}}function ete(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function tte(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function rte(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function nte(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var vSe=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function ite(t){function e(n){t.error=t.hasError?new vSe(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(a){return e(a),r()})}catch(a){e(a)}}if(t.hasError)throw t.error}return r()}const gSe={__extends:cr,__assign:j,__rest:xi,__decorate:Uee,__param:Wee,__metadata:Vee,__awaiter:es,__generator:ts,__createBinding:mM,__exportStar:Hee,__values:eC,__read:jN,__spread:Xee,__spreadArrays:yM,__spreadArray:Ro,__await:_m,__asyncGenerator:Yee,__asyncDelegator:qee,__asyncValues:Kee,__makeTemplateObject:Qee,__importStar:Zee,__importDefault:Jee,__classPrivateFieldGet:ete,__classPrivateFieldSet:tte,__classPrivateFieldIn:rte,__addDisposableResource:nte,__disposeResources:ite},mSe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:nte,get __assign(){return j},__asyncDelegator:qee,__asyncGenerator:Yee,__asyncValues:Kee,__await:_m,__awaiter:es,__classPrivateFieldGet:ete,__classPrivateFieldIn:rte,__classPrivateFieldSet:tte,__createBinding:mM,__decorate:Uee,__disposeResources:ite,__esDecorate:cSe,__exportStar:Hee,__extends:cr,__generator:ts,__importDefault:Jee,__importStar:Zee,__makeTemplateObject:Qee,__metadata:Vee,__param:Wee,__propKey:hSe,__read:jN,__rest:xi,__runInitializers:fSe,__setFunctionName:dSe,__spread:Xee,__spreadArray:Ro,__spreadArrays:yM,__values:eC,default:gSe},Symbol.toStringTag,{value:"Module"}));var M_="right-scroll-bar-position",A_="width-before-scroll-bar",ySe="with-scroll-bars-hidden",wSe="--removed-body-scroll-bar-size";function DO(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function bSe(t,e){var r=oe.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var Yz=new WeakMap;function xSe(t,e){var r=bSe(e||null,function(n){return t.forEach(function(i){return DO(i,n)})});return oe.useLayoutEffect(function(){var n=Yz.get(r);if(n){var i=new Set(n),a=new Set(t),o=r.current;i.forEach(function(s){a.has(s)||DO(s,null)}),a.forEach(function(s){i.has(s)||DO(s,o)})}Yz.set(r,t)},[t]),r}function SSe(t){return t}function ESe(t,e){e===void 0&&(e=SSe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(s){return s!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(s){return a(s)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var s=r;r=[],s.forEach(a),o=r}var l=function(){var c=o;o=[],c.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),r}}}};return i}function _Se(t){t===void 0&&(t={});var e=ESe(null);return e.options=j({async:!0,ssr:!1},t),e}var ate=function(t){var e=t.sideCar,r=xi(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return oe.createElement(n,j({},r))};ate.isSideCarExport=!0;function CSe(t,e){return t.useMedium(e),ate}var ote=_Se(),PO=function(){},wM=oe.forwardRef(function(t,e){var r=oe.useRef(null),n=oe.useState({onScrollCapture:PO,onWheelCapture:PO,onTouchMoveCapture:PO}),i=n[0],a=n[1],o=t.forwardProps,s=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,f=t.shards,h=t.sideCar,d=t.noIsolation,p=t.inert,v=t.allowPinchZoom,g=t.as,m=g===void 0?"div":g,y=t.gapMode,w=xi(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,x=xSe([r,e]),S=j(j({},w),i);return oe.createElement(oe.Fragment,null,c&&oe.createElement(b,{sideCar:ote,removeScrollBar:u,shards:f,noIsolation:d,inert:p,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:y}),o?oe.cloneElement(oe.Children.only(s),j(j({},S),{ref:x})):oe.createElement(m,j({},S,{className:l,ref:x}),s))});wM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wM.classNames={fullWidth:A_,zeroRight:M_};var kSe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MSe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=kSe();return e&&t.setAttribute("nonce",e),t}function ASe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function TSe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var OSe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=MSe())&&(ASe(e,r),TSe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ISe=function(){var t=OSe();return function(e,r){oe.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},ste=function(){var t=ISe(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},DSe={left:0,top:0,right:0,gap:0},LO=function(t){return parseInt(t||"",10)||0},PSe=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[LO(r),LO(n),LO(i)]},LSe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return DSe;var e=PSe(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},RSe=ste(),NSe=function(t,e,r,n){var i=t.left,a=t.top,o=t.right,s=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(ySe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(M_,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(A_,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(M_," .").concat(M_,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(A_," .").concat(A_,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(wSe,": ").concat(s,`px;
  }
`)},FSe=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n,a=oe.useMemo(function(){return LSe(i)},[i]);return oe.createElement(RSe,{styles:NSe(a,!e,i,r?"":"!important")})},S5=!1;if(typeof window<"u")try{var zS=Object.defineProperty({},"passive",{get:function(){return S5=!0,!0}});window.addEventListener("test",zS,zS),window.removeEventListener("test",zS,zS)}catch{S5=!1}var Tg=S5?{passive:!1}:!1,BSe=function(t){return t.tagName==="TEXTAREA"},lte=function(t,e){var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!BSe(t)&&r[e]==="visible")},$Se=function(t){return lte(t,"overflowY")},zSe=function(t){return lte(t,"overflowX")},qz=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=ute(t,n);if(i){var a=cte(t,n),o=a[1],s=a[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},jSe=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},GSe=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},ute=function(t,e){return t==="v"?$Se(e):zSe(e)},cte=function(t,e){return t==="v"?jSe(e):GSe(e)},USe=function(t,e){return t==="h"&&e==="rtl"?-1:1},WSe=function(t,e,r,n,i){var a=USe(t,window.getComputedStyle(e).direction),o=a*n,s=r.target,l=e.contains(s),u=!1,c=o>0,f=0,h=0;do{var d=cte(t,s),p=d[0],v=d[1],g=d[2],m=v-g-a*p;(p||m)&&ute(t,s)&&(f+=m,h+=p),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(c&&(i&&Math.abs(f)<1||!i&&o>f)||!c&&(i&&Math.abs(h)<1||!i&&-o>h))&&(u=!0),u},jS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Kz=function(t){return[t.deltaX,t.deltaY]},Qz=function(t){return t&&"current"in t?t.current:t},VSe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},HSe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},XSe=0,Og=[];function YSe(t){var e=oe.useRef([]),r=oe.useRef([0,0]),n=oe.useRef(),i=oe.useState(XSe++)[0],a=oe.useState(ste)[0],o=oe.useRef(t);oe.useEffect(function(){o.current=t},[t]),oe.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Ro([t.lockRef.current],(t.shards||[]).map(Qz),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=oe.useCallback(function(v,g){if("touches"in v&&v.touches.length===2)return!o.current.allowPinchZoom;var m=jS(v),y=r.current,w="deltaX"in v?v.deltaX:y[0]-m[0],b="deltaY"in v?v.deltaY:y[1]-m[1],x,S=v.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in v&&E==="h"&&S.type==="range")return!1;var _=qz(E,S);if(!_)return!0;if(_?x=E:(x=E==="v"?"h":"v",_=qz(E,S)),!_)return!1;if(!n.current&&"changedTouches"in v&&(w||b)&&(n.current=x),!x)return!0;var k=n.current||x;return WSe(k,g,v,k==="h"?w:b,!0)},[]),l=oe.useCallback(function(v){var g=v;if(!(!Og.length||Og[Og.length-1]!==a)){var m="deltaY"in g?Kz(g):jS(g),y=e.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&VSe(x.delta,m)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Qz).filter(Boolean).filter(function(x){return x.contains(g.target)}),b=w.length>0?s(g,w[0]):!o.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),u=oe.useCallback(function(v,g,m,y){var w={name:v,delta:g,target:m,should:y,shadowParent:qSe(m)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),c=oe.useCallback(function(v){r.current=jS(v),n.current=void 0},[]),f=oe.useCallback(function(v){u(v.type,Kz(v),v.target,s(v,t.lockRef.current))},[]),h=oe.useCallback(function(v){u(v.type,jS(v),v.target,s(v,t.lockRef.current))},[]);oe.useEffect(function(){return Og.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Tg),document.addEventListener("touchmove",l,Tg),document.addEventListener("touchstart",c,Tg),function(){Og=Og.filter(function(v){return v!==a}),document.removeEventListener("wheel",l,Tg),document.removeEventListener("touchmove",l,Tg),document.removeEventListener("touchstart",c,Tg)}},[]);var d=t.removeScrollBar,p=t.inert;return oe.createElement(oe.Fragment,null,p?oe.createElement(a,{styles:HSe(i)}):null,d?oe.createElement(FSe,{gapMode:t.gapMode}):null)}function qSe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KSe=CSe(ote,YSe);var fte=oe.forwardRef(function(t,e){return oe.createElement(wM,j({},t,{ref:e,sideCar:KSe}))});fte.classNames=wM.classNames;const QSe=fte;function cc(t){return Object.keys(t)}function RO(t){return t&&typeof t=="object"&&!Array.isArray(t)}function GN(t,e){const r={...t},n=e;return RO(t)&&RO(e)&&Object.keys(e).forEach(i=>{RO(n[i])&&i in t?r[i]=GN(r[i],n[i]):r[i]=n[i]}),r}function ZSe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function JSe(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function eEe(t){const e=JSe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function NO(t){return`calc(${t} * var(--mantine-scale))`}function hte(t,{shouldScale:e=!1}={}){function r(n){if(n===0||n==="0")return`0${t}`;if(typeof n=="number"){const i=`${n/16}${t}`;return e?NO(i):i}if(typeof n=="string"){if(n.startsWith("calc(")||n.startsWith("var(")||n.startsWith("clamp("))return n;if(n.includes(" "))return n.split(" ").map(a=>r(a)).join(" ");if(n.includes(t))return e?NO(n):n;const i=n.replace("px","");if(!Number.isNaN(Number(i))){const a=`${Number(i)/16}${t}`;return e?NO(a):a}}return n}return r}const ot=hte("rem",{shouldScale:!0}),Zz=hte("em");function UN(t){return Object.keys(t).reduce((e,r)=>(t[r]!==void 0&&(e[r]=t[r]),e),{})}function dte(t){return typeof t=="number"?!0:typeof t=="string"?t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!==""?!0:/[0-9]/.test(t.trim().replace("-","")[0]):!1}function tEe(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==te.Fragment:!1}function gb(t){const e=oe.createContext(null);return[({children:i,value:a})=>te.createElement(e.Provider,{value:a},i),()=>{const i=oe.useContext(e);if(i===null)throw new Error(t);return i}]}function rEe(t=null){const e=oe.createContext(t);return[({children:i,value:a})=>te.createElement(e.Provider,{value:a},i),()=>oe.useContext(e)]}const nEe={app:100,modal:200,popover:300,overlay:400,max:9999};function bM(t){return nEe[t]}function lo(t,e="size",r=!0){if(t!==void 0)return dte(t)?r?ot(t):t:`var(--${e}-${t})`}function E5(t){return lo(t,"mantine-spacing")}function Gd(t){return t===void 0?"var(--mantine-radius-default)":lo(t,"mantine-radius")}function fc(t){return lo(t,"mantine-font-size")}function pte(t){if(t)return lo(t,"mantine-shadow",!1)}function vte(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=vte(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ms(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=vte(t))&&(n&&(n+=" "),n+=e);return n}const iEe={};function aEe(t){const e={};return t.forEach(r=>{Object.entries(r).forEach(([n,i])=>{e[n]?e[n]=ms(e[n],i):e[n]=i})}),e}function WN({theme:t,classNames:e,props:r,stylesCtx:n}){const a=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,r,n):o||iEe);return aEe(a)}function _5({theme:t,styles:e,props:r,stylesCtx:n}){return(Array.isArray(e)?e:[e]).reduce((a,o)=>typeof o=="function"?{...a,...o(t,r,n)}:{...a,...o},{})}const gte=oe.createContext(null);function VN(){const t=oe.useContext(gte);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function oEe(){return VN().cssVariablesResolver}function sEe(){return VN().classNamesPrefix}function HN(){return VN().getStyleNonce}function lEe(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function uEe(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const r=parseInt(e,16),n=r>>16&255,i=r>>8&255,a=r&255;return{r:n,g:i,b:a,a:1}}function cEe(t){const[e,r,n,i]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:r,b:n,a:i||1}}function fEe(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=t.match(e);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),i=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,o=r[5]?parseFloat(r[5]):void 0,s=(1-Math.abs(2*a-1))*i,l=n/60,u=s*(1-Math.abs(l%2-1)),c=a-s/2;let f,h,d;return l>=0&&l<1?(f=s,h=u,d=0):l>=1&&l<2?(f=u,h=s,d=0):l>=2&&l<3?(f=0,h=s,d=u):l>=3&&l<4?(f=0,h=u,d=s):l>=4&&l<5?(f=u,h=0,d=s):(f=s,h=0,d=u),{r:Math.round((f+c)*255),g:Math.round((h+c)*255),b:Math.round((d+c)*255),a:o||1}}function XN(t){return lEe(t)?uEe(t):t.startsWith("rgb")?cEe(t):t.startsWith("hsl")?fEe(t):{r:0,g:0,b:0,a:1}}function GS(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r,g:n,b:i,a}=XN(t),o=1-e,s=l=>Math.round(l*o);return`rgba(${s(r)}, ${s(n)}, ${s(i)}, ${a})`}function tC(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function FO(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function hEe(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function dEe(t){if(t.startsWith("oklch("))return(hEe(t)||0)/100;const{r:e,g:r,b:n}=XN(t),i=e/255,a=r/255,o=n/255,s=FO(i),l=FO(a),u=FO(o);return .2126*s+.7152*l+.0722*u}function o1(t,e=.179){return t.startsWith("var(")?!1:dEe(t)>e}function ay({color:t,theme:e,colorScheme:r}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:r==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:o1(r==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:r==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:o1(r==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:o1(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[n,i]=t.split("."),a=i?Number(i):void 0,o=n in e.colors;if(o){const s=a!==void 0?e.colors[n][a]:e.colors[n][tC(e,r||"light")];return{color:n,value:s,shade:a,isThemeColor:o,isLight:o1(s,e.luminanceThreshold),variable:i?`--mantine-color-${n}-${a}`:`--mantine-color-${n}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:o1(t,e.luminanceThreshold),shade:a,variable:void 0}}function mf(t,e){const r=ay({color:t||e.primaryColor,theme:e});return r.variable?`var(${r.variable})`:t}function Jz(t,e){const r={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)||e.defaultGradient.deg||0},n=mf(r.from,e),i=mf(r.to,e);return`linear-gradient(${r.deg}deg, ${n} 0%, ${i} 100%)`}function eo(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r,g:n,b:i}=XN(t);return`rgba(${r}, ${n}, ${i}, ${e})`}const pEe=({color:t,theme:e,variant:r,gradient:n,autoContrast:i})=>{const a=ay({color:t,theme:e}),o=typeof i=="boolean"?i:e.autoContrast;if(r==="filled"){const s=o&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:s,border:`${ot(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:s,border:`${ot(1)} solid transparent`}:{background:t,hover:GS(t,.1),color:s,border:`${ot(1)} solid transparent`}}if(r==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ot(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:eo(s,.1),hover:eo(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:eo(t,.1),hover:eo(t,.12),color:t,border:`${ot(1)} solid transparent`}}if(r==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${ot(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:eo(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${ot(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:eo(t,.05),color:t,border:`${ot(1)} solid ${t}`};if(r==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ot(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:"transparent",hover:eo(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ot(1)} solid transparent`}}return{background:"transparent",hover:eo(t,.12),color:t,border:`${ot(1)} solid transparent`}}return r==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ot(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${ot(1)} solid transparent`}:r==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:GS(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:GS(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${ot(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:GS(e.white,.01),color:t,border:`${ot(1)} solid transparent`}:r==="gradient"?{background:Jz(n,e),hover:Jz(n,e),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ot(1)} solid var(--mantine-color-default-border)`}:{}},vEe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ej="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",YN={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:vEe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:pEe,autoContrast:!1,luminanceThreshold:.3,fontFamily:ej,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ej,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ot(34),lineHeight:"1.3"},h2:{fontSize:ot(26),lineHeight:"1.35"},h3:{fontSize:ot(22),lineHeight:"1.4"},h4:{fontSize:ot(18),lineHeight:"1.45"},h5:{fontSize:ot(16),lineHeight:"1.5"},h6:{fontSize:ot(14),lineHeight:"1.5"}}},fontSizes:{xs:ot(12),sm:ot(14),md:ot(16),lg:ot(18),xl:ot(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ot(2),sm:ot(4),md:ot(8),lg:ot(16),xl:ot(32)},spacing:{xs:ot(10),sm:ot(12),md:ot(16),lg:ot(20),xl:ot(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), 0 ${ot(1)} ${ot(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(10)} ${ot(15)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(7)} ${ot(7)} ${ot(-5)}`,md:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(20)} ${ot(25)} ${ot(-5)}, rgba(0, 0, 0, 0.04) 0 ${ot(10)} ${ot(10)} ${ot(-5)}`,lg:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(28)} ${ot(23)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(12)} ${ot(12)} ${ot(-7)}`,xl:`0 ${ot(1)} ${ot(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ot(36)} ${ot(28)} ${ot(-7)}, rgba(0, 0, 0, 0.04) 0 ${ot(17)} ${ot(17)} ${ot(-7)}`},other:{},components:{}};function tj(t){return t==="auto"||t==="dark"||t==="light"}function gEe({key:t="mantine-color-scheme-value"}={}){let e;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(t);return tj(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(t,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{e=n=>{n.storageArea===window.localStorage&&n.key===t&&tj(n.newValue)&&r(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const mEe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",rj="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function BO(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function nj(t){if(!(t.primaryColor in t.colors))throw new Error(mEe);if(typeof t.primaryShade=="object"&&(!BO(t.primaryShade.dark)||!BO(t.primaryShade.light)))throw new Error(rj);if(typeof t.primaryShade=="number"&&!BO(t.primaryShade))throw new Error(rj)}function yEe(t,e){var n;if(!e)return nj(t),t;const r=GN(t,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=e.fontFamily),nj(r),r}const qN=oe.createContext(null),wEe=()=>oe.useContext(qN)||YN;function oy(){const t=oe.useContext(qN);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function mte({theme:t,children:e,inherit:r=!0}){const n=wEe(),i=oe.useMemo(()=>yEe(r?n:YN,t),[t,n,r]);return te.createElement(qN.Provider,{value:i},e)}mte.displayName="@mantine/core/MantineThemeProvider";function bEe(){const t=oy(),e=HN(),r=cc(t.breakpoints).reduce((n,i)=>{const a=t.breakpoints[i].includes("px"),o=eEe(t.breakpoints[i]),s=a?`${o-.1}px`:Zz(o-.1),l=a?`${o}px`:Zz(o);return`${n}@media (max-width: ${s}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return te.createElement("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:r}})}function $O(t){return Object.entries(t).map(([e,r])=>`${e}: ${r};`).join("")}function zO(t,e){return(Array.isArray(t)?t:[t]).reduce((n,i)=>`${i}{${n}}`,e)}function xEe(t,e){const r=$O(t.variables),n=r?zO(e,r):"",i=$O(t.dark),a=i?zO(`${e}[data-mantine-color-scheme="dark"]`,i):"",o=$O(t.light),s=o?zO(`${e}[data-mantine-color-scheme="light"]`,o):"";return`${n}${a}${s}`}function yte({color:t,theme:e,autoContrast:r=!0}){return(typeof r=="boolean"?r:e.autoContrast)&&ay({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function ij(t,e){return yte({color:t.colors[t.primaryColor][tC(t,e)],theme:t,autoContrast:null})}function Ig(t,e,r){cc(e).forEach(n=>Object.assign(t,{[`--mantine-${r}-${n}`]:e[n]}))}const wte=t=>{const e=tC(t,"dark"),r=tC(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:ot(t.defaultRadius),i={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-color-scheme":"light dark","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":ij(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${r})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)"},dark:{"--mantine-primary-color-contrast":ij(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)"}};Ig(i.variables,t.breakpoints,"breakpoint"),Ig(i.variables,t.spacing,"spacing"),Ig(i.variables,t.fontSizes,"font-size"),Ig(i.variables,t.lineHeights,"line-height"),Ig(i.variables,t.shadows,"shadow"),Ig(i.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((o,s)=>{i.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${t.primaryColor}-${s})`}),cc(t.colors).forEach(o=>{t.colors[o].forEach((u,c)=>{i.variables[`--mantine-color-${o}-${c}`]=u});const s=`var(--mantine-color-${o}-${r===9?8:r+1})`,l=`var(--mantine-color-${o}-${e===9?8:e+1})`;i.light["--mantine-color-dimmed"]="var(--mantine-color-gray-6)",i.light[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-filled)`,i.light[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-filled-hover`]=s,i.light[`--mantine-color-${o}-light`]=eo(t.colors[o][r],.1),i.light[`--mantine-color-${o}-light-hover`]=eo(t.colors[o][r],.12),i.light[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline-hover`]=eo(t.colors[o][r],.05),i.dark["--mantine-color-dimmed"]="var(--mantine-color-dark-2)",i.dark[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-4)`,i.dark[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${e})`,i.dark[`--mantine-color-${o}-filled-hover`]=l,i.dark[`--mantine-color-${o}-light`]=eo(t.colors[o][Math.max(0,e-2)],.15),i.dark[`--mantine-color-${o}-light-hover`]=eo(t.colors[o][Math.max(0,e-2)],.2),i.dark[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${Math.max(e-5,0)})`,i.dark[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${Math.max(e-4,0)})`,i.dark[`--mantine-color-${o}-outline-hover`]=eo(t.colors[o][Math.max(e-4,0)],.05)});const a=t.headings.sizes;return cc(a).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=a[o].fontSize,i.variables[`--mantine-${o}-line-height`]=a[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=a[o].fontWeight||t.headings.fontWeight}),i};function SEe({theme:t,generator:e}){const r=wte(t),n=e==null?void 0:e(t);return n?GN(r,n):r}const jO=wte(YN);function EEe(t){const e={variables:{},light:{},dark:{}};return cc(t.variables).forEach(r=>{jO.variables[r]!==t.variables[r]&&(e.variables[r]=t.variables[r])}),cc(t.light).forEach(r=>{jO.light[r]!==t.light[r]&&(e.light[r]=t.light[r])}),cc(t.dark).forEach(r=>{jO.dark[r]!==t.dark[r]&&(e.dark[r]=t.dark[r])}),e}function _Ee(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function bte({cssVariablesSelector:t}){const e=oy(),r=HN(),n=oEe(),i=SEe({theme:e,generator:n}),a=t===":root",o=a?EEe(i):i,s=xEe(o,t);return s?te.createElement("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${s}${a?"":_Ee(t)}`}}):null}bte.displayName="@mantine/CssVariables";function CEe(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function Dg(t,e){var n;const r=t!=="auto"?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=e())==null||n.setAttribute("data-mantine-color-scheme",r)}function kEe({manager:t,defaultColorScheme:e,getRootElement:r,forceColorScheme:n}){const i=oe.useRef(),[a,o]=oe.useState(()=>t.get(e)),s=n||a,l=oe.useCallback(c=>{n||(Dg(c,r),o(c),t.set(c))},[t.set,s,n]),u=oe.useCallback(()=>{o(e),Dg(e,r),t.clear()},[t.clear,e]);return oe.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),vb(()=>{Dg(t.get(e),r)},[]),oe.useEffect(()=>{var f;if(n)return Dg(n,r),()=>{};n===void 0&&Dg(a,r),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=h=>{a==="auto"&&Dg(h.matches?"dark":"light",r)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var h;return(h=i.current)==null?void 0:h.removeEventListener("change",c)}},[a,n]),{colorScheme:s,setColorScheme:l,clearColorScheme:u}}function MEe({respectReducedMotion:t,getRootElement:e}){vb(()=>{var r;t&&((r=e())==null||r.setAttribute("data-respect-reduced-motion","true"))},[t])}CEe();function xte({theme:t,children:e,getStyleNonce:r,withCssVariables:n=!0,cssVariablesSelector:i=":root",classNamesPrefix:a="mantine",colorSchemeManager:o=gEe(),defaultColorScheme:s="light",getRootElement:l=()=>document.documentElement,cssVariablesResolver:u,forceColorScheme:c}){const{colorScheme:f,setColorScheme:h,clearColorScheme:d}=kEe({defaultColorScheme:s,forceColorScheme:c,manager:o,getRootElement:l});return MEe({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:l}),te.createElement(gte.Provider,{value:{colorSchemeManager:o,colorScheme:f,setColorScheme:h,clearColorScheme:d,getRootElement:l,classNamesPrefix:a,getStyleNonce:r,cssVariablesResolver:u,cssVariablesSelector:i}},te.createElement(mte,{theme:t},n&&te.createElement(bte,{cssVariablesSelector:i}),te.createElement(bEe,null),e))}xte.displayName="@mantine/core/MantineProvider";const AEe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function TEe({theme:t,options:e,unstyled:r}){return ms((e==null?void 0:e.focusable)&&!r&&(t.focusClassName||AEe[t.focusRing]),(e==null?void 0:e.active)&&!r&&t.activeClassName)}function OEe({selector:t,stylesCtx:e,options:r,props:n,theme:i}){return WN({theme:i,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:e})[t]}function IEe({selector:t,stylesCtx:e,theme:r,classNames:n,props:i}){return WN({theme:r,classNames:n,props:i,stylesCtx:e})[t]}function DEe({rootSelector:t,selector:e,className:r}){return t===e?r:void 0}function PEe({selector:t,classes:e,unstyled:r}){return r?void 0:e[t]}function LEe({themeName:t,classNamesPrefix:e,selector:r,withStaticClass:n}){return n===!1?[]:t.map(i=>`${e}-${i}-${r}`)}function REe({themeName:t,theme:e,selector:r,props:n,stylesCtx:i}){return t.map(a=>{var o,s;return(s=WN({theme:e,classNames:(o=e.components[a])==null?void 0:o.classNames,props:n,stylesCtx:i}))==null?void 0:s[r]})}function NEe({options:t,classes:e,selector:r,unstyled:n}){return t!=null&&t.variant&&!n?e[`${r}--${t.variant}`]:void 0}function FEe({theme:t,options:e,themeName:r,selector:n,classNamesPrefix:i,classNames:a,classes:o,unstyled:s,className:l,rootSelector:u,props:c,stylesCtx:f}){return ms(TEe({theme:t,options:e,unstyled:s}),REe({theme:t,themeName:r,selector:n,props:c,stylesCtx:f}),NEe({options:e,classes:o,selector:n,unstyled:s}),IEe({selector:n,stylesCtx:f,theme:t,classNames:a,props:c}),OEe({selector:n,stylesCtx:f,options:e,props:c,theme:t}),DEe({rootSelector:u,selector:n,className:l}),PEe({selector:n,classes:o,unstyled:s}),LEe({themeName:r,classNamesPrefix:i,selector:n,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function BEe({theme:t,themeName:e,props:r,stylesCtx:n,selector:i}){return e.map(a=>{var o;return _5({theme:t,styles:(o=t.components[a])==null?void 0:o.styles,props:r,stylesCtx:n})[i]}).reduce((a,o)=>({...a,...o}),{})}function C5({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...C5({style:n,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function $Ee(t){return t.reduce((e,r)=>(r&&Object.keys(r).forEach(n=>{e[n]={...e[n],...UN(r[n])}}),e),{})}function zEe({vars:t,varsResolver:e,theme:r,props:n,stylesCtx:i,selector:a,themeName:o}){var s;return(s=$Ee([e==null?void 0:e(r,n,i),...o.map(l=>{var u,c,f;return(f=(c=(u=r.components)==null?void 0:u[l])==null?void 0:c.vars)==null?void 0:f.call(c,r,n,i)}),t==null?void 0:t(r,n,i)]))==null?void 0:s[a]}function jEe({theme:t,themeName:e,selector:r,options:n,props:i,stylesCtx:a,rootSelector:o,styles:s,style:l,vars:u,varsResolver:c}){return{...BEe({theme:t,themeName:e,props:i,stylesCtx:a,selector:r}),..._5({theme:t,styles:s,props:i,stylesCtx:a})[r],..._5({theme:t,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||i,stylesCtx:a})[r],...zEe({theme:t,props:i,stylesCtx:a,vars:u,varsResolver:c,selector:r,themeName:e}),...o===r?C5({style:l,theme:t}):null,...C5({style:n==null?void 0:n.style,theme:t})}}function ni({name:t,classes:e,props:r,stylesCtx:n,className:i,style:a,rootSelector:o="root",unstyled:s,classNames:l,styles:u,vars:c,varsResolver:f}){const h=oy(),d=sEe(),p=(Array.isArray(t)?t:[t]).filter(v=>v);return(v,g)=>({className:FEe({theme:h,options:g,themeName:p,selector:v,classNamesPrefix:d,classNames:l,classes:e,unstyled:s,className:i,rootSelector:o,props:r,stylesCtx:n}),style:jEe({theme:h,themeName:p,selector:v,options:g,props:r,stylesCtx:n,rootSelector:o,styles:u,style:a,vars:c,varsResolver:f})})}function GEe(t,e){return typeof t=="boolean"?t:e.autoContrast}function Rr(t,e,r){var o;const n=oy(),i=(o=n.components[t])==null?void 0:o.defaultProps,a=typeof i=="function"?i(n):i;return{...e,...a,...UN(r)}}function aj(t){return cc(t).reduce((e,r)=>t[r]!==void 0?`${e}${ZSe(r)}:${t[r]};`:e,"").trim()}function UEe({selector:t,styles:e,media:r}){const n=e?aj(e):"",i=Array.isArray(r)?r.map(a=>`@media${a.query}{${t}{${aj(a.styles)}}}`):[];return`${n?`${t}{${n}}`:""}${i.join("")}`.trim()}function WEe({selector:t,styles:e,media:r}){const n=HN();return te.createElement("style",{"data-mantine-styles":"inline",nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:UEe({selector:t,styles:e,media:r})}})}function xM(t){const{m:e,mx:r,my:n,mt:i,mb:a,ml:o,mr:s,p:l,px:u,py:c,pt:f,pb:h,pl:d,pr:p,bg:v,c:g,opacity:m,ff:y,fz:w,fw:b,lts:x,ta:S,lh:E,fs:_,tt:k,td:C,w:M,miw:A,maw:T,h:D,mih:F,mah:R,bgsz:B,bgp:N,bgr:O,bga:L,pos:G,top:q,left:K,bottom:V,right:le,inset:ge,display:xe,flex:Ie,hiddenFrom:He,visibleFrom:Ge,lightHidden:ht,darkHidden:dt,...It}=t;return{styleProps:UN({m:e,mx:r,my:n,mt:i,mb:a,ml:o,mr:s,p:l,px:u,py:c,pt:f,pb:h,pl:d,pr:p,bg:v,c:g,opacity:m,ff:y,fz:w,fw:b,lts:x,ta:S,lh:E,fs:_,tt:k,td:C,w:M,miw:A,maw:T,h:D,mih:F,mah:R,bgsz:B,bgp:N,bgr:O,bga:L,pos:G,top:q,left:K,bottom:V,right:le,inset:ge,display:xe,flex:Ie,hiddenFrom:He,visibleFrom:Ge,lightHidden:ht,darkHidden:dt}),rest:It}}const VEe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Ste(t,e){const r=ay({color:t,theme:e});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function HEe(t,e){const r=ay({color:t,theme:e});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:Ste(t,e)}const oj={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)"};function XEe(t){return typeof t=="string"&&t in oj?oj[t]:t}function YEe(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="number"||typeof t=="string"?ot(t):t}function qEe(t){return t}function KEe(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:t}function QEe(t){return typeof t=="number"?ot(t):t}function ZEe(t,e){if(typeof t=="number")return ot(t);if(typeof t=="string"){const r=t.replace("-","");if(!(r in e.spacing))return ot(t);const n=`--mantine-spacing-${r}`;return t.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return t}const GO={color:Ste,textColor:HEe,fontSize:YEe,spacing:ZEe,identity:qEe,size:QEe,lineHeight:KEe,fontFamily:XEe};function sj(t){return t.replace("(min-width: ","").replace("em)","")}function JEe({media:t,...e}){const n=Object.keys(t).sort((i,a)=>Number(sj(i))-Number(sj(a))).map(i=>({query:i,styles:t[i]}));return{...e,media:n}}function e_e(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function t_e(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function r_e(t){return typeof t=="object"&&t!==null?cc(t).filter(e=>e!=="base"):[]}function n_e(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function i_e({styleProps:t,data:e,theme:r}){return JEe(cc(t).reduce((n,i)=>{if(i==="hiddenFrom"||i==="visibleFrom")return n;const a=e[i],o=Array.isArray(a.property)?a.property:[a.property],s=t_e(t[i]);if(!e_e(t[i]))return o.forEach(u=>{n.inlineStyles[u]=GO[a.type](s,r)}),n;n.hasResponsiveStyles=!0;const l=r_e(t[i]);return o.forEach(u=>{s&&(n.styles[u]=GO[a.type](s,r)),l.forEach(c=>{const f=`(min-width: ${r.breakpoints[c]})`;n.media[f]={...n.media[f],[u]:GO[a.type](n_e(t[i],c),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function a_e(){return`__m__-${oe.useId().replace(/:/g,"")}`}function Ete(t){return t.startsWith("data-")?t:`data-${t}`}function o_e(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return n===void 0||n===""||n===!1||n===null||(e[Ete(r)]=t[r]),e},{})}function _te(t){return t?typeof t=="string"?{[Ete(t)]:!0}:Array.isArray(t)?[...t].reduce((e,r)=>({...e,..._te(r)}),{}):o_e(t):null}function k5(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...k5(n,e)}),{}):typeof t=="function"?t(e):t??{}}function s_e({theme:t,style:e,vars:r,styleProps:n}){const i=k5(e,t),a=k5(r,t);return{...i,...a,...n}}const Cte=oe.forwardRef(({component:t,style:e,__vars:r,className:n,variant:i,mod:a,size:o,hiddenFrom:s,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:f,...h},d)=>{const p=oy(),v=t||"div",{styleProps:g,rest:m}=xM(h),y=a_e(),w=i_e({styleProps:g,theme:p,data:VEe}),b={ref:d,style:s_e({theme:p,style:e,vars:r,styleProps:w.inlineStyles}),className:ms(n,{[y]:w.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":dte(o)?void 0:o||void 0,..._te(a),...m};return te.createElement(te.Fragment,null,w.hasResponsiveStyles&&te.createElement(WEe,{selector:`.${y}`,styles:w.styles,media:w.media}),typeof f=="function"?f(b):te.createElement(v,{...b}))});Cte.displayName="@mantine/core/Box";const $r=Cte;function kte(t){return t}function Mn(t){const e=oe.forwardRef(t);return e.extend=kte,e}function Ud(t){const e=oe.forwardRef(t);return e.extend=kte,e}const l_e=oe.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function u_e(){return oe.useContext(l_e)}const[c_e,fl]=gb("ScrollArea.Root component was not found in tree");function Cm(t,e){const r=Ip(e);vb(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}const f_e=te.forwardRef((t,e)=>{const{style:r,...n}=t,i=fl(),[a,o]=te.useState(0),[s,l]=te.useState(0),u=!!(a&&s);return Cm(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),Cm(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?te.createElement("div",{...n,ref:e,style:{...r,width:a,height:s}}):null}),h_e=te.forwardRef((t,e)=>{const r=fl(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?te.createElement(f_e,{...t,ref:e}):null}),d_e={scrollHideDelay:1e3,type:"hover"},Mte=oe.forwardRef((t,e)=>{const r=Rr("ScrollAreaRoot",d_e,t),{type:n,scrollHideDelay:i,scrollbars:a,...o}=r,[s,l]=oe.useState(null),[u,c]=oe.useState(null),[f,h]=oe.useState(null),[d,p]=oe.useState(null),[v,g]=oe.useState(null),[m,y]=oe.useState(0),[w,b]=oe.useState(0),[x,S]=oe.useState(!1),[E,_]=oe.useState(!1),k=Fv(e,C=>l(C));return te.createElement(c_e,{value:{type:n,scrollHideDelay:i,scrollArea:s,viewport:u,onViewportChange:c,content:f,onContentChange:h,scrollbarX:d,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:_,onCornerWidthChange:y,onCornerHeightChange:b}},te.createElement($r,{...o,ref:k,__vars:{"--sa-corner-width":a!=="xy"?"0px":`${m}px`,"--sa-corner-height":a!=="xy"?"0px":`${w}px`}}))});Mte.displayName="@mantine/core/ScrollAreaRoot";function Ate(t,e){const r=t/e;return Number.isNaN(r)?0:r}function SM(t){const e=Ate(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function Tte(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function p_e(t,[e,r]){return Math.min(r,Math.max(e,t))}function lj(t,e,r="ltr"){const n=SM(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,s=a-n,l=r==="ltr"?[0,o]:[o*-1,0],u=p_e(t,l);return Tte([0,o],[0,s])(u)}function v_e(t,e,r,n="ltr"){const i=SM(r),a=i/2,o=e||a,s=i-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-s,c=r.content-r.viewport,f=n==="ltr"?[0,c]:[c*-1,0];return Tte([l,u],f)(t)}function Ote(t,e){return t>0&&t<e}function rC(t){return t?parseInt(t,10):0}function tv(t,e,{checkForDefaultPrevented:r=!0}={}){return n=>{t==null||t(n),(r===!1||!n.defaultPrevented)&&(e==null||e(n))}}const[g_e,Ite]=gb("ScrollAreaScrollbar was not found in tree"),Dte=oe.forwardRef((t,e)=>{const{sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:s,onDragScroll:l,onWheelScroll:u,onResize:c,...f}=t,h=fl(),[d,p]=te.useState(null),v=Fv(e,_=>p(_)),g=te.useRef(null),m=te.useRef(""),{viewport:y}=h,w=r.content-r.viewport,b=Ip(u),x=Ip(s),S=gM(c,10),E=_=>{if(g.current){const k=_.clientX-g.current.left,C=_.clientY-g.current.top;l({x:k,y:C})}};return oe.useEffect(()=>{const _=k=>{const C=k.target;(d==null?void 0:d.contains(C))&&b(k,w)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[y,d,w,b]),oe.useEffect(x,[r,x]),Cm(d,S),Cm(h.content,S),te.createElement(g_e,{value:{scrollbar:d,hasThumb:n,onThumbChange:Ip(i),onThumbPointerUp:Ip(a),onThumbPositionChange:x,onThumbPointerDown:Ip(o)}},te.createElement("div",{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:tv(t.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),g.current=d.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E(_))}),onPointerMove:tv(t.onPointerMove,E),onPointerUp:tv(t.onPointerUp,_=>{const k=_.target;k.hasPointerCapture(_.pointerId)&&k.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=m.current,g.current=null})}))}),m_e=oe.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:i,...a}=t,o=fl(),[s,l]=oe.useState(),u=oe.useRef(null),c=Fv(e,u,o.onScrollbarXChange);return oe.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),te.createElement(Dte,{"data-orientation":"horizontal",...a,ref:c,sizes:r,style:{...i,"--sa-thumb-width":`${SM(r)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const d=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(d),Ote(d,h)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&s&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:rC(s.paddingLeft),paddingEnd:rC(s.paddingRight)}})}})}),y_e=oe.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,style:i,...a}=t,o=fl(),[s,l]=te.useState(),u=oe.useRef(null),c=Fv(e,u,o.onScrollbarYChange);return oe.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),te.createElement(Dte,{...a,"data-orientation":"vertical",ref:c,sizes:r,style:{"--sa-thumb-height":`${SM(r)}px`,...i},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const d=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(d),Ote(d,h)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&s&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:rC(s.paddingTop),paddingEnd:rC(s.paddingBottom)}})}})}),KN=oe.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,{dir:i}=u_e(),a=fl(),o=oe.useRef(null),s=oe.useRef(0),[l,u]=oe.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Ate(l.viewport,l.content),f={...n,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:d=>{o.current=d},onThumbPointerUp:()=>{s.current=0},onThumbPointerDown:d=>{s.current=d}},h=(d,p)=>v_e(d,s.current,l,p);return r==="horizontal"?te.createElement(m_e,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&o.current){const d=a.viewport.scrollLeft,p=lj(d,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollLeft=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollLeft=h(d,i))}}):r==="vertical"?te.createElement(y_e,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&o.current){const d=a.viewport.scrollTop,p=lj(d,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:d=>{a.viewport&&(a.viewport.scrollTop=d)},onDragScroll:d=>{a.viewport&&(a.viewport.scrollTop=h(d))}}):null}),Pte=oe.forwardRef((t,e)=>{const r=fl(),{forceMount:n,...i}=t,[a,o]=oe.useState(!1),s=t.orientation==="horizontal",l=gM(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,c=r.viewport.offsetHeight<r.viewport.scrollHeight;o(s?u:c)}},10);return Cm(r.viewport,l),Cm(r.content,l),n||a?te.createElement(KN,{"data-state":a?"visible":"hidden",...i,ref:e}):null}),w_e=oe.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=fl(),[a,o]=oe.useState(!1);return oe.useEffect(()=>{const{scrollArea:s}=i;let l=0;if(s){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),r||a?te.createElement(Pte,{"data-state":a?"visible":"hidden",...n,ref:e}):null}),b_e=oe.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=fl(),a=t.orientation==="horizontal",[o,s]=oe.useState("hidden"),l=gM(()=>s("idle"),100);return oe.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>s("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),oe.useEffect(()=>{const{viewport:u}=i,c=a?"scrollLeft":"scrollTop";if(u){let f=u[c];const h=()=>{const d=u[c];f!==d&&(s("scrolling"),l()),f=d};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[i.viewport,a,l]),r||o!=="hidden"?te.createElement(KN,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:tv(t.onPointerEnter,()=>s("interacting")),onPointerLeave:tv(t.onPointerLeave,()=>s("idle"))}):null}),uj=te.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=fl(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,s=t.orientation==="horizontal";return te.useEffect(()=>(s?a(!0):o(!0),()=>{s?a(!1):o(!1)}),[s,a,o]),i.type==="hover"?te.createElement(w_e,{...n,ref:e,forceMount:r}):i.type==="scroll"?te.createElement(b_e,{...n,ref:e,forceMount:r}):i.type==="auto"?te.createElement(Pte,{...n,ref:e,forceMount:r}):i.type==="always"?te.createElement(KN,{...n,ref:e}):null});function x_e(t,e=()=>{}){let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,s=r.top!==a.top;(o||s)&&e(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)}const S_e=oe.forwardRef((t,e)=>{const{style:r,...n}=t,i=fl(),a=Ite(),{onThumbPositionChange:o}=a,s=Fv(e,c=>a.onThumbChange(c)),l=oe.useRef(),u=gM(()=>{l.current&&(l.current(),l.current=void 0)},100);return oe.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(u(),!l.current){const h=x_e(c,o);l.current=h,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,u,o]),te.createElement("div",{"data-state":a.hasThumb?"visible":"hidden",...n,ref:s,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:tv(t.onPointerDownCapture,c=>{const h=c.target.getBoundingClientRect(),d=c.clientX-h.left,p=c.clientY-h.top;a.onThumbPointerDown({x:d,y:p})}),onPointerUp:tv(t.onPointerUp,a.onThumbPointerUp)})}),cj=te.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Ite();return r||i.hasThumb?te.createElement(S_e,{ref:e,...n}):null}),Lte=oe.forwardRef(({children:t,style:e,...r},n)=>{const i=fl(),a=Fv(n,i.onViewportChange);return te.createElement($r,{...r,ref:a,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e}},te.createElement("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange},t))});Lte.displayName="@mantine/core/ScrollAreaViewport";var QN={root:"m-d57069b5",viewport:"m-c0783ff9",viewportInner:"m-f8f631dd",scrollbar:"m-c44ba933",thumb:"m-d8b5e363",corner:"m-21657268"};const Rte={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},E_e=(t,{scrollbarSize:e})=>({root:{"--scrollarea-scrollbar-size":ot(e)}}),mb=Mn((t,e)=>{const r=Rr("ScrollArea",Rte,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,scrollbarSize:l,vars:u,type:c,scrollHideDelay:f,viewportProps:h,viewportRef:d,onScrollPositionChange:p,children:v,offsetScrollbars:g,scrollbars:m,...y}=r,[w,b]=oe.useState(!1),x=ni({name:"ScrollArea",props:r,classes:QN,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:E_e});return te.createElement(Mte,{type:c==="never"?"always":c,scrollHideDelay:f,ref:e,scrollbars:m,...x("root"),...y},te.createElement(Lte,{...h,...x("viewport",{style:h==null?void 0:h.style}),ref:d,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":m||void 0,onScroll:typeof p=="function"?({currentTarget:S})=>p({x:S.scrollLeft,y:S.scrollTop}):void 0},v),(m==="xy"||m==="x")&&te.createElement(uj,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},te.createElement(cj,{...x("thumb")})),(m==="xy"||m==="y")&&te.createElement(uj,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},te.createElement(cj,{...x("thumb")})),te.createElement(h_e,{...x("corner"),"data-hovered":w||void 0,"data-hidden":c==="never"||void 0}))});mb.displayName="@mantine/core/ScrollArea";const ZN=Mn((t,e)=>{const{children:r,classNames:n,styles:i,scrollbarSize:a,scrollHideDelay:o,type:s,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:p,scrollbars:v,style:g,vars:m,...y}=Rr("ScrollAreaAutosize",Rte,t);return te.createElement($r,{...y,ref:e,style:[{display:"flex",overflow:"auto"},g]},te.createElement($r,{style:{display:"flex",flexDirection:"column",flex:1}},te.createElement(mb,{classNames:n,styles:i,scrollHideDelay:o,scrollbarSize:a,type:s,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:f,unstyled:h,variant:d,viewportProps:p,vars:m,scrollbars:v},r)))});mb.classes=QN;ZN.displayName="@mantine/core/ScrollAreaAutosize";ZN.classes=QN;mb.Autosize=ZN;var Nte={root:"m-87cf2631"};const __e={__staticSelector:"UnstyledButton"},yb=Ud((t,e)=>{const r=Rr("UnstyledButton",__e,t),{className:n,component:i="button",__staticSelector:a,unstyled:o,classNames:s,styles:l,style:u,...c}=r,f=ni({name:a,props:r,classes:Nte,className:n,style:u,classNames:s,styles:l,unstyled:o});return te.createElement($r,{...f("root",{focusable:!0}),component:i,ref:e,type:i==="button"?"button":void 0,...c})});yb.classes=Nte;yb.displayName="@mantine/core/UnstyledButton";var Fte={root:"m-1b7284a3"};const C_e={},k_e=(t,{radius:e,shadow:r})=>({root:{"--paper-radius":e===void 0?void 0:Gd(e),"--paper-shadow":pte(r)}}),JN=Ud((t,e)=>{const r=Rr("Paper",C_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,withBorder:l,vars:u,radius:c,shadow:f,variant:h,mod:d,...p}=r,v=ni({name:"Paper",props:r,classes:Fte,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:k_e});return te.createElement($r,{ref:e,mod:[{"data-with-border":l},d],...v("root"),variant:h,...p})});JN.classes=Fte;JN.displayName="@mantine/core/Paper";function Bte({children:t,active:e=!0,refProp:r="ref"}){const n=iSe(e),i=Fv(n,t==null?void 0:t.ref);return tEe(t)?oe.cloneElement(t,{[r]:i}):t}Bte.displayName="@mantine/core/FocusTrap";function M_e(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}const A_e={},$te=oe.forwardRef((t,e)=>{const{children:r,target:n,...i}=Rr("Portal",A_e,t),[a,o]=oe.useState(!1),s=oe.useRef(null);return vb(()=>(o(!0),s.current=n?typeof n=="string"?document.querySelector(n):n:M_e(i),zee(e,s.current),!n&&s.current&&document.body.appendChild(s.current),()=>{!n&&s.current&&document.body.removeChild(s.current)}),[n]),!a||!s.current?null:OQ.createPortal(te.createElement(te.Fragment,null,r),s.current)});$te.displayName="@mantine/core/Portal";function zte({withinPortal:t=!0,children:e,...r}){return t?te.createElement($te,{...r},e):te.createElement(te.Fragment,null,e)}zte.displayName="@mantine/core/OptionalPortal";const s1=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${ot(t==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),US={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ot(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ot(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ot(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ot(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...s1("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...s1("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...s1("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...s1("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...s1("top"),common:{transformOrigin:"top right"}}},fj={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function T_e({transition:t,state:e,duration:r,timingFunction:n}){const i={transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof t=="string"?t in US?{transitionProperty:US[t].transitionProperty,...i,...US[t].common,...US[t][fj[e]]}:{}:{transitionProperty:t.transitionProperty,...i,...t.common,...t[fj[e]]}}function O_e({duration:t,exitDuration:e,timingFunction:r,mounted:n,onEnter:i,onExit:a,onEntered:o,onExited:s}){const l=oy(),u=jee(),c=l.respectReducedMotion?u:!1,[f,h]=oe.useState(c?0:t),[d,p]=oe.useState(n?"entered":"exited"),v=oe.useRef(-1),g=m=>{const y=m?i:a,w=m?o:s;p(m?"pre-entering":"pre-exiting"),window.clearTimeout(v.current);const b=c?0:m?t:e;if(h(b),b===0)typeof y=="function"&&y(),typeof w=="function"&&w(),p(m?"entered":"exited");else{const x=window.setTimeout(()=>{typeof y=="function"&&y(),p(m?"entering":"exiting")},10);v.current=window.setTimeout(()=>{window.clearTimeout(x),typeof w=="function"&&w(),p(m?"entered":"exited")},b)}};return Nee(()=>{g(n)},[n]),oe.useEffect(()=>()=>window.clearTimeout(v.current),[]),{transitionDuration:f,transitionStatus:d,transitionTimingFunction:r||"ease"}}function e6({keepMounted:t,transition:e="fade",duration:r=250,exitDuration:n=r,mounted:i,children:a,timingFunction:o="ease",onExit:s,onEntered:l,onEnter:u,onExited:c}){const{transitionDuration:f,transitionStatus:h,transitionTimingFunction:d}=O_e({mounted:i,exitDuration:n,duration:r,timingFunction:o,onExit:s,onEntered:l,onEnter:u,onExited:c});return f===0?i?te.createElement(te.Fragment,null,a({})):t?a({display:"none"}):null:h==="exited"?t?a({display:"none"}):null:te.createElement(te.Fragment,null,a(T_e({transition:e,duration:f,state:h,timingFunction:d})))}e6.displayName="@mantine/core/Transition";var jl={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const I_e=oe.forwardRef(({className:t,...e},r)=>te.createElement($r,{component:"span",className:ms(jl.barsLoader,t),...e,ref:r},te.createElement("span",{className:jl.bar}),te.createElement("span",{className:jl.bar}),te.createElement("span",{className:jl.bar}))),D_e=oe.forwardRef(({className:t,...e},r)=>te.createElement($r,{component:"span",className:ms(jl.dotsLoader,t),...e,ref:r},te.createElement("span",{className:jl.dot}),te.createElement("span",{className:jl.dot}),te.createElement("span",{className:jl.dot}))),P_e=oe.forwardRef(({className:t,...e},r)=>te.createElement($r,{component:"span",className:ms(jl.ovalLoader,t),...e,ref:r})),jte={bars:I_e,oval:P_e,dots:D_e},L_e={loaders:jte,type:"oval"},R_e=(t,{size:e,color:r})=>({root:{"--loader-size":lo(e,"loader-size"),"--loader-color":r?mf(r,t):void 0}}),wb=Mn((t,e)=>{const r=Rr("Loader",L_e,t),{size:n,color:i,type:a,vars:o,className:s,style:l,classNames:u,styles:c,unstyled:f,loaders:h,variant:d,children:p,...v}=r,g=ni({name:"Loader",props:r,classes:jl,className:s,style:l,classNames:u,styles:c,unstyled:f,vars:o,varsResolver:R_e});return p?te.createElement($r,{...g("root"),ref:e,...v},p):te.createElement($r,{...g("root"),ref:e,component:h[a],variant:d,size:n,...v})});wb.defaultLoaders=jte;wb.classes=jl;wb.displayName="@mantine/core/Loader";var EM={root:"m-8d3f4000",loader:"m-302b9fb1",icon:"m-8d3afb97",group:"m-1a0f1b21"};const hj={orientation:"horizontal"},N_e=(t,{borderWidth:e})=>({group:{"--ai-border-width":ot(e)}}),t6=Mn((t,e)=>{const r=Rr("ActionIconGroup",hj,t),{className:n,style:i,classNames:a,styles:o,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:h,...d}=Rr("ActionIconGroup",hj,t),p=ni({name:"ActionIconGroup",props:r,classes:EM,className:n,style:i,classNames:a,styles:o,unstyled:s,vars:u,varsResolver:N_e,rootSelector:"group"});return te.createElement($r,{...p("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...d})});t6.classes=EM;t6.displayName="@mantine/core/ActionIconGroup";const F_e={},B_e=(t,{size:e,radius:r,variant:n,gradient:i,color:a,autoContrast:o})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:i,variant:n||"filled",autoContrast:o});return{root:{"--ai-size":lo(e,"ai-size"),"--ai-radius":r===void 0?void 0:Gd(r),"--ai-bg":a||n?s.background:void 0,"--ai-hover":a||n?s.hover:void 0,"--ai-hover-color":a||n?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":a||n?s.border:void 0}}},bv=Ud((t,e)=>{const r=Rr("ActionIcon",F_e,t),{className:n,unstyled:i,variant:a,classNames:o,styles:s,style:l,loading:u,loaderProps:c,size:f,color:h,radius:d,__staticSelector:p,gradient:v,vars:g,children:m,disabled:y,"data-disabled":w,autoContrast:b,mod:x,...S}=r,E=ni({name:["ActionIcon",p],props:r,className:n,style:l,classes:EM,classNames:o,styles:s,unstyled:i,vars:g,varsResolver:B_e});return te.createElement(yb,{...E("root",{active:!y&&!u&&!w}),...S,unstyled:i,variant:a,size:f,disabled:y||u,ref:e,mod:[{loading:u,disabled:y||w},x]},te.createElement($r,{component:"span",...E("loader"),"aria-hidden":!0},te.createElement(wb,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})),te.createElement($r,{component:"span",mod:{loading:u},...E("icon")},m))});bv.classes=EM;bv.displayName="@mantine/core/ActionIcon";bv.Group=t6;const Gte=oe.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...r},n)=>te.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:n,...r},te.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})));Gte.displayName="@mantine/core/CloseIcon";var Ute={root:"m-86a44da5","root--subtle":"m-220c80f2"};const $_e={variant:"subtle"},z_e=(t,{size:e,radius:r,iconSize:n})=>({root:{"--cb-size":lo(e,"cb-size"),"--cb-radius":r===void 0?void 0:Gd(r),"--cb-icon-size":ot(n)}}),r6=Ud((t,e)=>{const r=Rr("CloseButton",$_e,t),{iconSize:n,children:i,vars:a,radius:o,className:s,classNames:l,style:u,styles:c,unstyled:f,"data-disabled":h,disabled:d,variant:p,icon:v,mod:g,...m}=r,y=ni({name:"CloseButton",props:r,className:s,style:u,classes:Ute,classNames:l,styles:c,unstyled:f,vars:a,varsResolver:z_e});return te.createElement(yb,{ref:e,...m,unstyled:f,variant:p,disabled:d,mod:[{disabled:d||h},g],...y("root",{variant:p,active:!0})},v||te.createElement(Gte,null),i)});r6.classes=Ute;r6.displayName="@mantine/core/CloseButton";var Wte={root:"m-9814e45f"};const j_e={zIndex:bM("modal")},G_e=(t,{gradient:e,color:r,backgroundOpacity:n,blur:i,radius:a,zIndex:o})=>({root:{"--overlay-bg":e||(r!==void 0||n!==void 0)&&eo(r||"#000",n??.6)||void 0,"--overlay-filter":i?`blur(${ot(i)})`:void 0,"--overlay-radius":a===void 0?void 0:Gd(a),"--overlay-z-index":o==null?void 0:o.toString()}}),n6=Ud((t,e)=>{const r=Rr("Overlay",j_e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,fixed:u,center:c,children:f,radius:h,zIndex:d,gradient:p,blur:v,color:g,backgroundOpacity:m,mod:y,...w}=r,b=ni({name:"Overlay",props:r,classes:Wte,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:G_e});return te.createElement($r,{ref:e,...b("root"),mod:[{center:c,fixed:u},y],...w},f)});n6.classes=Wte;n6.displayName="@mantine/core/Overlay";const[U_e,Lf]=gb("ModalBase component was not found in tree");function W_e({opened:t,transitionDuration:e}){const[r,n]=oe.useState(t),i=oe.useRef(),o=jee()?0:e;return oe.useEffect(()=>(t?(n(!0),window.clearTimeout(i.current)):o===0?n(!1):i.current=window.setTimeout(()=>n(!1),o),()=>window.clearTimeout(i.current)),[t,o]),r}function V_e({id:t,transitionProps:e,opened:r,trapFocus:n,closeOnEscape:i,onClose:a,returnFocus:o}){const s=zN(t),[l,u]=oe.useState(!1),[c,f]=oe.useState(!1),h=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,d=W_e({opened:r,transitionDuration:h});return sSe("keydown",p=>{!n&&p.key==="Escape"&&i&&a()}),Qxe({opened:r,shouldReturnFocus:n&&o}),{_id:s,titleMounted:l,bodyMounted:c,shouldLockScroll:d,setTitleMounted:u,setBodyMounted:f}}const H_e=oe.forwardRef(({keepMounted:t,opened:e,onClose:r,id:n,transitionProps:i,trapFocus:a,closeOnEscape:o,returnFocus:s,closeOnClickOutside:l,withinPortal:u,portalProps:c,lockScroll:f,children:h,zIndex:d,shadow:p,padding:v,__vars:g,unstyled:m,removeScrollProps:y,...w},b)=>{const{_id:x,titleMounted:S,bodyMounted:E,shouldLockScroll:_,setTitleMounted:k,setBodyMounted:C}=V_e({id:n,transitionProps:i,opened:e,trapFocus:a,closeOnEscape:o,onClose:r,returnFocus:s});return te.createElement(zte,{...c,withinPortal:u},te.createElement(U_e,{value:{opened:e,onClose:r,closeOnClickOutside:l,transitionProps:{...i,keepMounted:t},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:S,bodyMounted:E,setTitleMounted:k,setBodyMounted:C,trapFocus:a,closeOnEscape:o,zIndex:d,unstyled:m}},te.createElement(QSe,{enabled:_&&f,...y},te.createElement($r,{ref:b,...w,__vars:{...g,"--mb-z-index":(d||bM("modal")).toString(),"--mb-shadow":pte(p),"--mb-padding":E5(v)}},h))))});function X_e(){const t=Lf();return oe.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var km={title:"m-615af6c9",header:"m-b5489c3c",inner:"m-60c222c7",content:"m-fd1ab0aa",close:"m-606cb269",body:"m-5df29311"};const Vte=oe.forwardRef(({className:t,...e},r)=>{const n=X_e(),i=Lf();return te.createElement($r,{ref:r,...e,id:n,className:ms({[km.body]:!i.unstyled},t)})});Vte.displayName="@mantine/core/ModalBaseBody";const Hte=oe.forwardRef(({className:t,onClick:e,...r},n)=>{const i=Lf();return te.createElement(r6,{ref:n,...r,onClick:a=>{i.onClose(),e==null||e(a)},className:ms({[km.close]:!i.unstyled},t),unstyled:i.unstyled})});Hte.displayName="@mantine/core/ModalBaseCloseButton";const Y_e=oe.forwardRef(({transitionProps:t,className:e,innerProps:r,onKeyDown:n,style:i,...a},o)=>{const s=Lf(),l=u=>{var f;((f=u.target)==null?void 0:f.getAttribute("data-mantine-stop-propagation"))!=="true"&&u.key==="Escape"&&s.closeOnEscape&&s.onClose(),n==null||n(u)};return te.createElement(e6,{mounted:s.opened,transition:"pop",...s.transitionProps,...t},u=>te.createElement("div",{...r,className:ms({[km.inner]:!s.unstyled},r.className)},te.createElement(Bte,{active:s.opened&&s.trapFocus},te.createElement(JN,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":s.bodyMounted?s.getBodyId():void 0,"aria-labelledby":s.titleMounted?s.getTitleId():void 0,onKeyDown:l,ref:o,style:[i,u],className:ms({[km.content]:!s.unstyled},e),unstyled:s.unstyled},a.children))))}),Xte=oe.forwardRef(({className:t,...e},r)=>{const n=Lf();return te.createElement($r,{component:"header",ref:r,className:ms({[km.header]:!n.unstyled},t),...e})});Xte.displayName="@mantine/core/ModalBaseHeader";const q_e={duration:200,timingFunction:"ease",transition:"fade"};function K_e(t){const e=Lf();return{...q_e,...e.transitionProps,...t}}const Yte=oe.forwardRef(({onClick:t,transitionProps:e,style:r,...n},i)=>{const a=Lf(),o=K_e(e);return te.createElement(e6,{mounted:a.opened,...o,transition:"fade"},s=>te.createElement(n6,{ref:i,fixed:!0,style:[r,s],zIndex:a.zIndex,unstyled:a.unstyled,onClick:l=>{t==null||t(l),a.closeOnClickOutside&&a.onClose()},...n}))});Yte.displayName="@mantine/core/ModalBaseOverlay";function Q_e(){const t=Lf();return oe.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const qte=oe.forwardRef(({className:t,...e},r)=>{const n=Q_e(),i=Lf();return te.createElement($r,{component:"h2",ref:r,className:ms({[km.title]:!i.unstyled},t),...e,id:n})});qte.displayName="@mantine/core/ModalBaseTitle";function Z_e({children:t}){return te.createElement(te.Fragment,null,t)}const[J_e,bb]=rEe({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var hl={wrapper:"m-6c018570",input:"m-8fb7ebe7",section:"m-82577fc2",placeholder:"m-88bacfd0",root:"m-46b77525",label:"m-8fdc1311",required:"m-78a94662",error:"m-8f816625",description:"m-fe47ce59"};const dj={},e3e=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${fc(e)} - ${ot(2)})`}}),_M=Mn((t,e)=>{const r=Rr("InputDescription",dj,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,__staticSelector:c,__inheritStyles:f=!0,variant:h,...d}=Rr("InputDescription",dj,r),p=bb(),v=ni({name:["InputWrapper",c],props:r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"description",vars:l,varsResolver:e3e}),g=f&&(p==null?void 0:p.getStyles)||v;return te.createElement($r,{component:"p",ref:e,variant:h,size:u,...g("description"),...d})});_M.classes=hl;_M.displayName="@mantine/core/InputDescription";const t3e={},r3e=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${fc(e)} - ${ot(2)})`}}),CM=Mn((t,e)=>{const r=Rr("InputError",t3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,__staticSelector:c,__inheritStyles:f=!0,variant:h,...d}=r,p=ni({name:["InputWrapper",c],props:r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"error",vars:l,varsResolver:r3e}),v=bb(),g=f&&(v==null?void 0:v.getStyles)||p;return te.createElement($r,{component:"p",ref:e,variant:h,size:u,...g("error"),...d})});CM.classes=hl;CM.displayName="@mantine/core/InputError";const pj={labelElement:"label"},n3e=(t,{size:e})=>({label:{"--input-label-size":fc(e),"--input-asterisk-color":void 0}}),kM=Mn((t,e)=>{const r=Rr("InputLabel",pj,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,labelElement:u,size:c,required:f,htmlFor:h,onMouseDown:d,children:p,__staticSelector:v,variant:g,mod:m,...y}=Rr("InputLabel",pj,r),w=ni({name:["InputWrapper",v],props:r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"label",vars:l,varsResolver:n3e}),b=bb(),x=(b==null?void 0:b.getStyles)||w;return te.createElement($r,{...x("label"),component:u,variant:g,size:c,ref:e,htmlFor:u==="label"?h:void 0,mod:[{required:f},m],onMouseDown:S=>{d==null||d(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...y},p,f&&te.createElement("span",{...x("required"),"aria-hidden":!0}," *"))});kM.classes=hl;kM.displayName="@mantine/core/InputLabel";const vj={},i6=Mn((t,e)=>{const r=Rr("InputPlaceholder",vj,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,__staticSelector:u,variant:c,error:f,mod:h,...d}=Rr("InputPlaceholder",vj,r),p=ni({name:["InputPlaceholder",u],props:r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,rootSelector:"placeholder"});return te.createElement($r,{...p("placeholder"),mod:[{error:!!f},h],component:"span",variant:c,ref:e,...d})});i6.classes=hl;i6.displayName="@mantine/core/InputPlaceholder";function i3e(t,{hasDescription:e,hasError:r}){const n=t.findIndex(l=>l==="input"),i=t[n-1],a=t[n+1];return{offsetBottom:e&&a==="description"||r&&a==="error",offsetTop:e&&i==="description"||r&&i==="error"}}const a3e={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},o3e=(t,{size:e})=>({label:{"--input-label-size":fc(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${fc(e)} - ${ot(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${fc(e)} - ${ot(2)})`}}),a6=Mn((t,e)=>{const r=Rr("InputWrapper",a3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,size:u,variant:c,__staticSelector:f,inputContainer:h,inputWrapperOrder:d,label:p,error:v,description:g,labelProps:m,descriptionProps:y,errorProps:w,labelElement:b,children:x,withAsterisk:S,id:E,required:_,__stylesApiProps:k,mod:C,...M}=r,A=ni({name:["InputWrapper",f],props:k||r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:o3e}),T={size:u,variant:c,__staticSelector:f},D=zN(E),F=typeof S=="boolean"?S:_,R=(w==null?void 0:w.id)||`${D}-error`,B=(y==null?void 0:y.id)||`${D}-description`,N=D,O=!!v&&typeof v!="boolean",L=!!g,G=`${O?R:""} ${L?B:""}`,q=G.trim().length>0?G.trim():void 0,K=(m==null?void 0:m.id)||`${D}-label`,V=p&&te.createElement(kM,{key:"label",labelElement:b,id:K,htmlFor:N,required:F,...T,...m},p),le=L&&te.createElement(_M,{key:"description",...y,...T,size:(y==null?void 0:y.size)||T.size,id:(y==null?void 0:y.id)||B},g),ge=te.createElement(te.Fragment,{key:"input"},h(x)),xe=O&&te.createElement(CM,{...w,...T,size:(w==null?void 0:w.size)||T.size,key:"error",id:(w==null?void 0:w.id)||R},v),Ie=d.map(He=>{switch(He){case"label":return V;case"input":return ge;case"description":return le;case"error":return xe;default:return null}});return te.createElement(J_e,{value:{getStyles:A,describedBy:q,inputId:N,labelId:K,...i3e(d,{hasDescription:L,hasError:O})}},te.createElement($r,{ref:e,variant:c,size:u,mod:[{error:!!v},C],...A("root"),...M},Ie))});a6.classes=hl;a6.displayName="@mantine/core/InputWrapper";const s3e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},l3e=(t,e,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":lo(e.size,"input-height"),"--input-fz":fc(e.size),"--input-radius":e.radius===void 0?void 0:Gd(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?ot(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?ot(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?lo(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),uo=Ud((t,e)=>{const r=Rr("Input",s3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,required:l,__staticSelector:u,__stylesApiProps:c,size:f,wrapperProps:h,error:d,disabled:p,leftSection:v,leftSectionProps:g,leftSectionWidth:m,rightSection:y,rightSectionProps:w,rightSectionWidth:b,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:E,vars:_,pointer:k,multiline:C,radius:M,id:A,withAria:T,withErrorStyles:D,mod:F,...R}=r,{styleProps:B,rest:N}=xM(R),O=bb(),L={offsetBottom:O==null?void 0:O.offsetBottom,offsetTop:O==null?void 0:O.offsetTop},G=ni({name:["Input",u],props:c||r,classes:hl,className:i,style:a,classNames:n,styles:o,unstyled:s,stylesCtx:L,rootSelector:"wrapper",vars:_,varsResolver:l3e}),q=T?{required:l,disabled:p,"aria-invalid":!!d,"aria-describedby":O==null?void 0:O.describedBy,id:(O==null?void 0:O.inputId)||A}:{};return te.createElement($r,{...G("wrapper"),...B,...h,mod:[{error:!!d&&D,pointer:k,disabled:p,multiline:C,"data-with-right-section":!!y,"data-with-left-section":!!v},F],variant:E,size:f},v&&te.createElement("div",{...g,"data-position":"left",...G("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style})},v),te.createElement($r,{component:"input",...N,...q,ref:e,required:l,mod:{disabled:p,error:!!d&&D},variant:E,...G("input")}),y&&te.createElement("div",{...w,"data-position":"right",...G("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style})},y))});uo.classes=hl;uo.Wrapper=a6;uo.Label=kM;uo.Error=CM;uo.Description=_M;uo.Placeholder=i6;uo.displayName="@mantine/core/Input";function u3e(t,e,r){const n=Rr(t,e,r),{label:i,description:a,error:o,required:s,classNames:l,styles:u,className:c,unstyled:f,__staticSelector:h,__stylesApiProps:d,errorProps:p,labelProps:v,descriptionProps:g,wrapperProps:m,id:y,size:w,style:b,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:_,vars:k,mod:C,...M}=n,{styleProps:A,rest:T}=xM(M),D={label:i,description:a,error:o,required:s,classNames:l,className:c,__staticSelector:h,__stylesApiProps:d||n,errorProps:p,labelProps:v,descriptionProps:g,unstyled:f,styles:u,size:w,style:b,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:_,id:y,mod:C,...m};return{...T,classNames:l,styles:u,unstyled:f,wrapperProps:{...D,...A},inputProps:{required:s,classNames:l,styles:u,unstyled:f,size:w,__staticSelector:h,__stylesApiProps:d||n,error:o,variant:_,id:y}}}const c3e={__staticSelector:"InputBase",withAria:!0},MM=Ud((t,e)=>{const{inputProps:r,wrapperProps:n,...i}=u3e("InputBase",c3e,t);return te.createElement(uo.Wrapper,{...n},te.createElement(uo,{...r,...i,ref:e}))});MM.classes={...uo.classes,...uo.Wrapper.classes};MM.displayName="@mantine/core/InputBase";var Kte={root:"m-5f75b09e",body:"m-5f6e695e",labelWrapper:"m-d3ea56bb",label:"m-8ee546b8",description:"m-328f68c0",error:"m-8e8a99cc"};const f3e=Kte,Qte=oe.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:r,classNames:n,styles:i,unstyled:a,children:o,label:s,description:l,id:u,disabled:c,error:f,size:h,labelPosition:d="left",variant:p,style:v,vars:g,mod:m,...y},w)=>{const b=ni({name:t,props:e,className:r,style:v,classes:Kte,classNames:n,styles:i,unstyled:a});return te.createElement($r,{...b("root"),ref:w,__vars:{"--label-fz":fc(h),"--label-lh":lo(h,"label-lh")},mod:[{"label-position":d},m],variant:p,size:h,...y},te.createElement("div",{...b("body")},o,te.createElement("div",{...b("labelWrapper"),"data-disabled":c||void 0},s&&te.createElement("label",{...b("label"),"data-disabled":c||void 0,htmlFor:u},s),l&&te.createElement(uo.Description,{size:h,__inheritStyles:!1,...b("description")},l),f&&f!=="boolean"&&te.createElement(uo.Error,{size:h,__inheritStyles:!1,...b("error")},f))))});Qte.displayName="@mantine/core/InlineInput";const Zte=oe.createContext(null),h3e=Zte.Provider,d3e=()=>oe.useContext(Zte);function p3e({children:t,role:e}){const r=bb();return r?te.createElement("div",{role:e,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy},t):te.createElement(te.Fragment,null,t)}const v3e={},o6=Mn((t,e)=>{const{value:r,defaultValue:n,onChange:i,size:a,wrapperProps:o,children:s,readOnly:l,...u}=Rr("CheckboxGroup",v3e,t),[c,f]=uSe({value:r,defaultValue:n,finalValue:[],onChange:i}),h=d=>{const p=d.currentTarget.value;!l&&f(c.includes(p)?c.filter(v=>v!==p):[...c,p])};return te.createElement(h3e,{value:{value:c,onChange:h,size:a}},te.createElement(uo.Wrapper,{size:a,ref:e,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup"},te.createElement(p3e,{role:"group"},s)))});o6.classes=uo.Wrapper.classes;o6.displayName="@mantine/core/CheckboxGroup";function g3e({size:t,style:e,...r}){const n=t!==void 0?{width:ot(t),height:ot(t),...e}:e;return te.createElement("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r},te.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function m3e({indeterminate:t,...e}){return t?te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...e},te.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):te.createElement(g3e,{...e})}var Jte={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const y3e={labelPosition:"right",icon:m3e},w3e=(t,{radius:e,color:r,size:n,iconColor:i,variant:a,autoContrast:o})=>{const s=ay({color:r||t.primaryColor,theme:t}),l=s.isThemeColor&&s.shade===void 0?`var(--mantine-color-${s.color}-outline)`:s.color;return{root:{"--checkbox-size":lo(n,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:Gd(e),"--checkbox-color":a==="outline"?l:mf(r,t),"--checkbox-icon-color":i?mf(i,t):GEe(o,t)?yte({color:r,theme:t}):void 0}}},AM=Mn((t,e)=>{const r=Rr("Checkbox",y3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,color:u,label:c,id:f,size:h,radius:d,wrapperProps:p,children:v,checked:g,labelPosition:m,description:y,error:w,disabled:b,variant:x,indeterminate:S,icon:E,rootRef:_,iconColor:k,onChange:C,autoContrast:M,mod:A,...T}=r,D=d3e(),F=h||(D==null?void 0:D.size),R=E,B=ni({name:"Checkbox",props:r,classes:Jte,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:w3e}),{styleProps:N,rest:O}=xM(T),L=zN(f),G=D?{checked:D.value.includes(O.value),onChange:q=>{D.onChange(q),C==null||C(q)}}:{};return te.createElement(Qte,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:L,size:F,labelPosition:m,label:c,description:y,error:w,disabled:b,classNames:n,styles:o,unstyled:s,"data-checked":G.checked||g||void 0,variant:x,ref:_,mod:A,...N,...p},te.createElement($r,{...B("inner"),mod:{"data-label-position":m}},te.createElement($r,{component:"input",id:L,ref:e,checked:g,disabled:b,mod:{error:!!w,indeterminate:S},...B("input",{focusable:!0,variant:x}),onChange:C,...O,...G,type:"checkbox"}),te.createElement(R,{indeterminate:S,...B("icon")})))});AM.classes={...Jte,...f3e};AM.displayName="@mantine/core/Checkbox";AM.Group=o6;var TM={root:"m-77c9d27d",inner:"m-80f1301b",loader:"m-a25b86ee",label:"m-811560b9",section:"m-a74036a",group:"m-80d6d844"};const gj={orientation:"horizontal"},b3e=(t,{borderWidth:e})=>({group:{"--button-border-width":ot(e)}}),s6=Mn((t,e)=>{const r=Rr("ButtonGroup",gj,t),{className:n,style:i,classNames:a,styles:o,unstyled:s,orientation:l,vars:u,borderWidth:c,variant:f,mod:h,...d}=Rr("ButtonGroup",gj,t),p=ni({name:"ButtonGroup",props:r,classes:TM,className:n,style:i,classNames:a,styles:o,unstyled:s,vars:u,varsResolver:b3e,rootSelector:"group"});return te.createElement($r,{...p("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...d})});s6.classes=TM;s6.displayName="@mantine/core/ButtonGroup";const x3e={},S3e=(t,{radius:e,color:r,gradient:n,variant:i,size:a,justify:o,autoContrast:s})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:i||"filled",autoContrast:s});return{root:{"--button-justify":o,"--button-height":lo(a,"button-height"),"--button-padding-x":lo(a,"button-padding-x"),"--button-fz":a!=null&&a.includes("compact")?fc(a.replace("compact-","")):fc(a),"--button-radius":e===void 0?void 0:Gd(e),"--button-bg":r||i?l.background:void 0,"--button-hover":r||i?l.hover:void 0,"--button-color":l.color,"--button-bd":r||i?l.border:void 0,"--button-hover-color":r||i?l.hoverColor:void 0}}},Yu=Ud((t,e)=>{const r=Rr("Button",x3e,t),{style:n,vars:i,className:a,color:o,disabled:s,children:l,leftSection:u,rightSection:c,fullWidth:f,variant:h,radius:d,loading:p,loaderProps:v,gradient:g,classNames:m,styles:y,unstyled:w,"data-disabled":b,autoContrast:x,mod:S,...E}=r,_=ni({name:"Button",props:r,classes:TM,className:a,style:n,classNames:m,styles:y,unstyled:w,vars:i,varsResolver:S3e}),k=!!u,C=!!c;return te.createElement(yb,{ref:e,..._("root",{active:!s&&!p&&!b}),unstyled:w,variant:h,disabled:s||p,mod:[{disabled:s||b,loading:p,block:f,"with-left-section":k,"with-right-section":C},S],...E},te.createElement($r,{component:"span",..._("loader"),"aria-hidden":!0},te.createElement(wb,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...v})),te.createElement("span",{..._("inner")},u&&te.createElement($r,{component:"span",..._("section"),mod:{position:"left"}},u),te.createElement($r,{component:"span",mod:{loading:p},..._("label")},l),c&&te.createElement($r,{component:"span",..._("section"),mod:{position:"right"}},c)))});Yu.classes=TM;Yu.displayName="@mantine/core/Button";Yu.Group=s6;var ere={root:"m-3eebeb36",label:"m-9e365f20"};const E3e={orientation:"horizontal"},_3e=(t,{color:e,variant:r,size:n})=>({root:{"--divider-color":e?mf(e,t):void 0,"--divider-border-style":r,"--divider-size":lo(n,"divider-size")}}),l6=Mn((t,e)=>{const r=Rr("Divider",E3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,color:u,orientation:c,label:f,labelPosition:h,mod:d,...p}=r,v=ni({name:"Divider",classes:ere,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:_3e});return te.createElement($r,{ref:e,mod:[{orientation:c,"with-label":!!f},d],...v("root"),...p,role:"separator"},f&&te.createElement($r,{component:"span",mod:{position:h},...v("label")},f))});l6.classes=ere;l6.displayName="@mantine/core/Divider";const[C3e,sy]=gb("Modal component was not found in tree");var Rf={root:"m-9df02822",content:"m-54c44539",inner:"m-1f958f16",header:"m-d0e2b9cd"};const k3e={},OM=Mn((t,e)=>{const r=Rr("ModalBody",k3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=sy();return te.createElement(Vte,{ref:e,...u.getStyles("body",{classNames:n,style:a,styles:o,className:i}),...l})});OM.classes=Rf;OM.displayName="@mantine/core/ModalBody";const M3e={},IM=Mn((t,e)=>{const r=Rr("ModalCloseButton",M3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=sy();return te.createElement(Hte,{ref:e,...u.getStyles("close",{classNames:n,style:a,styles:o,className:i}),...l})});IM.classes=Rf;IM.displayName="@mantine/core/ModalCloseButton";const A3e={},DM=Mn((t,e)=>{const r=Rr("ModalContent",A3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,children:l,...u}=r,c=sy(),f=c.scrollAreaComponent||Z_e;return te.createElement(Y_e,{...c.getStyles("content",{className:i,style:a,styles:o,classNames:n}),innerProps:c.getStyles("inner",{className:i,style:a,styles:o,classNames:n}),"data-full-screen":c.fullScreen||void 0,ref:e,...u},te.createElement(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${ot(c.yOffset)} * 2))`}},l))});DM.classes=Rf;DM.displayName="@mantine/core/ModalContent";const T3e={},PM=Mn((t,e)=>{const r=Rr("ModalHeader",T3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=sy();return te.createElement(Xte,{ref:e,...u.getStyles("header",{classNames:n,style:a,styles:o,className:i}),...l})});PM.classes=Rf;PM.displayName="@mantine/core/ModalHeader";const O3e={},LM=Mn((t,e)=>{const r=Rr("ModalOverlay",O3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=sy();return te.createElement(Yte,{ref:e,...u.getStyles("overlay",{classNames:n,style:a,styles:o,className:i}),...l})});LM.classes=Rf;LM.displayName="@mantine/core/ModalOverlay";const I3e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:bM("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},D3e=(t,{radius:e,size:r,yOffset:n,xOffset:i})=>({root:{"--modal-radius":e===void 0?void 0:Gd(e),"--modal-size":lo(r,"modal-size"),"--modal-y-offset":ot(n),"--modal-x-offset":ot(i)}}),RM=Mn((t,e)=>{const r=Rr("ModalRoot",I3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,yOffset:u,scrollAreaComponent:c,radius:f,fullScreen:h,centered:d,xOffset:p,__staticSelector:v,...g}=r,m=ni({name:v,classes:Rf,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:D3e});return te.createElement(C3e,{value:{yOffset:u,scrollAreaComponent:c,getStyles:m,fullScreen:h}},te.createElement(H_e,{ref:e,...m("root"),"data-full-screen":h||void 0,"data-centered":d||void 0,unstyled:s,...g}))});RM.classes=Rf;RM.displayName="@mantine/core/ModalRoot";const P3e={},NM=Mn((t,e)=>{const r=Rr("ModalTitle",P3e,t),{classNames:n,className:i,style:a,styles:o,vars:s,...l}=r,u=sy();return te.createElement(qte,{ref:e,...u.getStyles("title",{classNames:n,style:a,styles:o,className:i}),...l})});NM.classes=Rf;NM.displayName="@mantine/core/ModalTitle";const L3e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:bM("modal"),transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0},ys=Mn((t,e)=>{const{title:r,withOverlay:n,overlayProps:i,withCloseButton:a,closeButtonProps:o,children:s,radius:l,...u}=Rr("Modal",L3e,t),c=!!r||a;return te.createElement(RM,{ref:e,radius:l,...u},n&&te.createElement(LM,{...i}),te.createElement(DM,{radius:l},c&&te.createElement(PM,null,r&&te.createElement(NM,null,r),a&&te.createElement(IM,{...o})),te.createElement(OM,null,s)))});ys.classes=Rf;ys.displayName="@mantine/core/Modal";ys.Root=RM;ys.Overlay=LM;ys.Content=DM;ys.Body=OM;ys.Header=PM;ys.Title=NM;ys.CloseButton=IM;const[R3e,N3e]=gb("Table component was not found in the tree");var xb={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function F3e(t,e){if(!e)return;const r={};return e.columnBorder&&t.withColumnBorders&&(r["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(r["data-with-row-border"]=!0),e.striped&&t.striped&&(r["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(r["data-hover"]=!0),e.captionSide&&t.captionSide&&(r["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(r["data-sticky"]=!0),r}function Bv(t,e){const r=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,n=Mn((i,a)=>{const o=Rr(r,{},i),{classNames:s,className:l,style:u,styles:c,...f}=o,h=N3e();return te.createElement($r,{component:t,ref:a,...F3e(h,e),...h.getStyles(t,{className:l,classNames:s,style:u,styles:c,props:o}),...f})});return n.displayName=`@mantine/core/${r}`,n.classes=xb,n}const M5=Bv("th",{columnBorder:!0}),tre=Bv("td",{columnBorder:!0}),T_=Bv("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),rre=Bv("thead",{stickyHeader:!0}),nre=Bv("tbody"),ire=Bv("tfoot"),are=Bv("caption",{captionSide:!0});function u6({data:t}){return te.createElement(te.Fragment,null,t.caption&&te.createElement(are,null,t.caption),t.head&&te.createElement(rre,null,te.createElement(T_,null,t.head.map((e,r)=>te.createElement(M5,{key:r},e)))),t.body&&te.createElement(nre,null,t.body.map((e,r)=>te.createElement(T_,{key:r},e.map((n,i)=>te.createElement(tre,{key:i},n))))),t.foot&&te.createElement(ire,null,te.createElement(T_,null,t.foot.map((e,r)=>te.createElement(M5,{key:r},e)))))}u6.displayName="@mantine/core/TableDataRenderer";const B3e={type:"scrollarea"},$3e=(t,{minWidth:e,type:r})=>({scrollContainer:{"--table-min-width":ot(e),"--table-overflow":r==="native"?"auto":void 0}}),c6=Mn((t,e)=>{const r=Rr("TableScrollContainer",B3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,children:u,minWidth:c,type:f,...h}=r,d=ni({name:"TableScrollContainer",classes:xb,props:r,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:l,varsResolver:$3e,rootSelector:"scrollContainer"});return te.createElement($r,{component:f==="scrollarea"?mb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:e,...d("scrollContainer"),...h},te.createElement("div",{...d("scrollContainerInner")},u))});c6.classes=xb;c6.displayName="@mantine/core/TableScrollContainer";const z3e={withRowBorders:!0,verticalSpacing:7},j3e=(t,{layout:e,captionSide:r,horizontalSpacing:n,verticalSpacing:i,borderColor:a,stripedColor:o,highlightOnHoverColor:s,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":r,"--table-horizontal-spacing":E5(n),"--table-vertical-spacing":E5(i),"--table-border-color":a?mf(a,t):void 0,"--table-striped-color":l&&o?mf(o,t):void 0,"--table-highlight-on-hover-color":u&&s?mf(s,t):void 0,"--table-sticky-header-offset":f?ot(c):void 0}}),Ln=Mn((t,e)=>{const r=Rr("Table",z3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:f,stripedColor:h,highlightOnHoverColor:d,striped:p,highlightOnHover:v,withColumnBorders:g,withRowBorders:m,withTableBorder:y,borderColor:w,layout:b,variant:x,data:S,children:E,stickyHeader:_,stickyHeaderOffset:k,mod:C,...M}=r,A=ni({name:"Table",props:r,className:i,style:a,classes:xb,classNames:n,styles:o,unstyled:s,rootSelector:"table",vars:l,varsResolver:j3e});return te.createElement(R3e,{value:{getStyles:A,stickyHeader:_,striped:p===!0?"odd":p||void 0,highlightOnHover:v,withColumnBorders:g,withRowBorders:m,captionSide:f||"bottom"}},te.createElement($r,{component:"table",variant:x,ref:e,mod:[{"data-with-table-border":y},C],...A("table"),...M},E||!!S&&te.createElement(u6,{data:S})))});Ln.classes=xb;Ln.displayName="@mantine/core/Table";Ln.Td=tre;Ln.Th=M5;Ln.Tr=T_;Ln.Thead=rre;Ln.Tbody=nre;Ln.Tfoot=ire;Ln.Caption=are;Ln.ScrollContainer=c6;Ln.DataRenderer=u6;const G3e={},f6=Mn((t,e)=>{const r=Rr("TextInput",G3e,t);return te.createElement(MM,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});f6.classes=MM.classes;f6.displayName="@mantine/core/TextInput";const U3e=["h1","h2","h3","h4","h5","h6"];function W3e(t,e){const r=e!==void 0?e:`h${t}`;return U3e.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:{fontSize:ot(r),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var ore={root:"m-8a5d1357"};const V3e={order:1},H3e=(t,{order:e,size:r,lineClamp:n,textWrap:i})=>{const a=W3e(e,r);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":i}}},Cd=Mn((t,e)=>{const r=Rr("Title",V3e,t),{classNames:n,className:i,style:a,styles:o,unstyled:s,order:l,vars:u,size:c,variant:f,lineClamp:h,textWrap:d,mod:p,...v}=r,g=ni({name:"Title",props:r,classes:ore,className:i,style:a,classNames:n,styles:o,unstyled:s,vars:u,varsResolver:H3e});return[1,2,3,4,5,6].includes(l)?te.createElement($r,{...g("root"),component:`h${l}`,variant:f,ref:e,mod:[{order:l,"data-line-clamp":typeof h=="number"},p],size:c,...v}):null});Cd.classes=ore;Cd.displayName="@mantine/core/Title";var sre={exports:{}},X3e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y3e=X3e,q3e=Y3e;function lre(){}function ure(){}ure.resetWarningCache=lre;var K3e=function(){function t(n,i,a,o,s,l){if(l!==q3e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ure,resetWarningCache:lre};return r.PropTypes=r,r};sre.exports=K3e();var Q3e=sre.exports;const hp=_s(Q3e);var Z3e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},J3e=Object.defineProperty,eCe=Object.defineProperties,tCe=Object.getOwnPropertyDescriptors,nC=Object.getOwnPropertySymbols,cre=Object.prototype.hasOwnProperty,fre=Object.prototype.propertyIsEnumerable,mj=(t,e,r)=>e in t?J3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yj=(t,e)=>{for(var r in e||(e={}))cre.call(e,r)&&mj(t,r,e[r]);if(nC)for(var r of nC(e))fre.call(e,r)&&mj(t,r,e[r]);return t},rCe=(t,e)=>eCe(t,tCe(e)),nCe=(t,e)=>{var r={};for(var n in t)cre.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&nC)for(var n of nC(t))e.indexOf(n)<0&&fre.call(t,n)&&(r[n]=t[n]);return r},ly=(t,e,r)=>{const n=oe.forwardRef((i,a)=>{var o=i,{color:s="currentColor",size:l=24,stroke:u=2,children:c}=o,f=nCe(o,["color","size","stroke","children"]);return oe.createElement("svg",yj(rCe(yj({ref:a},Z3e),{width:l,height:l,stroke:s,strokeWidth:u,className:`tabler-icon tabler-icon-${t}`}),f),[...r.map(([h,d])=>oe.createElement(h,d)),...c||[]])});return n.propTypes={color:hp.string,size:hp.oneOfType([hp.string,hp.number]),stroke:hp.oneOfType([hp.string,hp.number])},n.displayName=`${e}`,n},iCe=ly("brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]),hre=ly("caret-right","IconCaretRight",[["path",{d:"M10 18l6 -6l-6 -6v12",key:"svg-0"}]]),aCe=ly("download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),oCe=ly("history","IconHistory",[["path",{d:"M12 8l0 4l2 2",key:"svg-0"}],["path",{d:"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5",key:"svg-1"}]]),sCe=ly("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),lCe=ly("zoom-code","IconZoomCode",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M8 8l-2 2l2 2",key:"svg-2"}],["path",{d:"M12 8l2 2l-2 2",key:"svg-3"}]]);const uCe={"query-editor-container":"_query-editor-container_1ruxt_1"};var dre={exports:{}},pre={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb=oe;function cCe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fCe=typeof Object.is=="function"?Object.is:cCe,hCe=Sb.useSyncExternalStore,dCe=Sb.useRef,pCe=Sb.useEffect,vCe=Sb.useMemo,gCe=Sb.useDebugValue;pre.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=dCe(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=vCe(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,fCe(c,d))return p;var v=n(d);return i!==void 0&&i(p,v)?p:(c=d,f=v)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var s=hCe(t,a[0],a[1]);return pCe(function(){o.hasValue=!0,o.value=s},[s]),gCe(s),s};dre.exports=pre;var mCe=dre.exports,cs="default"in K9?te:K9,wj=Symbol.for("react-redux-context"),bj=typeof globalThis<"u"?globalThis:{};function yCe(){if(!cs.createContext)return{};const t=bj[wj]??(bj[wj]=new Map);let e=t.get(cs.createContext);return e||(e=cs.createContext(null),t.set(cs.createContext,e)),e}var kd=yCe(),wCe=()=>{throw new Error("uSES not initialized!")};function h6(t=kd){return function(){return cs.useContext(t)}}var vre=h6(),gre=wCe,bCe=t=>{gre=t},xCe=(t,e)=>t===e;function SCe(t=kd){const e=t===kd?vre:h6(t),r=(n,i={})=>{const{equalityFn:a=xCe,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:s,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:f}=e();cs.useRef(!0);const h=cs.useCallback({[n.name](p){return n(p)}}[n.name],[n,c,o.stabilityCheck]),d=gre(l.addNestedSub,s.getState,u||s.getState,h,a);return cs.useDebugValue(d),d};return Object.assign(r,{withTypes:()=>r}),r}var ECe=SCe();function _Ce(t){t()}function CCe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){_Ce(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var xj={notify(){},get:()=>[]};function kCe(t,e){let r,n=xj,i=0,a=!1;function o(v){c();const g=n.subscribe(v);let m=!1;return()=>{m||(m=!0,g(),f())}}function s(){n.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return a}function c(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=CCe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=xj)}function h(){a||(a=!0,c())}function d(){a&&(a=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}var MCe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ACe=typeof navigator<"u"&&navigator.product==="ReactNative",TCe=MCe||ACe?cs.useLayoutEffect:cs.useEffect;function OCe({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",identityFunctionCheck:a="once"}){const o=cs.useMemo(()=>{const u=kCe(t);return{store:t,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:i,identityFunctionCheck:a}},[t,n,i,a]),s=cs.useMemo(()=>t.getState(),[t]);TCe(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const l=e||kd;return cs.createElement(l.Provider,{value:o},r)}var ICe=OCe;function mre(t=kd){const e=t===kd?vre:h6(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var DCe=mre();function PCe(t=kd){const e=t===kd?DCe:mre(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var LCe=PCe();bCe(mCe.useSyncExternalStoreWithSelector);function ha(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var RCe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Sj=RCe,UO=()=>Math.random().toString(36).substring(7).split("").join("."),NCe={INIT:`@@redux/INIT${UO()}`,REPLACE:`@@redux/REPLACE${UO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${UO()}`},iC=NCe;function d6(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function yre(t,e,r){if(typeof t!="function")throw new Error(ha(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ha(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ha(1));return r(yre)(t,e)}let n=t,i=e,a=new Map,o=a,s=0,l=!1;function u(){o===a&&(o=new Map,a.forEach((g,m)=>{o.set(m,g)}))}function c(){if(l)throw new Error(ha(3));return i}function f(g){if(typeof g!="function")throw new Error(ha(4));if(l)throw new Error(ha(5));let m=!0;u();const y=s++;return o.set(y,g),function(){if(m){if(l)throw new Error(ha(6));m=!1,u(),o.delete(y),a=null}}}function h(g){if(!d6(g))throw new Error(ha(7));if(typeof g.type>"u")throw new Error(ha(8));if(typeof g.type!="string")throw new Error(ha(17));if(l)throw new Error(ha(9));try{l=!0,i=n(i,g)}finally{l=!1}return(a=o).forEach(y=>{y()}),g}function d(g){if(typeof g!="function")throw new Error(ha(10));n=g,h({type:iC.REPLACE})}function p(){const g=f;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(ha(11));function y(){const b=m;b.next&&b.next(c())}return y(),{unsubscribe:g(y)}},[Sj](){return this}}}return h({type:iC.INIT}),{dispatch:h,subscribe:f,getState:c,replaceReducer:d,[Sj]:p}}function FCe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:iC.INIT})>"u")throw new Error(ha(12));if(typeof r(void 0,{type:iC.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ha(13))})}function BCe(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{FCe(r)}catch(a){i=a}return function(o={},s){if(i)throw i;let l=!1;const u={};for(let c=0;c<n.length;c++){const f=n[c],h=r[f],d=o[f],p=h(d,s);if(typeof p>"u")throw s&&s.type,new Error(ha(14));u[f]=p,l=l||p!==d}return l=l||n.length!==Object.keys(o).length,l?u:o}}function aC(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function $Ce(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(ha(15))};const o={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},s=t.map(l=>l(o));return a=aC(...s)(i.dispatch),{...i,dispatch:a}}}function zCe(t){return d6(t)&&"type"in t&&typeof t.type=="string"}var wre=Symbol.for("immer-nothing"),Ej=Symbol.for("immer-draftable"),ws=Symbol.for("immer-state");function Bl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Mm=Object.getPrototypeOf;function Md(t){return!!t&&!!t[ws]}function Tf(t){var e;return t?bre(t)||Array.isArray(t)||!!t[Ej]||!!((e=t.constructor)!=null&&e[Ej])||BM(t)||$M(t):!1}var jCe=Object.prototype.constructor.toString();function bre(t){if(!t||typeof t!="object")return!1;const e=Mm(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===jCe}function oC(t,e){FM(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function FM(t){const e=t[ws];return e?e.type_:Array.isArray(t)?1:BM(t)?2:$M(t)?3:0}function A5(t,e){return FM(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function xre(t,e,r){const n=FM(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function GCe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function BM(t){return t instanceof Map}function $M(t){return t instanceof Set}function Sp(t){return t.copy_||t.base_}function T5(t,e){if(BM(t))return new Map(t);if($M(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&bre(t))return Mm(t)?{...t}:Object.assign(Object.create(null),t);const r=Object.getOwnPropertyDescriptors(t);delete r[ws];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){const a=n[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Mm(t),r)}function p6(t,e=!1){return zM(t)||Md(t)||!Tf(t)||(FM(t)>1&&(t.set=t.add=t.clear=t.delete=UCe),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>p6(n,!0))),t}function UCe(){Bl(2)}function zM(t){return Object.isFrozen(t)}var WCe={};function xv(t){const e=WCe[t];return e||Bl(0,t),e}var sw;function Sre(){return sw}function VCe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _j(t,e){e&&(xv("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function O5(t){I5(t),t.drafts_.forEach(HCe),t.drafts_=null}function I5(t){t===sw&&(sw=t.parent_)}function Cj(t){return sw=VCe(sw,t)}function HCe(t){const e=t[ws];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kj(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[ws].modified_&&(O5(e),Bl(4)),Tf(t)&&(t=sC(e,t),e.parent_||lC(e,t)),e.patches_&&xv("Patches").generateReplacementPatches_(r[ws].base_,t,e.patches_,e.inversePatches_)):t=sC(e,r,[]),O5(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==wre?t:void 0}function sC(t,e,r){if(zM(e))return e;const n=e[ws];if(!n)return oC(e,(i,a)=>Mj(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return lC(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),oC(a,(s,l)=>Mj(t,n,i,s,l,r,o)),lC(t,i,!1),r&&t.patches_&&xv("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function Mj(t,e,r,n,i,a,o){if(Md(i)){const s=a&&e&&e.type_!==3&&!A5(e.assigned_,n)?a.concat(n):void 0,l=sC(t,i,s);if(xre(r,n,l),Md(l))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(Tf(i)&&!zM(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;sC(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&lC(t,i)}}function lC(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&p6(e,r)}function XCe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Sre(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=v6;r&&(i=[n],a=lw);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return n.draft_=s,n.revoke_=o,s}var v6={get(t,e){if(e===ws)return t;const r=Sp(t);if(!A5(r,e))return YCe(t,r,e);const n=r[e];return t.finalized_||!Tf(n)?n:n===WO(t.base_,e)?(VO(t),t.copy_[e]=P5(n,t)):n},has(t,e){return e in Sp(t)},ownKeys(t){return Reflect.ownKeys(Sp(t))},set(t,e,r){const n=Ere(Sp(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=WO(Sp(t),e),a=i==null?void 0:i[ws];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(GCe(r,i)&&(r!==void 0||A5(t.base_,e)))return!0;VO(t),D5(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return WO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,VO(t),D5(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Sp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Bl(11)},getPrototypeOf(t){return Mm(t.base_)},setPrototypeOf(){Bl(12)}},lw={};oC(v6,(t,e)=>{lw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lw.deleteProperty=function(t,e){return lw.set.call(this,t,e,void 0)};lw.set=function(t,e,r){return v6.set.call(this,t[0],e,r,t[0])};function WO(t,e){const r=t[ws];return(r?Sp(r):t)[e]}function YCe(t,e,r){var i;const n=Ere(e,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function Ere(t,e){if(!(e in t))return;let r=Mm(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Mm(r)}}function D5(t){t.modified_||(t.modified_=!0,t.parent_&&D5(t.parent_))}function VO(t){t.copy_||(t.copy_=T5(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qCe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(l=a,...u){return o.produce(l,c=>r.call(this,c,...u))}}typeof r!="function"&&Bl(6),n!==void 0&&typeof n!="function"&&Bl(7);let i;if(Tf(e)){const a=Cj(this),o=P5(e,void 0);let s=!0;try{i=r(o),s=!1}finally{s?O5(a):I5(a)}return _j(a,n),kj(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===wre&&(i=void 0),this.autoFreeze_&&p6(i,!0),n){const a=[],o=[];xv("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else Bl(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,l=>e(l,...s));let n,i;return[this.produce(e,r,(o,s)=>{n=o,i=s}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Tf(t)||Bl(8),Md(t)&&(t=_re(t));const e=Cj(this),r=P5(t,void 0);return r[ws].isManual_=!0,I5(e),r}finishDraft(t,e){const r=t&&t[ws];(!r||!r.isManual_)&&Bl(9);const{scope_:n}=r;return _j(n,e),kj(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=xv("Patches").applyPatches_;return Md(t)?n(t,e):this.produce(t,i=>n(i,e))}};function P5(t,e){const r=BM(t)?xv("MapSet").proxyMap_(t,e):$M(t)?xv("MapSet").proxySet_(t,e):XCe(t,e);return(e?e.scope_:Sre()).drafts_.push(r),r}function _re(t){return Md(t)||Bl(10,t),Cre(t)}function Cre(t){if(!Tf(t)||zM(t))return t;const e=t[ws];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=T5(t,e.scope_.immer_.useStrictShallowCopy_)}else r=T5(t,!0);return oC(r,(n,i)=>{xre(r,n,Cre(i))}),e&&(e.finalized_=!1),r}var bs=new qCe,kre=bs.produce;bs.produceWithPatches.bind(bs);bs.setAutoFreeze.bind(bs);bs.setUseStrictShallowCopy.bind(bs);bs.applyPatches.bind(bs);bs.createDraft.bind(bs);bs.finishDraft.bind(bs);function KCe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function QCe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ZCe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var Aj=t=>Array.isArray(t)?t:[t];function JCe(t){const e=Array.isArray(t[0])?t[0]:t;return ZCe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function eke(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var tke=class{constructor(t){this.value=t}deref(){return this.value}},rke=typeof WeakRef<"u"?WeakRef:tke,nke=0,Tj=1;function WS(){return{s:nke,v:void 0,o:null,p:null}}function g6(t,e={}){let r=WS();const{resultEqualityCheck:n}=e;let i,a=0;function o(){var f;let s=r;const{length:l}=arguments;for(let h=0,d=l;h<d;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=s.o;v===null&&(s.o=v=new WeakMap);const g=v.get(p);g===void 0?(s=WS(),v.set(p,s)):s=g}else{let v=s.p;v===null&&(s.p=v=new Map);const g=v.get(p);g===void 0?(s=WS(),v.set(p,s)):s=g}}const u=s;let c;if(s.s===Tj?c=s.v:(c=t.apply(null,arguments),a++),u.s=Tj,n){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&n(h,c)&&(c=h,a!==0&&a--),i=typeof c=="object"&&c!==null||typeof c=="function"?new rke(c):c}return u.v=c,c}return o.clearCache=()=>{r=WS(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Mre(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,s,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),KCe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:d=g6,argsMemoizeOptions:p=[],devModeChecks:v={}}=c,g=Aj(h),m=Aj(p),y=JCe(i),w=f(function(){return a++,u.apply(null,arguments)},...g),b=d(function(){o++;const S=eke(y,arguments);return s=w.apply(null,S),s},...m);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var ike=Mre(g6),ake=Object.assign((t,e=ike)=>{QCe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,s,l)=>(o[r[l]]=s,o),{}))},{withTypes:()=>ake});function Are(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var oke=Are(),ske=Are,lke=(...t)=>{const e=Mre(...t),r=Object.assign((...n)=>{const i=e(...n),a=(o,...s)=>i(Md(o)?_re(o):o,...s);return Object.assign(a,i),a},{withTypes:()=>r});return r};lke(g6);var uke=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?aC:aC.apply(null,arguments)};function Am(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(No(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>zCe(n)&&n.type===t,r}var Tre=class N1 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,N1.prototype)}static get[Symbol.species](){return N1}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new N1(...e[0].concat(this)):new N1(...e.concat(this))}};function Oj(t){return Tf(t)?kre(t,()=>{}):t}function Ij(t,e,r){if(t.has(e)){let i=t.get(e);return r.update&&(i=r.update(i,e,t),t.set(e,i)),i}if(!r.insert)throw new Error(No(10));const n=r.insert(e,t);return t.set(e,n),n}function cke(t){return typeof t=="boolean"}var fke=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new Tre;return r&&(cke(r)?o.push(oke):o.push(ske(r.extraArgument))),o},hke="RTK_autoBatch",Ore=t=>e=>{setTimeout(e,t)},dke=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ore(10),pke=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const s=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?dke:t.type==="callback"?t.queueNotification:Ore(t.timeout),u=()=>{o=!1,a&&(a=!1,s.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const f=()=>i&&c(),h=n.subscribe(f);return s.add(c),()=>{h(),s.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[hke]),a=!i,a&&(o||(o=!0,l(u))),n.dispatch(c)}finally{i=!0}}})},vke=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new Tre(t);return n&&i.push(pke(typeof n=="object"?n:void 0)),i},gke=!0;function mke(t){const e=fke(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let s;if(typeof r=="function")s=r;else if(d6(r))s=BCe(r);else throw new Error(No(1));let l;typeof n=="function"?l=n(e):l=e();let u=aC;i&&(u=uke({trace:!gke,...typeof i=="object"&&i}));const c=$Ce(...l),f=vke(c);let h=typeof o=="function"?o(f):f();const d=u(...h);return yre(s,a,d)}function Ire(t){const e={},r=[];let n;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(No(28));if(s in e)throw new Error(No(29));return e[s]=o,i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function yke(t){return typeof t=="function"}function wke(t,e){let[r,n,i]=Ire(e),a;if(yke(t))a=()=>Oj(t());else{const s=Oj(t);a=()=>s}function o(s=a(),l){let u=[r[l.type],...n.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,f)=>{if(f)if(Md(c)){const d=f(c,l);return d===void 0?c:d}else{if(Tf(c))return kre(c,h=>f(h,l));{const h=f(c,l);if(h===void 0){if(c===null)return c;throw new Error(No(9))}return h}}return c},s)}return o.getInitialState=a,o}var bke="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",xke=(t=21)=>{let e="",r=t;for(;r--;)e+=bke[Math.random()*64|0];return e},Ske=Symbol.for("rtk-slice-createasyncthunk");function Eke(t,e){return`${t}/${e}`}function _ke({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[Ske];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(No(11));typeof process<"u";const s=(typeof i.reducers=="function"?i.reducers(kke()):i.reducers)||{},l=Object.keys(s),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,b){const x=typeof w=="string"?w:w.type;if(!x)throw new Error(No(12));if(x in u.sliceCaseReducersByType)throw new Error(No(13));return u.sliceCaseReducersByType[x]=b,c},addMatcher(w,b){return u.sliceMatchers.push({matcher:w,reducer:b}),c},exposeAction(w,b){return u.actionCreators[w]=b,c},exposeCaseReducer(w,b){return u.sliceCaseReducersByName[w]=b,c}};l.forEach(w=>{const b=s[w],x={reducerName:w,type:Eke(a,w),createNotation:typeof i.reducers=="function"};Ake(b)?Oke(x,b,c,e):Mke(x,b,c)});function f(){const[w={},b=[],x=void 0]=typeof i.extraReducers=="function"?Ire(i.extraReducers):[i.extraReducers],S={...w,...u.sliceCaseReducersByType};return wke(i.initialState,E=>{for(let _ in S)E.addCase(_,S[_]);for(let _ of u.sliceMatchers)E.addMatcher(_.matcher,_.reducer);for(let _ of b)E.addMatcher(_.matcher,_.reducer);x&&E.addDefaultCase(x)})}const h=w=>w,d=new Map;let p;function v(w,b){return p||(p=f()),p(w,b)}function g(){return p||(p=f()),p.getInitialState()}function m(w,b=!1){function x(E){let _=E[w];return typeof _>"u"&&b&&(_=g()),_}function S(E=h){const _=Ij(d,b,{insert:()=>new WeakMap});return Ij(_,E,{insert:()=>{const k={};for(const[C,M]of Object.entries(i.selectors??{}))k[C]=Cke(M,E,g,b);return k}})}return{reducerPath:w,getSelectors:S,get selectors(){return S(x)},selectSlice:x}}const y={name:a,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...m(o),injectInto(w,{reducerPath:b,...x}={}){const S=b??o;return w.inject({reducerPath:S,reducer:v},x),{...y,...m(S,!0)}}};return y}}function Cke(t,e,r,n){function i(a,...o){let s=e(a);return typeof s>"u"&&n&&(s=r()),t(s,...o)}return i.unwrapped=t,i}var jM=_ke();function kke(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Mke({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Tke(n))throw new Error(No(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?Am(t,o):Am(t))}function Ake(t){return t._reducerDefinitionType==="asyncThunk"}function Tke(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Oke({type:t,reducerName:e},r,n,i){if(!i)throw new Error(No(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:l,settled:u,options:c}=r,f=i(t,a,c);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),s&&n.addCase(f.pending,s),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||VS,pending:s||VS,rejected:l||VS,settled:u||VS})}function VS(){}var Ike=(t,e)=>{if(typeof t!="function")throw new Error(No(32))},m6="listenerMiddleware",Dke=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=Am(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(No(21));return Ike(a),{predicate:i,type:e,effect:a}},Pke=Object.assign(t=>{const{type:e,predicate:r,effect:n}=Dke(t);return{id:xke(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(No(22))}}},{withTypes:()=>Pke}),Lke=Object.assign(Am(`${m6}/add`),{withTypes:()=>Lke});Am(`${m6}/removeAll`);var Rke=Object.assign(Am(`${m6}/remove`),{withTypes:()=>Rke});function No(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const Ad="true".trim()==="true",Nke=`SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,Fke=[{name:"Academy Award for Best Picture winners (2022-2024) with directors and award dates",query:`SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,results:{data:{head:{vars:["movie","movieLabel","director","directorLabel","awardDate"]},results:{bindings:[{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q104686893"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q7506788"},movieLabel:{"xml:lang":"en",type:"literal",value:"CODA"},directorLabel:{"xml:lang":"en",type:"literal",value:"Siân Héder"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2022-03-27T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746830"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Dan Kwan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746848"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Daniel Scheinert"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q108839994"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q25191"},movieLabel:{"xml:lang":"en",type:"literal",value:"Oppenheimer"},directorLabel:{"xml:lang":"en",type:"literal",value:"Christopher Nolan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2024-03-10T00:00:00Z"}}]}},error:null,summary:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Siân Héder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`}}],Bke={data:{head:{vars:["movie","movieLabel","director","directorLabel","awardDate"]},results:{bindings:[{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q104686893"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q7506788"},movieLabel:{"xml:lang":"en",type:"literal",value:"CODA"},directorLabel:{"xml:lang":"en",type:"literal",value:"Siân Héder"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2022-03-27T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746830"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Dan Kwan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q83808444"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q28746848"},movieLabel:{"xml:lang":"en",type:"literal",value:"Everything Everywhere All at Once"},directorLabel:{"xml:lang":"en",type:"literal",value:"Daniel Scheinert"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2023-01-01T00:00:00Z"}},{movie:{type:"uri",value:"http://www.wikidata.org/entity/Q108839994"},director:{type:"uri",value:"http://www.wikidata.org/entity/Q25191"},movieLabel:{"xml:lang":"en",type:"literal",value:"Oppenheimer"},directorLabel:{"xml:lang":"en",type:"literal",value:"Christopher Nolan"},awardDate:{datatype:"http://www.w3.org/2001/XMLSchema#dateTime",type:"literal",value:"2024-03-10T00:00:00Z"}}]}},error:null,summary:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Siân Héder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`},$ke=[{role:"user",content:"Can you tell me about interesting movies?"},{content:"I can help you create a SPARQL query to find interesting movies from Wikidata. Could you specify what makes a movie interesting for you? For example, are you interested in movies by a certain director, within a specific genre, or those that have won specific awards?",role:"assistant"},{role:"user",content:"Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award."},{content:`\`\`\`sparql
SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate
\`\`\`
This query fetches movies that won the Academy Award for Best Picture between 2022 and 2024, including each movie's director and the date when the award was won. It filters the awards by the given years and orders the results by the date when the award was received.`,role:"assistant"}],zke=[{role:"system",content:`You are a helpful chat assistant. This system will give you access to data in the WikiData Knowledge Graph, that contains encyclopedic data similar to Wikipedia, but in knowledge graph format using the RDF framework. 

If users ask questions that can be answered via WikiData, your job is not to directly answer their questions, but instead to help them write a SPARQL query to find that data. You can ask the user to clarify their questions if the questions are vague, open-ended, or subjective in nature. 

If you ever need to suggest data to the user, you should only provide recommendations that are directly accessible from Wikidata. Do not ask the user if they would like to proceed with generating the corresponding query unless absolutely necessary.

When you are ready to start building a query, respond with 'BUILD QUERY'. The system will walk you through a guided workflow to get the necessary entity and property IDs from WikiData.

Current date: Mon Jun 10 2024.`},{content:"Can you tell me about interesting movies?",role:"user"},{role:"assistant",content:"I can help you create a SPARQL query to find interesting movies from Wikidata. Could you specify what makes a movie interesting for you? For example, are you interested in movies by a certain director, within a specific genre, or those that have won specific awards?"},{content:"Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award.",role:"user"},{role:"assistant",content:"BUILD QUERY"},{content:`Your goal is to find the necessary entity and property IDs to construct a SPARQL query that answers the user's question. Do not respond with a trailing period. Do not assume you already know the correct entity and property IDs; you should search for them. Make sure to filter the IDs for the ones that are most relevant to the question. Respond in one of these ways:
- To fuzzy search for an entity, start the response with 'ENTITY SEARCH:', followed by an entity name you want to search for. The system will respond with possible entity resolutions in Wikidata. 
- To get all the properties for an entity, start the response with 'PROPERTIES SEARCH:', followed by the ID of the entity. The user will respond with all the properties associated with that entity.
- To find what entities are connected to the original entity via a property, start the response with 'ENTITY PROPERTY SEARCH:', followed by the entity ID then the property ID. Ex: 'ENTITY PROPERTY SEARCH: Q123 P456'
- Respond with 'STOP' if and only if you have searched for and successfully identified all necessary IDs from Wikidata to construct the query.`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Award for Best Picture"},{content:`ID: Q102427, label: Academy Award for Best Picture, description: annual award from the Academy of Motion Picture Arts and Sciences
ID: Q14943591, label: Academy Award for Best Picture (1980s), description: undefined
ID: Q14943588, label: Academy Award for Best Picture (1950s), description: undefined
ID: Q14943585, label: Academy Award for Best Picture (1930s), description: undefined
ID: Q14943586, label: Academy Award for Best Picture (1940s), description: undefined`,role:"system"},{role:"assistant",content:"PROPERTIES SEARCH: Q102427"},{content:`ID: P1346, label: winner, description: winner of a competition or similar event, not to be used for awards (instead use "award received" (P166) on awardee's item, possibly qualified with "for work" (P1686)) or for wars or battles
ID: P2910, label: icon, description: pictogram suitable to represent the item. For logos of a subject, use "logo image" (P154); for favicons, use "small logo or icon" (P8972)
ID: P1417, label: Encyclopædia Britannica Online ID, description: identifier for an article in the online version of Encyclopædia Britannica
ID: P8115, label: eligible recipient, description: party that is eligible to receive something, like an award, grant or prize
ID: P12086, label: WikiKids ID, description: identifier of the article on WikiKids
ID: P31, label: instance of, description: that class of which this subject is a particular example and member; different from P279 (subclass of); for example: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P6262, label: Fandom article ID, description: identifier of an article on Fandom (Wikia). Format: subdomain:Page_title (language-code.subdomain:Page_title for non-English wikis)
ID: P17, label: country, description: sovereign state that this item is in (not to be used for human beings)
ID: P2257, label: event interval, description: standard nominal interval between scheduled or regularly recurring events. Include unit of time, e.g. "year" (Q577). 1/(event frequency). time period of periodically occurring event
ID: P1424, label: topic's main template, description: the main template relating to a topic
ID: P2517, label: category for recipients of this award, description: link to Wikimedia category for recipients of this award
ID: P154, label: logo image, description: graphic mark or emblem commonly used by commercial enterprises, organizations and products
ID: P8408, label: KBpedia ID, description: identifier for the KBpedia knowledge graph, which provides consistent mappings across seven large-scale public knowledge bases including Wikidata, and is used to promote data interoperability and extraction of training sets for machine learning
ID: P1705, label: native label, description: label for the items in their official language (P37) or their original language (P364)
ID: P373, label: Commons category, description: name of the Wikimedia Commons category containing files related to this item (without the prefix "Category:")
ID: P910, label: topic's main category, description: main Wikimedia category
ID: P646, label: Freebase ID, description: identifier for a page in the Freebase database. Format: "/m/0" followed by 2 to 7 characters. For IDs starting with "/g/", use Google Knowledge Graph ID (P2671)
ID: P571, label: inception, description: time when an entity begins to exist; for date of official opening use P1619
ID: P856, label: official website, description: URL of the official page of an item (current or former). Usage: If a listed URL no longer points to the official website, do not remove it, but see the "Hijacked or dead websites" section of the Talk page
ID: P1027, label: conferred by, description: person or organization who grants an award, certification, grant, or role`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Award winner"},{content:"ID: Q976472, label: Sings Days of Wine and Roses, Moon River and Other Academy Award Winners, description: 1964 studio album by Frank Sinatra",role:"system"},{role:"assistant",content:"ENTITY SEARCH: Academy Awards"},{content:`ID: Q19020, label: Academy Awards, description: annual awards for cinematic achievements
ID: Q16913666, label: Academy Awards ceremony, description: annual event at which Academy Awards are presented
ID: Q83532676, label: Academy awards, description: scientific article published on 01 February 1968
ID: Q73105727, label: Academy Awards Database, description: database about Academy Award winners and nominées
ID: Q51954858, label: The animation Showcase - Best Of 2017, description: Best animated Short films, Oscars predictive screening for the 90th Academy Awards Ceremony.`,role:"system"},{role:"assistant",content:"PROPERTIES SEARCH: Q19020"},{content:`ID: P1296, label: Gran Enciclopèdia Catalana ID (former scheme), description: identifier for an item in the Gran Enciclopèdia Catalana. Replaced with "Gran Enciclopèdia Catalana ID (P12385)".
ID: P1368, label: National Library of Latvia ID, description: identifier assigned by the National Library of Latvia
ID: P1417, label: Encyclopædia Britannica Online ID, description: identifier for an article in the online version of Encyclopædia Britannica
ID: P345, label: IMDb ID, description: identifier for the IMDb [with prefix 'tt', 'nm', 'co', 'ev', 'ch' or 'ni']
ID: P2013, label: Facebook username, description: identifier for an official (preferably) Facebook person, product or organization page (everything that follows URL part 'https://www.facebook.com/')
ID: P2347, label: YSO ID, description: identifier for a concept in the General Finnish Ontology YSO
ID: P373, label: Commons category, description: name of the Wikimedia Commons category containing files related to this item (without the prefix "Category:")
ID: P2003, label: Instagram username, description: item's username on Instagram
ID: P527, label: has part(s), description: part of this subject; inverse property of "part of" (P361). See also "has parts of the class" (P2670).
ID: P279, label: subclass of, description: this item is a subclass (subset) of that item; all instances of this item are instances of that item; different from P31 (instance of), e.g.: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P1343, label: described by source, description: work where this item is described
ID: P910, label: topic's main category, description: main Wikimedia category
ID: P691, label: NL CR AUT ID, description: identifier in the Czech National Authority Database of National Library of the Czech Republic (NL CR)
ID: P269, label: IdRef ID, description: identifier for authority control in the French collaborative library catalog (see also P1025). Format: 8 digits followed by a digit or "X"
ID: P935, label: Commons gallery, description: name of the Wikimedia Commons gallery page(s) related to this item (is suitable to allow multiple links to more gallery pages)
ID: P646, label: Freebase ID, description: identifier for a page in the Freebase database. Format: "/m/0" followed by 2 to 7 characters. For IDs starting with "/g/", use Google Knowledge Graph ID (P2671)
ID: P571, label: inception, description: time when an entity begins to exist; for date of official opening use P1619
ID: P2163, label: FAST ID, description: authority control identifier in WorldCat's “FAST Linked Data” authority file
ID: P1889, label: different from, description: item that is different from another item, with which it may be confused
ID: P1407, label: MusicBrainz series ID, description: identifier for a series per the MusicBrainz open music encyclopedia
ID: P1424, label: topic's main template, description: the main template relating to a topic
ID: P2397, label: YouTube channel ID, description: ID of the YouTube channel of a person or organisation (not to be confused with the name of the channel) The ID can also be used for music.youtube.com IDs
ID: P2002, label: X username, description: this item's username on X (formerly Twitter); do not include the “@” symbol
ID: P2517, label: category for recipients of this award, description: link to Wikimedia category for recipients of this award
ID: P268, label: Bibliothèque nationale de France ID, description: identifier for the subject issued by BNF (Bibliothèque nationale de France). Format: 8 digits followed by a check-digit or letter, do not include the initial 'cb'.
ID: P856, label: official website, description: URL of the official page of an item (current or former). Usage: If a listed URL no longer points to the official website, do not remove it, but see the "Hijacked or dead websites" section of the Talk page
ID: P1027, label: conferred by, description: person or organization who grants an award, certification, grant, or role
ID: P349, label: NDL Authority ID, description: identifier for authority control per the National Diet Library of Japan
ID: P1225, label: U.S. National Archives Identifier, description: identifier for the United States National Archives and Records Administration's online catalog
ID: P1705, label: native label, description: label for the items in their official language (P37) or their original language (P364)
ID: P31, label: instance of, description: that class of which this subject is a particular example and member; different from P279 (subclass of); for example: K2 is an instance of mountain; volcano is a subclass of mountain (and an instance of volcanic landform)
ID: P159, label: headquarters location, description: city or town, where an organization's headquarters is or has been situated. Use P276 qualifier for specific building
ID: P244, label: Library of Congress authority ID, description: Library of Congress name authority (persons, families, corporate bodies, events, places, works and expressions) and subject authority identifier [Format: 1-2 specific letters followed by 8-10 digits (see regex). For manifestations, use P1144]
ID: P17, label: country, description: sovereign state that this item is in (not to be used for human beings)
ID: P227, label: GND ID, description: identifier from an international authority file of names, subjects, and organizations (please don't use type n = name, disambiguation) - Deutsche Nationalbibliothek
ID: P4013, label: Giphy username, description: this item's username on Giphy
ID: P12384, label: Letterboxd user ID, description: identifier for a user on Letterboxd
ID: P2910, label: icon, description: pictogram suitable to represent the item. For logos of a subject, use "logo image" (P154); for favicons, use "small logo or icon" (P8972)
ID: P9100, label: GitHub topic, description: GitHub topic for a repository or subject
ID: P12399, label: TheTVDB award ID, description: identifier for an award on the website TheTVDB.com
ID: P9629, label: Armeniapedia ID, description: identifier for a topic in the online encyclopedia Armeniapedia
ID: P6058, label: Larousse ID, description: identifier for a subject on the 'Encyclopédie Larousse'
ID: P6181, label: Disney A to Z ID, description: ID of article in online version of Disney A to Z
ID: P4342, label: Store norske leksikon ID, description: identifier of an article in the online encyclopedia snl.no
ID: P6449, label: Douban site name, description: domain name of Douban site written in Latin alphabet
ID: P6385, label: Krugosvet article, description: link to article of Russian-language online encyclopedia
ID: P10234, label: Der Spiegel topic ID, description: identifier for topics in the German news portal "Der Spiegel"
ID: P6760, label: Know Your Meme ID, description: identifier for a Know Your Meme article
ID: P10565, label: Encyclopedia of China (Third Edition) ID, description: identifier for an article in the online version of Encyclopedia of China (Third Edition)
ID: P8189, label: National Library of Israel J9U ID, description: identifier used by the National Library of Israel
ID: P4073, label: Fandom wiki ID, description: identifier of a topic's wiki, in Fandom.com
ID: P2924, label: Great Russian Encyclopedia Online ID (old version), description: identifier for an entry on old.bigenc.ru, the official site of the Great Russian Encyclopedia Online 2014–2017 (current version of bigenc.ru is P11514)
ID: P8309, label: Yle topic ID, description: identifier for topics in Finland's national broadcaster Yle's web services
ID: P4622, label: trophy awarded, description: trophy awarded at the end of a selection process or of a competition, usually to winners or finishers under the form of a cup, a medal, a diploma
ID: P3479, label: Omni topic ID, description: identifier for a topic, used by Omni and Aftonbladet
ID: P9545, label: Encyclopedia of China (Second Edition) ID, description: identifier for an article in the online version of Encyclopedia of China (Second Edition)
ID: P5337, label: Google News topics ID, description: identifier for a subject in the news on Google News
ID: P9084, label: ABC News topic ID, description: identifier of a topic of content on the Australian Broadcasting Corporation website
ID: P7982, label: Hrvatska enciklopedija ID, description: identifier for an article in the Croatian Encyclopedia (Hrvatska enciklopedija)
ID: P10045, label: Vokrug.tv show ID, description: identify for a creative work in Vokrug.tv
ID: P12385, label: Gran Enciclopèdia Catalana ID, description: identifier for an item in the Gran Enciclopèdia Catalana
ID: P5905, label: Comic Vine ID, description: identifier at the Comic Vine database of comic books, fictional characters, people, films and television series/episodes
ID: P8295, label: AustLit ID, description: identifier at AustLit
ID: P8313, label: Den Store Danske ID, description: identifier of an article in the online encyclopedia denstoredanske.lex.dk
ID: P8349, label: Proleksis enciklopedija ID, description: identifier for a topic in Proleksis enciklopedija
ID: P12596, label: museum-digital tag ID, description: numeric identifier for keywords used in the description of cultural heritage objects in Museum-Digital
ID: P10170, label: Channel One Russia show ID, description: identifier of TV program for Channel One Russia
ID: P9318, label: Ávvir topic ID, description: identifier of a topic in the Northern Sámi publication Ávvir
ID: P2581, label: BabelNet ID, description: ID in BabelNet encyclopedic dictionary
ID: P7305, label: Online PWN Encyclopedia ID, description: identifier for an entry in the online release of the Online PWN Encyclopedia
ID: P6219, label: TASS reference, description: background information on historical and current events, locations, biographies of famous people
ID: P8814, label: WordNet 3.1 Synset ID, description: Synset identifier in Princeton’s WordNet Version 3.1
ID: P3569, label: Cultureel Woordenboek ID, description: identifier for a concept in the Dutch Cultureel Woordenboek ('Cultural Dictionary')
ID: P6467, label: Hulu series ID, description: TV series identifier in Hulu
ID: P4515, label: Prisma ID, description: identifier for a film (movie) or person, in prisma.de
ID: P6200, label: BBC News topic ID, description: identifier for a topic on the BBC News website
ID: P7775, label: RationalWiki ID, description: identifier for an item at RationalWiki
ID: P3221, label: New York Times topic ID, description: identifier for a topic, at the New York Times' website
ID: P3417, label: Quora topic ID, description: identifier for a topic on Quora (English language version)
ID: P3509, label: Dagens Nyheter topic ID, description: identifier for a topic, used by the Swedish daily newspaper Dagens Nyheter
ID: P2888, label: exact match, description: URL used to link two items or properties, indicating a high degree of confidence that the concepts can be used interchangeably
ID: P5008, label: on focus list of Wikimedia project, description: property to indicate that an item is of particular interest for a Wikimedia project. This property does not add notability. Items should not be created with this property if they are not notable for Wikidata. See also P6104, P972, P2354.
ID: P5019, label: Brockhaus Enzyklopädie online ID, description: identifier for an article in the online version of Brockhaus Enzyklopädie
ID: P8408, label: KBpedia ID, description: identifier for the KBpedia knowledge graph, which provides consistent mappings across seven large-scale public knowledge bases including Wikidata, and is used to promote data interoperability and extraction of training sets for machine learning
ID: P11137, label: Reddit topic ID, description: identifier of a topic on Reddit
ID: P3222, label: NE.se ID, description: ID of article on the Swedish Nationalencyklopedin (NE.se) site
ID: P11408, label: Pixiv Encyclopedia ID, description: identifier for an article on Pixiv Encyclopedia
ID: P10916, label: Süddeutsche Zeitung topic ID, description: identifier for a topic at the Süddeutsche Zeitung newspaper website
ID: P5829, label: Television Academy Foundation show ID, description: identifier for a television show discussed on the Television Academy Foundation's The Interviews website
ID: P11196, label: Baidu Tieba name, description: name of a specific topic driven forum in Baidu Tieba
ID: P8687, label: social media followers, description: number of subscribers on a particular social media website (use as main statement only; see P3744 instead for qualifier). Qualify with "point in time" and property for account. For Twitter, use numeric id.
ID: P3553, label: Zhihu topic ID, description: numeric id of topics (tags) of questions on Zhihu, a Chinese question-and-answer website
ID: P3847, label: Open Library subject ID, description: identifier for a topic in the Open Library database
ID: P7502, label: Golden ID, description: ID page in Golden knowledge base
ID: P6081, label: RIA Novosti reference, description: background information on historical and current events, biographies of famous people`,role:"system"},{role:"assistant",content:"ENTITY SEARCH: director"},{content:`ID: Q2526255, label: film director, description: person who directs a film
ID: Q3455803, label: director, description: director of a creative work
ID: Q3387717, label: theatrical director, description: person overseeing the mounting of a theatre production
ID: Q1162163, label: director, description: person who leads a particular area of a company or organization
ID: Q2824523, label: board member, description: position in an organization`,role:"system"},{role:"assistant",content:"STOP"},{content:`You are an expert at generating SPARQL queries for the Wikidata Knowledge Graph from natural language. 
Entity IDs are prepended with 'wd' and property IDs are prepended with 'wdt'. 
Your task is to convert the natural language instruction into a SPARQL query.
The following are four examples in which I am showcasing a natural language instruction (NLI) and the converted SPARQL Query. 
  NLI: Who are creators of Apple and what are their birthdates?
  SPARQL Query:
    SELECT ?founder ?founderLabel ?birthdate
      WHERE {
        wd:Q312 wdt:P112 ?founder.   # Q312 represents Apple and P112 represents founder
        ?founder wdt:P569 ?birthdate. # P569 represents date of birth
        
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
    }
  NLI: Who are the current heads of state for all countries in the world? 
  SPARQL Query: 
    SELECT ?country ?countryLabel ?headOfState ?headOfStateLabel 
      WHERE { 
        ?country wdt:P31 wd:Q6256;     # Instance of: country 
        p:P35 ?statement.    # has head of government statement 
        ?statement ps:P35 ?headOfState;   # head of government property 
        pq:P580 ?startDate.   # start date of the term 
        FILTER NOT EXISTS { ?statement pq:P582 ?endDate }  # Ensure current head of state 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
      ORDER BY ?countryLabel 
  NLI: What are the top five tallest mountains in the world and their respective heights? 
  SPARQL Query: 
    SELECT ?mountain ?mountainLabel ?height 
      WHERE { 
        ?mountain wdt:P31 wd:Q8502;         # Instance of: mountain 
        wdt:P2044 ?height.       # Height property 
        FILTER (?height >= 8000)           # Minimum height of 8000 meters 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
    ORDER BY DESC(?height) 
    LIMIT 5 
  NLI: Which symphonies were composed by Ludwig van Beethoven? 
  SPARQL Query: 
    SELECT ?composition (SAMPLE(?compositionLabel) as ?compositionLabel) 
      WHERE { 
        ?composition wdt:P31 wd:Q105543609;         # Instance of: Beethoven's symphonies 
        wdt:P86 wd:Q255;               # Composer: Ludwig van Beethoven 
        rdfs:label ?compositionLabel. 
        FILTER(CONTAINS(LCASE(?compositionLabel), "symphony")) 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      }  
    GROUP BY ?composition 
  Start the SPARQL query with \`\`\`sparql and end the query with \`\`\`. After you generate a SPARQL query, you briefly explain, as concisely as possible, to the user why the query addresses their original question. Keep your explanation as short as possible and only further explain when asked. Now construct a query that answers the user's question: Between 2022 and 2024, which movies won the Academy Award for Best Picture? Also tell me who was the movie director, and when it won the award.`,role:"system"},{role:"assistant",content:`\`\`\`sparql
SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate
\`\`\`
This query fetches movies that won the Academy Award for Best Picture between 2022 and 2024, including each movie's director and the date when the award was won. It filters the awards by the given years and orders the results by the date when the award was received.`},{content:`Respond with a brief name for this query. If you generated this query, it can just be the question that the user asked.
      SELECT ?movie ?movieLabel ?director ?directorLabel ?awardDate
WHERE {
  ?movie p:P166 ?statement. # P166 is the property for 'award received'
  ?statement ps:P166 wd:Q102427; # Q102427 represents 'Academy Award for Best Picture'
            pq:P585 ?awardDate. # P585 is the property for 'point in time'
  ?movie wdt:P57 ?director. # P57 is the property for 'director'
  
  FILTER(YEAR(?awardDate) >= 2022 && YEAR(?awardDate) <= 2024)
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
ORDER BY ?awardDate`,role:"system"},{role:"assistant",content:"Academy Award for Best Picture winners (2022-2024) with directors and award dates"},{content:`These are the JSON results from the last query. Respond with a brief summary of the results.
      {
  "head": {
    "vars": [
      "movie",
      "movieLabel",
      "director",
      "directorLabel",
      "awardDate"
    ]
  },
  "results": {
    "bindings": [
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q104686893"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q7506788"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "CODA"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Siân Héder"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2022-03-27T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q83808444"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q28746830"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Everything Everywhere All at Once"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Dan Kwan"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2023-01-01T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q83808444"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q28746848"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Everything Everywhere All at Once"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Daniel Scheinert"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2023-01-01T00:00:00Z"
        }
      },
      {
        "movie": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q108839994"
        },
        "director": {
          "type": "uri",
          "value": "http://www.wikidata.org/entity/Q25191"
        },
        "movieLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Oppenheimer"
        },
        "directorLabel": {
          "xml:lang": "en",
          "type": "literal",
          "value": "Christopher Nolan"
        },
        "awardDate": {
          "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
          "type": "literal",
          "value": "2024-03-10T00:00:00Z"
        }
      }
    ]
  }
}`,role:"system"},{role:"assistant",content:`The Academy Award for Best Picture between 2022 and 2024 was won by:

1. "CODA" directed by Siân Héder, which won the award on March 27, 2022.
2. "Everything Everywhere All at Once" with directors Dan Kwan and Daniel Scheinert, both awarded on January 1, 2023. It's listed twice because there are two directors.
3. "Oppenheimer" directed by Christopher Nolan, which won the award on March 10, 2024.`}],jke={fullChatHistory:Ad?zke:[],showFullChatHistory:!0,simpleChatHistory:Ad?$ke:[]},Gke=jM({name:"chatHistorySlice",initialState:jke,reducers:{setFullChatHistory:(t,e)=>{t.fullChatHistory=e.payload},pushSimpleChatHistory:(t,e)=>{t.simpleChatHistory.push(e.payload)},toggleShowFullChatHistory:t=>{t.showFullChatHistory=!t.showFullChatHistory}}}),{reducer:Uke,actions:{setFullChatHistory:Wke,pushSimpleChatHistory:Dj,toggleShowFullChatHistory:Vke}}=Gke,Hke={queryValue:Ad?Nke:""},Xke=jM({name:"queryValueSlice",initialState:Hke,reducers:{setQueryValue:(t,e)=>{t.queryValue=e.payload}}}),{reducer:Yke,actions:{setQueryValue:uC}}=Xke,qke={results:Ad?Bke:null},Kke=jM({name:"resultsSlice",initialState:qke,reducers:{setResults:(t,e)=>{t.results=e.payload}}}),{reducer:Qke,actions:{setResults:Kg}}=Kke,Zke={queryHistory:Ad?Fke:[]},Jke=jM({name:"queryHistorySlice",initialState:Zke,reducers:{pushQueryHistory:(t,e)=>{var r;if("data"in e.payload)t.queryHistory.push({name:e.payload.name,query:e.payload.query,results:{data:((r=e.payload)==null?void 0:r.data)||null,error:null,summary:e.payload.summary}});else if("error"in e.payload)t.queryHistory.push({name:e.payload.name,query:e.payload.query,results:{data:null,error:e.payload.error,summary:e.payload.summary}});else throw Error("Unknown action.payload: "+e.payload)}}}),{reducer:eMe,actions:{pushQueryHistory:HS}}=Jke,tMe=mke({reducer:{chatHistory:Uke,queryHistory:eMe,queryValue:Yke,results:Qke}}),Eb=LCe.withTypes(),yf=ECe.withTypes();var uy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tm=typeof window>"u"||"Deno"in window;function Xs(){}function rMe(t,e){return typeof t=="function"?t(e):t}function L5(t){return typeof t=="number"&&t>=0&&t!==1/0}function Dre(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Pj(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:s}=t;if(o){if(n){if(e.queryHash!==y6(o,e.options))return!1}else if(!uw(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||typeof i<"u"&&i!==e.state.fetchStatus||a&&!a(e))}function Lj(t,e){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(Sv(e.options.mutationKey)!==Sv(a))return!1}else if(!uw(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function y6(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sv)(t)}function Sv(t){return JSON.stringify(t,(e,r)=>R5(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function uw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!uw(t[r],e[r])):!1}function Pre(t,e){if(t===e)return t;const r=Rj(t)&&Rj(e);if(r||R5(t)&&R5(e)){const n=r?t:Object.keys(t),i=n.length,a=r?e:Object.keys(e),o=a.length,s=r?[]:{};let l=0;for(let u=0;u<o;u++){const c=r?u:a[u];!r&&t[c]===void 0&&e[c]===void 0&&n.includes(c)?(s[c]=void 0,l++):(s[c]=Pre(t[c],e[c]),s[c]===t[c]&&t[c]!==void 0&&l++)}return i===o&&l===i?t:s}return e}function cC(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Rj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function R5(t){if(!Nj(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!Nj(r)||!r.hasOwnProperty("isPrototypeOf"))}function Nj(t){return Object.prototype.toString.call(t)==="[object Object]"}function nMe(t){return new Promise(e=>{setTimeout(e,t)})}function N5(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Pre(t,e):e}function iMe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function aMe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Wp,Rh,Y0,oq,oMe=(oq=class extends uy{constructor(){super();Kt(this,Wp,void 0);Kt(this,Rh,void 0);Kt(this,Y0,void 0);Ft(this,Y0,e=>{if(!Tm&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ce(this,Rh)||this.setEventListener(ce(this,Y0))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,Rh))==null||e.call(this),Ft(this,Rh,void 0))}setEventListener(e){var r;Ft(this,Y0,e),(r=ce(this,Rh))==null||r.call(this),Ft(this,Rh,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ce(this,Wp)!==e&&(Ft(this,Wp,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof ce(this,Wp)=="boolean"?ce(this,Wp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wp=new WeakMap,Rh=new WeakMap,Y0=new WeakMap,oq),fC=new oMe,q0,Nh,K0,sq,sMe=(sq=class extends uy{constructor(){super();Kt(this,q0,!0);Kt(this,Nh,void 0);Kt(this,K0,void 0);Ft(this,K0,e=>{if(!Tm&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ce(this,Nh)||this.setEventListener(ce(this,K0))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,Nh))==null||e.call(this),Ft(this,Nh,void 0))}setEventListener(e){var r;Ft(this,K0,e),(r=ce(this,Nh))==null||r.call(this),Ft(this,Nh,e(this.setOnline.bind(this)))}setOnline(e){ce(this,q0)!==e&&(Ft(this,q0,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ce(this,q0)}},q0=new WeakMap,Nh=new WeakMap,K0=new WeakMap,sq),hC=new sMe;function lMe(t){return Math.min(1e3*2**t,3e4)}function GM(t){return(t??"online")==="online"?hC.isOnline():!0}var Lre=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function HO(t){return t instanceof Lre}function Rre(t){let e=!1,r=0,n=!1,i,a,o;const s=new Promise((g,m)=>{a=g,o=m}),l=g=>{var m;n||(d(new Lre(g)),(m=t.abort)==null||m.call(t))},u=()=>{e=!0},c=()=>{e=!1},f=()=>!fC.isFocused()||t.networkMode!=="always"&&!hC.isOnline(),h=g=>{var m;n||(n=!0,(m=t.onSuccess)==null||m.call(t,g),i==null||i(),a(g))},d=g=>{var m;n||(n=!0,(m=t.onError)==null||m.call(t,g),i==null||i(),o(g))},p=()=>new Promise(g=>{var m;i=y=>{const w=n||!f();return w&&g(y),w},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(n)return;let g;try{g=t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(h).catch(m=>{var S;if(n)return;const y=t.retry??(Tm?0:3),w=t.retryDelay??lMe,b=typeof w=="function"?w(r,m):w,x=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,m);if(e||!x){d(m);return}r++,(S=t.onFail)==null||S.call(t,r,m),nMe(b).then(()=>{if(f())return p()}).then(()=>{e?d(m):v()})})};return GM(t.networkMode)?v():p().then(v),{promise:s,cancel:l,continue:()=>(i==null?void 0:i())?s:Promise.resolve(),cancelRetry:u,continueRetry:c}}function uMe(){let t=[],e=0,r=h=>{h()},n=h=>{h()},i=h=>setTimeout(h,0);const a=h=>{i=h},o=h=>{let d;e++;try{d=h()}finally{e--,e||u()}return d},s=h=>{e?t.push(h):i(()=>{r(h)})},l=h=>(...d)=>{s(()=>{h(...d)})},u=()=>{const h=t;t=[],h.length&&i(()=>{n(()=>{h.forEach(d=>{r(d)})})})};return{batch:o,batchCalls:l,schedule:s,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:a}}var Ui=uMe(),Vp,lq,Nre=(lq=class{constructor(){Kt(this,Vp,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),L5(this.gcTime)&&Ft(this,Vp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Tm?1/0:5*60*1e3))}clearGcTimeout(){ce(this,Vp)&&(clearTimeout(ce(this,Vp)),Ft(this,Vp,void 0))}},Vp=new WeakMap,lq),Q0,Z0,Ws,Fh,Vs,ta,Ww,Hp,J0,O_,Pl,ef,uq,cMe=(uq=class extends Nre{constructor(e){super();Kt(this,J0);Kt(this,Pl);Kt(this,Q0,void 0);Kt(this,Z0,void 0);Kt(this,Ws,void 0);Kt(this,Fh,void 0);Kt(this,Vs,void 0);Kt(this,ta,void 0);Kt(this,Ww,void 0);Kt(this,Hp,void 0);Ft(this,Hp,!1),Ft(this,Ww,e.defaultOptions),Tr(this,J0,O_).call(this,e.options),Ft(this,ta,[]),Ft(this,Ws,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ft(this,Q0,e.state||fMe(this.options)),this.state=ce(this,Q0),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!ce(this,ta).length&&this.state.fetchStatus==="idle"&&ce(this,Ws).remove(this)}setData(e,r){const n=N5(this.state.data,e,this.options);return Tr(this,Pl,ef).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Tr(this,Pl,ef).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n;const r=ce(this,Fh);return(n=ce(this,Vs))==null||n.cancel(e),r?r.then(Xs).catch(Xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ce(this,Q0))}isActive(){return ce(this,ta).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||ce(this,ta).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Dre(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=ce(this,ta).find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=ce(this,Vs))==null||r.continue()}onOnline(){var r;const e=ce(this,ta).find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=ce(this,Vs))==null||r.continue()}addObserver(e){ce(this,ta).includes(e)||(ce(this,ta).push(e),this.clearGcTimeout(),ce(this,Ws).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){ce(this,ta).includes(e)&&(Ft(this,ta,ce(this,ta).filter(r=>r!==e)),ce(this,ta).length||(ce(this,Vs)&&(ce(this,Hp)?ce(this,Vs).cancel({revert:!0}):ce(this,Vs).cancelRetry()),this.scheduleGc()),ce(this,Ws).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return ce(this,ta).length}invalidate(){this.state.isInvalidated||Tr(this,Pl,ef).call(this,{type:"invalidate"})}fetch(e,r){var u,c,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ce(this,Fh))return(u=ce(this,Vs))==null||u.continueRetry(),ce(this,Fh)}if(e&&Tr(this,J0,O_).call(this,e),!this.options.queryFn){const d=ce(this,ta).find(p=>p.options.queryFn);d&&Tr(this,J0,O_).call(this,d.options)}const n=new AbortController,i={queryKey:this.queryKey,meta:this.meta},a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ft(this,Hp,!0),n.signal)})};a(i);const o=()=>this.options.queryFn?(Ft(this,Hp,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),s={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(s),(c=this.options.behavior)==null||c.onFetch(s,this),Ft(this,Z0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=s.fetchOptions)==null?void 0:f.meta))&&Tr(this,Pl,ef).call(this,{type:"fetch",meta:(h=s.fetchOptions)==null?void 0:h.meta});const l=d=>{var p,v,g,m;HO(d)&&d.silent||Tr(this,Pl,ef).call(this,{type:"error",error:d}),HO(d)||((v=(p=ce(this,Ws).config).onError)==null||v.call(p,d,this),(m=(g=ce(this,Ws).config).onSettled)==null||m.call(g,this.state.data,d,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Ft(this,Vs,Rre({fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var p,v,g,m;if(typeof d>"u"){l(new Error(`${this.queryHash} data is undefined`));return}this.setData(d),(v=(p=ce(this,Ws).config).onSuccess)==null||v.call(p,d,this),(m=(g=ce(this,Ws).config).onSettled)==null||m.call(g,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(d,p)=>{Tr(this,Pl,ef).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{Tr(this,Pl,ef).call(this,{type:"pause"})},onContinue:()=>{Tr(this,Pl,ef).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode})),Ft(this,Fh,ce(this,Vs).promise),ce(this,Fh)}},Q0=new WeakMap,Z0=new WeakMap,Ws=new WeakMap,Fh=new WeakMap,Vs=new WeakMap,ta=new WeakMap,Ww=new WeakMap,Hp=new WeakMap,J0=new WeakSet,O_=function(e){this.options={...ce(this,Ww),...e},this.updateGcTime(this.options.gcTime)},Pl=new WeakSet,ef=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:GM(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return HO(i)&&i.revert&&ce(this,Z0)?{...ce(this,Z0),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Ui.batch(()=>{ce(this,ta).forEach(n=>{n.onQueryUpdate()}),ce(this,Ws).notify({query:this,type:"updated",action:e})})},uq);function fMe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var $u,cq,hMe=(cq=class extends uy{constructor(e={}){super();Kt(this,$u,void 0);this.config=e,Ft(this,$u,new Map)}build(e,r,n){const i=r.queryKey,a=r.queryHash??y6(i,r);let o=this.get(a);return o||(o=new cMe({cache:this,queryKey:i,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ce(this,$u).has(e.queryHash)||(ce(this,$u).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=ce(this,$u).get(e.queryHash);r&&(e.destroy(),r===e&&ce(this,$u).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ui.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ce(this,$u).get(e)}getAll(){return[...ce(this,$u).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Pj(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Pj(e,n)):r}notify(e){Ui.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Ui.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ui.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$u=new WeakMap,cq),zu,Vw,Ko,em,ju,bh,fq,dMe=(fq=class extends Nre{constructor(e){super();Kt(this,ju);Kt(this,zu,void 0);Kt(this,Vw,void 0);Kt(this,Ko,void 0);Kt(this,em,void 0);this.mutationId=e.mutationId,Ft(this,Vw,e.defaultOptions),Ft(this,Ko,e.mutationCache),Ft(this,zu,[]),this.state=e.state||Fre(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...ce(this,Vw),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ce(this,zu).includes(e)||(ce(this,zu).push(e),this.clearGcTimeout(),ce(this,Ko).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ft(this,zu,ce(this,zu).filter(r=>r!==e)),this.scheduleGc(),ce(this,Ko).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ce(this,zu).length||(this.state.status==="pending"?this.scheduleGc():ce(this,Ko).remove(this))}continue(){var e;return((e=ce(this,em))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E;const r=()=>(Ft(this,em,Rre({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,k)=>{Tr(this,ju,bh).call(this,{type:"failed",failureCount:_,error:k})},onPause:()=>{Tr(this,ju,bh).call(this,{type:"pause"})},onContinue:()=>{Tr(this,ju,bh).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),ce(this,em).promise),n=this.state.status==="pending";try{if(!n){Tr(this,ju,bh).call(this,{type:"pending",variables:e}),await((a=(i=ce(this,Ko).config).onMutate)==null?void 0:a.call(i,e,this));const k=await((s=(o=this.options).onMutate)==null?void 0:s.call(o,e));k!==this.state.context&&Tr(this,ju,bh).call(this,{type:"pending",context:k,variables:e})}const _=await r();return await((u=(l=ce(this,Ko).config).onSuccess)==null?void 0:u.call(l,_,e,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,_,e,this.state.context)),await((d=(h=ce(this,Ko).config).onSettled)==null?void 0:d.call(h,_,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,_,null,e,this.state.context)),Tr(this,ju,bh).call(this,{type:"success",data:_}),_}catch(_){try{throw await((m=(g=ce(this,Ko).config).onError)==null?void 0:m.call(g,_,e,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,_,e,this.state.context)),await((x=(b=ce(this,Ko).config).onSettled)==null?void 0:x.call(b,void 0,_,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,_,e,this.state.context)),_}finally{Tr(this,ju,bh).call(this,{type:"error",error:_})}}}},zu=new WeakMap,Vw=new WeakMap,Ko=new WeakMap,em=new WeakMap,ju=new WeakSet,bh=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!GM(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ui.batch(()=>{ce(this,zu).forEach(n=>{n.onMutationUpdate(e)}),ce(this,Ko).notify({mutation:this,type:"updated",action:e})})},fq);function Fre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hs,Hw,Xp,hq,pMe=(hq=class extends uy{constructor(e={}){super();Kt(this,Hs,void 0);Kt(this,Hw,void 0);Kt(this,Xp,void 0);this.config=e,Ft(this,Hs,[]),Ft(this,Hw,0)}build(e,r,n){const i=new dMe({mutationCache:this,mutationId:++Zx(this,Hw)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){ce(this,Hs).push(e),this.notify({type:"added",mutation:e})}remove(e){Ft(this,Hs,ce(this,Hs).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){Ui.batch(()=>{ce(this,Hs).forEach(e=>{this.remove(e)})})}getAll(){return ce(this,Hs)}find(e){const r={exact:!0,...e};return ce(this,Hs).find(n=>Lj(r,n))}findAll(e={}){return ce(this,Hs).filter(r=>Lj(e,r))}notify(e){Ui.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return Ft(this,Xp,(ce(this,Xp)??Promise.resolve()).then(()=>{const e=ce(this,Hs).filter(r=>r.state.isPaused);return Ui.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(Xs)),Promise.resolve()))}).then(()=>{Ft(this,Xp,void 0)})),ce(this,Xp)}},Hs=new WeakMap,Hw=new WeakMap,Xp=new WeakMap,hq);function vMe(t){return{onFetch:(e,r)=>{const n=async()=>{var p,v,g,m,y;const i=e.options,a=(g=(v=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:v.fetchMore)==null?void 0:g.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],s=((y=e.state.data)==null?void 0:y.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},f=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(w,b,x)=>{if(u)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:e.queryKey,pageParam:b,direction:x?"backward":"forward",meta:e.options.meta};c(S);const E=await f(S),{maxPages:_}=e.options,k=x?aMe:iMe;return{pages:k(w.pages,E,_),pageParams:k(w.pageParams,b,_)}};let d;if(a&&o.length){const w=a==="backward",b=w?gMe:Fj,x={pages:o,pageParams:s},S=b(i,x);d=await h(x,S,w)}else{d=await h(l,s[0]??i.initialPageParam);const w=t??o.length;for(let b=1;b<w;b++){const x=Fj(i,d);d=await h(d,x)}}return d};e.options.persister?e.fetchFn=()=>{var i,a;return(a=(i=e.options).persister)==null?void 0:a.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function Fj(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function gMe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var Bi,Bh,$h,tm,rm,zh,nm,im,dq,mMe=(dq=class{constructor(t={}){Kt(this,Bi,void 0);Kt(this,Bh,void 0);Kt(this,$h,void 0);Kt(this,tm,void 0);Kt(this,rm,void 0);Kt(this,zh,void 0);Kt(this,nm,void 0);Kt(this,im,void 0);Ft(this,Bi,t.queryCache||new hMe),Ft(this,Bh,t.mutationCache||new pMe),Ft(this,$h,t.defaultOptions||{}),Ft(this,tm,new Map),Ft(this,rm,new Map),Ft(this,zh,0)}mount(){Zx(this,zh)._++,ce(this,zh)===1&&(Ft(this,nm,fC.subscribe(()=>{fC.isFocused()&&(this.resumePausedMutations(),ce(this,Bi).onFocus())})),Ft(this,im,hC.subscribe(()=>{hC.isOnline()&&(this.resumePausedMutations(),ce(this,Bi).onOnline())})))}unmount(){var t,e;Zx(this,zh)._--,ce(this,zh)===0&&((t=ce(this,nm))==null||t.call(this),Ft(this,nm,void 0),(e=ce(this,im))==null||e.call(this),Ft(this,im,void 0))}isFetching(t){return ce(this,Bi).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ce(this,Bh).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=ce(this,Bi).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=ce(this,Bi).find({queryKey:t}),i=n==null?void 0:n.state.data,a=rMe(e,i);if(typeof a>"u")return;const o=this.defaultQueryOptions({queryKey:t});return ce(this,Bi).build(this,o).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Ui.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=ce(this,Bi).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=ce(this,Bi);Ui.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=ce(this,Bi),n={type:"active",...t};return Ui.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Ui.batch(()=>ce(this,Bi).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Xs).catch(Xs)}invalidateQueries(t={},e={}){return Ui.batch(()=>{if(ce(this,Bi).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Ui.batch(()=>ce(this,Bi).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Xs)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Xs)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=ce(this,Bi).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xs).catch(Xs)}fetchInfiniteQuery(t){return t.behavior=vMe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xs).catch(Xs)}resumePausedMutations(){return ce(this,Bh).resumePausedMutations()}getQueryCache(){return ce(this,Bi)}getMutationCache(){return ce(this,Bh)}getDefaultOptions(){return ce(this,$h)}setDefaultOptions(t){Ft(this,$h,t)}setQueryDefaults(t,e){ce(this,tm).set(Sv(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ce(this,tm).values()];let r={};return e.forEach(n=>{uw(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){ce(this,rm).set(Sv(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ce(this,rm).values()];let r={};return e.forEach(n=>{uw(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...ce(this,$h).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=y6(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ce(this,$h).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ce(this,Bi).clear(),ce(this,Bh).clear()}},Bi=new WeakMap,Bh=new WeakMap,$h=new WeakMap,tm=new WeakMap,rm=new WeakMap,zh=new WeakMap,nm=new WeakMap,im=new WeakMap,dq),_o,On,Xw,Za,Yp,am,Gu,Yw,om,sm,qp,Kp,jh,lm,Qp,F1,qw,F5,Kw,B5,Qw,$5,Zw,z5,Jw,j5,eb,G5,tb,U5,Fk,Bre,pq,yMe=(pq=class extends uy{constructor(e,r){super();Kt(this,Qp);Kt(this,qw);Kt(this,Kw);Kt(this,Qw);Kt(this,Zw);Kt(this,Jw);Kt(this,eb);Kt(this,tb);Kt(this,Fk);Kt(this,_o,void 0);Kt(this,On,void 0);Kt(this,Xw,void 0);Kt(this,Za,void 0);Kt(this,Yp,void 0);Kt(this,am,void 0);Kt(this,Gu,void 0);Kt(this,Yw,void 0);Kt(this,om,void 0);Kt(this,sm,void 0);Kt(this,qp,void 0);Kt(this,Kp,void 0);Kt(this,jh,void 0);Kt(this,lm,new Set);this.options=r,Ft(this,_o,e),Ft(this,Gu,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ce(this,On).addObserver(this),Bj(ce(this,On),this.options)?Tr(this,Qp,F1).call(this):this.updateResult(),Tr(this,Zw,z5).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return W5(ce(this,On),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return W5(ce(this,On),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Tr(this,Jw,j5).call(this),Tr(this,eb,G5).call(this),ce(this,On).removeObserver(this)}setOptions(e,r){const n=this.options,i=ce(this,On);if(this.options=ce(this,_o).defaultQueryOptions(e),cC(n,this.options)||ce(this,_o).getQueryCache().notify({type:"observerOptionsUpdated",query:ce(this,On),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Tr(this,tb,U5).call(this);const a=this.hasListeners();a&&$j(ce(this,On),i,this.options,n)&&Tr(this,Qp,F1).call(this),this.updateResult(r),a&&(ce(this,On)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Tr(this,qw,F5).call(this);const o=Tr(this,Kw,B5).call(this);a&&(ce(this,On)!==i||this.options.enabled!==n.enabled||o!==ce(this,jh))&&Tr(this,Qw,$5).call(this,o)}getOptimisticResult(e){const r=ce(this,_o).getQueryCache().build(ce(this,_o),e),n=this.createResult(r,e);return bMe(this,n)&&(Ft(this,Za,n),Ft(this,am,this.options),Ft(this,Yp,ce(this,On).state)),n}getCurrentResult(){return ce(this,Za)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(ce(this,lm).add(n),e[n])})}),r}getCurrentQuery(){return ce(this,On)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=ce(this,_o).defaultQueryOptions(e),n=ce(this,_o).getQueryCache().build(ce(this,_o),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Tr(this,Qp,F1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ce(this,Za)))}createResult(e,r){var S;const n=ce(this,On),i=this.options,a=ce(this,Za),o=ce(this,Yp),s=ce(this,am),u=e!==n?e.state:ce(this,Xw),{state:c}=e;let{error:f,errorUpdatedAt:h,fetchStatus:d,status:p}=c,v=!1,g;if(r._optimisticResults){const E=this.hasListeners(),_=!E&&Bj(e,r),k=E&&$j(e,n,r,i);(_||k)&&(d=GM(e.options.networkMode)?"fetching":"paused",c.dataUpdatedAt||(p="pending")),r._optimisticResults==="isRestoring"&&(d="idle")}if(r.select&&typeof c.data<"u")if(a&&c.data===(o==null?void 0:o.data)&&r.select===ce(this,Yw))g=ce(this,om);else try{Ft(this,Yw,r.select),g=r.select(c.data),g=N5(a==null?void 0:a.data,g,r),Ft(this,om,g),Ft(this,Gu,null)}catch(E){Ft(this,Gu,E)}else g=c.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&p==="pending"){let E;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(s==null?void 0:s.placeholderData))E=a.data;else if(E=typeof r.placeholderData=="function"?r.placeholderData((S=ce(this,sm))==null?void 0:S.state.data,ce(this,sm)):r.placeholderData,r.select&&typeof E<"u")try{E=r.select(E),Ft(this,Gu,null)}catch(_){Ft(this,Gu,_)}typeof E<"u"&&(p="success",g=N5(a==null?void 0:a.data,E,r),v=!0)}ce(this,Gu)&&(f=ce(this,Gu),g=ce(this,om),h=Date.now(),p="error");const m=d==="fetching",y=p==="pending",w=p==="error",b=y&&m;return{status:p,fetchStatus:d,isPending:y,isSuccess:p==="success",isError:w,isInitialLoading:b,isLoading:b,data:g,dataUpdatedAt:c.dataUpdatedAt,error:f,errorUpdatedAt:h,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:w&&c.dataUpdatedAt===0,isPaused:d==="paused",isPlaceholderData:v,isRefetchError:w&&c.dataUpdatedAt!==0,isStale:w6(e,r),refetch:this.refetch}}updateResult(e){const r=ce(this,Za),n=this.createResult(ce(this,On),this.options);if(Ft(this,Yp,ce(this,On).state),Ft(this,am,this.options),ce(this,Yp).data!==void 0&&Ft(this,sm,ce(this,On)),cC(n,r))return;Ft(this,Za,n);const i={},a=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,s=typeof o=="function"?o():o;if(s==="all"||!s&&!ce(this,lm).size)return!0;const l=new Set(s??ce(this,lm));return this.options.throwOnError&&l.add("error"),Object.keys(ce(this,Za)).some(u=>{const c=u;return ce(this,Za)[c]!==r[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&a()&&(i.listeners=!0),Tr(this,Fk,Bre).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Tr(this,Zw,z5).call(this)}},_o=new WeakMap,On=new WeakMap,Xw=new WeakMap,Za=new WeakMap,Yp=new WeakMap,am=new WeakMap,Gu=new WeakMap,Yw=new WeakMap,om=new WeakMap,sm=new WeakMap,qp=new WeakMap,Kp=new WeakMap,jh=new WeakMap,lm=new WeakMap,Qp=new WeakSet,F1=function(e){Tr(this,tb,U5).call(this);let r=ce(this,On).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Xs)),r},qw=new WeakSet,F5=function(){if(Tr(this,Jw,j5).call(this),Tm||ce(this,Za).isStale||!L5(this.options.staleTime))return;const r=Dre(ce(this,Za).dataUpdatedAt,this.options.staleTime)+1;Ft(this,qp,setTimeout(()=>{ce(this,Za).isStale||this.updateResult()},r))},Kw=new WeakSet,B5=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ce(this,On)):this.options.refetchInterval)??!1},Qw=new WeakSet,$5=function(e){Tr(this,eb,G5).call(this),Ft(this,jh,e),!(Tm||this.options.enabled===!1||!L5(ce(this,jh))||ce(this,jh)===0)&&Ft(this,Kp,setInterval(()=>{(this.options.refetchIntervalInBackground||fC.isFocused())&&Tr(this,Qp,F1).call(this)},ce(this,jh)))},Zw=new WeakSet,z5=function(){Tr(this,qw,F5).call(this),Tr(this,Qw,$5).call(this,Tr(this,Kw,B5).call(this))},Jw=new WeakSet,j5=function(){ce(this,qp)&&(clearTimeout(ce(this,qp)),Ft(this,qp,void 0))},eb=new WeakSet,G5=function(){ce(this,Kp)&&(clearInterval(ce(this,Kp)),Ft(this,Kp,void 0))},tb=new WeakSet,U5=function(){const e=ce(this,_o).getQueryCache().build(ce(this,_o),this.options);if(e===ce(this,On))return;const r=ce(this,On);Ft(this,On,e),Ft(this,Xw,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Fk=new WeakSet,Bre=function(e){Ui.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(ce(this,Za))}),ce(this,_o).getQueryCache().notify({query:ce(this,On),type:"observerResultsUpdated"})})},pq);function wMe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Bj(t,e){return wMe(t,e)||t.state.dataUpdatedAt>0&&W5(t,e,e.refetchOnMount)}function W5(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&w6(t,e)}return!1}function $j(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&w6(t,r)}function w6(t,e){return t.isStaleByTime(e.staleTime)}function bMe(t,e){return!cC(t.getCurrentResult(),e)}var Gh,Uh,Qo,uf,um,I_,rb,V5,vq,xMe=(vq=class extends uy{constructor(r,n){super();Kt(this,um);Kt(this,rb);Kt(this,Gh,void 0);Kt(this,Uh,void 0);Kt(this,Qo,void 0);Kt(this,uf,void 0);Ft(this,Gh,r),this.setOptions(n),this.bindMethods(),Tr(this,um,I_).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const n=this.options;this.options=ce(this,Gh).defaultMutationOptions(r),cC(n,this.options)||ce(this,Gh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ce(this,Qo),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Sv(n.mutationKey)!==Sv(this.options.mutationKey)?this.reset():(i=ce(this,Qo))==null||i.setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ce(this,Qo))==null||r.removeObserver(this)}onMutationUpdate(r){Tr(this,um,I_).call(this),Tr(this,rb,V5).call(this,r)}getCurrentResult(){return ce(this,Uh)}reset(){var r;(r=ce(this,Qo))==null||r.removeObserver(this),Ft(this,Qo,void 0),Tr(this,um,I_).call(this),Tr(this,rb,V5).call(this)}mutate(r,n){var i;return Ft(this,uf,n),(i=ce(this,Qo))==null||i.removeObserver(this),Ft(this,Qo,ce(this,Gh).getMutationCache().build(ce(this,Gh),this.options)),ce(this,Qo).addObserver(this),ce(this,Qo).execute(r)}},Gh=new WeakMap,Uh=new WeakMap,Qo=new WeakMap,uf=new WeakMap,um=new WeakSet,I_=function(){var n;const r=((n=ce(this,Qo))==null?void 0:n.state)??Fre();Ft(this,Uh,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},rb=new WeakSet,V5=function(r){Ui.batch(()=>{var n,i,a,o,s,l,u,c;if(ce(this,uf)&&this.hasListeners()){const f=ce(this,Uh).variables,h=ce(this,Uh).context;(r==null?void 0:r.type)==="success"?((i=(n=ce(this,uf)).onSuccess)==null||i.call(n,r.data,f,h),(o=(a=ce(this,uf)).onSettled)==null||o.call(a,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((l=(s=ce(this,uf)).onError)==null||l.call(s,r.error,f,h),(c=(u=ce(this,uf)).onSettled)==null||c.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(ce(this,Uh))})})},vq),$re=oe.createContext(void 0),zre=t=>{const e=oe.useContext($re);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},SMe=({client:t,children:e})=>(oe.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Ne.jsx($re.Provider,{value:t,children:e})),jre=oe.createContext(!1),EMe=()=>oe.useContext(jre);jre.Provider;function _Me(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var CMe=oe.createContext(_Me()),kMe=()=>oe.useContext(CMe);function Gre(t,e){return typeof t=="function"?t(...e):!!t}var MMe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},AMe=t=>{oe.useEffect(()=>{t.clearReset()},[t])},TMe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&Gre(r,[t.error,n]),OMe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},IMe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,DMe=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function PMe(t,e,r){const n=zre(r),i=EMe(),a=kMe(),o=n.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",OMe(o),MMe(o,a),AMe(a);const[s]=oe.useState(()=>new e(n,o)),l=s.getOptimisticResult(o);if(oe.useSyncExternalStore(oe.useCallback(u=>{const c=i?()=>{}:s.subscribe(Ui.batchCalls(u));return s.updateResult(),c},[s,i]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),oe.useEffect(()=>{s.setOptions(o,{listeners:!1})},[o,s]),IMe(o,l))throw DMe(o,s,a);if(TMe({result:l,errorResetBoundary:a,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw l.error;return o.notifyOnChangeProps?l:s.trackResult(l)}function LMe(t,e){return PMe(t,yMe,e)}function Ure(t,e){const r=zre(e),[n]=oe.useState(()=>new xMe(r,t));oe.useEffect(()=>{n.setOptions(t)},[n,t]);const i=oe.useSyncExternalStore(oe.useCallback(o=>n.subscribe(Ui.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=oe.useCallback((o,s)=>{n.mutate(o,s).catch(RMe)},[n]);if(i.error&&Gre(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function RMe(){}async function b6(t){return t.ok?t.json():t.text().then(e=>{throw new Error(e)})}function x6(t){return fetch(`https://query.wikidata.org/sparql?query=${encodeURIComponent(t)}`,{headers:{Accept:"application/sparql-results+json"}}).then(b6)}async function zj(t,e,r){const n=await t.sendMessages([{content:`Respond with a brief name for this query. If you generated this query, it can just be the question that the user asked.
      ${e}`,role:"system"}]);if(!r)return{name:n,summary:""};const i=await t.sendMessages([{content:`These are the JSON results from the last query. Respond with a brief summary of the results.
      ${JSON.stringify(r,void 0,2)}`,role:"system"}]);return{name:n,summary:i}}const Qg="4.28.4";let jj=!1,h2,Wre,Vre,H5,Hre,Xre,Yre,qre,Kre;function NMe(t,e={auto:!1}){if(jj)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(h2)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${h2}'\``);jj=e.auto,h2=t.kind,Wre=t.fetch,t.Request,t.Response,t.Headers,Vre=t.FormData,t.Blob,H5=t.File,Hre=t.ReadableStream,Xre=t.getMultipartRequestOptions,Yre=t.getDefaultAgent,qre=t.fileFromPath,Kre=t.isFsReadStream}class FMe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function BMe({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,i,a;try{r=fetch,n=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:r,Request:n,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new FMe(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}h2||NMe(BMe(),{auto:!0});class cn extends Error{}class Va extends cn{constructor(e,r,n,i){super(`${Va.makeMessage(e,r,n)}`),this.status=e,this.headers=i;const a=r;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,r,n){const i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e)return new UM({cause:Y5(r)});const a=r==null?void 0:r.error;return e===400?new Qre(e,a,n,i):e===401?new Zre(e,a,n,i):e===403?new Jre(e,a,n,i):e===404?new ene(e,a,n,i):e===409?new tne(e,a,n,i):e===422?new rne(e,a,n,i):e===429?new nne(e,a,n,i):e>=500?new ine(e,a,n,i):new Va(e,a,n,i)}}class Ev extends Va{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class UM extends Va{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,r&&(this.cause=r)}}class S6 extends UM{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Qre extends Va{constructor(){super(...arguments),this.status=400}}class Zre extends Va{constructor(){super(...arguments),this.status=401}}class Jre extends Va{constructor(){super(...arguments),this.status=403}}class ene extends Va{constructor(){super(...arguments),this.status=404}}class tne extends Va{constructor(){super(...arguments),this.status=409}}class rne extends Va{constructor(){super(...arguments),this.status=422}}class nne extends Va{constructor(){super(...arguments),this.status=429}}class ine extends Va{}class Kh{constructor(e,r){this.iterator=e,this.controller=r}static fromSSEResponse(e,r){let n=!1;const i=new $Me;async function*a(){if(!e.body)throw r.abort(),new cn("Attempted to iterate over a response with no body");const s=new _v,l=Gj(e.body);for await(const u of l)for(const c of s.decode(u)){const f=i.decode(c);f&&(yield f)}for(const u of s.flush()){const c=i.decode(u);c&&(yield c)}}async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const l of a())if(!s){if(l.data.startsWith("[DONE]")){s=!0;continue}if(l.event===null){let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(u&&u.error)throw new Va(void 0,u.error,void 0,void 0);yield u}}s=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{s||r.abort()}}return new Kh(o,r)}static fromReadableStream(e,r){let n=!1;async function*i(){const o=new _v,s=Gj(e);for await(const l of s)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||r.abort()}}return new Kh(a,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),r.push(o)}return a.shift()}});return[new Kh(()=>i(e),this.controller),new Kh(()=>i(r),this.controller)]}toReadableStream(){const e=this;let r;const n=new TextEncoder;return new Hre({async start(){r=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await r.next();if(o)return i.close();const s=n.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=r.return)==null?void 0:i.call(r))}})}}class $Me{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=zMe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}class _v{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let r=this.decodeText(e);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];const n=_v.NEWLINE_CHARS.has(r[r.length-1]||"");let i=r.split(_v.NEWLINE_REGEXP);return i.length===1&&!n?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),n||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new cn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new cn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new cn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}_v.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);_v.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function zMe(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}function Gj(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const ane=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",jMe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&one(t),one=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",GMe=t=>jMe(t)||ane(t)||Kre(t);async function sne(t,e,r={}){var i;if(t=await t,ane(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new H5([a],e,r)}const n=await UMe(t);if(e||(e=VMe(t)??"unknown_file"),!r.type){const a=(i=n[0])==null?void 0:i.type;typeof a=="string"&&(r={...r,type:a})}return new H5(n,e,r)}async function UMe(t){var r;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(one(t))e.push(await t.arrayBuffer());else if(HMe(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(r=t==null?void 0:t.constructor)==null?void 0:r.name}; props: ${WMe(t)}`);return e}function WMe(t){return`[${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}function VMe(t){var e;return XO(t.name)||XO(t.filename)||((e=XO(t.path))==null?void 0:e.split(/[\\/]/).pop())}const XO=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},HMe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Uj=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",cw=async t=>{const e=await XMe(t.body);return Xre(e,t)},XMe=async t=>{const e=new Vre;return await Promise.all(Object.entries(t||{}).map(([r,n])=>X5(e,r,n))),e},X5=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(GMe(r)){const n=await sne(r);t.append(e,n)}else if(Array.isArray(r))await Promise.all(r.map(n=>X5(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,i])=>X5(t,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var D_={},YMe=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},qMe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},XS;async function lne(t){const{response:e}=t;if(t.options.stream)return F0("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Kh.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const a=await e.json();return F0("response",e.status,e.url,e.headers,a),a}const i=await e.text();return F0("response",e.status,e.url,e.headers,i),i}class WM extends Promise{constructor(e,r=lne){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=r}_thenUnwrap(e){return new WM(this.responsePromise,async r=>e(await this.parseResponse(r)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class KMe{constructor({baseURL:e,maxRetries:r=2,timeout:n=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=YO("maxRetries",r),this.timeout=YO("timeout",n),this.httpAgent=i,this.fetch=a??Wre}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...rAe(),...this.authHeaders(e)}}validateHeaders(e,r){}defaultIdempotencyKey(){return`stainless-node-retry-${oAe()}`}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>({method:e,path:r,...i})))}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var p;const{method:r,path:n,query:i,headers:a={}}=e,o=Uj(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(o),l=this.buildURL(n,i);"timeout"in e&&YO("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??Yre(l),f=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&f>(c.options.timeout??0)&&(c.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const h=this.buildHeaders({options:e,headers:a,contentLength:s});return{req:{method:r,...o&&{body:o},headers:h,...c&&{agent:c},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:r,contentLength:n}){const i={};n&&(i["content-length"]=n);const a=this.defaultHeaders(e);return Xj(i,a),Xj(i,r),Uj(e.body)&&h2!=="node"&&delete i["content-type"],this.validateHeaders(i,r),i}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(r=>[...r])):{...e}:{}}makeStatusError(e,r,n,i){return Va.generate(e,r,n,i)}request(e,r=null){return new WM(this.makeRequest(e,r))}async makeRequest(e,r){var c,f;const n=await e;r==null&&(r=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:i,url:a,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(i,{url:a,options:n}),F0("request",a,n,i.headers),(c=n.signal)!=null&&c.aborted)throw new Ev;const s=new AbortController,l=await this.fetchWithTimeout(a,i,o,s).catch(Y5);if(l instanceof Error){if((f=n.signal)!=null&&f.aborted)throw new Ev;if(r)return this.retryRequest(n,r);throw l.name==="AbortError"?new S6:new UM({cause:l})}const u=ZMe(l.headers);if(!l.ok){if(r&&this.shouldRetry(l)){const m=`retrying, ${r} attempts remaining`;return F0(`response (error; ${m})`,l.status,a,u),this.retryRequest(n,r,u)}const h=await l.text().catch(m=>Y5(m).message),d=nAe(h),p=d?void 0:h;throw F0(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,l.status,a,u,p),this.makeStatusError(l.status,d,p,u)}return{response:l,options:n,controller:s}}requestAPIList(e,r){const n=this.makeRequest(r,null);return new QMe(this,n,e)}buildURL(e,r){const n=aAe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return fne(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(n.search=this.stringifyQuery(r)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new cn(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,r,n,i){const{signal:a,...o}=r||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...o}).finally(()=>{clearTimeout(s)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n){let i;const a=n==null?void 0:n["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=n==null?void 0:n["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(r,s)}return await cne(i),this.makeRequest(e,r-1)}calculateDefaultRetryTimeoutMillis(e,r){const a=r-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Qg}`}}class une{constructor(e,r,n,i){XS.set(this,void 0),YMe(this,XS,e,"f"),this.options=i,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new cn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in e&&typeof r.query=="object")r.query={...r.query,...e.params};else if("url"in e){const n=[...Object.entries(r.query||{}),...e.url.searchParams.entries()];for(const[i,a]of n)e.url.searchParams.set(i,a);r.query=void 0,r.path=e.url.toString()}return await qMe(this,XS,"f").requestAPIList(this.constructor,r)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(XS=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const r of e.getPaginatedItems())yield r}}class QMe extends WM{constructor(e,r,n){super(r,async i=>new n(e,i.response,await lne(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const r of e)yield r}}const ZMe=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,r){const n=r.toString();return e[n.toLowerCase()]||e[n]}}),JMe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},vc=t=>typeof t=="object"&&t!==null&&!fne(t)&&Object.keys(t).every(e=>hne(JMe,e)),eAe=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qg,"X-Stainless-OS":Vj(Deno.build.os),"X-Stainless-Arch":Wj(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qg,"X-Stainless-OS":Vj(process.platform),"X-Stainless-Arch":Wj(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=tAe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tAe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const Wj=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Vj=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Hj;const rAe=()=>Hj??(Hj=eAe()),nAe=t=>{try{return JSON.parse(t)}catch{return}},iAe=new RegExp("^(?:[a-z]+:)?//","i"),aAe=t=>iAe.test(t),cne=t=>new Promise(e=>setTimeout(e,t)),YO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new cn(`${t} must be an integer`);if(e<0)throw new cn(`${t} must be a positive integer`);return e},Y5=t=>t instanceof Error?t:new Error(t),qO=t=>{var e,r,n,i;if(typeof process<"u")return((e=D_==null?void 0:D_[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(n=(r=Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:i.trim()};function fne(t){if(!t)return!0;for(const e in t)return!1;return!0}function hne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xj(t,e){for(const r in e){if(!hne(e,r))continue;const n=r.toLowerCase();if(!n)continue;const i=e[r];i===null?delete t[n]:i!==void 0&&(t[n]=i)}}function F0(t,...e){typeof process<"u"&&D_.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const oAe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),sAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class E6 extends une{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Nf extends une{constructor(e,r,n,i){super(e,r,n,i),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const r=Object.fromEntries(e.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const r=(n=e[e.length-1])==null?void 0:n.id;return r?{params:{after:r}}:null}}class Hn{constructor(e){this._client=e}}let dC=class extends Hn{create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}};dC||(dC={});let pC=class extends Hn{constructor(){super(...arguments),this.completions=new dC(this._client)}};(function(t){t.Completions=dC})(pC||(pC={}));class vC extends Hn{create(e,r){return this._client.post("/audio/speech",{body:e,...r,__binaryResponse:!0})}}vC||(vC={});class gC extends Hn{create(e,r){return this._client.post("/audio/transcriptions",cw({body:e,...r}))}}gC||(gC={});class mC extends Hn{create(e,r){return this._client.post("/audio/translations",cw({body:e,...r}))}}mC||(mC={});class yC extends Hn{constructor(){super(...arguments),this.transcriptions=new gC(this._client),this.translations=new mC(this._client),this.speech=new vC(this._client)}}(function(t){t.Transcriptions=gC,t.Translations=mC,t.Speech=vC})(yC||(yC={}));let wC=class extends Hn{create(e,r,n){return this._client.post(`/assistants/${e}/files`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/assistants/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(e,r={},n){return vc(r)?this.list(e,{},r):this._client.getAPIList(`/assistants/${e}/files`,_6,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,r,n){return this._client.delete(`/assistants/${e}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}};class _6 extends Nf{}(function(t){t.AssistantFilesPage=_6})(wC||(wC={}));class bC extends Hn{constructor(){super(...arguments),this.files=new wC(this._client)}create(e,r){return this._client.post("/assistants",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/assistants/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}list(e={},r){return vc(e)?this.list({},e):this._client.getAPIList("/assistants",C6,{query:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,r){return this._client.delete(`/assistants/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class C6 extends Nf{}(function(t){t.AssistantsPage=C6,t.Files=wC,t.AssistantFilesPage=_6})(bC||(bC={}));function Yj(t){return typeof t.parse=="function"}const B0=t=>(t==null?void 0:t.role)==="assistant",dne=t=>(t==null?void 0:t.role)==="function",pne=t=>(t==null?void 0:t.role)==="tool";var kl=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Xr=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Na,P_,L_,B1,$1,R_,z1,tf,j1,N_,F_,Zg,q5,xC,K5,Q5,Z5,J5,vne,eL;const qj=10;class gne{constructor(){Na.add(this),this.controller=new AbortController,P_.set(this,void 0),L_.set(this,()=>{}),B1.set(this,()=>{}),$1.set(this,void 0),R_.set(this,()=>{}),z1.set(this,()=>{}),tf.set(this,{}),this._chatCompletions=[],this.messages=[],j1.set(this,!1),N_.set(this,!1),F_.set(this,!1),Zg.set(this,!1),J5.set(this,e=>{if(kl(this,N_,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ev),e instanceof Ev)return kl(this,F_,!0,"f"),this._emit("abort",e);if(e instanceof cn)return this._emit("error",e);if(e instanceof Error){const r=new cn(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new cn(String(e)))}),kl(this,P_,new Promise((e,r)=>{kl(this,L_,e,"f"),kl(this,B1,r,"f")}),"f"),kl(this,$1,new Promise((e,r)=>{kl(this,R_,e,"f"),kl(this,z1,r,"f")}),"f"),Xr(this,P_,"f").catch(()=>{}),Xr(this,$1,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Xr(this,J5,"f"))},0)}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const r=(n=e.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),(dne(e)||pne(e))&&e.content)this._emit("functionCallResult",e.content);else if(B0(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(B0(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}_connected(){this.ended||(Xr(this,L_,"f").call(this),this._emit("connect"))}get ended(){return Xr(this,j1,"f")}get errored(){return Xr(this,N_,"f")}get aborted(){return Xr(this,F_,"f")}abort(){this.controller.abort()}on(e,r){return(Xr(this,tf,"f")[e]||(Xr(this,tf,"f")[e]=[])).push({listener:r}),this}off(e,r){const n=Xr(this,tf,"f")[e];if(!n)return this;const i=n.findIndex(a=>a.listener===r);return i>=0&&n.splice(i,1),this}once(e,r){return(Xr(this,tf,"f")[e]||(Xr(this,tf,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{kl(this,Zg,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){kl(this,Zg,!0,"f"),await Xr(this,$1,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new cn("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Xr(this,Na,"m",q5).call(this)}async finalMessage(){return await this.done(),Xr(this,Na,"m",xC).call(this)}async finalFunctionCall(){return await this.done(),Xr(this,Na,"m",K5).call(this)}async finalFunctionCallResult(){return await this.done(),Xr(this,Na,"m",Q5).call(this)}async totalUsage(){return await this.done(),Xr(this,Na,"m",Z5).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...r){if(Xr(this,j1,"f"))return;e==="end"&&(kl(this,j1,!0,"f"),Xr(this,R_,"f").call(this));const n=Xr(this,tf,"f")[e];if(n&&(Xr(this,tf,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...r))),e==="abort"){const i=r[0];!Xr(this,Zg,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Xr(this,B1,"f").call(this,i),Xr(this,z1,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=r[0];!Xr(this,Zg,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Xr(this,B1,"f").call(this,i),Xr(this,z1,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const r=Xr(this,Na,"m",xC).call(this);r&&this._emit("finalMessage",r);const n=Xr(this,Na,"m",q5).call(this);n&&this._emit("finalContent",n);const i=Xr(this,Na,"m",K5).call(this);i&&this._emit("finalFunctionCall",i);const a=Xr(this,Na,"m",Q5).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Xr(this,Na,"m",Z5).call(this))}async _createChatCompletion(e,r,n){const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Xr(this,Na,"m",vne).call(this,r);const a=await e.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(a)}async _runChatCompletion(e,r,n){for(const i of r.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,r,n)}async _runFunctions(e,r,n){var h;const i="function",{function_call:a="auto",stream:o,...s}=r,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:u=qj}=n||{},c={};for(const d of r.functions)c[d.name||d.function.name]=d;const f=r.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(const d of r.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){const v=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!v)throw new cn("missing message in ChatCompletion response");if(!v.function_call)return;const{name:g,arguments:m}=v.function_call,y=c[g];if(y){if(l&&l!==g){const S=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:g,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${f.map(E=>JSON.stringify(E.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:S});continue}let w;try{w=Yj(y)?await y.parse(m):m}catch(S){this._addMessage({role:i,name:g,content:S instanceof Error?S.message:String(S)});continue}const b=await y.function(w,this),x=Xr(this,Na,"m",eL).call(this,b);if(this._addMessage({role:i,name:g,content:x}),l)return}}async _runTools(e,r,n){var h,d;const i="tool",{tool_choice:a="auto",stream:o,...s}=r,l=typeof a!="string"&&((h=a==null?void 0:a.function)==null?void 0:h.name),{maxChatCompletions:u=qj}=n||{},c={};for(const p of r.tools)p.type==="function"&&(c[p.function.name||p.function.function.name]=p.function);const f="tools"in r?r.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const g=(d=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:f,messages:[...this.messages]},n)).choices[0])==null?void 0:d.message;if(!g)throw new cn("missing message in ChatCompletion response");if(!g.tool_calls)return;for(const m of g.tool_calls){if(m.type!=="function")continue;const y=m.id,{name:w,arguments:b}=m.function,x=c[w];if(x){if(l&&l!==w){const k=`Invalid tool_call: ${JSON.stringify(w)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(w)}. Available options are: ${f.map(C=>JSON.stringify(C.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:k});continue}let S;try{S=Yj(x)?await x.parse(b):b}catch(k){const C=k instanceof Error?k.message:String(k);this._addMessage({role:i,tool_call_id:y,content:C});continue}const E=await x.function(S,this),_=Xr(this,Na,"m",eL).call(this,E);if(this._addMessage({role:i,tool_call_id:y,content:_}),l)return}}}}P_=new WeakMap,L_=new WeakMap,B1=new WeakMap,$1=new WeakMap,R_=new WeakMap,z1=new WeakMap,tf=new WeakMap,j1=new WeakMap,N_=new WeakMap,F_=new WeakMap,Zg=new WeakMap,J5=new WeakMap,Na=new WeakSet,q5=function(){return Xr(this,Na,"m",xC).call(this).content??null},xC=function(){let e=this.messages.length;for(;e-- >0;){const r=this.messages[e];if(B0(r))return{...r,content:r.content??null}}throw new cn("stream ended without producing a ChatCompletionMessage with role=assistant")},K5=function(){var e,r;for(let n=this.messages.length-1;n>=0;n--){const i=this.messages[n];if(B0(i)&&(i!=null&&i.function_call))return i.function_call;if(B0(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(r=i.tool_calls.at(-1))==null?void 0:r.function}},Q5=function(){for(let e=this.messages.length-1;e>=0;e--){const r=this.messages[e];if(dne(r)&&r.content!=null||pne(r)&&r.content!=null&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===r.tool_call_id))}))return r.content}},Z5=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},vne=function(e){if(e.n!=null&&e.n>1)throw new cn("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},eL=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class fw extends gne{static runFunctions(e,r,n){const i=new fw,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,a)),i}static runTools(e,r,n){const i=new fw,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,a)),i}_addMessage(e){super._addMessage(e),B0(e)&&e.content&&this._emit("content",e.content)}}var Ml=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},KO=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Mu,hh,QO,ZO,YS,Kj;class hw extends gne{constructor(){super(...arguments),Mu.add(this),hh.set(this,void 0)}get currentChatCompletionSnapshot(){return Ml(this,hh,"f")}static fromReadableStream(e){const r=new hw;return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){const i=new hw;return i._run(()=>i._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,r,n){var o;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ml(this,Mu,"m",QO).call(this);const a=await e.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const s of a)Ml(this,Mu,"m",ZO).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new Ev;return this._addChatCompletion(Ml(this,Mu,"m",YS).call(this))}async _fromReadableStream(e,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Ml(this,Mu,"m",QO).call(this),this._connected();const i=Kh.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(Ml(this,Mu,"m",YS).call(this)),Ml(this,Mu,"m",ZO).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new Ev;return this._addChatCompletion(Ml(this,Mu,"m",YS).call(this))}[(hh=new WeakMap,Mu=new WeakSet,QO=function(){this.ended||KO(this,hh,void 0,"f")},ZO=function(r){var o,s,l;if(this.ended)return;const n=Ml(this,Mu,"m",Kj).call(this,r);this._emit("chunk",r,n);const i=(s=(o=r.choices[0])==null?void 0:o.delta)==null?void 0:s.content,a=(l=n.choices[0])==null?void 0:l.message;i!=null&&(a==null?void 0:a.role)==="assistant"&&(a!=null&&a.content)&&this._emit("content",i,a.content)},YS=function(){if(this.ended)throw new cn("stream has ended, this shouldn't happen");const r=Ml(this,hh,"f");if(!r)throw new cn("request ended without sending any chunks");return KO(this,hh,void 0,"f"),lAe(r)},Kj=function(r){var n,i,a;let o=Ml(this,hh,"f");const{choices:s,...l}=r;o?Object.assign(o,l):o=KO(this,hh,{...l,choices:[]},"f");for(const{delta:u,finish_reason:c,index:f,logprobs:h=null,...d}of r.choices){let p=o.choices[f];if(p||(p=o.choices[f]={finish_reason:c,index:f,message:{},logprobs:h,...d}),h)if(!p.logprobs)p.logprobs=Object.assign({},h);else{const{content:b,...x}=h;Object.assign(p.logprobs,x),b&&((n=p.logprobs).content??(n.content=[]),p.logprobs.content.push(...b))}if(c&&(p.finish_reason=c),Object.assign(p,d),!u)continue;const{content:v,function_call:g,role:m,tool_calls:y,...w}=u;if(Object.assign(p.message,w),v&&(p.message.content=(p.message.content||"")+v),m&&(p.message.role=m),g&&(p.message.function_call?(g.name&&(p.message.function_call.name=g.name),g.arguments&&((i=p.message.function_call).arguments??(i.arguments=""),p.message.function_call.arguments+=g.arguments)):p.message.function_call=g),y){p.message.tool_calls||(p.message.tool_calls=[]);for(const{index:b,id:x,type:S,function:E,..._}of y){const k=(a=p.message.tool_calls)[b]??(a[b]={});Object.assign(k,_),x&&(k.id=x),S&&(k.type=S),E&&(k.function??(k.function={arguments:""})),E!=null&&E.name&&(k.function.name=E.name),E!=null&&E.arguments&&(k.function.arguments+=E.arguments)}}}return o},Symbol.asyncIterator)](){const e=[],r=[];let n=!1;return this.on("chunk",i=>{const a=r.shift();a?a(i):e.push(i)}),this.on("end",()=>{n=!0;for(const i of r)i(void 0);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise(a=>r.push(a)).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new Kh(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function lAe(t){const{id:e,choices:r,created:n,model:i,system_fingerprint:a,...o}=t;return{...o,id:e,choices:r.map(({message:s,finish_reason:l,index:u,logprobs:c,...f})=>{if(!l)throw new cn(`missing finish_reason for choice ${u}`);const{content:h=null,function_call:d,tool_calls:p,...v}=s,g=s.role;if(!g)throw new cn(`missing role for choice ${u}`);if(d){const{arguments:m,name:y}=d;if(m==null)throw new cn(`missing function_call.arguments for choice ${u}`);if(!y)throw new cn(`missing function_call.name for choice ${u}`);return{...f,message:{content:h,function_call:{arguments:m,name:y},role:g},finish_reason:l,index:u,logprobs:c}}return p?{...f,index:u,finish_reason:l,logprobs:c,message:{...v,role:g,content:h,tool_calls:p.map((m,y)=>{const{function:w,type:b,id:x,...S}=m,{arguments:E,name:_,...k}=w||{};if(x==null)throw new cn(`missing choices[${u}].tool_calls[${y}].id
${qS(t)}`);if(b==null)throw new cn(`missing choices[${u}].tool_calls[${y}].type
${qS(t)}`);if(_==null)throw new cn(`missing choices[${u}].tool_calls[${y}].function.name
${qS(t)}`);if(E==null)throw new cn(`missing choices[${u}].tool_calls[${y}].function.arguments
${qS(t)}`);return{...S,id:x,type:b,function:{...k,name:_,arguments:E}}})}}:{...f,message:{...v,content:h,role:g},finish_reason:l,index:u,logprobs:c}}),created:n,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}}}function qS(t){return JSON.stringify(t)}class $0 extends hw{static fromReadableStream(e){const r=new $0;return r._run(()=>r._fromReadableStream(e)),r}static runFunctions(e,r,n){const i=new $0,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,r,a)),i}static runTools(e,r,n){const i=new $0,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,r,a)),i}}let mne=class extends Hn{runFunctions(e,r){return e.stream?$0.runFunctions(this._client.chat.completions,e,r):fw.runFunctions(this._client.chat.completions,e,r)}runTools(e,r){return e.stream?$0.runTools(this._client.chat.completions,e,r):fw.runTools(this._client.chat.completions,e,r)}stream(e,r){return hw.createChatCompletion(this._client.chat.completions,e,r)}},SC=class extends Hn{constructor(){super(...arguments),this.completions=new mne(this._client)}};(function(t){t.Completions=mne})(SC||(SC={}));let EC=class extends Hn{retrieve(e,r,n,i){return this._client.get(`/threads/${e}/messages/${r}/files/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r,n={},i){return vc(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/messages/${r}/files`,k6,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class k6 extends Nf{}(function(t){t.MessageFilesPage=k6})(EC||(EC={}));class _C extends Hn{constructor(){super(...arguments),this.files=new EC(this._client)}create(e,r,n){return this._client.post(`/threads/${e}/messages`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/messages/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,r,n,i){return this._client.post(`/threads/${e}/messages/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r={},n){return vc(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/messages`,M6,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class M6 extends Nf{}(function(t){t.ThreadMessagesPage=M6,t.Files=EC,t.MessageFilesPage=k6})(_C||(_C={}));class CC extends Hn{retrieve(e,r,n,i){return this._client.get(`/threads/${e}/runs/${r}/steps/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r,n={},i){return vc(n)?this.list(e,r,{},n):this._client.getAPIList(`/threads/${e}/runs/${r}/steps`,A6,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class A6 extends Nf{}(function(t){t.RunStepsPage=A6})(CC||(CC={}));class kC extends Hn{constructor(){super(...arguments),this.steps=new CC(this._client)}create(e,r,n){return this._client.post(`/threads/${e}/runs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,r,n){return this._client.get(`/threads/${e}/runs/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,r,n,i){return this._client.post(`/threads/${e}/runs/${r}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,r={},n){return vc(r)?this.list(e,{},r):this._client.getAPIList(`/threads/${e}/runs`,T6,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}cancel(e,r,n){return this._client.post(`/threads/${e}/runs/${r}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}submitToolOutputs(e,r,n,i){return this._client.post(`/threads/${e}/runs/${r}/submit_tool_outputs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class T6 extends Nf{}(function(t){t.RunsPage=T6,t.Steps=CC,t.RunStepsPage=A6})(kC||(kC={}));class MC extends Hn{constructor(){super(...arguments),this.runs=new kC(this._client),this.messages=new _C(this._client)}create(e={},r){return vc(e)?this.create({},e):this._client.post("/threads",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,r){return this._client.get(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,r,n){return this._client.post(`/threads/${e}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,r){return this._client.delete(`/threads/${e}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}(function(t){t.Runs=kC,t.RunsPage=T6,t.Messages=_C,t.ThreadMessagesPage=M6})(MC||(MC={}));class AC extends Hn{constructor(){super(...arguments),this.chat=new SC(this._client),this.assistants=new bC(this._client),this.threads=new MC(this._client)}}(function(t){t.Chat=SC,t.Assistants=bC,t.AssistantsPage=C6,t.Threads=MC})(AC||(AC={}));class TC extends Hn{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}}TC||(TC={});class OC extends Hn{create(e,r){return this._client.post("/embeddings",{body:e,...r})}}OC||(OC={});class IC extends Hn{create(e,r){return this._client.post("/files",cw({body:e,...r}))}retrieve(e,r){return this._client.get(`/files/${e}`,r)}list(e={},r){return vc(e)?this.list({},e):this._client.getAPIList("/files",O6,{query:e,...r})}del(e,r){return this._client.delete(`/files/${e}`,r)}content(e,r){return this._client.get(`/files/${e}/content`,{...r,__binaryResponse:!0})}retrieveContent(e,r){return this._client.get(`/files/${e}/content`,{...r,headers:{Accept:"application/json",...r==null?void 0:r.headers}})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await cne(r),o=await this.retrieve(e),Date.now()-a>n)throw new S6({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class O6 extends E6{}(function(t){t.FileObjectsPage=O6})(IC||(IC={}));class DC extends Hn{create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(`/fine_tuning/jobs/${e}`,r)}list(e={},r){return vc(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",I6,{query:e,...r})}cancel(e,r){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return vc(r)?this.listEvents(e,{},r):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,D6,{query:r,...n})}}class I6 extends Nf{}class D6 extends Nf{}(function(t){t.FineTuningJobsPage=I6,t.FineTuningJobEventsPage=D6})(DC||(DC={}));class PC extends Hn{constructor(){super(...arguments),this.jobs=new DC(this._client)}}(function(t){t.Jobs=DC,t.FineTuningJobsPage=I6,t.FineTuningJobEventsPage=D6})(PC||(PC={}));class LC extends Hn{createVariation(e,r){return this._client.post("/images/variations",cw({body:e,...r}))}edit(e,r){return this._client.post("/images/edits",cw({body:e,...r}))}generate(e,r){return this._client.post("/images/generations",{body:e,...r})}}LC||(LC={});class RC extends Hn{retrieve(e,r){return this._client.get(`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",P6,e)}del(e,r){return this._client.delete(`/models/${e}`,r)}}class P6 extends E6{}(function(t){t.ModelsPage=P6})(RC||(RC={}));class NC extends Hn{create(e,r){return this._client.post("/moderations",{body:e,...r})}}NC||(NC={});var yne;class ua extends KMe{constructor({baseURL:e=qO("OPENAI_BASE_URL"),apiKey:r=qO("OPENAI_API_KEY"),organization:n=qO("OPENAI_ORG_ID")??null,...i}={}){if(r===void 0)throw new cn("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:r,organization:n,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&sAe())throw new cn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new TC(this),this.chat=new pC(this),this.embeddings=new OC(this),this.files=new IC(this),this.images=new LC(this),this.audio=new yC(this),this.moderations=new NC(this),this.models=new RC(this),this.fineTuning=new PC(this),this.beta=new AC(this),this._options=a,this.apiKey=r,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}yne=ua;ua.OpenAI=yne;ua.OpenAIError=cn;ua.APIError=Va;ua.APIConnectionError=UM;ua.APIConnectionTimeoutError=S6;ua.APIUserAbortError=Ev;ua.NotFoundError=ene;ua.ConflictError=tne;ua.RateLimitError=nne;ua.BadRequestError=Qre;ua.AuthenticationError=Zre;ua.InternalServerError=ine;ua.PermissionDeniedError=Jre;ua.UnprocessableEntityError=rne;(function(t){t.toFile=sne,t.fileFromPath=qre,t.Page=E6,t.CursorPage=Nf,t.Completions=TC,t.Chat=pC,t.Embeddings=OC,t.Files=IC,t.FileObjectsPage=O6,t.Images=LC,t.Audio=yC,t.Moderations=NC,t.Models=RC,t.ModelsPage=P6,t.FineTuning=PC,t.Beta=AC})(ua||(ua={}));class wne{constructor({updateMessagesCallback:e,systemMessage:r,...n}){Qx(this,"openAI");Qx(this,"messages",[]);Qx(this,"updateMessagesCallback");var i;this.openAI=new ua(n),this.updateMessagesCallback=e,r&&(this.messages.push({role:"system",content:r}),(i=this.updateMessagesCallback)==null||i.call(this,[...this.messages]))}async sendMessages(e){var i,a,o;this.messages.push(...e),(i=this.updateMessagesCallback)==null||i.call(this,[...this.messages]);let r;try{r=await this.openAI.chat.completions.create({messages:this.messages,model:"gpt-4-turbo-preview"})}catch(s){throw(a=window.open("https://api.openai.com/v1/chat/completions","_blank"))==null||a.focus(),s}const n=r.choices[0].message;if(n.content===null)throw new Error("ChatGPT returned null content");return this.messages.push(n),(o=this.updateMessagesCallback)==null||o.call(this,[...this.messages]),n.content}}const uAe=`You are a helpful chat assistant. This system will give you access to data in the WikiData Knowledge Graph, that contains encyclopedic data similar to Wikipedia, but in knowledge graph format using the RDF framework. 

If users ask questions that can be answered via WikiData, your job is not to directly answer their questions, but instead to help them write a SPARQL query to find that data. You can ask the user to clarify their questions if the questions are vague, open-ended, or subjective in nature. 

If you ever need to suggest data to the user, you should only provide recommendations that are directly accessible from Wikidata. Do not ask the user if they would like to proceed with generating the corresponding query unless absolutely necessary.

When you are ready to start building a query, respond with 'BUILD QUERY'. The system will walk you through a guided workflow to get the necessary entity and property IDs from WikiData.

Current date: ${new Date().toDateString()}.`,bne=oe.createContext(new wne({apiKey:"",dangerouslyAllowBrowser:!0}));function cAe({children:t}){const e=Eb(),r="test".trim(),n=oe.useMemo(()=>new wne({apiKey:r,dangerouslyAllowBrowser:!0,updateMessagesCallback:Ad?void 0:i=>e(Wke(i)),systemMessage:uAe}),[]);return!r&&!Ad?Ne.jsx("div",{style:{color:"white",backgroundColor:"#333",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Ne.jsxs("p",{children:["You need to configure the ",Ne.jsx("code",{children:"VITE_OPENAI_API_KEY"})," environment variable in your ",Ne.jsx("code",{children:".env.local"})," file."]})}):Ne.jsx(bne.Provider,{value:n,children:t})}function xne(){return oe.useContext(bne)}const Sne=oe.createContext({runQuery:async()=>{},runQueryIsPending:!1});function fAe({children:t}){const e=Eb(),r=xne(),{isPending:n,mutate:i}=Ure({mutationKey:["runQuery"],mutationFn:async a=>(e(Kg(null)),await x6(a)),onSuccess:async(a,o)=>{try{const{name:s,summary:l}=await zj(r,o,a);e(HS({data:a,name:s,query:o,summary:l})),e(Kg({data:a,error:null,summary:l}))}catch{e(HS({data:a,name:null,query:o,summary:null})),e(Kg({data:a,error:null,summary:null}))}},onError:async(a,o)=>{console.error(a);try{const{name:s,summary:l}=await zj(r,o);e(HS({error:a.message,name:s,query:o,summary:l})),e(Kg({data:null,error:a.message,summary:l}))}catch{e(HS({error:a.message,name:null,query:o,summary:null})),e(Kg({data:null,error:a.message,summary:null}))}}});return Ne.jsx(Sne.Provider,{value:{runQuery:i,runQueryIsPending:n},children:t})}function L6(){return oe.useContext(Sne)}function hAe(){const t=Eb(),e=yf(s=>s.queryHistory.queryHistory),r=yf(s=>s.queryValue.queryValue),{runQuery:n}=L6(),[i,{open:a,close:o}]=Gee(!1);return Ne.jsxs("div",{children:[Ne.jsx(Cd,{style:{color:"white",marginLeft:13,marginBottom:3,marginTop:2,padding:1},order:4,children:"Query Editor"}),Ne.jsxs("div",{id:uCe["query-editor-container"],children:[Ne.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[Ne.jsx(bv,{size:"lg",radius:0,variant:"filled","aria-label":"Run Query",onClick:()=>n(r),children:Ne.jsx(hre,{})}),Ne.jsx(bv,{size:"lg",radius:0,variant:"filled",color:"gray","aria-label":"History",onClick:a,children:Ne.jsx(oCe,{})})]}),Ne.jsx("div",{children:Ne.jsx($N,{extensions:[uM.define(Lee)],onChange:s=>t(uC(s)),value:r})}),Ne.jsxs(ys,{opened:i,onClose:o,size:"lg",withCloseButton:!1,children:[Ne.jsx(Cd,{order:2,children:"Query History"}),Ne.jsx(l6,{}),e.map((s,l)=>Ne.jsxs("div",{children:[Ne.jsx("br",{}),Ne.jsxs(Yu,{variant:"default",onClick:()=>{t(uC(s.query)),t(Kg(s.results))},children:[l+1,": ",s.name||"There was an error generating a name for this query"]},l)]},l))]})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Qh(t,e){return typeof t=="function"?t(e):t}function xs(t,e){return r=>{e.setState(n=>({...n,[t]:Qh(r,n[t])}))}}function FC(t){return t instanceof Function}function dAe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function pAe(t,e){const r=[],n=i=>{i.forEach(a=>{r.push(a);const o=e(a);o!=null&&o.length&&n(o)})};return n(t),r}function Sr(t,e,r){let n=[],i;return a=>{let o;r.key&&r.debug&&(o=Date.now());const s=t(a);if(!(s.length!==n.length||s.some((c,f)=>n[f]!==c)))return i;n=s;let u;if(r.key&&r.debug&&(u=Date.now()),i=e(...s),r==null||r.onChange==null||r.onChange(i),r.key&&r.debug&&r!=null&&r.debug()){const c=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,d=(p,v)=>{for(p=String(p);p.length<v;)p=" "+p;return p};console.info(`%c⏱ ${d(f,5)} /${d(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,r==null?void 0:r.key)}return i}}function Er(t,e,r,n){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:n}}function vAe(t,e,r,n){var i,a;const s={...t._getDefaultColumnDef(),...e},l=s.accessorKey;let u=(i=(a=s.id)!=null?a:l?l.replace(".","_"):void 0)!=null?i:typeof s.header=="string"?s.header:void 0,c;if(s.accessorFn?c=s.accessorFn:l&&(l.includes(".")?c=h=>{let d=h;for(const v of l.split(".")){var p;d=(p=d)==null?void 0:p[v]}return d}:c=h=>h[s.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:c,parent:n,depth:r,columnDef:s,columns:[],getFlatColumns:Sr(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(d=>d.getFlatColumns())]},Er(t.options,"debugColumns")),getLeafColumns:Sr(()=>[t._getOrderColumnsFn()],h=>{var d;if((d=f.columns)!=null&&d.length){let p=f.columns.flatMap(v=>v.getLeafColumns());return h(p)}return[f]},Er(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(f,t);return f}const Pa="debugHeaders";function Qj(t,e,r){var n;let a={id:(n=r.id)!=null?n:e.id,column:e,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],s=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(s),o.push(l)};return s(a),o},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(a,t)}),a}const gAe={createTable:t=>{t.getHeaderGroups=Sr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n,i)=>{var a,o;const s=(a=n==null?void 0:n.map(f=>r.find(h=>h.id===f)).filter(Boolean))!=null?a:[],l=(o=i==null?void 0:i.map(f=>r.find(h=>h.id===f)).filter(Boolean))!=null?o:[],u=r.filter(f=>!(n!=null&&n.includes(f.id))&&!(i!=null&&i.includes(f.id)));return KS(e,[...s,...u,...l],t)},Er(t.options,Pa)),t.getCenterHeaderGroups=Sr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n,i)=>(r=r.filter(a=>!(n!=null&&n.includes(a.id))&&!(i!=null&&i.includes(a.id))),KS(e,r,t,"center")),Er(t.options,Pa)),t.getLeftHeaderGroups=Sr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,r,n)=>{var i;const a=(i=n==null?void 0:n.map(o=>r.find(s=>s.id===o)).filter(Boolean))!=null?i:[];return KS(e,a,t,"left")},Er(t.options,Pa)),t.getRightHeaderGroups=Sr(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,r,n)=>{var i;const a=(i=n==null?void 0:n.map(o=>r.find(s=>s.id===o)).filter(Boolean))!=null?i:[];return KS(e,a,t,"right")},Er(t.options,Pa)),t.getFooterGroups=Sr(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Er(t.options,Pa)),t.getLeftFooterGroups=Sr(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Er(t.options,Pa)),t.getCenterFooterGroups=Sr(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Er(t.options,Pa)),t.getRightFooterGroups=Sr(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Er(t.options,Pa)),t.getFlatHeaders=Sr(()=>[t.getHeaderGroups()],e=>e.map(r=>r.headers).flat(),Er(t.options,Pa)),t.getLeftFlatHeaders=Sr(()=>[t.getLeftHeaderGroups()],e=>e.map(r=>r.headers).flat(),Er(t.options,Pa)),t.getCenterFlatHeaders=Sr(()=>[t.getCenterHeaderGroups()],e=>e.map(r=>r.headers).flat(),Er(t.options,Pa)),t.getRightFlatHeaders=Sr(()=>[t.getRightHeaderGroups()],e=>e.map(r=>r.headers).flat(),Er(t.options,Pa)),t.getCenterLeafHeaders=Sr(()=>[t.getCenterFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Er(t.options,Pa)),t.getLeftLeafHeaders=Sr(()=>[t.getLeftFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Er(t.options,Pa)),t.getRightLeafHeaders=Sr(()=>[t.getRightFlatHeaders()],e=>e.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),Er(t.options,Pa)),t.getLeafHeaders=Sr(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,r,n)=>{var i,a,o,s,l,u;return[...(i=(a=e[0])==null?void 0:a.headers)!=null?i:[],...(o=(s=r[0])==null?void 0:s.headers)!=null?o:[],...(l=(u=n[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},Er(t.options,Pa))}};function KS(t,e,r,n){var i,a;let o=0;const s=function(h,d){d===void 0&&(d=1),o=Math.max(o,d),h.filter(p=>p.getIsVisible()).forEach(p=>{var v;(v=p.columns)!=null&&v.length&&s(p.columns,d+1)},0)};s(t);let l=[];const u=(h,d)=>{const p={depth:d,id:[n,`${d}`].filter(Boolean).join("_"),headers:[]},v=[];h.forEach(g=>{const m=[...v].reverse()[0],y=g.column.depth===p.depth;let w,b=!1;if(y&&g.column.parent?w=g.column.parent:(w=g.column,b=!0),m&&(m==null?void 0:m.column)===w)m.subHeaders.push(g);else{const x=Qj(r,w,{id:[n,d,w.id,g==null?void 0:g.id].filter(Boolean).join("_"),isPlaceholder:b,placeholderId:b?`${v.filter(S=>S.column===w).length}`:void 0,depth:d,index:v.length});x.subHeaders.push(g),v.push(x)}p.headers.push(g),g.headerGroup=p}),l.push(p),d>0&&u(v,d-1)},c=e.map((h,d)=>Qj(r,h,{depth:o,index:d}));u(c,o-1),l.reverse();const f=h=>h.filter(p=>p.column.getIsVisible()).map(p=>{let v=0,g=0,m=[0];p.subHeaders&&p.subHeaders.length?(m=[],f(p.subHeaders).forEach(w=>{let{colSpan:b,rowSpan:x}=w;v+=b,m.push(x)})):v=1;const y=Math.min(...m);return g=g+y,p.colSpan=v,p.rowSpan=g,{colSpan:v,rowSpan:g}});return f((i=(a=l[0])==null?void 0:a.headers)!=null?i:[]),l}const QS={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},JO=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),mAe={getDefaultColumnDef:()=>QS,getInitialState:t=>({columnSizing:{},columnSizingInfo:JO(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:xs("columnSizing",t),onColumnSizingInfoChange:xs("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var r,n,i;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((r=t.columnDef.minSize)!=null?r:QS.minSize,(n=a??t.columnDef.size)!=null?n:QS.size),(i=t.columnDef.maxSize)!=null?i:QS.maxSize)},t.getStart=Sr(r=>[r,d2(e,r),e.getState().columnSizing],(r,n)=>n.slice(0,t.getIndex(r)).reduce((i,a)=>i+a.getSize(),0),Er(e.options,"debugColumns")),t.getAfter=Sr(r=>[r,d2(e,r),e.getState().columnSizing],(r,n)=>n.slice(t.getIndex(r)+1).reduce((i,a)=>i+a.getSize(),0),Er(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(r=>{let{[t.id]:n,...i}=r;return i})},t.getCanResize=()=>{var r,n;return((r=t.columnDef.enableResizing)!=null?r:!0)&&((n=e.options.enableColumnResizing)!=null?n:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let r=0;const n=i=>{if(i.subHeaders.length)i.subHeaders.forEach(n);else{var a;r+=(a=i.column.getSize())!=null?a:0}};return n(t),r},t.getStart=()=>{if(t.index>0){const r=t.headerGroup.headers[t.index-1];return r.getStart()+r.getSize()}return 0},t.getResizeHandler=r=>{const n=e.getColumn(t.column.id),i=n==null?void 0:n.getCanResize();return a=>{if(!n||!i||(a.persist==null||a.persist(),eI(a)&&a.touches&&a.touches.length>1))return;const o=t.getSize(),s=t?t.getLeafHeaders().map(m=>[m.column.id,m.column.getSize()]):[[n.id,n.getSize()]],l=eI(a)?Math.round(a.touches[0].clientX):a.clientX,u={},c=(m,y)=>{typeof y=="number"&&(e.setColumnSizingInfo(w=>{var b,x;const S=e.options.columnResizeDirection==="rtl"?-1:1,E=(y-((b=w==null?void 0:w.startOffset)!=null?b:0))*S,_=Math.max(E/((x=w==null?void 0:w.startSize)!=null?x:0),-.999999);return w.columnSizingStart.forEach(k=>{let[C,M]=k;u[C]=Math.round(Math.max(M+M*_,0)*100)/100}),{...w,deltaOffset:E,deltaPercentage:_}}),(e.options.columnResizeMode==="onChange"||m==="end")&&e.setColumnSizing(w=>({...w,...u})))},f=m=>c("move",m),h=m=>{c("end",m),e.setColumnSizingInfo(y=>({...y,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=r||typeof document<"u"?document:null,p={moveHandler:m=>f(m.clientX),upHandler:m=>{d==null||d.removeEventListener("mousemove",p.moveHandler),d==null||d.removeEventListener("mouseup",p.upHandler),h(m.clientX)}},v={moveHandler:m=>(m.cancelable&&(m.preventDefault(),m.stopPropagation()),f(m.touches[0].clientX),!1),upHandler:m=>{var y;d==null||d.removeEventListener("touchmove",v.moveHandler),d==null||d.removeEventListener("touchend",v.upHandler),m.cancelable&&(m.preventDefault(),m.stopPropagation()),h((y=m.touches[0])==null?void 0:y.clientX)}},g=yAe()?{passive:!1}:!1;eI(a)?(d==null||d.addEventListener("touchmove",v.moveHandler,g),d==null||d.addEventListener("touchend",v.upHandler,g)):(d==null||d.addEventListener("mousemove",p.moveHandler,g),d==null||d.addEventListener("mouseup",p.upHandler,g)),e.setColumnSizingInfo(m=>({...m,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var r;t.setColumnSizing(e?{}:(r=t.initialState.columnSizing)!=null?r:{})},t.resetHeaderSizeInfo=e=>{var r;t.setColumnSizingInfo(e?JO():(r=t.initialState.columnSizingInfo)!=null?r:JO())},t.getTotalSize=()=>{var e,r;return(e=(r=t.getHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,r;return(e=(r=t.getLeftHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,r;return(e=(r=t.getCenterHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,r;return(e=(r=t.getRightHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?e:0}}};let ZS=null;function yAe(){if(typeof ZS=="boolean")return ZS;let t=!1;try{const e={get passive(){return t=!0,!1}},r=()=>{};window.addEventListener("test",r,e),window.removeEventListener("test",r)}catch{t=!1}return ZS=t,ZS}function eI(t){return t.type==="touchstart"}const wAe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:xs("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,r=!1;t._autoResetExpanded=()=>{var n,i;if(!e){t._queue(()=>{e=!0});return}if((n=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?n:!t.options.manualExpanding){if(r)return;r=!0,t._queue(()=>{t.resetExpanded(),r=!1})}},t.setExpanded=n=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(n),t.toggleAllRowsExpanded=n=>{n??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=n=>{var i,a;t.setExpanded(n?{}:(i=(a=t.initialState)==null?void 0:a.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const n=t.getState().expanded;return n===!0||Object.values(n).some(Boolean)},t.getIsAllRowsExpanded=()=>{const n=t.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let n=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const o=a.split(".");n=Math.max(n,o.length)}),n},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=r=>{e.setExpanded(n=>{var i;const a=n===!0?!0:!!(n!=null&&n[t.id]);let o={};if(n===!0?Object.keys(e.getRowModel().rowsById).forEach(s=>{o[s]=!0}):o=n,r=(i=r)!=null?i:!a,!a&&r)return{...o,[t.id]:!0};if(a&&!r){const{[t.id]:s,...l}=o;return l}return n})},t.getIsExpanded=()=>{var r;const n=e.getState().expanded;return!!((r=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?r:n===!0||n!=null&&n[t.id])},t.getCanExpand=()=>{var r,n,i;return(r=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?r:((n=e.options.enableExpanding)!=null?n:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let r=!0,n=t;for(;r&&n.parentId;)n=e.getRow(n.parentId,!0),r=n.getIsExpanded();return r},t.getToggleExpandedHandler=()=>{const r=t.getCanExpand();return()=>{r&&t.toggleExpanded()}}}},Ene=(t,e,r)=>{var n;const i=r.toLowerCase();return!!(!((n=t.getValue(e))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(i))};Ene.autoRemove=t=>Hl(t);const _ne=(t,e,r)=>{var n;return!!(!((n=t.getValue(e))==null||(n=n.toString())==null)&&n.includes(r))};_ne.autoRemove=t=>Hl(t);const Cne=(t,e,r)=>{var n;return((n=t.getValue(e))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(r==null?void 0:r.toLowerCase())};Cne.autoRemove=t=>Hl(t);const kne=(t,e,r)=>{var n;return(n=t.getValue(e))==null?void 0:n.includes(r)};kne.autoRemove=t=>Hl(t)||!(t!=null&&t.length);const Mne=(t,e,r)=>!r.some(n=>{var i;return!((i=t.getValue(e))!=null&&i.includes(n))});Mne.autoRemove=t=>Hl(t)||!(t!=null&&t.length);const Ane=(t,e,r)=>r.some(n=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(n)});Ane.autoRemove=t=>Hl(t)||!(t!=null&&t.length);const Tne=(t,e,r)=>t.getValue(e)===r;Tne.autoRemove=t=>Hl(t);const One=(t,e,r)=>t.getValue(e)==r;One.autoRemove=t=>Hl(t);const R6=(t,e,r)=>{let[n,i]=r;const a=t.getValue(e);return a>=n&&a<=i};R6.resolveFilterValue=t=>{let[e,r]=t,n=typeof e!="number"?parseFloat(e):e,i=typeof r!="number"?parseFloat(r):r,a=e===null||Number.isNaN(n)?-1/0:n,o=r===null||Number.isNaN(i)?1/0:i;if(a>o){const s=a;a=o,o=s}return[a,o]};R6.autoRemove=t=>Hl(t)||Hl(t[0])&&Hl(t[1]);const Vc={includesString:Ene,includesStringSensitive:_ne,equalsString:Cne,arrIncludes:kne,arrIncludesAll:Mne,arrIncludesSome:Ane,equals:Tne,weakEquals:One,inNumberRange:R6};function Hl(t){return t==null||t===""}const bAe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],globalFilter:void 0,...t}),getDefaultOptions:t=>({onColumnFiltersChange:xs("columnFilters",t),onGlobalFilterChange:xs("globalFilter",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var r;const n=(r=t.getCoreRowModel().flatRows[0])==null||(r=r._getAllCellsByColumnId()[e.id])==null?void 0:r.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const r=e.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(t.id);return typeof n=="string"?Vc.includesString:typeof n=="number"?Vc.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?Vc.equals:Array.isArray(n)?Vc.arrIncludes:Vc.weakEquals},t.getFilterFn=()=>{var r,n;return FC(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(r=(n=e.options.filterFns)==null?void 0:n[t.columnDef.filterFn])!=null?r:Vc[t.columnDef.filterFn]},t.getCanFilter=()=>{var r,n,i;return((r=t.columnDef.enableColumnFilter)!=null?r:!0)&&((n=e.options.enableColumnFilters)!=null?n:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getCanGlobalFilter=()=>{var r,n,i,a;return((r=t.columnDef.enableGlobalFilter)!=null?r:!0)&&((n=e.options.enableGlobalFilter)!=null?n:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var r;return(r=e.getState().columnFilters)==null||(r=r.find(n=>n.id===t.id))==null?void 0:r.value},t.getFilterIndex=()=>{var r,n;return(r=(n=e.getState().columnFilters)==null?void 0:n.findIndex(i=>i.id===t.id))!=null?r:-1},t.setFilterValue=r=>{e.setColumnFilters(n=>{const i=t.getFilterFn(),a=n==null?void 0:n.find(c=>c.id===t.id),o=Qh(r,a?a.value:void 0);if(Zj(i,o,t)){var s;return(s=n==null?void 0:n.filter(c=>c.id!==t.id))!=null?s:[]}const l={id:t.id,value:o};if(a){var u;return(u=n==null?void 0:n.map(c=>c.id===t.id?l:c))!=null?u:[]}return n!=null&&n.length?[...n,l]:[l]})},t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Vc.includesString,t.getGlobalFilterFn=()=>{var e,r;const{globalFilterFn:n}=t.options;return FC(n)?n:n==="auto"?t.getGlobalAutoFilterFn():(e=(r=t.options.filterFns)==null?void 0:r[n])!=null?e:Vc[n]},t.setColumnFilters=e=>{const r=t.getAllLeafColumns(),n=i=>{var a;return(a=Qh(e,i))==null?void 0:a.filter(o=>{const s=r.find(l=>l.id===o.id);if(s){const l=s.getFilterFn();if(Zj(l,o.value,s))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(n)},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)},t.resetColumnFilters=e=>{var r,n;t.setColumnFilters(e?[]:(r=(n=t.initialState)==null?void 0:n.columnFilters)!=null?r:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel()),t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}};function Zj(t,e,r){return(t&&t.autoRemove?t.autoRemove(e,r):!1)||typeof e>"u"||typeof e=="string"&&!e}const xAe=(t,e,r)=>r.reduce((n,i)=>{const a=i.getValue(t);return n+(typeof a=="number"?a:0)},0),SAe=(t,e,r)=>{let n;return r.forEach(i=>{const a=i.getValue(t);a!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}),n},EAe=(t,e,r)=>{let n;return r.forEach(i=>{const a=i.getValue(t);a!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}),n},_Ae=(t,e,r)=>{let n,i;return r.forEach(a=>{const o=a.getValue(t);o!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}),[n,i]},CAe=(t,e)=>{let r=0,n=0;if(e.forEach(i=>{let a=i.getValue(t);a!=null&&(a=+a)>=a&&(++r,n+=a)}),r)return n/r},kAe=(t,e)=>{if(!e.length)return;const r=e.map(a=>a.getValue(t));if(!dAe(r))return;if(r.length===1)return r[0];const n=Math.floor(r.length/2),i=r.sort((a,o)=>a-o);return r.length%2!==0?i[n]:(i[n-1]+i[n])/2},MAe=(t,e)=>Array.from(new Set(e.map(r=>r.getValue(t))).values()),AAe=(t,e)=>new Set(e.map(r=>r.getValue(t))).size,TAe=(t,e)=>e.length,tI={sum:xAe,min:SAe,max:EAe,extent:_Ae,mean:CAe,median:kAe,unique:MAe,uniqueCount:AAe,count:TAe},OAe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,r;return(e=(r=t.getValue())==null||r.toString==null?void 0:r.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:xs("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(r=>r!=null&&r.includes(t.id)?r.filter(n=>n!==t.id):[...r??[],t.id])},t.getCanGroup=()=>{var r,n,i,a;return(r=(n=(i=(a=t.columnDef.enableGrouping)!=null?a:!0)!=null?i:e.options.enableGrouping)!=null?n:!0)!=null?r:!!t.accessorFn},t.getIsGrouped=()=>{var r;return(r=e.getState().grouping)==null?void 0:r.includes(t.id)},t.getGroupedIndex=()=>{var r;return(r=e.getState().grouping)==null?void 0:r.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const r=t.getCanGroup();return()=>{r&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const r=e.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(t.id);if(typeof n=="number")return tI.sum;if(Object.prototype.toString.call(n)==="[object Date]")return tI.extent},t.getAggregationFn=()=>{var r,n;if(!t)throw new Error;return FC(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(r=(n=e.options.aggregationFns)==null?void 0:n[t.columnDef.aggregationFn])!=null?r:tI[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var r,n;t.setGrouping(e?[]:(r=(n=t.initialState)==null?void 0:n.grouping)!=null?r:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=r=>{if(t._groupingValuesCache.hasOwnProperty(r))return t._groupingValuesCache[r];const n=e.getColumn(r);return n!=null&&n.columnDef.getGroupingValue?(t._groupingValuesCache[r]=n.columnDef.getGroupingValue(t.original),t._groupingValuesCache[r]):t.getValue(r)},t._groupingValuesCache={}},createCell:(t,e,r,n)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===r.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=r.subRows)!=null&&i.length)}}};function IAe(t,e,r){if(!(e!=null&&e.length)||!r)return t;const n=t.filter(a=>!e.includes(a.id));return r==="remove"?n:[...e.map(a=>t.find(o=>o.id===a)).filter(Boolean),...n]}const DAe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:xs("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Sr(r=>[d2(e,r)],r=>r.findIndex(n=>n.id===t.id),Er(e.options,"debugColumns")),t.getIsFirstColumn=r=>{var n;return((n=d2(e,r)[0])==null?void 0:n.id)===t.id},t.getIsLastColumn=r=>{var n;const i=d2(e,r);return((n=i[i.length-1])==null?void 0:n.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var r;t.setColumnOrder(e?[]:(r=t.initialState.columnOrder)!=null?r:[])},t._getOrderColumnsFn=Sr(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,r,n)=>i=>{let a=[];if(!(e!=null&&e.length))a=i;else{const o=[...e],s=[...i];for(;s.length&&o.length;){const l=o.shift(),u=s.findIndex(c=>c.id===l);u>-1&&a.push(s.splice(u,1)[0])}a=[...a,...s]}return IAe(a,r,n)},Er(t.options,"debugTable"))}},tL=0,rL=10,rI=()=>({pageIndex:tL,pageSize:rL}),PAe={getInitialState:t=>({...t,pagination:{...rI(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:xs("pagination",t)}),createTable:t=>{let e=!1,r=!1;t._autoResetPageIndex=()=>{var n,i;if(!e){t._queue(()=>{e=!0});return}if((n=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?n:!t.options.manualPagination){if(r)return;r=!0,t._queue(()=>{t.resetPageIndex(),r=!1})}},t.setPagination=n=>{const i=a=>Qh(n,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=n=>{var i;t.setPagination(n?rI():(i=t.initialState.pagination)!=null?i:rI())},t.setPageIndex=n=>{t.setPagination(i=>{let a=Qh(n,i.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,o)),{...i,pageIndex:a}})},t.resetPageIndex=n=>{var i,a;t.setPageIndex(n?tL:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?i:tL)},t.resetPageSize=n=>{var i,a;t.setPageSize(n?rL:(i=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?i:rL)},t.setPageSize=n=>{t.setPagination(i=>{const a=Math.max(1,Qh(n,i.pageSize)),o=i.pageSize*i.pageIndex,s=Math.floor(o/a);return{...i,pageIndex:s,pageSize:a}})},t.setPageCount=n=>t.setPagination(i=>{var a;let o=Qh(n,(a=t.options.pageCount)!=null?a:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),t.getPageOptions=Sr(()=>[t.getPageCount()],n=>{let i=[];return n&&n>0&&(i=[...new Array(n)].fill(null).map((a,o)=>o)),i},Er(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:n}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:n<i-1},t.previousPage=()=>t.setPageIndex(n=>n-1),t.nextPage=()=>t.setPageIndex(n=>n+1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var n;return(n=t.options.pageCount)!=null?n:Math.ceil(t.getPrePaginationRowModel().rows.length/t.getState().pagination.pageSize)}}},nI=()=>({left:[],right:[]}),iI=()=>({top:[],bottom:[]}),LAe={getInitialState:t=>({columnPinning:nI(),rowPinning:iI(),...t}),getDefaultOptions:t=>({onColumnPinningChange:xs("columnPinning",t),onRowPinningChange:xs("rowPinning",t)}),createColumn:(t,e)=>{t.pin=r=>{const n=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var a,o;if(r==="right"){var s,l;return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(f=>!(n!=null&&n.includes(f))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(f=>!(n!=null&&n.includes(f))),...n]}}if(r==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(n!=null&&n.includes(f))),...n],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(n!=null&&n.includes(f)))}}return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(f=>!(n!=null&&n.includes(f))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(f=>!(n!=null&&n.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(n=>{var i,a,o;return((i=n.columnDef.enablePinning)!=null?i:!0)&&((a=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const r=t.getLeafColumns().map(s=>s.id),{left:n,right:i}=e.getState().columnPinning,a=r.some(s=>n==null?void 0:n.includes(s)),o=r.some(s=>i==null?void 0:i.includes(s));return a?"left":o?"right":!1},t.getPinnedIndex=()=>{var r,n;const i=t.getIsPinned();return i?(r=(n=e.getState().columnPinning)==null||(n=n[i])==null?void 0:n.indexOf(t.id))!=null?r:-1:0}},createRow:(t,e)=>{t.pin=(r,n,i)=>{const a=n?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],s=new Set([...o,t.id,...a]);e.setRowPinning(l=>{var u,c;if(r==="bottom"){var f,h;return{top:((f=l==null?void 0:l.top)!=null?f:[]).filter(v=>!(s!=null&&s.has(v))),bottom:[...((h=l==null?void 0:l.bottom)!=null?h:[]).filter(v=>!(s!=null&&s.has(v))),...Array.from(s)]}}if(r==="top"){var d,p;return{top:[...((d=l==null?void 0:l.top)!=null?d:[]).filter(v=>!(s!=null&&s.has(v))),...Array.from(s)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(v=>!(s!=null&&s.has(v)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(v=>!(s!=null&&s.has(v))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(v=>!(s!=null&&s.has(v)))}})},t.getCanPin=()=>{var r;const{enableRowPinning:n,enablePinning:i}=e.options;return typeof n=="function"?n(t):(r=n??i)!=null?r:!0},t.getIsPinned=()=>{const r=[t.id],{top:n,bottom:i}=e.getState().rowPinning,a=r.some(s=>n==null?void 0:n.includes(s)),o=r.some(s=>i==null?void 0:i.includes(s));return a?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var r,n;const i=t.getIsPinned();if(!i)return-1;const a=(r=e._getPinnedRows(i))==null?void 0:r.map(o=>{let{id:s}=o;return s});return(n=a==null?void 0:a.indexOf(t.id))!=null?n:-1},t.getCenterVisibleCells=Sr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(r,n,i)=>{const a=[...n??[],...i??[]];return r.filter(o=>!a.includes(o.column.id))},Er(e.options,"debugRows")),t.getLeftVisibleCells=Sr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,,],(r,n)=>(n??[]).map(a=>r.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Er(e.options,"debugRows")),t.getRightVisibleCells=Sr(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(r,n)=>(n??[]).map(a=>r.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Er(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var r,n;return t.setColumnPinning(e?nI():(r=(n=t.initialState)==null?void 0:n.columnPinning)!=null?r:nI())},t.getIsSomeColumnsPinned=e=>{var r;const n=t.getState().columnPinning;if(!e){var i,a;return!!((i=n.left)!=null&&i.length||(a=n.right)!=null&&a.length)}return!!((r=n[e])!=null&&r.length)},t.getLeftLeafColumns=Sr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,r)=>(r??[]).map(n=>e.find(i=>i.id===n)).filter(Boolean),Er(t.options,"debugColumns")),t.getRightLeafColumns=Sr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,r)=>(r??[]).map(n=>e.find(i=>i.id===n)).filter(Boolean),Er(t.options,"debugColumns")),t.getCenterLeafColumns=Sr(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,r,n)=>{const i=[...r??[],...n??[]];return e.filter(a=>!i.includes(a.id))},Er(t.options,"debugColumns")),t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var r,n;return t.setRowPinning(e?iI():(r=(n=t.initialState)==null?void 0:n.rowPinning)!=null?r:iI())},t.getIsSomeRowsPinned=e=>{var r;const n=t.getState().rowPinning;if(!e){var i,a;return!!((i=n.top)!=null&&i.length||(a=n.bottom)!=null&&a.length)}return!!((r=n[e])!=null&&r.length)},t._getPinnedRows=Sr(e=>[t.getRowModel().rows,t.getState().rowPinning[e],e],(e,r,n)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(r??[]).map(o=>{const s=t.getRow(o,!0);return s.getIsAllParentsExpanded()?s:null}):(r??[]).map(o=>e.find(s=>s.id===o))).filter(Boolean).map(o=>({...o,position:n}))},Er(t.options,"debugRows")),t.getTopRows=()=>t._getPinnedRows("top"),t.getBottomRows=()=>t._getPinnedRows("bottom"),t.getCenterRows=Sr(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,r,n)=>{const i=new Set([...r??[],...n??[]]);return e.filter(a=>!i.has(a.id))},Er(t.options,"debugRows"))}},RAe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:xs("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var r;return t.setRowSelection(e?{}:(r=t.initialState.rowSelection)!=null?r:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(r=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const n={...r},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(a=>{a.getCanSelect()&&(n[a.id]=!0)}):i.forEach(a=>{delete n[a.id]}),n})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(r=>{const n=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...r};return t.getRowModel().rows.forEach(a=>{nL(i,a.id,n,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Sr(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,r)=>Object.keys(e).length?aI(t,r):{rows:[],flatRows:[],rowsById:{}},Er(t.options,"debugTable")),t.getFilteredSelectedRowModel=Sr(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,r)=>Object.keys(e).length?aI(t,r):{rows:[],flatRows:[],rowsById:{}},Er(t.options,"debugTable")),t.getGroupedSelectedRowModel=Sr(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,r)=>Object.keys(e).length?aI(t,r):{rows:[],flatRows:[],rowsById:{}},Er(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:r}=t.getState();let n=!!(e.length&&Object.keys(r).length);return n&&e.some(i=>i.getCanSelect()&&!r[i.id])&&(n=!1),n},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:r}=t.getState();let n=!!e.length;return n&&e.some(i=>!r[i.id])&&(n=!1),n},t.getIsSomeRowsSelected=()=>{var e;const r=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return r>0&&r<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(r=>r.getCanSelect()).some(r=>r.getIsSelected()||r.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(r,n)=>{const i=t.getIsSelected();e.setRowSelection(a=>{var o;if(r=typeof r<"u"?r:!i,t.getCanSelect()&&i===r)return a;const s={...a};return nL(s,t.id,r,(o=n==null?void 0:n.selectChildren)!=null?o:!0,e),s})},t.getIsSelected=()=>{const{rowSelection:r}=e.getState();return N6(t,r)},t.getIsSomeSelected=()=>{const{rowSelection:r}=e.getState();return iL(t,r)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=e.getState();return iL(t,r)==="all"},t.getCanSelect=()=>{var r;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(r=e.options.enableRowSelection)!=null?r:!0},t.getCanSelectSubRows=()=>{var r;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(r=e.options.enableSubRowSelection)!=null?r:!0},t.getCanMultiSelect=()=>{var r;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(r=e.options.enableMultiRowSelection)!=null?r:!0},t.getToggleSelectedHandler=()=>{const r=t.getCanSelect();return n=>{var i;r&&t.toggleSelected((i=n.target)==null?void 0:i.checked)}}}},nL=(t,e,r,n,i)=>{var a;const o=i.getRow(e,!0);r?(o.getCanMultiSelect()||Object.keys(t).forEach(s=>delete t[s]),o.getCanSelect()&&(t[e]=!0)):delete t[e],n&&(a=o.subRows)!=null&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(s=>nL(t,s.id,r,n,i))};function aI(t,e){const r=t.getState().rowSelection,n=[],i={},a=function(o,s){return o.map(l=>{var u;const c=N6(l,r);if(c&&(n.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:a(l.subRows)}),c)return l}).filter(Boolean)};return{rows:a(e.rows),flatRows:n,rowsById:i}}function N6(t,e){var r;return(r=e[t.id])!=null?r:!1}function iL(t,e,r){var n;if(!((n=t.subRows)!=null&&n.length))return!1;let i=!0,a=!1;return t.subRows.forEach(o=>{if(!(a&&!i)&&(o.getCanSelect()&&(N6(o,e)?a=!0:i=!1),o.subRows&&o.subRows.length)){const s=iL(o,e);s==="all"?a=!0:(s==="some"&&(a=!0),i=!1)}}),i?"all":a?"some":!1}const aL=/([0-9]+)/gm,NAe=(t,e,r)=>Ine(Td(t.getValue(r)).toLowerCase(),Td(e.getValue(r)).toLowerCase()),FAe=(t,e,r)=>Ine(Td(t.getValue(r)),Td(e.getValue(r))),BAe=(t,e,r)=>F6(Td(t.getValue(r)).toLowerCase(),Td(e.getValue(r)).toLowerCase()),$Ae=(t,e,r)=>F6(Td(t.getValue(r)),Td(e.getValue(r))),zAe=(t,e,r)=>{const n=t.getValue(r),i=e.getValue(r);return n>i?1:n<i?-1:0},jAe=(t,e,r)=>F6(t.getValue(r),e.getValue(r));function F6(t,e){return t===e?0:t>e?1:-1}function Td(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Ine(t,e){const r=t.split(aL).filter(Boolean),n=e.split(aL).filter(Boolean);for(;r.length&&n.length;){const i=r.shift(),a=n.shift(),o=parseInt(i,10),s=parseInt(a,10),l=[o,s].sort();if(isNaN(l[0])){if(i>a)return 1;if(a>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>s)return 1;if(s>o)return-1}return r.length-n.length}const l1={alphanumeric:NAe,alphanumericCaseSensitive:FAe,text:BAe,textCaseSensitive:$Ae,datetime:zAe,basic:jAe},GAe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:xs("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const r=e.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const i of r){const a=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return l1.datetime;if(typeof a=="string"&&(n=!0,a.split(aL).length>1))return l1.alphanumeric}return n?l1.text:l1.basic},t.getAutoSortDir=()=>{const r=e.getFilteredRowModel().flatRows[0];return typeof(r==null?void 0:r.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var r,n;if(!t)throw new Error;return FC(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(r=(n=e.options.sortingFns)==null?void 0:n[t.columnDef.sortingFn])!=null?r:l1[t.columnDef.sortingFn]},t.toggleSorting=(r,n)=>{const i=t.getNextSortingOrder(),a=typeof r<"u"&&r!==null;e.setSorting(o=>{const s=o==null?void 0:o.find(d=>d.id===t.id),l=o==null?void 0:o.findIndex(d=>d.id===t.id);let u=[],c,f=a?r:i==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&n?s?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":s?c="toggle":c="replace",c==="toggle"&&(a||i||(c="remove")),c==="add"){var h;u=[...o,{id:t.id,desc:f}],u.splice(0,u.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(d=>d.id===t.id?{...d,desc:f}:d):c==="remove"?u=o.filter(d=>d.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var r,n;return((r=(n=t.columnDef.sortDescFirst)!=null?n:e.options.sortDescFirst)!=null?r:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=r=>{var n,i;const a=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==a&&((n=e.options.enableSortingRemoval)==null||n)&&(!(r&&(i=e.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":a},t.getCanSort=()=>{var r,n;return((r=t.columnDef.enableSorting)!=null?r:!0)&&((n=e.options.enableSorting)!=null?n:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var r,n;return(r=(n=t.columnDef.enableMultiSort)!=null?n:e.options.enableMultiSort)!=null?r:!!t.accessorFn},t.getIsSorted=()=>{var r;const n=(r=e.getState().sorting)==null?void 0:r.find(i=>i.id===t.id);return n?n.desc?"desc":"asc":!1},t.getSortIndex=()=>{var r,n;return(r=(n=e.getState().sorting)==null?void 0:n.findIndex(i=>i.id===t.id))!=null?r:-1},t.clearSorting=()=>{e.setSorting(r=>r!=null&&r.length?r.filter(n=>n.id!==t.id):[])},t.getToggleSortingHandler=()=>{const r=t.getCanSort();return n=>{r&&(n.persist==null||n.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(n):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var r,n;t.setSorting(e?[]:(r=(n=t.initialState)==null?void 0:n.sorting)!=null?r:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},UAe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:xs("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=r=>{t.getCanHide()&&e.setColumnVisibility(n=>({...n,[t.id]:r??!t.getIsVisible()}))},t.getIsVisible=()=>{var r,n;return(r=(n=e.getState().columnVisibility)==null?void 0:n[t.id])!=null?r:!0},t.getCanHide=()=>{var r,n;return((r=t.columnDef.enableHiding)!=null?r:!0)&&((n=e.options.enableHiding)!=null?n:!0)},t.getToggleVisibilityHandler=()=>r=>{t.toggleVisibility==null||t.toggleVisibility(r.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Sr(()=>[t.getAllCells(),e.getState().columnVisibility],r=>r.filter(n=>n.column.getIsVisible()),Er(e.options,"debugRows")),t.getVisibleCells=Sr(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(r,n,i)=>[...r,...n,...i],Er(e.options,"debugRows"))},createTable:t=>{const e=(r,n)=>Sr(()=>[n(),n().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Er(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=r=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(r),t.resetColumnVisibility=r=>{var n;t.setColumnVisibility(r?{}:(n=t.initialState.columnVisibility)!=null?n:{})},t.toggleAllColumnsVisible=r=>{var n;r=(n=r)!=null?n:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,a)=>({...i,[a.id]:r||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(r=>!(r.getIsVisible!=null&&r.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(r=>r.getIsVisible==null?void 0:r.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>r=>{var n;t.toggleAllColumnsVisible((n=r.target)==null?void 0:n.checked)}}};function d2(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Jj=[gAe,UAe,DAe,LAe,bAe,GAe,OAe,wAe,PAe,RAe,mAe];function WAe(t){var e;(t.debugAll||t.debugTable)&&console.info("Creating Table Instance...");let r={_features:Jj};const n=r._features.reduce((c,f)=>Object.assign(c,f.getDefaultOptions==null?void 0:f.getDefaultOptions(r)),{}),i=c=>r.options.mergeOptions?r.options.mergeOptions(n,c):{...n,...c};let o={...{},...(e=t.initialState)!=null?e:{}};r._features.forEach(c=>{var f;o=(f=c.getInitialState==null?void 0:c.getInitialState(o))!=null?f:o});const s=[];let l=!1;const u={_features:Jj,options:{...n,...t},initialState:o,_queue:c=>{s.push(c),l||(l=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();l=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{r.setState(r.initialState)},setOptions:c=>{const f=Qh(c,r.options);r.options=i(f)},getState:()=>r.options.state,setState:c=>{r.options.onStateChange==null||r.options.onStateChange(c)},_getRowId:(c,f,h)=>{var d;return(d=r.options.getRowId==null?void 0:r.options.getRowId(c,f,h))!=null?d:`${h?[h.id,f].join("."):f}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(c,f)=>{let h=(f?r.getPrePaginationRowModel():r.getRowModel()).rowsById[c];if(!h&&(h=r.getCoreRowModel().rowsById[c],!h))throw new Error;return h},_getDefaultColumnDef:Sr(()=>[r.options.defaultColumn],c=>{var f;return c=(f=c)!=null?f:{},{header:h=>{const d=h.header.column.columnDef;return d.accessorKey?d.accessorKey:d.accessorFn?d.id:null},cell:h=>{var d,p;return(d=(p=h.renderValue())==null||p.toString==null?void 0:p.toString())!=null?d:null},...r._features.reduce((h,d)=>Object.assign(h,d.getDefaultColumnDef==null?void 0:d.getDefaultColumnDef()),{}),...c}},Er(t,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:Sr(()=>[r._getColumnDefs()],c=>{const f=function(h,d,p){return p===void 0&&(p=0),h.map(v=>{const g=vAe(r,v,p,d),m=v;return g.columns=m.columns?f(m.columns,g,p+1):[],g})};return f(c)},Er(t,"debugColumns")),getAllFlatColumns:Sr(()=>[r.getAllColumns()],c=>c.flatMap(f=>f.getFlatColumns()),Er(t,"debugColumns")),_getAllFlatColumnsById:Sr(()=>[r.getAllFlatColumns()],c=>c.reduce((f,h)=>(f[h.id]=h,f),{}),Er(t,"debugColumns")),getAllLeafColumns:Sr(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(c,f)=>{let h=c.flatMap(d=>d.getLeafColumns());return f(h)},Er(t,"debugColumns")),getColumn:c=>r._getAllFlatColumnsById()[c]};Object.assign(r,u);for(let c=0;c<r._features.length;c++){const f=r._features[c];f==null||f.createTable==null||f.createTable(r)}return r}function VAe(t,e,r,n){const i=()=>{var o;return(o=a.getValue())!=null?o:t.options.renderFallbackValue},a={id:`${e.id}_${r.id}`,row:e,column:r,getValue:()=>e.getValue(n),renderValue:i,getContext:Sr(()=>[t,r,e,a],(o,s,l,u)=>({table:o,column:s,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Er(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(a,r,e,t)},{}),a}const HAe=(t,e,r,n,i,a,o)=>{let s={id:e,index:n,original:r,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(s._valuesCache.hasOwnProperty(l))return s._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return s._valuesCache[l]=u.accessorFn(s.original,n),s._valuesCache[l]},getUniqueValues:l=>{if(s._uniqueValuesCache.hasOwnProperty(l))return s._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(s._uniqueValuesCache[l]=u.columnDef.getUniqueValues(s.original,n),s._uniqueValuesCache[l]):(s._uniqueValuesCache[l]=[s.getValue(l)],s._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=s.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:a??[],getLeafRows:()=>pAe(s.subRows,l=>l.subRows),getParentRow:()=>s.parentId?t.getRow(s.parentId,!0):void 0,getParentRows:()=>{let l=[],u=s;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Sr(()=>[t.getAllLeafColumns()],l=>l.map(u=>VAe(t,s,u,u.id)),Er(t.options,"debugRows")),_getAllCellsByColumnId:Sr(()=>[s.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),Er(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(s,t)}return s};function Dne(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Pne(){return t=>Sr(()=>[t.options.data],e=>{const r={rows:[],flatRows:[],rowsById:{}},n=function(i,a,o){a===void 0&&(a=0);const s=[];for(let u=0;u<i.length;u++){const c=HAe(t,t._getRowId(i[u],u,o),i[u],u,a,void 0,o==null?void 0:o.id);if(r.flatRows.push(c),r.rowsById[c.id]=c,s.push(c),t.options.getSubRows){var l;c.originalSubRows=t.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=n(c.originalSubRows,a+1,c))}}return s};return r.rows=n(e),r},Er(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function BC(t,e){return t?XAe(t)?oe.createElement(t,e):t:null}function XAe(t){return YAe(t)||typeof t=="function"||qAe(t)}function YAe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function qAe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Lne(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[r]=oe.useState(()=>({current:WAe(e)})),[n,i]=oe.useState(()=>r.current.initialState);return r.current.setOptions(a=>({...a,...t,state:{...n,...t.state},onStateChange:o=>{i(o),t.onStateChange==null||t.onStateChange(o)}})),r.current}function KAe(t,e){const r=document.createElement("a");r.setAttribute("href","data:json;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}const eG={"results-table-container":"_results-table-container_gviui_1","download-button":"_download-button_gviui_1"};function QAe({data:t}){const e=Dne(),r=t.head.vars.map(i=>e.accessor(a=>a[i],{id:i,cell:a=>Ne.jsx("span",{children:ZAe(a.getValue())}),header:()=>Ne.jsx("span",{children:i})})),n=Lne({columns:r,data:t.results.bindings,getCoreRowModel:Pne()});return Ne.jsxs("div",{id:eG["results-table-container"],children:[Ne.jsx(bv,{id:eG["download-button"],variant:"filled","aria-label":"Download Data",onClick:()=>KAe("data.json",JSON.stringify(t,void 0,2)),children:Ne.jsx(aCe,{})}),Ne.jsxs(Ln,{children:[Ne.jsx(Ln.Thead,{children:n.getHeaderGroups().map(i=>Ne.jsx(Ln.Tr,{children:i.headers.map(a=>Ne.jsx(Ln.Th,{children:a.isPlaceholder?null:BC(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),Ne.jsx(Ln.Tbody,{children:n.getRowModel().rows.map(i=>Ne.jsx(Ln.Tr,{children:i.getVisibleCells().map(a=>Ne.jsx(Ln.Td,{children:BC(a.column.columnDef.cell,a.getContext())},a.id))},i.id))})]})]})}function ZAe(t){return t?t.datatype==="http://www.w3.org/2001/XMLSchema#dateTime"?new Date(t.value).toUTCString():t.type==="uri"&&(t.value.toLowerCase().endsWith(".jpg")||t.value.toLowerCase().endsWith(".png"))?Ne.jsx("img",{src:t.value}):t.type==="uri"?Ne.jsx("a",{href:t.value,target:"_blank",children:t.value.replace("http://www.wikidata.org/","")}):t.value:Ne.jsx("code",{children:"undefined"})}const JAe="_chat_m8boe_24",eTe="_user_m8boe_38",tTe="_system_m8boe_44",rTe="_loading_m8boe_50",Dl={"chat-container":"_chat-container_m8boe_1","chat-settings-button":"_chat-settings-button_m8boe_1","chat-scroll-container":"_chat-scroll-container_m8boe_1","chat-entry":"_chat-entry_m8boe_24",chat:JAe,user:eTe,system:tTe,"copy-query-buttons":"_copy-query-buttons_m8boe_47",loading:rTe};function Rne({children:t}){return Ne.jsx("p",{style:{color:"red"},children:t})}function Ms(t){return e=>typeof e=="string"&&new RegExp(t.source,t.flags).test(e)}const nTe=Ms(/^[1-9][0-9]*$/),B6=Ms(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),iTe=Ms(/^E[1-9][0-9]*$/),$C=Ms(/^Q[1-9][0-9]*$/),VM=Ms(/^P[1-9][0-9]*$/),Nne=Ms(/^L[1-9][0-9]*$/),Fne=Ms(/^L[1-9][0-9]*-F[1-9][0-9]*$/),Bne=Ms(/^L[1-9][0-9]*-S[1-9][0-9]*$/),aTe=Ms(/^M[1-9][0-9]*$/),oTe=Ms(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),sTe=Ms(/^[0-9a-f]{40}$/),$ne=Ms(/^\d+$/),zne=Ms(/^(Q|P|L|M)[1-9][0-9]*$/);function lTe(t){if(typeof t!="string")return!1;const[e,r]=t.split("#");return B6(e)&&VM(r)}function jne(t){return typeof t!="string"?!1:t.startsWith("Item:")?$C(t.substring(5)):t.startsWith("Lexeme:")?Nne(t.substring(7)):t.startsWith("Property:")?VM(t.substring(9)):$C(t)}function uTe(t){if(!zne(t))throw new Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")}function cTe(t,e){let r=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return typeof e=="number"&&(r+=`?width=${e}`),r}function fTe(t){const e=t.split(/[$-]/);if(e.length===6)return e[0].toUpperCase();if(e.length===7)return e.slice(0,2).join("-").toUpperCase();throw new Error(`invalid guid: ${t}`)}const hTe=Object.freeze(Object.defineProperty({__proto__:null,getEntityIdFromGuid:fTe,getImageUrl:cTe,getNumericId:uTe,isEntityId:B6,isEntityPageTitle:jne,isEntitySchemaId:iTe,isFormId:Fne,isGuid:oTe,isHash:sTe,isItemId:$C,isLexemeId:Nne,isMediaInfoId:aTe,isNonNestedEntityId:zne,isNumericId:nTe,isPropertyClaimsId:lTe,isPropertyId:VM,isRevisionId:$ne,isSenseId:Bne},Symbol.toStringTag,{value:"Module"}));function Ju(t){return typeof t=="string"?[t]:Array.isArray(t)?[...t]:[]}function Gne(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}const Une=t=>encodeURIComponent(t).replace(/[!'()*]/g,vTe),dTe=t=>t.replace(/\s/g,"_");function pTe(t){return Array.from(new Set(t))}const vTe=t=>"%"+t.charCodeAt(0).toString(16);function Wd(t){if(t.length!==1||!Gne(t[0]))throw new Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function dw(t,e){return typeof e=="string"&&t.includes(e)}function oL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $6(t){return Object.entries(t)}function z6(t){typeof t=="object"&&(t=t.time);const e=t[0];let[r,n]=t.slice(1).split("T");r=r.replace(/-00/g,"-01");const i=`${r}T${n}`;return gTe(e,i)}const gTe=(t,e)=>{const r=e.split("-")[0];return t==="-"||r.length>4?mTe(t,e,r):new Date(e)},mTe=(t,e,r)=>{let n;return r.length===4?n=`${t}00${e}`:r.length===5?n=`${t}0${e}`:n=t+e,new Date(n)};function j6(t){return e=>{try{return t(e)}catch{e=typeof e=="string"?e:e.time;const n=e[0];let[i,a]=e.slice(1).split("T");if(!n||!i||!a)throw new Error("TimeInput is invalid: "+JSON.stringify(e));return i=i.replace(/-00/g,"-01"),`${n}${i}T${a}`}}}const yTe=t=>z6(t).getTime(),wTe=t=>z6(t).toISOString(),bTe=t=>{if(typeof t=="object"){const{time:e,precision:r}=t;r===9?t=e.replace("-01-01T","-00-00T"):r===10?t=e.replace("-01T","-00T"):t=e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")},Wne=j6(yTe),Vne=j6(wTe),Hne=j6(bTe),xTe=Object.freeze(Object.defineProperty({__proto__:null,wikibaseTimeToDateObject:z6,wikibaseTimeToEpochTime:Wne,wikibaseTimeToISOString:Vne,wikibaseTimeToSimpleDay:Hne},Symbol.toStringTag,{value:"Module"})),dh=t=>t.value,STe=(t,e)=>e.keepRichValues?t.value:t.value.text,Pg=(t,e)=>_Te(t,e.entityPrefix),ETe={item:"Q",lexeme:"L",property:"P"},_Te=(t,e)=>{const{value:r}=t,n=r.id||ETe[r["entity-type"]]+r["numeric-id"];return typeof e=="string"?`${e}:${n}`:n},CTe=(t,e)=>{const{value:r}=t,n=parseFloat(r.amount);if(e.keepRichValues){const i={amount:parseFloat(r.amount),unit:r.unit.replace(/^https?:\/\/.*\/entity\//,"")};return r.upperBound!=null&&(i.upperBound=parseFloat(r.upperBound)),r.lowerBound!=null&&(i.lowerBound=parseFloat(r.lowerBound)),i}else return n},kTe=(t,e)=>e.keepRichValues?t.value:[t.value.latitude,t.value.longitude],MTe=(t,e)=>{let r;if(typeof e.timeConverter=="function"?r=e.timeConverter(t.value):r=ATe(e.timeConverter)(t.value),e.keepRichValues){const{timezone:n,before:i,after:a,precision:o,calendarmodel:s}=t.value;return{time:r,timezone:n,before:i,after:a,precision:o,calendarmodel:s}}else return r},ATe=(t="iso")=>{const e=TTe[t];if(!e)throw new Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e},TTe={iso:Vne,epoch:Wne,"simple-day":Hne,none:t=>typeof t=="string"?t:t.time},OTe={commonsMedia:dh,"external-id":dh,"geo-shape":dh,"globe-coordinate":kTe,math:dh,monolingualtext:STe,"musical-notation":dh,quantity:CTe,string:dh,"tabular-data":dh,time:MTe,url:dh,"wikibase-entityid":Pg,"wikibase-form":Pg,"wikibase-item":Pg,"wikibase-lexeme":Pg,"wikibase-property":Pg,"wikibase-sense":Pg},Xne=t=>t.toLowerCase().replace(/[\s-]/g,""),Yne={};for(const[t,e]of Object.entries(OTe))Yne[Xne(t)]=e;function ITe(t,e,r,n){t=t||e.type;try{const i=Yne[Xne(t)];return i(e,r)}catch(i){throw i.message==="parsers[datatype] is not a function"&&(i.message=`${t} claim parser isn't implemented
      Claim id: ${n}
      Please report to https://github.com/maxlath/wikibase-sdk/issues`),i}}function G6(t){const e={};for(const r of t){const{rank:n}=r;e[n]=e[n]||[],e[n].push(r)}return e.preferred||e.normal||[]}function qne(t){return t.filter(e=>e.rank!=="deprecated")}function DTe(t){const e={};for(const[r,n]of $6(t))e[r]=G6(n);return e}const PTe=Object.freeze(Object.defineProperty({__proto__:null,nonDeprecatedPropertyClaims:qne,truthyClaims:DTe,truthyPropertyClaims:G6},Symbol.toStringTag,{value:"Module"}));function U6(t,e){const{propertyPrefix:r}=e,n={};for(let i in t){const a=t[i];r&&(i=r+":"+i),n[i]=W6(a,e)}return n}function W6(t,e){if(t==null||t.length===0)return[];const{keepNonTruthy:r,keepNonDeprecated:n,areSubSnaks:i}=Jne(e);return n?t=qne(t):r||i||(t=G6(t)),t=t.map(a=>sL(a,e)).filter(a=>a!==void 0),t[0]&&typeof t[0]!="object"?pTe(t):t}function Kne(t,e){const{keepQualifiers:r,keepReferences:n,keepIds:i,keepHashes:a,keepTypes:o,keepSnaktypes:s,keepRanks:l}=Jne(e),{mainsnak:u,rank:c}=t;let f,h,d,p,v,g;if(u?(h=u.datatype,d=u.datavalue,p=u.snaktype):(d=t.datavalue,h=t.datatype,p=t.snaktype,t.hash?v=!0:g=!0),d)f=ITe(h,d,e,t.id);else if(p==="somevalue")f=e.somevalueValue;else if(p==="novalue")f=e.novalueValue;else throw new Error("no datavalue or special snaktype found");if(v){if(!(a||o||s))return f;const w={value:f};return a&&(w.hash=t.hash),o&&(w.type=h),s&&(w.snaktype=p),w}if(g)return o?{type:h,value:f}:f;if(!(r||n||i||o||s||l))return f;const m={value:f};o&&(m.type=h),s&&(m.snaktype=p),l&&(m.rank=c);const y=HM(e);return y.keepHashes=a,r&&(m.qualifiers=Qne(t.qualifiers,y)),n&&(t.references=t.references||[],m.references=Zne(t.references,y)),i&&(m.id=t.id),m}function Om(t,e={}){return U6(t,e)}function tG(t,e={}){return W6(t,e)}function sL(t,e={}){return Kne(t,e)}function Qne(t,e={}){return U6(t,HM(e))}function LTe(t,e={}){return W6(t,HM(e))}function RTe(t,e={}){return Kne(t,e)}function Zne(t,e={}){return t.map(r=>NTe(r,e))}function NTe(t,e={}){const r=HM(e),n=U6(t.snaks,r);return r.keepHashes?{snaks:n,hash:t.hash}:n}const HM=(t={})=>t.areSubSnaks?t:Object.assign({},t,{areSubSnaks:!0}),FTe=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],Jne=(t={})=>(t.keepAll&&FTe.forEach(e=>{t[e]==null&&(t[e]=!0)}),t);function _b(t){const e={};for(const[r,n]of $6(t))e[r]=n!=null?n.value:null;return e}function BTe(t){const e={};for(const[r,n]of $6(t))e[r]=n!=null?n.map(i=>i.value):[];return e}function eie(t){return _b(t)}function tie(t){return _b(t)}function rie(t){return BTe(t)}function nie(t){return _b(t)}function iie(t){return _b(t)}function aie(t){return _b(t)}const oie=(t,e={})=>{const{id:r,representations:n,grammaticalFeatures:i,claims:a}=t;if(!Fne(r))throw new Error("invalid form object");return{id:r,representations:iie(n),grammaticalFeatures:i,claims:Om(a,e)}},sie=(t,e={})=>t.map(r=>oie(r,e)),lie=(t,e={})=>{const{id:r,glosses:n,claims:i}=t;if(!Bne(r))throw new Error("invalid sense object");return{id:r,glosses:aie(n),claims:Om(i,e)}};function uie(t,e={}){return t.map(r=>lie(r,e))}const lL={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},V6=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kabwiki","kawiki","kawikibooks","kawikiquote","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"],$Te="https://www.wikidata.org/wiki/";function cie({site:t,title:e}){if(Wd(arguments),!t)throw new Error("missing a site");if(!e)throw new Error("missing a title");if(oL(JS,t))return JS[t](e);const r=t.replace(/wiki$/,"");if(oL(JS,r))return JS[r](e);const{lang:n,project:i}=fie(t);return e=Une(dTe(e)),`https://${n}.${i}.org/wiki/${e}`}const dp=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,JS={commons:dp("commons"),foundation:dp("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:dp("meta"),outreach:dp("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:dp("species"),wikidata:t=>{const e=zTe[t[0]];let r=e?`${e}:${t}`:t;return r=r.replace("-","#"),`${$Te}${r}`},wikifunctions:dp("wikifunctions"),wikimania:dp("wikimania")},zTe={E:"EntitySchema",L:"Lexeme",P:"Property"},jTe=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function fie(t){if(t.startsWith("http")){const e=t,r=e.match(jTe);if(!r)throw new Error(`invalid sitelink url: ${e}`);let[n,i,a]=r.slice(1);if(a=decodeURIComponent(a),n==="commons")return{lang:"en",project:"commons",key:"commons",title:a,url:e};if(!dw(UTe,i))throw new Error(`project is unknown: ${i}`);if(n==="www")return{lang:"en",project:i,key:i,title:a,url:e};const s=`${n.replace(/-/g,"_")}${i}`.replace("wikipedia","wiki");return{lang:n,project:i,key:s,title:a,url:e}}else{if(oL(lL,t))return{lang:"en",project:lL[t],key:t};if(!dw(V6,t))throw new Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,r,n]=t.split("wik");if(n!=null)throw new Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");const i=die[r];if(!i)throw new Error(`sitelink project not found: ${i}`);return{lang:e,project:i,key:t}}}const hie=t=>dw(V6,t),GTe=hie,die={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},UTe=[...Object.values(die),...Object.values(lL)],WTe=Object.freeze(Object.defineProperty({__proto__:null,getSitelinkData:fie,getSitelinkUrl:cie,isSite:hie,isSitelinkKey:GTe},Symbol.toStringTag,{value:"Module"}));function pie(t,e={}){let{addUrl:r,keepBadges:n,keepAll:i}=e;return n=n||i,Object.keys(t).reduce(VTe({sitelinks:t,addUrl:r,keepBadges:n}),{})}const VTe=({sitelinks:t,addUrl:e,keepBadges:r})=>(n,i)=>{if(t[i]==null)return n[i]=t[i],n;const{title:a,badges:o}=t[i];return e||r?(n[i]={title:a},e&&(n[i].url=cie({site:i,title:a})),r&&(n[i].badges=o)):n[i]=a,n},HTe={labels:eie,descriptions:tie,aliases:rie,claims:Om,statements:Om,sitelinks:pie,lemmas:nie,forms:sie,senses:uie},vie=(t,e={})=>{const{type:r}=t,n={id:t.id,type:r,modified:t.modified};return r==="item"?(La(t,n,"labels"),La(t,n,"descriptions"),La(t,n,"aliases"),La(t,n,"claims",e),La(t,n,"sitelinks",e)):r==="property"?(n.datatype=t.datatype,La(t,n,"labels"),La(t,n,"descriptions"),La(t,n,"aliases"),La(t,n,"claims",e)):r==="lexeme"?(La(t,n,"lemmas"),n.lexicalCategory=t.lexicalCategory,n.language=t.language,La(t,n,"claims",e),La(t,n,"forms",e),La(t,n,"senses",e)):r==="mediainfo"&&(La(t,n,"labels"),La(t,n,"descriptions"),La(t,n,"statements",e)),n},La=(t,e,r,n)=>{t[r]!=null&&(e[r]=HTe[r](t[r],n))},gie=(t,e={})=>{t.entities&&(t=t.entities);const{entityPrefix:r}=e,n={};for(const[i,a]of Object.entries(t)){const o=r?`${r}:${i}`:i;n[o]=vie(a,e)}return n};function XTe(t){t=t.body||t;const{entities:e}=t;return gie(e)}function YTe(t){return t=t.body||t,t.query.search.map(e=>e.title)}const qTe=Object.freeze(Object.defineProperty({__proto__:null,entities:XTe,pagesTitles:YTe},Symbol.toStringTag,{value:"Module"}));function KTe(t,e={}){typeof t=="string"&&(t=JSON.parse(t));const{vars:r}=t.head,n=t.results.bindings;if(r.length===1&&e.minimize){const s=r[0];return n.map(l=>uL(l[s])).filter(l=>l!=null)}const{richVars:i,associatedVars:a,standaloneVars:o}=JTe(r);return n.map(s=>eOe(i,a,o,s))}function uL(t){if(!t||t.type==="bnode")return null;const{value:e}=t;if(t.type==="uri")return QTe(e);const r=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return r==="decimal"||r==="integer"||r==="float"||r==="double"?parseFloat(e):r==="boolean"?e==="true":e}function QTe(t){return t.match(/http.*\/entity\/statement\//)?ZTe(t):t.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}function ZTe(t){t=t.replace(/^https?:\/\/.*\/entity\/statement\//,"");const e=t.split("-");return e[0]+"$"+e.slice(1).join("-")}function JTe(t){let e=t.filter(a=>{const o=new RegExp(`^${a}[A-Z]\\w+`);return t.some(s=>o.test(s))});e=e.filter(a=>!e.some(o=>a!==o&&a.startsWith(o)));const r=new RegExp(`^(${e.join("|")})[A-Z]`),n=t.filter(a=>r.test(a)),i=t.filter(a=>!e.includes(a)&&!r.test(a));return{richVars:e,associatedVars:n,standaloneVars:i}}function eOe(t,e,r,n){const i={};for(const a of t){const o={},s=uL(n[a]);s!=null&&(o.value=s);for(const l of e)l.startsWith(a)&&tOe(n,a,l,o);Object.keys(o).length>0&&(i[a]=o)}for(const a of r){const o=uL(n[a]);o!=null&&(i[a]=o)}return i}function tOe(t,e,r,n){let i=r.split(e)[1];i=i[0].toLowerCase()+i.slice(1),i=i==="altLabel"?"aliases":i;const a=t[r];a!=null&&(n[i]=a.value)}const rOe=Object.freeze(Object.defineProperty({__proto__:null,aliases:rie,claim:sL,claims:Om,descriptions:tie,entities:gie,entity:vie,form:oie,forms:sie,glosses:aie,labels:eie,lemmas:nie,propertyClaims:tG,propertyQualifiers:LTe,propertySnaks:tG,qualifier:RTe,qualifiers:Qne,references:Zne,representations:iie,sense:lie,senses:uie,sitelinks:pie,snak:sL,snaks:Om,sparqlResults:KTe},Symbol.toStringTag,{value:"Module"})),nOe=/^\d+[|\d]*$/;function iOe(t){return function(r){Wd(arguments);for(const[p,v]of Object.entries(r))if(p.startsWith("sr")){const g=p.replace(/^sr/,"");if(r[g]!=null)throw new Error(`${g} and ${p} are the same`);r[g]=v}const{search:n,haswbstatement:i,format:a="json",limit:o,offset:s,profile:l,sort:u}=r;let{namespace:c,prop:f}=r;if(!(n||i))throw new Error('missing "search" or "haswbstatement" parameter');let h="";if(n&&(h+=n),i){const p=i instanceof Array?i:[i];for(const v of p)v[0]==="-"?h+=` -haswbstatement:${v.slice(1)}`:h+=` haswbstatement:${v}`}if(o!=null&&(typeof o!="number"||o<1))throw new Error(`invalid limit: ${o}`);if(s!=null&&(typeof s!="number"||s<0))throw new Error(`invalid offset: ${s}`);if(c instanceof Array?c=c.join("|"):typeof c=="number"&&(c=c.toString()),c&&!nOe.test(c))throw new Error(`invalid namespace: ${c}`);if(l!=null&&typeof l!="string")throw new Error(`invalid profile: ${l} (${typeof l}, expected string)`);if(u!=null&&typeof u!="string")throw new Error(`invalid sort: ${u} (${typeof u}, expected string)`);let d;if(f!=null){if(f instanceof Array&&(f=f.join("|")),typeof f!="string")throw new Error(`invalid prop: ${f} (${typeof f}, expected string)`);d=f.toString()}return t({action:"query",list:"search",srsearch:h.trim(),format:a,srnamespace:c,srlimit:o,sroffset:s,srqiprofile:l,srsort:u,srprop:d})}}function XM(t,e){return function(r){if(!e(r))throw new Error(`invalid ${t}: ${r} (type: ${lOe(r)})`)}}const mie=XM("entity id",B6),aOe=XM("property id",VM),oOe=XM("entity page title",jne),sOe=XM("revision id",$ne);function lOe(t){const e=typeof t;if(e==="object"){if(t===null)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return e==="number"&&Number.isNaN(t)?"NaN":e}function yie(t){return function({ids:r,languages:n,props:i,format:a="json",redirects:o}){if(Wd(arguments),!(r&&r.length>0))throw new Error("no id provided");r=Ju(r),r.forEach(l=>mie(l)),r.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);const s={action:"wbgetentities",ids:r.join("|"),format:a};return o===!1&&(s.redirects="no"),n&&(n=Ju(n),s.languages=n.join("|")),i&&i.length>0&&(s.props=Ju(i).join("|")),t(s)}}function uOe(t){return function({titles:r,sites:n,languages:i,props:a,format:o="json",redirects:s}){if(Wd(arguments),!(r&&r.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),r=Ju(r),n=Ju(n).map(cOe),a=Ju(a);const l={action:"wbgetentities",titles:r.join("|"),sites:n.join("|"),format:o};return n.length===1&&r.length===1&&(l.normalize=!0),i&&(i=Ju(i),l.languages=i.join("|")),a.length>0&&(l.props=a.join("|")),s===!1&&(l.redirects="no"),t(l)}}function cOe(t){return dw(V6,t)?t:t.replace(/-/g,"_")+"wiki"}function fOe(t,e){return function({id:n,revision:i}){return Wd(arguments),mie(n),sOe(i),`${t}/${e}/index.php?title=Special:EntityData/${n}.json&revision=${i}`}}function hOe(t){const e=yie(t);return function({ids:n,languages:i,props:a,format:o,redirects:s}){if(Wd(arguments),!(n instanceof Array))throw new Error("getManyEntities expects an array of ids");return dOe(n).map(l=>e({ids:l,languages:i,props:a,format:o,redirects:s}))}}function dOe(t){const e=[];for(;t.length>0;){const r=t.slice(0,50);t=t.slice(50),e.push(r)}return e}function wie(t){return function(r){const n=Une(r);return`${t}?format=json&query=${n}`}}const pOe="FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",vOe=t=>{const e=wie(t);return function(n){let{properties:i}=n;const{values:a,limit:o,caseInsensitive:s,keepProperties:l}=n,u=s?yOe:mOe,c=l?"":pOe;i=Ju(i),i.forEach(d=>aOe(d));let h=`SELECT DISTINCT ?subject WHERE { ${gOe(a,u,i,c)} }`;return o&&(h+=` LIMIT ${o}`),e(h)}},gOe=(t,e,r,n)=>(r=r.map(wOe).join("|"),t instanceof Array?"{ "+t.map(rG).map(a=>e(r,a,n)).join("} UNION {")+" }":e(r,rG(t),n)),rG=t=>($C(t)?t=`wd:${t}`:typeof t=="string"&&(t=`'${t}'`),t),mOe=(t,e,r)=>`?subject ${t} ${e} .
    ${r}`,yOe=(t,e,r)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${r}`,wOe=t=>"wdt:"+t;function bOe(t){return function({ids:r,format:n,limit:i,start:a,end:o,prop:s,user:l,excludeuser:u,tag:c}){Wd(arguments),r=Ju(r),r.forEach(d=>oOe(d));const f=r.length===1,h={action:"query",prop:"revisions"};return h.titles=r.join("|"),h.format=n||"json",f&&(h.rvlimit=i||"max"),f&&a&&(h.rvstart=nG(a)),f&&o&&(h.rvend=nG(o)),s?h.rvprop=Ju(s).join("|"):h.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",h.rvslots="*",l&&(h.rvuser=l),u&&(h.rvexcludeuser=u),c&&(h.rvtag=c),t(h)}}const nG=t=>typeof t=="number"&&t<xOe?t:Math.trunc(new Date(t).getTime()/1e3),xOe=new Date("2000-01-01").getTime(),SOe=["item","property","lexeme","form","sense"],EOe=t=>function({search:r,language:n="en",uselang:i,limit:a="20",continue:o="0",format:s="json",type:l="item"}){if(Wd(arguments),i=i||n,!(r&&r.length>0))throw new Error("search can't be empty");if(!dw(SOe,l))throw new Error(`invalid type: ${l}`);return t({action:"wbsearchentities",search:r,language:n,limit:a,continue:o,format:s,uselang:i,type:l})},_Oe=typeof location<"u"&&typeof document<"u";function COe(t){return e=>{_Oe&&(e=Object.assign(Object.assign({},e),{origin:"*"}));const r=Object.entries(e).filter(([,i])=>i!=null).map(([i,a])=>[i,String(a)]),n=new URLSearchParams(r).toString();return t+"?"+n}}const kOe=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,MOe=Object.assign(Object.assign(Object.assign(Object.assign({simplify:rOe,parse:qTe},hTe),WTe),PTe),xTe);function AOe(t){if(!Gne(t))throw new Error("invalid config");const{instance:e,sparqlEndpoint:r}=t;let{wgScriptPath:n="w"}=t;if(n=n.replace(/^\//,""),!(e||r))throw new Error(`one of instance or sparqlEndpoint should be set at initialization.
${kOe}`);let i,a,o;if(e){iG("instance",e),a=e.replace(/\/$/,"").replace(`/${n}/api.php`,""),o=`${a}/${n}/api.php`;const l=COe(o);i={searchEntities:EOe(l),cirrusSearchPages:iOe(l),getEntities:yie(l),getManyEntities:hOe(l),getRevisions:bOe(l),getEntityRevision:fOe(e,n),getEntitiesFromSitelinks:uOe(l)}}else i={searchEntities:pp("searchEntities"),cirrusSearchPages:pp("cirrusSearchPages"),getEntities:pp("getEntities"),getManyEntities:pp("getManyEntities"),getRevisions:pp("getRevisions"),getEntityRevision:pp("getEntityRevision"),getEntitiesFromSitelinks:pp("getEntitiesFromSitelinks")};let s;return r?(iG("sparqlEndpoint",r),s={sparqlQuery:wie(r),getReverseClaims:vOe(r)}):s={sparqlQuery:aG("sparqlQuery"),getReverseClaims:aG("getReverseClaims")},Object.assign(Object.assign(Object.assign({instance:{root:a,apiEndpoint:o}},MOe),i),s)}const iG=(t,e)=>{if(!(typeof e=="string"&&e.startsWith("http")))throw new Error(`invalid ${t}: ${e}`)},bie=t=>e=>()=>{throw new Error(`${e} requires ${t} to be set at initialization`)},aG=bie("a sparqlEndpoint"),pp=bie("an instance"),xie=AOe({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"});function TOe(t){const e=xie.searchEntities({search:t,limit:5});return fetch(e).then(b6)}async function OOe(t){const e=`SELECT DISTINCT ?wd ?wdLabel ?wdDescription
  WHERE {
    VALUES (?item) {(wd:${t})}
    ?item ?p ?statement .   ?statement ?ps ?ps_ .    ?wd wikibase:claim ?p.   ?wd wikibase:statementProperty ?ps.   SERVICE wikibase:label {
      bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".    
    }         
  }`;return await x6(e)}async function IOe(t,e){const r=`SELECT ?child ?childLabel ?childDescription
WHERE {
  wd:${t} wdt:${e} ?child.
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}`;return await x6(r)}const cL="ENTITY SEARCH:",fL="PROPERTIES SEARCH:",zC="ENTITY PROPERTY SEARCH:",oG=`Your goal is to find the necessary entity and property IDs to construct a SPARQL query that answers the user's question. Do not respond with a trailing period. Do not assume you already know the correct entity and property IDs; you should search for them. Make sure to filter the IDs for the ones that are most relevant to the question. Respond in one of these ways:
- To fuzzy search for an entity, start the response with '${cL}', followed by an entity name you want to search for. The system will respond with possible entity resolutions in Wikidata. 
- To get all the properties for an entity, start the response with '${fL}', followed by the ID of the entity. The user will respond with all the properties associated with that entity.
- To find what entities are connected to the original entity via a property, start the response with '${zC}', followed by the entity ID then the property ID. Ex: '${zC} Q123 P456'
- Respond with 'STOP' if and only if you have searched for and successfully identified all necessary IDs from Wikidata to construct the query.`,DOe=20,POe=`You are an expert at generating SPARQL queries for the Wikidata Knowledge Graph from natural language. 
Entity IDs are prepended with 'wd' and property IDs are prepended with 'wdt'. 
Your task is to convert the natural language instruction into a SPARQL query.
The following are four examples in which I am showcasing a natural language instruction (NLI) and the converted SPARQL Query. 
  NLI: Who are creators of Apple and what are their birthdates?
  SPARQL Query:
    SELECT ?founder ?founderLabel ?birthdate
      WHERE {
        wd:Q312 wdt:P112 ?founder.   # Q312 represents Apple and P112 represents founder
        ?founder wdt:P569 ?birthdate. # P569 represents date of birth
        
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
    }
  NLI: Who are the current heads of state for all countries in the world? 
  SPARQL Query: 
    SELECT ?country ?countryLabel ?headOfState ?headOfStateLabel 
      WHERE { 
        ?country wdt:P31 wd:Q6256;     # Instance of: country 
        p:P35 ?statement.    # has head of government statement 
        ?statement ps:P35 ?headOfState;   # head of government property 
        pq:P580 ?startDate.   # start date of the term 
        FILTER NOT EXISTS { ?statement pq:P582 ?endDate }  # Ensure current head of state 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
      ORDER BY ?countryLabel 
  NLI: What are the top five tallest mountains in the world and their respective heights? 
  SPARQL Query: 
    SELECT ?mountain ?mountainLabel ?height 
      WHERE { 
        ?mountain wdt:P31 wd:Q8502;         # Instance of: mountain 
        wdt:P2044 ?height.       # Height property 
        FILTER (?height >= 8000)           # Minimum height of 8000 meters 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      } 
    ORDER BY DESC(?height) 
    LIMIT 5 
  NLI: Which symphonies were composed by Ludwig van Beethoven? 
  SPARQL Query: 
    SELECT ?composition (SAMPLE(?compositionLabel) as ?compositionLabel) 
      WHERE { 
        ?composition wdt:P31 wd:Q105543609;         # Instance of: Beethoven's symphonies 
        wdt:P86 wd:Q255;               # Composer: Ludwig van Beethoven 
        rdfs:label ?compositionLabel. 
        FILTER(CONTAINS(LCASE(?compositionLabel), "symphony")) 
        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } 
      }  
    GROUP BY ?composition 
  Start the SPARQL query with \`\`\`sparql and end the query with \`\`\`. After you generate a SPARQL query, you briefly explain, as concisely as possible, to the user why the query addresses their original question. Keep your explanation as short as possible and only further explain when asked.`;async function LOe(t,e){let r=await t.sendMessages([{content:oG,role:"system"}]),n=0;for(;n<DOe;){n++;const i=r.trim();if(i.toUpperCase()==="STOP")break;i.includes(cL)?r=await ROe(t,i.split(cL)[1].trim()):i.includes(fL)?r=await NOe(t,i.split(fL)[1].trim()):i.startsWith(zC)?r=await FOe(t,i.replace(zC,"").trim()):r=await t.sendMessages([{content:`That was an invalid response. If you are done, just respond with STOP. Follow the specified format. ${oG}`,role:"system"}])}return await t.sendMessages([{content:POe+` Now construct a query that answers the user's question: ${e}`,role:"system"}])}async function ROe(t,e){const r=(await TOe(e)).search,n=r.map(i=>`ID: ${i.id}, label: ${i.label}, description: ${i.description}`).join(`
`);return console.log("candidateEntitiesText",n),r.length===0?await t.sendMessages([{content:"Wikidata did not resolve any entities. You may need to rephrase or simplify your entity search",role:"system"}]):await t.sendMessages([{content:n,role:"system"}])}async function NOe(t,e){const r=await OOe(e),n=r.results.bindings.map(a=>r.head.vars.map(o=>{var s,l;return((l=(s=a[o])==null?void 0:s.value)==null?void 0:l.replace("http://www.wikidata.org/entity/",""))||""})),i=n.map(a=>`ID: ${a[0]}, label: ${a[1]}, description: ${a[2]}`).join(`
`);return console.log("propertiesMessageText",i),n.length===0?await t.sendMessages([{content:"Wikidata did not resolve any properties for that entity. Are you sure that entity exists?",role:"system"}]):await t.sendMessages([{content:i,role:"system"}])}async function FOe(t,e){let r=e.split(" ");if(r.length!==2&&(r=e.split(", ")),r.length!==2)return await t.sendMessages([{content:"Your response did not follow the correct format. Please try again.",role:"system"}]);const[n,i]=r,a=await IOe(n,i),o=a.results.bindings.map(s=>{var f,h,d;const l=(f=s==null?void 0:s.child)==null?void 0:f.value.replace("http://www.wikidata.org/entity/",""),u=(h=s==null?void 0:s.childLabel)==null?void 0:h.value,c=(d=s==null?void 0:s.childDescription)==null?void 0:d.value;return`ID: ${l}, label: ${u}, description: ${c}`}).join(`
`);return console.log("handleFindTailEntities propertiesMessageText",o),a.results.bindings.length===0?await t.sendMessages([{content:"Wikidata did not resolve any entities for that entity and property. Are you sure that entity has that property?",role:"system"}]):await t.sendMessages([{content:o,role:"system"}])}function BOe(){const t=Eb(),e=yf(g=>g.chatHistory.fullChatHistory),r=yf(g=>g.chatHistory.showFullChatHistory),n=yf(g=>g.chatHistory.simpleChatHistory),i=r?e:n,a=oe.useRef(null);oe.useEffect(()=>{a.current&&a.current.scrollIntoView({behavior:"smooth"})},[i.length]);const[o,s]=oe.useState(!1),l=()=>s(!1),[u,c]=oe.useState(""),f=xne(),{error:h,isPending:d,mutate:p,reset:v}=Ure({mutationKey:["submit-chat"],mutationFn:async g=>{t(Dj({role:"user",content:g}));const m=await f.sendMessages([{content:g,role:"user"}]),y=m.includes("BUILD QUERY")?await LOe(f,g):m;t(Dj({content:y,role:"assistant"}))},onError(g){console.error(g)}});return Ne.jsxs("div",{id:Dl["chat-container"],children:[Ne.jsx(ys,{opened:o,onClose:l,title:"Settings",children:Ne.jsx(AM,{checked:r,onChange:()=>t(Vke()),label:"Show full chat history"})}),Ne.jsx(bv,{id:Dl["chat-settings-button"],size:"sm",variant:"filled","aria-label":"Show Settings",onClick:()=>s(!0),children:Ne.jsx(sCe,{})}),Ne.jsxs("div",{id:Dl["chat-scroll-container"],children:[i.map((g,m)=>Ne.jsx("div",{className:`${Dl["chat-entry"]} ${Dl[g.role]}`,children:g.role==="assistant"?Ne.jsx($Oe,{text:g.content,setInputText:c}):Ne.jsx("pre",{className:Dl.chat,children:g.content})},m)),Ne.jsx("div",{ref:a})]}),h&&Ne.jsx(ys,{opened:!0,onClose:v,title:"LLM Error",children:Ne.jsx(Rne,{children:h.message})}),d&&Ne.jsx("p",{className:Dl.loading,children:"Loading..."}),Ne.jsx("form",{onSubmit:g=>{g.preventDefault(),p(u),c("")},children:Ne.jsx(f6,{id:Dl.input,onChange:g=>c(g.currentTarget.value),placeholder:"Chat...",size:"md",value:u})})]})}function $Oe({setInputText:t,text:e}){const r=zOe(e);return r?Ne.jsx("div",{className:Dl.chat,children:Ne.jsx(jOe,{pre:r.pre,query:r.query.trim(),post:r.post,setInputText:t})}):Ne.jsx("pre",{className:Dl.chat,children:e})}function zOe(t){let e=t.split("```sparql");if(e.length===2){const[r,n]=e[1].split("```");return{pre:e[0],query:r,post:n}}if(e=t.split("```\nSELECT"),e.length===2){const[r,n]=e[1].split("```");return{pre:e[0],query:"SELECT"+r,post:n}}if(e=t.split("SELECT"),e.length===2){const[r,n]=e[1].split(`

`);return{pre:e[0],query:"SELECT"+r,post:n}}return null}function jOe({pre:t,query:e,post:r,setInputText:n}){const i=Eb(),{runQuery:a}=L6();return Ne.jsxs(Ne.Fragment,{children:[Ne.jsx("pre",{children:t}),Ne.jsx($N,{extensions:[uM.define(Lee)],value:e}),Ne.jsx("div",{className:Dl["copy-query-buttons"],children:Ne.jsxs("div",{children:[Ne.jsxs(Yu,{onClick:()=>i(uC(e)),variant:"outline",color:"white",children:["Copy query over to examine ",Ne.jsx(lCe,{})]}),Ne.jsx("br",{}),Ne.jsxs(Yu,{onClick:()=>{i(uC(e)),a(e)},children:["Copy query over and run ",Ne.jsx(hre,{})]})]})}),Ne.jsx("pre",{children:r}),Ne.jsx("br",{}),Ne.jsx(Yu,{onClick:()=>n("You identified the wrong data. I was actually looking for: "),children:"You identified the wrong data"}),Ne.jsx("br",{}),Ne.jsx(Yu,{onClick:()=>n("You misunderstood my question. I was actually asking about: "),children:"You misunderstood my question"}),Ne.jsx("br",{}),Ne.jsx(Yu,{onClick:()=>n("I want to ask something different: "),children:"I want to ask something different"})]})}async function GOe(t){const e=xie.getEntities({ids:t,languages:["en"],format:"json"});return await fetch(e).then(b6)}const Sie=t=>{const e=t.match(/(?:wd|wdt|ps|pq):[QP]\d+/g);return LMe({queryKey:[`entity-ids-${e==null?void 0:e.join(", ")}`],queryFn:async()=>(console.log("IDs",e),e?await GOe(e.map(r=>r.split(":")[1])):null)})},UOe={"id-table-container":"_id-table-container_1pso5_1"};function WOe(){const t=yf(a=>a.queryValue.queryValue),{data:e,error:r,isLoading:n}=Sie(t);if(!n&&!r&&!e)return null;const i=(()=>{if(n)return Ne.jsx("p",{children:"Loading..."});if(r)return Ne.jsxs("p",{children:["Error: ",r.message]});if(e){const a=Object.entries(e.entities).map(([o,s])=>{var l,u,c,f;return{id:o,label:((u=(l=s.labels)==null?void 0:l.en)==null?void 0:u.value)||"",description:((f=(c=s.descriptions)==null?void 0:c.en)==null?void 0:f.value)||""}});return Ne.jsx(VOe,{data:a})}else return Ne.jsx("p",{children:"No ID data"})})();return Ne.jsxs("div",{id:UOe["id-table-container"],children:[Ne.jsx(Cd,{order:4,children:"Entity-Relation Table from KG"}),i]})}function VOe({data:t}){const e=Dne(),r=[e.accessor("id",{}),e.accessor("label",{}),e.accessor("description",{})],n=Lne({columns:r,data:t,getCoreRowModel:Pne()});return Ne.jsxs(Ln,{children:[Ne.jsx(Ln.Thead,{children:n.getHeaderGroups().map(i=>Ne.jsx(Ln.Tr,{children:i.headers.map(a=>Ne.jsx(Ln.Th,{children:a.isPlaceholder?null:BC(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),Ne.jsx(Ln.Tbody,{children:n.getRowModel().rows.map(i=>Ne.jsx(Ln.Tr,{children:i.getVisibleCells().map(a=>Ne.jsx(Ln.Td,{children:BC(a.column.columnDef.cell,a.getContext())},a.id))},i.id))})]})}var Eie=typeof global=="object"&&global&&global.Object===Object&&global,HOe=typeof self=="object"&&self&&self.Object===Object&&self,eu=Eie||HOe||Function("return this")(),gc=eu.Symbol,_ie=Object.prototype,XOe=_ie.hasOwnProperty,YOe=_ie.toString,u1=gc?gc.toStringTag:void 0;function qOe(t){var e=XOe.call(t,u1),r=t[u1];try{t[u1]=void 0;var n=!0}catch{}var i=YOe.call(t);return n&&(e?t[u1]=r:delete t[u1]),i}var KOe=Object.prototype,QOe=KOe.toString;function ZOe(t){return QOe.call(t)}var JOe="[object Null]",eIe="[object Undefined]",sG=gc?gc.toStringTag:void 0;function $v(t){return t==null?t===void 0?eIe:JOe:sG&&sG in Object(t)?qOe(t):ZOe(t)}function mc(t){return t!=null&&typeof t=="object"}var tIe="[object Symbol]";function YM(t){return typeof t=="symbol"||mc(t)&&$v(t)==tIe}function rIe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Ss=Array.isArray,nIe=1/0,lG=gc?gc.prototype:void 0,uG=lG?lG.toString:void 0;function Cie(t){if(typeof t=="string")return t;if(Ss(t))return rIe(t,Cie)+"";if(YM(t))return uG?uG.call(t):"";var e=t+"";return e=="0"&&1/t==-nIe?"-0":e}var iIe=/\s/;function aIe(t){for(var e=t.length;e--&&iIe.test(t.charAt(e)););return e}var oIe=/^\s+/;function sIe(t){return t&&t.slice(0,aIe(t)+1).replace(oIe,"")}function sl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cG=NaN,lIe=/^[-+]0x[0-9a-f]+$/i,uIe=/^0b[01]+$/i,cIe=/^0o[0-7]+$/i,fIe=parseInt;function fG(t){if(typeof t=="number")return t;if(YM(t))return cG;if(sl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=sl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=sIe(t);var r=uIe.test(t);return r||cIe.test(t)?fIe(t.slice(2),r?2:8):lIe.test(t)?cG:+t}function H6(t){return t}var hIe="[object AsyncFunction]",dIe="[object Function]",pIe="[object GeneratorFunction]",vIe="[object Proxy]";function X6(t){if(!sl(t))return!1;var e=$v(t);return e==dIe||e==pIe||e==hIe||e==vIe}var oI=eu["__core-js_shared__"],hG=function(){var t=/[^.]+$/.exec(oI&&oI.keys&&oI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gIe(t){return!!hG&&hG in t}var mIe=Function.prototype,yIe=mIe.toString;function zv(t){if(t!=null){try{return yIe.call(t)}catch{}try{return t+""}catch{}}return""}var wIe=/[\\^$.*+?()[\]{}|]/g,bIe=/^\[object .+?Constructor\]$/,xIe=Function.prototype,SIe=Object.prototype,EIe=xIe.toString,_Ie=SIe.hasOwnProperty,CIe=RegExp("^"+EIe.call(_Ie).replace(wIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kIe(t){if(!sl(t)||gIe(t))return!1;var e=X6(t)?CIe:bIe;return e.test(zv(t))}function MIe(t,e){return t==null?void 0:t[e]}function jv(t,e){var r=MIe(t,e);return kIe(r)?r:void 0}var hL=jv(eu,"WeakMap"),dG=Object.create,AIe=function(){function t(){}return function(e){if(!sl(e))return{};if(dG)return dG(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function TIe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function OIe(){}function kie(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var IIe=800,DIe=16,PIe=Date.now;function LIe(t){var e=0,r=0;return function(){var n=PIe(),i=DIe-(n-r);if(r=n,i>0){if(++e>=IIe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function RIe(t){return function(){return t}}var jC=function(){try{var t=jv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),NIe=jC?function(t,e){return jC(t,"toString",{configurable:!0,enumerable:!1,value:RIe(e),writable:!0})}:H6;const FIe=NIe;var BIe=LIe(FIe);function $Ie(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function zIe(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function jIe(t){return t!==t}function GIe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function UIe(t,e,r){return e===e?GIe(t,e,r):zIe(t,jIe,r)}function WIe(t,e){var r=t==null?0:t.length;return!!r&&UIe(t,e,0)>-1}var VIe=9007199254740991,HIe=/^(?:0|[1-9]\d*)$/;function Y6(t,e){var r=typeof t;return e=e??VIe,!!e&&(r=="number"||r!="symbol"&&HIe.test(t))&&t>-1&&t%1==0&&t<e}function q6(t,e,r){e=="__proto__"&&jC?jC(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Cb(t,e){return t===e||t!==t&&e!==e}var XIe=Object.prototype,YIe=XIe.hasOwnProperty;function Mie(t,e,r){var n=t[e];(!(YIe.call(t,e)&&Cb(n,r))||r===void 0&&!(e in t))&&q6(t,e,r)}function kb(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?q6(r,s,l):Mie(r,s,l)}return r}var pG=Math.max;function qIe(t,e,r){return e=pG(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=pG(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),TIe(t,this,s)}}function KIe(t,e){return BIe(qIe(t,e,H6),t+"")}var QIe=9007199254740991;function K6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=QIe}function Mb(t){return t!=null&&K6(t.length)&&!X6(t)}function ZIe(t,e,r){if(!sl(r))return!1;var n=typeof e;return(n=="number"?Mb(r)&&Y6(e,r.length):n=="string"&&e in r)?Cb(r[e],t):!1}function JIe(t){return KIe(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&ZIe(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}var eDe=Object.prototype;function qM(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||eDe;return t===r}function tDe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var rDe="[object Arguments]";function vG(t){return mc(t)&&$v(t)==rDe}var Aie=Object.prototype,nDe=Aie.hasOwnProperty,iDe=Aie.propertyIsEnumerable,aDe=vG(function(){return arguments}())?vG:function(t){return mc(t)&&nDe.call(t,"callee")&&!iDe.call(t,"callee")};const pw=aDe;function oDe(){return!1}var Tie=typeof ds=="object"&&ds&&!ds.nodeType&&ds,gG=Tie&&typeof ps=="object"&&ps&&!ps.nodeType&&ps,sDe=gG&&gG.exports===Tie,mG=sDe?eu.Buffer:void 0,lDe=mG?mG.isBuffer:void 0,Im=lDe||oDe,uDe="[object Arguments]",cDe="[object Array]",fDe="[object Boolean]",hDe="[object Date]",dDe="[object Error]",pDe="[object Function]",vDe="[object Map]",gDe="[object Number]",mDe="[object Object]",yDe="[object RegExp]",wDe="[object Set]",bDe="[object String]",xDe="[object WeakMap]",SDe="[object ArrayBuffer]",EDe="[object DataView]",_De="[object Float32Array]",CDe="[object Float64Array]",kDe="[object Int8Array]",MDe="[object Int16Array]",ADe="[object Int32Array]",TDe="[object Uint8Array]",ODe="[object Uint8ClampedArray]",IDe="[object Uint16Array]",DDe="[object Uint32Array]",In={};In[_De]=In[CDe]=In[kDe]=In[MDe]=In[ADe]=In[TDe]=In[ODe]=In[IDe]=In[DDe]=!0;In[uDe]=In[cDe]=In[SDe]=In[fDe]=In[EDe]=In[hDe]=In[dDe]=In[pDe]=In[vDe]=In[gDe]=In[mDe]=In[yDe]=In[wDe]=In[bDe]=In[xDe]=!1;function PDe(t){return mc(t)&&K6(t.length)&&!!In[$v(t)]}function Q6(t){return function(e){return t(e)}}var Oie=typeof ds=="object"&&ds&&!ds.nodeType&&ds,p2=Oie&&typeof ps=="object"&&ps&&!ps.nodeType&&ps,LDe=p2&&p2.exports===Oie,sI=LDe&&Eie.process,Dm=function(){try{var t=p2&&p2.require&&p2.require("util").types;return t||sI&&sI.binding&&sI.binding("util")}catch{}}(),yG=Dm&&Dm.isTypedArray,KM=yG?Q6(yG):PDe,RDe=Object.prototype,NDe=RDe.hasOwnProperty;function Iie(t,e){var r=Ss(t),n=!r&&pw(t),i=!r&&!n&&Im(t),a=!r&&!n&&!i&&KM(t),o=r||n||i||a,s=o?tDe(t.length,String):[],l=s.length;for(var u in t)(e||NDe.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Y6(u,l)))&&s.push(u);return s}function Die(t,e){return function(r){return t(e(r))}}var FDe=Die(Object.keys,Object),BDe=Object.prototype,$De=BDe.hasOwnProperty;function Pie(t){if(!qM(t))return FDe(t);var e=[];for(var r in Object(t))$De.call(t,r)&&r!="constructor"&&e.push(r);return e}function QM(t){return Mb(t)?Iie(t):Pie(t)}function zDe(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var jDe=Object.prototype,GDe=jDe.hasOwnProperty;function UDe(t){if(!sl(t))return zDe(t);var e=qM(t),r=[];for(var n in t)n=="constructor"&&(e||!GDe.call(t,n))||r.push(n);return r}function Ab(t){return Mb(t)?Iie(t,!0):UDe(t)}var WDe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,VDe=/^\w*$/;function Z6(t,e){if(Ss(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||YM(t)?!0:VDe.test(t)||!WDe.test(t)||e!=null&&t in Object(e)}var vw=jv(Object,"create");function HDe(){this.__data__=vw?vw(null):{},this.size=0}function XDe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var YDe="__lodash_hash_undefined__",qDe=Object.prototype,KDe=qDe.hasOwnProperty;function QDe(t){var e=this.__data__;if(vw){var r=e[t];return r===YDe?void 0:r}return KDe.call(e,t)?e[t]:void 0}var ZDe=Object.prototype,JDe=ZDe.hasOwnProperty;function ePe(t){var e=this.__data__;return vw?e[t]!==void 0:JDe.call(e,t)}var tPe="__lodash_hash_undefined__";function rPe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vw&&e===void 0?tPe:e,this}function Cv(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Cv.prototype.clear=HDe;Cv.prototype.delete=XDe;Cv.prototype.get=QDe;Cv.prototype.has=ePe;Cv.prototype.set=rPe;function nPe(){this.__data__=[],this.size=0}function ZM(t,e){for(var r=t.length;r--;)if(Cb(t[r][0],e))return r;return-1}var iPe=Array.prototype,aPe=iPe.splice;function oPe(t){var e=this.__data__,r=ZM(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():aPe.call(e,r,1),--this.size,!0}function sPe(t){var e=this.__data__,r=ZM(e,t);return r<0?void 0:e[r][1]}function lPe(t){return ZM(this.__data__,t)>-1}function uPe(t,e){var r=this.__data__,n=ZM(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Ff(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ff.prototype.clear=nPe;Ff.prototype.delete=oPe;Ff.prototype.get=sPe;Ff.prototype.has=lPe;Ff.prototype.set=uPe;var gw=jv(eu,"Map");function cPe(){this.size=0,this.__data__={hash:new Cv,map:new(gw||Ff),string:new Cv}}function fPe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function JM(t,e){var r=t.__data__;return fPe(e)?r[typeof e=="string"?"string":"hash"]:r.map}function hPe(t){var e=JM(this,t).delete(t);return this.size-=e?1:0,e}function dPe(t){return JM(this,t).get(t)}function pPe(t){return JM(this,t).has(t)}function vPe(t,e){var r=JM(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Bf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Bf.prototype.clear=cPe;Bf.prototype.delete=hPe;Bf.prototype.get=dPe;Bf.prototype.has=pPe;Bf.prototype.set=vPe;var gPe="Expected a function";function J6(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(gPe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(J6.Cache||Bf),r}J6.Cache=Bf;var mPe=500;function yPe(t){var e=J6(t,function(n){return r.size===mPe&&r.clear(),n}),r=e.cache;return e}var wPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bPe=/\\(\\)?/g,xPe=yPe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wPe,function(r,n,i,a){e.push(i?a.replace(bPe,"$1"):n||r)}),e});function SPe(t){return t==null?"":Cie(t)}function Lie(t,e){return Ss(t)?t:Z6(t,e)?[t]:xPe(SPe(t))}var EPe=1/0;function eA(t){if(typeof t=="string"||YM(t))return t;var e=t+"";return e=="0"&&1/t==-EPe?"-0":e}function Rie(t,e){e=Lie(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eA(e[r++])];return r&&r==n?t:void 0}function _Pe(t,e,r){var n=t==null?void 0:Rie(t,e);return n===void 0?r:n}function Nie(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var CPe=Die(Object.getPrototypeOf,Object);const e8=CPe;var kPe="[object Object]",MPe=Function.prototype,APe=Object.prototype,Fie=MPe.toString,TPe=APe.hasOwnProperty,OPe=Fie.call(Object);function IPe(t){if(!mc(t)||$v(t)!=kPe)return!1;var e=e8(t);if(e===null)return!0;var r=TPe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Fie.call(r)==OPe}function DPe(){this.__data__=new Ff,this.size=0}function PPe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function LPe(t){return this.__data__.get(t)}function RPe(t){return this.__data__.has(t)}var NPe=200;function FPe(t,e){var r=this.__data__;if(r instanceof Ff){var n=r.__data__;if(!gw||n.length<NPe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Bf(n)}return r.set(t,e),this.size=r.size,this}function Xl(t){var e=this.__data__=new Ff(t);this.size=e.size}Xl.prototype.clear=DPe;Xl.prototype.delete=PPe;Xl.prototype.get=LPe;Xl.prototype.has=RPe;Xl.prototype.set=FPe;function BPe(t,e){return t&&kb(e,QM(e),t)}function $Pe(t,e){return t&&kb(e,Ab(e),t)}var Bie=typeof ds=="object"&&ds&&!ds.nodeType&&ds,wG=Bie&&typeof ps=="object"&&ps&&!ps.nodeType&&ps,zPe=wG&&wG.exports===Bie,bG=zPe?eu.Buffer:void 0,xG=bG?bG.allocUnsafe:void 0;function $ie(t,e){if(e)return t.slice();var r=t.length,n=xG?xG(r):new t.constructor(r);return t.copy(n),n}function jPe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function zie(){return[]}var GPe=Object.prototype,UPe=GPe.propertyIsEnumerable,SG=Object.getOwnPropertySymbols,t8=SG?function(t){return t==null?[]:(t=Object(t),jPe(SG(t),function(e){return UPe.call(t,e)}))}:zie;function WPe(t,e){return kb(t,t8(t),e)}var VPe=Object.getOwnPropertySymbols,jie=VPe?function(t){for(var e=[];t;)Nie(e,t8(t)),t=e8(t);return e}:zie;function HPe(t,e){return kb(t,jie(t),e)}function Gie(t,e,r){var n=e(t);return Ss(t)?n:Nie(n,r(t))}function dL(t){return Gie(t,QM,t8)}function XPe(t){return Gie(t,Ab,jie)}var pL=jv(eu,"DataView"),vL=jv(eu,"Promise"),z0=jv(eu,"Set"),EG="[object Map]",YPe="[object Object]",_G="[object Promise]",CG="[object Set]",kG="[object WeakMap]",MG="[object DataView]",qPe=zv(pL),KPe=zv(gw),QPe=zv(vL),ZPe=zv(z0),JPe=zv(hL),Ep=$v;(pL&&Ep(new pL(new ArrayBuffer(1)))!=MG||gw&&Ep(new gw)!=EG||vL&&Ep(vL.resolve())!=_G||z0&&Ep(new z0)!=CG||hL&&Ep(new hL)!=kG)&&(Ep=function(t){var e=$v(t),r=e==YPe?t.constructor:void 0,n=r?zv(r):"";if(n)switch(n){case qPe:return MG;case KPe:return EG;case QPe:return _G;case ZPe:return CG;case JPe:return kG}return e});const Pm=Ep;var e5e=Object.prototype,t5e=e5e.hasOwnProperty;function r5e(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&t5e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var GC=eu.Uint8Array;function r8(t){var e=new t.constructor(t.byteLength);return new GC(e).set(new GC(t)),e}function n5e(t,e){var r=e?r8(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var i5e=/\w*$/;function a5e(t){var e=new t.constructor(t.source,i5e.exec(t));return e.lastIndex=t.lastIndex,e}var AG=gc?gc.prototype:void 0,TG=AG?AG.valueOf:void 0;function o5e(t){return TG?Object(TG.call(t)):{}}function Uie(t,e){var r=e?r8(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var s5e="[object Boolean]",l5e="[object Date]",u5e="[object Map]",c5e="[object Number]",f5e="[object RegExp]",h5e="[object Set]",d5e="[object String]",p5e="[object Symbol]",v5e="[object ArrayBuffer]",g5e="[object DataView]",m5e="[object Float32Array]",y5e="[object Float64Array]",w5e="[object Int8Array]",b5e="[object Int16Array]",x5e="[object Int32Array]",S5e="[object Uint8Array]",E5e="[object Uint8ClampedArray]",_5e="[object Uint16Array]",C5e="[object Uint32Array]";function k5e(t,e,r){var n=t.constructor;switch(e){case v5e:return r8(t);case s5e:case l5e:return new n(+t);case g5e:return n5e(t,r);case m5e:case y5e:case w5e:case b5e:case x5e:case S5e:case E5e:case _5e:case C5e:return Uie(t,r);case u5e:return new n;case c5e:case d5e:return new n(t);case f5e:return a5e(t);case h5e:return new n;case p5e:return o5e(t)}}function Wie(t){return typeof t.constructor=="function"&&!qM(t)?AIe(e8(t)):{}}var M5e="[object Map]";function A5e(t){return mc(t)&&Pm(t)==M5e}var OG=Dm&&Dm.isMap,T5e=OG?Q6(OG):A5e,O5e="[object Set]";function I5e(t){return mc(t)&&Pm(t)==O5e}var IG=Dm&&Dm.isSet,D5e=IG?Q6(IG):I5e,P5e=1,L5e=2,R5e=4,Vie="[object Arguments]",N5e="[object Array]",F5e="[object Boolean]",B5e="[object Date]",$5e="[object Error]",Hie="[object Function]",z5e="[object GeneratorFunction]",j5e="[object Map]",G5e="[object Number]",Xie="[object Object]",U5e="[object RegExp]",W5e="[object Set]",V5e="[object String]",H5e="[object Symbol]",X5e="[object WeakMap]",Y5e="[object ArrayBuffer]",q5e="[object DataView]",K5e="[object Float32Array]",Q5e="[object Float64Array]",Z5e="[object Int8Array]",J5e="[object Int16Array]",eLe="[object Int32Array]",tLe="[object Uint8Array]",rLe="[object Uint8ClampedArray]",nLe="[object Uint16Array]",iLe="[object Uint32Array]",En={};En[Vie]=En[N5e]=En[Y5e]=En[q5e]=En[F5e]=En[B5e]=En[K5e]=En[Q5e]=En[Z5e]=En[J5e]=En[eLe]=En[j5e]=En[G5e]=En[Xie]=En[U5e]=En[W5e]=En[V5e]=En[H5e]=En[tLe]=En[rLe]=En[nLe]=En[iLe]=!0;En[$5e]=En[Hie]=En[X5e]=!1;function B_(t,e,r,n,i,a){var o,s=e&P5e,l=e&L5e,u=e&R5e;if(r&&(o=i?r(t,n,i,a):r(t)),o!==void 0)return o;if(!sl(t))return t;var c=Ss(t);if(c){if(o=r5e(t),!s)return kie(t,o)}else{var f=Pm(t),h=f==Hie||f==z5e;if(Im(t))return $ie(t,s);if(f==Xie||f==Vie||h&&!i){if(o=l||h?{}:Wie(t),!s)return l?HPe(t,$Pe(o,t)):WPe(t,BPe(o,t))}else{if(!En[f])return i?t:{};o=k5e(t,f,s)}}a||(a=new Xl);var d=a.get(t);if(d)return d;a.set(t,o),D5e(t)?t.forEach(function(g){o.add(B_(g,e,r,g,t,a))}):T5e(t)&&t.forEach(function(g,m){o.set(m,B_(g,e,r,m,t,a))});var p=u?l?XPe:dL:l?Ab:QM,v=c?void 0:p(t);return $Ie(v||t,function(g,m){v&&(m=g,g=t[m]),Mie(o,m,B_(g,e,r,m,t,a))}),o}var aLe=1,oLe=4;function DG(t){return B_(t,aLe|oLe)}var sLe="__lodash_hash_undefined__";function lLe(t){return this.__data__.set(t,sLe),this}function uLe(t){return this.__data__.has(t)}function mw(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bf;++e<r;)this.add(t[e])}mw.prototype.add=mw.prototype.push=lLe;mw.prototype.has=uLe;function cLe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Yie(t,e){return t.has(e)}var fLe=1,hLe=2;function qie(t,e,r,n,i,a){var o=r&fLe,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=r&hLe?new mw:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var g=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!cLe(e,function(m,y){if(!Yie(d,y)&&(p===m||i(p,m,r,n,a)))return d.push(y)})){h=!1;break}}else if(!(p===v||i(p,v,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}function dLe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function n8(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var pLe=1,vLe=2,gLe="[object Boolean]",mLe="[object Date]",yLe="[object Error]",wLe="[object Map]",bLe="[object Number]",xLe="[object RegExp]",SLe="[object Set]",ELe="[object String]",_Le="[object Symbol]",CLe="[object ArrayBuffer]",kLe="[object DataView]",PG=gc?gc.prototype:void 0,lI=PG?PG.valueOf:void 0;function MLe(t,e,r,n,i,a,o){switch(r){case kLe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case CLe:return!(t.byteLength!=e.byteLength||!a(new GC(t),new GC(e)));case gLe:case mLe:case bLe:return Cb(+t,+e);case yLe:return t.name==e.name&&t.message==e.message;case xLe:case ELe:return t==e+"";case wLe:var s=dLe;case SLe:var l=n&pLe;if(s||(s=n8),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=vLe,o.set(t,e);var c=qie(s(t),s(e),n,i,a,o);return o.delete(t),c;case _Le:if(lI)return lI.call(t)==lI.call(e)}return!1}var ALe=1,TLe=Object.prototype,OLe=TLe.hasOwnProperty;function ILe(t,e,r,n,i,a){var o=r&ALe,s=dL(t),l=s.length,u=dL(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var h=s[f];if(!(o?h in e:OLe.call(e,h)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var v=!0;a.set(t,e),a.set(e,t);for(var g=o;++f<l;){h=s[f];var m=t[h],y=e[h];if(n)var w=o?n(y,m,h,e,t,a):n(m,y,h,t,e,a);if(!(w===void 0?m===y||i(m,y,r,n,a):w)){v=!1;break}g||(g=h=="constructor")}if(v&&!g){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(v=!1)}return a.delete(t),a.delete(e),v}var DLe=1,LG="[object Arguments]",RG="[object Array]",eE="[object Object]",PLe=Object.prototype,NG=PLe.hasOwnProperty;function LLe(t,e,r,n,i,a){var o=Ss(t),s=Ss(e),l=o?RG:Pm(t),u=s?RG:Pm(e);l=l==LG?eE:l,u=u==LG?eE:u;var c=l==eE,f=u==eE,h=l==u;if(h&&Im(t)){if(!Im(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new Xl),o||KM(t)?qie(t,e,r,n,i,a):MLe(t,e,l,r,n,i,a);if(!(r&DLe)){var d=c&&NG.call(t,"__wrapped__"),p=f&&NG.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return a||(a=new Xl),i(v,g,r,n,a)}}return h?(a||(a=new Xl),ILe(t,e,r,n,i,a)):!1}function tA(t,e,r,n,i){return t===e?!0:t==null||e==null||!mc(t)&&!mc(e)?t!==t&&e!==e:LLe(t,e,r,n,tA,i)}var RLe=1,NLe=2;function FLe(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new Xl;if(n)var h=n(u,c,l,t,e,f);if(!(h===void 0?tA(c,u,RLe|NLe,n,f):h))return!1}}return!0}function Kie(t){return t===t&&!sl(t)}function BLe(t){for(var e=QM(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Kie(i)]}return e}function Qie(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function $Le(t){var e=BLe(t);return e.length==1&&e[0][2]?Qie(e[0][0],e[0][1]):function(r){return r===t||FLe(r,t,e)}}function zLe(t,e){return t!=null&&e in Object(t)}function jLe(t,e,r){e=Lie(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=eA(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&K6(i)&&Y6(o,i)&&(Ss(t)||pw(t)))}function GLe(t,e){return t!=null&&jLe(t,e,zLe)}var ULe=1,WLe=2;function VLe(t,e){return Z6(t)&&Kie(e)?Qie(eA(t),e):function(r){var n=_Pe(r,t);return n===void 0&&n===e?GLe(r,t):tA(e,n,ULe|WLe)}}function HLe(t){return function(e){return e==null?void 0:e[t]}}function XLe(t){return function(e){return Rie(e,t)}}function YLe(t){return Z6(t)?HLe(eA(t)):XLe(t)}function qLe(t){return typeof t=="function"?t:t==null?H6:typeof t=="object"?Ss(t)?VLe(t[0],t[1]):$Le(t):YLe(t)}function KLe(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}var QLe=KLe(),uI=function(){return eu.Date.now()},ZLe="Expected a function",JLe=Math.max,e4e=Math.min;function Zie(t,e,r){var n,i,a,o,s,l,u=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(ZLe);e=fG(e)||0,sl(r)&&(c=!!r.leading,f="maxWait"in r,a=f?JLe(fG(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function d(S){var E=n,_=i;return n=i=void 0,u=S,o=t.apply(_,E),o}function p(S){return u=S,s=setTimeout(m,e),c?d(S):o}function v(S){var E=S-l,_=S-u,k=e-E;return f?e4e(k,a-_):k}function g(S){var E=S-l,_=S-u;return l===void 0||E>=e||E<0||f&&_>=a}function m(){var S=uI();if(g(S))return y(S);s=setTimeout(m,v(S))}function y(S){return s=void 0,h&&n?d(S):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function b(){return s===void 0?o:y(uI())}function x(){var S=uI(),E=g(S);if(n=arguments,i=this,l=S,E){if(s===void 0)return p(l);if(f)return clearTimeout(s),s=setTimeout(m,e),d(l)}return s===void 0&&(s=setTimeout(m,e)),o}return x.cancel=w,x.flush=b,x}function gL(t,e,r){(r!==void 0&&!Cb(t[e],r)||r===void 0&&!(e in t))&&q6(t,e,r)}function t4e(t){return mc(t)&&Mb(t)}function mL(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function r4e(t){return kb(t,Ab(t))}function n4e(t,e,r,n,i,a,o){var s=mL(t,r),l=mL(e,r),u=o.get(l);if(u){gL(t,r,u);return}var c=a?a(s,l,r+"",t,e,o):void 0,f=c===void 0;if(f){var h=Ss(l),d=!h&&Im(l),p=!h&&!d&&KM(l);c=l,h||d||p?Ss(s)?c=s:t4e(s)?c=kie(s):d?(f=!1,c=$ie(l,!0)):p?(f=!1,c=Uie(l,!0)):c=[]:IPe(l)||pw(l)?(c=s,pw(s)?c=r4e(s):(!sl(s)||X6(s))&&(c=Wie(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),gL(t,r,c)}function Jie(t,e,r,n,i){t!==e&&QLe(e,function(a,o){if(i||(i=new Xl),sl(a))n4e(t,e,o,r,Jie,n,i);else{var s=n?n(mL(t,o),a,o+"",t,e,i):void 0;s===void 0&&(s=a),gL(t,o,s)}},Ab)}function i4e(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var a4e="[object Map]",o4e="[object Set]",s4e=Object.prototype,l4e=s4e.hasOwnProperty;function u4e(t){if(t==null)return!0;if(Mb(t)&&(Ss(t)||typeof t=="string"||typeof t.splice=="function"||Im(t)||KM(t)||pw(t)))return!t.length;var e=Pm(t);if(e==a4e||e==o4e)return!t.size;if(qM(t))return!Pie(t).length;for(var r in t)if(l4e.call(t,r))return!1;return!0}function c4e(t,e){return tA(t,e)}var f4e=JIe(function(t,e,r){Jie(t,e,r)});const rv=f4e;var h4e=1/0,d4e=z0&&1/n8(new z0([,-0]))[1]==h4e?function(t){return new z0(t)}:OIe,p4e=200;function v4e(t,e,r){var n=-1,i=WIe,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=i4e;else if(a>=p4e){var u=e?null:d4e(t);if(u)return n8(u);o=!1,i=Yie,l=new mw}else l=e?[]:s;e:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}function g4e(t,e){return t&&t.length?v4e(t,qLe(e)):[]}var m4e={graph:{},apis:{},theme:{},layout:{}},y4e=te.createContext(m4e);const ka=y4e;var w4e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},$f=function(e){var r=e.type,n=e.defaultConfig,i=e.userProps,a=e.mode,o=a===void 0?"default":a,s=te.useContext(ka),l=s.graph,u=i.disabled,c=w4e(i,["disabled"]);te.useEffect(function(){if(!(!l||l.destroyed||u4e(l))&&(l.removeBehaviors(r,o),!u))return l.addBehaviors(Object.assign(Object.assign({type:r},n),c),o),function(){l.destroyed||l.removeBehaviors(r,o)}},[])},b4e={disabled:!1,trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1},x4e=function(e){return $f({type:"activate-relations",userProps:e,defaultConfig:b4e}),null};const S4e=x4e;var E4e="shift",_4e={disabled:!1,brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:E4e,includeEdges:!0,includeCombos:!1},C4e=function(e){return $f({type:"brush-select",userProps:e,defaultConfig:_4e}),null};const k4e=C4e;var M4e="shift",A4e={disabled:!1,multiple:!0,trigger:M4e,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0},T4e=function(e){return $f({type:"click-select",userProps:e,defaultConfig:A4e}),null};const O4e=T4e;var I4e={direction:"both",enableOptimize:!1,scalableRange:0,shouldBegin:function(){return!0},disabled:!1},D4e=function(e){return $f({type:"drag-canvas",userProps:e,defaultConfig:I4e}),null};const P4e=D4e;var L4e={disabled:!1,enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"},R4e=function(e){return $f({type:"drag-combo",userProps:e,defaultConfig:L4e}),null};const N4e=R4e;var F4e={disabled:!1,updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"},B4e=function(e){return $f({type:"drag-node",userProps:e,defaultConfig:F4e}),null};const $4e=B4e;var eae=function(e){var r=te.useContext(ka),n=r.graph,i=r.layout,a=r.dragNodes,o=r.updateContext,s=e.autoPin,l=e.pinAction,u=e.dragNodeMass,c=u===void 0?1e10:u,f=i.instance;return oe.useEffect(function(){var h,d=f||{type:(h=n.get("layout"))===null||h===void 0?void 0:h.type},p=d.simulation,v=d.type,g=function(){var w;if(p)p.stop();else{var b=((w=n.get("layoutController"))===null||w===void 0?void 0:w.layoutMethods)||[];b.forEach(function(x){var S;return(S=x.stop)===null||S===void 0?void 0:S.call(x)})}},m=function(w){if(!(v!=="graphin-force"&&v!=="force2")&&w.item){var b=w.item.get("model");b.layout=Object.assign(Object.assign({},b.layout),{force:{mass:s?c:null}});var x=[];n.getNodes().forEach(function(E){if(E.hasState("selected")){var _=E.get("model");_.layout||(_.layout={}),_.layout.force={mass:s?c:null},x.push(_)}});var S=a.concat([b]);x.length>1&&(S=S.concat(x)),o({dragNodes:S})}};return n.on("node:dragstart",g),n.on("node:dragend",m),function(){n.off("node:dragstart",g),n.off("node:dragend",m)}},[n,s,f,a,o]),oe.useEffect(function(){var h=l||{},d=h.id,p=h.pinned;if(d){var v=a;if(!p)v=a.filter(function(y){return y.id!==d});else{var g=n.findById(d);if(!g)return;var m=g.get("model");m.layout||(m.layout={}),m.layout.force={mass:s?c:null},v.push(m)}o({dragNodes:v})}},[l]),null};eae.defaultProps={autoPin:!1,dragNodeMass:1e10,pinAction:void 0};const z4e=eae;var j4e=function(e){var r=e.padding,n=e.isBindLayoutChange,i=te.useContext(ka),a=i.graph;return oe.useEffect(function(){var o=function(){a.fitView(r)};return o(),n&&a.on("afterlayout",o),function(){n&&a.off("afterlayout",o)}},[]),null};const G4e=j4e;var U4e=function(){var e=te.useContext(ka),r=e.graph;return te.useEffect(function(){var n=setTimeout(function(){r.getNodes().forEach(function(i){r.setItemState(i,"normal",!0)}),r.paint()},1600);return function(){clearTimeout(n)}},[]),null};const W4e=U4e;var V4e=function(e){var r=oe.useContext(ka),n=e.bindType,i=n===void 0?"node":n,a=e.disabled,o=r.graph;return oe.useEffect(function(){if(!a){var s=function(h){o.setItemState(h.item,"hover",!0)},l=function(h){o.setItemState(h.item,"hover",!1)},u=function(h){o.setItemState(h.item,"hover",!0)},c=function(h){o.setItemState(h.item,"hover",!1)};return i==="node"&&(o.on("node:mouseenter",s),o.on("node:mouseleave",l)),i==="edge"&&(o.on("edge:mouseenter",u),o.on("edge:mouseleave",c)),function(){i==="node"&&(o.off("node:mouseenter",s),o.off("node:mouseleave",l)),i==="edge"&&(o.off("edge:mouseenter",u),o.off("edge:mouseleave",c))}}},[o,a]),null};const H4e=V4e;var X4e="shift",Y4e={disabled:!1,delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:X4e,includeEdges:!0},q4e=function(e){return $f({type:"lasso-select",userProps:e,defaultConfig:Y4e}),null};const K4e=q4e;var Q4e=function(e){var r=e.graphDOM,n=oe.useContext(ka);return oe.useEffect(function(){var i=n.graph,a=Zie(function(){var o=r.clientWidth,s=r.clientHeight;i.set("width",o),i.set("height",s);var l=i.get("canvas");l&&(l.changeSize(o,s),i.autoPaint())},200);return window.addEventListener("resize",a,!1),function(){window.removeEventListener("resize",a,!1)}},[]),null};const Z4e=Q4e;var J4e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},eRe={trigger:"click"},tRe=function(e){var r=e.onChange,n=J4e(e,["onChange"]),i=oe.useContext(ka),a=i.graph;return $f({defaultConfig:eRe,userProps:n,type:"collapse-expand"}),oe.useEffect(function(){var o=function(l){var u=l.item,c=l.collapsed,f=u.get("model");f.collapsed=c,r&&r(u,c)};return a.on("itemcollapsed",o),function(){a.off("itemcollapsed",o)}},[]),null};const rRe=tRe;var nRe={sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},disabled:!1,animate:!1,animateCfg:{duration:500}},iRe=function(e){return $f({type:"zoom-canvas",userProps:e,defaultConfig:nRe}),null};const aRe=iRe,Gv={DragCanvas:P4e,ZoomCanvas:aRe,ClickSelect:O4e,BrushSelect:k4e,DragNode:$4e,ResizeCanvas:Z4e,LassoSelect:K4e,DragCombo:N4e,ActivateRelations:S4e,TreeCollapse:rRe,FitView:G4e,FontPaint:W4e,DragNodeWithForce:z4e,Hoverable:H4e};function oRe(t,e){return cRe(t)||uRe(t,e)||lRe(t,e)||sRe()}function sRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lRe(t,e){if(t){if(typeof t=="string")return FG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FG(t,e)}}function FG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uRe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function cRe(t){if(Array.isArray(t))return t}var fRe=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.container,a=e.disableAutoAdjust,o=te.useContext(ka),s=o.graph,l=te.useState({visible:!1,x:0,y:0,item:null,selectedItems:[]}),u=oRe(l,2),c=u[0],f=u[1],h=function(b){b.preventDefault(),b.stopPropagation();var x=s.get("width"),S=s.get("height");if(i.current){var E=i.current.getBoundingClientRect(),_=s.get("offsetX")||0,k=s.get("offsetY")||0,C=s.getContainer().offsetTop,M=s.getContainer().offsetLeft,A=b.canvasX+M+_,T=b.canvasY+C+k;if(a||(A+E.width>x&&(A=b.canvasX-E.width-_+M),T+E.height>S&&(T=b.canvasY-E.height-k+C)),n==="node"){var D=b.item&&b.item.getModel(),F=D.x,R=D.y,B=s.getCanvasByPoint(F,R),N=b.canvasX-B.x,O=b.canvasY-B.y;A=A-N,T=T-O}f(function(L){return Object.assign(Object.assign({},L),{visible:!0,x:A,y:T,item:b.item})})}},d=function(){f(function(b){return b.visible?Object.assign(Object.assign({},b),{visible:!1,x:0,y:0}):b})};oe.useEffect(function(){var w=function(x){f(function(S){return Object.assign(Object.assign({},S),{selectedItems:x.selectedItems})})};return s.on("".concat(n,":contextmenu"),h),s.on("canvas:click",d),s.on("canvas:drag",d),s.on("wheelzoom",d),n==="canvas"&&s.on("nodeselectchange",w),function(){s.off("".concat(n,":contextmenu"),h),s.off("canvas:click",d),s.off("canvas:drag",d),s.off("wheelzoom",d),s.off("nodeselectchange",w)}},[s,n]);var p=c.x,v=c.y,g=c.visible,m=c.item,y=c.selectedItems;return{oneShow:h,onClose:d,item:m,selectedItems:y,visible:g,x:p,y:v}};const tae=fRe;var hRe={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},BG=te.createRef(),dRe=function(e){var r=e.bindType,n=e.children,i=e.style,a=e.disableAutoAdjust,o=tae({bindType:r,container:BG,disableAutoAdjust:a}),s=o.visible,l=o.x,u=o.y,c=o.item,f={position:"absolute",left:l,top:u};if(typeof n!="function")return console.error("<ContextMenu /> children should be a function"),null;var h=c&&!c.destroyed&&c.getModel&&c.getModel().id||"";return te.createElement("div",{ref:BG,className:"graphin-components-contextmenu",style:Object.assign(Object.assign(Object.assign({},hRe),i),f),key:h},s&&n(Object.assign(Object.assign({},o),{id:h})))};const pRe=dRe;var vRe={r:249,scaleRByWheel:!0,minR:100,maxR:500,delegateStyle:{stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},showLabel:!1},gRe=function(e){var r=te.useContext(ka),n=r.graph,i=e.options,a=e.visible,o=e.handleEscListener;return te.useEffect(function(){var s=Object.assign(Object.assign({},vRe),i);s.showLabel&&n.getNodes().forEach(function(c){c.getContainer().getChildren().forEach(function(f){f.get("type")==="text"&&f.hide()})});var l=new Ai.Fisheye(s),u=function(f){f.keyCode===27&&o&&(o(),n.get("canvas").setCursor("default"))};return a&&(n.addPlugin(l),n.get("canvas").setCursor("zoom-in")),o&&window.addEventListener("keydown",u),function(){n&&!n.destroyed&&(n.get("canvas").setCursor("default"),n.removePlugin(l)),o&&window.removeEventListener("keydown",u)}},[n,i,a,o]),null};const mRe=gRe;var $G=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},zG={members:[],type:"round-convex",nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10},jG=function(e,r){var n=e.style,i=n===void 0?{}:n,a=$G(e,["style"]),o=r.style,s=o===void 0?{}:o,l=$G(r,["style"]);return Object.assign(Object.assign(Object.assign({},a),l),{style:Object.assign(Object.assign({},i),s)})},Lg,yRe=function(e){var r=te.useContext(ka),n=r.graph,i=e.options;return te.useEffect(function(){Lg&&Lg.length&&Lg.forEach(function(o){return n.removeHull(o)}),Lg=i.map(function(o){return n.createHull(jG(zG,Object.assign({id:"".concat(Math.random())},o)))});var a=Zie(function(){Lg.forEach(function(o,s){o.group.destroyed?Lg[s]=n.createHull(jG(zG,Object.assign({id:"".concat(Math.random())},i[s]))):o.updateData(o.members)})});return n.on("afterupdateitem",a),n.on("aftergraphrefreshposition",a),function(){n.off("afterupdateitem",a),n.off("aftergraphrefreshposition",a)}},[n,i]),null};const wRe=yRe;function bRe(t,e){return _Re(t)||ERe(t,e)||SRe(t,e)||xRe()}function xRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SRe(t,e){if(t){if(typeof t=="string")return GG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GG(t,e)}}function GG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ERe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function _Re(t){if(Array.isArray(t))return t}var CRe=function(e){var r=te.useContext(ka),n=r.graph,i=r.theme,a=e.options,o=e.dataMap,s=e.onChange,l=i.mode,u=te.useState({options:a}),c=bRe(u,2),f=c[0],h=c[1];oe.useEffect(function(){h({options:a})},[a]);var d=f.options,p=function(g){var m=Object.assign(Object.assign({},g),{checked:!g.checked}),y=d.map(function(b){var x=b.value===g.value;return x?m:b});h({options:y});var w=o.get(m.value);w.forEach(function(b){n.setItemState(b.id,"active",m.checked),n.setItemState(b.id,"inactive",!m.checked);var x=b.id,S=n.findById(x),E=S.getEdges();E.forEach(function(_){n.setItemState(_,"normal",m.checked),n.setItemState(_,"inactive",!m.checked)})}),s(m,y)};return te.createElement("ul",{className:"graphin-components-legend-content"},d.map(function(v){var g=v.label,m=v.checked,y=v.color,w={light:{active:y,inactive:"#ddd"},dark:{active:y,inactive:"#2f2f2f"}},b={light:{active:"#000",inactive:"#ddd"},dark:{active:"#fff",inactive:"#2f2f2f"}},x=m?"active":"inactive";return te.createElement("li",{key:v.value,className:"item",onClick:function(){p(v)},onKeyDown:function(){p(v)}},te.createElement("span",{className:"dot",style:{background:w[l][x]}}),te.createElement("span",{className:"label",style:{color:b[l][x]}},g))}))};const kRe=CRe;function MRe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rae=[{type:"graphin-force",options:{},title:"渐进力导"},{type:"force",title:"D3力导",options:{preventOverlap:!0,linkDistance:250,nodeStrength:30,edgeStrength:.1,collideStrength:.8,nodeSize:30,alpha:.3,alphaDecay:.028,alphaMin:.01,forceSimulation:null,clustering:!1}},{type:"concentric",title:"同心圆布局",options:{minNodeSpacing:60,preventOverlap:!0,nodeSize:60}},{type:"grid",options:{},title:"网格布局"},{type:"radial",options:{},title:"辐射布局"},{type:"dagre",title:"层次布局",options:{}},{type:"circular",options:{},title:"环形布局"},{type:"gForce",options:{linkDistance:function(){return 200},preventOverlap:!0},title:"G6力导"},{type:"mds",options:{},title:"降维布局"},{type:"random",options:{},title:"随机布局"}],UG=rae.map(function(t){var e=t.type,r=t.options;return Object.assign({type:e},r)}).reduce(function(t,e){return Object.assign(Object.assign({},t),MRe({},e.type,e))},{}),ARe=function(){var e={type:"circle",style:{labelCfg:{position:"top"}},status:{}};return e};const nae=ARe;var TRe={primaryEdgeColor:"#ddd",edgeSize:1,mode:"light"},ORe=function(e){var r=Object.assign(Object.assign({},TRe),e),n=r.edgeSize,i=r.primaryEdgeColor,a=r.mode,o={light:{stroke:i,label:i,disabled:"#ddd"},dark:{stroke:i,label:i,disabled:"#ddd3"}},s=o[a],l={type:"graphin-line",style:{keyshape:{type:"line",lineWidth:n,stroke:s.stroke,strokeOpacity:1,lineAppendWidth:9,cursor:"pointer"},halo:{visible:!1,cursor:"pointer",strokeOpacity:.4},label:{value:"",position:"top",fill:s.label,fontSize:12,textAlign:"center"},animate:{}},status:{hover:{halo:{visible:!0}},selected:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},active:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},inactive:{halo:{visible:!1},keyshape:{strokeOpacity:.1},label:{visible:!1}},disabled:{halo:{visible:!1},keyshape:{lineWidth:.5,stroke:s.disabled},label:{visible:!1}}}};return l};const iae=ORe;var IRe={primaryColor:"#FF6A00",nodeSize:26,mode:"light"},DRe=function(e){var r=Object.assign(Object.assign({},IRe),e),n=r.nodeSize,i=r.primaryColor,a=r.mode,o=12,s={light:{fill:i,fillOpacity:.1,stroke:i,strokeOpacity:1,icon:i,badge:{fill:i,stroke:i,font:"#fff"},label:"#000",disabled:"#ddd"},dark:{fill:i,fillOpacity:.3,stroke:i,strokeOpacity:1,icon:"#fff",badge:{fill:i,stroke:i,font:"#fff"},label:"#fff",disabled:"#ddd3"}},l=s[a],u={type:"graphin-circle",style:{keyshape:{size:n,fill:l.fill,fillOpacity:l.fillOpacity,stroke:l.stroke,strokeOpacity:l.strokeOpacity,lineWidth:1,opacity:1,type:"circle"},label:{position:"bottom",value:"",fill:l.label,fontSize:o,offset:0,background:void 0,fillOpacity:1},icon:{type:"text",value:"",size:n/2,fill:l.icon,fillOpacity:1,offset:[0,0]},badges:[],halo:{visible:!1,fillOpacity:.1}},status:{normal:{},selected:{halo:{visible:!0},keyshape:{lineWidth:5}},hover:{halo:{visible:!0}},active:{},inactive:{keyshape:{fillOpacity:.04,strokeOpacity:.04},icon:{fillOpacity:.04},label:{fillOpacity:.04}},disabled:{halo:{visible:!1},keyshape:{fill:l.disabled,stroke:l.disabled},icon:{fill:l.disabled},label:{fill:l.disabled}}}};return u};const aae=DRe;var oae=function(e){return Array.from(String(e)).reduce(function(r,n){return n.charCodeAt(0)>255?r+2:r+1},0)},cI=function(e){return Math.floor(Math.random()*e)},PRe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=cI(255),n=cI(255),i=cI(255),a="rgba(".concat(r,",").concat(n,",").concat(i,",").concat(e,")");return a},fI={},LRe=function(e){return fI[e]||(fI[e]=PRe()),fI[e],function(){}};const RRe=LRe;var sae=function(e){return e.charAt(0)==="#"?e.slice(1):e},lae=function(e){var r=e.length===3||e.length===4,n=r?"".concat(e.slice(0,1)).concat(e.slice(0,1)):e.slice(0,2),i=r?"".concat(e.slice(1,2)).concat(e.slice(1,2)):e.slice(2,4),a=r?"".concat(e.slice(2,3)).concat(e.slice(2,3)):e.slice(4,6),o=(r?"".concat(e.slice(3,4)).concat(e.slice(3,4)):e.slice(6,8))||"ff";return{r:n,g:i,b:a,a:o}},tE=function(e){return parseInt(e,16)},uae=function(e){var r=e.r,n=e.g,i=e.b,a=e.a;return{r:tE(r),g:tE(n),b:tE(i),a:+(tE(a)/255).toFixed(2)}},NRe=function(e){return!isNaN(parseFloat(String(e)))&&isFinite(Number(e))},FRe=function(e,r){var n=e.r,i=e.g,a=e.b,o=e.a,s=NRe(r)?r:o;return"rgba(".concat(n,", ").concat(i,", ").concat(a,", ").concat(s,")")},BRe=function(e,r){var n=sae(e),i=lae(n),a=uae(i);return FRe(a,r)},$Re=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=sae(e),i=lae(n),a=uae(i),o=a.r,s=a.g,l=a.b,u=o.toString(16),c=s.toString(16),f=l.toString(16),h=Math.round(Number(r)*255).toString(16);return u.length===1&&(u="0".concat(u)),c.length===1&&(c="0".concat(c)),f.length===1&&(f="0".concat(f)),h.length===1&&(h="0".concat(h)),"#".concat(u).concat(c).concat(f).concat(h)};const zRe=BRe;function jRe(t){return VRe(t)||WRe(t)||URe(t)||GRe()}function GRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function URe(t,e){if(t){if(typeof t=="string")return yL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yL(t,e)}}function WRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VRe(t){if(Array.isArray(t))return yL(t)}function yL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HRe(t,e,r){return e&&WG(t.prototype,e),r&&WG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var VG=HRe(function t(e){var r=this;XRe(this,t),this.nodeIds=[],this.bfs=function(n){var i;if(r.root){var a=[];for(a.push(r.root);a.length;){var o=a.shift();if(n(o))return o;!((i=o==null?void 0:o.children)===null||i===void 0)&&i.length&&a.push.apply(a,jRe(o.children))}}},this.getRoot=function(){return r.root},this.getNode=function(n){var i=r.bfs(function(a){return a.id===n});return i},this.addRoot=function(n,i){r.root={id:n,children:[]},r.nodeIds.push(n)},this.addNode=function(n){var i=n.parentId,a=n.id,o=n.data;if(!r.root){r.addRoot(a,o);return}var s;if(i)s=r.getNode(i);else{var l=Math.floor(Math.random()*r.nodeIds.length);s=r.getNode(r.nodeIds[l])}if(!s){console.error("Parent node doesn't exist!");return}r.nodeIds.push(a),s.children.push({id:a,parent:s,children:[]})},e&&(this.root=e)}),YRe=function t(e,r){r(e),e.children&&e.children.length>0&&e.children.forEach(function(n){t(n,r)})};const cae=YRe;function qRe(t){return JRe(t)||ZRe(t)||QRe(t)||KRe()}function KRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QRe(t,e){if(t){if(typeof t=="string")return wL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wL(t,e)}}function ZRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JRe(t){if(Array.isArray(t))return wL(t)}function wL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eNe(t,e,r){return e&&HG(t.prototype,e),r&&HG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function tNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rNe={nodeCount:10,nodeType:"company"},nNe=eNe(function t(e){var r=this;tNe(this,t),this.initNodes=function(){var n=r.options,i=n.nodeCount,a=n.nodeType,o=Array.from({length:i});r.nodes=o.map(function(u,c){return{id:"node-".concat(c),label:"node-".concat(c),type:a}});for(var s=0;s<i;s=s+1)for(var l=0;l<i-1;l=l+1)r.edges.push({source:"node-".concat(s),target:"node-".concat(l)});r.nodeIds=r.nodes.map(function(u){return u.id})},this.expand=function(n){return r.edges=[],r.nodes=[],n.forEach(function(i){for(var a=0;a<r.options.nodeCount;a+=1)r.nodes.push({id:"".concat(i.id,"-").concat(a),type:i.type}),r.edges.push({source:"".concat(i.id,"-").concat(a),target:i.id})}),r},this.type=function(n){return r.nodes=r.nodes.map(function(i){return Object.assign(Object.assign({},i),{type:n})}),r},this.circle=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=n;return r.nodeIds.indexOf(i)===-1&&(i="node-0"),r.edges=r.edges.filter(function(a){return a.source===i||a.target===i}),r},this.random=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,i=r.options.nodeCount,a=parseInt(String(i*n)),o=r.nodeIds.sort(function(){return Math.random()-.5}).slice(0,a);return r.edges=r.edges.filter(function(s){return o.indexOf(s.target)!==-1}),r.edges=r.edges.sort(function(){return Math.random()-.5}).slice(0,a),r},this.tree=function(){r.edges=[],r.treeData=new VG;var n=r.nodeIds[0];return r.nodeIds.forEach(function(i){r.treeData.addNode({id:i,style:{label:{value:i}}})}),r.treeData.bfs(function(i){var a;return i.id!==n&&r.edges.push({source:(a=i==null?void 0:i.parent)===null||a===void 0?void 0:a.id,target:i.id,properties:[]}),!1}),r},this.value=function(){return{nodes:r.nodes,edges:r.edges}},this.combos=function(n){var i=new Set;return r.nodes=r.nodes.map(function(a,o){var s=Math.ceil((o+1)/n),l="combo-".concat(s);return i.add(l),Object.assign(Object.assign({},a),{comboId:l})}),r.combosData=qRe(i).map(function(a){return{id:a,label:a}}),r},this.graphin=function(){return{nodes:r.nodes.map(function(n){return Object.assign(Object.assign({},n),{id:n.id,type:"graphin-circle",comboId:n.comboId,style:{label:{value:"".concat(n.id)}}})}),edges:r.edges.map(function(n){return{source:n.source,target:n.target}}),combos:r.combosData}},this.graphinTree=function(){var n=r.treeData.getRoot();return cae(n,function(i){delete i.parent}),n},this.options=rNe,this.options.nodeCount=e,this.nodes=[],this.edges=[],this.nodeIds=[],this.treeData=new VG,this.initNodes()}),iNe=function(e){return new nNe(e)};const aNe=iNe;function bL(t){return t%2===0}function oNe(t){return!bL(t)}var hI=30,XG=10,YG=1,sNe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{poly:hI,loop:XG,loopLabelPosition:YG},n=r.poly,i=n===void 0?hI:n,a=r.loop,o=a===void 0?XG:a,s=r.loopLabelPosition,l=s===void 0?YG:s,u={};e.forEach(function(h,d){var p=Object.assign({},h),v=p.source,g=p.target,m="".concat(v,"-").concat(g);p.id=p.id||"".concat(v,"-").concat(g,"-").concat(d);var y="".concat(g,"-").concat(v);u[m]?u[m].push(p):u[y]?(p.revert=!0,u[y].push(p)):u[m]=[p]});var c=Object.values(u),f=[];return c.forEach(function(h){if(h.length>1){var d=bL(h.length);h.forEach(function(p,v){var g,m=p.source,y=p.target,w=m===y,b=v,x;if(d){var S=Math.ceil((b+1)/2);x=i*S}else{var E=oNe(b)?b+1:b,_=Math.ceil(E/2);x=i*_}var k=bL(b)?x:-x;p.revert&&(k=-k,delete p.revert);var C;if(w){var M=b*o;if(C={type:"loop",loop:{distance:M}},!((g=p.style)===null||g===void 0)&&g.label){var A=0,T=-(hI*l+M*2);p.style.label.offset=[A,T]}}else C={type:"poly",poly:{distance:k}};rv(p,{style:{keyshape:C}}),p.isMultiple=!0,f.push(p)})}else f.push(h[0])}),f};function lNe(t){return hNe(t)||fNe(t)||cNe(t)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cNe(t,e){if(t){if(typeof t=="string")return xL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xL(t,e)}}function fNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hNe(t){if(Array.isArray(t))return xL(t)}function xL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fae=function(e,r){var n=r.split("."),i=n.reduce(function(a,o,s,l){var u=a[o];return!u&&s!==l.length-1?{}:u},e);return i},dNe=function(e,r){var n=new Map;return e.forEach(function(i){var a=fae(i,r),o=n.get(a);o?n.set(a,[].concat(lNe(o),[i])):n.set(a,[i])}),n},pNe=function(e,r){var n=!0,i=Object.keys(e),a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(e[s]!==r[s]){n=!1;break}}return n};const vNe=pNe;var gNe=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};const mNe=gNe;var dI=function(e){return function(){console.error("⚠️ @antv/graphin Utils 不再提供 ".concat(e," 方法，请从 lodash 中引入！")),console.error("⚠️ @antv/graphin Utils no longer provides ".concat(e," methods, please use lodash instead!"))}};const i8={hexToRgba:zRe,debug:RRe,mock:aNe,shallowEqual:vNe,hexToRgbaToHex:$Re,getNodeStyleByTheme:aae,getEdgeStyleByTheme:iae,getComboStyleByTheme:nae,deepMix:dI("deepMix"),cloneDeep:dI("cloneDeep"),uuid:mNe,walk:cae,processEdges:sNe,calcByteLength:oae,layouts:rae,uniqBy:dI("uniqBy"),getEnumDataMap:dNe,getEnumValue:fae};function yNe(t){return SNe(t)||xNe(t)||bNe(t)||wNe()}function wNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(t,e){if(t){if(typeof t=="string")return SL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SL(t,e)}}function xNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SNe(t){if(Array.isArray(t))return SL(t)}function SL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qG=i8.getEnumValue,ENe=i8.getEnumDataMap,_Ne=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.sortKey,a=te.useContext(ka),o=a.graph,s=o.save();if(s.children)return console.error("not support tree graph"),{dataMap:new Map,options:{}};var l=ENe(s["".concat(n,"s")],i),u=yNe(l.keys()),c=u.map(function(f){var h=(l.get(f)||[{}])[0],d=qG(h,"style.keyshape.fill"),p=qG(h,"style.color"),v=d||p;return{color:v,value:f,label:f,checked:!0}});return{dataMap:l,options:c}};const hae=_Ne;var CNe={position:"absolute",top:"0px",right:"0px"},dae=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.sortKey,a=e.children,o=e.style,s=hae({bindType:n,sortKey:i}),l=s.dataMap,u=s.options;return te.createElement("div",{className:"graphin-components-legend",style:Object.assign(Object.assign({},CNe),o)},a({bindType:n,sortKey:i,dataMap:l,options:u}))};dae.Node=kRe;const kNe=dae;var MNe={className:"graphin-minimap",viewportClassName:"graphin-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0},ANe={container:{position:"absolute",bottom:0,left:0,background:"#fff",boxShadow:"0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)"}},KG=120,TNe=function(e){var r=te.useContext(ka),n=r.graph,i=e.options,a=e.style,o=a===void 0?{}:a,s=te.useRef(null);te.useEffect(function(){var u=n.getWidth(),c=n.getHeight(),f=n.get("fitViewPadding"),h=[(u-f*2)/(c-f*2)*KG,KG],d=Object.assign(Object.assign(Object.assign({container:s.current},MNe),{size:h}),i),p=new Ai.Minimap(d);return n.addPlugin(p),function(){p&&!p.destroyed&&n.removePlugin(p)}},[i]);var l=Object.assign(Object.assign({},ANe.container),o);return te.createElement("div",{ref:s,style:l})};const ONe=TNe;var INe={line:{stroke:"#FA8C16",lineWidth:.5},itemAlignType:"center"},DNe=function(e){var r=te.useContext(ka),n=r.graph,i=e.options,a=e.visible;return te.useEffect(function(){var o=Object.assign(Object.assign({},INe),i),s=new Ai.SnapLine(o);return a&&n.addPlugin(s),function(){n&&!n.destroyed&&n.removePlugin(s)}},[n,i,a]),null};const PNe=DNe;function LNe(t,e,r){var n=t.get("canvas"),i=n.get("width"),a=n.get("height"),o=r<=a/4,s=r>=3*a/4,l=e<=i/4,u=e>=3*i/4;return l&&o?"bottom-right":u&&o?"bottom-left":l&&s?"top-right":u&&s?"top-left":o?"bottom":s?"top":l?"right":u?"left":"center"}var RNe=function(e){var r=e.graph,n=e.placement,i=e.nodeSize,a=e.x,o=e.y,s=e.bindType,l=s===void 0?"node":s,u=e.visible;return l==="edge"?u?{left:a,top:o}:{visibility:"hidden",left:a,top:o}:(n==="auto"&&(n=LNe(r,a,o)),n==="top"?u?{left:a,top:o-i/2,opacity:1,transform:"translate(-50%,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:0,top:0,opacity:0,transform:"translate(-50%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom"?u?{left:a,top:o+i/2,opacity:1,transform:"translate(-50%,6px)",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a,top:o+i/2,opacity:0,transform:"translate(-50%,0px)",transition:"opacity 0.5s,transform 0.5s"}:n==="left"?u?{left:a-i/2,top:o,transform:"translate(calc(-100% - 6px),-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",opacity:0,left:a-i/2,top:o,transform:"translate(-100%,-50%)",transition:"opacity 0.5s,transform 0.5s"}:n==="right"?u?{left:a+i/2,top:o,transform:"translate(6px,-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a+i/2,top:o,transform:"translate(0,-50%)",opacity:0,transition:"opacity 0.5s,transform 0.5s"}:n==="top-left"?u?{left:a-i/2,top:o-i/2,opacity:1,transform:"translate(calc(-100% - 6px),calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:a-i/2,top:o-i/2,opacity:0,transform:"translate(-100%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="top-right"?u?{left:a+i/2,top:o-i/2,opacity:1,transform:"translate(6px,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:a+i/2,top:o-i/2,opacity:0,transform:"translate(0,-100%)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom-left"?u?{left:a-i/2,top:o+i/2,opacity:1,transform:"translate(calc(-100% - 6px),6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:a-i/2,top:o+i/2,opacity:0,transform:"translate(-100%,0px)",transition:"opacity 0.5s,transform 0.5s"}:n==="bottom-right"?u?{left:a+i/2,top:o+i/2,opacity:1,transform:"translate(6px,6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:a+i/2,top:o+i/2,opacity:0,transform:"translate(0,0)",transition:"opacity 0.5s,transform 0.5s"}:n==="center"?u?{left:a,top:o,opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:a,top:o,opacity:0,transition:"opacity 0.5s,transform 0.5s"}:{left:a,top:o})};function NNe(t,e){return zNe(t)||$Ne(t,e)||BNe(t,e)||FNe()}function FNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BNe(t,e){if(t){if(typeof t=="string")return QG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QG(t,e)}}function QG(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $Ne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function zNe(t){if(Array.isArray(t))return t}var jNe=function(e){var r=e.bindType,n=r===void 0?"node":r,i=e.container,a=te.useContext(ka),o=a.graph,s=oe.useRef(),l=te.useState({visible:!1,x:0,y:0,item:null}),u=NNe(l,2),c=u[0],f=u[1],h=function(y){y.preventDefault(),y.stopPropagation(),s.current&&window.clearTimeout(s.current);var w=o.getPointByClient(y.clientX,y.clientY),b=o.getCanvasByPoint(w.x,w.y),x=b.x,S=b.y;if(n==="node"&&y.item){var E=y.item.getModel(),_=E.x,k=_===void 0?0:_,C=E.y,M=C===void 0?0:C,A=o.getCanvasByPoint(k,M),T=y.canvasX-A.x,D=y.canvasY-A.y;x=x-T,S=S-D}s.current=window.setTimeout(function(){f(function(F){return Object.assign(Object.assign({},F),{visible:!0,item:y.item,x,y:S})})},e.delay.show)},d=function(){s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(function(){f(function(y){return Object.assign(Object.assign({},y),{visible:!1,item:null,x:0,y:0})})},e.delay.hide)},p=function(){f(Object.assign(Object.assign({},c),{visible:!1,x:0,y:0,item:null}))},v=function(y){var w=o.getPointByClient(y.clientX,y.clientY),b=o.getCanvasByPoint(w.x,w.y),x=b.x,S=b.y;if(n==="node"){if(y.item){var E=y.item.getModel(),_=E.x,k=_===void 0?0:_,C=E.y,M=C===void 0?0:C,A=o.getCanvasByPoint(k,M),T=y.canvasX-A.x,D=y.canvasY-A.y;x=x-T,S=S-D}f(Object.assign(Object.assign({},c),{visible:!0,x,y:S,item:y.item}))}},g=function(){clearTimeout(s.current)};return oe.useEffect(function(){var m,y;return o.on("".concat(n,":mouseenter"),h),o.on("".concat(n,":mouseleave"),d),o.on("afterremoveitem",d),o.on("node:dragstart",p),o.on("node:dragend",v),(m=i.current)===null||m===void 0||m.addEventListener("mouseenter",g),(y=i.current)===null||y===void 0||y.addEventListener("mouseleave",d),function(){var w,b;console.log("effect..remove...."),o.off("".concat(n,":mouseenter"),h),o.off("".concat(n,":mouseleave"),d),o.off("afterremoveitem",d),o.off("node:dragstart",p),o.off("node:dragend",v),(w=i.current)===null||w===void 0||w.removeEventListener("mouseenter",g),(b=i.current)===null||b===void 0||b.removeEventListener("mouseleave",d)}},[]),Object.assign({},c)};const pae=jNe;var GNe={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},ZG=te.createRef(),UNe=function(e){var r=e.children,n=e.bindType,i=n===void 0?"node":n,a=e.style,o=e.placement,s=o===void 0?"top":o,l=e.hasArrow,u=e.delay,c=u===void 0?{show:0,hide:200}:u,f=pae({bindType:i,container:ZG,delay:c}),h=f.x,d=f.y,p=f.visible,v=f.item,g=te.useContext(ka),m=g.graph,y=40;try{if(v){var w=v.getModel(),b=w.type;if(b==="graphin-cirle"){var x=v.getModel(),S=x.style;S&&(y=S.keyshape.size)}}}catch(A){console.log(A)}var E=12,_=RNe({graph:m,placement:s,nodeSize:y+E,x:h,y:d,bindType:i,visible:p}),k=Object.assign({position:"absolute"},_);if(typeof r!="function")return console.error("<Tooltip /> children should be a function"),null;var C=v&&!v.destroyed&&v.getModel&&v.getModel()||{},M=C.id||"";return te.createElement(te.Fragment,null,te.createElement("div",{ref:ZG,className:"graphin-components-tooltip ".concat(s),style:Object.assign(Object.assign(Object.assign({},GNe),k),a)},p&&te.createElement("div",null,l&&te.createElement("div",{className:"tooltip-arrow ".concat(s)}),r({item:v,bindType:i,model:C,id:M}))))};const WNe=UNe,VNe={ContextMenu:pRe,Hull:wRe,MiniMap:ONe,FishEye:mRe,SnapLine:PNe,Tooltip:WNe,Legend:kNe,useLegend:hae,useTooltip:pae,useContextMenu:tae};var Bo=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},UC=function(t,e){return Bo(t)?t.indexOf(e)>-1:!1},rA=function(t,e){if(!Bo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];e(i,n)&&r.push(i)}return r},HNe=function(t,e){return e===void 0&&(e=[]),rA(t,function(r){return!UC(e,r)})},XNe={}.toString,tu=function(t,e){return XNe.call(t)==="[object "+e+"]"};const Bn=function(t){return tu(t,"Function")};var Gt=function(t){return t==null};const Xt=function(t){return Array.isArray?Array.isArray(t):tu(t,"Array")},sa=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function Te(t,e){if(t){var r;if(Xt(t))for(var n=0,i=t.length;n<i&&(r=e(t[n],n),r!==!1);n++);else if(sa(t)){for(var a in t)if(t.hasOwnProperty(a)&&(r=e(t[a],a),r===!1))break}}}var vae=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Te(t,function(r,n){Bn(t)&&n==="prototype"||e.push(n)}),e};function gae(t,e){var r=vae(e),n=r.length;if(Gt(t))return!n;for(var i=0;i<n;i+=1){var a=r[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var WC=function(t){return typeof t=="object"&&t!==null},ia=function(t){if(!WC(t)||!tu(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function YNe(t,e){if(!Xt(t))return null;var r;if(Bn(e)&&(r=e),ia(e)&&(r=function(i){return gae(i,e)}),r){for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n]}return null}function qNe(t,e,r){r===void 0&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1}var KNe=function(t,e){for(var r=null,n=0;n<t.length;n++){var i=t[n],a=i[e];if(!Gt(a)){Xt(a)?r=a[0]:r=a;break}}return r},QNe=function(t){if(!Xt(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},mae=function(t,e){if(e===void 0&&(e=[]),!Xt(t))e.push(t);else for(var r=0;r<t.length;r+=1)mae(t[r],e);return e};const yc=function(t){if(Xt(t))return t.reduce(function(e,r){return Math.max(e,r)},t[0])},wc=function(t){if(Xt(t))return t.reduce(function(e,r){return Math.min(e,r)},t[0])};var yae=function(t){var e=t.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(Xt(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var i=yc(e),a=wc(e);return{min:a,max:i}},wae=Array.prototype,ZNe=wae.splice,JNe=wae.indexOf,e6e=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=JNe.call(t,i))>-1;)ZNe.call(t,a,1);return t},t6e=Array.prototype.splice,bae=function(e,r){if(!Bo(e))return[];for(var n=e?r.length:0,i=n-1;n--;){var a=void 0,o=r[n];(n===i||o!==a)&&(a=o,t6e.call(e,o,1))}return e},xae=function(t,e,r){if(!Xt(t)&&!ia(t))return t;var n=r;return Te(t,function(i,a){n=e(n,i,a)}),n},r6e=function(t,e){var r=[];if(!Bo(t))return r;for(var n=-1,i=[],a=t.length;++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return bae(t,i),r};const et=function(t){return tu(t,"String")};function n6e(t,e){var r;if(Bn(e))r=function(i,a){return e(i)-e(a)};else{var n=[];et(e)?n.push(e):Xt(e)&&(n=e),r=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(r),t}function yw(t,e){e===void 0&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];e.has(a)||(r.push(a),e.set(a,!0))}return r}var i6e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return yw([].concat.apply([],t))};const a6e=function(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[e];if(!Gt(o)){Xt(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(r.push(l),n[l]=!0)}}}return r};function hc(t){if(Bo(t))return t[0]}function il(t){if(Bo(t)){var e=t;return e[e.length-1]}}function o6e(t,e){return Xt(t)||et(t)?t[0]===e:!1}function s6e(t,e){return Xt(t)||et(t)?t[t.length-1]===e:!1}var l6e=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0},u6e=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1},c6e=Object.prototype.hasOwnProperty;function VC(t,e){if(!e||!Xt(t))return{};for(var r={},n=Bn(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=n(o),c6e.call(r,i)?r[i].push(o):r[i]=[o]}return r}function Sae(t,e){if(!e)return{0:t};if(!Bn(e)){var r=Xt(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=r.length;a<o;a++)i+=n[r[a]]&&n[r[a]].toString();return i}}return VC(t,e)}const f6e=function(t,e){if(!e)return[t];var r=Sae(t,e),n=[];for(var i in r)n.push(r[i]);return n};function h6e(t,e){return t["_wrap_"+e]}function Bp(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(n){t[e](n)};return t["_wrap_"+e]=r,r}var JG={};function d6e(t){var e=JG[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,JG[t]=e}return e}function p6e(t){var e=0,r=0,n=0,i=0;return Xt(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var v6e=function(t,e,r){return t<e?e:t>r?r:t},$_=function(t,e){var r=e.toString(),n=r.indexOf(".");if(n===-1)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},Ut=function(t){return tu(t,"Number")},g6e=function(t){return Ut(t)&&t%1!==0},m6e=function(t){return Ut(t)&&t%2===0},y6e=Number.isInteger?Number.isInteger:function(t){return Ut(t)&&t%1===0},w6e=function(t){return Ut(t)&&t<0},b6e=1e-5;function Eae(t,e,r){return r===void 0&&(r=b6e),Math.abs(t-e)<r}var x6e=function(t){return Ut(t)&&t%2!==0},S6e=function(t){return Ut(t)&&t>0};const E6e=function(t,e){if(Xt(t)){for(var r,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Bn(e)?e(a):a[e];o>n&&(r=a,n=o)}return r}},_6e=function(t,e){if(Xt(t)){for(var r,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Bn(e)?e(a):a[e];o<n&&(r=a,n=o)}return r}};var nA=function(t,e){return(t%e+e)%e},C6e=180/Math.PI,k6e=function(t){return C6e*t};const M6e=parseInt;var A6e=Math.PI/180,iA=function(t){return A6e*t};const eU=function(t,e){return t.hasOwnProperty(e)};var a8=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Te(t,function(r,n){Bn(t)&&n==="prototype"||e.push(r)}),e};const T6e=function(t,e){return UC(a8(t),e)},cy=function(t){return Gt(t)?"":t.toString()};var O6e=function(t){return cy(t).toLowerCase()},I6e=function(t){var e=cy(t);return e.charAt(0).toLowerCase()+e.substring(1)};function D6e(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(r,n){return r.charAt(0)==="\\"?r.slice(1):e[n]===void 0?"":e[n]})}var P6e=function(t){return cy(t).toUpperCase()},Lm=function(t){var e=cy(t);return e.charAt(0).toUpperCase()+e.substring(1)},L6e={}.toString,_ae=function(t){return L6e.call(t).replace(/^\[object /,"").replace(/]$/,"")},R6e=function(t){return tu(t,"Arguments")},Tb=function(t){return tu(t,"Boolean")},o8=function(t){return tu(t,"Date")},N6e=function(t){return tu(t,"Error")};function F6e(t){return Ut(t)&&isFinite(t)}var B6e=function(t){return t===null},$6e=Object.prototype,Cae=function(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||$6e;return t===r},z6e=function(t){return tu(t,"RegExp")},j6e=function(t){return t===void 0},G6e=function(t){return t instanceof Element||t instanceof HTMLDocument};function kae(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(r){return setTimeout(r,16)};return e(t)}function Mae(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function pI(t,e){for(var r in e)e.hasOwnProperty(r)&&r!=="constructor"&&e[r]!==void 0&&(t[r]=e[r])}function qt(t,e,r,n){return e&&pI(t,e),r&&pI(t,r),n&&pI(t,n),t}var U6e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var i=t[n];Bn(i)&&(i=i.prototype),qt(r.prototype,i)}},Dr=function(t){if(typeof t!="object"||t===null)return t;var e;if(Xt(t)){e=[];for(var r=0,n=t.length;r<n;r++)typeof t[r]=="object"&&t[r]!=null?e[r]=Dr(t[r]):e[r]=t[r]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=Dr(t[i]):e[i]=t[i]}return e};function Ob(t,e,r){var n;return function(){var i=this,a=arguments,o=function(){n=null,r||t.apply(i,a)},s=r&&!n;clearTimeout(n),n=setTimeout(o,e),s&&t.apply(i,a)}}const Aae=function(t,e){if(!Bn(t))throw new TypeError("Expected a function");var r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return o.set(a,s),s};return r.cache=new Map,r};var W6e=5;function Tae(t,e,r,n){r=r||0,n=n||W6e;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&ia(a)?(ia(t[i])||(t[i]={}),r<n?Tae(t[i],a,r+1,n):t[i]=e[i]):Xt(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var gn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)Tae(t,e[n]);return t},V6e=function(t,e,r,n){Bn(e)||(r=e,e=t,t=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,t);return t.prototype=qt(a,t.prototype),t.superclass=i(e.prototype,e),qt(a,r),qt(t,n),t},s8=function(t,e){if(!Bo(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var n=-1,i=0;i<t.length;i++)if(t[i]===e){n=i;break}return n},H6e=Object.prototype.hasOwnProperty;function Oae(t){if(Gt(t))return!0;if(Bo(t))return!t.length;var e=_ae(t);if(e==="Map"||e==="Set")return!t.size;if(Cae(t))return!Object.keys(t).length;for(var r in t)if(H6e.call(t,r))return!1;return!0}var Od=function(t,e){if(t===e)return!0;if(!t||!e||et(t)||et(e))return!1;if(Bo(t)||Bo(e)){if(t.length!==e.length)return!1;for(var r=!0,n=0;n<t.length&&(r=Od(t[n],e[n]),!!r);n++);return r}if(WC(t)||WC(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var r=!0,n=0;n<i.length&&(r=Od(t[i[n]],e[i[n]]),!!r);n++);return r}return!1};const X6e=function(t,e,r){return Bn(r)?!!r(t,e):Od(t,e)};var kv=function(t,e){if(!Bo(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push(e(i,n))}return r},Y6e=function(t){return t};const q6e=function(t,e){e===void 0&&(e=Y6e);var r={};return sa(t)&&!Gt(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},af=function(t,e,r){for(var n=0,i=et(e)?e.split("."):e;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?r:t},K6e=function(t,e,r){var n=t,i=et(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(sa(n[a])||(n[a]=Ut(i[o+1])?[]:{}),n=n[a]):n[a]=r}),t};var Q6e=Object.prototype.hasOwnProperty;const Z6e=function(t,e){if(t===null||!ia(t))return{};var r={};return Te(e,function(n){Q6e.call(t,n)&&(r[n]=t[n])}),r},J6e=function(t,e){return xae(t,function(r,n,i){return e.includes(i)||(r[i]=n),r},{})},ww=function(t,e,r){var n,i,a,o,s=0;r||(r={});var l=function(){s=r.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&r.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=t.apply(i,a),n||(i=a=null)):!n&&r.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},Iae=function(t){return Bo(t)?Array.prototype.slice.call(t):[]};var rE={};const bc=function(t){return t=t||"g",rE[t]?rE[t]+=1:rE[t]=1,t+rE[t]},G1=function(){},e8e=function(t){return t};function aA(t){return Gt(t)?0:Bo(t)?t.length:Object.keys(t).length}var nE;const U1=Aae(function(t,e){e===void 0&&(e={});var r=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return nE||(nE=document.createElement("canvas").getContext("2d")),nE.font=[a,o,i,r+"px",n].join(" "),nE.measureText(et(t)?t:"").width},function(t,e){return e===void 0&&(e={}),yM([t],a8(e)).join("")}),t8e=function(t,e,r,n){n===void 0&&(n="...");var i=16,a=U1(n,r),o=et(t)?t:cy(t),s=e,l=[],u,c;if(U1(t,r)<=e)return t;for(;u=o.substr(0,i),c=U1(u,r),!(c+a>s&&c>s);)if(l.push(u),s-=c,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),c=U1(u,r),!(c+a>s);)if(l.push(u),s-=c,o=o.substr(1),!o)return l.join("");return""+l.join("")+n};var r8e=function(){function t(){this.map={}}return t.prototype.has=function(e){return this.map[e]!==void 0},t.prototype.get=function(e,r){var n=this.map[e];return n===void 0?r:n},t.prototype.set=function(e,r){this.map[e]=r},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(e){delete this.map[e]},t.prototype.size=function(){return Object.keys(this.map).length},t}();const n8e=Object.freeze(Object.defineProperty({__proto__:null,Cache:r8e,assign:qt,augment:U6e,clamp:v6e,clearAnimationFrame:Mae,clone:Dr,contains:UC,debounce:Ob,deepMix:gn,difference:HNe,each:Te,endsWith:s6e,every:l6e,extend:V6e,filter:rA,find:YNe,findIndex:qNe,firstValue:KNe,fixedBase:$_,flatten:QNe,flattenDeep:mae,forIn:Te,get:af,getEllipsisText:t8e,getRange:yae,getType:_ae,getWrapBehavior:h6e,group:f6e,groupBy:VC,groupToMap:Sae,has:eU,hasKey:eU,hasValue:T6e,head:hc,identity:e8e,includes:UC,indexOf:s8,isArguments:R6e,isArray:Xt,isArrayLike:Bo,isBoolean:Tb,isDate:o8,isDecimal:g6e,isElement:G6e,isEmpty:Oae,isEqual:Od,isEqualWith:X6e,isError:N6e,isEven:m6e,isFinite:F6e,isFunction:Bn,isInteger:y6e,isMatch:gae,isNegative:w6e,isNil:Gt,isNull:B6e,isNumber:Ut,isNumberEqual:Eae,isObject:sa,isObjectLike:WC,isOdd:x6e,isPlainObject:ia,isPositive:S6e,isPrototype:Cae,isRegExp:z6e,isString:et,isType:tu,isUndefined:j6e,keys:vae,last:il,lowerCase:O6e,lowerFirst:I6e,map:kv,mapValues:q6e,max:yc,maxBy:E6e,measureTextWidth:U1,memoize:Aae,min:wc,minBy:_6e,mix:qt,mod:nA,noop:G1,number2color:d6e,omit:J6e,parseRadius:p6e,pick:Z6e,pull:e6e,pullAt:bae,reduce:xae,remove:r6e,requestAnimationFrame:kae,set:K6e,size:aA,some:u6e,sortBy:n6e,startsWith:o6e,substitute:D6e,throttle:ww,toArray:Iae,toDegree:k6e,toInteger:M6e,toRadian:iA,toString:cy,union:i6e,uniq:yw,uniqueId:bc,upperCase:P6e,upperFirst:Lm,values:a8,valuesOfKey:a6e,wrapBehavior:Bp},Symbol.toStringTag,{value:"Module"})),i8e={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var r=this,n=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),Te(n,function(i,a){e.on(a,i)}),document.addEventListener("visibilitychange",function(){r.keydown=!1})},unbind:function(e){var r=this.events,n=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),Te(r,function(i,a){e.off(a,i)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,r){return this[e]=r,this}};var l8=function(){function t(){}return t.registerBehavior=function(e,r){if(!r)throw new Error("please specify handler for this behavior: ".concat(e));var n=Dr(i8e);Object.assign(n,r);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(Te(l,function(c,f){u[f]=Bp(s,c)}),this.events=u)};i.prototype=n,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),a8e="*",Dae=function(){function t(){this._events={}}return t.prototype.on=function(e,r,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:r,once:!!n}),this},t.prototype.once=function(e,r){return this.on(e,r,!0)},t.prototype.emit=function(e){for(var r=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[a8e]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],h=f.callback,d=f.once;d&&(l.splice(c,1),l.length===0&&delete r._events[e],u--,c--),h.apply(r,n)}};s(a),s(o)},t.prototype.off=function(e,r){if(!e)this._events={};else if(!r)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===r&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}(),rr=1e-6,zr=typeof Float32Array<"u"?Float32Array:Array,Gl=Math.random;function o8e(t){zr=t}var s8e=Math.PI/180;function l8e(t){return t*s8e}function u8e(t,e){return Math.abs(t-e)<=rr*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const c8e=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return zr},EPSILON:rr,RANDOM:Gl,equals:u8e,setMatrixArrayType:o8e,toRadian:l8e},Symbol.toStringTag,{value:"Module"}));function f8e(){var t=new zr(4);return zr!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function h8e(t){var e=new zr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function d8e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function p8e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function v8e(t,e,r,n){var i=new zr(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function g8e(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function m8e(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function y8e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null}function w8e(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function b8e(t){return t[0]*t[3]-t[2]*t[1]}function Pae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*s+a*l,t[1]=i*s+o*l,t[2]=n*u+a*c,t[3]=i*u+o*c,t}function x8e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*s,t[1]=i*l+o*s,t[2]=n*-s+a*l,t[3]=i*-s+o*l,t}function S8e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*l,t[3]=o*l,t}function E8e(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function _8e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function C8e(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function k8e(t){return Math.hypot(t[0],t[1],t[2],t[3])}function M8e(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function A8e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Lae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function T8e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function O8e(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-o)<=rr*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=rr*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=rr*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=rr*Math.max(1,Math.abs(a),Math.abs(u))}function I8e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function D8e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}var P8e=Pae,L8e=Lae;const R8e=Object.freeze(Object.defineProperty({__proto__:null,LDU:M8e,add:A8e,adjoint:w8e,clone:h8e,copy:d8e,create:f8e,determinant:b8e,equals:O8e,exactEquals:T8e,frob:k8e,fromRotation:E8e,fromScaling:_8e,fromValues:v8e,identity:p8e,invert:y8e,mul:P8e,multiply:Pae,multiplyScalar:I8e,multiplyScalarAndAdd:D8e,rotate:x8e,scale:S8e,set:g8e,str:C8e,sub:L8e,subtract:Lae,transpose:m8e},Symbol.toStringTag,{value:"Module"}));function N8e(){var t=new zr(6);return zr!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function F8e(t){var e=new zr(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B8e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $8e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z8e(t,e,r,n,i,a){var o=new zr(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o}function j8e(t,e,r,n,i,a,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t}function G8e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r*a-n*i;return l?(l=1/l,t[0]=a*l,t[1]=-n*l,t[2]=-i*l,t[3]=r*l,t[4]=(i*s-a*o)*l,t[5]=(n*o-r*s)*l,t):null}function U8e(t){return t[0]*t[3]-t[1]*t[2]}function Rae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*u+a*c,t[1]=i*u+o*c,t[2]=n*f+a*h,t[3]=i*f+o*h,t[4]=n*d+a*p+s,t[5]=i*d+o*p+l,t}function W8e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=i*c+o*u,t[2]=n*-u+a*c,t[3]=i*-u+o*c,t[4]=s,t[5]=l,t}function V8e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n*u,t[1]=i*u,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=l,t}function H8e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*u+a*c+s,t[5]=i*u+o*c+l,t}function X8e(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function Y8e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function q8e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function K8e(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Q8e(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function Z8e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function Nae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function J8e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function eFe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function tFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function rFe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=e[0],u=e[1],c=e[2],f=e[3],h=e[4],d=e[5];return Math.abs(r-l)<=rr*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=rr*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=rr*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=rr*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=rr*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=rr*Math.max(1,Math.abs(s),Math.abs(d))}var nFe=Rae,iFe=Nae;const aFe=Object.freeze(Object.defineProperty({__proto__:null,add:Z8e,clone:F8e,copy:B8e,create:N8e,determinant:U8e,equals:rFe,exactEquals:tFe,frob:Q8e,fromRotation:X8e,fromScaling:Y8e,fromTranslation:q8e,fromValues:z8e,identity:$8e,invert:G8e,mul:nFe,multiply:Rae,multiplyScalar:J8e,multiplyScalarAndAdd:eFe,rotate:W8e,scale:V8e,set:j8e,str:K8e,sub:iFe,subtract:Nae,translate:H8e},Symbol.toStringTag,{value:"Module"}));function Fae(){var t=new zr(9);return zr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function oFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function sFe(t){var e=new zr(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function lFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function uFe(t,e,r,n,i,a,o,s,l){var u=new zr(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function cFe(t,e,r,n,i,a,o,s,l,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t}function fFe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function hFe(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function u8(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,p=r*f+n*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*n+i*u)*p,t[2]=(s*n-i*o)*p,t[3]=h*p,t[4]=(c*r-i*l)*p,t[5]=(-s*r+i*a)*p,t[6]=d*p,t[7]=(-u*r+n*l)*p,t[8]=(o*r-n*a)*p,t):null}function dFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=i*u-n*c,t[2]=n*s-i*o,t[3]=s*l-a*c,t[4]=r*c-i*l,t[5]=i*a-r*s,t[6]=a*u-o*l,t[7]=n*l-r*u,t[8]=r*o-n*a,t}function pFe(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+r*(-u*i+o*s)+n*(l*i-a*s)}function Cc(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],w=r[7],b=r[8];return t[0]=h*n+d*o+p*u,t[1]=h*i+d*s+p*c,t[2]=h*a+d*l+p*f,t[3]=v*n+g*o+m*u,t[4]=v*i+g*s+m*c,t[5]=v*a+g*l+m*f,t[6]=y*n+w*o+b*u,t[7]=y*i+w*s+b*c,t[8]=y*a+w*l+b*f,t}function vFe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=h*n+d*o+u,t[7]=h*i+d*s+c,t[8]=h*a+d*l+f,t}function gFe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*o,t[1]=d*i+h*s,t[2]=d*a+h*l,t[3]=d*o-h*n,t[4]=d*s-h*i,t[5]=d*l-h*a,t[6]=u,t[7]=c,t[8]=f,t}function mFe(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function c8(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function f8(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h8(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function yFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function wFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[3]=c-m,t[6]=h+g,t[1]=c+m,t[4]=1-u-p,t[7]=d-v,t[2]=h-g,t[5]=d+v,t[8]=1-u-f,t}function bFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*o,w=r*l-i*o,b=r*u-a*o,x=n*l-i*s,S=n*u-a*s,E=i*u-a*l,_=c*v-f*p,k=c*g-h*p,C=c*m-d*p,M=f*g-h*v,A=f*m-d*v,T=h*m-d*g,D=y*T-w*A+b*M+x*C-S*k+E*_;return D?(D=1/D,t[0]=(s*T-l*A+u*M)*D,t[1]=(l*C-o*T-u*k)*D,t[2]=(o*A-s*C+u*_)*D,t[3]=(i*A-n*T-a*M)*D,t[4]=(r*T-i*C+a*k)*D,t[5]=(n*C-r*A-a*_)*D,t[6]=(v*E-g*S+m*x)*D,t[7]=(g*b-p*E-m*w)*D,t[8]=(p*S-v*b+m*y)*D,t):null}function xFe(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function SFe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function EFe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function _Fe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Bae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function CFe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function kFe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function MFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function AFe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=e[0],h=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],y=e[7],w=e[8];return Math.abs(r-f)<=rr*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-h)<=rr*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=rr*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-p)<=rr*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-v)<=rr*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-g)<=rr*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=rr*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=rr*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-w)<=rr*Math.max(1,Math.abs(c),Math.abs(w))}var TFe=Cc,OFe=Bae;const $ae=Object.freeze(Object.defineProperty({__proto__:null,add:_Fe,adjoint:dFe,clone:sFe,copy:lFe,create:Fae,determinant:pFe,equals:AFe,exactEquals:MFe,frob:EFe,fromMat2d:yFe,fromMat4:oFe,fromQuat:wFe,fromRotation:f8,fromScaling:h8,fromTranslation:c8,fromValues:uFe,identity:fFe,invert:u8,mul:TFe,multiply:Cc,multiplyScalar:CFe,multiplyScalarAndAdd:kFe,normalFromMat4:bFe,projection:xFe,rotate:gFe,scale:mFe,set:cFe,str:SFe,sub:OFe,subtract:Bae,translate:vFe,transpose:hFe},Symbol.toStringTag,{value:"Module"}));function IFe(){var t=new zr(16);return zr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function DFe(t){var e=new zr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function PFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function LFe(t,e,r,n,i,a,o,s,l,u,c,f,h,d,p,v){var g=new zr(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=f,g[12]=h,g[13]=d,g[14]=p,g[15]=v,g}function RFe(t,e,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=g,t}function zae(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function NFe(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function FFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*o,w=r*l-i*o,b=r*u-a*o,x=n*l-i*s,S=n*u-a*s,E=i*u-a*l,_=c*v-f*p,k=c*g-h*p,C=c*m-d*p,M=f*g-h*v,A=f*m-d*v,T=h*m-d*g,D=y*T-w*A+b*M+x*C-S*k+E*_;return D?(D=1/D,t[0]=(s*T-l*A+u*M)*D,t[1]=(i*A-n*T-a*M)*D,t[2]=(v*E-g*S+m*x)*D,t[3]=(h*S-f*E-d*x)*D,t[4]=(l*C-o*T-u*k)*D,t[5]=(r*T-i*C+a*k)*D,t[6]=(g*b-p*E-m*w)*D,t[7]=(c*E-h*b+d*w)*D,t[8]=(o*A-s*C+u*_)*D,t[9]=(n*C-r*A-a*_)*D,t[10]=(p*S-v*b+m*y)*D,t[11]=(f*b-c*S-d*y)*D,t[12]=(s*k-o*M-l*_)*D,t[13]=(r*M-n*k+i*_)*D,t[14]=(v*w-p*x-g*y)*D,t[15]=(c*x-f*w+h*y)*D,t):null}function BFe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-d*g)-f*(l*m-u*g)+v*(l*d-u*h),t[1]=-(n*(h*m-d*g)-f*(i*m-a*g)+v*(i*d-a*h)),t[2]=n*(l*m-u*g)-s*(i*m-a*g)+v*(i*u-a*l),t[3]=-(n*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),t[4]=-(o*(h*m-d*g)-c*(l*m-u*g)+p*(l*d-u*h)),t[5]=r*(h*m-d*g)-c*(i*m-a*g)+p*(i*d-a*h),t[6]=-(r*(l*m-u*g)-o*(i*m-a*g)+p*(i*u-a*l)),t[7]=r*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),t[8]=o*(f*m-d*v)-c*(s*m-u*v)+p*(s*d-u*f),t[9]=-(r*(f*m-d*v)-c*(n*m-a*v)+p*(n*d-a*f)),t[10]=r*(s*m-u*v)-o*(n*m-a*v)+p*(n*u-a*s),t[11]=-(r*(s*d-u*f)-o*(n*d-a*f)+c*(n*u-a*s)),t[12]=-(o*(f*g-h*v)-c*(s*g-l*v)+p*(s*h-l*f)),t[13]=r*(f*g-h*v)-c*(n*g-i*v)+p*(n*h-i*f),t[14]=-(r*(s*g-l*v)-o*(n*g-i*v)+p*(n*l-i*s)),t[15]=r*(s*h-l*f)-o*(n*h-i*f)+c*(n*l-i*s),t}function $Fe(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e*o-r*a,y=e*s-n*a,w=e*l-i*a,b=r*s-n*o,x=r*l-i*o,S=n*l-i*s,E=u*p-c*d,_=u*v-f*d,k=u*g-h*d,C=c*v-f*p,M=c*g-h*p,A=f*g-h*v;return m*A-y*M+w*C+b*k-x*_+S*E}function jae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],y=e[15],w=r[0],b=r[1],x=r[2],S=r[3];return t[0]=w*n+b*s+x*f+S*v,t[1]=w*i+b*l+x*h+S*g,t[2]=w*a+b*u+x*d+S*m,t[3]=w*o+b*c+x*p+S*y,w=r[4],b=r[5],x=r[6],S=r[7],t[4]=w*n+b*s+x*f+S*v,t[5]=w*i+b*l+x*h+S*g,t[6]=w*a+b*u+x*d+S*m,t[7]=w*o+b*c+x*p+S*y,w=r[8],b=r[9],x=r[10],S=r[11],t[8]=w*n+b*s+x*f+S*v,t[9]=w*i+b*l+x*h+S*g,t[10]=w*a+b*u+x*d+S*m,t[11]=w*o+b*c+x*p+S*y,w=r[12],b=r[13],x=r[14],S=r[15],t[12]=w*n+b*s+x*f+S*v,t[13]=w*i+b*l+x*h+S*g,t[14]=w*a+b*u+x*d+S*m,t[15]=w*o+b*c+x*p+S*y,t}function zFe(t,e,r){var n=r[0],i=r[1],a=r[2],o,s,l,u,c,f,h,d,p,v,g,m;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*a+e[12],t[13]=e[1]*n+e[5]*i+e[9]*a+e[13],t[14]=e[2]*n+e[6]*i+e[10]*a+e[14],t[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],p=e[8],v=e[9],g=e[10],m=e[11],t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=v,t[10]=g,t[11]=m,t[12]=o*n+c*i+p*a+e[12],t[13]=s*n+f*i+v*a+e[13],t[14]=l*n+h*i+g*a+e[14],t[15]=u*n+d*i+m*a+e[15]),t}function jFe(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function GFe(t,e,r,n){var i=n[0],a=n[1],o=n[2],s=Math.hypot(i,a,o),l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,M,A,T,D,F;return s<rr?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=e[0],h=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],y=e[7],w=e[8],b=e[9],x=e[10],S=e[11],E=i*i*c+u,_=a*i*c+o*l,k=o*i*c-a*l,C=i*a*c-o*l,M=a*a*c+u,A=o*a*c+i*l,T=i*o*c+a*l,D=a*o*c-i*l,F=o*o*c+u,t[0]=f*E+v*_+w*k,t[1]=h*E+g*_+b*k,t[2]=d*E+m*_+x*k,t[3]=p*E+y*_+S*k,t[4]=f*C+v*M+w*A,t[5]=h*C+g*M+b*A,t[6]=d*C+m*M+x*A,t[7]=p*C+y*M+S*A,t[8]=f*T+v*D+w*F,t[9]=h*T+g*D+b*F,t[10]=d*T+m*D+x*F,t[11]=p*T+y*D+S*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function UFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+f*n,t[7]=l*i+h*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=f*i-s*n,t[11]=h*i-l*n,t}function WFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-f*n,t[3]=l*i-h*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+f*i,t[11]=l*n+h*i,t}function VFe(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+f*n,t[3]=l*i+h*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=f*i-s*n,t[7]=h*i-l*n,t}function HFe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function XFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YFe(t,e,r){var n=r[0],i=r[1],a=r[2],o=Math.hypot(n,i,a),s,l,u;return o<rr?null:(o=1/o,n*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,t[0]=n*n*u+l,t[1]=i*n*u+a*s,t[2]=a*n*u-i*s,t[3]=0,t[4]=n*i*u-a*s,t[5]=i*i*u+l,t[6]=a*i*u+n*s,t[7]=0,t[8]=n*a*u+i*s,t[9]=i*a*u-n*s,t[10]=a*a*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function qFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QFe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Gae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,f=n*l,h=n*u,d=i*l,p=i*u,v=a*u,g=o*s,m=o*l,y=o*u;return t[0]=1-(d+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=h+m,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ZFe(t,e){var r=new zr(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=n*n+i*i+a*a+o*o;return f>0?(r[0]=(s*o+c*n+l*a-u*i)*2/f,r[1]=(l*o+c*i+u*n-s*a)*2/f,r[2]=(u*o+c*a+s*i-l*n)*2/f):(r[0]=(s*o+c*n+l*a-u*i)*2,r[1]=(l*o+c*i+u*n-s*a)*2,r[2]=(u*o+c*a+s*i-l*n)*2),Gae(t,e,r),t}function Uae(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Wae(t,e){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(l,u,c),t}function Vae(t,e){var r=new zr(3);Wae(r,e);var n=1/r[0],i=1/r[1],a=1/r[2],o=e[0]*n,s=e[1]*i,l=e[2]*a,u=e[4]*n,c=e[5]*i,f=e[6]*a,h=e[8]*n,d=e[9]*i,p=e[10]*a,v=o+c+p,g=0;return v>0?(g=Math.sqrt(v+1)*2,t[3]=.25*g,t[0]=(f-d)/g,t[1]=(h-l)/g,t[2]=(s-u)/g):o>c&&o>p?(g=Math.sqrt(1+o-c-p)*2,t[3]=(f-d)/g,t[0]=.25*g,t[1]=(s+u)/g,t[2]=(h+l)/g):c>p?(g=Math.sqrt(1+c-o-p)*2,t[3]=(h-l)/g,t[0]=(s+u)/g,t[1]=.25*g,t[2]=(f+d)/g):(g=Math.sqrt(1+p-o-c)*2,t[3]=(s-u)/g,t[0]=(h+l)/g,t[1]=(f+d)/g,t[2]=.25*g),t}function JFe(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,p=a*u,v=a*c,g=o*c,m=s*l,y=s*u,w=s*c,b=n[0],x=n[1],S=n[2];return t[0]=(1-(p+g))*b,t[1]=(h+w)*b,t[2]=(d-y)*b,t[3]=0,t[4]=(h-w)*x,t[5]=(1-(f+g))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(d+y)*S,t[9]=(v-m)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function eBe(t,e,r,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,f=s+s,h=a*u,d=a*c,p=a*f,v=o*c,g=o*f,m=s*f,y=l*u,w=l*c,b=l*f,x=n[0],S=n[1],E=n[2],_=i[0],k=i[1],C=i[2],M=(1-(v+m))*x,A=(d+b)*x,T=(p-w)*x,D=(d-b)*S,F=(1-(h+m))*S,R=(g+y)*S,B=(p+w)*E,N=(g-y)*E,O=(1-(h+v))*E;return t[0]=M,t[1]=A,t[2]=T,t[3]=0,t[4]=D,t[5]=F,t[6]=R,t[7]=0,t[8]=B,t[9]=N,t[10]=O,t[11]=0,t[12]=r[0]+_-(M*_+D*k+B*C),t[13]=r[1]+k-(A*_+F*k+N*C),t[14]=r[2]+C-(T*_+R*k+O*C),t[15]=1,t}function tBe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[1]=c+m,t[2]=h-g,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rBe(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),u=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t}function Hae(t,e,r,n,i){var a=1/Math.tan(e/2),o;return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}var nBe=Hae;function iBe(t,e,r,n,i){var a=1/Math.tan(e/2),o;return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=i*o,t[14]=i*n*o):(t[10]=-1,t[14]=-n),t}function aBe(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((o-s)*l*.5),t[9]=(i-a)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Xae(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*u,t[15]=1,t}var oBe=Xae;function sBe(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=a*u,t[15]=1,t}function lBe(t,e,r,n){var i,a,o,s,l,u,c,f,h,d,p=e[0],v=e[1],g=e[2],m=n[0],y=n[1],w=n[2],b=r[0],x=r[1],S=r[2];return Math.abs(p-b)<rr&&Math.abs(v-x)<rr&&Math.abs(g-S)<rr?zae(t):(c=p-b,f=v-x,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-w*f,a=w*c-m*h,o=m*f-y*c,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-c*o,u=c*a-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=h,t[11]=0,t[12]=-(i*p+a*v+o*g),t[13]=-(s*p+l*v+u*g),t[14]=-(c*p+f*v+h*g),t[15]=1,t)}function uBe(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],u=n[2],c=i-r[0],f=a-r[1],h=o-r[2],d=c*c+f*f+h*h;d>0&&(d=1/Math.sqrt(d),c*=d,f*=d,h*=d);var p=l*h-u*f,v=u*c-s*h,g=s*f-l*c;return d=p*p+v*v+g*g,d>0&&(d=1/Math.sqrt(d),p*=d,v*=d,g*=d),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=f*g-h*v,t[5]=h*p-c*g,t[6]=c*v-f*p,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function cBe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function fBe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function hBe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Yae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function dBe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function pBe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function vBe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function gBe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=e[0],w=e[1],b=e[2],x=e[3],S=e[4],E=e[5],_=e[6],k=e[7],C=e[8],M=e[9],A=e[10],T=e[11],D=e[12],F=e[13],R=e[14],B=e[15];return Math.abs(r-y)<=rr*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-w)<=rr*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-b)<=rr*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=rr*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=rr*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-E)<=rr*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-_)<=rr*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-k)<=rr*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-C)<=rr*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-M)<=rr*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(h-A)<=rr*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-T)<=rr*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-D)<=rr*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-F)<=rr*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(g-R)<=rr*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-B)<=rr*Math.max(1,Math.abs(m),Math.abs(B))}var mBe=jae,yBe=Yae;const wBe=Object.freeze(Object.defineProperty({__proto__:null,add:hBe,adjoint:BFe,clone:DFe,copy:PFe,create:IFe,determinant:$Fe,equals:gBe,exactEquals:vBe,frob:fBe,fromQuat:tBe,fromQuat2:ZFe,fromRotation:YFe,fromRotationTranslation:Gae,fromRotationTranslationScale:JFe,fromRotationTranslationScaleOrigin:eBe,fromScaling:XFe,fromTranslation:HFe,fromValues:LFe,fromXRotation:qFe,fromYRotation:KFe,fromZRotation:QFe,frustum:rBe,getRotation:Vae,getScaling:Wae,getTranslation:Uae,identity:zae,invert:FFe,lookAt:lBe,mul:mBe,multiply:jae,multiplyScalar:dBe,multiplyScalarAndAdd:pBe,ortho:oBe,orthoNO:Xae,orthoZO:sBe,perspective:nBe,perspectiveFromFieldOfView:aBe,perspectiveNO:Hae,perspectiveZO:iBe,rotate:GFe,rotateX:UFe,rotateY:WFe,rotateZ:VFe,scale:jFe,set:RFe,str:cBe,sub:yBe,subtract:Yae,targetTo:uBe,translate:zFe,transpose:NFe},Symbol.toStringTag,{value:"Module"}));function d8(){var t=new zr(3);return zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function bBe(t){var e=new zr(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qae(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function EL(t,e,r){var n=new zr(3);return n[0]=t,n[1]=e,n[2]=r,n}function xBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function SBe(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function EBe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Kae(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Qae(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Zae(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function _Be(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function CBe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function kBe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function MBe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function ABe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function TBe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function OBe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Jae(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function eoe(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function toe(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function IBe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function DBe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function roe(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function p8(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function z_(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t}function PBe(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function LBe(t,e,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+r[0]*l+n[0]*u+i[0]*c,t[1]=e[1]*s+r[1]*l+n[1]*u+i[1]*c,t[2]=e[2]*s+r[2]*l+n[2]*u+i[2]*c,t}function RBe(t,e,r,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,h=l*a;return t[0]=e[0]*u+r[0]*c+n[0]*f+i[0]*h,t[1]=e[1]*u+r[1]*c+n[1]*f+i[1]*h,t[2]=e[2]*u+r[2]*c+n[2]*f+i[2]*h,t}function NBe(t,e){e=e||1;var r=Gl()*2*Math.PI,n=Gl()*2-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function FBe(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function oA(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function BBe(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],l=e[1],u=e[2],c=i*u-a*l,f=a*s-n*u,h=n*l-i*s,d=i*h-a*f,p=a*c-n*h,v=n*f-i*c,g=o*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,t[0]=s+c+d,t[1]=l+f+p,t[2]=u+h+v,t}function $Be(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function zBe(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function jBe(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function GBe(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(a*a+o*o+s*s),c=l*u,f=c&&p8(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function UBe(t){return t[0]=0,t[1]=0,t[2]=0,t}function WBe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function VBe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function HBe(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=rr*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=rr*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=rr*Math.max(1,Math.abs(i),Math.abs(s))}var XBe=Kae,YBe=Qae,qBe=Zae,KBe=Jae,QBe=eoe,noe=qae,ZBe=toe,JBe=function(){var t=d8();return function(e,r,n,i,a,o){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();const e9e=Object.freeze(Object.defineProperty({__proto__:null,add:EBe,angle:GBe,bezier:RBe,ceil:_Be,clone:bBe,copy:xBe,create:d8,cross:z_,dist:KBe,distance:Jae,div:qBe,divide:Zae,dot:p8,equals:HBe,exactEquals:VBe,floor:CBe,forEach:JBe,fromValues:EL,hermite:LBe,inverse:DBe,len:noe,length:qae,lerp:PBe,max:MBe,min:kBe,mul:YBe,multiply:Qae,negate:IBe,normalize:roe,random:NBe,rotateX:$Be,rotateY:zBe,rotateZ:jBe,round:ABe,scale:TBe,scaleAndAdd:OBe,set:SBe,sqrDist:QBe,sqrLen:ZBe,squaredDistance:eoe,squaredLength:toe,str:WBe,sub:XBe,subtract:Kae,transformMat3:oA,transformMat4:FBe,transformQuat:BBe,zero:UBe},Symbol.toStringTag,{value:"Module"}));function ioe(){var t=new zr(4);return zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function aoe(t){var e=new zr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ooe(t,e,r,n){var i=new zr(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function soe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function loe(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function uoe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function coe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function foe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function hoe(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function t9e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function r9e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function n9e(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function i9e(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function a9e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function doe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function o9e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function poe(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.hypot(r,n,i,a)}function voe(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function v8(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function g8(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function s9e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function l9e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function goe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function moe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function u9e(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],l=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],c=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*u-h*l+d*s,t[1]=-(c*u)+h*o-d*a,t[2]=c*l-f*o+d*i,t[3]=-(c*s)+f*a-h*i,t}function yoe(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function c9e(t,e){e=e||1;var r,n,i,a,o,s;do r=Gl()*2-1,n=Gl()*2-1,o=r*r+n*n;while(o>=1);do i=Gl()*2-1,a=Gl()*2-1,s=i*i+a*a;while(s>=1);var l=Math.sqrt((1-o)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*l,t[3]=e*a*l,t}function f9e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function h9e(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,f=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return t[0]=c*u+d*-o+f*-l-h*-s,t[1]=f*u+d*-s+h*-o-c*-l,t[2]=h*u+d*-l+c*-s-f*-o,t[3]=e[3],t}function d9e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function p9e(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function woe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function boe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-o)<=rr*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=rr*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=rr*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=rr*Math.max(1,Math.abs(a),Math.abs(u))}var v9e=coe,g9e=foe,m9e=hoe,y9e=poe,w9e=voe,b9e=v8,x9e=g8,S9e=function(){var t=ioe();return function(e,r,n,i,a,o){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();const E9e=Object.freeze(Object.defineProperty({__proto__:null,add:uoe,ceil:t9e,clone:aoe,copy:soe,create:ioe,cross:u9e,dist:y9e,distance:poe,div:m9e,divide:hoe,dot:moe,equals:boe,exactEquals:woe,floor:r9e,forEach:S9e,fromValues:ooe,inverse:l9e,len:b9e,length:v8,lerp:yoe,max:i9e,min:n9e,mul:g9e,multiply:foe,negate:s9e,normalize:goe,random:c9e,round:a9e,scale:doe,scaleAndAdd:o9e,set:loe,sqrDist:w9e,sqrLen:x9e,squaredDistance:voe,squaredLength:g8,str:p9e,sub:v9e,subtract:coe,transformMat4:f9e,transformQuat:h9e,zero:d9e},Symbol.toStringTag,{value:"Module"}));function HC(){var t=new zr(4);return zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function _9e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xoe(t,e,r){r=r*.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function C9e(t,e){var r=Math.acos(e[3])*2,n=Math.sin(r/2);return n>rr?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function k9e(t,e){var r=y8(t,e);return Math.acos(2*r*r-1)}function Soe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t}function Eoe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-n*s,t}function _oe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l-a*s,t[1]=i*l+o*s,t[2]=a*l+n*s,t[3]=o*l-i*s,t}function Coe(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*s,t[1]=i*l-n*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t}function M9e(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function koe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return t[0]=r*l,t[1]=n*l,t[2]=i*l,t[3]=s*Math.cos(o),t}function Moe(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=.5*Math.log(r*r+n*n+i*i+a*a),t}function A9e(t,e,r){return Moe(t,e),Toe(t,t,r),koe(t,t),t}function j_(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+a*u+o*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>rr?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),t[0]=v*i+g*l,t[1]=v*a+g*u,t[2]=v*o+g*c,t[3]=v*s+g*f,t}function T9e(t){var e=Gl(),r=Gl(),n=Gl(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function O9e(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function I9e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Aoe(t,e){var r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[a*3+o]-e[o*3+a])*n,t[a]=(e[a*3+i]+e[i*3+a])*n,t[o]=(e[o*3+i]+e[i*3+o])*n}return t}function D9e(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),l=Math.cos(r),u=Math.sin(n),c=Math.cos(n);return t[0]=a*l*c-o*s*u,t[1]=o*s*c+a*l*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t}function P9e(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var L9e=aoe,R9e=ooe,m8=soe,N9e=loe,F9e=uoe,B9e=Soe,Toe=doe,y8=moe,$9e=yoe,w8=v8,z9e=w8,b8=g8,j9e=b8,x8=goe,G9e=woe,U9e=boe,W9e=function(){var t=d8(),e=EL(1,0,0),r=EL(0,1,0);return function(n,i,a){var o=p8(i,a);return o<-.999999?(z_(t,e,i),noe(t)<1e-6&&z_(t,r,i),roe(t,t),xoe(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(z_(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,x8(n,n))}}(),V9e=function(){var t=HC(),e=HC();return function(r,n,i,a,o,s){return j_(t,n,o,s),j_(e,i,a,s),j_(r,t,e,2*s*(1-s)),r}}(),H9e=function(){var t=Fae();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],x8(e,Aoe(e,t))}}();const X9e=Object.freeze(Object.defineProperty({__proto__:null,add:F9e,calculateW:M9e,clone:L9e,conjugate:I9e,copy:m8,create:HC,dot:y8,equals:U9e,exactEquals:G9e,exp:koe,fromEuler:D9e,fromMat3:Aoe,fromValues:R9e,getAngle:k9e,getAxisAngle:C9e,identity:_9e,invert:O9e,len:z9e,length:w8,lerp:$9e,ln:Moe,mul:B9e,multiply:Soe,normalize:x8,pow:A9e,random:T9e,rotateX:Eoe,rotateY:_oe,rotateZ:Coe,rotationTo:W9e,scale:Toe,set:N9e,setAxes:H9e,setAxisAngle:xoe,slerp:j_,sqlerp:V9e,sqrLen:j9e,squaredLength:b8,str:P9e},Symbol.toStringTag,{value:"Module"}));function Y9e(){var t=new zr(8);return zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function q9e(t){var e=new zr(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function K9e(t,e,r,n,i,a,o,s){var l=new zr(8);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l}function Q9e(t,e,r,n,i,a,o){var s=new zr(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var l=i*.5,u=a*.5,c=o*.5;return s[4]=l*n+u*r-c*e,s[5]=u*n+c*t-l*r,s[6]=c*n+l*e-u*t,s[7]=-l*t-u*e-c*r,s}function Ooe(t,e,r){var n=r[0]*.5,i=r[1]*.5,a=r[2]*.5,o=e[0],s=e[1],l=e[2],u=e[3];return t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=n*u+i*l-a*s,t[5]=i*u+a*o-n*l,t[6]=a*u+n*s-i*o,t[7]=-n*o-i*s-a*l,t}function Z9e(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0]*.5,t[5]=e[1]*.5,t[6]=e[2]*.5,t[7]=0,t}function J9e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function e7e(t,e){var r=HC();Vae(r,e);var n=new zr(3);return Uae(n,e),Ooe(t,r,n),t}function Ioe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function t7e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function r7e(t,e,r,n,i,a,o,s,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t}var n7e=m8;function i7e(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var a7e=m8;function o7e(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function s7e(t,e){var r=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],u=e[3];return t[0]=(r*u+a*o+n*l-i*s)*2,t[1]=(n*u+a*s+i*o-r*l)*2,t[2]=(i*u+a*l+r*s-n*o)*2,t}function l7e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0]*.5,l=r[1]*.5,u=r[2]*.5,c=e[4],f=e[5],h=e[6],d=e[7];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*u-a*l+c,t[5]=o*l+a*s-n*u+f,t[6]=o*u+n*l-i*s+h,t[7]=-n*s-i*l-a*u+d,t}function u7e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return Eoe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function c7e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return _oe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function f7e(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=s*o+c*n+l*a-u*i,h=l*o+c*i+u*n-s*a,d=u*o+c*a+s*i-l*n,p=c*o-s*n-l*i-u*a;return Coe(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=f*o+p*n+h*a-d*i,t[5]=h*o+p*i+d*n-f*a,t[6]=d*o+p*a+f*i-h*n,t[7]=p*o-f*n-h*i-d*a,t}function h7e(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],l=e[1],u=e[2],c=e[3];return t[0]=s*o+c*n+l*a-u*i,t[1]=l*o+c*i+u*n-s*a,t[2]=u*o+c*a+s*i-l*n,t[3]=c*o-s*n-l*i-u*a,s=e[4],l=e[5],u=e[6],c=e[7],t[4]=s*o+c*n+l*a-u*i,t[5]=l*o+c*i+u*n-s*a,t[6]=u*o+c*a+s*i-l*n,t[7]=c*o-s*n-l*i-u*a,t}function d7e(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,s=r[4],l=r[5],u=r[6],c=r[7],t[4]=n*c+o*s+i*u-a*l,t[5]=i*c+o*l+a*s-n*u,t[6]=a*c+o*u+n*l-i*s,t[7]=o*c-n*s-i*l-a*u,t}function p7e(t,e,r,n){if(Math.abs(n)<rr)return Ioe(t,e);var i=Math.hypot(r[0],r[1],r[2]);n=n*.5;var a=Math.sin(n),o=a*r[0]/i,s=a*r[1]/i,l=a*r[2]/i,u=Math.cos(n),c=e[0],f=e[1],h=e[2],d=e[3];t[0]=c*u+d*o+f*l-h*s,t[1]=f*u+d*s+h*o-c*l,t[2]=h*u+d*l+c*s-f*o,t[3]=d*u-c*o-f*s-h*l;var p=e[4],v=e[5],g=e[6],m=e[7];return t[4]=p*u+m*o+v*l-g*s,t[5]=v*u+m*s+g*o-p*l,t[6]=g*u+m*l+p*s-v*o,t[7]=m*u-p*o-v*s-g*l,t}function v7e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Doe(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[4],l=r[5],u=r[6],c=r[7],f=e[4],h=e[5],d=e[6],p=e[7],v=r[0],g=r[1],m=r[2],y=r[3];return t[0]=n*y+o*v+i*m-a*g,t[1]=i*y+o*g+a*v-n*m,t[2]=a*y+o*m+n*g-i*v,t[3]=o*y-n*v-i*g-a*m,t[4]=n*c+o*s+i*u-a*l+f*y+p*v+h*m-d*g,t[5]=i*c+o*l+a*s-n*u+h*y+p*g+d*v-f*m,t[6]=a*c+o*u+n*l-i*s+d*y+p*m+f*g-h*v,t[7]=o*c-n*s-i*l-a*u+p*y-f*v-h*g-d*m,t}var g7e=Doe;function m7e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Poe=y8;function y7e(t,e,r,n){var i=1-n;return Poe(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function w7e(t,e){var r=sA(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function b7e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Loe=w8,x7e=Loe,sA=b8,S7e=sA;function E7e(t,e){var r=sA(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,a=e[2]/r,o=e[3]/r,s=e[4],l=e[5],u=e[6],c=e[7],f=n*s+i*l+a*u+o*c;t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-n*f)/r,t[5]=(l-i*f)/r,t[6]=(u-a*f)/r,t[7]=(c-o*f)/r}return t}function _7e(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function C7e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function k7e(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=e[0],f=e[1],h=e[2],d=e[3],p=e[4],v=e[5],g=e[6],m=e[7];return Math.abs(r-c)<=rr*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-f)<=rr*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-h)<=rr*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=rr*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=rr*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-v)<=rr*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-g)<=rr*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-m)<=rr*Math.max(1,Math.abs(u),Math.abs(m))}const M7e=Object.freeze(Object.defineProperty({__proto__:null,add:v7e,clone:q9e,conjugate:b7e,copy:Ioe,create:Y9e,dot:Poe,equals:k7e,exactEquals:C7e,fromMat4:e7e,fromRotation:J9e,fromRotationTranslation:Ooe,fromRotationTranslationValues:Q9e,fromTranslation:Z9e,fromValues:K9e,getDual:i7e,getReal:n7e,getTranslation:s7e,identity:t7e,invert:w7e,len:x7e,length:Loe,lerp:y7e,mul:g7e,multiply:Doe,normalize:E7e,rotateAroundAxis:p7e,rotateByQuatAppend:h7e,rotateByQuatPrepend:d7e,rotateX:u7e,rotateY:c7e,rotateZ:f7e,scale:m7e,set:r7e,setDual:o7e,setReal:a7e,sqrLen:S7e,squaredLength:sA,str:_7e,translate:l7e},Symbol.toStringTag,{value:"Module"}));function Roe(){var t=new zr(2);return zr!=Float32Array&&(t[0]=0,t[1]=0),t}function A7e(t){var e=new zr(2);return e[0]=t[0],e[1]=t[1],e}function T7e(t,e){var r=new zr(2);return r[0]=t,r[1]=e,r}function O7e(t,e){return t[0]=e[0],t[1]=e[1],t}function I7e(t,e,r){return t[0]=e,t[1]=r,t}function na(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Noe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Foe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Boe(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function D7e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function P7e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function xh(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Sh(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function L7e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ga(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function R7e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function XC(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function $oe(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function zoe(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function joe(t){var e=t[0],r=t[1];return e*e+r*r}function N7e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function F7e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function pd(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function S8(t,e){return t[0]*e[0]+t[1]*e[1]}function B7e(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function $7e(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}function z7e(t,e){e=e||1;var r=Gl()*2*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function j7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function G7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function U7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function W7e(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function V7e(t,e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=Math.sin(n),s=Math.cos(n);return t[0]=i*s-a*o+r[0],t[1]=i*o+a*s+r[1],t}function Goe(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+a*a),s=o&&(r*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function H7e(t){return t[0]=0,t[1]=0,t}function X7e(t){return"vec2("+t[0]+", "+t[1]+")"}function E8(t,e){return t[0]===e[0]&&t[1]===e[1]}function Y7e(t,e){var r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=rr*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=rr*Math.max(1,Math.abs(n),Math.abs(a))}var q7e=zoe,G_=Noe,K7e=Foe,Q7e=Boe,Z7e=XC,J7e=$oe,e$e=joe,t$e=function(){var t=Roe();return function(e,r,n,i,a,o){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();const r$e=Object.freeze(Object.defineProperty({__proto__:null,add:na,angle:Goe,ceil:D7e,clone:A7e,copy:O7e,create:Roe,cross:B7e,dist:Z7e,distance:XC,div:Q7e,divide:Boe,dot:S8,equals:Y7e,exactEquals:E8,floor:P7e,forEach:t$e,fromValues:T7e,inverse:F7e,len:q7e,length:zoe,lerp:$7e,max:Sh,min:xh,mul:K7e,multiply:Foe,negate:N7e,normalize:pd,random:z7e,rotate:V7e,round:L7e,scale:Ga,scaleAndAdd:R7e,set:I7e,sqrDist:J7e,sqrLen:e$e,squaredDistance:$oe,squaredLength:joe,str:X7e,sub:G_,subtract:Noe,transformMat2:j7e,transformMat2d:G7e,transformMat3:U7e,transformMat4:W7e,zero:H7e},Symbol.toStringTag,{value:"Module"})),n$e=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:c8e,mat2:R8e,mat2d:aFe,mat3:$ae,mat4:wBe,quat:X9e,quat2:M7e,vec2:r$e,vec3:e9e,vec4:E9e},Symbol.toStringTag,{value:"Module"}));function i$e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return c8(n,r),Cc(t,n,e)}function a$e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return f8(n,r),Cc(t,n,e)}function o$e(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return h8(n,r),Cc(t,n,e)}function s$e(t,e,r){return Cc(t,r,e)}function dl(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":i$e(r,r,[a[1],a[2]]);break;case"s":o$e(r,r,[a[1],a[2]]);break;case"r":a$e(r,r,a[1]);break;case"m":s$e(r,r,a[1]);break}}return r}var Mv=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,r||(a[f][c]=1))}),a},l$e=function(e,r){return e===r},tU=function(){function t(e,r){r===void 0&&(r=null),this.value=e,this.next=r}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t}(),Uoe=function(){function t(e){e===void 0&&(e=l$e),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var r=new tU(e,this.head);return this.head=r,this.tail||(this.tail=r),this},t.prototype.append=function(e){var r=new tU(e);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,e);)r=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(r=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),r},t.prototype.find=function(e){var r=e.value,n=r===void 0?void 0:r,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var r=this;return e.forEach(function(n){return r.append(n)}),this},t.prototype.toArray=function(){for(var e=[],r=this.head;r;)e.push(r),r=r.next;return e},t.prototype.reverse=function(){for(var e=this.head,r=null,n=null;e;)n=e.next,e.next=r,r=e,e=n;this.tail=this.head,this.head=r},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(r){return r.toString(e)}).toString()},t}(),u$e=function(){function t(){this.linkedList=new Uoe}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(e){this.linkedList.append(e)},t.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toString=function(e){return this.linkedList.toString(e)},t}(),fs=function(e,r,n){r===void 0&&(r=[]);var i=r.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},c$e=function(e,r){return r.filter(function(n){return n.source===e})},U_=function(e,r){return r.filter(function(n){return n.source===e||n.target===e})},Woe=function(e){e===void 0&&(e=0);var r="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(r).concat(n)};function f$e(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}var Voe=function(e,r,n,i){i===void 0&&(i=!0);var a=f$e(n),o=new u$e,s=e.edges,l=s===void 0?[]:s;o.enqueue(r);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),fs(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},h$e=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(p){l.push(p),s[p.id]=!0;for(var v=fs(p.id,a),g=function(w){var b=v[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<v.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o},Hoe=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=fs(m.id,a,"target").filter(function(E){return n.map(function(_){return _.id}).indexOf(E)>-1}),w=function(_){var k=y[_];if(!l[k]&&l[k]!==0){var C=n.filter(function(M){return M.id===k});C.length>0&&g(C[0]),u[m.id]=Math.min(u[m.id],u[k])}else s[k]&&(u[m.id]=Math.min(u[m.id],l[k]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,p=n;d<p.length;d++){var v=p[d];!l[v.id]&&l[v.id]!==0&&h(v)}return c};function _8(t,e){return e?Hoe(t):h$e(t)}var Of=function(e){var r={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){r[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){r[s.source].degree++,r[s.source].outDegree++,r[s.target].degree++,r[s.target].inDegree++}),r},Xoe=function(e,r){var n=Of(e);return n[r]?Of(e)[r].inDegree:0},Yoe=function(e,r){var n=Of(e);return n[r]?Of(e)[r].outDegree:0};function d$e(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}function qoe(t,e,r,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:r});var a=t.edges,o=a===void 0?[]:a;fs(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:r,current:e,next:s})&&qoe(t,s,e,n,i)}),n.leave({current:e,previous:r})}function C8(t,e,r,n){n===void 0&&(n=!0),qoe(t,e,"",d$e(r),n)}var k8=function(e){var r=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,p=h.previous;if(s[d]){r={};for(var v=d,g=p;g!==d;)r[v]=g,v=g,g=a[g];r[v]=g}else s[d]=d,delete o[d],a[d]=p},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return r?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];C8(e,c,u)}return r},M8=function(e,r,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=_8(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],p=(i={},i[h]=f,i),v=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=fs(m,e.edges),w=function(S){var E,_=y[S],k=e.nodes.find(function(F){return F.id===_});if(_===m)o.push((E={},E[_]=g,E));else if(!(_ in v))p[_]=g,d.push(k),v[_]=new Set([g]);else if(!v[m].has(k)){for(var C=!0,M=[k,g],A=p[m];v[_].size&&!v[_].has(A)&&(M.push(A),A!==p[A.id]);)A=p[A.id];if(M.push(A),r&&n?(C=!1,M.findIndex(function(F){return r.indexOf(F.id)>-1})>-1&&(C=!0)):r&&!n&&M.findIndex(function(F){return r.indexOf(F.id)>-1})>-1&&(C=!1),C){for(var T={},D=1;D<M.length;D+=1)T[M[D-1].id]=M[D];M.length&&(T[M[M.length-1].id]=M[0]),o.push(T)}v[_].add(g)}},b=0;b<y.length;b+=1)w(b)}return o},A8=function(e,r,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(A){for(var T=[A];T.length>0;){var D=T.pop();a.has(D)&&(a.delete(D),o[D.id].forEach(function(F){T.push(F)}),o[D.id].clear())}},f=function M(A,T,D){var F=!1;if(r&&n===!1&&r.indexOf(A.id)>-1)return F;i.push(A),a.add(A);for(var R=D[A.id],B=0;B<R.length;B+=1){var N=l[R[B]];if(N===T){for(var O={},L=1;L<i.length;L+=1)O[i[L-1].id]=i[L];i.length&&(O[i[i.length-1].id]=i[0]),s.push(O),F=!0}else a.has(N)||M(N,T,D)&&(F=!0)}if(F)c(A);else for(var B=0;B<R.length;B+=1){var N=l[R[B]];o[N.id].has(A)||o[N.id].add(A)}return i.pop(),F},h=e.nodes,d=h===void 0?[]:h,p=0;p<d.length;p+=1){var v=d[p],g=v.id;u[g]=p,l[p]=v}if(r&&n)for(var m=function(A){var T=r[A];u[d[A].id]=u[T],u[T]=0,l[0]=d.find(function(D){return D.id===T}),l[u[d[A].id]]=d[A]},p=0;p<r.length;p++)m(p);for(var y=function(A){for(var T,D,F=1/0,R=0;R<A.length;R+=1)for(var B=A[R],N=0;N<B.length;N++){var O=u[B[N].id];O<F&&(F=O,D=R)}for(var L=A[D],G=[],R=0;R<L.length;R+=1){var q=L[R];G[q.id]=[];for(var K=0,V=fs(q.id,e.edges,"target").filter(function(xe){return L.map(function(Ie){return Ie.id}).indexOf(xe)>-1});K<V.length;K++){var le=V[K];le===q.id&&!(n===!1&&r.indexOf(q.id)>-1)?s.push((T={},T[q.id]=q,T)):G[q.id].push(u[le])}}return{component:L,adjList:G,minIdx:F}},w=0;w<d.length;){var b=d.filter(function(M){return u[M.id]>=w}),x=Hoe({nodes:b,edges:e.edges}).filter(function(M){return M.length>1});if(x.length===0)break;var S=y(x),E=S.minIdx,_=S.adjList,k=S.component;if(k.length>1){k.forEach(function(M){o[M.id]=new Set});var C=l[E];if(r&&n&&r.indexOf(C.id)===-1)return s;f(C,C,_),w=E+1}else break}return s},Koe=function(e,r,n,i){return i===void 0&&(i=!0),r?A8(e,n,i):M8(e,n,i)},p$e=function(e,r,n){for(var i=1/0,a,o=0;o<r.length;o++){var s=r[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=r[o])}return a},bw=function(e,r,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===r&&(c[b]=0)});for(var h=o.length,d=function(w){var b=p$e(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=c$e(x,l):S=U_(x,l),S.forEach(function(E){var _=E.target,k=E.source,C=_===x?k:_,M=i&&E[i]?E[i]:1;c[C]>c[b.id]+M?(c[C]=c[b.id]+M,f[C]=[b.id]):c[C]===c[b.id]+M&&f[C].push(b.id)})},p=0;p<h;p++)d();f[r]=[r];var v={};for(var g in c)c[g]!==1/0&&Qoe(r,g,f,v);var m={};for(var g in v)m[g]=v[g][0];return{length:c,path:m,allPath:v}};function Qoe(t,e,r,n){if(t===e)return[t];if(n[e])return n[e];for(var i=[],a=0,o=r[e];a<o.length;a++){var s=o[a],l=Qoe(t,s,r,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];Xt(f)?i.push(Ro(Ro([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var Zoe=function(e,r,n,i,a){var o=bw(e,r,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},Joe=function(e,r,n,i){var a;if(r===n)return[[r]];var o=e.edges,s=o===void 0?[]:o,l=[r],u=(a={},a[r]=!0,a),c=[],f=[],h=i?fs(r,s,"target"):fs(r,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var p=d.shift();p&&(l.push(p),u[p]=!0,h=i?fs(p,s,"target"):fs(p,s),c.push(h.filter(function(m){return!u[m]})))}else{var v=l.pop();u[v]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var v=l.pop();u[v]=!1,c.pop()}}return f},xw=function(e,r){for(var n=Mv(e,r),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},ese=function(e,r,n,i){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=Woe();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=Mv(e,r),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,E){if(S){var _=o[E].id;h[x][_]=S}})});for(var d=0,p=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(D){var F=h[x.id][D],R=c[D].node,B=R.clusterId;S[B]||(S[B]=0),S[B]+=F});var E=-1/0,_=[];if(Object.keys(S).forEach(function(D){E<S[D]?(E=S[D],_=[D]):E===S[D]&&_.push(D)}),!(_.length===1&&_[0]===x.clusterId)){var k=_.indexOf(x.clusterId);if(k>=0&&_.splice(k,1),_&&_.length){b=!0;var C=u[x.clusterId],M=C.nodes.indexOf(x);C.nodes.splice(M,1);var A=Math.floor(Math.random()*_.length),T=u[_[A]];T.nodes.push(x),x.clusterId=T.id}}}),!b)return"break";d++};d<i;){var v=p();if(v==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,E=c[b].node.clusterId,_=c[x].node.clusterId,k="".concat(E,"---").concat(_);if(m[k])m[k].weight+=S,m[k].count++;else{var C={source:E,target:_,weight:S,count:1};m[k]=C,g.push(C)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},Qs=function(){function t(e){this.arr=e}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new t(i)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new t(i)}},t.prototype.avg=function(e){var r=[];if(e!==0)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},t.prototype.euclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=Dr(this.arr);r.sort(function(o,s){return o-s});var n=r[r.length-1],i=r[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new t(e)},t.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var r=0;for(var n in this.arr)r+=Math.pow(this.arr[n],2);return Math.sqrt(r)},t.prototype.dot=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},t.prototype.equal=function(e){var r,n=e.arr;if(((r=this.arr)===null||r===void 0?void 0:r.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},t}(),T8=function(e,r){r===void 0&&(r=void 0);var n=[];return e.forEach(function(i){r===void 0&&n.push(i),i[r]!==void 0&&n.push(i[r])}),n},Fl;(function(t){t.EuclideanDistance="euclideanDistance"})(Fl||(Fl={}));var v$e=function(e,r,n){var i=[];r!=null&&r.length?i=r:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=yw(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=yw(s))}),a},O8=function(e,r,n){var i=v$e(e,r,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],p=d.findIndex(function(m){return h===m}),v=[];if(s)v.push(h);else for(var g=0;g<d.length;g++)g===p?v.push(1):v.push(0);c=c.concat(v)}),a[u]=c}),a},rU=function(e,r,n,i){n===void 0&&(n=Fl.EuclideanDistance);var a=0;switch(n){case Fl.EuclideanDistance:a=new Qs(e).euclideanDistance(new Qs(r));break}return a},nU=function(e,r,n,i){for(var a=r.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=r[l][c]||0,d=n[l]||0,p=n[c]||0;s+=h-d*p/o}}return s*=1/o,s},vI=function(e,r){e===void 0&&(e=[]);for(var n=e.length,i=new Qs([]),a=0;a<n;a++)i=i.add(new Qs(r[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Qs(r[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Qs(r[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new Qs(r[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,p=2*n*s,a=0;a<n;a++)for(var v=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||v!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(p,2)-c[a][f]/p;d+=m}}return Number(d.toFixed(4))},I8=function(e,r,n,i,a,o,s,l,u){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,p=[];if(a){f.forEach(function(O,L){O.properties=O.properties||{},O.originIndex=L});var v=[];f.every(function(O){return O.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(f.map(function(O){return O.nodeType}))),f.forEach(function(O){O.properties.nodeType=v.findIndex(function(L){return L===O.nodeType})}));var g=T8(f,o);p=O8(g,s,l)}var m=1,y={},w={};f.forEach(function(O,L){var G=String(m++);O.clusterId=G,y[G]={id:G,nodes:[O]},w[O.id]={node:O,idx:L}});var b=Mv(e,r),x=[],S={},E=0;b.forEach(function(O,L){var G=0,q=f[L].id;S[q]={},O.forEach(function(K,V){if(K){G+=K;var le=f[V].id;S[q][le]=K,E+=K}}),x.push(G)}),E/=2;for(var _=1/0,k=1/0,C=0,M=[],A={};;){a&&f.every(function(O){return O.hasOwnProperty("properties")})?_=nU(f,b,x,E)+vI(f,p)*u:_=nU(f,b,x,E),C===0&&(k=_,M=f,A=y);var T=_>0&&_>k&&_-k<i;if(_>k&&(M=f.map(function(O){return{node:O,clusterId:O.clusterId}}),A=Dr(y),k=_),T||C>100)break;C++,Object.keys(y).forEach(function(O){var L=0;d.forEach(function(G){var q=G.source,K=G.target,V=w[q].node.clusterId,le=w[K].node.clusterId;(V===O&&le!==O||le===O&&V!==O)&&(L=L+(G[n]||1))}),y[O].sumTot=L}),f.forEach(function(O,L){var G=y[O.clusterId],q=0,K,V=x[L]/(2*E),le=0,ge=G.nodes;ge.forEach(function(yt){var Tt=w[yt.id].idx;le+=b[L][Tt]||0});var xe=le-G.sumTot*V,Ie=ge.filter(function(yt){return yt.id!==O.id});Ie.forEach(function(yt,Tt){p[yt.originIndex]});var He=vI(Ie,p)*u,Ge=S[O.id];if(Object.keys(Ge).forEach(function(yt){var Tt=w[yt].node,kt=Tt.clusterId;if(kt!==O.clusterId){var mt=y[kt],xt=mt.nodes;if(!(!xt||!xt.length)){var Nt=0;xt.forEach(function(Ee){var fe=w[Ee.id].idx;Nt+=b[L][fe]||0});var De=Nt-mt.sumTot*V,J=xt.concat([O]);J.forEach(function(Ee,fe){p[Ee.originIndex]});var P=vI(J,p)*u,me=De-xe;a&&(me=De+P-(xe+He)),me>q&&(q=me,K=mt)}}}),q>0){K.nodes.push(O);var ht=O.clusterId;O.clusterId=K.id;var dt=G.nodes.indexOf(O);G.nodes.splice(dt,1);var It=0,_t=0;d.forEach(function(yt){var Tt=yt.source,kt=yt.target,mt=w[Tt].node.clusterId,xt=w[kt].node.clusterId;(mt===K.id&&xt!==K.id||xt===K.id&&mt!==K.id)&&(It=It+(yt[n]||1)),(mt===ht&&xt!==ht||xt===ht&&mt!==ht)&&(_t=_t+(yt[n]||1))}),K.sumTot=It,G.sumTot=_t}})}var D={},F=0;Object.keys(A).forEach(function(O){var L=A[O];if(!L.nodes||!L.nodes.length){delete A[O];return}var G=String(F+1);G!==O&&(L.id=G,L.nodes=L.nodes.map(function(q){return{id:q.id,clusterId:G}}),A[G]=L,D[O]=G,delete A[O],F++)}),M.forEach(function(O){var L=O.node,G=O.clusterId;L&&(L.clusterId=G,L.clusterId&&D[L.clusterId]&&(L.clusterId=D[L.clusterId]))});var R=[],B={};d.forEach(function(O){var L=O.source,G=O.target,q=O[n]||1,K=w[L].node.clusterId,V=w[G].node.clusterId;if(!(!K||!V)){var le="".concat(K,"---").concat(V);if(B[le])B[le].weight+=q,B[le].count++;else{var ge={source:K,target:V,weight:q,count:1};B[le]=ge,R.push(ge)}}});var N=[];return Object.keys(A).forEach(function(O){N.push(A[O])}),{clusters:N,clusterEdges:R}},tse=function(e,r,n,i,a,o,s,l){return r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1),I8(e,r,n,i,!0,a,o,s,l)},rse=function(e,r){var n;r===void 0&&(r=1);for(var i=Dr(e),a=i.nodes,o=a===void 0?[]:a,s=i.edges,l=s===void 0?[]:s,u=function(){var h=Of({nodes:o,edges:l}),d=Object.keys(h);d.sort(function(g,m){var y,w;return((y=h[g])===null||y===void 0?void 0:y.degree)-((w=h[m])===null||w===void 0?void 0:w.degree)});var p=d[0];if(!o.length||((n=h[p])===null||n===void 0?void 0:n.degree)>=r)return"break";var v=o.findIndex(function(g){return g.id===p});o.splice(v,1),l=l.filter(function(g){return!(g.source===p||g.target===p)})};;){var c=u();if(c==="break")break}return{nodes:o,edges:l}},iU=function(e,r,n){var i=[];switch(e){case Fl.EuclideanDistance:i=r[n];break;default:i=[];break}return i},nse=function(e,r,n,i,a,o){r===void 0&&(r=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Fl.EuclideanDistance);var s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f={clusters:[{id:"0",nodes:l}],clusterEdges:[]};if(o===Fl.EuclideanDistance&&!l.every(function(G){return G.hasOwnProperty(n)}))return f;var h=[],d=[];if(o===Fl.EuclideanDistance&&(h=T8(l,n),d=O8(h,i,a)),!d.length)return f;for(var p=yw(d.map(function(G){return G.join("")})),v=Math.min(r,l.length,p.length),g=0;g<l.length;g++)l[g].originIndex=g;for(var m=[],y=[],w=[],g=0;g<v;g++)if(g===0){var b=Math.floor(Math.random()*l.length);switch(o){case Fl.EuclideanDistance:m[g]=d[b];break;default:m[g]=[];break}y.push(b),w[g]=[l[b]],l[b].clusterId=String(g)}else{for(var x=-1/0,S=0,E=function(K){if(!y.includes(K)){for(var V=0,le=0;le<m.length;le++){var ge=0;switch(o){case Fl.EuclideanDistance:ge=rU(d[l[K].originIndex],m[le],o);break}V+=ge}var xe=V/m.length;xe>x&&!m.find(function(Ie){return Od(Ie,iU(o,d,l[K].originIndex))})&&(x=xe,S=K)}},_=0;_<l.length;_++)E(_);m[g]=iU(o,d,S),y.push(S),w[g]=[l[S]],l[S].clusterId=String(g)}for(var k=0;;){for(var g=0;g<l.length;g++){var C=0,M=1/0;if(!(k===0&&y.includes(g))){for(var A=0;A<m.length;A++){var T=0;switch(o){case Fl.EuclideanDistance:T=rU(d[g],m[A],o);break}T<M&&(M=T,C=A)}if(l[g].clusterId!==void 0)for(var D=w[Number(l[g].clusterId)].length-1;D>=0;D--)w[Number(l[g].clusterId)][D].id===l[g].id&&w[Number(l[g].clusterId)].splice(D,1);l[g].clusterId=String(C),w[C].push(l[g])}}for(var F=!1,g=0;g<w.length;g++){for(var R=w[g],B=new Qs([]),A=0;A<R.length;A++)B=B.add(new Qs(d[R[A].originIndex]));var N=B.avg(R.length);N.equal(new Qs(m[g]))||(F=!0,m[g]=N.getArr())}if(k++,l.every(function(G){return G.clusterId!==void 0})&&F||k>=1e3)break}var O=[],L={};return c.forEach(function(G){var q,K,V=G.source,le=G.target,ge=(q=l.find(function(Ge){return Ge.id===V}))===null||q===void 0?void 0:q.clusterId,xe=(K=l.find(function(Ge){return Ge.id===le}))===null||K===void 0?void 0:K.clusterId,Ie="".concat(ge,"---").concat(xe);if(L[Ie])L[Ie].count++;else{var He={source:ge,target:xe,count:1};L[Ie]=He,O.push(He)}}),{clusters:w,clusterEdges:O}},D8=function(e,r){var n=new Qs(r),i=n.norm2(),a=new Qs(e),o=a.norm2(),s=n.dot(a),l=i*o,u=l?s/l:0;return u},ise=function(e,r,n,i,a){e===void 0&&(e=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=Dr(e.filter(function(h){return h.id!==r.id})),s=e.findIndex(function(h){return h.id===r.id}),l=T8(e,n),u=O8(l,i,a),c=u[s],f=[];return o.forEach(function(h,d){if(h.id!==r.id){var p=u[d],v=D8(p,c);f.push(v),h.cosineSimilarity=v}}),o.sort(function(h,d){return d.cosineSimilarity-h.cosineSimilarity}),{allCosineSimilarity:f,similarNodes:o}},g$e=function(){function t(e){this.count=e.length,this.parent={};for(var r=0,n=e;r<n.length;r++){var i=n[r];this.parent[i]=i}}return t.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},t.prototype.union=function(e,r){var n=this.find(e),i=this.find(r);n!==i&&(n<i?(this.parent[r]!==r&&this.union(this.parent[r],e),this.parent[r]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],r),this.parent[e]=this.parent[r]))},t.prototype.connected=function(e,r){return this.find(e)===this.find(r)},t}(),m$e=function(e,r){return e-r},y$e=function(){function t(e){e===void 0&&(e=m$e),this.compareFn=e,this.list=[]}return t.prototype.getLeft=function(e){return 2*e+1},t.prototype.getRight=function(e){return 2*e+2},t.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var e=this.top(),r=this.list.pop();return this.list.length>0&&(this.list[0]=r,this.moveDown(0)),e},t.prototype.insert=function(e){if(e!==null){this.list.push(e);var r=this.list.length-1;return this.moveUp(r),!0}return!1},t.prototype.moveUp=function(e){for(var r=this.getParent(e);e&&e>0&&this.compareFn(this.list[r],this.list[e])>0;){var n=this.list[r];this.list[r]=this.list[e],this.list[e]=n,e=r,r=this.getParent(e)}},t.prototype.moveDown=function(e){var r,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(r=[this.list[n],this.list[e]],this.list[e]=r[0],this.list[n]=r[1],this.moveDown(n))},t}(),w$e=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return r?g.weight-m.weight:0},f=new y$e(c);for(U_(l.id,s).forEach(function(v){f.insert(v)});!f.isEmpty();){var h=f.delMin(),d=h.source,p=h.target;u.has(d)&&u.has(p)||(n.push(h),u.has(d)||(u.add(d),U_(d,s).forEach(function(v){f.insert(v)})),u.has(p)||(u.add(p),U_(p,s).forEach(function(v){f.insert(v)})))}return n},aU=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});r&&l.sort(function(d,p){return d.weight-p.weight});for(var u=new g$e(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},ase=function(e,r,n){var i={prim:w$e,kruskal:aU};return n?i[n](e,r):aU(e,r)},ose=function(e,r,n){typeof r!="number"&&(r=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},p={},v=0;v<f;++v){var g=l[v],m=g.id;d[m]=1/f,p[m]=1/f}for(var y=Of(e);o>0&&i>r;){a=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=fs(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=p[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;h=d[m]+a,i+=Math.abs(h-p[m]),p[m]=h}o-=1}return p},b$e=-1,YC=-1,sse="-1",ec="-1",lse=-1,oU=function(){function t(e,r,n,i){e===void 0&&(e=b$e),r===void 0&&(r=YC),n===void 0&&(n=YC),i===void 0&&(i=sse),this.id=e,this.from=r,this.to=n,this.label=i}return t}(),x$e=function(){function t(e,r){e===void 0&&(e=YC),r===void 0&&(r=ec),this.id=e,this.label=r,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},t}(),use=function(){function t(e,r,n){e===void 0&&(e=YC),r===void 0&&(r=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=r,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(e,r){if(!this.nodeMap[e]){var n=new x$e(e,r);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[r]||(this.nodeLabelMap[r]=[]),this.nodeLabelMap[r].push(e)}},t.prototype.addEdge=function(e,r,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[r]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new oU(e,r,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[r].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new oU(e,n,r,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}(),_p=function(){function t(e,r,n,i,a){this.fromNode=e,this.toNode=r,this.nodeEdgeNodeLabel={nodeLabel1:n||ec,edgeLabel:i||sse,nodeLabel2:a||ec}}return t.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t}(),sU=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(e){var r=this.dfsEdgeList.length,n=e.length;if(r!==n)return!1;for(var i=0;i<r;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t.prototype.pushBack=function(e,r,n,i,a){return this.dfsEdgeList.push(new _p(e,r,n,i,a)),this.dfsEdgeList},t.prototype.toGraph=function(e,r){e===void 0&&(e=lse),r===void 0&&(r=!1);var n=new use(e,!0,r);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==ec&&n.addNode(a,l),c!==ec&&n.addNode(o,c),l!==ec&&c!==l&&n.addEdge(void 0,a,o,u)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,r=this.dfsEdgeList.length,n=r-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},t.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(r){e[r.fromNode]||(e[r.fromNode]=!0),e[r.toNode]||(e[r.toNode]=!0)}),Object.keys(e).length},t}(),iE=function(){function t(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var r=e.edge;this.edges.push(r),this.nodesUsed[r.from]=1,this.nodesUsed[r.to]=1,this.edgesUsed[r.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},t.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},t}(),S$e=function(){function t(e){var r=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,p=d===void 0?!1:d;this.graphs=r,this.dfsCode=new sU,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(e,r){var n=this,i=[],a=e.nodeMap;return r.edges.forEach(function(o){(n.directed||r.label<=a[o.to].label)&&i.push(o)}),i},t.prototype.findBackwardEdge=function(e,r,n,i){if(!this.directed&&r===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==r.from)){if(this.directed){if(a[r.from].label<a[n.to].label||a[r.from].label===a[n.to].label&&r.label<=c.label)return c}else if(r.label<c.label||r.label===c.label&&a[r.to].label<=a[n.to].label)return c}}return null},t.prototype.findForwardPureEdges=function(e,r,n,i){for(var a=[],o=r.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},t.prototype.findForwardRmpathEdges=function(e,r,n,i){for(var a=[],o=e.nodeMap,s=o[r.to].label,l=o[r.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;r.to===h.to||n>d||i.hasNode(o[h.to])||(r.label<h.label||r.label===h.label&&s<=d)&&a.push(h)}return a},t.prototype.getSupport=function(e){var r={};return e.forEach(function(n){r[n.graphId]||(r[n.graphId]=!0)}),Object.keys(r).length},t.prototype.findMinLabel=function(e){var r=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!r){r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<r.nodeLabel1||a===r.nodeLabel1&&o<r.edgeLabel||a===r.nodeLabel1&&o===r.edgeLabel&&s<r.nodeLabel2)&&(r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),r},t.prototype.isMin=function(){var e=this,r=this.dfsCode;if(this.verbose&&console.log("isMin checking",r),r.dfsEdgeList.length===1)return!0;var n=this.directed,i=r.toGraph(lse,n),a=i.nodeMap,o=new sU,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var p=a[d.to],v="".concat(f.label,"-").concat(d.label,"-").concat(p.label);s[v]||(s[v]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:p.label});var g={graphId:i.id,edge:d,preNode:null};s[v].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new _p(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),p=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(B){if(m)return"break";h.forEach(function(N){var O=new iE(N),L=e.findBackwardEdge(i,O.edges[d[B]],O.edges[d[0]],O);L&&(g[L.label]||(g[L.label]={projected:[],edgeLabel:L.label}),g[L.label].projected.push({graphId:i.id,edge:g,preNode:N}),y=o.dfsEdgeList[d[B]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var E=e.findMinLabel(g);o.dfsEdgeList.push(new _p(v,y,ec,E.edgeLabel,ec));var _=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[E.edgeLabel].projected)}var k={};m=!1;var C=0;h.forEach(function(R){var B=new iE(R),N=e.findForwardPureEdges(i,B.edges[d[0]],p,B);N.length>0&&(m=!0,C=v,N.forEach(function(O){var L="".concat(O.label,"-").concat(a[O.to].label);k[L]||(k[L]={projected:[],edgeLabel:O.label,nodeLabel2:a[O.to].label}),k[L].projected.push({graphId:i.id,edge:O,preNode:R})}))});for(var M=d.length,A=function(B){if(m)return"break";var N=d[B];h.forEach(function(O){var L=new iE(O),G=e.findForwardRmpathEdges(i,L.edges[N],p,L);G.length>0&&(m=!0,C=o.dfsEdgeList[N].fromNode,G.forEach(function(q){var K="".concat(q.label,"-").concat(a[q.to].label);k[K]||(k[K]={projected:[],edgeLabel:q.label,nodeLabel2:a[q.to].label}),k[K].projected.push({graphId:i.id,edge:q,preNode:O})}))})},x=0;x<M;x++){var T=A(x);if(T==="break")break}if(!m)return!0;var D=e.findMinLabel(k);o.dfsEdgeList.push(new _p(C,v+1,ec,D.edgeLabel,D.nodeLabel2));var F=o.dfsEdgeList.length-1;return r.dfsEdgeList[F]!==o.dfsEdgeList[F]?!1:f(k["".concat(D.edgeLabel,"-").concat(D.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Dr(e))}},t.prototype.subGraphMining=function(e){var r=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=r.graphs[c.graphId],h=f.nodeMap,d=new iE(c),p=a.length-1;p>=0;p--){var v=r.findBackwardEdge(f,d.edges[a[p]],d.edges[a[0]],d);if(v){var g="".concat(r.dfsCode.dfsEdgeList[a[p]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:r.dfsCode.dfsEdgeList[a[p]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:c.graphId,edge:v,preNode:c})}}if(!(i>=r.maxNodeNum)){var m=r.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=r.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var E="".concat(r.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[E]||(l[E]={projected:[],fromNodeId:r.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[E].projected.push({graphId:c.graphId,edge:S,preNode:c})})},p=0;p<a.length;p++)y(p)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;r.dfsCode.dfsEdgeList.push(new _p(o,h,"-1",d,"-1")),r.subGraphMining(u[c].projected),r.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,p=f.nodeLabel2;r.dfsCode.dfsEdgeList.push(new _p(h,o+1,ec,d,p)),r.subGraphMining(l[c].projected),r.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,r=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,p="".concat(l,"-").concat(d);if(!s[p]){var v=a[d]||0;v++,a[d]=v}s[p]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!r&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},t.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var r=this.graphs;this.directed;var n={};Object.keys(r).forEach(function(i){var a=r[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new _p(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},t}(),E$e=function(e,r,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new use(s,!0,r),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],p=c[f.target];u.addEdge(-1,d,p,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},_$e=function(e,r,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[r]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},lU="cluster",C$e=function(e){var r=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?lU:a,s=e.edgeLabelProp,l=s===void 0?lU:s,u=E$e(r,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,p=e.top,v={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:p,verbose:d,directed:i},g=new S$e(v);g.run();var m=_$e(g.frequentSubgraphs,o,l);return m},uU=function(e,r,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return r.forEach(function(s,l){a.push(cse(o,s,l,n,i))}),a},cse=function(e,r,n,i,a){var o=[n],s=[],l={};return r.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},k$e=function(e,r,n,i,a){var o=Math.ceil(n/r),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,p=u.neighborNum-1;f<o;){for(var v=d[1+Math.floor(Math.random()*p)],g=0;(s["".concat(c,"-").concat(v)]||s["".concat(v,"-").concat(c)])&&(v=Math.floor(Math.random()*r),g++,!(g>2*r)););if(g<2*r&&(s["".concat(c,"-").concat(v)]={start:c,end:v,distance:a[c][v]},f++,l++,l>=n))return s;if(h++,h>2*r)break}if(f<o){var m=o-f;o=(o+m)/(r-c-1)}}),s},W_=function(e,r,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=r[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=r[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var p={},v=d.length,g=0;g<v;g++){var m=a[d[g]];i[o].nodes.push(m),p[m.id]=!0}n.edges.forEach(function(y){p[y.source]&&p[y.target]&&i[o].edges.push(y)})}}}}),i},V_=function(e,r,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=r==null?void 0:r.edges)===null||a===void 0)&&a.length)||((o=r==null?void 0:r.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=r==null?void 0:r.nodes[0][n],d=r==null?void 0:r.nodes[1][n],p=r==null?void 0:r.edges[0][i];u[i]===p&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},M$e=function(e,r,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var p=0,v=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,v.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,E){var _=c[S];y.graphs.forEach(function(k,C){E!==C&&(b+=Math.abs(_-c[k]))})}),b/=x*(x-1)/2,p+=b}),p/=d.length;var g=0;v.forEach(function(y,w){v.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=v.length*(v.length-1)/2});var m=g-p;i<m&&(i=m,a=u)},s=0;s<r;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},cU=function(e,r){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[r];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},fU=function(e,r,n){var i={},a={};return e.forEach(function(o,s){i["".concat(Woe)]={idx:s,edge:o};var l=o[r];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},hU=function(e,r,n){var i=r.length,a={};return r.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},A$e=function(e,r,n,i,a,o,s,l,u,c,f){var h,d="".concat(r.id,"-").concat(n.id);if(c&&c[d])return c[d];var p=f?f[d]:void 0;if(!p){var v=(h={},h[d]={start:i[r.id].idx,end:i[n.id].idx,distance:a},h);f=W_(v,o,e,f),p=f[d]}return V_(p,s,l,u)},dU=function(e,r,n,i){var a,o,s,l=(a=e[r])===null||a===void 0?void 0:a.degree,u=(o=e[r])===null||o===void 0?void 0:o.inDegree,c=(s=e[r])===null||s===void 0?void 0:s.outDegree;return e[r]===void 0&&(l=1/0,u=1/0,c=1/0,i[r].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var p=n[f.id].outDegree;c>p&&(c=p)}),e[r]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},fse=function(e,r,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=xw(e,n),f=xw(r,n),h=hU(e.nodes,c,n),d=hU(r.nodes,f,n),p=cU(e.nodes,o),v=p.nodeMap,g=p.nodeLabelMap,m=cU(r.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;fU(e.edges,s,v);var b=fU(r.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(De){x=x.concat(De)}),a||(a=Math.max.apply(Math,Ro(Ro([],x,!1),[2],!1))),i||(i=a);var S=uU(e,c,o,i),E=uU(r,f,o,i),_=Math.min(100,u*(u-1)/2),k=k$e(i,u,_,S,c),C=W_(k,S,e),M=10,A=1,T=1,D=4,F={graphs:C,nodeLabelProp:o,edgeLabelProp:s,minSupport:A,minNodeNum:T,maxNodeNum:D,directed:n},R=C$e(F).slice(0,M),B=R.length,N=[];R.forEach(function(De,J){N[J]={},Object.keys(C).forEach(function(P){var me=C[P],Ee=V_(me,De,o,s);N[J][P]=Ee})});var O=M$e(N,B,R),L=O.structure,G=O.structureCountMap,q=r.nodes[0],K=[],V=(l=r.nodes[0])===null||l===void 0?void 0:l[o],le=-1/0;r.nodes.forEach(function(De){var J=De[o],P=g[J];(P==null?void 0:P.length)>le&&(le=P.length,K=P,V=J,q=De)});var ge={},xe={},Ie={},He={},Ge={},ht={};Object.keys(w).forEach(function(De,J){Ge[De]=[],n&&(ht[De]=[]);var P=w[De],me={};P.forEach(function($e){var Ue=d["".concat(q.id,"-").concat($e.id)];if(Ue&&Ge[De].push(Ue),me["".concat(q.id,"-").concat($e.id)]={start:0,end:y[$e.id].idx,distance:Ue},n){var ut=d["".concat($e.id,"-").concat(q.id)];ut&&ht[De].push(ut)}}),Ge[De]=Ge[De].sort(function($e,Ue){return $e-Ue}),n&&(ht[De]=ht[De].sort(function($e,Ue){return $e-Ue})),xe=W_(me,E,r,xe);var Ee=[];if(Object.keys(me).forEach(function($e){if(Ie[$e]){Ee.push(Ie[$e]);return}var Ue=xe[$e];Ie[$e]=V_(Ue,L,o,s),Ee.push(Ie[$e])}),Ee=Ee.sort(function($e,Ue){return Ue-$e}),He["".concat(q.id,"-").concat(De)]=Ee,De!==V)for(var fe=(K==null?void 0:K.length)||0,ke=function(Ue){var ut=K[Ue],Mt=S[v[ut.id].idx],$t=Mt.nodeLabelCountMap[De],At=w[De].length;if(!$t||$t.count<At)return K.splice(Ue,1),"continue";for(var wr=!1,Ar=0;Ar<At;Ar++)if($t.dists[Ar]>Ge[De][Ar]){wr=!0;break}if(wr)return K.splice(Ue,1),"continue";var Zr={};Mt.neighbors.forEach(function(gr){var nn=h["".concat(ut.id,"-").concat(gr.id)];Zr["".concat(ut.id,"-").concat(gr.id)]={start:v[ut.id].idx,end:v[gr.id].idx,distance:nn}}),C=W_(Zr,S,e,C);var Hr=[];Object.keys(Zr).forEach(function(gr){if(G[gr]){Hr.push(G[gr]);return}var nn=C[gr];G[gr]=V_(nn,L,o,s),Hr.push(G[gr])}),Hr=Hr.sort(function(gr,nn){return nn-gr});for(var Xn=!1,Ar=0;Ar<At;Ar++)if(Hr[Ar]<Ee[Ar]){Xn=!0;break}if(Xn)return K.splice(Ue,1),"continue"},Be=fe-1;Be>=0;Be--)ke(Be)});var dt=[];K==null||K.forEach(function(De){for(var J=v[De.id].idx,P=cse(e.nodes,c[J],J,o,a),me=P.neighbors,Ee=me.length,fe=!1,ke=Ee-1;ke>=0;ke--){if(me.length+1<r.nodes.length){fe=!0;return}var Be=me[ke],$e=Be[o];if(!w[$e]||!w[$e].length){me.splice(ke,1);continue}if(!Ge[$e]||!Ge[$e].length){me.splice(ke,1);continue}var Ue="".concat(De.id,"-").concat(Be.id),ut=h[Ue],Mt=Ge[$e].length-1,$t=Ge[$e][Mt];if(ut>$t){me.splice(ke,1);continue}if(n){var At="".concat(Be.id,"-").concat(De.id),wr=h[At];Mt=ht[$e].length-1;var Ar=ht[$e][Mt];if(wr>Ar){me.splice(ke,1);continue}}var Zr=G[Ue]?G[Ue]:A$e(e,De,Be,v,ut,S,L,o,s,G,C),Hr="".concat(q.id,"-").concat($e),Xn=He[Hr][He[Hr].length-1];if(Zr<Xn){me.splice(ke,1);continue}var gr=dU(ge,$e,y,w),nn=gr.minPatternNodeLabelDegree;if(gr.minPatternNodeLabelInDegree,gr.minPatternNodeLabelOutDegree,v[Be.id].degree<nn){me.splice(ke,1);continue}}fe||dt.push({nodes:[De].concat(me)})});var It=bw(r,q.id,!1).length,_t={};n?(Object.keys(It).forEach(function(De){var J=y[De].node[o];_t[J]?_t[J].push(It[De]):_t[J]=[It[De]]}),Object.keys(_t).forEach(function(De){_t[De].sort(function(J,P){return J-P})})):_t=Ge;for(var yt=dt.length,Tt=function(J){var P=dt[J],me=P.nodes[0],Ee={},fe={};P.nodes.forEach(function(Zt,Jr){fe[Zt.id]={idx:Jr,node:Zt,degree:0,inDegree:0,outDegree:0};var Bt=Zt[o];Ee[Bt]?Ee[Bt]++:Ee[Bt]=1});var ke=[],Be={};e.edges.forEach(function(Zt){fe[Zt.source]&&fe[Zt.target]&&(ke.push(Zt),Be[Zt[s]]?Be[Zt[s]]++:Be[Zt[s]]=1,fe[Zt.source].degree++,fe[Zt.target].degree++,fe[Zt.source].outDegree++,fe[Zt.target].inDegree++)});for(var $e=Object.keys(b).length,Ue=!1,ut=0;ut<$e;ut++){var Mt=Object.keys(b)[ut];if(!Be[Mt]||Be[Mt]<b[Mt].length){Ue=!0;break}}if(Ue)return dt.splice(J,1),"continue";var $t=ke.length;if($t<r.edges.length)return dt.splice(J,1),"break";for(var At=!1,wr=function(Jr){var Bt=ke[Jr],pn=Bt[s],zn=b[pn];if(!zn||!zn.length)return Be[pn]--,zn&&Be[pn]<zn.length?(At=!0,"break"):(ke.splice(Jr,1),fe[Bt.source].degree--,fe[Bt.target].degree--,fe[Bt.source].outDegree--,fe[Bt.target].inDegree--,"continue");var Ta=fe[Bt.source].node[o],Oa=fe[Bt.target].node[o],ln=!1;if(zn.forEach(function(Uo){var Os=y[Uo.source].node,un=y[Uo.target].node;Os[o]===Ta&&un[o]===Oa&&(ln=!0),!n&&Os[o]===Oa&&un[o]===Ta&&(ln=!0)}),!ln)return Be[pn]--,zn&&Be[pn]<zn.length?(At=!0,"break"):(ke.splice(Jr,1),fe[Bt.source].degree--,fe[Bt.target].degree--,fe[Bt.source].outDegree--,fe[Bt.target].inDegree--,"continue")},ut=$t-1;ut>=0;ut--){var Ar=wr(ut);if(Ar==="break")break}if(At)return dt.splice(J,1),"continue";P.edges=ke;var Zr=bw(P,P.nodes[0].id,!1).length;if(Object.keys(Zr).reverse().forEach(function(Zt){if(!(Zt===P.nodes[0].id||At)){if(Zr[Zt]===1/0){var Jr=fe[Zt].node[o];if(Ee[Jr]--,Ee[Jr]<w[Jr].length){At=!0;return}var Bt=P.nodes.indexOf(fe[Zt].node);P.nodes.splice(Bt,1),fe[Zt]=void 0;return}var pn=v[Zt].node[o];if(!_t[pn]||!_t[pn].length||Zr[Zt]>_t[pn][_t[pn].length-1]){var Jr=fe[Zt].node[o];if(Ee[Jr]--,Ee[Jr]<w[Jr].length){At=!0;return}var Bt=P.nodes.indexOf(fe[Zt].node);P.nodes.splice(Bt,1),fe[Zt]=void 0}}}),At)return dt.splice(J,1),"continue";for(var Hr=!0,Xn=0;Hr&&!At;){Hr=!1;var gr=n?fe[me.id].degree<y[q.id].degree||fe[me.id].inDegree<y[q.id].inDegree||fe[me.id].outDegree<y[q.id].outDegree:fe[me.id].degree<y[q.id].degree;if(gr){At=!0;break}if(Ee[me[o]]<w[me[o]].length){At=!0;break}for(var nn=P.nodes.length,_i=nn-1;_i>=0;_i--){var fn=P.nodes[_i],Ma=fe[fn.id].degree,ca=fe[fn.id].inDegree,Go=fe[fn.id].outDegree,an=fn[o],Yn=dU(ge,an,y,w),qn=Yn.minPatternNodeLabelDegree,su=Yn.minPatternNodeLabelInDegree,lu=Yn.minPatternNodeLabelOutDegree,uu=n?Ma<qn||ca<su||Go<lu:Ma<qn;if(uu){if(Ee[fn[o]]--,Ee[fn[o]]<w[fn[o]].length){At=!0;break}P.nodes.splice(_i,1),fe[fn.id]=void 0,Hr=!0}}if(At||!Hr&&Xn!==0)break;$t=ke.length;for(var Aa=$t-1;Aa>=0;Aa--){var xn=ke[Aa];if(!fe[xn.source]||!fe[xn.target]){ke.splice(Aa,1);var sn=xn[s];if(Be[sn]--,fe[xn.source]&&(fe[xn.source].degree--,fe[xn.source].outDegree--),fe[xn.target]&&(fe[xn.target].degree--,fe[xn.target].inDegree--),b[sn]&&Be[sn]<b[sn].length){At=!0;break}Hr=!0}}Xn++}if(At||At||P.nodes.length<r.nodes.length||ke.length<r.edges.length)return dt.splice(J,1),"continue"},kt=yt-1;kt>=0;kt--){var mt=Tt(kt);if(mt==="break")break}for(var xt=dt.length,Nt=function(J){var P=dt[J],me={};P.edges.forEach(function(ke){var Be="".concat(ke.source,"-").concat(ke.target,"-").concat(ke.label);me[Be]?me[Be]++:me[Be]=1});for(var Ee=function(Be){var $e=dt[Be],Ue={};$e.edges.forEach(function(Mt){var $t="".concat(Mt.source,"-").concat(Mt.target,"-").concat(Mt.label);Ue[$t]?Ue[$t]++:Ue[$t]=1});var ut=!0;Object.keys(Ue).length!==Object.keys(me).length?ut=!1:Object.keys(me).forEach(function(Mt){Ue[Mt]!==me[Mt]&&(ut=!1)}),ut&&dt.splice(Be,1)},fe=xt-1;fe>J;fe--)Ee(fe);xt=dt.length},kt=0;kt<=xt-1;kt++)Nt(kt);return dt}}},x0=function(){function t(e){e===void 0&&(e=10),this.linkedList=new Uoe,this.maxStep=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),hse=k8;const T$e={getAdjMatrix:Mv,breadthFirstSearch:Voe,connectedComponent:_8,getDegree:Of,getInDegree:Xoe,getOutDegree:Yoe,detectCycle:k8,detectDirectedCycle:hse,detectAllCycles:Koe,detectAllDirectedCycle:A8,detectAllUndirectedCycle:M8,depthFirstSearch:C8,dijkstra:bw,findAllPath:Joe,findShortestPath:Zoe,floydWarshall:xw,labelPropagation:ese,louvain:I8,iLouvain:tse,kCore:rse,kMeans:nse,cosineSimilarity:D8,nodesCosineSimilarity:ise,minimumSpanningTree:ase,pageRank:ose,getNeighbors:fs,Stack:x0,GADDI:fse},O$e=Object.freeze(Object.defineProperty({__proto__:null,GADDI:fse,Stack:x0,breadthFirstSearch:Voe,connectedComponent:_8,cosineSimilarity:D8,default:T$e,depthFirstSearch:C8,detectAllCycles:Koe,detectAllDirectedCycle:A8,detectAllUndirectedCycle:M8,detectCycle:k8,detectDirectedCycle:hse,dijkstra:bw,findAllPath:Joe,findShortestPath:Zoe,floydWarshall:xw,getAdjMatrix:Mv,getDegree:Of,getInDegree:Xoe,getNeighbors:fs,getOutDegree:Yoe,iLouvain:tse,kCore:rse,kMeans:nse,labelPropagation:ese,louvain:I8,minimumSpanningTree:ase,nodesCosineSimilarity:ise,pageRank:ose},Symbol.toStringTag,{value:"Module"}));var qC=dl,I$e=function(e){return function(r,n){return r[e]-n[e]}},pU=function(e,r,n){return e>=r&&e<=n},lA=function(e,r,n,i){var a=1e-4,o={x:n.x-e.x,y:n.y-e.y},s={x:r.x-e.x,y:r.y-e.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,h=s.x*s.x+s.y*s.y,d=l.x*l.x+l.y*l.y;if(c>a*h*d){var p=(o.x*l.y-o.y*l.x)*f,v=(o.x*s.y-o.y*s.x)*f;return!pU(p,0,1)||!pU(v,0,1)?null:{x:e.x+p*s.x,y:e.y+p*s.y}}return null},dse=function(e,r){var n=e.x,i=e.y,a=e.width,o=e.height,s=n+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var f=null,h=1;h<u.length&&(f=lA(u[h-1],u[h],c,r),!f);h++);return f},pse=function(e,r){var n=e.x,i=e.y,a=e.r,o=r.x,s=r.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var c=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(c))*Math.sign(l),y:i+Math.abs(a*Math.sin(c))*Math.sign(u)}},vse=function(e,r){var n=e.rx,i=e.ry,a=e.x,o=e.y,s=r.x-a,l=r.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},j0=function(e,r,n){n===void 0&&(n=1);var i=[e.x,e.y,n];return(!r||isNaN(r[0]))&&(r=[1,0,0,0,1,0,0,0,1]),oA(i,i,r),{x:i[0],y:i[1]}},gse=function(e,r,n){n===void 0&&(n=1),(!r||isNaN(r[0]))&&(r=[1,0,0,0,1,0,0,0,1]);var i=u8([1,0,0,0,1,0,0,0,1],r);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,n];return oA(a,a,i),{x:a[0],y:a[1]}},_L=function(e,r,n){var i=e.x-r.x,a=e.y-r.y,o=e.x-n.x,s=e.y-n.y,l=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,u=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},KC=function(e,r){var n=e.x-r.x,i=e.y-r.y;return Math.sqrt(n*n+i*i)},D$e=function(e,r){var n=[];return e.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*r)}),n.push(a)}),n},P$e=function(e){for(var r=[],n=e.length,i=0;i<n;i+=1){r[i]=[];for(var a=0;a<n;a+=1)i===a?r[i][a]=0:e[i][a]===0||!e[i][a]?r[i][a]=1/0:r[i][a]=e[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)r[i][a]>r[i][o]+r[o][a]&&(r[i][a]=r[i][o]+r[o][a]);return r},L$e=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,r||(a[f][c]=1)}),a},mse=function(e,r){e.translate(r.x,r.y)},CL=function(e,r,n,i){i===void 0&&(i={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=r.x-o.minX,l=r.y-o.minY;if(n){var u=s*a[0],c=l*a[4],f=0,h=0,d=0,p=0;e.animate(function(g){return d=u*g,p=c*g,a=qC(a,[["t",d-f,p-h]]),f=d,h=p,{matrix:a}},i)}else{var v=qC(a,[["t",s,l]]);e.setMatrix(v)}},R$e=function(e,r){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=r;Xt(r)||(i=[r,r]),Xt(r)&&r.length===1&&(i=[r[0],r[0]]),n=qC(n,[["s",i[0],i[1]]]),e.setMatrix(n)},N$e=function(e,r){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=qC(n,[["r",r]]),e.setMatrix(n)},F$e=function(e,r,n){for(var i=[],a=0;a<e;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[r[o.source]]+=1),o.target&&(i[r[o.target]]+=1)}),i};function B$e(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}var Sw=function(e,r,n){var i=!1,a=e.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=e[l],c=e[(l+1)%a];if(B$e(u,c,[r,n]))return!0;s(u[1]-n)>0!=s(c[1]-n)>0&&s(r-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},yse=function(e,r){return!(r.minX>e.maxX||r.maxX<e.minX||r.minY>e.maxY||r.maxY<e.minY)},$$e=function(e,r){var n=!1;return Te(e,function(i){if(lA(i.from,i.to,r.from,r.to))return n=!0,!1}),n},wse=function(e,r){var n=function(h){var d=h.map(function(v){return v[0]}),p=h.map(function(v){return v[1]});return{minX:Math.min.apply(null,d),maxX:Math.max.apply(null,d),minY:Math.min.apply(null,p),maxY:Math.max.apply(null,p)}},i=function(h){for(var d=[],p=h.length,v=0;v<p-1;v++){var g=h[v],m=h[v+1];d.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(d.length>1){var y=h[0],w=h[p-1];d.push({from:{x:w[0],y:w[1]},to:{x:y[0],y:y[1]}})}return d};if(e.length<2||r.length<2)return!1;var a=n(e),o=n(r);if(!yse(a,o))return!1;var s=!1;if(Te(r,function(f){if(Sw(e,f[0],f[1]))return s=!0,!1}),s||(Te(e,function(f){if(Sw(r,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(e),u=i(r),c=!1;return Te(u,function(f){if($$e(l,f))return c=!0,!1}),c},Av=function(){function t(e,r,n,i){this.x1=e,this.y1=r,this.x2=n,this.y2=i}return t.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),r=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:e,y:r,minX:e,minY:r,maxX:n,maxY:i,width:n-e,height:i-r};return a},t}(),P8=function(e,r){var n={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return n[r]},z$e=function(e,r){var n=(r.x2-r.x1)*(e.y1-r.y1)-(r.y2-r.y1)*(e.x1-r.x1),i=(e.x2-e.x1)*(e.y1-r.y1)-(e.y2-e.y1)*(e.x1-r.x1),a=(r.y2-r.y1)*(e.x2-e.x1)-(r.x2-r.x1)*(e.y2-e.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},bse=function(e,r){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=0,o=[],s=0;s<4;s++){var l=P8(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3];o[s]=lA({x:r.x1,y:r.y1},{x:r.x2,y:r.y2},{x:u,y:c},{x:f,y:h}),o[s]&&(a+=1)}return[o,a]},L8=function(e,r){for(var n=["top","left","bottom","right"],i=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=P8(i,n[s]),u=l[0],c=l[1],f=l[2],h=l[3],d=z$e(r,new Av(u,c,f,h));d=Math.abs(d-.5),d>=0&&d<=1&&(o+=1,a=d<a?d:a)}return o===0?-1:a},xse=function(e){var r=0,n=0;if(e.length>0){for(var i=0,a=e;i<a.length;i++){var o=a[i];r+=o.x,n+=o.y}r/=e.length,n/=e.length}return{x:r,y:n}},QC=function(e,r){return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)},Sse=function(e,r){var n=r.x1,i=r.y1,a=r.x2-n,o=r.y2-i,s=e.x-n,l=e.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},kL=function(e,r,n){return n===void 0&&(n=.001),Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)<Math.pow(n,2)},Ese=function(e,r){var n=e.x<r.x,i=e.x>r.x+r.width,a=e.y>r.y+r.height,o=e.y<r.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(r.y+r.height-e.y,2);if(o&&!n&&!i)return Math.pow(e.y-r.y,2);if(n&&!a&&!o)return Math.pow(r.x-e.x,2);if(i&&!a&&!o)return Math.pow(r.x+r.width-e.x,2);var l=Math.min(Math.abs(r.x-e.x),Math.abs(r.x+r.width-e.x)),u=Math.min(Math.abs(r.y-e.y),Math.abs(r.y+r.height-e.y));return l*l+u*u},j$e=function(e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r.x,l=r.y,u=[a-n,o-i];if(E8(u,[0,0]))return NaN;var c=[-u[1],u[0]];pd(c,c);var f=[s-n,l-i];return Math.abs(S8(f,c))},R8=function(e,r,n){return e+(r-e)*n},ML=function(e,r,n){for(var i=Math.min(e.length,r.length),a=new Array(i),o=0;o<i;o++)a[o]=R8(e[o],r[o],n);return a};const G$e=Object.freeze(Object.defineProperty({__proto__:null,Line:Av,applyMatrix:j0,compare:I$e,distance:KC,floydWarshall:P$e,fractionToLine:L8,getAdjMatrix:L$e,getBBoxBoundLine:P8,getCircleCenterByPoints:_L,getCircleIntersectByPoint:pse,getDegree:F$e,getEllipseIntersectByPoint:vse,getLineIntersect:lA,getPointsCenter:xse,getRectIntersectByPoint:dse,intersectBBox:yse,invertMatrix:gse,isPointInPolygon:Sw,isPointsOverlap:kL,isPolygonsIntersect:wse,itemIntersectByLine:bse,lerp:R8,lerpArray:ML,move:CL,pointLineDistance:j$e,pointLineSquareDist:Sse,pointRectSquareDist:Ese,rotate:N$e,scale:R$e,scaleMatrix:D$e,squareDist:QC,translate:mse},Symbol.toStringTag,{value:"Module"}));var ph="rgb(95, 149, 255)",U$e="rgb(255, 255, 255)",vU="rgb(0, 0, 0)",gI="rgb(247, 250, 255)",_se="rgb(239, 244, 255)",aE="rgb(253, 253, 253)",gU="rgb(250, 250, 250)",oE="rgb(224, 224, 224)",mU="rgb(234, 234, 234)",W$e="rgb(245, 245, 245)",V$e="rgb(191, 213, 255)",yU="#4572d9",H$e="rgb(223, 234, 255)",Wr={mainStroke:ph,mainFill:_se,activeStroke:ph,activeFill:gI,inactiveStroke:V$e,inactiveFill:gI,selectedStroke:ph,selectedFill:U$e,highlightStroke:yU,highlightFill:H$e,disableStroke:oE,disableFill:gU,edgeMainStroke:oE,edgeActiveStroke:ph,edgeInactiveStroke:mU,edgeSelectedStroke:ph,edgeHighlightStroke:ph,edgeDisableStroke:W$e,comboMainStroke:oE,comboMainFill:aE,comboActiveStroke:ph,comboActiveFill:gI,comboInactiveStroke:oE,comboInactiveFill:aE,comboSelectedStroke:ph,comboSelectedFill:aE,comboHighlightStroke:yU,comboHighlightFill:aE,comboDisableStroke:mU,comboDisableFill:gU};const jt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Wr.mainStroke,fill:_se},size:20,color:Wr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Wr.activeFill,stroke:Wr.activeStroke}},nodeStateStyles:{active:{fill:Wr.activeFill,stroke:Wr.activeStroke,lineWidth:2,shadowColor:Wr.mainStroke,shadowBlur:10},selected:{fill:Wr.selectedFill,stroke:Wr.selectedStroke,lineWidth:4,shadowColor:Wr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Wr.highlightFill,stroke:Wr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Wr.inactiveFill,stroke:Wr.inactiveStroke,lineWidth:1},disable:{fill:Wr.disableFill,stroke:Wr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:vU,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Wr.edgeMainStroke,lineAppendWidth:2},color:Wr.edgeMainStroke},edgeStateStyles:{active:{stroke:Wr.edgeActiveStroke,lineWidth:1},selected:{stroke:Wr.edgeSelectedStroke,lineWidth:2,shadowColor:Wr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Wr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Wr.edgeInactiveStroke,lineWidth:1},disable:{stroke:Wr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:vU,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Wr.comboMainFill,lineWidth:1,stroke:Wr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Wr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Wr.comboActiveStroke,lineWidth:1,fill:Wr.comboActiveFill},selected:{stroke:Wr.comboSelectedStroke,lineWidth:2,fill:Wr.comboSelectedFill,shadowColor:Wr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Wr.comboHighlightStroke,lineWidth:2,fill:Wr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Wr.comboInactiveStroke,fill:Wr.comboInactiveFill,lineWidth:1},disable:{stroke:Wr.comboDisableStroke,fill:Wr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},X$e={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Nu=Math.PI,AL=Math.sin,TL=Math.cos,Ji=AL(Nu/8),ea=TL(Nu/8),ZC=function(e,r){var n=e.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(r){var o=r.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=j0(i,o),a=j0(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},Cse=function(e){var r=e.sourceNode||e.targetNode,n=r.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=r.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||jt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+i[6],(o.minY+o.maxY)/2+i[7]],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],d=o.height/2,p=o.width/2,v=d,g=d,m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,x=a.get("type"),S=Math.min(d/2,p/2),E=Math.min(d,p),_=s!=null&&s.pointPadding?Math.min(E,s==null?void 0:s.pointPadding):S;if(f[0]===h[0]&&f[1]===h[1]){switch(u){case"top":x==="circle"?(f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]):(f=[c[0]-_,c[1]-d],h=[c[0]+_,c[1]-d]);break;case"top-right":v=d,g=p,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]+m,c[1]-y],h=[c[0]+b,c[1]-w]):(f=[c[0]+p-_,c[1]-d],h=[c[0]+p,c[1]-d+_]);break;case"right":v=p,g=p,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]+y,c[1]-m],h=[c[0]+b,c[1]+w]):(f=[c[0]+p,c[1]-_],h=[c[0]+p,c[1]+_]);break;case"bottom-right":v=p,g=d,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]+y,c[1]+m],h=[c[0]+w,c[1]+b]):(f=[c[0]+p,c[1]+d-_],h=[c[0]+p-_,c[1]+d]);break;case"bottom":v=d,g=d,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]+m,c[1]+y],h=[c[0]-w,c[1]+b]):(f=[c[0]-_,c[1]+d],h=[c[0]+_,c[1]+d]);break;case"bottom-left":v=d,g=p,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]-m,c[1]+y],h=[c[0]-b,c[1]+w]):(f=[c[0]-p,c[1]+d-_],h=[c[0]-p+_,c[1]+d]);break;case"left":v=p,g=p,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]-y,c[1]+m],h=[c[0]-b,c[1]-w]):(f=[c[0]-p,c[1]-_],h=[c[0]-p,c[1]+_]);break;case"top-left":v=p,g=d,x==="circle"?(m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]-y,c[1]-m],h=[c[0]-w,c[1]-b]):(f=[c[0]-p+_,c[1]-d],h=[c[0]-p,c[1]-d+_]);break;default:v=p,g=p,m=v*Ji,y=v*ea,w=g*Ji,b=g*ea,f=[c[0]-m,c[1]-y],h=[c[0]+w,c[1]-b]}if(s.clockwise===!1){var k=[f[0],f[1]];f=[h[0],h[1]],h=[k[0],k[1]]}}var C=[f[0]-c[0],f[1]-c[1]],M=(v+l)/v,A=(g+l)/g;s.clockwise===!1&&(M=(g+l)/g,A=(v+l)/v);var T=Ga([0,0],C,M),D=[c[0]+T[0],c[1]+T[1]],F=[h[0]-c[0],h[1]-c[1]],R=Ga([0,0],F,A),B=[c[0]+R[0],c[1]+R[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:D[0],y:D[1]},{x:B[0],y:B[1]}],e},kse=function(e,r,n,i,a){var o=1e-4,s=[],l=e==null?void 0:e.getPoint(r);if(!l)return{x:0,y:0,angle:0};if(r<o)s=e.getStartTangent().reverse();else if(r>1-o)s=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(r+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Nu*2),n&&(l.x+=TL(c)*n,l.y+=AL(c)*n),i){var f=c-Nu/2;c>1/2*Nu&&c<3*1/2*Nu&&(f-=Nu),l.x+=TL(f)*i,l.y+=AL(f)*i}var h={x:l.x,y:l.y,angle:c};return a?(c>.5*Nu&&c<1.5*Nu&&(c-=Nu),j({rotate:c},h)):h},Y$e=function t(e,r,n,i){if(i(e,r,n)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!t(e.children[a],e,a,i))return!1}return!0},q$e=function t(e,r,n,i){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!t(e.children[a],e,a,i))return}return i(e,r,n)!==!1},za=function(e,r){typeof r=="function"&&Y$e(e,null,-1,r)},Fu=function(e,r){typeof r=="function"&&q$e(e,null,-1,r)},Mse=function(e,r){return r*(X$e[e]||1)},Ase=function(e,r){var n=0,i=new RegExp("[一-龥]+");return e.split("").forEach(function(a){i.test(a)?n+=r:n+=Mse(a,r)}),[n,r]},Tse=function(e,r){return typeof r!="number"||r<=0||r>=e.length?e:e.substring(0,r)+"..."},OL=function(e,r){var n=[],i={},a={};e.forEach(function(l){a[l.id]=l}),e.forEach(function(l,u){var c=Dr(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){n.push(f);return}var h=i[f.parentId];if(h)h.children?h.children.push(c):h.children=[c];else{var d={id:f.parentId,children:[f]};i[f.parentId]=d,i[c.id]=c}return}if(et(l.parentId)){var p=i[l.parentId];if(p)p.children?p.children.push(c):p.children=[c],i[c.id]=c;else{var v={id:l.parentId,children:[c]};i[v.id]=v,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(r||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return n.forEach(function(l){l.depth=s+10,za(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var h=o[u.id];return h&&(h.depth=u.depth),!0})}),n},IL=function(e,r,n){var i,a=e,o,s={root:{children:e}},l=!1,u="root";(e||[]).forEach(function(p){if(!l){if(p.id===r){o=p,p.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0;return}za(p,function(v){var g;return s[v.id]={children:(v==null?void 0:v.children)||[]},a=(g=s[v.parentId||v.comboId||"root"])===null||g===void 0?void 0:g.children,v&&(v.removed||r===v.id)&&a?(u=v.parentId||v.comboId||"root",o=v,v.itemType==="combo"?o.parentId=n:o.comboId=n,l=!0,!1):!0})}}),a=(i=s[u])===null||i===void 0?void 0:i.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),l||(o={id:r,itemType:"node",comboId:n},s[r]={children:void 0}),r){var f=!1;if(n){var h=0;(e||[]).forEach(function(p){f||za(p,function(v){return n===v.id?(f=!0,v.children?v.children.push(o):v.children=[o],h=v.depth,o.itemType==="node"?o.depth=h+2:o.depth=h+1,!1):!0})})}else(!n||!f)&&o.itemType!=="node"&&e.push(o);var d=o.depth;za(o,function(p){return p.itemType==="node"?d+=2:d+=1,p.depth=d,!0})}return e},H_=function(e,r,n){var i={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=n==null?void 0:n.getModel(),o=a||{},s=o.x,l=o.y,u=o.fixSize,c=o.collapsed,f=o.fixCollapseSize,h=c?f:u,d=Xt(h)?h:[h,h],p=d[0],v=d[1],g=[p/2,v/2];return{minX:s-g[0],minY:l-g[1],maxX:s+g[0],maxY:l+g[1],x:s,y:l,width:p,height:v}}return e.forEach(function(m){var y=r.findById(m.id);if(!(!y||!y.isVisible())){y.set("bboxCanvasCache",void 0);var w=y.getCanvasBBox();w.x&&i.minX>w.minX&&(i.minX=w.minX),w.y&&i.minY>w.minY&&(i.minY=w.minY),w.x&&i.maxX<w.maxX&&(i.maxX=w.maxX),w.y&&i.maxY<w.maxY&&(i.maxY=w.maxY)}}),i.x=(i.minX+i.maxX)/2,i.y=(i.minY+i.maxY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2,(n==null?void 0:n.getKeyShape().get("type"))==="circle"&&(i.width=Math.hypot(i.height,i.width),i.height=i.width),Object.keys(i).forEach(function(m){(i[m]===1/0||i[m]===-1/0)&&(i[m]=void 0)}),i},K$e=function(e){var r=Ut(e.x)||Ut(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(r=r||Ut(e.style.r)||Ut(e.style.width)||Ut(e.style.height)||Ut(e.style.rx)||Ut(e.style.ry)),r},X_=function(e){var r={};return Object.keys(e).forEach(function(n){var i=e[n];if(!(n==="img"&&!et(i)))if(sa(i)&&!Xt(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!et(s)||(a[o]=Dr(s))}),r[n]=a}else r[n]=Dr(i)}),r},Ew=function(e){var r=e.animateCfg,n=e.callback,i;if(!r)i={duration:500,callback:n};else if(i=Dr(r),r.callback){var a=r.callback;i.callback=function(){n(),a()}}else i.callback=n;return i};const Q$e=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:X_,getAnimateCfgWithCallback:Ew,getBBox:ZC,getComboBBox:H_,getLabelPosition:kse,getLetterWidth:Mse,getLoopCfgs:Cse,getTextSize:Ase,plainCombosToTrees:OL,reconstructTree:IL,shouldRefreshEdge:K$e,traverseTree:za,traverseTreeUp:Fu,truncateLabelByLength:Tse},Symbol.toStringTag,{value:"Module"}));var wU=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var r=e.nodes,n=e.edges,i=e.combos,a=i===void 0?[]:i;if(!r&&!n){var o=!0;return za(e,function(h){return et(h.id)?!0:(o=!1,!1)}),o}var s=(r||[]).find(function(h){return!et(h.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var l=(r||[]).map(function(h){return h.id}),u=a==null?void 0:a.map(function(h){return h.id}),c=Ro(Ro([],l,!0),u,!0),f=(n||[]).find(function(h){return!c.includes(h.source)||!c.includes(h.target)});return f?(console.warn("G6 Warning Tips: The source %c".concat(f.source,"%c or the target %c").concat(f.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Z$e=function(e,r){if(e==="node"||e==="combo"){if(r.id&&!et(r.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(r.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!r.source||!r.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},J$e=function(){function t(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var e=this.modes;Te(e,function(r){Te(r,function(n,i){et(n)&&(r[i]={type:n})})})},t.prototype.setBehaviors=function(e){var r=this.graph,n=this.modes[e],i=[],a;Te(n||[],function(o){var s=l8.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(r),i.push(a)))}),this.currentBehaves=i},t.mergeBehaviors=function(e,r){return Te(r,function(n){e.indexOf(n)<0&&(et(n)&&(n={type:n}),e.push(n))}),e},t.filterBehaviors=function(e,r){var n=[];return e.forEach(function(i){var a="";et(i)?a=i:a=i.type,r.indexOf(a)<0&&n.push(i)}),n},t.prototype.setMode=function(e){var r=this,n=r.modes,i=r.graph,a=e,o=n[a];o&&(i.emit("beforemodechange",{mode:e}),Te(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:e}),this.mode=e)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,r,n){var i=this,a;if(Xt(e)?a=e:a=[e],Xt(r))return Te(r,function(s){i.modes[s]?n?i.modes[s]=t.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=t.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=r;return r||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=t.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=t.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(e,r,n){et(e)&&(e={type:e});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===e.type)return s.updateCfg(r),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,r),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),v2=`	
\v\f\r   ᠎             　\u2028\u2029`,eze=new RegExp("([a-z])["+v2+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+v2+"]*,?["+v2+"]*)+)","ig"),tze=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+v2+"]*,?["+v2+"]*","ig"),S0=function(t){if(!t)return null;if(Xt(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(eze,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(tze,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(r.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&r.push([i,o[0]]),s==="r")r.push([i].concat(o));else for(;o.length>=e[s]&&(r.push([i].concat(o.splice(0,e[s]))),!!e[s]););return t}),r},DL=function(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var a=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?a[3]={x:+t[0],y:+t[1]}:i-2===n&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return r},sE=function(t,e,r,n,i){var a=[];if(i===null&&n===null&&(n=r),t=+t,e=+e,r=+r,n=+n,i!==null){var o=Math.PI/180,s=t+r*Math.cos(-n*o),l=t+r*Math.cos(-i*o),u=e+r*Math.sin(-n*o),c=e+r*Math.sin(-i*o);a=[["M",s,u],["A",r,r,0,+(i-n>180),0,l,c]]}else a=[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return a},PL=function(t){if(t=S0(t),!t||!t.length)return[["M",0,0]];var e=[],r=0,n=0,i=0,a=0,o=0,s,l;t[0][0]==="M"&&(r=+t[0][1],n=+t[0][2],i=r,a=n,o++,e[0]=["M",r,n]);for(var u=t.length===3&&t[0][0]==="M"&&t[1][0].toUpperCase()==="R"&&t[2][0].toUpperCase()==="Z",c=void 0,f=void 0,h=o,d=t.length;h<d;h++){if(e.push(c=[]),f=t[h],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+r,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+r;break;case"R":l=[r,n].concat(f.slice(1));for(var p=2,v=l.length;p<v;p++)l[p]=+l[p]+r,l[++p]=+l[p]+n;e.pop(),e=e.concat(DL(l,u));break;case"O":e.pop(),l=sE(r,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);break;case"U":e.pop(),e=e.concat(sE(r,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":i=+f[1]+r,a=+f[2]+n;break;default:for(var p=1,v=f.length;p<v;p++)c[p]=+f[p]+(p%2?r:n)}else if(s==="R")l=[r,n].concat(f.slice(1)),e.pop(),e=e.concat(DL(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")e.pop(),l=sE(r,n,f[1],f[2]),l.push(l[0]),e=e.concat(l);else if(s==="U")e.pop(),e=e.concat(sE(r,n,f[1],f[2],f[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,m=f.length;g<m;g++)c[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":r=+i,n=+a;break;case"H":r=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:r=c[c.length-2],n=c[c.length-1]}}return e},lE=function(t,e,r,n){return[t,e,r,n,r,n]},bU=function(t,e,r,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*r,o*e+s*n,o*i+s*r,o*a+s*n,i,a]},Ose=function(t,e,r,n,i,a,o,s,l,u){r===n&&(r+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),h=[],d,p,v,g,m,y=function(xe,Ie,He){var Ge=xe*Math.cos(He)-Ie*Math.sin(He),ht=xe*Math.sin(He)+Ie*Math.cos(He);return{x:Ge,y:ht}};if(u)p=u[0],v=u[1],g=u[2],m=u[3];else{d=y(t,e,-f),t=d.x,e=d.y,d=y(s,l,-f),s=d.x,l=d.y,t===s&&e===l&&(s+=1,l+=1);var w=(t-s)/2,b=(e-l)/2,x=w*w/(r*r)+b*b/(n*n);x>1&&(x=Math.sqrt(x),r=x*r,n=x*n);var S=r*r,E=n*n,_=(a===o?-1:1)*Math.sqrt(Math.abs((S*E-S*b*b-E*w*w)/(S*b*b+E*w*w)));g=_*r*b/n+(t+s)/2,m=_*-n*w/r+(e+l)/2,p=Math.asin(((e-m)/n).toFixed(9)),v=Math.asin(((l-m)/n).toFixed(9)),p=t<g?Math.PI-p:p,v=s<g?Math.PI-v:v,p<0&&(p=Math.PI*2+p),v<0&&(v=Math.PI*2+v),o&&p>v&&(p=p-Math.PI*2),!o&&v>p&&(v=v-Math.PI*2)}var k=v-p;if(Math.abs(k)>c){var C=v,M=s,A=l;v=p+c*(o&&v>p?1:-1),s=g+r*Math.cos(v),l=m+n*Math.sin(v),h=Ose(s,l,r,n,i,0,o,M,A,[v,C,g,m])}k=v-p;var T=Math.cos(p),D=Math.sin(p),F=Math.cos(v),R=Math.sin(v),B=Math.tan(k/4),N=4/3*r*B,O=4/3*n*B,L=[t,e],G=[t+N*D,e-O*T],q=[s+N*R,l-O*F],K=[s,l];if(G[0]=2*L[0]-G[0],G[1]=2*L[1]-G[1],u)return[G,q,K].concat(h);h=[G,q,K].concat(h).join().split(",");for(var V=[],le=0,ge=h.length;le<ge;le++)V[le]=le%2?y(h[le-1],h[le],f).y:y(h[le],h[le+1],f).x;return V},LL=function(t,e){var r=PL(t),n=e&&PL(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(w,b,x){var S,E;if(!w)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(w[0]in{T:1,Q:1})&&(b.qx=b.qy=null),w[0]){case"M":b.X=w[1],b.Y=w[2];break;case"A":w=["C"].concat(Ose.apply(0,[b.x,b.y].concat(w.slice(1))));break;case"S":x==="C"||x==="S"?(S=b.x*2-b.bx,E=b.y*2-b.by):(S=b.x,E=b.y),w=["C",S,E].concat(w.slice(1));break;case"T":x==="Q"||x==="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),w=["C"].concat(bU(b.x,b.y,b.qx,b.qy,w[1],w[2]));break;case"Q":b.qx=w[1],b.qy=w[2],w=["C"].concat(bU(b.x,b.y,w[1],w[2],w[3],w[4]));break;case"L":w=["C"].concat(lE(b.x,b.y,w[1],w[2]));break;case"H":w=["C"].concat(lE(b.x,b.y,w[1],b.y));break;case"V":w=["C"].concat(lE(b.x,b.y,b.x,w[1]));break;case"Z":w=["C"].concat(lE(b.x,b.y,b.X,b.Y));break}return w},h=function(w,b){if(w[b].length>7){w[b].shift();for(var x=w[b];x.length;)o[b]="A",n&&(s[b]="A"),w.splice(b++,0,["C"].concat(x.splice(0,6)));w.splice(b,1),c=Math.max(r.length,n&&n.length||0)}},d=function(w,b,x,S,E){w&&b&&w[E][0]==="M"&&b[E][0]!=="M"&&(b.splice(E,0,["M",S.x,S.y]),x.bx=0,x.by=0,x.x=w[E][1],x.y=w[E][2],c=Math.max(r.length,n&&n.length||0))};c=Math.max(r.length,n&&n.length||0);for(var p=0;p<c;p++){r[p]&&(l=r[p][0]),l!=="C"&&(o[p]=l,p&&(u=o[p-1])),r[p]=f(r[p],i,u),o[p]!=="A"&&l==="C"&&(o[p]="C"),h(r,p),n&&(n[p]&&(l=n[p][0]),l!=="C"&&(s[p]=l,p&&(u=s[p-1])),n[p]=f(n[p],a,u),s[p]!=="A"&&l==="C"&&(s[p]="C"),h(n,p)),d(r,n,i,a,p),d(n,r,a,i,p);var v=r[p],g=n&&n[p],m=v.length,y=n&&g.length;i.x=v[m-2],i.y=v[m-1],i.bx=parseFloat(v[m-4])||i.x,i.by=parseFloat(v[m-3])||i.y,a.bx=n&&(parseFloat(g[y-4])||a.x),a.by=n&&(parseFloat(g[y-3])||a.y),a.x=n&&g[y-2],a.y=n&&g[y-1]}return n?[r,n]:r},rze=/,?([a-z]),?/gi,Ise=function(t){return t.join(",").replace(rze,"$1")},xU=function(t,e,r,n,i){var a=-3*e+9*r-9*n+3*i,o=t*a+6*e-12*r+6*n;return t*o-3*e+3*r},SU=function(t,e,r,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,p=0;p<c;p++){var v=u*f[p]+u,g=xU(v,t,r,i,o),m=xU(v,e,n,a,s),y=g*g+m*m;d+=h[p]*Math.sqrt(y)}return u*d},nze=function(t,e,r,n,i,a,o,s){for(var l=[],u=[[],[]],c,f,h,d,p=0;p<2;++p){if(p===0?(f=6*t-12*r+6*i,c=-3*t+9*r-9*i+3*o,h=3*r-3*t):(f=6*e-12*n+6*a,c=-3*e+9*n-9*a+3*s,h=3*n-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;d=-h/f,d>0&&d<1&&l.push(d);continue}var v=f*f-4*h*c,g=Math.sqrt(v);if(!(v<0)){var m=(-f+g)/(2*c);m>0&&m<1&&l.push(m);var y=(-f-g)/(2*c);y>0&&y<1&&l.push(y)}}for(var w=l.length,b=w,x;w--;)d=l[w],x=1-d,u[0][w]=x*x*x*t+3*x*x*d*r+3*x*d*d*i+d*d*d*o,u[1][w]=x*x*x*e+3*x*x*d*n+3*x*d*d*a+d*d*d*s;return u[0][b]=t,u[1][b]=e,u[0][b+1]=o,u[1][b+1]=s,u[0].length=u[1].length=b+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},ize=function(t,e,r,n,i,a,o,s){if(!(Math.max(t,r)<Math.min(i,o)||Math.min(t,r)>Math.max(i,o)||Math.max(e,n)<Math.min(a,s)||Math.min(e,n)>Math.max(a,s))){var l=(t*n-e*r)*(i-o)-(t-r)*(i*s-a*o),u=(t*n-e*r)*(a-s)-(e-n)*(i*s-a*o),c=(t-r)*(a-s)-(e-n)*(i-o);if(c){var f=l/c,h=u/c,d=+f.toFixed(2),p=+h.toFixed(2);if(!(d<+Math.min(t,r).toFixed(2)||d>+Math.max(t,r).toFixed(2)||d<+Math.min(i,o).toFixed(2)||d>+Math.max(i,o).toFixed(2)||p<+Math.min(e,n).toFixed(2)||p>+Math.max(e,n).toFixed(2)||p<+Math.min(a,s).toFixed(2)||p>+Math.max(a,s).toFixed(2)))return{x:f,y:h}}}},vh=function(t,e,r){return e>=t.x&&e<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},Dse=function(t,e,r,n,i){if(i)return[["M",+t+ +i,e],["l",r-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-r,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]];return a.parsePathArray=Ise,a},RL=function(t,e,r,n){return t===null&&(t=e=r=n=0),e===null&&(e=t.y,r=t.width,n=t.height,t=t.x),{x:t,y:e,width:r,w:r,height:n,h:n,x2:t+r,y2:e+n,cx:t+r/2,cy:e+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:Dse(t,e,r,n),vb:[t,e,r,n].join(" ")}},aze=function(t,e){return t=RL(t),e=RL(e),vh(e,t.x,t.y)||vh(e,t.x2,t.y)||vh(e,t.x,t.y2)||vh(e,t.x2,t.y2)||vh(t,e.x,e.y)||vh(t,e.x2,e.y)||vh(t,e.x,e.y2)||vh(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},EU=function(t,e,r,n,i,a,o,s){Xt(t)||(t=[t,e,r,n,i,a,o,s]);var l=nze.apply(null,t);return RL(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},_U=function(t,e,r,n,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),h=l*l,d=h*l,p=c*t+f*3*l*r+u*3*l*l*i+d*o,v=c*e+f*3*l*n+u*3*l*l*a+d*s,g=t+2*l*(r-t)+h*(i-2*r+t),m=e+2*l*(n-e)+h*(a-2*n+e),y=r+2*l*(i-r)+h*(o-2*i+r),w=n+2*l*(a-n)+h*(s-2*a+n),b=u*t+l*r,x=u*e+l*n,S=u*i+l*o,E=u*a+l*s,_=90-Math.atan2(g-y,m-w)*180/Math.PI;return{x:p,y:v,m:{x:g,y:m},n:{x:y,y:w},start:{x:b,y:x},end:{x:S,y:E},alpha:_}},oze=function(t,e,r){var n=EU(t),i=EU(e);if(!aze(n,i))return r?0:[];for(var a=SU.apply(0,t),o=SU.apply(0,e),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},h=r?0:[],d=0;d<s+1;d++){var p=_U.apply(0,t.concat(d/s));u.push({x:p.x,y:p.y,t:d/s})}for(var d=0;d<l+1;d++){var p=_U.apply(0,e.concat(d/l));c.push({x:p.x,y:p.y,t:d/l})}for(var d=0;d<s;d++)for(var v=0;v<l;v++){var g=u[d],m=u[d+1],y=c[v],w=c[v+1],b=Math.abs(m.x-g.x)<.001?"y":"x",x=Math.abs(w.x-y.x)<.001?"y":"x",S=ize(g.x,g.y,m.x,m.y,y.x,y.y,w.x,w.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var E=g.t+Math.abs((S[b]-g[b])/(m[b]-g[b]))*(m.t-g.t),_=y.t+Math.abs((S[x]-y[x])/(w[x]-y[x]))*(w.t-y.t);E>=0&&E<=1&&_>=0&&_<=1&&(r?h+=1:h.push({x:S.x,y:S.y,t1:E,t2:_}))}}return h},sze=function(t,e,r){t=LL(t),e=LL(e);for(var n,i,a,o,s,l,u,c,f,h,d=r?0:[],p=0,v=t.length;p<v;p++){var g=t[p];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[n,i].concat(g.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,y=e.length;m<y;m++){var w=e[m];if(w[0]==="M")a=u=w[1],o=c=w[2];else{w[0]==="C"?(h=[a,o].concat(w.slice(1)),a=h[6],o=h[7]):(h=[a,o,a,o,u,c,u,c],a=u,o=c);var b=oze(f,h,r);if(r)d+=b;else{for(var x=0,S=b.length;x<S;x++)b[x].segment1=p,b[x].segment2=m,b[x].bez1=f,b[x].bez2=h;d=d.concat(b)}}}}}return d},lze=function(t,e){return sze(t,e)};function uze(t,e){var r=[],n=[];function i(a,o){if(a.length===1)r.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&r.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return t.length&&i(t,e),{left:r,right:n.reverse()}}function cze(t,e,r){var n=[[t[1],t[2]]];r=r||2;var i=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var a=n,o=1/r,s=0;s<r-1;s++){var l=o/(1-o*s),u=uze(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var h=[];return f.length===4&&(h.push("C"),h=h.concat(f[2])),f.length>=3&&(f.length===3&&h.push("Q"),h=h.concat(f[1])),f.length===2&&h.push("L"),h=h.concat(f[f.length-1]),h});return c}var fze=function(t,e,r){if(r===1)return[[].concat(t)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(cze(t,e,r));else{var i=[].concat(t);i[0]==="M"&&(i[0]="L");for(var a=0;a<=r-1;a++)n.push(i)}return n},hze=function(t,e){if(t.length===1)return t;var r=t.length-1,n=e.length-1,i=r/n,a=[];if(t.length===1&&t[0][0]==="M"){for(var o=0;o<n-r;o++)t.push(t[0]);return t}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===r?u.concat(t[r]):u.concat(fze(t[f],t[f+1],c))},[]);return l.unshift(t[0]),(e[n]==="Z"||e[n]==="z")&&l.push("Z"),l},dze=function(t,e){if(t.length!==e.length)return!1;var r=!0;return Te(t,function(n,i){if(n!==e[i])return r=!1,!1}),r};function pze(t,e,r){var n=null,i=r;return e<i&&(i=e,n="add"),t<i&&(i=t,n="del"),{type:n,min:i}}var vze=function(t,e){var r=t.length,n=e.length,i,a,o=0;if(r===0||n===0)return null;for(var s=[],l=0;l<=r;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=r;l++){i=t[l-1];for(var u=1;u<=n;u++){a=e[u-1],dze(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,h=s[l-1][u-1].min+o;s[l][u]=pze(c,f,h)}}return s},Pse=function(t,e){var r=vze(t,e),n=t.length,i=e.length,a=[],o=1,s=1;if(r[n][i].min!==n){for(var l=1;l<=n;l++){var u=r[l][l].min;s=l;for(var c=o;c<=i;c++)r[l][c].min<u&&(u=r[l][c].min,s=c);o=s,r[l][o].type&&a.push({index:l-1,type:r[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}n=t.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)t[n-1][0]==="z"||t[n-1][0]==="Z"?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function mI(t,e,r){for(var n=[].concat(t),i,a=1/(r+1),o=Lse(e)[0],s=1;s<=r;s++)a*=s,i=Math.floor(t.length*a),i===0?n.unshift([o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]);return n}function Lse(t){var e=[];switch(t[0]){case"M":e.push([t[1],t[2]]);break;case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":e.push([t[1],t[1]]);break;case"V":e.push([t[1],t[1]]);break}return e}var NL=function(t,e){if(t.length<=1)return t;for(var r,n=0;n<e.length;n++)if(t[n][0]!==e[n][0])switch(r=Lse(t[n]),e[n][0]){case"M":t[n]=["M"].concat(r[0]);break;case"L":t[n]=["L"].concat(r[0]);break;case"A":t[n]=[].concat(e[n]),t[n][6]=r[0][0],t[n][7]=r[0][1];break;case"Q":if(r.length<2)if(n>0)r=mI(r,t[n-1],1);else{t[n]=e[n];break}t[n]=["Q"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;case"T":t[n]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(n>0)r=mI(r,t[n-1],2);else{t[n]=e[n];break}t[n]=["C"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(r.length<2)if(n>0)r=mI(r,t[n-1],1);else{t[n]=e[n];break}t[n]=["S"].concat(r.reduce(function(i,a){return i.concat(a)},[]));break;default:t[n]=e[n]}return t};const gze=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:DL,fillPath:hze,fillPathByDiff:Pse,formatPath:NL,intersection:lze,parsePathArray:Ise,parsePathString:S0,pathToAbsolute:PL,pathToCurve:LL,rectPath:Dse},Symbol.toStringTag,{value:"Module"}));var Rse=function(){function t(e,r){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=r,this.timeStamp=r.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function Nse(t,e){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}var CU=typeof window<"u"&&typeof window.document<"u";function Fse(t,e){if(t.isCanvas())return!0;for(var r=e.getParent(),n=!1;r;){if(r===t){n=!0;break}r=r.getParent()}return n}function FL(t){return t.cfg.visible&&t.cfg.capture}var mze=function(t){cr(e,t);function e(r){var n=t.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=qt(i,r),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(r){return this.cfg[r]},e.prototype.set=function(r,n){this.cfg[r]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Dae),kU=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},yze=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),wze=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),bze=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),xze=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Sze=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Eze=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_ze=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,MU=3,Cze=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Eze]],AU=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bse(t){return t?TU(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Sze:typeof navigator<"u"?TU(navigator.userAgent):Aze()}function kze(t){return t!==""&&Cze.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var a=i.exec(t);return!!a&&[n,a]},!1)}function TU(t){var e=kze(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new xze;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<MU&&(i=kU(kU([],i,!0),Tze(MU-i.length),!0)):i=[];var a=i.join("."),o=Mze(t),s=_ze.exec(t);return s&&s[1]?new bze(r,a,o,s[1]):new yze(r,a,o)}function Mze(t){for(var e=0,r=AU.length;e<r;e++){var n=AU[e],i=n[0],a=n[1],o=a.exec(t);if(o)return i}return null}function Aze(){var t=typeof process<"u"&&process.version;return t?new wze(process.version.slice(1)):null}function Tze(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function OU(t,e){var r=[],n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=e[0],d=e[1],p=e[2],v=e[3],g=e[4],m=e[5],y=e[6],w=e[7],b=e[8];return r[0]=h*n+d*o+p*u,r[1]=h*i+d*s+p*c,r[2]=h*a+d*l+p*f,r[3]=v*n+g*o+m*u,r[4]=v*i+g*s+m*c,r[5]=v*a+g*l+m*f,r[6]=y*n+w*o+b*u,r[7]=y*i+w*s+b*c,r[8]=y*a+w*l+b*f,r}function $p(t,e){var r=[],n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function $se(t){var e=[],r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*o)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*a)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(o*r-n*a)*p,e):null}var c1=dl,yI="matrix",Oze=["zIndex","capture","visible","type"],Ize=["repeat"],Dze=":",Pze="*";function Lze(t){for(var e=[],r=0;r<t.length;r++)Xt(t[r])?e.push([].concat(t[r])):e.push(t[r]);return e}function Rze(t,e){var r={},n=e.attrs;for(var i in t)r[i]=n[i];return r}function Nze(t,e){var r={},n=e.attr();return Te(t,function(i,a){Ize.indexOf(a)===-1&&!Od(n[a],i)&&(r[a]=i)}),r}function Fze(t,e){if(e.onFrame)return t;var r=e.startTime,n=e.delay,i=e.duration,a=Object.prototype.hasOwnProperty;return Te(t,function(o){r+n<o.startTime+o.delay+o.duration&&i>o.delay&&Te(e.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),t}var zse=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this;n.attrs={};var i=n.getDefaultAttrs();return qt(i,r.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(r){},e.prototype.initAttrs=function(r){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(sa(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((r={},r[a]=o,r)),this):this.attrs[a]},e.prototype.isClipped=function(r,n){var i=this.getClip();return i&&!i.isHit(r,n)},e.prototype.setAttr=function(r,n){var i=this.attrs[r];i!==n&&(this.attrs[r]=n,this.onAttrChange(r,n,i))},e.prototype.onAttrChange=function(r,n,i){r==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(r){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(r){this.set("zIndex",r);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var r=this.getParent();if(r){var n=r.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var r=this.getParent();if(r){var n=r.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(r){r===void 0&&(r=!0);var n=this.getParent();n?(Nse(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),r&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(yI,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(yI)},e.prototype.setMatrix=function(r){this.attr(yI,r),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var r=this.cfg.totalMatrix;if(!r){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?r=OU(i,n):r=n||i,this.set("totalMatrix",r)}return r},e.prototype.applyMatrix=function(r){var n=this.attr("matrix"),i=null;r&&n?i=OU(r,n):i=n||r,this.set("totalMatrix",i),this.set("parentMatrix",r)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(r){var n=this.attr("matrix");return n?$p(n,r):r},e.prototype.invertFromMatrix=function(r){var n=this.attr("matrix");if(n){var i=$se(n);if(i)return $p(i,r)}return r},e.prototype.setClip=function(r){var n=this.getCanvas(),i=null;if(r){var a=this.getShapeBase(),o=Lm(r.type),s=a[o];s&&(i=new s({type:r.type,isClipShape:!0,applyTo:this,attrs:r.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},e.prototype.getClip=function(){var r=this.cfg.clipShape;return r||null},e.prototype.clone=function(){var r=this,n=this.attrs,i={};Te(n,function(s,l){Xt(n[l])?i[l]=Lze(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return Te(Oze,function(s){o.set(s,r.get(s))}),o},e.prototype.destroy=function(){var r=this.destroyed;r||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=r[0],s=r[1],l=r[2],u=l===void 0?"easeLinear":l,c=r[3],f=c===void 0?G1:c,h=r[4],d=h===void 0?0:h,p,v,g,m,y;Bn(o)?(p=o,o={}):sa(o)&&o.onFrame&&(p=o.onFrame,v=o.repeat),sa(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",d=y.delay||0,v=y.repeat||v||!1,f=y.callback||G1,g=y.pauseCallback||G1,m=y.resumeCallback||G1):(Ut(f)&&(d=f,f=null),Bn(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var w=Nze(o,this),b={fromAttrs:Rze(w,this),toAttrs:w,duration:s,easing:u,repeat:v,callback:f,pauseCallback:g,resumeCallback:m,delay:d,startTime:i.getTime(),id:bc(),onFrame:p,pathFormatted:!1};a.length>0?a=Fze(a,b):i.addAnimator(this),a.push(b),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(r){var n=this;r===void 0&&(r=!0);var i=this.get("animations");Te(i,function(a){r&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var r=this.get("timeline"),n=this.get("animations"),i=r.getTime();return Te(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},e.prototype.resumeAnimate=function(){var r=this.get("timeline"),n=r.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return Te(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},e.prototype.emitDelegation=function(r,n){var i=this,a=n.propagationPath;this.getEvents();var o;r==="mouseenter"?o=n.fromShape:r==="mouseleave"&&(o=n.toShape);for(var s=function(f){var h=a[f],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&o&&Fse(h,o))return"break";Xt(d)?Te(d,function(p){i.emitDelegateEvent(h,p,n)}):l.emitDelegateEvent(h,d,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},e.prototype.emitDelegateEvent=function(r,n,i){var a=this.getEvents(),o=n+Dze+i.type;(a[o]||a[Pze])&&(i.name=o,i.currentTarget=r,i.delegateTarget=this,i.delegateObject=r.get("delegateObject"),this.emit(o,i))},e.prototype.translate=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.getMatrix(),a=c1(i,[["t",r,n]]);return this.setMatrix(a),this},e.prototype.move=function(r,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(r-i,n-a),this},e.prototype.moveTo=function(r,n){return this.move(r,n)},e.prototype.scale=function(r,n){var i=this.getMatrix(),a=c1(i,[["s",r,n||r]]);return this.setMatrix(a),this},e.prototype.rotate=function(r){var n=this.getMatrix(),i=c1(n,[["r",r]]);return this.setMatrix(i),this},e.prototype.rotateAtStart=function(r){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=c1(o,[["t",-i,-a],["r",r],["t",i,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(r,n,i){var a=this.getMatrix(),o=c1(a,[["t",-r,-n],["r",i],["t",r,n]]);return this.setMatrix(o),this},e}(mze),IU={},BL="_INDEX";function jse(t,e){if(t.set("canvas",e),t.isGroup()){var r=t.get("children");r.length&&r.forEach(function(n){jse(n,e)})}}function Gse(t,e){if(t.set("timeline",e),t.isGroup()){var r=t.get("children");r.length&&r.forEach(function(n){Gse(n,e)})}}function Bze(t,e,r){r===void 0&&(r=!0),r?e.destroy():(e.set("parent",null),e.set("canvas",null)),Nse(t.getChildren(),e)}function $ze(t){return function(e,r){var n=t(e,r);return n===0?e[BL]-r[BL]:n}}var Use=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var r=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Te(o,function(l){var u=l.getBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<r&&(r=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(r=0,n=0,i=0,a=0);var s={x:r,y:i,minX:r,minY:i,maxX:n,maxY:a,width:n-r,height:a-i};return s},e.prototype.getCanvasBBox=function(){var r=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(l){return l.get("visible")&&(!l.isGroup()||l.isGroup()&&l.getChildren().length>0)});o.length>0?Te(o,function(l){var u=l.getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY;c<r&&(r=c),f>n&&(n=f),h<i&&(i=h),d>a&&(a=d)}):(r=0,n=0,i=0,a=0);var s={x:r,y:i,minX:r,minY:i,maxX:n,maxY:a,width:n-r,height:a-i};return s},e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.children=[],r},e.prototype.onAttrChange=function(r,n,i){if(t.prototype.onAttrChange.call(this,r,n,i),r==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(r){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,r);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(r){var n=this.getChildren();Te(n,function(i){i.applyMatrix(r)})},e.prototype.addShape=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],a=r[1];sa(i)?a=i:a.type=i;var o=IU[a.type];o||(o=Lm(a.type),IU[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},e.prototype.addGroup=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],a=r[1],o;if(Bn(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},e.prototype.getCanvas=function(){var r;return this.isCanvas()?r=this:r=this.get("canvas"),r},e.prototype.getShape=function(r,n,i){if(!FL(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,r,n,i);else{var s=[r,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},e.prototype._findShape=function(r,n,i,a){for(var o=null,s=r.length-1;s>=0;s--){var l=r[s];if(FL(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},e.prototype.add=function(r){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=r.getParent();o&&Bze(o,r,!1),r.set("parent",this),n&&jse(r,n),a&&Gse(r,a),i.push(r),r.onCanvasChange("add"),this._applyElementMatrix(r)},e.prototype._applyElementMatrix=function(r){var n=this.getTotalMatrix();n&&r.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var r=this.getChildren();Te(r,function(n,i){return n[BL]=i,n}),r.sort($ze(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var r=this.getChildren(),n=r.length-1;n>=0;n--)r[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var r=this.getChildren();return this.getChildByIndex(r.length-1)},e.prototype.getChildByIndex=function(r){var n=this.getChildren();return n[r]},e.prototype.getCount=function(){var r=this.getChildren();return r.length},e.prototype.contain=function(r){var n=this.getChildren();return n.indexOf(r)>-1},e.prototype.removeChild=function(r,n){n===void 0&&(n=!0),this.contain(r)&&r.remove(n)},e.prototype.findAll=function(r){var n=[],i=this.getChildren();return Te(i,function(a){r(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(r)))}),n},e.prototype.find=function(r){var n=null,i=this.getChildren();return Te(i,function(a){if(r(a)?n=a:a.isGroup()&&(n=a.find(r)),n)return!1}),n},e.prototype.findById=function(r){return this.find(function(n){return n.get("id")===r})},e.prototype.findByClassName=function(r){return this.find(function(n){return n.get("className")===r})},e.prototype.findAllByName=function(r){return this.findAll(function(n){return n.get("name")===r})},e}(zse),Rm=0,W1=0,f1=0,Wse=1e3,JC,V1,ek=0,Tv=0,uA=0,_w=typeof performance=="object"&&performance.now?performance:Date,Vse=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hse(){return Tv||(Vse(zze),Tv=_w.now()+uA)}function zze(){Tv=0}function $L(){this._call=this._time=this._next=null}$L.prototype=N8.prototype={constructor:$L,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?Hse():+r)+(e==null?0:+e),!this._next&&V1!==this&&(V1?V1._next=this:JC=this,V1=this),this._call=t,this._time=r,zL()},stop:function(){this._call&&(this._call=null,this._time=1/0,zL())}};function N8(t,e,r){var n=new $L;return n.restart(t,e,r),n}function jze(){Hse(),++Rm;for(var t=JC,e;t;)(e=Tv-t._time)>=0&&t._call.call(null,e),t=t._next;--Rm}function DU(){Tv=(ek=_w.now())+uA,Rm=W1=0;try{jze()}finally{Rm=0,Uze(),Tv=0}}function Gze(){var t=_w.now(),e=t-ek;e>Wse&&(uA-=e,ek=t)}function Uze(){for(var t,e=JC,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:JC=r);V1=t,zL(n)}function zL(t){if(!Rm){W1&&(W1=clearTimeout(W1));var e=t-Tv;e>24?(t<1/0&&(W1=setTimeout(DU,t-_w.now()-uA)),f1&&(f1=clearInterval(f1))):(f1||(ek=_w.now(),f1=setInterval(Gze,Wse)),Rm=1,Vse(DU))}}function F8(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Xse(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ib(){}var Cw=.7,tk=1/Cw,G0="\\s*([+-]?\\d+)\\s*",kw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wze=/^#([0-9a-f]{3,8})$/,Vze=new RegExp(`^rgb\\(${G0},${G0},${G0}\\)$`),Hze=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),Xze=new RegExp(`^rgba\\(${G0},${G0},${G0},${kw}\\)$`),Yze=new RegExp(`^rgba\\(${dc},${dc},${dc},${kw}\\)$`),qze=new RegExp(`^hsl\\(${kw},${dc},${dc}\\)$`),Kze=new RegExp(`^hsla\\(${kw},${dc},${dc},${kw}\\)$`),PU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F8(Ib,Mw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LU,formatHex:LU,formatHex8:Qze,formatHsl:Zze,formatRgb:RU,toString:RU});function LU(){return this.rgb().formatHex()}function Qze(){return this.rgb().formatHex8()}function Zze(){return Yse(this).formatHsl()}function RU(){return this.rgb().formatRgb()}function Mw(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Wze.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?NU(e):r===3?new Io(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?uE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?uE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vze.exec(t))?new Io(e[1],e[2],e[3],1):(e=Hze.exec(t))?new Io(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Xze.exec(t))?uE(e[1],e[2],e[3],e[4]):(e=Yze.exec(t))?uE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qze.exec(t))?$U(e[1],e[2]/100,e[3]/100,1):(e=Kze.exec(t))?$U(e[1],e[2]/100,e[3]/100,e[4]):PU.hasOwnProperty(t)?NU(PU[t]):t==="transparent"?new Io(NaN,NaN,NaN,0):null}function NU(t){return new Io(t>>16&255,t>>8&255,t&255,1)}function uE(t,e,r,n){return n<=0&&(t=e=r=NaN),new Io(t,e,r,n)}function Jze(t){return t instanceof Ib||(t=Mw(t)),t?(t=t.rgb(),new Io(t.r,t.g,t.b,t.opacity)):new Io}function jL(t,e,r,n){return arguments.length===1?Jze(t):new Io(t,e,r,n??1)}function Io(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}F8(Io,jL,Xse(Ib,{brighter(t){return t=t==null?tk:Math.pow(tk,t),new Io(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cw:Math.pow(Cw,t),new Io(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Io(nv(this.r),nv(this.g),nv(this.b),rk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FU,formatHex:FU,formatHex8:eje,formatRgb:BU,toString:BU}));function FU(){return`#${zp(this.r)}${zp(this.g)}${zp(this.b)}`}function eje(){return`#${zp(this.r)}${zp(this.g)}${zp(this.b)}${zp((isNaN(this.opacity)?1:this.opacity)*255)}`}function BU(){const t=rk(this.opacity);return`${t===1?"rgb(":"rgba("}${nv(this.r)}, ${nv(this.g)}, ${nv(this.b)}${t===1?")":`, ${t})`}`}function rk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nv(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zp(t){return t=nv(t),(t<16?"0":"")+t.toString(16)}function $U(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new $l(t,e,r,n)}function Yse(t){if(t instanceof $l)return new $l(t.h,t.s,t.l,t.opacity);if(t instanceof Ib||(t=Mw(t)),!t)return new $l;if(t instanceof $l)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new $l(o,s,l,t.opacity)}function tje(t,e,r,n){return arguments.length===1?Yse(t):new $l(t,e,r,n??1)}function $l(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}F8($l,tje,Xse(Ib,{brighter(t){return t=t==null?tk:Math.pow(tk,t),new $l(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cw:Math.pow(Cw,t),new $l(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Io(wI(t>=240?t-240:t+120,i,n),wI(t,i,n),wI(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new $l(zU(this.h),cE(this.s),cE(this.l),rk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rk(this.opacity);return`${t===1?"hsl(":"hsla("}${zU(this.h)}, ${cE(this.s)*100}%, ${cE(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zU(t){return t=(t||0)%360,t<0?t+360:t}function cE(t){return Math.max(0,Math.min(1,t||0))}function wI(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const B8=t=>()=>t;function rje(t,e){return function(r){return t+r*e}}function nje(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ije(t){return(t=+t)==1?qse:function(e,r){return r-e?nje(e,r,t):B8(isNaN(e)?r:e)}}function qse(t,e){var r=e-t;return r?rje(t,r):B8(isNaN(t)?e:t)}const jU=function t(e){var r=ije(e);function n(i,a){var o=r((i=jL(i)).r,(a=jL(a)).r),s=r(i.g,a.g),l=r(i.b,a.b),u=qse(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=t,n}(1);function Kse(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Qse(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aje(t,e){return(Qse(e)?Kse:Zse)(t,e)}function Zse(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=nk(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function oje(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function GL(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function sje(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=nk(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var UL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bI=new RegExp(UL.source,"g");function lje(t){return function(){return t}}function uje(t){return function(e){return t(e)+""}}function cje(t,e){var r=UL.lastIndex=bI.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(n=UL.exec(t))&&(i=bI.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:GL(n,i)})),r=bI.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?uje(l[0].x):lje(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function nk(t,e){var r=typeof e,n;return e==null||r==="boolean"?B8(e):(r==="number"?GL:r==="string"?(n=Mw(e))?(e=n,jU):cje:e instanceof Mw?jU:e instanceof Date?oje:Qse(e)?Kse:Array.isArray(e)?Zse:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?sje:GL)(t,e)}function fje(t){return+t}function hje(t){return t*t}function dje(t){return t*(2-t)}function GU(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function pje(t){return t*t*t}function vje(t){return--t*t*t+1}function UU(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var $8=3,gje=function t(e){e=+e;function r(n){return Math.pow(n,e)}return r.exponent=t,r}($8),mje=function t(e){e=+e;function r(n){return 1-Math.pow(1-n,e)}return r.exponent=t,r}($8),WU=function t(e){e=+e;function r(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return r.exponent=t,r}($8),Jse=Math.PI,ele=Jse/2;function yje(t){return+t==1?1:1-Math.cos(t*ele)}function wje(t){return Math.sin(t*ele)}function VU(t){return(1-Math.cos(Jse*t))/2}function Id(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function bje(t){return Id(1-+t)}function xje(t){return 1-Id(t)}function HU(t){return((t*=2)<=1?Id(1-t):2-Id(t-1))/2}function Sje(t){return 1-Math.sqrt(1-t*t)}function Eje(t){return Math.sqrt(1- --t*t)}function XU(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var WL=4/11,_je=6/11,Cje=8/11,kje=3/4,Mje=9/11,Aje=10/11,Tje=15/16,Oje=21/22,Ije=63/64,fE=1/WL/WL;function Dje(t){return 1-Aw(1-t)}function Aw(t){return(t=+t)<WL?fE*t*t:t<Cje?fE*(t-=_je)*t+kje:t<Aje?fE*(t-=Mje)*t+Tje:fE*(t-=Oje)*t+Ije}function Pje(t){return((t*=2)<=1?1-Aw(1-t):Aw(t-1)+1)/2}var z8=1.70158,Lje=function t(e){e=+e;function r(n){return(n=+n)*n*(e*(n-1)+n)}return r.overshoot=t,r}(z8),Rje=function t(e){e=+e;function r(n){return--n*n*((n+1)*e+n)+1}return r.overshoot=t,r}(z8),YU=function t(e){e=+e;function r(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return r.overshoot=t,r}(z8),Nm=2*Math.PI,j8=1,G8=.3,Nje=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Nm);function i(a){return e*Id(- --a)*Math.sin((n-a)/r)}return i.amplitude=function(a){return t(a,r*Nm)},i.period=function(a){return t(e,a)},i}(j8,G8),qU=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Nm);function i(a){return 1-e*Id(a=+a)*Math.sin((a+n)/r)}return i.amplitude=function(a){return t(a,r*Nm)},i.period=function(a){return t(e,a)},i}(j8,G8),Fje=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Nm);function i(a){return((a=a*2-1)<0?e*Id(-a)*Math.sin((n-a)/r):2-e*Id(a)*Math.sin((n+a)/r))/2}return i.amplitude=function(a){return t(a,r*Nm)},i.period=function(a){return t(e,a)},i}(j8,G8);const Bje=Object.freeze(Object.defineProperty({__proto__:null,easeBack:YU,easeBackIn:Lje,easeBackInOut:YU,easeBackOut:Rje,easeBounce:Aw,easeBounceIn:Dje,easeBounceInOut:Pje,easeBounceOut:Aw,easeCircle:XU,easeCircleIn:Sje,easeCircleInOut:XU,easeCircleOut:Eje,easeCubic:UU,easeCubicIn:pje,easeCubicInOut:UU,easeCubicOut:vje,easeElastic:qU,easeElasticIn:Nje,easeElasticInOut:Fje,easeElasticOut:qU,easeExp:HU,easeExpIn:bje,easeExpInOut:HU,easeExpOut:xje,easeLinear:fje,easePoly:WU,easePolyIn:gje,easePolyInOut:WU,easePolyOut:mje,easeQuad:GU,easeQuadIn:hje,easeQuadInOut:GU,easeQuadOut:dje,easeSin:VU,easeSinIn:yje,easeSinInOut:VU,easeSinOut:wje},Symbol.toStringTag,{value:"Module"}));var $je={};function zje(t){return $je[t.toLowerCase()]||Bje[t]}var jje=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Gje=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},KU=[1,0,0,0,1,0,0,0,1];function Uje(t,e,r){var n={},i=e.fromAttrs,a=e.toAttrs;if(!t.destroyed){var o;for(var s in a)if(!Od(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=S0(a[s]),u=S0(i[s]),u=Pse(u,l),u=NL(u,l),e.fromAttrs.path=u,e.toAttrs.path=l):e.pathFormatted||(l=S0(a[s]),u=S0(i[s]),u=NL(u,l),e.fromAttrs.path=u,e.toAttrs.path=l,e.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],h=u[c],d=[],p=0;p<f.length;p++)Ut(f[p])&&h&&Ut(h[p])?(o=nk(h[p],f[p]),d.push(o(r))):d.push(f[p]);n[s].push(d)}}else if(s==="matrix"){var v=aje(i[s]||KU,a[s]||KU),g=v(r);n[s]=g}else jje(s)&&Gje(a[s])?n[s]=a[s]:Bn(a[s])||(o=nk(i[s],a[s]),n[s]=o(r));t.attr(n)}}function Wje(t,e,r){var n=e.startTime,i=e.delay;if(r<n+i||e._paused)return!1;var a,o=e.duration,s=e.easing,l=zje(s);if(r=r-n-e.delay,e.repeat)a=r%o/o,a=l(a);else if(a=r/o,a<1)a=l(a);else return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;if(e.onFrame){var u=e.onFrame(a);t.attr(u)}else Uje(t,e,a);return!1}var Vje=function(){function t(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return t.prototype.initTimer=function(){var e=this,r=!1,n,i,a;this.timer=N8(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(n=e.animators[s],n.destroyed){e.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],r=Wje(n,a,o),r&&(i.splice(l,1),r=!1,a.callback&&a.callback())}i.length===0&&e.removeAnimator(s)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},t.prototype.addAnimator=function(e){this.animators.push(e)},t.prototype.removeAnimator=function(e){this.animators.splice(e,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(r){r.stopAnimate(e)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Hje=40,QU=0,ZU=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function JU(t,e,r){r.name=e,r.target=t,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}function Xje(t,e,r){if(r.bubbles){var n=void 0,i=!1;if(e==="mouseenter"?(n=r.fromShape,i=!0):e==="mouseleave"&&(i=!0,n=r.toShape),t.isCanvas()&&i)return;if(n&&Fse(t,n)){r.bubbles=!1;return}r.name=e,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}}var Yje=function(){function t(e){var r=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;r._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=r.canvas,a=i.get("el");if(a!==n.target&&(r.dragging||r.currentShape)){var o=r._getPointInfo(n);r.dragging&&r._emitEvent("drag",n,o,r.draggingShape)}},this._onDocumentMouseUp=function(n){var i=r.canvas,a=i.get("el");if(a!==n.target&&r.dragging){var o=r._getPointInfo(n);r.draggingShape&&r._emitEvent("drop",n,o,null),r._emitEvent("dragend",n,o,r.draggingShape),r._afterDrag(r.draggingShape,o,n)}},this.canvas=e.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var e=this,r=this.canvas.get("el");Te(ZU,function(n){r.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var e=this,r=this.canvas.get("el");Te(ZU,function(n){r.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(e,r,n,i,a,o){var s=new Rse(e,r);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},t.prototype._getShape=function(e,r){return this.canvas.getShape(e.x,e.y,r)},t.prototype._getPointInfo=function(e){var r=this.canvas,n=r.getClientByEvent(e),i=r.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(e,r){var n=this._getPointInfo(r),i=this._getShape(n,r),a=this["_on"+e],o=!1;if(a)a.call(this,n,i,r);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,r,n,null,null,i),i&&this._emitEvent(e,r,n,i,null,i),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",r,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,r,n,s,s,null),this._emitEvent(e,r,n,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",r,n,null)):this._emitEvent(e,r,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},t.prototype._onmousedown=function(e,r,n){n.button===QU&&(this.mousedownShape=r,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,r,null,null)},t.prototype._emitMouseoverEvents=function(e,r,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,r,n,n,i),this._emitEvent("mouseleave",e,r,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,r,i,n,i),this._emitEvent("mouseenter",e,r,i,n,i)))},t.prototype._emitDragoverEvents=function(e,r,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",e,r,n,n,i),this._emitEvent("dragenter",e,r,i,n,i)),a||this._emitEvent("dragover",e,r,i)):n&&this._emitEvent("dragleave",e,r,n,n,i),a&&this._emitEvent("dragover",e,r,i)},t.prototype._afterDrag=function(e,r,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(r,n);i!==e&&this._emitMouseoverEvents(n,r,e,i),this.currentShape=i},t.prototype._onmouseup=function(e,r,n){if(n.button===QU){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,r),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,r),r===this.mousedownShape&&this._emitEvent("click",n,e,r),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(e,r,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,r,!0)},t.prototype._onmousemove=function(e,r,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,a,r,!1),this._emitEvent("drag",n,e,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-e.clientX,h=s.clientY-e.clientY,d=f*f+h*h;c>120||d>Hje?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r)):(this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r))}else this._emitMouseoverEvents(n,e,a,r),this._emitEvent("mousemove",n,e,r)}},t.prototype._emitEvent=function(e,r,n,i,a,o){var s=this._getEventObj(e,r,n,i,a,o);if(i){s.shape=i,JU(i,e,s);for(var l=i.getParent();l;)l.emitDelegation(e,s),s.propagationStopped||Xje(l,e,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;JU(u,e,s)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),eW="px",tW=Bse(),qje=tW&&tW.name==="firefox",tle=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.cursor="default",r.supportCSSTransform=!1,r},e.prototype.initContainer=function(){var r=this.get("container");et(r)&&(r=document.getElementById(r),this.set("container",r))},e.prototype.initDom=function(){var r=this.createDom();this.set("el",r);var n=this.get("container");n.appendChild(r),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var r=new Yje({canvas:this});r.init(),this.set("eventController",r)},e.prototype.initTimeline=function(){var r=new Vje(this);this.set("timeline",r)},e.prototype.setDOMSize=function(r,n){var i=this.get("el");CU&&(i.style.width=r+eW,i.style.height=n+eW)},e.prototype.changeSize=function(r,n){this.setDOMSize(r,n),this.set("width",r),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(r){this.set("cursor",r);var n=this.get("el");CU&&n&&(n.style.cursor=r)},e.prototype.getPointByEvent=function(r){var n=this.get("supportCSSTransform");if(n){if(qje&&!Gt(r.layerX)&&r.layerX!==r.offsetX)return{x:r.layerX,y:r.layerY};if(!Gt(r.offsetX))return{x:r.offsetX,y:r.offsetY}}var i=this.getClientByEvent(r),a=i.x,o=i.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(r){var n=r;return r.touches&&(r.type==="touchend"?n=r.changedTouches[0]:n=r.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(r,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:r-a.left,y:n-a.top}},e.prototype.getClientByPoint=function(r,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:r+a.left,y:n+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var r=this.get("el");r.parentNode.removeChild(r)},e.prototype.clearEvents=function(){var r=this.get("eventController");r.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var r=this.get("timeline");this.get("destroyed")||(this.clear(),r&&r.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Use),rle=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var r=t.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];r.add(a.clone())}return r},e}(Use),nle=function(t){cr(e,t);function e(r){return t.call(this,r)||this}return e.prototype._isInBBox=function(r,n){var i=this.getBBox();return i.minX<=r&&i.maxX>=r&&i.minY<=n&&i.maxY>=n},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r),this.clearCacheBBox()},e.prototype.getBBox=function(){var r=this.cfg.bbox;return r||(r=this.calculateBBox(),this.set("bbox",r)),r},e.prototype.getCanvasBBox=function(){var r=this.cfg.canvasBBox;return r||(r=this.calculateCanvasBBox(),this.set("canvasBBox",r)),r},e.prototype.applyMatrix=function(r){t.prototype.applyMatrix.call(this,r),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var r=this.getBBox(),n=this.getTotalMatrix(),i=r.minX,a=r.minY,o=r.maxX,s=r.maxY;if(n){var l=$p(n,[r.minX,r.minY]),u=$p(n,[r.maxX,r.minY]),c=$p(n,[r.minX,r.maxY]),f=$p(n,[r.maxX,r.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,p=d===void 0?0:d,v=h.shadowOffsetX,g=v===void 0?0:v,m=h.shadowOffsetY,y=m===void 0?0:m,w=i-p+g,b=o+p+g,x=a-p+y,S=s+p+y;i=Math.min(i,w),o=Math.max(o,b),a=Math.min(a,x),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(r,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(r,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[r,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},e}(zse),ile=new Map;function kc(t,e){ile.set(t,e)}function ale(t){return ile.get(t)}function ole(t){var e=t.attr(),r=e.x,n=e.y,i=e.width,a=e.height;return{x:r,y:n,width:i,height:a}}function sle(t){var e=t.attr(),r=e.x,n=e.y,i=e.r;return{x:r-i,y:n-i,width:i*2,height:i*2}}function Ua(t,e,r,n){var i=t-r,a=e-n;return Math.sqrt(i*i+a*a)}function Y_(t,e){return Math.abs(t-e)<.001}function fy(t,e){var r=wc(t),n=wc(e),i=yc(t),a=yc(e);return{x:r,y:n,width:i-r,height:a-n}}function cA(t){return(t+Math.PI*2)%(Math.PI*2)}const aa={box:function(t,e,r,n){return fy([t,r],[e,n])},length:function(t,e,r,n){return Ua(t,e,r,n)},pointAt:function(t,e,r,n,i){return{x:(1-i)*t+i*r,y:(1-i)*e+i*n}},pointDistance:function(t,e,r,n,i,a){var o=(r-t)*(i-t)+(n-e)*(a-e);if(o<0)return Ua(t,e,i,a);var s=(r-t)*(r-t)+(n-e)*(n-e);return o>s?Ua(r,n,i,a):this.pointToLine(t,e,r,n,i,a)},pointToLine:function(t,e,r,n,i,a){var o=[r-t,n-e];if(E8(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];pd(s,s);var l=[i-t,a-e];return Math.abs(S8(l,s))},tangentAngle:function(t,e,r,n){return Math.atan2(n-e,r-t)}};var Kje=1e-4;function lle(t,e,r,n,i,a){var o,s=1/0,l=[r,n],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,h=0;h<=u;h++){var d=h*c,p=[i.apply(null,t.concat([d])),i.apply(null,e.concat([d]))],v=Ua(l[0],l[1],p[0],p[1]);v<s&&(o=d,s=v)}if(o===0)return{x:t[0],y:e[0]};if(o===1){var g=t.length;return{x:t[g-1],y:e[g-1]}}s=1/0;for(var h=0;h<32&&!(f<Kje);h++){var m=o-f,y=o+f,p=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],v=Ua(l[0],l[1],p[0],p[1]);if(m>=0&&v<s)o=m,s=v;else{var w=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],b=Ua(l[0],l[1],w[0],w[1]);y<=1&&b<s?(o=y,s=b):f*=.5}}return{x:i.apply(null,t.concat([o])),y:i.apply(null,e.concat([o]))}}function Qje(t,e){for(var r=0,n=t.length,i=0;i<n;i++){var a=t[i],o=e[i],s=t[(i+1)%n],l=e[(i+1)%n];r+=Ua(a,o,s,l)}return r/2}function Ah(t,e,r,n){var i=1-n;return i*i*t+2*n*i*e+n*n*r}function rW(t,e,r){var n=t+r-2*e;if(Y_(n,0))return[.5];var i=(t-e)/n;return i<=1&&i>=0?[i]:[]}function nW(t,e,r,n){return 2*(1-n)*(e-t)+2*n*(r-e)}function ule(t,e,r,n,i,a,o){var s=Ah(t,r,i,o),l=Ah(e,n,a,o),u=aa.pointAt(t,e,r,n,o),c=aa.pointAt(r,n,i,a,o);return[[t,e,u.x,u.y,s,l],[s,l,c.x,c.y,i,a]]}function VL(t,e,r,n,i,a,o){if(o===0)return(Ua(t,e,r,n)+Ua(r,n,i,a)+Ua(t,e,i,a))/2;var s=ule(t,e,r,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),VL.apply(null,l)+VL.apply(null,u)}const cle={box:function(t,e,r,n,i,a){var o=rW(t,r,i)[0],s=rW(e,n,a)[0],l=[t,i],u=[e,a];return o!==void 0&&l.push(Ah(t,r,i,o)),s!==void 0&&u.push(Ah(e,n,a,s)),fy(l,u)},length:function(t,e,r,n,i,a){return VL(t,e,r,n,i,a,3)},nearestPoint:function(t,e,r,n,i,a,o,s){return lle([t,r,i],[e,n,a],o,s,Ah)},pointDistance:function(t,e,r,n,i,a,o,s){var l=this.nearestPoint(t,e,r,n,i,a,o,s);return Ua(l.x,l.y,o,s)},interpolationAt:Ah,pointAt:function(t,e,r,n,i,a,o){return{x:Ah(t,r,i,o),y:Ah(e,n,a,o)}},divide:function(t,e,r,n,i,a,o){return ule(t,e,r,n,i,a,o)},tangentAngle:function(t,e,r,n,i,a,o){var s=nW(t,r,i,o),l=nW(e,n,a,o),u=Math.atan2(l,s);return cA(u)}};function Th(t,e,r,n,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*r*i*i*a+n*i*i*i}function iW(t,e,r,n,i){var a=1-i;return 3*(a*a*(e-t)+2*a*i*(r-e)+i*i*(n-r))}function xI(t,e,r,n){var i=-3*t+9*e-9*r+3*n,a=6*t-12*e+6*r,o=3*e-3*t,s=[],l,u,c;if(Y_(i,0))Y_(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;Y_(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function fle(t,e,r,n,i,a,o,s,l){var u=Th(t,r,i,o,l),c=Th(e,n,a,s,l),f=aa.pointAt(t,e,r,n,l),h=aa.pointAt(r,n,i,a,l),d=aa.pointAt(i,a,o,s,l),p=aa.pointAt(f.x,f.y,h.x,h.y,l),v=aa.pointAt(h.x,h.y,d.x,d.y,l);return[[t,e,f.x,f.y,p.x,p.y,u,c],[u,c,v.x,v.y,d.x,d.y,o,s]]}function HL(t,e,r,n,i,a,o,s,l){if(l===0)return Qje([t,r,i,o],[e,n,a,s]);var u=fle(t,e,r,n,i,a,o,s,.5),c=u[0],f=u[1];return c.push(l-1),f.push(l-1),HL.apply(null,c)+HL.apply(null,f)}const g2={extrema:xI,box:function(t,e,r,n,i,a,o,s){for(var l=[t,o],u=[e,s],c=xI(t,r,i,o),f=xI(e,n,a,s),h=0;h<c.length;h++)l.push(Th(t,r,i,o,c[h]));for(var h=0;h<f.length;h++)u.push(Th(e,n,a,s,f[h]));return fy(l,u)},length:function(t,e,r,n,i,a,o,s){return HL(t,e,r,n,i,a,o,s,3)},nearestPoint:function(t,e,r,n,i,a,o,s,l,u,c){return lle([t,r,i,o],[e,n,a,s],l,u,Th,c)},pointDistance:function(t,e,r,n,i,a,o,s,l,u,c){var f=this.nearestPoint(t,e,r,n,i,a,o,s,l,u,c);return Ua(f.x,f.y,l,u)},interpolationAt:Th,pointAt:function(t,e,r,n,i,a,o,s,l){return{x:Th(t,r,i,o,l),y:Th(e,n,a,s,l)}},divide:function(t,e,r,n,i,a,o,s,l){return fle(t,e,r,n,i,a,o,s,l)},tangentAngle:function(t,e,r,n,i,a,o,s,l){var u=iW(t,r,i,o,l),c=iW(e,n,a,s,l);return cA(Math.atan2(c,u))}};function aW(t,e){var r=Math.abs(t);return e>0?r:r*-1}const Zje={box:function(t,e,r,n){return{x:t-r,y:e-n,width:r*2,height:n*2}},length:function(t,e,r,n){return Math.PI*(3*(r+n)-Math.sqrt((3*r+n)*(r+3*n)))},nearestPoint:function(t,e,r,n,i,a){var o=r,s=n;if(o===0||s===0)return{x:t,y:e};for(var l=i-t,u=a-e,c=Math.abs(l),f=Math.abs(u),h=o*o,d=s*s,p=Math.PI/4,v,g,m=0;m<4;m++){v=o*Math.cos(p),g=s*Math.sin(p);var y=(h-d)*Math.pow(Math.cos(p),3)/o,w=(d-h)*Math.pow(Math.sin(p),3)/s,b=v-y,x=g-w,S=c-y,E=f-w,_=Math.hypot(x,b),k=Math.hypot(E,S),C=_*Math.asin((b*E-x*S)/(_*k)),M=C/Math.sqrt(h+d-v*v-g*g);p+=M,p=Math.min(Math.PI/2,Math.max(0,p))}return{x:t+aW(v,l),y:e+aW(g,u)}},pointDistance:function(t,e,r,n,i,a){var o=this.nearestPoint(t,e,r,n,i,a);return Ua(o.x,o.y,i,a)},pointAt:function(t,e,r,n,i){var a=2*Math.PI*i;return{x:t+r*Math.cos(a),y:e+n*Math.sin(a)}},tangentAngle:function(t,e,r,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-r*Math.sin(a));return cA(o)}};function Jje(t,e,r,n,i,a,o,s){return-1*r*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function eGe(t,e,r,n,i,a,o,s){return-1*r*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function tGe(t,e,r){return Math.atan(-e/t*Math.tan(r))}function rGe(t,e,r){return Math.atan(e/(t*Math.tan(r)))}function oW(t,e,r,n,i,a){return r*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+t}function sW(t,e,r,n,i,a){return r*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function nGe(t,e,r,n){var i=Math.atan2(n*t,r*e);return(i+Math.PI*2)%(Math.PI*2)}function lW(t,e,r){return{x:t*Math.cos(r),y:e*Math.sin(r)}}function uW(t,e,r){var n=Math.cos(r),i=Math.sin(r);return[t*n-e*i,t*i+e*n]}const iGe={box:function(t,e,r,n,i,a,o){for(var s=tGe(r,n,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&c.push(h):o<h&&h<a&&c.push(h)}for(var f=0;f<c.length;f++){var d=oW(t,e,r,n,i,c[f]);d<l&&(l=d),d>u&&(u=d)}for(var p=rGe(r,n,i),v=1/0,g=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=p+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(var f=0;f<m.length;f++){var w=sW(t,e,r,n,i,m[f]);w<v&&(v=w),w>g&&(g=w)}return{x:l,y:v,width:u-l,height:g-v}},length:function(t,e,r,n,i,a,o){},nearestPoint:function(t,e,r,n,i,a,o,s,l){var u=uW(s-t,l-e,-i),c=u[0],f=u[1],h=Zje.nearestPoint(0,0,r,n,c,f),d=nGe(r,n,h.x,h.y);d<a?h=lW(r,n,a):d>o&&(h=lW(r,n,o));var p=uW(h.x,h.y,i);return{x:p[0]+t,y:p[1]+e}},pointDistance:function(t,e,r,n,i,a,o,s,l){var u=this.nearestPoint(t,e,r,n,s,l);return Ua(u.x,u.y,s,l)},pointAt:function(t,e,r,n,i,a,o,s){var l=(o-a)*s+a;return{x:oW(t,e,r,n,i,l),y:sW(t,e,r,n,i,l)}},tangentAngle:function(t,e,r,n,i,a,o,s){var l=(o-a)*s+a,u=Jje(t,e,r,n,i,a,o,l),c=eGe(t,e,r,n,i,a,o,l);return cA(Math.atan2(c,u))}};function hle(t){for(var e=0,r=[],n=0;n<t.length-1;n++){var i=t[n],a=t[n+1],o=Ua(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};r.push(s),e+=o}return{segments:r,totalLength:e}}function aGe(t){if(t.length<2)return 0;for(var e=0,r=0;r<t.length-1;r++){var n=t[r],i=t[r+1];e+=Ua(n[0],n[1],i[0],i[1])}return e}function oGe(t,e){if(e>1||e<0||t.length<2)return null;var r=hle(t),n=r.segments,i=r.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){var h=(e-a)/f;o=aa.pointAt(u[0],u[1],c[0],c[1],h);break}a+=f}return o}function sGe(t,e){if(e>1||e<0||t.length<2)return 0;for(var r=hle(t),n=r.segments,i=r.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(e>=a&&e<=a+f){o=Math.atan2(c[1]-u[1],c[0]-u[0]);break}a+=f}return o}function lGe(t,e,r){for(var n=1/0,i=0;i<t.length-1;i++){var a=t[i],o=t[i+1],s=aa.pointDistance(a[0],a[1],o[0],o[1],e,r);s<n&&(n=s)}return n}const dle={box:function(t){for(var e=[],r=[],n=0;n<t.length;n++){var i=t[n];e.push(i[0]),r.push(i[1])}return fy(e,r)},length:function(t){return aGe(t)},pointAt:function(t,e){return oGe(t,e)},pointDistance:function(t,e,r){return lGe(t,e,r)},tangentAngle:function(t,e){return sGe(t,e)}};function cW(t,e){return!t||!e?t||e:{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}}function U8(t,e){var r=t.get("startArrowShape"),n=t.get("endArrowShape"),i=null,a=null;return r&&(i=r.getCanvasBBox(),e=cW(e,i)),n&&(a=n.getCanvasBBox(),e=cW(e,a)),e}function uGe(t){for(var e=t.attr(),r=e.points,n=[],i=[],a=0;a<r.length;a++){var o=r[a];n.push(o[0]),i.push(o[1])}var s=fy(n,i),l=s.x,u=s.y,c=s.width,f=s.height,h={minX:l,minY:u,maxX:l+c,maxY:u+f};return h=U8(t,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function cGe(t){for(var e=t.attr(),r=e.points,n=[],i=[],a=0;a<r.length;a++){var o=r[a];n.push(o[0]),i.push(o[1])}return fy(n,i)}var SI=null;function ple(){if(!SI){var t=document.createElement("canvas");t.width=1,t.height=1,SI=t.getContext("2d")}return SI}function vle(t,e,r){var n=1;if(et(t)&&(n=t.split(`
`).length),n>1){var i=fGe(e,r);return e*n+i*(n-1)}return e}function fGe(t,e){return e?e-t:t*.14}function hGe(t,e){var r=ple(),n=0;if(Gt(t)||t==="")return n;if(r.save(),r.font=e,et(t)&&t.includes(`
`)){var i=t.split(`
`);Te(i,function(a){var o=r.measureText(a).width;n<o&&(n=o)})}else n=r.measureText(t).width;return r.restore(),n}function gle(t){var e=t.fontSize,r=t.fontFamily,n=t.fontWeight,i=t.fontStyle,a=t.fontVariant;return[i,a,n,e+"px",r].join(" ").trim()}function dGe(t){var e=t.attr(),r=e.x,n=e.y,i=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=gle(e));var l=hGe(i,s),u;if(!l)u={x:r,y:n,width:0,height:0};else{var c=e.textAlign,f=e.textBaseline,h=vle(i,a,o),d={x:r,y:n-h};c&&(c==="end"||c==="right"?d.x-=l:c==="center"&&(d.x-=l/2)),f&&(f==="top"?d.y+=h:f==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:l,height:h}}return u}var pGe=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,vGe=/[^\s\,]+/ig;function gGe(t){var e=t||[];if(Xt(e))return e;if(et(e))return e=e.match(pGe),Te(e,function(r,n){if(r=r.match(vGe),r[0].length>1){var i=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=i}Te(r,function(a,o){isNaN(a)||(r[o]=+a)}),e[n]=r}),e}function mGe(t,e,r,n){var i=[],a=!!n,o,s,l,u,c,f,h;if(a){l=n[0],u=n[1];for(var d=0,p=t.length;d<p;d+=1){var v=t[d];l=xh([0,0],l,v),u=Sh([0,0],u,v)}}for(var d=0,g=t.length;d<g;d+=1){var v=t[d];if(d===0&&!r)h=v;else if(d===g-1&&!r)f=v,i.push(h),i.push(f);else{var m=[d?d-1:g-1,d-1][r?0:1];o=t[m],s=t[r?(d+1)%g:d+1];var y=[0,0];y=G_(y,s,o),y=Ga(y,y,e);var w=XC(v,o),b=XC(v,s),x=w+b;x!==0&&(w/=x,b/=x);var S=Ga([0,0],y,-w),E=Ga([0,0],y,b);f=na([0,0],v,S),c=na([0,0],v,E),c=xh([0,0],c,Sh([0,0],s,v)),c=Sh([0,0],c,xh([0,0],s,v)),S=G_([0,0],c,v),S=Ga([0,0],S,-w/b),f=na([0,0],v,S),f=xh([0,0],f,Sh([0,0],o,v)),f=Sh([0,0],f,xh([0,0],o,v)),E=G_([0,0],v,f),E=Ga([0,0],E,b/w),c=na([0,0],v,E),a&&(f=Sh([0,0],f,l),f=xh([0,0],f,u),c=Sh([0,0],c,l),c=xh([0,0],c,u)),i.push(h),i.push(f),h=c}}return r&&i.push(i.shift()),i}function mle(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=[[0,0],[1,1]]);for(var n=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=mGe(i,.4,n,r),l=i.length,u=[],c,f,h,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],h=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]]);return n&&(c=s[l],f=s[l+1],h=i[0],u.push(["C",c[0],c[1],f[0],f[1],h[0],h[1]])),u}var m2=`	
\v\f\r   ᠎             　\u2028\u2029`,yGe=new RegExp("([a-z])["+m2+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+m2+"]*,?["+m2+"]*)+)","ig"),wGe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+m2+"]*,?["+m2+"]*","ig");function XL(t){if(!t)return null;if(Xt(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(yGe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(wGe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(r.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&r.push([i,o[0]]),s==="r")r.push([i].concat(o));else for(;o.length>=e[s]&&(r.push([i].concat(o.splice(0,e[s]))),!!e[s]););return""}),r}var bGe=/[a-z]/;function fW(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function yle(t){var e=XL(t);if(!e||!e.length)return[["M",0,0]];for(var r=!1,n=0;n<e.length;n++){var i=e[n][0];if(bGe.test(i)||["V","H","T","S"].indexOf(i)>=0){r=!0;break}}if(!r)return e;var a=[],o=0,s=0,l=0,u=0,c=0,f=e[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,u=s,c++,a[0]=["M",o,s]);for(var n=c,h=e.length;n<h;n++){var d=e[n],p=a[n-1],v=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=d[1],v[2]=d[2],v[3]=d[3],v[4]=d[4],v[5]=d[5],v[6]=+d[6]+o,v[7]=+d[7]+s;break;case"V":v[1]=+d[1]+s;break;case"H":v[1]=+d[1]+o;break;case"M":l=+d[1]+o,u=+d[2]+s,v[1]=l,v[2]=u;break;default:for(var m=1,y=d.length;m<y;m++)v[m]=+d[m]+(m%2?o:s)}else v=e[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=v[1],v=["L",o,s];break;case"V":s=v[1],v=["L",o,s];break;case"T":o=v[1],s=v[2];var w=fW([p[1],p[2]],[p[3],p[4]]);v=["Q",w[0],w[1],o,s];break;case"S":o=v[v.length-2],s=v[v.length-1];var b=p.length,x=fW([p[b-4],p[b-3]],[p[b-2],p[b-1]]);v=["C",x[0],x[1],v[1],v[2],o,s];break;case"M":l=v[v.length-2],u=v[v.length-1];break;default:o=v[v.length-2],s=v[v.length-1]}a.push(v)}return a}function hE(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function YL(t,e){return hE(t)*hE(e)?(t[0]*e[0]+t[1]*e[1])/(hE(t)*hE(e)):1}function hW(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(YL(t,e))}function qL(t,e){return t[0]===e[0]&&t[1]===e[1]}function xGe(t,e){var r=e[1],n=e[2],i=nA(iA(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=Math.sqrt(d),n*=Math.sqrt(d));var p=r*r*(h*h)+n*n*(f*f),v=p?Math.sqrt((r*r*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*r*h/n:0,m=r?v*-n*f/r:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/r,(h-m)/n],x=[(-1*f-g)/r,(-1*h-m)/n],S=hW([1,0],b),E=hW(b,x);return YL(b,x)<=-1&&(E=Math.PI),YL(b,x)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:y,cy:w,rx:qL(t,[u,c])?0:r,ry:qL(t,[u,c])?0:n,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:a,sweepFlag:o}}function dW(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function wle(t){t=gGe(t);for(var e=[],r=null,n=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];n=t[s+1];var u=l[0],c={command:u,prePoint:r,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=xGe(r,l);c.arcParams=f;break}if(u==="Z")r=i,n=t[a+1];else{var h=l.length;r=[l[h-2],l[h-1]]}n&&n[0]==="Z"&&(n=t[a],e[a]&&(e[a].prePoint=r)),c.currentPoint=r,e[a]&&qL(r,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=d;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-r[0],p[1]-r[1]],c.endTangent=[r[0]-p[0],r[1]-p[1]];else if(u==="Q"){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]]}else if(u==="T"){var g=e[s-1],v=dW(g.currentPoint,p);g.command==="Q"?(c.command="Q",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[r[0]-v[0],r[1]-v[1]]):(c.command="TL",c.startTangent=[p[0]-r[0],p[1]-r[1]],c.endTangent=[r[0]-p[0],r[1]-p[1]])}else if(u==="C"){var m=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[m[0]-y[0],m[1]-y[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[y[0]-m[0],y[1]-m[1]])}else if(u==="S"){var g=e[s-1],m=dW(g.currentPoint,p),y=[l[1],l[2]];g.command==="C"?(c.command="C",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]]):(c.command="SQ",c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]])}else if(u==="A"){var w=.001,b=c.arcParams||{},x=b.cx,S=x===void 0?0:x,E=b.cy,_=E===void 0?0:E,k=b.rx,C=k===void 0?0:k,M=b.ry,A=M===void 0?0:M,T=b.sweepFlag,D=T===void 0?0:T,F=b.startAngle,R=F===void 0?0:F,B=b.endAngle,N=B===void 0?0:B;D===0&&(w*=-1);var O=C*Math.cos(R-w)+S,L=A*Math.sin(R-w)+_;c.startTangent=[O-i[0],L-i[1]];var G=C*Math.cos(R+N+w)+S,q=A*Math.sin(R+N-w)+_;c.endTangent=[p[0]-G,p[1]-q]}e.push(c)}return e}function SGe(t,e){for(var r=[],n=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=cle.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=g2.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=iGe.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:r.push(s[0]),n.push(s[1]);break}c&&(o.box=c,r.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}r=r.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var h=wc(r),d=wc(n),p=yc(r),v=yc(n);if(i.length===0)return{x:h,y:d,width:p-h,height:v-d};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===h?(g=dE(o,e),h=h-g.xExtra):s[0]===p&&(g=dE(o,e),p=p+g.xExtra),s[1]===d?(g=dE(o,e),d=d-g.yExtra):s[1]===v&&(g=dE(o,e),v=v+g.yExtra)}return{x:h,y:d,width:p-h,height:v-d}}function dE(t,e){var r=t.prePoint,n=t.currentPoint,i=t.nextPoint,a=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||Eae(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function EGe(t){var e=t.attr(),r=e.path,n=e.stroke,i=n?e.lineWidth:0,a=t.get("segments")||wle(r),o=SGe(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=U8(t,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function _Ge(t){var e=t.attr(),r=e.x1,n=e.y1,i=e.x2,a=e.y2,o=Math.min(r,i),s=Math.max(r,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=U8(t,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function CGe(t){var e=t.attr(),r=e.x,n=e.y,i=e.rx,a=e.ry;return{x:r-i,y:n-a,width:i*2,height:a*2}}kc("rect",ole);kc("image",ole);kc("circle",sle);kc("marker",sle);kc("polyline",uGe);kc("polygon",cGe);kc("text",dGe);kc("path",EGe);kc("line",_Ge);kc("ellipse",CGe);var kGe=function(t){cr(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return e}(Rse),KL=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},W8=function(e){if(Xt(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(Ut(e))return[e,e,e,e];if(et(e)){var r=parseInt(e,10);return[r,r,r,r]}return[0,0,0,0]},MGe=function(e){var r=new kGe(e.type,e);return r.clientX=e.clientX,r.clientY=e.clientY,r.x=e.x,r.y=e.y,r.target=e.target,r.currentTarget=e.currentTarget,r.bubbles=!0,r.item=e.item,r},AGe=function(e){if(!e)return!1;for(var r=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<r;i++)if(e[i]!==n[i])return!0;return!1},qu=function(e){return Number.isNaN(Number(e))},ble=function(e){for(var r=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY;u<r&&(r=u),c<i&&(i=c),f>n&&(n=f),h>a&&(a=h)}var d=Math.floor(r),p=Math.floor(i),v=Math.ceil(n)-Math.floor(r),g=Math.ceil(a)-Math.floor(i);return{x:d,y:p,width:v,height:g,minX:r,minY:i,maxX:n,maxY:a}},TGe=function(e,r,n,i,a){r===void 0&&(r=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=r*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},h=0;h<o;h++){var d=e[h],p=d.source,v=d.target,g="".concat(p,"-").concat(v);if(!c[h]){u[g]||(u[g]=[]),c[h]=!0,u[g].push(d);for(var m=0;m<o;m++)if(h!==m){var y=e[m],w=y.source,b=y.target;c[m]||(p===b&&v===w?(u[g].push(y),c[m]=!0,f["".concat(w,"|").concat(b,"|").concat(u[g].length-1)]=!0):p===w&&v===b&&(u[g].push(y),c[m]=!0))}}}for(var x in u)for(var S=u[x],E=S.length,_=0;_<E;_++){var k=S[_];if(k.source===k.target){a&&(k.type=a),k.loopCfg={position:l[_%8],dist:Math.floor(_/8)*20+50};continue}if(E===1&&i&&k.source!==k.target){k.type=i;continue}k.type=n;var C=(_%2===0?1:-1)*(f["".concat(k.source,"|").concat(k.target,"|").concat(_)]?-1:1);E%2===1?k.curveOffset=C*Math.ceil(_/2)*s:k.curveOffset=C*(Math.floor(_/2)*s+r)}return e};const OGe=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:ble,cloneEvent:MGe,formatPadding:W8,isNaN:qu,isViewportChanged:AGe,processParallelEdges:TGe,uniqueId:KL},Symbol.toStringTag,{value:"Module"}));var Vd={};const IGe=xc(n$e);Object.defineProperty(Vd,"__esModule",{value:!0});var Dd=IGe;function xle(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return Dd.mat3.fromTranslation(n,r),Dd.mat3.multiply(t,n,e)}Vd.leftTranslate=xle;function Sle(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return Dd.mat3.fromRotation(n,r),Dd.mat3.multiply(t,n,e)}Vd.leftRotate=Sle;function Ele(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return Dd.mat3.fromScaling(n,r),Dd.mat3.multiply(t,n,e)}Vd.leftScale=Ele;function DGe(t,e,r){return Dd.mat3.multiply(t,r,e)}function PGe(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":xle(r,r,[a[1],a[2]]);break;case"s":Ele(r,r,[a[1],a[2]]);break;case"r":Sle(r,r,a[1]);break;case"m":DGe(r,r,a[1]);break}}return r}var pW=Vd.transform=PGe;function _le(t,e){return t[0]*e[1]-e[0]*t[1]}Vd.direction=_le;function LGe(t,e,r){var n=Dd.vec2.angle(t,e),i=_le(t,e)>=0;return r?i?Math.PI*2-n:n:i?n:Math.PI*2-n}Vd.angleTo=LGe;function RGe(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}Vd.vertical=RGe;var NGe=function(){function t(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return t.prototype.getViewCenter=function(){var e=this.getFormatPadding(),r=this.graph,n=this.graph.get("width"),i=r.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(i-e[0]-e[2])/2+e[0]}},t.prototype.fitCenter=function(e,r){var n=this.graph,i=n.get("group"),a,o=n.getNodes();if(o.length>n.get("optimizeThreshold")){var s=1/0,l=1/0,u=-1/0,c=-1/0;o.forEach(function(b){var x=b.getModel(),S=x.x,E=x.y;s>S&&(s=S),l>E&&(l=E),u<S&&(u=S),c<E&&(c=E)});var f=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=j0({x:s,y:l},f),d=h.x,p=h.y,v=j0({x:u,y:c},f),g=v.x,m=v.y;a={minX:d,maxX:g,minY:p,maxY:m,width:g-d,height:m-p,x:d,y:p}}else a=i.getCanvasBBox();if(!(a.width===0||a.height===0)){var y=this.getViewCenter(),w={x:a.x+a.width/2,y:a.y+a.height/2};n.translate(y.x-w.x,y.y-w.y,e,r)}},t.prototype.animatedFitView=function(e,r,n,i,a,o,s,l){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],f=i.x+a.x-o.x-i.minX,h=i.y+a.y-o.y-i.minY;if(!(qu(f)||qu(h))){var d=pW(c,[["t",f,h]]);if(!l){var p=Ew({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:d})}});e.animate(function(b){return{matrix:ML(r,d,b)}},p);return}var v=u.get("minZoom"),g=u.get("maxZoom"),m=s;v&&s<v?(m=v,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):g&&s>g&&(m=g,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var y=pW(d,[["t",-a.x,-a.y],["s",m,m],["t",a.x,a.y]]),w=Ew({animateCfg:n,callback:function(){e.setMatrix(y),u.emit("viewportchange",{action:"translate",matrix:d}),u.emit("viewportchange",{action:"zoom",matrix:y})}});e.stopAnimate(),e.setMatrix(r),e.animate(function(b){return{matrix:ML(r,y,b)}},w)}},t.prototype.fitView=function(e,r){var n=this.graph,i=this.getFormatPadding(),a=n.get("width"),o=n.get("height"),s=n.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var u,c=n.getNodes();if(c.length>n.get("optimizeThreshold")){var f=1/0,h=1/0,d=-1/0,p=-1/0;c.forEach(function(S){var E=S.getModel(),_=E.x,k=E.y;f>_&&(f=_),h>k&&(h=k),d<_&&(d=_),p<k&&(p=k)}),u={minX:f,maxX:d,minY:h,maxY:p,width:d-f,height:p-h,x:f,y:h}}else u=s.getCanvasBBox();if(!(u.width===0||u.height===0)){var v=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},m=(a-i[1]-i[3])/u.width,y=(o-i[0]-i[2])/u.height,w=m;if(m>y&&(w=y),e)this.animatedFitView(s,l,r,u,v,g,w,!0);else{var b=v.x-g.x,x=v.y-g.y;if(qu(b)||qu(x))return;n.translate(b,x),n.zoom(w,v)||console.warn("zoom failed, ratio out of range, ratio: %f",w)}}},t.prototype.fitViewByRules=function(e,r,n){var i=e.onlyOutOfViewPort,a=i===void 0?!1:i,o=e.direction,s=o===void 0?"both":o,l=e.ratioRule,u=l===void 0?"min":l,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),d=c.get("height"),p=c.get("group"),v=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var g,m=c.getNodes();if(m.length>c.get("optimizeThreshold")){var y=1/0,w=1/0,b=-1/0,x=-1/0;m.forEach(function(D){var F=D.getModel(),R=F.x,B=F.y;y>R&&(y=R),w>B&&(w=B),b<R&&(b=R),x<B&&(x=B)}),g={minX:y,maxX:b,minY:w,maxY:x,width:b-y,height:x-w,x:y,y:w}}else g=p.getCanvasBBox();if(!(g.width===0||g.height===0)){var S=this.getViewCenter(),E={x:g.x+g.width/2,y:g.y+g.height/2},_=(h-f[1]-f[3])/g.width,k=(d-f[0]-f[2])/g.height,C;if(s==="x"?C=_:s==="y"?C=k:C=u==="max"?Math.max(_,k):Math.min(_,k),a&&(C=C<1?C:1),r)this.animatedFitView(p,v,n,g,S,E,C,!0);else{var M=c.getZoom(),A=M*C,T=c.get("minZoom");A<T&&(A=T,console.warn("fitview failed, ratio out of range, ratio: %f",C,"graph minzoom has been used instead")),c.translate(S.x-E.x,S.y-E.y),c.zoomTo(A,S)}}},t.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return W8(e)},t.prototype.focusPoint=function(e,r,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),r){var l=(o.x-e.x)*s[0],u=(o.y-e.y)*s[4],c=0,f=0,h=0,d=0;this.graph.get("canvas").animate(function(p){h=l*p,d=u*p,i.graph.translate(h-c,d-f),c=h,f=d},j({},n))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},t.prototype.getPointByCanvas=function(e,r){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=gse({x:e,y:r},n);return i},t.prototype.getPointByClient=function(e,r){var n=this.graph.get("canvas"),i=n.getPointByClient(e,r);return this.getPointByCanvas(i.x,i.y)},t.prototype.getClientByPoint=function(e,r){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(e,r),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},t.prototype.getCanvasByPoint=function(e,r){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),j0({x:e,y:r},n)},t.prototype.focus=function(e,r,n){if(et(e)&&(e=this.graph.findById(e)),e){var i=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=e.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},r,n)}},t.prototype.focusItems=function(e,r,n,i){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),l=a.get("height"),u=a.get("group"),c=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var f={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var p=d[h],v=p.getBBox();v.minX<f.minX&&(f.minX=v.minX),v.minY<f.minY&&(f.minY=v.minY),v.maxX>f.maxX&&(f.maxX=v.maxX),v.maxY>f.maxY&&(f.maxY=v.maxY)}if(f.x=f.minX,f.y=f.minY,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,!(f.width===0||f.height===0)){var g=this.getViewCenter(),m={x:f.x+f.width/2,y:f.y+f.height/2},y=(s-o[1]-o[3])/f.width,w=(l-o[0]-o[2])/f.height,b=y;y>w&&(b=w),n?this.animatedFitView(u,c,i,f,g,m,b,r):(a.translate(g.x-m.x,g.y-m.y),r&&!a.zoom(b,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",b))}}},t.prototype.changeSize=function(e,r){var n=this.graph;if(!Ut(e)||!Ut(r))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:r});var i=n.get("canvas");i.changeSize(e,r);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();function QL(t){"@babel/helpers - typeof";return QL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QL(t)}function vW(t){if(typeof t!="string")return t;var e=function(E){if(typeof E!="string")return E;try{return JSON.parse(E.trim())}catch{return E.trim()}},r=e(t);if(typeof r!="string")return r;for(var n=function(E){return E[E.length-1]},i=t.trim(),a=[],o=[],s=function(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];return E.some(function(k){return n(o)===k})},l=function(){return n(a)},u=null,c=0,f="";c<i.length;){var h=i[c],d=s('"',"'");if(!d&&!h.trim()){c+=1;continue}var p=i[c-1]==="\\",v=s("}"),g=s("]"),m=s(","),y=l();if(d)if(n(o)===h&&!p){o.pop();var w=e(f);y.push(w),u=w,f=""}else f+=h;else if(g&&h===",")f&&(y.push(e(f)),f="");else if(v&&h===":")o.push(","),f&&(y.push(f),f="");else if(m&&h===",")f&&(y.push(e(f)),f=""),o.pop();else if(h==="}"&&(v||m)){f&&(y.push(e(f)),f=""),m&&o.pop();for(var b={},x=1;x<y.length;x+=2)b[y[x-1]]=y[x];a.pop(),a.length&&n(a).push(b),o.pop(),u=b}else h==="]"&&g?(f&&(y.push(e(f)),f=""),a.pop(),a.length&&n(a).push(y),o.pop(),u=y):h==="{"?(a.push([]),o.push("}")):h==="["?(a.push([]),o.push("]")):h==='"'?o.push('"'):h==="'"?o.push("'"):f+=h;c+=1}return u||f}var FGe=function(e){return e.split("-").reduce(function(r,n){return r+n.charAt(0).toUpperCase()+n.slice(1)})},BGe=function(e){return function(r){for(var n=e.length,i=[],a=0,o="";a<n;)if(e[a]==="{"&&e[a+1]==="{")i.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(i.length){var s=i.pop();o=af(r,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),i.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'.concat(l,'}"'):l}).join("")}};function Cle(t,e){var r={},n=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map(function(s){return Cle(s,e)}),a={},o=t.tagName?t.tagName.toLowerCase():"group";return o==="text"&&(r.text=t.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=FGe(s),u=t.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=vW(u);r=j(j({},r),c)}else a[l]=vW(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=r,e&&e.style&&a.name&&QL(e.style[a.name])==="object"&&(a.attrs=j(j({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=j(j({},a.attrs),e.style)),i.length&&(a.children=i),a}function $Ge(t,e,r){var n=t.attrs,i=n===void 0?{}:n,a={x:e.x||0,y:e.y||0,width:r.width||0,height:r.height||0},o,s;switch(t.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=Ase(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,t.attrs=j({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function kle(t,e){var r;e===void 0&&(e={x:0,y:0});var n=j({x:0,y:0,width:0,height:0},e);if(!((r=t.children)===null||r===void 0)&&r.length){var i=t.attrs,a=i===void 0?{}:i,o=a.marginTop,s=j({},e);o&&(s.y+=o);for(var l=0;l<t.children.length;l++){t.children[l].attrs.key="".concat(a.key||"root"," -").concat(l," ");var u=kle(t.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return t.bbox=$Ge(t,e,n),t.attrs=j(j({},t.attrs),t.bbox),t}function Mle(t,e){var r,n,i,a,o=(t||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:o,key:s};if(t&&!e)return{action:"add",val:t,type:o};if(!t&&!e)return{action:"same",type:o};var l=[];if(((r=t.children)===null||r===void 0?void 0:r.length)>0||((n=e.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=t.children)===null||i===void 0?void 0:i.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],f=t.children||[],h=0;h<u;h+=1)l.push(Mle(f[h],c[h]));var d=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:l}:d.filter(function(v){return v!=="children"}).some(function(v){return t.attrs[v]!==e.attrs[v]||!p.includes(v)})?{action:"change",val:t,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function gW(t){var e={},r=function(i){var a=typeof t=="function"?t(i):t,o=BGe(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=kle(Cle(l,i));return s.remove(),u};return{draw:function(i,a){var o=r(i),s=a,l=function u(c){var f=c.attrs,h=f===void 0?{}:f,d=c.bbox,p=c.type,v=c.children,g=xi(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var m=a.addShape(c.type,j({attrs:h,origin:{bbox:d,type:p,children:v}},g));c.keyshape&&(s=m)}c.children&&c.children.forEach(function(y){return u(y)})};return l(o),e[i.id]=[o],s},update:function(i,a){e[i.id]||(e[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=r(i),u=e[i.id].pop(),c=Mle(l,u),f=function p(v){var g;v.type!=="group"&&o.addShape(v.type,{attrs:v.attrs}),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(m){return p(m)})},h=function p(v){var g,m=s.find(function(y){return y.attrs.key===v.attrs.key});m&&o.removeChild(m),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(y){return p(y)})},d=function p(v){var g=v.key;if(v.type!=="group"){var m=s.find(function(w){return w.attrs.key===g});switch(v.action){case"change":if(m){var y=v.val.keyshape?a.getOriginStyle():{};m.attr(j(j({},y),v.val.attrs))}break;case"add":f(v.val);break;case"delete":h(v.val);break;case"restructure":h(v.formerTarget),f(v.nowTarget);break}}v.children&&v.children.forEach(function(w){return p(w)})};d(c),e[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var EI={};function mW(t){return EI[t]||(EI[t]=Lm(t)),EI[t]}var zGe={defaultShapeType:"defaultType",className:null,getShape:function(e){var r=this,n=r[e]||r[r.defaultShapeType]||r["simple-circle"];return n},draw:function(e,r,n){var i=this.getShape(e);n.shapeMap={};var a=i.draw(r,n);return i.afterDraw&&i.afterDraw(r,n,a),a},baseUpdate:function(e,r,n,i){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,r,i),(o=s.update)===null||o===void 0||o.call(s,r,n,i)),s.afterUpdate&&s.afterUpdate(r,n)},setState:function(e,r,n,i){var a=this.getShape(e);a.setState(r,n,i)},shouldUpdate:function(e){var r=this.getShape(e);return!!r.update},getControlPoints:function(e,r){var n=this.getShape(e);return n.getControlPoints(r)},getAnchorPoints:function(e,r){var n=this.getShape(e);return n.getAnchorPoints(r)}},_I={options:{},draw:function(e,r){return this.drawShape(e,r)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var r=this.options.anchorPoints,n=e.anchorPoints||r;return n}},mn=function(){function t(){}return t.registerFactory=function(e,r){var n=mW(e),i=zGe,a=j(j({},i),r);return t[n]=a,a.className=n,a},t.getFactory=function(e){var r=mW(e);return t[r]},t.registerNode=function(e,r,n){var i=t.Node,a;if(typeof r=="string"||typeof r=="function"){var o=gW(r);a=j(j({},i.getShape("single-node")),o)}else if(r.jsx){var s=r.jsx,o=gW(s);a=j(j(j({},i.getShape("single-node")),o),r)}else{i.getShape(n);var l=n?i.getShape(n):_I;a=j(j({},l),r)}return a.type=e,a.itemType="node",i[e]=a,a},t.registerEdge=function(e,r,n){var i=t.Edge,a=n?i.getShape(n):_I,o=j(j({},a),r);return o.type=e,o.itemType="edge",i[e]=o,o},t.registerCombo=function(e,r,n){var i=t.Combo,a=n?i.getShape(n):_I,o=j(j({},a),r);return o.type=e,o.itemType="combo",i[e]=o,o},t}();mn.registerFactory("node",{defaultShapeType:"circle"});mn.registerFactory("edge",{defaultShapeType:"line"});mn.registerFactory("combo",{defaultShapeType:"circle"});var CI="bboxCache",kI="bboxCanvasCache",Ale=function(){function t(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var r={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(r,this.getDefaultCfg(),e);var n=this.get("model"),i=n.id,a=this.get("type");typeof i>"u"?i=KL(a):typeof i!="string"&&(i=String(i)),this.get("model").id=i,this.set("id",i);var o=e.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||n.stateStyles;c=gn({},u.stateStyles,c),this.set("styles",c)}}}return t.prototype.calculateBBox=function(){var e=this.get("keyShape"),r=this.get("group"),n=ZC(e,r);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),r=this.get("group"),n=ZC(e,r);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var e=this,r=e.get("shapeFactory"),n=e.get("group"),i=e.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!r){e.updatePosition(i);var o=e.getShapeCfg(i),s=o.type,l=r.draw(s,o,n);l&&(e.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(r,s)}},t.prototype.setOriginStyle=function(){var e=this.get("group"),r=e.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var d=this.get("originStyle");a&&!d[a]&&(d[a]={});for(var p=this.getCurrentStatesStyle(),v=function(m){var y=r[m],w=y.get("name"),b=y.attr();if(w&&w!==a){var x=p[w];d[w]||(d[w]={}),x?Object.keys(b).forEach(function(_){var k=b[_];k!==x[_]&&(d[w][_]=k)}):d[w]=y.get("type")!=="image"?Dr(b):i.getShapeStyleByName(w)}else{var S=y.attr(),E={};Object.keys(p).forEach(function(_){var k=p[_];(_===a||!ia(k))&&(E[_]=k)}),Object.keys(S).forEach(function(_){var k=S[_];E[_]!==k&&(a?d[a][_]=k:d[_]=k)})}},s=0;s<r.length;s++)v(s);delete d.path,delete d.matrix,delete d.x,delete d.y,d[a]&&(delete d[a].x,delete d[a].y,delete d[a].matrix,delete d[a].path),i.set("originStyle",d)}else{for(var o={},s=0;s<r.length;s++){var l=r[s],u=l.get("type"),c=l.get("name");if(c&&c!==a)o[c]=u!=="image"?Dr(l.attr()):i.getShapeStyleByName(c),u==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,!a)Object.assign(o,f);else if(c)o[a]=f;else{var h=KL("shape");l.set("name",h),e.shapeMap[h]=l,o[h]=u!=="image"?Dr(l.attr()):i.getShapeStyleByName(c)}}}i.set("originStyle",o)}},t.prototype.restoreStates=function(e,r){var n=this,i=n.get("states");Te(i,function(a){e.setState(r,a,!0,n)})},t.prototype.init=function(){var e=mn.getFactory(this.get("type"));this.set("shapeFactory",e)},t.prototype.get=function(e){return this._cfg[e]},t.prototype.set=function(e,r){ia(e)?this._cfg=j(j({},this._cfg),e):this._cfg[e]=r},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set(CI,null),this.set(kI,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(e){var r=this.get("group"),n;if(e?n=r.shapeMap[e]||r.find(function(a){return a.get("name")===e}):n=this.getKeyShape(),n){var i={};return Te(n.attr(),function(a,o){(o!=="img"||et(a))&&(i[o]=a)}),i}return{}},t.prototype.getShapeCfg=function(e,r){var n=this.get("styles");if(n){var i=e;return i.style=j(j({},n),e.style),i}return e},t.prototype.getStateStyle=function(e){var r=this.get("styles"),n=r&&r[e];return n},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var e=this,r={},n=e.getStates();return!n||!n.length?this.get("originStyle"):(Te(e.getStates(),function(i){r=Object.assign(r,e.getStateStyle(i))}),r)},t.prototype.setState=function(e,r){var n=this.get("states"),i=this.get("shapeFactory"),a=e,o=e;et(r)&&(a="".concat(e,":").concat(r),o="".concat(e,":"));var s=n;if(Tb(r)){var l=n.indexOf(o);if(r){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(et(r)){var u=n.filter(function(h){return h.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(h){return!h.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,e,r,this)}},t.prototype.clearStates=function(e){var r=this,n=r.getStates(),i=r.get("shapeFactory"),a=r.get("model"),o=a.type;e||(e=n),et(e)&&(e=[e]);var s=n.filter(function(l){return e.indexOf(l)===-1});r.set("states",s),e.forEach(function(l){i.setState(o,l,!1,r)})},t.prototype.setOptimize=function(e){this.optimize=e},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(e){var r=this.getStates();return r.indexOf(e)>=0},t.prototype.refresh=function(e){var r=this.get("model");this.updatePosition(r),this.updateShape(e),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(e){},t.prototype.update=function(e,r){r===void 0&&(r=void 0);var n=this.get("model");if(r==="move")this.updatePosition(e);else{var i=n.visible,a=e.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;qt(s,l),delete e.stateStyles}Object.assign(n,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(r)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(e){var r=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(r.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,e);r.baseUpdate(i,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(r,i)},t.prototype.updatePosition=function(e){var r=this.get("model"),n=isNaN(+e.x)?+r.x:+e.x,i=isNaN(+e.y)?+r.y:+e.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;r.x=n,r.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),mse(a,{x:n,y:i}),this.clearCache(),!0)},t.prototype.getBBox=function(){var e=this.get(CI);return e||(e=this.calculateBBox(),this.set(CI,e)),e},t.prototype.getCanvasBBox=function(){var e=this.get(kI);return e||(e=this.calculateCanvasBBox(),this.set(kI,e)),e},t.prototype.toFront=function(){var e=this.get("group");e.toFront()},t.prototype.toBack=function(){var e=this.get("group");e.toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(e){var r=this.get("group");e?r.show():r.hide(),this.set("visible",e)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(e){var r=this.get("group");r&&r.set("capture",e)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),r=this.get("group");e&&r.stopAnimate(),r.shapeMap={},this.clearCache(),r.remove(),this._cfg=null,this.destroyed=!0}},t}(),pE={source:"start",target:"end"},Au="Node",Rg="Point",jGe="Anchor",Tle=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(r,n){var i=pE[r]+Rg,a=r+Au,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),ia(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},e.prototype.getLinkPoint=function(r,n,i){var a=pE[r]+Rg,o=r+Au,s=this.get(a);if(!s){var l=this.get(o),u=r+jGe,c=this.getPrePoint(r,i),f=n[u];Gt(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),Gt(s.index)||this.set("".concat(r,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(r,n){if(n&&n.length){var i=r==="source"?0:n.length-1;return n[i]}var a=r==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(r){var n=r+Au,i=pE[r]+Rg,a=this.get(n);return a&&!a.destroyed?a.get("model"):this.get(i)},e.prototype.getControlPointsByCenter=function(r){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=r.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},e.prototype.getEndCenter=function(r){var n=r+Au,i=pE[r]+Rg,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(r,n){var i=this,a=i.get("linkCenter"),o=n!=null&&n.includes("move")?r:t.prototype.getShapeCfg.call(this,r);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",r,s),o.endPoint=i.getLinkPoint("target",r,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},e.prototype.getModel=function(){var r=this.get("model"),n=this.get("source".concat(Au)),i=this.get("target".concat(Au));return n?delete r["source".concat(Au)]:r.source=this.get("start".concat(Rg)),i?delete r["target".concat(Au)]:r.target=this.get("end".concat(Rg)),!et(r.source)&&!ia(r.source)&&(r.source=r.source.getID()),!et(r.target)&&!ia(r.target)&&(r.target=r.target.getID()),r},e.prototype.setSource=function(r){this.setEnd("source",r),this.set("source",r)},e.prototype.setTarget=function(r){this.setEnd("target",r),this.set("target",r)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(r,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=r.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),l=this.get("target");if(!(!s||s.destroyed||!l||l.destroyed)){var u=this.get("styles");if(r.stateStyles){var c=r.stateStyles;qt(u,c),delete r.stateStyles}Object.assign(i,r),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var r=this.get("source".concat(Au)),n=this.get("target".concat(Au));r&&!r.destroyed&&r.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(Ale),MI="anchorPointsCache",GGe="bboxCache",V8=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(r,n){for(var i=0,a=r[0],o=KC(r[0],n),s=0;s<r.length;s++){var l=r[s],u=KC(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var r=this;return this.get("edges").filter(function(n){return n.get("target")===r})},e.prototype.getOutEdges=function(){var r=this;return this.get("edges").filter(function(n){return n.get("source")===r})},e.prototype.getNeighbors=function(r){var n=this,i=this.get("edges");if(r==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(r==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},e.prototype.getLinkPointByAnchor=function(r){var n=this.getAnchorPoints();return n[r]},e.prototype.getLinkPoint=function(r){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=pse({x:o,y:s,r:l.width/2},r);break;case"ellipse":c=vse({x:o,y:s,rx:l.width/2,ry:l.height/2},r);break;default:c=dse(l,r)}var f=c;return u.length&&(f||(f=r),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},e.prototype.getAnchorPoints=function(){var r=this.get(MI);if(!r){r=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];Te(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};r.push(f)}),this.set(MI,r)}return r},e.prototype.addEdge=function(r){this.get("edges").push(r)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(r){var n=this.getEdges(),i=n.indexOf(r);i>-1&&n.splice(i,1)},e.prototype.clearCache=function(){this.set(GGe,null),this.set(MI,null)},e.prototype.getUpdateType=function(r){var n,i,a,o,s;if(r){var l=!Gt(r.x),u=!Gt(r.y),c=Object.keys(r);if(c.length===1&&(l||u)||c.length===2&&l&&u)return"move";if(Ut(r.x)||Ut(r.y)||r.type||r.anchorPoints||r.size||r!=null&&r.style&&(!((n=r==null?void 0:r.style)===null||n===void 0)&&n.r||!((i=r==null?void 0:r.style)===null||i===void 0)&&i.width||!((a=r==null?void 0:r.style)===null||a===void 0)&&a.height||!((o=r==null?void 0:r.style)===null||o===void 0)&&o.rx||!((s=r==null?void 0:r.style)===null||s===void 0)&&s.ry))return"bbox|label";var f=c.includes("label")||c.includes("labelCfg");return f?"style|label":"style"}},e.prototype.setState=function(r,n){var i=this;if(this.optimize){t.prototype.setState.call(this,r,n);return}this.runWithBBoxAffected(function(){return t.prototype.setState.call(i,r,n)})},e.prototype.clearStates=function(r){var n=this;if(this.optimize){t.prototype.clearStates.call(this,r);return}this.runWithBBoxAffected(function(){return t.prototype.clearStates.call(n,r)})},e.prototype.runWithBBoxAffected=function(r){var n=["r","width","height","rx","ry","lineWidth"],i=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(u){n.includes(u)&&(a[u]=i[u])}),r();for(var o=this.getKeyShape().attr(),s=0;s<n.length;s++){var l=n[s];if(o[l]!==a[l]){this.clearCache(),this.getEdges().forEach(function(u){return u.refresh()});break}}},e}(Ale),yW="bboxCache",wW="bboxCanvasCache",vE="sizeCache",bW="anchorPointsCache",Ole=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(r){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=r,o=Ut(r.size)?[r.size,r.size]:r.size,s=Ut(r.fixSize)?[r.fixSize,r.fixSize]:r.fixSize,l=o||s||jt.defaultCombo.size,u={r:(Math.max(i.width,i.height)||Math.max(l[0],l[1]))/2,width:i.width||l[0],height:i.height||l[1]};a.style=j(j(j({},n),r.style),u);var c=r.padding||jt.defaultCombo.padding;return Ut(c)?(u.r+=c,u.width+=c*2,u.height+=c*2):(u.r=u.r+Math.max.apply(Math,c),u.width+=c[1]+c[3]||c[1]*2,u.height+=c[0]+c[2]||c[0]*2),this.set(vE,u),a}return r},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var r=this.get("keyShape"),n=this.get("group"),i=this.get(yW)||{},a=i.x,o=i.x,s=this.get(vE),l=ZC(r,n);if(l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2,s){s.width=Math.max(s.width,l.width),s.height=Math.max(s.height,l.height),this.set(vE,s);var u=r.get("type");u==="circle"?(l.width=s.r*2,l.height=s.r*2):(l.width=s.width,l.height=s.height),l.minX=l.centerX-l.width/2,l.minY=l.centerY-l.height/2,l.maxX=l.centerX+l.width/2,l.maxY=l.centerY+l.height/2}else l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,l.centerX=(l.minX+l.maxX)/2,l.centerY=(l.minY+l.maxY)/2;return l.x=l.minX,l.y=l.minY,(l.x!==a||l.y!==o)&&this.set(bW,null),l}},e.prototype.getChildren=function(){var r=this;return{nodes:r.getNodes(),combos:r.getCombos()}},e.prototype.getNodes=function(){var r=this;return r.get("nodes")},e.prototype.getCombos=function(){var r=this;return r.get("combos")},e.prototype.addChild=function(r){var n=this,i=r.getType();switch(i){case"node":n.addNode(r);break;case"combo":n.addCombo(r);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(r){var n=this;return n.get("combos").push(r),!0},e.prototype.addNode=function(r){var n=this;return n.get("nodes").push(r),!0},e.prototype.removeChild=function(r){var n=this,i=r.getType();switch(i){case"node":n.removeNode(r);break;case"combo":n.removeCombo(r);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(r){if(r){var n=this.getCombos(),i=n.indexOf(r);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.removeNode=function(r){if(r){var n=this.getNodes(),i=n.indexOf(r);return i>-1?(n.splice(i,1),!0):!1}},e.prototype.getUpdateType=function(r){},e.prototype.getBBox=function(){this.set(wW,null);var r=this.calculateCanvasBBox();return r},e.prototype.clearCache=function(){this.set(yW,null),this.set(wW,null),this.set(bW,null)},e.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),n=this.get("group");r&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(vE,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(V8),gE="node",mE="edge",xW="vedge",h1="combo",UGe="default",SW="Mapper",Hc="stateStyles",WGe=function(){function t(e){var r=this;this.edgeToBeUpdateMap={},this.throttleRefresh=ww(function(n){var i=r.graph;if(!(!i||i.get("destroyed"))){var a=r.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var l=s.edge;if(!(!l||l.destroyed)){var u=l.getSource(),c=l.getTarget();!u||u.destroyed||!c||c.destroyed||l.refresh(s.updateType)}}),r.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return t.prototype.addItem=function(e,r){var n=this.graph,i=e===xW?mE:e,a=n.get("".concat(i,"Group"))||n.get("group"),o=Lm(i),s=null,l=n.get(i+Lm(Hc))||{},u=n.get(UGe+o);r[Hc]&&(l=r[Hc]),u&&Te(u,function(S,E){sa(S)&&!Xt(S)?r[E]=gn({},S,r[E]):Xt(S)?r[E]=r[E]||Dr(u[E]):r[E]=r[E]||u[E]});var c=n.get(i+SW);if(c){var f=c(r);f[Hc]&&(l=f[Hc],delete f[Hc]),Te(f,function(S,E){sa(S)&&!Xt(S)?r[E]=gn({},r[E],S):r[E]=f[E]||r[E]})}if(n.emit("beforeadditem",{type:e,model:r}),e===mE||e===xW){var h=void 0,d=void 0;if(h=r.source,d=r.target,h&&et(h)&&(h=n.findById(h)),d&&et(d)&&(d=n.findById(d)),!h||!d){console.warn("The source or target node of edge ".concat(r.id," does not exist!"));return}h.getType&&h.getType()==="combo"&&(r.isComboEdge=!0),d.getType&&d.getType()==="combo"&&(r.isComboEdge=!0),s=new Tle({model:r,source:h,target:d,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(e===gE)s=new V8({model:r,styles:l,group:a.addGroup()});else if(e===h1){var p=r.children,v=H_(p,n),g=void 0,m=void 0;if(isNaN(v.x)?isNaN(r.x)&&(g=Math.random()*100):g=v.x,isNaN(v.y)?isNaN(r.y)&&(m=Math.random()*100):m=v.y,isNaN(r.x)||isNaN(r.y))r.x=g,r.y=m;else{var y=r.x-g,w=r.y-m;this.updateComboSucceeds(r.id,y,w,p)}var b=a.addGroup();b.setZIndex(r.depth),s=new Ole({model:r,styles:l,animate:n.get("animate"),bbox:r.collapsed?H_([],n):v,group:b}),!r.collapsed&&s.getKeyShape().get("type")==="circle"&&(v.width=Math.hypot(v.height,v.width),v.height=v.width,s.set("bbox",v),s.refresh());var x=s.getModel();(p||[]).forEach(function(S){var E=n.findById(S.id);s.addChild(E),S.depth=x.depth+2})}if(s)return s.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:r}),s},t.prototype.updateItem=function(e,r){var n=this,i,a,o=this.graph;if(et(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var l=o.get(s+SW),u=e.getModel(),c=u.x,f=u.y,h=e.getUpdateType(r);if(l){var d=gn({},u,r),p=l(d),v=gn({},u,p,r);p[Hc]&&(e.set("styles",v[Hc]),delete v[Hc]),Te(v,function(C,M){r[M]=C})}else Te(r,function(C,M){u[M]&&sa(C)&&!Xt(C)&&(r[M]=j(j({},u[M]),r[M]))});if(o.emit("beforeupdateitem",{item:e,cfg:r}),s===mE){if(r.source){var g=r.source;et(g)&&(g=o.findById(g)),e.setSource(g)}if(r.target){var m=r.target;et(m)&&(m=o.findById(m)),e.setTarget(m)}e.update(r)}else if(s===gE){e.update(r,h);var y=e.getEdges();h==="move"?Te(y,function(C){n.edgeToBeUpdateMap[C.getID()]={edge:C,updateType:h},n.throttleRefresh()}):h!=null&&h.includes("bbox")&&Te(y,function(C){C.refresh(h)})}else if(s===h1){if(e.update(r,h),!isNaN(r.x)||!isNaN(r.y)){var w=r.x-c||0,b=r.y-f||0;this.updateComboSucceeds(u.id,w,b)}var x=e.getEdges(),S=(h==null?void 0:h.includes("bbox"))||h==="move";if(S&&s===h1){var E=e.get("shapeFactory"),_=u.type||"circle",k=u.animate===void 0||r.animate===void 0?(a=(i=E[_])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||r.animate;k?setTimeout(function(){if(!(!e||e.destroyed)){var C=e.getKeyShape();!C||C.destroyed||Te(x,function(M){M&&!M.destroyed&&M.refresh()})}},201):Te(x,function(C){C.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:r})}},t.prototype.updateCombo=function(e,r,n){var i=this,a,o,s=this.graph;if(et(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var l=e.getModel(),u=H_(r,s,e),c=u.x,f=u.y;e.set("bbox",u);var h=c,d=f;n?(h=isNaN(l.x)?c:l.x,d=isNaN(l.y)?f:l.y):(h=isNaN(c)?l.x:c,d=isNaN(f)?l.y:f),e.update({x:h,y:d});var p=e.get("shapeFactory"),v=l.type||"circle",g=l.animate===void 0?(o=(a=p[v])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:l.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var m=e.getKeyShape();!m||m.destroyed||(e.getShapeCfg(l),i.updateComboEdges(e))}},201):this.updateComboEdges(e)}},t.prototype.updateComboEdges=function(e){for(var r,n,i=e.getEdges()||[],a=0;a<i.length;a++){var o=i[a];!(o!=null&&o.destroyed)&&!(!((r=o==null?void 0:o.getSource())===null||r===void 0)&&r.destroyed)&&!(!((n=o==null?void 0:o.getTarget())===null||n===void 0)&&n.destroyed)&&o.refresh()}},t.prototype.collapseCombo=function(e,r){r===void 0&&(r=!0);var n=this.graph;et(e)&&(e=n.findById(e));var i=e.getChildren();i.nodes.forEach(function(a){n.hideItem(a,r)}),i.combos.forEach(function(a){n.hideItem(a,r)})},t.prototype.updateComboSucceeds=function(e,r,n,i){var a=this;i===void 0&&(i=[]);var o=this.graph;if(!(!r&&!n)){var s=i;if(!(s!=null&&s.length)){var l=o.get("comboTrees");l==null||l.forEach(function(u){za(u,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(u){var c=o.findById(u.id);if(c){var f=c.getModel();a.updateItem(u.id,{x:(f.x||0)+r,y:(f.y||0)+n})}})}},t.prototype.expandCombo=function(e,r){r===void 0&&(r=!0);var n=this.graph;et(e)&&(e=n.findById(e));var i=e.getChildren(),a=new Set;i.nodes.forEach(function(o){n.showItem(o,r),o.getEdges().forEach(function(s){return a.add(s)})}),i.combos.forEach(function(o){o.getModel().collapsed?o.show():n.showItem(o,r),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},t.prototype.removeItem=function(e){var r=this,n=this.graph;if(et(e)&&(e=n.findById(e)),!(!e||e.destroyed)){var i=Dr(e.getModel()),a="";e.getType&&(a=e.getType()),n.emit("beforeremoveitem",{item:i,type:a});var o=n.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===mE){var l=n.get("v".concat(a,"s")),u=l.indexOf(e);u>-1&&l.splice(u,1)}var c=e.get("id"),f=n.get("itemMap");delete f[c];var h=n.get("comboTrees"),d=e.get("id");if(a===gE){var p=e.getModel().comboId;if(h&&p){var v=h,g=!1;h.forEach(function(S){g||za(S,function(E){if(E.id===d&&v){var _=v.indexOf(E);return v.splice(_,1),g=!0,!1}return v=E.children,!0})})}for(var m=e.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);p&&n.updateCombo(p)}else if(a===h1){var w=e.getModel().parentId,b,x=!1;(h||[]).forEach(function(E){x||za(E,function(_){return _.id===d?(b=_,x=!0,!1):!0})}),b.removed=!0,b&&b.children&&b.children.forEach(function(E){r.removeItem(E.id)});for(var m=e.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);w&&n.updateCombo(w)}e.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},t.prototype.setItemState=function(e,r,n){var i=this.graph,a=r;et(n)&&(a="".concat(r,":").concat(n)),!(e.hasState(a)===n&&n||et(n)&&e.hasState(a))&&(i.emit("beforeitemstatechange",{item:e,state:a,enabled:n}),e.setState(r,n),i.autoPaint(),i.emit("afteritemstatechange",{item:e,state:a,enabled:n}))},t.prototype.priorityState=function(e,r){var n=this.graph,i=e;et(e)&&(i=n.findById(e)),this.setItemState(i,r,!1),this.setItemState(i,r,!0)},t.prototype.clearItemStates=function(e,r){var n=this.graph;et(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:r}),e.clearStates(r),n.emit("afteritemstatesclear",{item:e,states:r})},t.prototype.refreshItem=function(e){var r=this.graph;et(e)&&(e=r.findById(e)),r.emit("beforeitemrefresh",{item:e}),e.refresh(),r.emit("afteritemrefresh",{item:e})},t.prototype.addCombos=function(e,r){var n=this,i=this.graph;(e||[]).forEach(function(o){Fu(o,function(s){var l;return r.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},t.prototype.changeItemVisibility=function(e,r){var n=this,i=this.graph;if(et(e)&&(e=i.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:e,visible:r}),e.changeVisibility(r),e.getType&&e.getType()===gE){var a=e.getEdges();Te(a,function(c){r&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,r)})}else if(e.getType&&e.getType()===h1){var o=i.get("comboTrees"),s=e.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||za(f,function(h){return h.id===s?(l=h.children,u=!0,!1):!0})}),l&&(!r||r&&!e.getModel().collapsed)&&l.forEach(function(f){var h=i.findById(f.id);n.changeItemVisibility(h,r)});var a=e.getEdges();Te(a,function(f){r&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,r)})}return i.emit("afteritemvisibilitychange",{item:e,visible:r}),e},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),VGe=function(){function t(e){this.graph=e,this.destroyed=!1}return t.prototype.updateState=function(e,r,n){var i=this.graph.get("states"),a=r;et(n)&&(a="".concat(r,":").concat(n)),i[a]||(i[a]=[]),n?i[a].push(e):i[a]=i[a].filter(function(o){return o!==e}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:i})},t.prototype.updateStates=function(e,r,n){var i=this.graph.get("states"),a=et(r)?[r]:r;a.forEach(function(o){var s=o;i[s]||(i[s]=[]),et(n)&&(s="".concat(o,":").concat(n)),n?i[s].push(e):i[s]=i[s].filter(function(l){return l!==e})}),this.graph.set("states",i),this.graph.emit("graphstatechange",{states:r})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),HGe=function(e,r){return!e||!r?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=r[i];return a===0&&(a="0"),a||""})},Ile=function(e){var r=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,i=e;n<i.length;n++){var a=i[n],o=a.x,s=a.y;r.push(o),r.push(s)}var l=mle(r);return l.unshift(["M",e[0].x,e[0].y]),l},ik=function(e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*e.x+n*r.x,y:(1-n)*e.y+n*r.y},o=[0,0];pd(o,[r.x-e.x,r.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},XGe=function(e,r){var n=e.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=HGe(a,s)}return r&&(i+="Z"),i},ZL=function(e){var r=[];return e.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)r.push([n[a],n[a+1]]);else{var o=n.length;r.push([n[o-2],n[o-1]])}}),r},JL=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var r=e[0],n=e[1],i=e[e.length-1],a=e[e.length-2];e.unshift(i),e.unshift(a),e.push(r),e.push(n);for(var o=[],s=1;s<e.length-2;s+=1){var l=e[s-1].x,u=e[s-1].y,c=e[s].x,f=e[s].y,h=e[s+1].x,d=e[s+1].y,p=s!==e.length-2?e[s+2].x:h,v=s!==e.length-2?e[s+2].y:d,g=c+(h-l)/6,m=f+(d-u)/6,y=h-(p-c)/6,w=d-(v-f)/6;o.push(["C",g,m,y,w,h,d])}return o.unshift(["M",i.x,i.y]),o},EW=function(e,r){return Ga([0,0],pd([0,0],e),r)},_W=function(e,r){var n=[e[1]-r[1],r[0]-e[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},CW=function(e,r){return[r[0]-e[0],r[1]-e[1]]};function e4(t,e){var r=function(f){var h=[f[0][0],f[0][1]-e],d=[f[0][0],f[0][1]+e];return"M ".concat(h," A ").concat(e,",").concat(e,",0,0,0,").concat(d," A ").concat(e,",").concat(e,",0,0,0,").concat(h)},n=function(f){var h=Ga([0,0],_W(f[0],f[1]),e),d=Ga([0,0],h,-1),p=na([0,0],f[0],h),v=na([0,0],f[1],h),g=na([0,0],f[1],d),m=na([0,0],f[0],d);return"M ".concat(p," L ").concat(v," A ").concat([e,e,"0,0,0",g].join(",")," L ").concat(m," A ").concat([e,e,"0,0,0",p].join(","))};if(!t||t.length<1)return"";if(t.length===1)return r(t);if(t.length===2)return n(t);for(var i=new Array(t.length),a=0;a<i.length;++a){var o=a===0?t[t.length-1]:t[a-1],s=t[a],l=Ga([0,0],_W(o,s),e);i[a]=[na([0,0],o,l),na([0,0],s,l)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return i=i.map(function(c,f){var h="";return f===0&&(h="M ".concat(i[i.length-1][1]," ")),h+="".concat(u+c[0]," L ").concat(c[1]),h}),i.join(" ")}function Dle(t,e){var r=t.length,n=function(c){var f=[c[0][0],c[0][1]-e],h=[c[0][0],c[0][1]+e];return"M ".concat(f," A ").concat([e,e,"0,0,0",h].join(",")," A ").concat([e,e,"0,0,0",f].join(","))},i=function(c){var f=CW(c[0],c[1]),h=EW(f,e),d=na([0,0],c[0],Ga([0,0],h,-1)),p=na([0,0],c[1],h),v=1.2*e,g=EW(pd([0,0],f),v),m=Ga([0,0],g,-1),y=na([0,0],d,m),w=na([0,0],p,m),b=na([0,0],d,g);return"M ".concat(d," C ").concat([y,w,p].join(",")," S ").concat([b,d].join(",")," Z")};if(!t||r<1)return"";if(r===1)return n(t);if(r===2)return i(t);for(var a=t.map(function(u,c){var f=t[(c+1)%r];return{p:u,v:pd([0,0],CW(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:r-1,l=pd([0,0],na([0,0],a[s].v,Ga([0,0],a[o].v,-1)));a[o].p=na([0,0],a[o].p,Ga([0,0],l,e))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var YGe=function(e,r){for(var n=[],i=0;i<5;i++){var a=Math.cos((18+72*i)/180*Math.PI)*e,o=Math.sin((18+72*i)/180*Math.PI)*e,s=Math.cos((54+72*i)/180*Math.PI)*r,l=Math.sin((54+72*i)/180*Math.PI)*r;i===0?n.push(["M",a,-o]):n.push(["L",a,-o]),n.push(["L",s,-l])}return n.push(["Z"]),n};const qGe=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:JL,getControlPoint:ik,getSpline:Ile,getStarPath:YGe,paddedHull:Dle,pathToPoints:ZL,pointsToPolygon:XGe,roundedHull:e4},Symbol.toStringTag,{value:"Module"}));var kW=function(e,r,n){return(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y)},MW=function(e){var r=e.map(function(f){return{x:f.getModel().x,y:f.getModel().y}});r.sort(function(f,h){return f.x===h.x?f.y-h.y:f.x-h.x});for(var n={},i=r.length-1;i>=0;i--){var a=r[i],o=a.x,s=a.y;n["".concat(o,"-").concat(s)]&&r.splice(i,1),n["".concat(o,"-").concat(s)]=!0}if(r.length===1)return r;for(var l=[],i=0;i<r.length;i++){for(;l.length>=2&&kW(l[l.length-2],l[l.length-1],r[i])<=0;)l.pop();l.push(r[i])}for(var u=[],i=r.length-1;i>=0;i--){for(;u.length>=2&&kW(u[u.length-2],u[u.length-1],r[i])<=0;)u.pop();u.push(r[i])}u.pop(),l.pop();var c=l.concat(u);return c},KGe={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function QGe(t,e,r){var n=!1,i=function(l,u){return e.cells[l+u*e.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=r&&(c+=1),i(l,u-1)>r&&(c+=2),i(l-1,u)>r&&(c+=4),i(l,u)>r&&(c+=8),c},o=function(l,u){for(var c=l,f=u,h,d,p=0;p<e.width*e.height;p++){if(h=c,d=f,t.findIndex(function(g){return g.x===c&&g.y===f})>-1){if(!(t[0].x!==c||t[0].y!==f))return!0}else t.push({x:c,y:f});var v=a(c,f);switch(v){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:h===0&&(d===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:h===1&&(d===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: ".concat(v)),!0}}};this.march=function(){for(var s=0;s<e.width&&!n;s+=1)for(var l=0;l<e.height&&!n;l+=1)i(s,l)>r&&a(s,l)!==15&&(n=o(s,l));return n}}var ZGe=function(e,r,n){var i=Math.ceil(e/n),a=Math.ceil(r/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},JGe=function(e,r,n){var i=null,a=Number.POSITIVE_INFINITY;return r.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=QC(s,l),c=new Av(s.x,s.y,l.x,l.y),f=n.reduce(function(h,d){return L8(d,c)>0?h+1:h},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},Ple=function(e,r){var n=Number.POSITIVE_INFINITY,i=null;return e.forEach(function(a){var o=L8(a,r);o>=0&&o<n&&(i=a,n=o)}),i},eUe=function(e,r,n,i){var a=[],o=[];o.push(e);for(var s=!0,l=0,u=function(d,p){var v=!1;return p.forEach(function(g){v||(kL(d,{x:g.x1,y:g.y1})||kL(d,{x:g.x2,y:g.y2}))&&(v=!0)}),v},c=function(d,p){for(var v=0,g=p;v<g.length;v++){var m=g[v],y=m.getBBox(),w=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(Sw(w,d.x,d.y))return!0}return!1};s&&l<n;){s=!1;for(var f=function(){var d=o.pop(),p=Ple(r,d);if(p){var v=bse(p,d),g=v[0],m=v[1];if(m===2){var y=function(b){for(var x=i,S=AW(p,x,g,b),E=u(S,o)||u(S,a),_=c(S,r);!E&&_&&x>=1;)x/=1.5,S=AW(p,x,g,b),E=u(S,o)||u(S,a),_=c(S,r);S&&!E&&(!b||!_)&&(o.push(new Av(d.x1,d.y1,S.x,S.y)),o.push(new Av(S.x,S.y,d.x2,d.y2)),s=!0)};y(!0),s||y(!1)}}s||a.push(d),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function tUe(t,e,r,n,i){var a=JGe(t,r,e);if(a===null)return[];var o=function(f){for(var h=[];f.length>0;){var d=f.pop();if(f.length===0){h.push(d);break}var p=f.pop(),v=new Av(d.x1,d.y1,p.x2,p.y2),g=Ple(e,v);g?(h.push(d),f.push(p)):f.push(v)}return h},s=new Av(t.getModel().x,t.getModel().y,a.getModel().x,a.getModel().y),l=eUe(s,e,n,i),u=o(l);return u}var rUe=function(e,r,n){var i=Object.assign(KGe,n),a=xse(e.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));e=e.sort(function(y,w){return QC({x:y.getModel().x,y:y.getModel().y},a)-QC({x:w.getModel().x,y:w.getModel().y},a)});var o=[],s=[];e.forEach(function(y){var w=tUe(y,r,o,i.maxRoutingIterations,i.morphBuffer);w.forEach(function(b){s.push(b)}),o.push(y)});for(var l=nUe(e,s,i.nodeR0),u=ZGe(l.width,l.height,i.pixelGroupSize),c=[],f=[],h=0;h<i.maxMarchingIterations;h++)if(iUe(e,r,s,l,u,i),c=[],f=[],!!new QGe(c,u,i.threshold).march()){var d=c.map(function(y){return{x:Math.round(y.x*i.pixelGroupSize+l.minX),y:Math.round(y.y*i.pixelGroupSize+l.minY)}});if(d){var p=d.length;if(i.skip>1)for(p=Math.floor(d.length/i.skip);p<3&&i.skip>1;)i.skip-=1,p=Math.floor(d.length/i.skip);for(var v=0,g=0;g<p;g+=1,v+=i.skip)f.push({x:d[v].x,y:d[v].y})}var m=function(){for(var w=0,b=e;w<b.length;w++){var x=b[w],S=f.map(function(E){return[E.x,E.y]});if(!Sw(S,x.getBBox().centerX,x.getBBox().centerY))return!1}return!0};if(f&&m())return f;if(i.threshold*=.9,h<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&r.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function nUe(t,e,r){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach(function(l){i.push(l.getBBox())}),e.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-r,n.minY=(s.minY<n.minY?s.minY:n.minY)-r,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+r,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+r}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function iUe(t,e,r,n,i,a){function o(d,p){var v=Math.floor((d-p)/a.pixelGroupSize);return v<0?0:v}function s(d,p){return d*a.pixelGroupSize+p}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(p,v){var g=Math.min(o(p.minX,v+n.minX),i.width),m=Math.min(o(p.minY,v+n.minY),i.height),y=Math.min(o(p.maxX,-v+n.minX),i.width),w=Math.min(o(p.maxY,-v+n.minY),i.height);return[g,m,y,w]},f=function(p,v){for(var g=p.getBBox(),m=c(g,a.nodeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var E=y;E<b;E+=1)if(!(v<0&&i[E+S*i.width]<=0)){var _=s(E,n.minX),k=s(S,n.minY),C=Ese({x:_,y:k},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(C<Math.pow(a.nodeR1,2)){var M=Math.sqrt(C)-a.nodeR1;i.cells[E+S*i.width]+=v*M*M}}},h=function(p,v){for(var g=p.getBBox(),m=c(g,a.edgeR1),y=m[0],w=m[1],b=m[2],x=m[3],S=w;S<x;S+=1)for(var E=y;E<b;E+=1)if(!(v<0&&i.cells[E+S*i.width]<=0)){var _=s(E,n.minX),k=s(S,n.minY),C=Sse({x:_,y:k},p);if(C<Math.pow(a.edgeR1,2)){var M=Math.sqrt(C)-a.edgeR1;i.cells[E+S*i.width]+=v*M*M}}};a.nodeInfluenceFactor&&t.forEach(function(d){f(d,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&r.forEach(function(d){h(d,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&e.forEach(function(d){f(d,a.negativeNodeInfluenceFactor/l)})}function AW(t,e,r,n){var i=t.getBBox(),a=r[0],o=r[1],s=r[2],l=r[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function f(p,v){return i.width*((p.y-i.minY+(v.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var h=f(o,l);return h<c*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var d=f(a,s);return d<c*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var Lle=function(){function t(e,r){this.cfg=gn(this.getDefaultCfg(),r),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return et(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return et(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(e,r){var n,i,a;switch(this.type){case"round-convex":n=MW(e),a=e4(n.map(function(o){return[o.x,o.y]}),this.padding),i=XL(a);break;case"smooth-convex":n=MW(e),n.length===2?(a=e4(n.map(function(o){return[o.x,o.y]}),this.padding),i=XL(a)):n.length>2&&(a=Dle(n.map(function(o){return[o.x,o.y]}),this.padding),i=JL(a));break;case"bubble":n=rUe(e,r,this.cfg.bubbleCfg),i=n.length>=2&&JL(n);break}return i},t.prototype.render=function(){this.group.addShape("path",{attrs:j({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(e){if(e){et(e)&&(e=this.graph.findById(e)),this.members.push(e);var r=this.nonMembers.indexOf(e);return r>-1&&this.nonMembers.splice(r,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(e){if(e){et(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var r=this.members.indexOf(e);return r>-1&&this.members.splice(r,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(e){if(e){et(e)&&(e=this.graph.findById(e));var r=this.members.indexOf(e);return r>-1?(this.members.splice(r,1),this.updateData(this.members,this.nonMembers),!0):!1}},t.prototype.removeNonMember=function(e){if(e){et(e)&&(e=this.graph.findById(e));var r=this.nonMembers.indexOf(e);return r>-1?(this.nonMembers.splice(r,1),this.updateData(this.members,this.nonMembers),!0):!1}},t.prototype.updateData=function(e,r){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(i){return et(i)?n.graph.findById(i):i})),r&&(this.nonMembers=r.map(function(i){return et(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(e){var r=this.group.findById(this.id);r.attr(j({},e))},t.prototype.updateCfg=function(e){var r=this;this.cfg=gn(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return et(n)?r.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return et(n)?r.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(e){var r=this,n;et(e)?n=this.graph.findById(e):n=e;var i,a=n.getKeyShape();if(n.get("type")==="path")i=ZL(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=r.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),wse(i,ZL(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),d1=dl,aUe="node",Rle=function(t){cr(e,t);function e(r){var n=t.call(this)||this;return n.sortCombos=Ob(function(){var i=n.get("comboSorted");if(!(!n||n.destroyed||i)){n.set("comboSorted",!0);var a=[],o={},s=n.get("comboTrees");(s||[]).forEach(function(u){za(u,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var l=n.getEdges().concat(n.get("vedges"));(l||[]).forEach(function(u){var c=u.getModel(),f=o[c.source]||0,h=o[c.target]||0,d=Math.max(f,h);a[d]?a[d].push(c.id):a[d]=[c.id]}),a.forEach(function(u){if(!(!u||!u.length))for(var c=u.length-1;c>=0;c--){var f=n.findById(u[c]);f&&f.toFront()}})}},500,!1),n.cfg=gn(n.getDefaultCfg(),r),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new x0(n.cfg.maxStep),n.redoStack=new x0(n.cfg.maxStep)),n}return e.prototype.init=function(){this.initCanvas();var r=new NGe(this),n=new J$e(this),i=new WGe(this),a=new VGe(this);this.set({viewController:r,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var r=this.get("canvas");if(r){var n=r.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=r.addGroup({id:"".concat(a,"-root"),className:jt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:jt.edgeContainerClassName}),l=o.addGroup({id:"".concat(a,"-node"),className:jt.nodeContainerClassName}),u=o.addGroup({id:"".concat(a,"-combo"),className:jt.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:jt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(r,n){return ia(r)?this.cfg=j(j({},this.cfg),r):this.cfg[r]=n,r==="enabledStack"&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new x0(this.cfg.maxStep),this.redoStack=new x0(this.cfg.maxStep)),this},e.prototype.get=function(r){var n;return(n=this.cfg)===null||n===void 0?void 0:n[r]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(r){return this.set("minZoom",r)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(r){return this.set("maxZoom",r)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(r,n){et(r)&&(r=this.findById(r));var i=this.get("itemController");n||(n=r.get("states")),i.clearItemStates(r,n);var a=this.get("stateController");a.updateStates(r,n,!1)},e.prototype.node=function(r){typeof r=="function"&&this.set("nodeMapper",r)},e.prototype.edge=function(r){typeof r=="function"&&this.set("edgeMapper",r)},e.prototype.combo=function(r){typeof r=="function"&&this.set("comboMapper",r)},e.prototype.findById=function(r){return this.get("itemMap")[r]},e.prototype.find=function(r,n){var i,a=this.get("".concat(r,"s"));return Te(a,function(o,s){if(n(o,s))return i=o,i}),i},e.prototype.findAll=function(r,n){var i=[];return Te(this.get("".concat(r,"s")),function(a,o){n(a,o)&&i.push(a)}),i},e.prototype.findAllByState=function(r,n,i){return i?this.findAll(r,function(a){return a.hasState(n)&&i(a)}):this.findAll(r,function(a){return a.hasState(n)})},e.prototype.translate=function(r,n,i,a){var o=this,s=this.get("group"),l=Dr(s.getMatrix());if(l||(l=[1,0,0,0,1,0,0,0,1]),i){var u=Ew({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});CL(s,{x:s.getCanvasBBox().x+r,y:s.getCanvasBBox().y+n},i,u||{duration:500,easing:"easeCubic"})}else l=d1(l,[["t",r,n]]),s.setMatrix(l),this.emit("viewportchange",{action:"translate",matrix:l}),this.autoPaint()},e.prototype.moveTo=function(r,n,i,a){var o=this.get("group");CL(o,{x:r,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(r,n,i,a){r&&this.set("fitViewPadding",r);var o=this.get("viewController");n?o.fitViewByRules(n,i,a):o.fitView(i,a),this.autoPaint()},e.prototype.fitCenter=function(r,n){var i=this.get("viewController");i.fitCenter(r,n),this.autoPaint()},e.prototype.addBehaviors=function(r,n){var i=this.get("modeController");return i.manipulateBehaviors(r,n,!0),this},e.prototype.removeBehaviors=function(r,n){var i=this.get("modeController");return i.manipulateBehaviors(r,n,!1),this},e.prototype.updateBehavior=function(r,n,i){var a=this.get("modeController");return a.updateBehavior(r,n,i),this},e.prototype.zoom=function(r,n,i,a){var o=this,s=this.get("group"),l=Dr(s.getMatrix())||[1,0,0,0,1,0,0,0,1],u=this.get("minZoom"),c=this.get("maxZoom"),f=this.getZoom()||1,h=f*r,d=r,p=!1;if(u&&h<u?(d=u/f,p=!0):c&&h>c&&(d=c/f,p=!0),n?l=d1(l,[["t",-n.x,-n.y],["s",d,d],["t",n.x,n.y]]):l=d1(l,[["s",d,d]]),i){var v=Dr(s.getMatrix());v||(v=[1,0,0,0,1,0,0,0,1]);var g=v[0],m=g*d,y=Ew({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(w){if(w===1)v=l;else{var b=R8(g,m,w)/v[0];n?v=d1(v,[["t",-n.x,-n.y],["s",b,b],["t",n.x,n.y]]):v=d1(v,[["s",b,b]])}return{matrix:v}},y)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!p},e.prototype.zoomTo=function(r,n,i,a){var o=r/this.getZoom();return this.zoom(o,n,i,a)},e.prototype.focusItem=function(r,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(r,o,s),this.autoPaint()},e.prototype.focusItems=function(r,n,i,a){var o=this.get("viewController");o.focusItems(r,n,i,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(r,n){var i=this.get("viewController");return i.getPointByClient(r,n)},e.prototype.getClientByPoint=function(r,n){var i=this.get("viewController");return i.getClientByPoint(r,n)},e.prototype.getPointByCanvas=function(r,n){var i=this.get("viewController");return i.getPointByCanvas(r,n)},e.prototype.getCanvasByPoint=function(r,n){var i=this.get("viewController");return i.getCanvasByPoint(r,n)},e.prototype.getGraphCenterPoint=function(){var r=this.get("group").getCanvasBBox();return{x:(r.minX+r.maxX)/2,y:(r.minY+r.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(r,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(r,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.hideItem=function(r,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(r,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},e.prototype.refreshItem=function(r){var n=this.get("itemController");n.refreshItem(r)},e.prototype.setAutoPaint=function(r){var n=this;n.set("autoPaint",r);var i=n.get("canvas");i.set("autoDraw",r)},e.prototype.remove=function(r,n){n===void 0&&(n=!0),this.removeItem(r,n)},e.prototype.removeItem=function(r,n){n===void 0&&(n=!0);var i=r;if(et(r)&&(i=this.findById(r)),!i&&et(r))console.warn("The item ".concat(r," to be removed does not exist!"));else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=j(j({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(j(j({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i,void 0,!1)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var h=IL(this.get("comboTrees"));this.set("comboTrees",h)}}},e.prototype.innerAddItem=function(r,n,i){if(!Z$e(r,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(r==="combo"){var s=this.get("itemMap"),l=!1;if(o.forEach(function(p){l||Fu(p,function(v){if(n.parentId===v.id){l=!0;var g=j({id:n.id,depth:v.depth+2},n);v.children?v.children.push(g):v.children=[g],n.depth=g.depth,a=i.addItem(r,n)}var m=s[v.id];return l&&m&&m.getType&&m.getType()==="combo"&&i.updateCombo(m,v.children),!0})}),!l){var u=j({id:n.id,depth:0},n);n.depth=u.depth,o.push(u),a=i.addItem(r,n)}this.set("comboTrees",o),n.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(r==="node"&&et(n.comboId)&&o){var c=this.findById(n.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=i.addItem(r,n);var f=this.get("itemMap"),h=!1,d=!1;o.forEach(function(p){d||h||Fu(p,function(v){if(v.id===n.id)return d=!0,!1;if(n.comboId===v.id&&!d){h=!0;var g=Dr(n);g.itemType="node",v.children?v.children.push(g):v.children=[g],g.depth=v.depth+1}return h&&f[v.id].getType&&f[v.id].getType()==="combo"&&i.updateCombo(f[v.id],v.children),!0})})}else a=i.addItem(r,n);if(r==="node"&&n.comboId||r==="combo"&&n.parentId){var c=this.findById(n.comboId||n.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(r,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),l=this.innerAddItem(r,n,s);if(l===!1||l===!0)return l;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var c=j(j({},l.getModel()),{itemType:r}),f={};switch(r){case"node":f.nodes=[c];break;case"edge":f.edges=[c];break;case"combo":f.combos=[c];break}this.pushStack("add",{before:{},after:f})}return l},e.prototype.addItems=function(r,n,i){r===void 0&&(r=[]),n===void 0&&(n=!0),i===void 0&&(i=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!i);for(var o=this.get("itemController"),s=[],l=0;l<r.length;l++){var u=r[l];u.type!=="edge"&&u.type!=="vedge"?s.push(this.innerAddItem(u.type,u.model,o)):s.push(void 0)}for(var l=0;l<r.length;l++){var u=r[l];(u.type==="edge"||u.type==="vedge")&&(s[l]=this.innerAddItem(u.type,u.model,o))}if(i){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){for(var f={nodes:[],edges:[],combos:[]},l=0;l<r.length;l++){var h=r[l].type,d=s[l];if(d&&d!==!0){var p=j(j({},d.getModel()),{itemType:h});switch(h){case"node":f.nodes.push(p);break;case"edge":f.edges.push(p);break;case"combo":f.combos.push(p);break}}}this.pushStack("addItems",{before:{},after:f})}return s},e.prototype.add=function(r,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(r,n,i,a)},e.prototype.updateItem=function(r,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;et(r)?s=this.findById(r):s=r;var l=i&&this.get("enabledStack"),u;l&&(u=Dr(s.getModel()));var c="";s.getType&&(c=s.getType());var f=Ro([],s.getStates(),!0);if(c==="combo"&&Te(f,function(v){return a.setItemState(s,v,!1)}),o.updateItem(s,n),c==="combo"&&Te(f,function(v){return a.setItemState(s,v,!0)}),l){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},p=j({id:u.id},n);switch(c){case"node":h.nodes.push(u),d.nodes.push(p);break;case"edge":h.edges.push(u),d.edges.push(p);break;case"combo":h.combos.push(u),d.combos.push(p);break}this.pushStack("update",{before:h,after:d})}},e.prototype.update=function(r,n,i){i===void 0&&(i=!0),this.updateItem(r,n,i)},e.prototype.setItemState=function(r,n,i){et(r)&&(r=this.findById(r));var a=this.get("itemController");a.setItemState(r,n,i);var o=this.get("stateController");o.updateState(r,n,i)},e.prototype.priorityState=function(r,n){var i=this.get("itemController");i.priorityState(r,n)},e.prototype.data=function(r){wU(r),this.set("data",r)},e.prototype.render=function(){var r=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),r.addItems(a.map(function(g){return{type:"node",model:g}}),!1,!1),(u==null?void 0:u.length)!==0){var c=OL(u,a);this.set("comboTrees",c),r.addCombos(u)}r.addItems(s.map(function(g){return{type:"edge",model:g}}),!1,!1);var f=r.get("animate");(r.get("fitView")||r.get("fitCenter"))&&r.set("animate",!1);var h=r.get("layoutController");if(h){if(h.layout(d),this.destroyed)return}else d();function d(){(r.get("comboTrees")||[]).forEach(function(g){Fu(g,function(m){var y=r.findById(m.id);return y.getType()==="combo"&&m.collapsed&&(r.collapseCombo(m.id,!1),r.updateCombo(y)),!0})}),r.get("fitView")?r.fitView():r.get("fitCenter")&&r.fitCenter(),r.autoPaint(),r.emit("afterrender"),(r.get("fitView")||r.get("fitCenter"))&&r.set("animate",f),setTimeout(function(){var g;(g=r.getCombos())===null||g===void 0||g.forEach(function(m){m.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var p=this.getNodes();p.forEach(function(g){g.toFront()})}else{var v=this.getEdges();v.forEach(function(g){g.toBack()})}},e.prototype.read=function(r){this.data(r),this.render()},e.prototype.diffItems=function(r,n,i){var a=this,o,s=this.get("itemMap");Te(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&r===aUe){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(r,l,!1);o&&n["".concat(r,"s")].push(o)})},e.prototype.changeData=function(r,n){var i=this,a;n===void 0&&(n=!0);var o=this,s=r||o.get("data");if(!wU(s))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(b){return o.clearItemStates(b)}),this.getEdges().map(function(b){return o.clearItemStates(b)});var l=this.get("canvas"),u=l.get("localRefresh");l.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),f={nodes:[],edges:[]},h=s.combos;if(h){var d=OL(h,s.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",f,s.nodes),Te(c,function(b,x){c[x].getModel().depth=0,!(b.getType&&b.getType()==="edge")&&(b.getType&&b.getType()==="combo"?(delete c[x],b.destroy()):f.nodes.indexOf(b)<0&&(delete c[x],o.remove(b,!1)))});for(var p=this.getCombos(),v=p.length,g=v-1;g>=0;g--)p[g].destroyed&&p.splice(g,1);h&&(o.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,s.edges),Te(c,function(b,x){b.getType&&(b.getType()==="node"||b.getType()==="combo")||f.edges.indexOf(b)<0&&(delete c[x],o.remove(b,!1))}),(this.get("comboTrees")||[]).forEach(function(b){Fu(b,function(x){var S=i.findById(x.id);return S.getType()==="combo"&&x.collapsed&&i.collapseCombo(x.id,!1),!0})}),this.set({nodes:f.nodes,edges:f.edges});var m=(this.get("layout")||{}).relayoutAtChangeData,y=m===void 0?!0:m,w=this.get("layoutController");return y&&w&&(w.changeData(function(){setTimeout(function(){var b;(b=o.getCombos())===null||b===void 0||b.forEach(function(x){x.set("animate",!0)})},0)}),o.get("animate")&&!w.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(b){return b.set("animate",!0)})):o.autoPaint()),setTimeout(function(){l.set("localRefresh",u)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(r){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,r)},e.prototype.createCombo=function(r,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",l;if(r){if(et(r))s=r,l={id:r};else{if(s=r.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}l=r}var u=i&&this.get("enabledStack"),c={nodes:[],combos:[]};u&&n.forEach(function(m){var y=a.findById(m),w=y.getType();if(!(w!=="node"&&w!=="combo")){var b=y.getModel();c["".concat(w,"s")].push({id:m,parentId:w==="node"?b.comboId:b.parentId})}});var f=this.get("comboTrees"),h=new Set(n),d=new Map;f&&(f.forEach(function(m){Fu(m,function(y,w,b){if(h.has(y.id)){if(w){var x=a.findById(w.id),S=a.findById(y.id);w.children.splice(b,1),x.removeChild(S),o.updateCombo(x,w.children)}y.itemType==="combo"&&d.set(y.id,y)}return!0})}),f=f.filter(function(m){return!h.has(m.id)}),this.set("comboTrees",f));var p={nodes:[],combos:[]},v=n.map(function(m){var y=a.findById(m),w=y.getModel(),b="";y.getType&&(b=y.getType());var x=d.get(m)||{id:y.getID(),itemType:b};return b==="combo"?(x.parentId=s,w.parentId=s):b==="node"&&(x.comboId=s,w.comboId=s),u&&p["".concat(b,"s")].push({id:w.id,parentId:s}),x});l.children=v,this.addItem("combo",l,!1),this.set("comboSorted",!1),f&&(f.forEach(function(m){za(m,function(y){return y.id===s?(y.itemType="combo",y.children=v,!1):!0})}),this.sortCombos()),u&&(p.combos.push(l),this.pushStack("createCombo",{before:c,after:p}));var g=this.findById(s);!g.getModel().parentId&&g.getChildren().combos.length&&this.updateComboTree(g,void 0,!1),setTimeout(function(){g.set("animate",!0)},0)}},e.prototype.uncombo=function(r,n){var i=this,a,o;n===void 0&&(n=!0);var s=this,l=r;if(et(r)&&(l=this.findById(r)),!l||l.getType&&l.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=l.getModel(),c=l.getModel().parentId,f=s.get("comboTrees");f||(f=[]);var h=this.get("itemMap"),d=l.get("id"),p,v=[],g=this.get("combos"),m=this.findById(c),y=n&&this.get("enabledStack"),w={};if(y&&(w=Dr(u),w.children=[]),f.forEach(function(E){p||Fu(E,function(_){var k;if(_.id===d){p=_;var C=l.getEdges().map(function(T){return T.getID()});C.forEach(function(T){i.removeItem(T,!1)});var M=g.indexOf(l);g.splice(M,1),delete h[d];var A=Dr(l.getModel());l.destroy(),i.emit("afterremoveitem",{item:A,type:"combo"})}if(c&&p&&_.id===c){m.removeCombo(l),v=_.children;var M=v.indexOf(p);return M!==-1&&v.splice(M,1),(k=p.children)===null||k===void 0||k.forEach(function(D){var F=i.findById(D.id),R=F.getModel();F.getType&&F.getType()==="combo"?(D.parentId=c,delete D.comboId,R.parentId=c,delete R.comboId):F.getType&&F.getType()==="node"&&(D.comboId=c,R.comboId=c),m.addChild(F),v.push(D)}),i.updateCombo(m),!1}return!0})}),!c&&p){var b=f.indexOf(p);f.splice(b,1),(a=p.children)===null||a===void 0||a.forEach(function(E){E.parentId=void 0;var _=i.findById(E.id).getModel();delete _.parentId,delete _.comboId,E.itemType!=="node"&&f.push(E)})}if(y){var x={nodes:[],combos:[]},S={nodes:[],combos:[]};(o=p.children)===null||o===void 0||o.forEach(function(E){var _=i.findById(E.id),k=_.getType();k!=="node"&&k!=="combo"||(x["".concat(k,"s")].push({id:E.id,parentId:d}),S["".concat(k,"s")].push({id:E.id,parentId:c}))}),x.combos.push(w),this.pushStack("uncombo",{before:x,after:S})}},e.prototype.updateCombos=function(r){var n=this;r===void 0&&(r=!1);var i=this,a=this.get("comboTrees"),o=i.get("itemController"),s=i.get("itemMap");(a||[]).forEach(function(l){Fu(l,function(u){var c;if(!u)return!0;var f=s[u.id];if(((c=f==null?void 0:f.getType)===null||c===void 0?void 0:c.call(f))==="combo"){var h=Ro([],f.getStates(),!0);Te(h,function(d){return n.setItemState(f,d,!1)}),o.updateCombo(f,u.children,r),Te(h,function(d){return n.setItemState(f,d,!0)})}return!0})}),i.sortCombos()},e.prototype.updateCombo=function(r){var n=this,i=this,a=r,o;if(et(r)&&(a=this.findById(r)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){Fu(c,function(f){if(!f)return!0;var h=u[f.id];if(o===f.id&&h&&h.getType&&h.getType()==="combo"){var d=Ro([],h.getStates(),!0);Te(d,function(p){h.getStateStyle(p)&&n.setItemState(h,p,!1)}),l.updateCombo(h,f.children),Te(d,function(p){h.getStateStyle(p)&&n.setItemState(h,p,!0)}),o&&(o=f.parentId)}return!0})})},e.prototype.updateComboTree=function(r,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;et(r)?o=a.findById(r):o=r;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var c=this.get("comboTrees"),f=!0,h;if((c||[]).forEach(function(y){h||za(y,function(w){if(!h)return w.id===o.getID()&&(h=w),!0})}),za(h,function(y){return y.id===n?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var d={},p={};u==="combo"?(d.combos=[{id:s.id,parentId:s.parentId}],p.combos=[{id:s.id,parentId:n}]):u==="node"&&(d.nodes=[{id:s.id,parentId:s.comboId}],p.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:d,after:p})}if(s.parentId||s.comboId){var v=this.findById(s.parentId||s.comboId);v&&v.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=IL(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},e.prototype.save=function(){var r=[],n=[],i=[];return Te(this.get("nodes"),function(a){r.push(a.getModel())}),Te(this.get("edges"),function(a){n.push(a.getModel())}),Te(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:r,edges:n,combos:i}},e.prototype.changeSize=function(r,n){var i=this.get("viewController");return i.changeSize(r,n),this},e.prototype.refresh=function(){var r=this;if(r.emit("beforegraphrefresh"),r.get("animate"))r.positionsAnimate();else{var n=r.get("nodes"),i=r.get("edges"),a=r.get("edges");Te(n,function(o){o.refresh()}),Te(i,function(o){o.refresh()}),Te(a,function(o){o.refresh()})}r.emit("aftergraphrefresh"),r.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(r){if(et(r)&&(r=this.findById(r)),!r||r.getType&&r.getType()!=="combo"){console.warn("The combo does not exist!");return}return r.getChildren()},e.prototype.positionsAnimate=function(r){var n=this;n.emit("beforeanimate");var i=n.get("animateCfg"),a=i.onFrame,o=r?n.getNodes().concat(n.getCombos()):n.getNodes(),s=o.map(function(u){var c=u.getModel();return{id:c.id,x:c.x,y:c.y}});n.stopAnimate();var l=n.get("canvas");n.animating=!0,setTimeout(function(){l.animate(function(u){Te(s,function(c){var f=n.findById(c.id);if(!(!f||f.destroyed)){var h=f.get("originAttrs"),d=f.get("model"),p=f.getContainer().getMatrix();if(h==null&&(p&&(h={x:p[6],y:p[7]}),f.set("originAttrs",h||0)),a){var v=a(f,u,c,h||{x:0,y:0});f.set("model",Object.assign(d,v))}else h?(d.x=h.x+(c.x-h.x)*u,d.y=h.y+(c.y-h.y)*u):(d.x=c.x,d.y=c.y)}}),n.refreshPositions(r)},{duration:i.duration,easing:i.easing,callback:function(){Te(o,function(c){c.set("originAttrs",null)}),i.callback&&i.callback(),n.emit("afteranimate"),n.animating=!1}})},0)},e.prototype.refreshPositions=function(r){var n=this;n.emit("beforegraphrefreshposition");var i=n.get("nodes"),a=n.get("edges"),o=n.get("vedges"),s=n.get("combos"),l,u={},c=function(h){Te(h,function(d){l=d.getModel();var p=d.get("originAttrs");if(!(p&&l.x===p.x&&l.y===p.y)){var v=d.updatePosition({x:l.x,y:l.y});u[l.id]=v,l.comboId&&(u[l.comboId]=u[l.comboId]||v),l.parentId&&(u[l.parentId]=u[l.parentId]||v)}})};c(s),c(i),s&&s.length!==0&&(r&&c(s),n.updateCombos()),Te(a,function(f){var h=f.getSource().getModel(),d=f.getTarget();if(!ia(d)){var p=d.getModel();(u[h.id]||u[p.id]||f.getModel().isComboEdge)&&f.refresh()}}),Te(o,function(f){f.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){var r=this.get("canvas"),n=r.cfg.timeline;n&&n.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var r=this.get("group").getMatrix();return r?r[0]:1},e.prototype.getCurrentMode=function(){var r=this.get("modeController");return r.getMode()},e.prototype.setMode=function(r){var n=this.get("modeController");return n.setMode(r),this},e.prototype.clear=function(r){var n;return r===void 0&&(r=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),r||this.emit("afterrender"),this},e.prototype.updateLayout=function(r,n,i,a){var o=this;r===void 0&&(r={}),a===void 0&&(a=!0);var s=this.get("layoutController");if(et(r)&&(r={type:r}),n){var l=i;l||(n==="begin"?l={x:0,y:0}:l={x:this.getWidth()/2,y:this.getHeight()/2}),l=this.getPointByCanvas(l.x,l.y);var u=["force","gForce","fruchterman","force2"];u.includes(r.type)||!r.type&&u.includes(s==null?void 0:s.layoutType)?r.center=[l.x,l.y]:this.once("afterlayout",function(h){var d=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];l.x=l.x*d[0]+d[6],l.y=l.y*d[0]+d[7];var p=o.getGroup().getCanvasBBox(),v=p.minX,g=p.maxX,m=p.minY,y=p.maxY,w={x:(v+g)/2,y:(m+y)/2};n==="begin"&&(w.x=v,w.y=m),o.translate(l.x-w.x,l.y-w.y)})}var c=j({},this.get("layout")),f={};Object.assign(f,c,r),r.pipes&&!r.type?delete f.type:!r.pipes&&f.type&&delete f.pipes,this.set("layout",f),s&&(s.isLayoutTypeSame(f)&&f.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(f):s.changeLayout(f),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:f}))},e.prototype.destroyLayout=function(){var r=this.get("layoutController");r==null||r.destroyLayout()},e.prototype.layout=function(){var r,n=this.get("layoutController"),i=this.get("layout");if(!(!i||!n)){if(i.workerEnabled){n.layout();return}!((r=n.layoutMethods)===null||r===void 0)&&r.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(r,n){var i=this;if(n===void 0&&(n=!0),!this.destroyed){if(et(r)&&(r=this.findById(r)),!r){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:r});var a=r.getModel(),o=this.get("itemController");o.collapseCombo(r,n),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||za(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var p=i.findById(d.id);p&&p.getType&&p.getType()==="combo"&&(l=l.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={};s.forEach(function(h){var d=h.getModel(),p=d.isVEdge,v=d.size,g=v===void 0?1:v;if(!(h.isVisible()&&!p)){var m=h.getSource(),y=h.getTarget(),w=null,b;if(m.getModel().id===a.id||l.includes(m)&&!l.includes(y)?(w=y,b=!1):(y.getModel().id===a.id||!l.includes(m)&&l.includes(y))&&(w=m,b=!0),w){if(p){i.removeItem(h,!1);return}for(var x=w.getModel();!w.isVisible();){var S=x.parentId,E=x.comboId,_=S||E;if(w=i.findById(_),!w||!_)return;x=w.getModel()}var k=x.id,C=b?{source:k,target:a.id,size:g,isVEdge:!0}:{source:a.id,target:k,size:g,isVEdge:!0},M="".concat(C.source,"-").concat(C.target);if(f[M]){f[M].size+=g;return}f[M]=C}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:r})}},e.prototype.expandCombo=function(r,n){var i=this;if(n===void 0&&(n=!0),et(r)&&(r=this.findById(r)),!r||r.getType&&r.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:r});var a=r.getModel(),o=this.get("itemController");o.expandCombo(r,n),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||za(h,function(d){if(c&&d.depth<=a.depth)return!1;if(a.id===d.id&&(c=!0),c){var p=i.findById(d.id);p&&p.getType&&p.getType()==="combo"&&(l=l.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={};s.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var d=h.getSource(),p=h.getTarget(),v=d.get("id"),g=p.get("id"),m=null,y;if(v===a.id||l.includes(d)&&!l.includes(p)?(m=p,y=!1):g===a.id||!l.includes(d)&&l.includes(p)?(m=d,y=!0):l.includes(d)&&l.includes(p)&&d.isVisible()&&p.isVisible()&&h.show(),m){var w=h.getModel(),b=w.isVEdge,x=w.size,S=x===void 0?1:x;if(b){i.removeItem(h,!1);return}for(var E=m.getModel();!m.isVisible();){var _=E.parentId,k=E.comboId,C=_||k;if(m=i.findById(C),!m||!C)return;E=m.getModel()}for(var M=E.id,A=y?p:d,T=A.getModel();!A.isVisible();){var D=T.parentId,F=T.comboId,R=D||F;if(A=i.findById(R),!A||!R)return;if(T.comboId===a.id||T.parentId===a.id)break;T=A.getModel()}var B=T.id;if(M){var N=y?{source:M,target:B,isVEdge:!0,size:S}:{source:B,target:M,isVEdge:!0,size:S},O="".concat(N.source,"-").concat(N.target);if(f[O]){f[O].size+=S;return}f[O]=N}}}}),this.addItems(Object.values(f).map(function(h){return{type:"vedge",model:h}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:r})},e.prototype.collapseExpandCombo=function(r,n){if(n===void 0&&(n=!0),et(r)&&(r=this.findById(r)),!(!r||r.getType&&r.getType()!=="combo")){for(var i=r.getModel(),a=this.findById(i.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=i.collapsed;s?this.expandCombo(r,n):this.collapseCombo(r,n),this.updateCombo(r)}},e.prototype.getNeighbors=function(r,n){var i=r;return et(r)&&(i=this.findById(r)),i.getNeighbors(n)},e.prototype.getNodeDegree=function(r,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=r;et(r)&&(a=this.findById(r));var o=this.get("degrees");(!o||i)&&(o=Of(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(r,n,i){if(r===void 0&&(r="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var a=n?Dr(n):{before:{},after:Dr(this.save())};i==="redo"?this.redoStack.push({action:r,data:a}):this.undoStack.push({action:r,data:a}),this.emit("stackchange",{action:r,stackType:i,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(r,n){r===void 0&&(r=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!r)&&(i=Mv(this.save(),n),this.set("adjMatrix",i)),i},e.prototype.getShortestPathMatrix=function(r,n){r===void 0&&(r=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!r)&&(i=Mv(this.save(),n),this.set("adjMatrix",i)),(!a||!r)&&(a=xw(this.save(),n),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(r,n,i){return t.prototype.on.call(this,r,n,i)},e.prototype.destroy=function(){var r,n,i,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(r=this.get("itemController"))===null||r===void 0||r.destroy(),(n=this.get("modeController"))===null||n===void 0||n.destroy(),(i=this.get("viewController"))===null||i===void 0||i.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(r){if(!r.members||r.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[r.id])return console.warn("Existed hull id."),i[r.id];var a=n.addGroup({id:"".concat(r.id,"-container")}),o=new Lle(this,j(j({},r),{group:a})),s=o.id;return i[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(r){return this.get("hullMap")[r]},e.prototype.removeHull=function(r){var n,i;et(r)?i=this.getHullById(r):i=r,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},e.prototype.removeHulls=function(){var r=this.getHulls();!r||!Object.keys(r).length||(Object.keys(r).forEach(function(n){var i=r[n];i.destroy()}),this.set("hullMap",{}))},e}(Dae);function t4(t){"@babel/helpers - typeof";return t4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t4(t)}var Ng=dl,TW="-shape",AI="-label",yE=["startArrow","endArrow"],OW={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},oUe={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},wE={edge:oUe,node:OW,combo:OW},r4="-label-bg",H8={options:{labelCfg:{style:{fontFamily:jt.windowFontFamily}},descriptionCfg:{style:{fontFamily:jt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,r){return r==="move"||r!=null&&r.includes("bbox")?e:gn({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,r){r.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,r);if(n.set("className",this.itemType+TW),r.shapeMap[this.itemType+TW]=n,e.label){var i=this.drawLabel(e,r);i.set("className",this.itemType+AI),r.shapeMap[this.itemType+AI]=i}return n},afterDraw:function(e,r,n){},drawShape:function(e,r){return null},drawLabel:function(e,r){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,i=n||{},a=this.getLabelStyle(e,i,r),o=a.rotate;delete a.rotate;var s=r.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(r.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=Ng(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=Ng(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=Ng(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=Ng(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=Ng(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(e,r,s),f=this.itemType+r4;c.set("classname",f),r.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(e,r,n){var i=this.options.labelCfg,a=qt({},i,e.labelCfg),o=this.getLabelBgStyleByPosition(n,a),s=r.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return r.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,r,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,r){return{}},getLabelStyle:function(e,r,n){var i=this.getLabelStyleByPosition(e,r,n),a="".concat(this.itemType,"Label"),o=jt[a]?jt[a].style:null;return j(j(j({},o),i),r.style)},getShapeStyle:function(e){return e.style},update:function(e,r,n){this.updateShapeStyle(e,r,n),this.updateLabel(e,r,n)},updateShapeStyle:function(e,r,n){var i,a=r.getContainer(),o=r.getKeyShape(),s=qt({},o.attr(),e.style),l=function(f){var h,d=s[f];if(ia(d)){var p=((i=a.shapeMap)===null||i===void 0?void 0:i[f])||a.find(function(v){return v.get("name")===f});p==null||p.attr(d)}else o.attr((h={},h[f]=d,h))};for(var u in s)l(u)},updateLabel:function(e,r,n){var i,a,o=r.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+AI,c=o.shapeMap[u]||o.find(function(b){return b.get("className")===u}),f=this.itemType+r4,h=o.shapeMap[f]||o.find(function(b){return b.get("className")===f});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[u],h&&(o.removeChild(h),delete o.shapeMap[f])),e.label||e.label==="")if(c){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=gn(l,e.labelCfg));var p=this.getLabelStyleByPosition(e,l,o),v=(i=e.labelCfg)===null||i===void 0?void 0:i.style,g=j(j({},p),v),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var y=[1,0,0,0,1,0,0,0,1];y=Ng(y,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=y,c.attr(g)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(g);if(!h)g.background&&(h=this.drawLabelBg(e,o,c),h.set("classname",f),o.shapeMap[f]=h,c.toFront());else if(g.background){var w=this.getLabelBgStyleByPosition(c,l);h.attr(w)}else o.removeChild(h)}else{var d=this.drawLabel(e,o);d.set("className",u),o.shapeMap[u]=d}},afterUpdate:function(e,r){},setState:function(e,r,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=Tb(r)?e:"".concat(e,":").concat(r),c=this.getStateStyle(u,n),f=n.getStateStyle(u);if(!(!f&&!c)){var h=qt({},f||c),d=n.getContainer(),p={x:1,y:1,cx:1,cy:1,matrix:1};if(l==="combo"&&(p.r=1,p.width=1,p.height=1),r){var v=function(R){var B,N=h[R];if(ia(N)&&!yE.includes(R)){var O=((o=d.shapeMap)===null||o===void 0?void 0:o[R])||d.find(function(L){return L.get("name")===R});O==null||O.attr(N)}else s.attr((B={},B[R]=N,B))};for(var g in h)v(g)}else{var m=X_(n.getCurrentStatesStyle()),y=n.getModel(),w=qt({},y.style,X_(n.getOriginStyle())),b=s.get("name"),x=s.attr(),S={};Object.keys(x).forEach(function(F){if(F!=="img"){var R=x[F];R&&t4(R)==="object"?S[F]=Dr(R):S[F]=R}});var E={},_=function(R){var B=h[R];if(ia(B)&&!yE.includes(R)){var N=d.shapeMap[R]||d.find(function(G){return G.get("name")===R});if(N){var O=X_(N.attr());Te(B,function(G,q){if(R===b&&S[q]&&!p[q]){delete S[q];var K=w[R][q]||wE[l][q];s.attr(q,K)}else if(O[q]||O[q]===0){delete O[q];var V=w[R][q]||wE[l][q];N.attr(q,V)}}),E[R]=O}}else if(S[R]&&!p[R]){delete S[R];var L=w[R]||(w[b]?w[b][R]:void 0)||wE[l][R];s.attr(R,L)}};for(var k in h)_(k);b?E[b]=S:qt(E,S);for(var g in m)if(!p[g]){var C=m[g];(!ia(C)||yE.includes(g))&&(b?(qt(w[b],(a={},a[g]=C,a)),delete w[g]):qt(w,(i={},i[g]=C,i)),delete m[g])}var M={};gn(M,w,E,m);var A=!1,T=function(R){var B,N,O=M[R];if(ia(O)&&!yE.includes(R)){var L=d.shapeMap[R]||d.find(function(q){return q.get("name")===R});L&&((L.get("type")==="text"||L.get("labelRelated"))&&(delete O.x,delete O.y,delete O.matrix),R===b&&(l==="combo"&&(delete O.r,delete O.width,delete O.height),A=!0),L.attr(O))}else if(!A){var G=O||wE[l][R];l==="combo"?b||s.attr((B={},B[R]=G,B)):s.attr((N={},N[R]=G,N))}};for(var D in M)T(D)}}}},getStateStyle:function(e,r){var n=r.getModel(),i=r.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[e]:o&&o[e];return i==="combo"?Dr(u):qt({},l,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var r,n,i=(e==null?void 0:e.anchorPoints)||((r=this.getCustomConfig(e))===null||r===void 0?void 0:r.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},sUe={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:jt.nodeLabel.offset,getSize:function(e){var r,n=((r=this.mergeStyle)===null||r===void 0?void 0:r.size)||e.size||this.getOptions({}).size||jt.defaultNode.size;return Xt(n)&&n.length===1&&(n=[n[0],n[0]]),Xt(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,r){var n=r.maxLength,i=e.label;n&&(i=Tse(i,n));var a=r.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:i,textBaseline:"middle",textAlign:"center"};var o=r.offset;Gt(o)&&(o=this.offset);var s=this.getSize(e),l;switch(a){case"top":l={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":l={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:l={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return l.text=i,l},getLabelBgStyleByPosition:function(e,r){var n;if(!e)return{};var i=(n=r.style)===null||n===void 0?void 0:n.background;if(!i)return{};var a=e.getBBox(),o=W8(i.padding),s=a.width+o[1]+o[3],l=a.height+o[0]+o[2];return j(j({x:a.minX-o[3],y:a.minY-o[0]},i),{width:s,height:l})},drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e),a=r.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return r.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=r.shapeMap["link-point-left"]||r.find(function(M){return M.get("className")==="link-point-left"}),a=r.shapeMap["link-point-right"]||r.find(function(M){return M.get("className")==="link-point-right"}),o=r.shapeMap["link-point-top"]||r.find(function(M){return M.get("className")==="link-point-top"}),s=r.shapeMap["link-point-bottom"]||r.find(function(M){return M.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=qt({},l,e.linkPoints),c=u.fill,f=u.stroke,h=u.lineWidth,d=u.size/2;d||(d=u.r);var p=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},v=p.left,g=p.right,m=p.top,y=p.bottom,w=this.getSize(e),b=w[0],x=w[1],S={r:d,fill:c,stroke:f,lineWidth:h};if(i)!v&&v!==void 0?(i.remove(),delete r.shapeMap["link-point-left"]):i.attr(j(j({},S),{x:-b/2,y:0}));else if(v){var E="link-point-left";r.shapeMap[E]=r.addShape("circle",{attrs:j(j({},S),{x:-b/2,y:0}),className:E,name:E,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete r.shapeMap["link-point-right"]),a.attr(j(j({},S),{x:b/2,y:0}));else if(g){var _="link-point-right";r.shapeMap[_]=r.addShape("circle",{attrs:j(j({},S),{x:b/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete r.shapeMap["link-point-top"]),o.attr(j(j({},S),{x:0,y:-x/2}));else if(m){var k="link-point-top";r.shapeMap[k]=r.addShape("circle",{attrs:j(j({},S),{x:0,y:-x/2}),className:k,name:k,isAnchorPoint:!0})}if(s)!y&&y!==void 0?(s.remove(),delete r.shapeMap["link-point-bottom"]):s.attr(j(j({},S),{x:0,y:x/2}));else if(y){var C="link-point-bottom";r.shapeMap[C]=r.addShape("circle",{attrs:j(j({},S),{x:0,y:x/2}),className:C,name:C,isAnchorPoint:!0})}},updateShape:function(e,r,n,i,a){var o=r.get("keyShape");o.attr(j({},n)),this.updateLabel(e,r,a),i&&this.updateIcon(e,r)},updateIcon:function(e,r){var n=this,i=r.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,l=o.text,u=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(m){return m.get("name")==="".concat(n.type,"-icon")});if(u)if(s||s===void 0){var c=qt({},u.attr(),a),f=c.width,h=f===void 0?20:f,d=c.height,p=d===void 0?20:d;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(h=0,p=0),u.attr(j(j({},c),{x:-h/2,y:-p/2}))}else u.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(s){var v="".concat(this.type,"-icon");if(l)i.shapeMap[v]=i.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:v,name:v});else{var h=a.width,p=a.height;i.shapeMap[v]=i.addShape("image",{attrs:j(j({},a),{x:-h/2,y:-p/2}),className:v,name:v})}var g=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});g&&g.toFront()}}},lUe=j(j({},H8),sUe);mn.registerNode("single-node",lUe);var bE="edge-shape";function uUe(t){var e=t;return t==="start"?e="end":t==="end"&&(e="start"),e}var cUe={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:jt.defaultEdge.size,style:{x:0,y:0,stroke:jt.defaultEdge.style.stroke,lineAppendWidth:jt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:jt.edgeLabel.style.fill,fontSize:jt.edgeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:j({},jt.edgeStateStyles)},getPath:function(e){var r=[];return Te(e,function(n,i){i===0?r.push(["M",n.x,n.y]):r.push(["L",n.x,n.y])}),r},getShapeStyle:function(e){var r=this.options.style,n={stroke:e.color},i=qt({},r,n,e.style),a=e.size||jt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=qt({},jt.defaultEdge.style,{stroke:jt.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(e,r,n){var i,a=r.getContainer(),o=((i=r.getKeyShape)===null||i===void 0?void 0:i.call(r))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var l=e.startPoint,u=e.endPoint,c=this.getControlPoints(e),f=[l];c&&(f=f.concat(c)),f.push(u);var h=o.attr(),d=e.style||{};d.stroke===void 0&&(d.stroke=e.color);var p=e.sourceNode,v=e.targetNode,g={radius:d.radius};c||(g={source:p,target:v,offset:d.offset,radius:d.radius});var m=this.getPath(f,g),y={};n==="move"?y={path:m}:(h.endArrow&&d.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(e.style.startArrow={path:""}),y=j({},e.style),y.lineWidth===void 0&&(y.lineWidth=(Ut(s)?s:s==null?void 0:s[0])||h.lineWidth),y.path===void 0&&(y.path=m),y.stroke===void 0&&(y.stroke=h.stroke||e.color)),o&&o.attr(y)},getLabelStyleByPosition:function(e,r,n){var i=r.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[bE],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=r.refX||this.refX,u=r.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+l,a.y=e.startPoint.y+u,a.text=e.label,a;var c;Gt(r.autoRotate)?c=this.labelAutoRotate:c=r.autoRotate;var f=kse(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,r){if(!e)return{};var n=e.getBBox(),i=r.style&&r.style.background;if(!i)return{};var a=i.padding,o=n.width+a[1]+a[3],s=n.height+a[0]+a[2],l=j(j({},i),{width:o,height:s,x:n.minX-a[3],y:n.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),u;return Gt(r.autoRotate)?u=this.labelAutoRotate:u=r.autoRotate,u&&(l.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(e,r){var n="center";return r?(r=r%(Math.PI*2),e!=="center"&&(r>=0&&r<=Math.PI/2||r>=3/2*Math.PI&&r<2*Math.PI?n=e:n=uUe(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("path",{className:bE,name:bE,attrs:n});return r.shapeMap[bE]=i,i},drawLabel:function(e,r){var n=this.options.labelCfg,i=gn({},n,e.labelCfg),a=this.getLabelStyle(e,i,r),o=a.rotate;delete a.rotate;var s=r.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(r.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(e,r,s,a,o),u=this.itemType+r4;l.set("classname",u),r.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(e,r,n,i,a){var o=this.options.labelCfg,s=gn({},o,e.labelCfg),l=this.getLabelBgStyleByPosition(n,s),u=r.addShape("rect",{name:"text-bg-shape",attrs:l,labelRelated:!0});return r.shapeMap["text-bg-shape"]=u,u}},fUe=j(j({},H8),cUe);mn.registerEdge("single-edge",fUe);mn.registerEdge("line",{getControlPoints:function(){}},"single-edge");mn.registerEdge("spline",{getPath:function(e){var r=Ile(e);return r}},"single-edge");mn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint,i={x:(r.x+n.x)/2,y:(r.y+n.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=_L(r,o,n),r.x<=n.x&&r.y>n.y?this.clockwise=a.x>o.x?0:1:r.x<=n.x&&r.y<n.y?this.clockwise=a.x>o.x?1:0:r.x>n.x&&r.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-r.x)/(o.y-r.y)===(n.x-r.x)/(n.y-r.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),Xt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-r.x,y:n.y-r.y},l=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:e.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=_L(r,o,n)}var u=KC(r,a),c=[{x:u,y:u}];return c},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),e.length===2?r.push(["L",e[1].x,e[1].y]):r.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),r}},"single-edge");mn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var r=e.controlPoints;if(!r||!r.length){var n=e.startPoint,i=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Xt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),Xt(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=ik(n,i,e.curvePosition,e.curveOffset);r=[a]}return r},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),r.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),r}},"single-edge");mn.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var r=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),Ut(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ut(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!r||!r.length||r.length<2){var n=e.startPoint,i=e.endPoint,a=ik(n,i,e.curvePosition[0],e.curveOffset[0]),o=ik(n,i,e.curvePosition[1],e.curveOffset[1]);r=[a,o]}return r},getPath:function(e){var r=[];return r.push(["M",e[0].x,e[0].y]),r.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),r}},"single-edge");mn.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ut(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ut(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ut(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.y-r.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:r.x,y:r.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");mn.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var r=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),Ut(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),Ut(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),Ut(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var i=n.x-r.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(i)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:r.x+i*this.curvePosition[0]+a[0],y:r.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");mn.registerEdge("loop",{getPathPoints:function(e){return Cse(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var hUe={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:jt.comboLabel.refX,refY:jt.comboLabel.refY,options:{style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:j({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var r=Dr(e.size||this.options.size||jt.defaultCombo.size);return Xt(r)&&r.length===1&&(r=[r[0],r[0]]),Xt(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,r){var n=r.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Xt(a)&&(a=Math.max.apply(Math,a));var o=r.refX,s=r.refY;Gt(o)&&(o=this.refX),Gt(s)&&(s=this.refY);var l=this.getSize(e),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:e.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=e.label,f},drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e),a=r.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,r,n){var i=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),l=s.show,u=s.img,c=s.width,f=s.height,h=r.getContainer(),d=h.find(function(m){return m.get("name")==="combo-collapsed-substitute-icon"}),p=d&&!d.destroyed,v=r.get("keyShape");if(i&&l){if(p)d.show();else{var g={width:c||n.r*2||n.width,height:f||n.r*2||n.height};d=h.addShape("image",{attrs:j({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}v.hide()}else p&&(d.hide(),v.show())},updateShape:function(e,r,n){var i=this,a=r.get("keyShape"),o=r.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,r,n),a.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&i.updateCollapsedIcon(e,r,n)}})):(a.attr(j({},n)),this.updateCollapsedIcon(e,r,n)),this.updateLabel(e,r)}},dUe=j(j({},H8),hUe);mn.registerCombo("single-combo",dUe);mn.registerCombo("circle",{options:{size:[jt.defaultCombo.size[0],jt.defaultCombo.size[0]],padding:Math.max.apply(Math,jt.defaultCombo.padding),animate:!0,style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:j({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,r){var n=this.getShapeStyle(e);delete n.height,delete n.width;var i=r.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(e){var r=this.options.style,n=e.padding||this.options.padding;Xt(n)&&(n=Math.max.apply(Math,n));var i={stroke:e.color},a=qt({},r,i,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=Ut(o)?o/2:o[0]/2;else{var l=this.getSize(e);!Ut(a.r)||isNaN(a.r)?s=l[0]/2||jt.defaultCombo.style.r:s=Math.max(a.r,l[0]/2)||l[0]/2}a.r=s+n;var u=j({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},u},update:function(e,r){var n=this.getSize(e),i=e.padding||this.options.padding;Xt(i)&&(i=Math.max.apply(Math,i));var a=Dr(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=Ut(o)?o/2:o[0]/2:s=Math.max(a.r,n[0]/2)||n[0]/2,a.r=s+i;var l=r.get("sizeCache");l&&(l.r=a.r);var u={stroke:e.color},c=r.get("keyShape"),f=qt({},c.attr(),u,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,r,f,!0)}},"single-combo");mn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:j({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(e,r){var n=r.position||this.labelPosition,i=e.style,a=e.padding||this.options.padding;Ut(a)&&(a=[a,a,a,a]);var o=r.refX,s=r.refY;Gt(o)&&(o=this.refX),Gt(s)&&(s=this.refY);var l=-i.width/2-a[3],u=i.width/2+a[1],c=-i.height/2-a[0],f=i.height/2+a[2],h;switch(n){case"top":h={x:l+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;case"left":h={x:l+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":h={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:h={x:u+o,y:0,textAlign:"right"};break}return h.text=e.label,h},getShapeStyle:function(e){var r=this.options.style,n=e.padding||this.options.padding;Ut(n)&&(n=[n,n,n,n]);var i={stroke:e.color},a=qt({},r,i,e.style),o=this.getSize(e),s,l,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?Ut(u)?(s=u,l=u):(s=u[0],l=u[1]):(!Ut(a.width)||isNaN(a.width)?s=o[0]||jt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!Ut(a.height)||isNaN(a.height)?l=o[1]||jt.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],f=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var h=j({x:c,y:f},a);return e.style?(e.style.width=s,e.style.height=l):e.style={width:s,height:l},h},update:function(e,r){var n=this.getSize(e),i=e.padding||this.options.padding;Ut(i)&&(i=[i,i,i,i]);var a=Dr(e.style),o,s,l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?Ut(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=r.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:e.color},f=r.get("keyShape"),h=qt({},f.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,r,h,!1)}},"single-combo");mn.registerNode("simple-circle",{options:{size:jt.defaultNode.size,style:{x:0,y:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:j({},jt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,r){var n=this.getShapeStyle(e),i="".concat(this.type,"-keyShape"),a=r.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:i,draggable:!0});return r.shapeMap[i]=a,a},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=gn({},r,n),a=this.getSize(e),o=a[0]/2,s=j({x:0,y:0,r:o},i);return s},update:function(e,r,n){var i=this.getSize(e),a={stroke:e.color,r:i[0]/2},o=r.get("keyShape"),s=gn({},o.attr(),a,e.style);this.updateShape(e,r,s,!0,n)}},"single-node");mn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:j({},jt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return i},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=j({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r,n){r.getContainer();var i=(this.mergeStyle||this.getOptions(e)).style,a=this.getSize(e),o=r.get("keyShape");e.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=qt({},i,o.attr(),s);l=qt(l,e.style),this.updateShape(e,r,l,!1,n)}},"single-node");mn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:jt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,r){var n=this.shapeType,i=this.getShapeStyle(e);delete i.fill;var a=r.addShape(n,{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;r.setClip({type:"circle",attrs:j({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,c=n.height,f=a-u/2,h=o-c/2;r.setClip({type:"rect",attrs:j({x:f,y:h,width:u,height:c},s)})}else if(i==="ellipse"){var d=n.rx,p=n.ry;r.setClip({type:"ellipse",attrs:j({x:a,y:o,rx:d,ry:p},s)})}else if(i==="polygon"){var v=n.points;r.setClip({type:"polygon",attrs:j({points:v},s)})}else if(i==="path"){var g=n.path;r.setClip({type:"path",attrs:j({path:g},s)})}}},getShapeStyle:function(e){var r=this.mergeStyle||this.getOptions(e),n=r.style,i=r.img,a=this.getSize(e),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=j({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(e,r){var n=r.getContainer(),i="".concat(this.itemType,"-shape"),a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||r.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");const Nle={triangle:function(e,r,n){e===void 0&&(e=10),r===void 0&&(r=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+r,",-").concat(e/2," L ").concat(i+r,",").concat(e/2," Z");return a},vee:function(e,r,n){e===void 0&&(e=15),r===void 0&&(r=20),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",0 L ").concat(i+r,",-").concat(e/2,`
        L `).concat(i+2*r/3,",0 L ").concat(i+r,",").concat(e/2," Z");return a},circle:function(e,r){e===void 0&&(e=5),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return i},rect:function(e,r,n){e===void 0&&(e=10),r===void 0&&(r=10),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,",").concat(-e/2,` 
        L `).concat(i+r,",").concat(-e/2,` 
        L `).concat(i+r,",").concat(e/2,` 
        L `).concat(i,",").concat(e/2," Z");return a},diamond:function(e,r,n){e===void 0&&(e=15),r===void 0&&(r=15),n===void 0&&(n=0);var i=n*2,a="M ".concat(i,`,0 
        L `).concat(i+r/2,",").concat(-e/2,` 
        L `).concat(i+r,`,0 
        L `).concat(i+r/2,",").concat(e/2," Z");return a},triangleRect:function(e,r,n,i,a,o){e===void 0&&(e=15),r===void 0&&(r=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+r+a,u="M ".concat(s,",0 L ").concat(s+r,",-").concat(e/2," L ").concat(s+r,",").concat(e/2,` Z
            M `).concat(l,", -").concat(n/2,`
            L `).concat(l+i," -").concat(n/2,`
            L `).concat(l+i," ").concat(n/2,`
            L `).concat(l," ").concat(n/2,`
            Z`);return u}},Fle={collapse:function(e,r,n){return[["M",e-n,r],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,r],["L",e+n-4,r]]},expand:function(e,r,n){return[["M",e-n,r],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,r],["L",e-n+2*n-4,r],["M",e-n+n,r-n+4],["L",e,r+n-4]]},upTriangle:function(e,r,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,r+a],["L",e+i,r+a],["L",e,r-n],["Z"]]},downTriangle:function(e,r,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",e-i,r-a],["L",e+i,r-a],["L",e,r+n],["Z"]]}};var pUe=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const vUe=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:pUe},Symbol.toStringTag,{value:"Module"}));var Ble=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const gUe=Object.freeze(Object.defineProperty({__proto__:null,isForce:Ble},Symbol.toStringTag,{value:"Module"}));var mUe=dl,_a=j(j(j(j(j(j(j({},OGe),Q$e),qGe),G$e),vUe),gUe),{transform:mUe,mat3:$ae}),$le=function(){function t(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(e){var r=e.type;if(r)return r;var n=e.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},t.prototype.isLayoutTypeSame=function(e){var r=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),i=Array.isArray(r);return n&&i?this.layoutType.every(function(a,o){return a===r[o]}):Array.isArray(r)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},t.prototype.refreshLayout=function(){var e=this,r=e.graph,n=e.layoutType,i=e.layoutCfg,a=i===void 0?{}:i;if(r){var o=a.animate,s=o===void 0&&(n==="force"||n==="force2"),l=Ble(n)&&(o||s);r.get("animate")&&!l?r.positionsAnimate(n==="comboCombined"):r.refreshPositions(n==="comboCombined")}},t.prototype.changeLayout=function(e){var r=e.disableTriggerLayout,n=xi(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!r&&this.layout()},t.prototype.changeData=function(e){this.layout(e)},t.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,r=[];return e==null||e.forEach(function(n){var i,a=(i=n.getType)===null||i===void 0?void 0:i.call(n);a&&r.push(a),n.destroy()}),this.layoutMethods=[],r},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var e,r=[],n=[],i=[],a=[],o=[],s=[],l=[],u=this.graph.getNodes(),c=this.graph.getEdges(),f=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var p=u[d];if(!(!p||p.destroyed)){var v=p.getModel();if(!p.isVisible()){n.push(v);continue}r.push(v)}}for(var g=c.length,d=0;d<g;d++){var m=c[d];if(!(!m||m.destroyed)){var v=m.getModel();if(!m.isVisible()){a.push(v);continue}v.isComboEdge?o.push(v):i.push(v)}}for(var y=f.length,d=0;d<y;d++){var w=f[d];if(!w.destroyed){var v=w.getModel();if(!w.isVisible()){l.push(v);continue}s.push(v)}}return{nodes:r,hiddenNodes:n,edges:i,hiddenEdges:a,combos:s,hiddenCombos:l,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(b){return b.getModel()})}},t.prototype.relayout=function(e){var r=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(!(!i||i.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var l=this.data.nodes;if(!l)return!1;s=this.initPositions(o.center,l)}i.emit("beforelayout"),a==null||a.forEach(function(u,c){var f=o[c]||o;s=s.then(function(){var h,d=r.execLayoutMethod(f,c);return c===a.length-1&&((h=o.onAllLayoutEnd)===null||h===void 0||h.call(o)),d})})}},t.prototype.filterLayoutData=function(e,r){var n=e.nodes,i=e.edges,a=xi(e,["nodes","edges"]);if(!n)return e;var o,s;Bn(r==null?void 0:r.nodesFilter)?o=r.nodesFilter:o=function(){return!0};var l=n.filter(o);if(Bn(r==null?void 0:r.edgesFilter))s=r.edgesFilter;else{var u=l.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return u[f.source]&&u[f.target]}}return j({nodes:l,edges:i.filter(s)},a)},t.prototype.getLayoutBBox=function(e){var r=this.graph,n=VC(r.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=ble(o);return s.size=[s.width,s.height],s}),a=Object.values(VC(e,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var e=this.graph,r=e.get("data"),n=r.nodes;if(!(n[0].x===void 0||n[0].x===null||qu(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},t.prototype.initPositions=function(e,r){var n;return es(this,void 0,void 0,function(){var i,a,o;return ts(this,function(s){return i=this.graph,r!=null&&r.length?(a=r.filter(function(l){return qu(l.x)||qu(l.y)}),o=a?a.length:0,o?[2,(n=this.initWithPreset)===null||n===void 0?void 0:n.call(this,function(){},function(){var l=i.get("width")*.85,u=i.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(l/u)),f=Math.ceil(o/c),h=l/(c-1),d=u/(f-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(d)||!h)&&(d=0);for(var p=e[0]-l/2,v=e[1]-u/2,g=0;g<o;g++){var m=a[g];qu(+m.x)&&(m.x=g%c*h+p),qu(+m.y)&&(m.y=Math.floor(g/c)*d+v)}})]:[2]):[2,Promise.resolve()]})})},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),zle=function(){function t(e){this.graph=e,this.destroyed=!1,this.initEvents()}return t}(),zf=mn.registerNode,jle=mn.registerEdge,yUe=mn.registerCombo,Gle=l8.registerBehavior,St=jt;jt.version,mn.registerNode,mn.registerEdge,mn.registerCombo,l8.registerBehavior;var X8={},Fr={},fA={},Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.MESSAGE=Pd.ALGORITHM=void 0;var wUe={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Pd.ALGORITHM=wUe;var bUe={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};Pd.MESSAGE=bUe;var hA={},Ule={},Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.default=void 0;var xUe=function(e,r){var n=e.nodes,i=e.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,r||(a[f][c]=1))}),a},SUe=xUe;Uv.default=SUe;var dA={},pA={},Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=Fm.LinkedListNode=void 0;var EUe=function(e,r){return e===r},n4=function(){function t(e,r){r===void 0&&(r=null),this.value=e,this.next=r}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t}();Fm.LinkedListNode=n4;var _Ue=function(){function t(e){e===void 0&&(e=EUe),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var r=new n4(e,this.head);return this.head=r,this.tail||(this.tail=r),this},t.prototype.append=function(e){var r=new n4(e);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,e);)r=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(r=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),r},t.prototype.find=function(e){var r=e.value,n=r===void 0?void 0:r,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var r=this;return e.forEach(function(n){return r.append(n)}),this},t.prototype.toArray=function(){for(var e=[],r=this.head;r;)e.push(r),r=r.next;return e},t.prototype.reverse=function(){for(var e=this.head,r=null,n=null;e;)n=e.next,e.next=r,r=e,e=n;this.tail=this.head,this.head=r},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(r){return r.toString(e)}).toString()},t}(),CUe=_Ue;Fm.default=CUe;Object.defineProperty(pA,"__esModule",{value:!0});pA.default=void 0;var kUe=MUe(Fm);function MUe(t){return t&&t.__esModule?t:{default:t}}var AUe=function(){function t(){this.linkedList=new kUe.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(e){this.linkedList.append(e)},t.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toString=function(e){return this.linkedList.toString(e)},t}(),TUe=AUe;pA.default=TUe;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.uniqueId=Oi.getOutEdgesNodeId=Oi.getNeighbors=Oi.getEdgesByNodeId=void 0;var OUe=function(e,r,n){r===void 0&&(r=[]);var i=r.filter(function(l){return l.source===e||l.target===e});if(n==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)};Oi.getNeighbors=OUe;var IUe=function(e,r){return r.filter(function(n){return n.source===e})};Oi.getOutEdgesNodeId=IUe;var DUe=function(e,r){return r.filter(function(n){return n.source===e||n.target===e})};Oi.getEdgesByNodeId=DUe;var PUe=function(e){e===void 0&&(e=0);var r="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(r).concat(n)};Oi.uniqueId=PUe;Object.defineProperty(dA,"__esModule",{value:!0});dA.default=void 0;var LUe=NUe(pA),RUe=Oi;function NUe(t){return t&&t.__esModule?t:{default:t}}function FUe(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}var BUe=function(e,r,n,i){i===void 0&&(i=!0);var a=FUe(n),o=new LUe.default,s=e.edges,l=s===void 0?[]:s;o.enqueue(r);for(var u="",c=function(){var h=o.dequeue();a.enter({current:h,previous:u}),(0,RUe.getNeighbors)(h,l,i?"target":void 0).forEach(function(d){a.allowTraversal({previous:u,current:h,next:d})&&o.enqueue(d)}),a.leave({current:h,previous:u}),u=h};!o.isEmpty();)c()},$Ue=BUe;dA.default=$Ue;var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.default=zUe;Ld.detectStrongConnectComponents=Ld.detectConnectedComponents=void 0;var Wle=Oi,Vle=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function d(p){l.push(p),s[p.id]=!0;for(var v=(0,Wle.getNeighbors)(p.id,a),g=function(w){var b=v[w];if(!s[b]){var x=n.filter(function(S){return S.id===b});x.length>0&&d(x[0])}},m=0;m<v.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var h=[];l.length>0;)h.push(l.pop());o.push(h)}}return o};Ld.detectConnectedComponents=Vle;var Hle=function(e){for(var r=e.nodes,n=r===void 0?[]:r,i=e.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,h=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=(0,Wle.getNeighbors)(m.id,a,"target").filter(function(E){return n.map(function(_){return _.id}).indexOf(E)>-1}),w=function(_){var k=y[_];if(!l[k]&&l[k]!==0){var C=n.filter(function(M){return M.id===k});C.length>0&&g(C[0]),u[m.id]=Math.min(u[m.id],u[k])}else s[k]&&(u[m.id]=Math.min(u[m.id],l[k]))},b=0;b<y.length;b++)w(b);if(u[m.id]===l[m.id]){for(var x=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,x.push(S),S===m)break}x.length>0&&c.push(x)}},d=0,p=n;d<p.length;d++){var v=p[d];!l[v.id]&&l[v.id]!==0&&h(v)}return c};Ld.detectStrongConnectComponents=Hle;function zUe(t,e){return e?Hle(t):Vle(t)}var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.getOutDegree=wf.getInDegree=wf.default=void 0;var Tw=function(e){var r={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){r[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){r[s.source].degree++,r[s.source].outDegree++,r[s.target].degree++,r[s.target].inDegree++}),r},jUe=Tw;wf.default=jUe;var GUe=function(e,r){var n=Tw(e);return n[r]?Tw(e)[r].inDegree:0};wf.getInDegree=GUe;var UUe=function(e,r){var n=Tw(e);return n[r]?Tw(e)[r].outDegree:0};wf.getOutDegree=UUe;var tc={},vA={};Object.defineProperty(vA,"__esModule",{value:!0});vA.default=HUe;var WUe=Oi;function VUe(t){t===void 0&&(t={});var e=t,r=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}function Xle(t,e,r,n,i){i===void 0&&(i=!0),n.enter({current:e,previous:r});var a=t.edges,o=a===void 0?[]:a;(0,WUe.getNeighbors)(e,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:r,current:e,next:s})&&Xle(t,s,e,n,i)}),n.leave({current:e,previous:r})}function HUe(t,e,r,n){n===void 0&&(n=!0),Xle(t,e,"",VUe(r),n)}function i4(t){"@babel/helpers - typeof";return i4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i4(t)}Object.defineProperty(tc,"__esModule",{value:!0});tc.detectAllUndirectedCycle=tc.detectAllDirectedCycle=tc.detectAllCycles=tc.default=void 0;var XUe=qUe(vA),Yle=YUe(Ld),qle=Oi;function Kle(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Kle=function(i){return i?r:e})(t)}function YUe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||i4(t)!=="object"&&typeof t!="function")return{default:t};var r=Kle(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function qUe(t){return t&&t.__esModule?t:{default:t}}var KUe=function(e){var r=null,n=e.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(h){var d=h.current,p=h.previous;if(s[d]){r={};for(var v=d,g=p;g!==d;)r[v]=g,v=g,g=a[g];r[v]=g}else s[d]=d,delete o[d],a[d]=p},leave:function(h){var d=h.current;l[d]=d,delete s[d]},allowTraversal:function(h){var d=h.next;return r?!1:!l[d]}};Object.keys(o).length;){var c=Object.keys(o)[0];(0,XUe.default)(e,c,u)}return r},Qle=function(e,r,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=(0,Yle.default)(e,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(c.length)for(var f=c[0],h=f.id,d=[f],p=(i={},i[h]=f,i),v=(a={},a[h]=new Set,a);d.length>0;)for(var g=d.pop(),m=g.id,y=(0,qle.getNeighbors)(m,e.edges),w=function(S){var E,_=y[S],k=e.nodes.find(function(F){return F.id===_});if(_===m)o.push((E={},E[_]=g,E));else if(!(_ in v))p[_]=g,d.push(k),v[_]=new Set([g]);else if(!v[m].has(k)){for(var C=!0,M=[k,g],A=p[m];v[_].size&&!v[_].has(A)&&(M.push(A),A!==p[A.id]);)A=p[A.id];if(M.push(A),r&&n?(C=!1,M.findIndex(function(F){return r.indexOf(F.id)>-1})>-1&&(C=!0)):r&&!n&&M.findIndex(function(F){return r.indexOf(F.id)>-1})>-1&&(C=!1),C){for(var T={},D=1;D<M.length;D+=1)T[M[D-1].id]=M[D];M.length&&(T[M[M.length-1].id]=M[0]),o.push(T)}v[_].add(g)}},b=0;b<y.length;b+=1)w(b)}return o};tc.detectAllUndirectedCycle=Qle;var Zle=function(e,r,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(A){for(var T=[A];T.length>0;){var D=T.pop();a.has(D)&&(a.delete(D),o[D.id].forEach(function(F){T.push(F)}),o[D.id].clear())}},f=function M(A,T,D){var F=!1;if(r&&n===!1&&r.indexOf(A.id)>-1)return F;i.push(A),a.add(A);for(var R=D[A.id],B=0;B<R.length;B+=1){var N=l[R[B]];if(N===T){for(var O={},L=1;L<i.length;L+=1)O[i[L-1].id]=i[L];i.length&&(O[i[i.length-1].id]=i[0]),s.push(O),F=!0}else a.has(N)||M(N,T,D)&&(F=!0)}if(F)c(A);else for(var B=0;B<R.length;B+=1){var N=l[R[B]];o[N.id].has(A)||o[N.id].add(A)}return i.pop(),F},h=e.nodes,d=h===void 0?[]:h,p=0;p<d.length;p+=1){var v=d[p],g=v.id;u[g]=p,l[p]=v}if(r&&n)for(var m=function(A){var T=r[A];u[d[A].id]=u[T],u[T]=0,l[0]=d.find(function(D){return D.id===T}),l[u[d[A].id]]=d[A]},p=0;p<r.length;p++)m(p);for(var y=function(A){for(var T,D,F=1/0,R=0;R<A.length;R+=1)for(var B=A[R],N=0;N<B.length;N++){var O=u[B[N].id];O<F&&(F=O,D=R)}for(var L=A[D],G=[],R=0;R<L.length;R+=1){var q=L[R];G[q.id]=[];for(var K=0,V=(0,qle.getNeighbors)(q.id,e.edges,"target").filter(function(xe){return L.map(function(Ie){return Ie.id}).indexOf(xe)>-1});K<V.length;K++){var le=V[K];le===q.id&&!(n===!1&&r.indexOf(q.id)>-1)?s.push((T={},T[q.id]=q,T)):G[q.id].push(u[le])}}return{component:L,adjList:G,minIdx:F}},w=0;w<d.length;){var b=d.filter(function(M){return u[M.id]>=w}),x=(0,Yle.detectStrongConnectComponents)({nodes:b,edges:e.edges}).filter(function(M){return M.length>1});if(x.length===0)break;var S=y(x),E=S.minIdx,_=S.adjList,k=S.component;if(k.length>1){k.forEach(function(M){o[M.id]=new Set});var C=l[E];if(r&&n&&r.indexOf(C.id)===-1)return s;f(C,C,_),w=E+1}else break}return s};tc.detectAllDirectedCycle=Zle;var QUe=function(e,r,n,i){return i===void 0&&(i=!0),r?Zle(e,n,i):Qle(e,n,i)};tc.detectAllCycles=QUe;var ZUe=KUe;tc.default=ZUe;var hy={};const Jle=xc(mSe),Db=xc(n8e);Object.defineProperty(hy,"__esModule",{value:!0});hy.default=void 0;var IW=Jle,JUe=Db,DW=Oi,eWe=function(e,r,n){for(var i=1/0,a,o=0;o<r.length;o++){var s=r[o].id;!n[s]&&e[s]<=i&&(i=e[s],a=r[o])}return a},tWe=function(e,r,n,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,w){var b=y.id;c[b]=1/0,b===r&&(c[b]=0)});for(var h=o.length,d=function(w){var b=eWe(c,o,u),x=b.id;if(u[x]=!0,c[x]===1/0)return"continue";var S=[];n?S=(0,DW.getOutEdgesNodeId)(x,l):S=(0,DW.getEdgesByNodeId)(x,l),S.forEach(function(E){var _=E.target,k=E.source,C=_===x?k:_,M=i&&E[i]?E[i]:1;c[C]>c[b.id]+M?(c[C]=c[b.id]+M,f[C]=[b.id]):c[C]===c[b.id]+M&&f[C].push(b.id)})},p=0;p<h;p++)d();f[r]=[r];var v={};for(var g in c)c[g]!==1/0&&eue(r,g,f,v);var m={};for(var g in v)m[g]=v[g][0];return{length:c,path:m,allPath:v}},rWe=tWe;hy.default=rWe;function eue(t,e,r,n){if(t===e)return[t];if(n[e])return n[e];for(var i=[],a=0,o=r[e];a<o.length;a++){var s=o[a],l=eue(t,s,r,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];(0,JUe.isArray)(f)?i.push((0,IW.__spreadArray)((0,IW.__spreadArray)([],f,!0),[e],!1)):i.push([f,e])}}return n[e]=i,n[e]}var Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.findShortestPath=Bm.findAllPath=void 0;var nWe=iWe(hy),xE=Oi;function iWe(t){return t&&t.__esModule?t:{default:t}}var aWe=function(e,r,n,i,a){var o=(0,nWe.default)(e,r,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}};Bm.findShortestPath=aWe;var oWe=function(e,r,n,i){var a;if(r===n)return[[r]];var o=e.edges,s=o===void 0?[]:o,l=[r],u=(a={},a[r]=!0,a),c=[],f=[],h=i?(0,xE.getNeighbors)(r,s,"target"):(0,xE.getNeighbors)(r,s);for(c.push(h);l.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var p=d.shift();p&&(l.push(p),u[p]=!0,h=i?(0,xE.getNeighbors)(p,s,"target"):(0,xE.getNeighbors)(p,s),c.push(h.filter(function(m){return!u[m]})))}else{var v=l.pop();u[v]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var v=l.pop();u[v]=!1,c.pop()}}return f};Bm.findAllPath=oWe;var Pb={};Object.defineProperty(Pb,"__esModule",{value:!0});Pb.default=void 0;var sWe=lWe(Uv);function lWe(t){return t&&t.__esModule?t:{default:t}}var uWe=function(e,r){for(var n=(0,sWe.default)(e,r),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},cWe=uWe;Pb.default=cWe;var gA={};Object.defineProperty(gA,"__esModule",{value:!0});gA.default=void 0;var fWe=dWe(Uv),hWe=Oi;function dWe(t){return t&&t.__esModule?t:{default:t}}var pWe=function(e,r,n,i){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(w,b){var x=(0,hWe.uniqueId)();w.clusterId=x,u[x]={id:x,nodes:[w]},c[w.id]={node:w,idx:b}});var f=(0,fWe.default)(e,r),h={};f.forEach(function(w,b){var x=o[b].id;h[x]={},w.forEach(function(S,E){if(S){var _=o[E].id;h[x][_]=S}})});for(var d=0,p=function(){var b=!1;if(o.forEach(function(x){var S={};Object.keys(h[x.id]).forEach(function(D){var F=h[x.id][D],R=c[D].node,B=R.clusterId;S[B]||(S[B]=0),S[B]+=F});var E=-1/0,_=[];if(Object.keys(S).forEach(function(D){E<S[D]?(E=S[D],_=[D]):E===S[D]&&_.push(D)}),!(_.length===1&&_[0]===x.clusterId)){var k=_.indexOf(x.clusterId);if(k>=0&&_.splice(k,1),_&&_.length){b=!0;var C=u[x.clusterId],M=C.nodes.indexOf(x);C.nodes.splice(M,1);var A=Math.floor(Math.random()*_.length),T=u[_[A]];T.nodes.push(x),x.clusterId=T.id}}}),!b)return"break";d++};d<i;){var v=p();if(v==="break")break}Object.keys(u).forEach(function(w){var b=u[w];(!b.nodes||!b.nodes.length)&&delete u[w]});var g=[],m={};l.forEach(function(w){var b=w.source,x=w.target,S=w[n]||1,E=c[b].node.clusterId,_=c[x].node.clusterId,k="".concat(E,"---").concat(_);if(m[k])m[k].weight+=S,m[k].count++;else{var C={source:E,target:_,weight:S,count:1};m[k]=C,g.push(C)}});var y=[];return Object.keys(u).forEach(function(w){y.push(u[w])}),{clusters:y,clusterEdges:g}},vWe=pWe;gA.default=vWe;var mA={},Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.default=void 0;var gWe=Db,mWe=function(){function t(e){this.arr=e}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new t(i)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new t(n);if(!(n!=null&&n.length))return new t(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new t(i)}},t.prototype.avg=function(e){var r=[];if(e!==0)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return i}},t.prototype.euclideanDistance=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=(0,gWe.clone)(this.arr);r.sort(function(o,s){return o-s});var n=r[r.length-1],i=r[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(n-i);return new t(e)},t.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var r=0;for(var n in this.arr)r+=Math.pow(this.arr[n],2);return Math.sqrt(r)},t.prototype.dot=function(e){var r,n=e.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*e.arr[a];return i}else console.error("The two vectors are unequal in length.")},t.prototype.equal=function(e){var r,n=e.arr;if(((r=this.arr)===null||r===void 0?void 0:r.length)!==(n==null?void 0:n.length))return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},t}(),yWe=mWe;Lb.default=yWe;var rc={},$m={};Object.defineProperty($m,"__esModule",{value:!0});$m.secondReg=$m.dateReg=void 0;var wWe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;$m.secondReg=wWe;var bWe=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;$m.dateReg=bWe;Object.defineProperty(rc,"__esModule",{value:!0});rc.getPropertyWeight=rc.getAllSortProperties=rc.getAllProperties=rc.default=void 0;var PW=$m,Y8=function(e,r){e===void 0&&(e=[]),r===void 0&&(r=100);var n={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(PW.secondReg)&&!"".concat(a.properties[o]).match(PW.dateReg)&&isNaN(Number(a.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var i=Object.keys(n).sort(function(a,o){return n[o]-n[a]});return i.length<r?i:i.slice(0,r)};rc.getAllSortProperties=Y8;var xWe=function(e,r){return r.map(function(n){return e.hasOwnProperty(n)?e[n]:0})},tue=function(e){for(var r=Y8(e),n=[],i=0;i<e.length;i++)n[i]=xWe(e[i].properties,r);return n};rc.getPropertyWeight=tue;var rue=function(e,r){r===void 0&&(r=void 0);var n=[];return e.forEach(function(i){r===void 0&&n.push(i),i[r]!==void 0&&n.push(i[r])}),n};rc.getAllProperties=rue;var SWe={getAllSortProperties:Y8,getPropertyWeight:tue,getAllProperties:rue};rc.default=SWe;var nc={},Rb={};Object.defineProperty(Rb,"__esModule",{value:!0});Rb.DistanceType=void 0;var a4;Rb.DistanceType=a4;(function(t){t.EuclideanDistance="euclideanDistance"})(a4||(Rb.DistanceType=a4={}));Object.defineProperty(nc,"__esModule",{value:!0});nc.oneHot=nc.getDistance=nc.getAllKeyValueMap=nc.default=void 0;var LW=Db,RW=Rb,NW=EWe(Lb);function EWe(t){return t&&t.__esModule?t:{default:t}}var q8=function(e,r,n){var i=[];r!=null&&r.length?i=r:(e.forEach(function(o){i=i.concat(Object.keys(o))}),i=(0,LW.uniq)(i));var a={};return i.forEach(function(o){var s=[];e.forEach(function(l){l[o]!==void 0&&l[o]!==""&&s.push(l[o])}),s.length&&!(n!=null&&n.includes(o))&&(a[o]=(0,LW.uniq)(s))}),a};nc.getAllKeyValueMap=q8;var nue=function(e,r,n){var i=q8(e,r,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(l){return l.every(function(u){return typeof u=="number"})});return e.forEach(function(l,u){var c=[];Object.keys(i).forEach(function(f){var h=l[f],d=i[f],p=d.findIndex(function(m){return h===m}),v=[];if(s)v.push(h);else for(var g=0;g<d.length;g++)g===p?v.push(1):v.push(0);c=c.concat(v)}),a[u]=c}),a};nc.oneHot=nue;var iue=function(e,r,n,i){n===void 0&&(n=RW.DistanceType.EuclideanDistance);var a=0;switch(n){case RW.DistanceType.EuclideanDistance:a=new NW.default(e).euclideanDistance(new NW.default(r));break}return a};nc.getDistance=iue;var _We={getAllKeyValueMap:q8,oneHot:nue,getDistance:iue};nc.default=_We;Object.defineProperty(mA,"__esModule",{value:!0});mA.default=void 0;var CWe=Db,kWe=aue(Uv),p1=aue(Lb),MWe=rc,AWe=nc;function aue(t){return t&&t.__esModule?t:{default:t}}var FW=function(e,r,n,i){for(var a=r.length,o=2*i,s=0,l=0;l<a;l++)for(var u=e[l].clusterId,c=0;c<a;c++){var f=e[c].clusterId;if(u===f){var h=r[l][c]||0,d=n[l]||0,p=n[c]||0;s+=h-d*p/o}}return s*=1/o,s},TI=function(e,r){e===void 0&&(e=[]);for(var n=e.length,i=new p1.default([]),a=0;a<n;a++)i=i.add(new p1.default(r[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new p1.default(r[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new p1.default(r[a]);e[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var h=new p1.default(r[f]);c[a][f]=l.squareEuclideanDistance(h),e[a].clusterInertial+=c[a][f]}}for(var d=0,p=2*n*s,a=0;a<n;a++)for(var v=e[a].clusterId,f=0;f<n;f++){var g=e[f].clusterId;if(!(a===f||v!==g)){var m=e[a].clusterInertial*e[f].clusterInertial/Math.pow(p,2)-c[a][f]/p;d+=m}}return Number(d.toFixed(4))},TWe=function(e,r,n,i,a,o,s,l,u){r===void 0&&(r=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),l===void 0&&(l=["id"]),u===void 0&&(u=1);var c=e.nodes,f=c===void 0?[]:c,h=e.edges,d=h===void 0?[]:h,p=[];if(a){f.forEach(function(O,L){O.properties=O.properties||{},O.originIndex=L});var v=[];f.every(function(O){return O.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(f.map(function(O){return O.nodeType}))),f.forEach(function(O){O.properties.nodeType=v.findIndex(function(L){return L===O.nodeType})}));var g=(0,MWe.getAllProperties)(f,o);p=(0,AWe.oneHot)(g,s,l)}var m=1,y={},w={};f.forEach(function(O,L){var G=String(m++);O.clusterId=G,y[G]={id:G,nodes:[O]},w[O.id]={node:O,idx:L}});var b=(0,kWe.default)(e,r),x=[],S={},E=0;b.forEach(function(O,L){var G=0,q=f[L].id;S[q]={},O.forEach(function(K,V){if(K){G+=K;var le=f[V].id;S[q][le]=K,E+=K}}),x.push(G)}),E/=2;for(var _=1/0,k=1/0,C=0,M=[],A={};;){a&&f.every(function(O){return O.hasOwnProperty("properties")})?_=FW(f,b,x,E)+TI(f,p)*u:_=FW(f,b,x,E),C===0&&(k=_,M=f,A=y);var T=_>0&&_>k&&_-k<i;if(_>k&&(M=f.map(function(O){return{node:O,clusterId:O.clusterId}}),A=(0,CWe.clone)(y),k=_),T||C>100)break;C++,Object.keys(y).forEach(function(O){var L=0;d.forEach(function(G){var q=G.source,K=G.target,V=w[q].node.clusterId,le=w[K].node.clusterId;(V===O&&le!==O||le===O&&V!==O)&&(L=L+(G[n]||1))}),y[O].sumTot=L}),f.forEach(function(O,L){var G=y[O.clusterId],q=0,K,V=x[L]/(2*E),le=0,ge=G.nodes;ge.forEach(function(yt){var Tt=w[yt.id].idx;le+=b[L][Tt]||0});var xe=le-G.sumTot*V,Ie=ge.filter(function(yt){return yt.id!==O.id});Ie.forEach(function(yt,Tt){p[yt.originIndex]});var He=TI(Ie,p)*u,Ge=S[O.id];if(Object.keys(Ge).forEach(function(yt){var Tt=w[yt].node,kt=Tt.clusterId;if(kt!==O.clusterId){var mt=y[kt],xt=mt.nodes;if(!(!xt||!xt.length)){var Nt=0;xt.forEach(function(Ee){var fe=w[Ee.id].idx;Nt+=b[L][fe]||0});var De=Nt-mt.sumTot*V,J=xt.concat([O]);J.forEach(function(Ee,fe){p[Ee.originIndex]});var P=TI(J,p)*u,me=De-xe;a&&(me=De+P-(xe+He)),me>q&&(q=me,K=mt)}}}),q>0){K.nodes.push(O);var ht=O.clusterId;O.clusterId=K.id;var dt=G.nodes.indexOf(O);G.nodes.splice(dt,1);var It=0,_t=0;d.forEach(function(yt){var Tt=yt.source,kt=yt.target,mt=w[Tt].node.clusterId,xt=w[kt].node.clusterId;(mt===K.id&&xt!==K.id||xt===K.id&&mt!==K.id)&&(It=It+(yt[n]||1)),(mt===ht&&xt!==ht||xt===ht&&mt!==ht)&&(_t=_t+(yt[n]||1))}),K.sumTot=It,G.sumTot=_t}})}var D={},F=0;Object.keys(A).forEach(function(O){var L=A[O];if(!L.nodes||!L.nodes.length){delete A[O];return}var G=String(F+1);G!==O&&(L.id=G,L.nodes=L.nodes.map(function(q){return{id:q.id,clusterId:G}}),A[G]=L,D[O]=G,delete A[O],F++)}),M.forEach(function(O){var L=O.node,G=O.clusterId;L&&(L.clusterId=G,L.clusterId&&D[L.clusterId]&&(L.clusterId=D[L.clusterId]))});var R=[],B={};d.forEach(function(O){var L=O.source,G=O.target,q=O[n]||1,K=w[L].node.clusterId,V=w[G].node.clusterId;if(!(!K||!V)){var le="".concat(K,"---").concat(V);if(B[le])B[le].weight+=q,B[le].count++;else{var ge={source:K,target:V,weight:q,count:1};B[le]=ge,R.push(ge)}}});var N=[];return Object.keys(A).forEach(function(O){N.push(A[O])}),{clusters:N,clusterEdges:R}},OWe=TWe;mA.default=OWe;var yA={},wA={};Object.defineProperty(wA,"__esModule",{value:!0});wA.default=void 0;var IWe=function(){function t(e){this.count=e.length,this.parent={};for(var r=0,n=e;r<n.length;r++){var i=n[r];this.parent[i]=i}}return t.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},t.prototype.union=function(e,r){var n=this.find(e),i=this.find(r);n!==i&&(n<i?(this.parent[r]!==r&&this.union(this.parent[r],e),this.parent[r]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],r),this.parent[e]=this.parent[r]))},t.prototype.connected=function(e,r){return this.find(e)===this.find(r)},t}(),DWe=IWe;wA.default=DWe;var bA={};Object.defineProperty(bA,"__esModule",{value:!0});bA.default=void 0;var PWe=function(e,r){return e-r},LWe=function(){function t(e){e===void 0&&(e=PWe),this.compareFn=e,this.list=[]}return t.prototype.getLeft=function(e){return 2*e+1},t.prototype.getRight=function(e){return 2*e+2},t.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var e=this.top(),r=this.list.pop();return this.list.length>0&&(this.list[0]=r,this.moveDown(0)),e},t.prototype.insert=function(e){if(e!==null){this.list.push(e);var r=this.list.length-1;return this.moveUp(r),!0}return!1},t.prototype.moveUp=function(e){for(var r=this.getParent(e);e&&e>0&&this.compareFn(this.list[r],this.list[e])>0;){var n=this.list[r];this.list[r]=this.list[e],this.list[e]=n,e=r,r=this.getParent(e)}},t.prototype.moveDown=function(e){var r,n=e,i=this.getLeft(e),a=this.getRight(e),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),e!==n&&(r=[this.list[n],this.list[e]],this.list[e]=r[0],this.list[n]=r[1],this.moveDown(n))},t}(),RWe=LWe;bA.default=RWe;Object.defineProperty(yA,"__esModule",{value:!0});yA.default=void 0;var NWe=oue(wA),FWe=oue(bA),OI=Oi;function oue(t){return t&&t.__esModule?t:{default:t}}var BWe=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return r?g.weight-m.weight:0},f=new FWe.default(c);for((0,OI.getEdgesByNodeId)(l.id,s).forEach(function(v){f.insert(v)});!f.isEmpty();){var h=f.delMin(),d=h.source,p=h.target;u.has(d)&&u.has(p)||(n.push(h),u.has(d)||(u.add(d),(0,OI.getEdgesByNodeId)(d,s).forEach(function(v){f.insert(v)})),u.has(p)||(u.add(p),(0,OI.getEdgesByNodeId)(p,s).forEach(function(v){f.insert(v)})))}return n},BW=function(e,r){var n=[],i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(d){return d});r&&l.sort(function(d,p){return d.weight-p.weight});for(var u=new NWe.default(a.map(function(d){return d.id}));l.length>0;){var c=l.shift(),f=c.source,h=c.target;u.connected(f,h)||(n.push(c),u.union(f,h))}return n},$We=function(e,r,n){var i={prim:BWe,kruskal:BW};return n?i[n](e,r):BW(e,r)},zWe=$We;yA.default=zWe;var xA={};Object.defineProperty(xA,"__esModule",{value:!0});xA.default=void 0;var jWe=UWe(wf),GWe=Oi;function UWe(t){return t&&t.__esModule?t:{default:t}}var WWe=function(e,r,n){typeof r!="number"&&(r=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,h,d={},p={},v=0;v<f;++v){var g=l[v],m=g.id;d[m]=1/f,p[m]=1/f}for(var y=(0,jWe.default)(e);o>0&&i>r;){a=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;if(h=0,y[g.id].inDegree===0)d[m]=0;else{for(var w=(0,GWe.getNeighbors)(m,c,"source"),b=0;b<w.length;++b){var x=w[b],S=y[x].outDegree;S>0&&(h+=p[x]/S)}d[m]=n*h,a+=d[m]}}a=(1-a)/f,i=0;for(var v=0;v<f;++v){var g=l[v],m=g.id;h=d[m]+a,i+=Math.abs(h-p[m]),p[m]=h}o-=1}return p},VWe=WWe;xA.default=VWe;var SA={},EA={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.VACANT_NODE_LABEL=ki.VACANT_NODE_ID=ki.VACANT_GRAPH_ID=ki.VACANT_EDGE_LABEL=ki.VACANT_EDGE_ID=ki.Node=ki.Graph=ki.Edge=ki.AUTO_EDGE_ID=void 0;var sue=-1;ki.VACANT_EDGE_ID=sue;var Ow=-1;ki.VACANT_NODE_ID=Ow;var lue="-1";ki.VACANT_EDGE_LABEL=lue;var uue="-1";ki.VACANT_NODE_LABEL=uue;var HWe=-1;ki.VACANT_GRAPH_ID=HWe;var XWe="-1";ki.AUTO_EDGE_ID=XWe;var o4=function(){function t(e,r,n,i){e===void 0&&(e=sue),r===void 0&&(r=Ow),n===void 0&&(n=Ow),i===void 0&&(i=lue),this.id=e,this.from=r,this.to=n,this.label=i}return t}();ki.Edge=o4;var cue=function(){function t(e,r){e===void 0&&(e=Ow),r===void 0&&(r=uue),this.id=e,this.label=r,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},t}();ki.Node=cue;var YWe=function(){function t(e,r,n){e===void 0&&(e=Ow),r===void 0&&(r=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=r,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(e,r){if(!this.nodeMap[e]){var n=new cue(e,r);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[r]||(this.nodeLabelMap[r]=[]),this.nodeLabelMap[r].push(e)}},t.prototype.addEdge=function(e,r,n,i){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[r]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var a=new o4(e,r,n,i);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[r].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new o4(e,n,r,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}();ki.Graph=YWe;Object.defineProperty(EA,"__esModule",{value:!0});EA.default=void 0;var qWe=Db,Mo=ki,Cp=function(){function t(e,r,n,i,a){this.fromNode=e,this.toNode=r,this.nodeEdgeNodeLabel={nodeLabel1:n||Mo.VACANT_NODE_LABEL,edgeLabel:i||Mo.VACANT_EDGE_LABEL,nodeLabel2:a||Mo.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t}(),$W=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(e){var r=this.dfsEdgeList.length,n=e.length;if(r!==n)return!1;for(var i=0;i<r;i++)if(this.dfsEdgeList[i]!==e[i])return!1;return!0},t.prototype.notEqualTo=function(e){return!this.equalTo(e)},t.prototype.pushBack=function(e,r,n,i,a){return this.dfsEdgeList.push(new Cp(e,r,n,i,a)),this.dfsEdgeList},t.prototype.toGraph=function(e,r){e===void 0&&(e=Mo.VACANT_GRAPH_ID),r===void 0&&(r=!1);var n=new Mo.Graph(e,!0,r);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Mo.VACANT_NODE_LABEL&&n.addNode(a,l),c!==Mo.VACANT_NODE_LABEL&&n.addNode(o,c),l!==Mo.VACANT_NODE_LABEL&&c!==l&&n.addEdge(void 0,a,o,u)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,r=this.dfsEdgeList.length,n=r-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=a)}return this.rmpath},t.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(r){e[r.fromNode]||(e[r.fromNode]=!0),e[r.toNode]||(e[r.toNode]=!0)}),Object.keys(e).length},t}(),SE=function(){function t(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var r=e.edge;this.edges.push(r),this.nodesUsed[r.from]=1,this.nodesUsed[r.to]=1,this.edgesUsed[r.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},t.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},t}(),KWe=function(){function t(e){var r=e.graphs,n=e.minSupport,i=n===void 0?2:n,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,l=s===void 0?4:s,u=e.top,c=u===void 0?10:u,f=e.directed,h=f===void 0?!1:f,d=e.verbose,p=d===void 0?!1:d;this.graphs=r,this.dfsCode=new $W,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(e,r){var n=this,i=[],a=e.nodeMap;return r.edges.forEach(function(o){(n.directed||r.label<=a[o.to].label)&&i.push(o)}),i},t.prototype.findBackwardEdge=function(e,r,n,i){if(!this.directed&&r===n)return null;for(var a=e.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==r.from)){if(this.directed){if(a[r.from].label<a[n.to].label||a[r.from].label===a[n.to].label&&r.label<=c.label)return c}else if(r.label<c.label||r.label===c.label&&a[r.to].label<=a[n.to].label)return c}}return null},t.prototype.findForwardPureEdges=function(e,r,n,i){for(var a=[],o=r.to,s=e.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=e.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},t.prototype.findForwardRmpathEdges=function(e,r,n,i){for(var a=[],o=e.nodeMap,s=o[r.to].label,l=o[r.from],u=l.edges,c=u.length,f=0;f<c;f++){var h=u[f],d=o[h.to].label;r.to===h.to||n>d||i.hasNode(o[h.to])||(r.label<h.label||r.label===h.label&&s<=d)&&a.push(h)}return a},t.prototype.getSupport=function(e){var r={};return e.forEach(function(n){r[n.graphId]||(r[n.graphId]=!0)}),Object.keys(r).length},t.prototype.findMinLabel=function(e){var r=void 0;return Object.keys(e).forEach(function(n){var i=e[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!r){r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<r.nodeLabel1||a===r.nodeLabel1&&o<r.edgeLabel||a===r.nodeLabel1&&o===r.edgeLabel&&s<r.nodeLabel2)&&(r={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),r},t.prototype.isMin=function(){var e=this,r=this.dfsCode;if(this.verbose&&console.log("isMin checking",r),r.dfsEdgeList.length===1)return!0;var n=this.directed,i=r.toGraph(Mo.VACANT_GRAPH_ID,n),a=i.nodeMap,o=new $W,s={};i.nodes.forEach(function(f){var h=e.findForwardRootEdges(i,f);h.forEach(function(d){var p=a[d.to],v="".concat(f.label,"-").concat(d.label,"-").concat(p.label);s[v]||(s[v]={projected:[],nodeLabel1:f.label,edgeLabel:d.label,nodeLabel2:p.label});var g={graphId:i.id,edge:d,preNode:null};s[v].projected.push(g)})});var l=this.findMinLabel(s);if(l){o.dfsEdgeList.push(new Cp(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(h){for(var d=o.buildRmpath(),p=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[d[0]].toNode,g={},m=!1,y=0,w=n?-1:0,b=function(B){if(m)return"break";h.forEach(function(N){var O=new SE(N),L=e.findBackwardEdge(i,O.edges[d[B]],O.edges[d[0]],O);L&&(g[L.label]||(g[L.label]={projected:[],edgeLabel:L.label}),g[L.label].projected.push({graphId:i.id,edge:g,preNode:N}),y=o.dfsEdgeList[d[B]].fromNode,m=!0)})},x=d.length-1;x>w;x--){var S=b(x);if(S==="break")break}if(m){var E=e.findMinLabel(g);o.dfsEdgeList.push(new Cp(v,y,Mo.VACANT_NODE_LABEL,E.edgeLabel,Mo.VACANT_NODE_LABEL));var _=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[E.edgeLabel].projected)}var k={};m=!1;var C=0;h.forEach(function(R){var B=new SE(R),N=e.findForwardPureEdges(i,B.edges[d[0]],p,B);N.length>0&&(m=!0,C=v,N.forEach(function(O){var L="".concat(O.label,"-").concat(a[O.to].label);k[L]||(k[L]={projected:[],edgeLabel:O.label,nodeLabel2:a[O.to].label}),k[L].projected.push({graphId:i.id,edge:O,preNode:R})}))});for(var M=d.length,A=function(B){if(m)return"break";var N=d[B];h.forEach(function(O){var L=new SE(O),G=e.findForwardRmpathEdges(i,L.edges[N],p,L);G.length>0&&(m=!0,C=o.dfsEdgeList[N].fromNode,G.forEach(function(q){var K="".concat(q.label,"-").concat(a[q.to].label);k[K]||(k[K]={projected:[],edgeLabel:q.label,nodeLabel2:a[q.to].label}),k[K].projected.push({graphId:i.id,edge:q,preNode:O})}))})},x=0;x<M;x++){var T=A(x);if(T==="break")break}if(!m)return!0;var D=e.findMinLabel(k);o.dfsEdgeList.push(new Cp(C,v+1,Mo.VACANT_NODE_LABEL,D.edgeLabel,D.nodeLabel2));var F=o.dfsEdgeList.length-1;return r.dfsEdgeList[F]!==o.dfsEdgeList[F]?!1:f(k["".concat(D.edgeLabel,"-").concat(D.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,qWe.clone)(e))}},t.prototype.subGraphMining=function(e){var r=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};e.forEach(function(c){for(var f=r.graphs[c.graphId],h=f.nodeMap,d=new SE(c),p=a.length-1;p>=0;p--){var v=r.findBackwardEdge(f,d.edges[a[p]],d.edges[a[0]],d);if(v){var g="".concat(r.dfsCode.dfsEdgeList[a[p]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:r.dfsCode.dfsEdgeList[a[p]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:c.graphId,edge:v,preNode:c})}}if(!(i>=r.maxNodeNum)){var m=r.findForwardPureEdges(f,d.edges[a[0]],s,d);m.forEach(function(w){var b="".concat(o,"-").concat(w.label,"-").concat(h[w.to].label);l[b]||(l[b]={projected:[],fromNodeId:o,edgeLabel:w.label,nodeLabel2:h[w.to].label}),l[b].projected.push({graphId:c.graphId,edge:w,preNode:c})});for(var y=function(b){var x=r.findForwardRmpathEdges(f,d.edges[a[b]],s,d);x.forEach(function(S){var E="".concat(r.dfsCode.dfsEdgeList[a[b]].fromNode,"-").concat(S.label,"-").concat(h[S.to].label);l[E]||(l[E]={projected:[],fromNodeId:r.dfsCode.dfsEdgeList[a[b]].fromNode,edgeLabel:S.label,nodeLabel2:h[S.to].label}),l[E].projected.push({graphId:c.graphId,edge:S,preNode:c})})},p=0;p<a.length;p++)y(p)}}),Object.keys(u).forEach(function(c){var f=u[c],h=f.toNodeId,d=f.edgeLabel;r.dfsCode.dfsEdgeList.push(new Cp(o,h,"-1",d,"-1")),r.subGraphMining(u[c].projected),r.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],h=f.fromNodeId,d=f.edgeLabel,p=f.nodeLabel2;r.dfsCode.dfsEdgeList.push(new Cp(h,o+1,Mo.VACANT_NODE_LABEL,d,p)),r.subGraphMining(l[c].projected),r.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,r=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(e).forEach(function(l){var u=e[l],c=u.nodeMap;u.nodes.forEach(function(f,h){var d=f.label,p="".concat(l,"-").concat(d);if(!s[p]){var v=a[d]||0;v++,a[d]=v}s[p]={graphKey:l,label:d},f.edges.forEach(function(g){var m=d,y=c[g.to].label;if(!r&&m>y){var w=y;y=m,m=w}var b=g.label,x="".concat(m,"-").concat(b,"-").concat(y);if(!o[x]){var S=o[x]||0;S++,o[x]=S}})})}),Object.keys(a).forEach(function(l){var u=a[l];if(!(u<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:l}),i.push(c)}}),i},t.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var r=this.graphs;this.directed;var n={};Object.keys(r).forEach(function(i){var a=r[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=e.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var h={graphId:i,edge:u,preNode:null};n[f].projected.push(h)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Cp(0,1,s,l,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},t}(),QWe=function(e,r,n,i){var a={};return Object.keys(e).forEach(function(o,s){var l=e[o],u=new Mo.Graph(s,!0,r),c={};l.nodes.forEach(function(f,h){u.addNode(h,f[n]),c[f.id]=h}),l.edges.forEach(function(f,h){var d=c[f.source],p=c[f.target];u.addEdge(-1,d,p,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},ZWe=function(e,r,n){var i=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[r]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},zW="cluster",JWe=function(e){var r=e.graphs,n=e.directed,i=n===void 0?!1:n,a=e.nodeLabelProp,o=a===void 0?zW:a,s=e.edgeLabelProp,l=s===void 0?zW:s,u=QWe(r,i,o,l),c=e.minSupport,f=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,p=e.top,v={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:h,top:p,verbose:d,directed:i},g=new KWe(v);g.run();var m=ZWe(g.frequentSubgraphs,o,l);return m},eVe=JWe;EA.default=eVe;Object.defineProperty(SA,"__esModule",{value:!0});SA.default=void 0;var jW=Jle,GW=K8(Pb),tVe=K8(EA),UW=K8(hy),rVe=Oi;function K8(t){return t&&t.__esModule?t:{default:t}}var WW=function(e,r,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=e.nodes;return r.forEach(function(s,l){a.push(fue(o,s,l,n,i))}),a},fue=function(e,r,n,i,a){var o=[n],s=[],l={};return r.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(e[c]);var f=e[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},nVe=function(e,r,n,i,a){var o=Math.ceil(n/r),s={},l=0;return i.forEach(function(u,c){for(var f=0,h=0,d=u.nodeIdxs,p=u.neighborNum-1;f<o;){for(var v=d[1+Math.floor(Math.random()*p)],g=0;(s["".concat(c,"-").concat(v)]||s["".concat(v,"-").concat(c)])&&(v=Math.floor(Math.random()*r),g++,!(g>2*r)););if(g<2*r&&(s["".concat(c,"-").concat(v)]={start:c,end:v,distance:a[c][v]},f++,l++,l>=n))return s;if(h++,h>2*r)break}if(f<o){var m=o-f;o=(o+m)/(r-c-1)}}),s},q_=function(e,r,n,i){var a=n.nodes;return i||(i={}),Object.keys(e).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=e[o],c=(s=r[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=r[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var h=new Set(f),d=c.filter(function(y){return h.has(y)});if(!(!d||!d.length)){for(var p={},v=d.length,g=0;g<v;g++){var m=a[d[g]];i[o].nodes.push(m),p[m.id]=!0}n.edges.forEach(function(y){p[y.source]&&p[y.target]&&i[o].edges.push(y)})}}}}),i},K_=function(e,r,n,i){var a,o,s={};e.nodes.forEach(function(u){s[u.id]=u});var l=0;return!(!((a=r==null?void 0:r.edges)===null||a===void 0)&&a.length)||((o=r==null?void 0:r.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],h=r==null?void 0:r.nodes[0][n],d=r==null?void 0:r.nodes[1][n],p=r==null?void 0:r.edges[0][i];u[i]===p&&(c===h&&f===d||c===d&&f===h)&&l++}),l)},iVe=function(e,r,n){for(var i=1/0,a=0,o=function(u){var c=e[u],f=Object.keys(c).sort(function(y,w){return c[y]-c[w]}),h=10,d=[];f.forEach(function(y,w){d[w%h]||(d[w%h]={graphs:[],totalCount:0,aveCount:0}),d[w%h].graphs.push(y),d[w%h].totalCount+=c[y]});var p=0,v=[];d.forEach(function(y){var w=y.totalCount/y.graphs.length;y.aveCount=w,v.push(w);var b=0,x=y.length;y.graphs.forEach(function(S,E){var _=c[S];y.graphs.forEach(function(k,C){E!==C&&(b+=Math.abs(_-c[k]))})}),b/=x*(x-1)/2,p+=b}),p/=d.length;var g=0;v.forEach(function(y,w){v.forEach(function(b,x){w!==x&&(g+=Math.abs(y-b))}),g/=v.length*(v.length-1)/2});var m=g-p;i<m&&(i=m,a=u)},s=0;s<r;s++)o(s);return{structure:n[a],structureCountMap:e[a]}},VW=function(e,r){var n={},i={};return e.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[r];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},HW=function(e,r,n){var i={},a={};return e.forEach(function(o,s){i["".concat(rVe.uniqueId)]={idx:s,edge:o};var l=o[r];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},XW=function(e,r,n){var i=r.length,a={};return r.forEach(function(o,s){for(var l=n?0:s+1,u=e[s].id,c=l;c<i;c++)if(s!==c){var f=e[c].id,h=o[c];a["".concat(u,"-").concat(f)]=h,n||(a["".concat(f,"-").concat(u)]=h)}}),a},aVe=function(e,r,n,i,a,o,s,l,u,c,f){var h,d="".concat(r.id,"-").concat(n.id);if(c&&c[d])return c[d];var p=f?f[d]:void 0;if(!p){var v=(h={},h[d]={start:i[r.id].idx,end:i[n.id].idx,distance:a},h);f=q_(v,o,e,f),p=f[d]}return K_(p,s,l,u)},YW=function(e,r,n,i){var a,o,s,l=(a=e[r])===null||a===void 0?void 0:a.degree,u=(o=e[r])===null||o===void 0?void 0:o.inDegree,c=(s=e[r])===null||s===void 0?void 0:s.outDegree;return e[r]===void 0&&(l=1/0,u=1/0,c=1/0,i[r].forEach(function(f){var h=n[f.id].degree;l>h&&(l=h);var d=n[f.id].inDegree;u>d&&(u=d);var p=n[f.id].outDegree;c>p&&(c=p)}),e[r]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},oVe=function(e,r,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var c=(0,GW.default)(e,n),f=(0,GW.default)(r,n),h=XW(e.nodes,c,n),d=XW(r.nodes,f,n),p=VW(e.nodes,o),v=p.nodeMap,g=p.nodeLabelMap,m=VW(r.nodes,o),y=m.nodeMap,w=m.nodeLabelMap;HW(e.edges,s,v);var b=HW(r.edges,s,y).edgeLabelMap,x=[];f==null||f.forEach(function(De){x=x.concat(De)}),a||(a=Math.max.apply(Math,(0,jW.__spreadArray)((0,jW.__spreadArray)([],x,!1),[2],!1))),i||(i=a);var S=WW(e,c,o,i),E=WW(r,f,o,i),_=Math.min(100,u*(u-1)/2),k=nVe(i,u,_,S,c),C=q_(k,S,e),M=10,A=1,T=1,D=4,F={graphs:C,nodeLabelProp:o,edgeLabelProp:s,minSupport:A,minNodeNum:T,maxNodeNum:D,directed:n},R=(0,tVe.default)(F).slice(0,M),B=R.length,N=[];R.forEach(function(De,J){N[J]={},Object.keys(C).forEach(function(P){var me=C[P],Ee=K_(me,De,o,s);N[J][P]=Ee})});var O=iVe(N,B,R),L=O.structure,G=O.structureCountMap,q=r.nodes[0],K=[],V=(l=r.nodes[0])===null||l===void 0?void 0:l[o],le=-1/0;r.nodes.forEach(function(De){var J=De[o],P=g[J];(P==null?void 0:P.length)>le&&(le=P.length,K=P,V=J,q=De)});var ge={},xe={},Ie={},He={},Ge={},ht={};Object.keys(w).forEach(function(De,J){Ge[De]=[],n&&(ht[De]=[]);var P=w[De],me={};P.forEach(function($e){var Ue=d["".concat(q.id,"-").concat($e.id)];if(Ue&&Ge[De].push(Ue),me["".concat(q.id,"-").concat($e.id)]={start:0,end:y[$e.id].idx,distance:Ue},n){var ut=d["".concat($e.id,"-").concat(q.id)];ut&&ht[De].push(ut)}}),Ge[De]=Ge[De].sort(function($e,Ue){return $e-Ue}),n&&(ht[De]=ht[De].sort(function($e,Ue){return $e-Ue})),xe=q_(me,E,r,xe);var Ee=[];if(Object.keys(me).forEach(function($e){if(Ie[$e]){Ee.push(Ie[$e]);return}var Ue=xe[$e];Ie[$e]=K_(Ue,L,o,s),Ee.push(Ie[$e])}),Ee=Ee.sort(function($e,Ue){return Ue-$e}),He["".concat(q.id,"-").concat(De)]=Ee,De!==V)for(var fe=(K==null?void 0:K.length)||0,ke=function(Ue){var ut=K[Ue],Mt=S[v[ut.id].idx],$t=Mt.nodeLabelCountMap[De],At=w[De].length;if(!$t||$t.count<At)return K.splice(Ue,1),"continue";for(var wr=!1,Ar=0;Ar<At;Ar++)if($t.dists[Ar]>Ge[De][Ar]){wr=!0;break}if(wr)return K.splice(Ue,1),"continue";var Zr={};Mt.neighbors.forEach(function(gr){var nn=h["".concat(ut.id,"-").concat(gr.id)];Zr["".concat(ut.id,"-").concat(gr.id)]={start:v[ut.id].idx,end:v[gr.id].idx,distance:nn}}),C=q_(Zr,S,e,C);var Hr=[];Object.keys(Zr).forEach(function(gr){if(G[gr]){Hr.push(G[gr]);return}var nn=C[gr];G[gr]=K_(nn,L,o,s),Hr.push(G[gr])}),Hr=Hr.sort(function(gr,nn){return nn-gr});for(var Xn=!1,Ar=0;Ar<At;Ar++)if(Hr[Ar]<Ee[Ar]){Xn=!0;break}if(Xn)return K.splice(Ue,1),"continue"},Be=fe-1;Be>=0;Be--)ke(Be)});var dt=[];K==null||K.forEach(function(De){for(var J=v[De.id].idx,P=fue(e.nodes,c[J],J,o,a),me=P.neighbors,Ee=me.length,fe=!1,ke=Ee-1;ke>=0;ke--){if(me.length+1<r.nodes.length){fe=!0;return}var Be=me[ke],$e=Be[o];if(!w[$e]||!w[$e].length){me.splice(ke,1);continue}if(!Ge[$e]||!Ge[$e].length){me.splice(ke,1);continue}var Ue="".concat(De.id,"-").concat(Be.id),ut=h[Ue],Mt=Ge[$e].length-1,$t=Ge[$e][Mt];if(ut>$t){me.splice(ke,1);continue}if(n){var At="".concat(Be.id,"-").concat(De.id),wr=h[At];Mt=ht[$e].length-1;var Ar=ht[$e][Mt];if(wr>Ar){me.splice(ke,1);continue}}var Zr=G[Ue]?G[Ue]:aVe(e,De,Be,v,ut,S,L,o,s,G,C),Hr="".concat(q.id,"-").concat($e),Xn=He[Hr][He[Hr].length-1];if(Zr<Xn){me.splice(ke,1);continue}var gr=YW(ge,$e,y,w),nn=gr.minPatternNodeLabelDegree;if(gr.minPatternNodeLabelInDegree,gr.minPatternNodeLabelOutDegree,v[Be.id].degree<nn){me.splice(ke,1);continue}}fe||dt.push({nodes:[De].concat(me)})});var It=(0,UW.default)(r,q.id,!1).length,_t={};n?(Object.keys(It).forEach(function(De){var J=y[De].node[o];_t[J]?_t[J].push(It[De]):_t[J]=[It[De]]}),Object.keys(_t).forEach(function(De){_t[De].sort(function(J,P){return J-P})})):_t=Ge;for(var yt=dt.length,Tt=function(J){var P=dt[J],me=P.nodes[0],Ee={},fe={};P.nodes.forEach(function(Zt,Jr){fe[Zt.id]={idx:Jr,node:Zt,degree:0,inDegree:0,outDegree:0};var Bt=Zt[o];Ee[Bt]?Ee[Bt]++:Ee[Bt]=1});var ke=[],Be={};e.edges.forEach(function(Zt){fe[Zt.source]&&fe[Zt.target]&&(ke.push(Zt),Be[Zt[s]]?Be[Zt[s]]++:Be[Zt[s]]=1,fe[Zt.source].degree++,fe[Zt.target].degree++,fe[Zt.source].outDegree++,fe[Zt.target].inDegree++)});for(var $e=Object.keys(b).length,Ue=!1,ut=0;ut<$e;ut++){var Mt=Object.keys(b)[ut];if(!Be[Mt]||Be[Mt]<b[Mt].length){Ue=!0;break}}if(Ue)return dt.splice(J,1),"continue";var $t=ke.length;if($t<r.edges.length)return dt.splice(J,1),"break";for(var At=!1,wr=function(Jr){var Bt=ke[Jr],pn=Bt[s],zn=b[pn];if(!zn||!zn.length)return Be[pn]--,zn&&Be[pn]<zn.length?(At=!0,"break"):(ke.splice(Jr,1),fe[Bt.source].degree--,fe[Bt.target].degree--,fe[Bt.source].outDegree--,fe[Bt.target].inDegree--,"continue");var Ta=fe[Bt.source].node[o],Oa=fe[Bt.target].node[o],ln=!1;if(zn.forEach(function(Uo){var Os=y[Uo.source].node,un=y[Uo.target].node;Os[o]===Ta&&un[o]===Oa&&(ln=!0),!n&&Os[o]===Oa&&un[o]===Ta&&(ln=!0)}),!ln)return Be[pn]--,zn&&Be[pn]<zn.length?(At=!0,"break"):(ke.splice(Jr,1),fe[Bt.source].degree--,fe[Bt.target].degree--,fe[Bt.source].outDegree--,fe[Bt.target].inDegree--,"continue")},ut=$t-1;ut>=0;ut--){var Ar=wr(ut);if(Ar==="break")break}if(At)return dt.splice(J,1),"continue";P.edges=ke;var Zr=(0,UW.default)(P,P.nodes[0].id,!1).length;if(Object.keys(Zr).reverse().forEach(function(Zt){if(!(Zt===P.nodes[0].id||At)){if(Zr[Zt]===1/0){var Jr=fe[Zt].node[o];if(Ee[Jr]--,Ee[Jr]<w[Jr].length){At=!0;return}var Bt=P.nodes.indexOf(fe[Zt].node);P.nodes.splice(Bt,1),fe[Zt]=void 0;return}var pn=v[Zt].node[o];if(!_t[pn]||!_t[pn].length||Zr[Zt]>_t[pn][_t[pn].length-1]){var Jr=fe[Zt].node[o];if(Ee[Jr]--,Ee[Jr]<w[Jr].length){At=!0;return}var Bt=P.nodes.indexOf(fe[Zt].node);P.nodes.splice(Bt,1),fe[Zt]=void 0}}}),At)return dt.splice(J,1),"continue";for(var Hr=!0,Xn=0;Hr&&!At;){Hr=!1;var gr=n?fe[me.id].degree<y[q.id].degree||fe[me.id].inDegree<y[q.id].inDegree||fe[me.id].outDegree<y[q.id].outDegree:fe[me.id].degree<y[q.id].degree;if(gr){At=!0;break}if(Ee[me[o]]<w[me[o]].length){At=!0;break}for(var nn=P.nodes.length,_i=nn-1;_i>=0;_i--){var fn=P.nodes[_i],Ma=fe[fn.id].degree,ca=fe[fn.id].inDegree,Go=fe[fn.id].outDegree,an=fn[o],Yn=YW(ge,an,y,w),qn=Yn.minPatternNodeLabelDegree,su=Yn.minPatternNodeLabelInDegree,lu=Yn.minPatternNodeLabelOutDegree,uu=n?Ma<qn||ca<su||Go<lu:Ma<qn;if(uu){if(Ee[fn[o]]--,Ee[fn[o]]<w[fn[o]].length){At=!0;break}P.nodes.splice(_i,1),fe[fn.id]=void 0,Hr=!0}}if(At||!Hr&&Xn!==0)break;$t=ke.length;for(var Aa=$t-1;Aa>=0;Aa--){var xn=ke[Aa];if(!fe[xn.source]||!fe[xn.target]){ke.splice(Aa,1);var sn=xn[s];if(Be[sn]--,fe[xn.source]&&(fe[xn.source].degree--,fe[xn.source].outDegree--),fe[xn.target]&&(fe[xn.target].degree--,fe[xn.target].inDegree--),b[sn]&&Be[sn]<b[sn].length){At=!0;break}Hr=!0}}Xn++}if(At||At||P.nodes.length<r.nodes.length||ke.length<r.edges.length)return dt.splice(J,1),"continue"},kt=yt-1;kt>=0;kt--){var mt=Tt(kt);if(mt==="break")break}for(var xt=dt.length,Nt=function(J){var P=dt[J],me={};P.edges.forEach(function(ke){var Be="".concat(ke.source,"-").concat(ke.target,"-").concat(ke.label);me[Be]?me[Be]++:me[Be]=1});for(var Ee=function(Be){var $e=dt[Be],Ue={};$e.edges.forEach(function(Mt){var $t="".concat(Mt.source,"-").concat(Mt.target,"-").concat(Mt.label);Ue[$t]?Ue[$t]++:Ue[$t]=1});var ut=!0;Object.keys(Ue).length!==Object.keys(me).length?ut=!1:Object.keys(me).forEach(function(Mt){Ue[Mt]!==me[Mt]&&(ut=!1)}),ut&&dt.splice(Be,1)},fe=xt-1;fe>J;fe--)Ee(fe);xt=dt.length},kt=0;kt<=xt-1;kt++)Nt(kt);return dt}}},sVe=oVe;SA.default=sVe;(function(t){function e(b){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},e(b)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return u.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return u.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return a.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return g.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return a.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return p.default}});var r=w(Uv),n=w(dA),i=w(Ld),a=y(wf),o=w(tc),s=w(vA),l=w(hy),u=Bm,c=w(Pb),f=w(gA),h=w(mA),d=w(yA),p=w(xA),v=w(SA),g=Oi;function m(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,S=new WeakMap;return(m=function(_){return _?S:x})(b)}function y(b,x){if(!x&&b&&b.__esModule)return b;if(b===null||e(b)!=="object"&&typeof b!="function")return{default:b};var S=m(x);if(S&&S.has(b))return S.get(b);var E={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in b)if(k!=="default"&&Object.prototype.hasOwnProperty.call(b,k)){var C=_?Object.getOwnPropertyDescriptor(b,k):null;C&&(C.get||C.set)?Object.defineProperty(E,k,C):E[k]=b[k]}return E.default=b,S&&S.set(b,E),E}function w(b){return b&&b.__esModule?b:{default:b}}})(Ule);function s4(t){"@babel/helpers - typeof";return s4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s4(t)}Object.defineProperty(hA,"__esModule",{value:!0});hA.default=void 0;var II=lVe(Ule),qW=Pd;function hue(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(hue=function(i){return i?r:e})(t)}function lVe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||s4(t)!=="object"&&typeof t!="function")return{default:t};var r=hue(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}var DI=typeof self<"u"?self:{};DI.onmessage=function(t){var e=t.data,r=e._algorithmType,n=e.data;if(r){if(typeof II[r]=="function"){var i=II[r].apply(II,n);DI.postMessage({_algorithmType:qW.MESSAGE.SUCCESS,data:i});return}DI.postMessage({_algorithmType:qW.MESSAGE.FAILURE})}};var uVe=null;hA.default=uVe;Object.defineProperty(fA,"__esModule",{value:!0});fA.default=void 0;var cVe=Pd,fVe=hVe(hA);function hVe(t){return t&&t.__esModule?t:{default:t}}var dVe=function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise(function(i,a){var o=new fVe.default;o.postMessage({_algorithmType:e,data:r}),o.onmessage=function(s){var l=s.data,u=l.data,c=l._algorithmType;cVe.MESSAGE.SUCCESS===c?i(u):a(),o.terminate()}})}},pVe=dVe;fA.default=pVe;Object.defineProperty(Fr,"__esModule",{value:!0});Fr.pageRankAsync=Fr.minimumSpanningTreeAsync=Fr.louvainAsync=Fr.labelPropagationAsync=Fr.getOutDegreeAsync=Fr.getNeighborsAsync=Fr.getInDegreeAsync=Fr.getDegreeAsync=Fr.getAdjMatrixAsync=Fr.floydWarshallAsync=Fr.findShortestPathAsync=Fr.findAllPathAsync=Fr.dijkstraAsync=Fr.detectCycleAsync=Fr.detectAllUndirectedCycleAsync=Fr.detectAllDirectedCycleAsync=Fr.detectAllCyclesAsync=Fr.connectedComponentAsync=Fr.GADDIAsync=void 0;var Xi=vVe(fA),Yi=Pd;function vVe(t){return t&&t.__esModule?t:{default:t}}var gVe=function(e,r){return(0,Xi.default)(Yi.ALGORITHM.getAdjMatrix).apply(void 0,[e,r])};Fr.getAdjMatrixAsync=gVe;var mVe=function(e,r){return(0,Xi.default)(Yi.ALGORITHM.connectedComponent).apply(void 0,[e,r])};Fr.connectedComponentAsync=mVe;var yVe=function(e){return(0,Xi.default)(Yi.ALGORITHM.getDegree)(e)};Fr.getDegreeAsync=yVe;var wVe=function(e,r){return(0,Xi.default)(Yi.ALGORITHM.getInDegree)(e,r)};Fr.getInDegreeAsync=wVe;var bVe=function(e,r){return(0,Xi.default)(Yi.ALGORITHM.getOutDegree)(e,r)};Fr.getOutDegreeAsync=bVe;var xVe=function(e){return(0,Xi.default)(Yi.ALGORITHM.detectCycle)(e)};Fr.detectCycleAsync=xVe;var SVe=function(e){return(0,Xi.default)(Yi.ALGORITHM.detectAllCycles)(e)};Fr.detectAllCyclesAsync=SVe;var EVe=function(e){return(0,Xi.default)(Yi.ALGORITHM.detectAllDirectedCycle)(e)};Fr.detectAllDirectedCycleAsync=EVe;var _Ve=function(e){return(0,Xi.default)(Yi.ALGORITHM.detectAllUndirectedCycle)(e)};Fr.detectAllUndirectedCycleAsync=_Ve;var CVe=function(e,r,n,i){return(0,Xi.default)(Yi.ALGORITHM.dijkstra).apply(void 0,[e,r,n,i])};Fr.dijkstraAsync=CVe;var kVe=function(e,r,n,i){return(0,Xi.default)(Yi.ALGORITHM.findAllPath).apply(void 0,[e,r,n,i])};Fr.findAllPathAsync=kVe;var MVe=function(e,r,n,i,a){return(0,Xi.default)(Yi.ALGORITHM.findShortestPath).apply(void 0,[e,r,n,i,a])};Fr.findShortestPathAsync=MVe;var AVe=function(e,r){return(0,Xi.default)(Yi.ALGORITHM.floydWarshall).apply(void 0,[e,r])};Fr.floydWarshallAsync=AVe;var TVe=function(e,r,n,i){return i===void 0&&(i=1e3),(0,Xi.default)(Yi.ALGORITHM.labelPropagation)(e,r,n,i)};Fr.labelPropagationAsync=TVe;var OVe=function(e,r,n,i){return(0,Xi.default)(Yi.ALGORITHM.louvain)(e,r,n,i)};Fr.louvainAsync=OVe;var IVe=function(e,r,n){return(0,Xi.default)(Yi.ALGORITHM.minimumSpanningTree).apply(void 0,[e,r,n])};Fr.minimumSpanningTreeAsync=IVe;var DVe=function(e,r,n){return(0,Xi.default)(Yi.ALGORITHM.pageRank).apply(void 0,[e,r,n])};Fr.pageRankAsync=DVe;var PVe=function(e,r,n){return(0,Xi.default)(Yi.ALGORITHM.getNeighbors).apply(void 0,[e,r,n])};Fr.getNeighborsAsync=PVe;var LVe=function(e,r,n,i,a,o,s){return n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),(0,Xi.default)(Yi.ALGORITHM.GADDI).apply(void 0,[e,r,n,i,a,o,s])};Fr.GADDIAsync=LVe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return e.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return e.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return e.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return e.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return e.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return e.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return e.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return e.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return e.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return e.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return e.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return e.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return e.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return e.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return e.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return e.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return e.pageRankAsync}});var e=Fr,r=e.detectCycleAsync;t.detectDirectedCycleAsync=r;var n={getAdjMatrixAsync:e.getAdjMatrixAsync,connectedComponentAsync:e.connectedComponentAsync,getDegreeAsync:e.getDegreeAsync,getInDegreeAsync:e.getInDegreeAsync,getOutDegreeAsync:e.getOutDegreeAsync,detectCycleAsync:e.detectCycleAsync,detectDirectedCycleAsync:r,detectAllCyclesAsync:e.detectAllCyclesAsync,detectAllDirectedCycleAsync:e.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:e.detectAllUndirectedCycleAsync,dijkstraAsync:e.dijkstraAsync,findAllPathAsync:e.findAllPathAsync,findShortestPathAsync:e.findShortestPathAsync,floydWarshallAsync:e.floydWarshallAsync,labelPropagationAsync:e.labelPropagationAsync,louvainAsync:e.louvainAsync,minimumSpanningTreeAsync:e.minimumSpanningTreeAsync,pageRankAsync:e.pageRankAsync,getNeighborsAsync:e.getNeighborsAsync,GADDIAsync:e.GADDIAsync};t.default=n})(X8);const RVe=_s(X8),NVe=gq({__proto__:null,default:RVe},[X8]);function FVe(){return window?window.devicePixelRatio:1}function due(t,e,r,n){var i=t-r,a=e-n;return Math.sqrt(i*i+a*a)}function jp(t,e,r,n,i,a){return i>=t&&i<=t+r&&a>=e&&a<=e+n}function Iw(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function BVe(t,e){return!t||!e?t||e:{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}}function KW(t,e){return t[0]===e[0]&&t[1]===e[1]}var $Ve=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zVe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,jVe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,pue=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function vue(t,e){var r=t.match(pue);Te(r,function(n){var i=n.split(":");e.addColorStop(i[0],i[1])})}function GVe(t,e,r){var n=$Ve.exec(r),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=e.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,h=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,d=t.createLinearGradient(s.x,s.y,f,h);return vue(a,d),d}function UVe(t,e,r){var n=zVe.exec(r),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(pue);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,h=Math.sqrt(c*c+f*f)/2,d=t.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*h);return vue(s,d),d}function WVe(t,e,r){if(e.get("patternSource")&&e.get("patternSource")===r)return e.get("pattern");var n,i,a=jVe.exec(r),o=a[1],s=a[2];function l(){n=t.createPattern(i,o),e.set("pattern",n),e.set("patternSource",r)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function VVe(t,e,r){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return r;if(et(r)){if(r[1]==="("||r[2]==="("){if(r[0]==="l")return GVe(t,e,r);if(r[0]==="r")return UVe(t,e,r);if(r[0]==="p")return WVe(t,e,r)}return r}if(r instanceof CanvasPattern)return r}function HVe(t){var e=0,r=0,n=0,i=0;return Xt(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,[e,r,n,i]}function EE(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function l4(t,e){return EE(t)*EE(e)?(t[0]*e[0]+t[1]*e[1])/(EE(t)*EE(e)):1}function QW(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(l4(t,e))}function ZW(t,e){var r=e[1],n=e[2],i=nA(iA(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=Math.sqrt(d),n*=Math.sqrt(d));var p=r*r*(h*h)+n*n*(f*f),v=p?Math.sqrt((r*r*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*r*h/n:0,m=r?v*-n*f/r:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,w=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,b=[(f-g)/r,(h-m)/n],x=[(-1*f-g)/r,(-1*h-m)/n],S=QW([1,0],b),E=QW(b,x);return l4(b,x)<=-1&&(E=Math.PI),l4(b,x)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),{cx:y,cy:w,rx:KW(t,[u,c])?0:r,ry:KW(t,[u,c])?0:n,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:a,sweepFlag:o}}var ak=Math.sin,ok=Math.cos,Q8=Math.atan2,_E=Math.PI;function gue(t,e,r,n,i,a,o){var s=e.stroke,l=e.lineWidth,u=r-i,c=n-a,f=Q8(c,u),h=new tF({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ok(_E/6)+","+10*ak(_E/6)+" L0,0 L"+10*ok(_E/6)+",-"+10*ak(_E/6),stroke:s,lineWidth:l}});h.translate(i,a),h.rotateAtPoint(i,a,f),t.set(o?"startArrowShape":"endArrowShape",h)}function mue(t,e,r,n,i,a,o){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,f=o?s:l,h=f.d,d=f.fill,p=f.stroke,v=f.lineWidth,g=xi(f,["d","fill","stroke","lineWidth"]),m=r-i,y=n-a,w=Q8(y,m);h&&(i=i-ok(w)*h,a=a-ak(w)*h);var b=new tF({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:j(j({},g),{stroke:p||u,lineWidth:v||c,fill:d})});b.translate(i,a),b.rotateAtPoint(i,a,w),t.set(o?"startArrowShape":"endArrowShape",b)}function iv(t,e,r,n,i){var a=Q8(n-e,r-t);return{dx:ok(a)*i,dy:ak(a)*i}}function Z8(t,e,r,n,i,a){typeof e.startArrow=="object"?mue(t,e,r,n,i,a,!0):e.startArrow?gue(t,e,r,n,i,a,!0):t.set("startArrowShape",null)}function J8(t,e,r,n,i,a){typeof e.endArrow=="object"?mue(t,e,r,n,i,a,!1):e.endArrow?gue(t,e,r,n,i,a,!1):t.set("startArrowShape",null)}var JW={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function zm(t,e){var r=e.attr();for(var n in r){var i=r[n],a=JW[n]?JW[n]:n;a==="matrix"&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&t.setLineDash?Xt(i)&&t.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=VVe(t,e,i):a==="globalAlpha"&&(i=i*t.globalAlpha),t[a]=i)}}function u4(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(t,r):i.skipDraw()}}function XVe(t,e,r){var n=t.get("refreshElements");Te(n,function(i){if(i!==t)for(var a=i.cfg.parent;a&&a!==t&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===t?eF(e):c4(e,r)}function c4(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&eF(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&c4(n.cfg.children,e);else{var i=YVe(n,e);n.cfg.refresh=i,i&&n.isGroup()&&c4(n.cfg.children,e)}}}function yue(t){for(var e=0;e<t.length;e++){var r=t[e];r.cfg.hasChanged=!1,r.isGroup()&&!r.destroyed&&yue(r.cfg.children)}}function eF(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&eF(n.get("children")))}}function YVe(t,e){var r=t.cfg.cacheCanvasBBox,n=t.cfg.isInView&&r&&Iw(r,e);return n}function wue(t,e,r,n){var i=r.path,a=r.startArrow,o=r.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var f=i[c],h=f[0];if(c===0&&a&&a.d){var d=t.getStartTangent();u=iv(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var p=i[c+1];if(p[0]==="Z"){var d=t.getEndTangent();u=iv(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var d=t.getEndTangent();u=iv(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}var v=u.dx,g=u.dy;switch(h){case"M":e.moveTo(f[1]-v,f[2]-g),l=[f[1],f[2]];break;case"L":e.lineTo(f[1]-v,f[2]-g);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-v,f[4]-g);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-v,f[6]-g);break;case"A":{var m=void 0;n?(m=n[c],m||(m=ZW(s,f),n[c]=m)):m=ZW(s,f);var y=m.cx,w=m.cy,b=m.rx,x=m.ry,S=m.startAngle,E=m.endAngle,_=m.xRotation,k=m.sweepFlag;if(e.ellipse)e.ellipse(y,w,b,x,_,S,E,1-k);else{var C=b>x?b:x,M=b>x?1:b/x,A=b>x?x/b:1;e.translate(y,w),e.rotate(_),e.scale(M,A),e.arc(0,0,C,S,E,1-k),e.scale(1/M,1/A),e.rotate(-_),e.translate(-y,-w)}break}case"Z":e.closePath();break}if(h==="Z")s=l;else{var T=f.length;s=[f[T-2],f[T-1]]}}}}function bue(t,e){var r=t.get("canvas");r&&(e==="remove"&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(r.refreshElement(t,e,r),r.get("autoDraw")&&r.draw())))}function qVe(t){var e;if(t.destroyed)e=t._cacheCanvasBBox;else{var r=t.get("cacheCanvasBBox"),n=r&&!!(r.width&&r.height),i=t.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?e=BVe(r,i):n?e=r:a&&(e=i)}return e}function KVe(t){if(!t.length)return null;var e=[],r=[],n=[],i=[];return Te(t,function(a){var o=qVe(a);o&&(e.push(o.minX),r.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:wc(e),minY:wc(r),maxX:yc(n),maxY:yc(i)}}function QVe(t,e){return!t||!e||!Iw(t,e)?null:{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}}var xue=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(r){bue(this,r)},e.prototype.getShapeBase=function(){return dR},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(r,n){n&&(r.save(),zm(r,n),n.createPath(r),r.restore(),r.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var r=this.cfg.children,n=[],i=[];Te(r,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var a=null;if(n.length){var o=wc(n),s=yc(n),l=wc(i),u=yc(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",Iw(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(r,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(r.save(),zm(r,this),this._applyClip(r,this.getClip()),u4(r,i,n),r.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(rle),ru=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return dR},e.prototype.getGroupBase=function(){return xue},e.prototype.onCanvasChange=function(r){bue(this,r)},e.prototype.calculateBBox=function(){var r=this.get("type"),n=this.getHitLineWidth(),i=ale(r),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(r,n){n&&(r.save(),zm(r,n),n.createPath(r),r.restore(),r.clip(),n._afterDraw())},e.prototype.draw=function(r,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Iw(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}r.save(),zm(r,this),this._applyClip(r,i),this.drawPath(r),r.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var r=this.cfg.canvas;return r?r.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var r=this.getCanvasViewBox();if(r){var n=this.getCanvasBBox(),i=Iw(n,r);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(r){this.createPath(r),this.strokeAndFill(r),this.afterDrawPath(r)},e.prototype.fill=function(r){r.fill()},e.prototype.stroke=function(r){r.stroke()},e.prototype.strokeAndFill=function(r){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Gt(s)&&s!==1?(r.globalAlpha=s,this.fill(r),r.globalAlpha=a):this.fill(r)),this.isStroke()&&i>0&&(!Gt(o)&&o!==1&&(r.globalAlpha=o),this.stroke(r)),this.afterDrawPath(r)},e.prototype.createPath=function(r){},e.prototype.afterDrawPath=function(r){},e.prototype.isInShape=function(r,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(r,n,i,a,o)},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var r=this.attrs;return r.lineWidth+r.lineAppendWidth},e}(nle),ZVe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,h=due(l,u,r,n);return a&&i?h<=c+f:a?h<=c:i?h>=c-f&&h<=c+f:!1},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.r;r.beginPath(),r.arc(i,a,o,0,Math.PI*2,!1),r.closePath()},e}(ru);function CE(t,e,r,n){return t/(r*r)+e/(n*n)}var JVe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,h=s.ry,d=(r-u)*(r-u),p=(n-c)*(n-c);return a&&i?CE(d,p,f+l,h+l)<=1:a?CE(d,p,f,h)<=1:i?CE(d,p,f-l,h-l)>=1&&CE(d,p,f+l,h+l)<=1:!1},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(r.beginPath(),r.ellipse)r.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;r.save(),r.translate(i,a),r.scale(u,c),r.arc(0,0,l,0,Math.PI*2),r.restore(),r.closePath()}},e}(ru);function eV(t){return t instanceof HTMLElement&&et(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS"}var eHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(r){this._setImage(r.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var r=this.get("canvas");r?r.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(r){var n=this,i=this.attrs;if(et(r)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=r,this.set("loading",!0)}else r instanceof Image?(i.width||(i.width=r.width),i.height||(i.height=r.height)):eV(r)&&(i.width||(i.width=Number(r.getAttribute("width"))),i.height||(i.height,Number(r.getAttribute("height"))))},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r==="img"&&this._setImage(n)},e.prototype.createPath=function(r){if(this.get("loading")){this.set("toDraw",!0),this.set("context",r);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,c=n.swidth,f=n.sheight,h=n.img;(h instanceof Image||eV(h))&&(!Gt(l)&&!Gt(u)&&!Gt(c)&&!Gt(f)?r.drawImage(h,l,u,c,f,i,a,o,s):r.drawImage(h,i,a,o,s))},e}(ru);function Zh(t,e,r,n,i,a,o){var s=Math.min(t,r),l=Math.max(t,r),u=Math.min(e,n),c=Math.max(e,n),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?aa.pointToLine(t,e,r,n,a,o)<=i/2:!1}var tHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),this.setArrow()},e.prototype.setArrow=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2,s=r.startArrow,l=r.endArrow;s&&Z8(this,r,a,o,n,i),l&&J8(this,r,n,i,a,o)},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return Zh(l,u,c,f,o,r,n)},e.prototype.createPath=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=iv(i,a,o,s,n.startArrow.d)),u&&u.d&&(f=iv(i,a,o,s,n.endArrow.d)),r.beginPath(),r.moveTo(i+c.dx,a+c.dy),r.lineTo(o-f.dx,s-f.dy)},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2;return aa.length(n,i,a,o)},e.prototype.getPoint=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return aa.pointAt(i,a,o,s,r)},e}(ru),rHe={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},nHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.initAttrs=function(r){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),["symbol","x","y","r","radius"].indexOf(r)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(r){return Gt(r.r)?r.radius:r.r},e.prototype._getPath=function(){var r=this.attr(),n=r.x,i=r.y,a=r.symbol||"circle",o=this._getR(r),s,l;if(Bn(a))s=a,l=s(n,i,o),l=yle(l);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},e.prototype.createPath=function(r){var n=this._getPath(),i=this.get("paramsCache");wue(this,r,{path:n},i)},e.Symbols=rHe,e}(ru);function Sue(t,e,r){var n=ple();return t.createPath(n),n.isPointInPath(e,r)}var iHe=1e-6;function PI(t){return Math.abs(t)<iHe?0:t<0?-1:1}function aHe(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function Eue(t,e,r){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(aHe(o,s,[e,r]))return!0;PI(o[1]-r)>0!=PI(s[1]-r)>0&&PI(e-(r-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function H1(t,e,r,n,i,a,o,s){var l=(Math.atan2(s-e,o-t)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:t+r*Math.cos(l),y:e+r*Math.sin(l)};return due(u.x,u.y,o,s)<=a/2}var oHe=dl;function sHe(t){for(var e=!1,r=t.length,n=0;n<r;n++){var i=t[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function lHe(t,e,r,n,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,f=l.prePoint,h=l.box;if(!(h&&!jp(h.x-o,h.y-o,h.width+e,h.height+e,r,n))){switch(l.command){case"L":case"Z":a=Zh(f[0],f[1],u[0],u[1],e,r,n);break;case"Q":var d=cle.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],r,n);a=d<=e/2;break;case"C":var p=g2.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],r,n,i);a=p<=e/2;break;case"A":var v=l.arcParams,g=v.cx,m=v.cy,y=v.rx,w=v.ry,b=v.startAngle,x=v.endAngle,S=v.xRotation,E=[r,n,1],_=y>w?y:w,k=y>w?1:y/w,C=y>w?w/y:1,M=oHe(null,[["t",-g,-m],["r",-S],["s",1/k,1/C]]);oA(E,E,M),a=H1(0,0,_,b,x,e,E[0],E[1]);break}if(a)break}}return a}function uHe(t){for(var e=t.length,r=[],n=[],i=[],a=0;a<e;a++){var o=t[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(r.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:r,polylines:n}}const kE=j({hasArc:sHe,extractPolygons:uHe,isPointInStroke:lHe},gze);function tV(t,e,r){for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(n=Eue(a,e,r),n)break}return n}var tF=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this._setPathArr(r.path),this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(r){this.attrs.path=yle(r);var n=kE.hasArc(r);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var r=this.get("segements");return r||(r=wle(this.attr("path")),this.set("segments",r)),r},e.prototype.setArrow=function(){var r=this.attr(),n=r.startArrow,i=r.endArrow;if(n){var a=this.getStartTangent();Z8(this,r,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();J8(this,r,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=kE.isPointInStroke(s,o,r,n,c)}if(!u&&a)if(l)u=Sue(this,r,n);else{var f=this.attr("path"),h=kE.extractPolygons(f);u=tV(h.polygons,r,n)||tV(h.polylines,r,n)}return u},e.prototype.createPath=function(r){var n=this.attr(),i=this.get("paramsCache");wue(this,r,n,i)},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.get("totalLength");return Gt(r)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):r},e.prototype.getPoint=function(r){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;Te(n,function(c,f){r>=c[0]&&r<=c[1]&&(i=(r-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if(Gt(s)||Gt(a))return null;var l=s.length,u=o[a+1];return g2.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},e.prototype._calculateCurve=function(){var r=this.attr().path;this.set("curve",kE.pathToCurve(r))},e.prototype._setTcache=function(){var r=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(u){if(Te(u,function(c,f){s=u[f+1],l=c.length,s&&(r+=g2.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",r),r===0){this.set("tCache",[]);return}Te(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=n/r,o=g2.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/r,i.push(a))}),this.set("tCache",i)}},e.prototype.getStartTangent=function(){var r=this.getSegments(),n;if(r.length>1){var i=r[0].currentPoint,a=r[1].currentPoint,o=r[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},e.prototype.getEndTangent=function(){var r=this.getSegments(),n=r.length,i;if(n>1){var a=r[n-2].currentPoint,o=r[n-1].currentPoint,s=r[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},e}(ru);function _ue(t,e,r,n,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(Zh(s,l,u,c,e,r,n))return!0}if(i){var f=t[0],h=t[a-1];if(Zh(f[0],f[1],h[0],h[1],e,r,n))return!0}return!1}var cHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=_ue(s,o,r,n,!0)),!l&&a&&(l=Eue(s,r,n)),l},e.prototype.createPath=function(r){var n=this.attr(),i=n.points;if(!(i.length<2)){r.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?r.moveTo(o[0],o[1]):r.lineTo(o[0],o[1])}r.closePath()}},e}(ru),fHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(r){this.setArrow()},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),this.setArrow(),["points"].indexOf(r)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var r=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&Z8(this,r,i[1][0],i[1][1],l,u),o&&J8(this,r,i[s-2][0],i[s-2][1],c,f)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return _ue(s,o,r,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(r){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var h=iv(l,u,i[1][0],i[1][1],a.d);l+=h.dx,u+=h.dy}if(o&&o.d){var h=iv(i[s-2][0],i[s-2][1],c,f,o.d);c-=h.dx,f-=h.dy}r.beginPath(),r.moveTo(l,u);for(var d=0;d<s-1;d++){var p=i[d];r.lineTo(p[0],p[1])}r.lineTo(c,f)}},e.prototype.afterDrawPath=function(r){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(r),i&&i.draw(r)},e.prototype.getTotalLength=function(){var r=this.attr().points,n=this.get("totalLength");return Gt(n)?(this.set("totalLength",dle.length(r)),this.get("totalLength")):n},e.prototype.getPoint=function(r){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Te(i,function(s,l){r>=s[0]&&r<=s[1]&&(a=(r-s[0])/(s[1]-s[0]),o=l)}),aa.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var r=this.attr().points;if(!(!r||r.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Te(r,function(l,u){r[u+1]&&(o=[],o[0]=i/n,s=aa.length(l[0],l[1],r[u+1][0],r[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var r=this.attr().points,n=[];return n.push([r[1][0],r[1][1]]),n.push([r[0][0],r[0][1]]),n},e.prototype.getEndTangent=function(){var r=this.attr().points,n=r.length-1,i=[];return i.push([r[n-1][0],r[n-1][1]]),i.push([r[n][0],r[n][1]]),i},e}(ru);function hHe(t,e,r,n,i,a,o){var s=i/2;return jp(t-s,e-s,r,i,a,o)||jp(t+r-s,e-s,i,n,a,o)||jp(t+s,e+n-s,r,i,a,o)||jp(t-s,e+s,i,n,a,o)}function dHe(t,e,r,n,i,a,o,s){return Zh(t+i,e,t+r-i,e,a,o,s)||Zh(t+r,e+i,t+r,e+n-i,a,o,s)||Zh(t+r-i,e+n,t+i,e+n,a,o,s)||Zh(t,e+n-i,t,e+i,a,o,s)||H1(t+r-i,e+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||H1(t+r-i,e+n-i,i,0,.5*Math.PI,a,o,s)||H1(t+i,e+n-i,i,.5*Math.PI,Math.PI,a,o,s)||H1(t+i,e+i,i,Math.PI,1.5*Math.PI,a,o,s)}var pHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(r,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,h=s.radius;if(h){var p=!1;return i&&(p=dHe(l,u,c,f,h,o,r,n)),!p&&a&&(p=Sue(this,r,n)),p}else{var d=o/2;if(a&&i)return jp(l-d,u-d,c+d,f+d,r,n);if(a)return jp(l,u,c,f,r,n);if(i)return hHe(l,u,c,f,o,r,n)}},e.prototype.createPath=function(r){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(r.beginPath(),l===0)r.rect(i,a,o,s);else{var u=HVe(l),c=u[0],f=u[1],h=u[2],d=u[3];r.moveTo(i+c,a),r.lineTo(i+o-f,a),f!==0&&r.arc(i+o-f,a+f,f,-Math.PI/2,0),r.lineTo(i+o,a+s-h),h!==0&&r.arc(i+o-h,a+s-h,h,0,Math.PI/2),r.lineTo(i+d,a+s),d!==0&&r.arc(i+d,a+s-d,d,Math.PI/2,Math.PI),r.lineTo(i,a+c),c!==0&&r.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),r.closePath()}},e}(ru),vHe=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(r){this._assembleFont(),r.text&&this._setText(r.text)},e.prototype._assembleFont=function(){var r=this.attrs;r.font=gle(r)},e.prototype._setText=function(r){var n=null;et(r)&&r.indexOf(`
`)!==-1&&(n=r.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),r.startsWith("font")&&this._assembleFont(),r==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var r=this.attrs,n=r.lineHeight,i=r.fontSize*1;return n?n-i:i*.14},e.prototype._drawTextArr=function(r,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=vle(a.text,a.fontSize,a.lineHeight),h;Te(n,function(d,p){h=l+p*(c+u)-f+u,o==="middle"&&(h+=f-u-(f-u)/2),o==="top"&&(h+=f-u),Gt(d)||(i?r.fillText(d,s,h):r.strokeText(d,s,h))})},e.prototype._drawText=function(r,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(r,s,n);else{var l=i.text;Gt(l)||(n?r.fillText(l,a,o):r.strokeText(l,a,o))}},e.prototype.strokeAndFill=function(r){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Gt(o)&&o!==1&&(r.globalAlpha=a),this.stroke(r)),this.isFill()&&(!Gt(s)&&s!==1?(r.globalAlpha=s,this.fill(r),r.globalAlpha=a):this.fill(r)),this.afterDrawPath(r)},e.prototype.fill=function(r){this._drawText(r,!0)},e.prototype.stroke=function(r){this._drawText(r,!1)},e}(ru);function gHe(t,e){if(e){var r=$se(e);return $p(r,t)}return t}function Cue(t,e,r){var n=t.getTotalMatrix();if(n){var i=gHe([e,r,1],n),a=i[0],o=i[1];return[a,o]}return[e,r]}function rV(t,e,r){if(t.isCanvas&&t.isCanvas())return!0;if(!FL(t)||t.cfg.isInView===!1)return!1;if(t.cfg.clipShape){var n=Cue(t,e,r),i=n[0],a=n[1];if(t.isClipped(i,a))return!1}var o=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&r>=o.minY&&r<=o.maxY}function kue(t,e,r){if(!rV(t,e,r))return null;for(var n=null,i=t.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=kue(s,e,r);else if(rV(s,e,r)){var l=s,u=Cue(s,e,r),c=u[0],f=u[1];l.isInShape(c,f)&&(n=s)}if(n)break}return n}var cf=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.renderer="canvas",r.autoDraw=!0,r.localRefresh=!0,r.refreshElements=[],r.clipView=!0,r.quickHit=!1,r},e.prototype.onCanvasChange=function(r){(r==="attr"||r==="sort"||r==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return dR},e.prototype.getGroupBase=function(){return xue},e.prototype.getPixelRatio=function(){var r=this.get("pixelRatio")||FVe();return r>=1?Math.ceil(r):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var r=document.createElement("canvas"),n=r.getContext("2d");return this.set("context",n),r},e.prototype.setDOMSize=function(r,n){t.prototype.setDOMSize.call(this,r,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*r,a.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var r=this.get("context"),n=this.get("el");r.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(r,n){var i;return this.get("quickHit")?i=kue(this,r,n):i=t.prototype.getShape.call(this,r,n,null),i},e.prototype._getRefreshRegion=function(){var r=this.get("refreshElements"),n=this.getViewRange(),i;if(r.length&&r[0]===this)i=n;else if(i=KVe(r),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=QVe(i,n))}return i},e.prototype.refreshElement=function(r){var n=this.get("refreshElements");n.push(r)},e.prototype._clearFrame=function(){var r=this.get("drawFrame");r&&(Mae(r),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var r=this.get("drawFrame");this.get("autoDraw")&&r||this._startDraw()},e.prototype._drawAll=function(){var r=this.get("context"),n=this.get("el"),i=this.getChildren();r.clearRect(0,0,n.width,n.height),zm(r,this),u4(r,i),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var r=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(r.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),r.save(),r.beginPath(),r.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),r.clip(),zm(r,this),XVe(this,i,a),u4(r,i,a),r.restore()):n.length&&yue(n),Te(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var r=this,n=this.get("drawFrame");n||(n=kae(function(){r.get("localRefresh")?r._drawRegion():r._drawAll(),r.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var r=this.get("el");r.width=0,r.height=0,r.parentNode.removeChild(r)},e}(tle),f4={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Yr={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function ll(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Mue(t){var e=f4[t.type],r=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var n=ll(e);if(t.get("id")&&(n.id=t.get("id")),t.set("el",n),t.set("attrs",{}),r){var i=r.get("el");i||(i=r.createDom(),r.set("el",i)),i.appendChild(n)}return n}function Aue(t,e){var r=t.get("el"),n=Iae(r.children).sort(e),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),r.appendChild(i)}function mHe(t,e){var r=t.parentNode,n=Array.from(r.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[e],a=n.indexOf(t);if(i){if(a>e)r.insertBefore(t,i);else if(a<e){var o=n[e+1];o?r.insertBefore(t,o):r.appendChild(t)}}else r.appendChild(t)}function yHe(t,e){var r=t.cfg.el,n=t.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)r.removeAttribute("filter");else{var a=e.find("filter",i);a||(a=e.addShadow(i)),r.setAttribute("filter","url(#"+a+")")}}function Nb(t){var e=t.attr().matrix;if(e){for(var r=t.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);n=n.join(","),n.indexOf("NaN")===-1?r.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function Dw(t,e){var r=t.getClip(),n=t.get("el");if(!r)n.removeAttribute("clip-path");else if(r&&!n.hasAttribute("clip-path")){Mue(r),r.createPath(e);var i=e.addClip(r);n.setAttribute("clip-path","url(#"+i+")")}}function Tue(t,e){e.forEach(function(r){r.draw(t)})}function Oue(t,e){var r=t.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context"),i=t.getParent(),a=i?i.getChildren():[r],o=t.get("el");if(e==="remove"){var s=t.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")mHe(o,a.indexOf(t));else if(e==="sort"){var c=t.get("children");c&&c.length&&Aue(t,function(f,h){return c.indexOf(f)-c.indexOf(h)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Nb(t):e==="clip"?Dw(t,n):e==="attr"||e==="add"&&t.draw(n)}}var Iue=function(t){cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var r=ll("g");this.set("el",r);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,r)}},e.prototype.onCanvasChange=function(r){Oue(this,r)},e.prototype.getShapeBase=function(){return pR},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(r){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),Dw(this,r),this.createPath(r),n.length&&Tue(r,n))},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){Yr[s]&&a.setAttribute(Yr[s],o)}),Nb(this)},e}(rle),pl=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="svg",r.canFill=!1,r.canStroke=!1,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(r){t.prototype.afterAttrsChange.call(this,r);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,r)}},e.prototype.getShapeBase=function(){return pR},e.prototype.getGroupBase=function(){return Iue},e.prototype.onCanvasChange=function(r){Oue(this,r)},e.prototype.calculateBBox=function(){var r=this.get("el"),n=null;if(r)n=r.getBBox();else{var i=ale(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),c=u/2,f=a-c,h=o-c,d=a+s+c,p=o+l+c;return{x:f,y:h,minX:f,minY:h,maxX:d,maxY:p,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var r=this.attr(),n=r.fill,i=r.fillStyle;return(n||i||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var r=this.attr(),n=r.stroke,i=r.strokeStyle;return(n||i)&&this.canStroke},e.prototype.draw=function(r,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||Mue(this),Dw(this,r),this.createPath(r,n),this.shadow(r,n),this.strokeAndFill(r,n),this.transform(n))},e.prototype.createPath=function(r,n){},e.prototype.strokeAndFill=function(r,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,h=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(r,"fill",a):"fillStyle"in i&&this._setColor(r,"fill",o):this._setColor(r,"fill",a||o),u&&h.setAttribute(Yr.fillOpacity,u)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(r,"stroke",s):"strokeStyle"in i&&this._setColor(r,"stroke",l):this._setColor(r,"stroke",s||l),c&&h.setAttribute(Yr.strokeOpacity,c),f&&h.setAttribute(Yr.lineWidth,f))},e.prototype._setColor=function(r,n,i){var a=this.get("el");if(!i){a.setAttribute(Yr[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=r.find("gradient",i);o||(o=r.addGradient(i)),a.setAttribute(Yr[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=r.find("pattern",i);o||(o=r.addPattern(i)),a.setAttribute(Yr[n],"url(#"+o+")")}else a.setAttribute(Yr[n],i)},e.prototype.shadow=function(r,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&yHe(this,r)},e.prototype.transform=function(r){var n=this.attr(),i=(r||n).matrix;i&&Nb(this)},e.prototype.isInShape=function(r,n){return this.isPointInPath(r,n)},e.prototype.isPointInPath=function(r,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=r+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},e.prototype.getHitLineWidth=function(){var r=this.attrs,n=r.lineWidth,i=r.lineAppendWidth;return this.isStroke()?n+i:0},e}(nle),wHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="circle",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,r:0})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Yr[s]&&a.setAttribute(Yr[s],o)})},e}(pl),bHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="dom",r.canFill=!1,r.canStroke=!1,r}return e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");if(Te(n||i,function(u,c){Yr[c]&&a.setAttribute(Yr[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},e}(pl),xHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="ellipse",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Yr[s]&&a.setAttribute(Yr[s],o)})},e}(pl),SHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="image",r.canFill=!1,r.canStroke=!1,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");Te(n||a,function(s,l){l==="img"?i._setImage(a.img):Yr[l]&&o.setAttribute(Yr[l],s)})},e.prototype.setAttr=function(r,n){this.attrs[r]=n,r==="img"&&this._setImage(n)},e.prototype._setImage=function(r){var n=this.attr(),i=this.get("el");if(et(r))i.setAttribute("href",r);else if(r instanceof window.Image)n.width||(i.setAttribute("width",r.width),this.attr("width",r.width)),n.height||(i.setAttribute("height",r.height),this.attr("height",r.height)),i.setAttribute("href",r.src);else if(r instanceof HTMLElement&&et(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",r.toDataURL());else if(r instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+r.width),a.setAttribute("height",""+r.height),a.getContext("2d").putImageData(r,0,0),n.width||(i.setAttribute("width",""+r.width),this.attr("width",r.width)),n.height||(i.setAttribute("height",""+r.height),this.attr("height",r.height)),i.setAttribute("href",a.toDataURL())}},e}(pl),EHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="line",r.canFill=!1,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=sa(o)?r.addArrow(i,Yr[s]):r.getDefaultArrow(i,Yr[s]);a.setAttribute(Yr[s],"url(#"+l+")")}else a.removeAttribute(Yr[s]);else Yr[s]&&a.setAttribute(Yr[s],o)})},e.prototype.getTotalLength=function(){var r=this.attr(),n=r.x1,i=r.y1,a=r.x2,o=r.y2;return aa.length(n,i,a,o)},e.prototype.getPoint=function(r){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return aa.pointAt(i,a,o,s,r)},e}(pl),ME={circle:function(t,e,r){return[["M",t,e],["m",-r,0],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["z"]]},triangleDown:function(t,e,r){var n=r*Math.sin(.3333333333333333*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}};const nV={get:function(t){return ME[t]},register:function(t,e){ME[t]=e},remove:function(t){delete ME[t]},getAll:function(){return ME}};var _He=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="marker",r.canFill=!0,r.canStroke=!0,r}return e.prototype.createPath=function(r){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var r=this._getPath();return Xt(r)?r.map(function(n){return n.join(" ")}).join(""):r},e.prototype._getPath=function(){var r=this.attr(),n=r.x,i=r.y,a=r.r||r.radius,o=r.symbol||"circle",s;return Bn(o)?s=o:s=nV.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=nV,e}(pl),CHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="path",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");Te(n||a,function(s,l){if(l==="path"&&Xt(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=sa(s)?r.addArrow(a,Yr[l]):r.getDefaultArrow(a,Yr[l]);o.setAttribute(Yr[l],"url(#"+u+")")}else o.removeAttribute(Yr[l]);else Yr[l]&&o.setAttribute(Yr[l],s)})},e.prototype._formatPath=function(r){var n=r.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var r=this.get("el");return r?r.getTotalLength():null},e.prototype.getPoint=function(r){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(r*i):null;return a?{x:a.x,y:a.y}:null},e}(pl),kHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="polygon",r.canFill=!0,r.canStroke=!0,r}return e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){s==="points"&&Xt(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Yr[s]&&a.setAttribute(Yr[s],o)})},e}(pl),MHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="polyline",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(r,n,i){t.prototype.onAttrChange.call(this,r,n,i),["points"].indexOf(r)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(r,n){var i=this.attr(),a=this.get("el");Te(n||i,function(o,s){s==="points"&&Xt(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):Yr[s]&&a.setAttribute(Yr[s],o)})},e.prototype.getTotalLength=function(){var r=this.attr().points,n=this.get("totalLength");return Gt(n)?(this.set("totalLength",dle.length(r)),this.get("totalLength")):n},e.prototype.getPoint=function(r){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return Te(i,function(s,l){r>=s[0]&&r<=s[1]&&(a=(r-s[0])/(s[1]-s[0]),o=l)}),aa.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},e.prototype._setTcache=function(){var r=this.attr().points;if(!(!r||r.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;Te(r,function(l,u){r[u+1]&&(o=[],o[0]=i/n,s=aa.length(l[0],l[1],r[u+1][0],r[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var r=this.attr().points,n=[];return n.push([r[1][0],r[1][1]]),n.push([r[0][0],r[0][1]]),n},e.prototype.getEndTangent=function(){var r=this.attr().points,n=r.length-1,i=[];return i.push([r[n-1][0],r[n-1][1]]),i.push([r[n][0],r[n][1]]),i},e}(pl);function AHe(t){var e=0,r=0,n=0,i=0;return Xt(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var THe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="rect",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];Te(n||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&Yr[c]&&o.setAttribute(Yr[c],u)})},e.prototype._assembleRect=function(r){var n=r.x,i=r.y,a=r.width,o=r.height,s=r.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=AHe(s);Xt(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},e}(pl),iV=.3,OHe={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},IHe={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},DHe={left:"left",start:"left",center:"middle",right:"end",end:"end"},PHe=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="text",r.canFill=!0,r.canStroke=!0,r}return e.prototype.getDefaultAttrs=function(){var r=t.prototype.getDefaultAttrs.call(this);return j(j({},r),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(r,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),Te(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Nb(i):Yr[l]&&o.setAttribute(Yr[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var r=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=Bse();o&&o.name==="firefox"?r.setAttribute("dominant-baseline",IHe[i]||"alphabetic"):r.setAttribute("alignment-baseline",OHe[i]||"baseline"),r.setAttribute("text-anchor",DHe[a]||"left")},e.prototype._setText=function(r){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!r)n.innerHTML="";else if(~r.indexOf(`
`)){var l=r.split(`
`),u=l.length-1,c="";Te(l,function(f,h){h===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+iV)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-iV)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=r},e}(pl),LHe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,RHe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,NHe=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Due(t){var e=t.match(NHe);if(!e)return"";var r="";return e.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),Te(e,function(n){n=n.split(":"),r+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),r}function FHe(t,e){var r=LHe.exec(t),n=nA(iA(parseFloat(r[1])),Math.PI*2),i=r[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=Due(i)}function BHe(t,e){var r=RHe.exec(t),n=parseFloat(r[1]),i=parseFloat(r[2]),a=parseFloat(r[3]),o=r[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",a),e.innerHTML=Due(o)}var $He=function(){function t(e){this.cfg={};var r=null,n=bc("gradient_");return e.toLowerCase()[0]==="l"?(r=ll("linearGradient"),FHe(e,r)):(r=ll("radialGradient"),BHe(e,r)),r.setAttribute("id",n),this.el=r,this.id=n,this.cfg=e,this}return t.prototype.match=function(e,r){return this.cfg===r},t}(),zHe={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},jHe={x:"-40%",y:"-40%",width:"200%",height:"200%"},GHe=function(){function t(e){this.type="filter",this.cfg={},this.type="filter";var r=ll("filter");return Te(jHe,function(n,i){r.setAttribute(i,n)}),this.el=r,this.id=bc("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,r),this}return t.prototype.match=function(e,r){if(this.type!==e)return!1;var n=!0,i=this.cfg;return Te(Object.keys(i),function(a){if(i[a]!==r[a])return n=!1,!1}),n},t.prototype.update=function(e,r){var n=this.cfg;return n[zHe[e]]=r,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(e,r){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;r.innerHTML=n},t}(),aV=function(){function t(e,r){this.cfg={};var n=ll("marker"),i=bc("marker_");n.setAttribute("id",i);var a=ll("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=e[r==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(r,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(e,r){var n=this.el;r.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(e,r){var n=this.el,i=this.cfg.path,a=this.cfg.d;Xt(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),r.setAttribute("d",i),n.appendChild(r),a&&n.setAttribute("refX",""+a/e)},t.prototype.update=function(e){var r=this.child;r.attr?r.attr("fill",e):r.setAttribute("fill",e)},t}(),UHe=function(){function t(e){this.type="clip",this.cfg={};var r=ll("clipPath");this.el=r,this.id=bc("clip_"),r.id=this.id;var n=e.cfg.el;return r.appendChild(n),this.cfg=e,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},t}(),WHe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,VHe=function(){function t(e){this.cfg={};var r=ll("pattern");r.setAttribute("patternUnits","userSpaceOnUse");var n=ll("image");r.appendChild(n);var i=bc("pattern_");r.id=i,this.el=r,this.id=i,this.cfg=e;var a=WHe.exec(e),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){r.setAttribute("width",""+s.width),r.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return t.prototype.match=function(e,r){return this.cfg===r},t}(),HHe=function(){function t(e){var r=ll("defs"),n=bc("defs_");r.id=n,e.appendChild(r),this.children=[],this.defaultArrow={},this.el=r,this.canvas=e}return t.prototype.find=function(e,r){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(e,r)){i=n[a].id;break}return i},t.prototype.findById=function(e){for(var r=this.children,n=null,i=0;i<r.length;i++)if(r[i].id===e){n=r[i];break}return n},t.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},t.prototype.getDefaultArrow=function(e,r){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new aV(e,r);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},t.prototype.addGradient=function(e){var r=new $He(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addArrow=function(e,r){var n=new aV(e,r);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(e){var r=new GHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addPattern=function(e){var r=new VHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addClip=function(e){var r=new UHe(e);return this.el.appendChild(r.el),this.add(r),r.id},t}(),y2=function(t){cr(e,t);function e(r){return t.call(this,j(j({},r),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return pR},e.prototype.getGroupBase=function(){return Iue},e.prototype.getShape=function(r,n,i){var a=i.target||i.srcElement;if(!f4[a.tagName]){for(var o=a.parentNode;o&&!f4[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var r=ll("svg"),n=new HHe(r);return r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")),this.set("context",n),r},e.prototype.onCanvasChange=function(r){var n=this.get("context"),i=this.get("el");if(r==="sort"){var a=this.get("children");a&&a.length&&Aue(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(r==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else r==="matrix"?Nb(this):r==="clip"?Dw(this,n):r==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var r=this.get("context"),n=this.getChildren();Dw(this,r),n.length&&Tue(r,n)},e}(tle);function AE(t,e,r){if(t){if(typeof t.addEventListener=="function")return t.addEventListener(e,r,!1),{remove:function(){t.removeEventListener(e,r,!1)}};if(typeof t.attachEvent=="function")return t.attachEvent("on"+e,r),{remove:function(){t.detachEvent("on"+e,r)}}}}var X1,LI,Pue,h4;function XHe(){X1=document.createElement("table"),LI=document.createElement("tr"),Pue=/^\s*<(\w+|!)[^>]*>/,h4={tr:document.createElement("tbody"),tbody:X1,thead:X1,tfoot:X1,td:LI,th:LI,"*":document.createElement("div")}}function Cn(t){X1||XHe();var e=Pue.test(t)&&RegExp.$1;(!e||!(e in h4))&&(e="*");var r=h4[e];t=typeof t=="string"?t.replace(/(^\s*)|(\s*$)/g,""):t,r.innerHTML=""+t;var n=r.childNodes[0];return n&&r.contains(n)&&r.removeChild(n),n}function Mr(t,e){if(t)for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r]);return t}var Lue={exports:{}},YHe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Rue={exports:{}},qHe=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},KHe=qHe,QHe=Array.prototype.concat,ZHe=Array.prototype.slice,oV=Rue.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];KHe(a)?r=QHe.call(r,ZHe.call(a)):r.push(a)}return r};oV.wrap=function(t){return function(){return t(oV(arguments))}};var JHe=Rue.exports,w2=YHe,Fb=JHe,Nue=Object.hasOwnProperty,Fue=Object.create(null);for(var RI in w2)Nue.call(w2,RI)&&(Fue[w2[RI]]=RI);var hs=Lue.exports={to:{},get:{}};hs.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=hs.get.hsl(t),n="hsl";break;case"hwb":r=hs.get.hwb(t),n="hwb";break;default:r=hs.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};hs.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,o=[0,0,0,1],s,l,u;if(s=t.match(r)){for(u=s[2],s=s[1],l=0;l<3;l++){var c=l*2;o[l]=parseInt(s.slice(c,c+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(s=t.match(e)){for(s=s[1],u=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(s=t.match(n)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=t.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=t.match(a))?s[1]==="transparent"?[0,0,0,0]:Nue.call(w2,s[1])?(o=w2[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=vd(o[l],0,255);return o[3]=vd(o[3],0,1),o};hs.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,a=vd(parseFloat(r[2]),0,100),o=vd(parseFloat(r[3]),0,100),s=vd(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};hs.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,a=vd(parseFloat(r[2]),0,100),o=vd(parseFloat(r[3]),0,100),s=vd(isNaN(n)?1:n,0,1);return[i,a,o,s]}return null};hs.to.hex=function(){var t=Fb(arguments);return"#"+TE(t[0])+TE(t[1])+TE(t[2])+(t[3]<1?TE(Math.round(t[3]*255)):"")};hs.to.rgb=function(){var t=Fb(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};hs.to.rgb.percent=function(){var t=Fb(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};hs.to.hsl=function(){var t=Fb(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};hs.to.hwb=function(){var t=Fb(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};hs.to.keyword=function(t){return Fue[t.slice(0,3)]};function vd(t,e,r){return Math.min(Math.max(e,t),r)}function TE(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var eXe=Lue.exports,Bue={exports:{}},tXe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},av=tXe,$ue={};for(var NI in av)av.hasOwnProperty(NI)&&($ue[av[NI]]=NI);var nr=Bue.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var So in nr)if(nr.hasOwnProperty(So)){if(!("channels"in nr[So]))throw new Error("missing channels property: "+So);if(!("labels"in nr[So]))throw new Error("missing channel labels property: "+So);if(nr[So].labels.length!==nr[So].channels)throw new Error("channel and label counts mismatch: "+So);var rXe=nr[So].channels,nXe=nr[So].labels;delete nr[So].channels,delete nr[So].labels,Object.defineProperty(nr[So],"channels",{value:rXe}),Object.defineProperty(nr[So],"labels",{value:nXe})}nr.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=a-i,s,l,u;return a===i?s=0:e===a?s=(r-n)/o:r===a?s=2+(n-e)/o:n===a&&(s=4+(e-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(i+a)/2,a===i?l=0:u<=.5?l=o/(a+i):l=o/(2-a-i),[s,l*100,u*100]};nr.rgb.hsv=function(t){var e,r,n,i,a,o=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(o,s,l),c=u-Math.min(o,s,l),f=function(h){return(u-h)/6/c+1/2};return c===0?i=a=0:(a=c/u,e=f(o),r=f(s),n=f(l),o===u?i=n-r:s===u?i=1/3+e-n:l===u&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,a*100,u*100]};nr.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=nr.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,a*100,n*100]};nr.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,a,o,s;return s=Math.min(1-e,1-r,1-n),i=(1-e-s)/(1-s)||0,a=(1-r-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,[i*100,a*100,o*100,s*100]};function iXe(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}nr.rgb.keyword=function(t){var e=$ue[t];if(e)return e;var r=1/0,n;for(var i in av)if(av.hasOwnProperty(i)){var a=av[i],o=iXe(t,a);o<r&&(r=o,n=i)}return n};nr.keyword.rgb=function(t){return av[t]};nr.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,a=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,a*100,o*100]};nr.rgb.lab=function(t){var e=nr.rgb.xyz(t),r=e[0],n=e[1],i=e[2],a,o,s;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=116*n-16,o=500*(r-n),s=200*(n-i),[a,o,s]};nr.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,a,o,s,l;if(r===0)return l=n*255,[l,l,l];n<.5?a=n*(1+r):a=n+r-n*r,i=2*n-a,s=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(a-i)*6*o:2*o<1?l=a:3*o<2?l=i+(a-i)*(2/3-o)*6:l=i,s[u]=l*255;return s};nr.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,a=Math.max(n,.01),o,s;return n*=2,r*=n<=1?n:2-n,i*=a<=1?a:2-a,s=(n+r)/2,o=n===0?2*i/(a+i):2*r/(n+r),[e,o*100,s*100]};nr.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*n*(1-r),s=255*n*(1-r*a),l=255*n*(1-r*(1-a));switch(n*=255,i){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}};nr.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),a,o,s;return s=(2-r)*n,a=(2-r)*i,o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};nr.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,a,o,s,l;i>1&&(r/=i,n/=i),a=Math.floor(6*e),o=1-n,s=6*e-a,a&1&&(s=1-s),l=r+s*(o-r);var u,c,f;switch(a){default:case 6:case 0:u=o,c=l,f=r;break;case 1:u=l,c=o,f=r;break;case 2:u=r,c=o,f=l;break;case 3:u=r,c=l,f=o;break;case 4:u=l,c=r,f=o;break;case 5:u=o,c=r,f=l;break}return[u*255,c*255,f*255]};nr.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,a,o,s;return a=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),s=1-Math.min(1,n*(1-i)+i),[a*255,o*255,s*255]};nr.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,a,o;return i=e*3.2406+r*-1.5372+n*-.4986,a=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[i*255,a*255,o*255]};nr.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,a=500*(e-r),o=200*(r-n),[i,a,o]};nr.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;a=(e+16)/116,i=r/500+a,o=a-n/200;var s=Math.pow(a,3),l=Math.pow(i,3),u=Math.pow(o,3);return a=s>.008856?s:(a-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,i*=95.047,a*=100,o*=108.883,[i,a,o]};nr.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return i=Math.atan2(n,r),a=i*360/2/Math.PI,a<0&&(a+=360),o=Math.sqrt(r*r+n*n),[e,o,a]};nr.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,a,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),a=r*Math.sin(o),[e,i,a]};nr.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:nr.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(a+=60),a};nr.hsv.ansi16=function(t){return nr.rgb.ansi16(nr.hsv.rgb(t),t[2])};nr.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};nr.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,a=(e>>2&1)*r*255;return[n,i,a]};nr.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,a=r%6/5*255;return[n,i,a]};nr.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};nr.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),i=n>>16&255,a=n>>8&255,o=n&255;return[i,a,o]};nr.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),a=Math.min(Math.min(e,r),n),o=i-a,s,l;return o<1?s=a/(1-o):s=0,o<=0?l=0:i===e?l=(r-n)/o%6:i===r?l=2+(n-e)/o:l=4+(e-r)/o+4,l/=6,l%=1,[l*360,o*100,s*100]};nr.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};nr.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};nr.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],a=e%1*6,o=a%1,s=1-o,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};nr.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};nr.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};nr.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};nr.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],i*100,a*100]};nr.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};nr.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};nr.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};nr.gray.hsl=nr.gray.hsv=function(t){return[0,0,t[0]]};nr.gray.hwb=function(t){return[0,100,t[0]]};nr.gray.cmyk=function(t){return[0,0,0,t[0]]};nr.gray.lab=function(t){return[t[0],0,0]};nr.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};nr.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var zue=Bue.exports,sk=zue;function aXe(){for(var t={},e=Object.keys(sk),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function oXe(t){var e=aXe(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(sk[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=e[s];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,r.unshift(s))}return e}function sXe(t,e){return function(r){return e(t(r))}}function lXe(t,e){for(var r=[e[t].parent,t],n=sk[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=sXe(sk[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}var uXe=function(t){for(var e=oXe(t),r={},n=Object.keys(e),i=n.length,a=0;a<i;a++){var o=n[a],s=e[o];s.parent!==null&&(r[o]=lXe(o,e))}return r},d4=zue,cXe=uXe,Jg={},fXe=Object.keys(d4);function hXe(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function dXe(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}fXe.forEach(function(t){Jg[t]={},Object.defineProperty(Jg[t],"channels",{value:d4[t].channels}),Object.defineProperty(Jg[t],"labels",{value:d4[t].labels});var e=cXe(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];Jg[t][n]=dXe(i),Jg[t][n].raw=hXe(i)})});var pXe=Jg,Y1=eXe,as=pXe,rF=[].slice,jue=["keyword","gray","hex"],p4={};Object.keys(as).forEach(function(t){p4[rF.call(as[t].labels).sort().join("")]=t});var lk={};function va(t,e){if(!(this instanceof va))return new va(t,e);if(e&&e in jue&&(e=null),e&&!(e in as))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof va)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=Y1.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=as[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=as[this.model].channels;var a=rF.call(t,0,n);this.color=v4(a,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var s=o.sort().join("");if(!(s in p4))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=p4[s];var l=as[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(t[l[r]]);this.color=v4(u)}if(lk[this.model])for(n=as[this.model].channels,r=0;r<n;r++){var c=lk[this.model][r];c&&(this.color[r]=c(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}va.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Y1.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return Y1.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return Y1.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=as[this.model].channels,r=as[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new va(this.color.map(gXe(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new va(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:ui("rgb",0,Ni(255)),green:ui("rgb",1,Ni(255)),blue:ui("rgb",2,Ni(255)),hue:ui(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:ui("hsl",1,Ni(100)),lightness:ui("hsl",2,Ni(100)),saturationv:ui("hsv",1,Ni(100)),value:ui("hsv",2,Ni(100)),chroma:ui("hcg",1,Ni(100)),gray:ui("hcg",2,Ni(100)),white:ui("hwb",1,Ni(100)),wblack:ui("hwb",2,Ni(100)),cyan:ui("cmyk",0,Ni(100)),magenta:ui("cmyk",1,Ni(100)),yellow:ui("cmyk",2,Ni(100)),black:ui("cmyk",3,Ni(100)),x:ui("xyz",0,Ni(100)),y:ui("xyz",1,Ni(100)),z:ui("xyz",2,Ni(100)),l:ui("lab",0,Ni(100)),a:ui("lab",1),b:ui("lab",2),keyword:function(t){return arguments.length?new va(t):as[this.model].keyword(this.color)},hex:function(t){return arguments.length?new va(t):Y1.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return va.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,a=2*i-1,o=r.alpha()-n.alpha(),s=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return va.rgb(s*r.red()+l*n.red(),s*r.green()+l*n.green(),s*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(as).forEach(function(t){if(jue.indexOf(t)===-1){var e=as[t].channels;va.prototype[t]=function(){if(this.model===t)return new va(this);if(arguments.length)return new va(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new va(mXe(as[this.model][t].raw(this.color)).concat(r),t)},va[t]=function(r){return typeof r=="number"&&(r=v4(rF.call(arguments),e)),new va(r,t)}}});function vXe(t,e){return Number(t.toFixed(e))}function gXe(t){return function(e){return vXe(e,t)}}function ui(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(lk[n]||(lk[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Ni(t){return function(e){return Math.max(0,Math.min(t,e))}}function mXe(t){return Array.isArray(t)?t:[t]}function v4(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}var yXe=va;const b2=_s(yXe);function uk(t){"@babel/helpers - typeof";return uk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uk(t)}var wXe=/^\s+/,bXe=/\s+$/;function ir(t,e){if(t=t||"",e=e||{},t instanceof ir)return t;if(!(this instanceof ir))return new ir(t,e);var r=xXe(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ir.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,n,i,a,o,s;return r=e.r/255,n=e.g/255,i=e.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=Gue(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=lV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=lV(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=sV(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=sV(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return uV(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return CXe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Un(this._r,255)*100)+"%",g:Math.round(Un(this._g,255)*100)+"%",b:Math.round(Un(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Un(this._r,255)*100)+"%, "+Math.round(Un(this._g,255)*100)+"%, "+Math.round(Un(this._b,255)*100)+"%)":"rgba("+Math.round(Un(this._r,255)*100)+"%, "+Math.round(Un(this._g,255)*100)+"%, "+Math.round(Un(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:FXe[uV(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+cV(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=ir(e);n="#"+cV(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(e){var r=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,a=!r&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return ir(this.toString())},_applyModification:function(e,r){var n=e.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(TXe,arguments)},brighten:function(){return this._applyModification(OXe,arguments)},darken:function(){return this._applyModification(IXe,arguments)},desaturate:function(){return this._applyModification(kXe,arguments)},saturate:function(){return this._applyModification(MXe,arguments)},greyscale:function(){return this._applyModification(AXe,arguments)},spin:function(){return this._applyModification(DXe,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(RXe,arguments)},complement:function(){return this._applyCombination(PXe,arguments)},monochromatic:function(){return this._applyCombination(NXe,arguments)},splitcomplement:function(){return this._applyCombination(LXe,arguments)},triad:function(){return this._applyCombination(fV,[3])},tetrad:function(){return this._applyCombination(fV,[4])}};ir.fromRatio=function(t,e){if(uk(t)=="object"){var r={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?r[n]=t[n]:r[n]=q1(t[n]));t=r}return ir(t,e)};function xXe(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return typeof t=="string"&&(t=jXe(t)),uk(t)=="object"&&(Xc(t.r)&&Xc(t.g)&&Xc(t.b)?(e=SXe(t.r,t.g,t.b),o=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Xc(t.h)&&Xc(t.s)&&Xc(t.v)?(n=q1(t.s),i=q1(t.v),e=_Xe(t.h,n,i),o=!0,s="hsv"):Xc(t.h)&&Xc(t.s)&&Xc(t.l)&&(n=q1(t.s),a=q1(t.l),e=EXe(t.h,n,a),o=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=Gue(r),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function SXe(t,e,r){return{r:Un(t,255)*255,g:Un(e,255)*255,b:Un(r,255)*255}}function sV(t,e,r){t=Un(t,255),e=Un(e,255),r=Un(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a,o,s=(n+i)/2;if(n==i)a=o=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function EXe(t,e,r){var n,i,a;t=Un(t,360),e=Un(e,100),r=Un(r,100);function o(u,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(c-u)*6*f:f<1/2?c:f<2/3?u+(c-u)*(2/3-f)*6:u}if(e===0)n=i=a=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:n*255,g:i*255,b:a*255}}function lV(t,e,r){t=Un(t,255),e=Un(e,255),r=Un(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a,o,s=n,l=n-i;if(o=n===0?0:l/n,n==i)a=0;else{switch(n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,v:s}}function _Xe(t,e,r){t=Un(t,360)*6,e=Un(e,100),r=Un(r,100);var n=Math.floor(t),i=t-n,a=r*(1-e),o=r*(1-i*e),s=r*(1-(1-i)*e),l=n%6,u=[r,o,a,a,s,r][l],c=[s,r,r,o,a,a][l],f=[a,a,s,r,r,o][l];return{r:u*255,g:c*255,b:f*255}}function uV(t,e,r,n){var i=[Ul(Math.round(t).toString(16)),Ul(Math.round(e).toString(16)),Ul(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function CXe(t,e,r,n,i){var a=[Ul(Math.round(t).toString(16)),Ul(Math.round(e).toString(16)),Ul(Math.round(r).toString(16)),Ul(Uue(n))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function cV(t,e,r,n){var i=[Ul(Uue(n)),Ul(Math.round(t).toString(16)),Ul(Math.round(e).toString(16)),Ul(Math.round(r).toString(16))];return i.join("")}ir.equals=function(t,e){return!t||!e?!1:ir(t).toRgbString()==ir(e).toRgbString()};ir.random=function(){return ir.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function kXe(t,e){e=e===0?0:e||10;var r=ir(t).toHsl();return r.s-=e/100,r.s=_A(r.s),ir(r)}function MXe(t,e){e=e===0?0:e||10;var r=ir(t).toHsl();return r.s+=e/100,r.s=_A(r.s),ir(r)}function AXe(t){return ir(t).desaturate(100)}function TXe(t,e){e=e===0?0:e||10;var r=ir(t).toHsl();return r.l+=e/100,r.l=_A(r.l),ir(r)}function OXe(t,e){e=e===0?0:e||10;var r=ir(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),ir(r)}function IXe(t,e){e=e===0?0:e||10;var r=ir(t).toHsl();return r.l-=e/100,r.l=_A(r.l),ir(r)}function DXe(t,e){var r=ir(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,ir(r)}function PXe(t){var e=ir(t).toHsl();return e.h=(e.h+180)%360,ir(e)}function fV(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ir(t).toHsl(),n=[ir(t)],i=360/e,a=1;a<e;a++)n.push(ir({h:(r.h+a*i)%360,s:r.s,l:r.l}));return n}function LXe(t){var e=ir(t).toHsl(),r=e.h;return[ir(t),ir({h:(r+72)%360,s:e.s,l:e.l}),ir({h:(r+216)%360,s:e.s,l:e.l})]}function RXe(t,e,r){e=e||6,r=r||30;var n=ir(t).toHsl(),i=360/r,a=[ir(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(ir(n));return a}function NXe(t,e){e=e||6;for(var r=ir(t).toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/e;e--;)o.push(ir({h:n,s:i,v:a})),a=(a+s)%1;return o}ir.mix=function(t,e,r){r=r===0?0:r||50;var n=ir(t).toRgb(),i=ir(e).toRgb(),a=r/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return ir(o)};ir.readability=function(t,e){var r=ir(t),n=ir(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};ir.isReadable=function(t,e,r){var n=ir.readability(t,e),i,a;switch(a=!1,i=GXe(r),i.level+i.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};ir.mostReadable=function(t,e,r){var n=null,i=0,a,o,s,l;r=r||{},o=r.includeFallbackColors,s=r.level,l=r.size;for(var u=0;u<e.length;u++)a=ir.readability(t,e[u]),a>i&&(i=a,n=ir(e[u]));return ir.isReadable(t,n,{level:s,size:l})||!o?n:(r.includeFallbackColors=!1,ir.mostReadable(t,["#fff","#000"],r))};var g4=ir.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},FXe=ir.hexNames=BXe(g4);function BXe(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function Gue(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Un(t,e){$Xe(t)&&(t="100%");var r=zXe(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function _A(t){return Math.min(1,Math.max(0,t))}function qo(t){return parseInt(t,16)}function $Xe(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function zXe(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Ul(t){return t.length==1?"0"+t:""+t}function q1(t){return t<=1&&(t=t*100+"%"),t}function Uue(t){return Math.round(parseFloat(t)*255).toString(16)}function hV(t){return qo(t)/255}var Al=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Xc(t){return!!Al.CSS_UNIT.exec(t)}function jXe(t){t=t.replace(wXe,"").replace(bXe,"").toLowerCase();var e=!1;if(g4[t])t=g4[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Al.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Al.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Al.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Al.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Al.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Al.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Al.hex8.exec(t))?{r:qo(r[1]),g:qo(r[2]),b:qo(r[3]),a:hV(r[4]),format:e?"name":"hex8"}:(r=Al.hex6.exec(t))?{r:qo(r[1]),g:qo(r[2]),b:qo(r[3]),format:e?"name":"hex"}:(r=Al.hex4.exec(t))?{r:qo(r[1]+""+r[1]),g:qo(r[2]+""+r[2]),b:qo(r[3]+""+r[3]),a:hV(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Al.hex3.exec(t))?{r:qo(r[1]+""+r[1]),g:qo(r[2]+""+r[2]),b:qo(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function GXe(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var OE=2,dV=.16,UXe=.05,WXe=.05,VXe=.15,Wue=5,Vue=4,HXe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function pV(t,e,r){var n;return Math.round(t.h)>=60&&Math.round(t.h)<=240?n=r?Math.round(t.h)-OE*e:Math.round(t.h)+OE*e:n=r?Math.round(t.h)+OE*e:Math.round(t.h)-OE*e,n<0?n+=360:n>=360&&(n-=360),n}function vV(t,e,r){if(t.h===0&&t.s===0)return t.s;var n;return r?n=t.s-dV*e:e===Vue?n=t.s+dV:n=t.s+UXe*e,n>1&&(n=1),r&&e===Wue&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function gV(t,e,r){var n;return r?n=t.v+WXe*e:n=t.v-VXe*e,n>1&&(n=1),Number(n.toFixed(2))}function ck(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],n=ir(t),i=Wue;i>0;i-=1){var a=n.toHsv(),o=ir({h:pV(a,i,!0),s:vV(a,i,!0),v:gV(a,i,!0)}).toHexString();r.push(o)}r.push(n.toHexString());for(var s=1;s<=Vue;s+=1){var l=n.toHsv(),u=ir({h:pV(l,s),s:vV(l,s),v:gV(l,s)}).toHexString();r.push(u)}return e.theme==="dark"?HXe.map(function(c){var f=c.index,h=c.opacity,d=ir.mix(e.backgroundColor||"#141414",r[f],h*100).toHexString();return d}):r}var FI={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},BI={},$I={};Object.keys(FI).forEach(function(t){BI[t]=ck(FI[t]),BI[t].primary=BI[t][5],$I[t]=ck(FI[t],{theme:"dark",backgroundColor:"#141414"}),$I[t].primary=$I[t][5]});var zi=function(e,r,n){var i=b2(e),a=b2(r);return b2([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},XXe=function(e,r,n){r===void 0&&(r="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var i=zi(r,e,.05).rgb().toString(),a=zi(r,e,.1).rgb().toString(),o=zi(r,e,.2).rgb().toString(),s=zi(r,e,.4).rgb().toString(),l=zi(r,n,.02).rgb().toString(),u=zi(r,n,.05).rgb().toString(),c=zi(r,n,.1).rgb().toString(),f=zi(r,n,.2).rgb().toString(),h=zi(r,n,.3).rgb().toString(),d=ck(e,{theme:"default",backgroundColor:r}),p=b2(e).hex().toLowerCase(),v=d.indexOf(p),g=e;return v!==-1&&(g=d[v+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:r,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:f,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:l,comboActiveStroke:e,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},YXe=function(e,r,n){r===void 0&&(r="#fff"),n===void 0&&(n="#777");var i=zi(r,e,.2).rgb().toString(),a=zi(r,e,.3).rgb().toString(),o=zi(r,e,.6).rgb().toString(),s=zi(r,e,.8).rgb().toString(),l=zi(r,n,.2).rgb().toString(),u=zi(r,n,.25).rgb().toString(),c=zi(r,n,.3).rgb().toString(),f=zi(r,n,.4).rgb().toString(),h=zi(r,n,.5).rgb().toString(),d=ck(e,{theme:"dark",backgroundColor:r}),p=b2(e).hex().toLowerCase(),v=d.indexOf(p),g=e;return v!==-1&&(g=d[v+1]),{mainStroke:s,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:e,selectedFill:i,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:u,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:e,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},nF=function(e,r,n,i){return r===void 0&&(r="#fff"),n===void 0&&(n="default"),n==="default"?XXe(e,r,"rgb(150, 150, 150)"):YXe(e,r,"#777")},qXe=function(e,r,n,i){r===void 0&&(r="#fff"),n===void 0&&(n="default");var a=[];return e.forEach(function(o){a.push(nF(o,r,n))}),a};const KXe=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:qXe,getColorsWithSubjectColor:nF,mixColor:zi},Symbol.toStringTag,{value:"Module"}));var QXe="rgb(95, 149, 255)",ZXe="rgb(255, 255, 255)",mV="rgb(0, 0, 0)",jr=nF(QXe,ZXe);const ov={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:jr.mainStroke,fill:jr.mainFill},size:20,color:jr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:jr.activeFill,stroke:jr.activeStroke}},nodeStateStyles:{active:{fill:jr.activeFill,stroke:jr.activeStroke,lineWidth:2,shadowColor:jr.mainStroke,shadowBlur:10},selected:{fill:jr.selectedFill,stroke:jr.selectedStroke,lineWidth:4,shadowColor:jr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:jr.highlightFill,stroke:jr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:jr.inactiveFill,stroke:jr.inactiveStroke,lineWidth:1},disable:{fill:jr.disableFill,stroke:jr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:mV,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:jr.edgeMainStroke,lineAppendWidth:2},color:jr.edgeMainStroke},edgeStateStyles:{active:{stroke:jr.edgeActiveStroke,lineWidth:1},selected:{stroke:jr.edgeSelectedStroke,lineWidth:2,shadowColor:jr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:jr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:jr.edgeInactiveStroke,lineWidth:1},disable:{stroke:jr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:mV,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:jr.comboMainFill,lineWidth:1,stroke:jr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:jr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:jr.comboActiveStroke,lineWidth:1,fill:jr.comboActiveFill},selected:{stroke:jr.comboSelectedStroke,lineWidth:2,fill:jr.comboSelectedFill,shadowColor:jr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:jr.comboHighlightStroke,lineWidth:2,fill:jr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:jr.comboInactiveStroke,fill:jr.comboInactiveFill,lineWidth:1},disable:{stroke:jr.comboDisableStroke,fill:jr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var JXe=function(e){var r=e.clone();return eYe(e,r),r},eYe=function t(e,r){var n;e.isGroup()&&r.isGroup()&&((n=e.get("children"))===null||n===void 0||n.forEach(function(s,l){var u=r.get("children")[l];t(s,u)}));var i=e.get("type"),a=r.get("type");if(!(i!=="image"||a!=="image")){var o=e.get("clipShape");o&&r.setClip({type:o.get("type"),attrs:o.attr()})}},tYe=_a.cloneEvent,rYe=_a.isViewportChanged,nYe=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=r,n.destroyed=!1,n.initEvents(),n}return e.prototype.initEvents=function(){var r=this,n=r.graph,i=r.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=Bp(this,"onCanvasEvents"),u=Bp(this,"onExtendEvents"),c=Bp(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(AE(s,"wheel",c)),typeof window<"u"&&(a.push(AE(window,"keydown",u)),a.push(AE(window,"keyup",u)),a.push(AE(window,"focus",u))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=Bp(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},e.prototype.onCanvasEvents=function(r){var n=this,i=this.graph,a=i.get("canvas"),o=r.target,s=r.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},r,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},r,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return;break}r.canvasX=r.x,r.canvasY=r.y;var l={x:r.canvasX,y:r.canvasY},u=i.get("group"),c=u.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),rYe(c)&&(l=i.getPointByClient(r.clientX,r.clientY)),r.x=l.x,r.y=l.y,r.currentTarget=i,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(r,"canvas"),r.target=a,r.item=null,i.emit(s,r),i.emit("canvas:".concat(s),r);return}var f=e.getItemRoot(o);if(!f){i.emit(s,r);return}var h=f.get("item");if(!h.destroyed){var d=h.getType();if(r.target=o,r.item=h,r.canvasX===r.x&&r.canvasY===r.y){var p=i.getCanvasByPoint(r.x,r.y);r.canvasX=p.x,r.canvasY=p.y}r.name&&!r.name.includes(":")?(i.emit("".concat(d,":").concat(s),r),i.emit(s,r)):r.name&&i.emit(r.name,r),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(r,d)}},e.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},e.prototype.onWheelEvent=function(r){Gt(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},e.prototype.handleMouseMove=function(r,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=r.target===s?null:r.item;r=tYe(r),o&&o!==l&&!o.destroyed&&(r.item=o,this.emitCustomEvent(o.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",r)),l&&o!==l&&(r.item=l,this.emitCustomEvent(n,"mouseenter",r),this.dragging&&this.emitCustomEvent(n,"dragenter",r)),this.preItem=l},e.prototype.emitCustomEvent=function(r,n,i){i.type=n,this.graph.emit("".concat(r,":").concat(n),i)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var r=this,n=r.graph,i=r.canvasHandler,a=r.extendEvents,o=n.get("canvas");o.off("*",i),Te(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(zle),Pr={},bf={},di={};Object.defineProperty(di,"__esModule",{value:!0});di.Base=void 0;var iYe=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(e){return this.init(e),this.execute(!0)},t.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},t.prototype.execute=function(e){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(e){e&&Object.assign(this,e)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();di.Base=iYe;var zI={},jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.camelize=jm.isString=void 0;var aYe=function(t){return typeof t=="string"};jm.isString=aYe;var oYe=function(t){var e=Object.create(null);return function(r){var n=e[r];return n||(e[r]=t(r))}},sYe=/-(\w)/g;jm.camelize=oYe(function(t){return t.replace(sYe,function(e,r){return r?r.toUpperCase():""})});var Bb={};Object.defineProperty(Bb,"__esModule",{value:!0});Bb.isArray=void 0;Bb.isArray=Array.isArray;var CA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=t.isNaN=t.isNumber=void 0;var e=function(i){return typeof i=="number"};t.isNumber=e;var r=function(i){return Number.isNaN(Number(i))};t.isNaN=r;var n=function(i){var a=parseFloat(i);return(0,t.isNaN)(a)?i:a};t.toNumber=n})(CA);var kA={},iF={};(function(t){var e=Oe&&Oe.__assign||function(){return e=Object.assign||function(i){for(var a,o=1,s=arguments.length;o<s;o++){a=arguments[o];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])}return i},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.isObject=void 0;var r=function(i){return i!==null&&typeof i=="object"};t.isObject=r;var n=function(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var a=[];return i.forEach(function(s){a.push(s)}),a.map(function(s){return(0,t.clone)(s)})}if(typeof i=="object"&&Object.keys(i).length){var o=e({},i);return Object.keys(o).forEach(function(s){o[s]=(0,t.clone)(o[s])}),o}return i};t.clone=n})(iF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreNodeAndRelativeLeafNodes=t.getAvgNodePosition=t.getLayoutBBox=t.traverseTreeUp=t.scaleMatrix=t.getAdjMatrix=t.floydWarshall=t.getDegreeMap=t.getDegree=t.getEdgeTerminal=void 0;var e=Bb,r=CA,n=iF,i=function(y,w){var b=y[w];return(0,n.isObject)(b)?b.cell:b};t.getEdgeTerminal=i;var a=function(y,w,b){for(var x=[],S=0;S<y;S++)x[S]={in:0,out:0,all:0};return b&&b.forEach(function(E){var _=(0,t.getEdgeTerminal)(E,"source"),k=(0,t.getEdgeTerminal)(E,"target");_&&x[w[_]]&&(x[w[_]].out+=1,x[w[_]].all+=1),k&&x[w[k]]&&(x[w[k]].in+=1,x[w[k]].all+=1)}),x};t.getDegree=a;var o=function(y,w){var b={};return y.forEach(function(x){b[x.id]={in:0,out:0,all:0}}),w&&w.forEach(function(x){var S=(0,t.getEdgeTerminal)(x,"source"),E=(0,t.getEdgeTerminal)(x,"target");S&&(b[S].out+=1,b[S].all+=1),E&&(b[E].in+=1,b[E].all+=1)}),b};t.getDegreeMap=o;var s=function(y){for(var w=[],b=y.length,x=0;x<b;x+=1){w[x]=[];for(var S=0;S<b;S+=1)x===S?w[x][S]=0:y[x][S]===0||!y[x][S]?w[x][S]=1/0:w[x][S]=y[x][S]}for(var E=0;E<b;E+=1)for(var x=0;x<b;x+=1)for(var S=0;S<b;S+=1)w[x][S]>w[x][E]+w[E][S]&&(w[x][S]=w[x][E]+w[E][S]);return w};t.floydWarshall=s;var l=function(y,w){var b=y.nodes,x=y.edges,S=[],E={};if(!b)throw new Error("invalid nodes data!");return b&&b.forEach(function(_,k){E[_.id]=k;var C=[];S.push(C)}),x==null||x.forEach(function(_){var k=(0,t.getEdgeTerminal)(_,"source"),C=(0,t.getEdgeTerminal)(_,"target"),M=E[k],A=E[C];M===void 0||A===void 0||(S[M][A]=1,w||(S[A][M]=1))}),S};t.getAdjMatrix=l;var u=function(y,w){var b=[];return y.forEach(function(x){var S=[];x.forEach(function(E){S.push(E*w)}),b.push(S)}),b};t.scaleMatrix=u;var c=function(y,w){if(y&&y.children){for(var b=y.children.length-1;b>=0;b--)if(!c(y.children[b],w))return}return!!w(y)},f=function(y,w){typeof w=="function"&&c(y,w)};t.traverseTreeUp=f;var h=function(y){var w=1/0,b=1/0,x=-1/0,S=-1/0;return y.forEach(function(E){var _=E.size;(0,e.isArray)(_)?_.length===1&&(_=[_[0],_[0]]):(0,r.isNumber)(_)?_=[_,_]:(_===void 0||isNaN(_))&&(_=[30,30]);var k=[_[0]/2,_[1]/2],C=E.x-k[0],M=E.x+k[0],A=E.y-k[1],T=E.y+k[1];w>C&&(w=C),b>A&&(b=A),x<M&&(x=M),S<T&&(S=T)}),{minX:w,minY:b,maxX:x,maxY:S}};t.getLayoutBBox=h;var d=function(y){var w={x:0,y:0};y.forEach(function(x){w.x+=x.x||0,w.y+=x.y||0});var b=y.length||1;return{x:w.x/b,y:w.y/b}};t.getAvgNodePosition=d;var p=function(y,w,b){var x,S;return y==="source"?((x=b==null?void 0:b.find(function(E){return E.target===w.id}))===null||x===void 0?void 0:x.source)||{}:((S=b==null?void 0:b.find(function(E){return E.source===w.id}))===null||S===void 0?void 0:S.target)||{}},v=function(y,w,b){var x=[];switch(y){case"source":x=b==null?void 0:b.filter(function(E){return E.source===w.id}).map(function(E){return E.target});break;case"target":x=b==null?void 0:b.filter(function(E){return E.target===w.id}).map(function(E){return E.source});break;case"both":x=b==null?void 0:b.filter(function(E){return E.source===w.id}).map(function(E){return E.target}).concat(b==null?void 0:b.filter(function(E){return E.target===w.id}).map(function(E){return E.source}));break}var S=new Set(x);return Array.from(S)},g=function(y,w,b,x,S){var E=b[w]||"",_=(x==null?void 0:x.filter(function(k){return k[w]===E}))||[];return y==="leaf"&&(_=_.filter(function(k){var C,M;return((C=S[k.id])===null||C===void 0?void 0:C.in)===0||((M=S[k.id])===null||M===void 0?void 0:M.out)===0})),_},m=function(y,w,b,x,S,E){var _=S[w.id],k=_.in,C=_.out,M=w,A=[];k===0?(M=p("source",w,b),A=v("both",M,b).map(function(D){return E[D]})):C===0&&(M=p("target",w,b),A=v("both",M,b).map(function(D){return E[D]})),A=A.filter(function(D){return S[D.id]&&(S[D.id].in===0||S[D.id].out===0)});var T=g(y,x,w,A,S);return{coreNode:M,relativeLeafNodes:A,sameTypeLeafNodes:T}};t.getCoreNodeAndRelativeLeafNodes=m})(kA);var jI={},yV;function lYe(){return yV||(yV=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getFuncByUnknownType=t.getFunc=t.isFunction=void 0;var e=ii(),r=CA,n=function(o){return typeof o=="function"};t.isFunction=n;var i=function(o,s,l){var u;return l?u=l:(0,r.isNumber)(o)?u=function(){return o}:u=function(){return s},u};t.getFunc=i;var a=function(o,s,l){return l===void 0&&(l=!0),!s&&s!==0?function(u){return u.size?(0,e.isArray)(u.size)?u.size[0]>u.size[1]?u.size[0]:u.size[1]:(0,e.isObject)(u.size)?u.size.width>u.size.height?u.size.width:u.size.height:u.size:o}:(0,t.isFunction)(s)?s:(0,r.isNumber)(s)?function(){return s}:(0,e.isArray)(s)?function(){if(l){var u=Math.max.apply(Math,s);return isNaN(u)?o:u}return s}:(0,e.isObject)(s)?function(){if(l){var u=Math.max(s.width,s.height);return isNaN(u)?o:u}return[s.width,s.height]}:function(){return o}};t.getFuncByUnknownType=a}(jI)),jI}var wV;function ii(){return wV||(wV=1,function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Oe&&Oe.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(jm,t),r(Bb,t),r(CA,t),r(kA,t),r(iF,t),r(lYe(),t)}(zI)),zI}var uYe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(bf,"__esModule",{value:!0});bf.getLayoutByName=bf.unRegisterLayout=bf.registerLayout=void 0;var cYe=di,fYe=ii(),Jh=new Map,hYe=function(t,e){if(Jh.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,fYe.isObject)(e)){var r=function(n){uYe(i,n);function i(a){var o=this,s;o=n.call(this)||this;var l=o,u={},c=Object.assign({},l.getDefaultCfg(),((s=e.getDefaultCfg)===null||s===void 0?void 0:s.call(e))||{});return Object.assign(u,c,e,a),Object.keys(u).forEach(function(f){var h=u[f];l[f]=h}),o}return i}(cYe.Base);Jh.set(t,r)}else Jh.set(t,e);return Jh.get(t)};bf.registerLayout=hYe;var dYe=function(t){Jh.has(t)&&Jh.delete(t)};bf.unRegisterLayout=dYe;var pYe=function(t){return Jh.has(t)?Jh.get(t):null};bf.getLayoutByName=pYe;var GI={},$b={},vYe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty($b,"__esModule",{value:!0});$b.GridLayout=void 0;var Fg=ii(),gYe=di,mYe=function(t){vYe(e,t);function e(r){var n=t.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges,a=r.begin,o=n.length;if(o===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i};if(o===1)return n[0].x=a[0],n[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i};var s=r.sortBy,l=r.width,u=r.height,c=r.condense,f=r.preventOverlapPadding,h=r.preventOverlap,d=r.nodeSpacing,p=r.nodeSize,v=[];n.forEach(function(A){v.push(A)});var g={};if(v.forEach(function(A,T){g[A.id]=T}),(s==="degree"||!(0,Fg.isString)(s)||v[0][s]===void 0)&&(s="degree",(0,Fg.isNaN)(n[0].degree))){var m=(0,Fg.getDegree)(v.length,g,i);v.forEach(function(A,T){A.degree=m[T].all})}v.sort(function(A,T){return T[s]-A[s]}),!l&&typeof window<"u"&&(l=window.innerWidth),!u&&typeof window<"u"&&(u=window.innerHeight);var y=r.rows,w=r.cols!=null?r.cols:r.columns;if(r.cells=o,y!=null&&w!=null?(r.rows=y,r.cols=w):y!=null&&w==null?(r.rows=y,r.cols=Math.ceil(r.cells/r.rows)):y==null&&w!=null?(r.cols=w,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.rows=Math.max(r.rows,1),r.cols=Math.max(r.cols,1),r.cols*r.rows>r.cells){var b=r.small(),x=r.large();(b-1)*x>=r.cells?r.small(b-1):(x-1)*b>=r.cells&&r.large(x-1)}else for(;r.cols*r.rows<r.cells;){var b=r.small(),x=r.large();(x+1)*b>=r.cells?r.large(x+1):r.small(b+1)}if(r.cellWidth=l/r.cols,r.cellHeight=u/r.rows,c&&(r.cellWidth=0,r.cellHeight=0),h||d){var S=(0,Fg.getFuncByUnknownType)(10,d),E=(0,Fg.getFuncByUnknownType)(30,p,!1);v.forEach(function(A){(!A.x||!A.y)&&(A.x=0,A.y=0);var T=E(A)||30,D,F;(0,Fg.isArray)(T)?(D=T[0],F=T[1]):(D=T,F=T);var R=S!==void 0?S(A):f,B=D+R,N=F+R;r.cellWidth=Math.max(r.cellWidth,B),r.cellHeight=Math.max(r.cellHeight,N)})}r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(var _=0;_<v.length;_++){var k=v[_],C=void 0;if(r.position&&(C=r.position(k)),C&&(C.row!==void 0||C.col!==void 0)){var M={row:C.row,col:C.col};if(M.col===void 0)for(M.col=0;r.used(M.row,M.col);)M.col++;else if(M.row===void 0)for(M.row=0;r.used(M.row,M.col);)M.row++;r.id2manPos[k.id]=M,r.use(M.row,M.col)}r.getPos(k)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:i,nodes:v}},e.prototype.small=function(r){var n=this,i,a=n.rows||5,o=n.cols||5;if(r==null)i=Math.min(a,o);else{var s=Math.min(a,o);s===n.rows?n.rows=r:n.cols=r}return i},e.prototype.large=function(r){var n=this,i,a=n.rows||5,o=n.cols||5;if(r==null)i=Math.max(a,o);else{var s=Math.max(a,o);s===n.rows?n.rows=r:n.cols=r}return i},e.prototype.used=function(r,n){var i=this;return i.cellUsed["c-".concat(r,"-").concat(n)]||!1},e.prototype.use=function(r,n){var i=this;i.cellUsed["c-".concat(r,"-").concat(n)]=!0},e.prototype.moveToNextCell=function(){var r=this,n=r.cols||5;r.col++,r.col>=n&&(r.col=0,r.row++)},e.prototype.getPos=function(r){var n=this,i=n.begin,a=n.cellWidth,o=n.cellHeight,s,l,u=n.id2manPos[r.id];if(u)s=u.col*a+a/2+i[0],l=u.row*o+o/2+i[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();s=n.col*a+a/2+i[0],l=n.row*o+o/2+i[1],n.use(n.row,n.col),n.moveToNextCell()}r.x=s,r.y=l},e.prototype.getType=function(){return"grid"},e}(gYe.Base);$b.GridLayout=mYe;var zb={},yYe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(zb,"__esModule",{value:!0});zb.RandomLayout=void 0;var wYe=di,bYe=function(t){yYe(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var r=this,n=r.nodes,i=.9,a=r.center;return!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),n&&n.forEach(function(o){o.x=(Math.random()-.5)*i*r.width+a[0],o.y=(Math.random()-.5)*i*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(wYe.Base);zb.RandomLayout=bYe;var jb={},xYe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(jb,"__esModule",{value:!0});jb.GForceLayout=void 0;var SYe=di,Ra=ii(),UI=function(t,e){var r;return t?(0,Ra.isNumber)(t)?r=function(n){return t}:r=t:r=function(n){return e||1},r},EYe=function(t){xYe(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var r,n,i=this,a=i.nodes;if(i.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(i.timeInterval),!a||a.length===0){(r=i.onLayoutEnd)===null||r===void 0||r.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var o=i.center;if(a.length===1){a[0].x=o[0],a[0].y=o[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var s={},l={};a.forEach(function(p,v){(0,Ra.isNumber)(p.x)||(p.x=Math.random()*i.width),(0,Ra.isNumber)(p.y)||(p.y=Math.random()*i.height),s[p.id]=p,l[p.id]=v}),i.nodeMap=s,i.nodeIdxMap=l,i.linkDistance=UI(i.linkDistance,1),i.nodeStrength=UI(i.nodeStrength,1),i.edgeStrength=UI(i.edgeStrength,1);var u=i.nodeSize,c;if(i.preventOverlap){var f=i.nodeSpacing,h;(0,Ra.isNumber)(f)?h=function(){return f}:(0,Ra.isFunction)(f)?h=f:h=function(){return 0},u?(0,Ra.isArray)(u)?c=function(p){return Math.max(u[0],u[1])+h(p)}:c=function(p){return u+h(p)}:c=function(p){return p.size?(0,Ra.isArray)(p.size)?Math.max(p.size[0],p.size[1])+h(p):(0,Ra.isObject)(p.size)?Math.max(p.size.width,p.size.height)+h(p):p.size+h(p):10+h(p)}}i.nodeSize=c;var d=i.edges;i.degrees=(0,Ra.getDegree)(a.length,i.nodeIdxMap,d),i.getMass||(i.getMass=function(p){var v=p.mass||i.degrees[i.nodeIdxMap[p.id]].all||1;return v}),i.run()},e.prototype.run=function(){var r,n=this,i=n.maxIteration,a=n.nodes,o=n.workerEnabled,s=n.minMovement,l=n.animate;if(a)if(o||!l){for(var u=0;u<i;u++){var c=n.runOneStep(u);if(n.reachMoveThreshold(a,c,s))break}(r=n.onLayoutEnd)===null||r===void 0||r.call(n)}else{if(typeof window>"u")return;var f=0;this.timeInterval=window.setInterval(function(){var h,d;if(a){var p=n.runOneStep(f)||[];n.reachMoveThreshold(a,p,s)&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval)),f++,f>=i&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(r,n,i){var a=0;return r.forEach(function(o,s){var l=o.x-n[s].x,u=o.y-n[s].y;a+=Math.sqrt(l*l+u*u)}),a/=r.length,a<i},e.prototype.runOneStep=function(r){var n,i=this,a=i.nodes,o=i.edges,s=[],l=[];if(a){a.forEach(function(f,h){s[2*h]=0,s[2*h+1]=0,l[2*h]=0,l[2*h+1]=0}),i.calRepulsive(s,a),o&&i.calAttractive(s,o),i.calGravity(s,a);var u=Math.max(.02,i.interval-r*.002);i.updateVelocity(s,l,u,a);var c=[];return a.forEach(function(f){c.push({x:f.x,y:f.y})}),i.updatePosition(l,u,a),(n=i.tick)===null||n===void 0||n.call(i),c}},e.prototype.calRepulsive=function(r,n){var i=this,a=i.getMass,o=i.factor,s=i.coulombDisScale,l=i.preventOverlap,u=i.collideStrength,c=u===void 0?1:u,f=i.nodeStrength,h=i.nodeSize;n.forEach(function(d,p){var v=a?a(d):1;n.forEach(function(g,m){if(!(p>=m)){var y=d.x-g.x,w=d.y-g.y;y===0&&w===0&&(y=Math.random()*.01,w=Math.random()*.01);var b=y*y+w*w,x=Math.sqrt(b),S=(x+.1)*s,E=y/x,_=w/x,k=(f(d)+f(g))*.5*o/(S*S),C=a?a(g):1;if(r[2*p]+=E*k,r[2*p+1]+=_*k,r[2*m]-=E*k,r[2*m+1]-=_*k,l&&(h(d)+h(g))/2>x){var M=c*(f(d)+f(g))*.5/b;r[2*p]+=E*M/v,r[2*p+1]+=_*M/v,r[2*m]-=E*M/C,r[2*m+1]-=_*M/C}}})})},e.prototype.calAttractive=function(r,n){var i=this,a=i.nodeMap,o=i.nodeIdxMap,s=i.linkDistance,l=i.edgeStrength,u=i.nodeSize,c=i.getMass;n.forEach(function(f,h){var d=(0,Ra.getEdgeTerminal)(f,"source"),p=(0,Ra.getEdgeTerminal)(f,"target"),v=a[d],g=a[p],m=g.x-v.x,y=g.y-v.y;m===0&&y===0&&(m=Math.random()*.01,y=Math.random()*.01);var w=Math.sqrt(m*m+y*y),b=m/w,x=y/w,S=s(f,v,g)||1+(u(v)+u(g)||0)/2,E=S-w,_=E*l(f),k=o[d],C=o[p],M=c?c(v):1,A=c?c(g):1;r[2*k]-=b*_/M,r[2*k+1]-=x*_/M,r[2*C]+=b*_/A,r[2*C+1]+=x*_/A})},e.prototype.calGravity=function(r,n){for(var i=this,a=i.center,o=i.gravity,s=i.degrees,l=n.length,u=0;u<l;u++){var c=n[u],f=c.x-a[0],h=c.y-a[1],d=o;if(i.getCenter){var p=i.getCenter(c,s[u].all);p&&(0,Ra.isNumber)(p[0])&&(0,Ra.isNumber)(p[1])&&(0,Ra.isNumber)(p[2])&&(f=c.x-p[0],h=c.y-p[1],d=p[2])}d&&(r[2*u]-=d*f,r[2*u+1]-=d*h)}},e.prototype.updateVelocity=function(r,n,i,a){var o=this,s=i*o.damping;a.forEach(function(l,u){var c=r[2*u]*s||.01,f=r[2*u+1]*s||.01,h=Math.sqrt(c*c+f*f);if(h>o.maxSpeed){var d=o.maxSpeed/h;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})},e.prototype.updatePosition=function(r,n,i){i.forEach(function(a,o){if((0,Ra.isNumber)(a.fx)&&(0,Ra.isNumber)(a.fy)){a.x=a.fx,a.y=a.fy;return}var s=r[2*o]*n,l=r[2*o+1]*n;a.x+=s,a.y+=l})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(SYe.Base);jb.GForceLayout=EYe;var Gb={},MA={};function _Ye(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return Hue(this.cover(e,r),e,r,t)}function Hue(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function CYe(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)Hue(this,o[r],s[r],t[r]);return this}function kYe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function MYe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function AYe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ro(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function TYe(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new ro(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new ro(d[3],g,m,l,u),new ro(d[2],o,m,g,u),new ro(d[1],g,s,l,m),new ro(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function OYe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function IYe(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function DYe(){return this._root}function PYe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function LYe(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new ro(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new ro(i,u,c,s,l)),(i=n[2])&&e.push(new ro(i,a,c,u,l)),(i=n[1])&&e.push(new ro(i,u,o,s,c)),(i=n[0])&&e.push(new ro(i,a,o,u,c))}return this}function RYe(t){var e=[],r=[],n;for(this._root&&e.push(new ro(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new ro(a,o,s,c,f)),(a=i[1])&&e.push(new ro(a,c,s,l,f)),(a=i[2])&&e.push(new ro(a,o,f,c,u)),(a=i[3])&&e.push(new ro(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function NYe(t){return t[0]}function FYe(t){return arguments.length?(this._x=t,this):this._x}function BYe(t){return t[1]}function $Ye(t){return arguments.length?(this._y=t,this):this._y}function Xue(t,e,r){var n=new aF(e??NYe,r??BYe,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function aF(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function bV(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var ho=Xue.prototype=aF.prototype;ho.copy=function(){var t=new aF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=bV(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=bV(n));return t};ho.add=_Ye;ho.addAll=CYe;ho.cover=kYe;ho.data=MYe;ho.extent=AYe;ho.find=TYe;ho.remove=OYe;ho.removeAll=IYe;ho.root=DYe;ho.size=PYe;ho.visit=LYe;ho.visitAfter=RYe;ho.x=FYe;ho.y=$Ye;const zYe=Object.freeze(Object.defineProperty({__proto__:null,quadtree:Xue},Symbol.toStringTag,{value:"Module"})),jYe=xc(zYe);Object.defineProperty(MA,"__esModule",{value:!0});MA.forceNBody=void 0;var GYe=jYe,UYe=.81,xV=.1;function WYe(t,e,r,n,i){var a=r/n,o=t.map(function(l,u){var c=e[l.id],f=c.data,h=c.x,d=c.y,p=c.size,v=f.layout.force.nodeStrength;return{x:h,y:d,size:p,index:u,vx:0,vy:0,weight:a*v}}),s=(0,GYe.quadtree)(o,function(l){return l.x},function(l){return l.y}).visitAfter(VYe);return o.forEach(function(l){XYe(l,s)}),o.map(function(l,u){var c=e[t[u].id],f=c.data.layout.force.mass,h=f===void 0?1:f;i[2*u]=l.vx/h,i[2*u+1]=l.vy/h}),i}MA.forceNBody=WYe;function VYe(t){var e=0,r=0,n=0;if(t.length){for(var i=0;i<4;i++){var a=t[i];a&&a.weight&&(e+=a.weight,r+=a.x*a.weight,n+=a.y*a.weight)}t.x=r/e,t.y=n/e,t.weight=e}else{var a=t;t.x=a.data.x,t.y=a.data.y,t.weight=a.data.weight}}var HYe=function(t,e,r,n,i,a){var o=a.x-t.x||xV,s=a.y-t.y||xV,l=n-e,u=o*o+s*s,c=Math.sqrt(u)*u;if(l*l*UYe<u){var f=t.weight/c;return a.vx+=o*f,a.vy+=s*f,!0}if(t.length)return!1;if(t.data!==a){var f=t.data.weight/c;a.vx+=o*f,a.vy+=s*f}};function XYe(t,e){e.visit(function(r,n,i,a,o){return HYe(r,n,i,a,o,t)})}var YYe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tl=Oe&&Oe.__assign||function(){return Tl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Tl.apply(this,arguments)};Object.defineProperty(Gb,"__esModule",{value:!0});Gb.Force2Layout=void 0;var qYe=di,Fi=ii(),KYe=MA,WI=function(t,e){var r;return t?(0,Fi.isNumber)(t)?r=function(n){return t}:r=t:r=function(n){return e||1},r},QYe=function(t){YYe(e,t);function e(r){var n=t.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(a){return{x:n.width/2,y:n.height/2}}};var i=r.getMass;return n.propsGetMass=i,n.updateCfg(r),n}return e.prototype.getCentripetalOptions=function(){var r=this,n=r.leafCluster,i=r.clustering,a=r.nodeClusterBy,o=r.nodes,s=r.nodeMap,l=r.clusterNodeStrength,u=function(w){return typeof l=="function"?l(w):l},c={},f;if(n){f=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(o==null?void 0:o.map(function(w){return w[a]})))||[];c={single:100,leaf:function(w,b,x){var S=f[w.id]||{},E=S.relativeLeafNodes,_=S.sameTypeLeafNodes;return(_==null?void 0:_.length)===(E==null?void 0:E.length)||(h==null?void 0:h.length)===1?1:u(w)},others:1,center:function(w,b,x){var S,E=(((S=w.data)===null||S===void 0?void 0:S.layout)||{}).degree;if(!E)return{x:100,y:100};var _;if(E===1){var k=(f[w.id]||{}).sameTypeLeafNodes,C=k===void 0?[]:k;C.length===1?_=void 0:C.length>1&&(_=(0,Fi.getAvgNodePosition)(C))}else _=void 0;return{x:_==null?void 0:_.x,y:_==null?void 0:_.y}}}}if(i){f||(f=this.getSameTypeLeafMap());var d=Array.from(new Set(o.map(function(w,b){return w[a]}))).filter(function(w){return w!==void 0}),p={};d.forEach(function(w){var b=o.filter(function(x){return x[a]===w}).map(function(x){return s[x.id]});p[w]=(0,Fi.getAvgNodePosition)(b)}),c={single:function(w){return u(w)},leaf:function(w){return u(w)},others:function(w){return u(w)},center:function(w,b,x){var S=p[w[a]];return{x:S==null?void 0:S.x,y:S==null?void 0:S.y}}}}this.centripetalOptions=Tl(Tl({},this.centripetalOptions),c);var v=this.centripetalOptions,g=v.leaf,m=v.single,y=v.others;g&&typeof g!="function"&&(this.centripetalOptions.leaf=function(){return g}),m&&typeof m!="function"&&(this.centripetalOptions.single=function(){return m}),y&&typeof y!="function"&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(r){r&&Object.assign(this,r)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var r=this;r.stop();var n=r.nodes,i=r.edges,a=r.defSpringLen;if(r.judgingDistance=0,!n||n.length===0){r.onLayoutEnd([]);return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],r.onLayoutEnd([Tl({},n[0])]);return}r.degreesMap=(0,Fi.getDegreeMap)(n,i),r.propsGetMass?r.getMass=r.propsGetMass:r.getMass=function(d){var p=1;(0,Fi.isNumber)(d.mass)&&(p=d.mass);var v=r.degreesMap[d.id].all;return!v||v<5?p:v*5*p};var s=r.nodeSize,l;if(r.preventOverlap){var u=r.nodeSpacing,c;(0,Fi.isNumber)(u)?c=function(){return u}:(0,Fi.isFunction)(u)?c=u:c=function(){return 0},s?(0,Fi.isArray)(s)?l=function(d){return Math.max(s[0],s[1])+c(d)}:l=function(d){return s+c(d)}:l=function(d){return d.size?(0,Fi.isArray)(d.size)?Math.max(d.size[0],d.size[1])+c(d):(0,Fi.isObject)(d.size)?Math.max(d.size.width,d.size.height)+c(d):d.size+c(d):10+c(d)}}r.nodeSize=l,r.linkDistance=WI(r.linkDistance,1),r.nodeStrength=WI(r.nodeStrength,1),r.edgeStrength=WI(r.edgeStrength,1);var f={},h={};n.forEach(function(d,p){(0,Fi.isNumber)(d.x)||(d.x=Math.random()*r.width),(0,Fi.isNumber)(d.y)||(d.y=Math.random()*r.height);var v=r.degreesMap[d.id];f[d.id]=Tl(Tl({},d),{data:Tl(Tl({},d.data),{size:r.nodeSize(d)||30,layout:{inDegree:v.in,outDegree:v.out,degree:v.all,tDegree:v.in,sDegree:v.out,force:{mass:r.getMass(d),nodeStrength:r.nodeStrength(d,i)}}})}),h[d.id]=p}),r.nodeMap=f,r.nodeIdxMap=h,r.edgeInfos=[],i==null||i.forEach(function(d){var p=f[d.source],v=f[d.target];!p||!v?elf.edgeInfos.push({}):r.edgeInfos.push({edgeStrength:r.edgeStrength(d),linkDistance:a?a(Tl(Tl({},d),{source:p,target:v}),p,v):r.linkDistance(d,p,v)||1+(s(p)+s(p)||0)/2})}),this.getCentripetalOptions(),r.onLayoutEnd=r.onLayoutEnd||function(){},r.run()},e.prototype.run=function(){var r=this,n=r.maxIteration,i=r.nodes,a=r.edges,o=r.workerEnabled,s=r.minMovement,l=r.animate,u=r.nodeMap,c=r.height;if(r.currentMinY=0,r.currentMaxY=c,!!i){var f=[];if(i.forEach(function(m,y){f[2*y]=0,f[2*y+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var h={};a.forEach(function(m){var y=m.source,w=m.target;h[y]=h[y]||[],h[y].push(m),h[w]=h[w]||[],h[w].push(m)}),this.relatedEdges=h}var d=n,p=!l;if(o||p){for(var v=0;(r.judgingDistance>s||v<1)&&v<d;v++)r.runOneStep(v,f);r.onLayoutEnd(Object.values(u))}else{if(typeof window>"u")return;var g=0;this.timeInterval=window.setInterval(function(){i&&(r.runOneStep(g,f),g++,(g>=d||r.judgingDistance<s)&&(r.onLayoutEnd(Object.values(u)),window.clearInterval(r.timeInterval)))},0)}}},e.prototype.runOneStep=function(r,n){var i,a=this,o=a.nodes,s=a.edges;a.nodeMap;var l=a.monitor,u=[];if(o!=null&&o.length){a.calRepulsive(u),s&&a.calAttractive(u),a.calGravity(u),a.attractToSide(u);var c=a.interval;if(a.updateVelocity(u,n,c),a.updatePosition(n,c),(i=a.tick)===null||i===void 0||i.call(a),l){var f=this.calTotalEnergy(u);l({energy:f,nodes:o,edges:s,iterations:r})}}},e.prototype.calTotalEnergy=function(r){var n=this,i=n.nodes,a=n.nodeMap;if(!(i!=null&&i.length))return 0;var o=0;return i.forEach(function(s,l){var u=r[2*l],c=r[2*l+1],f=u*u+c*c,h=a[s.id].data.layout.force.mass,d=h===void 0?1:h;o+=d*f*.5}),o},e.prototype.calRepulsive=function(r){var n=this,i=n.nodes,a=n.nodeMap,o=n.factor,s=n.coulombDisScale;n.nodeSize,(0,KYe.forceNBody)(i,a,o,s*s,r)},e.prototype.calAttractive=function(r){var n=this,i=n.edges,a=n.nodeMap,o=n.nodeIdxMap,s=n.edgeInfos;n.nodeSize,i.forEach(function(l,u){var c=(0,Fi.getEdgeTerminal)(l,"source"),f=(0,Fi.getEdgeTerminal)(l,"target"),h=a[c],d=a[f];if(!(!h||!d)){var p=d.x-h.x,v=d.y-h.y;!p&&!v&&(p=Math.random()*.01,v=Math.random()*.01);var g=Math.sqrt(p*p+v*v),m=p/g,y=v/g,w=s[u]||{},b=w.linkDistance,x=b===void 0?200:b,S=w.edgeStrength,E=S===void 0?200:S,_=x-g,k=_*E,C=h.data.layout.force.mass||1,M=d.data.layout.force.mass||1,A=1/C,T=1/M,D=m*k,F=y*k,R=2*o[c],B=2*o[f];r[R]-=D*A,r[R+1]-=F*A,r[B]+=D*T,r[B+1]+=F*T}})},e.prototype.calGravity=function(r){var n,i=this,a=i.nodes,o=i.edges,s=o===void 0?[]:o,l=i.nodeMap,u=i.width,c=i.height,f=i.center,h=i.gravity,d=i.degreesMap,p=i.centripetalOptions;if(a)for(var v=a.length,g=0;g<v;g++){var m=2*g,y=l[a[g].id],w=y.data.layout.force.mass,b=w===void 0?1:w,x=0,S=0,E=h,_=d[y.id],k=_.in,C=_.out,M=_.all,A=(n=i.getCenter)===null||n===void 0?void 0:n.call(i,y,M);if(A){var T=A[0],D=A[1],F=A[2];x=y.x-T,S=y.y-D,E=F}else x=y.x-f[0],S=y.y-f[1];if(E&&(r[m]-=E*x/b,r[m+1]-=E*S/b),p){var R=p.leaf,B=p.single,N=p.others,O=p.center,L=(O==null?void 0:O(y,a,s,u,c))||{x:0,y:0,centerStrength:0},G=L.x,q=L.y,K=L.centerStrength;if(!(0,Fi.isNumber)(G)||!(0,Fi.isNumber)(q))continue;var V=(y.x-G)/b,le=(y.y-q)/b;if(K&&(r[m]-=K*V,r[m+1]-=K*le),M===0){var ge=B(y);if(!ge)continue;r[m]-=ge*V,r[m+1]-=ge*le;continue}if(k===0||C===0){var xe=R(y,a,s);if(!xe)continue;r[m]-=xe*V,r[m+1]-=xe*le;continue}var Ie=N(y);if(!Ie)continue;r[m]-=Ie*V,r[m+1]-=Ie*le}}},e.prototype.attractToSide=function(r){var n=this,i=n.defSideCoe;n.height;var a=n.nodes,o=n.relatedEdges,s=n.currentMinY,l=s===void 0?0:s,u=n.currentMaxY,c=u===void 0?this.height:u;!i||typeof i!="function"||!(a!=null&&a.length)||a.forEach(function(f,h){var d=i(f,o[f.id]||[]);if(d!==0){var p=d<0?l:c,v=Math.abs(d);r[2*h+1]-=v*(f.y-p)}})},e.prototype.updateVelocity=function(r,n,i){var a=this,o=a.nodes,s=a.damping,l=a.maxSpeed;o!=null&&o.length&&o.forEach(function(u,c){var f=(n[2*c]+r[2*c]*i)*s||.01,h=(n[2*c+1]+r[2*c+1]*i)*s||.01,d=Math.sqrt(f*f+h*h);if(d>l){var p=l/d;f=p*f,h=p*h}n[2*c]=f,n[2*c+1]=h})},e.prototype.updatePosition=function(r,n){var i=this,a=i.nodes,o=i.distanceThresholdMode,s=i.nodeMap;if(!(a!=null&&a.length)){this.judgingDistance=0;return}var l=0;o==="max"?i.judgingDistance=-1/0:o==="min"&&(i.judgingDistance=1/0);var u=1/0,c=-1/0;a.forEach(function(f,h){var d=s[f.id];if((0,Fi.isNumber)(f.fx)&&(0,Fi.isNumber)(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}var p=r[2*h]*n,v=r[2*h+1]*n;f.x+=p,f.y+=v,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);var g=Math.sqrt(p*p+v*v);switch(o){case"max":i.judgingDistance<g&&(i.judgingDistance=g);break;case"min":i.judgingDistance>g&&(i.judgingDistance=g);break;default:l=l+g;break}}),this.currentMinY=u,this.currentMaxY=c,(!o||o==="mean")&&(i.judgingDistance=l/a.length)},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var r=this,n=r.nodeClusterBy,i=r.nodes,a=r.edges,o=r.nodeMap,s=r.degreesMap;if(i!=null&&i.length){var l={};return i.forEach(function(u,c){var f=s[u.id].all;f===1&&(l[u.id]=(0,Fi.getCoreNodeAndRelativeLeafNodes)("leaf",u,a,n,s,o))}),l}},e}(qYe.Base);Gb.Force2Layout=QYe;var oF={},AA={};function ZYe(t,e){var r,n=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=r.length,s,l=0,u=0;for(a=0;a<o;++a)s=r[a],l+=s.x,u+=s.y;for(l=(l/o-t)*n,u=(u/o-e)*n,a=0;a<o;++a)s=r[a],s.x-=l,s.y-=u}return i.initialize=function(a){r=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function JYe(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return Yue(this.cover(e,r),e,r,t)}function Yue(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function eqe(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)Yue(this,o[r],s[r],t[r]);return this}function tqe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function rqe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function nqe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function no(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function iqe(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new no(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new no(d[3],g,m,l,u),new no(d[2],o,m,g,u),new no(d[1],g,s,l,m),new no(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function aqe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function oqe(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function sqe(){return this._root}function lqe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function uqe(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new no(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new no(i,u,c,s,l)),(i=n[2])&&e.push(new no(i,a,c,u,l)),(i=n[1])&&e.push(new no(i,u,o,s,c)),(i=n[0])&&e.push(new no(i,a,o,u,c))}return this}function cqe(t){var e=[],r=[],n;for(this._root&&e.push(new no(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new no(a,o,s,c,f)),(a=i[1])&&e.push(new no(a,c,s,l,f)),(a=i[2])&&e.push(new no(a,o,f,c,u)),(a=i[3])&&e.push(new no(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function fqe(t){return t[0]}function hqe(t){return arguments.length?(this._x=t,this):this._x}function dqe(t){return t[1]}function pqe(t){return arguments.length?(this._y=t,this):this._y}function sF(t,e,r){var n=new lF(e??fqe,r??dqe,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function lF(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function SV(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var po=sF.prototype=lF.prototype;po.copy=function(){var t=new lF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=SV(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=SV(n));return t};po.add=JYe;po.addAll=eqe;po.cover=tqe;po.data=rqe;po.extent=nqe;po.find=iqe;po.remove=aqe;po.removeAll=oqe;po.root=sqe;po.size=lqe;po.visit=uqe;po.visitAfter=cqe;po.x=hqe;po.y=pqe;function Hi(t){return function(){return t}}function ed(t){return(t()-.5)*1e-6}function vqe(t){return t.x+t.vx}function gqe(t){return t.y+t.vy}function mqe(t){var e,r,n,i=1,a=1;typeof t!="function"&&(t=Hi(t==null?1:+t));function o(){for(var u,c=e.length,f,h,d,p,v,g,m=0;m<a;++m)for(f=sF(e,vqe,gqe).visitAfter(s),u=0;u<c;++u)h=e[u],v=r[h.index],g=v*v,d=h.x+h.vx,p=h.y+h.vy,f.visit(y);function y(w,b,x,S,E){var _=w.data,k=w.r,C=v+k;if(_){if(_.index>h.index){var M=d-_.x-_.vx,A=p-_.y-_.vy,T=M*M+A*A;T<C*C&&(M===0&&(M=ed(n),T+=M*M),A===0&&(A=ed(n),T+=A*A),T=(C-(T=Math.sqrt(T)))/T*i,h.vx+=(M*=T)*(C=(k*=k)/(g+k)),h.vy+=(A*=T)*C,_.vx-=M*(C=1-C),_.vy-=A*C)}return}return b>d+C||S<d-C||x>p+C||E<p-C}}function s(u){if(u.data)return u.r=r[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,f;for(r=new Array(c),u=0;u<c;++u)f=e[u],r[f.index]=+t(f,u,e)}}return o.initialize=function(u,c){e=u,n=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Hi(+u),l(),o):t},o}function yqe(t){return t.index}function EV(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function wqe(t){var e=yqe,r=f,n,i=Hi(30),a,o,s,l,u,c=1;t==null&&(t=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function h(g){for(var m=0,y=t.length;m<c;++m)for(var w=0,b,x,S,E,_,k,C;w<y;++w)b=t[w],x=b.source,S=b.target,E=S.x+S.vx-x.x-x.vx||ed(u),_=S.y+S.vy-x.y-x.vy||ed(u),k=Math.sqrt(E*E+_*_),k=(k-a[w])/k*g*n[w],E*=k,_*=k,S.vx-=E*(C=l[w]),S.vy-=_*C,x.vx+=E*(C=1-C),x.vy+=_*C}function d(){if(o){var g,m=o.length,y=t.length,w=new Map(o.map((x,S)=>[e(x,S,o),x])),b;for(g=0,s=new Array(m);g<y;++g)b=t[g],b.index=g,typeof b.source!="object"&&(b.source=EV(w,b.source)),typeof b.target!="object"&&(b.target=EV(w,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)b=t[g],l[g]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);n=new Array(y),p(),a=new Array(y),v()}}function p(){if(o)for(var g=0,m=t.length;g<m;++g)n[g]=+r(t[g],g,t)}function v(){if(o)for(var g=0,m=t.length;g<m;++g)a[g]=+i(t[g],g,t)}return h.initialize=function(g,m){o=g,u=m,d()},h.links=function(g){return arguments.length?(t=g,d(),h):t},h.id=function(g){return arguments.length?(e=g,h):e},h.iterations=function(g){return arguments.length?(c=+g,h):c},h.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Hi(+g),p(),h):r},h.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Hi(+g),v(),h):i},h}var bqe={value:()=>{}};function que(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Q_(r)}function Q_(t){this._=t}function xqe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Q_.prototype=que.prototype={constructor:Q_,on:function(t,e){var r=this._,n=xqe(t+"",r),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(t=n[a]).type)&&(i=Sqe(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=n[a]).type)r[i]=_V(r[i],t.name,e);else if(e==null)for(i in r)r[i]=_V(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Q_(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,i=a.length;n<i;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};function Sqe(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function _V(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=bqe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}const Eqe=1664525,_qe=1013904223,CV=4294967296;function Cqe(){let t=1;return()=>(t=(Eqe*t+_qe)%CV)/CV}function kqe(t){return t.x}function Mqe(t){return t.y}var Aqe=10,Tqe=Math.PI*(3-Math.sqrt(5));function Oqe(t){var e,r=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=N8(f),u=que("tick","end"),c=Cqe();t==null&&(t=[]);function f(){h(),u.call("tick",e),r<n&&(l.stop(),u.call("end",e))}function h(v){var g,m=t.length,y;v===void 0&&(v=1);for(var w=0;w<v;++w)for(r+=(a-r)*i,s.forEach(function(b){b(r)}),g=0;g<m;++g)y=t[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function d(){for(var v=0,g=t.length,m;v<g;++v){if(m=t[v],m.index=v,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=Aqe*Math.sqrt(.5+v),w=v*Tqe;m.x=y*Math.cos(w),m.y=y*Math.sin(w)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(v){return v.initialize&&v.initialize(t,c),v}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(v){return arguments.length?(t=v,d(),s.forEach(p),e):t},alpha:function(v){return arguments.length?(r=+v,e):r},alphaMin:function(v){return arguments.length?(n=+v,e):n},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(a=+v,e):a},velocityDecay:function(v){return arguments.length?(o=1-v,e):1-o},randomSource:function(v){return arguments.length?(c=v,s.forEach(p),e):c},force:function(v,g){return arguments.length>1?(g==null?s.delete(v):s.set(v,p(g)),e):s.get(v)},find:function(v,g,m){var y=0,w=t.length,b,x,S,E,_;for(m==null?m=1/0:m*=m,y=0;y<w;++y)E=t[y],b=v-E.x,x=g-E.y,S=b*b+x*x,S<m&&(_=E,m=S);return _},on:function(v,g){return arguments.length>1?(u.on(v,g),e):u.on(v)}}}function Iqe(){var t,e,r,n,i=Hi(-30),a,o=1,s=1/0,l=.81;function u(d){var p,v=t.length,g=sF(t,kqe,Mqe).visitAfter(f);for(n=d,p=0;p<v;++p)e=t[p],g.visit(h)}function c(){if(t){var d,p=t.length,v;for(a=new Array(p),d=0;d<p;++d)v=t[d],a[v.index]=+i(v,d,t)}}function f(d){var p=0,v,g,m=0,y,w,b;if(d.length){for(y=w=b=0;b<4;++b)(v=d[b])&&(g=Math.abs(v.value))&&(p+=v.value,m+=g,y+=g*v.x,w+=g*v.y);d.x=y/m,d.y=w/m}else{v=d,v.x=v.data.x,v.y=v.data.y;do p+=a[v.data.index];while(v=v.next)}d.value=p}function h(d,p,v,g){if(!d.value)return!0;var m=d.x-e.x,y=d.y-e.y,w=g-p,b=m*m+y*y;if(w*w/l<b)return b<s&&(m===0&&(m=ed(r),b+=m*m),y===0&&(y=ed(r),b+=y*y),b<o&&(b=Math.sqrt(o*b)),e.vx+=m*d.value*n/b,e.vy+=y*d.value*n/b),!0;if(d.length||b>=s)return;(d.data!==e||d.next)&&(m===0&&(m=ed(r),b+=m*m),y===0&&(y=ed(r),b+=y*y),b<o&&(b=Math.sqrt(o*b)));do d.data!==e&&(w=a[d.data.index]*n/b,e.vx+=m*w,e.vy+=y*w);while(d=d.next)}return u.initialize=function(d,p){t=d,r=p,c()},u.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Hi(+d),c(),u):i},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function Dqe(t,e,r){var n,i=Hi(.1),a,o;typeof t!="function"&&(t=Hi(+t)),e==null&&(e=0),r==null&&(r=0);function s(u){for(var c=0,f=n.length;c<f;++c){var h=n[c],d=h.x-e||1e-6,p=h.y-r||1e-6,v=Math.sqrt(d*d+p*p),g=(o[c]-v)*a[c]*u/v;h.vx+=d*g,h.vy+=p*g}}function l(){if(n){var u,c=n.length;for(a=new Array(c),o=new Array(c),u=0;u<c;++u)o[u]=+t(n[u],u,n),a[u]=isNaN(o[u])?0:+i(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:Hi(+u),l(),s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Hi(+u),l(),s):t},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(r=+u,s):r},s}function Pqe(t){var e=Hi(.1),r,n,i;typeof t!="function"&&(t=Hi(t==null?0:+t));function a(s){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vx+=(i[l]-c.x)*n[l]*s}function o(){if(r){var s,l=r.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+t(r[s],s,r))?0:+e(r[s],s,r)}}return a.initialize=function(s){r=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Hi(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:Hi(+s),o(),a):t},a}function Lqe(t){var e=Hi(.1),r,n,i;typeof t!="function"&&(t=Hi(t==null?0:+t));function a(s){for(var l=0,u=r.length,c;l<u;++l)c=r[l],c.vy+=(i[l]-c.y)*n[l]*s}function o(){if(r){var s,l=r.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+t(r[s],s,r))?0:+e(r[s],s,r)}}return a.initialize=function(s){r=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Hi(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:Hi(+s),o(),a):t},a}const Rqe=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:ZYe,forceCollide:mqe,forceLink:wqe,forceManyBody:Iqe,forceRadial:Dqe,forceSimulation:Oqe,forceX:Pqe,forceY:Lqe},Symbol.toStringTag,{value:"Module"})),uF=xc(Rqe);var cF={},Nqe=Oe&&Oe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fqe=Oe&&Oe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bqe=Oe&&Oe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nqe(e,t,r);return Fqe(e,t),e};Object.defineProperty(cF,"__esModule",{value:!0});var Bg=Bqe(uF),IE=ii();function $qe(){function t(V){return function(){return V}}var e=function(V){return V.cluster},r=t(1),n=t(-1),i=t(100),a=t(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,h={none:{x:0,y:0}},d=[],p,v="force",g=!0,m=.1;function y(V){if(!g)return y;p.tick(),_();for(var le=0,ge=s.length,xe=void 0,Ie=V*m;le<ge;++le)xe=s[le],xe.vx+=(h[e(xe)].x-xe.x)*Ie,xe.vy+=(h[e(xe)].y-xe.y)*Ie}function w(){s&&b()}function b(){if(!(!s||!s.length)){if(e(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var V=x();p=Bg.forceSimulation(V.nodes).force("x",Bg.forceX(c).strength(.1)).force("y",Bg.forceY(f).strength(.1)).force("collide",Bg.forceCollide(function(le){return le.r}).iterations(4)).force("charge",Bg.forceManyBody().strength(n)).force("links",Bg.forceLink(V.nodes.length?V.links:[]).distance(i).strength(a)),d=p.nodes(),_()}}function x(){var V=[],le=[],ge={},xe=[],Ie={},He=[];return Ie=S(s),He=E(u),xe=Object.keys(Ie),xe.forEach(function(Ge,ht){var dt=Ie[Ge];V.push({id:Ge,size:dt.count,r:Math.sqrt(dt.sumforceNodeSize/Math.PI)}),ge[Ge]=ht}),He.forEach(function(Ge){var ht=(0,IE.getEdgeTerminal)(Ge,"source"),dt=(0,IE.getEdgeTerminal)(Ge,"target"),It=ge[ht],_t=ge[dt];It!==void 0&&_t!==void 0&&le.push({source:It,target:_t,count:Ge.count})}),{nodes:V,links:le}}function S(V){var le={};return V.forEach(function(ge){var xe=e(ge);le[xe]||(le[xe]={count:0,sumforceNodeSize:0})}),V.forEach(function(ge){var xe=e(ge),Ie=r(ge),He=le[xe];He.count=He.count+1,He.sumforceNodeSize=He.sumforceNodeSize+Math.PI*(Ie*Ie)*1.3,le[xe]=He}),le}function E(V){var le={},ge=[];V.forEach(function(Ie){var He=k(Ie),Ge=0;le[He]!==void 0&&(Ge=le[He]),Ge+=1,le[He]=Ge});var xe=Object.entries(le);return xe.forEach(function(Ie){var He=Ie[0],Ge=Ie[1],ht=He.split("~")[0],dt=He.split("~")[1];ht!==void 0&&dt!==void 0&&ge.push({source:ht,target:dt,count:Ge})}),ge}function _(){return h={none:{x:0,y:0}},d.forEach(function(V){h[V.id]={x:V.x-o[0],y:V.y-o[1]}}),h}function k(V){var le=(0,IE.getEdgeTerminal)(V,"source"),ge=(0,IE.getEdgeTerminal)(V,"target"),xe=e(l[le]),Ie=e(l[ge]);return xe<=Ie?"".concat(xe,"~").concat(Ie):"".concat(Ie,"~").concat(xe)}function C(V){l={},V.forEach(function(le){l[le.id]=le})}function M(V){return arguments.length?(v=V,w(),y):v}function A(V){return arguments.length?typeof V=="string"?(e=function(le){return le[V]},y):(e=V,y):e}function T(V){return arguments.length?(g=V,y):g}function D(V){return arguments.length?(m=V,y):m}function F(V){return arguments.length?(c=V,y):c}function R(V){return arguments.length?(f=V,y):f}function B(V){return arguments.length?(C(V||[]),s=V||[],y):s}function N(V){return arguments.length?(u=V||[],w(),y):u}function O(V){return arguments.length?(typeof V=="function"?r=V:r=t(+V),w(),y):r}function L(V){return arguments.length?(typeof V=="function"?n=V:n=t(+V),w(),y):n}function G(V){return arguments.length?(typeof V=="function"?i=V:i=t(+V),w(),y):i}function q(V){return arguments.length?(typeof V=="function"?a=V:a=t(+V),w(),y):a}function K(V){return arguments.length?(o=V,y):o}return y.initialize=function(V){s=V,w()},y.template=M,y.groupBy=A,y.enableGrouping=T,y.strength=D,y.centerX=F,y.centerY=R,y.nodes=B,y.links=N,y.forceNodeSize=O,y.nodeSize=y.forceNodeSize,y.forceCharge=L,y.forceLinkDistance=G,y.forceLinkStrength=q,y.offset=K,y.getFocis=_,y}cF.default=$qe;var If={};Object.defineProperty(If,"__esModule",{value:!0});If.FORCE_LAYOUT_TYPE_MAP=If.LAYOUT_MESSAGE=void 0;If.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};If.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var zqe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jqe=Oe&&Oe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gqe=Oe&&Oe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uqe=Oe&&Oe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jqe(e,t,r);return Gqe(e,t),e},Wqe=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(AA,"__esModule",{value:!0});AA.ForceLayout=void 0;var $g=Uqe(uF),Vqe=Wqe(cF),vp=ii(),Hqe=di,Xqe=If,Yqe=function(t){zqe(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,r&&n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(r){var n=this;n.nodes=r.nodes||[];var i=r.edges||[];n.edges=i.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),n.ticking=!1},e.prototype.execute=function(r){var n=this,i=n.nodes,a=n.edges;if(!n.ticking){var o=n.forceSimulation,s=n.alphaMin,l=n.alphaDecay,u=n.alpha;if(o){if(r){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(i),n.clusterForce.links(a)),o.nodes(i),a&&n.edgeForce)n.edgeForce.links(a);else if(a&&!n.edgeForce){var h=$g.forceLink().id(function(g){return g.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}}n.preventOverlap&&n.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=$g.forceManyBody();if(n.nodeStrength&&c.strength(n.nodeStrength),o=$g.forceSimulation().nodes(i),n.clustering){var f=(0,Vqe.default)();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),a&&f.links(a),i&&f.nodes(i),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,o.force("group",f)}if(o.force("center",$g.forceCenter(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(l).alphaMin(s),n.preventOverlap&&n.overlapProcess(o),a){var h=$g.forceLink().id(function(v){return v.id}).links(a);n.edgeStrength&&h.strength(n.edgeStrength),n.linkDistance&&h.distance(n.linkDistance),n.edgeForce=h,o.force("link",h)}if(n.workerEnabled&&!Kqe()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)o.on("tick",function(){n.tick()}).on("end",function(){n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{o.stop();for(var d=qqe(o),p=1;p<=d;p++)o.tick(),postMessage({nodes:i,currentTick:p,totalTicks:d,type:Xqe.LAYOUT_MESSAGE.TICK},void 0);n.ticking=!1}n.forceSimulation=o,n.ticking=!0}catch(v){n.ticking=!1,console.warn(v)}}},e.prototype.overlapProcess=function(r){var n=this,i=n.nodeSize,a=n.nodeSpacing,o,s,l=n.collideStrength;if((0,vp.isNumber)(a)?s=function(){return a}:(0,vp.isFunction)(a)?s=a:s=function(){return 0},!i)o=function(h){if(h.size){if((0,vp.isArray)(h.size)){var d=h.size[0]>h.size[1]?h.size[0]:h.size[1];return d/2+s(h)}if((0,vp.isObject)(h.size)){var d=h.size.width>h.size.height?h.size.width:h.size.height;return d/2+s(h)}return h.size/2+s(h)}return 10+s(h)};else if((0,vp.isFunction)(i))o=function(h){var d=i(h);return d+s(h)};else if((0,vp.isArray)(i)){var u=i[0]>i[1]?i[0]:i[1],c=u/2;o=function(h){return c+s(h)}}else if((0,vp.isNumber)(i)){var f=i/2;o=function(h){return f+s(h)}}else o=function(){return 10};r.force("collisionForce",$g.forceCollide(o).strength(l))},e.prototype.updateCfg=function(r){var n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,r)},e.prototype.destroy=function(){var r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0},e}(Hqe.Base);AA.ForceLayout=Yqe;function qqe(t){var e=t.alphaMin(),r=t.alphaTarget(),n=t.alpha(),i=Math.log((e-r)/(n-r))/Math.log(1-t.alphaDecay()),a=Math.ceil(i);return a}function Kqe(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Oe&&Oe.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(AA,t)})(oF);var Ub={},Qqe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ub,"__esModule",{value:!0});Ub.CircularLayout=void 0;var Zqe=di,ic=ii();function Jqe(t,e,r,n){t.forEach(function(i,a){t[a].children=[],t[a].parent=[]}),n?e.forEach(function(i){var a=(0,ic.getEdgeTerminal)(i,"source"),o=(0,ic.getEdgeTerminal)(i,"target"),s=0;a&&(s=r[a]);var l=0;o&&(l=r[o]);var u=t[s].children,c=t[l].parent;u.push(t[l].id),c.push(t[s].id)}):e.forEach(function(i){var a=(0,ic.getEdgeTerminal)(i,"source"),o=(0,ic.getEdgeTerminal)(i,"target"),s=0;a&&(s=r[a]);var l=0;o&&(l=r[o]);var u=t[s].children,c=t[l].children;u.push(t[l].id),c.push(t[s].id)})}function eKe(t,e,r){for(var n=r.length,i=0;i<n;i++){var a=(0,ic.getEdgeTerminal)(r[i],"source"),o=(0,ic.getEdgeTerminal)(r[i],"target");if(t.id===a&&e.id===o||e.id===a&&t.id===o)return!0}return!1}function tKe(t,e){var r=t.degree,n=e.degree;return r<n?-1:r>n?1:0}var rKe=function(t){Qqe(e,t);function e(r){var n=t.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var r,n=this,i=n.nodes,a=n.edges,o=i.length;if(o===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window<"u"&&(n.width=window.innerWidth),!n.height&&typeof window<"u"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var s=n.center;if(o===1){i[0].x=s[0],i[0].y=s[1],n.onLayoutEnd&&n.onLayoutEnd();return}var l=n.radius,u=n.startRadius,c=n.endRadius,f=n.divisions,h=n.startAngle,d=n.endAngle,p=n.angleRatio,v=n.ordering,g=n.clockwise,m=n.nodeSpacing,y=n.nodeSize,w=(d-h)/o,b={};i.forEach(function(R,B){b[R.id]=B}),n.nodeMap=b;var x=(0,ic.getDegree)(i.length,b,a);if(n.degrees=x,m){var S=(0,ic.getFuncByUnknownType)(10,m),E=(0,ic.getFuncByUnknownType)(10,y),_=-1/0;i.forEach(function(R){var B=E(R);_<B&&(_=B)});var k=0;i.forEach(function(R,B){B===0?k+=_||10:k+=(S(R)||0)+(_||10)}),l=k/(2*Math.PI)}else!l&&!u&&!c?l=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);var C=w*p,M=[];v==="topology"?M=n.topologyOrdering():v==="topology-directed"?M=n.topologyOrdering(!0):v==="degree"?M=n.degreeOrdering():M=i;for(var A=Math.ceil(o/f),T=0;T<o;++T){var D=l;!D&&u!==null&&c!==null&&(D=u+T*(c-u)/(o-1)),D||(D=10+T*100/(o-1));var F=h+T%A*C+2*Math.PI/f*Math.floor(T/A);g||(F=d-T%A*C-2*Math.PI/f*Math.floor(T/A)),M[T].x=s[0]+Math.cos(F)*D,M[T].y=s[1]+Math.sin(F)*D,M[T].weight=x[T].all}return(r=n.onLayoutEnd)===null||r===void 0||r.call(n),{nodes:M,edges:this.edges}},e.prototype.topologyOrdering=function(r){r===void 0&&(r=!1);var n=this,i=n.degrees,a=n.edges,o=n.nodes,s=(0,ic.clone)(o),l=n.nodeMap,u=[s[0]],c=[o[0]],f=[],h=o.length;f[0]=!0,Jqe(s,a,l,r);var d=0;return s.forEach(function(p,v){if(v!==0)if((v===h-1||i[v].all!==i[v+1].all||eKe(u[d],p,a))&&!f[v])u.push(p),c.push(o[l[p.id]]),f[v]=!0,d++;else{for(var g=u[d].children,m=!1,y=0;y<g.length;y++){var w=l[g[y]];if(i[w].all===i[v].all&&!f[w]){u.push(s[w]),c.push(o[l[s[w].id]]),f[w]=!0,m=!0;break}}for(var b=0;!m&&(f[b]||(u.push(s[b]),c.push(o[l[s[b].id]]),f[b]=!0,m=!0),b++,b!==h););}}),c},e.prototype.degreeOrdering=function(){var r=this,n=r.nodes,i=[],a=r.degrees;return n.forEach(function(o,s){o.degree=a[s].all,i.push(o)}),i.sort(tKe),i},e.prototype.getType=function(){return"circular"},e}(Zqe.Base);Ub.CircularLayout=rKe;var dy={},fF={},hF={},dF={},pF={},vF={};Object.defineProperty(vF,"__esModule",{value:!0});var nKe=function(t,e){if(t!=="next"&&t!=="prev")return e},kV=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},iKe=function(){function t(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return t.prototype.dequeue=function(){var e=this.shortcut,r=e.prev;if(r&&r!==e)return kV(r),r},t.prototype.enqueue=function(e){var r=this.shortcut;e.prev&&e.next&&kV(e),e.next=r.next,r.next.prev=e,r.next=e,e.prev=r},t.prototype.toString=function(){for(var e=[],r=this.shortcut,n=r.prev;n!==r;)e.push(JSON.stringify(n,nKe)),n=n==null?void 0:n.prev;return"[".concat(e.join(", "),"]")},t}();vF.default=iKe;var U0;(function(t){t.DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""})(U0||(U0={}));function MV(t,e){var r=t.get(e)||0;t.set(e,r+1)}function AV(t,e){var r=t.get(e);r!==void 0&&(r=r-1,r>0?t.set(e,r):t.delete(e))}function Kue(t,e,r,n){var i=String(e),a=String(r);if(!t&&i>a){var o=i;i=a,a=o}return i+U0.EDGE_KEY_DELIM+a+U0.EDGE_KEY_DELIM+(n===void 0?U0.DEFAULT_EDGE_NAME:n)}function TV(t,e,r,n){var i=String(e),a=String(r),o={v:e,w:r};if(!t&&i>a){var s=o.v;o.v=o.w,o.w=s}return n!==void 0&&(o.name=n),o}function VI(t,e){return Kue(t,e.v,e.w,e.name)}function OV(t){return typeof t=="function"}var aKe=function(e){return e.nodes().map(function(r){var n=e.node(r),i=e.parent(r),a={id:r,value:n,parent:i};return a.value===void 0&&delete a.value,a.parent===void 0&&delete a.parent,a})},oKe=function(e){return e.edges().map(function(r){var n=e.edge(r),i={v:r.v,w:r.w,value:n,name:r.name};return i.name===void 0&&delete i.name,i.value===void 0&&delete i.value,i})},sKe=function(e){var r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:aKe(e),edges:oKe(e),value:e.graph()};return r.value===void 0&&delete r.value,r},lKe=function(e){var r=new Wv(e.options);return e.value!==void 0&&r.setGraph(e.value),e.nodes.forEach(function(n){r.setNode(n.id,n.value),n.parent&&r.setParent(n.id,n.parent)}),e.edges.forEach(function(n){r.setEdge(n.v,n.w,n.value,n.name)}),r};function IV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(r),!0).forEach(function(n){uKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uKe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fKe(t,e,r){return e&&PV(t.prototype,e),r&&PV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var hKe={compound:!1,multigraph:!1,directed:!0},Wv=function(){function t(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cKe(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=U0.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(i){return e.label=i,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(i){return OV(i)?e.defaultNodeLabelFn=i:e.defaultNodeLabelFn=function(){return i},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(i){return e.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.inEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.sinks=function(){return e.nodes().filter(function(i){var a;return!(!((a=e.outEdgesMap.get(i))===null||a===void 0)&&a.size)})},this.setNodes=function(i,a){return i.map(function(o){return e.setNode(o,a)}),e},this.hasNode=function(i){return e.nodesLabelMap.has(i)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(e.isCompound()){var a,o=(a=e.parentMap)===null||a===void 0?void 0:a.get(i);if(o!==e.GRAPH_NODE)return o}},this.removeFromParentsChildList=function(i){var a=e.parentMap.get(i);e.childrenMap.get(a).delete(i)},this.setParent=function(i,a){var o,s;e.checkCompound();for(var l=a===void 0?e.GRAPH_NODE:a,u=e.parent(l);u;){if(i===u)throw new Error("Setting "+a+" as parent of "+i+" would create a cycle");u=e.parent(u)}a&&e.setNode(a),e.setNode(i),e.removeFromParentsChildList(i),(o=e.parentMap)===null||o===void 0||o.set(i,l);var c=e.childrenMap.get(l);return c.set(i,!0),(s=e.childrenMap)===null||s===void 0||s.set(l,c),e},this.children=function(i){var a=i===void 0?e.GRAPH_NODE:i;if(e.isCompound()){var o,s=(o=e.childrenMap)===null||o===void 0?void 0:o.get(a);return s?Array.from(s.keys()):void 0}if(a===e.GRAPH_NODE)return e.nodes();if(i&&e.hasNode(i))return[]},this.predecessors=function(i){var a=e.predecessorsMap.get(i);return a?Array.from(a.keys()):void 0},this.successors=function(i){var a=e.successorsMap.get(i);return a?Array.from(a.keys()):void 0},this.neighbors=function(i){var a;if(e.hasNode(i))return Array.from(new Set((a=e.predecessors(i))===null||a===void 0?void 0:a.concat(e.successors(i))))},this.isLeaf=function(i){var a;if(e.isDirected()){var o;return!(!((o=e.successors(i))===null||o===void 0)&&o.length)}return!(!((a=e.neighbors(i))===null||a===void 0)&&a.length)},this.filterNodes=function(i){var a=e.directed,o=e.multigraph,s=e.compound,l=new t({directed:a,multigraph:o,compound:s});if(l.setGraph(e.graph()),e.nodes().forEach(function(c){i(c)&&l.setNode(c,e.node(c))}),e.edges().forEach(function(c){l.hasNode(c.v)&&l.hasNode(c.w)&&l.setEdgeObj(c,e.edge(c))}),s){var u=function(f){for(var h=e.parent(f);h!==void 0&&!l.hasNode(h);)h=e.parent(h);return h};l.nodes().forEach(function(c){l.setParent(c,u(c))})}return l},this.setDefaultEdgeLabel=function(i){return OV(i)?e.defaultEdgeLabelFn=i:e.defaultEdgeLabelFn=function(){return i},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(i,a){return e.setEdge(i.v,i.w,a,i.name)},this.setPath=function(i,a){return i.reduce(function(o,s){return e.setEdge(o,s,a),s}),e},this.edgeFromArgs=function(i,a,o){return e.edge({v:i,w:a,name:o})},this.edge=function(i){return e.edgesLabelsMap.get(VI(e.isDirected(),i))},this.hasEdge=function(i,a,o){return e.edgesLabelsMap.has(VI(e.isDirected(),{v:i,w:a,name:o}))},this.removeEdgeObj=function(i){var a=i.v,o=i.w,s=i.name;return e.removeEdge(a,o,s)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(i,a){var o=e.inEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.v===a})},this.outEdges=function(i,a){var o=e.outEdgesMap.get(i);if(o)return Array.from(o.values()).filter(function(s){return!a||s.w===a})},this.nodeEdges=function(i,a){var o;if(e.hasNode(i))return(o=e.inEdges(i,a))===null||o===void 0?void 0:o.concat(e.outEdges(i,a))},this.toJSON=function(){return sKe(e)},this.nodeInDegree=function(i){var a=e.inEdgesMap.get(i);return a?a.size:0},this.nodeOutDegree=function(i){var a=e.outEdgesMap.get(i);return a?a.size:0},this.nodeDegree=function(i){return e.nodeInDegree(i)+e.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var n=DV(DV({},hKe),r);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return fKe(t,[{key:"setNode",value:function(r,n){var i=this.nodesLabelMap,a=this.defaultNodeLabelFn,o=this.isCompound,s=this.parentMap,l=this.childrenMap,u=this.inEdgesMap,c=this.outEdgesMap,f=this.predecessorsMap,h=this.successorsMap;if(i.has(r))return n!==void 0&&i.set(r,n),this;if(i.set(r,n||a(r)),o()){var d;s==null||s.set(r,this.GRAPH_NODE),l==null||l.set(r,new Map),l!=null&&l.has(this.GRAPH_NODE)||l==null||l.set(this.GRAPH_NODE,new Map),l==null||(d=l.get(this.GRAPH_NODE))===null||d===void 0||d.set(r,!0)}return[u,c,f,h].forEach(function(p){return p.set(r,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(r){var n=this;if(this.hasNode(r)){var i=function(g){n.removeEdge(g.v,g.w,g.name)},a=this.inEdgesMap,o=this.outEdgesMap,s=this.predecessorsMap,l=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound()){var c,f,h;this.removeFromParentsChildList(r),(c=this.parentMap)===null||c===void 0||c.delete(r),(f=this.children(r))===null||f===void 0||f.forEach(function(v){return n.setParent(v)}),(h=this.childrenMap)===null||h===void 0||h.delete(r)}var d=a.get(r),p=o.get(r);Array.from(d.values()).forEach(function(v){return i(v)}),Array.from(p.values()).forEach(function(v){return i(v)}),u.delete(r),a.delete(r),o.delete(r),s.delete(r),l.delete(r),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(r,n,i,a){var o,s,l=TV(this.isDirected(),r,n,a),u=VI(this.isDirected(),l),c=l.v,f=l.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,i),this;if(a!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this.edgesLabelsMap.set(u,i||this.defaultEdgeLabelFn(c,f,a)),Object.freeze(l),this.edgesMap.set(u,l);var h=this.predecessorsMap.get(f),d=this.successorsMap.get(c);return MV(h,c),MV(d,f),(o=this.inEdgesMap.get(f))===null||o===void 0||o.set(u,l),(s=this.outEdgesMap.get(c))===null||s===void 0||s.set(u,l),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(r,n,i){var a=Kue(this.isDirected(),r,n,i),o=this.edgesMap.get(a);if(o){var s=TV(this.isDirected(),r,n,i),l=s.v,u=s.w;this.edgesLabelsMap.delete(a),this.edgesMap.delete(a);var c=this.predecessorsMap.get(u),f=this.successorsMap.get(l);AV(c,l),AV(f,u),this.inEdgesMap.get(u).delete(a),this.outEdgesMap.get(l).delete(a),this.edgeCountNum-=1}return this}}]),t}();Wv.fromJSON=lKe;function m4(t){"@babel/helpers - typeof";return m4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m4(t)}function dKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pKe(t,e,r){return e&&LV(t.prototype,e),r&&LV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gp(){return typeof Reflect<"u"&&Reflect.get?Gp=Reflect.get:Gp=function(e,r,n){var i=vKe(e,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Gp.apply(this,arguments)}function vKe(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=df(t),t!==null););return t}function gKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y4(t,e)}function y4(t,e){return y4=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},y4(t,e)}function mKe(t){var e=bKe();return function(){var n=df(t),i;if(e){var a=df(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return yKe(this,i)}}function yKe(t,e){if(e&&(m4(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wKe(t)}function wKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bKe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function df(t){return df=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},df(t)}var xKe=function(t){gKe(r,t);var e=mKe(r);function r(){var n;dKe(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a)),n.eventPool={},n}return pKe(r,[{key:"appendEvent",value:function(i,a){this.eventPool[i]||(this.eventPool[i]=[]),this.eventPool[i].push(a)}},{key:"removeEvent",value:function(i,a){if(this.eventPool[i]){var o=this.eventPool[i].indexOf(a);o>-1&&this.eventPool[i].splice(o,1)}}},{key:"emitEvent",value:function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];this.eventPool[i]&&this.eventPool[i].forEach(function(l){l.apply(void 0,o)})}},{key:"setNode",value:function(i,a){return Gp(df(r.prototype),"setNode",this).call(this,i,a),this.emitEvent("nodeAdd",i,a),this}},{key:"removeNode",value:function(i){return Gp(df(r.prototype),"removeNode",this).call(this,i),this.emitEvent("nodeRemove",i),this}},{key:"setEdge",value:function(i,a,o,s){return Gp(df(r.prototype),"setEdge",this).call(this,i,a,o,s),this.emitEvent("edgeAdd",i,a,o,s),this}},{key:"removeEdge",value:function(i,a,o){return Gp(df(r.prototype),"removeEdge",this).call(this,i,a,o),this.emitEvent("edgeRemove",i,a,o),this}}]),r}(Wv);function RV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SKe(t,e,r){return e&&RV(t.prototype,e),r&&RV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function EKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Que=SKe(function t(){var e=this;EKe(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(r){return r.key})},this.has=function(r){return e.keyIndice.has(r)},this.priority=function(r){var n=e.keyIndice.get(r);if(n!==void 0)return e.arr[n].priority},this.swap=function(r,n){var i=e.arr,a=e.keyIndice,o=[i[r],i[n]],s=o[0],l=o[1];i[r]=l,i[n]=s,a.set(s.key,n),a.set(l.key,r)},this.innerDecrease=function(r){for(var n=e.arr,i=n[r].priority,a,o=r;o!==0;){var s;if(a=o>>1,((s=n[a])===null||s===void 0?void 0:s.priority)<i)break;e.swap(o,a),o=a}},this.heapify=function(r){var n=e.arr,i=r<<1,a=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==r&&(e.swap(r,o),e.heapify(o)))},this.min=function(){if(e.size()===0)throw new Error("Queue underflow");return e.arr[0].key},this.add=function(r,n){var i=e.keyIndice,a=e.arr;if(!i.has(r)){var o=a.length;return i.set(r,o),a.push({key:r,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var r=e.arr.pop();return e.keyIndice.delete(r.key),e.heapify(0),r.key},this.decrease=function(r,n){if(!e.has(r))throw new Error("There's no key named ".concat(r));var i=e.keyIndice.get(r);if(n>e.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(r," Old: + ").concat(e.arr[i].priority," New: ").concat(n));e.arr[i].priority=n,e.innerDecrease(i)}}),_Ke=function(e,r){var n=new Wv,i=new Map,a=new Que,o;function s(c){var f=c.v===o?c.w:c.v,h=a.priority(f);if(h!==void 0){var d=r(c);d<h&&(i.set(f,o),a.decrease(f,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(c){a.add(c,Number.POSITIVE_INFINITY),n.setNode(c)}),a.decrease(e.nodes()[0],0);for(var l=!1;a.size()>0;){var u;if(o=a.removeMin(),i.has(o))n.setEdge(o,i.get(o));else{if(l)throw new Error("Input graph is not connected: "+e.graph());l=!0}(u=e.nodeEdges(o))===null||u===void 0||u.forEach(s)}return n},CKe=function(e){var r=new Set,n=[],i=e.nodes();return i.forEach(function(a){for(var o=[],s=[a];s.length>0;){var l=s.pop();if(!r.has(l)){var u,c;r.add(l),o.push(l),(u=e.successors(l))===null||u===void 0||u.forEach(function(f){return s.push(f)}),(c=e.predecessors(l))===null||c===void 0||c.forEach(function(f){return s.push(f)})}}o.length&&n.push(o)}),n},kKe=function t(e,r,n,i,a,o){i.includes(r)||(i.push(r),n||o.push(r),a(r).forEach(function(s){return t(e,s,n,i,a,o)}),n&&o.push(r))},gF=function(e,r,n){var i=Array.isArray(r)?r:[r],a=function(u){return e.isDirected()?e.successors(u):e.neighbors(u)},o=[],s=[];return i.forEach(function(l){if(e.hasNode(l))kKe(e,l,n==="post",s,a,o);else throw new Error("Graph does not have node: "+l)}),o};function MKe(t,e){return IKe(t)||OKe(t,e)||TKe(t,e)||AKe()}function AKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TKe(t,e){if(t){if(typeof t=="string")return NV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NV(t,e)}}function NV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OKe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function IKe(t){if(Array.isArray(t))return t}var DKe=function(){return 1},Zue=function(e,r,n,i){return PKe(e,r,n||DKe,i||function(a){return e.outEdges(a)})},PKe=function(e,r,n,i){var a=new Map,o=new Que,s,l,u=function(h){var d=h.v!==s?h.v:h.w,p=a.get(d),v=n(h),g=l.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+v);g<p.distance&&(p.distance=g,p.predecessor=s,o.decrease(d,g))};for(e.nodes().forEach(function(f){var h=f===r?0:Number.POSITIVE_INFINITY;a.set(f,{distance:h}),o.add(f,h)});o.size()>0&&(s=o.removeMin(),l=a.get(s),!(l&&l.distance===Number.POSITIVE_INFINITY));)i(s).forEach(u);var c={};return Array.from(a.entries()).forEach(function(f){var h=MKe(f,2),d=h[0],p=h[1];return c[String(d)]=p,c}),c},LKe=function(e,r,n){var i={};return e.nodes().forEach(function(a){return i[String(a)]=Zue(e,a,r,n),i}),i},Jue=function(e){var r=0,n=[],i=new Map,a=[];function o(s){var l,u={onStack:!0,lowlink:r,index:r};if(i.set(s,u),r+=1,n.push(s),(l=e.successors(s))===null||l===void 0||l.forEach(function(d){var p;if(i.has(d)){if(!((p=i.get(d))===null||p===void 0)&&p.onStack){var g=i.get(d);u.lowlink=Math.min(u.lowlink,g.index)}}else{o(d);var v=i.get(d);u.lowlink=Math.min(u.lowlink,v.lowlink)}}),u.lowlink===u.index){var c=[],f;do{f=n.pop();var h=i.get(f);h.onStack=!1,c.push(f)}while(s!==f);a.push(c)}}return e.nodes().forEach(function(s){i.has(s)||o(s)}),a},RKe=function(e){return Jue(e).filter(function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})};function w4(t){"@babel/helpers - typeof";return w4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w4(t)}function FV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NKe(t,e,r){return e&&FV(t.prototype,e),r&&FV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function FKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pw(t,e)}function $Ke(t){var e=ece();return function(){var n=Lw(t),i;if(e){var a=Lw(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return zKe(this,i)}}function zKe(t,e){if(e&&(w4(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jKe(t)}function jKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b4(t){var e=typeof Map=="function"?new Map:void 0;return b4=function(n){if(n===null||!GKe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Z_(n,arguments,Lw(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Pw(i,n)},b4(t)}function Z_(t,e,r){return ece()?Z_=Reflect.construct:Z_=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&Pw(u,o.prototype),u},Z_.apply(null,arguments)}function ece(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function GKe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Pw(t,e){return Pw=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Pw(t,e)}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Lw(t)}var x4=function(t){BKe(r,t);var e=$Ke(r);function r(){return FKe(this,r),e.apply(this,arguments)}return NKe(r)}(b4(Error));function tce(t){var e=new Set,r=new Set,n=[];function i(a){if(r.has(a))throw new x4;if(!e.has(a)){var o;r.add(a),e.add(a),(o=t.predecessors(a))===null||o===void 0||o.forEach(i),r.delete(a),n.push(a)}}if(t.sinks().forEach(i),e.size!==t.nodeCount())throw new x4;return n}var UKe=function(e){try{tce(e)}catch(r){if(r instanceof x4)return!1;throw r}return!0},WKe=function(e,r){return gF(e,r,"post")},VKe=function(e,r){return gF(e,r,"pre")},HKe=function(){return 1};function XKe(t,e,r){return YKe(t,e||HKe,r||function(n){return t.outEdges(n)})}function YKe(t,e,r){var n={},i=t.nodes();return i.forEach(function(a){var o=String(a);n[o]={},n[o][o]={distance:0},i.forEach(function(s){a!==s&&(n[o][String(s)]={distance:Number.POSITIVE_INFINITY})}),r(a).forEach(function(s){var l=s.v===a?s.w:s.v,u=e(s);n[o][String(l)]={distance:u,predecessor:a}})}),i.forEach(function(a){var o=String(a),s=n[o];i.forEach(function(l){var u=String(l),c=n[u];i.forEach(function(f){var h=String(f),d=c[o],p=s[h],v=c[h],g=d.distance+p.distance;g<v.distance&&(v.distance=g,v.predecessor=p.predecessor)})})}),n}const qKe=Object.freeze(Object.defineProperty({__proto__:null,components:CKe,dfs:gF,dijkstra:Zue,dijkstraAll:LKe,findCycles:RKe,floydWarshall:XKe,isAcyclic:UKe,postorder:WKe,preorder:VKe,prim:_Ke,tarjan:Jue,topsort:tce},Symbol.toStringTag,{value:"Module"}));var KKe=function(e,r){for(var n=e.nodes(),i=0;i<n.length;i++){var a=n[i];if(r.hasNode(a))return!0}return!1},rce=function(e,r){for(var n=e.edges(),i=0;i<n.length;i++){var a=n[i];if(r.hasEdge(a.v,a.w,a.name))return!0}return!1},nce=function(e,r){var n=e.nodes(),i=n.filter(function(a){return r.hasNode(a)});return i},ice=function(e,r){var n=e.edges(),i=n.filter(function(a){return r.hasEdge(a.v,a.w,a.name)});return i},ace=function(e,r){return e.isCompound()===r.isCompound()&&e.isDirected()===r.isDirected()&&e.isMultigraph()===r.isMultigraph()},TA=function(e,r){var n=nce(e,r);return n.length===e.nodes().length},mF=function(e,r){var n=ice(e,r);return n.length===e.edges().length},QKe=function(e,r){return ace(e,r)&&e.nodeCount()===r.nodeCount()&&TA(e,r)&&e.edgeCount()===r.edgeCount()&&mF(e,r)},ZKe=function(e,r){return TA(e,r)&&mF(e,r)};function JKe(t,e){return nQe(t)||rQe(t,e)||tQe(t,e)||eQe()}function eQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tQe(t,e){if(t){if(typeof t=="string")return BV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BV(t,e)}}function BV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rQe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function nQe(t){if(Array.isArray(t))return t}function iQe(t){return t instanceof Wv}function fk(t){if(t.isMultigraph())return!1;for(var e=t.edges(),r=new Map,n=0;n<e.length;n++){var i=e[n];if(i.v===i.w)return!1;var a=[i.v,i.w].sort(),o=JKe(a,2),s=o[0],l=o[1],u="".concat(s,"-").concat(l);if(r.has(u))return!1;r.set(u,!0)}return!0}function aQe(t){return t.nodes().length===0}function oQe(t){for(var e=t.edges(),r=0;r<e.length;r++){var n=e[r];if(n.v===n.w)return!0}return!1}const sQe=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:oQe,isGraph:iQe,isNullGraph:aQe,isSimpleGraph:fk},Symbol.toStringTag,{value:"Module"}));var lQe=function(e,r){if(!fk(e)||!fk(r)||!TA(e,r)||rce(e,r))return!1;var n=e.nodeCount();return e.edgeCount()+r.edgeCount()===n*(n-1)/2};const uQe=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:mF,containAllSameNodes:TA,containSameEdges:rce,containSameNodes:KKe,getSameEdges:ice,getSameNodes:nce,isGraphComplement:lQe,isGraphContainsAnother:ZKe,isGraphOptionSame:ace,isGraphSame:QKe},Symbol.toStringTag,{value:"Module"}));var cQe=function(e){if(!fk(e))return null;for(var r=e.nodeCount(),n=new Wv({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),i=e.nodes(),a=0;a<r;a++){var o=i[a];n.setNode(o,e.node(o));for(var s=a+1;s<r;s++){var l=i[s];e.hasEdge(o,l)||n.setEdge(o,l)}}return n};const fQe=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:cQe},Symbol.toStringTag,{value:"Module"})),hQe=Object.freeze(Object.defineProperty({__proto__:null,Graph:Wv,GraphWithEvent:xKe,algorithm:qKe,comparision:uQe,essence:sQe,generate:fQe},Symbol.toStringTag,{value:"Module"})),OA=xc(hQe);var oce=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dQe=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pF,"__esModule",{value:!0});var pQe=dQe(vF),vQe=OA,gQe=function(t){oce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(pQe.default),mQe=function(t){oce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(vQe.Graph),yQe=function(){return 1},wQe=function(t,e){var r;if(t.nodeCount()<=1)return[];var n=xQe(t,e||yQe),i=bQe(n.graph,n.buckets,n.zeroIdx);return(r=i.map(function(a){return t.outEdges(a.v,a.w)}))===null||r===void 0?void 0:r.flat()},bQe=function(t,e,r){for(var n=[],i=e[e.length-1],a=e[0],o;t.nodeCount();){for(;o=a.dequeue();)HI(t,e,r,o);for(;o=i.dequeue();)HI(t,e,r,o);if(t.nodeCount()){for(var s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){n=n.concat(HI(t,e,r,o,!0));break}}}return n},HI=function(t,e,r,n,i){var a,o,s=[];return(a=t.inEdges(n.v))===null||a===void 0||a.forEach(function(l){var u=t.edge(l),c=t.node(l.v);i&&s.push({v:l.v,w:l.w,in:0,out:0}),c.out===void 0&&(c.out=0),c.out-=u,S4(e,r,c)}),(o=t.outEdges(n.v))===null||o===void 0||o.forEach(function(l){var u=t.edge(l),c=l.w,f=t.node(c);f.in===void 0&&(f.in=0),f.in-=u,S4(e,r,f)}),t.removeNode(n.v),i?s:void 0},xQe=function(t,e){var r=new mQe,n=0,i=0;t.nodes().forEach(function(u){r.setNode(u,{v:u,in:0,out:0})}),t.edges().forEach(function(u){var c=r.edge(u)||0,f=(e==null?void 0:e(u))||1,h=c+f;r.setEdge(u.v,u.w,h),i=Math.max(i,r.node(u.v).out+=f),n=Math.max(n,r.node(u.w).in+=f)});for(var a=[],o=i+n+3,s=0;s<o;s++)a.push(new gQe);var l=n+1;return r.nodes().forEach(function(u){S4(a,l,r.node(u))}),{buckets:a,zeroIdx:l,graph:r}},S4=function(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)};pF.default=wQe;var SQe=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dF,"__esModule",{value:!0});var EQe=SQe(pF),_Qe=function(t){var e=function(n){return function(i){var a;return((a=n.edge(i))===null||a===void 0?void 0:a.weight)||1}},r=t.graph().acyclicer==="greedy"?(0,EQe.default)(t,e(t)):CQe(t);r==null||r.forEach(function(n){var i=t.edge(n);t.removeEdgeObj(n),i.forwardName=n.name,i.reversed=!0,t.setEdge(n.w,n.v,i,"rev-".concat(Math.random()))})},CQe=function(t){var e=[],r={},n={},i=function(a){var o;n[a]||(n[a]=!0,r[a]=!0,(o=t.outEdges(a))===null||o===void 0||o.forEach(function(s){r[s.w]?e.push(s):i(s.w)}),delete r[a])};return t.nodes().forEach(i),e},kQe=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.reversed){t.removeEdgeObj(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})};dF.default={run:_Qe,undo:kQe};var yF={},As={},jf={},MQe=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(jf,"__esModule",{value:!0});jf.Graph=void 0;var AQe=OA,TQe=function(t){MQe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(AQe.Graph);jf.Graph=TQe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.minBy=t.notime=t.time=t.partition=t.maxRank=t.addBorderNode=t.removeEmptyRanks=t.normalizeRanks=t.buildLayerMatrix=t.intersectRect=t.predecessorWeights=t.successorWeights=t.zipObject=t.asNonCompoundGraph=t.simplify=t.addDummyNode=void 0;var e=ii(),r=jf,n=function(b,x){return Number(b)-Number(x)},i=function(b,x,S,E){var _;do _="".concat(E).concat(Math.random());while(b.hasNode(_));return S.dummy=x,b.setNode(_,S),_};t.addDummyNode=i;var a=function(b){var x=new r.Graph().setGraph(b.graph());return b.nodes().forEach(function(S){x.setNode(S,b.node(S))}),b.edges().forEach(function(S){var E=x.edgeFromArgs(S.v,S.w)||{weight:0,minlen:1},_=b.edge(S);x.setEdge(S.v,S.w,{weight:E.weight+_.weight,minlen:Math.max(E.minlen,_.minlen)})}),x};t.simplify=a;var o=function(b){var x=new r.Graph({multigraph:b.isMultigraph()}).setGraph(b.graph());return b.nodes().forEach(function(S){var E;!((E=b.children(S))===null||E===void 0)&&E.length||x.setNode(S,b.node(S))}),b.edges().forEach(function(S){x.setEdgeObj(S,b.edge(S))}),x};t.asNonCompoundGraph=o;var s=function(b,x){return b==null?void 0:b.reduce(function(S,E,_){return S[E]=x[_],S},{})};t.zipObject=s;var l=function(b){var x={};return b.nodes().forEach(function(S){var E,_={};(E=b.outEdges(S))===null||E===void 0||E.forEach(function(k){var C;_[k.w]=(_[k.w]||0)+(((C=b.edge(k))===null||C===void 0?void 0:C.weight)||0)}),x[S]=_}),x};t.successorWeights=l;var u=function(b){var x=b.nodes(),S=x.map(function(E){var _,k={};return(_=b.inEdges(E))===null||_===void 0||_.forEach(function(C){k[C.v]=(k[C.v]||0)+b.edge(C).weight}),k});return(0,t.zipObject)(x,S)};t.predecessorWeights=u;var c=function(b,x){var S=Number(b.x),E=Number(b.y),_=Number(x.x)-S,k=Number(x.y)-E,C=Number(b.width)/2,M=Number(b.height)/2;if(!_&&!k)return{x:0,y:0};var A,T;return Math.abs(k)*C>Math.abs(_)*M?(k<0&&(M=-M),A=M*_/k,T=M):(_<0&&(C=-C),A=C,T=C*k/_),{x:S+A,y:E+T}};t.intersectRect=c;var f=function(b){for(var x=[],S=(0,t.maxRank)(b)+1,E=0;E<S;E++)x.push([]);b.nodes().forEach(function(_){var k=b.node(_);if(k){var C=k.rank;C!==void 0&&x[C]&&x[C].push(_)}});for(var E=0;E<S;E++)x[E]=x[E].sort(function(k,C){var M,A;return n((M=b.node(k))===null||M===void 0?void 0:M.order,(A=b.node(C))===null||A===void 0?void 0:A.order)});return x};t.buildLayerMatrix=f;var h=function(b){var x=b.nodes().filter(function(E){var _;return((_=b.node(E))===null||_===void 0?void 0:_.rank)!==void 0}).map(function(E){return b.node(E).rank}),S=Math.min.apply(Math,x);b.nodes().forEach(function(E){var _=b.node(E);_.hasOwnProperty("rank")&&S!==1/0&&(_.rank-=S)})};t.normalizeRanks=h;var d=function(b){var x=b.nodes(),S=x.filter(function(T){var D;return((D=b.node(T))===null||D===void 0?void 0:D.rank)!==void 0}).map(function(T){return b.node(T).rank}),E=Math.min.apply(Math,S),_=[];x.forEach(function(T){var D,F=(((D=b.node(T))===null||D===void 0?void 0:D.rank)||0)-E;_[F]||(_[F]=[]),_[F].push(T)});for(var k=0,C=b.graph().nodeRankFactor||0,M=0;M<_.length;M++){var A=_[M];A===void 0?M%C!==0&&(k-=1):k&&(A==null||A.forEach(function(T){var D=b.node(T);D&&(D.rank=D.rank||0,D.rank+=k)}))}};t.removeEmptyRanks=d;var p=function(b,x,S,E){var _={width:0,height:0};return(0,e.isNumber)(S)&&(0,e.isNumber)(E)&&(_.rank=S,_.order=E),(0,t.addDummyNode)(b,"border",_,x)};t.addBorderNode=p;var v=function(b){var x;return b.nodes().forEach(function(S){var E,_=(E=b.node(S))===null||E===void 0?void 0:E.rank;_!==void 0&&(x===void 0||_>x)&&(x=_)}),x||(x=0),x};t.maxRank=v;var g=function(b,x){var S={lhs:[],rhs:[]};return b==null||b.forEach(function(E){x(E)?S.lhs.push(E):S.rhs.push(E)}),S};t.partition=g;var m=function(b,x){var S=Date.now();try{return x()}finally{console.log("".concat(b," time: ").concat(Date.now()-S,"ms"))}};t.time=m;var y=function(b,x){return x()};t.notime=y;var w=function(b,x){return b.reduce(function(S,E){var _=x(S),k=x(E);return _>k?E:S})};t.minBy=w})(As);Object.defineProperty(yF,"__esModule",{value:!0});var OQe=As,IQe=function(t){t.graph().dummyChains=[],t.edges().forEach(function(e){return DQe(t,e)})},DQe=function(t,e){var r=e.v,n=t.node(r).rank,i=e.w,a=t.node(i).rank,o=e.name,s=t.edge(e),l=s.labelRank;if(a!==n+1){t.removeEdgeObj(e);var u=t.graph(),c,f,h;for(h=0,++n;n<a;++h,++n)s.points=[],f={edgeLabel:s,width:0,height:0,edgeObj:e,rank:n},c=(0,OQe.addDummyNode)(t,"edge",f,"_d"),n===l&&(f.width=s.width,f.height=s.height,f.dummy="edge-label",f.labelpos=s.labelpos),t.setEdge(r,c,{weight:s.weight},o),h===0&&(u.dummyChains||(u.dummyChains=[]),u.dummyChains.push(c)),r=c;t.setEdge(r,i,{weight:s.weight},o)}},PQe=function(t){var e;(e=t.graph().dummyChains)===null||e===void 0||e.forEach(function(r){var n=t.node(r),i=n.edgeLabel,a;n.edgeObj&&t.setEdgeObj(n.edgeObj,i);for(var o=r;n.dummy;)a=t.successors(o)[0],t.removeNode(o),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),o=a,n=t.node(o)})};yF.default={run:IQe,undo:PQe};var wF={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.slack=Yl.longestPathWithLayer=Yl.longestPath=void 0;var sce=function(t){var e,r={},n=function(i){var a,o=t.node(i);if(!o)return 0;if(r[i])return o.rank;r[i]=!0;var s;return(a=t.outEdges(i))===null||a===void 0||a.forEach(function(l){var u=n(l.w),c=t.edge(l).minlen,f=u-c;f&&(s===void 0||f<s)&&(s=f)}),s||(s=0),o.rank=s,s};(e=t.sources())===null||e===void 0||e.forEach(function(i){return n(i)})};Yl.longestPath=sce;var lce=function(t){var e,r={},n,i=function(s){var l,u=t.node(s);if(!u)return 0;if(r[s])return u.rank;r[s]=!0;var c;return(l=t.outEdges(s))===null||l===void 0||l.forEach(function(f){var h=i(f.w),d=t.edge(f).minlen,p=h-d;p&&(c===void 0||p<c)&&(c=p)}),c||(c=0),(n===void 0||c<n)&&(n=c),u.rank=c,c};(e=t.sources())===null||e===void 0||e.forEach(function(s){t.node(s)&&i(s)}),n===void 0&&(n=0);var a={},o=function(s,l){var u,c=t.node(s),f=isNaN(c.layer)?l:c.layer;(c.rank===void 0||c.rank<f)&&(c.rank=f),!a[s]&&(a[s]=!0,(u=t.outEdges(s))===null||u===void 0||u.map(function(h){o(h.w,f+t.edge(h).minlen)}))};t.nodes().forEach(function(s){var l=t.node(s);l&&(isNaN(l.layer)?l.rank-=n:o(s,l.layer))})};Yl.longestPathWithLayer=lce;var uce=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};Yl.slack=uce;Yl.default={longestPath:sce,longestPathWithLayer:lce,slack:uce};var Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});Rd.feasibleTreeWithLayer=Rd.feasibleTree=void 0;var Ov=Yl,LQe=As,cce=jf,fce=function(t){var e=new cce.Graph({directed:!1}),r=t.nodes()[0],n=t.nodeCount();e.setNode(r,{});for(var i,a;RQe(e,t)<n;)i=dce(e,t),a=e.hasNode(i.v)?(0,Ov.slack)(t,i):-(0,Ov.slack)(t,i),pce(e,t,a);return e};Rd.feasibleTree=fce;var RQe=function(t,e){var r=function(n){e.nodeEdges(n).forEach(function(i){var a=i.v,o=n===a?i.w:a;!t.hasNode(o)&&!(0,Ov.slack)(e,i)&&(t.setNode(o,{}),t.setEdge(n,o,{}),r(o))})};return t.nodes().forEach(r),t.nodeCount()},hce=function(t){var e=new cce.Graph({directed:!1}),r=t.nodes()[0],n=t.nodes().filter(function(o){return!!t.node(o)}).length;e.setNode(r,{});for(var i,a;NQe(e,t)<n;)i=dce(e,t),a=e.hasNode(i.v)?(0,Ov.slack)(t,i):-(0,Ov.slack)(t,i),pce(e,t,a);return e};Rd.feasibleTreeWithLayer=hce;var NQe=function(t,e){var r=function(n){var i;(i=e.nodeEdges(n))===null||i===void 0||i.forEach(function(a){var o=a.v,s=n===o?a.w:o;!t.hasNode(s)&&(e.node(s).layer!==void 0||!(0,Ov.slack)(e,a))&&(t.setNode(s,{}),t.setEdge(n,s,{}),r(s))})};return t.nodes().forEach(r),t.nodeCount()},dce=function(t,e){return(0,LQe.minBy)(e.edges(),function(r){return t.hasNode(r.v)!==t.hasNode(r.w)?(0,Ov.slack)(e,r):1/0})},pce=function(t,e,r){t.nodes().forEach(function(n){e.node(n).rank||(e.node(n).rank=0),e.node(n).rank+=r})};Rd.default={feasibleTree:fce,feasibleTreeWithLayer:hce};var vce={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.exchangeEdges=t.enterEdge=t.leaveEdge=t.initLowLimValues=t.calcCutValue=t.initCutValues=void 0;var e=Rd,r=Yl,n=As,i=OA,a=i.algorithm.preorder,o=i.algorithm.postorder,s=function(w){var b=(0,n.simplify)(w);(0,r.longestPath)(b);var x=(0,e.feasibleTree)(b);(0,t.initLowLimValues)(x),(0,t.initCutValues)(x,b);for(var S,E;S=(0,t.leaveEdge)(x);)E=(0,t.enterEdge)(x,b,S),(0,t.exchangeEdges)(x,b,S,E)},l=function(w,b){var x=o(w,w.nodes());x=x==null?void 0:x.slice(0,(x==null?void 0:x.length)-1),x==null||x.forEach(function(S){u(w,b,S)})};t.initCutValues=l;var u=function(w,b,x){var S=w.node(x),E=S.parent;w.edgeFromArgs(x,E).cutvalue=(0,t.calcCutValue)(w,b,x)},c=function(w,b,x){var S,E=w.node(x),_=E.parent,k=!0,C=b.edgeFromArgs(x,_),M=0;return C||(k=!1,C=b.edgeFromArgs(_,x)),M=C.weight,(S=b.nodeEdges(x))===null||S===void 0||S.forEach(function(A){var T=A.v===x,D=T?A.w:A.v;if(D!==_){var F=T===k,R=b.edge(A).weight;if(M+=F?R:-R,m(w,x,D)){var B=w.edgeFromArgs(x,D).cutvalue;M+=F?-B:B}}}),M};t.calcCutValue=c;var f=function(w,b){b===void 0&&(b=w.nodes()[0]),h(w,{},1,b)};t.initLowLimValues=f;var h=function(w,b,x,S,E){var _,k=x,C=x,M=w.node(S);return b[S]=!0,(_=w.neighbors(S))===null||_===void 0||_.forEach(function(A){b[A]||(C=h(w,b,C,A,S))}),M.low=k,M.lim=C++,E?M.parent=E:delete M.parent,C},d=function(w){return w.edges().find(function(b){return w.edge(b).cutvalue<0})};t.leaveEdge=d;var p=function(w,b,x){var S=x.v,E=x.w;b.hasEdge(S,E)||(S=x.w,E=x.v);var _=w.node(S),k=w.node(E),C=_,M=!1;_.lim>k.lim&&(C=k,M=!0);var A=b.edges().filter(function(T){return M===y(w,w.node(T.v),C)&&M!==y(w,w.node(T.w),C)});return(0,n.minBy)(A,function(T){return(0,r.slack)(b,T)})};t.enterEdge=p;var v=function(w,b,x,S){var E=x.v,_=x.w;w.removeEdge(E,_),w.setEdge(S.v,S.w,{}),(0,t.initLowLimValues)(w),(0,t.initCutValues)(w,b),g(w,b)};t.exchangeEdges=v;var g=function(w,b){var x=w.nodes().find(function(E){var _;return!(!((_=b.node(E))===null||_===void 0)&&_.parent)}),S=a(w,x);S=S==null?void 0:S.slice(1),S==null||S.forEach(function(E){var _=w.node(E).parent,k=b.edgeFromArgs(E,_),C=!1;k||(k=b.edgeFromArgs(_,E),C=!0),b.node(E).rank=b.node(_).rank+(C?k.minlen:-k.minlen)})},m=function(w,b,x){return w.hasEdge(b,x)},y=function(w,b,x){return x.low<=b.lim&&b.lim<=x.lim};t.default=s})(vce);var FQe=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wF,"__esModule",{value:!0});var gce=Yl,BQe=Rd,$Qe=FQe(vce),zQe=function(t){switch(t.graph().ranker){case"network-simplex":GQe(t);break;case"tight-tree":$V(t);break;case"longest-path":jQe(t);break;default:$V(t)}},jQe=gce.longestPath,$V=function(t){(0,gce.longestPathWithLayer)(t),(0,BQe.feasibleTreeWithLayer)(t)},GQe=function(t){(0,$Qe.default)(t)};wF.default=zQe;var bF={};Object.defineProperty(bF,"__esModule",{value:!0});var UQe=function(t){var e,r={},n=0,i=function(a){var o,s=n;(o=t.children(a))===null||o===void 0||o.forEach(i),r[a]={low:s,lim:n++}};return(e=t.children())===null||e===void 0||e.forEach(i),r},WQe=function(t,e,r,n){var i=[],a=[],o=Math.min(e[r].low,e[n].low),s=Math.max(e[r].lim,e[n].lim),l,u;l=r;do l=t.parent(l),i.push(l);while(l&&(e[l].low>o||s>e[l].lim));for(u=l,l=n;l&&l!==u;)a.push(l),l=t.parent(l);return{lca:u,path:i.concat(a.reverse())}},VQe=function(t){var e,r=UQe(t);(e=t.graph().dummyChains)===null||e===void 0||e.forEach(function(n){var i,a,o=n,s=t.node(o),l=s.edgeObj;if(l)for(var u=WQe(t,r,l.v,l.w),c=u.path,f=u.lca,h=0,d=c[h],p=!0;o!==l.w;){if(s=t.node(o),p){for(;d!==f&&((i=t.node(d))===null||i===void 0?void 0:i.maxRank)<s.rank;)h++,d=c[h];d===f&&(p=!1)}if(!p){for(;h<c.length-1&&((a=t.node(c[h+1]))===null||a===void 0?void 0:a.minRank)<=s.rank;)h++;d=c[h]}t.setParent(o,d),o=t.successors(o)[0]}})};bF.default=VQe;var xF={};Object.defineProperty(xF,"__esModule",{value:!0});var E4=As,HQe=function(t){var e,r=(0,E4.addDummyNode)(t,"root",{},"_root"),n=XQe(t),i=Math.max.apply(Math,Object.values(n));Math.abs(i)===1/0&&(i=1);var a=i-1,o=2*a+1;t.graph().nestingRoot=r,t.edges().forEach(function(l){t.edge(l).minlen*=o});var s=YQe(t)+1;(e=t.children())===null||e===void 0||e.forEach(function(l){mce(t,r,o,s,a,n,l)}),t.graph().nodeRankFactor=o},mce=function(t,e,r,n,i,a,o){var s=t.children(o);if(!(s!=null&&s.length)){o!==e&&t.setEdge(e,o,{weight:0,minlen:r});return}var l=(0,E4.addBorderNode)(t,"_bt"),u=(0,E4.addBorderNode)(t,"_bb"),c=t.node(o);t.setParent(l,o),c.borderTop=l,t.setParent(u,o),c.borderBottom=u,s==null||s.forEach(function(f){mce(t,e,r,n,i,a,f);var h=t.node(f),d=h.borderTop?h.borderTop:f,p=h.borderBottom?h.borderBottom:f,v=h.borderTop?n:2*n,g=d!==p?1:i-a[o]+1;t.setEdge(l,d,{minlen:g,weight:v,nestingEdge:!0}),t.setEdge(p,u,{minlen:g,weight:v,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,l,{weight:0,minlen:i+a[o]})},XQe=function(t){var e,r={},n=function(i,a){var o=t.children(i);o==null||o.forEach(function(s){return n(s,a+1)}),r[i]=a};return(e=t.children())===null||e===void 0||e.forEach(function(i){return n(i,1)}),r},YQe=function(t){var e=0;return t.edges().forEach(function(r){e+=t.edge(r).weight}),e},qQe=function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(function(r){var n=t.edge(r);n.nestingEdge&&t.removeEdgeObj(r)})};xF.default={run:HQe,cleanup:qQe};var SF={};Object.defineProperty(SF,"__esModule",{value:!0});var KQe=As,QQe=function(t){var e,r=function(n){var i=t.children(n),a=t.node(n);if(i!=null&&i.length&&i.forEach(function(l){return r(l)}),a.hasOwnProperty("minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,s=a.maxRank+1;o<s;o+=1)zV(t,"borderLeft","_bl",n,a,o),zV(t,"borderRight","_br",n,a,o)}};(e=t.children())===null||e===void 0||e.forEach(function(n){return r(n)})},zV=function(t,e,r,n,i,a){var o={rank:a,borderType:e,width:0,height:0},s=i[e][a-1],l=(0,KQe.addDummyNode)(t,"border",o,r);i[e][a]=l,t.setParent(l,n),s&&t.setEdge(s,l,{weight:1})};SF.default=QQe;var EF={};Object.defineProperty(EF,"__esModule",{value:!0});var ZQe=function(t){var e,r=(e=t.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(r==="lr"||r==="rl")&&yce(t)},JQe=function(t){var e,r=(e=t.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(r==="bt"||r==="rl")&&eZe(t),(r==="lr"||r==="rl")&&(tZe(t),yce(t))},yce=function(t){t.nodes().forEach(function(e){jV(t.node(e))}),t.edges().forEach(function(e){jV(t.edge(e))})},jV=function(t){var e=t.width;t.width=t.height,t.height=e},eZe=function(t){t.nodes().forEach(function(e){XI(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);(r=n.points)===null||r===void 0||r.forEach(function(i){return XI(i)}),n.hasOwnProperty("y")&&XI(n)})},XI=function(t){t!=null&&t.y&&(t.y=-t.y)},tZe=function(t){t.nodes().forEach(function(e){YI(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);(r=n.points)===null||r===void 0||r.forEach(function(i){return YI(i)}),n.hasOwnProperty("x")&&YI(n)})},YI=function(t){var e=t.x;t.x=t.y,t.y=e};EF.default={adjust:ZQe,undo:JQe};var _F={},CF={};function wce(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function qI(t){var e=Math.round(t).toString(16);return e.length===1?"0"+e:e}function bce(t){return"#"+qI(t[0])+qI(t[1])+qI(t[2])}var $o=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},rZe=function(t,e){return $o(t)?t.indexOf(e)>-1:!1};const hk=rZe;var xce=function(t,e){if(!$o(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];e(i,n)&&r.push(i)}return r},nZe=function(t,e){return e===void 0&&(e=[]),xce(t,function(r){return!hk(e,r)})};const iZe=nZe,Ts=function(t){return typeof t=="function"};var Hd=function(t){return t==null},aZe={}.toString,Mc=function(t,e){return aZe.call(t)==="[object "+e+"]"};const Ei=function(t){return Array.isArray?Array.isArray(t):Mc(t,"Array")},IA=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function Gm(t,e){if(t){var r;if(Ei(t))for(var n=0,i=t.length;n<i&&(r=e(t[n],n),r!==!1);n++);else if(IA(t)){for(var a in t)if(t.hasOwnProperty(a)&&(r=e(t[a],a),r===!1))break}}}var oZe=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Gm(t,function(r,n){Ts(t)&&n==="prototype"||e.push(n)}),e};const Sce=oZe;function Ece(t,e){var r=Sce(e),n=r.length;if(Hd(t))return!n;for(var i=0;i<n;i+=1){var a=r[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var sZe=function(t){return typeof t=="object"&&t!==null};const dk=sZe;var lZe=function(t){if(!dk(t)||!Mc(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const Um=lZe;function uZe(t,e){if(!Ei(t))return null;var r;if(Ts(e)&&(r=e),Um(e)&&(r=function(i){return Ece(i,e)}),r){for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n]}return null}function cZe(t,e,r){r===void 0&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1}var fZe=function(t,e){for(var r=null,n=0;n<t.length;n++){var i=t[n],a=i[e];if(!Hd(a)){Ei(a)?r=a[0]:r=a;break}}return r};const hZe=fZe;var dZe=function(t){if(!Ei(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e};const pZe=dZe;var _ce=function(t,e){if(e===void 0&&(e=[]),!Ei(t))e.push(t);else for(var r=0;r<t.length;r+=1)_ce(t[r],e);return e};const vZe=_ce,Cce=function(t){if(Ei(t))return t.reduce(function(e,r){return Math.max(e,r)},t[0])},kce=function(t){if(Ei(t))return t.reduce(function(e,r){return Math.min(e,r)},t[0])};var gZe=function(t){var e=t.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(Ei(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var i=Cce(e),a=kce(e);return{min:a,max:i}};const mZe=gZe;var Mce=Array.prototype,yZe=Mce.splice,wZe=Mce.indexOf,bZe=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=-1;(a=wZe.call(t,i))>-1;)yZe.call(t,a,1);return t};const xZe=bZe;var SZe=Array.prototype.splice,EZe=function(e,r){if(!$o(e))return[];for(var n=e?r.length:0,i=n-1;n--;){var a=void 0,o=r[n];(n===i||o!==a)&&(a=o,SZe.call(e,o,1))}return e};const Ace=EZe;var _Ze=function(t,e,r){if(!Ei(t)&&!Um(t))return t;var n=r;return Gm(t,function(i,a){n=e(n,i,a)}),n};const Tce=_Ze;var CZe=function(t,e){var r=[];if(!$o(t))return r;for(var n=-1,i=[],a=t.length;++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Ace(t,i),r};const kZe=CZe,Nd=function(t){return Mc(t,"String")};function MZe(t,e){var r;if(Ts(e))r=function(i,a){return e(i)-e(a)};else{var n=[];Nd(e)?n.push(e):Ei(e)&&(n=e),r=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return t.sort(r),t}function Oce(t,e){e===void 0&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var a=t[n];e.has(a)||(r.push(a),e.set(a,!0))}return r}var AZe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Oce([].concat.apply([],t))};const TZe=AZe,OZe=function(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[e];if(!Hd(o)){Ei(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(r.push(l),n[l]=!0)}}}return r};function IZe(t){if($o(t))return t[0]}function DZe(t){if($o(t)){var e=t;return e[e.length-1]}}function PZe(t,e){return Ei(t)||Nd(t)?t[0]===e:!1}function LZe(t,e){return Ei(t)||Nd(t)?t[t.length-1]===e:!1}var RZe=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0};const NZe=RZe;var FZe=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1};const BZe=FZe;var $Ze=Object.prototype.hasOwnProperty;function Ice(t,e){if(!e||!Ei(t))return{};for(var r={},n=Ts(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=n(o),$Ze.call(r,i)?r[i].push(o):r[i]=[o]}return r}function Dce(t,e){if(!e)return{0:t};if(!Ts(e)){var r=Ei(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var i="_",a=0,o=r.length;a<o;a++)i+=n[r[a]]&&n[r[a]].toString();return i}}return Ice(t,e)}const zZe=function(t,e){if(!e)return[t];var r=Dce(t,e),n=[];for(var i in r)n.push(r[i]);return n};function jZe(t,e){return t["_wrap_"+e]}function GZe(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(n){t[e](n)};return t["_wrap_"+e]=r,r}var GV={};function UZe(t){var e=GV[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,GV[t]=e}return e}function WZe(t){var e=0,r=0,n=0,i=0;return Ei(t)?t.length===1?e=r=n=i=t[0]:t.length===2?(e=n=t[0],r=i=t[1]):t.length===3?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}}var VZe=function(t,e,r){return t<e?e:t>r?r:t};const HZe=VZe;var XZe=function(t,e){var r=e.toString(),n=r.indexOf(".");if(n===-1)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))};const YZe=XZe;var Gf=function(t){return Mc(t,"Number")},qZe=function(t){return Gf(t)&&t%1!==0};const KZe=qZe;var QZe=function(t){return Gf(t)&&t%2===0};const ZZe=QZe;var JZe=Number.isInteger?Number.isInteger:function(t){return Gf(t)&&t%1===0};const eJe=JZe;var tJe=function(t){return Gf(t)&&t<0};const rJe=tJe;var nJe=1e-5;function iJe(t,e,r){return r===void 0&&(r=nJe),Math.abs(t-e)<r}var aJe=function(t){return Gf(t)&&t%2!==0};const oJe=aJe;var sJe=function(t){return Gf(t)&&t>0};const lJe=sJe,uJe=function(t,e){if(Ei(t)){for(var r,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Ts(e)?e(a):a[e];o>n&&(r=a,n=o)}return r}},cJe=function(t,e){if(Ei(t)){for(var r,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Ts(e)?e(a):a[e];o<n&&(r=a,n=o)}return r}};var fJe=function(t,e){return(t%e+e)%e};const hJe=fJe;var dJe=180/Math.PI,pJe=function(t){return dJe*t};const vJe=pJe,gJe=parseInt;var mJe=Math.PI/180,yJe=function(t){return mJe*t};const wJe=yJe,UV=function(t,e){return t.hasOwnProperty(e)};var Pce=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Gm(t,function(r,n){Ts(t)&&n==="prototype"||e.push(r)}),e};const bJe=function(t,e){return hk(Pce(t),e)},Wb=function(t){return Hd(t)?"":t.toString()};var xJe=function(t){return Wb(t).toLowerCase()};const SJe=xJe;var EJe=function(t){var e=Wb(t);return e.charAt(0).toLowerCase()+e.substring(1)};const _Je=EJe;function CJe(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(r,n){return r.charAt(0)==="\\"?r.slice(1):e[n]===void 0?"":e[n]})}var kJe=function(t){return Wb(t).toUpperCase()};const MJe=kJe;var AJe=function(t){var e=Wb(t);return e.charAt(0).toUpperCase()+e.substring(1)};const TJe=AJe;var OJe={}.toString,IJe=function(t){return OJe.call(t).replace(/^\[object /,"").replace(/]$/,"")};const Lce=IJe;var DJe=function(t){return Mc(t,"Arguments")};const PJe=DJe;var LJe=function(t){return Mc(t,"Boolean")};const RJe=LJe;var NJe=function(t){return Mc(t,"Date")};const FJe=NJe;var BJe=function(t){return Mc(t,"Error")};const $Je=BJe;function zJe(t){return Gf(t)&&isFinite(t)}var jJe=function(t){return t===null};const GJe=jJe;var UJe=Object.prototype,WJe=function(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||UJe;return t===r};const Rce=WJe;var VJe=function(t){return Mc(t,"RegExp")};const HJe=VJe;var XJe=function(t){return t===void 0};const YJe=XJe;var qJe=function(t){return t instanceof Element||t instanceof Document};const KJe=qJe;function QJe(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(r){return setTimeout(r,16)};return e(t)}function ZJe(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(t)}function KI(t,e){for(var r in e)e.hasOwnProperty(r)&&r!=="constructor"&&e[r]!==void 0&&(t[r]=e[r])}function W0(t,e,r,n){return e&&KI(t,e),r&&KI(t,r),n&&KI(t,n),t}var JJe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var i=t[n];Ts(i)&&(i=i.prototype),W0(r.prototype,i)}};const eet=JJe;var _4=function(t){if(typeof t!="object"||t===null)return t;var e;if(Ei(t)){e=[];for(var r=0,n=t.length;r<n;r++)typeof t[r]=="object"&&t[r]!=null?e[r]=_4(t[r]):e[r]=t[r]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=_4(t[i]):e[i]=t[i]}return e};const tet=_4;function ret(t,e,r){var n;return function(){var i=this,a=arguments,o=function(){n=null,r||t.apply(i,a)},s=r&&!n;clearTimeout(n),n=setTimeout(o,e),s&&t.apply(i,a)}}function net(t){var e,r,n,i=t||1;function a(s,l){++e>i&&(n=r,o(1),++e),r[s]=l}function o(s){e=0,r=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return r[s]!==void 0||n[s]!==void 0},get:function(s){var l=r[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){r[s]!==void 0?r[s]=l:a(s,l)}}}const Nce=function(t,e,r){if(r===void 0&&(r=128),!Ts(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return n.cache=net(r),n};var iet=5;function aet(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function Fce(t,e,r,n){r=r||0,n=n||iet;for(var i in e)if(aet(e,i)){var a=e[i];a!==null&&Um(a)?(Um(t[i])||(t[i]={}),r<n?Fce(t[i],a,r+1,n):t[i]=e[i]):Ei(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var oet=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)Fce(t,e[n]);return t};const set=oet;var uet=function(t,e,r,n){Ts(e)||(r=e,e=t,t=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(e.prototype,t);return t.prototype=W0(a,t.prototype),t.superclass=i(e.prototype,e),W0(a,r),W0(t,n),t};const cet=uet;var fet=function(t,e){if(!$o(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var n=-1,i=0;i<t.length;i++)if(t[i]===e){n=i;break}return n};const het=fet;var det=Object.prototype.hasOwnProperty;function pet(t){if(Hd(t))return!0;if($o(t))return!t.length;var e=Lce(t);if(e==="Map"||e==="Set")return!t.size;if(Rce(t))return!Object.keys(t).length;for(var r in t)if(det.call(t,r))return!1;return!0}var C4=function(t,e){if(t===e)return!0;if(!t||!e||Nd(t)||Nd(e))return!1;if($o(t)||$o(e)){if(t.length!==e.length)return!1;for(var r=!0,n=0;n<t.length&&(r=C4(t[n],e[n]),!!r);n++);return r}if(dk(t)||dk(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var r=!0,n=0;n<i.length&&(r=C4(t[i[n]],e[i[n]]),!!r);n++);return r}return!1};const Bce=C4,vet=function(t,e,r){return Ts(r)?!!r(t,e):Bce(t,e)};var get=function(t,e){if(!$o(t))return t;for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push(e(i,n))}return r};const met=get;var yet=function(t){return t};const wet=function(t,e){e===void 0&&(e=yet);var r={};return IA(t)&&!Hd(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},bet=function(t,e,r){for(var n=0,i=Nd(e)?e.split("."):e;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?r:t},xet=function(t,e,r){var n=t,i=Nd(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(IA(n[a])||(n[a]=Gf(i[o+1])?[]:{}),n=n[a]):n[a]=r}),t};var Eet=Object.prototype.hasOwnProperty;const _et=function(t,e){if(t===null||!Um(t))return{};var r={};return Gm(e,function(n){Eet.call(t,n)&&(r[n]=t[n])}),r},Cet=function(t,e){return Tce(t,function(r,n,i){return e.includes(i)||(r[i]=n),r},{})},ket=function(t,e,r){var n,i,a,o,s=0;r||(r={});var l=function(){s=r.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&r.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,o=t.apply(i,a),n||(i=a=null)):!n&&r.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},Met=function(t){return $o(t)?Array.prototype.slice.call(t):[]};var DE={};const Aet=function(t){return t=t||"g",DE[t]?DE[t]+=1:DE[t]=1,t+DE[t]},Tet=function(){},Oet=function(t){return t};function Iet(t){return Hd(t)?0:$o(t)?t.length:Object.keys(t).length}var Det=function(){function t(){this.map={}}return t.prototype.has=function(e){return this.map[e]!==void 0},t.prototype.get=function(e,r){var n=this.map[e];return n===void 0?r:n},t.prototype.set=function(e,r){this.map[e]=r},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(e){delete this.map[e]},t.prototype.size=function(){return Object.keys(this.map).length},t}();const Pet=Det;var Let=/rgba?\(([\s.,0-9]+)\)/;function Ret(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}var PE;function Net(t){if(t[0]==="#"&&t.length===7)return t;PE||(PE=Ret()),PE.style.color=t;var e=document.defaultView.getComputedStyle(PE,"").getPropertyValue("color"),r=Let.exec(e),n=r[1].split(/\s*,\s*/).map(function(i){return Number(i)});return e=bce(n),e}var $ce=Nce(Net,function(t){return t},256);function QI(t,e,r,n){return t[n]+(e[n]-t[n])*r}function Fet(t,e){var r=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=t.length-1,i=Math.floor(n*r),a=n*r-i,o=t[i],s=i===n?o:t[i+1];return bce([QI(o,s,a,0),QI(o,s,a,1),QI(o,s,a,2)])}function Bet(t){var e=typeof t=="string"?t.split("-"):t,r=e.map(function(n){return wce(n.indexOf("#")===-1?$ce(n):n)});return function(n){return Fet(r,n)}}var $et=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zet=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,jet=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Get(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)}function Uet(t){if(Get(t)){var e,r=void 0;if(t[0]==="l"){var n=$et.exec(t),i=+n[1]+90;r=n[2],e="linear-gradient("+i+"deg, "}else if(t[0]==="r"){e="radial-gradient(";var n=zet.exec(t);r=n[4]}var a=r.match(jet);return a.forEach(function(o,s){var l=o.split(":");e+=l[1]+" "+Number(l[0])*100+"%",s!==a.length-1&&(e+=", ")}),e+=")",e}return t}function Wet(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return c8(n,r),Cc(t,n,e)}function Vet(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return f8(n,r),Cc(t,n,e)}function Het(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return h8(n,r),Cc(t,n,e)}function Xet(t,e,r){return Cc(t,r,e)}function Yet(t,e){for(var r=t?[].concat(t):[1,0,0,0,1,0,0,0,1],n=0,i=e.length;n<i;n++){var a=e[n];switch(a[0]){case"t":Wet(r,r,[a[1],a[2]]);break;case"s":Het(r,r,[a[1],a[2]]);break;case"r":Vet(r,r,a[1]);break;case"m":Xet(r,r,a[1]);break}}return r}function zce(t,e){return t[0]*e[1]-e[0]*t[1]}function qet(t,e,r){var n=Goe(t,e),i=zce(t,e)>=0;return r?i?Math.PI*2-n:n:i?n:Math.PI*2-n}function Ket(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function Qet(t,e){if(e==="off")return[].concat(t);var r=typeof e=="number"&&e>=1?Math.pow(10,e):1;return t.map(function(n){var i=n.slice(1).map(Number).map(function(a){return e?Math.round(a*r)/r:Math.round(a)});return[n[0]].concat(i)})}function Zet(t,e){return e===void 0&&(e="off"),Qet(t,e).map(function(r){return r[0]+r.slice(1).join(" ")}).join("")}var jce={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Jet(t,e,r){if(t[r].length>7){t[r].shift();for(var n=t[r],i=r;n.length;)e[r]="A",t.splice(i+=1,0,["C"].concat(n.splice(0,6)));t.splice(r,1)}}var x2={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Gce(t){return Array.isArray(t)&&t.every(function(e){var r=e[0].toLowerCase();return x2[r]===e.length-1&&"achlmqstvz".includes(r)})}function Uce(t){return Gce(t)&&t.every(function(e){var r=e[0];return r===r.toUpperCase()})}function Wce(t){return Uce(t)&&t.every(function(e){var r=e[0];return"ACLMQZ".includes(r)})}function WV(t){for(var e=t.pathValue[t.segmentStart],r=e.toLowerCase(),n=t.data;n.length>=x2[r]&&(r==="m"&&n.length>2?(t.segments.push([e].concat(n.splice(0,2))),r="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(n.splice(0,x2[r]))),!!x2[r]););}function ett(t){var e=t.index,r=t.pathValue,n=r.charCodeAt(e);if(n===48){t.param=0,t.index+=1;return}if(n===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'+r[e]+'", expecting 0 or 1 at index '+e}function ttt(t){return t>=48&&t<=57||t===43||t===45||t===46}function zg(t){return t>=48&&t<=57}function rtt(t){var e=t.max,r=t.pathValue,n=t.index,i=n,a=!1,o=!1,s=!1,l=!1,u;if(i>=e){t.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(u=r.charCodeAt(i),(u===43||u===45)&&(i+=1,u=r.charCodeAt(i)),!zg(u)&&u!==46){t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" is not a number';return}if(u!==46){if(a=u===48,i+=1,u=r.charCodeAt(i),a&&i<e&&u&&zg(u)){t.err="[path-util]: Invalid path value at index "+n+', "'+r[n]+'" illegal number';return}for(;i<e&&zg(r.charCodeAt(i));)i+=1,o=!0;u=r.charCodeAt(i)}if(u===46){for(l=!0,i+=1;zg(r.charCodeAt(i));)i+=1,s=!0;u=r.charCodeAt(i)}if(u===101||u===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" invalid float exponent';return}if(i+=1,u=r.charCodeAt(i),(u===43||u===45)&&(i+=1),i<e&&zg(r.charCodeAt(i)))for(;i<e&&zg(r.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" invalid integer exponent';return}}t.index=i,t.param=+t.pathValue.slice(n,i)}function ntt(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e.includes(t)}function J_(t){for(var e=t.pathValue,r=t.max;t.index<r&&ntt(e.charCodeAt(t.index));)t.index+=1}function itt(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function att(t){return(t|32)===97}function ott(t){var e=t.max,r=t.pathValue,n=t.index,i=r.charCodeAt(n),a=x2[r[n].toLowerCase()];if(t.segmentStart=n,!itt(i)){t.err='[path-util]: Invalid path value "'+r[n]+'" is not a path command';return}if(t.index+=1,J_(t),t.data=[],!a){WV(t);return}for(;;){for(var o=a;o>0;o-=1){if(att(i)&&(o===3||o===4)?ett(t):rtt(t),t.err.length)return;t.data.push(t.param),J_(t),t.index<e&&r.charCodeAt(t.index)===44&&(t.index+=1,J_(t))}if(t.index>=t.max||!ttt(r.charCodeAt(t.index)))break}WV(t)}var stt=function(){function t(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function DA(t){if(Gce(t))return[].concat(t);var e=new stt(t);for(J_(e);e.index<e.max&&!e.err.length;)ott(e);return e.err?e.err:e.segments}function Vce(t){if(Uce(t))return[].concat(t);var e=DA(t),r=0,n=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],u=l.toUpperCase();if(l==="M")return r=s[0],n=s[1],i=r,a=n,["M",r,n];var c;if(l!==u)switch(u){case"A":c=[u,s[0],s[1],s[2],s[3],s[4],s[5]+r,s[6]+n];break;case"V":c=[u,s[0]+n];break;case"H":c=[u,s[0]+r];break;default:{var f=s.map(function(d,p){return d+(p%2?n:r)});c=[u].concat(f)}}else c=[u].concat(s);var h=c.length;switch(u){case"Z":r=i,n=a;break;case"H":r=c[1];break;case"V":n=c[1];break;default:r=c[h-2],n=c[h-1],u==="M"&&(i=r,a=n)}return c})}function ltt(t,e){var r=t[0],n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(r)||(e.qx=null,e.qy=null),r==="H")l=["L",t[1],i];else if(r==="V")l=["L",n,t[1]];else if(r==="S"){var u=n*2-a,c=i*2-o;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if(r==="T"){var f=n*2-e.qx,h=i*2-e.qy;e.qx=f,e.qy=h,l=["Q",f,h].concat(s)}else if(r==="Q"){var d=s[0],p=s[1];e.qx=d,e.qy=p}return l}function PA(t){if(Wce(t))return[].concat(t);for(var e=Vce(t),r=j({},jce),n=0;n<e.length;n+=1){e[n]=ltt(e[n],r);var i=e[n],a=i.length;r.x1=+i[a-2],r.y1=+i[a-1],r.x2=+i[a-4]||r.x1,r.y2=+i[a-3]||r.y1}return e}function utt(t){return Wce(t)&&t.every(function(e){var r=e[0];return"MC".includes(r)})}function LE(t,e,r){var n=t*Math.cos(r)-e*Math.sin(r),i=t*Math.sin(r)+e*Math.cos(r);return{x:n,y:i}}function kF(t,e,r,n,i,a,o,s,l,u){var c=t,f=e,h=r,d=n,p=s,v=l,g=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],w,b,x,S,E;if(u)b=u[0],x=u[1],S=u[2],E=u[3];else{w=LE(c,f,-m),c=w.x,f=w.y,w=LE(p,v,-m),p=w.x,v=w.y;var _=(c-p)/2,k=(f-v)/2,C=_*_/(h*h)+k*k/(d*d);C>1&&(C=Math.sqrt(C),h*=C,d*=C);var M=h*h,A=d*d,T=(a===o?-1:1)*Math.sqrt(Math.abs((M*A-M*k*k-A*_*_)/(M*k*k+A*_*_)));S=T*h*k/d+(c+p)/2,E=T*-d*_/h+(f+v)/2,b=Math.asin(((f-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),x=Math.asin(((v-E)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),b=c<S?Math.PI-b:b,x=p<S?Math.PI-x:x,b<0&&(b=Math.PI*2+b),x<0&&(x=Math.PI*2+x),o&&b>x&&(b-=Math.PI*2),!o&&x>b&&(x-=Math.PI*2)}var D=x-b;if(Math.abs(D)>g){var F=x,R=p,B=v;x=b+g*(o&&x>b?1:-1),p=S+h*Math.cos(x),v=E+d*Math.sin(x),y=kF(p,v,h,d,i,0,o,R,B,[x,F,S,E])}D=x-b;var N=Math.cos(b),O=Math.sin(b),L=Math.cos(x),G=Math.sin(x),q=Math.tan(D/4),K=4/3*h*q,V=4/3*d*q,le=[c,f],ge=[c+K*O,f-V*N],xe=[p+K*G,v-V*L],Ie=[p,v];if(ge[0]=2*le[0]-ge[0],ge[1]=2*le[1]-ge[1],u)return ge.concat(xe,Ie,y);y=ge.concat(xe,Ie,y);for(var He=[],Ge=0,ht=y.length;Ge<ht;Ge+=1)He[Ge]=Ge%2?LE(y[Ge-1],y[Ge],m).y:LE(y[Ge],y[Ge+1],m).x;return He}function ctt(t,e,r,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*r,o*e+s*n,o*i+s*r,o*a+s*n,i,a]}function Oh(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return[n+(a-n)*r,i+(o-i)*r]}var VV=function(t,e,r,n){var i=.5,a=Oh([t,e],[r,n],i);return Ro(Ro([],a,!0),[r,n,r,n],!1)};function ftt(t,e){var r=t[0],n=t.slice(1).map(Number),i=n[0],a=n[1],o,s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=i,e.y=a,t;case"A":return o=[s,l].concat(n),["C"].concat(kF(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(n),["C"].concat(ctt(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(VV(s,l,i,a));case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:["C"].concat(VV(s,l,u,c))}return t}function Hce(t,e){if(e===void 0&&(e=!1),utt(t)){var r=[].concat(t);return e?[r,[]]:r}for(var n=PA(t),i=j({},jce),a=[],o="",s=n.length,l,u,c=[],f=0;f<s;f+=1){n[f]&&(o=n[f][0]),a[f]=o;var h=ftt(n[f],i);n[f]=h,Jet(n,a,f),s=n.length,o==="Z"&&c.push(f),l=n[f],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return e?[n,c]:n}function htt(t){return DA(t)}function dtt(t){return t.map(function(e){return Array.isArray(e)?[].concat(e):e})}function ptt(t){var e=t.slice(1).map(function(r,n,i){return n?i[n-1].slice(-2).concat(r.slice(1)):t[0].slice(1).concat(r.slice(1))}).map(function(r){return r.map(function(n,i){return r[r.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(r){return["C"].concat(r.slice(2))}))}function py(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function k4(t,e,r,n,i){var a=py([t,e],[r,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:e};else if(i>=a)o={x:r,y:n};else{var s=Oh([t,e],[r,n],i/a),l=s[0],u=s[1];o={x:l,y:u}}return{length:a,point:o,min:{x:Math.min(t,r),y:Math.min(e,n)},max:{x:Math.max(t,r),y:Math.max(e,n)}}}function HV(t,e){var r=t.x,n=t.y,i=e.x,a=e.y,o=r*i+n*a,s=Math.sqrt((Math.pow(r,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=r*a-n*i<0?-1:1,u=l*Math.acos(o/s);return u}function vtt(t,e,r,n,i,a,o,s,l,u){var c=Math.abs,f=Math.sin,h=Math.cos,d=Math.sqrt,p=Math.PI,v=c(r),g=c(n),m=(i%360+360)%360,y=m*(p/180);if(t===s&&e===l)return{x:t,y:e};if(v===0||g===0)return k4(t,e,s,l,u).point;var w=(t-s)/2,b=(e-l)/2,x={x:h(y)*w+f(y)*b,y:-f(y)*w+h(y)*b},S=Math.pow(x.x,2)/Math.pow(v,2)+Math.pow(x.y,2)/Math.pow(g,2);S>1&&(v*=d(S),g*=d(S));var E=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(x.y,2)-Math.pow(g,2)*Math.pow(x.x,2),_=Math.pow(v,2)*Math.pow(x.y,2)+Math.pow(g,2)*Math.pow(x.x,2),k=E/_;k=k<0?0:k;var C=(a!==o?1:-1)*d(k),M={x:C*(v*x.y/g),y:C*(-(g*x.x)/v)},A={x:h(y)*M.x-f(y)*M.y+(t+s)/2,y:f(y)*M.x+h(y)*M.y+(e+l)/2},T={x:(x.x-M.x)/v,y:(x.y-M.y)/g},D=HV({x:1,y:0},T),F={x:(-x.x-M.x)/v,y:(-x.y-M.y)/g},R=HV(T,F);!o&&R>0?R-=2*p:o&&R<0&&(R+=2*p),R%=2*p;var B=D+R*u,N=v*h(B),O=g*f(B),L={x:h(y)*N-f(y)*O+A.x,y:f(y)*N+h(y)*O+A.y};return L}function gtt(t,e,r,n,i,a,o,s,l,u,c){var f,h=c.bbox,d=h===void 0?!0:h,p=c.length,v=p===void 0?!0:p,g=c.sampleSize,m=g===void 0?30:g,y=typeof u=="number",w=t,b=e,x=0,S=[w,b,x],E=[w,b],_=0,k={x:0,y:0},C=[{x:w,y:b}];y&&u<=0&&(k={x:w,y:b});for(var M=0;M<=m;M+=1){if(_=M/m,f=vtt(t,e,r,n,i,a,o,s,l,_),w=f.x,b=f.y,d&&C.push({x:w,y:b}),v&&(x+=py(E,[w,b])),E=[w,b],y&&x>=u&&u>S[2]){var A=(x-u)/(x-S[2]);k={x:E[0]*(1-A)+S[0]*A,y:E[1]*(1-A)+S[1]*A}}S=[w,b,x]}return y&&u>=x&&(k={x:s,y:l}),{length:x,point:k,min:{x:Math.min.apply(null,C.map(function(T){return T.x})),y:Math.min.apply(null,C.map(function(T){return T.y}))},max:{x:Math.max.apply(null,C.map(function(T){return T.x})),y:Math.max.apply(null,C.map(function(T){return T.y}))}}}function mtt(t,e,r,n,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,3)*t+3*Math.pow(u,2)*l*r+3*u*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*a+Math.pow(l,3)*s}}function Xce(t,e,r,n,i,a,o,s,l,u){var c,f=u.bbox,h=f===void 0?!0:f,d=u.length,p=d===void 0?!0:d,v=u.sampleSize,g=v===void 0?10:v,m=typeof l=="number",y=t,w=e,b=0,x=[y,w,b],S=[y,w],E=0,_={x:0,y:0},k=[{x:y,y:w}];m&&l<=0&&(_={x:y,y:w});for(var C=0;C<=g;C+=1){if(E=C/g,c=mtt(t,e,r,n,i,a,o,s,E),y=c.x,w=c.y,h&&k.push({x:y,y:w}),p&&(b+=py(S,[y,w])),S=[y,w],m&&b>=l&&l>x[2]){var M=(b-l)/(b-x[2]);_={x:S[0]*(1-M)+x[0]*M,y:S[1]*(1-M)+x[1]*M}}x=[y,w,b]}return m&&l>=b&&(_={x:o,y:s}),{length:b,point:_,min:{x:Math.min.apply(null,k.map(function(A){return A.x})),y:Math.min.apply(null,k.map(function(A){return A.y}))},max:{x:Math.max.apply(null,k.map(function(A){return A.x})),y:Math.max.apply(null,k.map(function(A){return A.y}))}}}function ytt(t,e,r,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*r+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*n+Math.pow(o,2)*a}}function wtt(t,e,r,n,i,a,o,s){var l,u=s.bbox,c=u===void 0?!0:u,f=s.length,h=f===void 0?!0:f,d=s.sampleSize,p=d===void 0?10:d,v=typeof o=="number",g=t,m=e,y=0,w=[g,m,y],b=[g,m],x=0,S={x:0,y:0},E=[{x:g,y:m}];v&&o<=0&&(S={x:g,y:m});for(var _=0;_<=p;_+=1){if(x=_/p,l=ytt(t,e,r,n,i,a,x),g=l.x,m=l.y,c&&E.push({x:g,y:m}),h&&(y+=py(b,[g,m])),b=[g,m],v&&y>=o&&o>w[2]){var k=(y-o)/(y-w[2]);S={x:b[0]*(1-k)+w[0]*k,y:b[1]*(1-k)+w[1]*k}}w=[g,m,y]}return v&&o>=y&&(S={x:i,y:a}),{length:y,point:S,min:{x:Math.min.apply(null,E.map(function(C){return C.x})),y:Math.min.apply(null,E.map(function(C){return C.y}))},max:{x:Math.max.apply(null,E.map(function(C){return C.x})),y:Math.max.apply(null,E.map(function(C){return C.y}))}}}function LA(t,e,r){for(var n,i,a,o,s,l,u=PA(t),c=typeof e=="number",f,h=[],d,p=0,v=0,g=0,m=0,y,w=[],b=[],x=0,S={x:0,y:0},E=S,_=S,k=S,C=0,M=0,A=u.length;M<A;M+=1)y=u[M],d=y[0],f=d==="M",h=f?h:[p,v].concat(y.slice(1)),f?(g=y[1],m=y[2],S={x:g,y:m},E=S,x=0,c&&e<.001&&(k=S)):d==="L"?(n=k4(h[0],h[1],h[2],h[3],(e||0)-C),x=n.length,S=n.min,E=n.max,_=n.point):d==="A"?(i=gtt(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-C,r||{}),x=i.length,S=i.min,E=i.max,_=i.point):d==="C"?(a=Xce(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-C,r||{}),x=a.length,S=a.min,E=a.max,_=a.point):d==="Q"?(o=wtt(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-C,r||{}),x=o.length,S=o.min,E=o.max,_=o.point):d==="Z"&&(h=[p,v,g,m],s=k4(h[0],h[1],h[2],h[3],(e||0)-C),x=s.length,S=s.min,E=s.max,_=s.point),c&&C<e&&C+x>=e&&(k=_),b.push(E),w.push(S),C+=x,l=d!=="Z"?y.slice(-2):[g,m],p=l[0],v=l[1];return c&&e>=C&&(k={x:p,y:v}),{length:C,point:k,min:{x:Math.min.apply(null,w.map(function(T){return T.x})),y:Math.min.apply(null,w.map(function(T){return T.y}))},max:{x:Math.max.apply(null,b.map(function(T){return T.x})),y:Math.max.apply(null,b.map(function(T){return T.y}))}}}function btt(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=LA(t,void 0,j(j({},e),{length:!1})),n=r.min,i=n.x,a=n.y,o=r.max,s=o.x,l=o.y,u=s-i,c=l-a;return{width:u,height:c,x:i,y:a,x2:s,y2:l,cx:i+u/2,cy:a+c/2,cz:Math.max(u,c)+Math.min(u,c)/2}}function S2(t,e){return LA(t,void 0,j(j({},e),{bbox:!1,length:!0})).length}function xtt(t,e){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=LA(t,void 0,j(j({},e),{bbox:!0,length:!0})),n=r.length,i=r.min,a=i.x,o=i.y,s=r.max,l=s.x,u=s.y,c=l-a,f=u-o;return{length:n,width:c,height:f,x:a,y:o,x2:l,y2:u,cx:a+c/2,cy:o+f/2,cz:Math.max(c,f)+Math.min(c,f)/2}}function Stt(t){var e=t.length,r=e-1;return t.map(function(n,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=r),t[s])})})}function Ett(t,e){var r=t.length-1,n=[],i=0,a=0,o=Stt(t);return o.forEach(function(s,l){t.slice(1).forEach(function(u,c){a+=py(t[(l+c)%r].slice(-2),e[c%r].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function _tt(t,e,r,n,i,a,o,s){return 3*((s-e)*(r+i)-(o-t)*(n+a)+n*(t-i)-r*(e-a)+s*(i+t/3)-o*(a+e/3))/20}function Yce(t){var e=0,r=0,n=0;return Hce(t).map(function(i){var a;switch(i[0]){case"M":return e=i[1],r=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],u=o[2],c=o[3],f=o[4],h=o[5];return n=_tt(e,r,s,l,u,c,f,h),a=i.slice(-2),e=a[0],r=a[1],n}}).reduce(function(i,a){return i+a},0)}function Ctt(t){return Yce(t)>=0}function e3(t,e,r){return LA(t,e,j(j({},r),{bbox:!1,length:!0})).point}function ktt(t,e){var r=DA(t);if(typeof r=="string")throw TypeError(r);var n=r.slice(),i=S2(n),a=n.length-1,o=0,s=0,l=r[0],u=l.slice(-2),c=u[0],f=u[1],h={x:c,y:f};if(a<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:h,lengthAtSegment:o};if(e>=i)return n=r.slice(0,-1),o=S2(n),s=i-o,{segment:r[a],index:a,length:s,lengthAtSegment:o};for(var d=[];a>0;)l=n[a],n=n.slice(0,-1),o=S2(n),s=i-o,i=o,d.push({segment:l,index:a,length:s,lengthAtSegment:o}),a-=1;return d.find(function(p){var v=p.lengthAtSegment;return v<=e})}function Mtt(t,e){for(var r=DA(t),n=PA(r),i=S2(r),a=function(x){var S=x.x-e.x,E=x.y-e.y;return S*S+E*E},o=8,s,l=0,u,c=0,f=1/0,h=0;h<=i;h+=o)s=e3(n,h),l=a(s),l<f&&(u=s,c=h,f=l);o/=2;for(var d,p,v=0,g=0,m=0,y=0;o>.5;)v=c-o,d=e3(n,v),m=a(d),g=c+o,p=e3(n,g),y=a(p),v>=0&&m<f?(u=d,c=v,f=m):g<=i&&y<f?(u=p,c=g,f=y):o/=2;var w=ktt(r,c),b=Math.sqrt(f);return{closest:u,distance:b,segment:w}}function Att(t,e){var r=Mtt(t,e).distance;return Math.abs(r)<.001}function Ttt(t,e){e===void 0&&(e=.5);var r=t.slice(0,2),n=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=Oh(r,n,e),s=Oh(n,i,e),l=Oh(i,a,e),u=Oh(o,s,e),c=Oh(s,l,e),f=Oh(u,c,e);return[["C"].concat(o,u,f),["C"].concat(c,l,a)]}function XV(t){return t.map(function(e,r,n){var i=r&&n[r-1].slice(-2).concat(e.slice(1)),a=r?Xce(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return r?o=a?Ttt(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function qce(t,e,r){var n=XV(t),i=XV(e),a=n.length,o=i.length,s=n.filter(function(g){return g.l}).length,l=i.filter(function(g){return g.l}).length,u=n.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/s||0,c=i.filter(function(g){return g.l}).reduce(function(g,m){var y=m.l;return g+y},0)/l||0,f=r||Math.max(a,o),h=[u,c],d=[f-a,f-o],p=0,v=[n,i].map(function(g,m){return g.l===f?g.map(function(y){return y.s}):g.map(function(y,w){return p=w&&d[m]&&y.l>=h[m],d[m]-=p?1:0,p?y.ss:[y.s]}).flat()});return v[0].length===v[1].length?v:qce(v[0],v[1],f)}var Ott=1e-6;function ZI(t){return Math.abs(t)<Ott?0:t<0?-1:1}function Itt(t,e,r){return(r[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function M4(t,e,r){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(Itt(o,s,[e,r]))return!0;ZI(o[1]-r)>0!=ZI(s[1]-r)>0&&ZI(e-(r-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}var YV=function(t,e,r){return t>=e&&t<=r};function Dtt(t,e,r,n){var i=.001,a={x:r.x-t.x,y:r.y-t.y},o={x:e.x-t.x,y:e.y-t.y},s={x:n.x-r.x,y:n.y-r.y},l=o.x*s.y-o.y*s.x,u=l*l,c=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,h=null;if(u>i*c*f){var d=(a.x*s.y-a.y*s.x)/l,p=(a.x*o.y-a.y*o.x)/l;YV(d,0,1)&&YV(p,0,1)&&(h={x:t.x+d*o.x,y:t.y+d*o.y})}return h}function qV(t){for(var e=[],r=t.length,n=0;n<r-1;n++){var i=t[n],a=t[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=t[0],s=t[r-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Ptt(t,e){var r=!1;return t.forEach(function(n){if(Dtt(n.from,n.to,e.from,e.to))return r=!0,!1}),r}function KV(t){var e=t.map(function(n){return n[0]}),r=t.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}}function Ltt(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Rtt(t,e){if(t.length<2||e.length<2)return!1;var r=KV(t),n=KV(e);if(!Ltt(r,n))return!1;var i=!1;if(e.forEach(function(l){if(M4(t,l[0],l[1]))return i=!0,!1}),i||(t.forEach(function(l){if(M4(e,l[0],l[1]))return i=!0,!1}),i))return!0;var a=qV(t),o=qV(e),s=!1;return o.forEach(function(l){if(Ptt(a,l))return s=!0,!1}),s}function Ntt(t){var e=document.createElement("div");e.innerHTML=t;var r=e.childNodes[0];return r&&e.contains(r)&&e.removeChild(r),r}function Ftt(t,e){if(t)return Object.keys(e).forEach(function(r){t.style[r]=e[r]}),t}const Btt=Object.freeze(Object.defineProperty({__proto__:null,Cache:Pet,angleTo:qet,arcToCubic:kF,assign:W0,augment:eet,clamp:HZe,clearAnimationFrame:ZJe,clone:tet,clonePath:dtt,contains:hk,createDOM:Ntt,debounce:ret,deepMix:set,difference:iZe,direction:zce,distanceSquareRoot:py,each:Gm,endsWith:LZe,equalizeSegments:qce,every:NZe,extend:cet,filter:xce,find:uZe,findIndex:cZe,firstValue:hZe,fixedBase:YZe,flatten:pZe,flattenDeep:vZe,forIn:Gm,get:bet,getDrawDirection:Ctt,getPathArea:Yce,getPathBBox:btt,getPathBBoxTotalLength:xtt,getPointAtLength:e3,getRange:mZe,getRotatedCurve:Ett,getTotalLength:S2,getType:Lce,getWrapBehavior:jZe,gradient:Bet,group:zZe,groupBy:Ice,groupToMap:Dce,has:UV,hasKey:UV,hasValue:bJe,head:IZe,identity:Oet,includes:hk,indexOf:het,isArguments:PJe,isArray:Ei,isArrayLike:$o,isBoolean:RJe,isDate:FJe,isDecimal:KZe,isElement:KJe,isEmpty:pet,isEqual:Bce,isEqualWith:vet,isError:$Je,isEven:ZZe,isFinite:zJe,isFunction:Ts,isInteger:eJe,isMatch:Ece,isNegative:rJe,isNil:Hd,isNull:GJe,isNumber:Gf,isNumberEqual:iJe,isObject:IA,isObjectLike:dk,isOdd:oJe,isPlainObject:Um,isPointInPolygon:M4,isPointInStroke:Att,isPolygonsIntersect:Rtt,isPositive:lJe,isPrototype:Rce,isRegExp:HJe,isString:Nd,isType:Mc,isUndefined:YJe,keys:Sce,last:DZe,lowerCase:SJe,lowerFirst:_Je,map:met,mapValues:wet,max:Cce,maxBy:uJe,memoize:Nce,min:kce,minBy:cJe,mix:W0,mod:hJe,modifyCSS:Ftt,noop:Tet,normalizePath:PA,number2color:UZe,omit:Cet,parseRadius:WZe,path2Absolute:Vce,path2Array:htt,path2Curve:Hce,path2String:Zet,pick:_et,pull:xZe,pullAt:Ace,reduce:Tce,remove:kZe,requestAnimationFrame:QJe,reverseCurve:ptt,rgb2arr:wce,set:xet,size:Iet,some:BZe,sortBy:MZe,startsWith:PZe,substitute:CJe,throttle:ket,toArray:Met,toCSSGradient:Uet,toDegree:vJe,toInteger:gJe,toRGB:$ce,toRadian:wJe,toString:Wb,transform:Yet,union:TZe,uniq:Oce,uniqueId:Aet,upperCase:MJe,upperFirst:TJe,values:Pce,valuesOfKey:OZe,vertical:Ket,wrapBehavior:GZe},Symbol.toStringTag,{value:"Module"})),Kce=xc(Btt);Object.defineProperty(CF,"__esModule",{value:!0});var $tt=Kce,ztt=function(t){for(var e={},r=t.nodes().filter(function(f){var h;return!(!((h=t.children(f))===null||h===void 0)&&h.length)}),n=r.map(function(f){return t.node(f).rank}),i=(0,$tt.max)(n),a=[],o=0;o<i+1;o++)a.push([]);var s=function(f){var h;if(!e.hasOwnProperty(f)){e[f]=!0;var d=t.node(f);isNaN(d.rank)||a[d.rank].push(f),(h=t.successors(f))===null||h===void 0||h.forEach(function(p){return s(p)})}},l=r.sort(function(f,h){return t.node(f).rank-t.node(h).rank}),u=l.filter(function(f){return t.node(f).fixorder!==void 0}),c=u.sort(function(f,h){return t.node(f).fixorder-t.node(h).fixorder});return c==null||c.forEach(function(f){isNaN(t.node(f).rank)||a[t.node(f).rank].push(f),e[f]=!0}),l==null||l.forEach(s),a};CF.default=ztt;var MF={};Object.defineProperty(MF,"__esModule",{value:!0});var jtt=As,Gtt=function(t,e,r){for(var n=(0,jtt.zipObject)(r,r.map(function(c,f){return f})),i=e.map(function(c){var f,h=(f=t.outEdges(c))===null||f===void 0?void 0:f.map(function(d){return{pos:n[d.w]||0,weight:t.edge(d).weight}});return h==null?void 0:h.sort(function(d,p){return d.pos-p.pos})}),a=i.flat().filter(function(c){return c!==void 0}),o=1;o<r.length;)o<<=1;var s=2*o-1;o-=1;var l=Array(s).fill(0,0,s),u=0;return a==null||a.forEach(function(c){if(c){var f=c.pos+o;l[f]+=c.weight;for(var h=0;f>0;)f%2&&(h+=l[f+1]),f=f-1>>1,l[f]+=c.weight;u+=c.weight*h}}),u},Utt=function(t,e){for(var r=0,n=1;n<(e==null?void 0:e.length);n+=1)r+=Gtt(t,e[n-1],e[n]);return r};MF.default=Utt;var AF={};Object.defineProperty(AF,"__esModule",{value:!0});var Wtt=jf,Vtt=function(t,e,r){var n=Htt(t),i=new Wtt.Graph({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return t.node(a)});return t.nodes().forEach(function(a){var o,s=t.node(a),l=t.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,l||n),(o=t[r](a))===null||o===void 0||o.forEach(function(u){var c=u.v===a?u.w:u.v,f=i.edgeFromArgs(c,a),h=f!==void 0?f.weight:0;i.setEdge(c,a,{weight:t.edge(u).weight+h})}),s.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i},Htt=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e};AF.default=Vtt;var TF={};Object.defineProperty(TF,"__esModule",{value:!0});var Xtt=function(t,e,r){var n={},i;r==null||r.forEach(function(a){for(var o=t.parent(a),s,l;o;){if(s=t.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=s}})};TF.default=Xtt;var OF={},IF={};Object.defineProperty(IF,"__esModule",{value:!0});var Ytt=function(t,e){return e.map(function(r){var n=t.inEdges(r);if(!(n!=null&&n.length))return{v:r};{var i={sum:0,weight:0};return n==null||n.forEach(function(a){var o=t.edge(a),s=t.node(a.v);i.sum+=o.weight*s.order,i.weight+=o.weight}),{v:r,barycenter:i.sum/i.weight,weight:i.weight}}})};IF.default=Ytt;var DF={};Object.defineProperty(DF,"__esModule",{value:!0});var qtt=function(t,e){var r,n,i,a={};t==null||t.forEach(function(s,l){a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};var u=a[s.v];s.barycenter!==void 0&&(u.barycenter=s.barycenter,u.weight=s.weight)}),(r=e.edges())===null||r===void 0||r.forEach(function(s){var l=a[s.v],u=a[s.w];l!==void 0&&u!==void 0&&(u.indegree++,l.out.push(a[s.w]))});var o=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,function(s){return!s.indegree});return Ktt(o)},Ktt=function(t){for(var e,r,n=[],i=function(u){return function(c){c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&Qtt(u,c)}},a=function(u){return function(c){c.in.push(u),--c.indegree===0&&t.push(c)}},o=function(){var u=t.pop();n.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(function(c){return i(u)(c)}),(r=u.out)===null||r===void 0||r.forEach(function(c){return a(u)(c)})};t!=null&&t.length;)o();var s=n.filter(function(u){return!u.merged}),l=["vs","i","barycenter","weight"];return s.map(function(u){var c={};return l==null||l.forEach(function(f){u[f]!==void 0&&(c[f]=u[f])}),c})},Qtt=function(t,e){var r,n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),t.vs=(r=e.vs)===null||r===void 0?void 0:r.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};DF.default=qtt;var PF={};Object.defineProperty(PF,"__esModule",{value:!0});var Ztt=As,Jtt=function(t,e,r,n){var i=(0,Ztt.partition)(t,function(h){var d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort(function(h,d){return-h.i- -d.i}),s=[],l=0,u=0,c=0;a==null||a.sort(ert(!!e,!!r)),c=QV(s,o,c),a==null||a.forEach(function(h){var d;c+=(d=h.vs)===null||d===void 0?void 0:d.length,s.push(h.vs),l+=h.barycenter*h.weight,u+=h.weight,c=QV(s,o,c)});var f={vs:s.flat()};return u&&(f.barycenter=l/u,f.weight=u),f},QV=function(t,e,r){for(var n=r,i;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),t==null||t.push(i.vs),n++;return n},ert=function(t,e){return function(r,n){if(r.fixorder!==void 0&&n.fixorder!==void 0)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return-1;if(r.barycenter>n.barycenter)return 1;if(e&&r.order!==void 0&&n.order!==void 0){if(r.order<n.order)return-1;if(r.order>n.order)return 1}return t?n.i-r.i:r.i-n.i}};PF.default=Jtt;var LF=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(OF,"__esModule",{value:!0});var trt=LF(IF),rrt=LF(DF),nrt=LF(PF),Qce=function(t,e,r,n,i,a){var o,s,l,u,c=t.children(e),f=t.node(e),h=f?f.borderLeft:void 0,d=f?f.borderRight:void 0,p={};h&&(c=c==null?void 0:c.filter(function(b){return b!==h&&b!==d}));var v=(0,trt.default)(t,c||[]);v==null||v.forEach(function(b){var x;if(!((x=t.children(b.v))===null||x===void 0)&&x.length){var S=Qce(t,b.v,r,n,a);p[b.v]=S,S.hasOwnProperty("barycenter")&&art(b,S)}});var g=(0,rrt.default)(v,r);irt(g,p),(o=g.filter(function(b){return b.vs.length>0}))===null||o===void 0||o.forEach(function(b){var x=t.node(b.vs[0]);x&&(b.fixorder=x.fixorder,b.order=x.order)});var m=(0,nrt.default)(g,n,i,a);if(h&&(m.vs=[h,m.vs,d].flat(),!((s=t.predecessors(h))===null||s===void 0)&&s.length)){var y=t.node(((l=t.predecessors(h))===null||l===void 0?void 0:l[0])||""),w=t.node(((u=t.predecessors(d))===null||u===void 0?void 0:u[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+w.order)/(m.weight+2),m.weight+=2}return m},irt=function(t,e){t==null||t.forEach(function(r){var n,i=(n=r.vs)===null||n===void 0?void 0:n.map(function(a){return e[a]?e[a].vs:a});r.vs=i.flat()})},art=function(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};OF.default=Qce;var Vb=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_F,"__esModule",{value:!0});var ZV=Vb(CF),JV=Vb(MF),ort=Vb(AF),srt=Vb(TF),lrt=Vb(OF),eH=ii(),urt=jf,JI=As,crt=function(t,e){for(var r=(0,JI.maxRank)(t),n=[],i=[],a=1;a<r+1;a++)n.push(a);for(var a=r-1;a>-1;a--)i.push(a);var o=tH(t,n,"inEdges"),s=tH(t,i,"outEdges"),l=(0,ZV.default)(t);eD(t,l);for(var u=Number.POSITIVE_INFINITY,c,a=0,f=0;f<4;++a,++f){rH(a%2?o:s,a%4>=2,!1,e),l=(0,JI.buildLayerMatrix)(t);var h=(0,JV.default)(t,l);h<u&&(f=0,c=(0,eH.clone)(l),u=h)}l=(0,ZV.default)(t),eD(t,l);for(var a=0,f=0;f<4;++a,++f){rH(a%2?o:s,a%4>=2,!0,e),l=(0,JI.buildLayerMatrix)(t);var h=(0,JV.default)(t,l);h<u&&(f=0,c=(0,eH.clone)(l),u=h)}eD(t,c)},tH=function(t,e,r){return e.map(function(n){return(0,ort.default)(t,n,r)})},rH=function(t,e,r,n){var i=new urt.Graph;t==null||t.forEach(function(a){for(var o,s=a.graph().root,l=(0,lrt.default)(a,s,i,e,r,n),u=0;u<((o=l.vs)===null||o===void 0?void 0:o.length);u++){var c=a.node(l.vs[u]);c&&(c.order=u)}(0,srt.default)(a,i,l.vs)})},eD=function(t,e){e==null||e.forEach(function(r){r==null||r.forEach(function(n,i){t.node(n).order=i})})};_F.default=crt;var RF={},Zce={};(function(t){var e=Oe&&Oe.__extends||function(){var b=function(x,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(E[k]=_[k])},b(x,S)};return function(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(x,S);function E(){this.constructor=x}x.prototype=S===null?Object.create(S):(E.prototype=S.prototype,new E)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.width=t.sep=t.positionX=t.balance=t.alignCoordinates=t.findSmallestWidthAlignment=t.buildBlockGraph=t.horizontalCompaction=t.verticalAlignment=t.hasConflict=t.addConflict=t.findOtherInnerSegmentNode=t.findType2Conflicts=t.findType1Conflicts=void 0;var r=OA,n=Kce,i=As,a=function(b){e(x,b);function x(){return b!==null&&b.apply(this,arguments)||this}return x}(r.Graph),o=function(b,x){var S={},E=function(_,k){var C=0,M=0,A=_.length,T=k==null?void 0:k[(k==null?void 0:k.length)-1];return k==null||k.forEach(function(D,F){var R,B=(0,t.findOtherInnerSegmentNode)(b,D),N=B?b.node(B).order:A;(B||D===T)&&((R=k.slice(M,F+1))===null||R===void 0||R.forEach(function(O){var L;(L=b.predecessors(O))===null||L===void 0||L.forEach(function(G){var q,K=b.node(G),V=K.order;(V<C||N<V)&&!(K.dummy&&(!((q=b.node(O))===null||q===void 0)&&q.dummy))&&(0,t.addConflict)(S,G,O)})}),M=F+1,C=N)}),k};return x!=null&&x.length&&x.reduce(E),S};t.findType1Conflicts=o;var s=function(b,x){var S={};function E(M,A,T,D,F){for(var R,B,N,O=A;O<T;O++)N=M[O],!((R=b.node(N))===null||R===void 0)&&R.dummy&&((B=b.predecessors(N))===null||B===void 0||B.forEach(function(L){var G=b.node(L);G.dummy&&(G.order<D||G.order>F)&&(0,t.addConflict)(S,L,N)}))}function _(M){return JSON.stringify(M.slice(1))}function k(M,A){var T=_(M);A.get(T)||(E.apply(void 0,M),A.set(T,!0))}var C=function(M,A){var T=-1,D,F=0,R=new Map;return A==null||A.forEach(function(B,N){var O;if(((O=b.node(B))===null||O===void 0?void 0:O.dummy)==="border"){var L=b.predecessors(B)||[];L.length&&(D=b.node(L[0]).order,k([A,F,N,T,D],R),F=N,T=D)}k([A,F,A.length,D,M.length],R)}),A};return x!=null&&x.length&&x.reduce(C),S};t.findType2Conflicts=s;var l=function(b,x){var S,E;if(!((S=b.node(x))===null||S===void 0)&&S.dummy)return(E=b.predecessors(x))===null||E===void 0?void 0:E.find(function(_){return b.node(_).dummy})};t.findOtherInnerSegmentNode=l;var u=function(b,x,S){var E=x,_=S;if(E>_){var k=E;E=_,_=k}var C=b[E];C||(b[E]=C={}),C[_]=!0};t.addConflict=u;var c=function(b,x,S){var E=x,_=S;if(E>_){var k=x;E=_,_=k}return!!b[E]};t.hasConflict=c;var f=function(b,x,S,E){var _={},k={},C={};return x==null||x.forEach(function(M){M==null||M.forEach(function(A,T){_[A]=A,k[A]=A,C[A]=T})}),x==null||x.forEach(function(M){var A=-1;M==null||M.forEach(function(T){var D=E(T);if(D.length){D=D.sort(function(O,L){return C[O]-C[L]});for(var F=(D.length-1)/2,R=Math.floor(F),B=Math.ceil(F);R<=B;++R){var N=D[R];k[T]===T&&A<C[N]&&!(0,t.hasConflict)(S,T,N)&&(k[N]=T,k[T]=_[T]=_[N],A=C[N])}}})}),{root:_,align:k}};t.verticalAlignment=f;var h=function(b,x,S,E,_){var k,C={},M=(0,t.buildBlockGraph)(b,x,S,_),A=_?"borderLeft":"borderRight",T=function(R,B){for(var N=M.nodes(),O=N.pop(),L={};O;)L[O]?R(O):(L[O]=!0,N.push(O),N=N.concat(B(O))),O=N.pop()},D=function(R){C[R]=(M.inEdges(R)||[]).reduce(function(B,N){return Math.max(B,(C[N.v]||0)+M.edge(N))},0)},F=function(R){var B=(M.outEdges(R)||[]).reduce(function(O,L){return Math.min(O,(C[L.w]||0)-M.edge(L))},Number.POSITIVE_INFINITY),N=b.node(R);B!==Number.POSITIVE_INFINITY&&N.borderType!==A&&(C[R]=Math.max(C[R],B))};return T(D,M.predecessors.bind(M)),T(F,M.successors.bind(M)),(k=Object.values(E))===null||k===void 0||k.forEach(function(R){C[R]=C[S[R]]}),C};t.horizontalCompaction=h;var d=function(b,x,S,E){var _=new a,k=b.graph(),C=(0,t.sep)(k.nodesep,k.edgesep,E);return x==null||x.forEach(function(M){var A;M==null||M.forEach(function(T){var D=S[T];if(_.setNode(D),A){var F=S[A],R=_.edgeFromArgs(F,D);_.setEdge(F,D,Math.max(C(b,T,A),R||0))}A=T})}),_};t.buildBlockGraph=d;var p=function(b,x){return(0,i.minBy)(Object.values(x),function(S){var E,_=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;return(E=Object.keys(S))===null||E===void 0||E.forEach(function(C){var M=S[C],A=(0,t.width)(b,C)/2;_=Math.max(M+A,_),k=Math.min(M-A,k)}),_-k})};t.findSmallestWidthAlignment=p;function v(b,x){var S=Object.values(x),E=(0,n.min)(S),_=(0,n.max)(S);["u","d"].forEach(function(k){["l","r"].forEach(function(C){var M=k+C,A=b[M],T;if(A!==x){var D=Object.values(A);T=C==="l"?E-(0,n.min)(D):_-(0,n.max)(D),T&&(b[M]={},Object.keys(A).forEach(function(F){b[M][F]=A[F]+T}))}})})}t.alignCoordinates=v;var g=function(b,x){var S={};return Object.keys(b.ul).forEach(function(E){if(x)S[E]=b[x.toLowerCase()][E];else{var _=Object.values(b).map(function(k){return k[E]});S[E]=(_[0]+_[1])/2}}),S};t.balance=g;var m=function(b){var x=(0,i.buildLayerMatrix)(b),S=Object.assign((0,t.findType1Conflicts)(b,x),(0,t.findType2Conflicts)(b,x)),E={},_;["u","d"].forEach(function(C){_=C==="u"?x:Object.values(x).reverse(),["l","r"].forEach(function(M){M==="r"&&(_=_.map(function(F){return Object.values(F).reverse()}));var A=(C==="u"?b.predecessors:b.successors).bind(b),T=(0,t.verticalAlignment)(b,_,S,A),D=(0,t.horizontalCompaction)(b,_,T.root,T.align,M==="r");M==="r"&&Object.keys(D).forEach(function(F){D[F]=-D[F]}),E[C+M]=D})});var k=(0,t.findSmallestWidthAlignment)(b,E);return v(E,k),(0,t.balance)(E,b.graph().align)};t.positionX=m;var y=function(b,x,S){return function(E,_,k){var C=E.node(_),M=E.node(k),A=0,T;if(A+=C.width/2,C.hasOwnProperty("labelpos"))switch((C.labelpos||"").toLowerCase()){case"l":T=-C.width/2;break;case"r":T=C.width/2;break}if(T&&(A+=S?T:-T),T=0,A+=(C.dummy?x:b)/2,A+=(M.dummy?x:b)/2,A+=M.width/2,M.labelpos)switch((M.labelpos||"").toLowerCase()){case"l":T=M.width/2;break;case"r":T=-M.width/2;break}return T&&(A+=S?T:-T),T=0,A}};t.sep=y;var w=function(b,x){return b.node(x).width||0};t.width=w})(Zce);var nH=Oe&&Oe.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(RF,"__esModule",{value:!0});var NF=As,gp=Zce,frt=function(t){var e=(0,NF.buildLayerMatrix)(t),r=t.graph().ranksep,n=0;e==null||e.forEach(function(i){var a=i.map(function(s){return t.node(s).height}),o=Math.max.apply(Math,nH(nH([],a,!1),[0],!1));i==null||i.forEach(function(s){t.node(s).y=n+o/2}),n+=o+r})},hrt=function(t){var e=(0,NF.buildLayerMatrix)(t),r=Object.assign((0,gp.findType1Conflicts)(t,e),(0,gp.findType2Conflicts)(t,e)),n={},i=[];["u","d"].forEach(function(o){i=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(function(f){return Object.values(f).reverse()}));var l=(o==="u"?t.predecessors:t.successors).bind(t),u=(0,gp.verticalAlignment)(t,i,r,l),c=(0,gp.horizontalCompaction)(t,i,u.root,u.align,s==="r");s==="r"&&Object.keys(c).forEach(function(f){return c[f]=-c[f]}),n[o+s]=c})});var a=(0,gp.findSmallestWidthAlignment)(t,n);return a&&(0,gp.alignCoordinates)(n,a),(0,gp.balance)(n,t.graph().align)},drt=function(t){var e,r=(0,NF.asNonCompoundGraph)(t);frt(r);var n=hrt(r);(e=Object.keys(n))===null||e===void 0||e.forEach(function(i){r.node(i).x=n[i]})};RF.default=drt;var FF={};Object.defineProperty(FF,"__esModule",{value:!0});var prt=function(t,e){for(var r=t.nodes().filter(function(s){var l;return!(!((l=t.children(s))===null||l===void 0)&&l.length)}),n=r.map(function(s){return t.node(s).rank}),i=Math.max.apply(Math,n),a=[],o=0;o<i+1;o++)a[o]=[];e==null||e.forEach(function(s){var l=t.node(s);!l||l!=null&&l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(s))})};FF.default=prt;var pk=Oe&&Oe.__assign||function(){return pk=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pk.apply(this,arguments)},Ac=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hF,"__esModule",{value:!0});var iH=Ac(dF),aH=Ac(yF),vrt=Ac(wF),pc=As,grt=Ac(bF),oH=Ac(xF),mrt=Ac(SF),sH=Ac(EF),yrt=Ac(_F),wrt=Ac(RF),brt=Ac(FF),xrt=jf,Srt=function(t,e){var r=e&&e.debugTiming?pc.time:pc.notime;r("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&r("  inheritOrder",function(){_rt(t,e.prevGraph)});var n=r("  buildLayoutGraph",function(){return Drt(t)});e&&e.edgeLabelSpace===!1||r("  makeSpaceForEdgeLabels",function(){Prt(n)});try{r("  runLayout",function(){Ert(n,r,e)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}throw i}r("  updateInputGraph",function(){Crt(t,n)})})},Ert=function(t,e,r){e("    removeSelfEdges",function(){Grt(t)}),e("    acyclic",function(){iH.default.run(t)}),e("    nestingGraph.run",function(){oH.default.run(t)}),e("    rank",function(){(0,vrt.default)((0,pc.asNonCompoundGraph)(t))}),e("    injectEdgeLabelProxies",function(){Lrt(t)}),e("    removeEmptyRanks",function(){(0,pc.removeEmptyRanks)(t)}),e("    nestingGraph.cleanup",function(){oH.default.cleanup(t)}),e("    normalizeRanks",function(){(0,pc.normalizeRanks)(t)}),e("    assignRankMinMax",function(){Rrt(t)}),e("    removeEdgeLabelProxies",function(){Nrt(t)}),e("    normalize.run",function(){aH.default.run(t)}),e("    parentDummyChains",function(){(0,grt.default)(t)}),e("    addBorderSegments",function(){(0,mrt.default)(t)}),r&&r.keepNodeOrder&&e("    initDataOrder",function(){(0,brt.default)(t,r.nodeOrder)}),e("    order",function(){(0,yrt.default)(t,r==null?void 0:r.keepNodeOrder)}),e("    insertSelfEdges",function(){Urt(t)}),e("    adjustCoordinateSystem",function(){sH.default.adjust(t)}),e("    position",function(){(0,wrt.default)(t)}),e("    positionSelfEdges",function(){Wrt(t)}),e("    removeBorderNodes",function(){jrt(t)}),e("    normalize.undo",function(){aH.default.undo(t)}),e("    fixupEdgeLabelCoords",function(){$rt(t)}),e("    undoCoordinateSystem",function(){sH.default.undo(t)}),e("    translateGraph",function(){Frt(t)}),e("    assignNodeIntersects",function(){Brt(t)}),e("    reversePoints",function(){zrt(t)}),e("    acyclic.undo",function(){iH.default.undo(t)})},_rt=function(t,e){t.nodes().forEach(function(r){var n=t.node(r),i=e.node(r);i!==void 0?(n.fixorder=i._order,delete i._order):delete n.fixorder})},Crt=function(t,e){t.nodes().forEach(function(r){var n,i=t.node(r);if(i){var a=e.node(r);i.x=a.x,i.y=a.y,i._order=a.order,i._rank=a.rank,!((n=e.children(r))===null||n===void 0)&&n.length&&(i.width=a.width,i.height=a.height)}}),t.edges().forEach(function(r){var n=t.edge(r),i=e.edge(r);n.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height},krt=["nodesep","edgesep","ranksep","marginx","marginy"],Mrt={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},tD=["acyclicer","ranker","rankdir","align"],Art=["width","height","layer","fixorder"],Trt={width:0,height:0},Ort=["minlen","weight","width","height","labeloffset"],Irt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rD=["labelpos"],Drt=function(t){var e=new xrt.Graph({multigraph:!0,compound:!0}),r=iD(t.graph()),n={};return tD==null||tD.forEach(function(i){r[i]!==void 0&&(n[i]=r[i])}),e.setGraph(Object.assign({},Mrt,nD(r,krt),n)),t.nodes().forEach(function(i){var a=iD(t.node(i)),o=pk(pk({},Trt),a),s=nD(o,Art);e.setNode(i,s),e.setParent(i,t.parent(i))}),t.edges().forEach(function(i){var a=iD(t.edge(i)),o={};rD==null||rD.forEach(function(s){a[s]!==void 0&&(o[s]=a[s])}),e.setEdgeObj(i,Object.assign({},Irt,nD(a,Ort),o))}),e},Prt=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach(function(r){var n=t.node(r);isNaN(n.layer)||n.layer||(n.layer=0)}),t.edges().forEach(function(r){var n,i=t.edge(r);i.minlen*=2,((n=i.labelpos)===null||n===void 0?void 0:n.toLowerCase())!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},Lrt=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i=t.node(e.w),a={e,rank:(i.rank-n.rank)/2+n.rank};(0,pc.addDummyNode)(t,"edge-proxy",a,"_ep")}})},Rrt=function(t){var e=0;t.nodes().forEach(function(r){var n,i,a=t.node(r);a.borderTop&&(a.minRank=(n=t.node(a.borderTop))===null||n===void 0?void 0:n.rank,a.maxRank=(i=t.node(a.borderBottom))===null||i===void 0?void 0:i.rank,e=Math.max(e,a.maxRank||-1/0))}),t.graph().maxRank=e},Nrt=function(t){t.nodes().forEach(function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})},Frt=function(t){var e,r=0,n,i=0,a=t.graph(),o=a.marginx||0,s=a.marginy||0,l=function(u){if(u){var c=u.x,f=u.y,h=u.width,d=u.height;!isNaN(c)&&!isNaN(h)&&(e===void 0&&(e=c-h/2),e=Math.min(e,c-h/2),r=Math.max(r,c+h/2)),!isNaN(f)&&!isNaN(d)&&(n===void 0&&(n=f-d/2),n=Math.min(n,f-d/2),i=Math.max(i,f+d/2))}};t.nodes().forEach(function(u){l(t.node(u))}),t.edges().forEach(function(u){var c=t.edge(u);c!=null&&c.hasOwnProperty("x")&&l(c)}),e-=o,n-=s,t.nodes().forEach(function(u){var c=t.node(u);c&&(c.x-=e,c.y-=n)}),t.edges().forEach(function(u){var c,f=t.edge(u);(c=f.points)===null||c===void 0||c.forEach(function(h){h.x-=e,h.y-=n}),f.hasOwnProperty("x")&&(f.x-=e),f.hasOwnProperty("y")&&(f.y-=n)}),a.width=r-e+o,a.height=i-n+s},Brt=function(t){t.edges().forEach(function(e){var r=t.edge(e),n=t.node(e.v),i=t.node(e.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=i,o=n),r.points.unshift((0,pc.intersectRect)(n,a)),r.points.push((0,pc.intersectRect)(i,o))})},$rt=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r!=null&&r.hasOwnProperty("x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})},zrt=function(t){t.edges().forEach(function(e){var r,n=t.edge(e);n.reversed&&((r=n.points)===null||r===void 0||r.reverse())})},jrt=function(t){t.nodes().forEach(function(e){var r,n,i;if(!((r=t.children(e))===null||r===void 0)&&r.length){var a=t.node(e),o=t.node(a.borderTop),s=t.node(a.borderBottom),l=t.node(a.borderLeft[((n=a.borderLeft)===null||n===void 0?void 0:n.length)-1]),u=t.node(a.borderRight[((i=a.borderRight)===null||i===void 0?void 0:i.length)-1]);a.width=Math.abs((u==null?void 0:u.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((s==null?void 0:s.y)-(o==null?void 0:o.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((o==null?void 0:o.y)||0)+a.height/2}}),t.nodes().forEach(function(e){var r;((r=t.node(e))===null||r===void 0?void 0:r.dummy)==="border"&&t.removeNode(e)})},Grt=function(t){t.edges().forEach(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdgeObj(e)}})},Urt=function(t){var e=(0,pc.buildLayerMatrix)(t);e==null||e.forEach(function(r){var n=0;r==null||r.forEach(function(i,a){var o,s=t.node(i);s.order=a+n,(o=s.selfEdges)===null||o===void 0||o.forEach(function(l){(0,pc.addDummyNode)(t,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:a+ ++n,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})},Wrt=function(t){t.nodes().forEach(function(e){var r=t.node(e);if(r.dummy==="selfedge"){var n=t.node(r.e.v),i=n.x+n.width/2,a=n.y,o=r.x-i,s=n.height/2;t.setEdgeObj(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],r.label.x=r.x,r.label.y=r.y}})},nD=function(t,e){var r={};return e==null||e.forEach(function(n){t[n]!==void 0&&(r[n]=+t[n])}),r},iD=function(t){t===void 0&&(t={});var e={};return Object.keys(t).forEach(function(r){e[r.toLowerCase()]=t[r]}),e};hF.default=Srt;var Vrt=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fF,"__esModule",{value:!0});var Hrt=Vrt(hF),lH=As;fF.default={layout:Hrt.default,util:{time:lH.time,notime:lH.notime}};var Xrt=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yrt=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dy,"__esModule",{value:!0});dy.DagreLayout=void 0;var qrt=Yrt(fF),Yo=ii(),Krt=di,uH=jf,Qrt=function(t){Xrt(e,t);function e(r){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(i){var a=n,o=a.nodes,s=o.find(function(u){return u.id===i});if(s){var l=s.layout!==!1;return l}return!0},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var r=this,n,i,a,o,s=this,l=s.nodes,u=s.nodeSize,c=s.rankdir,f=s.combos,h=s.begin,d=s.radial,p=s.comboEdges,v=p===void 0?[]:p,g=s.vedges,m=g===void 0?[]:g;if(l){var y=s.edges||[],w=new uH.Graph({multigraph:!0,compound:!0});s.nodeMap={};var b={};l.forEach(function(J){s.nodeMap[J.id]=J,J.comboId&&(b[J.comboId]=b[J.comboId]||[],b[J.comboId].push(J.id))});var x=[],S={};!((n=s.nodeOrder)===null||n===void 0)&&n.length?(s.nodeOrder.forEach(function(J){S[J]=!0,x.push(s.nodeMap[J])}),l.forEach(function(J){S[J.id]||x.push(J)})):x=l;var E;u?(0,Yo.isArray)(u)?E=function(){return u}:E=function(){return[u,u]}:E=function(J){return J.size?(0,Yo.isArray)(J.size)?J.size:(0,Yo.isObject)(J.size)?[J.size.width||40,J.size.height||40]:[J.size,J.size]:[40,40]};var _=(0,Yo.getFunc)(s.ranksep,50,s.ranksepFunc),k=(0,Yo.getFunc)(s.nodesep,50,s.nodesepFunc),C=k,M=_;(c==="LR"||c==="RL")&&(C=_,M=k),w.setDefaultEdgeLabel(function(){return{}}),w.setGraph(s);var A={};this.sortByCombo&&f&&f.forEach(function(J){if(A[J.id]=J,J.collapsed){var P=E(J),me=M(J),Ee=C(J),fe=P[0]+2*Ee,ke=P[1]+2*me;w.setNode(J.id,{width:fe,height:ke})}J.parentId&&(A[J.parentId]||w.setNode(J.parentId,{}),w.setParent(J.id,J.parentId))}),x.filter(function(J){return J.layout!==!1}).forEach(function(J){var P=E(J),me=M(J),Ee=C(J),fe=P[0]+2*Ee,ke=P[1]+2*me,Be=J.layer;(0,Yo.isNumber)(Be)?w.setNode(J.id,{width:fe,height:ke,layer:Be}):w.setNode(J.id,{width:fe,height:ke}),r.sortByCombo&&J.comboId&&(A[J.comboId]||(A[J.comboId]={id:J.comboId},w.setNode(J.comboId,{})),w.setParent(J.id,J.comboId))}),y.forEach(function(J){var P=(0,Yo.getEdgeTerminal)(J,"source"),me=(0,Yo.getEdgeTerminal)(J,"target");r.layoutNode(P)&&r.layoutNode(me)&&w.setEdge(P,me,{weight:J.weight||1})}),(i=v==null?void 0:v.concat(m||[]))===null||i===void 0||i.forEach(function(J){var P,me,Ee=J.source,fe=J.target,ke=!((P=A[Ee])===null||P===void 0)&&P.collapsed?[Ee]:b[Ee]||[Ee],Be=!((me=A[fe])===null||me===void 0)&&me.collapsed?[fe]:b[fe]||[fe];ke.forEach(function($e){Be.forEach(function(Ue){w.setEdge($e,Ue,{weight:J.weight||1})})})});var T=void 0;!((a=s.preset)===null||a===void 0)&&a.nodes&&(T=new uH.Graph({multigraph:!0,compound:!0}),s.preset.nodes.forEach(function(J){T==null||T.setNode(J.id,J)})),qrt.default.layout(w,{prevGraph:T,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});var D=[0,0];if(h){var F=1/0,R=1/0;w.nodes().forEach(function(J){var P=w.node(J);F>P.x&&(F=P.x),R>P.y&&(R=P.y)}),w.edges().forEach(function(J){var P,me=w.edge(J);(P=me.points)===null||P===void 0||P.forEach(function(Ee){F>Ee.x&&(F=Ee.x),R>Ee.y&&(R=Ee.y)})}),D[0]=h[0]-F,D[1]=h[1]-R}var B=c==="LR"||c==="RL";if(d){var N=this,O=N.focusNode,L=N.ranksep,G=N.getRadialPos,q=(0,Yo.isString)(O)?O:O==null?void 0:O.id,K=q?(o=w.node(q))===null||o===void 0?void 0:o._rank:0,V=[],le=B?"y":"x",ge=B?"height":"width",xe=1/0,Ie=-1/0;w.nodes().forEach(function(J){var P=w.node(J);if(s.nodeMap[J]){var me=k(s.nodeMap[J]);if(K===0)V[P._rank]||(V[P._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),V[P._rank].nodes.push(J),V[P._rank].totalWidth+=me*2+P[ge],V[P._rank].maxSize<Math.max(P.width,P.height)&&(V[P._rank].maxSize=Math.max(P.width,P.height));else{var Ee=P._rank-K;if(Ee===0)V[Ee]||(V[Ee]={nodes:[],totalWidth:0,maxSize:-1/0}),V[Ee].nodes.push(J),V[Ee].totalWidth+=me*2+P[ge],V[Ee].maxSize<Math.max(P.width,P.height)&&(V[Ee].maxSize=Math.max(P.width,P.height));else{var fe=Math.abs(Ee);V[fe]||(V[fe]={left:[],right:[],totalWidth:0,maxSize:-1/0}),V[fe].totalWidth+=me*2+P[ge],V[fe].maxSize<Math.max(P.width,P.height)&&(V[fe].maxSize=Math.max(P.width,P.height)),Ee<0?V[fe].left.push(J):V[fe].right.push(J)}}var ke=P[le]-P[ge]/2-me,Be=P[le]+P[ge]/2+me;ke<xe&&(xe=ke),Be>Ie&&(Ie=Be)}});var He=L||50,Ge={},ht=(Ie-xe)/.9,dt=[(xe+Ie-ht)*.5,(xe+Ie+ht)*.5],It=function(J,P,me,Ee){me===void 0&&(me=-1/0),Ee===void 0&&(Ee=[0,1]);var fe=me;return J.forEach(function(ke){var Be=w.node(ke);Ge[ke]=P;var $e=G(Be[le],dt,ht,P,Ee),Ue=$e.x,ut=$e.y;if(s.nodeMap[ke]){s.nodeMap[ke].x=Ue+D[0],s.nodeMap[ke].y=ut+D[1],s.nodeMap[ke]._order=Be._order;var Mt=_(s.nodeMap[ke]);fe<Mt&&(fe=Mt)}}),fe},_t=!0,yt=0;V.forEach(function(J){var P,me,Ee,fe,ke,Be,$e;if(!(!(!((P=J==null?void 0:J.nodes)===null||P===void 0)&&P.length)&&!(!((me=J==null?void 0:J.left)===null||me===void 0)&&me.length)&&!(!((Ee=J==null?void 0:J.right)===null||Ee===void 0)&&Ee.length))){if(_t&&J.nodes.length===1){var Ue=J.nodes[0];if(!s.nodeMap[Ue])return;s.nodeMap[Ue].x=D[0],s.nodeMap[Ue].y=D[1],Ge[J.nodes[0]]=0,He=_(s.nodeMap[Ue]),_t=!1;return}He=Math.max(He,J.totalWidth/(2*Math.PI));var ut=-1/0;if(K===0||!((fe=J.nodes)===null||fe===void 0)&&fe.length)ut=It(J.nodes,He,ut,[0,1]);else{var Mt=((ke=J.left)===null||ke===void 0?void 0:ke.length)/(((Be=J.left)===null||Be===void 0?void 0:Be.length)+(($e=J.right)===null||$e===void 0?void 0:$e.length));ut=It(J.left,He,ut,[0,Mt]),ut=It(J.right,He,ut,[Mt+.05,1])}He+=ut,_t=!1,yt-J.maxSize}}),w.edges().forEach(function(J){var P,me,Ee,fe=w.edge(J),ke=y.findIndex(function(wr){var Ar=(0,Yo.getEdgeTerminal)(wr,"source"),Zr=(0,Yo.getEdgeTerminal)(wr,"target");return Ar===J.v&&Zr===J.w});if(!(ke<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[ke].type!=="loop"){var Be=le==="x"?"y":"x",$e=(P=fe==null?void 0:fe.points)===null||P===void 0?void 0:P.slice(1,fe.points.length-1),Ue=[],ut=(me=w.node(J.v))===null||me===void 0?void 0:me[Be],Mt=ut-((Ee=w.node(J.w))===null||Ee===void 0?void 0:Ee[Be]),$t=Ge[J.v],At=$t-Ge[J.w];$e==null||$e.forEach(function(wr){var Ar=(wr[Be]-ut)/Mt*At+$t,Zr=G(wr[le],dt,ht,Ar);Ue.push({x:Zr.x+D[0],y:Zr.y+D[1]})}),y[ke].controlPoints=Ue}})}else{var Tt=new Set,kt=c==="BT"||c==="RL",mt=kt?function(J,P){return P-J}:function(J,P){return J-P};w.nodes().forEach(function(J){var P=w.node(J);if(P){var me=r.nodeMap[J];me||(me=f==null?void 0:f.find(function(Ee){return Ee.id===J})),me&&(me.x=P.x+D[0],me.y=P.y+D[1],me._order=P._order,Tt.add(B?me.x:me.y))}});var xt=Array.from(Tt).sort(mt),Nt=B?function(J,P){return J.x!==P.x}:function(J,P){return J.y!==P.y},De=B?function(J,P,me){var Ee=Math.max(P.y,me.y),fe=Math.min(P.y,me.y);return J.filter(function(ke){return ke.y<=Ee&&ke.y>=fe})}:function(J,P,me){var Ee=Math.max(P.x,me.x),fe=Math.min(P.x,me.x);return J.filter(function(ke){return ke.x<=Ee&&ke.x>=fe})};w.edges().forEach(function(J){var P,me=w.edge(J),Ee=y.findIndex(function(Be){var $e=(0,Yo.getEdgeTerminal)(Be,"source"),Ue=(0,Yo.getEdgeTerminal)(Be,"target");return $e===J.v&&Ue===J.w});if(!(Ee<=-1)&&s.edgeLabelSpace&&s.controlPoints&&y[Ee].type!=="loop"){(P=me==null?void 0:me.points)===null||P===void 0||P.forEach(function(Be){Be.x+=D[0],Be.y+=D[1]});var fe=s.nodeMap[J.v],ke=s.nodeMap[J.w];y[Ee].controlPoints=Zrt(me==null?void 0:me.points,fe,ke,xt,B,Nt,De)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:l,edges:y}}},e.prototype.getRadialPos=function(r,n,i,a,o){o===void 0&&(o=[0,1]);var s=(r-n[0])/i;s=s*(o[1]-o[0])+o[0];var l=s*2*Math.PI;return{x:Math.cos(l)*a,y:Math.sin(l)*a}},e.prototype.getType=function(){return"dagre"},e}(Krt.Base);dy.DagreLayout=Qrt;var Zrt=function(t,e,r,n,i,a,o){var s=(t==null?void 0:t.slice(1,t.length-1))||[];if(e&&r){var l=e.x,u=e.y,c=r.x,f=r.y;if(i&&(l=e.y,u=e.x,c=r.y,f=r.x),f!==u&&l!==c){var h=n.indexOf(u),d=n[h+1];if(d){var p=s[0],v=i?{x:(u+d)/2,y:(p==null?void 0:p.y)||c}:{x:(p==null?void 0:p.x)||c,y:(u+d)/2};(!p||a(p,v))&&s.unshift(v)}var g=n.indexOf(f),m=Math.abs(g-h);if(m===1)s=o(s,e,r),s.length||s.push(i?{x:(u+f)/2,y:l}:{x:l,y:(u+f)/2});else if(m>1){var y=n[g-1];if(y){var w=s[s.length-1],b=i?{x:(f+y)/2,y:(w==null?void 0:w.y)||c}:{x:(w==null?void 0:w.x)||l,y:(f+y)/2};(!w||a(w,b))&&s.push(b)}}}}return s},Hb={};const vk={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function A4(t={},e=vk){var r,n,i,a;const o=JSON.parse(JSON.stringify(e)),s=((r=t==null?void 0:t.graph)===null||r===void 0?void 0:r.meta)||{},l=((n=t==null?void 0:t.subScene)===null||n===void 0?void 0:n.meta)||{},u=((i=t==null?void 0:t.nodeSize)===null||i===void 0?void 0:i.meta)||{},c=((a=t==null?void 0:t.nodeSize)===null||a===void 0?void 0:a.node)||{},f=o.nodeSize.bridge;return{graph:{meta:Object.assign(o.graph.meta,s)},subScene:{meta:Object.assign(o.subScene.meta,l)},nodeSize:{meta:Object.assign(o.nodeSize.meta,u),node:Object.assign(o.nodeSize.node,c),bridge:f}}}function Jce(t){return`◬${t}◬`}const Wm=Jce("ROOT"),efe=Jce("BRIDGE_GRAPH");var Ao,Iv,Vm,T4;(function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"})(Ao||(Ao={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(Iv||(Iv={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(Vm||(Vm={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(T4||(T4={}));var RE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BF(t,e){return t(e={exports:{}},e.exports),e.exports}var Jrt=function(){this.__data__=[],this.size=0},vy=function(t,e){return t===e||t!=t&&e!=e},RA=function(t,e){for(var r=t.length;r--;)if(vy(t[r][0],e))return r;return-1},ent=Array.prototype.splice,tnt=function(t){var e=this.__data__,r=RA(e,t);return!(r<0)&&(r==e.length-1?e.pop():ent.call(e,r,1),--this.size,!0)},rnt=function(t){var e=this.__data__,r=RA(e,t);return r<0?void 0:e[r][1]},nnt=function(t){return RA(this.__data__,t)>-1},int=function(t,e){var r=this.__data__,n=RA(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function e0(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}e0.prototype.clear=Jrt,e0.prototype.delete=tnt,e0.prototype.get=rnt,e0.prototype.has=nnt,e0.prototype.set=int;var NA=e0,ant=function(){this.__data__=new NA,this.size=0},ont=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},snt=function(t){return this.__data__.get(t)},lnt=function(t){return this.__data__.has(t)},tfe=typeof RE=="object"&&RE&&RE.Object===Object&&RE,unt=typeof self=="object"&&self&&self.Object===Object&&self,nu=tfe||unt||Function("return this")(),ul=nu.Symbol,rfe=Object.prototype,cnt=rfe.hasOwnProperty,fnt=rfe.toString,v1=ul?ul.toStringTag:void 0,hnt=function(t){var e=cnt.call(t,v1),r=t[v1];try{t[v1]=void 0;var n=!0}catch{}var i=fnt.call(t);return n&&(e?t[v1]=r:delete t[v1]),i},dnt=Object.prototype.toString,pnt=function(t){return dnt.call(t)},cH=ul?ul.toStringTag:void 0,Xd=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":cH&&cH in Object(t)?hnt(t):pnt(t)},zo=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},fH,Xb=function(t){if(!zo(t))return!1;var e=Xd(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},aD=nu["__core-js_shared__"],hH=(fH=/[^.]+$/.exec(aD&&aD.keys&&aD.keys.IE_PROTO||""))?"Symbol(src)_1."+fH:"",vnt=function(t){return!!hH&&hH in t},gnt=Function.prototype.toString,Vv=function(t){if(t!=null){try{return gnt.call(t)}catch{}try{return t+""}catch{}}return""},mnt=/^\[object .+?Constructor\]$/,ynt=Function.prototype,wnt=Object.prototype,bnt=ynt.toString,xnt=wnt.hasOwnProperty,Snt=RegExp("^"+bnt.call(xnt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ent=function(t){return!(!zo(t)||vnt(t))&&(Xb(t)?Snt:mnt).test(Vv(t))},_nt=function(t,e){return t==null?void 0:t[e]},Hv=function(t,e){var r=_nt(t,e);return Ent(r)?r:void 0},Rw=Hv(nu,"Map"),Nw=Hv(Object,"create"),Cnt=function(){this.__data__=Nw?Nw(null):{},this.size=0},knt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Mnt=Object.prototype.hasOwnProperty,Ant=function(t){var e=this.__data__;if(Nw){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return Mnt.call(e,t)?e[t]:void 0},Tnt=Object.prototype.hasOwnProperty,Ont=function(t){var e=this.__data__;return Nw?e[t]!==void 0:Tnt.call(e,t)},Int=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Nw&&e===void 0?"__lodash_hash_undefined__":e,this};function t0(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}t0.prototype.clear=Cnt,t0.prototype.delete=knt,t0.prototype.get=Ant,t0.prototype.has=Ont,t0.prototype.set=Int;var dH=t0,Dnt=function(){this.size=0,this.__data__={hash:new dH,map:new(Rw||NA),string:new dH}},Pnt=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},FA=function(t,e){var r=t.__data__;return Pnt(e)?r[typeof e=="string"?"string":"hash"]:r.map},Lnt=function(t){var e=FA(this,t).delete(t);return this.size-=e?1:0,e},Rnt=function(t){return FA(this,t).get(t)},Nnt=function(t){return FA(this,t).has(t)},Fnt=function(t,e){var r=FA(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function r0(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}r0.prototype.clear=Dnt,r0.prototype.delete=Lnt,r0.prototype.get=Rnt,r0.prototype.has=Nnt,r0.prototype.set=Fnt;var BA=r0,Bnt=function(t,e){var r=this.__data__;if(r instanceof NA){var n=r.__data__;if(!Rw||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new BA(n)}return r.set(t,e),this.size=r.size,this};function n0(t){var e=this.__data__=new NA(t);this.size=e.size}n0.prototype.clear=ant,n0.prototype.delete=ont,n0.prototype.get=snt,n0.prototype.has=lnt,n0.prototype.set=Bnt;var V0=n0,$F=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t},gk=function(){try{var t=Hv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),$A=function(t,e,r){e=="__proto__"&&gk?gk(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},$nt=Object.prototype.hasOwnProperty,zA=function(t,e,r){var n=t[e];$nt.call(t,e)&&vy(n,r)&&(r!==void 0||e in t)||$A(t,e,r)},Yb=function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?$A(r,s,l):zA(r,s,l)}return r},znt=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},Zl=function(t){return t!=null&&typeof t=="object"},pH=function(t){return Zl(t)&&Xd(t)=="[object Arguments]"},nfe=Object.prototype,jnt=nfe.hasOwnProperty,Gnt=nfe.propertyIsEnumerable,Hm=pH(function(){return arguments}())?pH:function(t){return Zl(t)&&jnt.call(t,"callee")&&!Gnt.call(t,"callee")},hi=Array.isArray,Unt=function(){return!1},Dv=BF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?nu.Buffer:void 0,a=(i?i.isBuffer:void 0)||Unt;t.exports=a}),Wnt=/^(?:0|[1-9]\d*)$/,jA=function(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&(r=="number"||r!="symbol"&&Wnt.test(t))&&t>-1&&t%1==0&&t<e},zF=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Tn={};Tn["[object Float32Array]"]=Tn["[object Float64Array]"]=Tn["[object Int8Array]"]=Tn["[object Int16Array]"]=Tn["[object Int32Array]"]=Tn["[object Uint8Array]"]=Tn["[object Uint8ClampedArray]"]=Tn["[object Uint16Array]"]=Tn["[object Uint32Array]"]=!0,Tn["[object Arguments]"]=Tn["[object Array]"]=Tn["[object ArrayBuffer]"]=Tn["[object Boolean]"]=Tn["[object DataView]"]=Tn["[object Date]"]=Tn["[object Error]"]=Tn["[object Function]"]=Tn["[object Map]"]=Tn["[object Number]"]=Tn["[object Object]"]=Tn["[object RegExp]"]=Tn["[object Set]"]=Tn["[object String]"]=Tn["[object WeakMap]"]=!1;var Vnt=function(t){return Zl(t)&&zF(t.length)&&!!Tn[Xd(t)]},GA=function(t){return function(e){return t(e)}},Xm=BF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&tfe.process,a=function(){try{var o=n&&n.require&&n.require("util").types;return o||i&&i.binding&&i.binding("util")}catch{}}();t.exports=a}),vH=Xm&&Xm.isTypedArray,qb=vH?GA(vH):Vnt,Hnt=Object.prototype.hasOwnProperty,ife=function(t,e){var r=hi(t),n=!r&&Hm(t),i=!r&&!n&&Dv(t),a=!r&&!n&&!i&&qb(t),o=r||n||i||a,s=o?znt(t.length,String):[],l=s.length;for(var u in t)!e&&!Hnt.call(t,u)||o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jA(u,l))||s.push(u);return s},Xnt=Object.prototype,UA=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Xnt)},afe=function(t,e){return function(r){return t(e(r))}},Ynt=afe(Object.keys,Object),qnt=Object.prototype.hasOwnProperty,jF=function(t){if(!UA(t))return Ynt(t);var e=[];for(var r in Object(t))qnt.call(t,r)&&r!="constructor"&&e.push(r);return e},Uf=function(t){return t!=null&&zF(t.length)&&!Xb(t)},Yd=function(t){return Uf(t)?ife(t):jF(t)},Knt=function(t,e){return t&&Yb(e,Yd(e),t)},Qnt=function(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e},Znt=Object.prototype.hasOwnProperty,Jnt=function(t){if(!zo(t))return Qnt(t);var e=UA(t),r=[];for(var n in t)(n!="constructor"||!e&&Znt.call(t,n))&&r.push(n);return r},Xv=function(t){return Uf(t)?ife(t,!0):Jnt(t)},eit=function(t,e){return t&&Yb(e,Xv(e),t)},ofe=BF(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?nu.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(o,s){if(s)return o.slice();var l=o.length,u=a?a(l):new o.constructor(l);return o.copy(u),u}}),sfe=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},lfe=function(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a},ufe=function(){return[]},tit=Object.prototype.propertyIsEnumerable,gH=Object.getOwnPropertySymbols,GF=gH?function(t){return t==null?[]:(t=Object(t),lfe(gH(t),function(e){return tit.call(t,e)}))}:ufe,rit=function(t,e){return Yb(t,GF(t),e)},UF=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},WA=afe(Object.getPrototypeOf,Object),cfe=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)UF(e,GF(t)),t=WA(t);return e}:ufe,nit=function(t,e){return Yb(t,cfe(t),e)},ffe=function(t,e,r){var n=e(t);return hi(t)?n:UF(n,r(t))},O4=function(t){return ffe(t,Yd,GF)},iit=function(t){return ffe(t,Xv,cfe)},I4=Hv(nu,"DataView"),D4=Hv(nu,"Promise"),H0=Hv(nu,"Set"),P4=Hv(nu,"WeakMap"),ait=Vv(I4),oit=Vv(Rw),sit=Vv(D4),lit=Vv(H0),uit=Vv(P4),kp=Xd;(I4&&kp(new I4(new ArrayBuffer(1)))!="[object DataView]"||Rw&&kp(new Rw)!="[object Map]"||D4&&kp(D4.resolve())!="[object Promise]"||H0&&kp(new H0)!="[object Set]"||P4&&kp(new P4)!="[object WeakMap]")&&(kp=function(t){var e=Xd(t),r=e=="[object Object]"?t.constructor:void 0,n=r?Vv(r):"";if(n)switch(n){case ait:return"[object DataView]";case oit:return"[object Map]";case sit:return"[object Promise]";case lit:return"[object Set]";case uit:return"[object WeakMap]"}return e});var Pv=kp,cit=Object.prototype.hasOwnProperty,fit=function(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&cit.call(t,"index")&&(r.index=t.index,r.input=t.input),r},mk=nu.Uint8Array,WF=function(t){var e=new t.constructor(t.byteLength);return new mk(e).set(new mk(t)),e},hit=function(t,e){var r=e?WF(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},dit=/\w*$/,pit=function(t){var e=new t.constructor(t.source,dit.exec(t));return e.lastIndex=t.lastIndex,e},mH=ul?ul.prototype:void 0,yH=mH?mH.valueOf:void 0,vit=function(t){return yH?Object(yH.call(t)):{}},hfe=function(t,e){var r=e?WF(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},git=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return WF(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return hit(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return hfe(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return pit(t);case"[object Set]":return new n;case"[object Symbol]":return vit(t)}},wH=Object.create,dfe=function(){function t(){}return function(e){if(!zo(e))return{};if(wH)return wH(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),pfe=function(t){return typeof t.constructor!="function"||UA(t)?{}:dfe(WA(t))},mit=function(t){return Zl(t)&&Pv(t)=="[object Map]"},bH=Xm&&Xm.isMap,yit=bH?GA(bH):mit,wit=function(t){return Zl(t)&&Pv(t)=="[object Set]"},xH=Xm&&Xm.isSet,bit=xH?GA(xH):wit,Sn={};Sn["[object Arguments]"]=Sn["[object Array]"]=Sn["[object ArrayBuffer]"]=Sn["[object DataView]"]=Sn["[object Boolean]"]=Sn["[object Date]"]=Sn["[object Float32Array]"]=Sn["[object Float64Array]"]=Sn["[object Int8Array]"]=Sn["[object Int16Array]"]=Sn["[object Int32Array]"]=Sn["[object Map]"]=Sn["[object Number]"]=Sn["[object Object]"]=Sn["[object RegExp]"]=Sn["[object Set]"]=Sn["[object String]"]=Sn["[object Symbol]"]=Sn["[object Uint8Array]"]=Sn["[object Uint8ClampedArray]"]=Sn["[object Uint16Array]"]=Sn["[object Uint32Array]"]=!0,Sn["[object Error]"]=Sn["[object Function]"]=Sn["[object WeakMap]"]=!1;var vfe=function t(e,r,n,i,a,o){var s,l=1&r,u=2&r,c=4&r;if(n&&(s=a?n(e,i,a,o):n(e)),s!==void 0)return s;if(!zo(e))return e;var f=hi(e);if(f){if(s=fit(e),!l)return sfe(e,s)}else{var h=Pv(e),d=h=="[object Function]"||h=="[object GeneratorFunction]";if(Dv(e))return ofe(e,l);if(h=="[object Object]"||h=="[object Arguments]"||d&&!a){if(s=u||d?{}:pfe(e),!l)return u?nit(e,eit(s,e)):rit(e,Knt(s,e))}else{if(!Sn[h])return a?e:{};s=git(e,h,l)}}o||(o=new V0);var p=o.get(e);if(p)return p;o.set(e,s),bit(e)?e.forEach(function(g){s.add(t(g,r,n,g,e,o))}):yit(e)&&e.forEach(function(g,m){s.set(m,t(g,r,n,m,e,o))});var v=f?void 0:(c?u?iit:O4:u?Xv:Yd)(e);return $F(v||e,function(g,m){v&&(g=e[m=g]),zA(s,m,t(g,r,n,m,e,o))}),s},xit=function(t){return vfe(t,4)},VF=function(t){return function(){return t}},HF=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}(),XF=function(t,e){return t&&HF(t,e,Yd)},VA=function(t,e){return function(r,n){if(r==null)return r;if(!Uf(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}(XF),Yv=function(t){return t},gfe=function(t){return typeof t=="function"?t:Yv},mfe=function(t,e){return(hi(t)?$F:VA)(t,gfe(e))},yfe=mfe,Sit=function(t,e){var r=[];return VA(t,function(n,i,a){e(n,i,a)&&r.push(n)}),r},Eit=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},_it=function(t){return this.__data__.has(t)};function t3(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new BA;++e<r;)this.add(t[e])}t3.prototype.add=t3.prototype.push=Eit,t3.prototype.has=_it;var wfe=t3,Cit=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},bfe=function(t,e){return t.has(e)},xfe=function(t,e,r,n,i,a){var o=1&r,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=2&r?new wfe:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var g=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!Cit(e,function(m,y){if(!bfe(d,y)&&(p===m||i(p,m,r,n,a)))return d.push(y)})){h=!1;break}}else if(p!==v&&!i(p,v,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h},kit=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r},YF=function(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r},SH=ul?ul.prototype:void 0,oD=SH?SH.valueOf:void 0,Mit=function(t,e,r,n,i,a,o){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new mk(t),new mk(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vy(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=kit;case"[object Set]":var l=1&n;if(s||(s=YF),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var c=xfe(s(t),s(e),n,i,a,o);return o.delete(t),c;case"[object Symbol]":if(oD)return oD.call(t)==oD.call(e)}return!1},Ait=Object.prototype.hasOwnProperty,Tit=function(t,e,r,n,i,a){var o=1&r,s=O4(t),l=s.length;if(l!=O4(e).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in e:Ait.call(e,c)))return!1}var f=a.get(t),h=a.get(e);if(f&&h)return f==e&&h==t;var d=!0;a.set(t,e),a.set(e,t);for(var p=o;++u<l;){var v=t[c=s[u]],g=e[c];if(n)var m=o?n(g,v,c,e,t,a):n(v,g,c,t,e,a);if(!(m===void 0?v===g||i(v,g,r,n,a):m)){d=!1;break}p||(p=c=="constructor")}if(d&&!p){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w||(d=!1)}return a.delete(t),a.delete(e),d},EH=Object.prototype.hasOwnProperty,Oit=function(t,e,r,n,i,a){var o=hi(t),s=hi(e),l=o?"[object Array]":Pv(t),u=s?"[object Array]":Pv(e),c=(l=l=="[object Arguments]"?"[object Object]":l)=="[object Object]",f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",h=l==u;if(h&&Dv(t)){if(!Dv(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new V0),o||qb(t)?xfe(t,e,r,n,i,a):Mit(t,e,l,r,n,i,a);if(!(1&r)){var d=c&&EH.call(t,"__wrapped__"),p=f&&EH.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return a||(a=new V0),i(v,g,r,n,a)}}return!!h&&(a||(a=new V0),Tit(t,e,r,n,i,a))},Sfe=function t(e,r,n,i,a){return e===r||(e==null||r==null||!Zl(e)&&!Zl(r)?e!=e&&r!=r:Oit(e,r,n,i,t,a))},Iit=function(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var l=(s=r[i])[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new V0;if(n)var h=n(u,c,l,t,e,f);if(!(h===void 0?Sfe(c,u,3,n,f):h))return!1}}return!0},Efe=function(t){return t==t&&!zo(t)},Dit=function(t){for(var e=Yd(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Efe(i)]}return e},_fe=function(t,e){return function(r){return r!=null&&r[t]===e&&(e!==void 0||t in Object(r))}},Pit=function(t){var e=Dit(t);return e.length==1&&e[0][2]?_fe(e[0][0],e[0][1]):function(r){return r===t||Iit(r,t,e)}},Lv=function(t){return typeof t=="symbol"||Zl(t)&&Xd(t)=="[object Symbol]"},Lit=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rit=/^\w*$/,qF=function(t,e){if(hi(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!Lv(t))||Rit.test(t)||!Lit.test(t)||e!=null&&t in Object(e)};function KF(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(KF.Cache||BA),r}KF.Cache=BA;var Nit=KF,Fit=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bit=/\\(\\)?/g,$it=function(t){var e=Nit(t,function(n){return r.size===500&&r.clear(),n}),r=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fit,function(r,n,i,a){e.push(i?a.replace(Bit,"$1"):n||r)}),e}),X0=function(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},_H=ul?ul.prototype:void 0,CH=_H?_H.toString:void 0,zit=function t(e){if(typeof e=="string")return e;if(hi(e))return X0(e,t)+"";if(Lv(e))return CH?CH.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r},Cfe=function(t){return t==null?"":zit(t)},HA=function(t,e){return hi(t)?t:qF(t,e)?[t]:$it(Cfe(t))},Kb=function(t){if(typeof t=="string"||Lv(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},XA=function(t,e){for(var r=0,n=(e=HA(e,t)).length;t!=null&&r<n;)t=t[Kb(e[r++])];return r&&r==n?t:void 0},jit=function(t,e,r){var n=t==null?void 0:XA(t,e);return n===void 0?r:n},Git=function(t,e){return t!=null&&e in Object(t)},kfe=function(t,e,r){for(var n=-1,i=(e=HA(e,t)).length,a=!1;++n<i;){var o=Kb(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=t==null?0:t.length)&&zF(i)&&jA(o,i)&&(hi(t)||Hm(t))},Mfe=function(t,e){return t!=null&&kfe(t,e,Git)},Uit=function(t,e){return qF(t)&&Efe(e)?_fe(Kb(t),e):function(r){var n=jit(r,t);return n===void 0&&n===e?Mfe(r,t):Sfe(e,n,3)}},Afe=function(t){return function(e){return e==null?void 0:e[t]}},Wit=function(t){return function(e){return XA(e,t)}},Vit=function(t){return qF(t)?Afe(Kb(t)):Wit(t)},Wf=function(t){return typeof t=="function"?t:t==null?Yv:typeof t=="object"?hi(t)?Uit(t[0],t[1]):Pit(t):Vit(t)},Tfe=function(t,e){return(hi(t)?lfe:Sit)(t,Wf(e))},Hit=Object.prototype.hasOwnProperty,Xit=function(t,e){return t!=null&&Hit.call(t,e)},Ofe=function(t,e){return t!=null&&kfe(t,e,Xit)},Yit=Object.prototype.hasOwnProperty,qit=function(t){if(t==null)return!0;if(Uf(t)&&(hi(t)||typeof t=="string"||typeof t.splice=="function"||Dv(t)||qb(t)||Hm(t)))return!t.length;var e=Pv(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(UA(t))return!jF(t).length;for(var r in t)if(Yit.call(t,r))return!1;return!0},Ife=function(t){return t===void 0},Dfe=function(t,e){var r=-1,n=Uf(t)?Array(t.length):[];return VA(t,function(i,a,o){n[++r]=e(i,a,o)}),n},Pfe=function(t,e){return(hi(t)?X0:Dfe)(t,Wf(e))},Kit=function(t,e,r,n){var i=-1,a=t==null?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r},Qit=function(t,e,r,n,i){return i(t,function(a,o,s){r=n?(n=!1,a):e(r,a,o,s)}),r},Lfe=function(t,e,r){var n=hi(t)?Kit:Qit,i=arguments.length<3;return n(t,Wf(e),r,i,VA)},Zit=function(t){return typeof t=="string"||!hi(t)&&Zl(t)&&Xd(t)=="[object String]"},Jit=Afe("length"),eat=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),tat=function(t){return eat.test(t)},rat="[\\ud800-\\udfff]",L4="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",R4="\\ud83c[\\udffb-\\udfff]",Rfe="[^\\ud800-\\udfff]",Nfe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ffe="[\\ud800-\\udbff][\\udc00-\\udfff]",kH="(?:"+L4+"|"+R4+")?",nat="[\\ufe0e\\ufe0f]?"+kH+("(?:\\u200d(?:"+[Rfe,Nfe,Ffe].join("|")+")[\\ufe0e\\ufe0f]?"+kH+")*"),iat="(?:"+[Rfe+L4+"?",L4,Nfe,Ffe,rat].join("|")+")",MH=RegExp(R4+"(?="+R4+")|"+iat+nat,"g"),aat=function(t){for(var e=MH.lastIndex=0;MH.test(t);)++e;return e},oat=function(t){return tat(t)?aat(t):Jit(t)},sat=function(t){if(t==null)return 0;if(Uf(t))return Zit(t)?oat(t):t.length;var e=Pv(t);return e=="[object Map]"||e=="[object Set]"?t.size:jF(t).length},lat=function(t,e,r){var n=hi(t),i=n||Dv(t)||qb(t);if(e=Wf(e),r==null){var a=t&&t.constructor;r=i?n?new a:[]:zo(t)&&Xb(a)?dfe(WA(t)):{}}return(i?$F:XF)(t,function(o,s,l){return e(r,o,s,l)}),r},AH=ul?ul.isConcatSpreadable:void 0,uat=function(t){return hi(t)||Hm(t)||!!(AH&&t&&t[AH])},QF=function t(e,r,n,i,a){var o=-1,s=e.length;for(n||(n=uat),a||(a=[]);++o<s;){var l=e[o];r>0&&n(l)?r>1?t(l,r-1,n,i,a):UF(a,l):i||(a[a.length]=l)}return a},cat=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},TH=Math.max,Bfe=function(t,e,r){return e=TH(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=TH(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),cat(t,this,s)}},fat=gk?function(t,e){return gk(t,"toString",{configurable:!0,enumerable:!1,value:VF(e),writable:!0})}:Yv,hat=Date.now,$fe=function(t){var e=0,r=0;return function(){var n=hat(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(fat),YA=function(t,e){return $fe(Bfe(t,e,Yv),t+"")},zfe=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1},dat=function(t){return t!=t},pat=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1},vat=function(t,e,r){return e==e?pat(t,e,r):zfe(t,dat,r)},gat=function(t,e){return!!(t!=null&&t.length)&&vat(t,e,0)>-1},mat=function(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1},yat=function(){},wat=H0&&1/YF(new H0([,-0]))[1]==1/0?function(t){return new H0(t)}:yat,bat=function(t,e,r){var n=-1,i=gat,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=mat;else if(a>=200){var u=e?null:wat(t);if(u)return YF(u);o=!1,i=bfe,l=new wfe}else l=e?[]:s;e:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s},jfe=function(t){return Zl(t)&&Uf(t)},xat=YA(function(t){return bat(QF(t,1,jfe,!0))}),Sat=function(t,e){return X0(e,function(r){return t[r]})},yk,Gfe=function(t){return t==null?[]:Sat(t,Yd(t))};try{yk={clone:xit,constant:VF,each:yfe,filter:Tfe,has:Ofe,isArray:hi,isEmpty:qit,isFunction:Xb,isUndefined:Ife,keys:Yd,map:Pfe,reduce:Lfe,size:sat,transform:lat,union:xat,values:Gfe}}catch{}yk||(yk=window._);var Rt=yk,ZF=Vr;function Vr(t){this._isDirected=!Rt.has(t,"directed")||t.directed,this._isMultigraph=!!Rt.has(t,"multigraph")&&t.multigraph,this._isCompound=!!Rt.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=Rt.constant(void 0),this._defaultEdgeLabelFn=Rt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function OH(t,e){t[e]?t[e]++:t[e]=1}function IH(t,e){--t[e]||delete t[e]}function K1(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var o=i;i=a,a=o}return i+""+a+""+(Rt.isUndefined(n)?"\0":n)}function Eat(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function sD(t,e){return K1(t,e.v,e.w,e.name)}Vr.prototype._nodeCount=0,Vr.prototype._edgeCount=0,Vr.prototype.isDirected=function(){return this._isDirected},Vr.prototype.isMultigraph=function(){return this._isMultigraph},Vr.prototype.isCompound=function(){return this._isCompound},Vr.prototype.setGraph=function(t){return this._label=t,this},Vr.prototype.graph=function(){return this._label},Vr.prototype.setDefaultNodeLabel=function(t){return Rt.isFunction(t)||(t=Rt.constant(t)),this._defaultNodeLabelFn=t,this},Vr.prototype.nodeCount=function(){return this._nodeCount},Vr.prototype.nodes=function(){return Rt.keys(this._nodes)},Vr.prototype.sources=function(){var t=this;return Rt.filter(this.nodes(),function(e){return Rt.isEmpty(t._in[e])})},Vr.prototype.sinks=function(){var t=this;return Rt.filter(this.nodes(),function(e){return Rt.isEmpty(t._out[e])})},Vr.prototype.setNodes=function(t,e){var r=arguments,n=this;return Rt.each(t,function(i){r.length>1?n.setNode(i,e):n.setNode(i)}),this},Vr.prototype.setNode=function(t,e){return Rt.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},Vr.prototype.node=function(t){return this._nodes[t]},Vr.prototype.hasNode=function(t){return Rt.has(this._nodes,t)},Vr.prototype.removeNode=function(t){var e=this;if(Rt.has(this._nodes,t)){var r=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],Rt.each(this.children(t),function(n){e.setParent(n)}),delete this._children[t]),Rt.each(Rt.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],Rt.each(Rt.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},Vr.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Rt.isUndefined(e))e="\0";else{for(var r=e+="";!Rt.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},Vr.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},Vr.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!=="\0")return e}},Vr.prototype.children=function(t){if(Rt.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return Rt.keys(e)}else{if(t==="\0")return this.nodes();if(this.hasNode(t))return[]}},Vr.prototype.predecessors=function(t){var e=this._preds[t];if(e)return Rt.keys(e)},Vr.prototype.successors=function(t){var e=this._sucs[t];if(e)return Rt.keys(e)},Vr.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return Rt.union(e,this.successors(t))},Vr.prototype.isLeaf=function(t){return(this.isDirected()?this.successors(t):this.neighbors(t)).length===0},Vr.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;Rt.each(this._nodes,function(a,o){t(o)&&e.setNode(o,a)}),Rt.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,r.edge(a))});var n={};function i(a){var o=r.parent(a);return o===void 0||e.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&Rt.each(e.nodes(),function(a){e.setParent(a,i(a))}),e},Vr.prototype.setDefaultEdgeLabel=function(t){return Rt.isFunction(t)||(t=Rt.constant(t)),this._defaultEdgeLabelFn=t,this},Vr.prototype.edgeCount=function(){return this._edgeCount},Vr.prototype.edges=function(){return Rt.values(this._edgeObjs)},Vr.prototype.setPath=function(t,e){var r=this,n=arguments;return Rt.reduce(t,function(i,a){return n.length>1?r.setEdge(i,a,e):r.setEdge(i,a),a}),this},Vr.prototype.setEdge=function(){var t,e,r,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,e=a.w,r=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(t=a,e=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),t=""+t,e=""+e,Rt.isUndefined(r)||(r=""+r);var o=K1(this._isDirected,t,e,r);if(Rt.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!Rt.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(t,e,r);var s=Eat(this._isDirected,t,e,r);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,OH(this._preds[e],t),OH(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this},Vr.prototype.edge=function(t,e,r){var n=arguments.length===1?sD(this._isDirected,arguments[0]):K1(this._isDirected,t,e,r);return this._edgeLabels[n]},Vr.prototype.hasEdge=function(t,e,r){var n=arguments.length===1?sD(this._isDirected,arguments[0]):K1(this._isDirected,t,e,r);return Rt.has(this._edgeLabels,n)},Vr.prototype.removeEdge=function(t,e,r){var n=arguments.length===1?sD(this._isDirected,arguments[0]):K1(this._isDirected,t,e,r),i=this._edgeObjs[n];return i&&(t=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],IH(this._preds[e],t),IH(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},Vr.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=Rt.values(r);return e?Rt.filter(n,function(i){return i.v===e}):n}},Vr.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=Rt.values(r);return e?Rt.filter(n,function(i){return i.w===e}):n}},Vr.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};var DH={Graph:ZF,version:"2.1.8"},_at={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Cat(t),edges:kat(t)};return Rt.isUndefined(t.graph())||(e.value=Rt.clone(t.graph())),e},read:function(t){var e=new ZF(t.options).setGraph(t.value);return Rt.each(t.nodes,function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),Rt.each(t.edges,function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}};function Cat(t){return Rt.map(t.nodes(),function(e){var r=t.node(e),n=t.parent(e),i={v:e};return Rt.isUndefined(r)||(i.value=r),Rt.isUndefined(n)||(i.parent=n),i})}function kat(t){return Rt.map(t.edges(),function(e){var r=t.edge(e),n={v:e.v,w:e.w};return Rt.isUndefined(e.name)||(n.name=e.name),Rt.isUndefined(r)||(n.value=r),n})}var Mat=function(t){var e,r={},n=[];function i(a){Rt.has(r,a)||(r[a]=!0,e.push(a),Rt.each(t.successors(a),i),Rt.each(t.predecessors(a),i))}return Rt.each(t.nodes(),function(a){e=[],i(a),e.length&&n.push(e)}),n},Ufe=$s;function $s(){this._arr=[],this._keyIndices={}}$s.prototype.size=function(){return this._arr.length},$s.prototype.keys=function(){return this._arr.map(function(t){return t.key})},$s.prototype.has=function(t){return Rt.has(this._keyIndices,t)},$s.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority},$s.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},$s.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!Rt.has(r,t)){var n=this._arr,i=n.length;return r[t]=i,n.push({key:t,priority:e}),this._decrease(i),!0}return!1},$s.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},$s.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},$s.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,i=t;r<e.length&&(i=e[r].priority<e[i].priority?r:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==t&&(this._swap(t,i),this._heapify(i)))},$s.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;t!==0&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},$s.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,i=r[t],a=r[e];r[t]=a,r[e]=i,n[a.key]=t,n[i.key]=e};var Wfe=function(t,e,r,n){return function(i,a,o,s){var l,u,c={},f=new Ufe,h=function(d){var p=d.v!==l?d.v:d.w,v=c[p],g=o(d),m=u.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+g);m<v.distance&&(v.distance=m,v.predecessor=l,f.decrease(p,m))};for(i.nodes().forEach(function(d){var p=d===a?0:Number.POSITIVE_INFINITY;c[d]={distance:p},f.add(d,p)});f.size()>0&&(l=f.removeMin(),(u=c[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(h);return c}(t,String(e),r||Aat,n||function(i){return t.outEdges(i)})},Aat=Rt.constant(1),Tat=function(t,e,r){return Rt.transform(t.nodes(),function(n,i){n[i]=Wfe(t,i,e,r)},{})},Vfe=function(t){var e=0,r=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:e,index:e++};if(r.push(o),t.successors(o).forEach(function(c){Rt.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var l,u=[];do l=r.pop(),n[l].onStack=!1,u.push(l);while(o!==l);i.push(u)}}return t.nodes().forEach(function(o){Rt.has(n,o)||a(o)}),i},Oat=function(t){return Rt.filter(Vfe(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})},Iat=function(t,e,r){return function(n,i,a){var o={},s=n.nodes();return s.forEach(function(l){o[l]={},o[l][l]={distance:0},s.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var c=u.v===l?u.w:u.v,f=i(u);o[l][c]={distance:f,predecessor:l}})}),s.forEach(function(l){var u=o[l];s.forEach(function(c){var f=o[c];s.forEach(function(h){var d=f[l],p=u[h],v=f[h],g=d.distance+p.distance;g<v.distance&&(v.distance=g,v.predecessor=p.predecessor)})})}),o}(t,e||Dat,r||function(n){return t.outEdges(n)})},Dat=Rt.constant(1),lD=Hfe;function Hfe(t){var e={},r={},n=[];if(Rt.each(t.sinks(),function i(a){if(Rt.has(r,a))throw new wk;Rt.has(e,a)||(r[a]=!0,e[a]=!0,Rt.each(t.predecessors(a),i),delete r[a],n.push(a))}),Rt.size(e)!==t.nodeCount())throw new wk;return n}function wk(){}Hfe.CycleException=wk,wk.prototype=new Error;var PH=function(t,e,r){Rt.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return Rt.each(e,function(o){if(!t.hasNode(o))throw new Error("Graph does not have node: "+o);Xfe(t,o,r==="post",a,n,i)}),i};function Xfe(t,e,r,n,i,a){Rt.has(n,e)||(n[e]=!0,r||a.push(e),Rt.each(i(e),function(o){Xfe(t,o,r,n,i,a)}),r&&a.push(e))}var bk,Pat={Graph:DH.Graph,json:_at,alg:{components:Mat,dijkstra:Wfe,dijkstraAll:Tat,findCycles:Oat,floydWarshall:Iat,isAcyclic:function(t){try{lD(t)}catch(e){if(e instanceof lD.CycleException)return!1;throw e}return!0},postorder:function(t,e){return PH(t,e,"post")},preorder:function(t,e){return PH(t,e,"pre")},prim:function(t,e){var r,n=new ZF,i={},a=new Ufe;function o(l){var u=l.v===r?l.w:l.v,c=a.priority(u);if(c!==void 0){var f=e(l);f<c&&(i[u]=r,a.decrease(u,f))}}if(t.nodeCount()===0)return n;Rt.each(t.nodes(),function(l){a.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),a.decrease(t.nodes()[0],0);for(var s=!1;a.size()>0;){if(r=a.removeMin(),Rt.has(i,r))n.setEdge(r,i[r]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(r).forEach(o)}return n},tarjan:Vfe,topsort:lD},version:DH.version};try{bk=Pat}catch{}bk||(bk=window.graphlib);var iu=bk,Lat=function(t){return vfe(t,5)},Fw=function(t,e,r){if(!zo(r))return!1;var n=typeof e;return!!(n=="number"?Uf(r)&&jA(e,r.length):n=="string"&&e in r)&&vy(r[e],t)},Yfe=Object.prototype,Rat=Yfe.hasOwnProperty,Nat=YA(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Fw(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=Xv(a),s=-1,l=o.length;++s<l;){var u=o[s],c=t[u];(c===void 0||vy(c,Yfe[u])&&!Rat.call(t,u))&&(t[u]=a[u])}return t}),Fat=function(t){return function(e,r,n){var i=Object(e);if(!Uf(e)){var a=Wf(r);e=Yd(e),r=function(s){return a(i[s],s,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}},Bat=/^\s+|\s+$/g,$at=/^[-+]0x[0-9a-f]+$/i,zat=/^0b[01]+$/i,jat=/^0o[0-7]+$/i,Gat=parseInt,Uat=function(t){if(typeof t=="number")return t;if(Lv(t))return NaN;if(zo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=zo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Bat,"");var r=zat.test(t);return r||jat.test(t)?Gat(t.slice(2),r?2:8):$at.test(t)?NaN:+t},r3=function(t){return t?(t=Uat(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:t===0?t:0},Wat=function(t){var e=r3(t),r=e%1;return e==e?r?e-r:e:0},Vat=Math.max,Hat=Fat(function(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Wat(r);return i<0&&(i=Vat(n+i,0)),zfe(t,Wf(e),i)}),qfe=function(t){return t!=null&&t.length?QF(t,1):[]},Xat=function(t,e){return t==null?t:HF(t,gfe(e),Xv)},Yat=function(t){var e=t==null?0:t.length;return e?t[e-1]:void 0},qat=function(t,e){var r={};return e=Wf(e),XF(t,function(n,i,a){$A(r,i,e(n,i,a))}),r},JF=function(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(o!=null&&(s===void 0?o==o&&!Lv(o):r(o,s)))var s=o,l=a}return l},Kat=function(t,e){return t>e},Qat=function(t){return t&&t.length?JF(t,Yv,Kat):void 0},N4=function(t,e,r){(r!==void 0&&!vy(t[e],r)||r===void 0&&!(e in t))&&$A(t,e,r)},Zat=Function.prototype,Jat=Object.prototype,Kfe=Zat.toString,eot=Jat.hasOwnProperty,tot=Kfe.call(Object),rot=function(t){if(!Zl(t)||Xd(t)!="[object Object]")return!1;var e=WA(t);if(e===null)return!0;var r=eot.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Kfe.call(r)==tot},F4=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]},not=function(t){return Yb(t,Xv(t))},iot=function(t,e,r,n,i,a,o){var s=F4(t,r),l=F4(e,r),u=o.get(l);if(u)N4(t,r,u);else{var c=a?a(s,l,r+"",t,e,o):void 0,f=c===void 0;if(f){var h=hi(l),d=!h&&Dv(l),p=!h&&!d&&qb(l);c=l,h||d||p?hi(s)?c=s:jfe(s)?c=sfe(s):d?(f=!1,c=ofe(l,!0)):p?(f=!1,c=hfe(l,!0)):c=[]:rot(l)||Hm(l)?(c=s,Hm(s)?c=not(s):zo(s)&&!Xb(s)||(c=pfe(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),N4(t,r,c)}},aot=function t(e,r,n,i,a){e!==r&&HF(r,function(o,s){if(a||(a=new V0),zo(o))iot(e,r,s,n,t,i,a);else{var l=i?i(F4(e,s),o,s+"",e,r,a):void 0;l===void 0&&(l=o),N4(e,s,l)}},Xv)},oot=function(t){return YA(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&Fw(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}(function(t,e,r){aot(t,e,r)}),Qfe=function(t,e){return t<e},sot=function(t){return t&&t.length?JF(t,Yv,Qfe):void 0},lot=function(t,e){return t&&t.length?JF(t,Wf(e),Qfe):void 0},uot=function(){return nu.Date.now()},cot=function(t,e,r,n){if(!zo(t))return t;for(var i=-1,a=(e=HA(e,t)).length,o=a-1,s=t;s!=null&&++i<a;){var l=Kb(e[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var c=s[l];(u=n?n(c,l,s):void 0)===void 0&&(u=zo(c)?c:jA(e[i+1])?[]:{})}zA(s,l,u),s=s[l]}return t},fot=function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=XA(t,o);r(s,o)&&cot(a,HA(o,t),s)}return a},hot=function(t,e){return fot(t,e,function(r,n){return Mfe(t,n)})},dot=function(t){return $fe(Bfe(t,void 0,qfe),t+"")}(function(t,e){return t==null?{}:hot(t,e)}),pot=Math.ceil,vot=Math.max,got=function(t,e,r,n){for(var i=-1,a=vot(pot((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=r;return o},mot=function(t){return function(e,r,n){return n&&typeof n!="number"&&Fw(e,r,n)&&(r=n=void 0),e=r3(e),r===void 0?(r=e,e=0):r=r3(r),n=n===void 0?e<r?1:-1:r3(n),got(e,r,n,t)}}(),yot=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t},wot=function(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t==t,a=Lv(t),o=e!==void 0,s=e===null,l=e==e,u=Lv(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&t<e||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0},bot=function(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var l=wot(i[n],a[n]);if(l)return n>=s?l:l*(r[n]=="desc"?-1:1)}return t.index-e.index},xot=function(t,e,r){e=e.length?X0(e,function(a){return hi(a)?function(o){return XA(o,a.length===1?a[0]:a)}:a}):[Yv];var n=-1;e=X0(e,GA(Wf));var i=Dfe(t,function(a,o,s){return{criteria:X0(e,function(l){return l(a)}),index:++n,value:a}});return yot(i,function(a,o){return bot(a,o,r)})},Sot=YA(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Fw(t,e[0],e[1])?e=[]:r>2&&Fw(e[0],e[1],e[2])&&(e=[e[0]]),xot(t,QF(e,1),[])}),Eot=0,_ot=function(t){var e=++Eot;return Cfe(t)+e},Cot=function(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;r(o,t[n],s)}return o},xk,kot=function(t,e){return Cot(t||[],e||[],zA)};try{xk={cloneDeep:Lat,constant:VF,defaults:Nat,each:yfe,filter:Tfe,find:Hat,flatten:qfe,forEach:mfe,forIn:Xat,has:Ofe,isUndefined:Ife,last:Yat,map:Pfe,mapValues:qat,max:Qat,merge:oot,min:sot,minBy:lot,now:uot,pick:dot,range:mot,reduce:Lfe,sortBy:Sot,uniqueId:_ot,values:Gfe,zipObject:kot}}catch{}xk||(xk=window._);var ne=xk,Mot=n3;function n3(){var t={};t._next=t._prev=t,this._sentinel=t}function LH(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Aot(t,e){if(t!=="_next"&&t!=="_prev")return e}n3.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return LH(e),e},n3.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&LH(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n3.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,Aot)),r=r._prev;return"["+t.join(", ")+"]"};var Tot=iu.Graph,Oot=function(t,e){if(t.nodeCount()<=1)return[];var r=function(i,a){var o=new Tot,s=0,l=0;ne.forEach(i.nodes(),function(f){o.setNode(f,{v:f,in:0,out:0})}),ne.forEach(i.edges(),function(f){var h=o.edge(f.v,f.w)||0,d=a(f),p=h+d;o.setEdge(f.v,f.w,p),l=Math.max(l,o.node(f.v).out+=d),s=Math.max(s,o.node(f.w).in+=d)});var u=ne.range(l+s+3).map(function(){return new Mot}),c=s+1;return ne.forEach(o.nodes(),function(f){B4(u,c,o.node(f))}),{graph:o,buckets:u,zeroIdx:c}}(t,e||Iot),n=function(i,a,o){for(var s,l=[],u=a[a.length-1],c=a[0];i.nodeCount();){for(;s=c.dequeue();)uD(i,a,o,s);for(;s=u.dequeue();)uD(i,a,o,s);if(i.nodeCount()){for(var f=a.length-2;f>0;--f)if(s=a[f].dequeue()){l=l.concat(uD(i,a,o,s,!0));break}}}return l}(r.graph,r.buckets,r.zeroIdx);return ne.flatten(ne.map(n,function(i){return t.outEdges(i.v,i.w)}),!0)},Iot=ne.constant(1);function uD(t,e,r,n,i){var a=i?[]:void 0;return ne.forEach(t.inEdges(n.v),function(o){var s=t.edge(o),l=t.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,B4(e,r,l)}),ne.forEach(t.outEdges(n.v),function(o){var s=t.edge(o),l=o.w,u=t.node(l);u.in-=s,B4(e,r,u)}),t.removeNode(n.v),a}function B4(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var RH={run:function(t){var e=t.graph().acyclicer==="greedy"?Oot(t,function(r){return function(n){return r.edge(n).weight}}(t)):function(r){var n=[],i={},a={};function o(s){ne.has(a,s)||(a[s]=!0,i[s]=!0,ne.forEach(r.outEdges(s),function(l){ne.has(i,l.w)?n.push(l):o(l.w)}),delete i[s])}return ne.forEach(r.nodes(),o),n}(t);ne.forEach(e,function(r){var n=t.edge(r);t.removeEdge(r),n.forwardName=r.name,n.reversed=!0,t.setEdge(r.w,r.v,n,ne.uniqueId("rev"))})},undo:function(t){ne.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}},NH=iu.Graph,la={addDummyNode:FH,simplify:function(t){var e=new NH().setGraph(t.graph());return ne.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),ne.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},i=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new NH({multigraph:t.isMultigraph()}).setGraph(t.graph());return ne.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),ne.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e},successorWeights:function(t){var e=ne.map(t.nodes(),function(r){var n={};return ne.forEach(t.outEdges(r),function(i){n[i.w]=(n[i.w]||0)+t.edge(i).weight}),n});return ne.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=ne.map(t.nodes(),function(r){var n={};return ne.forEach(t.inEdges(r),function(i){n[i.v]=(n[i.v]||0)+t.edge(i).weight}),n});return ne.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,i=t.x,a=t.y,o=e.x-i,s=e.y-a,l=t.width/2,u=t.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(o)*u?(s<0&&(u=-u),r=u*o/s,n=u):(o<0&&(l=-l),r=l,n=l*s/o),{x:i+r,y:a+n}},buildLayerMatrix:function(t){var e=ne.map(ne.range(BH(t)+1),function(){return[]});return ne.forEach(t.nodes(),function(r){var n=t.node(r),i=n.rank;ne.isUndefined(i)||(e[i][n.order]=r)}),e},normalizeRanks:function(t){var e=ne.min(ne.map(t.nodes(),function(r){return t.node(r).rank}));ne.forEach(t.nodes(),function(r){var n=t.node(r);ne.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(t){var e=ne.min(ne.map(t.nodes(),function(a){return t.node(a).rank})),r=[];ne.forEach(t.nodes(),function(a){var o=t.node(a).rank-e;r[o]||(r[o]=[]),r[o].push(a)});var n=0,i=t.graph().nodeRankFactor;ne.forEach(r,function(a,o){ne.isUndefined(a)&&o%i!=0?--n:n&&ne.forEach(a,function(s){t.node(s).rank+=n})})},addBorderNode:function(t,e,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),FH(t,"border",i,e)},maxRank:BH,partition:function(t,e){var r={lhs:[],rhs:[]};return ne.forEach(t,function(n){e(n)?r.lhs.push(n):r.rhs.push(n)}),r},time:function(t,e){var r=ne.now();try{return e()}finally{console.log(t+" time: "+(ne.now()-r)+"ms")}},notime:function(t,e){return e()}};function FH(t,e,r,n){var i;do i=ne.uniqueId(n);while(t.hasNode(i));return r.dummy=e,t.setNode(i,r),i}function BH(t){return ne.max(ne.map(t.nodes(),function(e){var r=t.node(e).rank;if(!ne.isUndefined(r))return r}))}var $H={run:function(t){t.graph().dummyChains=[],ne.forEach(t.edges(),function(e){(function(r,n){var i,a,o,s=n.v,l=r.node(s).rank,u=n.w,c=r.node(u).rank,f=n.name,h=r.edge(n),d=h.labelRank;if(c!==l+1){for(r.removeEdge(n),o=0,++l;l<c;++o,++l)h.points=[],a={width:0,height:0,edgeLabel:h,edgeObj:n,rank:l},i=la.addDummyNode(r,"edge",a,"_d"),l===d&&(a.width=h.width,a.height=h.height,a.dummy="edge-label",a.labelpos=h.labelpos),r.setEdge(s,i,{weight:h.weight},f),o===0&&r.graph().dummyChains.push(i),s=i;r.setEdge(s,u,{weight:h.weight},f)}})(t,e)})},undo:function(t){ne.forEach(t.graph().dummyChains,function(e){var r,n=t.node(e),i=n.edgeLabel;for(t.setEdge(n.edgeObj,i);n.dummy;)r=t.successors(e)[0],t.removeNode(e),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=r,n=t.node(e)})}},Zfe=function(t){var e={};ne.forEach(t.sources(),function r(n){var i=t.node(n);if(ne.has(e,n))return i.rank;e[n]=!0;var a=ne.min(ne.map(t.outEdges(n),function(o){return r(o.w)-t.edge(o).minlen}));return a!==Number.POSITIVE_INFINITY&&a!=null||(a=0),i.rank=a})},Jfe=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},Dot=iu.Graph,Sk=Jfe,ehe=function(t){var e,r,n=new Dot({directed:!1}),i=t.nodes()[0],a=t.nodeCount();for(n.setNode(i,{});Pot(n,t)<a;)e=Lot(n,t),r=n.hasNode(e.v)?Sk(t,e):-Sk(t,e),Rot(n,t,r);return n};function Pot(t,e){return ne.forEach(t.nodes(),function r(n){ne.forEach(e.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;t.hasNode(o)||Sk(e,i)||(t.setNode(o,{}),t.setEdge(n,o,{}),r(o))})}),t.nodeCount()}function Lot(t,e){return ne.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return Sk(e,r)})}function Rot(t,e,r){ne.forEach(t.nodes(),function(n){e.node(n).rank+=r})}var Not=Jfe,Fot=Zfe,Bot=iu.alg.preorder,$ot=iu.alg.postorder,zot=la.simplify,jot=Mp;function Mp(t){t=zot(t),Fot(t);var e,r=ehe(t);for(tB(r),eB(r,t);e=nhe(r);)ahe(r,t,e,ihe(r,t,e))}function eB(t,e){var r=$ot(t,t.nodes());r=r.slice(0,r.length-1),ne.forEach(r,function(n){(function(i,a,o){var s=i.node(o).parent;i.edge(o,s).cutvalue=the(i,a,o)})(t,e,n)})}function the(t,e,r){var n=t.node(r).parent,i=!0,a=e.edge(r,n),o=0;return a||(i=!1,a=e.edge(n,r)),o=a.weight,ne.forEach(e.nodeEdges(r),function(s){var l,u,c=s.v===r,f=c?s.w:s.v;if(f!==n){var h=c===i,d=e.edge(s).weight;if(o+=h?d:-d,l=r,u=f,t.hasEdge(l,u)){var p=t.edge(r,f).cutvalue;o+=h?-p:p}}}),o}function tB(t,e){arguments.length<2&&(e=t.nodes()[0]),rhe(t,{},1,e)}function rhe(t,e,r,n,i){var a=r,o=t.node(n);return e[n]=!0,ne.forEach(t.neighbors(n),function(s){ne.has(e,s)||(r=rhe(t,e,r,s,n))}),o.low=a,o.lim=r++,i?o.parent=i:delete o.parent,r}function nhe(t){return ne.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function ihe(t,e,r){var n=r.v,i=r.w;e.hasEdge(n,i)||(n=r.w,i=r.v);var a=t.node(n),o=t.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=ne.filter(e.edges(),function(c){return l===zH(t,t.node(c.v),s)&&l!==zH(t,t.node(c.w),s)});return ne.minBy(u,function(c){return Not(e,c)})}function ahe(t,e,r,n){var i=r.v,a=r.w;t.removeEdge(i,a),t.setEdge(n.v,n.w,{}),tB(t),eB(t,e),function(o,s){var l=ne.find(o.nodes(),function(c){return!s.node(c).parent}),u=Bot(o,l);u=u.slice(1),ne.forEach(u,function(c){var f=o.node(c).parent,h=s.edge(c,f),d=!1;h||(h=s.edge(f,c),d=!0),s.node(c).rank=s.node(f).rank+(d?h.minlen:-h.minlen)})}(t,e)}function zH(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}Mp.initLowLimValues=tB,Mp.initCutValues=eB,Mp.calcCutValue=the,Mp.leaveEdge=nhe,Mp.enterEdge=ihe,Mp.exchangeEdges=ahe;var ohe=Zfe,Got=function(t){switch(t.graph().ranker){case"network-simplex":jH(t);break;case"tight-tree":(function(e){ohe(e),ehe(e)})(t);break;case"longest-path":Uot(t);break;default:jH(t)}},Uot=ohe;function jH(t){jot(t)}var Wot=function(t){var e=function(r){var n={},i=0;function a(o){var s=i;ne.forEach(r.children(o),a),n[o]={low:s,lim:i++}}return ne.forEach(r.children(),a),n}(t);ne.forEach(t.graph().dummyChains,function(r){for(var n=t.node(r),i=n.edgeObj,a=function(f,h,d,p){var v,g,m=[],y=[],w=Math.min(h[d].low,h[p].low),b=Math.max(h[d].lim,h[p].lim);v=d;do v=f.parent(v),m.push(v);while(v&&(h[v].low>w||b>h[v].lim));for(g=v,v=p;(v=f.parent(v))!==g;)y.push(v);return{path:m.concat(y.reverse()),lca:g}}(t,e,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],c=!0;r!==i.w;){if(n=t.node(r),c){for(;(u=o[l])!==s&&t.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&t.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}t.setParent(r,u),r=t.successors(r)[0]}})},GH={run:function(t){var e=la.addDummyNode(t,"root",{},"_root"),r=function(o){var s={};function l(u,c){var f=o.children(u);f&&f.length&&ne.forEach(f,function(h){l(h,c+1)}),s[u]=c}return ne.forEach(o.children(),function(u){l(u,1)}),s}(t),n=ne.max(ne.values(r))-1,i=2*n+1;t.graph().nestingRoot=e,ne.forEach(t.edges(),function(o){t.edge(o).minlen*=i});var a=function(o){return ne.reduce(o.edges(),function(s,l){return s+o.edge(l).weight},0)}(t)+1;ne.forEach(t.children(),function(o){she(t,e,i,a,n,r,o)}),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,ne.forEach(t.edges(),function(r){t.edge(r).nestingEdge&&t.removeEdge(r)})}};function she(t,e,r,n,i,a,o){var s=t.children(o);if(s.length){var l=la.addBorderNode(t,"_bt"),u=la.addBorderNode(t,"_bb"),c=t.node(o);t.setParent(l,o),c.borderTop=l,t.setParent(u,o),c.borderBottom=u,ne.forEach(s,function(f){she(t,e,r,n,i,a,f);var h=t.node(f),d=h.borderTop?h.borderTop:f,p=h.borderBottom?h.borderBottom:f,v=h.borderTop?n:2*n,g=d!==p?1:i-a[o]+1;t.setEdge(l,d,{weight:v,minlen:g,nestingEdge:!0}),t.setEdge(p,u,{weight:v,minlen:g,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,l,{weight:0,minlen:i+a[o]})}else o!==e&&t.setEdge(e,o,{weight:0,minlen:r})}var Vot=function(t){ne.forEach(t.children(),function e(r){var n=t.children(r),i=t.node(r);if(n.length&&ne.forEach(n,e),ne.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)UH(t,"borderLeft","_bl",r,i,a),UH(t,"borderRight","_br",r,i,a)}})};function UH(t,e,r,n,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],l=la.addDummyNode(t,"border",o,r);i[e][a]=l,t.setParent(l,n),s&&t.setEdge(s,l,{weight:1})}var WH={adjust:function(t){var e=t.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||VH(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(r){ne.forEach(r.nodes(),function(n){cD(r.node(n))}),ne.forEach(r.edges(),function(n){var i=r.edge(n);ne.forEach(i.points,cD),ne.has(i,"y")&&cD(i)})}(t),e!=="lr"&&e!=="rl"||(function(r){ne.forEach(r.nodes(),function(n){fD(r.node(n))}),ne.forEach(r.edges(),function(n){var i=r.edge(n);ne.forEach(i.points,fD),ne.has(i,"x")&&fD(i)})}(t),VH(t))}};function VH(t){ne.forEach(t.nodes(),function(e){HH(t.node(e))}),ne.forEach(t.edges(),function(e){HH(t.edge(e))})}function HH(t){var e=t.width;t.width=t.height,t.height=e}function cD(t){t.y=-t.y}function fD(t){var e=t.x;t.x=t.y,t.y=e}var Hot=function(t){var e={},r=ne.filter(t.nodes(),function(s){return!t.children(s).length}),n=ne.max(ne.map(r,function(s){return t.node(s).rank})),i=ne.map(ne.range(n+1),function(){return[]});function a(s){if(!ne.has(e,s)){e[s]=!0;var l=t.node(s);i[l.rank].push(s),ne.forEach(t.successors(s),a)}}var o=ne.sortBy(r,function(s){return t.node(s).rank});return ne.forEach(o,a),i},Xot=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=Yot(t,e[n-1],e[n]);return r};function Yot(t,e,r){for(var n=ne.zipObject(r,ne.map(r,function(u,c){return c})),i=ne.flatten(ne.map(e,function(u){return ne.sortBy(ne.map(t.outEdges(u),function(c){return{pos:n[c.w],weight:t.edge(c).weight}}),"pos")}),!0),a=1;a<r.length;)a<<=1;var o=2*a-1;a-=1;var s=ne.map(new Array(o),function(){return 0}),l=0;return ne.forEach(i.forEach(function(u){var c=u.pos+a;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),s[c=c-1>>1]+=u.weight;l+=u.weight*f})),l}var qot=function(t,e){return ne.map(e,function(r){var n=t.inEdges(r);if(n.length){var i=ne.reduce(n,function(a,o){var s=t.edge(o),l=t.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}return{v:r}})},Kot=function(t,e){var r={};return ne.forEach(t,function(n,i){var a=r[n.v]={indegree:0,in:[],out:[],vs:[n.v],i};ne.isUndefined(n.barycenter)||(a.barycenter=n.barycenter,a.weight=n.weight)}),ne.forEach(e.edges(),function(n){var i=r[n.v],a=r[n.w];ne.isUndefined(i)||ne.isUndefined(a)||(a.indegree++,i.out.push(r[n.w]))}),function(n){var i=[];function a(l){return function(u){u.merged||(ne.isUndefined(u.barycenter)||ne.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&function(c,f){var h=0,d=0;c.weight&&(h+=c.barycenter*c.weight,d+=c.weight),f.weight&&(h+=f.barycenter*f.weight,d+=f.weight),c.vs=f.vs.concat(c.vs),c.barycenter=h/d,c.weight=d,c.i=Math.min(f.i,c.i),f.merged=!0}(l,u)}}function o(l){return function(u){u.in.push(l),--u.indegree==0&&n.push(u)}}for(;n.length;){var s=n.pop();i.push(s),ne.forEach(s.in.reverse(),a(s)),ne.forEach(s.out,o(s))}return ne.map(ne.filter(i,function(l){return!l.merged}),function(l){return ne.pick(l,["vs","i","barycenter","weight"])})}(ne.filter(r,function(n){return!n.indegree}))},Qot=function(t,e){var r=la.partition(t,function(f){return ne.has(f,"barycenter")}),n=r.lhs,i=ne.sortBy(r.rhs,function(f){return-f.i}),a=[],o=0,s=0,l=0;n.sort((u=!!e,function(f,h){return f.barycenter<h.barycenter?-1:f.barycenter>h.barycenter?1:u?h.i-f.i:f.i-h.i})),l=XH(a,i,l),ne.forEach(n,function(f){l+=f.vs.length,a.push(f.vs),o+=f.barycenter*f.weight,s+=f.weight,l=XH(a,i,l)});var u,c={vs:ne.flatten(a,!0)};return s&&(c.barycenter=o/s,c.weight=s),c};function XH(t,e,r){for(var n;e.length&&(n=ne.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}var Zot=function t(e,r,n,i){var a=e.children(r),o=e.node(r),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=ne.filter(a,function(v){return v!==s&&v!==l}));var c=qot(e,a);ne.forEach(c,function(v){if(e.children(v.v).length){var g=t(e,v.v,n,i);u[v.v]=g,ne.has(g,"barycenter")&&(m=v,y=g,ne.isUndefined(m.barycenter)?(m.barycenter=y.barycenter,m.weight=y.weight):(m.barycenter=(m.barycenter*m.weight+y.barycenter*y.weight)/(m.weight+y.weight),m.weight+=y.weight))}var m,y});var f=Kot(c,n);(function(v,g){ne.forEach(v,function(m){m.vs=ne.flatten(m.vs.map(function(y){return g[y]?g[y].vs:y}),!0)})})(f,u);var h=Qot(f,i);if(s&&(h.vs=ne.flatten([s,h.vs,l],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(l)[0]);ne.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+p.order)/(h.weight+2),h.weight+=2}return h},Jot=iu.Graph,est=function(t,e,r){var n=function(a){for(var o;a.hasNode(o=ne.uniqueId("_root")););return o}(t),i=new Jot({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return t.node(a)});return ne.forEach(t.nodes(),function(a){var o=t.node(a),s=t.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),ne.forEach(t[r](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=ne.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:t.edge(l).weight+f})}),ne.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i},tst=function(t,e,r){var n,i={};ne.forEach(r,function(a){for(var o,s,l=t.parent(a);l;){if((o=t.parent(l))?(s=i[o],i[o]=l):(s=n,n=l),s&&s!==l)return void e.setEdge(s,l);l=o}})},rst=iu.Graph,nst=function(t){var e=la.maxRank(t),r=YH(t,ne.range(1,e+1),"inEdges"),n=YH(t,ne.range(e-1,-1,-1),"outEdges"),i=Hot(t);qH(t,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){ist(s%2?r:n,s%4>=2),i=la.buildLayerMatrix(t);var u=Xot(t,i);u<o&&(l=0,a=ne.cloneDeep(i),o=u)}qH(t,a)};function YH(t,e,r){return ne.map(e,function(n){return est(t,n,r)})}function ist(t,e){var r=new rst;ne.forEach(t,function(n){var i=n.graph().root,a=Zot(n,i,r,e);ne.forEach(a.vs,function(o,s){n.node(o).order=s}),tst(n,r,a.vs)})}function qH(t,e){ne.forEach(e,function(r){ne.forEach(r,function(n,i){t.node(n).order=i})})}var ast=iu.Graph,ost=function(t){var e,r=la.buildLayerMatrix(t),n=ne.merge(sst(t,r),lst(t,r)),i={};ne.forEach(["u","d"],function(o){e=o==="u"?r:ne.values(r).reverse(),ne.forEach(["l","r"],function(s){s==="r"&&(e=ne.map(e,function(f){return ne.values(f).reverse()}));var l=(o==="u"?t.predecessors:t.successors).bind(t),u=cst(t,e,n,l),c=fst(t,e,u.root,u.align,s==="r");s==="r"&&(c=ne.mapValues(c,function(f){return-f})),i[o+s]=c})});var a=hst(t,i);return dst(i,a),pst(i,t.graph().align)};function sst(t,e){var r={};return ne.reduce(e,function(n,i){var a=0,o=0,s=n.length,l=ne.last(i);return ne.forEach(i,function(u,c){var f=function(d,p){if(d.node(p).dummy)return ne.find(d.predecessors(p),function(v){return d.node(v).dummy})}(t,u),h=f?t.node(f).order:s;(f||u===l)&&(ne.forEach(i.slice(o,c+1),function(d){ne.forEach(t.predecessors(d),function(p){var v=t.node(p),g=v.order;!(g<a||h<g)||v.dummy&&t.node(d).dummy||lhe(r,p,d)})}),o=c+1,a=h)}),i}),r}function lst(t,e){var r={};function n(i,a,o,s,l){var u;ne.forEach(ne.range(a,o),function(c){u=i[c],t.node(u).dummy&&ne.forEach(t.predecessors(u),function(f){var h=t.node(f);h.dummy&&(h.order<s||h.order>l)&&lhe(r,f,u)})})}return ne.reduce(e,function(i,a){var o,s=-1,l=0;return ne.forEach(a,function(u,c){if(t.node(u).dummy==="border"){var f=t.predecessors(u);f.length&&(o=t.node(f[0]).order,n(a,l,c,s,o),l=c,s=o)}n(a,l,a.length,o,i.length)}),a}),r}function lhe(t,e,r){if(e>r){var n=e;e=r,r=n}var i=t[e];i||(t[e]=i={}),i[r]=!0}function ust(t,e,r){if(e>r){var n=e;e=r,r=n}return ne.has(t[e],r)}function cst(t,e,r,n){var i={},a={},o={};return ne.forEach(e,function(s){ne.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),ne.forEach(e,function(s){var l=-1;ne.forEach(s,function(u){var c=n(u);if(c.length)for(var f=((c=ne.sortBy(c,function(v){return o[v]})).length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var p=c[h];a[u]===u&&l<o[p]&&!ust(r,u,p)&&(a[p]=u,a[u]=i[u]=i[p],l=o[p])}})}),{root:i,align:a}}function fst(t,e,r,n,i){var a={},o=function(u,c,f,h){var d=new ast,p=u.graph(),v=function(g,m,y){return function(w,b,x){var S,E=w.node(b),_=w.node(x),k=0;if(k+=E.width/2,ne.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":S=-E.width/2;break;case"r":S=E.width/2}if(S&&(k+=y?S:-S),S=0,k+=(E.dummy?m:g)/2,k+=(_.dummy?m:g)/2,k+=_.width/2,ne.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":S=_.width/2;break;case"r":S=-_.width/2}return S&&(k+=y?S:-S),S=0,k}}(p.nodesep,p.edgesep,h);return ne.forEach(c,function(g){var m;ne.forEach(g,function(y){var w=f[y];if(d.setNode(w),m){var b=f[m],x=d.edge(b,w);d.setEdge(b,w,Math.max(v(u,y,m),x||0))}m=y})}),d}(t,e,r,i),s=i?"borderLeft":"borderRight";function l(u,c){for(var f=o.nodes(),h=f.pop(),d={};h;)d[h]?u(h):(d[h]=!0,f.push(h),f=f.concat(c(h))),h=f.pop()}return l(function(u){a[u]=o.inEdges(u).reduce(function(c,f){return Math.max(c,a[f.v]+o.edge(f))},0)},o.predecessors.bind(o)),l(function(u){var c=o.outEdges(u).reduce(function(h,d){return Math.min(h,a[d.w]-o.edge(d))},Number.POSITIVE_INFINITY),f=t.node(u);c!==Number.POSITIVE_INFINITY&&f.borderType!==s&&(a[u]=Math.max(a[u],c))},o.successors.bind(o)),ne.forEach(n,function(u){a[u]=a[r[u]]}),a}function hst(t,e){return ne.minBy(ne.values(e),function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return ne.forIn(r,function(a,o){var s=function(l,u){return l.node(u).width}(t,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function dst(t,e){var r=ne.values(e),n=ne.min(r),i=ne.max(r);ne.forEach(["u","d"],function(a){ne.forEach(["l","r"],function(o){var s,l=a+o,u=t[l];if(u!==e){var c=ne.values(u);(s=o==="l"?n-ne.min(c):i-ne.max(c))&&(t[l]=ne.mapValues(u,function(f){return f+s}))}})})}function pst(t,e){return ne.mapValues(t.ul,function(r,n){if(e)return t[e.toLowerCase()][n];var i=ne.sortBy(ne.map(t,n));return(i[1]+i[2])/2})}var vst=ost,gst=function(t){(function(e){var r=la.buildLayerMatrix(e),n=e.graph().ranksep,i=0;ne.forEach(r,function(a){var o=ne.max(ne.map(a,function(s){return e.node(s).height}));ne.forEach(a,function(s){e.node(s).y=i+o/2}),i+=o+n})})(t=la.asNonCompoundGraph(t)),ne.forEach(vst(t),function(e,r){t.node(r).x=e})},mst=la.normalizeRanks,yst=la.removeEmptyRanks,gh=la,wst=iu.Graph,bst=function(t,e){var r=e&&e.debugTiming?gh.time:gh.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return function(i){var a=new wst({multigraph:!0,compound:!0}),o=dD(i.graph());return a.setGraph(ne.merge({},Sst,hD(o,xst),ne.pick(o,Est))),ne.forEach(i.nodes(),function(s){var l=dD(i.node(s));a.setNode(s,ne.defaults(hD(l,_st),Cst)),a.setParent(s,i.parent(s))}),ne.forEach(i.edges(),function(s){var l=dD(i.edge(s));a.setEdge(s,ne.merge({},Mst,hD(l,kst),ne.pick(l,Ast)))}),a}(t)});r("  runLayout",function(){(function(i,a){a("    makeSpaceForEdgeLabels",function(){(function(o){var s=o.graph();s.ranksep/=2,ne.forEach(o.edges(),function(l){var u=o.edge(l);u.minlen*=2,u.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?u.width+=u.labeloffset:u.height+=u.labeloffset)})})(i)}),a("    removeSelfEdges",function(){(function(o){ne.forEach(o.edges(),function(s){if(s.v===s.w){var l=o.node(s.v);l.selfEdges||(l.selfEdges=[]),l.selfEdges.push({e:s,label:o.edge(s)}),o.removeEdge(s)}})})(i)}),a("    acyclic",function(){RH.run(i)}),a("    nestingGraph.run",function(){GH.run(i)}),a("    rank",function(){Got(gh.asNonCompoundGraph(i))}),a("    injectEdgeLabelProxies",function(){(function(o){ne.forEach(o.edges(),function(s){var l=o.edge(s);if(l.width&&l.height){var u=o.node(s.v),c={rank:(o.node(s.w).rank-u.rank)/2+u.rank,e:s};gh.addDummyNode(o,"edge-proxy",c,"_ep")}})})(i)}),a("    removeEmptyRanks",function(){yst(i)}),a("    nestingGraph.cleanup",function(){GH.cleanup(i)}),a("    normalizeRanks",function(){mst(i)}),a("    assignRankMinMax",function(){(function(o){var s=0;ne.forEach(o.nodes(),function(l){var u=o.node(l);u.borderTop&&(u.minRank=o.node(u.borderTop).rank,u.maxRank=o.node(u.borderBottom).rank,s=ne.max(s,u.maxRank))}),o.graph().maxRank=s})(i)}),a("    removeEdgeLabelProxies",function(){(function(o){ne.forEach(o.nodes(),function(s){var l=o.node(s);l.dummy==="edge-proxy"&&(o.edge(l.e).labelRank=l.rank,o.removeNode(s))})})(i)}),a("    normalize.run",function(){$H.run(i)}),a("    parentDummyChains",function(){Wot(i)}),a("    addBorderSegments",function(){Vot(i)}),a("    order",function(){nst(i)}),a("    insertSelfEdges",function(){(function(o){var s=gh.buildLayerMatrix(o);ne.forEach(s,function(l){var u=0;ne.forEach(l,function(c,f){var h=o.node(c);h.order=f+u,ne.forEach(h.selfEdges,function(d){gh.addDummyNode(o,"selfedge",{width:d.label.width,height:d.label.height,rank:h.rank,order:f+ ++u,e:d.e,label:d.label},"_se")}),delete h.selfEdges})})})(i)}),a("    adjustCoordinateSystem",function(){WH.adjust(i)}),a("    position",function(){gst(i)}),a("    positionSelfEdges",function(){(function(o){ne.forEach(o.nodes(),function(s){var l=o.node(s);if(l.dummy==="selfedge"){var u=o.node(l.e.v),c=u.x+u.width/2,f=u.y,h=l.x-c,d=u.height/2;o.setEdge(l.e,l.label),o.removeNode(s),l.label.points=[{x:c+2*h/3,y:f-d},{x:c+5*h/6,y:f-d},{x:c+h,y:f},{x:c+5*h/6,y:f+d},{x:c+2*h/3,y:f+d}],l.label.x=l.x,l.label.y=l.y}})})(i)}),a("    removeBorderNodes",function(){(function(o){ne.forEach(o.nodes(),function(s){if(o.children(s).length){var l=o.node(s),u=o.node(l.borderTop),c=o.node(l.borderBottom),f=o.node(ne.last(l.borderLeft)),h=o.node(ne.last(l.borderRight));l.width=Math.abs(h.x-f.x),l.height=Math.abs(c.y-u.y),l.x=f.x+l.width/2,l.y=u.y+l.height/2}}),ne.forEach(o.nodes(),function(s){o.node(s).dummy==="border"&&o.removeNode(s)})})(i)}),a("    normalize.undo",function(){$H.undo(i)}),a("    fixupEdgeLabelCoords",function(){(function(o){ne.forEach(o.edges(),function(s){var l=o.edge(s);if(ne.has(l,"x"))switch(l.labelpos!=="l"&&l.labelpos!=="r"||(l.width-=l.labeloffset),l.labelpos){case"l":l.x-=l.width/2+l.labeloffset;break;case"r":l.x+=l.width/2+l.labeloffset}})})(i)}),a("    undoCoordinateSystem",function(){WH.undo(i)}),a("    translateGraph",function(){(function(o){var s=Number.POSITIVE_INFINITY,l=0,u=Number.POSITIVE_INFINITY,c=0,f=o.graph(),h=f.marginx||0,d=f.marginy||0;function p(v){var g=v.x,m=v.y,y=v.width,w=v.height;s=Math.min(s,g-y/2),l=Math.max(l,g+y/2),u=Math.min(u,m-w/2),c=Math.max(c,m+w/2)}ne.forEach(o.nodes(),function(v){p(o.node(v))}),ne.forEach(o.edges(),function(v){var g=o.edge(v);ne.has(g,"x")&&p(g)}),s-=h,u-=d,ne.forEach(o.nodes(),function(v){var g=o.node(v);g.x-=s,g.y-=u}),ne.forEach(o.edges(),function(v){var g=o.edge(v);ne.forEach(g.points,function(m){m.x-=s,m.y-=u}),ne.has(g,"x")&&(g.x-=s),ne.has(g,"y")&&(g.y-=u)}),f.width=l-s+h,f.height=c-u+d})(i)}),a("    assignNodeIntersects",function(){(function(o){ne.forEach(o.edges(),function(s){var l,u,c=o.edge(s),f=o.node(s.v),h=o.node(s.w);c.points?(l=c.points[0],u=c.points[c.points.length-1]):(c.points=[],l=h,u=f),c.points.unshift(gh.intersectRect(f,l)),c.points.push(gh.intersectRect(h,u))})})(i)}),a("    reversePoints",function(){(function(o){ne.forEach(o.edges(),function(s){var l=o.edge(s);l.reversed&&l.points.reverse()})})(i)}),a("    acyclic.undo",function(){RH.undo(i)})})(n,r)}),r("  updateInputGraph",function(){(function(i,a){ne.forEach(i.nodes(),function(o){var s=i.node(o),l=a.node(o);s&&(s.x=l.x,s.y=l.y,a.children(o).length&&(s.width=l.width,s.height=l.height))}),ne.forEach(i.edges(),function(o){var s=i.edge(o),l=a.edge(o);s.points=l.points,ne.has(l,"x")&&(s.x=l.x,s.y=l.y)}),i.graph().width=a.graph().width,i.graph().height=a.graph().height})(t,n)})})},xst=["nodesep","edgesep","ranksep","marginx","marginy"],Sst={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Est=["acyclicer","ranker","rankdir","align"],_st=["width","height"],Cst={width:0,height:0},kst=["minlen","weight","width","height","labeloffset"],Mst={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ast=["labelpos"];function hD(t,e){return ne.mapValues(ne.pick(t,e),Number)}function dD(t){var e={};return ne.forEach(t,function(r,n){e[n.toLowerCase()]=r}),e}var Tst=iu.Graph,uhe={graphlib:iu,layout:bst,debug:{debugOrdering:function(t){var e=la.buildLayerMatrix(t),r=new Tst({compound:!0,multigraph:!0}).setGraph({});return ne.forEach(t.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+t.node(n).rank)}),ne.forEach(t.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),ne.forEach(e,function(n,i){var a="layer"+i;r.setNode(a,{rank:"same"}),ne.reduce(n,function(o,s){return r.setEdge(o,s,{style:"invis"}),s})}),r}},util:{time:la.time,notime:la.notime},version:"0.8.5"},Ost=uhe.graphlib,Ist=uhe.layout;class Dst{constructor(e){this.cardinality=1,this.include=Iv.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Ao.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class Pst{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Lst(t){const e=new Pst;return t.nodes.map(r=>new Dst(r)).forEach(r=>{e.nodes[r.name]=r,r.inputs.forEach(n=>{(function(i,a,o){o.name!==a.name&&i.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:a.name}))})(e,r,n)})}),e}class Rst{constructor(e,r={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Iv.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Ao.META,this.path=[],this.name=e,this.metaGraph=rB(e,Vm.META,r)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(e=>this.metaGraph.node(e))}leaves(){let e,r=[],n=[this];for(;n.length;){let i=n.shift();i.isGroupNode?(e=i.metaGraph,e.nodes().forEach(a=>n.push(e.node(a)))):r.push(i.name)}return r}}class Nst{constructor(e,r){this.v=e,this.w=r,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,r){this.baseEdgeList.push(e)}}function che(t,e={}){return new Rst(t,e)}function fhe(t,e){return new Nst(t,e)}function rB(t,e,r){const n=r||{},i=new Ost.Graph(n);return i.setGraph({name:t,rankdir:n.rankdir,type:e,align:n.align}),i}class Fst{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=che(Wm,this.graphOptions),this.index[Wm]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,r){this.index[e]=r}getBridgeGraph(e){const r=this.index[e];if(!r)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in r))return null;const n=r;if(n.bridgeGraph)return n.bridgeGraph;const i=rB(efe,Vm.BRIDGE,this.graphOptions);if(n.bridgeGraph=i,!r.parentNode||!("metaGraph"in r.parentNode))return i;const a=r.parentNode;return[a.metaGraph,this.getBridgeGraph(a.name)].forEach(o=>{o.edges().filter(s=>s.v===e||s.w===e).forEach(s=>{const l=s.w===e;o.edge(s).baseEdgeList.forEach(u=>{const[c,f]=l?[u.w,s.v]:[u.v,s.w],h=this.getChildName(e,c),d={v:l?f:h,w:l?h:f};let p=i.edge(d);p||(p=fhe(d.v,d.w),p.inbound=l,i.setEdge(d.v,d.w,p)),p.addBaseEdge(u,this)})})}),i}getChildName(e,r){let n=this.index[r];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+r)}getPredecessors(e){const r=this.index[e];if(!r)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(r,!0)}getSuccessors(e){const r=this.index[e];if(!r)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(r,!1)}getOneWayEdges(e,r){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const i=e.parentNode,a=i.metaGraph,o=this.getBridgeGraph(i.name);return KH(a,e,r,n),KH(o,e,r,n),n}}function Bst(t,e){const{rankDirection:r,align:n}=e,i=new Fst({rankdir:r,align:n});return function(a,o){Object.keys(o.nodes).forEach(s=>{const l=o.nodes[s],u=l.path;let c=a.root;c.depth=Math.max(u.length,c.depth);for(let f=0;f<u.length&&(c.depth=Math.max(c.depth,u.length-f),c.cardinality+=l.cardinality,f!==u.length-1);f++){const h=u[f];let d=a.node(h);d||(d=che(h,a.graphOptions),d.path=l.path.slice(0,f+1),d.parentNode=c,a.setNode(h,d),c.metaGraph.setNode(h,d)),c=d}a.setNode(l.name,l),l.parentNode=c,c.metaGraph.setNode(l.name,l)})}(i,t),function(a,o){const s=a.getNodeMap();let l=[],u=[];const c=(f,h)=>{let d=0;for(;f;)h[d++]=f.name,f=f.parentNode;return d-1};o.edges.forEach(f=>{l=[],u=[];let h=c(o.nodes[f.v],l),d=c(o.nodes[f.w],u);for(;l[h]===u[d];)if(h--,d--,h<0||d<0)throw Error("No difference found between ancestor paths.");const p=s[l[h+1]],v=l[h],g=u[d];let m=p.metaGraph.edge(v,g);m||(m=fhe(v,g),p.metaGraph.setEdge(v,g,m)),m.addBaseEdge(f,a)})}(i,t),i}function KH(t,e,r,n){(r?t.inEdges(e.name):t.outEdges(e.name)).forEach(i=>{const a=t.edge(i);n.push(a)})}class $st{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new ZH(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const r=this.index[e];if(r.node.type!==Ao.META)return;const n=r,i=n.node.metaGraph,a=n.coreGraph;i.nodes().forEach(c=>{const f=this.getOrCreateRenderNodeByName(c);a.setNode(c,f)}),i.edges().forEach(c=>{const f=i.edge(c),h=new QH(f);a.setEdge(c.v,c.w,h)});const o=n.node.parentNode;if(!o)return;const s=this.getRenderNodeByName(o.name),l=(c,...f)=>f.concat([c?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach(c=>{const f=u.edge(c),h=!!i.node(c.w),[d,p]=h?[c.w,c.v]:[c.v,c.w],v=x=>{const S=h?{v:x,w:e}:{v:e,w:x};return s.coreGraph.edge(S)};let g=v(p);g||(g=v(l(h,p,o.name)));const m=l(h,e),y=l(h,p,e);let w=a.node(y);if(!w){let x=a.node(m);if(!x){const E={name:m,type:Ao.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Iv.UNSPECIFIED,inbound:h,attr:{}};x=new i3(E),this.index[m]=x,a.setNode(m,x)}const S={name:y,type:Ao.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Iv.UNSPECIFIED,inbound:h,attr:{}};w=new i3(S),this.index[y]=w,a.setNode(y,w),a.setParent(y,m),x.node.cardinality++}const b=new QH(f);b.adjoiningMetaEdge=g,h?a.setEdge(y,d,b):a.setEdge(d,y,b)})}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const r=this.getNodeByName(e);return r?(this.index[e]=r.isGroupNode?new ZH(r,this.hierarchy.graphOptions):new i3(r),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class i3{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class QH{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ZH extends i3{constructor(e,r){super(e);const n=e.metaGraph.graph();r.compound=!0,this.coreGraph=rB(n.name,Vm.CORE,r)}}function hhe(t,e){t.node.isGroupNode&&function(r,n){const i=A4(n);r.coreGraph.nodes().map(a=>r.coreGraph.node(a)).forEach(a=>{var o,s,l,u,c,f;const{height:h,width:d}=a;switch(a.node.type){case Ao.NODE:Object.assign(a,i.nodeSize.node),a.height=h||i.nodeSize.node.height,a.width=d||i.nodeSize.node.width;break;case Ao.BRIDGE:Object.assign(a,i.nodeSize.bridge);break;case Ao.META:a.expanded?hhe(a,n):(Object.assign(a,i.nodeSize.meta),a.height=i.nodeSize.meta.height,a.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+a.node.type)}if(!a.expanded){const p=a.attr;(function(v,g=!1){if(v.coreBox.width=v.width,v.coreBox.height=v.height,!g){const m=`${v.displayName}`.length,y=3;v.width=Math.max(v.coreBox.width,m*y)}})(a,n&&(a.node.type===0&&!!(!((s=(o=n==null?void 0:n.nodeSize)===null||o===void 0?void 0:o.meta)===null||s===void 0)&&s.width)||a.node.type===1&&(!!(!((u=(l=n==null?void 0:n.nodeSize)===null||l===void 0?void 0:l.node)===null||u===void 0)&&u.width)||!!p.width)||a.node.type===2&&!!(!((f=(c=n==null?void 0:n.nodeSize)===null||c===void 0?void 0:c.bridge)===null||f===void 0)&&f.width)))}})}(t,e),t.node.type===Ao.META&&function(r,n){const i=A4(n),a=i.subScene.meta;Object.assign(r,a);const{nodeSep:o,rankSep:s,edgeSep:l,align:u}=i.graph.meta,c={nodesep:o,ranksep:s,edgesep:l,align:u};Object.assign(r.coreBox,function(d,p){const{ranksep:v,nodesep:g,edgesep:m,align:y}=p;Object.assign(d.graph(),{ranksep:v,nodesep:g,edgesep:m,align:y});const w=[];if(d.nodes().forEach(_=>{d.node(_).node.type!==Ao.BRIDGE&&w.push(_)}),!w.length)return{width:0,height:0};Ist(d);let b=1/0,x=1/0,S=-1/0,E=-1/0;return w.forEach(_=>{const k=d.node(_),C=.5*k.width,M=k.x-C,A=k.x+C;b=M<b?M:b,S=A>S?A:S;const T=.5*k.height,D=k.y-T,F=k.y+T;x=D<x?D:x,E=F>E?F:E}),d.edges().forEach(_=>{const k=d.edge(_),C=d.node(k.metaEdge.v),M=d.node(k.metaEdge.w);if(k.points.length===3&&function(D){let F=JH(D[0],D[1]);for(let R=1;R<D.length-1;R++){const B=JH(D[R],D[R+1]);if(Math.abs(B-F)>1)return!1;F=B}return!0}(k.points)){if(C!=null){const D=C.expanded?C.x:$4(C);k.points[0].x=D}if(M!=null){const D=M.expanded?M.x:$4(M);k.points[2].x=D}k.points=[k.points[0],k.points[1]]}const A=k.points[k.points.length-2];M!=null&&(k.points[k.points.length-1]=eX(A,M));const T=k.points[1];C!=null&&(k.points[0]=eX(T,C)),k.points.forEach(D=>{b=D.x<b?D.x:b,S=D.x>S?D.x:S,x=D.y<x?D.y:x,E=D.y>E?D.y:E})}),d.nodes().forEach(_=>{const k=d.node(_);k.x-=b,k.y-=x}),d.edges().forEach(_=>{d.edge(_).points.forEach(k=>{k.x-=b,k.y-=x})}),{width:S-b,height:E-x}}(r.coreGraph,c));let f=0;r.coreGraph.nodeCount()>0&&f++;const h=f<=1?0:f;r.coreBox.width+=h+h,r.coreBox.height=a.labelHeight+r.coreBox.height,r.width=r.coreBox.width+a.paddingLeft+a.paddingRight,r.height=r.paddingTop+r.coreBox.height+r.paddingBottom}(t,e)}function JH(t,e){const r=e.x-t.x,n=e.y-t.y;return 180*Math.atan(n/r)/Math.PI}function $4(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function eX(t,e){const r=e.expanded?e.x:$4(e),n=e.y,i=t.x-r,a=t.y-n;let o,s,l=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(a)*l/2>Math.abs(i)*u/2?(a<0&&(u=-u),o=a===0?0:u/2*i/a,s=u/2):(i<0&&(l=-l),o=l/2,s=i===0?0:l/2*a/i),{x:r+o,y:n+s}}function zst(t,e,r){var n,i,a,o;const s=t.nodes.filter((f,h,d)=>d.findIndex(p=>p.id===f.id)!==h).map(f=>f.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const l=function(f){const h={nodes:[]},d=f.compound,p=Object.keys(d||{}),v=new Map,g=(y,w=[])=>{if(v.has(y))return v.get(y);for(let b=0;b<p.length;b++){let x=p[b];if(d&&d[x].indexOf(y)!==-1)return w.unshift(x),g(x,w)}return w.length===0&&v.set(y,w),w},m=y=>f.edges.filter(w=>w.w===y).map(w=>({name:w.v}));return f.nodes.forEach(y=>{const w=y.id,b=[...g(w),w];let x=m(w);h.nodes.push({name:w,path:b,inputs:x,width:y.width,height:y.height,attr:Object.assign({},y)})}),h}(t),u=function(f,h){const d=(v,g)=>{for(let m of g.values())if(m.includes(v))return!0;return!1},p=(v,g=[])=>{if(Object.keys(v).length===0)return[...new Set(g)];const m=new Map(Object.keys(v).map(w=>[w,v[w]])),y={};for(let[w,b]of m)d(w,m)?y[w]=b:g=g.concat(w,b);return p(y,g)};return p(f).filter(v=>h.includes(v))}(t.compound||{},(e==null?void 0:e.expanded)||[]),c=function(f,h){return function(d){return new $st(d)}(Bst(Lst(f),h))}(l,{rankDirection:((i=(n=r==null?void 0:r.graph)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.rankDir)||(e==null?void 0:e.rankDirection)||vk.graph.meta.rankDir,align:((o=(a=r==null?void 0:r.graph)===null||a===void 0?void 0:a.meta)===null||o===void 0?void 0:o.align)||vk.graph.meta.align});return function(f,h){h.forEach(d=>{const p=f.getRenderInfoNodes().find(m=>m.displayName===d);let v=p&&p.node&&p.node.name||"";const g=f.getRenderNodeByName(v);if(!g)throw new Error(`No nodes found: ${v}`);g.expanded=!0,f.buildSubHierarchy(v)})}(c,u),hhe(c.root,r),dhe(c.root)}function jst(t,e=!1){const r=JSON.parse(JSON.stringify(t)),n={nodes:[r],edges:[...r.edges]};return r.nodes.forEach(function i(a){(a.type===0||a.type===1)&&n.nodes.push(a),a.type===0&&(n.edges=n.edges.concat(a.edges)),Array.isArray(a.nodes)&&a.nodes.forEach(i)}),e&&n.nodes.forEach(i=>{const a=n.nodes.find(o=>o.id===i.parentNodeName);if(a){const o=a.x-a.width/2+a.paddingLeft,s=a.y-a.height/2+a.labelHeight+a.paddingTop;a.id!==Wm&&(i.x+=o,i.y+=s),i.type===0&&i.edges.forEach(l=>{l.points.forEach(u=>{u.x+=i.x-i.width/2+i.paddingLeft,u.y+=i.y-i.height/2+i.labelHeight+i.paddingTop})})}}),n}function Gst(t,e,r,n){var i,a;let o=[];const s=((i=r.find(f=>f.id===t))===null||i===void 0?void 0:i.path)||[],l=((a=r.find(f=>f.id===e))===null||a===void 0?void 0:a.path)||[],u=[Wm,...s].slice(0,s.length).reverse(),c=[Wm,...l].slice(0,l.length);return u.forEach(f=>{const h=r.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(p=>p.v===((n==null?void 0:n.v)||t)&&p.w===((n==null?void 0:n.w)||e))))}),c.filter(f=>!u.includes(f)).forEach(f=>{const h=r.find(d=>d.id===f);o=o.concat(h.edges.filter(d=>d.baseEdgeList.some(p=>p.v===((n==null?void 0:n.v)||t)&&p.w===((n==null?void 0:n.w)||e))))}),o}function dhe(t){const e=t.coreGraph.nodes().map(n=>t.coreGraph.node(n));return Object.assign(Object.assign({},tX(t)),{expanded:t.expanded,nodes:t.expanded?(r=e,r.map(n=>n.node.type===Ao.META?dhe(n):tX(n))):[],edges:t.expanded?Ust(t):[]});var r}function tX(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function Ust(t){return t.coreGraph.edges().map(e=>({renderInfoEdge:t.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:e})=>e.metaEdge).map(({edge:e,renderInfoEdge:r})=>{const n=function(i,a){const o=a.points.map(s=>Object.assign({},s));if(a.adjoiningMetaEdge){const s=a.adjoiningMetaEdge.points,l=a.metaEdge.inbound,u=l?s[s.length-1]:s[0],c=o[l?0:o.length-1],f=i.x-i.width/2,h=i.y-i.height/2,d=u.x-f,p=u.y-h,v=-i.paddingLeft,g=-(i.paddingTop+i.labelHeight);c.x=d+v,c.y=p+g}return o}(t,r);return{adjoiningEdge:r.adjoiningMetaEdge?{w:r.adjoiningMetaEdge.metaEdge.w,v:r.adjoiningMetaEdge.metaEdge.v}:null,inbound:r.metaEdge.inbound,w:e.w,v:e.v,points:n,weight:r.weight,baseEdgeList:r.metaEdge.baseEdgeList,parentNodeName:t.node.name}})}const Wst=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:efe,get GraphType(){return Vm},get HierarchyNodeType(){return T4},get InclusionType(){return Iv},LAYOUT_CONFIG:vk,get NodeType(){return Ao},ROOT_NAME:Wm,buildGraph:zst,flatGraph:jst,getEdges:Gst,mergeConfig:A4},Symbol.toStringTag,{value:"Module"})),Vst=xc(Wst);var Hst=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ol=Oe&&Oe.__assign||function(){return Ol=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ol.apply(this,arguments)},jg=Oe&&Oe.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(Hb,"__esModule",{value:!0});Hb.DagreCompoundLayout=void 0;var Xst=di,Ns=Vst,NE=ii(),Yst=function(t){Hst(e,t);function e(r){var n=t.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(r){var n=r.hiddenNodes||[],i=r.hiddenEdges||[],a=r.hiddenCombos||[];this.nodes=this.getDataByOrder((r.nodes||[]).concat(n)),this.edges=this.getDataByOrder((r.edges||[]).concat(i)),this.combos=(r.combos||[]).concat(a.map(function(o){return Ol(Ol({},o),{collapsed:!0})}))},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges;if(n){var a=r.getLayoutConfig(),o=a.graphDef,s=a.graphOption,l=a.graphSettings,u=(0,Ns.buildGraph)(o,s,l),c=(0,Ns.flatGraph)(u,!0);return this.updatePosition(c),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i}}},e.prototype.getNodePath=function(r){var n=this,i=n.nodes,a=n.combos,o=i.find(function(l){return l.id===r}),s=function(l,u){u===void 0&&(u=[]);var c=a.find(function(f){return f.id===l});return c?(u.unshift(l),c.parentId?s(c.parentId,u):u):u};return o&&o.comboId?s(o.comboId,[r]):[r]},e.prototype.getLayoutConfig=function(){var r,n,i,a=this,o=a.nodes,s=a.edges,l=a.combos,u=a.nodeSize,c=a.rankdir,f=a.align,h=a.edgesep,d=a.nodesep,p=a.ranksep,v=a.settings,g=(l||[]).reduce(function(R,B){var N=o.filter(function(L){return L.comboId===B.id}).map(function(L){return L.id}),O=(l||[]).filter(function(L){return L.parentId===B.id}).map(function(L){return L.id});return(N.length||O.length)&&(R[B.id]=jg(jg([],N,!0),O,!0)),R},{}),m;u?(0,NE.isArray)(u)?m=function(){return u}:m=function(){return[u,u]}:m=function(R){return R&&R.size?(0,NE.isArray)(R.size)?R.size:(0,NE.isObject)(R.size)?[R.size.width||40,R.size.height||40]:[R.size,R.size]:[40,40]};var y=function(R){return R&&R.size?(0,NE.isArray)(R.size)?R.size:[R.size,R.size]:[80,40]},w=y(l==null?void 0:l[0]),b=w[0],x=w[1],S=(n=(r=a.graphSettings)===null||r===void 0?void 0:r.subScene)===null||n===void 0?void 0:n.meta,E=((i=l.find(function(R){return!R.collapsed}))===null||i===void 0?void 0:i.padding)||[20,20,20,20],_=E[0],k=E[1],C=E[2],M=E[3],A={compound:g,nodes:jg([],(o||[]).map(function(R){var B=m(R),N=B[0],O=B[1];return Ol(Ol({},R),{width:N,height:O})}),!0),edges:jg([],(s||[]).map(function(R){return Ol(Ol({},R),{v:R.source,w:R.target})}),!0)},T={expanded:(l||[]).filter(function(R){return!R.collapsed}).map(function(R){return R.id})},D={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:h,rankSep:p}},subScene:{meta:{paddingTop:_||(S==null?void 0:S.paddingTop)||20,paddingRight:k||(S==null?void 0:S.paddingRight)||20,paddingBottom:C||(S==null?void 0:S.paddingBottom)||20,paddingLeft:M||(S==null?void 0:S.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:b,height:x}}},F=(0,Ns.mergeConfig)(v,Ol({},(0,Ns.mergeConfig)(D,Ns.LAYOUT_CONFIG)));return a.graphSettings=F,{graphDef:A,graphOption:T,graphSettings:F}},e.prototype.updatePosition=function(r){var n=r.nodes,i=r.edges;this.updateNodePosition(n,i),this.updateEdgePosition(n,i)},e.prototype.getBegin=function(r,n){var i=this,a=i.begin,o=[0,0];if(a){var s=1/0,l=1/0;r.forEach(function(u){s>u.x&&(s=u.x),l>u.y&&(l=u.y)}),n.forEach(function(u){u.points.forEach(function(c){s>c.x&&(s=c.x),l>c.y&&(l=c.y)})}),o[0]=a[0]-s,o[1]=a[1]-l}return o},e.prototype.updateNodePosition=function(r,n){var i=this,a=i.combos,o=i.nodes,s=i.edges,l=i.anchorPoint,u=i.graphSettings,c=this.getBegin(r,n);r.forEach(function(f){var h,d=f.x,p=f.y,v=f.id,g=f.type,m=f.coreBox;if(g===Ns.HierarchyNodeType.META&&v!==Ns.ROOT_NAME){var y=a.findIndex(function(E){return E.id===v}),w=(h=u==null?void 0:u.subScene)===null||h===void 0?void 0:h.meta;a[y].offsetX=d+c[0],a[y].offsetY=p+c[1],a[y].fixSize=[m.width,m.height],a[y].fixCollapseSize=[m.width,m.height],f.expanded?a[y].padding=[w==null?void 0:w.paddingTop,w==null?void 0:w.paddingRight,w==null?void 0:w.paddingBottom,w==null?void 0:w.paddingLeft]:a[y].padding=[0,0,0,0]}else if(g===Ns.HierarchyNodeType.OP){var y=o.findIndex(function(_){return _.id===v});if(o[y].x=d+c[0],o[y].y=p+c[1],l){var b=[],x=n.filter(function(_){return _.v===v}),S=n.filter(function(_){return _.w===v});x.length>0&&x.forEach(function(_){var k=_.points[0],C=(k.x-d)/f.width+.5,M=(k.y-p)/f.height+.5;b.push([C,M]),_.baseEdgeList.forEach(function(A){var T=s.find(function(D){return D.source===A.v&&D.target===A.w});T&&(T.sourceAnchor=b.length-1)})}),S.length>0&&S.forEach(function(_){var k=_.points[_.points.length-1],C=(k.x-d)/f.width+.5,M=(k.y-p)/f.height+.5;b.push([C,M]),_.baseEdgeList.forEach(function(A){var T=s.find(function(D){return D.source===A.v&&D.target===A.w});T&&(T.targetAnchor=b.length-1)})}),o[y].anchorPoints=b.length>0?b:o[y].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(r,n){var i=this,a=i.combos,o=i.edges,s=i.controlPoints,l=this.getBegin(r,n);s&&(a.forEach(function(u){u.inEdges=[],u.outEdges=[]}),o.forEach(function(u){var c,f,h,d,p=r.find(function(E){return E.id===u.source}),v=r.find(function(E){return E.id===u.target}),g=[],m=[];if(p&&v)m=(0,Ns.getEdges)(p==null?void 0:p.id,v==null?void 0:v.id,r);else if(!p||!v){var y=i.getNodePath(u.source),w=i.getNodePath(u.target),b=y.reverse().slice(p?0:1).find(function(E){return r.find(function(_){return _.id===E})}),x=w.reverse().slice(v?0:1).find(function(E){return r.find(function(_){return _.id===E})});p=r.find(function(E){return E.id===b}),v=r.find(function(E){return E.id===x}),m=(0,Ns.getEdges)(p==null?void 0:p.id,v==null?void 0:v.id,r,{v:u.source,w:u.target})}if(g=m.reduce(function(E,_){return jg(jg([],E,!0),_.points.map(function(k){return Ol(Ol({},k),{x:k.x+l[0],y:k.y+l[1]})}),!0)},[]),g=g.slice(1,-1),u.controlPoints=g,(v==null?void 0:v.type)===Ns.NodeType.META){var S=a.findIndex(function(E){return E.id===(v==null?void 0:v.id)});if(!a[S]||!((c=a[S].inEdges)===null||c===void 0)&&c.some(function(E){return E.source===p.id&&E.target===v.id}))return;(f=a[S].inEdges)===null||f===void 0||f.push({source:p.id,target:v.id,controlPoints:g})}if((p==null?void 0:p.type)===Ns.NodeType.META){var S=a.findIndex(function(_){return _.id===(p==null?void 0:p.id)});if(!a[S]||!((h=a[S].outEdges)===null||h===void 0)&&h.some(function(_){return _.source===p.id&&_.target===v.id}))return;(d=a[S].outEdges)===null||d===void 0||d.push({source:p.id,target:v.id,controlPoints:g})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(r){return r.every(function(n){return n.layoutOrder!==void 0})||r.forEach(function(n,i){n.layoutOrder=i}),r.sort(function(n,i){return n.layoutOrder-i.layoutOrder})},e}(Xst.Base);Hb.DagreCompoundLayout=Yst;var nB={},qA={},iB={};const qst=Object.prototype.toString;function Ek(t){const e=qst.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function Kst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ek(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,i=e.toIndex,a=i===void 0?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],s=n+1;s<a;s++)t[s]>o&&(o=t[s]);return o}function Qst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ek(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,n=r===void 0?0:r,i=e.toIndex,a=i===void 0?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],s=n+1;s<a;s++)t[s]<o&&(o=t[s]);return o}function rX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ek(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(e.output!==void 0){if(!Ek(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=Qst(t),i=Kst(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?n:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),c=0;c<t.length;c++)r[c]=(t[c]-n)*u+o;return r}const FE=" ".repeat(2),phe=" ".repeat(4);function Zst(){return vhe(this)}function vhe(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:i=8}=e;return`${t.constructor.name} {
${FE}[
${phe}${Jst(t,r,n,i)}
${FE}]
${FE}rows: ${t.rows}
${FE}columns: ${t.columns}
}`}function Jst(t,e,r,n){const{rows:i,columns:a}=t,o=Math.min(i,e),s=Math.min(a,r),l=[];for(let u=0;u<o;u++){let c=[];for(let f=0;f<s;f++)c.push(elt(t.get(u,f),n));l.push(`${c.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-r} more columns`),o!==i&&l.push(`... ${i-e} more rows`),l.join(`
${phe}`)}function elt(t,e){const r=String(t);if(r.length<=e)return r.padEnd(e," ");const n=t.toPrecision(e-2);if(n.length<=e)return n;const i=t.toExponential(e-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,e-o.length)+o}function tlt(t,e){t.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},t.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},t.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},t.add=function(n,i){return new e(n).add(i)},t.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},t.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},t.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},t.sub=function(n,i){return new e(n).sub(i)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},t.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},t.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},t.mul=function(n,i){return new e(n).mul(i)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},t.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},t.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},t.div=function(n,i){return new e(n).div(i)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},t.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},t.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},t.mod=function(n,i){return new e(n).mod(i)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},t.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},t.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},t.and=function(n,i){return new e(n).and(i)},t.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},t.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},t.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},t.or=function(n,i){return new e(n).or(i)},t.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},t.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},t.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},t.xor=function(n,i){return new e(n).xor(i)},t.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},t.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},t.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},t.leftShift=function(n,i){return new e(n).leftShift(i)},t.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},t.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},t.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},t.signPropagatingRightShift=function(n,i){return new e(n).signPropagatingRightShift(i)},t.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},t.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},t.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},t.rightShift=function(n,i){return new e(n).rightShift(i)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},t.not=function(n){return new e(n).not()},t.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},t.abs=function(n){return new e(n).abs()},t.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},t.acos=function(n){return new e(n).acos()},t.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},t.acosh=function(n){return new e(n).acosh()},t.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},t.asin=function(n){return new e(n).asin()},t.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},t.asinh=function(n){return new e(n).asinh()},t.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},t.atan=function(n){return new e(n).atan()},t.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},t.atanh=function(n){return new e(n).atanh()},t.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},t.cbrt=function(n){return new e(n).cbrt()},t.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},t.ceil=function(n){return new e(n).ceil()},t.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},t.clz32=function(n){return new e(n).clz32()},t.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},t.cos=function(n){return new e(n).cos()},t.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},t.cosh=function(n){return new e(n).cosh()},t.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},t.exp=function(n){return new e(n).exp()},t.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},t.expm1=function(n){return new e(n).expm1()},t.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},t.floor=function(n){return new e(n).floor()},t.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},t.fround=function(n){return new e(n).fround()},t.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},t.log=function(n){return new e(n).log()},t.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},t.log1p=function(n){return new e(n).log1p()},t.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},t.log10=function(n){return new e(n).log10()},t.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},t.log2=function(n){return new e(n).log2()},t.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},t.round=function(n){return new e(n).round()},t.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},t.sign=function(n){return new e(n).sign()},t.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},t.sin=function(n){return new e(n).sin()},t.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},t.sinh=function(n){return new e(n).sinh()},t.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},t.sqrt=function(n){return new e(n).sqrt()},t.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},t.tan=function(n){return new e(n).tan()},t.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},t.tanh=function(n){return new e(n).tanh()},t.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},t.trunc=function(n){return new e(n).trunc()},t.pow=function(n,i){return new e(n).pow(i)},t.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},t.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},t.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function js(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function Gs(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function i0(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function a0(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function ghe(t,e,r){return{row:mhe(t,e),column:yhe(t,r)}}function mhe(t,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");if(e.some(n=>n<0||n>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function yhe(t,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");if(e.some(n=>n<0||n>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function z4(t,e,r,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(BE("startRow",e),BE("endRow",r),BE("startColumn",n),BE("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function KA(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function BE(t,e){if(typeof e!="number")throw new TypeError(`${t} must be a number`)}function rlt(t){let e=KA(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}function nlt(t){let e=KA(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}function ilt(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}function alt(t){let e=KA(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}function olt(t){let e=KA(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}function slt(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}function llt(t,e,r){const n=t.rows,i=t.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let c=0;c<i;c++)u=t.get(o,c)-r[o],s+=u,l+=u*u;e?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function ult(t,e,r){const n=t.rows,i=t.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let c=0;c<n;c++)u=t.get(c,o)-r[o],s+=u,l+=u*u;e?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function clt(t,e,r){const n=t.rows,i=t.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let c=0;c<i;c++)l=t.get(u,c)-r,o+=l,s+=l*l;return e?(s-o*o/a)/(a-1):(s-o*o/a)/a}function flt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}function hlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}function dlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}function plt(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let i=0;i<t.columns;i++)n+=Math.pow(t.get(r,i),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}function vlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}function glt(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}function mlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}function ylt(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}function wlt(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}class Lr{static from1DArray(e,r,n){if(e*r!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Vt(e,r);for(let o=0;o<e;o++)for(let s=0;s<r;s++)a.set(o,s,n[o*r+s]);return a}static rowVector(e){let r=new Vt(1,e.length);for(let n=0;n<e.length;n++)r.set(0,n,e[n]);return r}static columnVector(e){let r=new Vt(e.length,1);for(let n=0;n<e.length;n++)r.set(n,0,e[n]);return r}static zeros(e,r){return new Vt(e,r)}static ones(e,r){return new Vt(e,r).fill(1)}static rand(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Vt(e,r);for(let o=0;o<e;o++)for(let s=0;s<r;s++)a.set(o,s,i());return a}static randInt(e,r,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Vt(e,r);for(let u=0;u<e;u++)for(let c=0;c<r;c++){let f=i+Math.round(o()*s);l.set(u,c,f)}return l}static eye(e,r,n){r===void 0&&(r=e),n===void 0&&(n=1);let i=Math.min(e,r),a=this.zeros(e,r);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(e,r,n){let i=e.length;r===void 0&&(r=i),n===void 0&&(n=r);let a=Math.min(i,r,n),o=this.zeros(r,n);for(let s=0;s<a;s++)o.set(s,s,e[s]);return o}static min(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,i=e.columns,a=new Vt(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(e.get(o,s),r.get(o,s)));return a}static max(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let n=e.rows,i=e.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(e.get(o,s),r.get(o,s)));return a}static checkMatrix(e){return Lr.isMatrix(e)?e:new Vt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.call(this,r,n);return this}to1DArray(){let e=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.push(this.get(r,n));return e}to2DArray(){let e=[];for(let r=0;r<this.rows;r++){e.push([]);for(let n=0;n<this.columns;n++)e[r].push(this.get(r,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let r=0;r<=e;r++)if(this.get(e,r)!==this.get(r,e))return!1;return!0}return!1}isEchelonForm(){let e=0,r=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(a=!0,n=r):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,r=0,n=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>n?(a=!0,n=r):(i=!1,a=!0);for(let o=r+1;o<this.rows;o++)this.get(e,o)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),r=0,n=0;for(;r<e.rows&&n<e.columns;){let i=r;for(let a=r;a<e.rows;a++)e.get(a,n)>e.get(i,n)&&(i=a);if(e.get(i,n)===0)n++;else{e.swapRows(r,i);let a=e.get(r,n);for(let o=n;o<e.columns;o++)e.set(r,o,e.get(r,o)/a);for(let o=r+1;o<e.rows;o++){let s=e.get(o,n)/e.get(r,n);e.set(o,n,0);for(let l=n+1;l<e.columns;l++)e.set(o,l,e.get(o,l)-e.get(r,l)*s)}r++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),r=e.columns,n=e.rows,i=n-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)e.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=e.get(s,a);for(let u=a;u<r;u++){let c=e.get(s,u)-l*e.get(i,u);e.set(s,u,c)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:r=1,columns:n=1}=e;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Vt(this.rows*r,this.columns*n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(e){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,e);return this}neg(){return this.mulS(-1)}getRow(e){js(this,e);let r=[];for(let n=0;n<this.columns;n++)r.push(this.get(e,n));return r}getRowVector(e){return Vt.rowVector(this.getRow(e))}setRow(e,r){js(this,e),r=i0(this,r);for(let n=0;n<this.columns;n++)this.set(e,n,r[n]);return this}swapRows(e,r){js(this,e),js(this,r);for(let n=0;n<this.columns;n++){let i=this.get(e,n);this.set(e,n,this.get(r,n)),this.set(r,n,i)}return this}getColumn(e){Gs(this,e);let r=[];for(let n=0;n<this.rows;n++)r.push(this.get(n,e));return r}getColumnVector(e){return Vt.columnVector(this.getColumn(e))}setColumn(e,r){Gs(this,e),r=a0(this,r);for(let n=0;n<this.rows;n++)this.set(n,e,r[n]);return this}swapColumns(e,r){Gs(this,e),Gs(this,r);for(let n=0;n<this.rows;n++){let i=this.get(n,e);this.set(n,e,this.get(n,r)),this.set(n,r,i)}return this}addRowVector(e){e=i0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[n]);return this}subRowVector(e){e=i0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[n]);return this}mulRowVector(e){e=i0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[n]);return this}divRowVector(e){e=i0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[n]);return this}addColumnVector(e){e=a0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e[r]);return this}subColumnVector(e){e=a0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e[r]);return this}mulColumnVector(e){e=a0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e[r]);return this}divColumnVector(e){e=a0(this,e);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e[r]);return this}mulRow(e,r){js(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*r);return this}mulColumn(e,r){Gs(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*r);return this}max(){let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>e&&(e=this.get(r,n));return e}maxIndex(){let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>e&&(e=this.get(n,i),r[0]=n,r[1]=i);return r}min(){let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<e&&(e=this.get(r,n));return e}minIndex(){let e=this.get(0,0),r=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<e&&(e=this.get(n,i),r[0]=n,r[1]=i);return r}maxRow(e){js(this,e);let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>r&&(r=this.get(e,n));return r}maxRowIndex(e){js(this,e);let r=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>r&&(r=this.get(e,i),n[1]=i);return n}minRow(e){js(this,e);let r=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<r&&(r=this.get(e,n));return r}minRowIndex(e){js(this,e);let r=this.get(e,0),n=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<r&&(r=this.get(e,i),n[1]=i);return n}maxColumn(e){Gs(this,e);let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>r&&(r=this.get(n,e));return r}maxColumnIndex(e){Gs(this,e);let r=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>r&&(r=this.get(i,e),n[0]=i);return n}minColumn(e){Gs(this,e);let r=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<r&&(r=this.get(n,e));return r}minColumnIndex(e){Gs(this,e);let r=this.get(0,e),n=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<r&&(r=this.get(i,e),n[0]=i);return n}diag(){let e=Math.min(this.rows,this.columns),r=[];for(let n=0;n<e;n++)r.push(this.get(n,n));return r}norm(e="frobenius"){let r=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)r=r+this.get(n,i)*this.get(n,i);return Math.sqrt(r)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e+=this.get(r,n),this.set(r,n,e);return this}dot(e){Lr.isMatrix(e)&&(e=e.to1DArray());let r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<r.length;i++)n+=r[i]*e[i];return n}mmul(e){e=Vt.checkMatrix(e);let r=this.rows,n=this.columns,i=e.columns,a=new Vt(r,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=e.get(l,s);for(let l=0;l<r;l++){let u=0;for(let c=0;c<n;c++)u+=this.get(l,c)*o[c];a.set(l,s,u)}}return a}strassen2x2(e){e=Vt.checkMatrix(e);let r=new Vt(2,2);const n=this.get(0,0),i=e.get(0,0),a=this.get(0,1),o=e.get(0,1),s=this.get(1,0),l=e.get(1,0),u=this.get(1,1),c=e.get(1,1),f=(n+u)*(i+c),h=(s+u)*i,d=n*(o-c),p=u*(l-i),v=(n+a)*c,g=(s-n)*(i+o),m=(a-u)*(l+c),y=f+p-v+m,w=d+v,b=h+p,x=f-h+d+g;return r.set(0,0,y),r.set(0,1,w),r.set(1,0,b),r.set(1,1,x),r}strassen3x3(e){e=Vt.checkMatrix(e);let r=new Vt(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),h=e.get(0,0),d=e.get(0,1),p=e.get(0,2),v=e.get(1,0),g=e.get(1,1),m=e.get(1,2),y=e.get(2,0),w=e.get(2,1),b=e.get(2,2),x=(n+i+a-o-s-c-f)*g,S=(n-o)*(-d+g),E=s*(-h+d+v-g-m-y+b),_=(-n+o+s)*(h-d+g),k=(o+s)*(-h+d),C=n*h,M=(-n+u+c)*(h-p+m),A=(-n+u)*(p-m),T=(u+c)*(-h+p),D=(n+i+a-s-l-u-c)*m,F=c*(-h+p+v-g-m-y+w),R=(-a+c+f)*(g+y-w),B=(a-f)*(g-w),N=a*y,O=(c+f)*(-y+w),L=(-a+s+l)*(m+y-b),G=(a-l)*(m-b),q=(s+l)*(-y+b),K=i*v,V=l*w,le=o*p,ge=u*d,xe=f*b,Ie=C+N+K,He=x+_+k+C+R+N+O,Ge=C+M+T+D+N+L+q,ht=S+E+_+C+N+L+G,dt=S+_+k+C+V,It=N+L+G+q+le,_t=C+M+A+F+R+B+N,yt=R+B+N+O+ge,Tt=C+M+A+T+xe;return r.set(0,0,Ie),r.set(0,1,He),r.set(0,2,Ge),r.set(1,0,ht),r.set(1,1,dt),r.set(1,2,It),r.set(2,0,_t),r.set(2,1,yt),r.set(2,2,Tt),r}mmulStrassen(e){e=Vt.checkMatrix(e);let r=this.clone(),n=r.rows,i=r.columns,a=e.rows,o=e.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(f,h,d){let p=f.rows,v=f.columns;if(p===h&&v===d)return f;{let g=Lr.zeros(h,d);return g=g.setSubMatrix(f,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);r=s(r,l,u),e=s(e,l,u);function c(f,h,d,p){if(d<=512||p<=512)return f.mmul(h);d%2===1&&p%2===1?(f=s(f,d+1,p+1),h=s(h,d+1,p+1)):d%2===1?(f=s(f,d+1,p),h=s(h,d+1,p)):p%2===1&&(f=s(f,d,p+1),h=s(h,d,p+1));let v=parseInt(f.rows/2,10),g=parseInt(f.columns/2,10),m=f.subMatrix(0,v-1,0,g-1),y=h.subMatrix(0,v-1,0,g-1),w=f.subMatrix(0,v-1,g,f.columns-1),b=h.subMatrix(0,v-1,g,h.columns-1),x=f.subMatrix(v,f.rows-1,0,g-1),S=h.subMatrix(v,h.rows-1,0,g-1),E=f.subMatrix(v,f.rows-1,g,f.columns-1),_=h.subMatrix(v,h.rows-1,g,h.columns-1),k=c(Lr.add(m,E),Lr.add(y,_),v,g),C=c(Lr.add(x,E),y,v,g),M=c(m,Lr.sub(b,_),v,g),A=c(E,Lr.sub(S,y),v,g),T=c(Lr.add(m,w),_,v,g),D=c(Lr.sub(x,m),Lr.add(y,b),v,g),F=c(Lr.sub(w,E),Lr.add(S,_),v,g),R=Lr.add(k,A);R.sub(T),R.add(F);let B=Lr.add(M,T),N=Lr.add(C,A),O=Lr.sub(k,C);O.add(M),O.add(D);let L=Lr.zeros(2*R.rows,2*R.columns);return L=L.setSubMatrix(R,0,0),L=L.setSubMatrix(B,R.rows,0),L=L.setSubMatrix(N,0,R.columns),L=L.setSubMatrix(O,R.rows,R.columns),L.subMatrix(0,d-1,0,p-1)}return c(r,e,l,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let i=new Vt(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);rX(o,{min:r,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(r>=n)throw new RangeError("min must be smaller than max");let i=new Vt(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);rX(o,{min:r,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let n=0;n<e;n++){let i=this.get(r,n),a=this.get(r,this.columns-1-n);this.set(r,n,a),this.set(r,this.columns-1-n,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let n=0;n<e;n++){let i=this.get(n,r),a=this.get(this.rows-1-n,r);this.set(n,r,a),this.set(this.rows-1-n,r,i)}return this}kroneckerProduct(e){e=Vt.checkMatrix(e);let r=this.rows,n=this.columns,i=e.rows,a=e.columns,o=new Vt(r*i,n*a);for(let s=0;s<r;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let c=0;c<a;c++)o.set(i*s+u,a*l+c,this.get(s,l)*e.get(u,c));return o}transpose(){let e=new Vt(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(n,r,this.get(r,n));return e}sortRows(e=nX){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(e));return this}sortColumns(e=nX){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(e));return this}subMatrix(e,r,n,i){z4(this,e,r,n,i);let a=new Vt(r-e+1,i-n+1);for(let o=e;o<=r;o++)for(let s=n;s<=i;s++)a.set(o-e,s-n,this.get(o,s));return a}subMatrixRow(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Vt(e.length,n-r+1);for(let a=0;a<e.length;a++)for(let o=r;o<=n;o++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,o-r,this.get(e[a],o))}return i}subMatrixColumn(e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Vt(n-r+1,e.length);for(let a=0;a<e.length;a++)for(let o=r;o<=n;o++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(o-r,a,this.get(o,e[a]))}return i}setSubMatrix(e,r,n){e=Vt.checkMatrix(e);let i=r+e.rows-1,a=n+e.columns-1;z4(this,r,i,n,a);for(let o=0;o<e.rows;o++)for(let s=0;s<e.columns;s++)this.set(r+o,n+s,e.get(o,s));return this}selection(e,r){let n=ghe(this,e,r),i=new Vt(e.length,r.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let e=Math.min(this.rows,this.columns),r=0;for(let n=0;n<e;n++)r+=this.get(n,n);return r}clone(){let e=new Vt(this.rows,this.columns);for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)e.set(r,n,this.get(r,n));return e}sum(e){switch(e){case"row":return rlt(this);case"column":return nlt(this);case void 0:return ilt(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return alt(this);case"column":return olt(this);case void 0:return slt(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const r=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)r[n]/=this.columns;return r}case"column":{for(let n=0;n<this.columns;n++)r[n]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(e)}=r;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return llt(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return ult(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return clt(this,n,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,r){typeof e=="object"&&(r=e,e=void 0);const n=this.variance(e,r);if(e===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=r;switch(e){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return flt(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return hlt(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return dlt(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let n=r.scale;switch(e){case"row":{if(n===void 0)n=plt(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return vlt(this,n),this}case"column":{if(n===void 0)n=glt(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return mlt(this,n),this}case void 0:{if(n===void 0)n=ylt(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return wlt(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return vhe(this,e)}}Lr.prototype.klass="Matrix";typeof Symbol<"u"&&(Lr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Zst);function nX(t,e){return t-e}Lr.random=Lr.rand;Lr.randomInt=Lr.randInt;Lr.diagonal=Lr.diag;Lr.prototype.diagonal=Lr.prototype.diag;Lr.identity=Lr.eye;Lr.prototype.negate=Lr.prototype.neg;Lr.prototype.tensorProduct=Lr.prototype.kroneckerProduct;class Vt extends Lr{constructor(e,r){if(super(),Vt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>0)if(this.data=[],Number.isInteger(r)&&r>0)for(let n=0;n<e;n++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){const n=e;if(e=n.length,r=n[0].length,typeof r!="number"||r===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<e;i++){if(n[i].length!==r)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=e,this.columns=r,this}set(e,r,n){return this.data[e][r]=n,this}get(e,r){return this.data[e][r]}removeRow(e){if(js(this,e),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(e,1),this.rows-=1,this}addRow(e,r){return r===void 0&&(r=e,e=this.rows),js(this,e,!0),r=Float64Array.from(i0(this,r)),this.data.splice(e,0,r),this.rows+=1,this}removeColumn(e){if(Gs(this,e),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns-1);for(let i=0;i<e;i++)n[i]=this.data[r][i];for(let i=e+1;i<this.columns;i++)n[i-1]=this.data[r][i];this.data[r]=n}return this.columns-=1,this}addColumn(e,r){typeof r>"u"&&(r=e,e=this.columns),Gs(this,e,!0),r=a0(this,r);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<e;a++)i[a]=this.data[n][a];for(i[a++]=r[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}tlt(Lr,Vt);class Vf extends Lr{constructor(e,r,n){super(),this.matrix=e,this.rows=r,this.columns=n}}class blt extends Vf{constructor(e,r){Gs(e,r),super(e,e.rows,1),this.column=r}set(e,r,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class xlt extends Vf{constructor(e,r){r=yhe(e,r),super(e,e.rows,r.length),this.columnIndices=r}set(e,r,n){return this.matrix.set(e,this.columnIndices[r],n),this}get(e,r){return this.matrix.get(e,this.columnIndices[r])}}class Slt extends Vf{constructor(e){super(e,e.rows,e.columns)}set(e,r,n){return this.matrix.set(e,this.columns-r-1,n),this}get(e,r){return this.matrix.get(e,this.columns-r-1)}}class Elt extends Vf{constructor(e){super(e,e.rows,e.columns)}set(e,r,n){return this.matrix.set(this.rows-e-1,r,n),this}get(e,r){return this.matrix.get(this.rows-e-1,r)}}class _lt extends Vf{constructor(e,r){js(e,r),super(e,1,e.columns),this.row=r}set(e,r,n){return this.matrix.set(this.row,r,n),this}get(e,r){return this.matrix.get(this.row,r)}}class Clt extends Vf{constructor(e,r){r=mhe(e,r),super(e,r.length,e.columns),this.rowIndices=r}set(e,r,n){return this.matrix.set(this.rowIndices[e],r,n),this}get(e,r){return this.matrix.get(this.rowIndices[e],r)}}class a3 extends Vf{constructor(e,r,n){let i=ghe(e,r,n);super(e,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(e,r,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[r],n),this}get(e,r){return this.matrix.get(this.rowIndices[e],this.columnIndices[r])}}class klt extends Vf{constructor(e,r,n,i,a){z4(e,r,n,i,a),super(e,n-r+1,a-i+1),this.startRow=r,this.startColumn=i}set(e,r,n){return this.matrix.set(this.startRow+e,this.startColumn+r,n),this}get(e,r){return this.matrix.get(this.startRow+e,this.startColumn+r)}}class Mlt extends Vf{constructor(e){super(e,e.columns,e.rows)}set(e,r,n){return this.matrix.set(r,e,n),this}get(e,r){return this.matrix.get(r,e)}}class whe extends Lr{constructor(e,r={}){const{rows:n=1}=r;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,r,n){let i=this._calculateIndex(e,r);return this.data[i]=n,this}get(e,r){let n=this._calculateIndex(e,r);return this.data[n]}_calculateIndex(e,r){return e*this.columns+r}}class Es extends Lr{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,r,n){return this.data[e][r]=n,this}get(e,r){return this.data[e][r]}}function Alt(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new Es(t):new whe(t,e);throw new Error("the argument is not an array")}class _k{constructor(e){e=Es.checkMatrix(e);let r=e.clone(),n=r.rows,i=r.columns,a=new Float64Array(n),o=1,s,l,u,c,f,h,d,p,v;for(s=0;s<n;s++)a[s]=s;for(p=new Float64Array(n),l=0;l<i;l++){for(s=0;s<n;s++)p[s]=r.get(s,l);for(s=0;s<n;s++){for(v=Math.min(s,l),f=0,u=0;u<v;u++)f+=r.get(s,u)*p[u];p[s]-=f,r.set(s,l,p[s])}for(c=l,s=l+1;s<n;s++)Math.abs(p[s])>Math.abs(p[c])&&(c=s);if(c!==l){for(u=0;u<i;u++)h=r.get(c,u),r.set(c,u,r.get(l,u)),r.set(l,u,h);d=a[c],a[c]=a[l],a[l]=d,o=-o}if(l<n&&r.get(l,l)!==0)for(s=l+1;s<n;s++)r.set(s,l,r.get(s,l)/r.get(l,l))}this.LU=r,this.pivotVector=a,this.pivotSign=o}isSingular(){let e=this.LU,r=e.columns;for(let n=0;n<r;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=Vt.checkMatrix(e);let r=this.LU;if(r.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),o=r.columns,s,l,u;for(u=0;u<o;u++)for(s=u+1;s<o;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u));for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/r.get(u,u));for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let r=this.pivotSign,n=e.columns;for(let i=0;i<n;i++)r*=e.get(i,i);return r}get lowerTriangularMatrix(){let e=this.LU,r=e.rows,n=e.columns,i=new Vt(r,n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)a>o?i.set(a,o,e.get(a,o)):a===o?i.set(a,o,1):i.set(a,o,0);return i}get upperTriangularMatrix(){let e=this.LU,r=e.rows,n=e.columns,i=new Vt(r,n);for(let a=0;a<r;a++)for(let o=0;o<n;o++)a<=o?i.set(a,o,e.get(a,o)):i.set(a,o,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function lf(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):e!==0?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class j4{constructor(e){e=Es.checkMatrix(e);let r=e.clone(),n=e.rows,i=e.columns,a=new Float64Array(i),o,s,l,u;for(l=0;l<i;l++){let c=0;for(o=l;o<n;o++)c=lf(c,r.get(o,l));if(c!==0){for(r.get(l,l)<0&&(c=-c),o=l;o<n;o++)r.set(o,l,r.get(o,l)/c);for(r.set(l,l,r.get(l,l)+1),s=l+1;s<i;s++){for(u=0,o=l;o<n;o++)u+=r.get(o,l)*r.get(o,s);for(u=-u/r.get(l,l),o=l;o<n;o++)r.set(o,s,r.get(o,s)+u*r.get(o,l))}}a[l]=-c}this.QR=r,this.Rdiag=a}solve(e){e=Vt.checkMatrix(e);let r=this.QR,n=r.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),o=r.columns,s,l,u,c;for(u=0;u<o;u++)for(l=0;l<i;l++){for(c=0,s=u;s<n;s++)c+=r.get(s,u)*a.get(s,l);for(c=-c/r.get(u,u),s=u;s<n;s++)a.set(s,l,a.get(s,l)+c*r.get(s,u))}for(u=o-1;u>=0;u--){for(l=0;l<i;l++)a.set(u,l,a.get(u,l)/this.Rdiag[u]);for(s=0;s<u;s++)for(l=0;l<i;l++)a.set(s,l,a.get(s,l)-a.get(u,l)*r.get(s,u))}return a.subMatrix(0,o-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let r=0;r<e;r++)if(this.Rdiag[r]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,r=e.columns,n=new Vt(r,r),i,a;for(i=0;i<r;i++)for(a=0;a<r;a++)i<a?n.set(i,a,e.get(i,a)):i===a?n.set(i,a,this.Rdiag[i]):n.set(i,a,0);return n}get orthogonalMatrix(){let e=this.QR,r=e.rows,n=e.columns,i=new Vt(r,n),a,o,s,l;for(s=n-1;s>=0;s--){for(a=0;a<r;a++)i.set(a,s,0);for(i.set(s,s,1),o=s;o<n;o++)if(e.get(s,s)!==0){for(l=0,a=s;a<r;a++)l+=e.get(a,s)*i.get(a,o);for(l=-l/e.get(s,s),a=s;a<r;a++)i.set(a,o,i.get(a,o)+l*e.get(a,s))}}return i}}class Ym{constructor(e,r={}){e=Es.checkMatrix(e);let n=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=r;let l=!!a,u=!!o,c=!1,f;if(n<i)if(!s)f=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=e.transpose(),n=f.rows,i=f.columns,c=!0;let C=l;l=u,u=C}else f=e.clone();let h=Math.min(n,i),d=Math.min(n+1,i),p=new Float64Array(d),v=new Vt(n,h),g=new Vt(i,i),m=new Float64Array(i),y=new Float64Array(n),w=new Float64Array(d);for(let C=0;C<d;C++)w[C]=C;let b=Math.min(n-1,i),x=Math.max(0,Math.min(i-2,n)),S=Math.max(b,x);for(let C=0;C<S;C++){if(C<b){p[C]=0;for(let M=C;M<n;M++)p[C]=lf(p[C],f.get(M,C));if(p[C]!==0){f.get(C,C)<0&&(p[C]=-p[C]);for(let M=C;M<n;M++)f.set(M,C,f.get(M,C)/p[C]);f.set(C,C,f.get(C,C)+1)}p[C]=-p[C]}for(let M=C+1;M<i;M++){if(C<b&&p[C]!==0){let A=0;for(let T=C;T<n;T++)A+=f.get(T,C)*f.get(T,M);A=-A/f.get(C,C);for(let T=C;T<n;T++)f.set(T,M,f.get(T,M)+A*f.get(T,C))}m[M]=f.get(C,M)}if(l&&C<b)for(let M=C;M<n;M++)v.set(M,C,f.get(M,C));if(C<x){m[C]=0;for(let M=C+1;M<i;M++)m[C]=lf(m[C],m[M]);if(m[C]!==0){m[C+1]<0&&(m[C]=0-m[C]);for(let M=C+1;M<i;M++)m[M]/=m[C];m[C+1]+=1}if(m[C]=-m[C],C+1<n&&m[C]!==0){for(let M=C+1;M<n;M++)y[M]=0;for(let M=C+1;M<n;M++)for(let A=C+1;A<i;A++)y[M]+=m[A]*f.get(M,A);for(let M=C+1;M<i;M++){let A=-m[M]/m[C+1];for(let T=C+1;T<n;T++)f.set(T,M,f.get(T,M)+A*y[T])}}if(u)for(let M=C+1;M<i;M++)g.set(M,C,m[M])}}let E=Math.min(i,n+1);if(b<i&&(p[b]=f.get(b,b)),n<E&&(p[E-1]=0),x+1<E&&(m[x]=f.get(x,E-1)),m[E-1]=0,l){for(let C=b;C<h;C++){for(let M=0;M<n;M++)v.set(M,C,0);v.set(C,C,1)}for(let C=b-1;C>=0;C--)if(p[C]!==0){for(let M=C+1;M<h;M++){let A=0;for(let T=C;T<n;T++)A+=v.get(T,C)*v.get(T,M);A=-A/v.get(C,C);for(let T=C;T<n;T++)v.set(T,M,v.get(T,M)+A*v.get(T,C))}for(let M=C;M<n;M++)v.set(M,C,-v.get(M,C));v.set(C,C,1+v.get(C,C));for(let M=0;M<C-1;M++)v.set(M,C,0)}else{for(let M=0;M<n;M++)v.set(M,C,0);v.set(C,C,1)}}if(u)for(let C=i-1;C>=0;C--){if(C<x&&m[C]!==0)for(let M=C+1;M<i;M++){let A=0;for(let T=C+1;T<i;T++)A+=g.get(T,C)*g.get(T,M);A=-A/g.get(C+1,C);for(let T=C+1;T<i;T++)g.set(T,M,g.get(T,M)+A*g.get(T,C))}for(let M=0;M<i;M++)g.set(M,C,0);g.set(C,C,1)}let _=E-1,k=Number.EPSILON;for(;E>0;){let C,M;for(C=E-2;C>=-1&&C!==-1;C--){const A=Number.MIN_VALUE+k*Math.abs(p[C]+Math.abs(p[C+1]));if(Math.abs(m[C])<=A||Number.isNaN(m[C])){m[C]=0;break}}if(C===E-2)M=4;else{let A;for(A=E-1;A>=C&&A!==C;A--){let T=(A!==E?Math.abs(m[A]):0)+(A!==C+1?Math.abs(m[A-1]):0);if(Math.abs(p[A])<=k*T){p[A]=0;break}}A===C?M=3:A===E-1?M=1:(M=2,C=A)}switch(C++,M){case 1:{let A=m[E-2];m[E-2]=0;for(let T=E-2;T>=C;T--){let D=lf(p[T],A),F=p[T]/D,R=A/D;if(p[T]=D,T!==C&&(A=-R*m[T-1],m[T-1]=F*m[T-1]),u)for(let B=0;B<i;B++)D=F*g.get(B,T)+R*g.get(B,E-1),g.set(B,E-1,-R*g.get(B,T)+F*g.get(B,E-1)),g.set(B,T,D)}break}case 2:{let A=m[C-1];m[C-1]=0;for(let T=C;T<E;T++){let D=lf(p[T],A),F=p[T]/D,R=A/D;if(p[T]=D,A=-R*m[T],m[T]=F*m[T],l)for(let B=0;B<n;B++)D=F*v.get(B,T)+R*v.get(B,C-1),v.set(B,C-1,-R*v.get(B,T)+F*v.get(B,C-1)),v.set(B,T,D)}break}case 3:{const A=Math.max(Math.abs(p[E-1]),Math.abs(p[E-2]),Math.abs(m[E-2]),Math.abs(p[C]),Math.abs(m[C])),T=p[E-1]/A,D=p[E-2]/A,F=m[E-2]/A,R=p[C]/A,B=m[C]/A,N=((D+T)*(D-T)+F*F)/2,O=T*F*(T*F);let L=0;(N!==0||O!==0)&&(N<0?L=0-Math.sqrt(N*N+O):L=Math.sqrt(N*N+O),L=O/(N+L));let G=(R+T)*(R-T)+L,q=R*B;for(let K=C;K<E-1;K++){let V=lf(G,q);V===0&&(V=Number.MIN_VALUE);let le=G/V,ge=q/V;if(K!==C&&(m[K-1]=V),G=le*p[K]+ge*m[K],m[K]=le*m[K]-ge*p[K],q=ge*p[K+1],p[K+1]=le*p[K+1],u)for(let xe=0;xe<i;xe++)V=le*g.get(xe,K)+ge*g.get(xe,K+1),g.set(xe,K+1,-ge*g.get(xe,K)+le*g.get(xe,K+1)),g.set(xe,K,V);if(V=lf(G,q),V===0&&(V=Number.MIN_VALUE),le=G/V,ge=q/V,p[K]=V,G=le*m[K]+ge*p[K+1],p[K+1]=-ge*m[K]+le*p[K+1],q=ge*m[K+1],m[K+1]=le*m[K+1],l&&K<n-1)for(let xe=0;xe<n;xe++)V=le*v.get(xe,K)+ge*v.get(xe,K+1),v.set(xe,K+1,-ge*v.get(xe,K)+le*v.get(xe,K+1)),v.set(xe,K,V)}m[E-2]=G;break}case 4:{if(p[C]<=0&&(p[C]=p[C]<0?-p[C]:0,u))for(let A=0;A<=_;A++)g.set(A,C,-g.get(A,C));for(;C<_&&!(p[C]>=p[C+1]);){let A=p[C];if(p[C]=p[C+1],p[C+1]=A,u&&C<i-1)for(let T=0;T<i;T++)A=g.get(T,C+1),g.set(T,C+1,g.get(T,C)),g.set(T,C,A);if(l&&C<n-1)for(let T=0;T<n;T++)A=v.get(T,C+1),v.set(T,C+1,v.get(T,C)),v.set(T,C,A);C++}E--;break}}}if(c){let C=g;g=v,v=C}this.m=n,this.n=i,this.s=p,this.U=v,this.V=g}solve(e){let r=e,n=this.threshold,i=this.s.length,a=Vt.zeros(i,i);for(let h=0;h<i;h++)Math.abs(this.s[h])<=n?a.set(h,h,0):a.set(h,h,1/this.s[h]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,c=o.rows,f=Vt.zeros(u,c);for(let h=0;h<u;h++)for(let d=0;d<c;d++){let p=0;for(let v=0;v<i;v++)p+=l.get(h,v)*o.get(d,v);f.set(h,d,p)}return f.mmul(r)}solveForDiagonal(e){return this.solve(Vt.diag(e))}inverse(){let e=this.V,r=this.threshold,n=e.rows,i=e.columns,a=new Vt(n,this.s.length);for(let c=0;c<n;c++)for(let f=0;f<i;f++)Math.abs(this.s[f])>r&&a.set(c,f,e.get(c,f)/this.s[f]);let o=this.U,s=o.rows,l=o.columns,u=new Vt(n,s);for(let c=0;c<n;c++)for(let f=0;f<s;f++){let h=0;for(let d=0;d<l;d++)h+=a.get(c,d)*o.get(f,d);u.set(c,f,h)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>e&&r++;return r}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Vt.diag(this.s)}}function Tlt(t,e=!1){return t=Es.checkMatrix(t),e?new Ym(t).inverse():bhe(t,Vt.eye(t.rows))}function bhe(t,e,r=!1){return t=Es.checkMatrix(t),e=Es.checkMatrix(e),r?new Ym(t).solve(e):t.isSquare()?new _k(t).solve(e):new j4(t).solve(e)}function o3(t){if(t=Vt.checkMatrix(t),t.isSquare()){let e,r,n,i;if(t.columns===2)return e=t.get(0,0),r=t.get(0,1),n=t.get(1,0),i=t.get(1,1),e*i-r*n;if(t.columns===3){let a,o,s;return a=new a3(t,[1,2],[1,2]),o=new a3(t,[1,2],[0,2]),s=new a3(t,[1,2],[0,1]),e=t.get(0,0),r=t.get(0,1),n=t.get(0,2),e*o3(a)-r*o3(o)+n*o3(s)}else return new _k(t).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Olt(t,e){let r=[];for(let n=0;n<t;n++)n!==e&&r.push(n);return r}function Ilt(t,e,r,n=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(r,[0]);for(let o=0;o<a.rows;o++)Math.abs(a.get(o,0))<n&&a.set(o,0,0);return a.to1DArray()}}function Dlt(t,e={}){const{thresholdValue:r=1e-9,thresholdError:n=1e-9}=e;t=Vt.checkMatrix(t);let i=t.rows,a=new Vt(i,i);for(let o=0;o<i;o++){let s=Vt.columnVector(t.getRow(o)),l=t.subMatrixRow(Olt(i,o)).transpose(),c=new Ym(l).solve(s),f=Vt.sub(s,l.mmul(c)).abs().max();a.setRow(o,Ilt(f,c,o,r,n))}return a}function Plt(t,e=Number.EPSILON){t=Vt.checkMatrix(t);let r=new Ym(t,{autoTranspose:!0}),n=r.leftSingularVectors,i=r.rightSingularVectors,a=r.diagonal;for(let o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(Vt.diag(a).mmul(n.transpose()))}function Llt(t,e=t,r={}){t=new Vt(t);let n=!1;if(typeof e=="object"&&!Vt.isMatrix(e)&&!Array.isArray(e)?(r=e,e=t,n=!0):e=new Vt(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=r;i&&(t=t.center("column"),n||(e=e.center("column")));const a=t.transpose().mmul(e);for(let o=0;o<a.rows;o++)for(let s=0;s<a.columns;s++)a.set(o,s,a.get(o,s)*(1/(t.rows-1)));return a}function Rlt(t,e=t,r={}){t=new Vt(t);let n=!1;if(typeof e=="object"&&!Vt.isMatrix(e)&&!Array.isArray(e)?(r=e,e=t,n=!0):e=new Vt(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=r;i&&(t.center("column"),n||e.center("column")),a&&(t.scale("column"),n||e.scale("column"));const o=t.standardDeviation("column",{unbiased:!0}),s=n?o:e.standardDeviation("column",{unbiased:!0}),l=t.transpose().mmul(e);for(let u=0;u<l.rows;u++)for(let c=0;c<l.columns;c++)l.set(u,c,l.get(u,c)*(1/(o[u]*s[c]))*(1/(t.rows-1)));return l}class iX{constructor(e,r={}){const{assumeSymmetric:n=!1}=r;if(e=Es.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");let i=e.columns,a=new Vt(i,i),o=new Float64Array(i),s=new Float64Array(i),l=e,u,c,f=!1;if(n?f=!0:f=e.isSymmetric(),f){for(u=0;u<i;u++)for(c=0;c<i;c++)a.set(u,c,l.get(u,c));Nlt(i,s,o,a),Flt(i,s,o,a)}else{let h=new Vt(i,i),d=new Float64Array(i);for(c=0;c<i;c++)for(u=0;u<i;u++)h.set(u,c,l.get(u,c));Blt(i,h,d,a),$lt(i,s,o,a,h)}this.n=i,this.e=s,this.d=o,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,r=this.e,n=this.d,i=new Vt(e,e),a,o;for(a=0;a<e;a++){for(o=0;o<e;o++)i.set(a,o,0);i.set(a,a,n[a]),r[a]>0?i.set(a,a+1,r[a]):r[a]<0&&i.set(a,a-1,r[a])}return i}}function Nlt(t,e,r,n){let i,a,o,s,l,u,c,f;for(l=0;l<t;l++)r[l]=n.get(t-1,l);for(s=t-1;s>0;s--){for(f=0,o=0,u=0;u<s;u++)f=f+Math.abs(r[u]);if(f===0)for(e[s]=r[s-1],l=0;l<s;l++)r[l]=n.get(s-1,l),n.set(s,l,0),n.set(l,s,0);else{for(u=0;u<s;u++)r[u]/=f,o+=r[u]*r[u];for(i=r[s-1],a=Math.sqrt(o),i>0&&(a=-a),e[s]=f*a,o=o-i*a,r[s-1]=i-a,l=0;l<s;l++)e[l]=0;for(l=0;l<s;l++){for(i=r[l],n.set(l,s,i),a=e[l]+n.get(l,l)*i,u=l+1;u<=s-1;u++)a+=n.get(u,l)*r[u],e[u]+=n.get(u,l)*i;e[l]=a}for(i=0,l=0;l<s;l++)e[l]/=o,i+=e[l]*r[l];for(c=i/(o+o),l=0;l<s;l++)e[l]-=c*r[l];for(l=0;l<s;l++){for(i=r[l],a=e[l],u=l;u<=s-1;u++)n.set(u,l,n.get(u,l)-(i*e[u]+a*r[u]));r[l]=n.get(s-1,l),n.set(s,l,0)}}r[s]=o}for(s=0;s<t-1;s++){if(n.set(t-1,s,n.get(s,s)),n.set(s,s,1),o=r[s+1],o!==0){for(u=0;u<=s;u++)r[u]=n.get(u,s+1)/o;for(l=0;l<=s;l++){for(a=0,u=0;u<=s;u++)a+=n.get(u,s+1)*n.get(u,l);for(u=0;u<=s;u++)n.set(u,l,n.get(u,l)-a*r[u])}}for(u=0;u<=s;u++)n.set(u,s+1,0)}for(l=0;l<t;l++)r[l]=n.get(t-1,l),n.set(t-1,l,0);n.set(t-1,t-1,1),e[0]=0}function Flt(t,e,r,n){let i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;let b=0,x=0,S=Number.EPSILON;for(u=0;u<t;u++){for(x=Math.max(x,Math.abs(r[u])+Math.abs(e[u])),c=u;c<t&&!(Math.abs(e[c])<=S*x);)c++;if(c>u)do{for(i=r[u],f=(r[u+1]-i)/(2*e[u]),h=lf(f,1),f<0&&(h=-h),r[u]=e[u]/(f+h),r[u+1]=e[u]*(f+h),d=r[u+1],a=i-r[u],o=u+2;o<t;o++)r[o]-=a;for(b=b+a,f=r[c],p=1,v=p,g=p,m=e[u+1],y=0,w=0,o=c-1;o>=u;o--)for(g=v,v=p,w=y,i=p*e[o],a=p*f,h=lf(f,e[o]),e[o+1]=y*h,y=e[o]/h,p=f/h,f=p*r[o]-y*i,r[o+1]=a+y*(p*i+y*r[o]),l=0;l<t;l++)a=n.get(l,o+1),n.set(l,o+1,y*n.get(l,o)+p*a),n.set(l,o,p*n.get(l,o)-y*a);f=-y*w*g*m*e[u]/d,e[u]=y*f,r[u]=p*f}while(Math.abs(e[u])>S*x);r[u]=r[u]+b,e[u]=0}for(o=0;o<t-1;o++){for(l=o,f=r[o],s=o+1;s<t;s++)r[s]<f&&(l=s,f=r[s]);if(l!==o)for(r[l]=r[o],r[o]=f,s=0;s<t;s++)f=n.get(s,o),n.set(s,o,n.get(s,l)),n.set(s,l,f)}}function Blt(t,e,r,n){let i=0,a=t-1,o,s,l,u,c,f,h;for(f=i+1;f<=a-1;f++){for(h=0,u=f;u<=a;u++)h=h+Math.abs(e.get(u,f-1));if(h!==0){for(l=0,u=a;u>=f;u--)r[u]=e.get(u,f-1)/h,l+=r[u]*r[u];for(s=Math.sqrt(l),r[f]>0&&(s=-s),l=l-r[f]*s,r[f]=r[f]-s,c=f;c<t;c++){for(o=0,u=a;u>=f;u--)o+=r[u]*e.get(u,c);for(o=o/l,u=f;u<=a;u++)e.set(u,c,e.get(u,c)-o*r[u])}for(u=0;u<=a;u++){for(o=0,c=a;c>=f;c--)o+=r[c]*e.get(u,c);for(o=o/l,c=f;c<=a;c++)e.set(u,c,e.get(u,c)-o*r[c])}r[f]=h*r[f],e.set(f,f-1,h*s)}}for(u=0;u<t;u++)for(c=0;c<t;c++)n.set(u,c,u===c?1:0);for(f=a-1;f>=i+1;f--)if(e.get(f,f-1)!==0){for(u=f+1;u<=a;u++)r[u]=e.get(u,f-1);for(c=f;c<=a;c++){for(s=0,u=f;u<=a;u++)s+=r[u]*n.get(u,c);for(s=s/r[f]/e.get(f,f-1),u=f;u<=a;u++)n.set(u,c,n.get(u,c)+s*r[u])}}}function $lt(t,e,r,n,i){let a=t-1,o=0,s=t-1,l=Number.EPSILON,u=0,c=0,f=0,h=0,d=0,p=0,v=0,g=0,m,y,w,b,x,S,E,_,k,C,M,A,T,D,F;for(m=0;m<t;m++)for((m<o||m>s)&&(r[m]=i.get(m,m),e[m]=0),y=Math.max(m-1,0);y<t;y++)c=c+Math.abs(i.get(m,y));for(;a>=o;){for(b=a;b>o&&(p=Math.abs(i.get(b-1,b-1))+Math.abs(i.get(b,b)),p===0&&(p=c),!(Math.abs(i.get(b,b-1))<l*p));)b--;if(b===a)i.set(a,a,i.get(a,a)+u),r[a]=i.get(a,a),e[a]=0,a--,g=0;else if(b===a-1){if(E=i.get(a,a-1)*i.get(a-1,a),f=(i.get(a-1,a-1)-i.get(a,a))/2,h=f*f+E,v=Math.sqrt(Math.abs(h)),i.set(a,a,i.get(a,a)+u),i.set(a-1,a-1,i.get(a-1,a-1)+u),_=i.get(a,a),h>=0){for(v=f>=0?f+v:f-v,r[a-1]=_+v,r[a]=r[a-1],v!==0&&(r[a]=_-E/v),e[a-1]=0,e[a]=0,_=i.get(a,a-1),p=Math.abs(_)+Math.abs(v),f=_/p,h=v/p,d=Math.sqrt(f*f+h*h),f=f/d,h=h/d,y=a-1;y<t;y++)v=i.get(a-1,y),i.set(a-1,y,h*v+f*i.get(a,y)),i.set(a,y,h*i.get(a,y)-f*v);for(m=0;m<=a;m++)v=i.get(m,a-1),i.set(m,a-1,h*v+f*i.get(m,a)),i.set(m,a,h*i.get(m,a)-f*v);for(m=o;m<=s;m++)v=n.get(m,a-1),n.set(m,a-1,h*v+f*n.get(m,a)),n.set(m,a,h*n.get(m,a)-f*v)}else r[a-1]=_+f,r[a]=_+f,e[a-1]=v,e[a]=-v;a=a-2,g=0}else{if(_=i.get(a,a),k=0,E=0,b<a&&(k=i.get(a-1,a-1),E=i.get(a,a-1)*i.get(a-1,a)),g===10){for(u+=_,m=o;m<=a;m++)i.set(m,m,i.get(m,m)-_);p=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),_=k=.75*p,E=-.4375*p*p}if(g===30&&(p=(k-_)/2,p=p*p+E,p>0)){for(p=Math.sqrt(p),k<_&&(p=-p),p=_-E/((k-_)/2+p),m=o;m<=a;m++)i.set(m,m,i.get(m,m)-p);u+=p,_=k=E=.964}for(g=g+1,x=a-2;x>=b&&(v=i.get(x,x),d=_-v,p=k-v,f=(d*p-E)/i.get(x+1,x)+i.get(x,x+1),h=i.get(x+1,x+1)-v-d-p,d=i.get(x+2,x+1),p=Math.abs(f)+Math.abs(h)+Math.abs(d),f=f/p,h=h/p,d=d/p,!(x===b||Math.abs(i.get(x,x-1))*(Math.abs(h)+Math.abs(d))<l*(Math.abs(f)*(Math.abs(i.get(x-1,x-1))+Math.abs(v)+Math.abs(i.get(x+1,x+1))))));)x--;for(m=x+2;m<=a;m++)i.set(m,m-2,0),m>x+2&&i.set(m,m-3,0);for(w=x;w<=a-1&&(D=w!==a-1,w!==x&&(f=i.get(w,w-1),h=i.get(w+1,w-1),d=D?i.get(w+2,w-1):0,_=Math.abs(f)+Math.abs(h)+Math.abs(d),_!==0&&(f=f/_,h=h/_,d=d/_)),_!==0);w++)if(p=Math.sqrt(f*f+h*h+d*d),f<0&&(p=-p),p!==0){for(w!==x?i.set(w,w-1,-p*_):b!==x&&i.set(w,w-1,-i.get(w,w-1)),f=f+p,_=f/p,k=h/p,v=d/p,h=h/f,d=d/f,y=w;y<t;y++)f=i.get(w,y)+h*i.get(w+1,y),D&&(f=f+d*i.get(w+2,y),i.set(w+2,y,i.get(w+2,y)-f*v)),i.set(w,y,i.get(w,y)-f*_),i.set(w+1,y,i.get(w+1,y)-f*k);for(m=0;m<=Math.min(a,w+3);m++)f=_*i.get(m,w)+k*i.get(m,w+1),D&&(f=f+v*i.get(m,w+2),i.set(m,w+2,i.get(m,w+2)-f*d)),i.set(m,w,i.get(m,w)-f),i.set(m,w+1,i.get(m,w+1)-f*h);for(m=o;m<=s;m++)f=_*n.get(m,w)+k*n.get(m,w+1),D&&(f=f+v*n.get(m,w+2),n.set(m,w+2,n.get(m,w+2)-f*d)),n.set(m,w,n.get(m,w)-f),n.set(m,w+1,n.get(m,w+1)-f*h)}}}if(c!==0){for(a=t-1;a>=0;a--)if(f=r[a],h=e[a],h===0)for(b=a,i.set(a,a,1),m=a-1;m>=0;m--){for(E=i.get(m,m)-f,d=0,y=b;y<=a;y++)d=d+i.get(m,y)*i.get(y,a);if(e[m]<0)v=E,p=d;else if(b=m,e[m]===0?i.set(m,a,E!==0?-d/E:-d/(l*c)):(_=i.get(m,m+1),k=i.get(m+1,m),h=(r[m]-f)*(r[m]-f)+e[m]*e[m],S=(_*p-v*d)/h,i.set(m,a,S),i.set(m+1,a,Math.abs(_)>Math.abs(v)?(-d-E*S)/_:(-p-k*S)/v)),S=Math.abs(i.get(m,a)),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a,i.get(y,a)/S)}else if(h<0)for(b=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,h/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-f)/i.get(a,a-1))):(F=$E(0,-i.get(a-1,a),i.get(a-1,a-1)-f,h),i.set(a-1,a-1,F[0]),i.set(a-1,a,F[1])),i.set(a,a-1,0),i.set(a,a,1),m=a-2;m>=0;m--){for(C=0,M=0,y=b;y<=a;y++)C=C+i.get(m,y)*i.get(y,a-1),M=M+i.get(m,y)*i.get(y,a);if(E=i.get(m,m)-f,e[m]<0)v=E,d=C,p=M;else if(b=m,e[m]===0?(F=$E(-C,-M,E,h),i.set(m,a-1,F[0]),i.set(m,a,F[1])):(_=i.get(m,m+1),k=i.get(m+1,m),A=(r[m]-f)*(r[m]-f)+e[m]*e[m]-h*h,T=(r[m]-f)*2*h,A===0&&T===0&&(A=l*c*(Math.abs(E)+Math.abs(h)+Math.abs(_)+Math.abs(k)+Math.abs(v))),F=$E(_*d-v*C+h*M,_*p-v*M-h*C,A,T),i.set(m,a-1,F[0]),i.set(m,a,F[1]),Math.abs(_)>Math.abs(v)+Math.abs(h)?(i.set(m+1,a-1,(-C-E*i.get(m,a-1)+h*i.get(m,a))/_),i.set(m+1,a,(-M-E*i.get(m,a)-h*i.get(m,a-1))/_)):(F=$E(-d-k*i.get(m,a-1),-p-k*i.get(m,a),v,h),i.set(m+1,a-1,F[0]),i.set(m+1,a,F[1]))),S=Math.max(Math.abs(i.get(m,a-1)),Math.abs(i.get(m,a))),l*S*S>1)for(y=m;y<=a;y++)i.set(y,a-1,i.get(y,a-1)/S),i.set(y,a,i.get(y,a)/S)}for(m=0;m<t;m++)if(m<o||m>s)for(y=m;y<t;y++)n.set(m,y,i.get(m,y));for(y=t-1;y>=o;y--)for(m=o;m<=s;m++){for(v=0,w=o;w<=Math.min(y,s);w++)v=v+n.get(m,w)*i.get(w,y);n.set(m,y,v)}}}function $E(t,e,r,n){let i,a;return Math.abs(r)>Math.abs(n)?(i=n/r,a=r+i*n,[(t+i*e)/a,(e-i*t)/a]):(i=r/n,a=n+i*r,[(i*t+e)/a,(i*e-t)/a])}class aX{constructor(e){if(e=Es.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let r=e,n=r.rows,i=new Vt(n,n),a=!0,o,s,l;for(s=0;s<n;s++){let u=0;for(l=0;l<s;l++){let c=0;for(o=0;o<l;o++)c+=i.get(l,o)*i.get(s,o);c=(r.get(s,l)-c)/i.get(l,l),i.set(s,l,c),u=u+c*c}for(u=r.get(s,s)-u,a&=u>0,i.set(s,s,Math.sqrt(Math.max(u,0))),l=s+1;l<n;l++)i.set(s,l,0)}this.L=i,this.positiveDefinite=!!a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=Es.checkMatrix(e);let r=this.L,n=r.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),o,s,l;for(l=0;l<n;l++)for(s=0;s<i;s++){for(o=0;o<l;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*r.get(l,o));a.set(l,s,a.get(l,s)/r.get(l,l))}for(l=n-1;l>=0;l--)for(s=0;s<i;s++){for(o=l+1;o<n;o++)a.set(l,s,a.get(l,s)-a.get(o,s)*r.get(o,l));a.set(l,s,a.get(l,s)/r.get(l,l))}return a}get lowerTriangularMatrix(){return this.L}}class oX{constructor(e,r={}){e=Es.checkMatrix(e);let{Y:n}=r;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:o=1e-10}=r;let s;if(n){if(Array.isArray(n)&&typeof n[0]=="number"?n=Vt.columnVector(n):n=Es.checkMatrix(n),!n.isColumnVector()||n.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");s=n}else s=e.getColumnVector(0);let l=1,u,c,f,h;for(let d=0;d<a&&l>o;d++)f=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),f=f.div(f.norm()),u=e.mmul(f).div(f.transpose().mmul(f).get(0,0)),d>0&&(l=u.clone().sub(h).pow(2).sum()),h=u.clone(),n?(c=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),s=n.mmul(c).div(c.transpose().mmul(c).get(0,0))):s=u;if(n){let d=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));d=d.div(d.norm());let p=e.clone().sub(u.clone().mmul(d.transpose())),v=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),g=n.clone().sub(u.clone().mulS(v.get(0,0)).mmul(c.transpose()));this.t=u,this.p=d.transpose(),this.w=f.transpose(),this.q=c,this.u=s,this.s=u.transpose().mmul(u),this.xResidual=p,this.yResidual=g,this.betas=v}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),i?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(f.transpose()))}}const zlt=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:Lr,CHO:aX,CholeskyDecomposition:aX,EVD:iX,EigenvalueDecomposition:iX,LU:_k,LuDecomposition:_k,Matrix:Vt,MatrixColumnSelectionView:xlt,MatrixColumnView:blt,MatrixFlipColumnView:Slt,MatrixFlipRowView:Elt,MatrixRowSelectionView:Clt,MatrixRowView:_lt,MatrixSelectionView:a3,MatrixSubView:klt,MatrixTransposeView:Mlt,NIPALS:oX,Nipals:oX,QR:j4,QrDecomposition:j4,SVD:Ym,SingularValueDecomposition:Ym,WrapperMatrix1D:whe,WrapperMatrix2D:Es,correlation:Rlt,covariance:Llt,default:Vt,determinant:o3,inverse:Tlt,linearDependencies:Dlt,pseudoInverse:Plt,solve:bhe,wrap:Alt},Symbol.toStringTag,{value:"Module"})),xhe=xc(zlt);Object.defineProperty(iB,"__esModule",{value:!0});var g1=xhe,jlt=function(){function t(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return t.prototype.layout=function(){var e=this,r=e.dimension,n=e.distances,i=e.linkDistance;try{var a=g1.Matrix.mul(g1.Matrix.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new g1.SingularValueDecomposition(a),c=g1.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(v){return g1.Matrix.mul([v],[c]).toJSON()[0].splice(0,r)})}catch{for(var f=[],h=0;h<n.length;h++){var d=Math.random()*i,p=Math.random()*i;f.push([d,p])}return f}},t}();iB.default=jlt;var aB={};Object.defineProperty(aB,"__esModule",{value:!0});var Glt=800,Ult=function(){function t(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return t.prototype.layout=function(){var e=this,r=e.positions,n=[],i=e.iterations,a=e.width/10;e.maxDisplace=a,e.disp=n;for(var o=0;o<i;o++)r.forEach(function(s,l){n[l]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return r},t.prototype.getRepulsion=function(){var e=this,r=e.positions,n=e.nodes,i=e.disp,a=e.k,o=e.radii||[];r.forEach(function(s,l){i[l]={x:0,y:0},r.forEach(function(u,c){if(l!==c&&o[l]===o[c]){var f=s[0]-u[0],h=s[1]-u[1],d=Math.sqrt(f*f+h*h);if(d===0){d=1;var p=l>c?1:-1;f=.01*p,h=.01*p}if(d<e.nodeSizeFunc(n[l])/2+e.nodeSizeFunc(n[c])/2){var v=a*a/d;i[l].x+=f/d*v,i[l].y+=h/d*v}}})})},t.prototype.updatePositions=function(){var e=this,r=e.positions,n=e.disp,i=e.speed,a=e.strictRadial,o=e.focusID,s=e.maxDisplace||e.width/10;a&&n.forEach(function(u,c){var f=r[c][0]-r[o][0],h=r[c][1]-r[o][1],d=Math.sqrt(f*f+h*h),p=h/d,v=-f/d,g=Math.sqrt(u.x*u.x+u.y*u.y),m=Math.acos((p*u.x+v*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,p*=-1,v*=-1);var y=Math.cos(m)*g;u.x=p*y,u.y=v*y});var l=e.radii;r.forEach(function(u,c){if(c!==o){var f=Math.sqrt(n[c].x*n[c].x+n[c].y*n[c].y);if(f>0&&c!==o){var h=Math.min(s*(i/Glt),f);if(u[0]+=n[c].x/f*h,u[1]+=n[c].y/f*h,a){var d=u[0]-r[o][0],p=u[1]-r[o][1],v=Math.sqrt(d*d+p*p);d=d/v*l[c],p=p/v*l[c],u[0]=r[o][0]+d,u[1]=r[o][1]+p}}}})},t}();aB.default=Ult;var Wlt=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),She=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qA,"__esModule",{value:!0});qA.RadialLayout=void 0;var Fs=ii(),Vlt=di,Hlt=She(iB),Xlt=She(aB);function Ylt(t){for(var e=t.length,r=t[0].length,n=[],i=0;i<e;i++){for(var a=[],o=0;o<r;o++)t[i][o]!==0?a.push(1/(t[i][o]*t[i][o])):a.push(0);n.push(a)}return n}function qlt(t,e){var r=-1;return t.forEach(function(n,i){n.id===e&&(r=i)}),r}function sX(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Klt=function(t){Wlt(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges||[];if(!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var a=r.center;if(n.length===1){n[0].x=a[0],n[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}var o=r.linkDistance,s=null;if((0,Fs.isString)(r.focusNode)){for(var l=!1,u=0;u<n.length;u++)n[u].id===r.focusNode&&(s=n[u],r.focusNode=s,l=!0,u=n.length);l||(s=null)}else s=r.focusNode;s||(s=n[0],r.focusNode=s);var c=qlt(n,s.id);c<0&&(c=0),r.focusIndex=c;var f=(0,Fs.getAdjMatrix)({nodes:n,edges:i},!1),h=(0,Fs.floydWarshall)(f),d=r.maxToFocus(h,c);r.handleInfinity(h,c,d+1),r.distances=h;var p=h[c],v=r.width||500,g=r.height||500,m=v-a[0]>a[0]?a[0]:v-a[0],y=g-a[1]>a[1]?a[1]:g-a[1];m===0&&(m=v/2),y===0&&(y=g/2);var w=y>m?m:y,b=Math.max.apply(Math,p),x=[];p.forEach(function(N,O){r.unitRadius||(r.unitRadius=w/b),x[O]=N*r.unitRadius}),r.radii=x;var S=r.eIdealDisMatrix();r.eIdealDistances=S;var E=Ylt(S);r.weights=E;var _=new Hlt.default({linkDistance:o,distances:S}),k=_.layout();k.forEach(function(N){(0,Fs.isNaN)(N[0])&&(N[0]=Math.random()*o),(0,Fs.isNaN)(N[1])&&(N[1]=Math.random()*o)}),r.positions=k,k.forEach(function(N,O){n[O].x=N[0]+a[0],n[O].y=N[1]+a[1]}),k.forEach(function(N){N[0]-=k[c][0],N[1]-=k[c][1]}),r.run();var C=r.preventOverlap,M=r.nodeSize,A,T=r.strictRadial;if(C){var D=r.nodeSpacing,F;(0,Fs.isNumber)(D)?F=function(){return D}:(0,Fs.isFunction)(D)?F=D:F=function(){return 0},M?(0,Fs.isArray)(M)?A=function(N){var O=M[0]>M[1]?M[0]:M[1];return O+F(N)}:A=function(N){return M+F(N)}:A=function(N){if(N.size){if((0,Fs.isArray)(N.size)){var O=N.size[0]>N.size[1]?N.size[0]:N.size[1];return O+F(N)}if((0,Fs.isObject)(N.size)){var O=N.size.width>N.size.height?N.size.width:N.size.height;return O+F(N)}return N.size+F(N)}return 10+F(N)};var R={nodes:n,nodeSizeFunc:A,adjMatrix:f,positions:k,radii:x,height:g,width:v,strictRadial:T,focusID:c,iterations:r.maxPreventOverlapIteration||200,k:k.length/4.5},B=new Xlt.default(R);k=B.layout()}return k.forEach(function(N,O){n[O].x=N[0]+a[0],n[O].y=N[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:i}},e.prototype.run=function(){for(var r=this,n=r.maxIteration,i=r.positions||[],a=r.weights||[],o=r.eIdealDistances||[],s=r.radii||[],l=0;l<=n;l++){var u=l/n;r.oneIteration(u,i,s,o,a)}},e.prototype.oneIteration=function(r,n,i,a,o){var s=this,l=1-r,u=s.focusIndex;n.forEach(function(c,f){var h=sX(c,[0,0]),d=h===0?0:1/h;if(f!==u){var p=0,v=0,g=0;n.forEach(function(y,w){if(f!==w){var b=sX(c,y),x=b===0?0:1/b,S=a[w][f];g+=o[f][w],p+=o[f][w]*(y[0]+S*(c[0]-y[0])*x),v+=o[f][w]*(y[1]+S*(c[1]-y[1])*x)}});var m=i[f]===0?0:1/i[f];g*=l,g+=r*m*m,p*=l,p+=r*m*c[0]*d,c[0]=p/g,v*=l,v+=r*m*c[1]*d,c[1]=v/g}})},e.prototype.eIdealDisMatrix=function(){var r=this,n=r.nodes;if(!n)return[];var i=r.distances,a=r.linkDistance,o=r.radii||[],s=r.unitRadius||50,l=[];return i&&i.forEach(function(u,c){var f=[];u.forEach(function(h,d){if(c===d)f.push(0);else if(o[c]===o[d])if(r.sortBy==="data")f.push(h*(Math.abs(c-d)*r.sortStrength)/(o[c]/s));else if(r.sortBy){var p=n[c][r.sortBy]||0,v=n[d][r.sortBy]||0;(0,Fs.isString)(p)&&(p=p.charCodeAt(0)),(0,Fs.isString)(v)&&(v=v.charCodeAt(0)),f.push(h*(Math.abs(p-v)*r.sortStrength)/(o[c]/s))}else f.push(h*a/(o[c]/s));else{var g=(a+s)/2;f.push(h*g)}}),l.push(f)}),l},e.prototype.handleInfinity=function(r,n,i){for(var a=r.length,o=0;o<a;o++)if(r[n][o]===1/0){r[n][o]=i,r[o][n]=i;for(var s=0;s<a;s++)r[o][s]!==1/0&&r[n][s]===1/0&&(r[n][s]=i+r[o][s],r[s][n]=i+r[o][s])}for(var o=0;o<a;o++)if(o!==n){for(var s=0;s<a;s++)if(r[o][s]===1/0){var l=Math.abs(r[n][o]-r[n][s]);l=l===0?1:l,r[o][s]=l}}},e.prototype.maxToFocus=function(r,n){for(var i=0,a=0;a<r[n].length;a++)r[n][a]!==1/0&&(i=r[n][a]>i?r[n][a]:i);return i},e.prototype.getType=function(){return"radial"},e}(Vlt.Base);qA.RadialLayout=Klt;(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Oe&&Oe.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(qA,t)})(nB);var Qb={},Qlt=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Qb,"__esModule",{value:!0});Qb.ConcentricLayout=void 0;var Tu=ii(),Zlt=di,Jlt=function(t){Qlt(e,t);function e(r){var n=t.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=3/2*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var r,n,i=this,a=i.nodes,o=i.edges,s=a.length;if(s===0){(r=i.onLayoutEnd)===null||r===void 0||r.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var l=i.center;if(s===1){a[0].x=l[0],a[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}var u=i.nodeSize,c=i.nodeSpacing,f=[],h,d=0;(0,Tu.isArray)(u)?h=Math.max(u[0],u[1]):h=u,(0,Tu.isArray)(c)?d=Math.max(c[0],c[1]):(0,Tu.isNumber)(c)&&(d=c),a.forEach(function(T){f.push(T);var D=h;(0,Tu.isArray)(T.size)?D=Math.max(T.size[0],T.size[1]):(0,Tu.isNumber)(T.size)?D=T.size:(0,Tu.isObject)(T.size)&&(D=Math.max(T.size.width,T.size.height)),h=Math.max(h,D),(0,Tu.isFunction)(c)&&(d=Math.max(c(T),d))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;var p={},v={};if(f.forEach(function(T,D){p[T.id]=T,v[T.id]=D}),(i.sortBy==="degree"||!(0,Tu.isString)(i.sortBy)||f[0][i.sortBy]===void 0)&&(i.sortBy="degree",!(0,Tu.isNumber)(a[0].degree))){var g=(0,Tu.getDegree)(a.length,v,o);f.forEach(function(T,D){T.degree=g[D].all})}f.sort(function(T,D){return D[i.sortBy]-T[i.sortBy]}),i.maxValueNode=f[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;var m=[[]],y=m[0];f.forEach(function(T){if(y.length>0){var D=Math.abs(y[0][i.sortBy]-T[i.sortBy]);i.maxLevelDiff&&D>=i.maxLevelDiff&&(y=[],m.push(y))}y.push(T)});var w=h+(d||i.minNodeSpacing);if(!i.preventOverlap){var b=m.length>0&&m[0].length>1,x=Math.min(i.width,i.height)/2-w,S=x/(m.length+(b?1:0));w=Math.min(w,S)}var E=0;if(m.forEach(function(T){var D=i.sweep;D===void 0&&(D=2*Math.PI-2*Math.PI/T.length);var F=T.dTheta=D/Math.max(1,T.length-1);if(T.length>1&&i.preventOverlap){var R=Math.cos(F)-Math.cos(0),B=Math.sin(F)-Math.sin(0),N=Math.sqrt(w*w/(R*R+B*B));E=Math.max(N,E)}T.r=E,E+=w}),i.equidistant){for(var _=0,k=0,C=0;C<m.length;C++){var M=m[C],A=M.r-k;_=Math.max(_,A)}k=0,m.forEach(function(T,D){D===0&&(k=T.r),T.r=k,k+=_})}return m.forEach(function(T){var D=T.dTheta,F=T.r;T.forEach(function(R,B){var N=i.startAngle+(i.clockwise?1:-1)*D*B;R.x=l[0]+F*Math.cos(N),R.y=l[1]+F*Math.sin(N)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:o}},e.prototype.getType=function(){return"concentric"},e}(Zlt.Base);Qb.ConcentricLayout=Jlt;var Zb={},eut=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Zb,"__esModule",{value:!0});Zb.MDSLayout=void 0;var m1=xhe,pD=ii(),tut=di,rut=function(t){eut(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges,a=i===void 0?[]:i,o=r.center;if(!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],r.onLayoutEnd&&r.onLayoutEnd();return}var s=r.linkDistance,l=(0,pD.getAdjMatrix)({nodes:n,edges:a},!1),u=(0,pD.floydWarshall)(l);r.handleInfinity(u);var c=(0,pD.scaleMatrix)(u,s);r.scaledDistances=c;var f=r.runMDS();return r.positions=f,f.forEach(function(h,d){n[d].x=h[0]+o[0],n[d].y=h[1]+o[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:a}},e.prototype.runMDS=function(){var r=this,n=2,i=r.scaledDistances,a=m1.Matrix.mul(m1.Matrix.pow(i,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new m1.SingularValueDecomposition(a),c=m1.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(f){return m1.Matrix.mul([f],[c]).toJSON()[0].splice(0,n)})},e.prototype.handleInfinity=function(r){var n=-999999;r.forEach(function(i){i.forEach(function(a){a!==1/0&&n<a&&(n=a)})}),r.forEach(function(i,a){i.forEach(function(o,s){o===1/0&&(r[a][s]=n)})})},e.prototype.getType=function(){return"mds"},e}(tut.Base);Zb.MDSLayout=rut;var Jb={},nut=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Jb,"__esModule",{value:!0});Jb.FruchtermanLayout=void 0;var iut=di,ci=ii(),aut=800,out=function(t){nut(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var r=this,n,i,a=this,o=a.nodes;if(a.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(a.timeInterval),!o||o.length===0){(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var s=a.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],(i=a.onLayoutEnd)===null||i===void 0||i.call(a);return}var l={},u={};return o.forEach(function(c,f){(0,ci.isNumber)(c.x)||(c.x=Math.random()*r.width),(0,ci.isNumber)(c.y)||(c.y=Math.random()*r.height),l[c.id]=c,u[c.id]=f}),a.nodeMap=l,a.nodeIdxMap=u,a.run()},e.prototype.run=function(){var r,n=this,i=n.nodes;if(i){var a=n.edges,o=n.maxIteration,s=n.workerEnabled,l=n.clustering,u=n.animate,c={};if(l&&i.forEach(function(d){c[d.cluster]===void 0&&(c[d.cluster]={name:d.cluster,cx:0,cy:0,count:0})}),s||!u){for(var f=0;f<o;f++)n.runOneStep(c);(r=n.onLayoutEnd)===null||r===void 0||r.call(n)}else{if(typeof window>"u")return;var h=0;this.timeInterval=window.setInterval(function(){var d;n.runOneStep(c),h++,h>=o&&((d=n.onLayoutEnd)===null||d===void 0||d.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:i,edges:a}}},e.prototype.runOneStep=function(r){var n,i=this,a=i.nodes;if(a){var o=i.edges,s=i.center,l=i.gravity,u=i.speed,c=i.clustering,f=i.height*i.width,h=Math.sqrt(f)/10,d=f/(a.length+1),p=Math.sqrt(d),v=[];if(a.forEach(function(y,w){v[w]={x:0,y:0}}),i.applyCalculate(a,o,v,p,d),c){for(var g in r)r[g].cx=0,r[g].cy=0,r[g].count=0;a.forEach(function(y){var w=r[y.cluster];(0,ci.isNumber)(y.x)&&(w.cx+=y.x),(0,ci.isNumber)(y.y)&&(w.cy+=y.y),w.count++});for(var g in r)r[g].cx/=r[g].count,r[g].cy/=r[g].count;var m=i.clusterGravity||l;a.forEach(function(y,w){if(!(!(0,ci.isNumber)(y.x)||!(0,ci.isNumber)(y.y))){var b=r[y.cluster],x=Math.sqrt((y.x-b.cx)*(y.x-b.cx)+(y.y-b.cy)*(y.y-b.cy)),S=p*m;v[w].x-=S*(y.x-b.cx)/x,v[w].y-=S*(y.y-b.cy)/x}})}a.forEach(function(y,w){if(!(!(0,ci.isNumber)(y.x)||!(0,ci.isNumber)(y.y))){var b=.01*p*l;v[w].x-=b*(y.x-s[0]),v[w].y-=b*(y.y-s[1])}}),a.forEach(function(y,w){if((0,ci.isNumber)(y.fx)&&(0,ci.isNumber)(y.fy)){y.x=y.fx,y.y=y.fy;return}if(!(!(0,ci.isNumber)(y.x)||!(0,ci.isNumber)(y.y))){var b=Math.sqrt(v[w].x*v[w].x+v[w].y*v[w].y);if(b>0){var x=Math.min(h*(u/aut),b);y.x+=v[w].x/b*x,y.y+=v[w].y/b*x}}}),(n=i.tick)===null||n===void 0||n.call(i)}},e.prototype.applyCalculate=function(r,n,i,a,o){var s=this;s.calRepulsive(r,i,o),n&&s.calAttractive(n,i,a)},e.prototype.calRepulsive=function(r,n,i){r.forEach(function(a,o){n[o]={x:0,y:0},r.forEach(function(s,l){if(o!==l&&!(!(0,ci.isNumber)(a.x)||!(0,ci.isNumber)(s.x)||!(0,ci.isNumber)(a.y)||!(0,ci.isNumber)(s.y))){var u=a.x-s.x,c=a.y-s.y,f=u*u+c*c;if(f===0){f=1;var h=o>l?1:-1;u=.01*h,c=.01*h}var d=i/f;n[o].x+=u*d,n[o].y+=c*d}})})},e.prototype.calAttractive=function(r,n,i){var a=this;r.forEach(function(o){var s=(0,ci.getEdgeTerminal)(o,"source"),l=(0,ci.getEdgeTerminal)(o,"target");if(!(!s||!l)){var u=a.nodeIdxMap[s],c=a.nodeIdxMap[l];if(u!==c){var f=a.nodeMap[s],h=a.nodeMap[l];if(!(!(0,ci.isNumber)(h.x)||!(0,ci.isNumber)(f.x)||!(0,ci.isNumber)(h.y)||!(0,ci.isNumber)(f.y))){var d=h.x-f.x,p=h.y-f.y,v=Math.sqrt(d*d+p*p),g=v*v/i;n[c].x-=d/v*g,n[c].y-=p/v*g,n[u].x+=d/v*g,n[u].y+=p/v*g}}}})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(iut.Base);Jb.FruchtermanLayout=out;var ex={};function lX(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(u){r(u);return}s.done?e(l):Promise.resolve(l).then(n,i)}function td(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(l){lX(a,n,i,o,s,"next",l)}function s(l){lX(a,n,i,o,s,"throw",l)}o(void 0)})}}function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(t)}function sut(t,e){if(qm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ehe(t){var e=sut(t,"string");return qm(e)=="symbol"?e:String(e)}function Et(t,e,r){return e=Ehe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function au(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ehe(n.key),n)}}function ou(t,e,r){return e&&uX(t.prototype,e),r&&uX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var lut=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe,_he=lut,uut=_he,cut=typeof self=="object"&&self&&self.Object===Object&&self,fut=uut||cut||Function("return this")(),hut=fut,dut=hut,put=dut.Symbol,Che=put,cX=Che,khe=Object.prototype,vut=khe.hasOwnProperty,gut=khe.toString,y1=cX?cX.toStringTag:void 0;function mut(t){var e=vut.call(t,y1),r=t[y1];try{t[y1]=void 0;var n=!0}catch{}var i=gut.call(t);return n&&(e?t[y1]=r:delete t[y1]),i}var yut=mut,wut=Object.prototype,but=wut.toString;function xut(t){return but.call(t)}var Sut=xut,fX=Che,Eut=yut,_ut=Sut,Cut="[object Null]",kut="[object Undefined]",hX=fX?fX.toStringTag:void 0;function Mut(t){return t==null?t===void 0?kut:Cut:hX&&hX in Object(t)?Eut(t):_ut(t)}var oB=Mut,Aut=9007199254740991;function Tut(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Aut}var Out=Tut;function Iut(t){return t!=null&&typeof t=="object"}var sB=Iut,Dut=oB,Put=Out,Lut=sB,Rut="[object Arguments]",Nut="[object Array]",Fut="[object Boolean]",But="[object Date]",$ut="[object Error]",zut="[object Function]",jut="[object Map]",Gut="[object Number]",Uut="[object Object]",Wut="[object RegExp]",Vut="[object Set]",Hut="[object String]",Xut="[object WeakMap]",Yut="[object ArrayBuffer]",qut="[object DataView]",Kut="[object Float32Array]",Qut="[object Float64Array]",Zut="[object Int8Array]",Jut="[object Int16Array]",ect="[object Int32Array]",tct="[object Uint8Array]",rct="[object Uint8ClampedArray]",nct="[object Uint16Array]",ict="[object Uint32Array]",Dn={};Dn[Kut]=Dn[Qut]=Dn[Zut]=Dn[Jut]=Dn[ect]=Dn[tct]=Dn[rct]=Dn[nct]=Dn[ict]=!0;Dn[Rut]=Dn[Nut]=Dn[Yut]=Dn[Fut]=Dn[qut]=Dn[But]=Dn[$ut]=Dn[zut]=Dn[jut]=Dn[Gut]=Dn[Uut]=Dn[Wut]=Dn[Vut]=Dn[Hut]=Dn[Xut]=!1;function act(t){return Lut(t)&&Put(t.length)&&!!Dn[Dut(t)]}var oct=act;function sct(t){return function(e){return t(e)}}var lct=sct,Ck={exports:{}};Ck.exports;(function(t,e){var r=_he,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Ck,Ck.exports);var uct=Ck.exports,cct=oct,fct=lct,dX=uct,pX=dX&&dX.isTypedArray,hct=pX?fct(pX):cct,dct=hct;const kk=_s(dct);var pct=oB,vct=sB,gct="[object Number]";function mct(t){return typeof t=="number"||vct(t)&&pct(t)==gct}var yct=mct;const wct=_s(yct);var bct=Array.isArray,xct=bct;const Sct=_s(xct);var Mhe={exports:{}},Ahe={exports:{}};(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ahe);var Ect=Ahe.exports;(function(t){var e=Ect.default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(O,L,G){O[L]=G.value},l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function h(O,L,G){return Object.defineProperty(O,L,{value:G,enumerable:!0,configurable:!0,writable:!0}),O[L]}try{h({},"")}catch{h=function(G,q,K){return G[q]=K}}function d(O,L,G,q){var K=L&&L.prototype instanceof b?L:b,V=Object.create(K.prototype),le=new B(q||[]);return s(V,"_invoke",{value:T(O,G,le)}),V}function p(O,L,G){try{return{type:"normal",arg:O.call(L,G)}}catch(q){return{type:"throw",arg:q}}}i.wrap=d;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",w={};function b(){}function x(){}function S(){}var E={};h(E,u,function(){return this});var _=Object.getPrototypeOf,k=_&&_(_(N([])));k&&k!==a&&o.call(k,u)&&(E=k);var C=S.prototype=b.prototype=Object.create(E);function M(O){["next","throw","return"].forEach(function(L){h(O,L,function(G){return this._invoke(L,G)})})}function A(O,L){function G(K,V,le,ge){var xe=p(O[K],O,V);if(xe.type!=="throw"){var Ie=xe.arg,He=Ie.value;return He&&e(He)=="object"&&o.call(He,"__await")?L.resolve(He.__await).then(function(Ge){G("next",Ge,le,ge)},function(Ge){G("throw",Ge,le,ge)}):L.resolve(He).then(function(Ge){Ie.value=Ge,le(Ie)},function(Ge){return G("throw",Ge,le,ge)})}ge(xe.arg)}var q;s(this,"_invoke",{value:function(V,le){function ge(){return new L(function(xe,Ie){G(V,le,xe,Ie)})}return q=q?q.then(ge,ge):ge()}})}function T(O,L,G){var q=v;return function(K,V){if(q===m)throw new Error("Generator is already running");if(q===y){if(K==="throw")throw V;return{value:n,done:!0}}for(G.method=K,G.arg=V;;){var le=G.delegate;if(le){var ge=D(le,G);if(ge){if(ge===w)continue;return ge}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(q===v)throw q=y,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);q=m;var xe=p(O,L,G);if(xe.type==="normal"){if(q=G.done?y:g,xe.arg===w)continue;return{value:xe.arg,done:G.done}}xe.type==="throw"&&(q=y,G.method="throw",G.arg=xe.arg)}}}function D(O,L){var G=L.method,q=O.iterator[G];if(q===n)return L.delegate=null,G==="throw"&&O.iterator.return&&(L.method="return",L.arg=n,D(O,L),L.method==="throw")||G!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+G+"' method")),w;var K=p(q,O.iterator,L.arg);if(K.type==="throw")return L.method="throw",L.arg=K.arg,L.delegate=null,w;var V=K.arg;return V?V.done?(L[O.resultName]=V.value,L.next=O.nextLoc,L.method!=="return"&&(L.method="next",L.arg=n),L.delegate=null,w):V:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,w)}function F(O){var L={tryLoc:O[0]};1 in O&&(L.catchLoc=O[1]),2 in O&&(L.finallyLoc=O[2],L.afterLoc=O[3]),this.tryEntries.push(L)}function R(O){var L=O.completion||{};L.type="normal",delete L.arg,O.completion=L}function B(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(F,this),this.reset(!0)}function N(O){if(O||O===""){var L=O[u];if(L)return L.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var G=-1,q=function K(){for(;++G<O.length;)if(o.call(O,G))return K.value=O[G],K.done=!1,K;return K.value=n,K.done=!0,K};return q.next=q}}throw new TypeError(e(O)+" is not iterable")}return x.prototype=S,s(C,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:x,configurable:!0}),x.displayName=h(S,f,"GeneratorFunction"),i.isGeneratorFunction=function(O){var L=typeof O=="function"&&O.constructor;return!!L&&(L===x||(L.displayName||L.name)==="GeneratorFunction")},i.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,S):(O.__proto__=S,h(O,f,"GeneratorFunction")),O.prototype=Object.create(C),O},i.awrap=function(O){return{__await:O}},M(A.prototype),h(A.prototype,c,function(){return this}),i.AsyncIterator=A,i.async=function(O,L,G,q,K){K===void 0&&(K=Promise);var V=new A(d(O,L,G,q),K);return i.isGeneratorFunction(L)?V:V.next().then(function(le){return le.done?le.value:V.next()})},M(C),h(C,f,"Generator"),h(C,u,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),i.keys=function(O){var L=Object(O),G=[];for(var q in L)G.push(q);return G.reverse(),function K(){for(;G.length;){var V=G.pop();if(V in L)return K.value=V,K.done=!1,K}return K.done=!0,K}},i.values=N,B.prototype={constructor:B,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!L)for(var G in this)G.charAt(0)==="t"&&o.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=n)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var G=this;function q(Ie,He){return le.type="throw",le.arg=L,G.next=Ie,He&&(G.method="next",G.arg=n),!!He}for(var K=this.tryEntries.length-1;K>=0;--K){var V=this.tryEntries[K],le=V.completion;if(V.tryLoc==="root")return q("end");if(V.tryLoc<=this.prev){var ge=o.call(V,"catchLoc"),xe=o.call(V,"finallyLoc");if(ge&&xe){if(this.prev<V.catchLoc)return q(V.catchLoc,!0);if(this.prev<V.finallyLoc)return q(V.finallyLoc)}else if(ge){if(this.prev<V.catchLoc)return q(V.catchLoc,!0)}else{if(!xe)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return q(V.finallyLoc)}}}},abrupt:function(L,G){for(var q=this.tryEntries.length-1;q>=0;--q){var K=this.tryEntries[q];if(K.tryLoc<=this.prev&&o.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var V=K;break}}V&&(L==="break"||L==="continue")&&V.tryLoc<=G&&G<=V.finallyLoc&&(V=null);var le=V?V.completion:{};return le.type=L,le.arg=G,V?(this.method="next",this.next=V.finallyLoc,w):this.complete(le)},complete:function(L,G){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&G&&(this.next=G),w},finish:function(L){for(var G=this.tryEntries.length-1;G>=0;--G){var q=this.tryEntries[G];if(q.finallyLoc===L)return this.complete(q.completion,q.afterLoc),R(q),w}},catch:function(L){for(var G=this.tryEntries.length-1;G>=0;--G){var q=this.tryEntries[G];if(q.tryLoc===L){var K=q.completion;if(K.type==="throw"){var V=K.arg;R(q)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(L,G,q){return this.delegate={iterator:N(L),resultName:G,nextLoc:q},this.method==="next"&&(this.arg=n),w}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Mhe);var _ct=Mhe.exports,s3=_ct(),Cct=s3;try{regeneratorRuntime=s3}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s3:Function("r","regeneratorRuntime = r")(s3)}const Fa=_s(Cct);var kct=1;function The(){return kct++}var Qe;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Qe||(Qe={}));var Mct=function(){function t(){au(this,t),this.config=void 0}return ou(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(r){this.config=r}}]),t}(),Bw;(function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"})(Bw||(Bw={}));var vX;(function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"})(vX||(vX={}));var Km;(function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"})(Km||(Km={}));var E2;(function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"})(E2||(E2={}));var Act="__DefineValuePlaceholder__";function Tct(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function gX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gX(Object(r),!0).forEach(function(n){Et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ohe=function(){function t(e,r){au(this,t),this.engine=e,this.configService=r,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return ou(t,[{key:"init",value:function(){var r=this.configService.get(),n=r.canvas,i=r.engineOptions;this.initPromise=this.engine.init(mX({canvas:n||Tct(),antialiasing:!1},i))}},{key:"setBundle",value:function(r){this.compiledBundle=JSON.parse(JSON.stringify(r))}},{key:"setDispatch",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=r),this}},{key:"setMaxIteration",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=r),this}},{key:"setBinding",value:function(r,n){var i=this;if(typeof r=="string"){var a=wct(n)||kk(n)||Sct(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===r});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===r});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===Km.Uniform?this.model&&this.model.updateUniform(r,n):this.model&&this.model.updateBuffer(r,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(r).forEach(function(l){i.setBinding(l,r[l])});return this}},{key:"execute",value:function(){var e=td(Fa.mark(function n(){var i=this,a,o,s=arguments;return Fa.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,h=c.name;i.model.confirmInput(f.model,h)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"getOutput",value:function(){var e=td(Fa.mark(function n(){return Fa.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"compile",value:function(){var e=td(Fa.mark(function n(){var i,a,o;return Fa.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=mX({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?E2.WGSL:E2.GLSL450:E2.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(Act).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===Km.StorageBuffer){var c=1;u.type===Bw.FloatArray?c=1:u.type===Bw.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()}]),t}(),Ihe={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Oe,function(){var r=function(I){return I instanceof Uint8Array||I instanceof Uint16Array||I instanceof Uint32Array||I instanceof Int8Array||I instanceof Int16Array||I instanceof Int32Array||I instanceof Float32Array||I instanceof Float64Array||I instanceof Uint8ClampedArray},n=function(I,U){for(var Z=Object.keys(U),be=0;be<Z.length;++be)I[Z[be]]=U[Z[be]];return I},i=`
`;function a(I){return typeof atob<"u"?atob(I):"base64:"+I}function o(I){var U=new Error("(regl) "+I);throw console.error(U),U}function s(I,U){I||o(U)}function l(I){return I?": "+I:""}function u(I,U,Z){I in U||o("unknown parameter ("+I+")"+l(Z)+". possible values: "+Object.keys(U).join())}function c(I,U){r(I)||o("invalid parameter type"+l(U)+". must be a typed array")}function f(I,U){switch(U){case"number":return typeof I=="number";case"object":return typeof I=="object";case"string":return typeof I=="string";case"boolean":return typeof I=="boolean";case"function":return typeof I=="function";case"undefined":return typeof I>"u";case"symbol":return typeof I=="symbol"}}function h(I,U,Z){f(I,U)||o("invalid parameter type"+l(Z)+". expected "+U+", got "+typeof I)}function d(I,U){I>=0&&(I|0)===I||o("invalid parameter type, ("+I+")"+l(U)+". must be a nonnegative integer")}function p(I,U,Z){U.indexOf(I)<0&&o("invalid value"+l(Z)+". must be one of: "+U)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(I){Object.keys(I).forEach(function(U){v.indexOf(U)<0&&o('invalid regl constructor argument "'+U+'". must be one of '+v)})}function m(I,U){for(I=I+"";I.length<U;)I=" "+I;return I}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function w(I,U){this.number=I,this.line=U,this.errors=[]}function b(I,U,Z){this.file=I,this.line=U,this.message=Z}function x(){var I=new Error,U=(I.stack||I).toString(),Z=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(U);if(Z)return Z[1];var be=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(U);return be?be[1]:"unknown"}function S(){var I=new Error,U=(I.stack||I).toString(),Z=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(U);if(Z)return Z[1];var be=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(U);return be?be[1]:"unknown"}function E(I,U){var Z=I.split(`
`),be=1,Le=0,we={unknown:new y,0:new y};we.unknown.name=we[0].name=U||x(),we.unknown.lines.push(new w(0,""));for(var _e=0;_e<Z.length;++_e){var qe=Z[_e],Ze=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(qe);if(Ze)switch(Ze[1]){case"line":var nt=/(\d+)(\s+\d+)?/.exec(Ze[2]);nt&&(be=nt[1]|0,nt[2]&&(Le=nt[2]|0,Le in we||(we[Le]=new y)));break;case"define":var Je=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ze[2]);Je&&(we[Le].name=Je[1]?a(Je[2]):Je[2]);break}we[Le].lines.push(new w(be++,qe))}return Object.keys(we).forEach(function(st){var vt=we[st];vt.lines.forEach(function(Ke){vt.index[Ke.number]=Ke})}),we}function _(I){var U=[];return I.split(`
`).forEach(function(Z){if(!(Z.length<5)){var be=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Z);be?U.push(new b(be[1]|0,be[2]|0,be[3].trim())):Z.length>0&&U.push(new b("unknown",0,Z))}}),U}function k(I,U){U.forEach(function(Z){var be=I[Z.file];if(be){var Le=be.index[Z.line];if(Le){Le.errors.push(Z),be.hasErrors=!0;return}}I.unknown.hasErrors=!0,I.unknown.lines[0].errors.push(Z)})}function C(I,U,Z,be,Le){if(!I.getShaderParameter(U,I.COMPILE_STATUS)){var we=I.getShaderInfoLog(U),_e=be===I.FRAGMENT_SHADER?"fragment":"vertex";B(Z,"string",_e+" shader source must be a string",Le);var qe=E(Z,Le),Ze=_(we);k(qe,Ze),Object.keys(qe).forEach(function(nt){var Je=qe[nt];if(!Je.hasErrors)return;var st=[""],vt=[""];function Ke(lt,de){st.push(lt),vt.push(de||"")}Ke("file number "+nt+": "+Je.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Je.lines.forEach(function(lt){if(lt.errors.length>0){Ke(m(lt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ke(lt.line+i,"color:red; background-color:yellow; font-weight:bold");var de=0;lt.errors.forEach(function(Ce){var rt=Ce.message,wt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(rt);if(wt){var je=wt[1];switch(rt=wt[2],je){case"assign":je="=";break}de=Math.max(lt.line.indexOf(je,de),0)}else de=0;Ke(m("| ",6)),Ke(m("^^^",de+3)+i,"font-weight:bold"),Ke(m("| ",6)),Ke(rt+i,"font-weight:bold")}),Ke(m("| ",6)+i)}else Ke(m(lt.number,4)+"|  "),Ke(lt.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(vt[0]=st.join("%c"),console.log.apply(console,vt)):console.log(st.join(""))}),s.raise("Error compiling "+_e+" shader, "+qe[0].name)}}function M(I,U,Z,be,Le){if(!I.getProgramParameter(U,I.LINK_STATUS)){var we=I.getProgramInfoLog(U),_e=E(Z,Le),qe=E(be,Le),Ze='Error linking program with vertex shader, "'+qe[0].name+'", and fragment shader "'+_e[0].name+'"';typeof document<"u"?console.log("%c"+Ze+i+"%c"+we,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ze+i+we),s.raise(Ze)}}function A(I){I._commandRef=x()}function T(I,U,Z,be){A(I);function Le(Ze){return Ze?be.id(Ze):0}I._fragId=Le(I.static.frag),I._vertId=Le(I.static.vert);function we(Ze,nt){Object.keys(nt).forEach(function(Je){Ze[be.id(Je)]=!0})}var _e=I._uniformSet={};we(_e,U.static),we(_e,U.dynamic);var qe=I._attributeSet={};we(qe,Z.static),we(qe,Z.dynamic),I._hasCount="count"in I.static||"count"in I.dynamic||"elements"in I.static||"elements"in I.dynamic}function D(I,U){var Z=S();o(I+" in command "+(U||x())+(Z==="unknown"?"":" called from "+Z))}function F(I,U,Z){I||D(U,Z||x())}function R(I,U,Z,be){I in U||D("unknown parameter ("+I+")"+l(Z)+". possible values: "+Object.keys(U).join(),be||x())}function B(I,U,Z,be){f(I,U)||D("invalid parameter type"+l(Z)+". expected "+U+", got "+typeof I,be||x())}function N(I){I()}function O(I,U,Z){I.texture?p(I.texture._texture.internalformat,U,"unsupported texture format for attachment"):p(I.renderbuffer._renderbuffer.format,Z,"unsupported renderbuffer format for attachment")}var L=33071,G=9728,q=9984,K=9985,V=9986,le=9987,ge=5120,xe=5121,Ie=5122,He=5123,Ge=5124,ht=5125,dt=5126,It=32819,_t=32820,yt=33635,Tt=34042,kt=36193,mt={};mt[ge]=mt[xe]=1,mt[Ie]=mt[He]=mt[kt]=mt[yt]=mt[It]=mt[_t]=2,mt[Ge]=mt[ht]=mt[dt]=mt[Tt]=4;function xt(I,U){return I===_t||I===It||I===yt?2:I===Tt?4:mt[I]*U}function Nt(I){return!(I&I-1)&&!!I}function De(I,U,Z){var be,Le=U.width,we=U.height,_e=U.channels;s(Le>0&&Le<=Z.maxTextureSize&&we>0&&we<=Z.maxTextureSize,"invalid texture shape"),(I.wrapS!==L||I.wrapT!==L)&&s(Nt(Le)&&Nt(we),"incompatible wrap mode for texture, both width and height must be power of 2"),U.mipmask===1?Le!==1&&we!==1&&s(I.minFilter!==q&&I.minFilter!==V&&I.minFilter!==K&&I.minFilter!==le,"min filter requires mipmap"):(s(Nt(Le)&&Nt(we),"texture must be a square power of 2 to support mipmapping"),s(U.mipmask===(Le<<1)-1,"missing or incomplete mipmap data")),U.type===dt&&(Z.extensions.indexOf("oes_texture_float_linear")<0&&s(I.minFilter===G&&I.magFilter===G,"filter not supported, must enable oes_texture_float_linear"),s(!I.genMipmaps,"mipmap generation not supported with float textures"));var qe=U.images;for(be=0;be<16;++be)if(qe[be]){var Ze=Le>>be,nt=we>>be;s(U.mipmask&1<<be,"missing mipmap data");var Je=qe[be];if(s(Je.width===Ze&&Je.height===nt,"invalid shape for mip images"),s(Je.format===U.format&&Je.internalformat===U.internalformat&&Je.type===U.type,"incompatible type for mip image"),!Je.compressed)if(Je.data){var st=Math.ceil(xt(Je.type,_e)*Ze/Je.unpackAlignment)*Je.unpackAlignment;s(Je.data.byteLength===st*nt,"invalid data for image, buffer size is inconsistent with image format")}else Je.element||Je.copy}else I.genMipmaps||s((U.mipmask&1<<be)===0,"extra mipmap data");U.compressed&&s(!I.genMipmaps,"mipmap generation for compressed images not supported")}function J(I,U,Z,be){var Le=I.width,we=I.height,_e=I.channels;s(Le>0&&Le<=be.maxTextureSize&&we>0&&we<=be.maxTextureSize,"invalid texture shape"),s(Le===we,"cube map must be square"),s(U.wrapS===L&&U.wrapT===L,"wrap mode not supported by cube map");for(var qe=0;qe<Z.length;++qe){var Ze=Z[qe];s(Ze.width===Le&&Ze.height===we,"inconsistent cube map face shape"),U.genMipmaps&&(s(!Ze.compressed,"can not generate mipmap for compressed textures"),s(Ze.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var nt=Ze.images,Je=0;Je<16;++Je){var st=nt[Je];if(st){var vt=Le>>Je,Ke=we>>Je;s(Ze.mipmask&1<<Je,"missing mipmap data"),s(st.width===vt&&st.height===Ke,"invalid shape for mip images"),s(st.format===I.format&&st.internalformat===I.internalformat&&st.type===I.type,"incompatible type for mip image"),st.compressed||(st.data?s(st.data.byteLength===vt*Ke*Math.max(xt(st.type,_e),st.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):st.element||st.copy)}}}}var P=n(s,{optional:N,raise:o,commandRaise:D,command:F,parameter:u,commandParameter:R,constructor:g,type:h,commandType:B,isTypedArray:c,nni:d,oneOf:p,shaderError:C,linkError:M,callSite:S,saveCommandRef:A,saveDrawInfo:T,framebufferFormat:O,guessCommand:x,texture2D:De,textureCube:J}),me=0,Ee=0,fe=5,ke=6;function Be(I,U){this.id=me++,this.type=I,this.data=U}function $e(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ue(I){if(I.length===0)return[];var U=I.charAt(0),Z=I.charAt(I.length-1);if(I.length>1&&U===Z&&(U==='"'||U==="'"))return['"'+$e(I.substr(1,I.length-2))+'"'];var be=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(I);if(be)return Ue(I.substr(0,be.index)).concat(Ue(be[1])).concat(Ue(I.substr(be.index+be[0].length)));var Le=I.split(".");if(Le.length===1)return['"'+$e(I)+'"'];for(var we=[],_e=0;_e<Le.length;++_e)we=we.concat(Ue(Le[_e]));return we}function ut(I){return"["+Ue(I).join("][")+"]"}function Mt(I,U){return new Be(I,ut(U+""))}function $t(I){return typeof I=="function"&&!I._reglType||I instanceof Be}function At(I,U){if(typeof I=="function")return new Be(Ee,I);if(typeof I=="number"||typeof I=="boolean")return new Be(fe,I);if(Array.isArray(I))return new Be(ke,I.map((Z,be)=>At(Z,U+"["+be+"]")));if(I instanceof Be)return I;P(!1,"invalid option type in uniform "+U)}var wr={DynamicVariable:Be,define:Mt,isDynamic:$t,unbox:At,accessor:ut},Ar={next:typeof requestAnimationFrame=="function"?function(I){return requestAnimationFrame(I)}:function(I){return setTimeout(I,16)},cancel:typeof cancelAnimationFrame=="function"?function(I){return cancelAnimationFrame(I)}:clearTimeout},Zr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Hr(){var I={"":0},U=[""];return{id:function(Z){var be=I[Z];return be||(be=I[Z]=U.length,U.push(Z),be)},str:function(Z){return U[Z]}}}function Xn(I,U,Z){var be=document.createElement("canvas");n(be.style,{border:0,margin:0,padding:0,top:0,left:0}),I.appendChild(be),I===document.body&&(be.style.position="absolute",n(I.style,{margin:0,padding:0}));function Le(){var qe=window.innerWidth,Ze=window.innerHeight;if(I!==document.body){var nt=I.getBoundingClientRect();qe=nt.right-nt.left,Ze=nt.bottom-nt.top}be.width=Z*qe,be.height=Z*Ze,n(be.style,{width:qe+"px",height:Ze+"px"})}var we;I!==document.body&&typeof ResizeObserver=="function"?(we=new ResizeObserver(function(){setTimeout(Le)}),we.observe(I)):window.addEventListener("resize",Le,!1);function _e(){we?we.disconnect():window.removeEventListener("resize",Le),I.removeChild(be)}return Le(),{canvas:be,onDestroy:_e}}function gr(I,U){function Z(be){try{return I.getContext(be,U)}catch{return null}}return Z("webgl")||Z("experimental-webgl")||Z("webgl-experimental")}function nn(I){return typeof I.nodeName=="string"&&typeof I.appendChild=="function"&&typeof I.getBoundingClientRect=="function"}function _i(I){return typeof I.drawArrays=="function"||typeof I.drawElements=="function"}function fn(I){return typeof I=="string"?I.split():(P(Array.isArray(I),"invalid extension array"),I)}function Ma(I){return typeof I=="string"?(P(typeof document<"u","not supported outside of DOM"),document.querySelector(I)):I}function ca(I){var U=I||{},Z,be,Le,we,_e={},qe=[],Ze=[],nt=typeof window>"u"?1:window.devicePixelRatio,Je=!1,st=function(lt){lt&&P.raise(lt)},vt=function(){};if(typeof U=="string"?(P(typeof document<"u","selector queries only supported in DOM enviroments"),Z=document.querySelector(U),P(Z,"invalid query string for element")):typeof U=="object"?nn(U)?Z=U:_i(U)?(we=U,Le=we.canvas):(P.constructor(U),"gl"in U?we=U.gl:"canvas"in U?Le=Ma(U.canvas):"container"in U&&(be=Ma(U.container)),"attributes"in U&&(_e=U.attributes,P.type(_e,"object","invalid context attributes")),"extensions"in U&&(qe=fn(U.extensions)),"optionalExtensions"in U&&(Ze=fn(U.optionalExtensions)),"onDone"in U&&(P.type(U.onDone,"function","invalid or missing onDone callback"),st=U.onDone),"profile"in U&&(Je=!!U.profile),"pixelRatio"in U&&(nt=+U.pixelRatio,P(nt>0,"invalid pixel ratio"))):P.raise("invalid arguments to regl"),Z&&(Z.nodeName.toLowerCase()==="canvas"?Le=Z:be=Z),!we){if(!Le){P(typeof document<"u","must manually specify webgl context outside of DOM environments");var Ke=Xn(be||document.body,st,nt);if(!Ke)return null;Le=Ke.canvas,vt=Ke.onDestroy}_e.premultipliedAlpha===void 0&&(_e.premultipliedAlpha=!0),we=gr(Le,_e)}return we?{gl:we,canvas:Le,container:be,extensions:qe,optionalExtensions:Ze,pixelRatio:nt,profile:Je,onDone:st,onDestroy:vt}:(vt(),st("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Go(I,U){var Z={};function be(_e){P.type(_e,"string","extension name must be string");var qe=_e.toLowerCase(),Ze;try{Ze=Z[qe]=I.getExtension(qe)}catch{}return!!Ze}for(var Le=0;Le<U.extensions.length;++Le){var we=U.extensions[Le];if(!be(we))return U.onDestroy(),U.onDone('"'+we+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return U.optionalExtensions.forEach(be),{extensions:Z,restore:function(){Object.keys(Z).forEach(function(_e){if(Z[_e]&&!be(_e))throw new Error("(regl): error restoring extension "+_e)})}}}function an(I,U){for(var Z=Array(I),be=0;be<I;++be)Z[be]=U(be);return Z}var Yn=5120,qn=5121,su=5122,lu=5123,uu=5124,Aa=5125,xn=5126;function sn(I){for(var U=16;U<=1<<28;U*=16)if(I<=U)return U;return 0}function Zt(I){var U,Z;return U=(I>65535)<<4,I>>>=U,Z=(I>255)<<3,I>>>=Z,U|=Z,Z=(I>15)<<2,I>>>=Z,U|=Z,Z=(I>3)<<1,I>>>=Z,U|=Z,U|I>>1}function Jr(){var I=an(8,function(){return[]});function U(we){var _e=sn(we),qe=I[Zt(_e)>>2];return qe.length>0?qe.pop():new ArrayBuffer(_e)}function Z(we){I[Zt(we.byteLength)>>2].push(we)}function be(we,_e){var qe=null;switch(we){case Yn:qe=new Int8Array(U(_e),0,_e);break;case qn:qe=new Uint8Array(U(_e),0,_e);break;case su:qe=new Int16Array(U(2*_e),0,_e);break;case lu:qe=new Uint16Array(U(2*_e),0,_e);break;case uu:qe=new Int32Array(U(4*_e),0,_e);break;case Aa:qe=new Uint32Array(U(4*_e),0,_e);break;case xn:qe=new Float32Array(U(4*_e),0,_e);break;default:return null}return qe.length!==_e?qe.subarray(0,_e):qe}function Le(we){Z(we.buffer)}return{alloc:U,free:Z,allocType:be,freeType:Le}}var Bt=Jr();Bt.zero=Jr();var pn=3408,zn=3410,Ta=3411,Oa=3412,ln=3413,Uo=3414,Os=3415,un=33901,qv=33902,Kv=3379,Ii=3386,Ic=34921,Xf=36347,Yf=36348,qf=35661,Kf=35660,vl=34930,go=36349,Qv=34076,cu=34024,my=7936,dx=7937,gl=7938,Dc=35724,qd=34047,ml=36063,yy=34852,Kd=3553,fu=34067,ai=34069,wy=33984,Pc=6408,Is=5126,by=5121,Qf=36160,Zv=36053,px=36064,hu=16384,vx=function(I,U){var Z=1;U.ext_texture_filter_anisotropic&&(Z=I.getParameter(qd));var be=1,Le=1;U.webgl_draw_buffers&&(be=I.getParameter(yy),Le=I.getParameter(ml));var we=!!U.oes_texture_float;if(we){var _e=I.createTexture();I.bindTexture(Kd,_e),I.texImage2D(Kd,0,Pc,1,1,0,Pc,Is,null);var qe=I.createFramebuffer();if(I.bindFramebuffer(Qf,qe),I.framebufferTexture2D(Qf,px,Kd,_e,0),I.bindTexture(Kd,null),I.checkFramebufferStatus(Qf)!==Zv)we=!1;else{I.viewport(0,0,1,1),I.clearColor(1,0,0,1),I.clear(hu);var Ze=Bt.allocType(Is,4);I.readPixels(0,0,1,1,Pc,Is,Ze),I.getError()?we=!1:(I.deleteFramebuffer(qe),I.deleteTexture(_e),we=Ze[0]===1),Bt.freeType(Ze)}}var nt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Je=!0;if(!nt){var st=I.createTexture(),vt=Bt.allocType(by,36);I.activeTexture(wy),I.bindTexture(fu,st),I.texImage2D(ai,0,Pc,3,3,0,Pc,by,vt),Bt.freeType(vt),I.bindTexture(fu,null),I.deleteTexture(st),Je=!I.getError()}return{colorBits:[I.getParameter(zn),I.getParameter(Ta),I.getParameter(Oa),I.getParameter(ln)],depthBits:I.getParameter(Uo),stencilBits:I.getParameter(Os),subpixelBits:I.getParameter(pn),extensions:Object.keys(U).filter(function(Ke){return!!U[Ke]}),maxAnisotropic:Z,maxDrawbuffers:be,maxColorAttachments:Le,pointSizeDims:I.getParameter(un),lineWidthDims:I.getParameter(qv),maxViewportDims:I.getParameter(Ii),maxCombinedTextureUnits:I.getParameter(qf),maxCubeMapSize:I.getParameter(Qv),maxRenderbufferSize:I.getParameter(cu),maxTextureUnits:I.getParameter(vl),maxTextureSize:I.getParameter(Kv),maxAttributes:I.getParameter(Ic),maxVertexUniforms:I.getParameter(Xf),maxVertexTextureUnits:I.getParameter(Kf),maxVaryingVectors:I.getParameter(Yf),maxFragmentUniforms:I.getParameter(go),glsl:I.getParameter(Dc),renderer:I.getParameter(dx),vendor:I.getParameter(my),version:I.getParameter(gl),readFloat:we,npotTextureCube:Je}};function Xa(I){return!!I&&typeof I=="object"&&Array.isArray(I.shape)&&Array.isArray(I.stride)&&typeof I.offset=="number"&&I.shape.length===I.stride.length&&(Array.isArray(I.data)||r(I.data))}var pi=function(I){return Object.keys(I).map(function(U){return I[U]})},Lc={shape:xy,flatten:mx};function Jv(I,U,Z){for(var be=0;be<U;++be)Z[be]=I[be]}function gx(I,U,Z,be){for(var Le=0,we=0;we<U;++we)for(var _e=I[we],qe=0;qe<Z;++qe)be[Le++]=_e[qe]}function du(I,U,Z,be,Le,we){for(var _e=we,qe=0;qe<U;++qe)for(var Ze=I[qe],nt=0;nt<Z;++nt)for(var Je=Ze[nt],st=0;st<be;++st)Le[_e++]=Je[st]}function Qd(I,U,Z,be,Le){for(var we=1,_e=Z+1;_e<U.length;++_e)we*=U[_e];var qe=U[Z];if(U.length-Z===4){var Ze=U[Z+1],nt=U[Z+2],Je=U[Z+3];for(_e=0;_e<qe;++_e)du(I[_e],Ze,nt,Je,be,Le),Le+=we}else for(_e=0;_e<qe;++_e)Qd(I[_e],U,Z+1,be,Le),Le+=we}function mx(I,U,Z,be){var Le=1;if(U.length)for(var we=0;we<U.length;++we)Le*=U[we];else Le=0;var _e=be||Bt.allocType(Z,Le);switch(U.length){case 0:break;case 1:Jv(I,U[0],_e);break;case 2:gx(I,U[0],U[1],_e);break;case 3:du(I,U[0],U[1],U[2],_e,0);break;default:Qd(I,U,0,_e,0)}return _e}function xy(I){for(var U=[],Z=I;Z.length;Z=Z[0])U.push(Z.length);return U}var Rc={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Zd=5120,yx=5122,wx=5124,bx=5121,eg=5123,Nc=5125,xx=5126,Sx=5126,yl={int8:Zd,int16:yx,int32:wx,uint8:bx,uint16:eg,uint32:Nc,float:xx,float32:Sx},Ex=35048,Zf=35040,Jd={dynamic:Ex,stream:Zf,static:35044},Wo=Lc.flatten,Sy=Lc.shape,Ds=35044,Jf=35040,eh=5121,Vo=5126,wl=[];wl[5120]=1,wl[5122]=2,wl[5124]=4,wl[5121]=1,wl[5123]=2,wl[5125]=4,wl[5126]=4;function Fc(I){return Rc[Object.prototype.toString.call(I)]|0}function Ey(I,U){for(var Z=0;Z<U.length;++Z)I[Z]=U[Z]}function _y(I,U,Z,be,Le,we,_e){for(var qe=0,Ze=0;Ze<Z;++Ze)for(var nt=0;nt<be;++nt)I[qe++]=U[Le*Ze+we*nt+_e]}function Cy(I,U,Z,be){var Le=0,we={};function _e(de){this.id=Le++,this.buffer=I.createBuffer(),this.type=de,this.usage=Ds,this.byteLength=0,this.dimension=1,this.dtype=eh,this.persistentData=null,Z.profile&&(this.stats={size:0})}_e.prototype.bind=function(){I.bindBuffer(this.type,this.buffer)},_e.prototype.destroy=function(){vt(this)};var qe=[];function Ze(de,Ce){var rt=qe.pop();return rt||(rt=new _e(de)),rt.bind(),st(rt,Ce,Jf,0,1,!1),rt}function nt(de){qe.push(de)}function Je(de,Ce,rt){de.byteLength=Ce.byteLength,I.bufferData(de.type,Ce,rt)}function st(de,Ce,rt,wt,je,Ct){var Ve;if(de.usage=rt,Array.isArray(Ce)){if(de.dtype=wt||Vo,Ce.length>0){var ct;if(Array.isArray(Ce[0])){Ve=Sy(Ce);for(var We=1,ft=1;ft<Ve.length;++ft)We*=Ve[ft];de.dimension=We,ct=Wo(Ce,Ve,de.dtype),Je(de,ct,rt),Ct?de.persistentData=ct:Bt.freeType(ct)}else if(typeof Ce[0]=="number"){de.dimension=je;var Ht=Bt.allocType(de.dtype,Ce.length);Ey(Ht,Ce),Je(de,Ht,rt),Ct?de.persistentData=Ht:Bt.freeType(Ht)}else r(Ce[0])?(de.dimension=Ce[0].length,de.dtype=wt||Fc(Ce[0])||Vo,ct=Wo(Ce,[Ce.length,Ce[0].length],de.dtype),Je(de,ct,rt),Ct?de.persistentData=ct:Bt.freeType(ct)):P.raise("invalid buffer data")}}else if(r(Ce))de.dtype=wt||Fc(Ce),de.dimension=je,Je(de,Ce,rt),Ct&&(de.persistentData=new Uint8Array(new Uint8Array(Ce.buffer)));else if(Xa(Ce)){Ve=Ce.shape;var lr=Ce.stride,gt=Ce.offset,at=0,ze=0,or=0,dr=0;Ve.length===1?(at=Ve[0],ze=1,or=lr[0],dr=0):Ve.length===2?(at=Ve[0],ze=Ve[1],or=lr[0],dr=lr[1]):P.raise("invalid shape"),de.dtype=wt||Fc(Ce.data)||Vo,de.dimension=ze;var Dt=Bt.allocType(de.dtype,at*ze);_y(Dt,Ce.data,at,ze,or,dr,gt),Je(de,Dt,rt),Ct?de.persistentData=Dt:Bt.freeType(Dt)}else Ce instanceof ArrayBuffer?(de.dtype=eh,de.dimension=je,Je(de,Ce,rt),Ct&&(de.persistentData=new Uint8Array(new Uint8Array(Ce)))):P.raise("invalid buffer data")}function vt(de){U.bufferCount--,be(de);var Ce=de.buffer;P(Ce,"buffer must not be deleted already"),I.deleteBuffer(Ce),de.buffer=null,delete we[de.id]}function Ke(de,Ce,rt,wt){U.bufferCount++;var je=new _e(Ce);we[je.id]=je;function Ct(We){var ft=Ds,Ht=null,lr=0,gt=0,at=1;return Array.isArray(We)||r(We)||Xa(We)||We instanceof ArrayBuffer?Ht=We:typeof We=="number"?lr=We|0:We&&(P.type(We,"object","buffer arguments must be an object, a number or an array"),"data"in We&&(P(Ht===null||Array.isArray(Ht)||r(Ht)||Xa(Ht),"invalid data for buffer"),Ht=We.data),"usage"in We&&(P.parameter(We.usage,Jd,"invalid buffer usage"),ft=Jd[We.usage]),"type"in We&&(P.parameter(We.type,yl,"invalid buffer type"),gt=yl[We.type]),"dimension"in We&&(P.type(We.dimension,"number","invalid dimension"),at=We.dimension|0),"length"in We&&(P.nni(lr,"buffer length must be a nonnegative integer"),lr=We.length|0)),je.bind(),Ht?st(je,Ht,ft,gt,at,wt):(lr&&I.bufferData(je.type,lr,ft),je.dtype=gt||eh,je.usage=ft,je.dimension=at,je.byteLength=lr),Z.profile&&(je.stats.size=je.byteLength*wl[je.dtype]),Ct}function Ve(We,ft){P(ft+We.byteLength<=je.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+We.byteLength+" starting from offset "+ft+" to a buffer of size "+je.byteLength),I.bufferSubData(je.type,ft,We)}function ct(We,ft){var Ht=(ft||0)|0,lr;if(je.bind(),r(We)||We instanceof ArrayBuffer)Ve(We,Ht);else if(Array.isArray(We)){if(We.length>0)if(typeof We[0]=="number"){var gt=Bt.allocType(je.dtype,We.length);Ey(gt,We),Ve(gt,Ht),Bt.freeType(gt)}else if(Array.isArray(We[0])||r(We[0])){lr=Sy(We);var at=Wo(We,lr,je.dtype);Ve(at,Ht),Bt.freeType(at)}else P.raise("invalid buffer data")}else if(Xa(We)){lr=We.shape;var ze=We.stride,or=0,dr=0,Dt=0,br=0;lr.length===1?(or=lr[0],dr=1,Dt=ze[0],br=0):lr.length===2?(or=lr[0],dr=lr[1],Dt=ze[0],br=ze[1]):P.raise("invalid shape");var ur=Array.isArray(We.data)?je.dtype:Fc(We.data),mr=Bt.allocType(ur,or*dr);_y(mr,We.data,or,dr,Dt,br,We.offset),Ve(mr,Ht),Bt.freeType(mr)}else P.raise("invalid data for buffer subdata");return Ct}return rt||Ct(de),Ct._reglType="buffer",Ct._buffer=je,Ct.subdata=ct,Z.profile&&(Ct.stats=je.stats),Ct.destroy=function(){vt(je)},Ct}function lt(){pi(we).forEach(function(de){de.buffer=I.createBuffer(),I.bindBuffer(de.type,de.buffer),I.bufferData(de.type,de.persistentData||de.byteLength,de.usage)})}return Z.profile&&(U.getTotalBufferSize=function(){var de=0;return Object.keys(we).forEach(function(Ce){de+=we[Ce].stats.size}),de}),{create:Ke,createStream:Ze,destroyStream:nt,clear:function(){pi(we).forEach(vt),qe.forEach(vt)},getBuffer:function(de){return de&&de._buffer instanceof _e?de._buffer:null},restore:lt,_initBuffer:st}}var tg=0,rg=0,rT=1,nT=1,iT=4,_x=4,bl={points:tg,point:rg,lines:rT,line:nT,triangles:iT,triangle:_x,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Cx=0,kx=1,th=4,aT=5120,mo=5121,ky=5122,Bc=5123,qi=5124,Ya=5125,pu=34963,Kn=35040,Ps=35044;function ep(I,U,Z,be){var Le={},we=0,_e={uint8:mo,uint16:Bc};U.oes_element_index_uint&&(_e.uint32=Ya);function qe(lt){this.id=we++,Le[this.id]=this,this.buffer=lt,this.primType=th,this.vertCount=0,this.type=0}qe.prototype.bind=function(){this.buffer.bind()};var Ze=[];function nt(lt){var de=Ze.pop();return de||(de=new qe(Z.create(null,pu,!0,!1)._buffer)),st(de,lt,Kn,-1,-1,0,0),de}function Je(lt){Ze.push(lt)}function st(lt,de,Ce,rt,wt,je,Ct){lt.buffer.bind();var Ve;if(de){var ct=Ct;!Ct&&(!r(de)||Xa(de)&&!r(de.data))&&(ct=U.oes_element_index_uint?Ya:Bc),Z._initBuffer(lt.buffer,de,Ce,ct,3)}else I.bufferData(pu,je,Ce),lt.buffer.dtype=Ve||mo,lt.buffer.usage=Ce,lt.buffer.dimension=3,lt.buffer.byteLength=je;if(Ve=Ct,!Ct){switch(lt.buffer.dtype){case mo:case aT:Ve=mo;break;case Bc:case ky:Ve=Bc;break;case Ya:case qi:Ve=Ya;break;default:P.raise("unsupported type for element array")}lt.buffer.dtype=Ve}lt.type=Ve,P(Ve!==Ya||!!U.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var We=wt;We<0&&(We=lt.buffer.byteLength,Ve===Bc?We>>=1:Ve===Ya&&(We>>=2)),lt.vertCount=We;var ft=rt;if(rt<0){ft=th;var Ht=lt.buffer.dimension;Ht===1&&(ft=Cx),Ht===2&&(ft=kx),Ht===3&&(ft=th)}lt.primType=ft}function vt(lt){be.elementsCount--,P(lt.buffer!==null,"must not double destroy elements"),delete Le[lt.id],lt.buffer.destroy(),lt.buffer=null}function Ke(lt,de){var Ce=Z.create(null,pu,!0),rt=new qe(Ce._buffer);be.elementsCount++;function wt(je){if(!je)Ce(),rt.primType=th,rt.vertCount=0,rt.type=mo;else if(typeof je=="number")Ce(je),rt.primType=th,rt.vertCount=je|0,rt.type=mo;else{var Ct=null,Ve=Ps,ct=-1,We=-1,ft=0,Ht=0;Array.isArray(je)||r(je)||Xa(je)?Ct=je:(P.type(je,"object","invalid arguments for elements"),"data"in je&&(Ct=je.data,P(Array.isArray(Ct)||r(Ct)||Xa(Ct),"invalid data for element buffer")),"usage"in je&&(P.parameter(je.usage,Jd,"invalid element buffer usage"),Ve=Jd[je.usage]),"primitive"in je&&(P.parameter(je.primitive,bl,"invalid element buffer primitive"),ct=bl[je.primitive]),"count"in je&&(P(typeof je.count=="number"&&je.count>=0,"invalid vertex count for elements"),We=je.count|0),"type"in je&&(P.parameter(je.type,_e,"invalid buffer type"),Ht=_e[je.type]),"length"in je?ft=je.length|0:(ft=We,Ht===Bc||Ht===ky?ft*=2:(Ht===Ya||Ht===qi)&&(ft*=4))),st(rt,Ct,Ve,ct,We,ft,Ht)}return wt}return wt(lt),wt._reglType="elements",wt._elements=rt,wt.subdata=function(je,Ct){return Ce.subdata(je,Ct),wt},wt.destroy=function(){vt(rt)},wt}return{create:Ke,createStream:nt,destroyStream:Je,getElements:function(lt){return typeof lt=="function"&&lt._elements instanceof qe?lt._elements:null},clear:function(){pi(Le).forEach(vt)}}}var ng=new Float32Array(1),Di=new Uint32Array(ng.buffer),rh=5123;function $c(I){for(var U=Bt.allocType(rh,I.length),Z=0;Z<I.length;++Z)if(isNaN(I[Z]))U[Z]=65535;else if(I[Z]===1/0)U[Z]=31744;else if(I[Z]===-1/0)U[Z]=64512;else{ng[0]=I[Z];var be=Di[0],Le=be>>>31<<15,we=(be<<1>>>24)-127,_e=be>>13&1023;if(we<-24)U[Z]=Le;else if(we<-14){var qe=-14-we;U[Z]=Le+(_e+1024>>qe)}else we>15?U[Z]=Le+31744:U[Z]=Le+(we+15<<10)+_e}return U}function yn(I){return Array.isArray(I)||r(I)}var vu=function(I){return!(I&I-1)&&!!I},nh=34467,yo=3553,wo=34067,ig=34069,xl=6408,Ho=6406,gu=6407,ih=6409,ag=6410,Mx=32854,My=32855,og=36194,Ax=32819,oT=32820,sT=33635,Ay=34042,mu=6402,ah=34041,Ty=35904,tp=35906,yu=36193,sg=33776,Oy=33777,zc=33778,lg=33779,ug=35986,Iy=35987,cg=34798,Tx=35840,Ir=35841,Fe=35842,Ae=35843,Xe=36196,pt=5121,ar=5123,sr=5125,$=5126,qa=10242,W=10243,wu=10497,oh=33071,fg=33648,hg=10240,Qn=10241,bo=9728,jc=9729,bu=9984,dg=9985,rp=9986,Cr=9987,on=33170,yr=4352,Pi=4353,Li=4354,pg=34046,Sl=3317,Ox=37440,vg=37441,Dy=37443,Gc=37444,Py=33984,Vde=[bu,rp,dg,Cr],Ix=[0,ih,ag,gu,xl],Ls={};Ls[ih]=Ls[Ho]=Ls[mu]=1,Ls[ah]=Ls[ag]=2,Ls[gu]=Ls[Ty]=3,Ls[xl]=Ls[tp]=4;function gg(I){return"[object "+I+"]"}var TB=gg("HTMLCanvasElement"),OB=gg("OffscreenCanvas"),IB=gg("CanvasRenderingContext2D"),DB=gg("ImageBitmap"),PB=gg("HTMLImageElement"),LB=gg("HTMLVideoElement"),Hde=Object.keys(Rc).concat([TB,OB,IB,DB,PB,LB]),mg=[];mg[pt]=1,mg[$]=4,mg[yu]=2,mg[ar]=2,mg[sr]=4;var Ki=[];Ki[Mx]=2,Ki[My]=2,Ki[og]=2,Ki[ah]=4,Ki[sg]=.5,Ki[Oy]=.5,Ki[zc]=1,Ki[lg]=1,Ki[ug]=.5,Ki[Iy]=1,Ki[cg]=1,Ki[Tx]=.5,Ki[Ir]=.25,Ki[Fe]=.5,Ki[Ae]=.25,Ki[Xe]=.5;function RB(I){return Array.isArray(I)&&(I.length===0||typeof I[0]=="number")}function NB(I){if(!Array.isArray(I))return!1;var U=I.length;return!(U===0||!yn(I[0]))}function np(I){return Object.prototype.toString.call(I)}function FB(I){return np(I)===TB}function BB(I){return np(I)===OB}function Xde(I){return np(I)===IB}function Yde(I){return np(I)===DB}function qde(I){return np(I)===PB}function Kde(I){return np(I)===LB}function lT(I){if(!I)return!1;var U=np(I);return Hde.indexOf(U)>=0?!0:RB(I)||NB(I)||Xa(I)}function $B(I){return Rc[Object.prototype.toString.call(I)]|0}function Qde(I,U){var Z=U.length;switch(I.type){case pt:case ar:case sr:case $:var be=Bt.allocType(I.type,Z);be.set(U),I.data=be;break;case yu:I.data=$c(U);break;default:P.raise("unsupported texture type, must specify a typed array")}}function zB(I,U){return Bt.allocType(I.type===yu?$:I.type,U)}function jB(I,U){I.type===yu?(I.data=$c(U),Bt.freeType(U)):I.data=U}function Zde(I,U,Z,be,Le,we){for(var _e=I.width,qe=I.height,Ze=I.channels,nt=_e*qe*Ze,Je=zB(I,nt),st=0,vt=0;vt<qe;++vt)for(var Ke=0;Ke<_e;++Ke)for(var lt=0;lt<Ze;++lt)Je[st++]=U[Z*Ke+be*vt+Le*lt+we];jB(I,Je)}function Dx(I,U,Z,be,Le,we){var _e;if(typeof Ki[I]<"u"?_e=Ki[I]:_e=Ls[I]*mg[U],we&&(_e*=6),Le){for(var qe=0,Ze=Z;Ze>=1;)qe+=_e*Ze*Ze,Ze/=2;return qe}else return _e*Z*be}function Jde(I,U,Z,be,Le,we,_e){var qe={"don't care":yr,"dont care":yr,nice:Li,fast:Pi},Ze={repeat:wu,clamp:oh,mirror:fg},nt={nearest:bo,linear:jc},Je=n({mipmap:Cr,"nearest mipmap nearest":bu,"linear mipmap nearest":dg,"nearest mipmap linear":rp,"linear mipmap linear":Cr},nt),st={none:0,browser:Gc},vt={uint8:pt,rgba4:Ax,rgb565:sT,"rgb5 a1":oT},Ke={alpha:Ho,luminance:ih,"luminance alpha":ag,rgb:gu,rgba:xl,rgba4:Mx,"rgb5 a1":My,rgb565:og},lt={};U.ext_srgb&&(Ke.srgb=Ty,Ke.srgba=tp),U.oes_texture_float&&(vt.float32=vt.float=$),U.oes_texture_half_float&&(vt.float16=vt["half float"]=yu),U.webgl_depth_texture&&(n(Ke,{depth:mu,"depth stencil":ah}),n(vt,{uint16:ar,uint32:sr,"depth stencil":Ay})),U.webgl_compressed_texture_s3tc&&n(lt,{"rgb s3tc dxt1":sg,"rgba s3tc dxt1":Oy,"rgba s3tc dxt3":zc,"rgba s3tc dxt5":lg}),U.webgl_compressed_texture_atc&&n(lt,{"rgb atc":ug,"rgba atc explicit alpha":Iy,"rgba atc interpolated alpha":cg}),U.webgl_compressed_texture_pvrtc&&n(lt,{"rgb pvrtc 4bppv1":Tx,"rgb pvrtc 2bppv1":Ir,"rgba pvrtc 4bppv1":Fe,"rgba pvrtc 2bppv1":Ae}),U.webgl_compressed_texture_etc1&&(lt["rgb etc1"]=Xe);var de=Array.prototype.slice.call(I.getParameter(nh));Object.keys(lt).forEach(function(Q){var Se=lt[Q];de.indexOf(Se)>=0&&(Ke[Q]=Se)});var Ce=Object.keys(Ke);Z.textureFormats=Ce;var rt=[];Object.keys(Ke).forEach(function(Q){var Se=Ke[Q];rt[Se]=Q});var wt=[];Object.keys(vt).forEach(function(Q){var Se=vt[Q];wt[Se]=Q});var je=[];Object.keys(nt).forEach(function(Q){var Se=nt[Q];je[Se]=Q});var Ct=[];Object.keys(Je).forEach(function(Q){var Se=Je[Q];Ct[Se]=Q});var Ve=[];Object.keys(Ze).forEach(function(Q){var Se=Ze[Q];Ve[Se]=Q});var ct=Ce.reduce(function(Q,Se){var ye=Ke[Se];return ye===ih||ye===Ho||ye===ih||ye===ag||ye===mu||ye===ah||U.ext_srgb&&(ye===Ty||ye===tp)?Q[ye]=ye:ye===My||Se.indexOf("rgba")>=0?Q[ye]=xl:Q[ye]=gu,Q},{});function We(){this.internalformat=xl,this.format=xl,this.type=pt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Gc,this.width=0,this.height=0,this.channels=0}function ft(Q,Se){Q.internalformat=Se.internalformat,Q.format=Se.format,Q.type=Se.type,Q.compressed=Se.compressed,Q.premultiplyAlpha=Se.premultiplyAlpha,Q.flipY=Se.flipY,Q.unpackAlignment=Se.unpackAlignment,Q.colorSpace=Se.colorSpace,Q.width=Se.width,Q.height=Se.height,Q.channels=Se.channels}function Ht(Q,Se){if(!(typeof Se!="object"||!Se)){if("premultiplyAlpha"in Se&&(P.type(Se.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Q.premultiplyAlpha=Se.premultiplyAlpha),"flipY"in Se&&(P.type(Se.flipY,"boolean","invalid texture flip"),Q.flipY=Se.flipY),"alignment"in Se&&(P.oneOf(Se.alignment,[1,2,4,8],"invalid texture unpack alignment"),Q.unpackAlignment=Se.alignment),"colorSpace"in Se&&(P.parameter(Se.colorSpace,st,"invalid colorSpace"),Q.colorSpace=st[Se.colorSpace]),"type"in Se){var ye=Se.type;P(U.oes_texture_float||!(ye==="float"||ye==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),P(U.oes_texture_half_float||!(ye==="half float"||ye==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),P(U.webgl_depth_texture||!(ye==="uint16"||ye==="uint32"||ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(ye,vt,"invalid texture type"),Q.type=vt[ye]}var Ot=Q.width,xr=Q.height,X=Q.channels,z=!1;"shape"in Se?(P(Array.isArray(Se.shape)&&Se.shape.length>=2,"shape must be an array"),Ot=Se.shape[0],xr=Se.shape[1],Se.shape.length===3&&(X=Se.shape[2],P(X>0&&X<=4,"invalid number of channels"),z=!0),P(Ot>=0&&Ot<=Z.maxTextureSize,"invalid width"),P(xr>=0&&xr<=Z.maxTextureSize,"invalid height")):("radius"in Se&&(Ot=xr=Se.radius,P(Ot>=0&&Ot<=Z.maxTextureSize,"invalid radius")),"width"in Se&&(Ot=Se.width,P(Ot>=0&&Ot<=Z.maxTextureSize,"invalid width")),"height"in Se&&(xr=Se.height,P(xr>=0&&xr<=Z.maxTextureSize,"invalid height")),"channels"in Se&&(X=Se.channels,P(X>0&&X<=4,"invalid number of channels"),z=!0)),Q.width=Ot|0,Q.height=xr|0,Q.channels=X|0;var re=!1;if("format"in Se){var he=Se.format;P(U.webgl_depth_texture||!(he==="depth"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),P.parameter(he,Ke,"invalid texture format");var pe=Q.internalformat=Ke[he];Q.format=ct[pe],he in vt&&("type"in Se||(Q.type=vt[he])),he in lt&&(Q.compressed=!0),re=!0}!z&&re?Q.channels=Ls[Q.format]:z&&!re?Q.channels!==Ix[Q.format]&&(Q.format=Q.internalformat=Ix[Q.channels]):re&&z&&P(Q.channels===Ls[Q.format],"number of channels inconsistent with specified format")}}function lr(Q){I.pixelStorei(Ox,Q.flipY),I.pixelStorei(vg,Q.premultiplyAlpha),I.pixelStorei(Dy,Q.colorSpace),I.pixelStorei(Sl,Q.unpackAlignment)}function gt(){We.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function at(Q,Se){var ye=null;if(lT(Se)?ye=Se:Se&&(P.type(Se,"object","invalid pixel data type"),Ht(Q,Se),"x"in Se&&(Q.xOffset=Se.x|0),"y"in Se&&(Q.yOffset=Se.y|0),lT(Se.data)&&(ye=Se.data)),P(!Q.compressed||ye instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Se.copy){P(!ye,"can not specify copy and data field for the same texture");var Ot=Le.viewportWidth,xr=Le.viewportHeight;Q.width=Q.width||Ot-Q.xOffset,Q.height=Q.height||xr-Q.yOffset,Q.needsCopy=!0,P(Q.xOffset>=0&&Q.xOffset<Ot&&Q.yOffset>=0&&Q.yOffset<xr&&Q.width>0&&Q.width<=Ot&&Q.height>0&&Q.height<=xr,"copy texture read out of bounds")}else if(!ye)Q.width=Q.width||1,Q.height=Q.height||1,Q.channels=Q.channels||4;else if(r(ye))Q.channels=Q.channels||4,Q.data=ye,!("type"in Se)&&Q.type===pt&&(Q.type=$B(ye));else if(RB(ye))Q.channels=Q.channels||4,Qde(Q,ye),Q.alignment=1,Q.needsFree=!0;else if(Xa(ye)){var X=ye.data;!Array.isArray(X)&&Q.type===pt&&(Q.type=$B(X));var z=ye.shape,re=ye.stride,he,pe,ae,ie,se,Y;z.length===3?(ae=z[2],Y=re[2]):(P(z.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ae=1,Y=1),he=z[0],pe=z[1],ie=re[0],se=re[1],Q.alignment=1,Q.width=he,Q.height=pe,Q.channels=ae,Q.format=Q.internalformat=Ix[ae],Q.needsFree=!0,Zde(Q,X,ie,se,Y,ye.offset)}else if(FB(ye)||BB(ye)||Xde(ye))FB(ye)||BB(ye)?Q.element=ye:Q.element=ye.canvas,Q.width=Q.element.width,Q.height=Q.element.height,Q.channels=4;else if(Yde(ye))Q.element=ye,Q.width=ye.width,Q.height=ye.height,Q.channels=4;else if(qde(ye))Q.element=ye,Q.width=ye.naturalWidth,Q.height=ye.naturalHeight,Q.channels=4;else if(Kde(ye))Q.element=ye,Q.width=ye.videoWidth,Q.height=ye.videoHeight,Q.channels=4;else if(NB(ye)){var ee=Q.width||ye[0].length,H=Q.height||ye.length,ue=Q.channels;yn(ye[0][0])?ue=ue||ye[0][0].length:ue=ue||1;for(var ve=Lc.shape(ye),Pe=1,Re=0;Re<ve.length;++Re)Pe*=ve[Re];var Me=zB(Q,Pe);Lc.flatten(ye,ve,"",Me),jB(Q,Me),Q.alignment=1,Q.width=ee,Q.height=H,Q.channels=ue,Q.format=Q.internalformat=Ix[ue],Q.needsFree=!0}Q.type===$?P(Z.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Q.type===yu&&P(Z.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ze(Q,Se,ye){var Ot=Q.element,xr=Q.data,X=Q.internalformat,z=Q.format,re=Q.type,he=Q.width,pe=Q.height;lr(Q),Ot?I.texImage2D(Se,ye,z,z,re,Ot):Q.compressed?I.compressedTexImage2D(Se,ye,X,he,pe,0,xr):Q.needsCopy?(be(),I.copyTexImage2D(Se,ye,z,Q.xOffset,Q.yOffset,he,pe,0)):I.texImage2D(Se,ye,z,he,pe,0,z,re,xr||null)}function or(Q,Se,ye,Ot,xr){var X=Q.element,z=Q.data,re=Q.internalformat,he=Q.format,pe=Q.type,ae=Q.width,ie=Q.height;lr(Q),X?I.texSubImage2D(Se,xr,ye,Ot,he,pe,X):Q.compressed?I.compressedTexSubImage2D(Se,xr,ye,Ot,re,ae,ie,z):Q.needsCopy?(be(),I.copyTexSubImage2D(Se,xr,ye,Ot,Q.xOffset,Q.yOffset,ae,ie)):I.texSubImage2D(Se,xr,ye,Ot,ae,ie,he,pe,z)}var dr=[];function Dt(){return dr.pop()||new gt}function br(Q){Q.needsFree&&Bt.freeType(Q.data),gt.call(Q),dr.push(Q)}function ur(){We.call(this),this.genMipmaps=!1,this.mipmapHint=yr,this.mipmask=0,this.images=Array(16)}function mr(Q,Se,ye){var Ot=Q.images[0]=Dt();Q.mipmask=1,Ot.width=Q.width=Se,Ot.height=Q.height=ye,Ot.channels=Q.channels=4}function Gr(Q,Se){var ye=null;if(lT(Se))ye=Q.images[0]=Dt(),ft(ye,Q),at(ye,Se),Q.mipmask=1;else if(Ht(Q,Se),Array.isArray(Se.mipmap))for(var Ot=Se.mipmap,xr=0;xr<Ot.length;++xr)ye=Q.images[xr]=Dt(),ft(ye,Q),ye.width>>=xr,ye.height>>=xr,at(ye,Ot[xr]),Q.mipmask|=1<<xr;else ye=Q.images[0]=Dt(),ft(ye,Q),at(ye,Se),Q.mipmask=1;ft(Q,Q.images[0]),Q.compressed&&(Q.internalformat===sg||Q.internalformat===Oy||Q.internalformat===zc||Q.internalformat===lg)&&P(Q.width%4===0&&Q.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function si(Q,Se){for(var ye=Q.images,Ot=0;Ot<ye.length;++Ot){if(!ye[Ot])return;ze(ye[Ot],Se,Ot)}}var Ci=[];function kr(){var Q=Ci.pop()||new ur;We.call(Q),Q.mipmask=0;for(var Se=0;Se<16;++Se)Q.images[Se]=null;return Q}function vi(Q){for(var Se=Q.images,ye=0;ye<Se.length;++ye)Se[ye]&&br(Se[ye]),Se[ye]=null;Ci.push(Q)}function vn(){this.minFilter=bo,this.magFilter=bo,this.wrapS=oh,this.wrapT=oh,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=yr}function li(Q,Se){if("min"in Se){var ye=Se.min;P.parameter(ye,Je),Q.minFilter=Je[ye],Vde.indexOf(Q.minFilter)>=0&&!("faces"in Se)&&(Q.genMipmaps=!0)}if("mag"in Se){var Ot=Se.mag;P.parameter(Ot,nt),Q.magFilter=nt[Ot]}var xr=Q.wrapS,X=Q.wrapT;if("wrap"in Se){var z=Se.wrap;typeof z=="string"?(P.parameter(z,Ze),xr=X=Ze[z]):Array.isArray(z)&&(P.parameter(z[0],Ze),P.parameter(z[1],Ze),xr=Ze[z[0]],X=Ze[z[1]])}else{if("wrapS"in Se){var re=Se.wrapS;P.parameter(re,Ze),xr=Ze[re]}if("wrapT"in Se){var he=Se.wrapT;P.parameter(he,Ze),X=Ze[he]}}if(Q.wrapS=xr,Q.wrapT=X,"anisotropic"in Se){var pe=Se.anisotropic;P(typeof pe=="number"&&pe>=1&&pe<=Z.maxAnisotropic,"aniso samples must be between 1 and "),Q.anisotropic=Se.anisotropic}if("mipmap"in Se){var ae=!1;switch(typeof Se.mipmap){case"string":P.parameter(Se.mipmap,qe,"invalid mipmap hint"),Q.mipmapHint=qe[Se.mipmap],Q.genMipmaps=!0,ae=!0;break;case"boolean":ae=Q.genMipmaps=Se.mipmap;break;case"object":P(Array.isArray(Se.mipmap),"invalid mipmap type"),Q.genMipmaps=!1,ae=!0;break;default:P.raise("invalid mipmap type")}ae&&!("min"in Se)&&(Q.minFilter=bu)}}function gi(Q,Se){I.texParameteri(Se,Qn,Q.minFilter),I.texParameteri(Se,hg,Q.magFilter),I.texParameteri(Se,qa,Q.wrapS),I.texParameteri(Se,W,Q.wrapT),U.ext_texture_filter_anisotropic&&I.texParameteri(Se,pg,Q.anisotropic),Q.genMipmaps&&(I.hint(on,Q.mipmapHint),I.generateMipmap(Se))}var mi=0,Ri={},Qi=Z.maxTextureUnits,Zn=Array(Qi).map(function(){return null});function pr(Q){We.call(this),this.mipmask=0,this.internalformat=xl,this.id=mi++,this.refCount=1,this.target=Q,this.texture=I.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new vn,_e.profile&&(this.stats={size:0})}function Zi(Q){I.activeTexture(Py),I.bindTexture(Q.target,Q.texture)}function qr(){var Q=Zn[0];Q?I.bindTexture(Q.target,Q.texture):I.bindTexture(yo,null)}function Jt(Q){var Se=Q.texture;P(Se,"must not double destroy texture");var ye=Q.unit,Ot=Q.target;ye>=0&&(I.activeTexture(Py+ye),I.bindTexture(Ot,null),Zn[ye]=null),I.deleteTexture(Se),Q.texture=null,Q.params=null,Q.pixels=null,Q.refCount=0,delete Ri[Q.id],we.textureCount--}n(pr.prototype,{bind:function(){var Q=this;Q.bindCount+=1;var Se=Q.unit;if(Se<0){for(var ye=0;ye<Qi;++ye){var Ot=Zn[ye];if(Ot){if(Ot.bindCount>0)continue;Ot.unit=-1}Zn[ye]=Q,Se=ye;break}Se>=Qi&&P.raise("insufficient number of texture units"),_e.profile&&we.maxTextureUnits<Se+1&&(we.maxTextureUnits=Se+1),Q.unit=Se,I.activeTexture(Py+Se),I.bindTexture(Q.target,Q.texture)}return Se},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jt(this)}});function _r(Q,Se){var ye=new pr(yo);Ri[ye.id]=ye,we.textureCount++;function Ot(z,re){var he=ye.texInfo;vn.call(he);var pe=kr();return typeof z=="number"?typeof re=="number"?mr(pe,z|0,re|0):mr(pe,z|0,z|0):z?(P.type(z,"object","invalid arguments to regl.texture"),li(he,z),Gr(pe,z)):mr(pe,1,1),he.genMipmaps&&(pe.mipmask=(pe.width<<1)-1),ye.mipmask=pe.mipmask,ft(ye,pe),P.texture2D(he,pe,Z),ye.internalformat=pe.internalformat,Ot.width=pe.width,Ot.height=pe.height,Zi(ye),si(pe,yo),gi(he,yo),qr(),vi(pe),_e.profile&&(ye.stats.size=Dx(ye.internalformat,ye.type,pe.width,pe.height,he.genMipmaps,!1)),Ot.format=rt[ye.internalformat],Ot.type=wt[ye.type],Ot.mag=je[he.magFilter],Ot.min=Ct[he.minFilter],Ot.wrapS=Ve[he.wrapS],Ot.wrapT=Ve[he.wrapT],Ot}function xr(z,re,he,pe){P(!!z,"must specify image data");var ae=re|0,ie=he|0,se=pe|0,Y=Dt();return ft(Y,ye),Y.width=0,Y.height=0,at(Y,z),Y.width=Y.width||(ye.width>>se)-ae,Y.height=Y.height||(ye.height>>se)-ie,P(ye.type===Y.type&&ye.format===Y.format&&ye.internalformat===Y.internalformat,"incompatible format for texture.subimage"),P(ae>=0&&ie>=0&&ae+Y.width<=ye.width&&ie+Y.height<=ye.height,"texture.subimage write out of bounds"),P(ye.mipmask&1<<se,"missing mipmap data"),P(Y.data||Y.element||Y.needsCopy,"missing image data"),Zi(ye),or(Y,yo,ae,ie,se),qr(),br(Y),Ot}function X(z,re){var he=z|0,pe=re|0||he;if(he===ye.width&&pe===ye.height)return Ot;Ot.width=ye.width=he,Ot.height=ye.height=pe,Zi(ye);for(var ae=0;ye.mipmask>>ae;++ae){var ie=he>>ae,se=pe>>ae;if(!ie||!se)break;I.texImage2D(yo,ae,ye.format,ie,se,0,ye.format,ye.type,null)}return qr(),_e.profile&&(ye.stats.size=Dx(ye.internalformat,ye.type,he,pe,!1,!1)),Ot}return Ot(Q,Se),Ot.subimage=xr,Ot.resize=X,Ot._reglType="texture2d",Ot._texture=ye,_e.profile&&(Ot.stats=ye.stats),Ot.destroy=function(){ye.decRef()},Ot}function Nr(Q,Se,ye,Ot,xr,X){var z=new pr(wo);Ri[z.id]=z,we.cubeCount++;var re=new Array(6);function he(ie,se,Y,ee,H,ue){var ve,Pe=z.texInfo;for(vn.call(Pe),ve=0;ve<6;++ve)re[ve]=kr();if(typeof ie=="number"||!ie){var Re=ie|0||1;for(ve=0;ve<6;++ve)mr(re[ve],Re,Re)}else if(typeof ie=="object")if(se)Gr(re[0],ie),Gr(re[1],se),Gr(re[2],Y),Gr(re[3],ee),Gr(re[4],H),Gr(re[5],ue);else if(li(Pe,ie),Ht(z,ie),"faces"in ie){var Me=ie.faces;for(P(Array.isArray(Me)&&Me.length===6,"cube faces must be a length 6 array"),ve=0;ve<6;++ve)P(typeof Me[ve]=="object"&&!!Me[ve],"invalid input for cube map face"),ft(re[ve],z),Gr(re[ve],Me[ve])}else for(ve=0;ve<6;++ve)Gr(re[ve],ie);else P.raise("invalid arguments to cube map");for(ft(z,re[0]),Z.npotTextureCube||P(vu(z.width)&&vu(z.height),"your browser does not support non power or two texture dimensions"),Pe.genMipmaps?z.mipmask=(re[0].width<<1)-1:z.mipmask=re[0].mipmask,P.textureCube(z,Pe,re,Z),z.internalformat=re[0].internalformat,he.width=re[0].width,he.height=re[0].height,Zi(z),ve=0;ve<6;++ve)si(re[ve],ig+ve);for(gi(Pe,wo),qr(),_e.profile&&(z.stats.size=Dx(z.internalformat,z.type,he.width,he.height,Pe.genMipmaps,!0)),he.format=rt[z.internalformat],he.type=wt[z.type],he.mag=je[Pe.magFilter],he.min=Ct[Pe.minFilter],he.wrapS=Ve[Pe.wrapS],he.wrapT=Ve[Pe.wrapT],ve=0;ve<6;++ve)vi(re[ve]);return he}function pe(ie,se,Y,ee,H){P(!!se,"must specify image data"),P(typeof ie=="number"&&ie===(ie|0)&&ie>=0&&ie<6,"invalid face");var ue=Y|0,ve=ee|0,Pe=H|0,Re=Dt();return ft(Re,z),Re.width=0,Re.height=0,at(Re,se),Re.width=Re.width||(z.width>>Pe)-ue,Re.height=Re.height||(z.height>>Pe)-ve,P(z.type===Re.type&&z.format===Re.format&&z.internalformat===Re.internalformat,"incompatible format for texture.subimage"),P(ue>=0&&ve>=0&&ue+Re.width<=z.width&&ve+Re.height<=z.height,"texture.subimage write out of bounds"),P(z.mipmask&1<<Pe,"missing mipmap data"),P(Re.data||Re.element||Re.needsCopy,"missing image data"),Zi(z),or(Re,ig+ie,ue,ve,Pe),qr(),br(Re),he}function ae(ie){var se=ie|0;if(se!==z.width){he.width=z.width=se,he.height=z.height=se,Zi(z);for(var Y=0;Y<6;++Y)for(var ee=0;z.mipmask>>ee;++ee)I.texImage2D(ig+Y,ee,z.format,se>>ee,se>>ee,0,z.format,z.type,null);return qr(),_e.profile&&(z.stats.size=Dx(z.internalformat,z.type,he.width,he.height,!1,!0)),he}}return he(Q,Se,ye,Ot,xr,X),he.subimage=pe,he.resize=ae,he._reglType="textureCube",he._texture=z,_e.profile&&(he.stats=z.stats),he.destroy=function(){z.decRef()},he}function Jn(){for(var Q=0;Q<Qi;++Q)I.activeTexture(Py+Q),I.bindTexture(yo,null),Zn[Q]=null;pi(Ri).forEach(Jt),we.cubeCount=0,we.textureCount=0}_e.profile&&(we.getTotalTextureSize=function(){var Q=0;return Object.keys(Ri).forEach(function(Se){Q+=Ri[Se].stats.size}),Q});function Su(){for(var Q=0;Q<Qi;++Q){var Se=Zn[Q];Se&&(Se.bindCount=0,Se.unit=-1,Zn[Q]=null)}pi(Ri).forEach(function(ye){ye.texture=I.createTexture(),I.bindTexture(ye.target,ye.texture);for(var Ot=0;Ot<32;++Ot)if(ye.mipmask&1<<Ot)if(ye.target===yo)I.texImage2D(yo,Ot,ye.internalformat,ye.width>>Ot,ye.height>>Ot,0,ye.internalformat,ye.type,null);else for(var xr=0;xr<6;++xr)I.texImage2D(ig+xr,Ot,ye.internalformat,ye.width>>Ot,ye.height>>Ot,0,ye.internalformat,ye.type,null);gi(ye.texInfo,ye.target)})}function cp(){for(var Q=0;Q<Qi;++Q){var Se=Zn[Q];Se&&(Se.bindCount=0,Se.unit=-1,Zn[Q]=null),I.activeTexture(Py+Q),I.bindTexture(yo,null),I.bindTexture(wo,null)}}return{create2D:_r,createCube:Nr,clear:Jn,getTexture:function(Q){return null},restore:Su,refresh:cp}}var sh=36161,Px=32854,GB=32855,UB=36194,WB=33189,VB=36168,HB=34041,XB=35907,YB=34836,qB=34842,KB=34843,El=[];El[Px]=2,El[GB]=2,El[UB]=2,El[WB]=2,El[VB]=1,El[HB]=4,El[XB]=4,El[YB]=16,El[qB]=8,El[KB]=6;function QB(I,U,Z){return El[I]*U*Z}var epe=function(I,U,Z,be,Le){var we={rgba4:Px,rgb565:UB,"rgb5 a1":GB,depth:WB,stencil:VB,"depth stencil":HB};U.ext_srgb&&(we.srgba=XB),U.ext_color_buffer_half_float&&(we.rgba16f=qB,we.rgb16f=KB),U.webgl_color_buffer_float&&(we.rgba32f=YB);var _e=[];Object.keys(we).forEach(function(Ke){var lt=we[Ke];_e[lt]=Ke});var qe=0,Ze={};function nt(Ke){this.id=qe++,this.refCount=1,this.renderbuffer=Ke,this.format=Px,this.width=0,this.height=0,Le.profile&&(this.stats={size:0})}nt.prototype.decRef=function(){--this.refCount<=0&&Je(this)};function Je(Ke){var lt=Ke.renderbuffer;P(lt,"must not double destroy renderbuffer"),I.bindRenderbuffer(sh,null),I.deleteRenderbuffer(lt),Ke.renderbuffer=null,Ke.refCount=0,delete Ze[Ke.id],be.renderbufferCount--}function st(Ke,lt){var de=new nt(I.createRenderbuffer());Ze[de.id]=de,be.renderbufferCount++;function Ce(wt,je){var Ct=0,Ve=0,ct=Px;if(typeof wt=="object"&&wt){var We=wt;if("shape"in We){var ft=We.shape;P(Array.isArray(ft)&&ft.length>=2,"invalid renderbuffer shape"),Ct=ft[0]|0,Ve=ft[1]|0}else"radius"in We&&(Ct=Ve=We.radius|0),"width"in We&&(Ct=We.width|0),"height"in We&&(Ve=We.height|0);"format"in We&&(P.parameter(We.format,we,"invalid renderbuffer format"),ct=we[We.format])}else typeof wt=="number"?(Ct=wt|0,typeof je=="number"?Ve=je|0:Ve=Ct):wt?P.raise("invalid arguments to renderbuffer constructor"):Ct=Ve=1;if(P(Ct>0&&Ve>0&&Ct<=Z.maxRenderbufferSize&&Ve<=Z.maxRenderbufferSize,"invalid renderbuffer size"),!(Ct===de.width&&Ve===de.height&&ct===de.format))return Ce.width=de.width=Ct,Ce.height=de.height=Ve,de.format=ct,I.bindRenderbuffer(sh,de.renderbuffer),I.renderbufferStorage(sh,ct,Ct,Ve),P(I.getError()===0,"invalid render buffer format"),Le.profile&&(de.stats.size=QB(de.format,de.width,de.height)),Ce.format=_e[de.format],Ce}function rt(wt,je){var Ct=wt|0,Ve=je|0||Ct;return Ct===de.width&&Ve===de.height||(P(Ct>0&&Ve>0&&Ct<=Z.maxRenderbufferSize&&Ve<=Z.maxRenderbufferSize,"invalid renderbuffer size"),Ce.width=de.width=Ct,Ce.height=de.height=Ve,I.bindRenderbuffer(sh,de.renderbuffer),I.renderbufferStorage(sh,de.format,Ct,Ve),P(I.getError()===0,"invalid render buffer format"),Le.profile&&(de.stats.size=QB(de.format,de.width,de.height))),Ce}return Ce(Ke,lt),Ce.resize=rt,Ce._reglType="renderbuffer",Ce._renderbuffer=de,Le.profile&&(Ce.stats=de.stats),Ce.destroy=function(){de.decRef()},Ce}Le.profile&&(be.getTotalRenderbufferSize=function(){var Ke=0;return Object.keys(Ze).forEach(function(lt){Ke+=Ze[lt].stats.size}),Ke});function vt(){pi(Ze).forEach(function(Ke){Ke.renderbuffer=I.createRenderbuffer(),I.bindRenderbuffer(sh,Ke.renderbuffer),I.renderbufferStorage(sh,Ke.format,Ke.width,Ke.height)}),I.bindRenderbuffer(sh,null)}return{create:st,clear:function(){pi(Ze).forEach(Je)},restore:vt}},Uc=36160,uT=36161,ip=3553,Lx=34069,ZB=36064,JB=36096,e9=36128,t9=33306,r9=36053,tpe=36054,rpe=36055,npe=36057,ipe=36061,ape=36193,ope=5121,spe=5126,n9=6407,i9=6408,lpe=6402,upe=[n9,i9],cT=[];cT[i9]=4,cT[n9]=3;var Rx=[];Rx[ope]=1,Rx[spe]=4,Rx[ape]=2;var cpe=32854,fpe=32855,hpe=36194,dpe=33189,ppe=36168,a9=34041,vpe=35907,gpe=34836,mpe=34842,ype=34843,wpe=[cpe,fpe,hpe,vpe,mpe,ype,gpe],yg={};yg[r9]="complete",yg[tpe]="incomplete attachment",yg[npe]="incomplete dimensions",yg[rpe]="incomplete, missing attachment",yg[ipe]="unsupported";function bpe(I,U,Z,be,Le,we){var _e={cur:null,next:null,dirty:!1,setFBO:null},qe=["rgba"],Ze=["rgba4","rgb565","rgb5 a1"];U.ext_srgb&&Ze.push("srgba"),U.ext_color_buffer_half_float&&Ze.push("rgba16f","rgb16f"),U.webgl_color_buffer_float&&Ze.push("rgba32f");var nt=["uint8"];U.oes_texture_half_float&&nt.push("half float","float16"),U.oes_texture_float&&nt.push("float","float32");function Je(gt,at,ze){this.target=gt,this.texture=at,this.renderbuffer=ze;var or=0,dr=0;at?(or=at.width,dr=at.height):ze&&(or=ze.width,dr=ze.height),this.width=or,this.height=dr}function st(gt){gt&&(gt.texture&&gt.texture._texture.decRef(),gt.renderbuffer&&gt.renderbuffer._renderbuffer.decRef())}function vt(gt,at,ze){if(gt)if(gt.texture){var or=gt.texture._texture,dr=Math.max(1,or.width),Dt=Math.max(1,or.height);P(dr===at&&Dt===ze,"inconsistent width/height for supplied texture"),or.refCount+=1}else{var br=gt.renderbuffer._renderbuffer;P(br.width===at&&br.height===ze,"inconsistent width/height for renderbuffer"),br.refCount+=1}}function Ke(gt,at){at&&(at.texture?I.framebufferTexture2D(Uc,gt,at.target,at.texture._texture.texture,0):I.framebufferRenderbuffer(Uc,gt,uT,at.renderbuffer._renderbuffer.renderbuffer))}function lt(gt){var at=ip,ze=null,or=null,dr=gt;typeof gt=="object"&&(dr=gt.data,"target"in gt&&(at=gt.target|0)),P.type(dr,"function","invalid attachment data");var Dt=dr._reglType;return Dt==="texture2d"?(ze=dr,P(at===ip)):Dt==="textureCube"?(ze=dr,P(at>=Lx&&at<Lx+6,"invalid cube map target")):Dt==="renderbuffer"?(or=dr,at=uT):P.raise("invalid regl object for attachment"),new Je(at,ze,or)}function de(gt,at,ze,or,dr){if(ze){var Dt=be.create2D({width:gt,height:at,format:or,type:dr});return Dt._texture.refCount=0,new Je(ip,Dt,null)}else{var br=Le.create({width:gt,height:at,format:or});return br._renderbuffer.refCount=0,new Je(uT,null,br)}}function Ce(gt){return gt&&(gt.texture||gt.renderbuffer)}function rt(gt,at,ze){gt&&(gt.texture?gt.texture.resize(at,ze):gt.renderbuffer&&gt.renderbuffer.resize(at,ze),gt.width=at,gt.height=ze)}var wt=0,je={};function Ct(){this.id=wt++,je[this.id]=this,this.framebuffer=I.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ve(gt){gt.colorAttachments.forEach(st),st(gt.depthAttachment),st(gt.stencilAttachment),st(gt.depthStencilAttachment)}function ct(gt){var at=gt.framebuffer;P(at,"must not double destroy framebuffer"),I.deleteFramebuffer(at),gt.framebuffer=null,we.framebufferCount--,delete je[gt.id]}function We(gt){var at;I.bindFramebuffer(Uc,gt.framebuffer);var ze=gt.colorAttachments;for(at=0;at<ze.length;++at)Ke(ZB+at,ze[at]);for(at=ze.length;at<Z.maxColorAttachments;++at)I.framebufferTexture2D(Uc,ZB+at,ip,null,0);I.framebufferTexture2D(Uc,t9,ip,null,0),I.framebufferTexture2D(Uc,JB,ip,null,0),I.framebufferTexture2D(Uc,e9,ip,null,0),Ke(JB,gt.depthAttachment),Ke(e9,gt.stencilAttachment),Ke(t9,gt.depthStencilAttachment);var or=I.checkFramebufferStatus(Uc);!I.isContextLost()&&or!==r9&&P.raise("framebuffer configuration not supported, status = "+yg[or]),I.bindFramebuffer(Uc,_e.next?_e.next.framebuffer:null),_e.cur=_e.next,I.getError()}function ft(gt,at){var ze=new Ct;we.framebufferCount++;function or(Dt,br){var ur;P(_e.next!==ze,"can not update framebuffer which is currently in use");var mr=0,Gr=0,si=!0,Ci=!0,kr=null,vi=!0,vn="rgba",li="uint8",gi=1,mi=null,Ri=null,Qi=null,Zn=!1;if(typeof Dt=="number")mr=Dt|0,Gr=br|0||mr;else if(!Dt)mr=Gr=1;else{P.type(Dt,"object","invalid arguments for framebuffer");var pr=Dt;if("shape"in pr){var Zi=pr.shape;P(Array.isArray(Zi)&&Zi.length>=2,"invalid shape for framebuffer"),mr=Zi[0],Gr=Zi[1]}else"radius"in pr&&(mr=Gr=pr.radius),"width"in pr&&(mr=pr.width),"height"in pr&&(Gr=pr.height);("color"in pr||"colors"in pr)&&(kr=pr.color||pr.colors,Array.isArray(kr)&&P(kr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),kr||("colorCount"in pr&&(gi=pr.colorCount|0,P(gi>0,"invalid color buffer count")),"colorTexture"in pr&&(vi=!!pr.colorTexture,vn="rgba4"),"colorType"in pr&&(li=pr.colorType,vi?(P(U.oes_texture_float||!(li==="float"||li==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),P(U.oes_texture_half_float||!(li==="half float"||li==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):li==="half float"||li==="float16"?(P(U.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),vn="rgba16f"):(li==="float"||li==="float32")&&(P(U.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),vn="rgba32f"),P.oneOf(li,nt,"invalid color type")),"colorFormat"in pr&&(vn=pr.colorFormat,qe.indexOf(vn)>=0?vi=!0:Ze.indexOf(vn)>=0?vi=!1:vi?P.oneOf(pr.colorFormat,qe,"invalid color format for texture"):P.oneOf(pr.colorFormat,Ze,"invalid color format for renderbuffer"))),("depthTexture"in pr||"depthStencilTexture"in pr)&&(Zn=!!(pr.depthTexture||pr.depthStencilTexture),P(!Zn||U.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in pr&&(typeof pr.depth=="boolean"?si=pr.depth:(mi=pr.depth,Ci=!1)),"stencil"in pr&&(typeof pr.stencil=="boolean"?Ci=pr.stencil:(Ri=pr.stencil,si=!1)),"depthStencil"in pr&&(typeof pr.depthStencil=="boolean"?si=Ci=pr.depthStencil:(Qi=pr.depthStencil,si=!1,Ci=!1))}var qr=null,Jt=null,_r=null,Nr=null;if(Array.isArray(kr))qr=kr.map(lt);else if(kr)qr=[lt(kr)];else for(qr=new Array(gi),ur=0;ur<gi;++ur)qr[ur]=de(mr,Gr,vi,vn,li);P(U.webgl_draw_buffers||qr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),P(qr.length<=Z.maxColorAttachments,"too many color attachments, not supported"),mr=mr||qr[0].width,Gr=Gr||qr[0].height,mi?Jt=lt(mi):si&&!Ci&&(Jt=de(mr,Gr,Zn,"depth","uint32")),Ri?_r=lt(Ri):Ci&&!si&&(_r=de(mr,Gr,!1,"stencil","uint8")),Qi?Nr=lt(Qi):!mi&&!Ri&&Ci&&si&&(Nr=de(mr,Gr,Zn,"depth stencil","depth stencil")),P(!!mi+!!Ri+!!Qi<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Jn=null;for(ur=0;ur<qr.length;++ur)if(vt(qr[ur],mr,Gr),P(!qr[ur]||qr[ur].texture&&upe.indexOf(qr[ur].texture._texture.format)>=0||qr[ur].renderbuffer&&wpe.indexOf(qr[ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ur+" is invalid"),qr[ur]&&qr[ur].texture){var Su=cT[qr[ur].texture._texture.format]*Rx[qr[ur].texture._texture.type];Jn===null?Jn=Su:P(Jn===Su,"all color attachments much have the same number of bits per pixel.")}return vt(Jt,mr,Gr),P(!Jt||Jt.texture&&Jt.texture._texture.format===lpe||Jt.renderbuffer&&Jt.renderbuffer._renderbuffer.format===dpe,"invalid depth attachment for framebuffer object"),vt(_r,mr,Gr),P(!_r||_r.renderbuffer&&_r.renderbuffer._renderbuffer.format===ppe,"invalid stencil attachment for framebuffer object"),vt(Nr,mr,Gr),P(!Nr||Nr.texture&&Nr.texture._texture.format===a9||Nr.renderbuffer&&Nr.renderbuffer._renderbuffer.format===a9,"invalid depth-stencil attachment for framebuffer object"),Ve(ze),ze.width=mr,ze.height=Gr,ze.colorAttachments=qr,ze.depthAttachment=Jt,ze.stencilAttachment=_r,ze.depthStencilAttachment=Nr,or.color=qr.map(Ce),or.depth=Ce(Jt),or.stencil=Ce(_r),or.depthStencil=Ce(Nr),or.width=ze.width,or.height=ze.height,We(ze),or}function dr(Dt,br){P(_e.next!==ze,"can not resize a framebuffer which is currently in use");var ur=Math.max(Dt|0,1),mr=Math.max(br|0||ur,1);if(ur===ze.width&&mr===ze.height)return or;for(var Gr=ze.colorAttachments,si=0;si<Gr.length;++si)rt(Gr[si],ur,mr);return rt(ze.depthAttachment,ur,mr),rt(ze.stencilAttachment,ur,mr),rt(ze.depthStencilAttachment,ur,mr),ze.width=or.width=ur,ze.height=or.height=mr,We(ze),or}return or(gt,at),n(or,{resize:dr,_reglType:"framebuffer",_framebuffer:ze,destroy:function(){ct(ze),Ve(ze)},use:function(Dt){_e.setFBO({framebuffer:or},Dt)}})}function Ht(gt){var at=Array(6);function ze(dr){var Dt;P(at.indexOf(_e.next)<0,"can not update framebuffer which is currently in use");var br={color:null},ur=0,mr=null,Gr="rgba",si="uint8",Ci=1;if(typeof dr=="number")ur=dr|0;else if(!dr)ur=1;else{P.type(dr,"object","invalid arguments for framebuffer");var kr=dr;if("shape"in kr){var vi=kr.shape;P(Array.isArray(vi)&&vi.length>=2,"invalid shape for framebuffer"),P(vi[0]===vi[1],"cube framebuffer must be square"),ur=vi[0]}else"radius"in kr&&(ur=kr.radius|0),"width"in kr?(ur=kr.width|0,"height"in kr&&P(kr.height===ur,"must be square")):"height"in kr&&(ur=kr.height|0);("color"in kr||"colors"in kr)&&(mr=kr.color||kr.colors,Array.isArray(mr)&&P(mr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in kr&&(Ci=kr.colorCount|0,P(Ci>0,"invalid color buffer count")),"colorType"in kr&&(P.oneOf(kr.colorType,nt,"invalid color type"),si=kr.colorType),"colorFormat"in kr&&(Gr=kr.colorFormat,P.oneOf(kr.colorFormat,qe,"invalid color format for texture"))),"depth"in kr&&(br.depth=kr.depth),"stencil"in kr&&(br.stencil=kr.stencil),"depthStencil"in kr&&(br.depthStencil=kr.depthStencil)}var vn;if(mr)if(Array.isArray(mr))for(vn=[],Dt=0;Dt<mr.length;++Dt)vn[Dt]=mr[Dt];else vn=[mr];else{vn=Array(Ci);var li={radius:ur,format:Gr,type:si};for(Dt=0;Dt<Ci;++Dt)vn[Dt]=be.createCube(li)}for(br.color=Array(vn.length),Dt=0;Dt<vn.length;++Dt){var gi=vn[Dt];P(typeof gi=="function"&&gi._reglType==="textureCube","invalid cube map"),ur=ur||gi.width,P(gi.width===ur&&gi.height===ur,"invalid cube map shape"),br.color[Dt]={target:Lx,data:vn[Dt]}}for(Dt=0;Dt<6;++Dt){for(var mi=0;mi<vn.length;++mi)br.color[mi].target=Lx+Dt;Dt>0&&(br.depth=at[0].depth,br.stencil=at[0].stencil,br.depthStencil=at[0].depthStencil),at[Dt]?at[Dt](br):at[Dt]=ft(br)}return n(ze,{width:ur,height:ur,color:vn})}function or(dr){var Dt,br=dr|0;if(P(br>0&&br<=Z.maxCubeMapSize,"invalid radius for cube fbo"),br===ze.width)return ze;var ur=ze.color;for(Dt=0;Dt<ur.length;++Dt)ur[Dt].resize(br);for(Dt=0;Dt<6;++Dt)at[Dt].resize(br);return ze.width=ze.height=br,ze}return ze(gt),n(ze,{faces:at,resize:or,_reglType:"framebufferCube",destroy:function(){at.forEach(function(dr){dr.destroy()})}})}function lr(){_e.cur=null,_e.next=null,_e.dirty=!0,pi(je).forEach(function(gt){gt.framebuffer=I.createFramebuffer(),We(gt)})}return n(_e,{getFramebuffer:function(gt){if(typeof gt=="function"&&gt._reglType==="framebuffer"){var at=gt._framebuffer;if(at instanceof Ct)return at}return null},create:ft,createCube:Ht,clear:function(){pi(je).forEach(ct)},restore:lr})}var xpe=5126,o9=34962;function fT(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=xpe,this.offset=0,this.stride=0,this.divisor=0}function Spe(I,U,Z,be,Le){for(var we=Z.maxAttributes,_e=new Array(we),qe=0;qe<we;++qe)_e[qe]=new fT;var Ze=0,nt={},Je={Record:fT,scope:{},state:_e,currentVAO:null,targetVAO:null,restore:vt()?je:function(){},createVAO:Ct,getVAO:lt,destroyBuffer:st,setVAO:vt()?de:Ce,clear:vt()?rt:function(){}};function st(Ve){for(var ct=0;ct<_e.length;++ct){var We=_e[ct];We.buffer===Ve&&(I.disableVertexAttribArray(ct),We.buffer=null)}}function vt(){return U.oes_vertex_array_object}function Ke(){return U.angle_instanced_arrays}function lt(Ve){return typeof Ve=="function"&&Ve._vao?Ve._vao:null}function de(Ve){if(Ve!==Je.currentVAO){var ct=vt();Ve?ct.bindVertexArrayOES(Ve.vao):ct.bindVertexArrayOES(null),Je.currentVAO=Ve}}function Ce(Ve){if(Ve!==Je.currentVAO){if(Ve)Ve.bindAttrs();else for(var ct=Ke(),We=0;We<_e.length;++We){var ft=_e[We];ft.buffer?(I.enableVertexAttribArray(We),I.vertexAttribPointer(We,ft.size,ft.type,ft.normalized,ft.stride,ft.offfset),ct&&ft.divisor&&ct.vertexAttribDivisorANGLE(We,ft.divisor)):(I.disableVertexAttribArray(We),I.vertexAttrib4f(We,ft.x,ft.y,ft.z,ft.w))}Je.currentVAO=Ve}}function rt(){pi(nt).forEach(function(Ve){Ve.destroy()})}function wt(){this.id=++Ze,this.attributes=[];var Ve=vt();Ve?this.vao=Ve.createVertexArrayOES():this.vao=null,nt[this.id]=this,this.buffers=[]}wt.prototype.bindAttrs=function(){for(var Ve=Ke(),ct=this.attributes,We=0;We<ct.length;++We){var ft=ct[We];ft.buffer?(I.enableVertexAttribArray(We),I.bindBuffer(o9,ft.buffer.buffer),I.vertexAttribPointer(We,ft.size,ft.type,ft.normalized,ft.stride,ft.offset),Ve&&ft.divisor&&Ve.vertexAttribDivisorANGLE(We,ft.divisor)):(I.disableVertexAttribArray(We),I.vertexAttrib4f(We,ft.x,ft.y,ft.z,ft.w))}for(var Ht=ct.length;Ht<we;++Ht)I.disableVertexAttribArray(Ht)},wt.prototype.refresh=function(){var Ve=vt();Ve&&(Ve.bindVertexArrayOES(this.vao),this.bindAttrs(),Je.currentVAO=this)},wt.prototype.destroy=function(){if(this.vao){var Ve=vt();this===Je.currentVAO&&(Je.currentVAO=null,Ve.bindVertexArrayOES(null)),Ve.deleteVertexArrayOES(this.vao),this.vao=null}nt[this.id]&&(delete nt[this.id],be.vaoCount-=1)};function je(){var Ve=vt();Ve&&pi(nt).forEach(function(ct){ct.refresh()})}function Ct(Ve){var ct=new wt;be.vaoCount+=1;function We(ft){P(Array.isArray(ft),"arguments to vertex array constructor must be an array"),P(ft.length<we,"too many attributes"),P(ft.length>0,"must specify at least one attribute");var Ht={},lr=ct.attributes;lr.length=ft.length;for(var gt=0;gt<ft.length;++gt){var at=ft[gt],ze=lr[gt]=new fT,or=at.data||at;if(Array.isArray(or)||r(or)||Xa(or)){var dr;ct.buffers[gt]&&(dr=ct.buffers[gt],r(or)&&dr._buffer.byteLength>=or.byteLength?dr.subdata(or):(dr.destroy(),ct.buffers[gt]=null)),ct.buffers[gt]||(dr=ct.buffers[gt]=Le.create(at,o9,!1,!0)),ze.buffer=Le.getBuffer(dr),ze.size=ze.buffer.dimension|0,ze.normalized=!1,ze.type=ze.buffer.dtype,ze.offset=0,ze.stride=0,ze.divisor=0,ze.state=1,Ht[gt]=1}else Le.getBuffer(at)?(ze.buffer=Le.getBuffer(at),ze.size=ze.buffer.dimension|0,ze.normalized=!1,ze.type=ze.buffer.dtype,ze.offset=0,ze.stride=0,ze.divisor=0,ze.state=1):Le.getBuffer(at.buffer)?(ze.buffer=Le.getBuffer(at.buffer),ze.size=(+at.size||ze.buffer.dimension)|0,ze.normalized=!!at.normalized||!1,"type"in at?(P.parameter(at.type,yl,"invalid buffer type"),ze.type=yl[at.type]):ze.type=ze.buffer.dtype,ze.offset=(at.offset||0)|0,ze.stride=(at.stride||0)|0,ze.divisor=(at.divisor||0)|0,ze.state=1,P(ze.size>=1&&ze.size<=4,"size must be between 1 and 4"),P(ze.offset>=0,"invalid offset"),P(ze.stride>=0&&ze.stride<=255,"stride must be between 0 and 255"),P(ze.divisor>=0,"divisor must be positive"),P(!ze.divisor||!!U.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in at?(P(gt>0,"first attribute must not be a constant"),ze.x=+at.x||0,ze.y=+at.y||0,ze.z=+at.z||0,ze.w=+at.w||0,ze.state=2):P(!1,"invalid attribute spec for location "+gt)}for(var Dt=0;Dt<ct.buffers.length;++Dt)!Ht[Dt]&&ct.buffers[Dt]&&(ct.buffers[Dt].destroy(),ct.buffers[Dt]=null);return ct.refresh(),We}return We.destroy=function(){for(var ft=0;ft<ct.buffers.length;++ft)ct.buffers[ft]&&ct.buffers[ft].destroy();ct.buffers.length=0,ct.destroy()},We._vao=ct,We._reglType="vao",We(Ve)}return Je}var s9=35632,Epe=35633,_pe=35718,Cpe=35721;function kpe(I,U,Z,be){var Le={},we={};function _e(de,Ce,rt,wt){this.name=de,this.id=Ce,this.location=rt,this.info=wt}function qe(de,Ce){for(var rt=0;rt<de.length;++rt)if(de[rt].id===Ce.id){de[rt].location=Ce.location;return}de.push(Ce)}function Ze(de,Ce,rt){var wt=de===s9?Le:we,je=wt[Ce];if(!je){var Ct=U.str(Ce);je=I.createShader(de),I.shaderSource(je,Ct),I.compileShader(je),P.shaderError(I,je,Ct,de,rt),wt[Ce]=je}return je}var nt={},Je=[],st=0;function vt(de,Ce){this.id=st++,this.fragId=de,this.vertId=Ce,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,be.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ke(de,Ce,rt){var wt,je,Ct=Ze(s9,de.fragId),Ve=Ze(Epe,de.vertId),ct=de.program=I.createProgram();if(I.attachShader(ct,Ct),I.attachShader(ct,Ve),rt)for(wt=0;wt<rt.length;++wt){var We=rt[wt];I.bindAttribLocation(ct,We[0],We[1])}I.linkProgram(ct),P.linkError(I,ct,U.str(de.fragId),U.str(de.vertId),Ce);var ft=I.getProgramParameter(ct,_pe);be.profile&&(de.stats.uniformsCount=ft);var Ht=de.uniforms;for(wt=0;wt<ft;++wt)if(je=I.getActiveUniform(ct,wt),je)if(je.size>1)for(var lr=0;lr<je.size;++lr){var gt=je.name.replace("[0]","["+lr+"]");qe(Ht,new _e(gt,U.id(gt),I.getUniformLocation(ct,gt),je))}else qe(Ht,new _e(je.name,U.id(je.name),I.getUniformLocation(ct,je.name),je));var at=I.getProgramParameter(ct,Cpe);be.profile&&(de.stats.attributesCount=at);var ze=de.attributes;for(wt=0;wt<at;++wt)je=I.getActiveAttrib(ct,wt),je&&qe(ze,new _e(je.name,U.id(je.name),I.getAttribLocation(ct,je.name),je))}be.profile&&(Z.getMaxUniformsCount=function(){var de=0;return Je.forEach(function(Ce){Ce.stats.uniformsCount>de&&(de=Ce.stats.uniformsCount)}),de},Z.getMaxAttributesCount=function(){var de=0;return Je.forEach(function(Ce){Ce.stats.attributesCount>de&&(de=Ce.stats.attributesCount)}),de});function lt(){Le={},we={};for(var de=0;de<Je.length;++de)Ke(Je[de],null,Je[de].attributes.map(function(Ce){return[Ce.location,Ce.name]}))}return{clear:function(){var de=I.deleteShader.bind(I);pi(Le).forEach(de),Le={},pi(we).forEach(de),we={},Je.forEach(function(Ce){I.deleteProgram(Ce.program)}),Je.length=0,nt={},Z.shaderCount=0},program:function(de,Ce,rt,wt){P.command(de>=0,"missing vertex shader",rt),P.command(Ce>=0,"missing fragment shader",rt);var je=nt[Ce];je||(je=nt[Ce]={});var Ct=je[de];if(Ct&&(Ct.refCount++,!wt))return Ct;var Ve=new vt(Ce,de);return Z.shaderCount++,Ke(Ve,rt,wt),Ct||(je[de]=Ve),Je.push(Ve),n(Ve,{destroy:function(){if(Ve.refCount--,Ve.refCount<=0){I.deleteProgram(Ve.program);var ct=Je.indexOf(Ve);Je.splice(ct,1),Z.shaderCount--}je[Ve.vertId].refCount<=0&&(I.deleteShader(we[Ve.vertId]),delete we[Ve.vertId],delete nt[Ve.fragId][Ve.vertId]),Object.keys(nt[Ve.fragId]).length||(I.deleteShader(Le[Ve.fragId]),delete Le[Ve.fragId],delete nt[Ve.fragId])}})},restore:lt,shader:Ze,frag:-1,vert:-1}}var Mpe=6408,Ly=5121,Ape=3333,Nx=5126;function Tpe(I,U,Z,be,Le,we,_e){function qe(Je){var st;U.next===null?(P(Le.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),st=Ly):(P(U.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),st=U.next.colorAttachments[0].texture._texture.type,we.oes_texture_float?(P(st===Ly||st===Nx,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),st===Nx&&P(_e.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):P(st===Ly,"Reading from a framebuffer is only allowed for the type 'uint8'"));var vt=0,Ke=0,lt=be.framebufferWidth,de=be.framebufferHeight,Ce=null;r(Je)?Ce=Je:Je&&(P.type(Je,"object","invalid arguments to regl.read()"),vt=Je.x|0,Ke=Je.y|0,P(vt>=0&&vt<be.framebufferWidth,"invalid x offset for regl.read"),P(Ke>=0&&Ke<be.framebufferHeight,"invalid y offset for regl.read"),lt=(Je.width||be.framebufferWidth-vt)|0,de=(Je.height||be.framebufferHeight-Ke)|0,Ce=Je.data||null),Ce&&(st===Ly?P(Ce instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):st===Nx&&P(Ce instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),P(lt>0&&lt+vt<=be.framebufferWidth,"invalid width for read pixels"),P(de>0&&de+Ke<=be.framebufferHeight,"invalid height for read pixels"),Z();var rt=lt*de*4;return Ce||(st===Ly?Ce=new Uint8Array(rt):st===Nx&&(Ce=Ce||new Float32Array(rt))),P.isTypedArray(Ce,"data buffer for regl.read() must be a typedarray"),P(Ce.byteLength>=rt,"data buffer for regl.read() too small"),I.pixelStorei(Ape,4),I.readPixels(vt,Ke,lt,de,Mpe,st,Ce),Ce}function Ze(Je){var st;return U.setFBO({framebuffer:Je.framebuffer},function(){st=qe(Je)}),st}function nt(Je){return!Je||!("framebuffer"in Je)?qe(Je):Ze(Je)}return nt}function wg(I){return Array.prototype.slice.call(I)}function bg(I){return wg(I).join("")}function Ope(){var I=0,U=[],Z=[];function be(st){for(var vt=0;vt<Z.length;++vt)if(Z[vt]===st)return U[vt];var Ke="g"+I++;return U.push(Ke),Z.push(st),Ke}function Le(){var st=[];function vt(){st.push.apply(st,wg(arguments))}var Ke=[];function lt(){var de="v"+I++;return Ke.push(de),arguments.length>0&&(st.push(de,"="),st.push.apply(st,wg(arguments)),st.push(";")),de}return n(vt,{def:lt,toString:function(){return bg([Ke.length>0?"var "+Ke.join(",")+";":"",bg(st)])}})}function we(){var st=Le(),vt=Le(),Ke=st.toString,lt=vt.toString;function de(Ce,rt){vt(Ce,rt,"=",st.def(Ce,rt),";")}return n(function(){st.apply(st,wg(arguments))},{def:st.def,entry:st,exit:vt,save:de,set:function(Ce,rt,wt){de(Ce,rt),st(Ce,rt,"=",wt,";")},toString:function(){return Ke()+lt()}})}function _e(){var st=bg(arguments),vt=we(),Ke=we(),lt=vt.toString,de=Ke.toString;return n(vt,{then:function(){return vt.apply(vt,wg(arguments)),this},else:function(){return Ke.apply(Ke,wg(arguments)),this},toString:function(){var Ce=de();return Ce&&(Ce="else{"+Ce+"}"),bg(["if(",st,"){",lt(),"}",Ce])}})}var qe=Le(),Ze={};function nt(st,vt){var Ke=[];function lt(){var je="a"+Ke.length;return Ke.push(je),je}vt=vt||0;for(var de=0;de<vt;++de)lt();var Ce=we(),rt=Ce.toString,wt=Ze[st]=n(Ce,{arg:lt,toString:function(){return bg(["function(",Ke.join(),"){",rt(),"}"])}});return wt}function Je(){var st=['"use strict";',qe,"return {"];Object.keys(Ze).forEach(function(lt){st.push('"',lt,'":',Ze[lt].toString(),",")}),st.push("}");var vt=bg(st).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ke=Function.apply(null,U.concat(vt));return Ke.apply(null,Z)}return{global:qe,link:be,block:Le,proc:nt,scope:we,cond:_e,compile:Je}}var xg="xyzw".split(""),l9=5121,Sg=1,hT=2,dT=0,pT=1,vT=2,gT=3,Fx=4,u9=5,c9=6,f9="dither",h9="blend.enable",d9="blend.color",mT="blend.equation",yT="blend.func",p9="depth.enable",v9="depth.func",g9="depth.range",m9="depth.mask",wT="colorMask",y9="cull.enable",w9="cull.face",bT="frontFace",xT="lineWidth",b9="polygonOffset.enable",ST="polygonOffset.offset",x9="sample.alpha",S9="sample.enable",ET="sample.coverage",E9="stencil.enable",_9="stencil.mask",_T="stencil.func",CT="stencil.opFront",Ry="stencil.opBack",C9="scissor.enable",Bx="scissor.box",Wc="viewport",Ny="profile",ap="framebuffer",Fy="vert",By="frag",op="elements",sp="primitive",lp="count",$x="offset",zx="instances",$y="vao",kT="Width",MT="Height",Eg=ap+kT,_g=ap+MT,Ipe=Wc+kT,Dpe=Wc+MT,k9="drawingBuffer",M9=k9+kT,A9=k9+MT,Ppe=[yT,mT,_T,CT,Ry,ET,Wc,Bx,ST],Cg=34962,Lpe=34963,Rpe=35632,Npe=35633,T9=3553,Fpe=34067,Bpe=2884,$pe=3042,zpe=3024,jpe=2960,Gpe=2929,Upe=3089,Wpe=32823,Vpe=32926,Hpe=32928,AT=5126,jx=35664,Gx=35665,Ux=35666,TT=5124,Wx=35667,Vx=35668,Hx=35669,OT=35670,Xx=35671,Yx=35672,qx=35673,zy=35674,jy=35675,Gy=35676,Uy=35678,Wy=35680,O9=4,Vy=1028,up=1029,I9=2304,IT=2305,Xpe=32775,Ype=32776,qpe=519,lh=7680,D9=0,P9=1,L9=32774,Kpe=513,R9=36160,Qpe=36064,xu={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},N9=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],kg={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},uh={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},F9={frag:Rpe,vert:Npe},DT={cw:I9,ccw:IT};function Kx(I){return Array.isArray(I)||r(I)||Xa(I)}function B9(I){return I.sort(function(U,Z){return U===Wc?-1:Z===Wc?1:U<Z?-1:1})}function Ka(I,U,Z,be){this.thisDep=I,this.contextDep=U,this.propDep=Z,this.append=be}function ch(I){return I&&!(I.thisDep||I.contextDep||I.propDep)}function oi(I){return new Ka(!1,!1,!1,I)}function xo(I,U){var Z=I.type;if(Z===dT){var be=I.data.length;return new Ka(!0,be>=1,be>=2,U)}else if(Z===Fx){var Le=I.data;return new Ka(Le.thisDep,Le.contextDep,Le.propDep,U)}else{if(Z===u9)return new Ka(!1,!1,!1,U);if(Z===c9){for(var we=!1,_e=!1,qe=!1,Ze=0;Ze<I.data.length;++Ze){var nt=I.data[Ze];if(nt.type===pT)qe=!0;else if(nt.type===vT)_e=!0;else if(nt.type===gT)we=!0;else if(nt.type===dT){we=!0;var Je=nt.data;Je>=1&&(_e=!0),Je>=2&&(qe=!0)}else nt.type===Fx&&(we=we||nt.data.thisDep,_e=_e||nt.data.contextDep,qe=qe||nt.data.propDep)}return new Ka(we,_e,qe,U)}else return new Ka(Z===gT,Z===vT,Z===pT,U)}}var $9=new Ka(!1,!1,!1,function(){});function Zpe(I,U,Z,be,Le,we,_e,qe,Ze,nt,Je,st,vt,Ke,lt){var de=nt.Record,Ce={add:32774,subtract:32778,"reverse subtract":32779};Z.ext_blend_minmax&&(Ce.min=Xpe,Ce.max=Ype);var rt=Z.angle_instanced_arrays,wt=Z.webgl_draw_buffers,je={dirty:!0,profile:lt.profile},Ct={},Ve=[],ct={},We={};function ft(X){return X.replace(".","_")}function Ht(X,z,re){var he=ft(X);Ve.push(X),Ct[he]=je[he]=!!re,ct[he]=z}function lr(X,z,re){var he=ft(X);Ve.push(X),Array.isArray(re)?(je[he]=re.slice(),Ct[he]=re.slice()):je[he]=Ct[he]=re,We[he]=z}Ht(f9,zpe),Ht(h9,$pe),lr(d9,"blendColor",[0,0,0,0]),lr(mT,"blendEquationSeparate",[L9,L9]),lr(yT,"blendFuncSeparate",[P9,D9,P9,D9]),Ht(p9,Gpe,!0),lr(v9,"depthFunc",Kpe),lr(g9,"depthRange",[0,1]),lr(m9,"depthMask",!0),lr(wT,wT,[!0,!0,!0,!0]),Ht(y9,Bpe),lr(w9,"cullFace",up),lr(bT,bT,IT),lr(xT,xT,1),Ht(b9,Wpe),lr(ST,"polygonOffset",[0,0]),Ht(x9,Vpe),Ht(S9,Hpe),lr(ET,"sampleCoverage",[1,!1]),Ht(E9,jpe),lr(_9,"stencilMask",-1),lr(_T,"stencilFunc",[qpe,0,-1]),lr(CT,"stencilOpSeparate",[Vy,lh,lh,lh]),lr(Ry,"stencilOpSeparate",[up,lh,lh,lh]),Ht(C9,Upe),lr(Bx,"scissor",[0,0,I.drawingBufferWidth,I.drawingBufferHeight]),lr(Wc,Wc,[0,0,I.drawingBufferWidth,I.drawingBufferHeight]);var gt={gl:I,context:vt,strings:U,next:Ct,current:je,draw:st,elements:we,buffer:Le,shader:Je,attributes:nt.state,vao:nt,uniforms:Ze,framebuffer:qe,extensions:Z,timer:Ke,isBufferArgs:Kx},at={primTypes:bl,compareFuncs:kg,blendFuncs:xu,blendEquations:Ce,stencilOps:uh,glTypes:yl,orientationType:DT};P.optional(function(){gt.isArrayLike=yn}),wt&&(at.backBuffer=[up],at.drawBuffer=an(be.maxDrawbuffers,function(X){return X===0?[0]:an(X,function(z){return Qpe+z})}));var ze=0;function or(){var X=Ope(),z=X.link,re=X.global;X.id=ze++,X.batchId="0";var he=z(gt),pe=X.shared={props:"a0"};Object.keys(gt).forEach(function(ee){pe[ee]=re.def(he,".",ee)}),P.optional(function(){X.CHECK=z(P),X.commandStr=P.guessCommand(),X.command=z(X.commandStr),X.assert=function(ee,H,ue){ee("if(!(",H,"))",this.CHECK,".commandRaise(",z(ue),",",this.command,");")},at.invalidBlendCombinations=N9});var ae=X.next={},ie=X.current={};Object.keys(We).forEach(function(ee){Array.isArray(je[ee])&&(ae[ee]=re.def(pe.next,".",ee),ie[ee]=re.def(pe.current,".",ee))});var se=X.constants={};Object.keys(at).forEach(function(ee){se[ee]=re.def(JSON.stringify(at[ee]))}),X.invoke=function(ee,H){switch(H.type){case dT:var ue=["this",pe.context,pe.props,X.batchId];return ee.def(z(H.data),".call(",ue.slice(0,Math.max(H.data.length+1,4)),")");case pT:return ee.def(pe.props,H.data);case vT:return ee.def(pe.context,H.data);case gT:return ee.def("this",H.data);case Fx:return H.data.append(X,ee),H.data.ref;case u9:return H.data.toString();case c9:return H.data.map(function(ve){return X.invoke(ee,ve)})}},X.attribCache={};var Y={};return X.scopeAttrib=function(ee){var H=U.id(ee);if(H in Y)return Y[H];var ue=nt.scope[H];ue||(ue=nt.scope[H]=new de);var ve=Y[H]=z(ue);return ve},X}function dr(X){var z=X.static,re=X.dynamic,he;if(Ny in z){var pe=!!z[Ny];he=oi(function(ie,se){return pe}),he.enable=pe}else if(Ny in re){var ae=re[Ny];he=xo(ae,function(ie,se){return ie.invoke(se,ae)})}return he}function Dt(X,z){var re=X.static,he=X.dynamic;if(ap in re){var pe=re[ap];return pe?(pe=qe.getFramebuffer(pe),P.command(pe,"invalid framebuffer object"),oi(function(ie,se){var Y=ie.link(pe),ee=ie.shared;se.set(ee.framebuffer,".next",Y);var H=ee.context;return se.set(H,"."+Eg,Y+".width"),se.set(H,"."+_g,Y+".height"),Y})):oi(function(ie,se){var Y=ie.shared;se.set(Y.framebuffer,".next","null");var ee=Y.context;return se.set(ee,"."+Eg,ee+"."+M9),se.set(ee,"."+_g,ee+"."+A9),"null"})}else if(ap in he){var ae=he[ap];return xo(ae,function(ie,se){var Y=ie.invoke(se,ae),ee=ie.shared,H=ee.framebuffer,ue=se.def(H,".getFramebuffer(",Y,")");P.optional(function(){ie.assert(se,"!"+Y+"||"+ue,"invalid framebuffer object")}),se.set(H,".next",ue);var ve=ee.context;return se.set(ve,"."+Eg,ue+"?"+ue+".width:"+ve+"."+M9),se.set(ve,"."+_g,ue+"?"+ue+".height:"+ve+"."+A9),ue})}else return null}function br(X,z,re){var he=X.static,pe=X.dynamic;function ae(Y){if(Y in he){var ee=he[Y];P.commandType(ee,"object","invalid "+Y,re.commandStr);var H=!0,ue=ee.x|0,ve=ee.y|0,Pe,Re;return"width"in ee?(Pe=ee.width|0,P.command(Pe>=0,"invalid "+Y,re.commandStr)):H=!1,"height"in ee?(Re=ee.height|0,P.command(Re>=0,"invalid "+Y,re.commandStr)):H=!1,new Ka(!H&&z&&z.thisDep,!H&&z&&z.contextDep,!H&&z&&z.propDep,function(zt,vr){var Pt=zt.shared.context,tr=Pe;"width"in ee||(tr=vr.def(Pt,".",Eg,"-",ue));var fr=Re;return"height"in ee||(fr=vr.def(Pt,".",_g,"-",ve)),[ue,ve,tr,fr]})}else if(Y in pe){var Me=pe[Y],tt=xo(Me,function(zt,vr){var Pt=zt.invoke(vr,Me);P.optional(function(){zt.assert(vr,Pt+"&&typeof "+Pt+'==="object"',"invalid "+Y)});var tr=zt.shared.context,fr=vr.def(Pt,".x|0"),Ur=vr.def(Pt,".y|0"),jn=vr.def('"width" in ',Pt,"?",Pt,".width|0:","(",tr,".",Eg,"-",fr,")"),Qa=vr.def('"height" in ',Pt,"?",Pt,".height|0:","(",tr,".",_g,"-",Ur,")");return P.optional(function(){zt.assert(vr,jn+">=0&&"+Qa+">=0","invalid "+Y)}),[fr,Ur,jn,Qa]});return z&&(tt.thisDep=tt.thisDep||z.thisDep,tt.contextDep=tt.contextDep||z.contextDep,tt.propDep=tt.propDep||z.propDep),tt}else return z?new Ka(z.thisDep,z.contextDep,z.propDep,function(zt,vr){var Pt=zt.shared.context;return[0,0,vr.def(Pt,".",Eg),vr.def(Pt,".",_g)]}):null}var ie=ae(Wc);if(ie){var se=ie;ie=new Ka(ie.thisDep,ie.contextDep,ie.propDep,function(Y,ee){var H=se.append(Y,ee),ue=Y.shared.context;return ee.set(ue,"."+Ipe,H[2]),ee.set(ue,"."+Dpe,H[3]),H})}return{viewport:ie,scissor_box:ae(Bx)}}function ur(X,z){var re=X.static,he=typeof re[By]=="string"&&typeof re[Fy]=="string";if(he){if(Object.keys(z.dynamic).length>0)return null;var pe=z.static,ae=Object.keys(pe);if(ae.length>0&&typeof pe[ae[0]]=="number"){for(var ie=[],se=0;se<ae.length;++se)P(typeof pe[ae[se]]=="number","must specify all vertex attribute locations when using vaos"),ie.push([pe[ae[se]]|0,ae[se]]);return ie}}return null}function mr(X,z,re){var he=X.static,pe=X.dynamic;function ae(H){if(H in he){var ue=U.id(he[H]);P.optional(function(){Je.shader(F9[H],ue,P.guessCommand())});var ve=oi(function(){return ue});return ve.id=ue,ve}else if(H in pe){var Pe=pe[H];return xo(Pe,function(Re,Me){var tt=Re.invoke(Me,Pe),zt=Me.def(Re.shared.strings,".id(",tt,")");return P.optional(function(){Me(Re.shared.shader,".shader(",F9[H],",",zt,",",Re.command,");")}),zt})}return null}var ie=ae(By),se=ae(Fy),Y=null,ee;return ch(ie)&&ch(se)?(Y=Je.program(se.id,ie.id,null,re),ee=oi(function(H,ue){return H.link(Y)})):ee=new Ka(ie&&ie.thisDep||se&&se.thisDep,ie&&ie.contextDep||se&&se.contextDep,ie&&ie.propDep||se&&se.propDep,function(H,ue){var ve=H.shared.shader,Pe;ie?Pe=ie.append(H,ue):Pe=ue.def(ve,".",By);var Re;se?Re=se.append(H,ue):Re=ue.def(ve,".",Fy);var Me=ve+".program("+Re+","+Pe;return P.optional(function(){Me+=","+H.command}),ue.def(Me+")")}),{frag:ie,vert:se,progVar:ee,program:Y}}function Gr(X,z){var re=X.static,he=X.dynamic;function pe(){if(op in re){var H=re[op];Kx(H)?H=we.getElements(we.create(H,!0)):H&&(H=we.getElements(H),P.command(H,"invalid elements",z.commandStr));var ue=oi(function(Pe,Re){if(H){var Me=Pe.link(H);return Pe.ELEMENTS=Me,Me}return Pe.ELEMENTS=null,null});return ue.value=H,ue}else if(op in he){var ve=he[op];return xo(ve,function(Pe,Re){var Me=Pe.shared,tt=Me.isBufferArgs,zt=Me.elements,vr=Pe.invoke(Re,ve),Pt=Re.def("null"),tr=Re.def(tt,"(",vr,")"),fr=Pe.cond(tr).then(Pt,"=",zt,".createStream(",vr,");").else(Pt,"=",zt,".getElements(",vr,");");return P.optional(function(){Pe.assert(fr.else,"!"+vr+"||"+Pt,"invalid elements")}),Re.entry(fr),Re.exit(Pe.cond(tr).then(zt,".destroyStream(",Pt,");")),Pe.ELEMENTS=Pt,Pt})}return null}var ae=pe();function ie(){if(sp in re){var H=re[sp];return P.commandParameter(H,bl,"invalid primitve",z.commandStr),oi(function(ve,Pe){return bl[H]})}else if(sp in he){var ue=he[sp];return xo(ue,function(ve,Pe){var Re=ve.constants.primTypes,Me=ve.invoke(Pe,ue);return P.optional(function(){ve.assert(Pe,Me+" in "+Re,"invalid primitive, must be one of "+Object.keys(bl))}),Pe.def(Re,"[",Me,"]")})}else if(ae)return ch(ae)?ae.value?oi(function(ve,Pe){return Pe.def(ve.ELEMENTS,".primType")}):oi(function(){return O9}):new Ka(ae.thisDep,ae.contextDep,ae.propDep,function(ve,Pe){var Re=ve.ELEMENTS;return Pe.def(Re,"?",Re,".primType:",O9)});return null}function se(H,ue){if(H in re){var ve=re[H]|0;return P.command(!ue||ve>=0,"invalid "+H,z.commandStr),oi(function(Re,Me){return ue&&(Re.OFFSET=ve),ve})}else if(H in he){var Pe=he[H];return xo(Pe,function(Re,Me){var tt=Re.invoke(Me,Pe);return ue&&(Re.OFFSET=tt,P.optional(function(){Re.assert(Me,tt+">=0","invalid "+H)})),tt})}else if(ue&&ae)return oi(function(Re,Me){return Re.OFFSET="0",0});return null}var Y=se($x,!0);function ee(){if(lp in re){var H=re[lp]|0;return P.command(typeof H=="number"&&H>=0,"invalid vertex count",z.commandStr),oi(function(){return H})}else if(lp in he){var ue=he[lp];return xo(ue,function(Re,Me){var tt=Re.invoke(Me,ue);return P.optional(function(){Re.assert(Me,"typeof "+tt+'==="number"&&'+tt+">=0&&"+tt+"===("+tt+"|0)","invalid vertex count")}),tt})}else if(ae)if(ch(ae)){if(ae)return Y?new Ka(Y.thisDep,Y.contextDep,Y.propDep,function(Re,Me){var tt=Me.def(Re.ELEMENTS,".vertCount-",Re.OFFSET);return P.optional(function(){Re.assert(Me,tt+">=0","invalid vertex offset/element buffer too small")}),tt}):oi(function(Re,Me){return Me.def(Re.ELEMENTS,".vertCount")});var ve=oi(function(){return-1});return P.optional(function(){ve.MISSING=!0}),ve}else{var Pe=new Ka(ae.thisDep||Y.thisDep,ae.contextDep||Y.contextDep,ae.propDep||Y.propDep,function(Re,Me){var tt=Re.ELEMENTS;return Re.OFFSET?Me.def(tt,"?",tt,".vertCount-",Re.OFFSET,":-1"):Me.def(tt,"?",tt,".vertCount:-1")});return P.optional(function(){Pe.DYNAMIC=!0}),Pe}return null}return{elements:ae,primitive:ie(),count:ee(),instances:se(zx,!1),offset:Y}}function si(X,z){var re=X.static,he=X.dynamic,pe={};return Ve.forEach(function(ae){var ie=ft(ae);function se(Y,ee){if(ae in re){var H=Y(re[ae]);pe[ie]=oi(function(){return H})}else if(ae in he){var ue=he[ae];pe[ie]=xo(ue,function(ve,Pe){return ee(ve,Pe,ve.invoke(Pe,ue))})}}switch(ae){case y9:case h9:case f9:case E9:case p9:case C9:case b9:case x9:case S9:case m9:return se(function(Y){return P.commandType(Y,"boolean",ae,z.commandStr),Y},function(Y,ee,H){return P.optional(function(){Y.assert(ee,"typeof "+H+'==="boolean"',"invalid flag "+ae,Y.commandStr)}),H});case v9:return se(function(Y){return P.commandParameter(Y,kg,"invalid "+ae,z.commandStr),kg[Y]},function(Y,ee,H){var ue=Y.constants.compareFuncs;return P.optional(function(){Y.assert(ee,H+" in "+ue,"invalid "+ae+", must be one of "+Object.keys(kg))}),ee.def(ue,"[",H,"]")});case g9:return se(function(Y){return P.command(yn(Y)&&Y.length===2&&typeof Y[0]=="number"&&typeof Y[1]=="number"&&Y[0]<=Y[1],"depth range is 2d array",z.commandStr),Y},function(Y,ee,H){P.optional(function(){Y.assert(ee,Y.shared.isArrayLike+"("+H+")&&"+H+".length===2&&typeof "+H+'[0]==="number"&&typeof '+H+'[1]==="number"&&'+H+"[0]<="+H+"[1]","depth range must be a 2d array")});var ue=ee.def("+",H,"[0]"),ve=ee.def("+",H,"[1]");return[ue,ve]});case yT:return se(function(Y){P.commandType(Y,"object","blend.func",z.commandStr);var ee="srcRGB"in Y?Y.srcRGB:Y.src,H="srcAlpha"in Y?Y.srcAlpha:Y.src,ue="dstRGB"in Y?Y.dstRGB:Y.dst,ve="dstAlpha"in Y?Y.dstAlpha:Y.dst;return P.commandParameter(ee,xu,ie+".srcRGB",z.commandStr),P.commandParameter(H,xu,ie+".srcAlpha",z.commandStr),P.commandParameter(ue,xu,ie+".dstRGB",z.commandStr),P.commandParameter(ve,xu,ie+".dstAlpha",z.commandStr),P.command(N9.indexOf(ee+", "+ue)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ee+", "+ue+")",z.commandStr),[xu[ee],xu[ue],xu[H],xu[ve]]},function(Y,ee,H){var ue=Y.constants.blendFuncs;P.optional(function(){Y.assert(ee,H+"&&typeof "+H+'==="object"',"invalid blend func, must be an object")});function ve(Pt,tr){var fr=ee.def('"',Pt,tr,'" in ',H,"?",H,".",Pt,tr,":",H,".",Pt);return P.optional(function(){Y.assert(ee,fr+" in "+ue,"invalid "+ae+"."+Pt+tr+", must be one of "+Object.keys(xu))}),fr}var Pe=ve("src","RGB"),Re=ve("dst","RGB");P.optional(function(){var Pt=Y.constants.invalidBlendCombinations;Y.assert(ee,Pt+".indexOf("+Pe+'+", "+'+Re+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Me=ee.def(ue,"[",Pe,"]"),tt=ee.def(ue,"[",ve("src","Alpha"),"]"),zt=ee.def(ue,"[",Re,"]"),vr=ee.def(ue,"[",ve("dst","Alpha"),"]");return[Me,zt,tt,vr]});case mT:return se(function(Y){if(typeof Y=="string")return P.commandParameter(Y,Ce,"invalid "+ae,z.commandStr),[Ce[Y],Ce[Y]];if(typeof Y=="object")return P.commandParameter(Y.rgb,Ce,ae+".rgb",z.commandStr),P.commandParameter(Y.alpha,Ce,ae+".alpha",z.commandStr),[Ce[Y.rgb],Ce[Y.alpha]];P.commandRaise("invalid blend.equation",z.commandStr)},function(Y,ee,H){var ue=Y.constants.blendEquations,ve=ee.def(),Pe=ee.def(),Re=Y.cond("typeof ",H,'==="string"');return P.optional(function(){function Me(tt,zt,vr){Y.assert(tt,vr+" in "+ue,"invalid "+zt+", must be one of "+Object.keys(Ce))}Me(Re.then,ae,H),Y.assert(Re.else,H+"&&typeof "+H+'==="object"',"invalid "+ae),Me(Re.else,ae+".rgb",H+".rgb"),Me(Re.else,ae+".alpha",H+".alpha")}),Re.then(ve,"=",Pe,"=",ue,"[",H,"];"),Re.else(ve,"=",ue,"[",H,".rgb];",Pe,"=",ue,"[",H,".alpha];"),ee(Re),[ve,Pe]});case d9:return se(function(Y){return P.command(yn(Y)&&Y.length===4,"blend.color must be a 4d array",z.commandStr),an(4,function(ee){return+Y[ee]})},function(Y,ee,H){return P.optional(function(){Y.assert(ee,Y.shared.isArrayLike+"("+H+")&&"+H+".length===4","blend.color must be a 4d array")}),an(4,function(ue){return ee.def("+",H,"[",ue,"]")})});case _9:return se(function(Y){return P.commandType(Y,"number",ie,z.commandStr),Y|0},function(Y,ee,H){return P.optional(function(){Y.assert(ee,"typeof "+H+'==="number"',"invalid stencil.mask")}),ee.def(H,"|0")});case _T:return se(function(Y){P.commandType(Y,"object",ie,z.commandStr);var ee=Y.cmp||"keep",H=Y.ref||0,ue="mask"in Y?Y.mask:-1;return P.commandParameter(ee,kg,ae+".cmp",z.commandStr),P.commandType(H,"number",ae+".ref",z.commandStr),P.commandType(ue,"number",ae+".mask",z.commandStr),[kg[ee],H,ue]},function(Y,ee,H){var ue=Y.constants.compareFuncs;P.optional(function(){function Me(){Y.assert(ee,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Me(H+"&&typeof ",H,'==="object"'),Me('!("cmp" in ',H,")||(",H,".cmp in ",ue,")")});var ve=ee.def('"cmp" in ',H,"?",ue,"[",H,".cmp]",":",lh),Pe=ee.def(H,".ref|0"),Re=ee.def('"mask" in ',H,"?",H,".mask|0:-1");return[ve,Pe,Re]});case CT:case Ry:return se(function(Y){P.commandType(Y,"object",ie,z.commandStr);var ee=Y.fail||"keep",H=Y.zfail||"keep",ue=Y.zpass||"keep";return P.commandParameter(ee,uh,ae+".fail",z.commandStr),P.commandParameter(H,uh,ae+".zfail",z.commandStr),P.commandParameter(ue,uh,ae+".zpass",z.commandStr),[ae===Ry?up:Vy,uh[ee],uh[H],uh[ue]]},function(Y,ee,H){var ue=Y.constants.stencilOps;P.optional(function(){Y.assert(ee,H+"&&typeof "+H+'==="object"',"invalid "+ae)});function ve(Pe){return P.optional(function(){Y.assert(ee,'!("'+Pe+'" in '+H+")||("+H+"."+Pe+" in "+ue+")","invalid "+ae+"."+Pe+", must be one of "+Object.keys(uh))}),ee.def('"',Pe,'" in ',H,"?",ue,"[",H,".",Pe,"]:",lh)}return[ae===Ry?up:Vy,ve("fail"),ve("zfail"),ve("zpass")]});case ST:return se(function(Y){P.commandType(Y,"object",ie,z.commandStr);var ee=Y.factor|0,H=Y.units|0;return P.commandType(ee,"number",ie+".factor",z.commandStr),P.commandType(H,"number",ie+".units",z.commandStr),[ee,H]},function(Y,ee,H){P.optional(function(){Y.assert(ee,H+"&&typeof "+H+'==="object"',"invalid "+ae)});var ue=ee.def(H,".factor|0"),ve=ee.def(H,".units|0");return[ue,ve]});case w9:return se(function(Y){var ee=0;return Y==="front"?ee=Vy:Y==="back"&&(ee=up),P.command(!!ee,ie,z.commandStr),ee},function(Y,ee,H){return P.optional(function(){Y.assert(ee,H+'==="front"||'+H+'==="back"',"invalid cull.face")}),ee.def(H,'==="front"?',Vy,":",up)});case xT:return se(function(Y){return P.command(typeof Y=="number"&&Y>=be.lineWidthDims[0]&&Y<=be.lineWidthDims[1],"invalid line width, must be a positive number between "+be.lineWidthDims[0]+" and "+be.lineWidthDims[1],z.commandStr),Y},function(Y,ee,H){return P.optional(function(){Y.assert(ee,"typeof "+H+'==="number"&&'+H+">="+be.lineWidthDims[0]+"&&"+H+"<="+be.lineWidthDims[1],"invalid line width")}),H});case bT:return se(function(Y){return P.commandParameter(Y,DT,ie,z.commandStr),DT[Y]},function(Y,ee,H){return P.optional(function(){Y.assert(ee,H+'==="cw"||'+H+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ee.def(H+'==="cw"?'+I9+":"+IT)});case wT:return se(function(Y){return P.command(yn(Y)&&Y.length===4,"color.mask must be length 4 array",z.commandStr),Y.map(function(ee){return!!ee})},function(Y,ee,H){return P.optional(function(){Y.assert(ee,Y.shared.isArrayLike+"("+H+")&&"+H+".length===4","invalid color.mask")}),an(4,function(ue){return"!!"+H+"["+ue+"]"})});case ET:return se(function(Y){P.command(typeof Y=="object"&&Y,ie,z.commandStr);var ee="value"in Y?Y.value:1,H=!!Y.invert;return P.command(typeof ee=="number"&&ee>=0&&ee<=1,"sample.coverage.value must be a number between 0 and 1",z.commandStr),[ee,H]},function(Y,ee,H){P.optional(function(){Y.assert(ee,H+"&&typeof "+H+'==="object"',"invalid sample.coverage")});var ue=ee.def('"value" in ',H,"?+",H,".value:1"),ve=ee.def("!!",H,".invert");return[ue,ve]})}}),pe}function Ci(X,z){var re=X.static,he=X.dynamic,pe={};return Object.keys(re).forEach(function(ae){var ie=re[ae],se;if(typeof ie=="number"||typeof ie=="boolean")se=oi(function(){return ie});else if(typeof ie=="function"){var Y=ie._reglType;Y==="texture2d"||Y==="textureCube"?se=oi(function(ee){return ee.link(ie)}):Y==="framebuffer"||Y==="framebufferCube"?(P.command(ie.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ae+'"',z.commandStr),se=oi(function(ee){return ee.link(ie.color[0])})):P.commandRaise('invalid data for uniform "'+ae+'"',z.commandStr)}else yn(ie)?se=oi(function(ee){var H=ee.global.def("[",an(ie.length,function(ue){return P.command(typeof ie[ue]=="number"||typeof ie[ue]=="boolean","invalid uniform "+ae,ee.commandStr),ie[ue]}),"]");return H}):P.commandRaise('invalid or missing data for uniform "'+ae+'"',z.commandStr);se.value=ie,pe[ae]=se}),Object.keys(he).forEach(function(ae){var ie=he[ae];pe[ae]=xo(ie,function(se,Y){return se.invoke(Y,ie)})}),pe}function kr(X,z){var re=X.static,he=X.dynamic,pe={};return Object.keys(re).forEach(function(ae){var ie=re[ae],se=U.id(ae),Y=new de;if(Kx(ie))Y.state=Sg,Y.buffer=Le.getBuffer(Le.create(ie,Cg,!1,!0)),Y.type=0;else{var ee=Le.getBuffer(ie);if(ee)Y.state=Sg,Y.buffer=ee,Y.type=0;else if(P.command(typeof ie=="object"&&ie,"invalid data for attribute "+ae,z.commandStr),"constant"in ie){var H=ie.constant;Y.buffer="null",Y.state=hT,typeof H=="number"?Y.x=H:(P.command(yn(H)&&H.length>0&&H.length<=4,"invalid constant for attribute "+ae,z.commandStr),xg.forEach(function(zt,vr){vr<H.length&&(Y[zt]=H[vr])}))}else{Kx(ie.buffer)?ee=Le.getBuffer(Le.create(ie.buffer,Cg,!1,!0)):ee=Le.getBuffer(ie.buffer),P.command(!!ee,'missing buffer for attribute "'+ae+'"',z.commandStr);var ue=ie.offset|0;P.command(ue>=0,'invalid offset for attribute "'+ae+'"',z.commandStr);var ve=ie.stride|0;P.command(ve>=0&&ve<256,'invalid stride for attribute "'+ae+'", must be integer betweeen [0, 255]',z.commandStr);var Pe=ie.size|0;P.command(!("size"in ie)||Pe>0&&Pe<=4,'invalid size for attribute "'+ae+'", must be 1,2,3,4',z.commandStr);var Re=!!ie.normalized,Me=0;"type"in ie&&(P.commandParameter(ie.type,yl,"invalid type for attribute "+ae,z.commandStr),Me=yl[ie.type]);var tt=ie.divisor|0;"divisor"in ie&&(P.command(tt===0||rt,'cannot specify divisor for attribute "'+ae+'", instancing not supported',z.commandStr),P.command(tt>=0,'invalid divisor for attribute "'+ae+'"',z.commandStr)),P.optional(function(){var zt=z.commandStr,vr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ie).forEach(function(Pt){P.command(vr.indexOf(Pt)>=0,'unknown parameter "'+Pt+'" for attribute pointer "'+ae+'" (valid parameters are '+vr+")",zt)})}),Y.buffer=ee,Y.state=Sg,Y.size=Pe,Y.normalized=Re,Y.type=Me||ee.dtype,Y.offset=ue,Y.stride=ve,Y.divisor=tt}}pe[ae]=oi(function(zt,vr){var Pt=zt.attribCache;if(se in Pt)return Pt[se];var tr={isStream:!1};return Object.keys(Y).forEach(function(fr){tr[fr]=Y[fr]}),Y.buffer&&(tr.buffer=zt.link(Y.buffer),tr.type=tr.type||tr.buffer+".dtype"),Pt[se]=tr,tr})}),Object.keys(he).forEach(function(ae){var ie=he[ae];function se(Y,ee){var H=Y.invoke(ee,ie),ue=Y.shared,ve=Y.constants,Pe=ue.isBufferArgs,Re=ue.buffer;P.optional(function(){Y.assert(ee,H+"&&(typeof "+H+'==="object"||typeof '+H+'==="function")&&('+Pe+"("+H+")||"+Re+".getBuffer("+H+")||"+Re+".getBuffer("+H+".buffer)||"+Pe+"("+H+'.buffer)||("constant" in '+H+"&&(typeof "+H+'.constant==="number"||'+ue.isArrayLike+"("+H+".constant))))",'invalid dynamic attribute "'+ae+'"')});var Me={isStream:ee.def(!1)},tt=new de;tt.state=Sg,Object.keys(tt).forEach(function(tr){Me[tr]=ee.def(""+tt[tr])});var zt=Me.buffer,vr=Me.type;ee("if(",Pe,"(",H,")){",Me.isStream,"=true;",zt,"=",Re,".createStream(",Cg,",",H,");",vr,"=",zt,".dtype;","}else{",zt,"=",Re,".getBuffer(",H,");","if(",zt,"){",vr,"=",zt,".dtype;",'}else if("constant" in ',H,"){",Me.state,"=",hT,";","if(typeof "+H+'.constant === "number"){',Me[xg[0]],"=",H,".constant;",xg.slice(1).map(function(tr){return Me[tr]}).join("="),"=0;","}else{",xg.map(function(tr,fr){return Me[tr]+"="+H+".constant.length>"+fr+"?"+H+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",Pe,"(",H,".buffer)){",zt,"=",Re,".createStream(",Cg,",",H,".buffer);","}else{",zt,"=",Re,".getBuffer(",H,".buffer);","}",vr,'="type" in ',H,"?",ve.glTypes,"[",H,".type]:",zt,".dtype;",Me.normalized,"=!!",H,".normalized;");function Pt(tr){ee(Me[tr],"=",H,".",tr,"|0;")}return Pt("size"),Pt("offset"),Pt("stride"),Pt("divisor"),ee("}}"),ee.exit("if(",Me.isStream,"){",Re,".destroyStream(",zt,");","}"),Me}pe[ae]=xo(ie,se)}),pe}function vi(X,z){var re=X.static,he=X.dynamic;if($y in re){var pe=re[$y];return pe!==null&&nt.getVAO(pe)===null&&(pe=nt.createVAO(pe)),oi(function(ie){return ie.link(nt.getVAO(pe))})}else if($y in he){var ae=he[$y];return xo(ae,function(ie,se){var Y=ie.invoke(se,ae);return se.def(ie.shared.vao+".getVAO("+Y+")")})}return null}function vn(X){var z=X.static,re=X.dynamic,he={};return Object.keys(z).forEach(function(pe){var ae=z[pe];he[pe]=oi(function(ie,se){return typeof ae=="number"||typeof ae=="boolean"?""+ae:ie.link(ae)})}),Object.keys(re).forEach(function(pe){var ae=re[pe];he[pe]=xo(ae,function(ie,se){return ie.invoke(se,ae)})}),he}function li(X,z,re,he,pe){var ae=X.static,ie=X.dynamic;P.optional(function(){var Pt=[ap,Fy,By,op,sp,$x,lp,zx,Ny,$y].concat(Ve);function tr(fr){Object.keys(fr).forEach(function(Ur){P.command(Pt.indexOf(Ur)>=0,'unknown parameter "'+Ur+'"',pe.commandStr)})}tr(ae),tr(ie)});var se=ur(X,z),Y=Dt(X),ee=br(X,Y,pe),H=Gr(X,pe),ue=si(X,pe),ve=mr(X,pe,se);function Pe(Pt){var tr=ee[Pt];tr&&(ue[Pt]=tr)}Pe(Wc),Pe(ft(Bx));var Re=Object.keys(ue).length>0,Me={framebuffer:Y,draw:H,shader:ve,state:ue,dirty:Re,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Me.profile=dr(X),Me.uniforms=Ci(re,pe),Me.drawVAO=Me.scopeVAO=vi(X),!Me.drawVAO&&ve.program&&!se&&Z.angle_instanced_arrays){var tt=!0,zt=ve.program.attributes.map(function(Pt){var tr=z.static[Pt];return tt=tt&&!!tr,tr});if(tt&&zt.length>0){var vr=nt.getVAO(nt.createVAO(zt));Me.drawVAO=new Ka(null,null,null,function(Pt,tr){return Pt.link(vr)}),Me.useVAO=!0}}return se?Me.useVAO=!0:Me.attributes=kr(z,pe),Me.context=vn(he),Me}function gi(X,z,re){var he=X.shared,pe=he.context,ae=X.scope();Object.keys(re).forEach(function(ie){z.save(pe,"."+ie);var se=re[ie],Y=se.append(X,z);Array.isArray(Y)?ae(pe,".",ie,"=[",Y.join(),"];"):ae(pe,".",ie,"=",Y,";")}),z(ae)}function mi(X,z,re,he){var pe=X.shared,ae=pe.gl,ie=pe.framebuffer,se;wt&&(se=z.def(pe.extensions,".webgl_draw_buffers"));var Y=X.constants,ee=Y.drawBuffer,H=Y.backBuffer,ue;re?ue=re.append(X,z):ue=z.def(ie,".next"),he||z("if(",ue,"!==",ie,".cur){"),z("if(",ue,"){",ae,".bindFramebuffer(",R9,",",ue,".framebuffer);"),wt&&z(se,".drawBuffersWEBGL(",ee,"[",ue,".colorAttachments.length]);"),z("}else{",ae,".bindFramebuffer(",R9,",null);"),wt&&z(se,".drawBuffersWEBGL(",H,");"),z("}",ie,".cur=",ue,";"),he||z("}")}function Ri(X,z,re){var he=X.shared,pe=he.gl,ae=X.current,ie=X.next,se=he.current,Y=he.next,ee=X.cond(se,".dirty");Ve.forEach(function(H){var ue=ft(H);if(!(ue in re.state)){var ve,Pe;if(ue in ie){ve=ie[ue],Pe=ae[ue];var Re=an(je[ue].length,function(tt){return ee.def(ve,"[",tt,"]")});ee(X.cond(Re.map(function(tt,zt){return tt+"!=="+Pe+"["+zt+"]"}).join("||")).then(pe,".",We[ue],"(",Re,");",Re.map(function(tt,zt){return Pe+"["+zt+"]="+tt}).join(";"),";"))}else{ve=ee.def(Y,".",ue);var Me=X.cond(ve,"!==",se,".",ue);ee(Me),ue in ct?Me(X.cond(ve).then(pe,".enable(",ct[ue],");").else(pe,".disable(",ct[ue],");"),se,".",ue,"=",ve,";"):Me(pe,".",We[ue],"(",ve,");",se,".",ue,"=",ve,";")}}}),Object.keys(re.state).length===0&&ee(se,".dirty=false;"),z(ee)}function Qi(X,z,re,he){var pe=X.shared,ae=X.current,ie=pe.current,se=pe.gl;B9(Object.keys(re)).forEach(function(Y){var ee=re[Y];if(!(he&&!he(ee))){var H=ee.append(X,z);if(ct[Y]){var ue=ct[Y];ch(ee)?H?z(se,".enable(",ue,");"):z(se,".disable(",ue,");"):z(X.cond(H).then(se,".enable(",ue,");").else(se,".disable(",ue,");")),z(ie,".",Y,"=",H,";")}else if(yn(H)){var ve=ae[Y];z(se,".",We[Y],"(",H,");",H.map(function(Pe,Re){return ve+"["+Re+"]="+Pe}).join(";"),";")}else z(se,".",We[Y],"(",H,");",ie,".",Y,"=",H,";")}})}function Zn(X,z){rt&&(X.instancing=z.def(X.shared.extensions,".angle_instanced_arrays"))}function pr(X,z,re,he,pe){var ae=X.shared,ie=X.stats,se=ae.current,Y=ae.timer,ee=re.profile;function H(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ue,ve;function Pe(Pt){ue=z.def(),Pt(ue,"=",H(),";"),typeof pe=="string"?Pt(ie,".count+=",pe,";"):Pt(ie,".count++;"),Ke&&(he?(ve=z.def(),Pt(ve,"=",Y,".getNumPendingQueries();")):Pt(Y,".beginQuery(",ie,");"))}function Re(Pt){Pt(ie,".cpuTime+=",H(),"-",ue,";"),Ke&&(he?Pt(Y,".pushScopeStats(",ve,",",Y,".getNumPendingQueries(),",ie,");"):Pt(Y,".endQuery();"))}function Me(Pt){var tr=z.def(se,".profile");z(se,".profile=",Pt,";"),z.exit(se,".profile=",tr,";")}var tt;if(ee){if(ch(ee)){ee.enable?(Pe(z),Re(z.exit),Me("true")):Me("false");return}tt=ee.append(X,z),Me(tt)}else tt=z.def(se,".profile");var zt=X.block();Pe(zt),z("if(",tt,"){",zt,"}");var vr=X.block();Re(vr),z.exit("if(",tt,"){",vr,"}")}function Zi(X,z,re,he,pe){var ae=X.shared;function ie(Y){switch(Y){case jx:case Wx:case Xx:return 2;case Gx:case Vx:case Yx:return 3;case Ux:case Hx:case qx:return 4;default:return 1}}function se(Y,ee,H){var ue=ae.gl,ve=z.def(Y,".location"),Pe=z.def(ae.attributes,"[",ve,"]"),Re=H.state,Me=H.buffer,tt=[H.x,H.y,H.z,H.w],zt=["buffer","normalized","offset","stride"];function vr(){z("if(!",Pe,".buffer){",ue,".enableVertexAttribArray(",ve,");}");var tr=H.type,fr;if(H.size?fr=z.def(H.size,"||",ee):fr=ee,z("if(",Pe,".type!==",tr,"||",Pe,".size!==",fr,"||",zt.map(function(jn){return Pe+"."+jn+"!=="+H[jn]}).join("||"),"){",ue,".bindBuffer(",Cg,",",Me,".buffer);",ue,".vertexAttribPointer(",[ve,fr,tr,H.normalized,H.stride,H.offset],");",Pe,".type=",tr,";",Pe,".size=",fr,";",zt.map(function(jn){return Pe+"."+jn+"="+H[jn]+";"}).join(""),"}"),rt){var Ur=H.divisor;z("if(",Pe,".divisor!==",Ur,"){",X.instancing,".vertexAttribDivisorANGLE(",[ve,Ur],");",Pe,".divisor=",Ur,";}")}}function Pt(){z("if(",Pe,".buffer){",ue,".disableVertexAttribArray(",ve,");",Pe,".buffer=null;","}if(",xg.map(function(tr,fr){return Pe+"."+tr+"!=="+tt[fr]}).join("||"),"){",ue,".vertexAttrib4f(",ve,",",tt,");",xg.map(function(tr,fr){return Pe+"."+tr+"="+tt[fr]+";"}).join(""),"}")}Re===Sg?vr():Re===hT?Pt():(z("if(",Re,"===",Sg,"){"),vr(),z("}else{"),Pt(),z("}"))}he.forEach(function(Y){var ee=Y.name,H=re.attributes[ee],ue;if(H){if(!pe(H))return;ue=H.append(X,z)}else{if(!pe($9))return;var ve=X.scopeAttrib(ee);P.optional(function(){X.assert(z,ve+".state","missing attribute "+ee)}),ue={},Object.keys(new de).forEach(function(Pe){ue[Pe]=z.def(ve,".",Pe)})}se(X.link(Y),ie(Y.info.type),ue)})}function qr(X,z,re,he,pe){for(var ae=X.shared,ie=ae.gl,se,Y=0;Y<he.length;++Y){var ee=he[Y],H=ee.name,ue=ee.info.type,ve=re.uniforms[H],Pe=X.link(ee),Re=Pe+".location",Me;if(ve){if(!pe(ve))continue;if(ch(ve)){var tt=ve.value;if(P.command(tt!==null&&typeof tt<"u",'missing uniform "'+H+'"',X.commandStr),ue===Uy||ue===Wy){P.command(typeof tt=="function"&&(ue===Uy&&(tt._reglType==="texture2d"||tt._reglType==="framebuffer")||ue===Wy&&(tt._reglType==="textureCube"||tt._reglType==="framebufferCube")),"invalid texture for uniform "+H,X.commandStr);var zt=X.link(tt._texture||tt.color[0]._texture);z(ie,".uniform1i(",Re,",",zt+".bind());"),z.exit(zt,".unbind();")}else if(ue===zy||ue===jy||ue===Gy){P.optional(function(){P.command(yn(tt),"invalid matrix for uniform "+H,X.commandStr),P.command(ue===zy&&tt.length===4||ue===jy&&tt.length===9||ue===Gy&&tt.length===16,"invalid length for matrix uniform "+H,X.commandStr)});var vr=X.global.def("new Float32Array(["+Array.prototype.slice.call(tt)+"])"),Pt=2;ue===jy?Pt=3:ue===Gy&&(Pt=4),z(ie,".uniformMatrix",Pt,"fv(",Re,",false,",vr,");")}else{switch(ue){case AT:P.commandType(tt,"number","uniform "+H,X.commandStr),se="1f";break;case jx:P.command(yn(tt)&&tt.length===2,"uniform "+H,X.commandStr),se="2f";break;case Gx:P.command(yn(tt)&&tt.length===3,"uniform "+H,X.commandStr),se="3f";break;case Ux:P.command(yn(tt)&&tt.length===4,"uniform "+H,X.commandStr),se="4f";break;case OT:P.commandType(tt,"boolean","uniform "+H,X.commandStr),se="1i";break;case TT:P.commandType(tt,"number","uniform "+H,X.commandStr),se="1i";break;case Xx:P.command(yn(tt)&&tt.length===2,"uniform "+H,X.commandStr),se="2i";break;case Wx:P.command(yn(tt)&&tt.length===2,"uniform "+H,X.commandStr),se="2i";break;case Yx:P.command(yn(tt)&&tt.length===3,"uniform "+H,X.commandStr),se="3i";break;case Vx:P.command(yn(tt)&&tt.length===3,"uniform "+H,X.commandStr),se="3i";break;case qx:P.command(yn(tt)&&tt.length===4,"uniform "+H,X.commandStr),se="4i";break;case Hx:P.command(yn(tt)&&tt.length===4,"uniform "+H,X.commandStr),se="4i";break}z(ie,".uniform",se,"(",Re,",",yn(tt)?Array.prototype.slice.call(tt):tt,");")}continue}else Me=ve.append(X,z)}else{if(!pe($9))continue;Me=z.def(ae.uniforms,"[",U.id(H),"]")}ue===Uy?(P(!Array.isArray(Me),"must specify a scalar prop for textures"),z("if(",Me,"&&",Me,'._reglType==="framebuffer"){',Me,"=",Me,".color[0];","}")):ue===Wy&&(P(!Array.isArray(Me),"must specify a scalar prop for cube maps"),z("if(",Me,"&&",Me,'._reglType==="framebufferCube"){',Me,"=",Me,".color[0];","}")),P.optional(function(){function Qa(_l,H9){X.assert(z,_l,'bad data or missing for uniform "'+H+'".  '+H9)}function PT(_l){P(!Array.isArray(Me),"must not specify an array type for uniform"),Qa("typeof "+Me+'==="'+_l+'"',"invalid type, expected "+_l)}function Rs(_l,H9){Array.isArray(Me)?P(Me.length===_l,"must have length "+_l):Qa(ae.isArrayLike+"("+Me+")&&"+Me+".length==="+_l,"invalid vector, should have length "+_l,X.commandStr)}function V9(_l){P(!Array.isArray(Me),"must not specify a value type"),Qa("typeof "+Me+'==="function"&&'+Me+'._reglType==="texture'+(_l===T9?"2d":"Cube")+'"',"invalid texture type",X.commandStr)}switch(ue){case TT:PT("number");break;case Wx:Rs(2);break;case Vx:Rs(3);break;case Hx:Rs(4);break;case AT:PT("number");break;case jx:Rs(2);break;case Gx:Rs(3);break;case Ux:Rs(4);break;case OT:PT("boolean");break;case Xx:Rs(2);break;case Yx:Rs(3);break;case qx:Rs(4);break;case zy:Rs(4);break;case jy:Rs(9);break;case Gy:Rs(16);break;case Uy:V9(T9);break;case Wy:V9(Fpe);break}});var tr=1;switch(ue){case Uy:case Wy:var fr=z.def(Me,"._texture");z(ie,".uniform1i(",Re,",",fr,".bind());"),z.exit(fr,".unbind();");continue;case TT:case OT:se="1i";break;case Wx:case Xx:se="2i",tr=2;break;case Vx:case Yx:se="3i",tr=3;break;case Hx:case qx:se="4i",tr=4;break;case AT:se="1f";break;case jx:se="2f",tr=2;break;case Gx:se="3f",tr=3;break;case Ux:se="4f",tr=4;break;case zy:se="Matrix2fv";break;case jy:se="Matrix3fv";break;case Gy:se="Matrix4fv";break}if(z(ie,".uniform",se,"(",Re,","),se.charAt(0)==="M"){var Ur=Math.pow(ue-zy+2,2),jn=X.global.def("new Float32Array(",Ur,")");Array.isArray(Me)?z("false,(",an(Ur,function(Qa){return jn+"["+Qa+"]="+Me[Qa]}),",",jn,")"):z("false,(Array.isArray(",Me,")||",Me," instanceof Float32Array)?",Me,":(",an(Ur,function(Qa){return jn+"["+Qa+"]="+Me+"["+Qa+"]"}),",",jn,")")}else tr>1?z(an(tr,function(Qa){return Array.isArray(Me)?Me[Qa]:Me+"["+Qa+"]"})):(P(!Array.isArray(Me),"uniform value must not be an array"),z(Me));z(");")}}function Jt(X,z,re,he){var pe=X.shared,ae=pe.gl,ie=pe.draw,se=he.draw;function Y(){var fr=se.elements,Ur,jn=z;return fr?((fr.contextDep&&he.contextDynamic||fr.propDep)&&(jn=re),Ur=fr.append(X,jn)):Ur=jn.def(ie,".",op),Ur&&jn("if("+Ur+")"+ae+".bindBuffer("+Lpe+","+Ur+".buffer.buffer);"),Ur}function ee(){var fr=se.count,Ur,jn=z;return fr?((fr.contextDep&&he.contextDynamic||fr.propDep)&&(jn=re),Ur=fr.append(X,jn),P.optional(function(){fr.MISSING&&X.assert(z,"false","missing vertex count"),fr.DYNAMIC&&X.assert(jn,Ur+">=0","missing vertex count")})):(Ur=jn.def(ie,".",lp),P.optional(function(){X.assert(jn,Ur+">=0","missing vertex count")})),Ur}var H=Y();function ue(fr){var Ur=se[fr];return Ur?Ur.contextDep&&he.contextDynamic||Ur.propDep?Ur.append(X,re):Ur.append(X,z):z.def(ie,".",fr)}var ve=ue(sp),Pe=ue($x),Re=ee();if(typeof Re=="number"){if(Re===0)return}else re("if(",Re,"){"),re.exit("}");var Me,tt;rt&&(Me=ue(zx),tt=X.instancing);var zt=H+".type",vr=se.elements&&ch(se.elements);function Pt(){function fr(){re(tt,".drawElementsInstancedANGLE(",[ve,Re,zt,Pe+"<<(("+zt+"-"+l9+")>>1)",Me],");")}function Ur(){re(tt,".drawArraysInstancedANGLE(",[ve,Pe,Re,Me],");")}H?vr?fr():(re("if(",H,"){"),fr(),re("}else{"),Ur(),re("}")):Ur()}function tr(){function fr(){re(ae+".drawElements("+[ve,Re,zt,Pe+"<<(("+zt+"-"+l9+")>>1)"]+");")}function Ur(){re(ae+".drawArrays("+[ve,Pe,Re]+");")}H?vr?fr():(re("if(",H,"){"),fr(),re("}else{"),Ur(),re("}")):Ur()}rt&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(re("if(",Me,">0){"),Pt(),re("}else if(",Me,"<0){"),tr(),re("}")):Pt():tr()}function _r(X,z,re,he,pe){var ae=or(),ie=ae.proc("body",pe);return P.optional(function(){ae.commandStr=z.commandStr,ae.command=ae.link(z.commandStr)}),rt&&(ae.instancing=ie.def(ae.shared.extensions,".angle_instanced_arrays")),X(ae,ie,re,he),ae.compile().body}function Nr(X,z,re,he){Zn(X,z),re.useVAO?re.drawVAO?z(X.shared.vao,".setVAO(",re.drawVAO.append(X,z),");"):z(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(z(X.shared.vao,".setVAO(null);"),Zi(X,z,re,he.attributes,function(){return!0})),qr(X,z,re,he.uniforms,function(){return!0}),Jt(X,z,z,re)}function Jn(X,z){var re=X.proc("draw",1);Zn(X,re),gi(X,re,z.context),mi(X,re,z.framebuffer),Ri(X,re,z),Qi(X,re,z.state),pr(X,re,z,!1,!0);var he=z.shader.progVar.append(X,re);if(re(X.shared.gl,".useProgram(",he,".program);"),z.shader.program)Nr(X,re,z,z.shader.program);else{re(X.shared.vao,".setVAO(null);");var pe=X.global.def("{}"),ae=re.def(he,".id"),ie=re.def(pe,"[",ae,"]");re(X.cond(ie).then(ie,".call(this,a0);").else(ie,"=",pe,"[",ae,"]=",X.link(function(se){return _r(Nr,X,z,se,1)}),"(",he,");",ie,".call(this,a0);"))}Object.keys(z.state).length>0&&re(X.shared.current,".dirty=true;")}function Su(X,z,re,he){X.batchId="a1",Zn(X,z);function pe(){return!0}Zi(X,z,re,he.attributes,pe),qr(X,z,re,he.uniforms,pe),Jt(X,z,z,re)}function cp(X,z,re,he){Zn(X,z);var pe=re.contextDep,ae=z.def(),ie="a0",se="a1",Y=z.def();X.shared.props=Y,X.batchId=ae;var ee=X.scope(),H=X.scope();z(ee.entry,"for(",ae,"=0;",ae,"<",se,";++",ae,"){",Y,"=",ie,"[",ae,"];",H,"}",ee.exit);function ue(zt){return zt.contextDep&&pe||zt.propDep}function ve(zt){return!ue(zt)}if(re.needsContext&&gi(X,H,re.context),re.needsFramebuffer&&mi(X,H,re.framebuffer),Qi(X,H,re.state,ue),re.profile&&ue(re.profile)&&pr(X,H,re,!1,!0),he)re.useVAO?re.drawVAO?ue(re.drawVAO)?H(X.shared.vao,".setVAO(",re.drawVAO.append(X,H),");"):ee(X.shared.vao,".setVAO(",re.drawVAO.append(X,ee),");"):ee(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(ee(X.shared.vao,".setVAO(null);"),Zi(X,ee,re,he.attributes,ve),Zi(X,H,re,he.attributes,ue)),qr(X,ee,re,he.uniforms,ve),qr(X,H,re,he.uniforms,ue),Jt(X,ee,H,re);else{var Pe=X.global.def("{}"),Re=re.shader.progVar.append(X,H),Me=H.def(Re,".id"),tt=H.def(Pe,"[",Me,"]");H(X.shared.gl,".useProgram(",Re,".program);","if(!",tt,"){",tt,"=",Pe,"[",Me,"]=",X.link(function(zt){return _r(Su,X,re,zt,2)}),"(",Re,");}",tt,".call(this,a0[",ae,"],",ae,");")}}function Q(X,z){var re=X.proc("batch",2);X.batchId="0",Zn(X,re);var he=!1,pe=!0;Object.keys(z.context).forEach(function(Pe){he=he||z.context[Pe].propDep}),he||(gi(X,re,z.context),pe=!1);var ae=z.framebuffer,ie=!1;ae?(ae.propDep?he=ie=!0:ae.contextDep&&he&&(ie=!0),ie||mi(X,re,ae)):mi(X,re,null),z.state.viewport&&z.state.viewport.propDep&&(he=!0);function se(Pe){return Pe.contextDep&&he||Pe.propDep}Ri(X,re,z),Qi(X,re,z.state,function(Pe){return!se(Pe)}),(!z.profile||!se(z.profile))&&pr(X,re,z,!1,"a1"),z.contextDep=he,z.needsContext=pe,z.needsFramebuffer=ie;var Y=z.shader.progVar;if(Y.contextDep&&he||Y.propDep)cp(X,re,z,null);else{var ee=Y.append(X,re);if(re(X.shared.gl,".useProgram(",ee,".program);"),z.shader.program)cp(X,re,z,z.shader.program);else{re(X.shared.vao,".setVAO(null);");var H=X.global.def("{}"),ue=re.def(ee,".id"),ve=re.def(H,"[",ue,"]");re(X.cond(ve).then(ve,".call(this,a0,a1);").else(ve,"=",H,"[",ue,"]=",X.link(function(Pe){return _r(cp,X,z,Pe,2)}),"(",ee,");",ve,".call(this,a0,a1);"))}}Object.keys(z.state).length>0&&re(X.shared.current,".dirty=true;")}function Se(X,z){var re=X.proc("scope",3);X.batchId="a2";var he=X.shared,pe=he.current;gi(X,re,z.context),z.framebuffer&&z.framebuffer.append(X,re),B9(Object.keys(z.state)).forEach(function(ie){var se=z.state[ie],Y=se.append(X,re);yn(Y)?Y.forEach(function(ee,H){re.set(X.next[ie],"["+H+"]",ee)}):re.set(he.next,"."+ie,Y)}),pr(X,re,z,!0,!0),[op,$x,lp,zx,sp].forEach(function(ie){var se=z.draw[ie];se&&re.set(he.draw,"."+ie,""+se.append(X,re))}),Object.keys(z.uniforms).forEach(function(ie){var se=z.uniforms[ie].append(X,re);Array.isArray(se)&&(se="["+se.join()+"]"),re.set(he.uniforms,"["+U.id(ie)+"]",se)}),Object.keys(z.attributes).forEach(function(ie){var se=z.attributes[ie].append(X,re),Y=X.scopeAttrib(ie);Object.keys(new de).forEach(function(ee){re.set(Y,"."+ee,se[ee])})}),z.scopeVAO&&re.set(he.vao,".targetVAO",z.scopeVAO.append(X,re));function ae(ie){var se=z.shader[ie];se&&re.set(he.shader,"."+ie,se.append(X,re))}ae(Fy),ae(By),Object.keys(z.state).length>0&&(re(pe,".dirty=true;"),re.exit(pe,".dirty=true;")),re("a1(",X.shared.context,",a0,",X.batchId,");")}function ye(X){if(!(typeof X!="object"||yn(X))){for(var z=Object.keys(X),re=0;re<z.length;++re)if(wr.isDynamic(X[z[re]]))return!0;return!1}}function Ot(X,z,re){var he=z.static[re];if(!he||!ye(he))return;var pe=X.global,ae=Object.keys(he),ie=!1,se=!1,Y=!1,ee=X.global.def("{}");ae.forEach(function(ue){var ve=he[ue];if(wr.isDynamic(ve)){typeof ve=="function"&&(ve=he[ue]=wr.unbox(ve));var Pe=xo(ve,null);ie=ie||Pe.thisDep,Y=Y||Pe.propDep,se=se||Pe.contextDep}else{switch(pe(ee,".",ue,"="),typeof ve){case"number":pe(ve);break;case"string":pe('"',ve,'"');break;case"object":Array.isArray(ve)&&pe("[",ve.join(),"]");break;default:pe(X.link(ve));break}pe(";")}});function H(ue,ve){ae.forEach(function(Pe){var Re=he[Pe];if(wr.isDynamic(Re)){var Me=ue.invoke(ve,Re);ve(ee,".",Pe,"=",Me,";")}})}z.dynamic[re]=new wr.DynamicVariable(Fx,{thisDep:ie,contextDep:se,propDep:Y,ref:ee,append:H}),delete z.static[re]}function xr(X,z,re,he,pe){var ae=or();ae.stats=ae.link(pe),Object.keys(z.static).forEach(function(se){Ot(ae,z,se)}),Ppe.forEach(function(se){Ot(ae,X,se)});var ie=li(X,z,re,he,ae);return Jn(ae,ie),Se(ae,ie),Q(ae,ie),n(ae.compile(),{destroy:function(){ie.shader.program.destroy()}})}return{next:Ct,current:je,procs:function(){var X=or(),z=X.proc("poll"),re=X.proc("refresh"),he=X.block();z(he),re(he);var pe=X.shared,ae=pe.gl,ie=pe.next,se=pe.current;he(se,".dirty=false;"),mi(X,z),mi(X,re,null,!0);var Y;rt&&(Y=X.link(rt)),Z.oes_vertex_array_object&&re(X.link(Z.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ee=0;ee<be.maxAttributes;++ee){var H=re.def(pe.attributes,"[",ee,"]"),ue=X.cond(H,".buffer");ue.then(ae,".enableVertexAttribArray(",ee,");",ae,".bindBuffer(",Cg,",",H,".buffer.buffer);",ae,".vertexAttribPointer(",ee,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);").else(ae,".disableVertexAttribArray(",ee,");",ae,".vertexAttrib4f(",ee,",",H,".x,",H,".y,",H,".z,",H,".w);",H,".buffer=null;"),re(ue),rt&&re(Y,".vertexAttribDivisorANGLE(",ee,",",H,".divisor);")}return re(X.shared.vao,".currentVAO=null;",X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"),Object.keys(ct).forEach(function(ve){var Pe=ct[ve],Re=he.def(ie,".",ve),Me=X.block();Me("if(",Re,"){",ae,".enable(",Pe,")}else{",ae,".disable(",Pe,")}",se,".",ve,"=",Re,";"),re(Me),z("if(",Re,"!==",se,".",ve,"){",Me,"}")}),Object.keys(We).forEach(function(ve){var Pe=We[ve],Re=je[ve],Me,tt,zt=X.block();if(zt(ae,".",Pe,"("),yn(Re)){var vr=Re.length;Me=X.global.def(ie,".",ve),tt=X.global.def(se,".",ve),zt(an(vr,function(Pt){return Me+"["+Pt+"]"}),");",an(vr,function(Pt){return tt+"["+Pt+"]="+Me+"["+Pt+"];"}).join("")),z("if(",an(vr,function(Pt){return Me+"["+Pt+"]!=="+tt+"["+Pt+"]"}).join("||"),"){",zt,"}")}else Me=he.def(ie,".",ve),tt=he.def(se,".",ve),zt(Me,");",se,".",ve,"=",Me,";"),z("if(",Me,"!==",tt,"){",zt,"}");re(zt)}),X.compile()}(),compile:xr}}function Jpe(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var eve=34918,tve=34919,z9=35007,rve=function(I,U){if(!U.ext_disjoint_timer_query)return null;var Z=[];function be(){return Z.pop()||U.ext_disjoint_timer_query.createQueryEXT()}function Le(rt){Z.push(rt)}var we=[];function _e(rt){var wt=be();U.ext_disjoint_timer_query.beginQueryEXT(z9,wt),we.push(wt),Ke(we.length-1,we.length,rt)}function qe(){U.ext_disjoint_timer_query.endQueryEXT(z9)}function Ze(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var nt=[];function Je(){return nt.pop()||new Ze}function st(rt){nt.push(rt)}var vt=[];function Ke(rt,wt,je){var Ct=Je();Ct.startQueryIndex=rt,Ct.endQueryIndex=wt,Ct.sum=0,Ct.stats=je,vt.push(Ct)}var lt=[],de=[];function Ce(){var rt,wt,je=we.length;if(je!==0){de.length=Math.max(de.length,je+1),lt.length=Math.max(lt.length,je+1),lt[0]=0,de[0]=0;var Ct=0;for(rt=0,wt=0;wt<we.length;++wt){var Ve=we[wt];U.ext_disjoint_timer_query.getQueryObjectEXT(Ve,tve)?(Ct+=U.ext_disjoint_timer_query.getQueryObjectEXT(Ve,eve),Le(Ve)):we[rt++]=Ve,lt[wt+1]=Ct,de[wt+1]=rt}for(we.length=rt,rt=0,wt=0;wt<vt.length;++wt){var ct=vt[wt],We=ct.startQueryIndex,ft=ct.endQueryIndex;ct.sum+=lt[ft]-lt[We];var Ht=de[We],lr=de[ft];lr===Ht?(ct.stats.gpuTime+=ct.sum/1e6,st(ct)):(ct.startQueryIndex=Ht,ct.endQueryIndex=lr,vt[rt++]=ct)}vt.length=rt}}return{beginQuery:_e,endQuery:qe,pushScopeStats:Ke,update:Ce,getNumPendingQueries:function(){return we.length},clear:function(){Z.push.apply(Z,we);for(var rt=0;rt<Z.length;rt++)U.ext_disjoint_timer_query.deleteQueryEXT(Z[rt]);we.length=0,Z.length=0},restore:function(){we.length=0,Z.length=0}}},nve=16384,ive=256,ave=1024,ove=34962,j9="webglcontextlost",G9="webglcontextrestored",U9=1,sve=2,lve=3;function W9(I,U){for(var Z=0;Z<I.length;++Z)if(I[Z]===U)return Z;return-1}function uve(I){var U=ca(I);if(!U)return null;var Z=U.gl,be=Z.getContextAttributes(),Le=Z.isContextLost(),we=Go(Z,U);if(!we)return null;var _e=Hr(),qe=Jpe(),Ze=we.extensions,nt=rve(Z,Ze),Je=Zr(),st=Z.drawingBufferWidth,vt=Z.drawingBufferHeight,Ke={tick:0,time:0,viewportWidth:st,viewportHeight:vt,framebufferWidth:st,framebufferHeight:vt,drawingBufferWidth:st,drawingBufferHeight:vt,pixelRatio:U.pixelRatio},lt={},de={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ce=vx(Z,Ze),rt=Cy(Z,qe,U,je),wt=Spe(Z,Ze,Ce,qe,rt);function je(Jt){return wt.destroyBuffer(Jt)}var Ct=ep(Z,Ze,rt,qe),Ve=kpe(Z,_e,qe,U),ct=Jde(Z,Ze,Ce,function(){Ht.procs.poll()},Ke,qe,U),We=epe(Z,Ze,Ce,qe,U),ft=bpe(Z,Ze,Ce,ct,We,qe),Ht=Zpe(Z,_e,Ze,Ce,rt,Ct,ct,ft,lt,wt,Ve,de,Ke,nt,U),lr=Tpe(Z,ft,Ht.procs.poll,Ke,be,Ze,Ce),gt=Ht.next,at=Z.canvas,ze=[],or=[],dr=[],Dt=[U.onDestroy],br=null;function ur(){if(ze.length===0){nt&&nt.update(),br=null;return}br=Ar.next(ur),Qi();for(var Jt=ze.length-1;Jt>=0;--Jt){var _r=ze[Jt];_r&&_r(Ke,null,0)}Z.flush(),nt&&nt.update()}function mr(){!br&&ze.length>0&&(br=Ar.next(ur))}function Gr(){br&&(Ar.cancel(ur),br=null)}function si(Jt){Jt.preventDefault(),Le=!0,Gr(),or.forEach(function(_r){_r()})}function Ci(Jt){Z.getError(),Le=!1,we.restore(),Ve.restore(),rt.restore(),ct.restore(),We.restore(),ft.restore(),wt.restore(),nt&&nt.restore(),Ht.procs.refresh(),mr(),dr.forEach(function(_r){_r()})}at&&(at.addEventListener(j9,si,!1),at.addEventListener(G9,Ci,!1));function kr(){ze.length=0,Gr(),at&&(at.removeEventListener(j9,si),at.removeEventListener(G9,Ci)),Ve.clear(),ft.clear(),We.clear(),ct.clear(),Ct.clear(),rt.clear(),wt.clear(),nt&&nt.clear(),Dt.forEach(function(Jt){Jt()})}function vi(Jt){P(!!Jt,"invalid args to regl({...})"),P.type(Jt,"object","invalid args to regl({...})");function _r(pe){var ae=n({},pe);delete ae.uniforms,delete ae.attributes,delete ae.context,delete ae.vao,"stencil"in ae&&ae.stencil.op&&(ae.stencil.opBack=ae.stencil.opFront=ae.stencil.op,delete ae.stencil.op);function ie(se){if(se in ae){var Y=ae[se];delete ae[se],Object.keys(Y).forEach(function(ee){ae[se+"."+ee]=Y[ee]})}}return ie("blend"),ie("depth"),ie("cull"),ie("stencil"),ie("polygonOffset"),ie("scissor"),ie("sample"),"vao"in pe&&(ae.vao=pe.vao),ae}function Nr(pe,ae){var ie={},se={};return Object.keys(pe).forEach(function(Y){var ee=pe[Y];if(wr.isDynamic(ee)){se[Y]=wr.unbox(ee,Y);return}else if(ae&&Array.isArray(ee)){for(var H=0;H<ee.length;++H)if(wr.isDynamic(ee[H])){se[Y]=wr.unbox(ee,Y);return}}ie[Y]=ee}),{dynamic:se,static:ie}}var Jn=Nr(Jt.context||{},!0),Su=Nr(Jt.uniforms||{},!0),cp=Nr(Jt.attributes||{},!1),Q=Nr(_r(Jt),!1),Se={gpuTime:0,cpuTime:0,count:0},ye=Ht.compile(Q,cp,Su,Jn,Se),Ot=ye.draw,xr=ye.batch,X=ye.scope,z=[];function re(pe){for(;z.length<pe;)z.push(null);return z}function he(pe,ae){var ie;if(Le&&P.raise("context lost"),typeof pe=="function")return X.call(this,null,pe,0);if(typeof ae=="function")if(typeof pe=="number")for(ie=0;ie<pe;++ie)X.call(this,null,ae,ie);else if(Array.isArray(pe))for(ie=0;ie<pe.length;++ie)X.call(this,pe[ie],ae,ie);else return X.call(this,pe,ae,0);else if(typeof pe=="number"){if(pe>0)return xr.call(this,re(pe|0),pe|0)}else if(Array.isArray(pe)){if(pe.length)return xr.call(this,pe,pe.length)}else return Ot.call(this,pe)}return n(he,{stats:Se,destroy:function(){ye.destroy()}})}var vn=ft.setFBO=vi({framebuffer:wr.define.call(null,U9,"framebuffer")});function li(Jt,_r){var Nr=0;Ht.procs.poll();var Jn=_r.color;Jn&&(Z.clearColor(+Jn[0]||0,+Jn[1]||0,+Jn[2]||0,+Jn[3]||0),Nr|=nve),"depth"in _r&&(Z.clearDepth(+_r.depth),Nr|=ive),"stencil"in _r&&(Z.clearStencil(_r.stencil|0),Nr|=ave),P(!!Nr,"called regl.clear with no buffer specified"),Z.clear(Nr)}function gi(Jt){if(P(typeof Jt=="object"&&Jt,"regl.clear() takes an object as input"),"framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var _r=0;_r<6;++_r)vn(n({framebuffer:Jt.framebuffer.faces[_r]},Jt),li);else vn(Jt,li);else li(null,Jt)}function mi(Jt){P.type(Jt,"function","regl.frame() callback must be a function"),ze.push(Jt);function _r(){var Nr=W9(ze,Jt);P(Nr>=0,"cannot cancel a frame twice");function Jn(){var Su=W9(ze,Jn);ze[Su]=ze[ze.length-1],ze.length-=1,ze.length<=0&&Gr()}ze[Nr]=Jn}return mr(),{cancel:_r}}function Ri(){var Jt=gt.viewport,_r=gt.scissor_box;Jt[0]=Jt[1]=_r[0]=_r[1]=0,Ke.viewportWidth=Ke.framebufferWidth=Ke.drawingBufferWidth=Jt[2]=_r[2]=Z.drawingBufferWidth,Ke.viewportHeight=Ke.framebufferHeight=Ke.drawingBufferHeight=Jt[3]=_r[3]=Z.drawingBufferHeight}function Qi(){Ke.tick+=1,Ke.time=pr(),Ri(),Ht.procs.poll()}function Zn(){ct.refresh(),Ri(),Ht.procs.refresh(),nt&&nt.update()}function pr(){return(Zr()-Je)/1e3}Zn();function Zi(Jt,_r){P.type(_r,"function","listener callback must be a function");var Nr;switch(Jt){case"frame":return mi(_r);case"lost":Nr=or;break;case"restore":Nr=dr;break;case"destroy":Nr=Dt;break;default:P.raise("invalid event, must be one of frame,lost,restore,destroy")}return Nr.push(_r),{cancel:function(){for(var Jn=0;Jn<Nr.length;++Jn)if(Nr[Jn]===_r){Nr[Jn]=Nr[Nr.length-1],Nr.pop();return}}}}var qr=n(vi,{clear:gi,prop:wr.define.bind(null,U9),context:wr.define.bind(null,sve),this:wr.define.bind(null,lve),draw:vi({}),buffer:function(Jt){return rt.create(Jt,ove,!1,!1)},elements:function(Jt){return Ct.create(Jt,!1)},texture:ct.create2D,cube:ct.createCube,renderbuffer:We.create,framebuffer:ft.create,framebufferCube:ft.createCube,vao:wt.createVAO,attributes:be,frame:mi,on:Zi,limits:Ce,hasExtension:function(Jt){return Ce.extensions.indexOf(Jt.toLowerCase())>=0},read:lr,destroy:kr,_gl:Z,_refresh:Zn,poll:function(){Qi(),nt&&nt.update()},now:pr,stats:qe});return U.onDone(null,qr),qr}return uve})})(Ihe);var Oct=Ihe.exports;const Ict=_s(Oct);var Dct=function(){function t(e,r){au(this,t),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,i=r.offset,a=r.stride,o=r.normalized,s=r.size,l=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return ou(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Yc,w1,qc,Bs,b1,mh,x1,zE,Ou,mp,fa,Iu,Du,jE,Pct=(Yc={},Et(Yc,Qe.POINTS,"points"),Et(Yc,Qe.LINES,"lines"),Et(Yc,Qe.LINE_LOOP,"line loop"),Et(Yc,Qe.LINE_STRIP,"line strip"),Et(Yc,Qe.TRIANGLES,"triangles"),Et(Yc,Qe.TRIANGLE_FAN,"triangle fan"),Et(Yc,Qe.TRIANGLE_STRIP,"triangle strip"),Yc),Dhe=(w1={},Et(w1,Qe.STATIC_DRAW,"static"),Et(w1,Qe.DYNAMIC_DRAW,"dynamic"),Et(w1,Qe.STREAM_DRAW,"stream"),w1),lB=(qc={},Et(qc,Qe.BYTE,"int8"),Et(qc,Qe.UNSIGNED_INT,"int16"),Et(qc,Qe.INT,"int32"),Et(qc,Qe.UNSIGNED_BYTE,"uint8"),Et(qc,Qe.UNSIGNED_SHORT,"uint16"),Et(qc,Qe.UNSIGNED_INT,"uint32"),Et(qc,Qe.FLOAT,"float"),qc),Lct=(Bs={},Et(Bs,Qe.ALPHA,"alpha"),Et(Bs,Qe.LUMINANCE,"luminance"),Et(Bs,Qe.LUMINANCE_ALPHA,"luminance alpha"),Et(Bs,Qe.RGB,"rgb"),Et(Bs,Qe.RGBA,"rgba"),Et(Bs,Qe.RGBA4,"rgba4"),Et(Bs,Qe.RGB5_A1,"rgb5 a1"),Et(Bs,Qe.RGB565,"rgb565"),Et(Bs,Qe.DEPTH_COMPONENT,"depth"),Et(Bs,Qe.DEPTH_STENCIL,"depth stencil"),Bs),Rct=(b1={},Et(b1,Qe.DONT_CARE,"dont care"),Et(b1,Qe.NICEST,"nice"),Et(b1,Qe.FASTEST,"fast"),b1),yX=(mh={},Et(mh,Qe.NEAREST,"nearest"),Et(mh,Qe.LINEAR,"linear"),Et(mh,Qe.LINEAR_MIPMAP_LINEAR,"mipmap"),Et(mh,Qe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Et(mh,Qe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Et(mh,Qe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),wX=(x1={},Et(x1,Qe.REPEAT,"repeat"),Et(x1,Qe.CLAMP_TO_EDGE,"clamp"),Et(x1,Qe.MIRRORED_REPEAT,"mirror"),x1),Nct=(zE={},Et(zE,Qe.NONE,"none"),Et(zE,Qe.BROWSER_DEFAULT_WEBGL,"browser"),zE),Fct=(Ou={},Et(Ou,Qe.NEVER,"never"),Et(Ou,Qe.ALWAYS,"always"),Et(Ou,Qe.LESS,"less"),Et(Ou,Qe.LEQUAL,"lequal"),Et(Ou,Qe.GREATER,"greater"),Et(Ou,Qe.GEQUAL,"gequal"),Et(Ou,Qe.EQUAL,"equal"),Et(Ou,Qe.NOTEQUAL,"notequal"),Ou),bX=(mp={},Et(mp,Qe.FUNC_ADD,"add"),Et(mp,Qe.MIN_EXT,"min"),Et(mp,Qe.MAX_EXT,"max"),Et(mp,Qe.FUNC_SUBTRACT,"subtract"),Et(mp,Qe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),mp),GE=(fa={},Et(fa,Qe.ZERO,"zero"),Et(fa,Qe.ONE,"one"),Et(fa,Qe.SRC_COLOR,"src color"),Et(fa,Qe.ONE_MINUS_SRC_COLOR,"one minus src color"),Et(fa,Qe.SRC_ALPHA,"src alpha"),Et(fa,Qe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Et(fa,Qe.DST_COLOR,"dst color"),Et(fa,Qe.ONE_MINUS_DST_COLOR,"one minus dst color"),Et(fa,Qe.DST_ALPHA,"dst alpha"),Et(fa,Qe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Et(fa,Qe.CONSTANT_COLOR,"constant color"),Et(fa,Qe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Et(fa,Qe.CONSTANT_ALPHA,"constant alpha"),Et(fa,Qe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Et(fa,Qe.SRC_ALPHA_SATURATE,"src alpha saturate"),fa),Bct=(Iu={},Et(Iu,Qe.NEVER,"never"),Et(Iu,Qe.ALWAYS,"always"),Et(Iu,Qe.LESS,"less"),Et(Iu,Qe.LEQUAL,"lequal"),Et(Iu,Qe.GREATER,"greater"),Et(Iu,Qe.GEQUAL,"gequal"),Et(Iu,Qe.EQUAL,"equal"),Et(Iu,Qe.NOTEQUAL,"notequal"),Iu),Gg=(Du={},Et(Du,Qe.ZERO,"zero"),Et(Du,Qe.KEEP,"keep"),Et(Du,Qe.REPLACE,"replace"),Et(Du,Qe.INVERT,"invert"),Et(Du,Qe.INCR,"increment"),Et(Du,Qe.DECR,"decrement"),Et(Du,Qe.INCR_WRAP,"increment wrap"),Et(Du,Qe.DECR_WRAP,"decrement wrap"),Du),$ct=(jE={},Et(jE,Qe.FRONT,"front"),Et(jE,Qe.BACK,"back"),jE),zct=function(){function t(e,r){au(this,t),this.buffer=void 0;var n=r.data,i=r.usage,a=r.type;this.buffer=e.buffer({data:n,usage:Dhe[i||Qe.STATIC_DRAW],type:lB[a||Qe.UNSIGNED_BYTE]})}return ou(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(r){var n=r.data,i=r.offset;this.buffer.subdata(n,i)}}]),t}();function G4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jct(t){if(Array.isArray(t))return G4(t)}function Gct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uct(t,e){if(t){if(typeof t=="string")return G4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G4(t,e)}}function Wct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vct(t){return jct(t)||Gct(t)||Uct(t)||Wct()}function xX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xX(Object(r),!0).forEach(function(n){Et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Hct=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,EX=0,Xct=function(){function t(e,r){var n=this;au(this,t),this.reGl=e,this.context=r,this.entity=The(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,h=u.data,d=u.isReferer,p=u.storageClass;if(p===Km.StorageBuffer){if(d)n.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return h.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,h);var v=n.textureCache[c],g=v.textureWidth,m=v.isOutput;i["".concat(c,"Size")]=[g,g],m&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,h)))}i[c]=function(){return n.textureCache[c].texture}}else if(p===Km.Uniform){if(h&&(Array.isArray(h)||kk(h))&&h.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:Hct,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return ou(t,[{key:"run",value:function(){var r=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){r.computeCommand()})}},{key:"readData",value:function(){var e=td(Fa.mark(function n(){var i=this,a,o,s,l,u,c,f,h;return Fa.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){p.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(h=0;h<a.length;h+=4)l===1?f.push(a[h]):l===2?f.push(a[h],a[h+1]):f.push(a[h],a[h+1],a[h+2]);else f=a;return p.abrupt("return",new c(f.slice(0,s)));case 6:return p.abrupt("return",new Float32Array);case 7:case"end":return p.stop()}},n,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"confirmInput",value:function(r,n){var i;this.entity===r.entity?(this.dynamicPingpong=!0,i=this):i=r,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(r,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===r});if(i){var a=this.calcDataTexture(r,i.type,n),o=a.texture,s=a.data;this.textureCache[r].data=s,this.textureCache[r].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var r=this.context.output.name;this.textureCache[r].id=this.getOuputDataTexture().id,this.textureCache[r].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var r=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=r}},{key:"cloneDataTexture",value:function(r){var n=r.data,i=r.textureWidth;return SX(SX({},r),{},{id:EX++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(r,n,i){var a=1;n===Bw.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,Vct(new Array((f-u)*4).fill(0)));var h=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:EX++,data:o,originalDataLength:l,typedArrayConstructor:kk(i)?i.constructor:void 0,textureWidth:c,texture:h,texelCount:u,elementsPerTexel:a,isOutput:r===this.context.output.name}}}]),t}(),Yct=function(){function t(e,r){au(this,t),this.elements=void 0;var n=r.data,i=r.usage,a=r.type,o=r.count;this.elements=e.elements({data:n,usage:Dhe[i||Qe.STATIC_DRAW],type:lB[a||Qe.UNSIGNED_BYTE],count:o})}return ou(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var n=r.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),qct=function(){function t(e,r){au(this,t),this.framebuffer=void 0;var n=r.width,i=r.height,a=r.color,o=r.colors;r.depth,r.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=e.framebuffer(s)}return ou(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var n=r.width,i=r.height;this.framebuffer.resize(n,i)}}]),t}();function Kct(t,e){return function(r){return t(e(r))}}var Qct=Kct,Zct=Qct,Jct=Zct(Object.getPrototypeOf,Object),eft=Jct,tft=oB,rft=eft,nft=sB,ift="[object Object]",aft=Function.prototype,oft=Object.prototype,Phe=aft.toString,sft=oft.hasOwnProperty,lft=Phe.call(Object);function uft(t){if(!nft(t)||tft(t)!=ift)return!1;var e=rft(t);if(e===null)return!0;var r=sft.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Phe.call(r)==lft}var cft=uft;const fft=_s(cft);function vD(t){var e={};return Object.keys(t).forEach(function(r){U4(r,t[r],e,"")}),e}function U4(t,e,r,n){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||kk(e)||e===""||e.resize!==void 0){r["".concat(n&&n+".").concat(t)]=e;return}fft(e)&&Object.keys(e).forEach(function(i){U4(i,e[i],r,"".concat(n&&n+".").concat(t))}),Array.isArray(e)&&e.forEach(function(i,a){Object.keys(i).forEach(function(o){U4(o,i[o],r,"".concat(n&&n+".").concat(t,"[").concat(a,"]"))})})}function _X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ug(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_X(Object(r),!0).forEach(function(n){Et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_X(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hft=function(){function t(e,r){au(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=r.vs,i=r.fs,a=r.defines,o=r.attributes,s=r.uniforms,l=r.primitive,u=r.count,c=r.elements,f=r.depth,h=r.blend,d=r.stencil,p=r.cull,v=r.instances,g=r.scissor,m=r.viewport,y={};s&&(this.uniforms=vD(s),Object.keys(s).forEach(function(S){y[S]=e.prop(S)}));var w={};Object.keys(o).forEach(function(S){w[S]=o[S].get()});var b=a&&this.generateDefines(a)||"",x={attributes:w,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(b,`
`).concat(i),uniforms:y,vert:`
`.concat(b,`
`).concat(n),primitive:Pct[l===void 0?Qe.TRIANGLES:l]};v&&(x.instances=v),u&&(x.count=u),c&&(x.elements=c.get()),g&&(x.scissor=g),m&&(x.viewport=m),this.initDepthDrawParams({depth:f},x),this.initBlendDrawParams({blend:h},x),this.initStencilDrawParams({stencil:d},x),this.initCullDrawParams({cull:p},x),this.drawCommand=e(x)}return ou(t,[{key:"addUniforms",value:function(r){this.uniforms=Ug(Ug({},this.uniforms),vD(r))}},{key:"draw",value:function(r){var n=Ug(Ug({},this.uniforms),vD(r.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=qm(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(r,n){var i=r.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:Fct[i.func||Qe.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(r,n){var i=r.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:GE[o&&o.srcRGB||Qe.SRC_ALPHA],srcAlpha:GE[o&&o.srcAlpha||Qe.SRC_ALPHA],dstRGB:GE[o&&o.dstRGB||Qe.ONE_MINUS_SRC_ALPHA],dstAlpha:GE[o&&o.dstAlpha||Qe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:bX[s&&s.rgb||Qe.FUNC_ADD],alpha:bX[s&&s.alpha||Qe.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(r,n){var i=r.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Qe.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:c,h=i.opBack,d=h===void 0?{fail:Qe.KEEP,zfail:Qe.KEEP,zpass:Qe.KEEP}:h;n.stencil={enable:!!a,mask:s,func:Ug(Ug({},u),{},{cmp:Bct[u.cmp]}),opFront:{fail:Gg[f.fail],zfail:Gg[f.zfail],zpass:Gg[f.zpass]},opBack:{fail:Gg[d.fail],zfail:Gg[d.zfail],zpass:Gg[d.zpass]}}}}},{key:"initCullDrawParams",value:function(r,n){var i=r.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Qe.BACK:o;n.cull={enable:!!a,face:$ct[s]}}}},{key:"generateDefines",value:function(r){return Object.keys(r).map(function(n){return"#define ".concat(n," ").concat(Number(r[n]))}).join(`
`)}}]),t}(),dft=function(){function t(e,r){au(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,i=r.type,a=i===void 0?Qe.UNSIGNED_BYTE:i,o=r.width,s=r.height,l=r.flipY,u=l===void 0?!1:l,c=r.format,f=c===void 0?Qe.RGBA:c,h=r.mipmap,d=h===void 0?!1:h,p=r.wrapS,v=p===void 0?Qe.CLAMP_TO_EDGE:p,g=r.wrapT,m=g===void 0?Qe.CLAMP_TO_EDGE:g,y=r.aniso,w=y===void 0?0:y,b=r.alignment,x=b===void 0?1:b,S=r.premultiplyAlpha,E=S===void 0?!1:S,_=r.mag,k=_===void 0?Qe.NEAREST:_,C=r.min,M=C===void 0?Qe.NEAREST:C,A=r.colorSpace,T=A===void 0?Qe.BROWSER_DEFAULT_WEBGL:A;this.width=o,this.height=s;var D={width:o,height:s,type:lB[a],format:Lct[f],wrapS:wX[v],wrapT:wX[m],mag:yX[k],min:yX[M],alignment:x,flipY:u,colorSpace:Nct[T],premultiplyAlpha:E,aniso:w};n&&(D.data=n),typeof d=="number"?D.mipmap=Rct[d]:typeof d=="boolean"&&(D.mipmap=d),this.texture=e.texture(D)}return ou(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var n=r.width,i=r.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),pft=function(){function t(){var e=this;au(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=td(Fa.mark(function n(i){return Fa.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=td(Fa.mark(function l(u){var c;return Fa.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){h.next=5;break}return h.next=3,i.uniforms[u].load();case 3:c=h.sent,i.uniforms[u]=c;case 5:case"end":return h.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new hft(e.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new Dct(e.gl,r)},this.createBuffer=function(r){return new zct(e.gl,r)},this.createElements=function(r){return new Yct(e.gl,r)},this.createTexture2D=function(r){return new dft(e.gl,r)},this.createFramebuffer=function(r){return new qct(e.gl,r)},this.useFramebuffer=function(r,n){e.gl({framebuffer:r?r.get():null})(n)},this.createComputeModel=function(){var r=td(Fa.mark(function n(i){return Fa.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Xct(e.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.clear=function(r){var n=r.color,i=r.depth,a=r.stencil,o=r.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),e.gl.clear(l)},this.setScissor=function(r){e.gl&&e.gl._gl&&(r.enable&&r.box?(e.gl._gl.enable(Qe.SCISSOR_TEST),e.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):e.gl._gl.disable(Qe.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(r){var n=r.x,i=r.y,a=r.width,o=r.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,i,a,o),e.gl._refresh())},this.readPixels=function(r){var n=r.framebuffer,i=r.x,a=r.y,o=r.width,s=r.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),e.gl.read(l)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return ou(t,[{key:"init",value:function(){var e=td(Fa.mark(function n(i){return Fa.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){Ict({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function r(n){return e.apply(this,arguments)}return r}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),vft=function(){function t(){au(this,t),this.engine=void 0,this.configService=new Mct}return ou(t,[{key:"setConfig",value:function(r){this.configService.set(r)}},{key:"setEngine",value:function(r){this.engine=r}},{key:"createEntity",value:function(){return The()}},{key:"createKernel",value:function(r){var n=new Ohe(this.engine,this.configService);return typeof r=="string"?n.setBundle(JSON.parse(r)):n.setBundle(r),n.init(),n}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new t;return n.setConfig(r),n.setEngine(new pft),n}}]),t}();const gft=Object.freeze(Object.defineProperty({__proto__:null,Kernel:Ohe,World:vft},Symbol.toStringTag,{value:"Module"})),Lhe=xc(gft);var os={};Object.defineProperty(os,"__esModule",{value:!0});os.arrayToTextureData=os.attributesToTextureData=os.buildTextureDataWithTwoEdgeAttr=os.buildTextureData=os.proccessToFunc=void 0;var mft=ii(),Mk=kA,yft=function(t,e){var r;return t?(0,mft.isNumber)(t)?r=function(){return t}:r=t:r=function(){return e||1},r};os.proccessToFunc=yft;var wft=function(t,e){var r=[],n=[],i={},a=0;for(a=0;a<t.length;a++){var o=t[a];i[o.id]=a,r.push(o.x),r.push(o.y),r.push(0),r.push(0),n.push([])}for(a=0;a<e.length;a++){var s=e[a],l=(0,Mk.getEdgeTerminal)(s,"source"),u=(0,Mk.getEdgeTerminal)(s,"target");!isNaN(i[l])&&!isNaN(i[u])&&(n[i[l]].push(i[u]),n[i[u]].push(i[l]))}var c=0;for(a=0;a<t.length;a++){var f=r.length,h=n[a],d=h.length;r[a*4+2]=f,r[a*4+3]=d,c=Math.max(c,d);for(var p=0;p<d;++p){var v=h[p];r.push(+v)}}for(;r.length%4!==0;)r.push(0);return{maxEdgePerVetex:c,array:new Float32Array(r)}};os.buildTextureData=wft;var bft=function(t,e,r,n){var i=[],a=[],o={},s=0;for(s=0;s<t.length;s++){var l=t[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s],c=(0,Mk.getEdgeTerminal)(u,"source"),f=(0,Mk.getEdgeTerminal)(u,"target");a[o[c]].push(o[f]),a[o[c]].push(r(u)),a[o[c]].push(n(u)),a[o[c]].push(0),a[o[f]].push(o[c]),a[o[f]].push(r(u)),a[o[f]].push(n(u)),a[o[f]].push(0)}var h=0;for(s=0;s<t.length;s++){var d=i.length,p=a[s],v=p.length;i[s*4+2]=d+1048576*v/4,i[s*4+3]=0,h=Math.max(h,v/4);for(var g=0;g<v;++g){var m=p[g];i.push(+m)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}};os.buildTextureDataWithTwoEdgeAttr=bft;var xft=function(t,e){var r=[],n=t.length,i={};return e.forEach(function(a){t.forEach(function(o,s){if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),r.push(i[a[o]]),s===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}};os.attributesToTextureData=xft;var Sft=function(t){for(var e=[],r=t.length,n=t[0].length,i=function(o){t.forEach(function(s,l){if(e.push(s[o]),l===r-1)for(;e.length%4!==0;)e.push(0)})},a=0;a<n;a++)i(a);return new Float32Array(e)};os.arrayToTextureData=Sft;var ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.clusterBundle=ac.clusterCode=ac.fruchtermanBundle=ac.fruchtermanCode=void 0;ac.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;ac.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';ac.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;ac.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var Eft=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UE=Oe&&Oe.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},WE=Oe&&Oe.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ex,"__esModule",{value:!0});ex.FruchtermanGPULayout=void 0;var _ft=di,Wg=ii(),CX=Lhe,kX=os,MX=ac,Cft=If,kft=function(t){Eft(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return UE(this,void 0,void 0,function(){var r,n,i,a,o,s=this;return WE(this,function(l){switch(l.label){case 0:return r=this,n=r.nodes,!n||n.length===0?(r.onLayoutEnd&&r.onLayoutEnd(),[2]):(!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]),i=r.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(u,c){(0,Wg.isNumber)(u.x)||(u.x=Math.random()*s.width),(0,Wg.isNumber)(u.y)||(u.y=Math.random()*s.height),a[u.id]=u,o[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=o,[4,r.run()]));case 1:return l.sent(),[2]}})})},e.prototype.executeWithWorker=function(r,n){return UE(this,void 0,void 0,function(){var i,a,o,s,l,u=this;return WE(this,function(c){switch(c.label){case 0:return i=this,a=i.nodes,o=i.center,!a||a.length===0?[2]:a.length===1?(a[0].x=o[0],a[0].y=o[1],[2]):(s={},l={},a.forEach(function(f,h){(0,Wg.isNumber)(f.x)||(f.x=Math.random()*u.width),(0,Wg.isNumber)(f.y)||(f.y=Math.random()*u.height),s[f.id]=f,l[f.id]=h}),i.nodeMap=s,i.nodeIdxMap=l,[4,i.run(r,n)]);case 1:return c.sent(),[2]}})})},e.prototype.run=function(r,n){return UE(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,M,A,T,D=this;return WE(this,function(F){switch(F.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,l=i.center,u=i.height*i.width,c=Math.sqrt(u)/10,f=u/(a.length+1),h=Math.sqrt(f),d=i.speed,p=i.clustering,v=(0,kX.attributesToTextureData)([i.clusterField],a),g=v.array,m=v.count,a.forEach(function(R,B){var N=0,O=0;(0,Wg.isNumber)(R.fx)&&(0,Wg.isNumber)(R.fy)&&(N=R.fx||.001,O=R.fy||.001),g[4*B+1]=N,g[4*B+2]=O}),y=a.length,w=(0,kX.buildTextureData)(a,o),b=w.maxEdgePerVetex,x=w.array,S=i.workerEnabled,S?E=CX.World.create({canvas:r,engineOptions:{supportCompute:!0}}):E=CX.World.create({engineOptions:{supportCompute:!0}}),_=i.onLayoutEnd,k=[],C=0;C<m;C++)k.push(0,0,0,0);return M=E.createKernel(MX.fruchtermanBundle).setDispatch([y,1,1]).setBinding({u_Data:x,u_K:h,u_K2:f,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:p?1:0,u_Center:l,u_AttributeArray:g,u_ClusterCenters:k,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),p&&(A=E.createKernel(MX.clusterBundle).setDispatch([m,1,1]).setBinding({u_Data:x,u_NodeAttributes:g,u_ClusterCenters:k,VERTEX_COUNT:y,CLUSTER_COUNT:m})),T=function(){return UE(D,void 0,void 0,function(){var R,B;return WE(this,function(N){switch(N.label){case 0:R=0,N.label=1;case 1:return R<s?[4,M.execute()]:[3,6];case 2:return N.sent(),p?(A.setBinding({u_Data:M}),[4,A.execute()]):[3,4];case 3:N.sent(),M.setBinding({u_ClusterCenters:A}),N.label=4;case 4:M.setBinding({u_MaxDisplace:c*=.99}),N.label=5;case 5:return R++,[3,1];case 6:return[4,M.getOutput()];case 7:return B=N.sent(),r?n.postMessage({type:Cft.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:B}):a.forEach(function(O,L){var G=B[4*L],q=B[4*L+1];O.x=G,O.y=q}),_&&_(),[2]}})})},[4,T()];case 1:return F.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(_ft.Base);ex.FruchtermanGPULayout=kft;var tx={},oc={};Object.defineProperty(oc,"__esModule",{value:!0});oc.aveMovementBundle=oc.aveMovementCode=oc.gForceBundle=oc.gForceCode=void 0;oc.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;oc.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';oc.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;oc.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var Mft=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gD=Oe&&Oe.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},mD=Oe&&Oe.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(tx,"__esModule",{value:!0});tx.GForceGPULayout=void 0;var Aft=di,Kc=ii(),AX=Lhe,Qc=os,Tft=kA,TX=oc,Oft=If,Ift=function(t){Mft(e,t);function e(r){var n=t.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return gD(this,void 0,void 0,function(){var r,n,i,a,o;return mD(this,function(s){switch(s.label){case 0:return r=this,n=r.nodes,!n||n.length===0?(r.onLayoutEnd&&r.onLayoutEnd(),[2]):(!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]),i=r.center,n.length===1?(n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd(),[2]):(a={},o={},n.forEach(function(l,u){(0,Kc.isNumber)(l.x)||(l.x=Math.random()*r.width),(0,Kc.isNumber)(l.y)||(l.y=Math.random()*r.height),a[l.id]=l,o[l.id]=u}),r.nodeMap=a,r.nodeIdxMap=o,r.nodeStrength=(0,Qc.proccessToFunc)(r.nodeStrength,1),r.edgeStrength=(0,Qc.proccessToFunc)(r.edgeStrength,1),[4,r.run()]));case 1:return s.sent(),[2]}})})},e.prototype.executeWithWorker=function(r,n){var i=this,a=i.nodes,o=i.center;if(!(!a||a.length===0)){if(a.length===1){a[0].x=o[0],a[0].y=o[1];return}var s={},l={};a.forEach(function(u,c){(0,Kc.isNumber)(u.x)||(u.x=Math.random()*i.width),(0,Kc.isNumber)(u.y)||(u.y=Math.random()*i.height),s[u.id]=u,l[u.id]=c}),i.nodeMap=s,i.nodeIdxMap=l,i.nodeStrength=(0,Qc.proccessToFunc)(i.nodeStrength,1),i.edgeStrength=(0,Qc.proccessToFunc)(i.edgeStrength,1),i.run(r,n)}},e.prototype.run=function(r,n){return gD(this,void 0,void 0,function(){var i,a,o,s,l,u,c,f,h,d,p,v,g,m,y,w,b,x,S,E,_,k,C,M,A,T,D,F=this;return mD(this,function(R){switch(R.label){case 0:for(i=this,a=i.nodes,o=i.edges,s=i.maxIteration,!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),l=a.length,i.linkDistance=(0,Qc.proccessToFunc)(i.linkDistance),i.edgeStrength=(0,Qc.proccessToFunc)(i.edgeStrength),u=(0,Qc.buildTextureDataWithTwoEdgeAttr)(a,o,i.linkDistance,i.edgeStrength),c=u.maxEdgePerVetex,f=u.array,i.degrees=(0,Tft.getDegree)(a.length,i.nodeIdxMap,o).map(function(B){return B.all}),h=[],d=[],p=[],v=[],g=[],m=[],y=[],i.getMass||(i.getMass=function(B){return i.degrees[i.nodeIdxMap[B.id]]||1}),w=i.gravity,b=i.center,a.forEach(function(B,N){h.push(i.getMass(B)),d.push(i.nodeStrength(B)),i.degrees[N]||(i.degrees[N]=0);var O=[b[0],b[1],w];if(i.getCenter){var L=i.getCenter(B,i.degrees[N]);L&&(0,Kc.isNumber)(L[0])&&(0,Kc.isNumber)(L[1])&&(0,Kc.isNumber)(L[2])&&(O=L)}p.push(O[0]),v.push(O[1]),g.push(O[2]),(0,Kc.isNumber)(B.fx)&&(0,Kc.isNumber)(B.fy)?(m.push(B.fx||.001),y.push(B.fy||.001)):(m.push(0),y.push(0))}),x=(0,Qc.arrayToTextureData)([h,i.degrees,d,m]),S=(0,Qc.arrayToTextureData)([p,v,g,y]),E=i.workerEnabled,E?_=AX.World.create({canvas:r,engineOptions:{supportCompute:!0}}):_=AX.World.create({engineOptions:{supportCompute:!0}}),k=i.onLayoutEnd,C=[],f.forEach(function(B){C.push(B)}),M=0;M<4;M++)C.push(0);return A=_.createKernel(TX.gForceBundle).setDispatch([l,1,1]).setBinding({u_Data:f,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:x,u_NodeAttributeArray2:S,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:l,u_AveMovement:C,u_interval:i.interval}),T=_.createKernel(TX.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:l,u_AveMovement:[0,0,0,0]}),D=function(){return gD(F,void 0,void 0,function(){var B,N,O;return mD(this,function(L){switch(L.label){case 0:B=0,L.label=1;case 1:return B<s?[4,A.execute()]:[3,5];case 2:return L.sent(),T.setBinding({u_Data:A}),[4,T.execute()];case 3:L.sent(),N=Math.max(.02,i.interval-B*.002),A.setBinding({u_interval:N,u_AveMovement:T}),L.label=4;case 4:return B++,[3,1];case 5:return[4,A.getOutput()];case 6:return O=L.sent(),r?n.postMessage({type:Oft.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:O}):a.forEach(function(G,q){var K=O[4*q],V=O[4*q+1];G.x=K,G.y=V}),k&&k(),[2]}})})},[4,D()];case 1:return R.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(Aft.Base);tx.GForceGPULayout=Ift;var rx={},Dft=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(rx,"__esModule",{value:!0});rx.ComboForceLayout=void 0;var Pft=di,Or=ii(),Lft=function(t){Dft(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!n||n.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()},e.prototype.run=function(){var r=this,n=r.nodes,i=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);var a=r.center,o=r.velocityDecay,s=r.comboMap;r.previousLayouted||r.initPos(s);for(var l=function(h){var d=[];n.forEach(function(p,v){d[v]={x:0,y:0}}),r.applyCalculate(d),r.applyComboCenterForce(d),n.forEach(function(p,v){!(0,Or.isNumber)(p.x)||!(0,Or.isNumber)(p.y)||(p.x+=d[v].x*o,p.y+=d[v].y*o)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()},u=0;u<i;u++)l();var c=[0,0];n.forEach(function(h){!(0,Or.isNumber)(h.x)||!(0,Or.isNumber)(h.y)||(c[0]+=h.x,c[1]+=h.y)}),c[0]/=n.length,c[1]/=n.length;var f=[a[0]-c[0],a[1]-c[1]];n.forEach(function(h,d){!(0,Or.isNumber)(h.x)||!(0,Or.isNumber)(h.y)||(h.x+=f[0],h.y+=f[1])}),r.combos.forEach(function(h){var d=s[h.id];d&&d.empty&&(h.x=d.cx||h.x,h.y=d.cy||h.y)}),r.previousLayouted=!0},e.prototype.initVals=function(){var r=this,n=r.edges,i=r.nodes,a=r.combos,o={},s={},l={};i.forEach(function(B,N){s[B.id]=B,l[B.id]=N}),r.nodeMap=s,r.indexMap=l;var u={};a.forEach(function(B){u[B.id]=B}),r.oriComboMap=u,r.comboMap=r.getComboMap();var c=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||c,r.preventNodeOverlap=r.preventNodeOverlap||c;var f=r.collideStrength;f&&(r.comboCollideStrength=f,r.nodeCollideStrength=f),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(var h=0;h<n.length;++h){var d=(0,Or.getEdgeTerminal)(n[h],"source"),p=(0,Or.getEdgeTerminal)(n[h],"target");o[d]?o[d]++:o[d]=1,o[p]?o[p]++:o[p]=1}for(var v=[],h=0;h<n.length;++h){var d=(0,Or.getEdgeTerminal)(n[h],"source"),p=(0,Or.getEdgeTerminal)(n[h],"target");v[h]=o[d]/(o[d]+o[p])}this.bias=v;var g=r.nodeSize,m=r.nodeSpacing,y,w;if((0,Or.isNumber)(m)?w=function(){return m}:(0,Or.isFunction)(m)?w=m:w=function(){return 0},this.nodeSpacing=w,!g)y=function(B){if(B.size){if((0,Or.isArray)(B.size)){var N=B.size[0]>B.size[1]?B.size[0]:B.size[1];return N/2}if((0,Or.isObject)(B.size)){var N=B.size.width>B.size.height?B.size.width:B.size.height;return N/2}return B.size/2}return 10};else if((0,Or.isFunction)(g))y=function(B){return g(B)};else if((0,Or.isArray)(g)){var b=g[0]>g[1]?g[0]:g[1],x=b/2;y=function(B){return x}}else{var S=g/2;y=function(B){return S}}this.nodeSize=y;var E=r.comboSpacing,_;(0,Or.isNumber)(E)?_=function(){return E}:(0,Or.isFunction)(E)?_=E:_=function(){return 0},this.comboSpacing=_;var k=r.comboPadding,C;(0,Or.isNumber)(k)?C=function(){return k}:(0,Or.isArray)(k)?C=function(){return Math.max.apply(null,k)}:(0,Or.isFunction)(k)?C=k:C=function(){return 0},this.comboPadding=C;var M=this.linkDistance,A;M||(M=10),(0,Or.isNumber)(M)?A=function(B){return M}:A=M,this.linkDistance=A;var T=this.edgeStrength,D;T||(T=1),(0,Or.isNumber)(T)?D=function(B){return T}:D=T,this.edgeStrength=D;var F=this.nodeStrength,R;F||(F=30),(0,Or.isNumber)(F)?R=function(B){return F}:R=F,this.nodeStrength=R},e.prototype.initPos=function(r){var n=this,i=n.nodes;i.forEach(function(a,o){var s=a.comboId,l=r[s];s&&l?(a.x=l.cx+100/(o+1),a.y=l.cy+100/(o+1)):(a.x=100/(o+1),a.y=100/(o+1))})},e.prototype.getComboMap=function(){var r=this,n=r.nodeMap,i=r.comboTrees,a=r.oriComboMap,o={};return(i||[]).forEach(function(s){var l=[];(0,Or.traverseTreeUp)(s,function(u){if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){var c={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:r.oriComboMap[u.id].depth||0,children:[]};o[u.id]=c}var f=u.children;f&&f.forEach(function(p){if(!o[p.id]&&!n[p.id])return!0;l.push(p)});var h=o[u.id];if(h.cx=0,h.cy=0,l.length===0){h.empty=!0;var d=a[u.id];h.cx=d.x,h.cy=d.y}return l.forEach(function(p){if(h.count++,p.itemType!=="node"){var v=o[p.id];(0,Or.isNumber)(v.cx)&&(h.cx+=v.cx),(0,Or.isNumber)(v.cy)&&(h.cy+=v.cy);return}var g=n[p.id];g&&((0,Or.isNumber)(g.x)&&(h.cx+=g.x),(0,Or.isNumber)(g.y)&&(h.cy+=g.y))}),h.cx/=h.count||1,h.cy/=h.count||1,h.children=l,!0})}),o},e.prototype.applyComboCenterForce=function(r){var n=this,i=n.gravity,a=n.comboGravity||i,o=this.alpha,s=n.comboTrees,l=n.indexMap,u=n.nodeMap,c=n.comboMap;(s||[]).forEach(function(f){(0,Or.traverseTreeUp)(f,function(h){if(h.itemType==="node")return!0;var d=c[h.id];if(!d)return!0;var p=c[h.id],v=(p.depth+1)/10*.5,g=p.cx,m=p.cy;return p.cx=0,p.cy=0,p.children.forEach(function(y){if(y.itemType!=="node"){var w=c[y.id];w&&(0,Or.isNumber)(w.cx)&&(p.cx+=w.cx),w&&(0,Or.isNumber)(w.cy)&&(p.cy+=w.cy);return}var b=u[y.id],x=b.x-g||.005,S=b.y-m||.005,E=Math.sqrt(x*x+S*S),_=l[b.id],k=a*o/E*v;r[_].x-=x*k,r[_].y-=S*k,(0,Or.isNumber)(b.x)&&(p.cx+=b.x),(0,Or.isNumber)(b.y)&&(p.cy+=b.y)}),p.cx/=p.count||1,p.cy/=p.count||1,!0})})},e.prototype.applyCalculate=function(r){var n=this,i=n.comboMap,a=n.nodes,o={};a.forEach(function(l,u){a.forEach(function(c,f){if(!(u<f)){var h=l.x-c.x||.005,d=l.y-c.y||.005,p=h*h+d*d,v=Math.sqrt(p);p<1&&(p=v),o["".concat(l.id,"-").concat(c.id)]={vx:h,vy:d,vl2:p,vl:v},o["".concat(c.id,"-").concat(l.id)]={vl2:p,vl:v,vx:-h,vy:-d}}})}),n.updateComboSizes(i),n.calRepulsive(r,o),n.calAttractive(r,o);var s=n.preventComboOverlap;s&&n.comboNonOverlapping(r,i)},e.prototype.updateComboSizes=function(r){var n=this,i=n.comboTrees,a=n.nodeMap,o=n.nodeSize,s=n.comboSpacing,l=n.comboPadding;(i||[]).forEach(function(u){var c=[];(0,Or.traverseTreeUp)(u,function(f){if(f.itemType==="node")return!0;var h=r[f.id];if(!h)return!1;var d=f.children;d&&d.forEach(function(g){!r[g.id]&&!a[g.id]||c.push(g)}),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0,c.forEach(function(g){if(g.itemType!=="node")return!0;var m=a[g.id];if(!m)return!0;var y=o(m),w=m.x-y,b=m.y-y,x=m.x+y,S=m.y+y;h.minX>w&&(h.minX=w),h.minY>b&&(h.minY=b),h.maxX<x&&(h.maxX=x),h.maxY<S&&(h.maxY=S)});var p=n.oriComboMap[f.id].size||10;(0,Or.isArray)(p)&&(p=p[0]);var v=Math.max(h.maxX-h.minX,h.maxY-h.minY,p);return h.r=v/2+s(h)/2+l(h),!0})})},e.prototype.comboNonOverlapping=function(r,n){var i=this,a=i.comboTree,o=i.comboCollideStrength,s=i.indexMap,l=i.nodeMap;(0,Or.traverseTreeUp)(a,function(u){if(!n[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")return!1;var c=u.children;return c&&c.length>1&&c.forEach(function(f,h){if(f.itemType==="node")return!1;var d=n[f.id];d&&c.forEach(function(p,v){if(h<=v||p.itemType==="node")return!1;var g=n[p.id];if(!g)return!1;var m=d.cx-g.cx||.005,y=d.cy-g.cy||.005,w=m*m+y*y,b=d.r||1,x=g.r||1,S=b+x,E=x*x,_=b*b;if(w<S*S){var k=f.children;if(!k||k.length===0)return!1;var C=p.children;if(!C||C.length===0)return!1;var M=Math.sqrt(w),A=(S-M)/M*o,T=m*A,D=y*A,F=E/(_+E),R=1-F;k.forEach(function(B){if(B.itemType!=="node")return!1;if(l[B.id]){var N=s[B.id];C.forEach(function(O){if(O.itemType!=="node"||!l[O.id])return!1;var L=s[O.id];r[N].x+=T*F,r[N].y+=D*F,r[L].x-=T*R,r[L].y-=D*R})}})}})}),!0})},e.prototype.calRepulsive=function(r,n){var i=this,a=i.nodes,o=i.width*i.optimizeRangeFactor,s=i.nodeStrength,l=i.alpha,u=i.nodeCollideStrength,c=i.preventNodeOverlap,f=i.nodeSize,h=i.nodeSpacing,d=i.depthRepulsiveForceScale,p=i.center;a.forEach(function(v,g){if(!(!v.x||!v.y)){if(p){var m=i.gravity,y=v.x-p[0]||.005,w=v.y-p[1]||.005,b=Math.sqrt(y*y+w*w);r[g].x-=y*m*l/b,r[g].y-=w*m*l/b}a.forEach(function(x,S){if(g!==S&&!(!x.x||!x.y)){var E=n["".concat(v.id,"-").concat(x.id)],_=E.vl2,k=E.vl;if(!(k>o)){var C=n["".concat(v.id,"-").concat(x.id)],M=C.vx,A=C.vy,T=Math.log(Math.abs(x.depth-v.depth)/10)+1||1;T=T<1?1:T,x.comboId!==v.comboId&&(T+=1);var D=T?Math.pow(d,T):1,F=s(x)*l/_*D;if(r[g].x+=M*F,r[g].y+=A*F,g<S&&c){var R=f(v)+h(v)||1,B=f(x)+h(x)||1,N=R+B;if(_<N*N){var O=(N-k)/k*u,L=B*B,G=L/(R*R+L),q=M*O,K=A*O;r[g].x+=q*G,r[g].y+=K*G,G=1-G,r[S].x-=q*G,r[S].y-=K*G}}}}})}})},e.prototype.calAttractive=function(r,n){var i=this,a=i.edges,o=i.linkDistance,s=i.alpha,l=i.edgeStrength,u=i.bias,c=i.depthAttractiveForceScale;a.forEach(function(f,h){var d=(0,Or.getEdgeTerminal)(f,"source"),p=(0,Or.getEdgeTerminal)(f,"target");if(!(!d||!p||d===p)){var v=i.indexMap[d],g=i.indexMap[p],m=i.nodeMap[d],y=i.nodeMap[p];if(!(!m||!y)){var w=m.depth===y.depth?0:Math.log(Math.abs(m.depth-y.depth)/10);m.comboId===y.comboId&&(w=w/2);var b=w?Math.pow(c,w):1;if(m.comboId!==y.comboId&&b===1?b=c/2:m.comboId===y.comboId&&(b=2),!(!(0,Or.isNumber)(y.x)||!(0,Or.isNumber)(m.x)||!(0,Or.isNumber)(y.y)||!(0,Or.isNumber)(m.y))){var x=n["".concat(p,"-").concat(d)],S=x.vl,E=x.vx,_=x.vy,k=(S-o(f))/S*s*l(f)*b,C=E*k,M=_*k,A=u[h];r[g].x-=C*A,r[g].y-=M*A,r[v].x+=C*(1-A),r[v].y+=M*(1-A)}}}})},e.prototype.getType=function(){return"comboForce"},e}(Pft.Base);rx.ComboForceLayout=Lft;var S1={},OX;function Rhe(){if(OX)return S1;OX=1;var t=Oe&&Oe.__extends||function(){var s=function(l,u){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");s(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),e=Oe&&Oe.__assign||function(){return e=Object.assign||function(s){for(var l,u=1,c=arguments.length;u<c;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])}return s},e.apply(this,arguments)};Object.defineProperty(S1,"__esModule",{value:!0}),S1.ComboCombinedLayout=void 0;var r=If,n=di,i=ii(),a=Uhe(),o=function(s){t(l,s);function l(u){var c=s.call(this)||this;return c.center=[0,0],c.nodes=[],c.edges=[],c.combos=[],c.comboEdges=[],c.comboPadding=10,c.comboTrees=[],c.updateCfg(u),c}return l.prototype.getDefaultCfg=function(){return{}},l.prototype.execute=function(){var u=this,c=u.nodes,f=u.center;if(!c||c.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}if(c.length===1){c[0].x=f[0],c[0].y=f[1],u.onLayoutEnd&&u.onLayoutEnd();return}u.initVals(),u.run(),u.onLayoutEnd&&u.onLayoutEnd()},l.prototype.run=function(){var u,c=this,f=c.nodes,h=c.edges,d=c.combos,p=c.comboEdges,v=c.center,g={};f.forEach(function(F){g[F.id]=F});var m={};d.forEach(function(F){m[F.id]=F});var y=c.getInnerGraphs(g),w=[],b=[],x={},S=!0;this.comboTrees.forEach(function(F){var R=y[F.id];if(R){var B=e(e({},F),{x:R.x||m[F.id].x,y:R.y||m[F.id].y,fx:R.fx||m[F.id].fx,fy:R.fy||m[F.id].fy,mass:R.mass||m[F.id].mass,size:R.size});b.push(B),!isNaN(B.x)&&B.x!==0&&!isNaN(B.y)&&B.y!==0?S=!1:(B.x=Math.random()*100,B.y=Math.random()*100),w.push(F.id),(0,i.traverseTreeUp)(F,function(N){return N.id!==F.id&&(x[N.id]=F.id),!0})}}),f.forEach(function(F){if(!(F.comboId&&m[F.comboId])){var R=e({},F);b.push(R),!isNaN(R.x)&&R.x!==0&&!isNaN(R.y)&&R.y!==0?S=!1:(R.x=Math.random()*100,R.y=Math.random()*100),w.push(F.id)}});var E=[];if(h.concat(p).forEach(function(F){var R=x[F.source]||F.source,B=x[F.target]||F.target;R!==B&&w.includes(R)&&w.includes(B)&&E.push({source:R,target:B})}),b!=null&&b.length){if(b.length===1)b[0].x=v[0],b[0].y=v[1];else{var _={nodes:b,edges:E},k=this.outerLayout||new a.GForceLayout({gravity:1,factor:4,linkDistance:function(F,R,B){var N,O,L=((((N=R.size)===null||N===void 0?void 0:N[0])||30)+(((O=B.size)===null||O===void 0?void 0:O[0])||30))/2;return Math.min(L*1.5,700)}}),C=(u=k.getType)===null||u===void 0?void 0:u.call(k);if(k.updateCfg({center:v,kg:5,preventOverlap:!0,animate:!1}),S&&r.FORCE_LAYOUT_TYPE_MAP[C]){var M=b.length<100?new a.MDSLayout:new a.GridLayout;M.layout(_)}k.layout(_)}b.forEach(function(F){var R=y[F.id];if(!R){var B=g[F.id];B&&(B.x=F.x,B.y=F.y);return}R.visited=!0,R.x=F.x,R.y=F.y,R.nodes.forEach(function(N){N.x+=F.x,N.y+=F.y})})}for(var A=Object.keys(y),T=function(F){var R=A[F],B=y[R];if(!B)return"continue";B.nodes.forEach(function(N){B.visited||(N.x+=B.x||0,N.y+=B.y||0),g[N.id]&&(g[N.id].x=N.x,g[N.id].y=N.y)}),m[R]&&(m[R].x=B.x,m[R].y=B.y)},D=A.length-1;D>=0;D--)T(D);return{nodes:f,edges:h,combos:d,comboEdges:p}},l.prototype.getInnerGraphs=function(u){var c=this,f=c.comboTrees,h=c.nodeSize,d=c.edges,p=c.comboPadding,v=c.spacing,g={},m=this.innerLayout||new a.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=v,(f||[]).forEach(function(y){(0,i.traverseTreeUp)(y,function(w){var b,x=(p==null?void 0:p(w))||10;if((0,i.isArray)(x)&&(x=Math.max.apply(Math,x)),!((b=w.children)===null||b===void 0)&&b.length){var E=w.children.map(function(O){if(O.itemType==="combo")return g[O.id];var L=u[O.id]||{};return e(e({},L),O)}),_=E.map(function(O){return O.id}),k={nodes:E,edges:d.filter(function(O){return _.includes(O.source)&&_.includes(O.target)})},C=1/0;E.forEach(function(O){var L;O.size||(O.size=((L=g[O.id])===null||L===void 0?void 0:L.size)||(h==null?void 0:h(O))||[30,30]),(0,i.isNumber)(O.size)&&(O.size=[O.size,O.size]),C>O.size[0]&&(C=O.size[0]),C>O.size[1]&&(C=O.size[1])}),m.layout(k);var M=(0,i.getLayoutBBox)(E),A=M.minX,T=M.minY,D=M.maxX,F=M.maxY,R={x:(D+A)/2,y:(F+T)/2};k.nodes.forEach(function(O){O.x-=R.x,O.y-=R.y});var B=Math.max(D-A,C)+x*2,N=Math.max(F-T,C)+x*2;g[w.id]={id:w.id,nodes:E,size:[B,N]}}else if(w.itemType==="combo"){var S=x?[x*2,x*2]:[30,30];g[w.id]={id:w.id,nodes:[],size:S}}return!0})}),g},l.prototype.initVals=function(){var u=this,c=u.nodeSize,f=u.spacing,h,d;if((0,i.isNumber)(f)?d=function(){return f}:(0,i.isFunction)(f)?d=f:d=function(){return 0},this.spacing=d,!c)h=function(w){var b=d(w);if(w.size){if((0,i.isArray)(w.size)){var x=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(x+b)/2}if((0,i.isObject)(w.size)){var x=w.size.width>w.size.height?w.size.width:w.size.height;return(x+b)/2}return(w.size+b)/2}return 10+b/2};else if((0,i.isFunction)(c))h=function(w){var b=c(w),x=d(w);if((0,i.isArray)(w.size)){var S=w.size[0]>w.size[1]?w.size[0]:w.size[1];return(S+x)/2}return((b||10)+x)/2};else if((0,i.isArray)(c)){var p=c[0]>c[1]?c[0]:c[1],v=p/2;h=function(w){return v+d(w)/2}}else{var g=c/2;h=function(w){return g+d(w)/2}}this.nodeSize=h;var m=u.comboPadding,y;(0,i.isNumber)(m)?y=function(){return m}:(0,i.isArray)(m)?y=function(){return Math.max.apply(null,m)}:(0,i.isFunction)(m)?y=m:y=function(){return 0},this.comboPadding=y},l.prototype.getType=function(){return"comboCombined"},l}(n.Base);return S1.ComboCombinedLayout=o,S1}var nx={},uB={};Object.defineProperty(uB,"__esModule",{value:!0});var Rft=function(){function t(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return t.prototype.distanceTo=function(e){var r=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(r,n)},t.prototype.setPos=function(e,r){this.rx=e,this.ry=r},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(e){var r=e.rx-this.rx,n=e.ry-this.ry,i=Math.hypot(r,n);i=i<1e-4?1e-4:i;var a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*r/i,this.fy+=a*n/i},t.prototype.in=function(e){return e.contains(this.rx,this.ry)},t.prototype.add=function(e){var r=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/r,i=(this.ry*this.mass+e.ry*e.mass)/r,a=this.degree+e.degree,o={rx:n,ry:i,mass:r,degree:a};return new t(o)},t}();uB.default=Rft;var cB={};Object.defineProperty(cB,"__esModule",{value:!0});var Nft=function(){function t(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(e,r){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&r<=this.ymid+n&&r>=this.ymid-n},t.prototype.NW=function(){var e=this.xmid-this.length/4,r=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.NE=function(){var e=this.xmid+this.length/4,r=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.SW=function(){var e=this.xmid-this.length/4,r=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t.prototype.SE=function(){var e=this.xmid+this.length/4,r=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:r,length:n},a=new t(i);return a},t}();cB.default=Nft;var fB={};Object.defineProperty(fB,"__esModule",{value:!0});var Fft=function(){function t(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}return t.prototype.insert=function(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))},t.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},t.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},t.prototype.updateForce=function(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{var r=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);r/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}},t}();fB.default=Fft;var Bft=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hB=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nx,"__esModule",{value:!0});nx.ForceAtlas2Layout=void 0;var $ft=di,Zc=ii(),zft=hB(uB),jft=hB(cB),Gft=hB(fB),Uft=function(t){Bft(e,t);function e(r){var n=t.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.onLayoutEnd,a=r.prune,o=r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);for(var s=[],l=n.length,u=0;u<l;u+=1){var c=n[u],f=10,h=10;(0,Zc.isNumber)(c.size)&&(f=c.size,h=c.size),(0,Zc.isArray)(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(h=c.size[1])):(0,Zc.isObject)(c.size)&&(f=c.size.width,h=c.size.height),r.getWidth&&!isNaN(r.getWidth(c))&&(h=r.getWidth(c)),r.getHeight&&!isNaN(r.getHeight(c))&&(f=r.getHeight(c));var d=Math.max(f,h);s.push(d)}r.barnesHut===void 0&&l>250&&(r.barnesHut=!0),r.prune===void 0&&l>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(o=250,l<=200&&l>100?o=1e3:l>200&&(o=1200),this.maxIteration=o):this.maxIteration===0&&a&&(o=100,l<=200&&l>100?o=500:l>200&&(o=950),this.maxIteration=o),r.kr||(r.kr=50,l>100&&l<=500?r.kr=20:l>500&&(r.kr=1)),r.kg||(r.kg=20,l>100&&l<=500?r.kg=10:l>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(s),i()},e.prototype.updateNodesByForces=function(r){for(var n=this,i=n.edges,a=n.maxIteration,o=n.nodes,s=i.filter(function(E){var _=(0,Zc.getEdgeTerminal)(E,"source"),k=(0,Zc.getEdgeTerminal)(E,"target");return _!==k}),l=o.length,u=s.length,c=[],f={},h={},d=[],p=0;p<l;p+=1)f[o[p].id]=p,c[p]=0,(o[p].x===void 0||isNaN(o[p].x))&&(o[p].x=Math.random()*1e3),(o[p].y===void 0||isNaN(o[p].y))&&(o[p].y=Math.random()*1e3),d.push({x:o[p].x,y:o[p].y});for(var p=0;p<u;p+=1){for(var v=void 0,g=void 0,m=0,y=0,w=0;w<l;w+=1){var b=(0,Zc.getEdgeTerminal)(s[p],"source"),x=(0,Zc.getEdgeTerminal)(s[p],"target");o[w].id===b?(v=o[w],m=w):o[w].id===x&&(g=o[w],y=w),h[p]={sourceIdx:m,targetIdx:y}}v&&(c[f[v.id]]+=1),g&&(c[f[g.id]]+=1)}var S=a;if(o=this.iterate(S,f,h,u,c,r),n.prune){for(var w=0;w<u;w+=1)c[h[w].sourceIdx]<=1?(o[h[w].sourceIdx].x=o[h[w].targetIdx].x,o[h[w].sourceIdx].y=o[h[w].targetIdx].y):c[h[w].targetIdx]<=1&&(o[h[w].targetIdx].x=o[h[w].sourceIdx].x,o[h[w].targetIdx].y=o[h[w].sourceIdx].y);n.prune=!1,n.barnesHut=!1,S=100,o=this.iterate(S,f,h,u,c,r)}return o},e.prototype.iterate=function(r,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.kr,f=l.preventOverlap,h=l.barnesHut,d=u.length,p=0,v=100,g=r,m=50,y=[],w=[],b=[],x=0;x<d;x+=1)if(y[2*x]=0,y[2*x+1]=0,h){var S={id:x,rx:u[x].x,ry:u[x].y,mass:1,g:c,degree:o[x]};b[x]=new zft.default(S)}for(;g>0;){for(var x=0;x<d;x+=1)w[2*x]=y[2*x],w[2*x+1]=y[2*x+1],y[2*x]=0,y[2*x+1]=0;y=this.getAttrForces(g,m,a,n,i,o,s,y),h&&(f&&g>m||!f)?y=this.getOptRepGraForces(y,b,o):y=this.getRepGraForces(g,m,y,v,s,o);var E=this.updatePos(y,w,p,o);u=E.nodes,p=E.sg,g--,l.tick&&l.tick()}return u},e.prototype.getAttrForces=function(r,n,i,a,o,s,l,u){for(var c=this,f=c.nodes,h=c.preventOverlap,d=c.dissuadeHubs,p=c.mode,v=c.prune,g=0;g<i;g+=1){var m=f[o[g].sourceIdx],y=o[g].sourceIdx,w=f[o[g].targetIdx],b=o[g].targetIdx;if(!(v&&(s[y]<=1||s[b]<=1))){var x=[w.x-m.x,w.y-m.y],S=Math.hypot(x[0],x[1]);S=S<1e-4?1e-4:S,x[0]=x[0]/S,x[1]=x[1]/S,h&&r<n&&(S=S-l[y]-l[b]);var E=S,_=E;p==="linlog"&&(E=Math.log(1+S),_=E),d&&(E=S/s[y],_=S/s[b]),h&&r<n&&S<=0?(E=0,_=0):h&&r<n&&S>0&&(E=S,_=S),u[2*a[m.id]]+=E*x[0],u[2*a[w.id]]-=_*x[0],u[2*a[m.id]+1]+=E*x[1],u[2*a[w.id]+1]-=_*x[1]}}return u},e.prototype.getRepGraForces=function(r,n,i,a,o,s){for(var l=this,u=l.nodes,c=l.preventOverlap,f=l.kr,h=l.kg,d=l.center,p=l.prune,v=u.length,g=0;g<v;g+=1){for(var m=g+1;m<v;m+=1)if(!(p&&(s[g]<=1||s[m]<=1))){var y=[u[m].x-u[g].x,u[m].y-u[g].y],w=Math.hypot(y[0],y[1]);w=w<1e-4?1e-4:w,y[0]=y[0]/w,y[1]=y[1]/w,c&&r<n&&(w=w-o[g]-o[m]);var b=f*(s[g]+1)*(s[m]+1)/w;c&&r<n&&w<0?b=a*(s[g]+1)*(s[m]+1):c&&r<n&&w===0?b=0:c&&r<n&&w>0&&(b=f*(s[g]+1)*(s[m]+1)/w),i[2*g]-=b*y[0],i[2*m]+=b*y[0],i[2*g+1]-=b*y[1],i[2*m+1]+=b*y[1]}var x=[u[g].x-d[0],u[g].y-d[1]],S=Math.hypot(x[0],x[1]);x[0]=x[0]/S,x[1]=x[1]/S;var E=h*(s[g]+1);i[2*g]-=E*x[0],i[2*g+1]-=E*x[1]}return i},e.prototype.getOptRepGraForces=function(r,n,i){for(var a=this,o=a.nodes,s=a.kg,l=a.center,u=a.prune,c=o.length,f=9e10,h=-9e10,d=9e10,p=-9e10,v=0;v<c;v+=1)u&&i[v]<=1||(n[v].setPos(o[v].x,o[v].y),o[v].x>=h&&(h=o[v].x),o[v].x<=f&&(f=o[v].x),o[v].y>=p&&(p=o[v].y),o[v].y<=d&&(d=o[v].y));for(var g=Math.max(h-f,p-d),m={xmid:(h+f)/2,ymid:(p+d)/2,length:g,massCenter:l,mass:c},y=new jft.default(m),w=new Gft.default(y),v=0;v<c;v+=1)u&&i[v]<=1||n[v].in(y)&&w.insert(n[v]);for(var v=0;v<c;v+=1)if(!(u&&i[v]<=1)){n[v].resetForce(),w.updateForce(n[v]),r[2*v]-=n[v].fx,r[2*v+1]-=n[v].fy;var b=[o[v].x-l[0],o[v].y-l[1]],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;var S=s*(i[v]+1);r[2*v]-=S*b[0],r[2*v+1]-=S*b[1]}return r},e.prototype.updatePos=function(r,n,i,a){for(var o=this,s=o.nodes,l=o.ks,u=o.tao,c=o.prune,f=o.ksmax,h=s.length,d=[],p=[],v=0,g=0,m=0;m<h;m+=1)if(!(c&&a[m]<=1)){var y=[r[2*m]-n[2*m],r[2*m+1]-n[2*m+1]],w=Math.hypot(y[0],y[1]),b=[r[2*m]+n[2*m],r[2*m+1]+n[2*m+1]],x=Math.hypot(b[0],b[1]);d[m]=w,p[m]=x/2,v+=(a[m]+1)*d[m],g+=(a[m]+1)*p[m]}var S=i;i=u*g/v,S!==0&&(i=i>1.5*S?1.5*S:i);for(var m=0;m<h;m+=1)if(!(c&&a[m]<=1)&&!((0,Zc.isNumber)(s[m].fx)&&(0,Zc.isNumber)(s[m].fy))){var E=l*i/(1+i*Math.sqrt(d[m])),_=Math.hypot(r[2*m],r[2*m+1]);_=_<1e-4?1e-4:_;var k=f/_;E=E>k?k:E;var C=E*r[2*m],M=E*r[2*m+1];s[m].x+=C,s[m].y+=M}return{nodes:s,sg:i}},e}($ft.Base);nx.ForceAtlas2Layout=Uft;var ix={},dB={},pB={},vB={},E0=Oe&&Oe.__assign||function(){return E0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},E0.apply(this,arguments)};Object.defineProperty(vB,"__esModule",{value:!0});var Wft=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,r,n){this.cells=[],this.CELL_W=n.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(r/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(r,2);for(var i=0;i<this.columnNum;i++){for(var a=[],o=0;o<this.rowNum;o++){var s={dx:i,dy:o,x:i*this.CELL_W,y:o*this.CELL_H,occupied:!1};a.push(s)}this.cells.push(a)}},t.prototype.findGridByNodeId=function(e){for(var r,n,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)if(this.cells[i][a].node&&((n=(r=this.cells[i][a])===null||r===void 0?void 0:r.node)===null||n===void 0?void 0:n.id)===e)return{column:i,row:a};return null},t.prototype.sqdist=function(e,r){return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)},t.prototype.occupyNearest=function(e){for(var r=t.MIN_DIST,n,i=null,a=0;a<this.columnNum;a++)for(var o=0;o<this.rowNum;o++)!this.cells[a][o].occupied&&(n=this.sqdist(e,this.cells[a][o]))<r&&(r=n,i=this.cells[a][o]);return i&&(i.occupied=!0),i},t.prototype.insertColumn=function(e,r){if(!(r<=0)){for(var n=0;n<r;n++){this.cells[n+this.columnNum]=[];for(var i=0;i<this.rowNum;i++)this.cells[n+this.columnNum][i]={dx:n,dy:i,x:n*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null}}for(var n=this.columnNum-1;n>e;n--)for(var i=0;i<this.rowNum;i++)this.cells[n+r][i]=E0(E0({},this.cells[n][i]),{x:(n+r)*this.CELL_W,y:i*this.CELL_H}),this.cells[n][i]={x:n*this.CELL_W,y:i*this.CELL_H,occupied:!0,node:null};for(var i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=e&&(this.additionColumn[i]+=r);for(var n=0;n<r;n++)this.additionColumn.push(e+n+1);this.columnNum+=r}},t.prototype.insertRow=function(e,r){if(!(r<=0)){for(var n=0;n<r;n++)for(var i=0;i<this.columnNum;i++)this.cells[i][n+this.rowNum]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var i=0;i<this.columnNum;i++)for(var n=this.rowNum-1;n>e;n--)this.cells[i][n+r]=E0(E0({},this.cells[i][n]),{dx:i,dy:n+r,x:i*this.CELL_W,y:(n+r)*this.CELL_H}),this.cells[i][n]={dx:i,dy:n,x:i*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=r);for(var i=0;i<r;i++)this.additionRow.push(e+i+1);this.rowNum+=r}},t.prototype.getNodes=function(){for(var e=[],r=0;r<this.columnNum;r++)for(var n=0;n<this.rowNum;n++)this.cells[r][n].node&&e.push(this.cells[r][n]);return e},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();vB.default=Wft;var Vft=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pB,"__esModule",{value:!0});var Hft=Vft(vB);function Xft(t,e){if(!t.nodes||t.nodes.length===0)return t;var r=e.width,n=e.height,i=e.nodeMinGap,a=1e4,o=1e4;t.nodes.forEach(function(y){var w=y.size[0]||50,b=y.size[1]||50;a=Math.min(w,a),o=Math.min(b,o)});var s=new Hft.default;s.init(r,n,{CELL_H:o,CELL_W:a}),t.nodes.forEach(function(y){var w=s.occupyNearest(y);w&&(w.node={id:y.id,size:y.size},y.x=w.x,y.y=w.y,y.dx=w.dx,y.dy=w.dy)});for(var l=0;l<t.nodes.length;l++){var u=t.nodes[l],c=s.findGridByNodeId(u.id);if(!c)throw new Error("can not find node cell");var f=c.column,h=c.row;if(u.size[0]+i>a){for(var d=Math.ceil((u.size[0]+i)/a)-1,p=d,v=0;v<d;v++){var g=s.additionColumn.indexOf(f+v+1)>-1;if(g&&!s.cells[f+v+1][h].node)p--;else break}s.insertColumn(f,p)}if(u.size[1]+i>o){for(var d=Math.ceil((u.size[1]+i)/o)-1,p=d,v=0;v<d;v++){var g=s.additionRow.indexOf(h+v+1)>-1;if(g&&!s.cells[f][h+v+1].node)p--;else break}s.insertRow(h,p)}}for(var l=0;l<s.columnNum;l++)for(var m=function(w){var b=s.cells[l][w];if(b.node){var x=t.nodes.find(function(S){var E;return S.id===((E=b==null?void 0:b.node)===null||E===void 0?void 0:E.id)});x&&(x.x=b.x+x.size[0]/2,x.y=b.y+x.size[1]/2)}},v=0;v<s.rowNum;v++)m(v)}pB.default=Xft;var gB={};Object.defineProperty(gB,"__esModule",{value:!0});var Nhe=1200,Fhe=800,VE=1e7,E1=10,Bhe=3.141592653589793,yD=1.5707963267948966,Yft=Bhe*.375,qft=Bhe*.625,l3=new Map,Kft=10,Qft=10,wD=.8,IX=.1,Zft=.5;function Jft(t,e,r){var n=t.x-t.size[0]/2,i=t.y-t.size[1]/2,a=t.x+t.size[0]/2,o=t.y+t.size[1]/2,s=e.x-e.size[0]/2,l=e.y-e.size[1]/2,u=e.x+e.size[0]/2,c=e.y+e.size[1]/2,f=t.x,h=t.y,d=e.x,p=e.y,v=d-f,g=Math.atan2(v,p-h),m=0,y=0,w=0,b=0;g>yD?(y=i-c,m=s-a,w=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)),b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):0<g&&g<=yD?(y=l-o,m=s-a,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):g<-yD?(y=i-c,m=-(u-n),y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m?(m/Math.sin(g)).toFixed(2):y.toFixed(2))):(y=l-o,Math.abs(v)>(a-n)/2?m=n-u:m=v,y>m?w=b=parseFloat(y?(y/Math.cos(g)).toFixed(2):m.toFixed(2)):w=b=parseFloat(m&&g!==0?(m/Math.sin(g)).toFixed(2):y.toFixed(2)));var x=parseFloat(g.toFixed(2)),S=r;return r&&(S=Yft<x&&x<qft),{distance:Math.abs(w<b?w:b),isHoriz:S}}function $he(t,e){var r=l3.get(t.id)||[],n=r.find(function(R){return R.source===e.id||R.target===e.id}),i=t.size[0]*t.size[1],a=e.size[0]*e.size[1],o=i>a?e:t,s=i>a?t:e,l=o.x-o.size[0]/2,u=o.y-o.size[1]/2,c=o.x+o.size[0]/2,f=o.y+o.size[1]/2,h=s.x-s.size[0]/2,d=s.y-s.size[1]/2,p=s.x+s.size[0]/2,v=s.y+s.size[1]/2,g=o.x,m=o.y,y=s.x,w=s.y,b=c>=h&&p>=l&&f>=d&&v>=u,x=0,S=0;if(b){S=Math.sqrt(Math.pow(y-g,2)+Math.pow(w-m,2));var E=l>h?l:h,_=u>d?u:d,k=c<p?c:p,C=f<v?f:v,M=k-E,A=C-_,T=M*A;S===0&&(S=1e-7),x=E1*1/S*100+T,x*=VE}else{var D=!1,F=Jft(o,s,D);S=F.distance,D=F.isHoriz,S<=E1?S!==0?n?x+=E1+VE*1/S:x+=E1+VE*E1/S:x+=VE:(x+=S,n&&(x+=S*S))}return x}function zhe(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];(n.x<0||n.y<0||n.x>Nhe||n.y>Fhe)&&(e+=1e12);for(var i=r+1;i<t.length;i++)e+=$he(n,t[i])}return e}function eht(t,e,r,n){var i=new Map;r.forEach(function(g,m){i.set(g.id,g)});var a=n.filter(function(g){return g.source===t.id||g.target===t.id})||[],o=[];a.forEach(function(g){var m=g.source===t.id?g.target:g.source,y=i.get(m);y&&o.push(y)});for(var s=!0,l=0;l<o.length;l++){var u=o[l],c=Math.atan((t.y-u.y)/(u.x-t.y))*180,f=Math.atan((e.y-u.y)/(u.x-e.y))*180,h=c<30||c>150,d=f<30||f>150,p=c>70&&c<110,v=f>70&&f<110;if(h&&!d||c*f<0){s=!1;break}else if(p&&!v||c*f<0){s=!1;break}else if((u.x-t.x)*(u.x-e.x)<0){s=!1;break}else if((u.y-t.y)*(u.y-e.y)<0){s=!1;break}}return s}function tht(t,e){for(var r=!1,n=1,i=Kft*n,a=Qft*n,o=[i,-i,0,0],s=[0,0,a,-a],l=0;l<t.length;++l)for(var u=t[l],c=DX(u,t),f=0;f<o.length;f++){var h=eht(u,{x:u.x+o[f],y:u.y+s[f]},t,e);if(h){u.x+=o[f],u.y+=s[f];var d=DX(u,t),p=Math.random();d<c||p<wD&&p>IX?(c=d,r=!0):(u.x-=o[f],u.y-=s[f])}}return wD>IX&&(wD*=Zft),r?zhe(t):0}function DX(t,e){var r=0;(t.x<0||t.y<0||t.x+t.size[0]+20>Nhe||t.y+t.size[1]+20>Fhe)&&(r+=1e12);for(var n=0;n<e.length;++n)t.id!==e[n].id&&(r+=$he(t,e[n]));return r}function rht(t,e){if(t.length===0)return{nodes:t,edges:e};t.forEach(function(u){var c=e.filter(function(f){return f.source===u.id||f.target===u.id});l3.set(u,c)}),t.sort(function(u,c){var f,h;return((f=l3.get(u.id))===null||f===void 0?void 0:f.length)-((h=l3.get(c.id))===null||h===void 0?void 0:h.length)});for(var r=zhe(t),n=20,i=1,a=0,o=50,s=0;n>0&&(s++,!(s>=o));){var l=tht(t,e);l!==0&&(a=l),i=a-r,r=a,i===0?--n:n=20}return t.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:t,edges:e}}gB.default=rht;var W4=Oe&&Oe.__assign||function(){return W4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},W4.apply(this,arguments)},nht=Oe&&Oe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iht=Oe&&Oe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),aht=Oe&&Oe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nht(e,t,r);return iht(e,t),e},jhe=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dB,"__esModule",{value:!0});var Vg=aht(uF),oht=jhe(pB),sht=jhe(gB),lht=dy;function uht(t,e){var r=t.nodes,n=t.edges,i=e.width,a=e.height;if(!(r!=null&&r.length))return Promise.resolve();var o=[];r.forEach(function(p){var v=n.filter(function(m){return m.source===p.id||m.target===p.id});if(v.length>1){var g=W4({},p);delete g.size,o.push(g)}});var s=[];n.forEach(function(p){var v=o.find(function(m){return m.id===p.source}),g=o.find(function(m){return m.id===p.target});v&&g&&s.push(p)});var l=new lht.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),u=l.layout({nodes:o,edges:s}).nodes;r.forEach(function(p){var v=(u||[]).find(function(g){return g.id===p.id});p.x=(v==null?void 0:v.x)||i/2,p.y=(v==null?void 0:v.y)||a/2});var c=JSON.parse(JSON.stringify(r)),f=JSON.parse(JSON.stringify(n)),h=Vg.forceSimulation().nodes(c).force("link",Vg.forceLink(f).id(function(p){return p.id}).distance(function(p){var v=s.find(function(g){return g.source===p.source&&g.target===p.target});return v?30:20})).force("charge",Vg.forceManyBody()).force("center",Vg.forceCenter(i/2,a/2)).force("x",Vg.forceX(i/2)).force("y",Vg.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),d=new Promise(function(p){h.on("end",function(){r.forEach(function(x){var S=c.find(function(E){return E.id===x.id});S&&(x.x=S.x,x.y=S.y)});var v=Math.min.apply(Math,r.map(function(x){return x.x})),g=Math.max.apply(Math,r.map(function(x){return x.x})),m=Math.min.apply(Math,r.map(function(x){return x.y})),y=Math.max.apply(Math,r.map(function(x){return x.y})),w=i/(g-v),b=a/(y-m);r.forEach(function(x){x.x!==void 0&&w<1&&(x.x=(x.x-v)*w),x.y!==void 0&&b<1&&(x.y=(x.y-m)*b)}),r.forEach(function(x){x.sizeTemp=x.size,x.size=[10,10]}),(0,sht.default)(r,n),r.forEach(function(x){x.size=x.sizeTemp||[],delete x.sizeTemp}),(0,oht.default)({nodes:r,edges:n},e),p()})});return d}dB.default=uht;var cht=Oe&&Oe.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fht=Oe&&Oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ix,"__esModule",{value:!0});ix.ERLayout=void 0;var hht=di,dht=fht(dB),pht=function(t){cht(e,t);function e(r){var n=t.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},r&&n.updateCfg(r),n}return e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var r=this,n=r.nodes,i=r.edges;return n==null||n.forEach(function(a){a.size||(a.size=[50,50])}),(0,dht.default)({nodes:n,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){r.onLayoutEnd&&r.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(hht.Base);ix.ERLayout=pht;var yp={},PX;function vht(){if(PX)return yp;PX=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.Layouts=yp.Layout=void 0;var t=bf,e=$b,r=zb,n=Gb,i=jb,a=oF,o=Ub,s=dy,l=nB,u=Qb,c=Zb,f=Jb,h=ex,d=tx,p=rx,v=Rhe(),g=nx,m=ix,y=Hb,w=ii(),b=function(){function x(S){var E=(0,t.getLayoutByName)(S.type);this.layoutInstance=new E(S)}return x.prototype.layout=function(S){return this.layoutInstance.layout(S)},x.prototype.updateCfg=function(S){this.layoutInstance.updateCfg(S)},x.prototype.init=function(S){this.correctLayers(S.nodes),this.layoutInstance.init(S)},x.prototype.correctLayers=function(S){if(S!=null&&S.length){var E=1/0,_=[];if(S.forEach(function(C){(0,w.isString)(C.layer)&&(C.layer=parseInt(C.layer,10)),!(C.layer===void 0||isNaN(C.layer))&&(_.push(C),C.layer<E&&(E=C.layer))}),E<=0){var k=Math.abs(E)+1;_.forEach(function(C){return C.layer+=k})}}},x.prototype.execute=function(){this.layoutInstance.execute()},x.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},x.prototype.destroy=function(){return this.layoutInstance.destroy()},x}();return yp.Layout=b,yp.Layouts={force:a.ForceLayout,fruchterman:f.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:i.GForceLayout,force2:n.Force2Layout,dagre:s.DagreLayout,dagreCompound:y.DagreCompoundLayout,circular:o.CircularLayout,radial:l.RadialLayout,concentric:u.ConcentricLayout,grid:e.GridLayout,mds:c.MDSLayout,comboForce:p.ComboForceLayout,comboCombined:v.ComboCombinedLayout,random:r.RandomLayout,"gForce-gpu":d.GForceGPULayout,"fruchterman-gpu":h.FruchtermanGPULayout,er:m.ERLayout},yp}var Ghe={};Object.defineProperty(Ghe,"__esModule",{value:!0});var LX;function Uhe(){return LX||(LX=1,function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(S,E,_,k){k===void 0&&(k=_);var C=Object.getOwnPropertyDescriptor(E,_);(!C||("get"in C?!E.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return E[_]}}),Object.defineProperty(S,k,C)}:function(S,E,_,k){k===void 0&&(k=_),S[k]=E[_]}),r=Oe&&Oe.__exportStar||function(S,E){for(var _ in S)_!=="default"&&!Object.prototype.hasOwnProperty.call(E,_)&&e(E,S,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=t.ForceAtlas2Layout=t.ComboCombinedLayout=t.ComboForceLayout=t.GForceGPULayout=t.FruchtermanGPULayout=t.FruchtermanLayout=t.MDSLayout=t.ConcentricLayout=t.RadialLayout=t.DagreCompoundLayout=t.DagreLayout=t.CircularLayout=t.ForceLayout=t.Force2Layout=t.GForceLayout=t.RandomLayout=t.GridLayout=t.Layouts=t.Layout=void 0;var n=$b;Object.defineProperty(t,"GridLayout",{enumerable:!0,get:function(){return n.GridLayout}});var i=zb;Object.defineProperty(t,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var a=jb;Object.defineProperty(t,"GForceLayout",{enumerable:!0,get:function(){return a.GForceLayout}});var o=Gb;Object.defineProperty(t,"Force2Layout",{enumerable:!0,get:function(){return o.Force2Layout}});var s=oF;Object.defineProperty(t,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var l=Ub;Object.defineProperty(t,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var u=dy;Object.defineProperty(t,"DagreLayout",{enumerable:!0,get:function(){return u.DagreLayout}});var c=Hb;Object.defineProperty(t,"DagreCompoundLayout",{enumerable:!0,get:function(){return c.DagreCompoundLayout}});var f=nB;Object.defineProperty(t,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}});var h=Qb;Object.defineProperty(t,"ConcentricLayout",{enumerable:!0,get:function(){return h.ConcentricLayout}});var d=Zb;Object.defineProperty(t,"MDSLayout",{enumerable:!0,get:function(){return d.MDSLayout}});var p=Jb;Object.defineProperty(t,"FruchtermanLayout",{enumerable:!0,get:function(){return p.FruchtermanLayout}});var v=ex;Object.defineProperty(t,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}});var g=tx;Object.defineProperty(t,"GForceGPULayout",{enumerable:!0,get:function(){return g.GForceGPULayout}});var m=rx;Object.defineProperty(t,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var y=Rhe();Object.defineProperty(t,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var w=nx;Object.defineProperty(t,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}});var b=ix;Object.defineProperty(t,"ERLayout",{enumerable:!0,get:function(){return b.ERLayout}});var x=vht();Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return x.Layout}}),Object.defineProperty(t,"Layouts",{enumerable:!0,get:function(){return x.Layouts}}),r(Ghe,t)}(GI)),GI}(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(i,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(i,s,l)}:function(i,a,o,s){s===void 0&&(s=o),i[s]=a[o]}),r=Oe&&Oe.__exportStar||function(i,a){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,i,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0;var n=bf;Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return n.registerLayout}}),Object.defineProperty(t,"unRegisterLayout",{enumerable:!0,get:function(){return n.unRegisterLayout}}),Object.defineProperty(t,"getLayoutByName",{enumerable:!0,get:function(){return n.getLayoutByName}}),r(Uhe(),t)})(Pr);var Whe={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:Oe,function(){return function(r){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return r[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=r,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=36)}([function(r,n,i){var a=i(3);n.a=function(o){return Array.isArray?Array.isArray(o):Object(a.a)(o,"Array")}},function(r,n,i){var a=function(o){return o!==null&&typeof o!="function"&&isFinite(o.length)};n.a=a},function(r,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"Function")}},function(r,n,i){var a={}.toString,o=function(s,l){return a.call(s)==="[object "+l+"]"};n.a=o},function(r,n,i){var a=i(3);n.a=function(o){return Object(a.a)(o,"String")}},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Number")};n.a=o},function(r,n,i){var a=i(38),o=a.mix;function s(l,u,c,f){return f===void 0&&(f="height"),c==="center"?(l[f]+u[f])/2:l.height}r.exports={assign:o,getHeight:s}},function(r,n,i){var a=function(o){return o==null};n.a=a},function(r,n,i){var a=i(0),o=i(12);function s(l,u){if(l){var c;if(Object(a.a)(l))for(var f=0,h=l.length;f<h&&(c=u(l[f],f),c!==!1);f++);else if(Object(o.a)(l)){for(var d in l)if(l.hasOwnProperty(d)&&(c=u(l[d],d),c===!1))break}}}n.a=s},function(r,n,i){var a=i(7);n.a=function(o){return Object(a.a)(o)?"":o.toString()}},function(r,n,i){var a=i(14),o=i(3),s=function(l){if(!Object(a.a)(l)||!Object(o.a)(l,"Object"))return!1;if(Object.getPrototypeOf(l)===null)return!0;for(var u=l;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(l)===u};n.a=s},function(r,n,i){var a=i(18),o=function(){function s(u,c){c===void 0&&(c={});var f=this;f.options=c,f.rootNode=a(u,c)}var l=s.prototype;return l.execute=function(){throw new Error("please override this method")},s}();r.exports=o},function(r,n,i){n.a=function(a){var o=typeof a;return a!==null&&o==="object"||o==="function"}},function(r,n,i){var a=i(1),o=function(s,l){return Object(a.a)(s)?s.indexOf(l)>-1:!1};n.a=o},function(r,n,i){var a=function(o){return typeof o=="object"&&o!==null};n.a=a},function(r,n,i){var a=i(8),o=i(2),s=Object.values?function(l){return Object.values(l)}:function(l){var u=[];return Object(a.a)(l,function(c,f){Object(o.a)(l)&&f==="prototype"||u.push(c)}),u};n.a=s},function(r,n,i){n.a=o;function a(s,l){for(var u in l)l.hasOwnProperty(u)&&u!=="constructor"&&l[u]!==void 0&&(s[u]=l[u])}function o(s,l,u,c){return l&&a(s,l),u&&a(s,u),c&&a(s,c),s}},function(r,n,i){var a=i(35),o=["LR","RL","TB","BT","H","V"],s=["LR","RL","H"],l=function(f){return s.indexOf(f)>-1},u=o[0];r.exports=function(c,f,h){var d=f.direction||u;if(f.isHorizontal=l(d),d&&o.indexOf(d)===-1)throw new TypeError("Invalid direction: "+d);if(d===o[0])h(c,f);else if(d===o[1])h(c,f),c.right2left();else if(d===o[2])h(c,f);else if(d===o[3])h(c,f),c.bottom2top();else if(d===o[4]||d===o[5]){var p=a(c,f),v=p.left,g=p.right;h(v,f),h(g,f),f.isHorizontal?v.right2left():v.bottom2top(),g.translate(v.x-g.x,v.y-g.y),c.x=v.x,c.y=g.y;var m=c.getBoundingBox();f.isHorizontal?m.top<0&&c.translate(0,-m.top):m.left<0&&c.translate(-m.left,0)}var y=f.fixedRoot;return y===void 0&&(y=!0),y&&c.translate(-(c.x+c.width/2+c.hgap),-(c.y+c.height/2+c.vgap)),c}},function(r,n,i){var a=i(6),o=18,s=o*2,l=o,u={getId:function(d){return d.id||d.name},getPreH:function(d){return d.preH||0},getPreV:function(d){return d.preV||0},getHGap:function(d){return d.hgap||l},getVGap:function(d){return d.vgap||l},getChildren:function(d){return d.children},getHeight:function(d){return d.height||s},getWidth:function(d){var p=d.label||" ";return d.width||p.split("").length*o}};function c(h,d){var p=this;if(p.vgap=p.hgap=0,h instanceof c)return h;p.data=h;var v=d.getHGap(h),g=d.getVGap(h);return p.preH=d.getPreH(h),p.preV=d.getPreV(h),p.width=d.getWidth(h),p.height=d.getHeight(h),p.width+=p.preH,p.height+=p.preV,p.id=d.getId(h),p.x=p.y=0,p.depth=0,p.children||(p.children=[]),p.addGap(v,g),p}a.assign(c.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(d,p){var v=this;v.hgap+=d,v.vgap+=p,v.width+=2*d,v.height+=2*p},eachNode:function(d){for(var p=this,v=[p],g;g=v.shift();)d(g),v=g.children.concat(v)},DFTraverse:function(d){this.eachNode(d)},BFTraverse:function(d){for(var p=this,v=[p],g;g=v.shift();)d(g),v=v.concat(g.children)},getBoundingBox:function(){var d={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(p){d.left=Math.min(d.left,p.x),d.top=Math.min(d.top,p.y),d.width=Math.max(d.width,p.x+p.width),d.height=Math.max(d.height,p.y+p.height)}),d},translate:function(d,p){d===void 0&&(d=0),p===void 0&&(p=0),this.eachNode(function(v){v.x+=d,v.y+=p,v.x+=v.preH,v.y+=v.preV})},right2left:function(){var d=this,p=d.getBoundingBox();d.eachNode(function(v){v.x=v.x-(v.x-p.left)*2-v.width}),d.translate(p.width,0)},bottom2top:function(){var d=this,p=d.getBoundingBox();d.eachNode(function(v){v.y=v.y-(v.y-p.top)*2-v.height}),d.translate(0,p.height)}});function f(h,d,p){d===void 0&&(d={}),d=a.assign({},u,d);var v=new c(h,d),g=[v],m;if(!p&&!h.collapsed){for(;m=g.shift();)if(!m.data.collapsed){var y=d.getChildren(m.data),w=y?y.length:0;if(m.children=new Array(w),y&&w)for(var b=0;b<w;b++){var x=new c(y[b],d);m.children[b]=x,g.push(x),x.parent=m,x.depth=m.depth+1}}}return v}r.exports=f},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],c=0;c<s.length;c++){var f=s[c];l(f,c)&&u.push(f)}return u};n.a=o},function(r,n,i){var a=i(7),o=i(21);function s(l,u){var c=Object(o.a)(u),f=c.length;if(Object(a.a)(l))return!f;for(var h=0;h<f;h+=1){var d=c[h];if(u[d]!==l[d]||!(d in l))return!1}return!0}n.a=s},function(r,n,i){var a=i(8),o=i(2),s=Object.keys?function(l){return Object.keys(l)}:function(l){var u=[];return Object(a.a)(l,function(c,f){Object(o.a)(l)&&f==="prototype"||u.push(f)}),u};n.a=s},function(r,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.max(s,l)},o[0])}},function(r,n,i){var a=i(0);n.a=function(o){if(Object(a.a)(o))return o.reduce(function(s,l){return Math.min(s,l)},o[0])}},function(r,n,i){var a=i(1),o=Array.prototype.splice,s=function(u,c){if(!Object(a.a)(u))return[];for(var f=u?c.length:0,h=f-1;f--;){var d=void 0,p=c[f];(f===h||p!==d)&&(d=p,o.call(u,p,1))}return u};n.a=s},function(r,n,i){var a=i(8),o=i(0),s=i(10),l=function(u,c,f){if(!Object(o.a)(u)&&!Object(s.a)(u))return u;var h=f;return Object(a.a)(u,function(d,p){h=c(h,d,p)}),h};n.a=l},function(r,n,i){n.a=a;function a(o,s){s===void 0&&(s=new Map);var l=[];if(Array.isArray(o))for(var u=0,c=o.length;u<c;u++){var f=o[u];s.has(f)||(l.push(f),s.set(f,!0))}return l}},function(r,n,i){n.a=l;var a=i(0),o=i(2),s=i(28);function l(u,c){if(!c)return{0:u};if(!Object(o.a)(c)){var f=Object(a.a)(c)?c:c.replace(/\s+/g,"").split("*");c=function(h){for(var d="_",p=0,v=f.length;p<v;p++)d+=h[f[p]]&&h[f[p]].toString();return d}}return Object(s.a)(u,c)}},function(r,n,i){var a=i(0),o=i(2),s=Object.prototype.hasOwnProperty;function l(u,c){if(!c||!Object(a.a)(u))return{};for(var f={},h=Object(o.a)(c)?c:function(g){return g[c]},d,p=0;p<u.length;p++){var v=u[p];d=h(v),s.call(f,d)?f[d].push(v):f[d]=[v]}return f}n.a=l},function(r,n,i){n.a=function(a,o){return a.hasOwnProperty(o)}},function(r,n,i){var a={}.toString,o=function(s){return a.call(s).replace(/^\[object /,"").replace(/]$/,"")};n.a=o},function(r,n,i){var a=Object.prototype,o=function(s){var l=s&&s.constructor,u=typeof l=="function"&&l.prototype||a;return s===u};n.a=o},function(r,n,i){var a=i(2);n.a=function(o,s){if(!Object(a.a)(o))throw new TypeError("Expected a function");var l=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var f=s?s.apply(this,u):u[0],h=l.cache;if(h.has(f))return h.get(f);var d=o.apply(this,u);return h.set(f,d),d};return l.cache=new Map,l}},function(r,n,i){var a=i(14),o=i(1),s=i(4),l=function(u,c){if(u===c)return!0;if(!u||!c||Object(s.a)(u)||Object(s.a)(c))return!1;if(Object(o.a)(u)||Object(o.a)(c)){if(u.length!==c.length)return!1;for(var f=!0,h=0;h<u.length&&(f=l(u[h],c[h]),!!f);h++);return f}if(Object(a.a)(u)||Object(a.a)(c)){var d=Object.keys(u),p=Object.keys(c);if(d.length!==p.length)return!1;for(var f=!0,h=0;h<d.length&&(f=l(u[d[h]],c[d[h]]),!!f);h++);return f}return!1};n.a=l},function(r,n,i){var a=i(116),o=i(15),s=i(32),l=i(4),u;n.a=Object(s.a)(function(c,f){f===void 0&&(f={});var h=f.fontSize,d=f.fontFamily,p=f.fontWeight,v=f.fontStyle,g=f.fontVariant;return u||(u=document.createElement("canvas").getContext("2d")),u.font=[v,g,p,h+"px",d].join(" "),u.measureText(Object(l.a)(c)?c:"").width},function(c,f){return f===void 0&&(f={}),Object(a.a)([c],Object(o.a)(f)).join("")})},function(r,n,i){var a=i(18);r.exports=function(o,s){for(var l=a(o.data,s,!0),u=a(o.data,s,!0),c=o.children.length,f=Math.round(c/2),h=s.getSide||function(g,m){return m<f?"right":"left"},d=0;d<c;d++){var p=o.children[d],v=h(p,d);v==="right"?u.children.push(p):l.children.push(p)}return l.eachNode(function(g){g.isRoot()||(g.side="left")}),u.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:l,right:u}}},function(r,n,i){var a={compactBox:i(37),dendrogram:i(120),indented:i(122),mindmap:i(124)};r.exports=a},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(119),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a=i(13);i.d(n,"contains",function(){return a.a}),i.d(n,"includes",function(){return a.a});var o=i(39);i.d(n,"difference",function(){return o.a});var s=i(40);i.d(n,"find",function(){return s.a});var l=i(41);i.d(n,"findIndex",function(){return l.a});var u=i(42);i.d(n,"firstValue",function(){return u.a});var c=i(43);i.d(n,"flatten",function(){return c.a});var f=i(44);i.d(n,"flattenDeep",function(){return f.a});var h=i(45);i.d(n,"getRange",function(){return h.a});var d=i(46);i.d(n,"pull",function(){return d.a});var p=i(24);i.d(n,"pullAt",function(){return p.a});var v=i(25);i.d(n,"reduce",function(){return v.a});var g=i(47);i.d(n,"remove",function(){return g.a});var m=i(48);i.d(n,"sortBy",function(){return m.a});var y=i(49);i.d(n,"union",function(){return y.a});var w=i(26);i.d(n,"uniq",function(){return w.a});var b=i(50);i.d(n,"valuesOfKey",function(){return b.a});var x=i(51);i.d(n,"head",function(){return x.a});var S=i(52);i.d(n,"last",function(){return S.a});var E=i(53);i.d(n,"startsWith",function(){return E.a});var _=i(54);i.d(n,"endsWith",function(){return _.a});var k=i(19);i.d(n,"filter",function(){return k.a});var C=i(55);i.d(n,"every",function(){return C.a});var M=i(56);i.d(n,"some",function(){return M.a});var A=i(57);i.d(n,"group",function(){return A.a});var T=i(28);i.d(n,"groupBy",function(){return T.a});var D=i(27);i.d(n,"groupToMap",function(){return D.a});var F=i(58);i.d(n,"getWrapBehavior",function(){return F.a});var R=i(59);i.d(n,"wrapBehavior",function(){return R.a});var B=i(60);i.d(n,"number2color",function(){return B.a});var N=i(61);i.d(n,"parseRadius",function(){return N.a});var O=i(62);i.d(n,"clamp",function(){return O.a});var L=i(63);i.d(n,"fixedBase",function(){return L.a});var G=i(64);i.d(n,"isDecimal",function(){return G.a});var q=i(65);i.d(n,"isEven",function(){return q.a});var K=i(66);i.d(n,"isInteger",function(){return K.a});var V=i(67);i.d(n,"isNegative",function(){return V.a});var le=i(68);i.d(n,"isNumberEqual",function(){return le.a});var ge=i(69);i.d(n,"isOdd",function(){return ge.a});var xe=i(70);i.d(n,"isPositive",function(){return xe.a});var Ie=i(22);i.d(n,"max",function(){return Ie.a});var He=i(71);i.d(n,"maxBy",function(){return He.a});var Ge=i(23);i.d(n,"min",function(){return Ge.a});var ht=i(72);i.d(n,"minBy",function(){return ht.a});var dt=i(73);i.d(n,"mod",function(){return dt.a});var It=i(74);i.d(n,"toDegree",function(){return It.a});var _t=i(75);i.d(n,"toInteger",function(){return _t.a});var yt=i(76);i.d(n,"toRadian",function(){return yt.a});var Tt=i(77);i.d(n,"forIn",function(){return Tt.a});var kt=i(29);i.d(n,"has",function(){return kt.a});var mt=i(78);i.d(n,"hasKey",function(){return mt.a});var xt=i(79);i.d(n,"hasValue",function(){return xt.a});var Nt=i(21);i.d(n,"keys",function(){return Nt.a});var De=i(20);i.d(n,"isMatch",function(){return De.a});var J=i(15);i.d(n,"values",function(){return J.a});var P=i(80);i.d(n,"lowerCase",function(){return P.a});var me=i(81);i.d(n,"lowerFirst",function(){return me.a});var Ee=i(82);i.d(n,"substitute",function(){return Ee.a});var fe=i(83);i.d(n,"upperCase",function(){return fe.a});var ke=i(84);i.d(n,"upperFirst",function(){return ke.a});var Be=i(30);i.d(n,"getType",function(){return Be.a});var $e=i(85);i.d(n,"isArguments",function(){return $e.a});var Ue=i(0);i.d(n,"isArray",function(){return Ue.a});var ut=i(1);i.d(n,"isArrayLike",function(){return ut.a});var Mt=i(86);i.d(n,"isBoolean",function(){return Mt.a});var $t=i(87);i.d(n,"isDate",function(){return $t.a});var At=i(88);i.d(n,"isError",function(){return At.a});var wr=i(2);i.d(n,"isFunction",function(){return wr.a});var Ar=i(89);i.d(n,"isFinite",function(){return Ar.a});var Zr=i(7);i.d(n,"isNil",function(){return Zr.a});var Hr=i(90);i.d(n,"isNull",function(){return Hr.a});var Xn=i(5);i.d(n,"isNumber",function(){return Xn.a});var gr=i(12);i.d(n,"isObject",function(){return gr.a});var nn=i(14);i.d(n,"isObjectLike",function(){return nn.a});var _i=i(10);i.d(n,"isPlainObject",function(){return _i.a});var fn=i(31);i.d(n,"isPrototype",function(){return fn.a});var Ma=i(91);i.d(n,"isRegExp",function(){return Ma.a});var ca=i(4);i.d(n,"isString",function(){return ca.a});var Go=i(3);i.d(n,"isType",function(){return Go.a});var an=i(92);i.d(n,"isUndefined",function(){return an.a});var Yn=i(93);i.d(n,"isElement",function(){return Yn.a});var qn=i(94);i.d(n,"requestAnimationFrame",function(){return qn.a});var su=i(95);i.d(n,"clearAnimationFrame",function(){return su.a});var lu=i(96);i.d(n,"augment",function(){return lu.a});var uu=i(97);i.d(n,"clone",function(){return uu.a});var Aa=i(98);i.d(n,"debounce",function(){return Aa.a});var xn=i(32);i.d(n,"memoize",function(){return xn.a});var sn=i(99);i.d(n,"deepMix",function(){return sn.a});var Zt=i(8);i.d(n,"each",function(){return Zt.a});var Jr=i(100);i.d(n,"extend",function(){return Jr.a});var Bt=i(101);i.d(n,"indexOf",function(){return Bt.a});var pn=i(102);i.d(n,"isEmpty",function(){return pn.a});var zn=i(33);i.d(n,"isEqual",function(){return zn.a});var Ta=i(103);i.d(n,"isEqualWith",function(){return Ta.a});var Oa=i(104);i.d(n,"map",function(){return Oa.a});var ln=i(105);i.d(n,"mapValues",function(){return ln.a});var Uo=i(16);i.d(n,"mix",function(){return Uo.a}),i.d(n,"assign",function(){return Uo.a});var Os=i(106);i.d(n,"get",function(){return Os.a});var un=i(107);i.d(n,"set",function(){return un.a});var qv=i(108);i.d(n,"pick",function(){return qv.a});var Kv=i(109);i.d(n,"omit",function(){return Kv.a});var Ii=i(110);i.d(n,"throttle",function(){return Ii.a});var Ic=i(111);i.d(n,"toArray",function(){return Ic.a});var Xf=i(9);i.d(n,"toString",function(){return Xf.a});var Yf=i(112);i.d(n,"uniqueId",function(){return Yf.a});var qf=i(113);i.d(n,"noop",function(){return qf.a});var Kf=i(114);i.d(n,"identity",function(){return Kf.a});var vl=i(115);i.d(n,"size",function(){return vl.a});var go=i(34);i.d(n,"measureTextWidth",function(){return go.a});var Qv=i(117);i.d(n,"getEllipsisText",function(){return Qv.a});var cu=i(118);i.d(n,"Cache",function(){return cu.a})},function(r,n,i){var a=i(19),o=i(13),s=function(l,u){return u===void 0&&(u=[]),Object(a.a)(l,function(c){return!Object(o.a)(u,c)})};n.a=s},function(r,n,i){var a=i(2),o=i(20),s=i(0),l=i(10);function u(c,f){if(!Object(s.a)(c))return null;var h;if(Object(a.a)(f)&&(h=f),Object(l.a)(f)&&(h=function(p){return Object(o.a)(p,f)}),h){for(var d=0;d<c.length;d+=1)if(h(c[d]))return c[d]}return null}n.a=u},function(r,n,i){function a(o,s,l){l===void 0&&(l=0);for(var u=l;u<o.length;u++)if(s(o[u],u))return u;return-1}n.a=a},function(r,n,i){var a=i(7),o=i(0),s=function(l,u){for(var c=null,f=0;f<l.length;f++){var h=l[f],d=h[u];if(!Object(a.a)(d)){Object(o.a)(d)?c=d[0]:c=d;break}}return c};n.a=s},function(r,n,i){var a=i(0),o=function(s){if(!Object(a.a)(s))return[];for(var l=[],u=0;u<s.length;u++)l=l.concat(s[u]);return l};n.a=o},function(r,n,i){var a=i(0),o=function(s,l){if(l===void 0&&(l=[]),!Object(a.a)(s))l.push(s);else for(var u=0;u<s.length;u+=1)o(s[u],l);return l};n.a=o},function(r,n,i){var a=i(0),o=i(22),s=i(23),l=function(u){var c=u.filter(function(v){return!isNaN(v)});if(!c.length)return{min:0,max:0};if(Object(a.a)(u[0])){for(var f=[],h=0;h<u.length;h++)f=f.concat(u[h]);c=f}var d=Object(o.a)(c),p=Object(s.a)(c);return{min:p,max:d}};n.a=l},function(r,n,i){var a=Array.prototype,o=a.splice,s=a.indexOf,l=function(u){for(var c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];for(var h=0;h<c.length;h++)for(var d=c[h],p=-1;(p=s.call(u,d))>-1;)o.call(u,p,1);return u};n.a=l},function(r,n,i){var a=i(1),o=i(24),s=function(l,u){var c=[];if(!Object(a.a)(l))return c;for(var f=-1,h=[],d=l.length;++f<d;){var p=l[f];u(p,f,l)&&(c.push(p),h.push(f))}return Object(o.a)(l,h),c};n.a=s},function(r,n,i){var a=i(0),o=i(4),s=i(2);function l(u,c){var f;if(Object(s.a)(c))f=function(d,p){return c(d)-c(p)};else{var h=[];Object(o.a)(c)?h.push(c):Object(a.a)(c)&&(h=c),f=function(d,p){for(var v=0;v<h.length;v+=1){var g=h[v];if(d[g]>p[g])return 1;if(d[g]<p[g])return-1}return 0}}return u.sort(f),u}n.a=l},function(r,n,i){var a=i(26),o=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return Object(a.a)([].concat.apply([],s))};n.a=o},function(r,n,i){var a=i(0),o=i(7);n.a=function(s,l){for(var u=[],c={},f=0;f<s.length;f++){var h=s[f],d=h[l];if(!Object(o.a)(d)){Object(a.a)(d)||(d=[d]);for(var p=0;p<d.length;p++){var v=d[p];c[v]||(u.push(v),c[v]=!0)}}}return u}},function(r,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s))return s[0]}},function(r,n,i){n.a=o;var a=i(1);function o(s){if(Object(a.a)(s)){var l=s;return l[l.length-1]}}},function(r,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[0]===u:!1}n.a=s},function(r,n,i){var a=i(0),o=i(4);function s(l,u){return Object(a.a)(l)||Object(o.a)(l)?l[l.length-1]===u:!1}n.a=s},function(r,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(!s(o[l],l))return!1;return!0};n.a=a},function(r,n,i){var a=function(o,s){for(var l=0;l<o.length;l++)if(s(o[l],l))return!0;return!1};n.a=a},function(r,n,i){var a=i(27);n.a=function(o,s){if(!s)return[o];var l=Object(a.a)(o,s),u=[];for(var c in l)u.push(l[c]);return u}},function(r,n,i){function a(o,s){return o["_wrap_"+s]}n.a=a},function(r,n,i){function a(o,s){if(o["_wrap_"+s])return o["_wrap_"+s];var l=function(u){o[s](u)};return o["_wrap_"+s]=l,l}n.a=a},function(r,n,i){var a={};function o(s){var l=a[s];if(!l){for(var u=s.toString(16),c=u.length;c<6;c++)u="0"+u;l="#"+u,a[s]=l}return l}n.a=o},function(r,n,i){var a=i(0);function o(s){var l=0,u=0,c=0,f=0;return Object(a.a)(s)?s.length===1?l=u=c=f=s[0]:s.length===2?(l=c=s[0],u=f=s[1]):s.length===3?(l=s[0],u=f=s[1],c=s[2]):(l=s[0],u=s[1],c=s[2],f=s[3]):l=u=c=f=s,{r1:l,r2:u,r3:c,r4:f}}n.a=o},function(r,n,i){var a=function(o,s,l){return o<s?s:o>l?l:o};n.a=a},function(r,n,i){var a=function(o,s){var l=s.toString(),u=l.indexOf(".");if(u===-1)return Math.round(o);var c=l.substr(u+1).length;return c>20&&(c=20),parseFloat(o.toFixed(c))};n.a=a},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%1!==0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2===0};n.a=o},function(r,n,i){var a=i(5),o=Number.isInteger?Number.isInteger:function(s){return Object(a.a)(s)&&s%1===0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s<0};n.a=o},function(r,n,i){n.a=o;var a=1e-5;function o(s,l,u){return u===void 0&&(u=a),Math.abs(s-l)<u}},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s%2!==0};n.a=o},function(r,n,i){var a=i(5),o=function(s){return Object(a.a)(s)&&s>0};n.a=o},function(r,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,c=-1/0,f=0;f<s.length;f++){var h=s[f],d=Object(o.a)(l)?l(h):h[l];d>c&&(u=h,c=d)}return u}}},function(r,n,i){var a=i(0),o=i(2);n.a=function(s,l){if(Object(a.a)(s)){for(var u,c=1/0,f=0;f<s.length;f++){var h=s[f],d=Object(o.a)(l)?l(h):h[l];d<c&&(u=h,c=d)}return u}}},function(r,n,i){var a=function(o,s){return(o%s+s)%s};n.a=a},function(r,n,i){var a=180/Math.PI,o=function(s){return a*s};n.a=o},function(r,n,i){n.a=parseInt},function(r,n,i){var a=Math.PI/180,o=function(s){return a*s};n.a=o},function(r,n,i){var a=i(8);n.a=a.a},function(r,n,i){var a=i(29);n.a=a.a},function(r,n,i){var a=i(13),o=i(15);n.a=function(s,l){return Object(a.a)(Object(o.a)(s),l)}},function(r,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toLowerCase()};n.a=o},function(r,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toLowerCase()+l.substring(1)};n.a=o},function(r,n,i){function a(o,s){return!o||!s?o:o.replace(/\\?\{([^{}]+)\}/g,function(l,u){return l.charAt(0)==="\\"?l.slice(1):s[u]===void 0?"":s[u]})}n.a=a},function(r,n,i){var a=i(9),o=function(s){return Object(a.a)(s).toUpperCase()};n.a=o},function(r,n,i){var a=i(9),o=function(s){var l=Object(a.a)(s);return l.charAt(0).toUpperCase()+l.substring(1)};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Arguments")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Boolean")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Date")};n.a=o},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"Error")};n.a=o},function(r,n,i){var a=i(5);n.a=function(o){return Object(a.a)(o)&&isFinite(o)}},function(r,n,i){var a=function(o){return o===null};n.a=a},function(r,n,i){var a=i(3),o=function(s){return Object(a.a)(s,"RegExp")};n.a=o},function(r,n,i){var a=function(o){return o===void 0};n.a=a},function(r,n,i){var a=function(o){return o instanceof Element||o instanceof HTMLDocument};n.a=a},function(r,n,i){n.a=a;function a(o){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(l){return setTimeout(l,16)};return s(o)}},function(r,n,i){n.a=a;function a(o){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(o)}},function(r,n,i){var a=i(16),o=i(2),s=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];for(var c=l[0],f=1;f<l.length;f++){var h=l[f];Object(o.a)(h)&&(h=h.prototype),Object(a.a)(c.prototype,h)}};n.a=s},function(r,n,i){var a=i(0),o=function(s){if(typeof s!="object"||s===null)return s;var l;if(Object(a.a)(s)){l=[];for(var u=0,c=s.length;u<c;u++)typeof s[u]=="object"&&s[u]!=null?l[u]=o(s[u]):l[u]=s[u]}else{l={};for(var f in s)typeof s[f]=="object"&&s[f]!=null?l[f]=o(s[f]):l[f]=s[f]}return l};n.a=o},function(r,n,i){function a(o,s,l){var u;return function(){var c=this,f=arguments,h=function(){u=null,l||o.apply(c,f)},d=l&&!u;clearTimeout(u),u=setTimeout(h,s),d&&o.apply(c,f)}}n.a=a},function(r,n,i){var a=i(0),o=i(10),s=5;function l(c,f,h,d){h=h||0,d=d||s;for(var p in f)if(f.hasOwnProperty(p)){var v=f[p];v!==null&&Object(o.a)(v)?(Object(o.a)(c[p])||(c[p]={}),h<d?l(c[p],v,h+1,d):c[p]=f[p]):Object(a.a)(v)?(c[p]=[],c[p]=c[p].concat(v)):v!==void 0&&(c[p]=v)}}var u=function(c){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];for(var d=0;d<f.length;d+=1)l(c,f[d]);return c};n.a=u},function(r,n,i){var a=i(16),o=i(2),s=function(l,u,c,f){Object(o.a)(u)||(c=u,u=l,l=function(){});var h=Object.create?function(p,v){return Object.create(p,{constructor:{value:v}})}:function(p,v){function g(){}g.prototype=p;var m=new g;return m.constructor=v,m},d=h(u.prototype,l);return l.prototype=Object(a.a)(d,l.prototype),l.superclass=h(u.prototype,u),Object(a.a)(d,c),Object(a.a)(l,f),l};n.a=s},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return-1;var u=Array.prototype.indexOf;if(u)return u.call(s,l);for(var c=-1,f=0;f<s.length;f++)if(s[f]===l){c=f;break}return c};n.a=o},function(r,n,i){var a=i(7),o=i(1),s=i(30),l=i(31),u=Object.prototype.hasOwnProperty;function c(f){if(Object(a.a)(f))return!0;if(Object(o.a)(f))return!f.length;var h=Object(s.a)(f);if(h==="Map"||h==="Set")return!f.size;if(Object(l.a)(f))return!Object.keys(f).length;for(var d in f)if(u.call(f,d))return!1;return!0}n.a=c},function(r,n,i){var a=i(2),o=i(33);n.a=function(s,l,u){return Object(a.a)(u)?!!u(s,l):Object(o.a)(s,l)}},function(r,n,i){var a=i(1),o=function(s,l){if(!Object(a.a)(s))return s;for(var u=[],c=0;c<s.length;c++){var f=s[c];u.push(l(f,c))}return u};n.a=o},function(r,n,i){var a=i(7),o=i(12),s=function(l){return l};n.a=function(l,u){u===void 0&&(u=s);var c={};return Object(o.a)(l)&&!Object(a.a)(l)&&Object.keys(l).forEach(function(f){c[f]=u(l[f],f)}),c}},function(r,n,i){var a=i(4);n.a=function(o,s,l){for(var u=0,c=Object(a.a)(s)?s.split("."):s;o&&u<c.length;)o=o[c[u++]];return o===void 0||u<c.length?l:o}},function(r,n,i){var a=i(12),o=i(4),s=i(5);n.a=function(l,u,c){var f=l,h=Object(o.a)(u)?u.split("."):u;return h.forEach(function(d,p){p<h.length-1?(Object(a.a)(f[d])||(f[d]=Object(s.a)(h[p+1])?[]:{}),f=f[d]):f[d]=c}),l}},function(r,n,i){var a=i(8),o=i(10),s=Object.prototype.hasOwnProperty;n.a=function(l,u){if(l===null||!Object(o.a)(l))return{};var c={};return Object(a.a)(u,function(f){s.call(l,f)&&(c[f]=l[f])}),c}},function(r,n,i){var a=i(25);n.a=function(o,s){return Object(a.a)(o,function(l,u,c){return s.includes(c)||(l[c]=u),l},{})}},function(r,n,i){n.a=function(a,o,s){var l,u,c,f,h=0;s||(s={});var d=function(){h=s.leading===!1?0:Date.now(),l=null,f=a.apply(u,c),l||(u=c=null)},p=function(){var v=Date.now();!h&&s.leading===!1&&(h=v);var g=o-(v-h);return u=this,c=arguments,g<=0||g>o?(l&&(clearTimeout(l),l=null),h=v,f=a.apply(u,c),l||(u=c=null)):!l&&s.trailing!==!1&&(l=setTimeout(d,g)),f};return p.cancel=function(){clearTimeout(l),h=0,l=u=c=null},p}},function(r,n,i){var a=i(1);n.a=function(o){return Object(a.a)(o)?Array.prototype.slice.call(o):[]}},function(r,n,i){var a={};n.a=function(o){return o=o||"g",a[o]?a[o]+=1:a[o]=1,o+a[o]}},function(r,n,i){n.a=function(){}},function(r,n,i){n.a=function(a){return a}},function(r,n,i){n.a=s;var a=i(7),o=i(1);function s(l){return Object(a.a)(l)?0:Object(o.a)(l)?l.length:Object.keys(l).length}},function(r,n,i){n.a=a;function a(){for(var o=0,s=0,l=arguments.length;s<l;s++)o+=arguments[s].length;for(var u=Array(o),c=0,s=0;s<l;s++)for(var f=arguments[s],h=0,d=f.length;h<d;h++,c++)u[c]=f[h];return u}},function(r,n,i){var a=i(4),o=i(9),s=i(34);n.a=function(l,u,c,f){f===void 0&&(f="...");var h=16,d=Object(s.a)(f,c),p=Object(a.a)(l)?l:Object(o.a)(l),v=u,g=[],m,y;if(Object(s.a)(l,c)<=u)return l;for(;m=p.substr(0,h),y=Object(s.a)(m,c),!(y+d>v&&y>v);)if(g.push(m),v-=y,p=p.substr(h),!p)return g.join("");for(;m=p.substr(0,1),y=Object(s.a)(m,c),!(y+d>v);)if(g.push(m),v-=y,p=p.substr(1),!p)return g.join("");return""+g.join("")+f}},function(r,n,i){var a=function(){function o(){this.map={}}return o.prototype.has=function(s){return this.map[s]!==void 0},o.prototype.get=function(s,l){var u=this.map[s];return u===void 0?l:u},o.prototype.set=function(s,l){this.map[s]=l},o.prototype.clear=function(){this.map={}},o.prototype.delete=function(s){delete this.map[s]},o.prototype.size=function(){return Object.keys(this.map).length},o}();n.a=a},function(r,n){function i(c,f,h,d){d===void 0&&(d=[]);var p=this;p.w=c||0,p.h=f||0,p.y=h||0,p.x=0,p.c=d||[],p.cs=d.length,p.prelim=0,p.mod=0,p.shift=0,p.change=0,p.tl=null,p.tr=null,p.el=null,p.er=null,p.msel=0,p.mser=0}i.fromNode=function(c,f){if(!c)return null;var h=[];return c.children.forEach(function(d){h.push(i.fromNode(d,f))}),f?new i(c.height,c.width,c.x,h):new i(c.width,c.height,c.y,h)};function a(c,f,h){h?c.y+=f:c.x+=f,c.children.forEach(function(d){a(d,f,h)})}function o(c,f){var h=f?c.y:c.x;return c.children.forEach(function(d){h=Math.min(o(d,f),h)}),h}function s(c,f){var h=o(c,f);a(c,-h,f)}function l(c,f,h){h?f.y=c.x:f.x=c.x,c.c.forEach(function(d,p){l(d,f.children[p],h)})}function u(c,f,h){h===void 0&&(h=0),f?(c.x=h,h+=c.width):(c.y=h,h+=c.height),c.children.forEach(function(d){u(d,f,h)})}r.exports=function(c,f){f===void 0&&(f={});var h=f.isHorizontal;function d(A){if(A.cs===0){p(A);return}d(A.c[0]);for(var T=C(w(A.c[0].el),0,null),D=1;D<A.cs;++D){d(A.c[D]);var F=w(A.c[D].er);v(A,D,T),T=C(F,D,T)}S(A),p(A)}function p(A){A.cs===0?(A.el=A,A.er=A,A.msel=A.mser=0):(A.el=A.c[0].el,A.msel=A.c[0].msel,A.er=A.c[A.cs-1].er,A.mser=A.c[A.cs-1].mser)}function v(A,T,D){for(var F=A.c[T-1],R=F.mod,B=A.c[T],N=B.mod;F!==null&&B!==null;){w(F)>D.low&&(D=D.nxt);var O=R+F.prelim+F.w-(N+B.prelim);O>0&&(N+=O,g(A,T,D.index,O));var L=w(F),G=w(B);L<=G&&(F=y(F),F!==null&&(R+=F.mod)),L>=G&&(B=m(B),B!==null&&(N+=B.mod))}!F&&B?b(A,T,B,N):F&&!B&&x(A,T,F,R)}function g(A,T,D,F){A.c[T].mod+=F,A.c[T].msel+=F,A.c[T].mser+=F,_(A,T,D,F)}function m(A){return A.cs===0?A.tl:A.c[0]}function y(A){return A.cs===0?A.tr:A.c[A.cs-1]}function w(A){return A.y+A.h}function b(A,T,D,F){var R=A.c[0].el;R.tl=D;var B=F-D.mod-A.c[0].msel;R.mod+=B,R.prelim-=B,A.c[0].el=A.c[T].el,A.c[0].msel=A.c[T].msel}function x(A,T,D,F){var R=A.c[T].er;R.tr=D;var B=F-D.mod-A.c[T].mser;R.mod+=B,R.prelim-=B,A.c[T].er=A.c[T-1].er,A.c[T].mser=A.c[T-1].mser}function S(A){A.prelim=(A.c[0].prelim+A.c[0].mod+A.c[A.cs-1].mod+A.c[A.cs-1].prelim+A.c[A.cs-1].w)/2-A.w/2}function E(A,T){T+=A.mod,A.x=A.prelim+T,k(A);for(var D=0;D<A.cs;D++)E(A.c[D],T)}function _(A,T,D,F){if(D!==T-1){var R=T-D;A.c[D+1].shift+=F/R,A.c[T].shift-=F/R,A.c[T].change-=F-F/R}}function k(A){for(var T=0,D=0,F=0;F<A.cs;F++)T+=A.c[F].shift,D+=T+A.c[F].change,A.c[F].mod+=D}function C(A,T,D){for(;D!==null&&A>=D.low;)D=D.nxt;return{low:A,index:T,nxt:D}}u(c,h);var M=i.fromNode(c,h);return d(M),E(M,0),l(M,c,h),s(c,h),c}},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(121),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return y.rootNode.width=0,u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){var a=i(6);function o(u,c){c===void 0&&(c=[]);var f=this;f.x=f.y=0,f.leftChild=f.rightChild=null,f.height=0,f.children=c}var s={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function l(u,c,f){f?(c.x=u.x,c.y=u.y):(c.x=u.y,c.y=u.x),u.children.forEach(function(h,d){l(h,c.children[d],f)})}r.exports=function(u,c){c===void 0&&(c={}),c=a.assign({},s,c);var f=0;function h(m){if(!m)return null;m.width=0,m.depth&&m.depth>f&&(f=m.depth);var y=m.children,w=y.length,b=new o(m.height,[]);return y.forEach(function(x,S){var E=h(x);b.children.push(E),S===0&&(b.leftChild=E),S===w-1&&(b.rightChild=E)}),b.originNode=m,b.isLeaf=m.isLeaf(),b}function d(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=f;else{var y=m.children.map(function(b){return d(b)}),w=Math.min.apply(null,y);m.drawingDepth=w-1}return m.drawingDepth}var p;function v(m){m.x=m.drawingDepth*c.rankSep,m.isLeaf?(m.y=0,p&&(m.y=p.y+p.height+c.nodeSep,m.originNode.parent!==p.originNode.parent&&(m.y+=c.subTreeSep)),p=m):(m.children.forEach(function(y){v(y)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var g=h(u);return d(g),v(g),l(g,u,c.isHorizontal),u}},function(r,n,i){function a(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,o(g,m)}function o(g,m){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,b){return w.__proto__=b,w},o(g,m)}var s=i(11),l=i(123),u=i(35),c=i(6),f=["LR","RL","H"],h=f[0],d=function(g){a(m,g);function m(){return g.apply(this,arguments)||this}var y=m.prototype;return y.execute=function(){var b=this,x=b.options,S=b.rootNode;x.isHorizontal=!0;var E=x.indent,_=E===void 0?20:E,k=x.dropCap,C=k===void 0?!0:k,M=x.direction,A=M===void 0?h:M,T=x.align;if(A&&f.indexOf(A)===-1)throw new TypeError("Invalid direction: "+A);if(A===f[0])l(S,_,C,T);else if(A===f[1])l(S,_,C,T),S.right2left();else if(A===f[2]){var D=u(S,x),F=D.left,R=D.right;l(F,_,C,T),F.right2left(),l(R,_,C,T);var B=F.getBoundingBox();R.translate(B.width,0),S.x=R.x-S.width/2}return S},m}(s),p={};function v(g,m){return m=c.assign({},p,m),new d(g,m).execute()}r.exports=v},function(r,n,i){var a=i(6);function o(s,l,u,c,f){var h=typeof u=="function"?u(s):u*s.depth;if(!c)try{if(s.id===s.parent.children[0].id){s.x+=h,s.y=l?l.y:0;return}}catch{}if(s.x+=h,l){if(s.y=l.y+a.getHeight(l,s,f),l.parent&&s.parent.id!==l.parent.id){var d=l.parent,p=d.y+a.getHeight(d,s,f);s.y=p>s.y?p:s.y}}else s.y=0}r.exports=function(s,l,u,c){var f=null;s.eachNode(function(h){o(h,f,l,u,c),f=h})}},function(r,n,i){function a(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,o(p,v)}function o(p,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,y){return m.__proto__=y,m},o(p,v)}var s=i(11),l=i(125),u=i(17),c=i(6),f=function(p){a(v,p);function v(){return p.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,l)},v}(s),h={};function d(p,v){return v=c.assign({},h,v),new f(p,v).execute()}r.exports=d},function(r,n,i){var a=i(6);function o(u,c){var f=0;return u.children.length?u.children.forEach(function(h){f+=o(h,c)}):f=u.height,u._subTreeSep=c.getSubTreeSep(u.data),u.totalHeight=Math.max(u.height,f)+2*u._subTreeSep,u.totalHeight}function s(u){var c=u.children,f=c.length;if(f){c.forEach(function(m){s(m)});var h=c[0],d=c[f-1],p=d.y-h.y+d.height,v=0;if(c.forEach(function(m){v+=m.totalHeight}),p>u.height)u.y=h.y+p/2-u.height/2;else if(c.length!==1||u.height>v){var g=u.y+(u.height-p)/2-h.y;c.forEach(function(m){m.translate(0,g)})}else u.y=(h.y+h.height/2+d.y+d.height/2)/2-u.height/2}}var l={getSubTreeSep:function(){return 0}};r.exports=function(u,c){c===void 0&&(c={}),c=a.assign({},l,c),u.parent={x:0,width:0,height:0,y:0},u.BFTraverse(function(f){f.x=f.parent.x+f.parent.width}),u.parent=null,o(u,c),u.startY=0,u.y=u.totalHeight/2-u.height/2,u.eachNode(function(f){var h=f.children,d=h.length;if(d){var p=h[0];if(p.startY=f.startY+f._subTreeSep,d===1)p.y=f.y+f.height/2-p.height/2;else{p.y=p.startY+p.totalHeight/2-p.height/2;for(var v=1;v<d;v++){var g=h[v];g.startY=h[v-1].startY+h[v-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),s(u)}}])})})(Whe);var ght=Whe.exports;const Ak=_s(ght);var RX=_a.traverseTree,mht=function(e,r){var n;return e?Ut(e)?n=function(a){return e}:n=e:n=function(a){return r||1},n},yht=function(e,r){var n=[],i=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<r.length;o++){var l=r[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<e.length;o++){var c=n.length,f=i[o],h=f.length;n[o*4+2]=c,n[o*4+3]=f.length,u=Math.max(u,f.length);for(var d=0;d<h;++d){var p=f[d];n.push(+p)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},wht=function(e,r,n){var i=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var l=e[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<r.length;s++){var u=r[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var c=0;for(s=0;s<e.length;s++){var f=i.length,h=a[s],d=h.length;i[s*4+2]=f,i[s*4+3]=d/2,c=Math.max(c,d/2);for(var p=0;p<d;++p){var v=h[p];i.push(+v)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},bht=function(e,r,n,i){var a=[],o=[],s={},l=0;for(l=0;l<e.length;l++){var u=e[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<r.length;l++){var c=r[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<e.length;l++){var h=a.length,d=o[l],p=d.length;a[l*4+2]=h+1048576*p/4,a[l*4+3]=0,f=Math.max(f,p/4);for(var v=0;v<p;++v){var g=d[v];a.push(+g)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},xht=function(e,r){var n=[],i=e.length,a={};return r.forEach(function(o){e.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},Sht=function(e){for(var r=[],n=e.length,i=e[0].length,a=function(l){e.forEach(function(u,c){if(r.push(u[l]),c===n-1)for(;r.length%4!==0;)r.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(r)},Eht=function(e,r){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";r&&n.indexOf(r)>=0&&(s="x",o="y");var l=0;RX(e,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||RX(e,function(f){var h=(f[s]-i[s])/c*(Math.PI*2-u)+u,d=Math.abs(o==="x"?f.x-e.x:f.y-e.y);return f.x=d*Math.cos(h),f.y=d*Math.sin(h),!0}),e};const _ht=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:Sht,attributesToTextureData:xht,buildTextureData:yht,buildTextureDataWithOneEdgeAttr:wht,buildTextureDataWithTwoEdgeAttr:bht,proccessToFunc:mht,radialLayout:Eht},Symbol.toStringTag,{value:"Module"}));var Vhe=function t(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var r=document.createElement("div");return r.id="webgl-error-message",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",this.webgl||(r.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),r},addGetWebGLMessage:function(r){r=r||{};var n=r.parent!==void 0?r.parent:document.body,i=r.id!==void 0?r.id:"oldie",a=t().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}};const Cht=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:Vhe},Symbol.toStringTag,{value:"Module"}));var Hhe=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const kht=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:Hhe},Symbol.toStringTag,{value:"Module"}));var Hf=j(j(j(j(j({},_a),KXe),_ht),Cht),kht),Mht=Hf.radialLayout,Aht=function(){function t(e){this.type=e.type,this.radial=e.radial,this.config=e}return t.prototype.init=function(e){var r=this;if(this.data=e,this.radial){this.layoutMethod=function(n){var i=Ak[r.type](n,r.config);return Mht(i),i};return}this.layoutMethod=function(n){return Ak[r.type](n,r.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(e){return this.init(e),this.execute()},t}();Pr.registerLayout("grid",Pr.GridLayout);Pr.registerLayout("random",Pr.RandomLayout);Pr.registerLayout("force",Pr.ForceLayout);Pr.registerLayout("circular",Pr.CircularLayout);Pr.registerLayout("dagre",Pr.DagreLayout);Pr.registerLayout("dagreCompound",Pr.DagreCompoundLayout);Pr.registerLayout("radial",Pr.RadialLayout);Pr.registerLayout("concentric",Pr.ConcentricLayout);Pr.registerLayout("mds",Pr.MDSLayout);Pr.registerLayout("fruchterman",Pr.FruchtermanLayout);Pr.registerLayout("fruchterman-gpu",Pr.FruchtermanGPULayout);Pr.registerLayout("gForce",Pr.GForceLayout);Pr.registerLayout("force2",Pr.Force2Layout);Pr.registerLayout("gForce-gpu",Pr.GForceGPULayout);Pr.registerLayout("comboForce",Pr.ComboForceLayout);Pr.registerLayout("comboCombined",Pr.ComboCombinedLayout);Pr.registerLayout("forceAtlas2",Pr.ForceAtlas2Layout);var Tht=function(e,r){r.isCustomLayout=!0,Pr.Layouts[e]=Pr.registerLayout(e,r)},Oht=function(){function t(e,r){var n=e.toString(),i=new Blob(["importScripts('".concat(r,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return t}(),Iht=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function r(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,h=c.edges,d=c.layoutCfg,p=d===void 0?{}:d,v=p.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(v," not found")});break}var m;p.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),m==null||m.destroy()},m=new g(p),m.init({nodes:f,edges:h}),m.execute();break}case i.GPURUN:{var y=s.data,w=y.nodes,h=y.edges,b=y.layoutCfg,p=b===void 0?{}:b,x=y.canvas,v=p.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:i.ERROR,message:"layout ".concat(v," not found")});break}if(v.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout ".concat(v," does not support GPU")});break}var S=new g(p);S.init({nodes:w,edges:h}),S.executeWithWorker(x,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new Oht(r,e);return n},Hg={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function V4(t){"@babel/helpers - typeof";return V4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V4(t)}var NX=function(e){return setTimeout(e,16)},FX=function(e){return clearTimeout(e)},HE={requestAnimationFrame:function(e){var r=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||NX;return r(e)},cancelAnimationFrame:function(e){var r=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||FX;return r(e)}},Dht=["fruchterman","gForce"],Pht=["force","grid","circular"],Lht=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this;return n.graph=r,n.layoutCfg=r.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Iht(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var r=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,r.requestId&&(HE.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(HE.cancelAnimationFrame(r.requestId2),r.requestId2=null))},e.prototype.execLayoutMethod=function(r,n){var i=this;return new Promise(function(a,o){return es(i,void 0,void 0,function(){var s,l,u,c,f,v,h,d,p,v,g;return ts(this,function(m){switch(m.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(Xhe(l)?l="".concat(l,"-gpu"):console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU."))),_a.isForce(l)?(u=r.onTick,c=r.animate,f=c===void 0&&(l==="force"||l==="force2"),v=function(){u&&u(),(c||f)&&s.refreshPositions()},r.tick=v):(l==="comboForce"||l==="comboCombined")&&(r.comboTrees=s.get("comboTrees")),h=!1;try{d=new Pr.Layouts[l](r),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=d}catch{console.warn("The layout method: '".concat(l,"' does not exist! Please specify it first.")),o()}return h=d.enableTick,h&&(p=r.onTick,v=function(){p&&p(),s.refreshPositions()},d.tick=v),g=this.filterLayoutData(this.data,r),Fht(g,n),d.init(g),s.emit("beforesublayout",{type:l}),[4,d.execute()];case 1:return m.sent(),d.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(r,n){var i=this;return new Promise(function(a,o){return es(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return ts(this,function(p){switch(p.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},_a.isForce(l)&&(u=n.onTick,c=n.animate,f=c===void 0&&(l==="force"||l==="force2"),h=function(){u==null||u(),(c||f)&&s.refreshPositions()},n.tick=h),d=this.filterLayoutData(this.data,n),r.init(d),r.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,r.execute()];case 1:return p.sent(),r.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(r){var n=this,i,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,l=o.hiddenNodes;if(!s)return!1;var u=a.get("width"),c=a.get("height"),f={};Object.assign(f,{width:u,height:c,center:[u/2,c/2]},this.layoutCfg),this.layoutCfg=f;var h=f.type,d=!1;(i=this.layoutMethods)===null||i===void 0||i.forEach(function(x){var S;return d=!!(!((S=x.nodes)===null||S===void 0)&&S.length)||d});var p=this.destoryLayoutMethods();a.emit("beforelayout");var v=Promise.resolve();d&&h&&(p==null?void 0:p.length)===1&&p[0]===h?this.tweakInit():v=this.initPositions(f.center,s);var g=this.initPositions(f.center,l);g.then(),this.isGPU=BX(f,h);var m=f.onLayoutEnd,y=f.layoutEndFormatted,w=f.adjust;if(y||(f.layoutEndFormatted=!0,f.onAllLayoutEnd=function(){return es(n,void 0,void 0,function(){return ts(this,function(x){switch(x.label){case 0:return m&&m(s),this.refreshLayout(),w&&f.pipes?[4,this.adjustPipesBox(this.data,w)]:[3,2];case 1:x.sent(),this.refreshLayout(),x.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),f.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;var b=!1;return f.type?(b=!0,v=v.then(function(){return es(n,void 0,void 0,function(){return ts(this,function(x){switch(x.label){case 0:return[4,this.execLayoutMethod(f,0)];case 1:return[2,x.sent()]}})})})):f.pipes&&(b=!0,f.pipes.forEach(function(x,S){v=v.then(function(){return es(n,void 0,void 0,function(){return ts(this,function(E){switch(E.label){case 0:return[4,this.execLayoutMethod(x,S)];case 1:return[2,E.sent()]}})})})})),b?v.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd(),r&&r()}).catch(function(x){console.warn("graph layout failed,",x)}):(a.refreshPositions(),r==null||r()),!1}},e.prototype.tweakInit=function(){var r=this,n=r.data,i=r.graph,a=n.nodes,o=n.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var f=c.x,h=c.y;!isNaN(f)&&!isNaN(h)&&(s[c.id]={x:f,y:h},c.mass=c.mass||2)}),o.forEach(function(c){var f=c.source,h=c.target,d=s[f],p=s[h];!d&&p?s[f]={x:p.x+(Math.random()-.5)*80,y:p.y+(Math.random()-.5)*80}:!p&&d&&(s[h]={x:d.x+(Math.random()-.5)*80,y:d.y+(Math.random()-.5)*80})});var l=i.get("width"),u=i.get("height");a.forEach(function(c){var f=s[c.id]||{x:l/2+(Math.random()-.5)*20,y:u/2+(Math.random()-.5)*20};c.x=f.x,c.y=f.y})}},e.prototype.initWithPreset=function(r,n){var i=this;return new Promise(function(a,o){return es(i,void 0,void 0,function(){var s,l,u,c,f,h,d;return ts(this,function(p){switch(p.label){case 0:return s=this,l=s.layoutCfg,u=s.data,c=l.preset,!(c!=null&&c.type)||!Pr.Layouts[c==null?void 0:c.type]?(n==null||n(),a(),[2,!1]):(f=BX(c,c.type),h=f?"".concat(c.type,"-gpu"):c.type,d=new Pr.Layouts[h](c),delete l.preset,d.init(u),[4,d.execute()]);case 1:return p.sent(),r==null||r(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(r,n){var i=this,a=this,o=a.layoutCfg,s=a.graph,l=this.getWorker(),u=this.workerData;if(!l)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),f=!1;if(o.type)f=!0,c=c.then(function(){return i.runWebworker(l,r,o)});else if(o.pipes){f=!0;for(var h=function(m){c=c.then(function(){return i.runWebworker(l,r,m)})},d=0,p=o.pipes;d<p.length;d++){var v=p[d];h(v)}}return f&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),n==null||n()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(r,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,h=Rht(i,function(p){return typeof p!="function"});if(!f)r.postMessage({type:Hg.RUN,nodes:l,edges:u,layoutCfg:h});else{var d=c.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),r.postMessage({type:Hg.GPURUN,nodes:l,edges:u,layoutCfg:h,canvas:d},[d])}return new Promise(function(p,v){r.onmessage=function(g){a.handleWorkerMessage(p,v,g,s,i)}})},e.prototype.handleWorkerMessage=function(r,n,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,h=function(){o.onTick&&o.onTick()};switch(f){case Hg.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=HE.requestAnimationFrame(function(){bD(a,c),l.refreshPositions(),h(),c.currentTick===c.totalTicks?r():u.currentTick===c.totalTicks&&(u.requestId2=HE.requestAnimationFrame(function(){bD(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,h(),r()})),u.requestId=null}));break;case Hg.END:u.currentTick==null&&(bD(a,c),r());break;case Hg.GPUEND:u.currentTick==null&&(Nht(a,c),r());break;case Hg.ERROR:console.warn("Web-Worker layout error!",c.message),n();break;default:n();break}},e.prototype.updateLayoutCfg=function(r){var n=this,i=this,a=i.graph,o=i.layoutMethods;if(!(!a||a.get("destroyed"))){var s=r.disableTriggerLayout,l=xi(r,["disableTriggerLayout"]),u=qt({},this.layoutCfg,l);if(this.layoutCfg=u,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(l.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),f=!1;(o==null?void 0:o.length)===1?(f=!0,c=c.then(function(){return es(n,void 0,void 0,function(){return ts(this,function(h){switch(h.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,h.sent()]}})})})):o!=null&&o.length&&(f=!0,o.forEach(function(h,d){var p=u.pipes[d];c=c.then(function(){return es(n,void 0,void 0,function(){return ts(this,function(v){switch(v.label){case 0:return[4,this.updateLayoutMethod(h,p)];case 1:return[2,v.sent()]}})})})})),f&&c.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(h){console.warn("layout failed",h)})}}}},e.prototype.adjustPipesBox=function(r,n){var i=this;return new Promise(function(a){var o=r.nodes;o!=null&&o.length||a(),Pht.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:i.layoutCfg.center,nodeSize:function(p){return Math.max(p.height,p.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=Dr(c);s.onLayoutEnd=function(){c==null||c.forEach(function(d,p){var v,g,m,y=d.x-((v=f[p])===null||v===void 0?void 0:v.x),w=d.y-((g=f[p])===null||g===void 0?void 0:g.y);(m=u[p])===null||m===void 0||m.forEach(function(b){b.x+=y,b.y+=w})}),a()};var h=new Pr.Layouts[n](s);h.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var r=this.worker;r&&(r.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}($le);function bD(t,e){for(var r=t.nodes,n=e.nodes,i=r.length,a=0;a<i;a++){var o=r[a];o.x=n[a].x,o.y=n[a].y}}function Rht(t,e){var r={};return t&&V4(t)==="object"?(Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n])}),r):t}function Nht(t,e){for(var r=t.nodes,n=e.vertexEdgeData,i=r.length,a=0;a<i;a++){var o=r[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function Fht(t,e){var r;if(!((r=t==null?void 0:t.nodes)===null||r===void 0)&&r.length){var n=t.nodes;n.forEach(function(i){i.layoutOrder=e})}}function Xhe(t){return Dht.includes(t)}function BX(t,e){var r=e;e&&e.split("-")[1]==="gpu"&&(r=e.split("-")[0],t.gpuEnabled=!0);var n=!1;return t.gpuEnabled&&(n=!0,Vhe().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!Xhe(r)&&(console.warn("The '".concat(r,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var $X=dl,Bht="svg",Yhe=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return e.prototype.initLayoutController=function(){var r=new Lht(this);this.set({layoutController:r})},e.prototype.initEventController=function(){var r=new nYe(this);this.set({eventController:r})},e.prototype.initCanvas=function(){var r=this.get("container");if(typeof r=="string"&&(r=document.getElementById(r),this.set("container",r)),!r)throw new Error("invalid container");var n=r.clientWidth,i=r.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===Bht)l=new y2({container:r,width:a,height:o});else{var u={container:r,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c,window.devicePixelRatio=c),l=new cf(u)}this.set("canvas",l)},e.prototype.initPlugins=function(){var r=this;Te(r.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(r)})},e.prototype.downloadImageWatermark=function(r,n,i,a){return es(this,void 0,void 0,function(){var o,s,l;return ts(this,function(u){switch(u.label){case 0:return o=r.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=f,n.fill(),c("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(r,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),h=s||c.get("el"),d="";r||(r="image/png"),setTimeout(function(){return es(l,void 0,void 0,function(){var p,v,g,m,y,w,b,x,S,E;return ts(this,function(_){switch(_.label){case 0:return f!=="svg"?[3,1]:(p=h.cloneNode(!0),v=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",v),g.replaceChild(p,g.documentElement),m=new XMLSerializer().serializeToString(g),d="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(m)),[3,4]);case 1:return y=void 0,w=h.getContext("2d"),b=a||this.get("width"),x=o||this.get("height"),S=void 0,u?[4,this.downloadImageWatermark(u,w,b,x)]:[3,3];case 2:_.sent(),_.label=3;case 3:if(n){E=typeof window<"u"?window.devicePixelRatio:1;try{y=w.getImageData(0,0,b*E,x*E),S=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=n,w.fillRect(0,0,b,x)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}d=h.toDataURL(r),n&&(w.clearRect(0,0,b,x),w.putImageData(y,0,0),w.globalCompositeOperation=S),_.label=4;case 4:return i&&i(d),[2]}})})},16)},e.prototype.toDataURL=function(r,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");r||(r="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(f))}else{var h=void 0,d=o.getContext("2d"),p=Math.max(this.get("width"),500),v=Math.max(this.get("height"),500),g=void 0;if(n){var m=typeof window<"u"&&window.devicePixelRatio||1;try{h=d.getImageData(0,0,p*m,v*m),g=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=n,d.fillRect(0,0,p,v)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(r),n&&(d.clearRect(0,0,p,v),d.putImageData(h,0,0),d.globalCompositeOperation=g)}return s},e.prototype.toFullDataURL=function(r,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=Cn('<div id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?Ut(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=o+f[0]+f[2],d=s+f[1]+f[3],p={container:u,height:h,width:d,quickHit:!0},v=l==="svg"?new y2(p):new cf(p),g=this.get("group"),m=g.clone(),y=Dr(m.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var w=(a.maxX+a.minX)/2,b=(a.maxY+a.minY)/2;y=$X(y,[["t",-w,-b],["t",s/2+f[3],o/2+f[0]]]),m.resetMatrix(),m.setMatrix(y),v.add(m);var x=v.get("el"),S="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var E=x.cloneNode(!0),_=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_);k.replaceChild(E,k.documentElement);var C=new XMLSerializer().serializeToString(k);S="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(C))}else{var M=void 0,A=x.getContext("2d"),T=void 0;if(c){var D=typeof window<"u"?window.devicePixelRatio:1;try{M=A.getImageData(0,0,d*D,h*D),T=A.globalCompositeOperation,A.globalCompositeOperation="destination-over",A.fillStyle=c,A.fillRect(0,0,d,h)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}S=x.toDataURL(n),c&&(A.clearRect(0,0,d,h),A.putImageData(M,0,0),A.globalCompositeOperation=T)}r&&r(S)},16)},e.prototype.downloadFullImage=function(r,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=Cn('<div id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?Ut(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var p=s+d[0]+d[2],v=l+d[1]+d[3];if(f){var g=this.get("graphWaterMarker").cfg||{},m=g.width,y=g.height;p=Math.ceil(p/y)*y,v=Math.ceil(v/m)*m}var w={container:c,height:p,width:v},b=u==="svg"?new y2(w):new cf(w),x=this.get("group"),S=JXe(x),E=Dr(S.getMatrix());E||(E=[1,0,0,0,1,0,0,0,1]);var _=(o.maxX+o.minX)/2,k=(o.maxY+o.minY)/2;E=$X(E,[["t",-_,-k],["t",l/2+d[3],s/2+d[0]]]),S.resetMatrix(),S.setMatrix(E),b.add(S);var C=b.get("el");n||(n="image/png"),this.asyncToDataUrl(n,h,function(M){var A=document.createElement("a"),T=(r||"graph")+(u==="svg"?".svg":".".concat(n.split("/")[1]));a.dataURLToImage(M,u,A,T);var D=document.createEvent("MouseEvents");D.initEvent("click",!1,!1),A.dispatchEvent(D)},v,p,C)},e.prototype.downloadImage=function(r,n,i){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(r||"graph")+(l==="svg"?".svg":".".concat(n.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(n,i,function(f){a.dataURLToImage(f,l,c,u);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),c.dispatchEvent(h)})},e.prototype.dataURLToImage=function(r,n,i,a){if(!r||r==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=r.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var h=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(h)})}else i.addEventListener("click",function(){i.download=a,i.href=r})},e.prototype.addPlugin=function(r){var n=this;r.destroyed||(n.get("plugins").push(r),r.initPlugin(n))},e.prototype.removePlugin=function(r){var n=this.get("plugins"),i=n.indexOf(r);i>=0&&(r.destroyPlugin(),n.splice(i,1))},e.prototype.setImageWaterMarker=function(r,n){r===void 0&&(r=ov.waterMarkerImage);var i=this.get("container");et(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=gn({},ov.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!r){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new cf(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var p=a.get("context"),v=c.rotate,g=c.x,m=c.y;p.rotate(-v*Math.PI/180);var y=new Image;y.crossOrigin="anonymous",y.src=r,y.onload=function(){if(p.drawImage(y,g,m,c.width,c.height),p.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var w=document.querySelector(".g6-graph-watermarker");w||(w=document.createElement("div"),w.className="g6-graph-watermarker"),w.className="g6-graph-watermarker",a.destroyed||(w.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),i.appendChild(w))}}},e.prototype.setTextWaterMarker=function(r,n){var i=this.get("container");et(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=gn({},ov.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!(r!=null&&r.length)){var f=u?i:document.querySelector(".g6-graph-watermarker");f&&(f.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var h={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d,window.devicePixelRatio=d),a=new cf(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var p=a.get("context"),v=c.rotate,g=c.fill,m=c.fontFamily,y=c.fontSize,w=c.baseline,b=c.x,x=c.y,S=c.lineHeight;p.rotate(-v*Math.PI/180),p.font="".concat(y,"px ").concat(m),p.fillStyle=g,p.textBaseline=w;for(var E=et(r)?[r]:r,_=E.length-1;_>=0;_--)p.fillText(E[_],b,x+_*S);if(p.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var k=document.querySelector(".g6-graph-watermarker");k||(k=document.createElement("div"),k.className="g6-graph-watermarker"),k.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(k)}},e.prototype.destroy=function(){var r,n,i,a;Te(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(l){var u=l.parentElement;u&&u.removeChild(l)}}(r=this.get("eventController"))===null||r===void 0||r.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),t.prototype.destroy.call(this)},e}(Rle);function H4(t){"@babel/helpers - typeof";return H4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H4(t)}function qhe(t,e){if(e===void 0&&(e=new WeakMap),t===null)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if(H4(t)!=="object")return t;if(e.get(t))return e.get(t);var r=Array.isArray(t)?[]:{};e.set(t,r);for(var n in t)t.hasOwnProperty(n)&&t[n]!==void 0&&(r[n]=qhe(t[n],e));return r}function $ht(t){try{return structuredClone(t)}catch{return qhe(t)}}var zht=Hf.radialLayout,xD=Hf.traverseTree,jht=function(t){cr(e,t);function e(r){var n=t.call(this,r)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return e.prototype.getLayout=function(){var r=this.get("layout");return r?typeof r=="function"?r:(r.type||(r.type="dendrogram"),r.direction||(r.direction=r.type==="indented"?"LR":"TB"),r.radial?function(n){var i=Ak[r.type](n,r);return zht(i),i}:function(n){return Ak[r.type](n,r)}):null},e.indexOfChild=function(r,n){var i=-1;return Te(r,function(a,o){if(n===a.id)return i=o,!1}),i},e.prototype.getDefaultCfg=function(){var r=t.prototype.getDefaultCfg.call(this);return r.animate=!0,r},e.prototype.innerAddChild=function(r,n,i){var a=this,o=r.data;o&&(o.x=r.x,o.y=r.y,o.depth=r.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:"".concat(n.get("id"),":").concat(s.get("id"))},!1)}return Te(r.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},e.prototype.innerUpdateChild=function(r,n,i){var a=this,o=a.findById(r.id);if(!o){a.innerAddChild(r,n,i);return}Te(r.children||[],function(p){a.innerUpdateChild(p,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();e.indexOfChild(r.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:r.x,y:r.y},i),s.splice(u,1))}}var f,h;o.get("originAttrs")&&(f=o.get("originAttrs").x,h=o.get("originAttrs").y);var d=o.getModel();i&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",Object.assign(d,r.data)),(f!==r.x||h!==r.y)&&o.updatePosition({x:r.x,y:r.y})},e.prototype.innerRemoveChild=function(r,n,i){var a=this,o=a.findById(r);if(o)if(Te(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(r,n){n===void 0&&(n=!0);var i=this;this.getNodes().map(function(a){return i.clearItemStates(a)}),this.getEdges().map(function(a){return i.clearItemStates(a)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.get("originData"),after:r||i.get("data")}),r?(i.data(r),i.render(!1)):i.layout(this.get("fitView"))},e.prototype.changeLayout=function(r){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(r)},e.prototype.updateLayout=function(r,n,i,a){a===void 0&&(a=!0);var o=this;if(!r){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:r}),o.set("layout",r),o.set("layoutMethod",o.getLayout()),o.layout(),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*l[0]+l[6],s.y=s.y*l[0]+l[7];var u=this.getGroup().getCanvasBBox(),c=u.minX,f=u.maxX,h=u.minY,d=u.maxY,p={x:(c+f)/2,y:(h+d)/2};n==="begin"&&(p.x=c,p.y=h),this.translate(s.x-p.x,s.y-p.y)}},e.prototype.refreshLayout=function(r){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(r)},e.prototype.layout=function(r){var n=this,i=this,a=i.get("data"),o=i.get("layoutMethod"),s=i.get("layout"),l=a;if(s!=null&&s.excludeInvisibles){a=Dr(i.get("data"));var u={};xD(a,function(h){var d=h.children;if(!(d!=null&&d.length))return!0;for(var p=d.length-1;p>=0;p--){var v=n.findById(d[p].id),g=v?!v.isVisible():d[p].visible===!1;g&&(u[h.id]=u[h.id]||[],u[h.id].push({idx:p,child:d.splice(p,1)[0]}))}}),l=o?o(a,i.get("layout")):a,xD(l,function(h){var d=u[h.id];if(d!=null&&d.length)for(var p=d.length-1;p>=0;p--){var v=d[p],g=v.idx,m=v.child;h.children.splice(g,0,m)}})}else l=o?o(a,i.get("layout")):a;var c=i.get("animate");if(i.emit("beforerefreshlayout",{data:a,layoutData:l}),i.emit("beforelayout"),i.innerUpdateChild(l,void 0,c),r){var f=i.get("viewController");f.fitView()}c?i.layoutAnimate(l):(i.refresh(),i.paint()),i.emit("afterrefreshlayout",{data:a,layoutData:l}),i.emit("afterlayout")},e.prototype.addChild=function(r,n,i){i===void 0&&(i=!0);var a=this;a.emit("beforeaddchild",{model:r,parent:n}),et(n)||(n=n.get("id"));var o=a.findDataById(n);if(o){o.children||(o.children=[]),o.children.push(r);var s=a.findById(n);s.refresh(),a.changeData(void 0,i)}},e.prototype.updateChildren=function(r,n,i){i===void 0&&(i=!0);var a=this,o=a.findById(n);if(!n||!o){console.warn("Update children failed! There is no node with id '".concat(n,"'"));return}var s=a.findDataById(n);s.children=r,o.refresh(),a.changeData(void 0,i)},e.prototype.updateChild=function(r,n,i){i===void 0&&(i=!0);var a=this;if(!n||!a.findById(n)){a.changeData(r,i);return}var o=a.findDataById(n),s=a.findById(r.id);if(o.children||(o.children=[]),!s)o.children.push(r);else{var l=e.indexOfChild(o.children,r.id);l>-1&&(o.children[l]=r)}var u=a.findById(n);u==null||u.refresh(),a.changeData(void 0,i)},e.prototype.removeChild=function(r,n){n===void 0&&(n=!0);var i=this,a=i.findById(r),o;if(a?o=a==null?void 0:a.get("parent"):o=i.getNodes().find(function(f){var h=f.getModel().children||[];return!!h.find(function(d){return d.id===r})}),o&&!o.destroyed){var s=o.get("id"),l=i.findDataById(s),u=l&&l.children||[],c=e.indexOfChild(u,r);u.splice(c,1),o.refresh()}i.changeData(void 0,n)},e.prototype.findDataById=function(r,n){var i=this;if(n||(n=i.get("data")),r===n.id)return n;var a=null;return Te(n.children||[],function(o){if(o.id===r)return a=o,!1;if(a=i.findDataById(r,o),a)return!1}),a},e.prototype.layoutAnimate=function(r,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:r}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){xD(r,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),n){var f=n(l,o,u,r);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),Te(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){Te(i.getNodes(),function(s){s.set("originAttrs",null)}),Te(i.get("removeList"),function(s){i.removeItem(s,!1)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:r})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(r){r===void 0&&(r=!0);var n=this,i=n.get("data");if(!i||!sa(i)||!Object.keys(i).length)throw new Error("data must be defined first");n.clear(),r&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(r){t.prototype.data.call(this,r),this.set("originData",$ht(r))},e}(Yhe),Ght=function(){function t(e){this._cfgs=gn(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(e){var r=this;r.set("graph",e);var n=r.getEvents(),i={};Te(n,function(a,o){var s=Bp(r,a);i[o]=s,e.on(o,s)}),this._events=i,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(e){var r;return(r=this._cfgs)===null||r===void 0?void 0:r[e]},t.prototype.set=function(e,r){this._cfgs[e]=r},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),r=this._events;Te(r,function(n,i){e.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},t}();const jo=Ght;var Uht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zX="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Wht=function(t){Uht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{img:zX,follow:!0}},e.prototype.init=function(){var r=this.get("graph"),n=r.get("container"),i=r.get("canvas").get("el"),a=this.get("img")||zX;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Cn(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Cn(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},e.prototype.positionInit=function(){var r=this.get("graph"),n=r.get("minZoom"),i=r.get("width"),a=r.get("height");Mr(this.get("container"),{width:"".concat(i,"px"),height:"".concat(a,"px")});var o=i*80/n,s=a*80/n;Mr(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(r){var n=this.get("gridContainer"),i=r.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(i[0],", ").concat(i[1],", ").concat(i[3],", ").concat(i[4],", ").concat(a?i[6]:"0",", ").concat(a?i[7]:"0",")");Mr(n,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var r=this.get("graph"),n=r.get("container"),i=this.get("container");n.removeChild(i)},e}(jo);const Vht=Wht;var mB={exports:{}},jX=[],_1=[],Hht="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Khe(t,e){if(e=e||{},t===void 0)throw new Error(Hht);var r=e.prepend===!0?"prepend":"append",n=e.container!==void 0?e.container:document.querySelector("head"),i=jX.indexOf(n);i===-1&&(i=jX.push(n)-1,_1[i]={});var a;return _1[i]!==void 0&&_1[i][r]!==void 0?a=_1[i][r]:(a=_1[i][r]=Xht(),r==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),t.charCodeAt(0)===65279&&(t=t.substr(1,t.length)),a.styleSheet?a.styleSheet.cssText+=t:a.textContent+=t,a}function Xht(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}mB.exports=Khe;mB.exports.insertCss=Khe;var Yht=mB.exports;const QA=_s(Yht);var qht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();typeof document<"u"&&QA(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Kht=function(t){qht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>菜单项1</li>
            <li>菜单项2</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var r=this.get("className"),n=Cn("<div class=".concat(r||"g6-component-contextmenu","></div>"));Mr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),et(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(r){var n=this;r.preventDefault();var i=this.get("itemTypes");if(r.item){if(r.item&&r.item.getType&&i.indexOf(r.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(a(r)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(r,l);et(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(_){c(_.target,r.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var h=l.get("width"),d=l.get("height"),p=o.getBoundingClientRect(),v=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,y=l.getContainer().offsetLeft,w=r.canvasX+y+v,b=r.canvasY+m+g;w+p.width>h&&(w=r.canvasX-p.width-v+y),b+p.height>d&&(b=r.canvasY-p.height-g+m),b<0&&(b=0),Mr(o,{top:"".concat(b,"px"),left:"".concat(w,"px"),visibility:"visible"});var x=this.get("trigger")==="click",S=function(_){if(x){x=!1;return}n.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},e.prototype.removeMenuEventListener=function(){var r=this.get("handleMenuClickWrapper"),n=this.get("handler");if(r){var i=this.get("menu");i.removeEventListener("click",r),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var r=this.get("menu");r&&Mr(r,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var r=this.get("menu");if(this.removeMenuEventListener(),r){var n=this.get("container");n||(n=this.get("graph").get("container")),et(n)&&(n=document.getElementById(n)),n.removeChild(r)}},e}(jo);const Qht=Kht;var Zht=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X4=function(){return X4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},X4.apply(this,arguments)},GX=Math.max,Jht=dl,edt="default",tdt="keyShape",rdt="delegate",UX="svg",ndt=function(t){Zht(e,t);function e(r){var n=t.call(this,r)||this;return n.handleUpdateCanvas=Ob(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var r=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Cn(`
      <div
        class=`.concat(n.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(u||l),`
      </div>`)),f=0,h=0,d=!1,p=0,v=0,g=0,m=0,y=0,w=0,b=u||l?"mousedown":"dragstart";c.addEventListener(b,function(_){var k,C;if(_.dataTransfer){var M=new Image;M.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(C=(k=_.dataTransfer).setDragImage)===null||C===void 0||C.call(k,M,0,0);try{_.dataTransfer.setData("text/html","view-port-minimap")}catch{_.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,_.target===c){var A=c.style;p=parseInt(A.left,10),v=parseInt(A.top,10),g=parseInt(A.width,10),m=parseInt(A.height,10),!(g>i[0]||m>i[1])&&(w=a.getZoom(),y=r.get("ratio"),d=!0,f=_.clientX,h=_.clientY)}},!1);var x=function(k){if(!(!d||Gt(k.clientX)||Gt(k.clientY))){var C=f-k.clientX,M=h-k.clientY;(p-C<0||p-C+g>=i[0])&&(C=0),(v-M<0||v-M+m>=i[1])&&(M=0),p-=C,v-=M,Mr(c,{left:"".concat(p,"px"),top:"".concat(v,"px")}),a.translate(C*w/y,M*w/y),f=k.clientX,h=k.clientY}};!u&&!l&&c.addEventListener("drag",x,!1);var S=function(){d=!1,n.refresh=!0},E=u||l?"mouseup":"dragend";c.addEventListener(E,S,!1),s.addEventListener("mouseleave",S),s.addEventListener("mouseup",S),(u||l)&&s.addEventListener("mousemove",x,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var r=this.get("ratio"),n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),l=a.get("width")||s.scrollWidth||500,u=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),f=a.getPointByCanvas(l,u),h=this.get("viewport");h||this.initViewport();var d=(f.x-c.x)*r,p=(f.y-c.y)*r,v=c.x*r+n,g=c.y*r+i,m=v+d,y=g+p;v<0&&(d+=v,v=0),m>o[0]&&(d=d-(m-o[0])),g<0&&(p+=g,g=0),y>o[1]&&(p=p-(y-o[1])),this.set("ratio",r);var w="".concat(v,"px"),b="".concat(g,"px");Mr(h,{left:w,top:b,width:"".concat(d,"px"),height:"".concat(p,"px")})}},e.prototype.updateGraphShapes=function(){var r=this._cfgs.graph,n=this.get("canvas"),i=r.get("group");if(!i.destroyed){n.clear();var a;this.get("hideEdge")?(a=n.addGroup(),i.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=i.clone(),a.resetMatrix(),n.add(a));var o=r.get("renderer");o===UX&&this.updateVisible(a)}},e.prototype.updateVisible=function(r){var n=this;if(!r.isGroup()&&!r.get("visible"))r.hide();else{var i=r.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var r=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Te(n.getEdges(),function(l){r.updateOneEdgeKeyShape(l,a)}),Te(n.getNodes(),function(l){r.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){r.destroyed||(Te(o,function(l){r.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),r.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(r,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[r.get("id")],o=r.getBBox(),s=r.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),r.isVisible()?a.show():a.hide(),a.exist=!0;var f=r.getModel().depth;isNaN(f)||a.set("zIndex",f),i[r.get("id")]=a,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(r,n){var i=this.get("itemMap")||{},a=i[r.get("id")],o=r.getBBox(),s=r.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?(u=Object.assign(l,u),a.toFront()):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),r.isVisible()?a.show():a.hide(),a.exist=!0;var f=r.getModel().depth;isNaN(f)||a.set("zIndex",f),i[r.get("id")]=a,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var r=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Te(n.getEdges(),function(l){r.updateOneEdgeKeyShape(l,a)}),Te(n.getNodes(),function(l){r.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){r.destroyed||(Te(o,function(l){r.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),r.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var r=this.get("itemMap")||{},n=Object.keys(r);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=r[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete r[n[i]])}},e.prototype.updateOneEdgeKeyShape=function(r,n){var i=this.get("itemMap")||{},a=i[r.get("id")];if(a){var o=r.get("keyShape").attr("path");a.attr("path",o)}else a=r.get("keyShape").clone(),n.add(a);r.isVisible()?a.show():a.hide(),a.exist=!0,i[r.get("id")]=a,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(r,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[r.get("id")],s=r.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l),o.toFront()}else o=n.addShape("rect",{attrs:X4({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});r.isVisible()?o.show():o.hide(),o.exist=!0,a[r.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var r=this,n=r.get("graph"),i=r.get("size"),a=r.get("className"),o=r.get("container"),s=Cn("<div class='".concat(a,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));et(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),r.set("container",s);var l=Cn('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=n.get("renderer");c===UX?u=new y2({container:l,width:i[0],height:i[1]}):u=new cf({container:l,width:i[0],height:i[1]}),r.set("canvas",u),r.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var r=this.get("refresh");if(r){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case edt:this.updateGraphShapes();break;case tdt:this.updateKeyShapes();break;case rdt:this.updateDelegateShapes();break}var l=a.get("children")[0];if(l){l.resetMatrix();var u=l.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,h=c.width/f,d=c.height/f;Number.isFinite(u.width)&&(h=GX(u.width,h),d=GX(u.height,d)),h+=2*s,d+=2*s;var p=Math.min(i[0]/h,i[1]/d),v=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var y=(i[0]-(h-2*s)*p)/2,w=(i[1]-(d-2*s)*p)/2;v=Jht(v,[["t",g,m],["s",p,p],["t",y,w]]),l.setMatrix(v),this.set("ratio",p),this.set("totaldx",y+g*p),this.set("totaldy",w+m*p),this.set("dx",y),this.set("dy",w),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var r;(r=this.get("canvas"))===null||r===void 0||r.destroy();var n=this.get("container");n!=null&&n.parentNode&&n.parentNode.removeChild(n)},e}(jo),idt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Pu(t,e,r){var n=t.x-e.x,i=t.y-e.y;return!r||Math.abs(n)>r||Math.abs(i)>r?Math.sqrt(n*n+i*i):r}function adt(t,e){return t.x*e.x+t.y*e.y}function WX(t,e){var r=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(r*r*e.source.x+r*(t.y-e.source.y)+t.x)/(r*r+1),i=r*(n-e.source.x)+e.source.y;return{x:n,y:i}}var odt=function(t){idt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var r=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),r.refreshPositions()};this.set("tick",i)},e.prototype.bundling=function(r){var n=this;if(n.set("data",r),!n.isTicking()){var i=r.edges||[],a=r.nodes||[],o={},s=!1;if(a.forEach(function(b){(b.x===null||!b.y===null||b.x===void 0||!b.y===void 0)&&(s=!0),o[b.id]=b}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),c=n.divideEdges(l);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var h=n.get("cycles"),d=n.get("iterations"),p=n.get("iterRate"),v=n.get("lambda"),g=0;g<h;g++){for(var m=function(x){var S=[];i.forEach(function(E,_){if(E.source!==E.target){var k=o[E.source],C=o[E.target];S[_]=n.getEdgeForces({source:k,target:C},_,l,v);for(var M=0;M<l+1;M++)c[_][M].x+=S[_][M].x,c[_][M].y+=S[_][M].y}})},y=0;y<d;y++)m(y);v=v/2,l*=u,d*=p,c=n.divideEdges(l),n.set("edgePoints",c)}i.forEach(function(b,x){b.source!==b.target&&(b.type="polyline",b.controlPoints=c[x].slice(1,c[x].length-1))});var w=n.get("graph");w.refresh()}},e.prototype.updateBundling=function(r){var n=this,i=r.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(r).forEach(function(o){n.set(o,r[o])}),r.onTick){var a=this.get("graph");n.set("tick",function(){r.onTick(),a.refresh()})}n.bundling(i)},e.prototype.divideEdges=function(r){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){var u;(!o[l]||o[l]===void 0)&&(o[l]=[]);var c=a[s.source],f=a[s.target];if(r===1)o[l].push({x:c.x,y:c.y}),o[l].push({x:.5*(c.x+f.x),y:.5*(c.y+f.y)}),o[l].push({x:f.x,y:f.y});else{var h=0;!((u=o[l])===null||u===void 0)&&u.length?h=n.getEdgeLength(o[l]):h=Pu({x:c.x,y:c.y},{x:f.x,y:f.y});var d=h/(r+1),p=d,v=[{x:c.x,y:c.y}];o[l].forEach(function(g,m){if(m!==0){for(var y=Pu(g,o[l][m-1]);y>p;){var w=p/y,b={x:o[l][m-1].x,y:o[l][m-1].y};b.x+=w*(g.x-o[l][m-1].x),b.y+=w*(g.y-o[l][m-1].y),v.push(b),y-=p,p=d}p-=y}}),v.push({x:f.x,y:f.y}),o[l]=v}}),o},e.prototype.getEdgeLength=function(r){var n=0;return r.forEach(function(i,a){a!==0&&(n+=Pu(i,r[a-1]))}),n},e.prototype.getEdgeBundles=function(){var r=this,n=r.get("data"),i=n.edges||[],a=r.get("bundleThreshold"),o=r.get("nodeIdMap"),s=r.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(h,d){if(!(d<=u)){var p=o[h.source],v=o[h.target],g=r.getBundleScore({source:c,target:f},{source:p,target:v});g>=a&&(s[u].push(d),s[d].push(u))}})}),s},e.prototype.getBundleScore=function(r,n){var i=this;r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,r.length=Pu({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y}),n.length=Pu({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(r,n),o=i.getScaleScore(r,n),s=i.getPositionScore(r,n),l=i.getVisibilityScore(r,n);return a*o*s*l},e.prototype.getAngleScore=function(r,n){var i=adt({x:r.vx,y:r.vy},{x:n.vx,y:n.vy});return i/(r.length*n.length)},e.prototype.getScaleScore=function(r,n){var i=(r.length+n.length)/2,a=2/(i/Math.min(r.length,n.length)+Math.max(r.length,n.length)/i);return a},e.prototype.getPositionScore=function(r,n){var i=(r.length+n.length)/2,a={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=Pu(a,o);return i/(i+s)},e.prototype.getVisibilityScore=function(r,n){var i=this.getEdgeVisibility(r,n),a=this.getEdgeVisibility(n,r);return i<a?i:a},e.prototype.getEdgeVisibility=function(r,n){var i=WX(n.source,r),a=WX(n.target,r),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2};return Math.max(0,1-2*Pu(o,s)/Pu(i,a))},e.prototype.getEdgeForces=function(r,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Pu(r.source,r.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var h={x:0,y:0},d=o.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},u),p=o.getElectrostaticForce(f,n);h.x=a*(d.x+p.x),h.y=a*(d.y+p.y),c.push(h)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(r,n){var i=r.pre.x+r.next.x-2*r.cur.x,a=r.pre.y+r.next.y-2*r.cur.y;return i*=n,a*=n,{x:i,y:a}},e.prototype.getElectrostaticForce=function(r,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][r].x-s[n][r].x,y:s[c][r].y-s[n][r].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var h=Pu(s[c][r],s[n][r]),d=1/h;u.x+=f.x*d,u.y+=f.y*d}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(jo);const sdt=odt;var ldt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y4=function(){return Y4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Y4.apply(this,arguments)},XE=.05,VX={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},udt=function(t){ldt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Dr(VX),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var r;switch(this.get("trigger")){case"click":r={click:"magnify"};break;case"drag":r={click:"createDelegate"};break;default:r={mousemove:"magnify"};break}return r},e.prototype.init=function(){var r=this,n=r.get("r");r.set("cachedMagnifiedModels",[]),r.set("cachedOriginPositions",{}),r.set("r2",n*n);var i=r.get("d");r.set("molecularParam",(i+1)*n)},e.prototype.createDelegate=function(r){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(r),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(r){var n=this;if(!(!r||!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(r.clientX,r.clientY);r.originalEvent.wheelDelta<0?a=1-XE:a=1/(1-XE);var u=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.set("r2",f*f);var h=n.get("d");n.set("molecularParam",(h+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(r,l)}},e.prototype.scaleRByDrag=function(r){var n=this;if(r){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(r.clientX,r.clientY);r.x-i.x<0?o=1-XE:o=1/(1-XE);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,n.set("r",c),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(r,s),n.set("dragPrePos",{x:r.x,y:r.y})}},e.prototype.scaleDByWheel=function(r){var n=this;if(!(!r&&!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=0;r.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(r,f)}}},e.prototype.scaleDByDrag=function(r){var n=this,i=n.get("dragPrePos"),a=r.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(r)}n.set("dragPrePos",{x:r.x,y:r.y})},e.prototype.magnify=function(r,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),h=i.get("molecularParam"),d=a.getNodes(),p=d.length,v=n?{x:n.x,y:n.y}:{x:r.x,y:r.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(v=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(v.x+=g.x,v.y+=g.y),i.updateDelegate(v,u);for(var m=0;m<p;m++){var y=d[m].getModel(),w=y.x,b=y.y;if(!(isNaN(w)||isNaN(b))){var x=(w-v.x)*(w-v.x)+(b-v.y)*(b-v.y);if(!isNaN(x)&&x<c&&x!==0){var S=Math.sqrt(x),E=h*S/(f*S+u),_=(w-v.x)/S,k=(b-v.y)/S;if(y.x=_*E+v.x,y.y=k*E+v.y,s[y.id]||(s[y.id]={x:w,y:b,texts:[]}),o.push(y),l&&2*S<u)for(var C=d[m],M=C.getContainer(),A=M.getChildren(),T=A.length,D=0;D<T;D++){var F=A[D];F.get("type")==="text"&&(s[y.id].texts.push({visible:F.get("visible"),shape:F}),F.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var r=this,n=r.get("cachedMagnifiedModels"),i=r.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var h=u.texts[f];h.shape.set("visible",h.visible)}}r.set("cachedMagnifiedModels",[]),r.set("cachedOriginPositions",{})},e.prototype.updateParams=function(r){var n=this,i=r.r,a=r.d,o=r.trigger,s=r.minD,l=r.maxD,u=r.minR,c=r.maxR,f=r.scaleDBy,h=r.scaleRBy;isNaN(r.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u);var d=n.get("d"),p=n.get("r");if(n.set("molecularParam",(d+1)*p),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}if(h==="drag"||h==="wheel"||h==="unset"){n.set("scaleRBy",h),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}},e.prototype.updateDelegate=function(r,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||VX;s=l.addShape("circle",{attrs:Y4({r:n/1.5,x:r.x,y:r.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(p){a.scaleRByWheel(p)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(p){a.set("dragging",!0),a.set("cacheCenter",{x:p.x,y:p.y}),a.set("dragPrePos",{x:p.x,y:p.y})}),s.on("drag",function(p){a.scaleRByDrag(p)}),s.on("dragend",function(p){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(p){i.scaleDByWheel(p)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(p){a.set("dragging",!0),a.set("cacheCenter",{x:p.x,y:p.y}),a.set("dragPrePos",{x:p.x,y:p.y})}),s.on("drag",function(p){i.scaleDByDrag(p)}),s.on("dragend",function(p){a.set("dragging",!1)})))}else s.attr({x:r.x,y:r.y,r:n/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),h=r.y+n/1.5+16;if(!f||f.destroyed){var d=o.get("group");f=d.addShape("text",{attrs:{text:"".concat(c,"%"),x:r.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:"".concat(c,"%"),x:r.x,y:h})}a.set("delegate",s)},e.prototype.clear=function(){var r=this.get("graph");this.restoreCache(),r.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(jo),cdt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HX=.05;typeof document<"u"&&QA(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var fdt=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var r=[],n=e.target;n;){if(r.push(n),n.tagName==="HTML")return r.push(document,window),r;n=n.parentElement}return r},hdt=function(t){cdt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var r=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;et(a)&&(o=Cn(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),et(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var h=fdt(f).filter(function(p){return p.nodeName==="LI"});if(h.length!==0){var d=h[0].getAttribute("code");d&&(u?u(d,n):r.handleDefaultOperator(d))}});var c=this.get("position");c&&Mr(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var r=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),r.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===0?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var r=this.get("graph"),n=r.getUndoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action;r.pushStack(a,Dr(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=r.findById(d.id);d.visible?r.showItem(p,!1):r.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=r.findById(d.id);delete d.id,r.updateItem(p,d,!1),p.getType()==="combo"&&r.updateCombo(p)})});break;case"changedata":r.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){var p=d.itemType;delete d.itemType,r.addItem(p,d,!1)})});break}case"add":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.removeItem(d.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.updateComboTree(d.id,d.parentId,!1)})});break;case"createCombo":var s=i.data.after.combos,l=s[s.length-1];Object.keys(o).forEach(function(f){var h=o[f];h&&h.forEach(function(d){r.updateComboTree(d.id,d.parentId,!1)})}),r.removeItem(l.id,!1);break;case"uncombo":var u=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(f){return f.id}).filter(function(f){return f!==u.id});r.createCombo(u,c,!1);break;case"layout":r.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.redo=function(){var r=this.get("graph"),n=r.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(r.pushStack(a,Dr(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=r.findById(h.id);h.visible?r.showItem(d,!1):r.hideItem(d,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=r.findById(h.id);delete h.id,r.updateItem(d,h,!1),d.getType()==="combo"&&r.updateCombo(d)})});break;case"changedata":r.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){r.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){r.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){r.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){var d=h.itemType;delete h.itemType,r.addItem(d,h,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var f=o[c];f&&f.forEach(function(h){r.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];r.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var l=i.data.before.combos,u=l[l.length-1];r.uncombo(u.id,!1);break;case"layout":r.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.zoomOut=function(){var r=this.get("graph"),n=r.getZoom(),i=1/(1-HX*this.get("zoomSensitivity")),a=this.get("maxZoom")||r.get("maxZoom");i*n>a||r.zoomTo(n*i)},e.prototype.zoomIn=function(){var r=this.get("graph"),n=r.getZoom(),i=1-HX*this.get("zoomSensitivity"),a=this.get("minZoom")||r.get("minZoom");i*n<a||r.zoomTo(n*i)},e.prototype.realZoom=function(){var r=this.get("graph");r.zoomTo(1)},e.prototype.autoZoom=function(){var r=this.get("graph");r.fitView([20,20])},e.prototype.handleDefaultOperator=function(r){switch(r){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},e.prototype.destroy=function(){var r=this.get("toolBar");if(r){var n=this.get("container");n||(n=this.get("graph").get("container")),et(n)&&(n=document.getElementById(n)),n.removeChild(r)}var i=this.get("handleClick");i&&r.removeEventListener("click",i)},e}(jo);const ddt=hdt;var pdt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();typeof document<"u"&&QA(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var vdt=function(t){pdt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>类型：`.concat(n.item.getType(),`</h4>
          <span class='tooltip-id'>ID：`).concat(n.item.getID(),`</span>
        `)},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var r=this,n=r.get("className")||"g6-component-tooltip",i=Cn("<div class='".concat(n,"'></div>")),a=r.get("container");a||(a=r.get("graph").get("container")),et(a)&&(a=document.getElementById(a)),Mr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),r.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){Mr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){r.hideTooltip()})),r.set("tooltip",i)},e.prototype.onClick=function(r){var n=this.get("itemTypes");if(!(r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=r.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:r.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(r),a.emit("tooltipchange",{item:r.item,action:"show"}))}},e.prototype.onMouseEnter=function(r){var n=this.get("itemTypes");if(!(r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=r.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(r),a.emit("tooltipchange",{item:r.item,action:"show"})}},e.prototype.onMouseMove=function(r){var n=this.get("itemTypes");r.item&&r.item.getType&&n.indexOf(r.item.getType())===-1||!this.currentTarget||r.item!==this.currentTarget||this.showTooltip(r)},e.prototype.onMouseLeave=function(){this.hideTooltip();var r=this.get("graph");r.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var r=this.get("tooltip");r&&(r.innerHTML="")},e.prototype.showTooltip=function(r){if(r.item){var n=this.get("itemTypes");if(!(r.item.getType&&n.indexOf(r.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(r);et(o)?i.innerHTML=o:(this.clearContainer(),i.appendChild(o)),this.updatePosition(r)}}},e.prototype.hideTooltip=function(){var r=this.get("tooltip");r&&Mr(r,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(r){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(r)){Mr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(r.clientX,r.clientY),f=this.get("fixToNode"),h=r.item;if(h.getType&&h.getType()==="node"&&f&&Xt(f)&&f.length>=2){var d=h.getBBox();c={x:d.minX+d.width*f[0],y:d.minY+d.height*f[1]}}var p=a.getCanvasByPoint(c.x,c.y),v=p.x,g=p.y,m=a.getContainer(),y={x:v+m.offsetLeft+l,y:g+m.offsetTop+u};Mr(i,{visibility:"visible",display:"unset"});var w=i.getBoundingClientRect();v+w.width+l>o&&(y.x-=w.width+l),g+w.height+u>s&&(y.y-=w.height+u,y.y<0&&(y.y=0)),Mr(i,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var r=this.get("tooltip");if(r){var n=this.get("container");n||(n=this.get("graph").get("container")),et(n)&&(n=document.getElementById(n)),n.removeChild(r)}},e}(jo);const gdt=vdt;var Qhe="timebarstartplay",Zhe="timebarendplay",Ku="valuechange",sv="timebarConfigChanged",rd="playPauseBtn",$w="nextStepBtn",zw="preStepBtn",mdt=function(){function t(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.container,s=e.text,l=e.padding,u=l===void 0?[4,4,4,4]:l,c=e.className,f=c===void 0?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=h===void 0?"#000":h,p=e.textColor,v=p===void 0?"#fff":p,g=e.opacity,m=g===void 0?.8:g,y=e.fontSize,w=y===void 0?12:y;this.container=o,this.className=f,this.backgroundColor=d,this.textColor=v,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=w,this.render()}return t.prototype.render=function(){var e=this,r=e.className;e.x,e.y;var n=e.backgroundColor,i=e.textColor,a=e.text,o=e.padding,s=e.opacity,l=e.fontSize,u=e.container,c=Cn("<div class='".concat(r,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(s,'"></div>'));et(u)&&(u=document.getElementById(u)),u.appendChild(c),e.parentHeight=u.offsetHeight,e.parentWidth=u.offsetWidth,Mr(c,{visibility:"hidden",top:0,left:0});var f=Cn(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(n,"; font-size: ").concat(l,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));f.innerHTML=a,c.appendChild(f),e.backgroundDOM=f;var h=Cn("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));c.appendChild(h),e.arrowDOM=h,e.container=c},t.prototype.show=function(e){var r=this,n=e.text,i=e.x;e.y,e.clientX,e.clientY,r.backgroundDOM.innerHTML=n;var a=r.backgroundDOM.offsetWidth,o=r.backgroundDOM.offsetHeight,s=r.arrowDOM.offsetWidth,l=r.arrowDOM.offsetHeight;Mr(r.container,{top:"".concat(-o-l,"px"),left:"".concat(i,"px"),visibility:"visible"}),Mr(r.backgroundDOM,{marginLeft:"".concat(-a/2,"px")}),Mr(r.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(o,"px")});var u=i-a/2,c=i+a/2;u<0?Mr(r.backgroundDOM,{marginLeft:"".concat(-a/2-u,"px")}):c>r.parentWidth&&Mr(r.backgroundDOM,{marginLeft:"".concat(-a/2-c+r.parentWidth+12,"px")})},t.prototype.hide=function(){Mr(this.container,{top:0,left:0,visibility:"hidden"})},t}();const ydt=mdt;var q4=function(){return q4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},q4.apply(this,arguments)},wdt=function(){function t(e){this.config=gn({},e),this.init()}return t.prototype.update=function(e){this.config=gn({},this.config,e),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var e=this.config,r=e.group,n=e.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,h=r.addGroup({name:rd});this.startMarkerGroup=h.addGroup({name:rd}),this.circle=r.addShape("circle",{attrs:q4({x:c,y:f,r:this.config.r*a},n),name:rd}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:rd});var d=.25*this.config.r*a,p=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-p/2,width:d,height:p,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-p/2,width:d,height:p,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var e=this.config.style,r=e.scale,n=r===void 0?1:r,i=e.offsetX,a=i===void 0?0:i,o=e.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(e,r,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-i/Math.sqrt(3)/2,r-i/2],["L",e+i/Math.sqrt(3),r],["L",e-i/Math.sqrt(3)/2,r+i/2]]},t}();const bdt=wdt;var yi=function(){return yi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yi.apply(this,arguments)},C1=dl,xdt="#aaa",Sdt="green",Edt={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},_dt={fill:"#fff"},Cdt={fill:"green"},Jhe={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},ede={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},kdt={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Jhe,timeTypeControllerStyle:ede},SD=110,yh=50,Wu={SINGLE:"single",RANGE:"range"},Mdt=function(){function t(e){this.controllerCfg=gn({},kdt,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Wu.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(e,r,n){return[["M",e,r-n],["L",e+n,r],["L",e,r+n],["Z",e,r-n],["M",e,r],["L",e-n,r-n],["L",e-n,r+n],["Z"]]},t.prototype.getPreMarkerPath=function(e,r,n){return[["M",e,r-n],["L",e-n,r],["L",e,r+n],["L",e,r-n],["M",e,r],["L",e+n,r-n],["L",e+n,r+n],["Z"]]},t.prototype.renderPlayButton=function(){var e=this.controllerCfg,r=e.width,n=e.height,i=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,l=s===void 0?xdt:s,u=e.stroke,c=u===void 0?Sdt:u,f=e.containerStyle,h=f===void 0?{}:f,d=yi(yi({},Edt),e.playBtnStyle||{}),p=yi(yi({},_dt),e.preBtnStyle||{}),v=yi(yi({},Cdt),e.nextBtnStyle||{}),g=n/2-5,m=a+10,y=this.controllerGroup.addShape("rect",{attrs:yi({x:i,y:m,width:r,height:n,stroke:c,fill:l},h),name:"container-rect"});this.playButton?this.playButton.update({x:r/2,y:m,r:g}):this.playButton=new bdt({group:this.controllerGroup,x:r/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var w=p.offsetX||0,b=p.offsetY||0,x=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:yi({path:this.getPreMarkerPath(r/2-5*g+w,m+g+5+b,x*.5)},p),name:zw});var S=v.offsetX||0,E=v.offsetY||0,_=(v.scale||1)*g;this.controllerGroup.addShape("path",{attrs:yi({path:this.getNextMarkerPath(r/2+5*g+S,m+g+5+E,_*.5)},v),name:$w}),y.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var k=this.controllerCfg.scale,C=k===void 0?1:k,M=this.controllerGroup.getCanvasBBox(),A=(M.maxX+M.minX)/2,T=(M.maxY+M.minY)/2,D=C1([1,0,0,0,1,0,0,0,1],[["t",-A,-T],["s",C,C],["t",A,T]]);this.controllerGroup.setMatrix(D)},t.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,r=e.y,n=e.width,i=e.hideTimeTypeController,a=yi(yi({},Jhe),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,h=a.scale,d=h===void 0?1:h,p=a.offsetX,v=p===void 0?0:p,g=a.offsetY,m=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var w=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var x=r+this.speedAxisY[b],S=n-(i?yh:SD);y.addShape("line",{attrs:yi({x1:S,x2:S+15,y1:x,y2:x},s),speed:w,name:"speed-rect"}),this.speedAxisY[b]=x,w=w-1}this.speedText=y.addShape("text",{attrs:yi({x:n-(i?yh:SD)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:yi({path:this.getPointerPath(n-(i?yh:SD),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f),name:"speed-pointer"});var E=this.speedGroup.getCanvasBBox(),_=(E.maxX+E.minX)/2,k=(E.maxY+E.minY)/2,C=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];C=C1(C,[["t",-_,-k],["s",d,d],["t",_+v*d,k+m*d]]),this.speedGroup.setMatrix(C)},t.prototype.getPointerPath=function(e,r){return[["M",e,r],["L",e-10,r-4],["L",e-10,r+4],["Z"]]},t.prototype.renderToggleTime=function(){var e,r,n=this.controllerCfg,i=n.width,a=n.defaultTimeType,o=yi(yi({},ede),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,l=s===void 0?1:s,u=o.offsetX,c=u===void 0?0:u,f=o.offsetY,h=f===void 0?0:f,d=o.box,p=d===void 0?{}:d,v=o.check,g=v===void 0?{}:v,m=o.text,y=m===void 0?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var w=a===Wu.SINGLE;this.toggleGroup.addShape("rect",{attrs:yi({x:i-yh,y:this.speedAxisY[0]+3.5},p),isChecked:w,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:yi({path:[["M",i-yh+3,this.speedAxisY[1]+6],["L",i-yh+7,this.speedAxisY[1]+10],["L",i-yh+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),w||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:yi({text:w?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"时间范围":((r=this.controllerCfg)===null||r===void 0?void 0:r.timePointControllerText)||"单一时间",x:i-yh+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,S=(b.maxY+b.minY)/2,E=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=C1(E,[["t",-x,-S],["s",l,l],["t",x+c*l,S+h*l]]),this.toggleGroup.setMatrix(E)},t.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(r){var n=r.target.attr("y1"),i=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(i[7]||0),o=e.speedAxisY.indexOf(n),s=e.speedAxisY[o]-e.speedAxisY[a];i=C1(i,[["t",0,s]]),e.speedPoint.setMatrix(i),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(sv,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(r){r.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=e.speedAxisY.indexOf(i);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}r.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-i;n=C1(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(sv,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(r){var n,i,a=r.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((i=e.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"单一时间"),e.currentType=Wu.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"时间范围"),e.currentType=Wu.SINGLE),r.target.set("isChecked",!a),e.group.emit(sv,{type:e.currentType,speed:e.currentSpeed})})},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}();const tde=Mdt;var _2=function(){return _2=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_2.apply(this,arguments)},Adt=dl,Tdt={fill:"#5B8FF9"},Odt={fill:"#e6e8e9"},Idt=function(){function t(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var r=e.graph,n=e.canvas,i=e.group,a=e.width,o=e.height,s=e.padding,l=e.data,u=e.start,c=e.end,f=e.x,h=f===void 0?0:f,d=e.y,p=d===void 0?0:d,v=e.tickLabelFormatter,g=e.selectedTickStyle,m=g===void 0?Tdt:g,y=e.unselectedTickStyle,w=y===void 0?Odt:y,b=e.tooltipBackgroundColor,x=e.tooltipFomatter,S=e.tickLabelStyle,E=e.controllerCfg,_=E===void 0?{speed:1}:E;this.graph=r,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=v,this.tickLabelStyle=S||{},this.selectedTickStyle=m,this.unselectedTickStyle=w,this.controllerCfg=_,this.currentSpeed=_.speed||1,this.x=h,this.y=p,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var e=this,r=this,n=r.width,i=r.height,a=r.padding,o=r.data,s=r.start,l=r.end,u=r.tickLabelFormatter,c=r.selectedTickStyle,f=r.unselectedTickStyle,h=r.tickLabelStyle,d=n-2*a,p=10,v=4,g=3*a+v+p,m=i-g-2*a,y=2,w=o.length,b=(d-y*(w-1))/w;this.tickWidth=b;var x=this.sliceGroup,S=[],E=[],_=Math.round(w*s),k=Math.round(w*l);this.startTickRectId=_,this.endTickRectId=k;var C=h.rotate;delete h.rotate,o.forEach(function(A,T){var D=T>=_&&T<=k,F=D?c:f,R=x.addShape("rect",{attrs:_2({x:a+T*(b+y),y:a,width:b,height:m},F),draggable:!0,name:"tick-rect-".concat(T)}),B=x.addShape("rect",{attrs:{x:a+T*b+y*(2*T-1)/2,y:a,width:T===0||T===w-1?b+y/2:b+y,height:m,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(T)});B.toFront();var N=R.getBBox(),O=(N.minX+N.maxX)/2;S.push({rect:R,pickRect:B,value:A.date,x:O,y:N.minY});var L;if(u?(L=u(A),!et(L)&&L&&(L=A.date)):T%Math.round(w/10)===0&&(L=A.date),L){E.push(L);var G=N.maxY+a*2;x.addShape("line",{attrs:{stroke:"#BFBFBF",x1:O,y1:G,x2:O,y2:G+v},name:"tick-line"});var q=G+v+a,K=x.addShape("text",{attrs:_2({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:O,y:q,textAlign:"center",text:L,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),V=K.getBBox();if(V.maxX>n?K.attr("textAlign","right"):V.minX<0&&K.attr("textAlign","left"),Ut(C)&&E.length!==10){var le=Adt([1,0,0,0,1,0,0,0,1],[["t",-O,-q],["r",C],["t",O-5,q+2]]);K.attr({textAlign:"left",matrix:le})}E.length===1?K.attr({textAlign:"left"}):E.length===10&&K.attr({textAlign:"right"})}}),this.tickRects=S;var M=this.group;this.currentSpeed=1,this.controllerBtnGroup=new tde(_2({group:M,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var e=this,r=this.sliceGroup;r.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var h=parseInt(f.get("name").split("-")[2],10);if(!isNaN(h)){var d=e.tickRects,p=e.unselectedTickStyle;d.forEach(function(y){y.rect.attr(p)});var v=e.selectedTickStyle;d[h].rect.attr(v),e.startTickRectId=h,e.endTickRectId=h;var g=d.length,m=h/g;e.graph.emit(Ku,{value:[m,m]})}}}),r.on("dragstart",function(c){var f=e.tickRects,h=e.unselectedTickStyle;f.forEach(function(y){y.rect.attr(h)});var d=c.target,p=parseInt(d.get("name").split("-")[2],10),v=e.selectedTickStyle;f[p].rect.attr(v),e.startTickRectId=p;var g=f.length,m=p/g;e.graph.emit(Ku,{value:[m,m]}),e.dragging=!0}),r.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),h=e.startTickRectId,d=e.tickRects,p=e.selectedTickStyle,v=e.unselectedTickStyle,g=0;g<d.length;g++){var m=g>=h&&g<=f?p:v;d[g].rect.attr(m)}var y=d.length;e.endTickRectId=f;var w=h/y,b=f/y;e.graph.emit(Ku,{value:[w,b]})}}),r.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var f=e.startTickRectId,h=parseInt(c.target.get("name").split("-")[2],10);if(!(h<f)){var d=e.selectedTickStyle,p=e.tickRects;p[h].rect.attr(d),e.endTickRectId=h;var v=p.length,g=f/v,m=h/v;e.graph.emit(Ku,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new ydt({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(h){var d=h.target;if(d.get("type")==="rect"){var p=parseInt(d.get("name").split("-")[2],10),v=o.getClientByPoint(l[p].x,l[p].y);s.show({x:l[p].x,y:l[p].y,clientX:v.x,clientY:v.y,text:a?a(l[p].value):l[p].value})}}),f.on("mouseleave",function(h){s.hide()})});var u=this.group;u.on("".concat(rd,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on("".concat($w,":click"),function(){e.updateStartEnd(1)}),u.on("".concat(zw,":click"),function(){e.updateStartEnd(-1)}),u.on(sv,function(c){c.type;var f=c.speed;e.currentSpeed=f})},t.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Qhe,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Zhe,null))},t.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var r=e.currentSpeed;e.frameCount%(60/r)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},t.prototype.updateStartEnd=function(e){var r=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=r.endTickRectId;if(e>0?r.endTickRectId++:(n[r.endTickRectId].rect.attr(a),r.endTickRectId--),s!==r.startTickRectId)r.endTickRectId<r.startTickRectId&&(r.startTickRectId=r.endTickRectId);else{for(var l=r.startTickRectId;l<=r.endTickRectId-1;l++)n[l].rect.attr(a);r.startTickRectId=r.endTickRectId}if(n[r.endTickRectId]){n[r.endTickRectId].rect.attr(o);var u=r.startTickRectId/i,c=r.endTickRectId/i;this.graph.emit(Ku,{value:[u,c]})}},t.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(r){var n=r.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(rd,":click")),e.off("".concat($w,":click")),e.off("".concat(zw,":click")),e.off(sv),this.sliceGroup.destroy()},t}();const Ddt=Idt;var rde={};function Pdt(t){return rde[t]}function Tc(t,e){rde[t]=e}var yB=function(){function t(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return t.prototype.translate=function(e){return e},t.prototype.change=function(e){qt(this.__cfg__,e),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var e=this;return kv(this.ticks,function(r,n){return sa(r)?r:{text:e.getText(r,n),tickValue:r,value:e.scale(r)}})},t.prototype.getText=function(e,r){var n=this.formatter,i=n?n(e,r):e;return Gt(i)||!Bn(i.toString)?"":i.toString()},t.prototype.getConfig=function(e){return this.__cfg__[e]},t.prototype.init=function(){qt(this,this.__cfg__),this.setDomain(),Oae(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var e=this.tickMethod,r=[];if(et(e)){var n=Pdt(e);if(!n)throw new Error("There is no method to to calculate ticks!");r=n(this)}else Bn(e)&&(r=e(this));return r},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(e,r,n){return Ut(e)?(e-r)/(n-r):NaN},t.prototype.calcValue=function(e,r,n){return r+e*(n-r)},t}(),ax=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="cat",r.isCategory=!0,r}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var r=0;r<this.values.length;r++)this.translateIndexMap.set(this.values[r],r)}},e.prototype.translate=function(r){this.buildIndexMap();var n=this.translateIndexMap.get(r);return n===void 0&&(n=Ut(r)?r:NaN),n},e.prototype.scale=function(r){var n=this.translate(r),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(r){var n=this.max-this.min,i=this.calcPercent(r,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=r;return Ut(r)&&!this.values.includes(r)&&(a=this.values[a]),t.prototype.getText.apply(this,yM([a],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Gt(this.getConfig("min"))&&(this.min=0),Gt(this.getConfig("max"))){var r=this.values.length;this.max=r>1?r-1:r}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(yB),nde=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Eh="\\d\\d?",wh="\\d\\d",Ldt="\\d{3}",Rdt="\\d{4}",C2="[^\\s]+",ide=/\[([^]*?)\]/gm;function ade(t,e){for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].substr(0,e));return r}var XX=function(t){return function(e,r){var n=r[t].map(function(a){return a.toLowerCase()}),i=n.indexOf(e.toLowerCase());return i>-1?i:null}};function Fd(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,i=e;n<i.length;n++){var a=i[n];for(var o in a)t[o]=a[o]}return t}var ode=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],sde=["January","February","March","April","May","June","July","August","September","October","November","December"],Ndt=ade(sde,3),Fdt=ade(ode,3),wB={dayNamesShort:Fdt,dayNames:ode,monthNamesShort:Ndt,monthNames:sde,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},Tk=Fd({},wB),lde=function(t){return Tk=Fd(Tk,t)},YX=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Eo=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},Bdt={D:function(t){return String(t.getDate())},DD:function(t){return Eo(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Eo(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Eo(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Eo(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Eo(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Eo(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Eo(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Eo(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Eo(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Eo(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Eo(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Eo(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Eo(Math.floor(Math.abs(e)/60),2)+":"+Eo(Math.abs(e)%60,2)}},qX=function(t){return+t-1},KX=[null,Eh],QX=[null,C2],ZX=["isPm",C2,function(t,e){var r=t.toLowerCase();return r===e.amPm[0]?0:r===e.amPm[1]?1:null}],JX=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var r=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?r:-r}return 0}],$dt={D:["day",Eh],DD:["day",wh],Do:["day",Eh+C2,function(t){return parseInt(t,10)}],M:["month",Eh,qX],MM:["month",wh,qX],YY:["year",wh,function(t){var e=new Date,r=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?r-1:r)+t)}],h:["hour",Eh,void 0,"isPm"],hh:["hour",wh,void 0,"isPm"],H:["hour",Eh],HH:["hour",wh],m:["minute",Eh],mm:["minute",wh],s:["second",Eh],ss:["second",wh],YYYY:["year",Rdt],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",wh,function(t){return+t*10}],SSS:["millisecond",Ldt],d:KX,dd:KX,ddd:QX,dddd:QX,MMM:["month",C2,XX("monthNamesShort")],MMMM:["month",C2,XX("monthNames")],a:ZX,A:ZX,ZZ:JX,Z:JX},Ok={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ude=function(t){return Fd(Ok,t)},cde=function(t,e,r){if(e===void 0&&(e=Ok.default),r===void 0&&(r={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=Ok[e]||e;var n=[];e=e.replace(ide,function(a,o){return n.push(o),"@@@"});var i=Fd(Fd({},Tk),r);return e=e.replace(nde,function(a){return Bdt[a](t,i)}),e.replace(/@@@/g,function(){return n.shift()})};function fde(t,e,r){if(r===void 0&&(r={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Ok[e]||e,t.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(ide,function(b,x){return o.push(YX(x)),"@@@"}),l={},u={};s=YX(s).replace(nde,function(b){var x=$dt[b],S=x[0],E=x[1],_=x[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,_&&(u[_]=!0),a.push(x),"("+E+")"}),Object.keys(u).forEach(function(b){if(!l[b])throw new Error("Invalid format. "+b+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=t.match(new RegExp(s,"i"));if(!c)return null;for(var f=Fd(Fd({},Tk),r),h=1;h<c.length;h++){var d=a[h-1],p=d[0],v=d[2],g=v?v(c[h],f):+c[h];if(g==null)return null;i[p]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],h=0,w=y.length;h<w;h++)if(l[y[h][0]]&&i[y[h][0]]!==m[y[h][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var hde={format:cde,parse:fde,defaultI18n:wB,setGlobalDateI18n:lde,setGlobalDateMasks:ude};const zdt=Object.freeze(Object.defineProperty({__proto__:null,assign:Fd,default:hde,defaultI18n:wB,format:cde,parse:fde,setGlobalDateI18n:lde,setGlobalDateMasks:ude},Symbol.toStringTag,{value:"Module"}));function jdt(t){return function(e,r,n,i){for(var a=Gt(n)?0:n,o=Gt(i)?e.length:i;a<o;){var s=a+o>>>1;t(e[s])>r?o=s:a=s+1}return a}}var eY="format";function dde(t,e){var r=zdt[eY]||hde[eY];return r(t,e)}function Ik(t){return et(t)&&(t.indexOf("T")>0?t=new Date(t).getTime():t=new Date(t.replace(/-/gi,"/")).getTime()),o8(t)&&(t=t.getTime()),t}var Rl=1e3,lv=60*Rl,uv=60*lv,pf=24*uv,k2=pf*31,tY=pf*365,k1=[["HH:mm:ss",Rl],["HH:mm:ss",Rl*10],["HH:mm:ss",Rl*30],["HH:mm",lv],["HH:mm",lv*10],["HH:mm",lv*30],["HH",uv],["HH",uv*6],["HH",uv*12],["YYYY-MM-DD",pf],["YYYY-MM-DD",pf*4],["YYYY-WW",pf*7],["YYYY-MM",k2],["YYYY-MM",k2*4],["YYYY-MM",k2*6],["YYYY",pf*380]];function Gdt(t,e,r){var n=(e-t)/r,i=jdt(function(o){return o[1]})(k1,n)-1,a=k1[i];return i<0?a=k1[0]:i>=k1.length&&(a=il(k1)),a}var Udt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="timeCat",r}return e.prototype.translate=function(r){r=Ik(r);var n=this.values.indexOf(r);return n===-1&&(Ut(r)&&r<this.values.length?n=r:n=NaN),n},e.prototype.getText=function(r,n){var i=this.translate(r);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):dde(a,this.mask),a}return r},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var r=this.values;Te(r,function(n,i){r[i]=Ik(n)}),r.sort(function(n,i){return n-i}),t.prototype.setDomain.call(this)},e}(ax),ZA=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.isContinuous=!0,r}return e.prototype.scale=function(r){if(Gt(r))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(r);return n+s*(i-n)},e.prototype.init=function(){t.prototype.init.call(this);var r=this.ticks,n=hc(r),i=il(r);n<this.min&&(this.min=n),i>this.max&&(this.max=i),Gt(this.minLimit)||(this.min=n),Gt(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var r=yae(this.values),n=r.min,i=r.max;Gt(this.min)&&(this.min=n),Gt(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},e.prototype.calculateTicks=function(){var r=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=rA(n,function(i){return i>=r.min&&i<=r.max})),n},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;return(r-i)/(n-i)},e.prototype.getInvertPercent=function(r){return(r-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(yB),ox=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="linear",r.isLinear=!0,r}return e.prototype.invert=function(r){var n=this.getInvertPercent(r);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(ZA);function Ih(t,e){var r=Math.E,n;return e>=0?n=Math.pow(r,Math.log(e)/t):n=Math.pow(r,Math.log(-e)/t)*-1,n}function Us(t,e){return t===1?1:Math.log(e)/Math.log(t)}function pde(t,e,r){Gt(r)&&(r=Math.max.apply(null,t));var n=r;return Te(t,function(i){i>0&&i<n&&(n=i)}),n===r&&(n=r/e),n>1&&(n=1),n}var Wdt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="log",r}return e.prototype.invert=function(r){var n=this.base,i=Us(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(r===0)return 0;s=Us(n,l/n);var u=1/(i-s)*o;if(r<u)return r/u*l}else s=Us(n,this.min);var c=(r-a)/o,f=c*(i-s)+s;return Math.pow(n,f)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var r=this.min;if(r<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");r===0&&(this.positiveMin=pde(this.values,this.base,this.max))},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;if(n===i||r<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return r<o?s=r/o/(Us(a,n)-Us(a,i)):s=(Us(a,r)-Us(a,i))/(Us(a,n)-Us(a,i)),s},e}(ZA),Vdt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="pow",r}return e.prototype.invert=function(r){var n=this.getInvertPercent(r),i=this.exponent,a=Ih(i,this.max),o=Ih(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(r){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(Ih(a,r)-Ih(a,i))/(Ih(a,n)-Ih(a,i));return o},e}(ZA),Hdt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="time",r}return e.prototype.getText=function(r,n){var i=this.translate(r),a=this.formatter;return a?a(i,n):dde(i,this.mask)},e.prototype.scale=function(r){var n=r;return(et(n)||o8(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(r){return Ik(r)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var r=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!Gt(n)||!Ut(n))&&(this.min=this.translate(this.min)),(!Gt(i)||!Ut(i))&&(this.max=this.translate(this.max)),r&&r.length){var a=[],o=1/0,s=o,l=0;Te(r,function(u){var c=Ik(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),r.length>1&&(this.minTickInterval=s-o),Gt(n)&&(this.min=o),Gt(i)&&(this.max=l)}},e}(ox),vde=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="quantize",r}return e.prototype.invert=function(r){var n=this.ticks,i=n.length,a=this.getInvertPercent(r),o=Math.floor(a*(i-1));if(o>=i-1)return il(n);if(o<0)return hc(n);var s=n[o],l=n[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var r=t.prototype.calculateTicks.call(this);return this.nice||(il(r)!==this.max&&r.push(this.max),hc(r)!==this.min&&r.unshift(this.min)),r},e.prototype.getScalePercent=function(r){var n=this.ticks;if(r<hc(n))return 0;if(r>il(n))return 1;var i=0;return Te(n,function(a,o){if(r>=a)i=o;else return!1}),i/(n.length-1)},e}(ZA),Xdt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="quantile",r}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(vde),gde={};function Ydt(t){return gde[t]}function Oc(t,e){if(Ydt(t))throw new Error("type '"+t+"' existed.");gde[t]=e}var qdt=function(t){cr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="identity",r.isIdentity=!0,r}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(r){return this.values[0]!==r&&Ut(r)?r:this.range[0]},e.prototype.invert=function(r){var n=this.range;return r<n[0]||r>n[1]?NaN:this.values[0]},e}(yB);function mde(t){var e=t.values,r=t.tickInterval,n=t.tickCount,i=t.showLast;if(Ut(r)){var a=rA(e,function(p,v){return v%r===0}),o=il(e);return i&&il(a)!==o&&a.push(o),a}var s=e.length,l=t.min,u=t.max;if(Gt(l)&&(l=0),Gt(u)&&(u=e.length-1),!Ut(n)||n>=s)return e.slice(l,u+1);if(n<=0||u<=0)return[];for(var c=n===1?s:Math.floor(s/(n-1)),f=[],h=l,d=0;d<n&&!(h>=u);d++)h=Math.min(l+d*c,u),d===n-1&&i?f.push(e[u]):f.push(e[h]);return f}function Kdt(t){var e=t.min,r=t.max,n=t.nice,i=t.tickCount,a=new Qdt;return a.domain([e,r]),n&&a.nice(i),a.ticks(i)}var ED=5,rY=Math.sqrt(50),nY=Math.sqrt(10),iY=Math.sqrt(2),Qdt=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},t.prototype.nice=function(e){var r,n;e===void 0&&(e=ED);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(r=[l,s],s=r[0],l=r[1],n=[o,a],a=n[0],o=n[1]),u=u3(s,l,e),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=u3(s,l,e)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=u3(s,l,e)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},t.prototype.ticks=function(e){return e===void 0&&(e=ED),Zdt(this._domain[0],this._domain[this._domain.length-1],e||ED)},t}();function Zdt(t,e,r){var n,i=-1,a,o,s;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((n=e<t)&&(a=t,t=e,e=a),(s=u3(t,e,r))===0||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(t+i)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(t-i)/s;return n&&o.reverse(),o}function u3(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=rY?10:a>=nY?5:a>=iY?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=rY?10:a>=nY?5:a>=iY?2:1)}function aY(t,e,r){var n;return r==="ceil"?n=Math.ceil(t/e):r==="floor"?n=Math.floor(t/e):n=Math.round(t/e),n*e}function bB(t,e,r){var n=aY(t,r,"floor"),i=aY(e,r,"ceil");n=$_(n,r),i=$_(i,r);for(var a=[],o=Math.max((i-n)/(Math.pow(2,12)-1),r),s=n;s<=i;s=s+o){var l=$_(s,o);a.push(l)}return{min:n,max:i,ticks:a}}function xB(t,e,r){var n,i=t.minLimit,a=t.maxLimit,o=t.min,s=t.max,l=t.tickCount,u=l===void 0?5:l,c=Gt(i)?Gt(e)?o:e:i,f=Gt(a)?Gt(r)?s:r:a;if(c>f&&(n=[c,f],f=n[0],c=n[1]),u<=2)return[c,f];for(var h=(f-c)/(u-1),d=[],p=0;p<u;p++)d.push(c+h*p);return d}function Jdt(t){var e=t.min,r=t.max,n=t.tickInterval,i=t.minLimit,a=t.maxLimit,o=Kdt(t);return!Gt(i)||!Gt(a)?xB(t,hc(o),il(o)):n?bB(e,r,n).ticks:o}function Ap(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var ept=[1,5,2,2.5,4,3],oY=Number.EPSILON*100;function tpt(t,e){return(t%e+e)%e}function rpt(t){return Math.round(t*1e12)/1e12}function npt(t,e,r,n,i,a){var o=aA(e),s=s8(e,t),l=0,u=tpt(n,a);return(u<oY||a-u<oY)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-r+l}function ipt(t,e,r){var n=aA(e),i=s8(e,t),a=1;return 1-i/(n-1)-r+a}function apt(t,e,r,n,i,a){var o=(t-1)/(a-i),s=(e-1)/(Math.max(a,n)-Math.min(r,i));return 2-Math.max(o/s,s/o)}function opt(t,e){return t>=e?2-(t-1)/(e-1):1}function spt(t,e,r,n){var i=e-t;return 1-.5*(Math.pow(e-n,2)+Math.pow(t-r,2))/Math.pow(.1*i,2)}function lpt(t,e,r){var n=e-t;if(r>n){var i=(r-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function upt(){return 1}function cpt(t,e,r,n,i,a){r===void 0&&(r=5),n===void 0&&(n=!0),i===void 0&&(i=ept),a===void 0&&(a=[.25,.2,.5,.05]);var o=r<0?0:Math.round(r);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-t<1e-15||o===1)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=r||5,l=(e-t)/s;return{min:t,max:e,ticks:Array(s).fill(null).map(function(G,q){return Ap(t+l*q)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var f=0;f<i.length;f+=1){var h=i[f],d=ipt(h,i,c);if(a[0]*d+a[1]+a[2]+a[3]<u.score){c=1/0;break}for(var p=2;p<1/0;){var v=opt(p,o);if(a[0]*d+a[1]+a[2]*v+a[3]<u.score)break;for(var g=(e-t)/(p+1)/c/h,m=Math.ceil(Math.log10(g));m<1/0;){var y=c*h*Math.pow(10,m),w=lpt(t,e,y*(p-1));if(a[0]*d+a[1]*w+a[2]*v+a[3]<u.score)break;var b=Math.floor(e/y)*c-(p-1)*c,x=Math.ceil(t/y)*c;if(b<=x)for(var s=x-b,S=0;S<=s;S+=1){var E=b+S,_=E*(y/c),k=_+y*(p-1),C=y,M=npt(h,i,c,_,k,C),A=spt(t,e,_,k),T=apt(p,o,t,e,_,k),D=upt(),F=a[0]*M+a[1]*A+a[2]*T+a[3]*D;F>u.score&&(!n||_<=t&&k>=e)&&(u.lmin=_,u.lmax=k,u.lstep=C,u.score=F)}m+=1}p+=1}}c+=1}var R=Ap(u.lmax),B=Ap(u.lmin),N=Ap(u.lstep),O=Math.floor(rpt((R-B)/N))+1,L=new Array(O);L[0]=Ap(B);for(var f=1;f<O;f++)L[f]=Ap(L[f-1]+N);return{min:Math.min(t,hc(L)),max:Math.max(e,il(L)),ticks:L}}function fpt(t){var e=t.min,r=t.max,n=t.tickCount,i=t.nice,a=t.tickInterval,o=t.minLimit,s=t.maxLimit,l=cpt(e,r,n,i).ticks;return!Gt(o)||!Gt(s)?xB(t,hc(l),il(l)):a?bB(e,r,a).ticks:l}function hpt(t){var e=t.base,r=t.tickCount,n=t.min,i=t.max,a=t.values,o,s=Us(e,i);if(n>0)o=Math.floor(Us(e,n));else{var l=pde(a,e,i);o=Math.floor(Us(e,l))}for(var u=s-o,c=Math.ceil(u/r),f=[],h=o;h<s+c;h=h+c)f.push(Math.pow(e,h));return n<=0&&f.unshift(0),f}function yde(t,e,r){if(r===void 0&&(r=5),t===e)return{max:e,min:t,ticks:[t]};var n=r<0?0:Math.round(r);if(n===0)return{max:e,min:t,ticks:[]};var i=1.5,a=.5+1.5*i,o=e-t,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(e/u),f=Math.floor(t/u),h=Math.max(c*u,e),d=Math.min(f*u,t),p=Math.floor((h-d)/u)+1,v=new Array(p),g=0;g<p;g++)v[g]=Ap(d+g*u);return{min:d,max:h,ticks:v}}function dpt(t){var e=t.exponent,r=t.tickCount,n=Math.ceil(Ih(e,t.max)),i=Math.floor(Ih(e,t.min)),a=yde(i,n,r).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function ppt(t,e){var r=t.length*e;return e===1?t[t.length-1]:e===0?t[0]:r%1!==0?t[Math.ceil(r)-1]:t.length%2===0?(t[r-1]+t[r])/2:t[r]}function vpt(t){var e=t.tickCount,r=t.values;if(!r||!r.length)return[];for(var n=r.slice().sort(function(s,l){return s-l}),i=[],a=0;a<e;a++){var o=a/(e-1);i.push(ppt(n,o))}return i}function gpt(t){var e=t.min,r=t.max,n=t.tickCount,i=t.tickInterval,a=t.minLimit,o=t.maxLimit,s=yde(e,r,n).ticks;return!Gt(a)||!Gt(o)?xB(t,hc(s),il(s)):i?bB(e,r,i).ticks:s}function mpt(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickInterval,a=t.tickCount;if(i)a=Math.ceil((r-e)/i);else{i=Gdt(e,r,a)[1];var o=(r-e)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}i=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),i);for(var l=[],u=e;u<r+i;u+=i)l.push(u);return l}function ypt(t){var e=mde(j({showLast:!0},t));return e}function Dk(t){return new Date(t).getFullYear()}function wpt(t){return new Date(t,0,1).getTime()}function K4(t){return new Date(t).getMonth()}function bpt(t,e){var r=Dk(t),n=Dk(e),i=K4(t),a=K4(e);return(n-r)*12+(a-i)%12}function xpt(t,e){return new Date(t,e,1).getTime()}function Spt(t,e){return Math.ceil((e-t)/pf)}function Ept(t,e){return Math.ceil((e-t)/uv)}function _pt(t,e){return Math.ceil((e-t)/(60*1e3))}function Cpt(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickCount,a=t.tickInterval,o=[];a||(a=(r-e)/i,n&&a<n&&(a=n)),a=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),a);var s=Dk(e);if(a>tY)for(var l=Dk(r),u=Math.ceil(a/tY),c=s;c<=l+u;c=c+u)o.push(wpt(c));else if(a>k2)for(var f=Math.ceil(a/k2),h=K4(e),d=bpt(e,r),c=0;c<=d+f;c=c+f)o.push(xpt(s,c+h));else if(a>pf)for(var p=new Date(e),v=p.getFullYear(),g=p.getMonth(),m=p.getDate(),y=Math.ceil(a/pf),w=Spt(e,r),c=0;c<w+y;c=c+y)o.push(new Date(v,g,m+c).getTime());else if(a>uv)for(var p=new Date(e),v=p.getFullYear(),g=p.getMonth(),y=p.getDate(),b=p.getHours(),x=Math.ceil(a/uv),S=Ept(e,r),c=0;c<=S+x;c=c+x)o.push(new Date(v,g,y,b+c).getTime());else if(a>lv)for(var E=_pt(e,r),_=Math.ceil(a/lv),c=0;c<=E+_;c=c+_)o.push(e+c*lv);else{var k=a;k<Rl&&(k=Rl);for(var C=Math.floor(e/Rl)*Rl,M=Math.ceil((r-e)/Rl),A=Math.ceil(k/Rl),c=0;c<M+A;c=c+A)o.push(C+c*Rl)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Tc("cat",mde);Tc("time-cat",ypt);Tc("wilkinson-extended",fpt);Tc("r-pretty",gpt);Tc("time",mpt);Tc("time-pretty",Cpt);Tc("log",hpt);Tc("pow",dpt);Tc("quantile",vpt);Tc("d3-linear",Jdt);Oc("cat",ax);Oc("category",ax);Oc("identity",qdt);Oc("linear",ox);Oc("log",Wdt);Oc("pow",Vdt);Oc("time",Hdt);Oc("timeCat",Udt);Oc("quantize",vde);Oc("quantile",Xdt);var kpt=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};function Mpt(t){return kv(t,function(e,r){var n=r===0?"M":"L",i=e[0],a=e[1];return[n,i,a]})}function wde(t){return Mpt(t)}function Apt(t){if(t.length<=2)return wde(t);var e=[];Te(t,function(o){Od(o,e.slice(e.length-2))||e.push(o[0],o[1])});var r=mle(e,!1),n=hc(t),i=n[0],a=n[1];return r.unshift(["M",i,a]),r}function Tpt(t,e,r,n){n===void 0&&(n=!0);var i=new ox({values:t}),a=new ax({values:kv(t,function(s,l){return l})}),o=kv(t,function(s,l){return[a.scale(l)*e,r-i.scale(s)*r]});return n?Apt(o):wde(o)}function Opt(t,e,r,n){n===void 0&&(n=5);for(var i=new ox({values:t}),a=new ax({values:kv(t,function(h,d){return d})}),o=kv(t,function(h,d){return[a.scale(d)*e,r-i.scale(h)*r]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:r,size:n},f=Ppt(c);s.push.apply(s,f)}return Lpt(s)}function Ipt(t,e){var r=new ox({values:t}),n=Math.max(0,r.min);return e-r.scale(n)*e}function Dpt(t,e,r,n){var i=kpt([],t,!0),a=Ipt(n,r);return i.push(["L",e,a]),i.push(["L",0,a]),i.push(["Z"]),i}function Ppt(t){var e=t.x,r=t.y,n=t.y0,i=t.size,a,o;Xt(r)?(a=r[0],o=r[1]):(a=n,o=r);var s,l;Xt(e)?(s=e[0],l=e[1]):(s=e-i/2,l=e+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function Lpt(t,e){e===void 0&&(e=!0);var r=[],n=t[0];r.push(["M",n.x,n.y]);for(var i=1,a=t.length;i<a;i++)r.push(["L",t[i].x,t[i].y]);return e&&(r.push(["L",n.x,n.y]),r.push(["z"])),r}var M2=function(){return M2=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M2.apply(this,arguments)},Rpt={stroke:"#C5C5C5",strokeOpacity:.85},Npt={fill:"#CACED4",opacity:.85},Fpt=function(){function t(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.width,s=o===void 0?200:o,l=e.height,u=l===void 0?26:l,c=e.smooth,f=c===void 0?!0:c,h=e.isArea,d=h===void 0?!1:h,p=e.data,v=p===void 0?[]:p,g=e.lineStyle,m=e.areaStyle,y=e.group,w=e.interval,b=w===void 0?null:w;this.group=y,this.x=n,this.y=a,this.width=s,this.height=u,this.data=v,this.smooth=f,this.isArea=d,this.lineStyle=Object.assign({},Rpt,g),this.areaStyle=Object.assign({},Npt,m),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var e=this,r=e.x,n=e.y,i=e.width,a=e.height;e.barWidth;var o=e.data,s=e.smooth,l=e.isArea,u=e.lineStyle,c=e.areaStyle,f=this.group.addGroup({name:"trend-group"});if(o){var h=Tpt(o,i,a,s);if(f.addShape("path",{attrs:M2({path:h},u),name:"trend-line"}),l){var d=Dpt(h,i,a,o);f.addShape("path",{attrs:M2({path:d},c),name:"trend-area"})}}this.intervalConfig&&f.addShape("path",{attrs:M2({path:Opt(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),f.move(r,n)},t.prototype.destory=function(){this.group.destroy()},t}();const Bpt=Fpt;var _0=function(){return _0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_0.apply(this,arguments)},$pt={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},zpt={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},jpt=function(){function t(e){var r=e.group,n=e.name,i=e.type,a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s,u=e.width,c=u===void 0?2:u,f=e.height,h=f===void 0?24:f,d=e.style,p=d===void 0?{}:d;this.group=r,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=h,i==="trend"?this.style=_0(_0({},$pt),p):i==="simple"&&(this.style=_0(_0({},zpt),p)),this.renderHandle()}return t.prototype.setX=function(e){this.setXY(e,void 0)},t.prototype.setY=function(e){this.setXY(void 0,e)},t.prototype.setXY=function(e,r){Ut(e)&&(this.x=e),Ut(r)&&(this.y=r),this.updateXY()},t.prototype.renderHandle=function(){var e=this,r=e.width,n=e.height,i=e.style,a=e.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:r,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:0,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:n,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:r/2,y:n/2,r:2*r,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var e=this,r=this.name;this.handleGroup.on("".concat(r,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.topCircle.attr("fill",n)}),this.handleGroup.on("".concat(r,"-handler:mouseleave"),function(){var n=e.style.fill;e.topCircle.attr("fill",n)})},t.prototype.bindTrendEvents=function(){var e=this,r=this.name;this.handleGroup.on("".concat(r,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(r,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}();const sY=jpt;var wn=function(){return wn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wn.apply(this,arguments)},Gpt=dl,Upt={fill:"#416180",opacity:.05},Wpt={fill:"#416180",opacity:.15,radius:5},Vpt={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Q4=2,Hpt={width:Q4,height:24},Xpt={textBaseline:"middle",fill:"#000",opacity:.45},Ypt={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},qpt={lineWidth:1,stroke:"#ccc"},Kpt=function(){function t(e){var r=this;this.prevX=0,this.onMouseDown=function(G){return function(q){r.currentHandler=G;var K=q.originalEvent;K.stopPropagation(),K.preventDefault(),r.prevX=af(K,"touches.0.pageX",K.pageX);var V=r.canvas.get("container");V.addEventListener("mousemove",r.onMouseMove),V.addEventListener("mouseup",r.onMouseUp),V.addEventListener("mouseleave",r.onMouseUp),V.addEventListener("touchmove",r.onMouseMove),V.addEventListener("touchend",r.onMouseUp),V.addEventListener("touchcancel",r.onMouseUp)}},this.onMouseMove=function(G){G.stopPropagation(),G.preventDefault();var q=af(G,"touches.0.pageX",G.pageX),K=q-r.prevX,V=r.adjustOffsetRange(K/r.width);r.updateStartEnd(V),r.updateUI(),r.prevX=q},this.onMouseUp=function(){r.currentHandler&&(r.currentHandler=void 0);var G=r.canvas.get("container");G&&(G.removeEventListener("mousemove",r.onMouseMove),G.removeEventListener("mouseup",r.onMouseUp),G.removeEventListener("mouseleave",r.onMouseUp),G.removeEventListener("touchmove",r.onMouseMove),G.removeEventListener("touchend",r.onMouseUp),G.removeEventListener("touchcancel",r.onMouseUp))};var n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=s===void 0?100:s,u=e.height,c=e.padding,f=c===void 0?10:c,h=e.trendCfg,d=e.controllerCfg,p=d===void 0?{speed:1}:d,v=e.backgroundStyle,g=v===void 0?{}:v,m=e.foregroundStyle,y=m===void 0?{}:m,w=e.handlerStyle,b=w===void 0?{}:w,x=e.textStyle,S=x===void 0?{}:x,E=e.start,_=E===void 0?0:E,k=e.end,C=k===void 0?1:k,M=e.minText,A=M===void 0?"":M,T=e.maxText,D=T===void 0?"":T,F=e.group,R=e.graph,B=e.canvas,N=e.tick,O=N===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(q){return q},ticks:[]}:N,L=e.type;this.graph=R,this.canvas=B,this.group=F,this.timeBarType=L,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=O.ticks,this.trendCfg=h,this.controllerCfg=p,this.currentSpeed=p.speed||1,this.tickLabelFormatter=O.tickLabelFormatter,L==="trend"?this.backgroundStyle=wn(wn({},Upt),g):L==="simple"&&(this.backgroundStyle=wn(wn({},Wpt),g)),this.foregroundStyle=wn(wn({},Vpt),y),this.handlerStyle=wn(wn({},Hpt),b),this.textStyle=wn(wn({},Xpt),S),this.tickLabelStyle=wn(wn({},Ypt),O.tickLabelStyle),this.tickLineStyle=wn(wn({},qpt),O.tickLineStyle),this.currentMode=p.defaultTimeType||Wu.RANGE,this.start=_,this.end=C,this.minText=A,this.maxText=D,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(e){var r=e.x,n=e.y,i=e.width,a=e.height,o=e.minText,s=e.maxText,l=e.start,u=e.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),qt(this,{x:r,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},t.prototype.setText=function(e,r){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",r)},t.prototype.renderSlider=function(){var e=this,r=this,n=r.width,i=r.height,a=r.timeBarType;if(a==="trend"&&aA(af(this.trendCfg,"data"))){var o=new Bpt(wn(wn({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:wn({x:0,y:0,width:n,height:i},this.backgroundStyle),name:"background"});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:wn({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:wn({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=l.addShape("text",{attrs:wn({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=l.addShape("text",{attrs:wn({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:wn({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(m){m.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(m){m.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=af(this.handlerStyle,"width",2),c=af(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new sY({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new sY({name:"maxHandlerShape",group:h,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.ticks,p=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(m){m.destroy()});var v=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map(function(m,y){e.tickPosList.push(e.x+y*p);var w;e.tickLabelFormatter?(w=e.tickLabelFormatter(m),!et(w)&&w&&(w=m.date)):w=m.date;var b=e.x+y*p,x=e.y+i+5,S=e.group.addShape("text",{attrs:wn({x:b,y:x,text:w,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(Ut(g)&&y!==d.length-1){var E=Gpt([1,0,0,0,1,0,0,0,1],[["t",-b,-x],["r",g],["t",b-5,x+2]]);S.attr({textAlign:"left",matrix:E})}y===0?S.attr({textAlign:"left"}):y!==d.length-1&&S.attr({textAlign:"right"});var _=e.group.addShape("line",{attrs:wn({x1:e.x+y*p,y1:e.y+i+2,x2:e.x+y*p,y2:e.y+i+6},e.tickLineStyle),name:"tick-line"});_.toBack();var k=S.getBBox();return k.minX>v?(S.show(),_.show(),v=k.minX+k.width+10):(S.hide(),_.hide()),S}),this.controllerBtnGroup=new tde(wn({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Wu.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var e=this,r=this.group.find(function(i){return i.get("name")==="minHandlerShape"});r&&(r.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),r.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(rd,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat($w,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(zw,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(sv,function(i){var a=i.type,o=i.speed;e.currentSpeed=o,e.currentMode=a,a===Wu.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Wu.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},t.prototype.adjustTickIndex=function(e){for(var r=0;r<this.tickPosList.length-1;r++)if(this.tickPosList[r]<=e&&e<=this.tickPosList[r+1])return Math.abs(this.tickPosList[r]-e)<Math.abs(e-this.tickPosList[r+1])?r:r+1;return 0},t.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var r=0-this.start,n=1-this.start;return Math.min(n,Math.max(r,e))}case this.maxHandlerShape:{var r=0-this.end,n=1-this.end;return Math.min(n,Math.max(r,e))}case this.foregroundShape:{var r=0-this.start,n=1-this.end;return Math.min(n,Math.max(r,e))}default:return 0}},t.prototype.updateStartEnd=function(e){var r=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n==null?void 0:n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},t.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var r=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",r),this.foregroundShape.attr("width",n-r);var i=af(this.handlerStyle,"width",Q4);this.setText(this.minText,this.maxText);var a=this.dodgeText([r,n]),o=a[0],s=a[1];this.minHandlerShape.setX(r-i/2),Te(o,function(l,u){return e.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),Te(s,function(l,u){return e.maxTextShape.attr(u,l)}),this.currentMode===Wu.RANGE?this.graph.emit(Ku,{value:[this.start,this.end].sort()}):this.currentMode===Wu.SINGLE&&this.graph.emit(Ku,{value:[this.end,this.end]})},t.prototype.dodgeText=function(e){var r,n,i=2,a=af(this.handlerStyle,"width",Q4),o=this.minTextShape,s=this.maxTextShape,l=e[0],u=e[1],c=!1;l>u&&(r=[u,l],l=r[0],u=r[1],n=[s,o],o=n[0],s=n[1],c=!0);var f=o.getBBox(),h=s.getBBox(),d=null,p=null;return this.timeBarType==="trend"?(d=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},p=u+h.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(d=o.attr("x")>f.width?{x:l,textAlign:"center"}:{x:l,textAlign:"left"},p=s.attr("x")>this.width-h.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),c?[p,d]:[d,p]},t.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var r=e,n=r.ticks,i=r.width,a=e.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=e.adjustOffsetRange(s/e.width);e.updateStartEnd(l),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},t.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Qhe,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Zhe,null))},t.prototype.destory=function(){this.graph.off(Ku,function(){});var e=this.group,r=e.find(function(i){return i.get("name")==="minHandlerShape"});r&&(r.off("minHandlerShape-handler:mousedown"),r.off("minHandlerShape-handler:touchstart"),r.destroy());var n=e.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(rd,":click")),e.off("".concat($w,":click")),e.off("".concat(zw,":click")),e.off(sv),e.destroy(),this.trendComponent&&this.trendComponent.destory()},t}();const Qpt=Kpt;var Zpt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),of=function(){return of=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},of.apply(this,arguments)},Jpt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},evt=4,tvt=26,rvt=function(t){Zpt(e,t);function e(r){var n=t.call(this,r)||this;return n.afterrenderListener=function(i){return n.filterData({})},n.valueChangeListener=ww(function(i){return n.filterData(i)},200,{trailing:!0,leading:!0}),n.changeData=function(i){var a=n.get("graph");n.cacheGraphData=a.get("data"),n.filterData({})},n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var r=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=n.putInGraphContainer,s=this.get("className")||"g6-component-timebar",l=this.get("container"),u;if(l?(et(l)&&(l=document.getElementById(l)),u=l):(u=Cn("<div class='".concat(s,"'></div>")),Mr(u,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(u)}this.set("timeBarContainer",u);var f,h=r.get("renderer");h==="SVG"?f=new y2({container:u,width:i,height:a}):f=new cf({container:u,width:i,height:a}),this.get("containerCSS")&&Mr(u,this.get("containerCSS")),this.set("canvas",f)},e.prototype.init=function(){this.initContainer();var r=this.get("canvas"),n=r.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(r){var n=this.get("timebar");n&&(n.isPlay=!!r,n.changePlayStatus())},e.prototype.renderTrend=function(){var r=this,n=this._cfgs,i=n.width,a=n.x,o=n.y,s=n.padding,l=n.type,u=n.trend,c=n.slider,f=n.controllerCfg,h=n.textStyle,d=n.tick,p=n.backgroundStyle,v=n.foregroundStyle,g=u.data,m=Jpt(u,["data"]),y=i-2*s,w=l==="trend"?tvt:evt,b=this.get("graph"),x=this.get("timeBarGroup"),S=this.get("canvas"),E=null;if(l==="trend"||l==="simple"){var _=this.get("getValue");E=new Qpt(of(of({graph:b,canvas:S,group:x,type:l,x:a+s,y:l==="trend"?o+s:o+s+15,width:y,height:w,padding:s,backgroundStyle:p,foregroundStyle:v,trendCfg:of(of({},m),{data:g.map(function(C){return(_==null?void 0:_(C))||C.value})})},c),{tick:{ticks:g,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:of(of({},c.handlerStyle),{height:c.height||w}),controllerCfg:f,textStyle:h}))}else l==="tick"&&(E=new Ddt(of({graph:b,canvas:S,group:x,x:a+s,y:o+s,width:i,height:42,padding:2,controllerCfg:f},d)));var k=function C(){var M=r.get("timebar");M.draggingHandler=!1,M.isPlay&&(M.isPlay=!1,M.currentHandler=M.maxHandlerShape,M.changePlayStatus()),document.removeEventListener("mouseup",C)};S.on("mousedown",function(C){(C.target.get("name")==="maxHandlerShape-handler"||C.target.get("name")==="minHandlerShape-handler"||C.target===E.foregroundShape)&&document.addEventListener("mouseup",k)}),this.set("timebar",E)},e.prototype.filterData=function(r){var n,i=r.value;if(!i){i=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end):a==="tick"&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("请配置 TimeBar 组件的数据");return}var l=this.get("rangeChange"),u=this.get("graph"),c=Math.round(o.length*i[0]),f=Math.round(o.length*i[1]);f=f>=o.length?o.length-1:f,c=c>=o.length?o.length-1:c;var h=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=h?h(o[c]):o[c].date,p=h?h(o[f]):o[f].date;if(s!=="tick"){var v=this.get("timebar");v.setText(d,p)}if(l)l(u,d,p);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=u.get("data"));var g=this.get("filterItemTypes"),m=this.get("changeData"),y=this.get("getDate"),w=this.get("shouldIgnore"),b=o[c].date,x=o[f].date;if(m||m===void 0){var S=this.cacheGraphData.nodes,E=this.cacheGraphData.edges,_={},k={};u.getNodes().forEach(function(C){return _[C.getID()]=!0}),u.getEdges().forEach(function(C){return k[C.getID()]=!0}),g.includes("node")&&(S==null||S.forEach(function(C){var M=+((y==null?void 0:y(C))||C.date),A=M>=b&&M<=x||(w==null?void 0:w("node",C,{min:b,max:x})),T=_[C.id];T&&!A?(u.removeItem(C.id),_[C.id]=!1):!T&&A&&(u.addItem("node",C),_[C.id]=!0)}),E==null||E.forEach(function(C){var M=_[C.source]&&_[C.target]||(w==null?void 0:w("edge",C,{min:b,max:x})),A=!!u.findById(C.id);A&&!M?(u.removeItem(C.id),k[C.id]=!1):!A&&M?(u.addItem("edge",C),k[C.id]=!0):A||(k[C.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(E==null||E.filter(function(C){var M=+((y==null?void 0:y(C))||C.date),A=M>=b&&M<=x||(w==null?void 0:w("edge",C,{min:b,max:x})),T=_[C.source]&&_[C.target],D=A&&T,F=k[C.id];F&&!D?(k[C.id]=!1,u.removeItem(C.id)):!F&&D&&(k[C.id]=!0,u.addItem("edge",C))}))}else g.includes("node")&&u.getNodes().forEach(function(C){var M=C.getModel();if(!(w!=null&&w("node",M,{min:b,max:x}))){var A=+((y==null?void 0:y(M))||M.date);A<b||A>x?u.hideItem(C):u.showItem(C)}}),(this.get("filterEdge")||g.includes("edge"))&&u.getEdges().forEach(function(C){var M=C.getModel();if(!(w!=null&&w("edge",M,{min:o[c].date,max:o[f].date}))){var A=+((y==null?void 0:y(M))||M.date);if(A<o[c].date||A>o[f].date)u.hideItem(C);else{var T=C.getSource().isVisible(),D=C.getTarget().isVisible();T&&D&&u.showItem(C)}}})}},e.prototype.initEvent=function(){var r=this.get("graph");r.on("afterchangedata",this.changeData),r.on("afterrender",this.afterrenderListener),r.on(Ku,this.valueChangeListener)},e.prototype.destroy=function(){var r=this.get("graph");r.off("afterchangedata",this.changeData),r.off("afterrender",this.afterrenderListener),r.off(Ku,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),t.prototype.destroy.call(this);var i=this.get("timeBarContainer");if(i){var a=this.get("container");a||(a=this.get("graph").get("container")),et(a)&&(a=document.getElementById(a)),a===i&&(a=a.parentElement),a.removeChild(i)}},e}(jo);const nvt=rvt;var ivt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),avt=_a.applyMatrix;function ovt(t,e){var r,n;if(t.naturalWidth)r=t.naturalWidth,n=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){e&&e(i.width,i.height)}}return[r,n]}var svt=function(t){ivt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var r=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");et(a)&&(a=document.getElementById(a));var o=Cn("<div class=".concat(n.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,l=0,u=!1,c=0,f=0,h=0,d=0,p=0,v=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;h=parseInt(m.width,10),d=parseInt(m.height,10);var y=r.get("width"),w=r.get("height");h>y||d>w||(v=i.getZoom(),p=r.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||Gt(g.clientX)||Gt(g.clientY))){var m=r.get("width"),y=r.get("height"),w=o.style;c=parseInt(w.left,10),f=parseInt(w.top,10),h=parseInt(w.width,10),d=parseInt(w.height,10);var b=s-g.clientX,x=l-g.clientY;c-b<0?b=c:c-b+h>=m&&(b=0),f-x<0?x=f:f-x+d>=y&&(x=0),c-=b,f-=x,Mr(o,{left:"".concat(c,"px"),top:"".concat(f,"px")}),i.translate(b*v/p,x*v/p),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var r=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],h=[c.maxX-c.minX,c.maxY-c.minY],d={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(d.width=h[0],d.height=d.width/l):(d.height=h[1],d.width=d.height*l),d.minX=f[0]-d.width/2,d.minY=f[1]-d.height/2;var p=u.getMatrix();p||(p=[1,0,0,0,1,0,0,0,1]);var v=u8([1,0,0,0,1,0,0,0,1],p),g=avt({x:d.minX,y:d.minY},v),m=a.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var w=o/d.width,b=w*n,x=w*i,S=n*-m.x/d.width,E=i*-m.y/d.height,_=S+b,k=E+x;S<0&&(b+=S,S=0),_>n&&(b=b-(_-n)),E<0&&(x+=E,E=0),k>i&&(x=x-(k-i)),this.set("ratio",r);var C="".concat(S,"px"),M="".concat(E,"px");Mr(y,{left:C,top:M,width:"".concat(b,"px"),height:"".concat(x,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var r=this,n=r.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=r.get("className"),l=r.get("container"),u=r.get("width"),c=r.get("height");!u&&!c&&(u=200),u?(c=o*u,r.set("height",c)):(u=1/o*c,r.set("width",u));var f=Cn("<div class='".concat(s,"' style='width: ").concat(u,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));et(l)&&(l=document.getElementById(l)),l?l.appendChild(f):n.get("container").appendChild(f),r.set("container",f);var h=Cn('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(h);var d=Cn('<span style="display: table-cell; vertical-align: middle; "></span>');h.appendChild(d),r.set("containerDOM",h),r.set("containerSpan",d);var p=Cn('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));r.set("imgDOM",p),r.updateImgSize(),d.appendChild(p),r.updateCanvas()},e.prototype.updateImgSize=function(){var r=this,n=r.get("imgDOM"),i=r.get("width"),a=r.get("height");n.onload=function(){var o=ovt(n);o[0]>o[1]?n.width=i:n.height=a}},e.prototype.updateCanvas=function(){var r=this.get("refresh");if(r){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(r){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",r);var a=Cn('<img alt="" src="'.concat(r,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",a),a.src=r,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},e.prototype.destroy=function(){var r=this.get("container");r.parentNode.removeChild(r)},e}(jo);const lvt=svt;var uvt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z4=function(){return Z4=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Z4.apply(this,arguments)},cvt=_a.distance,lY=.05,uY={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},fvt=function(t){uvt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Dr(uY),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var r;switch(this.get("trigger")){case"click":r={click:"filter"};break;case"drag":r={click:"createDelegate"};break;default:r={mousemove:"filter"};break}return r},e.prototype.init=function(){var r=this,n=r.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";r.set("showNodeLabel",i),r.set("showEdgeLabel",a);var o=r.get("shouldShow");o||r.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(r){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(r),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(r){var n=this;if(!(!r||!r.originalEvent)){r.preventDefault&&r.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(r.clientX,r.clientY),r.originalEvent.wheelDelta<0?a=1-lY:a=1/(1-lY);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||i.get("height"))&&a>1||c<(u||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.filter(r)}},e.prototype.filter=function(r){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:r.x,y:r.y};n.updateDelegate(u,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(m){m.remove(),m.destroy()}),f=[],a.forEach(function(m){var y=m.getModel(),w=y.x,b=y.y;cvt({x:w,y:b},u)<s&&(o[y.id]=m)});var h=i.getEdges(),d=[];h.forEach(function(m){var y=m.getModel(),w=y.source,b=y.target;c(y)&&(l==="only-source"||l==="one"?o[w]&&!o[b]&&d.push(m):l==="only-target"||l==="one"?o[b]&&!o[w]&&d.push(m):l==="both"&&o[w]&&o[b]&&d.push(m))});var p=n.get("showNodeLabel"),v=n.get("showEdgelabel"),g=i.get("group");d.forEach(function(m){var y=m.get("group").get("children");y.forEach(function(w){var b=w.get("type"),x=g.addShape(b,{attrs:w.attr()});f.push(x),p&&b==="text"&&x.set("visible",!0)})}),Object.keys(o).forEach(function(m){var y=o[m],w=y.get("group").clone();if(g.add(w),f.push(w),v)for(var b=w.get("children"),x=0;x<b.length;x++){var S=b[x];S.get("type")==="text"&&S.set("visible",!0)}}),n.set("vShapes",f)},e.prototype.updateParams=function(r){var n=this,i=r.r,a=r.trigger,o=r.minR,s=r.maxR,l=r.scaleRBy,u=r.showLabel,c=r.shouldShow;if(isNaN(r.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},e.prototype.updateDelegate=function(r,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||uY;o=s.addShape("circle",{attrs:Z4({r:n,x:r.x,y:r.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:r.x,y:r.y,r:n});i.set("delegate",o)},e.prototype.clear=function(){var r=this,n=r.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],r.set("vShapes",n);var i=r.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},e.prototype.destroy=function(){this.clear()},e}(jo);const hvt=fvt;var dvt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pvt=_a.pointLineDistance,vvt={stroke:"#FA8C16",lineWidth:1},gvt=function(t){dvt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{line:vvt,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(r){var n=r.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var r=this._cfgs,n=r.horizontalLines,i=r.verticalLines,a=r.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(n["".concat(c,"tltr")]=[u.minX,u.minY,u.maxX,u.minY,l],n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l],n["".concat(c,"blbr")]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n["".concat(c,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i["".concat(c,"tlbl")]=[u.minX,u.minY,u.minX,u.maxY,l],i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l],i["".concat(c,"trbr")]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i["".concat(c,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},e.prototype.show=function(r,n){var i=qt({},r);return this.itemAlign(r,n,i),r},e.prototype.itemAlign=function(r,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x+n.width/2,y:i.y+n.height},d={x:i.x,y:i.y+n.height/2},p={x:i.x+n.width,y:i.y+n.height/2},v=[],g=[],m=null;if(this.clearAlignLine(),Te(s,function(w){w[4].isVisible&&(v.push(a.getLineDisObject(w,c)),v.push(a.getLineDisObject(w,f)),v.push(a.getLineDisObject(w,h)))}),Te(l,function(w){w[4].isVisible&&(g.push(a.getLineDisObject(w,d)),g.push(a.getLineDisObject(w,f)),g.push(a.getLineDisObject(w,p)))}),v.sort(function(w,b){return w.dis-b.dis}),g.sort(function(w,b){return w.dis-b.dis}),v.length!==0&&v[0].dis<u){r.y=v[0].line[1]-v[0].point.y+i.y,m={type:"item",horizontals:[v[0]]};for(var y=1;y<3;y++)v[0].dis===v[y].dis&&m.horizontals.push(v[y])}if(g.length!==0&&g[0].dis<u){r.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.verticals.push(g[y])}m&&(m.bbox=n,this.addAlignLine(m))},e.prototype.addAlignLine=function(r){var n=r.bbox,i=r.type,a=r.horizontals,o=r.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&Te(a,function(h){var d=h.line,p=h.point,v=(d[0]+d[2])/2,g,m;p.x<v?(g=p.x-n.width/2,m=Math.max(d[0],d[2])):(g=p.x+n.width/2,m=Math.min(d[0],d[2]));var y=qt({x1:g,y1:d[1],x2:m,y2:d[1]},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}),o&&Te(o,function(h){var d=h.line,p=h.point,v=(d[1]+d[3])/2,g,m;p.y<v?(g=p.y-n.height/2,m=Math.max(d[1],d[3])):(g=p.y+n.height/2,m=Math.min(d[1],d[3]));var y=qt({x1:d[0],y1:g,x2:d[0],y2:m},l),w=f.addShape("line",{attrs:y,capture:!1});u.push(w)}))},e.prototype.getLineDisObject=function(r,n){return{line:r,point:n,dis:pvt(r,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var r=this._cfgs.alignLines;Te(r,function(n){n.remove()}),r.length=0},e.prototype.destory=function(){var r=this._cfgs,n=r.horizontalLines,i=r.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n["".concat(l,"tltr")],delete n["".concat(l,"lcrc")],delete n["".concat(l,"blbr")],delete i["".concat(l,"tlbl")],delete i["".concat(l,"tcbc")],delete i["".concat(l,"trbr")]}),this.clearAlignLine()},e}(jo),mvt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gn=function(){return Gn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gn.apply(this,arguments)},yvt=["click","mouseenter"],wvt=function(t){mvt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var r=this.get("filter")||{},n=r.multiple;n&&r.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=Cn(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();Mr(l,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(r){r===void 0&&(r=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,h={left:(i.getWidth()-r[0])/2+c,top:(i.getHeight()-r[1])/2+f};return l.forEach(function(d){var p=s[u[d]],v=d;switch(d){case"top":p+=f;break;case"left":p+=c;break;case"bottom":p=i.getHeight()-r[1]-p+f,v="top";break;default:p=i.getWidth()-r[0]-p+c,v="left";break}h[v]=p}),h.top+=o+i.getContainer().offsetTop,h.left+=a+i.getContainer().offsetLeft,Object.keys(h).forEach(function(d){h[d]="".concat(h[d],"px")}),h},e.prototype.bindEvents=function(){var r=this,n=r.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";yvt.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=r.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return r.filterData(o)}),a.on("node-container:mouseleave",function(o){r.clearFilter(),r.clearActiveLegend()})):(a.on("node-container:click",function(o){return r.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(r.clearFilter(),r.clearActiveLegend())}))}},e.prototype.changeData=function(r){this.set("data",r);var n=this.render();Mr(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(r){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=r.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var h=f.get("children"),d=h[0],p=h[1];d.attr(Gn(Gn({},d.get("oriAttrs")),s)),p.attr(Gn(Gn({},p.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var h=f.get("children"),d=h[0],p=h[1];d.attr(Gn(Gn({},d.get("oriAttrs")),u)),p.attr(Gn(Gn({},p.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(r,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(r)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(r)===i}):o.get("children").filter(function(l){return!!l.get(r)===i}).concat(s.get("children").filter(function(l){return!!l.get(r)===i}))},e.prototype.clearActiveLegend=function(){var r=this.get("legendCanvas"),n=r.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(r){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(r.target);var c=a.find(function(m){return m.get("name")==="root"}),f=c.find(function(m){return m.get("name")==="node-group"}),h=c.find(function(m){return m.get("name")==="edge-group"}),d=f.get("children").filter(function(m){return m.get("active")}),p=h.get("children").filter(function(m){return m.get("active")}),v=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(y){var w=!1,b=m==="getNodes"?d:p;b.forEach(function(x){var S=i[x.get("id")];w=w||S(y.getModel())}),w?(o.setItemState(y,l,!1),o.setItemState(y,s,!0),v++):(o.setItemState(y,s,!1),o.setItemState(y,l,!0))})}),v||g.forEach(function(m){o[m]().forEach(function(y){o.clearItemStates(y,[l])})})}},e.prototype.clearFilter=function(){var r=this.get("graph"),n=this.get("filter");if(n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";r.getNodes().forEach(function(o){r.clearItemStates(o,[i,a])}),r.getEdges().forEach(function(o){r.clearItemStates(o,[i,a])})}},e.prototype.render=function(){var r=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new cf({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"}),a=i.addGroup({name:"node-group"}),o=i.addGroup({name:"edge-group"});this.set("legendCanvas",n);var s=this.get("itemsData"),l=["nodes","edges"],u=[a,o];l.forEach(function(R,B){s[R].forEach(function(N){var O,L=u[B].addGroup({id:N.id,name:"node-container"}),G,q=N.type,K=r.getShapeSize(N),V=K.width,le=K.height,ge=K.r,xe=r.getStyle(R.substr(0,4),N);switch(N.type){case"circle":G={r:ge,x:0,y:0};break;case"rect":G={width:V,height:le,x:-V/2,y:-le/2};break;case"ellipse":G={rx:V,ry:le,x:0,y:0},q="ellipse";break;case"line":G={x1:-V/2,y1:0,x2:V/2,y2:0},q="line";break;case"quadratic":G={path:[["M",-V/2,0],["Q",0,V/2,V/2,0]]},q="path";break;case"cubic":G={path:[["M",-V/2,0],["C",-V/6,V/2,V/6,-V/2,V/2,0]]},q="path";break;case"diamond":G={path:[["M",0,-le],["L",V,0],["L",0,le],["L",-V,0],["Z"]]},q="path";break;case"triangle":G={path:[["M",-V,le],["L",0,-le],["L",V,le],["Z"]]},q="path";break;case"star":G={path:_a.getStarPath(ge*3,ge*1.2)},q="path";break;default:G={r:ge,x:0,y:0};break}var Ie=L.addShape(q,{attrs:Gn(Gn({},G),xe),name:"".concat(N.type,"-node-keyShape"),oriAttrs:Gn({opacity:1},xe)});if(N.label){var He=Ie.getBBox(),Ge=((O=N.labelCfg)===null||O===void 0?void 0:O.style)||{},ht=Gn({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Ge);L.addShape("text",{attrs:Gn({x:He.maxX+4,y:0,text:N.label},ht),className:"legend-label",name:"".concat(N.type,"-node-text"),oriAttrs:ht})}})});var c=this.get("padding"),f,h=i.find(function(R){return R.get("name")==="title-container"}),d={height:0,maxY:0,width:0};if(this.get("title")){h||(h=i.addGroup({name:"title-container"}));var p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},v=this.get("titleConfig")||{},g=Object.assign(p,v.style||{});f=h.addShape("text",{attrs:Gn({text:this.get("title")},g)}),d=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,v.offsetX,v.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),y=a.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=d.maxY<y.minY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1];a.setMatrix(x),m=i.getCanvasBBox();var S=[m.minX+m.width+c[1],m.minY+m.height+c[2]];if(f){var v=Gn({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=h.getCanvasBBox();var E=h.getMatrix()||[1,0,0,0,1,0,0,0,1];v.position==="center"?E[6]=S[0]/2+v.offsetX:v.position==="right"?(E[6]=S[0]-c[3]+v.offsetX,f.attr({textAlign:"right"})):(E[6]=c[3]+v.offsetX,f.attr({textAlign:"left"})),h.setMatrix(E),d=h.getCanvasBBox(),w=y.minX<0?Math.abs(y.minX)+c[3]:c[3],b=y.minY<d.maxY?Math.abs(d.maxY-y.minY)+c[0]:d.maxY+c[0],x=[1,0,0,0,1,0,w,b,1],a.setMatrix(x);var _=[1,0,0,0,1,0,w,b,1];this.get("layout")==="vertical"?_[6]+=y.maxX+this.get("horiSep"):_[7]+=y.maxY+this.get("vertiSep"),o.setMatrix(_)}else{y=a.getCanvasBBox();var k=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?k[6]+=x[6]+y.maxX+this.get("horiSep"):k[7]+=x[7]+y.maxY+this.get("vertiSep"),o.setMatrix(k)}m=i.getCanvasBBox(),y=a.getCanvasBBox(),x=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var C=o.getMatrix()||[1,0,0,0,1,0,0,0,1],M=o.getCanvasBBox();S=[Math.max(y.width+x[6],M.width+C[6])+c[1],Math.max(y.height+x[7],M.height+C[7])+c[2]],n.changeSize(S[0],S[1]);var A=this.get("containerStyle"),T=i.getMatrix()||[1,0,0,0,1,0,0,0,1],D=_a.invertMatrix({x:0,y:0},T),F=i.addShape("rect",{attrs:Gn({x:D.x+(A.lineWidth||1),y:D.y+(A.lineWidth||1),width:S[0]-2*(A.lineWidth||1),height:S[1]-2*(A.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},A),name:"legend-back-rect",capture:!1});return F.toBack(),S},e.prototype.layoutItems=function(){var r=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=r.find(function(w){return w.get("name")==="root"}),u=l.find(function(w){return w.get("name")==="node-group"}),c=l.find(function(w){return w.get("name")==="edge-group"}),f={min:0,max:-1/0};u.get("children").forEach(function(w,b){b===0&&(f.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),E=x.getBBox(),_=E.width,k=E.height,C=0,M=0;a==="vertical"?(C=s[1],M=s[0]+_/2,s[0]=M+S.height+i,S.maxX+C+_/2):(C=s[0]+_/2,M=s[1],s[0]=C+S.width+n,S.maxY+M+k/2),s[0]>f.max&&(f.max=s[0]),w.setMatrix([1,0,0,0,1,0,C,M,1])});var h=f.max-f.min,d={min:0,max:-1/0},p=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?p.maxX+n:p.maxY+i,c.get("children").forEach(function(w,b){b===0&&(d.min=s[0]);var x=w.get("children")[0],S=w.getCanvasBBox(),E=x.getBBox(),_=E.width,k=E.height,C=0,M=0;a==="vertical"?(C=s[1],M=s[0],s[0]=M+S.height+i,w.setMatrix([1,0,0,0,1,0,0,M+k/2,1])):(C=s[0],M=s[1],s[0]=C+S.width+n,w.setMatrix([1,0,0,0,1,0,C+_/2,0,1])),s[0]>d.max&&(d.max=s[0])});var v=d.max-d.min;if(o&&o!==""&&o!=="left"){var g=h-v,m=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:c;y.get("children").forEach(function(w){var b=w.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?b[7]+=m:b[6]+=m,w.setMatrix(b)})}},e.prototype.processData=function(){var r=this.get("data"),n={nodes:[],edges:[]};r.nodes&&(r.nodes.sort(function(i,a){return i.order-a.order}),r.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||bc(),type:i.type||"circle",style:Gn({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:Gn({fontFamily:"Arial"},f)}})})),r.edges&&(r.edges.sort(function(i,a){return i.order-a.order}),r.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||bc(),type:s,size:u,style:Gn({lineWidth:Xt(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Gn({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(r){var n=this.get(r);if(Ut(n))this.set(r,[n,n,n,n]);else if(Xt(n))switch(n.length){case 0:this.set(r,[0,0,0,0]);break;case 1:this.set(r,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(r,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(r,[n[0],n[1],n[2],n[1]]);break}return this.get(r)},e.prototype.getShapeSize=function(r){var n,i,a;return r.size&&(Xt(r.size)?(n=r.size[0],i=r.size[1]||r.size[0],a=r.size[0]/2):Ut(r.size)&&(n=r.size,i=r.size,a=r.size/2)),r.style&&(r.style.width&&(n=r.style.width),r.style.height&&(i=r.style.height),r.style.r&&(a=r.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},e.prototype.getStyle=function(r,n){var i=r==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Gn(Gn({},i),n.style||{})},e.prototype.destroy=function(){var r=this.get("legendCanvas");r==null||r.destroy();var n=this.get("graph"),i=n.get("container"),a=this.get("container");i.removeChild(a)},e}(jo);const bvt=wvt;var xvt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zs=function(){return zs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zs.apply(this,arguments)},cY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};typeof document<"u"&&QA(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var fY="canvas-annotation",Svt=function(t){xvt(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var r={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":r=zs(zs({},r),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return r},e.prototype.getDOMContent=function(r){if(!this.destroyed){var n=r.collapsed,i=r.maxWidth,a=r.title,o=a===void 0?"":a,s=r.content,l=s===void 0?"":s,u=r.borderRadius,c=u===void 0?5:u,f=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",h=n?"":" <p class='g6-annotation-content'>".concat(l,"</p>"),d="<p class='g6-annotation-close'>x</p>",p=n?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(i,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(p,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(f,`
          `).concat(d,`
        </div>
        `).concat(h,`
      </div>`)}},e.prototype.init=function(){var r=this;if(!r.destroyed){var n=r.get("graph"),i=n.getContainer(),a=r.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),i.appendChild(a)):a=i,this.set("container",a);var s=i.getBoundingClientRect(),l=new cf({container:i,width:s.right-s.left,height:s.bottom-s.top});Mr(l.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",Ob(function(){return r.resizeCanvas(r)},100));var u=l.addGroup({id:"annotation-link-group"});r.set("linkGroup",u),r.set("canvas",l),r.get("getTitle")||r.set("getTitle",function(f){var h,d=((h=f==null?void 0:f.getModel)===null||h===void 0?void 0:h.call(f))||{},p=d.label,v=d.id;return p||v||"-"}),r.get("getContent")||r.set("getContent",function(f){var h,d;if(!f)return"-";var p=((h=f.getModel)===null||h===void 0?void 0:h.call(f))||{},v=p.label,g=p.id,m=(d=f.getType)===null||d===void 0?void 0:d.call(f),y=m?"".concat(m,": "):"";return"".concat(y).concat(v||g||"")});var c=r.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var r=this;if(!this.destroyed){var n=this.get("containerCfg"),i=this.get("graph"),a=i.getContainer(),o=a.getBoundingClientRect(),s=o.left,l=o.right,u=o.top,c=o.bottom,f=c-u,h=l-s,d=n.position,p=d===void 0?"top":d,v=n.offsetX,g=v===void 0?0:v,m=n.offsetY,y=m===void 0?0:m,w=cY(n,["position","offsetX","offsetY"]),b=n.height,x=b===void 0?"fit-content":b,S=n.width,E=S===void 0?i.getWidth():S;x==="100%"&&(x=f),E==="100%"&&(E=h);var _="unset",k="unset",C={};switch(p){case"right":_="".concat(f,"px"),C={top:0,right:0},C.right+=s+g,C.top+=u+y;break;case"bottom":k="".concat(h,"px"),C={bottom:0,left:0},C.left+=s+g,C.bottom+=u+y;break;case"top":k="".concat(h,"px");case"left":_="".concat(f,"px");default:C={top:0,left:0},C.left+=s+g,C.top+=u+y;break}Object.keys(C).forEach(function(A){C[A]="".concat(C[A],"px")});var M=Cn("<div class='".concat(n.className," g6-annotation-container'></div>"));return Mr(M,zs(zs({position:"absolute",display:p==="top"||p==="bottom"?"inline-flex":"unset",width:Ut(E)?"".concat(E,"px"):E,height:Ut(x)?"".concat(x,"px"):x,maxHeight:_,maxWidth:k,overflow:"scroll"},C),w)),a.appendChild(M),M.addEventListener("scroll",function(A){r.updateLinks()}),M}},e.prototype.resizeCanvas=function(r){clearTimeout(r.resizeTimer),r.resizeTimer=setTimeout(function(){if(!(!r||r.destroyed)){var n=r.get("container").getBoundingClientRect(),i=n.right-n.left,a=n.bottom-n.top;r.get("canvas").changeSize(i,a),r.updateOutsideCards(r)}},250)},e.prototype.updateOutsideCards=function(r){var n=r||this,i=n.get("cardInfoMap")||{},a=n.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),l=a.getClientByPoint(o.x,o.y),u=l.x,c=l.y,f=a.getClientByPoint(s.x,s.y),h=f.x,d=f.y;Object.values(i).forEach(function(p){var v=p.card;if(v){var g=v.style,m=wp(g.left),y=wp(g.top),w=v.getBoundingClientRect(),b=w.width,x=w.height,S=m,E=y;m+b>h-u&&(S=h-u-b),m<0&&(S=0),y+x>d-c&&(E=d-c-x),y<0&&(E=0),Mr(v,{left:"".concat(S,"px"),top:"".concat(E,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(r){if(!this.destroyed){var n=r.item;this.toggleAnnotation(n)}},e.prototype.hideCards=function(){var r=this;if(!r.destroyed){var n=r.get("cardInfoMap")||{};Object.keys(n).forEach(function(i){r.hideCard(i)})}},e.prototype.toggleAnnotation=function(r,n){var i,a;n===void 0&&(n={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},l=o.get("graph"),u=o.get("container"),c=o.get("containerCfg"),f=Object.assign({},o.get("cardCfg")||{},n),h=f.minHeight,d=f.minWidth,p=f.width,v=f.height,g=f.collapsed,m=g===void 0?!1:g,y=f.x,w=f.y,b=f.title,x=f.content,S=f.maxTitleLength,E=f.defaultBegin,_=cY(f,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),k=o.get("linkGroup"),C=this.get("rows")||[[]],M=(i=r.isCanvas)===null||i===void 0?void 0:i.call(r),A=M?fY:r.getID(),T=s[A]||{},D=T.card,F=T.link,R=T.x,B=T.y,N=T.title,O=T.content,L=this.get("getTitle"),G=this.get("getContent"),q=this.get("getContentPlaceholder")||function(){return""},K=this.get("getTitlePlaceHolder")||function(){return""},V=q(r),le=K(r),ge=Cn(this.getDOMContent(zs({itemId:A,collapsed:m,title:((a=N||b||(L==null?void 0:L(r)))===null||a===void 0?void 0:a.substr(0,S))||le,content:O||x||(G==null?void 0:G(r))||V},_))),xe=Ut(h)?"".concat(h,"px"):h;Mr(ge,{minHeight:m?"unset":xe,minWidth:Ut(d)?"".concat(d,"px"):d,height:v,width:p});var Ie=!!D;Ie?(F==null||F.remove(!0),u.replaceChild(ge,D)):u.appendChild(ge);var He;if(!c){if(He=u.getBoundingClientRect()||{},y!==void 0&&w!==void 0)R=y,B=w;else if(!Ie&&!M){var Ge=He.top,ht=E||{},dt=ht.left,It=ht.right,_t=It===void 0?16:It,yt=ht.top,Tt=yt===void 0?8:yt,kt=ht.bottom,mt=_t,xt=Tt;isNaN(dt)||(mt=u.scrollWidth-dt),isNaN(kt)||(xt=u.scrollHeight-kt);var Nt=Ut(d)?d:100;R=u.scrollWidth-ge.scrollWidth-(C.length-1)*Nt-mt;var De=C[C.length-1],J=(De[De.length-1]||{}).bbox;B=(J==null?void 0:J.bottom)-Ge||xt}Mr(ge,{position:"absolute",left:"".concat(R,"px"),top:"".concat(B,"px"),cusor:c?"unset":"move"})}this.bindListener(ge,A);var P=ge.getBoundingClientRect();if(!M){var me=_D(r,P,l,this.get("canvas")),Ee=this.get("linkStyle");F=k.addShape("path",{attrs:zs({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:me},Ee)})}if(s[A]=zs(zs({},s[A]||{}),{id:A,collapsed:m,card:ge,link:F,x:R,y:B,cardBBox:P,content:O||x,title:N||b,contentPlaceholder:V,titlePlaceholder:le,isCanvas:M}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var fe=!isNaN(y)&&!isNaN(w);if(!Ie&&!M&&!fe){var ke=He.bottom,Be=ke===void 0?0:ke,Ge=He.top;C[C.length-1].push({id:A,bbox:P}),P.top>Be-Ge-P.height-16&&C.push([]),this.set("rows",C)}}this.updateCardSize(A);var $e=this.get("onAnnotationChange");$e==null||$e(s[A],Ie?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("container"),i=this.get("containerCfg").position,a=n.getBoundingClientRect().width,o=getComputedStyle(n),s=wp(o.paddingLeft)+wp(o.paddingRight);a-=s,Object.values(r).forEach(function(l){var u=l.card,c=u.getBoundingClientRect().width;switch(i){case"right":Mr(u,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Mr(u,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(r){if(!this.destroyed){var n=this.get("graph"),i=this.get("cardInfoMap");if(i){var a=i[r].collapsed,o=n.findById(r);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(r):this.toggleAnnotation(o,{collapsed:!a}),i[r]=zs(zs({},i[r]),{collapsed:!a})}}}},e.prototype.hideCard=function(r){if(!this.destroyed){var n=this.get("cardInfoMap");if(!(!n||!n[r])){var i=n[r],a=i.card,o=i.link;Mr(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(n[r],"hide")}}},e.prototype.removeCard=function(r){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=n[r],a=i.card,o=i.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete n[r];var l=this.get("onAnnotationChange");l(i,"remove")}}},e.prototype.bindListener=function(r,n){var i=this;if(!this.destroyed){r.addEventListener("mousemove",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseEnterIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),r.addEventListener("mouseout",function(l){var u;if(l.target.className==="g6-annotation-collapse"?u="collapse":l.target.className==="g6-annotation-expand"?u="expand":l.target.className==="g6-annotation-close"&&(u="close"),u){var c=i.get("cardCfg").onMouseLeaveIcon,f=c===void 0?function(){}:c;f(l,n,u)}}),r.addEventListener("mouseenter",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!0)}var d=u[n].link;if(d){var p=i.get("linkHighlightStyle")||{};d.attr(p)}}}),r.addEventListener("mouseleave",function(l){var u=i.get("cardInfoMap");if(u){var c=i.get("graph"),f=c.findById(n);if(f){var h=i.get("itemHighlightState");c.setItemState(f,h,!1)}var d=u[n].link;if(d){var p=i.get("linkHighlightStyle")||{};Object.keys(p).forEach(function(g){d.attr(g,void 0),d.attr(g,void 0)});var v=i.get("linkStyle");d.attr(v)}}}),r.addEventListener("click",function(l){var u=(i.get("cardCfg")||{}).onClickIcon;if(l.target.className==="g6-annotation-collapse"||l.target.className==="g6-annotation-expand"){var c=i.get("cardCfg").collapseType;c==="hide"?i.hideCard(n):i.handleExpandCollapseCard(n),u==null||u(l,n,l.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(l.target.className==="g6-annotation-close"){var f=i.get("cardCfg").closeType;f==="remove"?i.removeCard(n):i.hideCard(n),u==null||u(l,n,"close")}});var a=this.get("editable");a&&r.addEventListener("dblclick",function(l){var u=i.get("cardInfoMap"),c=(i.get("cardCfg")||{}).maxTitleLength,f=c===void 0?20:c;if(u){var h=l.target,d=h.className;if(!(d!=="g6-annotation-title"&&d!=="g6-annotation-content")){var p=d==="g6-annotation-title"?h.getBoundingClientRect():h.parentNode.getBoundingClientRect(),v=p.width,g=p.height,m=getComputedStyle(h),y=d==="g6-annotation-title"?"input":"textarea",w=Cn("<".concat(y,' class="').concat(d,'-input" type="textarea" style="width:').concat(v,"px; height: ").concat(g,'px; min-width: 16px;"/>')),b=Cn('<div class="'.concat(d,'-input-wrapper" style="width: ').concat(v,"px; height: ").concat(g,"px; min-width: 16px; margin-right: ").concat(m.marginRight,'" />'));b.appendChild(w),h.parentNode.replaceChild(b,h);var x=u[n],S=x.contentPlaceholder,E=x.titlePlaceholder,_=x.content,k=x.title,C=_;d==="g6-annotation-title"?(w.name="title",w.maxLength=f,C=k):w.name="content",C?(w.innerHTML=h.innerHTML,w.value=h.innerHTML):w.placeholder=d==="g6-annotation-title"?E:S,w.focus(),w.addEventListener("blur",function(M){w.value&&(h.innerHTML=w.value,x[w.name||"title"]=w.value),b.parentNode.replaceChild(h,b),i.updateCardSize(n);var A=i.get("onAnnotationChange");A==null||A(x,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];r.draggable=!0,r.addEventListener("dragstart",function(l){var u=l.target.className;if(!o.includes(u)){var c=r.style;i.set("dragging",{card:r,x:l.clientX,y:l.clientY,left:wp(c.left),top:wp(c.top)})}}),r.addEventListener("drag",function(l){l.preventDefault();var u=i.get("cardInfoMap");if(u){var c=l.clientX,f=l.clientY,h=i.get("dragging");if(!(isNaN(c)||isNaN(f)||!h)){var d=h.x,p=h.y,v=h.left,g=h.top,m=h.card,y=c-d,w=f-p;v+=y,g+=w;var b=i.get("graph"),x=b.getPointByCanvas(0,0),S=b.getPointByCanvas(b.getWidth(),b.getHeight()),E=b.getClientByPoint(x.x,x.y),_=E.x,k=E.y,C=b.getClientByPoint(S.x,S.y),M=C.x,A=C.y,T=m.getBoundingClientRect(),D=T.right-T.left,F=T.bottom-T.top;(v>M-_-D&&y>0||v<0&&y<0)&&(v-=y),(g>A-k-F&&w>0||g<0&&w<0)&&(g-=w),Mr(m,{left:"".concat(v,"px"),top:"".concat(g,"px"),visibility:"hidden"}),d=c,p=f;var R=(u[n]||{}).link;if(R){var B=b.findById(n);R.attr("path",_D(B,T,b,i.get("canvas")))}i.set("dragging",{x:d,y:p,left:v,top:g,card:m})}}});var s=function(u){var c=i.get("cardInfoMap");if(c){var f=i.get("dragging");if(f){var h=f.left,d=f.top,p=f.card;c[n].x=h,c[n].y=d,Mr(p,{visibility:"visible"}),i.set("dragging",!1);var v=i.get("rows");v==null||v.forEach(function(m){for(var y=m.length-1;y>=0;y--)m[y].id===n&&m.splice(y,1)});var g=i.get("onAnnotationChange");g==null||g(c[n],"update")}}};r.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(r){var n=this.get("cardInfoMap");if(n){var i=n[r].card,a=i.getBoundingClientRect().width,o=i.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),l=wp(s.marginLeft),u=o.getBoundingClientRect().width;Mr(o,{marginRight:"".concat(a-l-24-16-u,"px")})}}},e.prototype.updateLink=function(r){var n=r.item;if(n){var i=this.get("cardInfoMap");if(i){var a=this.get("canvas"),o=this.get("graph"),s=n.getID(),l=i[s]||{},u=l.link,c=l.card;if(u){var f=_D(n,c.getBoundingClientRect(),o,a);u.attr("path",f)}}}},e.prototype.updateLinks=function(){var r=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=i.findById(o);r.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var r=this,n=this.get("cardInfoMap");if(n){var i=this.get("graph");Object.values(n).forEach(function(a){var o=a.id,s=a.card,l=a.isCanvas;if(!(!s||l||s.style.display==="none")){var u=i.findById(o);u&&u.isVisible()?r.toggleAnnotation(u):r.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(r){var n=r.item,i=r.visible;if(!(!n||n.destroyed)){var a=this.get("cardInfoMap");if(a){var o=n.getID();a[o]&&(i||this.hideCard(o))}}},e.prototype.saveData=function(r){r===void 0&&(r=!1);var n=this.get("cardInfoMap");if(n){var i=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(n).forEach(function(l){var u=l.title,c=l.content,f=l.x,h=l.y,d=l.id,p=l.collapsed,v=l.card;if(!(v&&v.style.display==="none"&&!r)){var g=i.findById(d)||i.get("canvas");s.push({id:d,x:f,y:h,collapsed:p,title:u||(a==null?void 0:a(g)),content:c||(o==null?void 0:o(g)),visible:v&&v.style.display!=="none"})}}),s}},e.prototype.readData=function(r){var n=this,i=this.get("graph");r.forEach(function(a){var o=a.id,s=a.x,l=a.y,u=a.title,c=a.content,f=a.collapsed,h=a.visible,d=i.findById(o);if(!d&&o===fY&&(d=i.get("canvas")),!d){var p=n.get("cardInfoMap")||{};p[o]=a,n.set("cardInfoMap",p);return}n.toggleAnnotation(d,{x:s,y:l,title:u,content:c,collapsed:f}),h||n.hideCard(o)})},e.prototype.clear=function(){var r=this.get("cardInfoMap");if(r){var n=this.get("container");Object.values(r).forEach(function(i){var a=i.card,o=i.link;n.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var r;this.clear(),(r=this.get("canvas"))===null||r===void 0||r.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(jo);const Evt=Svt;var _vt=function(e,r){var n,i,a=1/0;Object.keys(e).forEach(function(l){var u=e[l];Object.keys(r).forEach(function(c){var f=r[c],h=u.x-f.x,d=u.y-f.y,p=h*h+d*d;a>p&&(a=p,n=u,i=f)})});var o=20,s=_a.getControlPoint(n,i,.5,o);return[["M",n.x,n.y],["Q",s.x,s.y,i.x,i.y]]},_D=function(e,r,n,i){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var l=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),u=l.minX,c=l.minY,f=l.maxX,h=l.maxY,d=e.getModel(),p=d.x,v=d.y;u+=p,c+=v,f+=p,h+=v,o={left:{x:u,y:(c+h)/2},right:{x:f,y:(c+h)/2},top:{x:(u+f)/2,y:c},bottom:{x:(u+f)/2,y:h}}}Object.keys(o).forEach(function(k){var C=o[k],M=C.x,A=C.y,T=n.getClientByPoint(M,A);o[k]=i.getPointByClient(T.x,T.y)});var g=r.top,m=g===void 0?0:g,y=r.left,w=y===void 0?0:y,b=r.right,x=b===void 0?0:b,S=r.bottom,E=S===void 0?0:S,_={left:i.getPointByClient(w,(m+E)/2),right:i.getPointByClient(x,(m+E)/2),top:i.getPointByClient((w+x)/2,m),bottom:i.getPointByClient((w+x)/2,E)};return _vt(o,_)},wp=function(e){return Number(e.replace(/\s+|px/gi,""))||0},rs={PluginBase:jo,Menu:Qht,Grid:Vht,Minimap:ndt,Bundling:sdt,ToolBar:ddt,Tooltip:gdt,Fisheye:udt,TimeBar:nvt,ImageMinimap:lvt,EdgeFilterLens:hvt,SnapLine:gvt,Legend:bvt,Annotation:Evt};zf("circle",{options:{size:St.defaultNode.size,style:{x:0,y:0,stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:j({},St.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=gn({},i,e.icon),s="".concat(this.type,"-keyShape"),l=r.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});r.shapeMap[s]=l;var u=o.width,c=o.height,f=o.show,h=o.text;if(f){var d="".concat(this.type,"-icon");h?r.shapeMap[d]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):r.shapeMap[d]=r.addShape("image",{attrs:j({x:-u/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,r),l},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=xi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2;if(o){var p="link-point-left";r.shapeMap[p]=r.addShape("circle",{attrs:j(j({},f),{x:-d,y:0,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var v="link-point-right";r.shapeMap[v]=r.addShape("circle",{attrs:j(j({},f),{x:d,y:0,r:u/2||c||5}),className:v,name:v,isAnchorPoint:!0})}if(a){var g="link-point-top";r.shapeMap[g]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:-d,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";r.shapeMap[m]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:d,r:u/2||c||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=gn({},r,n),a=this.getSize(e),o=a[0]/2,s=j({x:0,y:0,r:o},i);return s},update:function(e,r,n){var i=r.getContainer(),a=this.getSize(e),o=j({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,r,o,!0,n),this.updateLinkPoints(e,i)}},"single-node");zf("rect",{options:{size:[100,30],style:{radius:0,stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:j({},St.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e),i=r.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return r.shapeMap["".concat(this.type,"-keyShape")]=i,this.drawLinkPoints(e,r),i},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=xi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=j({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=r.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=qt({},a,s.attr(),l);u=qt(u,e.style),this.updateShape(e,r,u,!1,n),this.updateLinkPoints(e,i)}},"single-node");zf("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:j({},St.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});r.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:j({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=xi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,p=h[1]/2;o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},f),{x:-d,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},f),{x:d,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:-p,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:p,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getSize(e),o=a[0]/2,s=a[1]/2,l=j({x:0,y:0,rx:o,ry:s},i);return l},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},l=r.get("keyShape"),u=qt({},a,l.attr(),s);u=qt(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");zf("diamond",{options:{size:[80,80],style:{stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:j({},St.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:j({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=xi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var r=this.getSize(e),n=r[0],i=r[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getPath(e),o=j({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=qt({},a,l.attr(),s);u=qt(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)}},"single-node");zf("triangle",{options:{size:40,direction:"up",style:{stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:j({},St.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(e),l=e.direction||o,u=r.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=u;var c=a.width,f=a.height,h=a.show,d=a.offset,p=a.text;if(h)if(p)r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var v=-c/2,g=-f/2;(l==="up"||l==="down")&&(g+=d),(l==="left"||l==="right")&&(v+=d),r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:j({x:v,y:g},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,r),u},drawLinkPoints:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=e.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,h=a.size,d=a.r,p=xi(a,["top","left","right","bottom","size","r"]),v=this.getSize(e),g=v[0];if(u){var m=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?m=[-w,y]:s==="down"?m=[-w,-y]:s==="left"&&(m=[-w,w-y]),m&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},p),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var b=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?b=[w,y]:s==="down"?b=[w,-y]:s==="right"&&(b=[w,w-y]),b&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},p),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var x=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="up"?x=[w-y,-y]:s==="left"?x=[w,-y]:s==="right"&&(x=[-w,-y]),x&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},p),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var S=null,y=g*Math.sin(1/3*Math.PI),w=g*Math.sin(1/3*Math.PI);s==="down"?S=[-w+y,y]:s==="left"?S=[w,y]:s==="right"&&(S=[-w,y]),S&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},p),{x:S[0],y:S[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var r=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||r,i=this.getSize(e),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getPath(e),o=j({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=qt({},a,l.attr(),s);u=qt(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,r){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=e.direction||a,s=r.shapeMap["link-point-left"]||r.find(function(R){return R.get("className")==="link-point-left"}),l=r.shapeMap["link-point-right"]||r.find(function(R){return R.get("className")==="link-point-right"}),u=r.shapeMap["link-point-top"]||r.find(function(R){return R.get("className")==="link-point-top"}),c=r.shapeMap["link-point-bottom"]||r.find(function(R){return R.get("className")==="link-point-bottom"}),f=i,h=s||l||u||c;h&&(f=h.attr());var d=qt({},f,e.linkPoints),p=d.fill,v=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var y=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},w=y.left,b=y.right,x=y.top,S=y.bottom,E=this.getSize(e),_=E[0],k={r:m,fill:p,stroke:v,lineWidth:g},C=null,M=_*Math.sin(1/3*Math.PI),A=_*Math.sin(1/3*Math.PI);o==="up"?C=[-A,M]:o==="down"?C=[-A,-M]:o==="left"&&(C=[-A,A-M]),C&&(s?!w&&w!==void 0?(s.remove(),delete r.shapeMap["link-point-left"]):s.attr(j(j({},k),{x:C[0],y:C[1]})):w&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},k),{x:C[0],y:C[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var T=null;o==="up"?T=[A,M]:o==="down"?T=[A,-M]:o==="right"&&(T=[A,A-M]),T&&(l?!b&&b!==void 0?(l.remove(),delete r.shapeMap["link-point-right"]):l.attr(j(j({},k),{x:T[0],y:T[1]})):b&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},k),{x:T[0],y:T[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var D=null;o==="up"?D=[A-M,-M]:o==="left"?D=[A,-M]:o==="right"&&(D=[-A,-M]),D&&(u?!x&&x!==void 0?(u.remove(),delete r.shapeMap["link-point-top"]):u.attr(j(j({},k),{x:D[0],y:D[1]})):x&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},k),{x:D[0],y:D[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var F=null;o==="down"?F=[-A+M,M]:o==="left"?F=[A,M]:o==="right"&&(F=[-A,M]),F&&(c?!S&&S!==void 0?(c.remove(),delete r.shapeMap["link-point-bottom"]):c.attr(j(j({},k),{x:F[0],y:F[1]})):S&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},k),{x:F[0],y:F[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");zf("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:St.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:St.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:St.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],l=o[1],u=r.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=u;var c=i.show,f=xi(i,["show"]);return c&&(r.shapeMap["pre-rect"]=r.addShape("rect",{attrs:j({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,r),this.drawStateIcon(e,r),this.drawLinkPoints(e,r),u},drawLogoIcon:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=xi(i,["width","height","x","y","offset","text"]);h?r.shapeMap["rect-logo-icon"]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):r.shapeMap["rect-logo-icon"]=r.addShape("image",{attrs:j(j({},d),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,i=n===void 0?{}:n,a=this.getSize(e),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,h=i.text,d=xi(i,["width","height","x","y","offset","text"]);h?r.shapeMap["rect-state-icon"]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):r.shapeMap["rect-state-icon"]=r.addShape("image",{attrs:j(j({},d),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=xi(i,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],p=h[1];o&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},f),{x:-d/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},f),{x:d/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:-p/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},f),{x:0,y:p/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,r){var n=this.getOptions(e),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=null,d=s.show,p=s.width,v=-f/2+a.offset;d&&(v=-f/2+p+a.offset);var g=a.style,m=u.style,y=u.paddingTop;return et(e.description)?(h=r.addShape("text",{attrs:j(j({},g),{x:v,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),r.shapeMap["text-shape"]=h,r.shapeMap["rect-description"]=r.addShape("text",{attrs:j(j({},m),{x:v,y:17+(y||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=r.addShape("text",{attrs:j(j({},g),{x:v,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),r.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getSize(e),o=i.width||a[0],s=i.height||a[1],l=j({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(e,r){var n=this.mergeStyle||this.getOptions(e),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(e),f=c[0],h=c[1],d=r.get("keyShape");d.attr(j(j({},a),{x:-f/2,y:-h/2,width:f,height:h}));var p=r.getContainer(),v=p.shapeMap["rect-logo-icon"]||p.find(function(ge){return ge.get("className")==="rect-logo-icon"}),g=v?v.attr():{},m=qt({},g,e.logoIcon),y=m.width;y===void 0&&(y=this.options.logoIcon.width);var w=e.logoIcon?e.logoIcon.show:void 0,b=s.offset,x=-f/2+y+b;!w&&w!==void 0&&(x=-f/2+b);var S=p.shapeMap["node-label"]||p.find(function(ge){return ge.get("className")==="node-label"}),E=p.shapeMap["rect-description"]||p.find(function(ge){return ge.get("className")==="rect-description"});if(e.label)if(!S)p.shapeMap["node-label"]=p.addShape("text",{attrs:j(j({},s.style),{x,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var _=e.labelCfg?e.labelCfg.style:{},k=qt({},S.attr(),_);e.label&&(k.text=e.label),k.x=x,et(e.description)&&(k.y=-5),E&&(E.resetMatrix(),E.attr({x})),S.resetMatrix(),S.attr(k)}if(et(e.description)){var C=u.paddingTop;if(!E)p.shapeMap["rect-description"]=p.addShape("text",{attrs:j(j({},u.style),{x,y:17+(C||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var _=e.descriptionCfg?e.descriptionCfg.style:{},M=qt({},E.attr(),_);et(e.description)&&(M.text=e.description),M.x=x,E.resetMatrix(),E.attr(j(j({},M),{y:17+(C||0)}))}}var A=p.shapeMap["pre-rect"]||p.find(function(ge){return ge.get("className")==="pre-rect"});if(A&&!A.destroyed){var T=qt({},A.attr(),e.preRect);A.attr(j(j({},T),{x:-f/2,y:-h/2,height:h}))}if(v&&!v.destroyed)if(!w&&w!==void 0)v.remove(),delete p.shapeMap["pre-rect"];else{var D=m.width,F=m.height,R=m.x,B=m.y,N=m.offset,O=xi(m,["width","height","x","y","offset"]);v.attr(j(j({},O),{x:R||-f/2+D+N,y:B||-F/2,width:D,height:F}))}else w&&this.drawLogoIcon(e,p);var L=p.shapeMap["rect-state-icon"]||p.find(function(ge){return ge.get("className")==="rect-state-icon"}),G=L?L.attr():{},q=qt({},G,e.stateIcon);if(L){!q.show&&q.show!==void 0&&(L.remove(),delete p.shapeMap["rect-state-icon"]);var K=q.width,F=q.height,R=q.x,B=q.y,V=q.offset,le=xi(q,["width","height","x","y","offset"]);L.attr(j(j({},le),{x:R||f/2-K+V,y:B||-F/2,width:K,height:F}))}else q.show&&this.drawStateIcon(e,p);this.updateLinkPoints(e,p)},getOptions:function(e,r){return r==="move"?e:gn({},this.options,this.getCustomConfig(e)||{},e)}},"single-node");zf("star",{options:{size:60,style:{stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:j({},St.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=r.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});r.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:j({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,r),o},drawLinkPoints:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,h=xi(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e),p=d[0];if(s){var v=Math.cos(.1*Math.PI)*p,g=Math.sin((18+72*0)/180*Math.PI)*p;r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var v=Math.cos(.5*Math.PI)*p,g=Math.sin((18+72*1)/180*Math.PI)*p;r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var v=Math.cos(.9*Math.PI)*p,g=Math.sin((18+72*2)/180*Math.PI)*p;r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var v=Math.cos(1.3*Math.PI)*p,g=Math.sin((18+72*3)/180*Math.PI)*p;r.shapeMap["link-point-bottom"]=r.addShape("circle",{attrs:j(j({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var v=Math.cos(1.7*Math.PI)*p,g=Math.sin((18+72*4)/180*Math.PI)*p;r.shapeMap["link-point-right-bottom"]=r.addShape("circle",{attrs:j(j({},h),{x:v,y:-g,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var r=this.getSize(e),n=r[0],i=n*3/8,a=e.innerR||i;return _a.getStarPath(n,a)},getShapeStyle:function(e){var r=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},i=qt({},r,n),a=this.getPath(e),o=j({path:a},i);return o},update:function(e,r,n){var i=r.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},l=r.get("keyShape"),u=qt({},a,l.attr(),s);u=qt(u,e.style),this.updateShape(e,r,u,!0,n),this.updateLinkPoints(e,i)},updateLinkPoints:function(e,r){var n=this.getOptions({}).linkPoints,i=r.shapeMap["link-point-left"]||r.find(function(M){return M.get("className")==="link-point-left"}),a=r.shapeMap["link-point-right"]||r.find(function(M){return M.get("className")==="link-point-right"}),o=r.shapeMap["link-point-top"]||r.find(function(M){return M.get("className")==="link-point-top"}),s=r.shapeMap["link-point-left-bottom"]||r.find(function(M){return M.get("className")==="link-point-left-bottom"}),l=r.shapeMap["link-point-left-bottom"]||r.find(function(M){return M.get("className")==="link-point-right-bottom"}),u=n,c=i||a||o||s||l;c&&(u=c.attr());var f=qt({},u,e.linkPoints),h=f.fill,d=f.stroke,p=f.lineWidth,v=f.size/2;v||(v=f.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,w=g.top,b=g.leftBottom,x=g.rightBottom,S=this.getSize(e),E=S[0],_={r:v,fill:h,stroke:d,lineWidth:p},k=Math.cos((18+72*0)/180*Math.PI)*E,C=Math.sin((18+72*0)/180*Math.PI)*E;a?!y&&y!==void 0?(a.remove(),delete r.shapeMap["link-point-right"]):a.attr(j(j({},_),{x:k,y:-C})):y&&(r.shapeMap["link-point-right"]=r.addShape("circle",{attrs:j(j({},_),{x:k,y:-C}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),k=Math.cos((18+72*1)/180*Math.PI)*E,C=Math.sin((18+72*1)/180*Math.PI)*E,o?!w&&w!==void 0?(o.remove(),delete r.shapeMap["link-point-top"]):o.attr(j(j({},_),{x:k,y:-C})):w&&(r.shapeMap["link-point-top"]=r.addShape("circle",{attrs:j(j({},_),{x:k,y:-C}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),k=Math.cos((18+72*2)/180*Math.PI)*E,C=Math.sin((18+72*2)/180*Math.PI)*E,i?!m&&m!==void 0?(i.remove(),delete r.shapeMap["link-point-left"]):i.attr(j(j({},_),{x:k,y:-C})):m&&(r.shapeMap["link-point-left"]=r.addShape("circle",{attrs:j(j({},_),{x:k,y:-C}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),k=Math.cos((18+72*3)/180*Math.PI)*E,C=Math.sin((18+72*3)/180*Math.PI)*E,s?!b&&b!==void 0?(s.remove(),delete r.shapeMap["link-point-left-bottom"]):s.attr(j(j({},_),{x:k,y:-C})):b&&(r.shapeMap["link-point-left-bottom"]=r.addShape("circle",{attrs:j(j({},_),{x:k,y:-C}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),k=Math.cos((18+72*4)/180*Math.PI)*E,C=Math.sin((18+72*4)/180*Math.PI)*E,l?!x&&x!==void 0?(l.remove(),delete r.shapeMap["link-point-right-bottom"]):l.attr(j(j({},_),{x:k,y:-C})):x&&(r.shapeMap["link-point-right-bottom"]=r.addShape("circle",{attrs:j(j({},_),{x:k,y:-C}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var hY=_a.defaultSubjectColors,A2="fan-shape-";zf("donut",{options:{size:St.defaultNode.size,style:{x:0,y:0,stroke:St.defaultNode.style.stroke,fill:St.defaultNode.style.fill,lineWidth:St.defaultNode.style.lineWidth},labelCfg:{style:{fill:St.nodeLabel.style.fill,fontSize:St.nodeLabel.style.fontSize,fontFamily:St.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:St.defaultNode.linkPoints.size,lineWidth:St.defaultNode.linkPoints.lineWidth,fill:St.defaultNode.linkPoints.fill,stroke:St.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:j({},St.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,r){var n=(this.mergeStyle||this.getOptions(e)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(e),o=gn({},i,e.icon),s=r.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});r.shapeMap["".concat(this.type,"-keyShape")]=s;var l=o.width,u=o.height,c=o.show,f=o.text;return c&&(f?r.shapeMap["".concat(this.type,"-icon")]=r.addShape("text",{attrs:j({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):r.shapeMap["".concat(this.type,"-icon")]=r.addShape("image",{attrs:j({x:-l/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Cvt(e,r,s),this.drawLinkPoints(e,r),s},updateShape:function(e,r,n,i,a){var o=r.get("keyShape");o.attr(j({},n)),kvt(e,r,o),this.updateLabel(e,r,a),i&&this.updateIcon(e,r)}},"circle");var Cvt=function(e,r,n){var i=e.donutAttrs,a=i===void 0?{}:i,o=e.donutColorMap,s=o===void 0?{}:o,l=Object.keys(a).length;if(a&&l>1){var u=bde(a,s),c=u.configs,f=u.totalValue;if(f){var h=xde(n),d=h.lineWidth,p=h.arcR,v=[p,0],g=0;if(l===1){J4(r,{arcR:p,arcBegin:v,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:f,drawWhole:!0});return}for(var m=0;m<c.length;m++){var y=J4(r,{arcR:p,arcBegin:v,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f});if(y.shouldEnd)return;v=y.arcBegin,g=y.beginAngle}}}},J4=function(e,r){var n=r.arcR,i=r.arcBegin,a=r.beginAngle,o=r.config,s=r.fanIndex,l=r.lineWidth,u=r.totalValue,c=r.drawWhole,f=c===void 0?!1:c,h=r.updateShape,d=h===void 0?void 0:h,p=o.value/u;if(p<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};var v,g,m;if(f||p>.999)v=[n,1e-4],m=1;else{var y=p*Math.PI*2;g=a+y,v=[n*Math.cos(g),-n*Math.sin(g)],m=y>Math.PI?1:0}var w={path:[["M",i[0],i[1]],["A",n,n,0,m,0,v[0],v[1]]],stroke:o.color||(d==null?void 0:d.attr("stroke"))||hY[s%hY.length],lineWidth:l};return d?d.attr(w):e.shapeMap["".concat(A2).concat(s)]=e.addShape("path",{attrs:w,name:"".concat(A2).concat(s),draggable:!0}),{beginAngle:g,arcBegin:v,shape:e.shapeMap["".concat(A2).concat(s)],shouldEnd:f||p>.999}},kvt=function(e,r,n){var i=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},l=r.getContainer();if(i){var u=bde(i,o),c=u.configs,f=u.totalValue;if(f)for(var h=xde(n),d=h.lineWidth,p=h.arcR,v=[p,0],g=0,m=0;m<c.length;m++){var y="".concat(A2).concat(m),w=J4(l,{arcR:p,arcBegin:v,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:f,drawWhole:c.length===1,updateShape:l.shapeMap[y]});if(w.shape&&(s[y]=!0),w.shouldEnd)break;v=w.arcBegin,g=w.beginAngle}}var b=Object.keys(l.shapeMap).filter(function(x){return x.includes(A2)});b.forEach(function(x){s[x]||(l.shapeMap[x].remove(!0),delete l.shapeMap[x])})},bde=function(e,r){var n=0,i=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(i.push({key:a,value:o,color:r[a]}),n+=o)}),{totalValue:n,configs:i}},xde=function(e){var r=e.attr("r"),n=.6*r,i=(r+n)/2,a=r-n;return{lineWidth:a,arcR:i}},YE=function(e){var r=e.x,n=e.y;return{x:r,y:n,centerX:r,centerY:n,minX:r,minY:n,maxX:r,maxY:n,height:0,width:0}},Mvt=function(e){e===void 0&&(e=[]);var r=[],n=[];e.forEach(function(l){r.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,r),a=Math.max.apply(Math,r),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},SB=function(e){for(var r=[],n={},i=e.length,a=i-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,r.push(o))}return r},Sde=function(e){return SB(e)},Pk=function(e,r){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-r,minY:e.minY-r,maxX:e.maxX+r,maxY:e.maxY+r,height:e.height+2*r,width:e.width+2*r}:e},Avt=function(e,r){var n=Math.abs(e.x-r.centerX),i=Math.abs(e.y-r.centerY);return n===0&&i===0?0:n/r.width>i/r.height},eR=function(e,r,n){var i=Avt(r,e);if(i===0){var a=e.centerX,o=e.centerY;return n.y<r.y?o=e.minY:n.x>r.x?a=e.maxX:n.x<r.x?a=e.minX:n.x===r.x&&(o=e.maxY),{x:a,y:o}}return i?{x:r.x>e.centerX?e.maxX:e.minX,y:r.y}:{x:r.x,y:r.y>e.centerY?e.maxY:e.minY}},dY=function(e,r){var n=Math.min(e.minX,r.minX),i=Math.min(e.minY,r.minY),a=Math.max(e.maxX,r.maxX),o=Math.max(e.maxY,r.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},tR=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},qE=function(e,r){var n=e.x,i=e.y;return n<r.minX||n>r.maxX||i<r.minY||i>r.maxY},Tvt=function(e,r){return r<e.minX||r>e.maxX?[]:[{x:r,y:e.minY},{x:r,y:e.maxY}]},Ovt=function(e,r){return r<e.minY||r>e.maxY?[]:[{x:e.minX,y:r},{x:e.maxX,y:r}]},Ivt=function(e,r){return Tvt(e,r.x).concat(Ovt(e,r.y))},jw=function(e,r){return Math.abs(e.x-r.x)+Math.abs(e.y-r.y)},Dvt=function(e,r){var n=-2,i=0;return r.forEach(function(a){a&&(e.x===a.x&&(i+=n),e.y===a.y&&(i+=n))}),i},pY=function(e,r,n,i,a){return jw(e,r)+jw(e,n)+Dvt(e,[r,n,i,a])},Pvt=function t(e,r,n,i,a){a===void 0&&(a=0),e.unshift(r[i]),n[i]&&n[i]!==i&&a<=100&&t(e,r,n,n[i],a+1)},KE=function(e,r,n,i){var a=n.x-e.x,o=n.y-e.y,s=i.x-e.x,l=i.y-e.y,u=n.x-r.x,c=n.y-r.y,f=i.x-r.x,h=i.y-r.y,d=a*l-o*s,p=u*h-c*f,v=a*c-o*u,g=s*h-l*f;return d*p<=0&&v*g<=0},rR=function(e,r,n){if(n.width||n.height){var i=tR(n),a=i[0],o=i[1],s=i[2],l=i[3];return KE(e,r,a,o)||KE(e,r,a,l)||KE(e,r,o,s)||KE(e,r,s,l)}return!1},Lvt=function(e,r,n,i){var a=[];return e.forEach(function(o){if(o!==r&&(o.x===r.x||o.y===r.y)){if(rR(o,r,n)||rR(o,r,i))return;a.push(o)}}),SB(a)},Rvt=function(e,r,n,i,a,o,s){var l,u=[],c=(l={},l[r.id]=r,l),f={},h={},d={};h[r.id]=0,d[r.id]=pY(r,n,r);var p=new _de;p.add({id:r.id,value:d[r.id]});var v={};e.forEach(function(x){v[x.id]=x});for(var g;Object.keys(c).length;){var m=p.minId(!1);if(m)g=c[m];else break;if(g===n){var y=[];return Pvt(y,v,f,n.id),y}delete c[g.id],p.remove(g.id),u.push(g);var w=Lvt(e,g,i,a),b=function(S){S.forEach(function(E){if(u.indexOf(E)===-1){var _=E.id;c[_]||(c[_]=E);var k=d[g.id]+jw(g,E);if(h[_]&&k>=h[_]){p.add({id:_,value:d[_]});return}f[_]=g.id,h[_]=k,d[_]=h[_]+pY(E,n,r,o,s),p.add({id:_,value:d[_]})}})};b(w)}return[r,n]},Nvt=function(e,r,n){return!(e.x===r.x&&r.x===n.x||e.y===r.y&&r.y===n.y)},Fvt=function(e,r,n,i){var a=jw(e,r),o=jw(n,r);a<i&&(i=a),o<i&&(i=o);var s={x:r.x-i/a*(r.x-e.x),y:r.y-i/a*(r.y-e.y)},l={x:r.x-i/o*(r.x-n.x),y:r.y-i/o*(r.y-n.y)};return[s,l]},vY=function(e,r){var n=[],i=e[0];return n.push("M".concat(i.x," ").concat(i.y)),e.forEach(function(a,o){var s=e[o+1],l=e[o+2];if(s&&l)if(Nvt(a,s,l)){var u=Fvt(a,s,l,r),c=u[0],f=u[1];n.push("L".concat(c.x," ").concat(c.y)),n.push("Q".concat(s.x," ").concat(s.y," ").concat(f.x," ").concat(f.y)),n.push("L".concat(f.x," ").concat(f.y))}else n.push("L".concat(s.x," ").concat(s.y));else s&&n.push("L".concat(s.x," ").concat(s.y))}),n.join("")},Ede=function(e,r,n,i,a){var o,s;if(!n||!n.getType())o=YE(e);else if(n.getType()==="combo"){var l=n.getKeyShape().getBBox();if(l){var u=n.getModel(),c=u.x,f=u.y;o={x:c,y:f,width:l.width,height:l.height,minX:l.minX+c,maxX:l.maxX+c,minY:l.minY+f,maxY:l.maxY+f},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=YE(e)}else o=n&&n.getBBox();if(!i||!i.getType())s=YE(r);else if(i.getType()==="combo"){var h=i.getKeyShape().getBBox();if(h){var d=i.getModel(),p=d.x,v=d.y;s={x:p,y:v,width:h.width,height:h.height,minX:h.minX+p,maxX:h.maxX+p,minY:h.minY+v,maxY:h.maxY+v},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=YE(r)}else s=i&&i.getBBox();var g=Pk(o,a),m=Pk(s,a),y=eR(g,e,r),w=eR(m,r,e),b=Mvt([y,w]),x=dY(g,b),S=dY(m,b),E=[];E=E.concat(tR(x)).concat(tR(S));var _={x:(e.x+r.x)/2,y:(e.y+r.y)/2};[b,x,S].forEach(function(C){E=E.concat(Ivt(C,_).filter(function(M){return qE(M,g)&&qE(M,m)}))}),[{x:y.x,y:w.y},{x:w.x,y:y.y}].forEach(function(C){qE(C,g)&&qE(C,m)&&E.push(C)}),E.unshift(y),E.push(w),E=SB(E);var k=Rvt(E,y,w,o,s,e,r);return k.unshift(e),k.push(r),Sde(k)},Bvt=function(e){if(!(e!=null&&e.length))return e;for(var r=e[e.length-1],n={x:r.x,y:r.y},i=[r],a=[r],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===n.x?i.push(s):(i=[s],n.x=s.x),s.y===n.y?a.push(s):(a=[s],n.y=s.y),i.length>2){var l=e.indexOf(i[1]);l>-1&&e.splice(l,1);continue}if(a.length>2){var l=e.indexOf(a[1]);l>-1&&e.splice(l,1)}}return e},_de=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(e,r){for(var n=[0,r-1];n[1]-n[0]>1;){var i=Math.floor((n[0]+n[1])/2);if(this.arr[i].value>e.value)n[1]=i;else if(this.arr[i].value<e.value)n[0]=i;else{this.arr.splice(i,0,e),this.map[e.id]=!0;return}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},t.prototype.add=function(e){delete this.map[e.id];var r=this.arr.length;if(!r){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[r-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,r)},t.prototype.remove=function(e){this.map[e]&&delete this.map[e]},t.prototype._clearAndGetMinId=function(){for(var e,r=this.arr.length-1;r>=0;r--)this.map[this.arr[r].id]?e=this.arr[r].id:this.arr.splice(r,1);return e},t.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},t.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},t}(),$vt=function(e,r){return Math.abs(e.x-r.x)+Math.abs(e.y-r.y)},zvt=function(e,r,n,i,a){return Sde(Ede(e,r,n,i,a.offset))},jvt={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:$vt,fallbackRoute:zvt},vf=function(e,r){var n=Math.round(Math.abs(e/r)),i=e<0?-1:1;return n<0?0:i*n},Gvt=function(e,r,n){var i={};return e.forEach(function(a){if(a)for(var o=Pk(a.getBBox(),n),s=vf(o.minX,r);s<=vf(o.maxX,r);s+=1)for(var l=vf(o.minY,r);l<=vf(o.maxY,r);l+=1)i["".concat(s,"|||").concat(l)]=!0}),i},CD=function(e,r){var n=r.x-e.x,i=r.y-e.y;return n||i?Math.atan2(i,n):0},gY=function(e,r){var n=Math.abs(e-r);return n>Math.PI?2*Math.PI-n:n},mY=function(e,r,n){for(var i=1/0,a=0,o=r.length;a<o;a++){var s=n(e,r[a]);s<i&&(i=s)}return i},yY=function(e,r,n,i,a){var o=[];if(!n)return[e];var s=a.directions,l=a.offset,u=n.getBBox(),c=r.x>u.minX&&r.x<u.maxX&&r.y>u.minY&&r.y<u.maxY,f=Pk(u,l);for(var h in f)f[h]=vf(f[h],a.gridSize);if(c){for(var d=0,p=s;d<p.length;d++)for(var v=p[d],g=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],h=0;h<4;h++){var m=g[h],y=_a.getLineIntersect(e,{x:e.x+v.stepX*f.width,y:e.y+v.stepY*f.height},m[0],m[1]);y&&!rR(e,y,u)&&(y.id="".concat(y.x,"|||").concat(y.y),o.push(y))}return o}var w=eR(f,e,i);return w.id="".concat(w.x,"|||").concat(w.y),[w]},nR=function(e,r,n,i){var a=CD(e,r),o=n[e.id];if(!o){var s=CD(i,e);return gY(s,a)}var l=CD({x:o.x,y:o.y},e);return gY(l,a)},Uvt=function(e,r,n,i,a,o,s){var l=[i],u=i,c=e.id,f=e.x,h=e.y,d={x:f,y:h,id:c};nR(d,o,r,n)&&(u={x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s},l.unshift(u));for(var p=r[c];p&&p.id!==c;){var v={x:f,y:h,id:c},g={x:p.x,y:p.y,id:p.id},m=nR(g,v,r,n);m&&(u={x:g.x===v.x?u.x:g.x*s,y:g.y===v.y?u.y:g.y*s},l.unshift(u)),c=g.id,f=g.x,h=g.y,p=r[c]}return l[0].x=f===n.x?a.x:u.x,l[0].y=h===n.y?a.y:u.y,l.unshift(a),l},Wvt=function(e,r,n,i,a){if(isNaN(e.x)||isNaN(r.x))return[];var o=gn(jvt,a);o.obstacles=o.obstacles||[];var s=o.penalties,l=o.gridSize,u=Gvt(o.obstacles.concat([n,i]),l,o.offset),c={x:vf(e.x,l),y:vf(e.y,l)},f={x:vf(r.x,l),y:vf(r.y,l)};e.id="".concat(c.x,"|||").concat(c.y),r.id="".concat(f.x,"|||").concat(f.y);var h=yY(c,e,n,f,o),d=yY(f,r,i,c,o);h.forEach(function(O){delete u[O.id]}),d.forEach(function(O){delete u[O.id]});for(var p={},v={},g={},m={},y={},w=new _de,b=0;b<h.length;b++){var x=h[b];p[x.id]=x,m[x.id]=0,y[x.id]=mY(x,d,o.distFunc),w.add({id:x.id,value:y[x.id]})}var S=o.maximumLoops,E,_,k,C,M,A,T=1/0,D={};for(d.forEach(function(O){D["".concat(O.x,"|||").concat(O.y)]=!0}),Object.keys(p).forEach(function(O){var L=p[O].id;y[L]<=T&&(T=y[L],E=p[L])});Object.keys(p).length>0&&S>0;){var F=w.minId((S+1)%30===0);if(F)E=p[F];else break;if(D["".concat(E.x,"|||").concat(E.y)])return Uvt(E,g,c,r,e,f,l);delete p[E.id],w.remove(E.id),v[E.id]=!0;for(var b=0;b<o.directions.length;b++){_=o.directions[b];var R="".concat(Math.round(E.x)+_.stepX,"|||").concat(Math.round(E.y)+_.stepY);if(k={x:E.x+_.stepX,y:E.y+_.stepY,id:R},!v[R]&&(A=nR(E,k,g,c),!(A>o.maxAllowedDirectionChange)&&!u[R])){p[R]||(p[R]=k);var B=s[A];C=o.distFunc(E,k)+(isNaN(B)?l:B),M=m[E.id]+C;var N=m[R];N&&M>=N||(g[R]=E,m[R]=M,y[R]=M+mY(k,d,o.distFunc),w.add({id:R,value:y[R]}))}}S-=1}return o.fallbackRoute(e,r,n,i,o)};jle("polyline",{options:{color:St.defaultEdge.color,size:St.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:St.defaultEdge.style.stroke,lineAppendWidth:St.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:St.edgeLabel.style.fill,fontSize:St.edgeLabel.style.fontSize,fontFamily:St.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:j({},St.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,r){var n=this.getShapeStyle(e);n.radius===0&&delete n.radius;var i=r.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return r.shapeMap["edge-shape"]=i,i},getShapeStyle:function(e){var r=this.options.style,n={stroke:e.color},i=qt({},r,n,e.style);e=this.getPathPoints(e),this.radius=i.radius,this.offset=i.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),l=[a];s&&(l=l.concat(s)),l.push(o);var u=e.sourceNode,c=e.targetNode,f=i.radius,h=this.options.routeCfg,d=qt({},h,e.routeCfg);d.offset=i.offset;var p=this.getPath(l,u,c,f,d,!s);(Xt(p)&&p.length<=1||et(p)&&p.indexOf("L")===-1)&&(p="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(p="M0 0, L0 0");var v=qt({},St.defaultEdge.style,i,{lineWidth:e.size,path:p});return v},updateShapeStyle:function(e,r){var n=r.getContainer();if(r.isVisible()){var i={stroke:e.color},a=n.shapeMap["edge-shape"]||n.find(function(b){return b.get("className")==="edge-shape"})||r.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,l=e.endPoint,u=this.getControlPoints(e),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),h=qt({},i,f,e.style),d=e.sourceNode,p=e.targetNode,v=h.radius,g=this.options.routeCfg,m=qt({},g,e.routeCfg);m.offset=h.offset;var y=this.getPath(c,d,p,v,m,!u);(Xt(y)&&y.length<=1||et(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(y="M0 0, L0 0"),f.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),f.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""});var w=qt(i,a.attr(),{lineWidth:o,path:y},e.style);a&&a.attr(w)}},getPath:function(e,r,n,i,a,o){var s=a.offset,l=a.obstacles,u=a.simple;if(!s||e.length>2||o===!1){if(i)return vY(e,i);var c=[];return Te(e,function(p,v){v===0?c.push(["M",p.x,p.y]):c.push(["L",p.x,p.y])}),c}u!==!1&&!(l!=null&&l.length)&&(u=!0);var f=u?Ede(e[e.length-1],e[0],n,r,s):Wvt(e[0],e[e.length-1],r,n,a);if(!f||!f.length)return"M0 0, L0 0";if(i){var h=vY(f,i);return h}f=Bvt(f);var d=_a.pointsToPolygon(f);return d}},"single-edge");var wY=Hf.cloneEvent,bY=Hf.isNaN,xY=Math.abs,Vvt=10,Hvt=["shift","ctrl","alt","control"];const Xvt={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var r=this.origin,n=+e.clientX,i=+e.clientY;if(!(bY(n)||bY(i))){var a=n-r.x,o=i-r.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var r=this,n=e.originalEvent.touches,i=n[0],a=n[1];i&&a||(e.preventDefault(),this.mousedown=!0,r.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var r=this,n=e.originalEvent;if(!(n&&e.name!=="touchstart"&&n.button!==0)&&!(e.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!r.keydown&&this.allowDrag(e)){if(r.origin={x:e.clientX,y:e.clientY},r.dragging=!1,this.enableOptimize){for(var i=this.graph,a=i.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");l&&l.forEach(function(w){w.set("ori-visibility",w.get("ori-visibility")||w.get("visible")),w.hide()})}for(var u=i.getNodes(),c=0,f=u.length;c<f;c++)for(var h=u[c].getContainer(),d=h.get("children"),p=0,v=d;p<v.length;p++){var g=v[p],m=g.get("isKeyShape");m||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if(typeof window<"u"){var y=this;this.handleDOMContextMenu=function(w){return y.onMouseUp(w)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var r=this,n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(e);return}e.preventDefault(),r.onDrag(e)},onDrag:function(e){if(this.mousedown){var r=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=wY(e),!!this.origin)){if(this.dragging)e.type="drag",r.emit("canvas:drag",e);else{if(xY(this.origin.x-e.clientX)+xY(this.origin.y-e.clientY)<Vvt)return;this.shouldBegin(e,this)&&(e.type="dragstart",r.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var r,n;this.mousedown=!1,this.dragstart=!1;var i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(r=o==null?void 0:o.modes[o.mode])===null||r===void 0?void 0:r.filter(function(E){return E.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var h=u[c].get("group").get("children");h&&h.forEach(function(E){var _=E.get("ori-visibility");E.set("ori-visibility",void 0),_&&E.show()})}if(a>l)for(var d=i.getNodes(),p=0,v=d.length;p<v;p++)for(var g=d[p].getContainer(),m=g.get("children"),y=0,w=m;y<w.length;y++){var b=w[y],x=b.get("isKeyShape");if(!x){var S=b.get("ori-visibility");b.set("ori-visibility",void 0),S&&b.show()}}}if(!this.dragging){this.origin=null;return}e=wY(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,i.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var r=this,n=e.key;n&&(Hvt.indexOf(n.toLowerCase())>-1?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var r,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Tb(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(sa(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}},Yvt={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var r=e.getType();return r==="combo"},onTouchStart:function(e){if(e.item){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,r.onDragStart(e)}},onTouchMove:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a){r.onDragEnd(e);return}e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var r,n;if(((n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(j(j({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var r=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(j(j({},e),this.mousedown),this)){var n=this.mousedown,i=n.item,a=n.target;if(!(!i||i.destroyed||i.hasLocked())){var o=i.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(i),a){var s=a.get("isAnchorPoint");if(s)return}var l=this.graph;this.targets=[],this.targetCombo=null;var u=l.findAllByState("node",this.selectedState),c=i.get("id"),f=u.filter(function(d){var p=d.get("id");return c===p});if(f.length===0?this.targets.push(i):u.length>1?u.forEach(function(d){var p=d.hasLocked();p||r.targets.push(d)}):this.targets.push(i),this.graph.get("enabledStack")&&this.enableStack){var h=[];this.targets.forEach(function(d){var p=d.getModel(),v=p.x,g=p.y,m=p.id;h.push({x:v,y:g,id:m})}),this.set("beforeDragNodes",h)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var p=d.getEdges();p.forEach(function(v){v.isVisible()&&(r.hidenEdge[v.getID()]=!0,v.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var r=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(i){r.update(i,e);var a=i.getModel().comboId;a&&(n[a]=r.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var r=this,n;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){r.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),l=s.x,u=s.y,c=s.id;a.after.nodes.push({x:l,y:u,id:c})}),i.pushStack("update",Dr(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(r))){var n=this.graph;if(this.comboActiveState&&n.setItemState(r,this.comboActiveState,!1),this.targetCombo=r,this.onlyChangeComboSize)n.updateCombos();else{var i=r.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(r)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var r=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&r.updateComboTree(n)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var r=this,n=e.item,i=r.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=i.findById(a);r.comboActiveState&&i.setItemState(s,r.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var r=e.item;if(this.validationCombo(r)){var n=this.graph;this.comboActiveState&&n.setItemState(r,this.comboActiveState,!0)}},onDragLeave:function(e){var r=e.item;if(this.validationCombo(r)){var n=this.graph;this.comboActiveState&&n.setItemState(r,this.comboActiveState,!1)}},updatePositions:function(e,r){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):r||this.targets.map(function(i){return n.update(i,e)}):this.targets.map(function(i){return n.update(i,e,r)}))},update:function(e,r,n){var i=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=r.x-i.x+this.point[o].x,l=r.y-i.y+this.point[o].y;n&&(s+=i.x-r.x,l+=i.y-r.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:Ob(function(t){var e=t.targets,r=t.graph,n=t.point,i=t.origin,a=t.evt,o=t.updateEdge,s=t.onlyChangeComboSize,l=t.updateParentCombos;e.map(function(u){var c=u.get("model"),f=u.get("id");n[f]||(n[f]={x:c.x||0,y:c.y||0});var h=a.x-i.x+n[f].x,d=a.y-i.y+n[f].y,p={x:h,y:d};o?r.updateItem(u,p,!1):u.updatePosition(p)}),s&&l(r,e)},50,!0),updateDelegate:function(e){var r=this.graph;if(this.delegateRect){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var n=r.get("group"),i=gn({},ov.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=n.addShape("rect",{attrs:j({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var r=this.targets;r.length===0&&r.push(e.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<r.length;s++){var l=r[s],u=l.getBBox(),c=u.minX,f=u.minY,h=u.maxX,d=u.maxY;c<n&&(n=c),f<a&&(a=f),h>i&&(i=h),d>o&&(o=d)}var p=Math.floor(n),v=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:p,y:v,width:g,height:m,minX:n,minY:a}},updateParentCombos:function(e,r){var n=e||this.graph,i=r||this.targets,a={};i==null||i.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=n.findById(s))}),Object.values(a).forEach(function(o){o&&n.updateCombo(o)})}};var QE=null;const qvt={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.setAllItemStates(e)},clearOnTouchStart:function(e){var r=this;try{var n=e.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}r.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var r=this,n=this.shouldClearStatusOnSecond;n&&(QE=null),this.timer=setTimeout(function(){r.throttleClearActiveState(e,r)},50)},throttleSetAllItemStates:ww(function(t,e){var r=t.item,n=e.graph;if(!(!n||n.destroyed)&&(e.item=r,!!e.shouldUpdate(t.item,{event:t,action:"activate"},e))){var i=e.shouldClearStatusOnSecond,a=r.getModel().id;if(QE===a&&i){e.throttleClearActiveState(t,e),QE=null;return}for(var o=e.activeState,s=e.inactiveState,l=n.getNodes(),u=n.getCombos(),c=n.getEdges(),f=n.get("vedges"),h=l.length,d=u.length,p=c.length,v=f.length,g=e.inactiveItems||{},m=e.activeItems||{},y=0;y<h;y++){var w=l[y],b=w.getID(),x=w.hasState("selected");e.resetSelected&&x&&n.setItemState(w,"selected",!1),m[b]&&(n.setItemState(w,o,!1),delete m[b]),s&&!g[b]&&(n.setItemState(w,s,!0),g[b]=w)}for(var y=0;y<d;y++){var S=u[y],E=S.getID(),x=S.hasState("selected");e.resetSelected&&x&&n.setItemState(S,"selected",!1),m[E]&&(n.setItemState(S,o,!1),delete m[E]),s&&!g[E]&&(n.setItemState(S,s,!0),g[E]=S)}for(var y=0;y<p;y++){var _=c[y],k=_.getID();m[k]&&(n.setItemState(_,o,!1),delete m[k]),s&&!g[k]&&(n.setItemState(_,s,!0),g[k]=_)}for(var y=0;y<v;y++){var C=f[y],M=C.getID();m[M]&&(n.setItemState(C,o,!1),delete m[M]),s&&!g[M]&&(n.setItemState(C,s,!0),g[M]=C)}if(r&&!r.destroyed){s&&(n.setItemState(r,s,!1),delete g[r.getID()]),m[r.getID()]||(n.setItemState(r,o,!0),m[r.getID()]=r);for(var A=r.getEdges(),T=A.length,y=0;y<T;y++){var _=A[y],k=_.getID(),D=void 0;_.getSource()===r?D=_.getTarget():D=_.getSource();var F=D.getID();s&&g[F]&&(n.setItemState(D,s,!1),delete g[F]),m[F]||(n.setItemState(D,o,!0),m[F]=D),g[k]&&(n.setItemState(_,s,!1),delete g[k]),m[k]||(n.setItemState(_,o,!0),m[k]=_),_.toFront()}}e.activeItems=m,e.inactiveItems=g,i&&(QE=r.getModel().id),n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:ww(function(t,e){var r=e.get("graph");if(!(!r||r.destroyed)&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var n=e.activeState,i=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){r.clearItemStates(s,n)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){r.clearItemStates(s,i)}),e.activeItems={},e.inactiveItems={},r.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var ZE=Math.min,SY=Math.max,EY=Math.abs,_Y="shift",Kvt=["drag","shift","ctrl","alt","control"];const Qvt={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:_Y,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Kvt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=_Y,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var r=e.item,n=this.brush,i=this.selectOnCombo,a=(r==null?void 0:r.getType())==="combo";a&&!i||!a&&r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1))},clearStates:function(){var e=this,r=e.graph,n=e.selectedState,i=r.findAllByState("node",n),a=r.findAllByState("edge",n),o=r.findAllByState("combo",n);i.forEach(function(s){return r.setItemState(s,n,!1)}),a.forEach(function(s){return r.setItemState(s,n,!1)}),o.forEach(function(s){return r.setItemState(s,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,r,n,i,a){var o=e.getBBox();return o.centerX>=r&&o.centerX<=n&&o.centerY>=i&&o.centerY<=a},getSelectedNodes:function(e){var r=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=n.isBBoxCenterInRect,l=this.selectedState,u={x:e.x,y:e.y},c=i.getPointByCanvas(a.x,a.y),f=ZE(u.x,c.x),h=SY(u.x,c.x),d=ZE(u.y,c.y),p=SY(u.y,c.y),v=[],g=[];i.getNodes().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,p)&&o(w,"select",r)){v.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}});var m=[];this.includeEdges&&v.forEach(function(w){var b=w.getOutEdges();b.forEach(function(x){if(x.isVisible()){var S=x.getModel(),E=S.source,_=S.target;g.includes(E)&&g.includes(_)&&o(x,"select",r)&&(m.push(x),i.setItemState(x,r.selectedState,!0))}})});var y=[];this.includeCombos&&i.getCombos().forEach(function(w){if(w.isVisible()&&s(w,f,h,d,p)&&o(w,"select",r)){y.push(w);var b=w.getModel();g.push(b.id),i.setItemState(w,l,!0)}}),this.selectedEdges=m,this.selectedNodes=v,this.selectedCombos=y,this.onSelect&&this.onSelect(v,m,y),i.emit("nodeselectchange",{selectedItems:{nodes:v,edges:m,combos:y},select:!0})},createBrush:function(){var e=this,r=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=r,this.delegate=r,r},updateBrush:function(e){var r=this.originPoint;this.brush.attr({width:EY(e.canvasX-r.x),height:EY(e.canvasY-r.y),x:ZE(e.canvasX,r.x),y:ZE(e.canvasY,r.y)})},onKeyDown:function(e){var r=e.key;if(r){var n=this.trigger.toLowerCase(),i=r.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var CY="shift",Zvt=["shift","ctrl","alt","control"];const Jvt={getDefaultCfg:function(){return{multiple:!0,trigger:CY,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Zvt.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=CY,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var r=this,n=e.item;if(!(!n||n.destroyed)){var i=n.getType(),a=r.graph,o=r.keydown,s=r.multiple,l=r.shouldUpdate,u=r.shouldBegin;if(u(e,r)){if(!o||!s){var c=a.findAllByState("node",r.selectedState).concat(a.findAllByState("edge",r.selectedState)).concat(a.findAllByState("combo",r.selectedState));Te(c,function(v){v!==n&&a.setItemState(v,r.selectedState,!1)})}var f=function(){switch(i){case"node":return r.selectNode;case"edge":return r.selectEdge;case"combo":return r.selectCombo;default:return!1}}();if(!f){var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:h,edges:d,combos:p},select:!1});return}if(n.hasState(r.selectedState)){l(e,r)&&a.setItemState(n,r.selectedState,!1);var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:p},select:!1})}else{l(e,r)&&a.setItemState(n,r.selectedState,!0);var h=a.findAllByState("node",r.selectedState),d=a.findAllByState("edge",r.selectedState),p=a.findAllByState("combo",r.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:h,edges:d,combos:p},select:!0})}}}},onCanvasClick:function(e){var r=this,n=this,i=n.graph,a=n.shouldBegin;if(a(e,this)){var o=i.findAllByState("node",this.selectedState);Te(o,function(u){i.setItemState(u,r.selectedState,!1)});var s=i.findAllByState("edge",this.selectedState);Te(s,function(u){i.setItemState(u,r.selectedState,!1)});var l=i.findAllByState("combo",this.selectedState);Te(l,function(u){i.setItemState(u,r.selectedState,!1)}),i.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var r=this,n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}};var egt=dl,JE=.05;const tgt={getDefaultCfg:function(){return this.isFireFox=Hhe()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var r=e.originalEvent.touches,n=r[0],i=r[1];e.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var r=e.originalEvent.touches,n=r[0],i=r[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(v,g){return Math.hypot(g.x-v.x,g.y-v.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.get("animate"),f=this.get("animateCfg"),h=this.graph.get("canvas"),d=h.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:d.x,y:d.y},c,f),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var r=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-JE*l:c=1/(1-JE*l):e.wheelDelta<0?c=1-JE*l:c=1/(1-JE*l),f=u*c;var h=this.get("minZoom")||i.get("minZoom"),d=this.get("maxZoom")||i.get("maxZoom");f>d?f=d:f<h&&(f=h);var p=this.get("enableOptimize");if(p){var v=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),y=i.getEdges(),w=m.length,b=y.length;if(!g){for(var x=0;x<w;x++){var S=m[x];if(!S.destroyed)for(var E=S.get("group").get("children"),_=E.length,k=0;k<_;k++){var C=E[k];!C.destoryed&&!C.get("isKeyShape")&&(C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide())}}for(var M=0;M<b;M++)for(var A=y[M],E=A.get("group").get("children"),_=E.length,k=0;k<_;k++){var C=E[k];C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var T=setTimeout(function(){var De=i.getZoom(),J=r.get("optimized");if(J){r.set("optimized",!1);for(var P=0;P<w;P++){var me=m[P],Ee=me.get("group").get("children"),fe=Ee.length;if(De<v){var ke=me.getKeyShape(),Be=ke.get("ori-visibility");ke.set("ori-visibility",void 0),Be&&ke.show()}else for(var $e=0;$e<fe;$e++){var Ue=Ee[$e],Be=Ue.get("ori-visibility");Ue.set("ori-visibility",void 0),!Ue.get("visible")&&Be&&Be&&Ue.show()}}for(var ut=0;ut<b;ut++){var Mt=y[ut],Ee=Mt.get("group").get("children"),fe=Ee.length;if(De<v){var ke=Mt.getKeyShape(),Be=ke.get("ori-visibility");ke.set("ori-visibility",void 0),Be&&ke.show()}else for(var $e=0;$e<fe;$e++){var Ue=Ee[$e];if(!Ue.get("visible")){var Be=Ue.get("ori-visibility");Ue.set("ori-visibility",void 0),Be&&Ue.show()}}}}},100);this.set("timeout",T)}if(u<=1){var D=void 0,F=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){D=i.findAllByState("node",a.fixState),F=i.findAllByState("edge",a.fixState);for(var R=u/f,B=D.length,N=0;N<B;N++){var S=D[N],O=S.getContainer(),L=S.getModel(),G=S.getOriginStyle(),q=S.getStateStyle(a.fixState),K=S.get("shapeFactory").getShape(L.type).getStateStyle(a.fixState,S)[a.fixState];if(a.fixAll){if(f<=1){var V=Dr(O.getMatrix());V||(V=[1,0,0,0,1,0,0,0,1]);var le=S.getModel(),ge=le.x,xe=le.y;V=egt(V,[["t",-ge,-xe],["s",R,R],["t",ge,xe]]),O.setMatrix(V)}}else for(var E=O.get("children"),_=E.length,k=0;k<_;k++){var C=E[k],Ie=void 0,He=void 0;if(a.fixLabel){var Ge=C.get("type");if(Ge==="text"){Ie=C.attr("fontSize")||12;var ht=q[C.get("name")],dt=K[C.get("name")],It=ht?ht.fontSize:12,_t=dt?dt.fontSize:12,yt=It||_t||12;if(f<=1&&C.attr("fontSize",yt/f),He)break}}if(a.fixLineWidth&&C.get("isKeyShape")){He=C.attr("lineWidth")||0;var Tt=q.lineWidth||K.lineWidth||G.lineWidth||0;if(f<=1&&C.attr("lineWidth",Tt/f),Ie)break}}}for(var kt=F.length,mt=0;mt<kt;mt++)for(var A=F[mt],O=A.getContainer(),E=O.get("children"),L=A.getModel(),q=A.getStateStyle(a.fixState),K=A.get("shapeFactory").getShape(L.type).getStateStyle(a.fixState,A)[a.fixState],_=E.length,k=0;k<_;k++){var C=E[k],Ie=void 0,He=void 0;if(a.fixLabel||a.fixAll){var Ge=C.get("type");if(Ge==="text"){Ie=C.attr("fontSize")||12;var ht=q[C.get("name")],dt=K[C.get("name")],It=ht?ht.fontSize:12,_t=dt?dt.fontSize:12,yt=It||_t||12;if(f<=1&&C.attr("fontSize",yt/f),He)break}}if((a.fixLineWidth||a.fixAll)&&C.get("isKeyShape")){He=C.attr("lineWidth")||0;var Tt=q.lineWidth||K.lineWidth||1;if(f<=1&&C.attr("lineWidth",Tt/f),Ie)break}}}}var xt=this.get("animate"),Nt=this.get("animateCfg");i.zoomTo(f,{x:s.x,y:s.y},xt,Nt),i.emit("wheelzoom",e)}}},Cde={onMouseEnter:function(e){var r=e.item;this.currentTarget=r,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var r=this.container;if(!(!e.item||e.item.destroyed)){r||(r=this.createTooltip(this.graph.get("canvas")),this.container=r);var n=this.formatText(e.item.get("model"),e);r.innerHTML=n,Mr(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Mr(this.container,{visibility:"hidden"})},updatePosition:function(e){var r=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!r(e,this)){Mr(o,{visibility:"hidden"});return}var l=s.getPointByClient(e.clientX,e.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,h=o.getBoundingClientRect();c>i/2?c-=h.width:c+=this.offset,f>a/2?f-=h.height:f+=this.offset;var d="".concat(c,"px"),p="".concat(f,"px");Mr(this.container,{left:d,top:p,visibility:"visible"})},createTooltip:function(e){var r=e.get("el");r.style.position="relative";var n=Cn('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return r.parentNode.appendChild(n),Mr(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},rgt=j({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(r){return r.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Cde),ngt=j({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(r){return"source: ".concat(r.source," target: ").concat(r.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Cde);var kY="click",igt=["click","dblclick"];const agt={getDefaultCfg:function(){return{trigger:kY,onChange:function(){}}},getEvents:function(){var e,r;return igt.includes(this.trigger)?r=this.trigger:(r=kY,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["node:".concat(r)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var r=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){r.toggle(e),clearTimeout(r.timer),r.timer=0},200)}else this.toggle(e)},toggle:function(e){var r=e.item;if(r){var n=this.graph.findDataById(r.get("id"));if(n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;this.shouldBegin(e,a,this)&&(n.collapsed=a,r.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(r,a,this),this.graph.layout()))}}}}};var ogt=Hf.calculationItemsBBox,sgt=function t(e,r){if(r(e)!==!1&&e){var n=e.get("combos");if(n.length===0)return!1;Te(n,function(i){t(i,r)})}};const lgt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var r=e.item;if(!r||r.destroyed||!this.shouldUpdate(e,this))return!1;var n=r.getType();return n==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var r=this,n=this.graph,i=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(u){var c=u.get("id");return o===c});s.length===0?this.targets.push(i):this.targets=a;var l=[];this.targets.forEach(function(u){var c=u.getModel(),f=c.x,h=c.y,d=c.id;l.push({x:f,y:h,id:d})}),this.set("beforeDragItems",l),this.activeState&&this.targets.map(function(u){var c=u.getModel();if(c.parentId){var f=n.findById(c.parentId);f&&n.setItemState(f,r.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],sgt(i,function(u){if(u.destroyed)return!1;var c=u.getModel();return r.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var r=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,i=e.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(h){var d=h.getModel();return a.parentId,d.id!==a.id&&!r.currentItemChildCombos.includes(d.id)});f.map(function(h){var d=h.getBBox(),p=d.centerX,v=d.centerY,g=d.width,m=l-p,y=u-v,w=2*Math.sqrt(m*m+y*y);c+g-w>.8*c?n.setItemState(h,r.activeState,!0):n.setItemState(h,r.activeState,!1)})}Te(this.targets,function(h){r.updateCombo(h,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,r){var n=this;(this.enableDelegate||r)&&Te(this.targets,function(i){n.updateCombo(i,e,r)})},onDrop:function(e){var r=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(r.activeState&&i.setItemState(n,r.activeState,!1),r.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id,!1)):i.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var r=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=e.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){r.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a,!1))})}else this.targets.map(function(u){if(r.onlyChangeComboSize)n.updateCombo(u);else{var c=u.getModel();c.comboId&&n.updateComboTree(u,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var r=e.item,n=this.graph;this.activeState&&n.setItemState(r,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var r=e.item,n=this.graph;this.activeState&&n.setItemState(r,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var r=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(r.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,r){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&i.setItemState(e,this.activeState,!1),!e){var o=i.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(l){if(!n.onlyChangeComboSize)i.updateComboTree(l,void 0,o);else{i.updateCombo(l);var u=l.getModel(),c=u.x,f=u.y,h=u.id;s.after.combos.push({x:c,y:f,id:h}),i.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,r,n){var i=this;if(n===void 0&&(n={}),r(e,n)!==!1&&e){var a=e.get("combos");Te(a,function(s){i.traverse(s,r,n)});var o=e.get("nodes");Te(o,function(s){i.traverse(s,r,n)})}},updateCombo:function(e,r,n){this.updateSingleItem(e,r,n);var i={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},i),Object.values(i).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,r,n){var i=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=r.x-i.x+this.point[s].x,u=r.y-i.y+this.point[s].y;n&&(l+=i.x-r.x,u+=i.y-r.y),a.updateItem(e,{x:l,y:u},!1)},getParentCombo:function(e){var r=this.graph;if(e){var n=r.findById(e);if(n)return n}},updateDelegate:function(e){var r=this.graph;if(this.delegateShape){var h=e.x-this.origin.x+this.originPoint.minX,d=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:h,y:d})}else{var n=r.get("delegateGroup"),i=null;this.targets.length>1?i=ogt(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=j(j({},ov.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:j({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,r=e.graph,n=e.targets,i={};n==null||n.forEach(function(a){var o=a.getModel().parentId;o&&(i[o]=r.findById(o))}),Object.values(i).forEach(function(a){a&&r.updateCombo(a)})}};var MY="dblclick",ugt=["click","dblclick"];const cgt={getDefaultCfg:function(){return{trigger:MY,relayout:!0}},getEvents:function(){var e,r;return ugt.includes(this.trigger)?r=this.trigger:(r=MY,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["combo:".concat(r)]="onComboClick",e},onComboClick:function(e){var r=e.item,n=this,i=n.graph,a=n.relayout;if(!(!r||r.destroyed||r.getType()!=="combo")){var o=r.getModel(),s=o.id;s&&(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}};var fgt=Hf.isPolygonsIntersect,hgt=Hf.pathToPoints,AY="shift",dgt=["drag","shift","ctrl","alt","control"],pgt=function(e,r){var n,i=e.getKeyShape();if(e.get("type")==="path")n=hgt(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return fgt(r,n)};const vgt={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:AY,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return dgt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=AY,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var r=this.lasso,n=e.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),r||(r=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),r.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,r=[];return e.length&&(e.forEach(function(n,i){i===0?r.push(["M",n.x,n.y]):r.push(["L",n.x,n.y])}),r.push(["L",e[0].x,e[0].y])),r},clearStates:function(e){e===void 0&&(e="canvas:click");var r=this,n=r.graph,i=r.selectedState,a=r.shouldDeselect,o=n.findAllByState("node",i),s=n.findAllByState("edge",i);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(l){return n.setItemState(l,i,!1)}),s.forEach(function(l){return n.setItemState(l,i,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,r=this,n=r.graph,i=r.shouldUpdate,a=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(c){if(c.isVisible()&&pgt(c,a)&&i(c,"select",e)){s.push(c);var f=c.getModel();l.push(f.id),n.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(h){if(h.isVisible()){var d=h.getModel(),p=d.source,v=d.target;l.includes(p)&&l.includes(v)&&i(h,"select",e)&&(u.push(h),n.setItemState(h,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var e=this,r=e.graph.get("delegateGroup").addShape("path",{attrs:j({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=r,this.delegate=r,this.points=[],r},updateLasso:function(e){var r=this;this.lasso.attr({path:r.getLassoPath()})},onKeyDown:function(e){var r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var TY="click",ggt=["click","drag"],OY=void 0,mgt=["shift","ctrl","control","alt","meta",void 0];const ygt={getDefaultCfg:function(){return{trigger:TY,key:OY,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;ggt.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=TY,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&mgt.indexOf(e.key.toLowerCase())===-1&&(e.trigger=OY,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));var r;return e.trigger==="drag"?r={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(r={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(r.keydown="onKeyDown",r.keyup="onKeyUp"),r},onDragEnd:function(e){var r=this;if(!(r.key&&!r.keydown)){var n=e.item;(!n||n.getID()===r.source||n.getType()!=="node")&&r.cancelCreating({item:r.edge,x:e.x,y:e.y})}},onClick:function(e){var r=this;if(!(r.key&&!r.keydown)){var n=e.item,i=r.graph,a=n.getModel(),o=r.getEdgeConfig;if(r.addingEdge&&r.edge){if(!r.shouldEnd(e,r))return;var s=void 0;o&&Bn(o)?s=o({source:r.source,target:a.id},r):s=r.edgeConfig;var l=j({target:a.id},s);if(r.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(r.edge,l,!1),i.get("enabledStack")){var u=j(j({},r.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:r.edge}),r.edge.getKeyShape().set("capture",!0),r.edge=null,r.addingEdge=!1}else{if(!r.shouldBegin(e,r))return;var s=void 0;o&&Bn(o)?s=o({source:a.id,target:a.id},r):s=r.edgeConfig,r.edge=i.addItem("edge",j({source:a.id,target:a.id},s),!1),r.source=a.id,r.addingEdge=!0,r.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var r=this;if(!(r.key&&!r.keydown)){r.edge&&r.edge.destroyed&&r.cancelCreating({item:r.edge});var n={x:e.x,y:e.y};if(!r.graph.findById(r.source)){r.addingEdge=!1;return}r.addingEdge&&r.edge&&r.graph.updateItem(r.edge,{target:n},!1)}},cancelCreating:function(e){var r,n,i=this;if(!(i.key&&!i.keydown)){var a=i.graph,o=e.item;if(i.addingEdge&&(i.edge===o||!((n=(r=e.target)===null||r===void 0?void 0:r.isCanvas)===null||n===void 0)&&n.call(r))){i.edge&&!i.edge.destroyed&&a.removeItem(i.edge,!1),i.edge=null,i.addingEdge=!1;return}}},onKeyDown:function(e){var r=this,n=e.key;n&&(n.toLowerCase()===r.key.toLowerCase()?r.keydown=!0:r.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var IY="ctrl",wgt=["shift","ctrl","alt","control"],bgt="1";const xgt={getDefaultCfg:function(){return{trigger:IY,combinedKey:bgt,functionName:"fitView",functionParams:[]}},getEvents:function(){return wgt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=IY,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var r=e.key;if(r){var n=this.trigger.toLowerCase(),i=r.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var Sgt=["shift","ctrl","alt","control","meta"];const Egt={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||Sgt.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var r=this;if(this.allowDrag(e)){var n=this.graph,i=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];i.includes("control")&&i.push("ctrl");var a=i.some(function(L){return e["".concat(L,"Key")]});if(a){var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),l=n.getZoom();e.wheelDelta>0?l=l+l*.05:l=l-l*.05,n.zoomTo(l,{x:s.x,y:s.y})}else{var u=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var f=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),p=this.scalableRange,v=this.scalableRange;p<1&&p>-1&&(p=f*p,v=h*v);var g=d.minX,m=d.maxX,y=d.minY,w=d.maxY;u>0?m<-p?u=0:m-u<-p&&(u=m+p):u<0&&(g>f+p?u=0:g-u>f+p&&(u=g-(f+p))),c>0?w<-v?c=0:w-c<-v&&(c=w+v):c<0&&(y>h+v?c=0:y-c>h+v&&(c=y-(h+v))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(u=0),n.translate(-u,-c)}e.preventDefault();var b=this.get("enableOptimize");if(b){var x=this.get("optimizeZoom"),S=this.get("optimized"),E=n.getNodes(),_=n.getEdges(),k=E.length,C=_.length;if(!S){for(var M=0;M<k;M++){var A=E[M];if(!A.destroyed)for(var T=A.get("group").get("children"),D=T.length,F=0;F<D;F++){var R=T[F];!R.destoryed&&!R.get("isKeyShape")&&(R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide())}}for(var B=0;B<C;B++)for(var N=_[B],T=N.get("group").get("children"),D=T.length,F=0;F<D;F++){var R=T[F];R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout(function(){var L=n.getZoom(),G=r.get("optimized");if(G){r.set("optimized",!1);for(var q=0;q<k;q++){var K=E[q],V=K.get("group").get("children"),le=V.length;if(L<x){var ge=K.getKeyShape(),xe=ge.get("ori-visibility");xe&&ge.show()}else for(var Ie=0;Ie<le;Ie++){var He=V[Ie],xe=He.get("ori-visibility");!He.get("visible")&&xe&&xe&&He.show()}}for(var Ge=0;Ge<C;Ge++){var ht=_[Ge],V=ht.get("group").get("children"),le=V.length;if(L<x){var ge=ht.getKeyShape(),xe=ge.get("ori-visibility");xe&&ge.show()}else for(var Ie=0;Ie<le;Ie++){var He=V[Ie];if(!He.get("visible")){var xe=He.get("ori-visibility");xe&&He.show()}}}}},100);this.set("timeout",O)}}},allowDrag:function(e){var r,n,i=e.target,a=i&&i.isCanvas&&i.isCanvas();if(Tb(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if(sa(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,l=o.edge,u=o.combo,c=(n=(r=e.item)===null||r===void 0?void 0:r.getType)===null||n===void 0?void 0:n.call(r);if(!s&&c==="node"||!l&&c==="edge"||!u&&c==="combo")return!1}return!0}};var _gt={"drag-canvas":Xvt,"zoom-canvas":tgt,"drag-node":Yvt,"activate-relations":qvt,"brush-select":Qvt,"click-select":Jvt,"lasso-select":vgt,tooltip:rgt,"edge-tooltip":ngt,"collapse-expand":agt,"drag-combo":lgt,"collapse-expand-combo":cgt,"create-edge":ygt,"shortcuts-call":xgt,"scroll-canvas":Egt};Te(_gt,function(t,e){Gle(e,t)});var Cgt=j(j({},O$e),NVe),kgt=rs.Fisheye,Mgt=rs.TimeBar,Agt=rs.ImageMinimap,Tgt=rs.EdgeFilterLens,Ogt=rs.SnapLine,Igt=rs.Annotation;const Ai={version:ov.version,Graph:Yhe,TreeGraph:jht,Util:Hf,Layout:Pr.Layouts,TreeLayout:Aht,registerLayout:Tht,Global:ov,registerBehavior:Gle,registerCombo:yUe,registerEdge:jle,registerNode:zf,Minimap:rs.Minimap,Grid:rs.Grid,Bundling:rs.Bundling,Menu:rs.Menu,ToolBar:rs.ToolBar,Tooltip:rs.Tooltip,Legend:rs.Legend,TimeBar:Mgt,SnapLine:Ogt,Fisheye:kgt,ImageMinimap:Agt,EdgeFilterLens:Tgt,Annotation:Igt,Algorithm:Cgt,Arrow:Nle,Marker:Fle,Shape:mn};Ai.version="4.8.23";var Dgt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom(),n=e.get("canvas"),i=n.getPointByClient(n.get("width")/2,n.get("height")/2),a=n.get("pixelRatio")||1,o=1+.05*5;if(!(o*r>5))return e.zoom(o,{x:i.x/a,y:i.y/a},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*r*100),"%"),ratio:o*r}}}},Pgt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom(),n=e.get("canvas"),i=n.getPointByClient(n.get("width")/2,n.get("height")/2),a=n.get("pixelRatio")||1,o=1-.05*5;if(!(o*r<.3))return e.zoom(o,{x:i.x/a,y:i.y/a},!0,{easing:"easeCubic",duration:150}),{text:"".concat(Math.round(o*r*100),"%"),ratio:o*r}}}},Lgt=function(e){return function(r){var n=r.text,i=r.ratio;if(!(!e||e.destroyed)){var a=e.get("canvas"),o=a.getPointByClient(a.get("width")/2,a.get("height")/2),s=a.get("pixelRatio")||1;return e.zoomTo(i,{x:o.x/s,y:o.y/s},!0,{easing:"easeCubic",duration:150}),{text:n,ratio:i}}}},Rgt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getZoom();return e.zoom(1/r),e.fitCenter(),{text:"100%",ratio:1}}}},Ngt=function(e){return function(){if(!(!e||e.destroyed)){var r=e.getNodes();r.length>0&&e.fitView([20,20],{},!0);var n=e.getZoom();return{text:"".concat(Math.round(n*100),"%"),ratio:n}}}};const Fgt=Object.freeze(Object.defineProperty({__proto__:null,handleAutoZoom:Ngt,handleChangeZoom:Lgt,handleRealZoom:Rgt,handleZoomIn:Pgt,handleZoomOut:Dgt},Symbol.toStringTag,{value:"Module"}));var Bgt=function(e){return function(r){e.getNodes().forEach(function(n){e.clearItemStates(n,["active","inactive"]),r.indexOf(n.get("id"))!==-1?e.setItemState(n,"active",!0):e.setItemState(n,"active",!1)})}},$gt=function(e){return function(r){if(!(!e||typeof r!="string")){var n=e.findById(r);if(!n){console.warn("The node ".concat(r," does not exist!"));return}e.focusItem(r,!0,{duration:200,easing:"easeCubic"}),e.setItemState(n,"selected",!0),n.toFront()}}};const zgt=Object.freeze(Object.defineProperty({__proto__:null,focusNodeById:$gt,highlightNodeById:Bgt},Symbol.toStringTag,{value:"Module"}));function jgt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var DY=Object.assign(Object.assign({},Fgt),zgt),PY=function(e){var r=Object.keys(DY);return r.reduce(function(n,i){return Object.assign(Object.assign({},n),jgt({},i,DY[i](e)))},{})},Ggt={type:"compactBox",direction:"LR",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 20}},LY=["dendrogram","compactBox","mindmap","indented"],Ugt={type:"force2"},e_=function(){return Math.round((Math.random()-.5)*80)},RY=500,NY=300,Wgt=function(e,r){var n=e.nodes,i=e.edges,a=r.nodes,o=new Map;a.forEach(function(u){var c=u.id,f=u.x,h=u.y;o.set(c,{x:f,y:h})});var s=new Map;n.forEach(function(u){var c=u.id,f=o.get(c),h=f.x,d=f.y;!window.isNaN(h)&&!window.isNaN(d)?(u.x=h,u.y=d):s.set(c,u)});var l=new Map;return i.forEach(function(u){var c=u.source,f=u.target,h=s.get(c),d=s.get(f),p=o.get(c),v=!window.isNaN(p.x)&&!window.isNaN(p.y),g=o.get(f),m=!window.isNaN(g.x)&&!window.isNaN(g.y);h&&m&&l.set(c,{x:g.x+e_(),y:g.y+e_()}),d&&v&&l.set(f,{x:p.x+e_(),y:p.y+e_()})}),n.forEach(function(u){var c=u.id,f=o.get(c);(window.isNaN(f.x)||window.isNaN(f.y))&&(f=l.get(c)||{}),!window.isNaN(f.x)&&!window.isNaN(f.y)?(u.x=f.x,u.y=f.y):(u.x=RY/2+Math.round(Math.random()*RY),u.y=NY/2+Math.round(Math.random()*NY))}),Object.assign(Object.assign({},e),{nodes:n,edges:i})};function Vgt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hgt(t,e,r){return e&&FY(t.prototype,e),r&&FY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var t_=function(e){return!(e&&e.nodes&&e.nodes.length!==0)},r_=["force","graphin-force","g6force","gForce","comboForce"],Xgt=function(){function t(e){var r=this;Vgt(this,t),this.updateOptions=function(){var n={type:"concentric"},i=r.graphin,a=i.width,o=i.height,s=i.props,l=s.layout,u=l===void 0?n:l,c=u.type,f=c===void 0?"concentric":c,h=u.preset,d={width:a,height:o,center:[a/2,o/2]};if(r.options=Object.assign(Object.assign(Object.assign({},d),UG[f]||{}),u),t_(r.graphin.data)){r.prevOptions={};return}if(r_.indexOf(f)!==-1){var p=r.prevOptions.type||"grid";h!=null&&h.type&&(p=h.type),t_(r.graphin.data)&&(p=h.type||"grid"),r.options.preset=Object.assign(Object.assign(Object.assign({type:p},d),UG[p]||{}),h)}},this.processForce=function(){var n=r,i=n.options,a=n.graphin,o=a.graph,s=i.type,l=i.animation,u=i.animate;if(s==="graphin-force"&&(n.options.graph=o),s==="force"||s==="g6force"||s==="gForce"||s==="comboCombined"){var c=n.options.onTick,f=function(){c&&c(),(l||u)&&n.refreshPosition()};n.options.tick=f;var h=n.options.onLayoutEnd;n.options.onLayoutEnd=function(){n.refreshPosition(),h==null||h(),o.emit("afterlayout")}}(s==="comboForce"||s==="comboCombined")&&(n.options.comboTrees=o.get("comboTrees"));var d={prev:r_.indexOf(n.prevOptions.type)!==-1,current:r_.indexOf(n.options.type)!==-1},p=n.options.type===n.prevOptions.type;if(!t_(a.data)){if(d.current&&!p){var v=n.options.preset;n.presetLayout=new Ai.Layout[v.type](Object.assign({},v)||{}),n.presetLayout.init(a.data),n.presetLayout.execute(),n.presetLayout.data=Object.assign({},a.data)}if(d.current&&d.prev&&!n.hasPosition()){var g=n.graph.save(),m=n.options.preset;t_(g)&&(n.presetLayout=new Ai.Layout[m.type](Object.assign({},m)||{}),n.presetLayout.init(a.data),n.presetLayout.execute(),g=a.data),a.data=Wgt(a.data,g)}}},this.refreshPosition=function(){var n=r.graphin,i=n.options,a=i.animate,o=i.layoutAnimate,s=r.options.type;a&&!o&&!r.options.animation?r.graph.positionsAnimate(s==="comboCombined"):r.graph.refreshPositions(s==="comboCombined")},this.destroy=function(){r.presetLayout&&r.presetLayout.destroy&&r.presetLayout.destroy(),r.instance&&r.instance.destroy&&r.instance.destroy(),r.presetLayout=null,r.instance=null},this.getDataFromGraph=function(){for(var n=[],i=[],a=[],o=[],s=r.graph.getNodes(),l=r.graph.getEdges(),u=r.graph.getCombos(),c=s.length,f=0;f<c;f++){var h=s[f];if(h&&h.isVisible()){var d=h.getModel();n.push(d)}}for(var p=l.length,v=0;v<p;v++){var g=l[v];if(g&&g.isVisible()){var m=g.getModel();m.isComboEdge?o.push(m):i.push(m)}}for(var y=u.length,w=0;w<y;w++){var b=u[w];if(b&&b.isVisible()){var x=b.getModel();a.push(x)}}return{nodes:n,edges:i,combos:a,comboEdges:o}},this.graphin=e,this.graph=this.graphin.graph,this.presetLayout=null,this.prevOptions={},this.init()}return Hgt(t,[{key:"hasPosition",value:function(){var r=this.graphin,n=r.data,i=n===void 0?{}:n;return!i.nodes||i.nodes.length===0?!1:i.nodes.every(function(a){return!window.isNaN(Number(a.x))&&!window.isNaN(Number(a.y))})}},{key:"init",value:function(){this.updateOptions();var r=this.options,n=this.graphin,i=n.data,a=r.type;this.processForce(),Ai.Layout[a]||console.warn("".concat(a," layout not found, current layout is grid"));var o=Ai.Layout[a]||Ai.Layout.grid;this.graph.emit("beforelayout"),this.instance=new o(this.options),this.instance.init(i)}},{key:"start",value:function(){var r=this.options.type;this.instance.execute(),!(r==="force"||r==="g6force"||r==="gForce"||r==="comboCombined"||r==="force2")&&(this.refreshPosition(),this.graph.emit("afterlayout"))}},{key:"changeLayout",value:function(){var r=this.graphin,n=r.graph,i=r.data,a=r.isTree,o=r.layoutCache;if(!n||n.destroyed||!i||!i.nodes||!i.nodes.length||o&&this.hasPosition()||a)return!1;r_.indexOf(this.options.type)!==-1&&this.destroy(),this.prevOptions=Object.assign({},this.options),this.init(),this.start()}}]),t}();const BY=Xgt;var Ygt={mode:"light",primaryColor:"#873bf4",nodeSize:26,edgeSize:1,primaryEdgeColor:"#ddd"},EB=function(e){var r=Object.assign(Object.assign({},Ygt),e),n=r.primaryColor,i=r.primaryEdgeColor,a=r.nodeSize,o=r.edgeSize,s=r.mode,l=r.background,u=aae({primaryColor:n,nodeSize:a,mode:s}),c=iae({primaryEdgeColor:i,edgeSize:o,mode:s}),f=nae(),h={light:"#fff",dark:"#1f1f1f"};return Object.assign(Object.assign({},r),{mode:s,background:l||h[s],defaultNodeStyle:{type:u.type,style:u.style},defaultNodeStatusStyle:{status:u.status},defaultEdgeStyle:{type:c.type,style:c.style},defaultEdgeStatusStyle:{status:c.status},defaultComboStyle:{type:f.type,style:f.style},defaultComboStatusStyle:{status:f.status}})},qgt={animation:"animate",minDistanceThreshold:"minMovement",maxIterations:"maxIterations"},kD=function t(e,r){if(!e)return e;var n={};if(Object.keys(e).forEach(function(c){var f;if(c==="preset"&&(!((f=e.preset)===null||f===void 0)&&f.type)){n.preset=t(e.preset,r);return}var h=qgt[c];h?n[h]=e[c]:n[c]=e[c]}),e.done&&(e.onLayoutEnd?n.onLayoutEnd=function(c){e.onLayoutEnd(r,c),e.done(r,c)}:n.onLayoutEnd=function(c){e.done(r,c)}),n.type==="concentric"){var i=n.minNodeSpacing,a=i===void 0?60:i,o=n.preventOverlap,s=o===void 0?!0:o,l=n.nodeSize,u=l===void 0?60:l;n.minNodeSpacing=a,n.preventOverlap=s,n.nodeSize=u}return n};function iR(t){"@babel/helpers - typeof";return iR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iR(t)}function Kgt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qgt(t,e,r){return e&&$Y(t.prototype,e),r&&$Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zgt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aR(t,e)}function aR(t,e){return aR=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},aR(t,e)}function Jgt(t){var e=t0t();return function(){var n=Lk(t),i;if(e){var a=Lk(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return e0t(this,i)}}function e0t(t,e){if(e&&(iR(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kde(t)}function kde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t0t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lk(t){return Lk=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Lk(t)}var n_=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},r0t=Gv.DragCanvas,n0t=Gv.ZoomCanvas,i0t=Gv.DragNode,a0t=Gv.DragCombo,o0t=Gv.ClickSelect,s0t=Gv.BrushSelect,l0t=Gv.ResizeCanvas,JA=function(t){Zgt(r,t);var e=Jgt(r);function r(n){var i;Kgt(this,r),i=e.call(this,n),i.graphDOM=null,i.initData=function(f){f.children&&(i.isTree=!0),i.data=DG(f)},i.initGraphInstance=function(){var f=i.props,h=f.theme,d=f.data,p=f.layout,v=f.width,g=f.height,m=f.defaultCombo,y=m===void 0?{style:{},type:"graphin-combo"}:m,w=f.defaultEdge,b=w===void 0?{style:{},type:"graphin-line"}:w,x=f.defaultNode,S=x===void 0?{style:{},type:"graphin-circle"}:x,E=f.nodeStateStyles,_=f.edgeStateStyles,k=f.comboStateStyles,C=f.modes,M=C===void 0?{default:[]}:C,A=f.animate,T=f.handleAfterLayout,D=n_(f,["theme","data","layout","width","height","defaultCombo","defaultEdge","defaultNode","nodeStateStyles","edgeStateStyles","comboStateStyles","modes","animate","handleAfterLayout"]);M.default.length>0&&console.info("%c suggestion: you can use @antv/graphin Behaviors components","color:lightgreen");var F=i.graphDOM,R=F.clientWidth,B=F.clientHeight;i.initData(d),i.width=Number(v)||R||500,i.height=Number(g)||B||500;var N=EB(h);N.defaultNodeStyle,N.defaultEdgeStyle,N.defaultComboStyle,N.defaultNodeStatusStyle,N.defaultEdgeStatusStyle,N.defaultComboStatusStyle;var O=n_(N,["defaultNodeStyle","defaultEdgeStyle","defaultComboStyle","defaultNodeStatusStyle","defaultEdgeStatusStyle","defaultComboStatusStyle"]);i.isTree=!!d.children||LY.indexOf(String(p&&p.type))!==-1;var L={defaultNode:{style:Object.assign(Object.assign({},S.style),{_theme:h}),type:S.type||"graphin-circle"},defaultEdge:{style:Object.assign(Object.assign({},b.style),{_theme:h}),type:b.type||"graphin-line"},defaultCombo:{style:Object.assign(Object.assign({},y.style),{_theme:h}),type:y.type||"combo",labelCfg:y.labelCfg},nodeStateStyles:E,edgeStateStyles:_,comboStateStyles:k};i.theme=Object.assign(Object.assign({},L),O),i.options=Object.assign(Object.assign(Object.assign({container:i.graphDOM,renderer:"canvas",width:i.width,height:i.height,animate:A!==!1},L),{modes:M}),D),i.isTree?(i.options.layout=p||Ggt,i.graph=new Ai.TreeGraph(i.options)):(i.useGraphinLayoutController||(i.options.layout=kD(p,i.graph)||Ugt),i.graph=new Ai.Graph(i.options)),i.graph.on("afterlayout",function(){T&&T(i.graph)}),i.graph.data(i.data),i.setTextDirection(),i.graph.render(),!i.isTree&&i.useGraphinLayoutController&&(i.layout=new BY(kde(i)),i.layout.start()),i.initStatus(),i.apis=PY(i.graph),i.setState({isReady:!0,context:{graph:i.graph,apis:i.apis,theme:i.theme,layout:i.layout,dragNodes:i.dragNodes,updateContext:i.updateContext}})},i.updateLayout=function(){i.useGraphinLayoutController&&i.layout.changeLayout()},i.updateOptions=function(){var f=n_(i.props,[]);return f},i.initStatus=function(){if(!i.isTree){var f=i.props.data,h=f.nodes,d=h===void 0?[]:h,p=f.edges,v=p===void 0?[]:p;d.forEach(function(g){var m=g.status;m&&Object.keys(m).forEach(function(y){i.graph.setItemState(g.id,y,!!m[y])})}),v.forEach(function(g){var m=g.status;m&&Object.keys(m).forEach(function(y){i.graph.setItemState(g.id,y,!!m[y])})})}},i.updateContext=function(f){i.setState(function(h){return{context:Object.assign(Object.assign({},h.context),f)}})},i.clear=function(){i.layout&&i.layout.destroy&&i.layout.destroy(),i.layout={},i.graph.clear(),i.data={nodes:[],edges:[],combos:[]},i.graph.destroy()};var a=n.data,o=n.layout,s=n.width,l=n.height,u=n.layoutCache,c=n_(n,["data","layout","width","height","layoutCache"]);return i.data=a,i.isTree=!!(n.data&&n.data.children)||LY.indexOf(String(o&&o.type))!==-1,i.graph={},i.height=Number(l),i.width=Number(s),i.theme={},i.apis={},i.layoutCache=u,i.layout={},i.dragNodes=[],i.useGraphinLayoutController=(o==null?void 0:o.type)==="graphin-force",i.options=Object.assign({},c),i.state={isReady:!1,context:{graph:i.graph,apis:i.apis,theme:i.theme,layout:i.layout,dragNodes:i.dragNodes,updateContext:i.updateContext}},i}return Qgt(r,[{key:"setTextDirection",value:function(){var i=this.props.dir,a=i===void 0?"ltr":i;this.graph.get("canvas").get("el").setAttribute("dir",a)}},{key:"componentDidMount",value:function(){this.initGraphInstance()}},{key:"componentDidUpdate",value:function(i){var a=this,o,s,l=this.shouldUpdate(i,"data"),u=this.shouldUpdate(i,"layout"),c=this.shouldUpdate(i,"options");this.shouldUpdate(i,"theme");var f=this.props,h=f.data,d=f.layoutCache,p=f.rtl,v=f.layout,g=DG(v);this.layoutCache=d,c&&i.rtl!==p&&(this.setTextDirection(),this.graph.render());var m;if(l){if(this.initData(h),this.isTree)this.graph.changeData(this.data);else{var y=this.state.context.dragNodes;if(m=y.filter(function(S){var E;return((E=a.data)===null||E===void 0?void 0:E.nodes)&&a.data.nodes.find(function(_){return _.id===S.id})}),(s=(o=this.data)===null||o===void 0?void 0:o.nodes)===null||s===void 0||s.forEach(function(S){var E,_,k,C,M=m.find(function(A){return A.id===S.id});M&&(S.mass=(_=(E=M.layout)===null||E===void 0?void 0:E.force)===null||_===void 0?void 0:_.mass,S.layout=Object.assign(Object.assign({},S.layout),{force:{mass:(C=(k=M.layout)===null||k===void 0?void 0:k.force)===null||C===void 0?void 0:C.mass}}))}),this.useGraphinLayoutController)this.graph.data(this.data),this.graph.set("layoutController",null),this.graph.changeData(this.data),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{if(g&&(g.disableTriggerLayout=!0),this.layoutCache)this.graph.destroyLayout();else{var w=kD(g,this.graph);this.graph.updateLayout(w)}this.graph.data(this.data),this.graph.changeData(this.data),this.data=this.graph.get("data")}}this.initStatus(),this.apis=PY(this.graph),this.setState(function(S){return Object.assign(Object.assign({},S),{context:{graph:a.graph,apis:a.apis,theme:a.theme,layout:a.layout,dragNodes:m||S.context.dragNodes,updateContext:a.updateContext}})},function(){a.graph.emit("graphin:datachange"),u&&a.graph.emit("graphin:layoutchange",{prevLayout:i.layout,layout:g})});return}if(u){if(this.useGraphinLayoutController=(g==null?void 0:g.type)==="graphin-force",this.isTree){this.graph.updateLayout(g);return}if(this.useGraphinLayoutController)Object.keys(this.layout).length===0&&(this.layout=new BY(this)),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{var b=this.graph.get("layoutController");b||this.graph.initLayoutController();var x=kD(g,this.graph);x&&(x.disableTriggerLayout=!1),this.graph.updateLayout(x),this.data=this.graph.get("data")}this.graph.emit("graphin:layoutchange",{prevLayout:i.layout,layout:g})}}},{key:"componentWillUnmount",value:function(){var i=this.props.willUnmount;i?(i(),this.layout&&this.layout.destroy&&this.layout.destroy(),this.layout={},this.graph.destroyLayout()):this.clear()}},{key:"componentDidCatch",value:function(i,a){console.error("Catch component error: ",i,a)}},{key:"shouldUpdate",value:function(i,a){var o=i[a],s=this.props[a];return!c4e(o,s)}},{key:"render",value:function(){var i=this,a,o=this.state.isReady,s=this.props,l=s.modes,u=s.style,c=s.containerId,f=s.containerStyle;return te.createElement(ka.Provider,{value:this.state.context},te.createElement("div",{id:c||"graphin-container",style:Object.assign({height:"100%",width:"100%",position:"relative"},f)},te.createElement("div",{"data-testid":"custom-element",className:"graphin-core",ref:function(d){i.graphDOM=d},style:Object.assign({height:"100%",width:" 100%",minHeight:"500px",background:((a=this.theme)===null||a===void 0?void 0:a.background)||"#fff"},u)}),te.createElement("div",{className:"graphin-components"},o&&te.createElement(te.Fragment,null,!l&&te.createElement(te.Fragment,null,te.createElement(r0t,null),te.createElement(n0t,null),te.createElement(i0t,null),te.createElement(a0t,null),te.createElement(o0t,null),te.createElement(s0t,null)),te.createElement(l0t,{graphDOM:this.graphDOM}),this.props.children))))}}],[{key:"registerBehavior",value:function(i,a){Ai.registerBehavior(i,a)}},{key:"registerFontFamily",value:function(i){var a=i(),o=a.glyphs,s=a.fontFamily,l=o.map(function(u){return{name:u.name,unicode:String.fromCodePoint(u.unicode_decimal)}});return new Proxy(l,{get:function(c,f){var h=c.find(function(d){return d.name===f});return h?h==null?void 0:h.unicode:(console.error("%c fontFamily:".concat(s,",does not found ").concat(f," icon")),"")}})}},{key:"registerLayout",value:function(i,a){Ai.registerLayout(i,a)}}]),r}(te.PureComponent);JA.registerNode=function(t,e,r){Ai.registerNode(t,e,r)};JA.registerEdge=function(t,e,r){Ai.registerEdge(t,e,r)};JA.registerCombo=function(t,e,r){Ai.registerCombo(t,e,r)};const Mde=JA;function u0t(t){return d0t(t)||h0t(t)||f0t(t)||c0t()}function c0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0t(t,e){if(t){if(typeof t=="string")return oR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oR(t,e)}}function h0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function d0t(t){if(Array.isArray(t))return oR(t)}function oR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p0t=function(e,r){var n=e.data.id,i=0,a=0,o=0;return r.forEach(function(s){s.source.id===n&&(a+=1,i+=1),s.target.id===n&&(o+=1,i+=1)}),{degree:i,sDegree:a,tDegree:o}},v0t=function(e,r){return u0t(new Set(e==null?void 0:e.map(function(n){var i;return(i=n==null?void 0:n.data)===null||i===void 0?void 0:i[r]})))||[]},sR=function(e,r,n){var i,a;return e==="source"?((i=n==null?void 0:n.find(function(o){var s;return((s=o.target)===null||s===void 0?void 0:s.id)===r.id}))===null||i===void 0?void 0:i.source)||{}:((a=n==null?void 0:n.find(function(o){var s;return((s=o.source)===null||s===void 0?void 0:s.id)===r.id}))===null||a===void 0?void 0:a.target)||{}},Ade=function(e,r,n,i){var a,o=((a=n==null?void 0:n.data)===null||a===void 0?void 0:a[r])||"",s=(i==null?void 0:i.filter(function(l){var u;return((u=l==null?void 0:l.data)===null||u===void 0?void 0:u[r])===o}))||[];return e==="leaf"&&(s=s.filter(function(l){var u,c,f,h;return((c=(u=l.data)===null||u===void 0?void 0:u.layout)===null||c===void 0?void 0:c.sDegree)===0||((h=(f=l.data)===null||f===void 0?void 0:f.layout)===null||h===void 0?void 0:h.tDegree)===0})),s},zY=function(e,r,n){var i=[];switch(e){case"source":i=n==null?void 0:n.filter(function(a){var o;return((o=a.source)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.target});break;case"target":i=n==null?void 0:n.filter(function(a){var o;return((o=a.target)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.source});break;case"both":i=n==null?void 0:n.filter(function(a){var o;return((o=a.source)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.target}).concat(n==null?void 0:n.filter(function(a){var o;return((o=a.target)===null||o===void 0?void 0:o.id)===r.id}).map(function(a){return a.source}));break}return i=g4e(i,"id"),i},g0t=function(e,r,n,i){var a,o=((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.layout)||{},s=o.sDegree,l=o.tDegree,u=r,c=[];s===0?(u=sR("source",r,n),c=zY("both",u,n)):l===0&&(u=sR("target",r,n),c=zY("both",u,n)),c=c.filter(function(h){var d;return((d=h.data)===null||d===void 0?void 0:d.layout)&&(h.data.layout.sDegree===0||h.data.layout.tDegree===0)});var f=Ade(e,i,r,c);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:f}},m0t=function(e){var r=e.map(function(l){return l.x}),n=e.map(function(l){return l.y}),i=(Math.max.apply(null,r)+Math.min.apply(null,r))/2,a=(Math.max.apply(null,n)+Math.min.apply(null,n))/2,o=function(u,c){return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))},s=e.map(function(l){return o(l.x||0,l.y||0)});return e[s.findIndex(function(l){return l===Math.min.apply(null,s)})]},y0t=function(e){var r={x:0,y:0};e.forEach(function(i){r.x+=i.x||0,r.y+=i.y||0});var n=e.length||1;return{x:r.x/n,y:r.y/n}};const Xg={getDegree:p0t,getRelativeNodesType:v0t,getCoreNodeAndRelativeLeafNodes:g0t,getCoreNode:sR,getSameTypeNodes:Ade,getMinDistanceNode:m0t,getAvgNodePosition:y0t};function jY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tde(t,e,r){return e&&jY(t.prototype,e),r&&jY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ode(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var w0t=Tde(function t(e){Ode(this,t),this.id=e.id,this.data=e||{},this.x=e.x||0,this.y=e.y||0}),b0t=Tde(function t(e,r,n,i){Ode(this,t),this.id=e,this.source=r,this.target=n,this.data=i||{}});function x0t(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return Ide(this.cover(e,r),e,r,t)}function Ide(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,a=t._root,o={data:n},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,v,g,m,y;if(!a)return t._root=o,t;for(;a.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h,i=a,!(a=a[m=g<<1|v]))return i[m]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&r===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=r>=(h=(l+c)/2))?l=h:c=h;while((m=g<<1|v)===(y=(p>=h)<<1|d>=f));return i[y]=a,i[m]=o,t}function S0t(t){var e,r,n=t.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(o[r]=i,s[r]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),r=0;r<n;++r)Ide(this,o[r],s[r],t[r]);return this}function E0t(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o=i-r||1,s=this._root,l,u;r>t||t>=i||n>e||e>=a;)switch(u=(e<n)<<1|t<r,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=r+o,a=n+o;break;case 1:r=i-o,a=n+o;break;case 2:i=r+o,n=a-o;break;case 3:r=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=a,this}function _0t(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function C0t(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function io(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function k0t(t,e,r){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,v;for(d&&h.push(new io(d,i,a,c,f)),r==null?r=1/0:(i=t-r,a=e-r,c=t+r,f=e+r,r*=r);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(d.length){var g=(o+l)/2,m=(s+u)/2;h.push(new io(d[3],g,m,l,u),new io(d[2],o,m,g,u),new io(d[1],g,s,l,m),new io(d[0],o,s,g,m)),(v=(e>=m)<<1|t>=g)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var y=t-+this._x.call(null,d.data),w=e-+this._y.call(null,d.data),b=y*y+w*w;if(b<r){var x=Math.sqrt(r=b);i=t-x,a=e-x,c=t+x,f=e+x,n=d.data}}return n}function M0t(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,v,g,m;if(!r)return this;if(r.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=r,!(r=r[g=v<<1|p]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,m=g)}for(;r.data!==t;)if(i=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,i?(a?i.next=a:delete i.next,this):e?(a?e[g]=a:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[m]=r:this._root=r),this):(this._root=a,this)}function A0t(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function T0t(){return this._root}function O0t(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function I0t(t){var e=[],r,n=this._root,i,a,o,s,l;for(n&&e.push(new io(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,a=r.x0,o=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&e.push(new io(i,u,c,s,l)),(i=n[2])&&e.push(new io(i,a,c,u,l)),(i=n[1])&&e.push(new io(i,u,o,s,c)),(i=n[0])&&e.push(new io(i,a,o,u,c))}return this}function D0t(t){var e=[],r=[],n;for(this._root&&e.push(new io(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new io(a,o,s,c,f)),(a=i[1])&&e.push(new io(a,c,s,l,f)),(a=i[2])&&e.push(new io(a,o,f,c,u)),(a=i[3])&&e.push(new io(a,c,f,l,u))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function P0t(t){return t[0]}function L0t(t){return arguments.length?(this._x=t,this):this._x}function R0t(t){return t[1]}function N0t(t){return arguments.length?(this._y=t,this):this._y}function Dde(t,e,r){var n=new _B(e??P0t,r??R0t,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function _B(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function GY(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var vo=Dde.prototype=_B.prototype;vo.copy=function(){var t=new _B(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=GY(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?r.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=GY(n));return t};vo.add=x0t;vo.addAll=S0t;vo.cover=E0t;vo.data=_0t;vo.extent=C0t;vo.find=k0t;vo.remove=M0t;vo.removeAll=A0t;vo.root=T0t;vo.size=O0t;vo.visit=I0t;vo.visitAfter=D0t;vo.x=L0t;vo.y=N0t;var F0t=.81,UY=.1;function B0t(t,e,r){var n=r/(e*e),i=t.map(function(o,s){return Object.assign(Object.assign({index:s},o),{vx:0,vy:0,weight:n})}),a=Dde(i,function(o){return o.x},function(o){return o.y}).visitAfter($0t);return i.forEach(function(o){z0t(o,a)}),i.map(function(o){return{vx:o.vx,vy:o.vy}})}function $0t(t){var e=0,r=0,n=0;if(t.length){for(var i=0;i<4;i++){var a=t[i];a&&a.weight&&(e+=a.weight,r+=a.x*a.weight,n+=a.y*a.weight)}t.x=r/e,t.y=n/e,t.weight=e}else{var o=t;t.x=o.data.x,t.y=o.data.y,t.weight=o.data.weight}}function z0t(t,e){var r=function(i,a,o,s,l){var u=t.x-i.x||.001,c=t.y-i.y||.001,f=s-a,h=u*u+c*c+UY,d=Math.sqrt(h)+UY;if(f*f/F0t<h)return t.vx+=u/d*i.weight/h,t.vy+=c/d*i.weight/h,!0;if(i.length)return!1;i.data!==t&&(t.vx+=u/d*i.data.weight/h,t.vy+=c/d*i.data.weight/h)};e.visit(r)}function WY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j0t(t,e,r){return e&&WY(t.prototype,e),r&&WY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Bu=j0t(function t(e,r){var n=this;G0t(this,t),this.getvec=function(){return n},this.add=function(i){return new t(n.x+i.x,n.y+i.y)},this.subtract=function(i){return new t(n.x-i.x,n.y-i.y)},this.magnitude=function(){return Math.sqrt(n.x*n.x+n.y*n.y)},this.normalise=function(){return n.divide(n.magnitude())},this.divide=function(i){return new t(n.x/i||0,n.y/i||0)},this.scalarMultip=function(i){return new t(n.x*i,n.y*i)},this.x=e,this.y=r});function VY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U0t(t,e,r){return e&&VY(t.prototype,e),r&&VY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function W0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var V0t=U0t(function t(e,r,n){var i=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;W0t(this,t),this.updateAcc=function(o){i.a=i.a.add(o.divide(i.m))},this.p=e,this.m=a,this.v=new Bu(0,0),this.a=new Bu(0,0),this.id=r,this.data=n});const HY=V0t;function XY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H0t(t,e,r){return e&&XY(t.prototype,e),r&&XY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function X0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Y0t=H0t(function t(e,r,n){X0t(this,t),this.source=e,this.target=r,this.length=n});const YY=Y0t;function qY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function q0t(t,e,r){return e&&qY(t.prototype,e),r&&qY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function K0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Q0t=q0t(function t(e){var r=this;K0t(this,t),this.updateOptions=function(n){n&&Object.keys(n).forEach(function(i){r.props[i]=n[i]})},this.setData=function(n){r.nodes=[],r.edges=[],r.nodeSet={},r.edgeSet={},r.nodePoints=new Map,r.edgeSprings=new Map,r.sourceData=n,r.judgingDistance=0,("nodes"in n||"edges"in n)&&(r.addNodes(n.nodes),r.addEdges(n.edges))},this.getMass=function(n){var i,a=n.layout||{},o=a.degree,s=o===void 0?(i=Xg.getDegree(n,r.edges))===null||i===void 0?void 0:i.degree:o,l=a.force;return l&&l.mass?l.mass:s<5?1:s*5},this.init=function(){var n=r.props,i=n.width,a=n.height,o=r.props.centripetalOptions,s=r.props,l=s.leafCluster,u=s.clustering,c=s.nodeClusterBy,f=s.clusterNodeStrength,h=function(b){return typeof f=="function"?f(b):f},d;if(r.nodes.forEach(function(w){var b=w.data.x||i/2,x=w.data.y||a/2,S=new Bu(b,x);w.data.layout||(w.data.layout={});var E=Xg.getDegree(w,r.edges);w.data.layout=Object.assign(Object.assign({},w.data.layout),E);var _=r.getMass(w.data);r.nodePoints.set(w.id,new HY(S,String(w.id),w.data,_))}),r.edges.forEach(function(w){var b=r.nodePoints.get(w.source.id),x=r.nodePoints.get(w.target.id),S=r.props.defSpringLen(w,b,x);r.edgeSprings.set(w.id,new YY(b,x,S))}),l){d=r.getSameTypeLeafMap();var p=Xg.getRelativeNodesType(r.nodes,c);o={single:100,leaf:function(b,x,S){var E=d[b.id]||{},_=E.relativeLeafNodes,k=E.sameTypeLeafNodes;return(k==null?void 0:k.length)===(_==null?void 0:_.length)||(p==null?void 0:p.length)===1?1:h(b)},others:1,center:function(b,x,S){var E,_=((E=b.data)===null||E===void 0?void 0:E.layout)||{},k=_.degree;if(!k)return{x:100,y:100};var C;if(k===1){var M=d[b.id]||{},A=M.sameTypeLeafNodes,T=A===void 0?[]:A;T.length===1?C=void 0:T.length>1&&(C=Xg.getAvgNodePosition(T))}else C=void 0;return{x:C==null?void 0:C.x,y:C==null?void 0:C.y}}}}if(u){d||(d=r.getSameTypeLeafMap());var v=Array.from(new Set(r.nodes.map(function(w){var b;return(b=w.data)===null||b===void 0?void 0:b[c]}))).filter(function(w){return w!==void 0}),g={};v.forEach(function(w){var b=r.nodes.filter(function(x){var S;return((S=x.data)===null||S===void 0?void 0:S[c])===w});g[w]=Xg.getAvgNodePosition(b)}),o={single:function(b){return h(b)},leaf:function(b){return h(b)},others:function(b){return h(b)},center:function(b,x,S){var E,_=g[(E=b.data)===null||E===void 0?void 0:E[c]];return{x:_==null?void 0:_.x,y:_==null?void 0:_.y}}}}r.centripetalOptions=Object.assign(Object.assign({},r.centripetalOptions),o);var m=r.nodePoints.size,y=Math.pow(10,2);r.props.minEnergyThreshold=1/2*Math.pow(1,2)*1*m*y},this.start=function(){r.init(),r.props.animation?r.animation():r.slienceForce()},this.calTotalEnergy=function(){var n=0;return r.nodes.forEach(function(i){var a=r.nodePoints.get(i.id),o=a.v.magnitude(),s=a.m;n+=s*Math.pow(o,2)*.5}),n},this.slienceForce=function(){for(var n=r.props,i=n.done,a=n.maxIterations,o=n.minDistanceThreshold,s=0;(r.judgingDistance>o||s<1)&&s<a;s++)r.tick(r.props.tickInterval),r.iterations++;r.render(),i&&i(r.renderNodes)},this.requestAnimationFrame=function(n){var i=r.props.enableWorker;return i?setInterval(function(){n()},16):window.requestAnimationFrame(n)},this.cancelAnimationFrame=function(n){var i=r.props.enableWorker;i?clearInterval(n):window.cancelAnimationFrame(n)},this.animation=function(){var n=r.props,i=n.enableWorker,a=n.maxIterations,o=n.minDistanceThreshold,s=n.done,l=n.tickInterval;if(i){for(var u=new Date().valueOf(),c=.22,f=function(w){return w>10?2e3:20*w*w},h=0;h<a;h++){var d=Math.max(.02,c-h*.002);r.tick(d);var p=new Date().valueOf()-u;p>=f(h)&&(r.render(),u=new Date().valueOf());var v=r.calTotalEnergy(),g=r.registers.get("monitor");if(g&&g(r.reportMointor(v)),r.judgingDistance<o){r.render(),s&&s(r.renderNodes);return}}return}var m=function y(){r.tick(l),r.render(),r.iterations++;var w=r.calTotalEnergy(),b=r.registers.get("monitor");b&&b(r.reportMointor(w)),r.judgingDistance<o||r.iterations>r.props.maxIterations?(r.cancelAnimationFrame(r.timer),r.iterations=0,r.done=!0,s&&s(r.renderNodes)):r.timer=r.requestAnimationFrame(y)};r.timer=r.requestAnimationFrame(m)},this.render=function(){var n=r.registers.get("render");r.renderNodes=[],r.nodePoints.forEach(function(i){r.renderNodes.push(Object.assign(Object.assign({},r.nodeSet[i.id]&&r.nodeSet[i.id].data),{x:i.p.x,y:i.p.y}))}),n?n({nodes:r.renderNodes,edges:r.sourceData.edges}):console.error("need a render function")},this.reportMointor=function(n){var i={energy:n,iterations:r.iterations,nodes:r.nodes,edges:r.edges};return i},this.tick=function(n){r.updateCoulombsLawOptimized(),r.updateHookesLaw(),r.attractToCentre(),r.attractToSide(),r.updateVelocity(n),r.updatePosition(n)},this.updateCoulombsLawOptimized=function(){var n=r.props.coulombDisScale,i=r.props.repulsion,a=r.nodes.map(function(s){var l=r.nodePoints.get(s.id).p;return{x:l.x,y:l.y}}),o=B0t(a,n,i);r.nodes.forEach(function(s,l){r.nodePoints.get(s.id).updateAcc(new Bu(o[l].vx,o[l].vy))})},this.updateCoulombsLaw=function(){for(var n=r.nodes.length,i=0;i<n;i++)for(var a=i+1;a<n;a++)if(i!==a){var o=r.nodes[i],s=r.nodes[a],l=r.props.coulombDisScale,u=r.props.repulsion,c=r.nodePoints.get(o.id).p.subtract(r.nodePoints.get(s.id).p),f=(c.magnitude()+.1)*l,h=c.normalise(),d=1;r.nodePoints.get(o.id).updateAcc(h.scalarMultip(u*d).divide(Math.pow(f,2))),r.nodePoints.get(s.id).updateAcc(h.scalarMultip(u*d).divide(-Math.pow(f,2)))}},this.updateHookesLaw=function(){r.edges.forEach(function(n){var i=r.edgeSprings.get(n.id),a=i.target.p.subtract(i.source.p),o=i.length-a.magnitude(),s=a.normalise();i.source.updateAcc(s.scalarMultip(-r.props.stiffness*o)),i.target.updateAcc(s.scalarMultip(r.props.stiffness*o))})},this.implementForce=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,o=r.nodePoints.get(n.id),s=o.p.subtract(i);o.updateAcc(s.scalarMultip(-a))},this.attractToCentre=function(){r.nodes.forEach(function(n){var i,a=(i=n.data)===null||i===void 0?void 0:i.layout,o=a.degree,s=a.sDegree,l=a.tDegree,u=r.centripetalOptions,c=u.leaf,f=u.single,h=u.others,d=u.center,p=r.props,v=p.width,g=p.height;if(d!==void 0){var m=d(n,r.nodes,r.edges,v,g),y=m.x,w=m.y,b=m.centerStrength;if(!(y===void 0||w===void 0)){var x=new Bu(y,w);if(b){r.implementForce(n,x,b);return}var S=typeof c=="function"?c(n,r.nodes,r.edges):c,E=typeof f=="function"?f(n):f,_=typeof h=="function"?h(n):h,k=l===0||s===0,C=o===0;if(!(S===0||E===0||_===0)){if(C){r.implementForce(n,x,E);return}if(k){r.implementForce(n,x,S);return}r.implementForce(n,x,_)}}}})},this.attractToSide=function(){if(!(!r.props.defSideCoe||typeof r.props.defSideCoe!="function")){var n=r.props.height;r.nodes.forEach(function(i){var a=r.props.defSideCoe(i);if(a!==0){var o=r.nodePoints.get(i.id),s=o.p.x,l=a>0?0:n,u=new Bu(s,l);r.implementForce(i,u,Math.abs(a))}})}},this.updateVelocity=function(n){r.nodes.forEach(function(i){var a=r.nodePoints.get(i.id);a.v=a.v.add(a.a.scalarMultip(n)).scalarMultip(r.props.damping),a.v.magnitude()>r.props.maxSpeed&&(a.v=a.v.normalise().scalarMultip(r.props.maxSpeed)),a.a=new Bu(0,0)})},this.updatePosition=function(n){var i;if(!(!((i=r.nodes)===null||i===void 0)&&i.length)){r.judgingDistance=0;return}var a=r.props.distanceThresholdMode,o=0;a==="max"?r.judgingDistance=-1/0:a==="min"&&(r.judgingDistance=1/0),r.nodes.forEach(function(s){var l=r.nodePoints.get(s.id);l.p=l.p.add(l.v.scalarMultip(n));var u=l.v.scalarMultip(n),c=u.magnitude();switch(a){case"max":r.judgingDistance<c&&(r.judgingDistance=c);break;case"min":r.judgingDistance>c&&(r.judgingDistance=c);break;default:o=o+c;break}}),(!a||a==="mean")&&(r.judgingDistance=o/r.nodes.length)},this.addNode=function(n){var i=r.props.ignore;i&&i(n)||(n.id in r.nodeSet||r.nodes.push(n),r.nodeSet[n.id]=n)},this.addNodes=function(n){n.forEach(function(i){r.addNode(new w0t(i))})},this.addEdge=function(n){return n.id in r.edgeSet||r.edges.push(n),r.edgeSet[n.id]=n,n},this.addEdges=function(n){try{for(var i=n.length,a=0;a<i;a++){var o=n[a],s=o.source,l=o.target,u=r.nodeSet[s];if(u===void 0)throw new TypeError("invalid node name: ".concat(o.source));var c=r.nodeSet[l];if(c===void 0)throw new TypeError("invalid node name: ".concat(o.target));var f=o.data,h=new b0t(String(r.nextEdgeId++),u,c,f);r.addEdge(h)}}catch(d){console.error(d)}},this.register=function(n,i){r.registers.set(n,i)},this.restart=function(n,i){var a=r.props.ignore;i.getNodes().forEach(function(s){var l=s.get("model");if(!(a&&a(l))){var u=new Bu(l.x,l.y),c=r.nodePoints.get(l.id);c&&(c.p=u,r.nodePoints.set(l.id,c))}});var o=function(l){var u=new Bu(l.x,l.y),c=r.getMass(l);r.nodePoints.set(l.id,new HY(u,l.id,l.data,c)),r.edges.forEach(function(f){var h=r.nodePoints.get(f.source.id),d=r.nodePoints.get(f.target.id);if(h.id===l.id||d.id===l.id){var p=r.edgeSprings.get(f.id).length||100;r.edgeSprings.set(f.id,new YY(h,d,p))}})};n.forEach(o),r.props.restartAnimation?r.animation():r.slienceForce()},this.stop=function(){window.cancelAnimationFrame(r.timer),r.done=!0},this.getSameTypeLeafMap=function(){var n=r.props.nodeClusterBy,i={};return r.nodes.forEach(function(a){var o,s=((o=a.data)===null||o===void 0?void 0:o.layout)||{},l=s.degree;l===1&&(i[a.id]=Xg.getCoreNodeAndRelativeLeafNodes("leaf",a,r.edges,n))}),i},this.props={stiffness:200,enableWorker:!1,defSpringLen:function(i){return i.data.spring||200},repulsion:200*5,centripetalOptions:{leaf:2,single:2},leafCluster:!1,clustering:!1,nodeClusterBy:"cluster",clusterNodeStrength:20,damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,coulombDisScale:.005,tickInterval:.02,groupFactor:4,maxIterations:7440,minDistanceThreshold:.4,distanceThresholdMode:"mean",animation:!0,restartAnimation:!0,width:200,height:200},this.updateOptions(e),this.sourceData={nodes:[],edges:[],combos:[]},this.nodes=[],this.edges=[],this.nodeSet={},this.edgeSet={},this.renderNodes=[],this.nodePoints=new Map,this.edgeSprings=new Map,this.registers=new Map,this.done=!1,this.judgingDistance=0,this.iterations=0,this.nextEdgeId=0,this.timer=0,this.center=new Bu(0,0),this.centripetalOptions={leaf:2,single:2,others:1,center:function(i){return{x:r.props.width/2,y:r.props.height/2}}},this.dragNodes=[]});const Z0t=Q0t;var KY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const J0t=function(){Ai.registerLayout("graphin-force",{getDefaultCfg:function(){return{preset:{name:"grid",options:{}},stiffness:200,repulsion:200*5,centripetalOptions:{leaf:1.6,single:1.6},damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,MaxIterations:1e4,animation:!0}},init:function(e){this.nodes=e.nodes,this.edges=e.edges;var r=this,n=r.graph,i=KY(r,["graph"]),a=Object.assign(Object.assign({},this.getDefaultCfg()),i),o=a.width,s=a.height,l=a.animation,u=a.done,c=u===void 0?function(){}:u,f=KY(a,["width","height","animation","done"]);this.simulation=new Z0t(Object.assign(Object.assign(Object.assign({width:o,height:s,animation:l},f),i),{done:function(d){c(n,d)}})),this.simulation.setData(e),this.simulation.register("render",function(h){if(!l&&e&&e.nodes&&e.nodes.length>0){var d=h.nodes;return e.nodes.forEach(function(v,g){var m=d[g];if(m&&m.id===v.id)v.x=d[g].x,v.y=d[g].y;else{var y=d.find(function(w){return w.id===v.id});y&&(v.x=y.x,v.y=y.y)}}),Object.assign({},h)}try{if(!n||n.destroyed)return;var p=!1;h.nodes.forEach(function(v){var g=n.findById(v.id);if(g){var m=g.get("model");m.x=v.x,m.y=v.y,g.getType()==="combo"&&(p=!0)}}),n.refreshPositions(p)}catch(v){console.error(v)}})},execute:function(){this.simulation.start()},layout:function(e){this.init(e),this.execute()},updateCfg:function(e){this.cfg=Object.assign(Object.assign({},this.cfg),e)},destroy:function(){this.destroyed=!0,this.simulation.stop(),this.simulation=null},getType:function(){return"graphin-force"}})},emt=function(){Ai.registerLayout("preset",{init:function(){},execute:function(){},destroy:function(){this.destroyed=!0}})};function lR(t,e){return imt(t)||nmt(t,e)||rmt(t,e)||tmt()}function tmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rmt(t,e){if(t){if(typeof t=="string")return QY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QY(t,e)}}function QY(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nmt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function imt(t){if(Array.isArray(t))return t}var ZY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Up=function(e,r,n){if(r)try{e.forEach(function(i){var a=i.cfg.name,o=r[a];if(o){var s=n(r,a),l=s.animate,u=s.visible,c=ZY(s,["animate","visible"]);if(i.attrs.img)c.opacity!==void 0&&i.attr({opacity:c.opacity});else if(i.attr(c),i.cfg.visible=u!==!1,l){var f=l.attrs,h=ZY(l,["attrs"]);i.animate(f,h)}}})}catch(i){console.error(i)}};function CB(t){return Object.keys(t).forEach(function(e){t[e]===void 0&&delete t[e]}),t}var Rk=function(e){if(!e)return[0,0];var r=0,n=0;if(typeof e=="number")r=e,n=e;else if(Array.isArray(e)){if(e.length===1){var i=lR(e,1),a=i[0];r=a,n=a}else if(e.length===2){var o=lR(e,2),s=o[0],l=o[1];r=s,n=l}}return[r,n]},amt=function(e){var r=e.label,n=e.keyshape;if(!(n!=null&&n.size)&&!(r!=null&&r.offset))return{x:void 0,y:void 0,textBaseline:r==null?void 0:r.textBaseline};!(n!=null&&n.size)&&(r!=null&&r.offset)&&(n.size=26,console.info("you should set keyshape.size when you update label position,the default keyshape size value is  26"));var i=n.size,a=[0,0],o=r.position,s=r.offset,l=s===void 0?a:s;(typeof l=="number"||typeof l=="string")&&(a=[Number(l),Number(l)]),l.length>0&&(a=l);var u=a,c=lR(u,2),f=c[0],h=c[1];if(o==="center")return{x:0+f,y:0+h};var d=Rk(i),p=d[0],v=d[1],g;switch(o){case"top":g={x:0+f,y:-v/2-h,textBaseline:"bottom"};break;case"bottom":g={x:0+f,y:v/2+h,textBaseline:"top"};break;case"left":g={x:0-p-f,y:0+h,textAlign:"right"};break;case"right":g={x:0+p+f,y:0+h,textAlign:"left"};break;default:g={x:0+f,y:v/2+h,textBaseline:"top"};break}return g},omt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"RT",r=arguments.length>1?arguments[1]:void 0,n=0,i=0;return e==="LT"?(n=r*Math.cos(Math.PI*3/4),i=-r*Math.sin(Math.PI*3/4)):e==="LB"?(n=r*Math.cos(Math.PI*5/4),i=-r*Math.sin(Math.PI*5/4)):e==="RT"?(n=r*Math.cos(Math.PI*1/4),i=-r*Math.sin(Math.PI*1/4)):e==="RB"&&(n=r*Math.cos(Math.PI*7/4),i=-r*Math.sin(Math.PI*7/4)),{x:n,y:i}};function smt(t){return cmt(t)||umt(t)||Lde(t)||lmt()}function lmt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function umt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cmt(t){if(Array.isArray(t))return uR(t)}function Pde(t,e){return dmt(t)||hmt(t,e)||Lde(t,e)||fmt()}function fmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lde(t,e){if(t){if(typeof t=="string")return uR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uR(t,e)}}function uR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hmt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function dmt(t){if(Array.isArray(t))return t}var sx=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Gw(t){var e;return typeof t=="number"?e=t/2:Array.isArray(t)&&(e=t[0]/2),e}var pmt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=EB(e),n=r.defaultNodeStyle,i=r.defaultNodeStatusStyle;return{style:n.style,status:i.status}},Rde=function(e){var r=e.halo,n=e.keyshape,i=r.size,a=r.visible,o=r.fill,s=r.fillOpacity,l=sx(r,["size","visible","fill","fillOpacity"]),u=Gw(i),c,f,h;if(n&&n.size){var d=Gw(n.size);c=d+15}n&&n.fill&&(f=n.fill),n&&n.stroke&&(h=n.stroke);var p=Object.assign({x:0,y:0,r:u||c,fill:o||f||h,fillOpacity:s||.1,visible:a!==!1},l);return{name:"halo",visible:a!==!1,attrs:CB(p)}},Nde=function(e){var r=e.keyshape,n=r.size,i=r.visible,a=r.stroke,o=r.fill,s=r.fillOpacity,l=r.strokeOpacity,u=sx(r,["size","visible","stroke","fill","fillOpacity","strokeOpacity"]),c=Gw(n),f=Object.assign({x:0,y:0,r:c,cursor:"pointer",visible:i!==!1,stroke:a,strokeOpacity:l||1,fill:o||a,fillOpacity:s||.2},u);return{name:"keyshape",visible:i!==!1,attrs:CB(f)}},Fde=function(e){var r=e.label,n=r.value,i=r.fill,a=r.fontSize,o=r.visible,s=sx(r,["value","fill","fontSize","visible"]),l=amt(e),u=Object.assign({x:l.x,y:l.y,fontSize:a,text:n,textAlign:"center",fill:i,textBaseline:l.textBaseline,visible:o!==!1},s);return{name:"label",visible:o!==!1,attrs:CB(u)}},cR=function(e){var r=e.icon,n=r.value,i=n===void 0?"":n,a=r.type,o=r.fontFamily,s=r.textAlign,l=s===void 0?"center":s,u=r.textBaseline,c=u===void 0?"middle":u,f=r.fill,h=r.size,d=r.visible;r.clip;var p=sx(r,["value","type","fontFamily","textAlign","textBaseline","fill","size","visible","clip"]),v=Rk(h),g=Pde(v,2),m=g[0],y=g[1],w={name:"icon",visible:d!==!1,capture:!1};return a==="text"||a==="font"?Object.assign(Object.assign({},w),{attrs:Object.assign({x:0,y:0,textAlign:l,textBaseline:c,text:i,fontSize:m,fontFamily:o,fill:f,visible:d!==!1},p)}):Object.assign(Object.assign({},w),{attrs:Object.assign({x:-m/2,y:-y/2,img:i,width:m,height:y,visible:d!==!1},p)})},i_=function(e,r){return r==="keyshape"?Nde(e).attrs:r==="halo"?Rde(e).attrs:r==="label"?Fde(e).attrs:r==="icon"?cR(e).attrs:e[r]||{}},JY=function(e,r,n){var i=e.type,a=e.position,o=e.value,s=o===void 0?"":o,l=e.size,u=e.fill,c=e.stroke,f=e.color,h=e.fontSize,d=e.fontFamily,p=e.padding,v=p===void 0?0:p,g=e.offset,m=g===void 0?[0,0]:g,y=e.id,w=Rk(m),b=Rk(l),x=Pde(b,2),S=x[0],E=x[1],_=omt(a,n),k=_.x,C=_.y,M=k,A=C;if(S===E){M+=w[0],A+=w[1];var T={attrs:{r:S/2+v,fill:u,stroke:c,x:M,y:A},name:"badges-circle"};y&&(T.id=y),r.addShape("circle",T)}else{M=k-S-v*2,A=C-E-v*2,a==="LB"?A=C:a==="RT"?(M=k,A=C-E-v*2):a==="RB"&&(M=k,A=C),M+=w[0],A+=w[1];var D={attrs:{width:S+v*2,height:E+v*2,fill:u,stroke:c,x:M,y:A,radius:(E+v*2)/3},name:"badges-rect"};y&&(D.id=y),r.addShape("rect",D)}i==="font"||i==="text"?r.addShape("text",{attrs:{x:S!==E?M+S/2+v:M,y:S!==E?A+E/2+v:A,text:s,fontSize:h,textAlign:"center",textBaseline:"middle",fontFamily:d,fill:f},capture:!1,name:"badges-text"}):i==="image"&&r.addShape("image",{attrs:{x:M-S/2,y:A-E/2,width:S,height:E,img:s},capture:!1,name:"badges-image"})};const vmt=function(){Ai.registerNode("graphin-circle",{options:{style:{},status:{}},draw:function(e,r){var n=e.style._theme;this.options=pmt(n);var i=rv({},this.options.style,e.style);e._initialStyle=Object.assign({},i);var a=i.icon,o=i.badges,s=o===void 0?[]:o,l=i.keyshape,u=Gw(l.size);r.addShape("circle",Rde(i));var c=r.addShape("circle",Nde(i));r.addShape("text",Fde(i));var f=a.type;if((f==="text"||f==="font")&&r.addShape("text",cR(i)),f==="image"){var h=cR(i),d=r.addShape("image",h),p=i.icon.clip;if(p){var v=p.r,g=sx(p,["r"]);d.setClip({type:"circle",attrs:Object.assign({x:0,y:0,r:v},g)})}}return s.forEach(function(m){JY(m,r,u)}),c},setState:function(e,r,n){var i;if(e){var a=n.getModel(),o=n.getContainer().get("children"),s=rv({},this.options.status,a.style.status),l=n.getModel()._initialStyle,u=((i=n._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(s).forEach(function(c){e===c&&(r?Up(o,s[c],i_):(Up(o,l,i_),u.forEach(function(f){Up(o,s[f],i_)})))})}catch(c){console.error(c)}}},update:function(e,r){if(e.style)try{var n=rv({},e._initialStyle,e.style);e._initialStyle=Object.assign({},n);var i=n.badges,a=n.keyshape,o=Gw(a.size),s=r.getContainer(),l=s.get("children");Up(l,n,i_);var u=smt(l);if(i){var c=0;u.forEach(function(f){f.cfg.name.startsWith("badges")?l.splice(c,1):c=c+1}),i.forEach(function(f){JY(f,s,o)})}}catch{console.error("error")}}})};function gmt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mmt(t,e){return xmt(t)||bmt(t,e)||wmt(t,e)||ymt()}function ymt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wmt(t,e){if(t){if(typeof t=="string")return eq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(t,e)}}function eq(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bmt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,a=!1,o,s;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw s}}return n}}function xmt(t){if(Array.isArray(t))return t}var Uw=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Smt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=EB(e),n=r.defaultEdgeStyle,i=r.defaultEdgeStatusStyle;return{style:n.style,status:i.status}},tq;(function(t){t.NORMAL="normal",t.SELECTED="selected",t.HOVERED="hovered",t.DISABLED="disabled"})(tq||(tq={}));function kB(t){return Object.keys(t).forEach(function(e){t[e]===void 0&&delete t[e]}),t}function Emt(t){var e=t.value,r=Uw(t,["value"]),n=Object.assign({id:"label",text:e},r);return kB(n)}function _mt(t){var e=Uw(t,[]),r=Object.assign({id:"keyshape"},e);return kB(r)}function Cmt(t){var e=Uw(t,[]),r=Object.assign({id:"halo"},e);return kB(r)}function kmt(t){return Object.assign({id:"label-background"},t)}var MD=function(e,r){return r==="keyshape"?_mt(e.keyshape||{}):r==="halo"?Cmt(e.halo||{}):r==="label"?Emt(e.label||{}):r==="label-background"?kmt(e[r]||{}):e[r]||{}},Bde=function(e,r,n){var i={x:(r.x+e.x)/2,y:(r.y+e.y)/2},a=r.x-e.x,o=r.y-e.y,s=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),l=i.y-a*n/s||0,u=i.x+o*n/s||0;return{x:u,y:l}},Mmt=function(e,r){var n,i,a,o=e.startPoint,s=o===void 0?{x:0,y:0}:o,l=e.endPoint,u=l===void 0?{x:0,y:0}:l,c=e.sourceNode,f=e.targetNode,h=r.keyshape,d=h.type,p=d===void 0?"line":d,v=h.poly,g=v===void 0?{distance:0}:v,m=h.loop,y=m===void 0?{}:m,w=c.get("model"),b=((n=f)===null||n===void 0?void 0:n.get("model"))||{id:"temp"};if(p==="loop"||w.id===b.id){var x=((a=(i=w.style)===null||i===void 0?void 0:i.keyshape)===null||a===void 0?void 0:a.size)||26,S=Object.assign({distance:0,dx:8,rx:void 0,ry:void 0},y),E=S.distance,_=S.dx,k=S.rx,C=S.ry,M=x/2,A=Math.sqrt(Math.max(Math.pow(M,2)-Math.pow(_,2),0)),T=k||M*2*.5,D=C||M*2*.6;return[["M",s.x-_,s.y-A],["A",T+E,D+E,0,1,1,s.x+_,s.y-A]]}if(p==="poly"){var F=Bde(s,u,(g==null?void 0:g.distance)||0);return[["M",s.x,s.y],["Q",F.x,F.y,u.x,u.y]]}return[["M",s.x,s.y],["L",u.x,u.y]]};const Amt=function(){Ai.registerEdge("graphin-line",{draw:function(e,r){var n,i,a,o,s,l,u,c=e.style._theme;this.options=Smt(c);var f=rv({},this.options.style,e.style);e&&(e._initialStyle=Object.assign({},f));var h=e.startPoint,d=h===void 0?{x:0,y:0}:h,p=e.endPoint,v=p===void 0?{x:0,y:0}:p,g=e.sourceNode,m=e.targetNode,y=f.label,w=f.halo,b=f.keyshape,x=g.get("model"),S=((n=m)===null||n===void 0?void 0:n.get("model"))||{id:"temp"},E=((a=(i=x.style)===null||i===void 0?void 0:i.keyshape)===null||a===void 0?void 0:a.size)||28,_=(b==null?void 0:b.type)==="loop"||x.id===S.id,k=y.value,C=(b==null?void 0:b.type)==="poly",M=Bde(d,v,((o=b==null?void 0:b.poly)===null||o===void 0?void 0:o.distance)||0),A=(b==null?void 0:b.lineWidth)||1,T=A+5,D=Mmt(e,f);r.addShape("path",{attrs:Object.assign({id:"halo",path:D,lineWidth:A+10,stroke:w.stroke||b.stroke,strokeOpacity:w.strokeOpacity||.4},w),draggable:!0,name:"halo",visible:w.visible!==!1});var F=r.addShape("path",{attrs:Object.assign({id:"keyshape",path:D,endArrow:_?void 0:{d:0,path:"M 0,0 L ".concat(T,",").concat(T/2," L ").concat(T,",-").concat(T/2," Z"),fill:b.stroke},startArrow:_?{d:0,path:"M 0,0 L ".concat(T,",").concat(T/2," L ").concat(T,",-").concat(T/2," Z"),fill:b.stroke}:void 0},b),draggable:!0,name:"keyshape"});if(k){var R=y.value,B=y.fontSize,N=B===void 0?8:B,O=y.offset,L=O===void 0?[0,0]:O,G=y.background,q=Uw(y,["value","fontSize","offset","background"]),K=!!G,V=mmt(L,2),le=V[0],ge=V[1],xe=Math.atan((v.y-d.y)/(v.x-d.x)),Ie=[(d.x+v.x)/2,(d.y+v.y)/2];if(C&&(Ie=[(M.x+Ie[0])/2,(M.y+Ie[1])/2]),v.x-d.x===0&&(xe=Math.PI/2),_&&(xe=2*Math.PI),K){var He=oae(R),Ge=He*N*.6,ht=N*1.8,dt={fill:"#fff",width:Ge,height:ht,stroke:b.stroke,lineWidth:1,radius:6},It=Object.assign(Object.assign({},dt),G),_t=It.fill,yt=It.width,Tt=It.height,kt=It.stroke,mt=Uw(It,["fill","width","height","stroke"]),xt=-Tt/2+ge;_&&(xt=-(Tt/2+ge+N+E*1+(((s=b==null?void 0:b.loop)===null||s===void 0?void 0:s.distance)||0)*2));var Nt=r.addShape("rect",{attrs:Object.assign({id:"label-background",x:-yt/2+le,y:xt,width:yt,height:Tt,fill:_t,stroke:kt},mt),draggable:!0,name:"label-background"});Nt.rotate(xe),Nt.translate(Ie[0],Ie[1])}var De=ge-N/2;K&&(De=ge+N/2),_&&(K?De=-(ge+N/2+E*1+(((l=b==null?void 0:b.loop)===null||l===void 0?void 0:l.distance)||0)*2):De=-(ge+N+E*1+(((u=b==null?void 0:b.loop)===null||u===void 0?void 0:u.distance)||0)*2));var J=r.addShape("text",{attrs:Object.assign({id:"label",x:le,y:De,text:R,fontSize:N},q),draggable:!0,name:"label"});J.rotate(xe),J.translate(Ie[0],Ie[1])}return F},setState:function(e,r,n){var i;if(e){var a=n.getModel(),o=n.getContainer().get("children"),s=rv({},this.options.status,a.style.status),l=n.getModel()._initialStyle,u=((i=n._cfg)===null||i===void 0?void 0:i.states)||[];try{Object.keys(s).forEach(function(c){var f;e===c&&(r?Up(o,s[c],MD):(Up(o,Object.assign(Object.assign({},l),gmt({},"label-background",(f=l.label)===null||f===void 0?void 0:f.background)),MD),u.forEach(function(h){Up(o,s[h],MD)})))})}catch(c){console.error(c)}}},afterDraw:function(e,r){var n=rv({},this.options.style,e.style),i=n.animate,a=n.keyshape;if(!(!i||!i.type||i.visible===!1)){var o=r.get("children").find(function(y){return y.get("name")==="keyshape"}),s=i.color,l=i.type,u=i.repeat,c=u===void 0?!0:u,f=i.duration,h=f===void 0?3e3:f;if(l==="circle-running"){var d=o.getPoint(0),p=r.addShape("circle",{attrs:{x:d.x,y:d.y,fill:s||a.stroke,r:a.lineWidth*1.5+2},name:"circle-shape"});p.animate(function(y){var w=o.getPoint(y);return{x:w.x,y:w.y}},{repeat:c,duration:h})}if(l==="line-dash"){var v=0,g=i.lineDash||a.lineDash||[4,2,1,2];o.animate(function(){return v++,v>9&&(v=0),{lineDash:g,lineDashOffset:-v}},{repeat:c,duration:h})}if(l==="line-growth"){var m=o.getTotalLength();o.animate(function(y){var w=y*m;return{lineDash:[w,m-w]}},{repeat:c,duration:h})}}}})};J0t();emt();vmt();Amt();Mde.registerFontFamily;var MB={};let eT=class{constructor(){return Tmt||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(eT.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(eT.prototype,"termType",{enumerable:!0,value:"Wildcard"});var Tmt=new eT;MB.Wildcard=eT;var Omt=function(){var t=function(Fe,Ae,Xe,pt){for(Xe=Xe||{},pt=Fe.length;pt--;Xe[Fe[pt]]=Ae);return Xe},e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],r=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],i=[2,409],a=[1,18],o=[1,27],s=[13,16,45,197,224,229,308],l=[28,29,53],u=[28,53],c=[1,42],f=[1,45],h=[1,41],d=[1,44],p=[123,126],v=[1,67],g=[39,45,87],m=[13,16,45,197,224,308],y=[1,87],w=[2,281],b=[1,86],x=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],S=[6,28,29,53,63,70,73,81,83,85],E=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],_=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],k=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],C=[13,16,308],M=[112,132,327,334],A=[13,16,112,132,308],T=[1,111],D=[1,117],F=[112,132,327,328,334],R=[13,16,112,132,308,328],B=[28,29,45,53,87],N=[1,138],O=[1,151],L=[1,128],G=[1,127],q=[1,129],K=[1,140],V=[1,141],le=[1,142],ge=[1,143],xe=[1,144],Ie=[1,145],He=[1,147],Ge=[1,148],ht=[2,457],dt=[1,158],It=[1,159],_t=[1,160],yt=[1,152],Tt=[1,153],kt=[1,156],mt=[1,171],xt=[1,172],Nt=[1,173],De=[1,174],J=[1,175],P=[1,176],me=[1,167],Ee=[1,168],fe=[1,169],ke=[1,170],Be=[1,157],$e=[1,166],Ue=[1,161],ut=[1,162],Mt=[1,163],$t=[1,164],At=[1,165],wr=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ar=[1,195],Zr=[6,31,73,81,83,85],Hr=[2,285],Xn=[1,199],gr=[1,201],nn=[6,31,70,73,81,83,85],_i=[2,283],fn=[1,207],Ma=[1,218],ca=[1,223],Go=[1,219],an=[1,225],Yn=[1,226],qn=[1,224],su=[6,63,70,73,81,83,85],lu=[1,236],uu=[2,334],Aa=[1,243],xn=[1,241],sn=[6,193],Zt=[2,349],Jr=[2,339],Bt=[28,128],pn=[47,48,193,272],zn=[47,48,193,242,272],Ta=[47,48,193,242,246,272],Oa=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],ln=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Uo=[1,271],Os=[1,270],un=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],qv=[1,281],Kv=[1,280],Ii=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Ic=[45,89],Xf=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Yf=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],qf=[31,89],Kf=[48,87],vl=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],go=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Qv=[1,313],cu=[6,85],my=[6,31,81,83,85],dx=[2,361],gl=[2,353],Dc=[1,343],qd=[31,112,335],ml=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],yy=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],Kd=[6,109,193],fu=[31,112],ai=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],wy=[1,390],Pc=[1,391],Is=[13,16,87,197,308,314],by=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Qf=[1,417],Zv=[1,418],px=[13,16,48,197,229,308],hu=[6,31,85],vx=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Xa=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],pi=[29,31,85,112,159,160,161,163,164],Lc=[1,443],Jv=[1,444],gx=[1,449],du=[31,112,193,232,318,335],Qd=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],mx=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],xy=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Rc=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Zd=[31,45],yx=[1,507],wx=[1,508],bx=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],eg=[29,31,85,112,159,160,161,163,164,335],Nc=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],xx=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Sx=[2,352],yl=[13,16,197,308,314],Ex=[1,565],Zf=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Jd=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Wo=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Sy=[13,16,87,308],Ds=[2,364],Jf=[29,31,85,112,159,160,161,163,164,193,232,318,335],eh=[31,112,193,232,272,318,335],Vo=[2,359],wl=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Fc=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],Ey=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],_y=[2,347],Cy={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Ae,Xe,pt,ar,sr,$,qa){var W=$.length-1;switch(sr){case 1:if($[W-1]=$[W-1]||{},Ir.base&&($[W-1].base=Ir.base),Ir.base="",$[W-1].prefixes=Ir.prefixes,Ir.prefixes=null,Ir.pathOnly){if($[W-1].type==="path"||"termType"in $[W-1])return $[W-1];throw new Error("Received full SPARQL query in path only mode")}else if($[W-1].type==="path"||"termType"in $[W-1])throw new Error("Received only path in full SPARQL mode");if($[W-1].type==="update"){const Cr={};for(const on of $[W-1].updates)if(on.updateType==="insert"){const yr={};for(const Pi of on.insert)if(Pi.type==="bgp"||Pi.type==="graph")for(const Li of Pi.triples)Li.subject.termType==="BlankNode"&&(yr[Li.subject.value]=!0),Li.predicate.termType==="BlankNode"&&(yr[Li.predicate.value]=!0),Li.object.termType==="BlankNode"&&(yr[Li.object.value]=!0);for(const Pi of Object.keys(yr)){if(Cr[Pi])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Cr[Pi]=!0}}}return $[W-1];case 2:this.$={...$[W-1],...$[W],type:"query"};break;case 4:Ir.base=ep($[W]);break;case 5:Ir.prefixes||(Ir.prefixes={}),$[W-1]=$[W-1].substr(0,$[W-1].length-1),$[W]=ep($[W]),Ir.prefixes[$[W-1]]=$[W];break;case 6:this.$={...$[W-3],...vu($[W-2]),...$[W-1],...$[W]};break;case 7:if(!Ir.skipValidation&&(tp($[W-3].variables.map(on=>ah(on.expression))).some(on=>on.aggregation==="count"&&!(on.expression instanceof tg))||$[W].group)){for(const on of $[W-3].variables)if(on.termType==="Variable"){if(!$[W].group||!$[W].group.map(yr=>mu(yr)).includes(mu(on)))throw Error("Projection of ungrouped variable (?"+mu(on)+")")}else if(ah(on.expression).length===0){const yr=Ty(on.expression);for(const Pi of yr)if(!$[W].group||!$[W].group.map||!$[W].group.map(Li=>mu(Li)).includes(mu(Pi)))throw Error("Use of ungrouped variable in projection of operation (?"+mu(Pi)+")")}}const bu=$[W-1].where.filter(Cr=>Cr.type==="query");if(bu.length>0){const Cr=$[W-3].variables.filter(yr=>yr.variable&&yr.variable.value).map(yr=>yr.variable.value),on=tp(bu.map(yr=>yr.variables)).map(yr=>yr.value||yr.variable.value);for(const yr of Cr)if(on.indexOf(yr)>=0)throw Error("Target id of 'AS' (?"+yr+") already used in subquery")}this.$=Kn($[W-3],vu($[W-2]),$[W-1],$[W]);break;case 8:this.$=Kn({queryType:"CONSTRUCT",template:$[W-3]},vu($[W-2]),$[W-1],$[W]);break;case 9:this.$=Kn({queryType:"CONSTRUCT",template:$[W-2]=$[W-2]?$[W-2].triples:[]},vu($[W-5]),{where:[{type:"bgp",triples:pu([],$[W-2])}]},$[W]);break;case 10:this.$=Kn({queryType:"DESCRIBE",variables:$[W-3]==="*"?[new tg]:$[W-3]},vu($[W-2]),$[W-1],$[W]);break;case 11:this.$=Kn({queryType:"ASK"},vu($[W-2]),$[W-1],$[W]);break;case 12:this.$=Kn($[W-1],{variables:[new tg]});break;case 13:const dg=$[W].map(Cr=>Cr.value||Cr.variable.value),rp=Oy(dg);if(rp.length>0)throw Error("Two or more of the resulting columns have the same name (?"+rp[0]+")");this.$=Kn($[W-1],{variables:$[W]});break;case 14:this.$=Kn({queryType:"SELECT"},$[W]&&($[W-1]=qi($[W]),$[W]={},$[W][$[W-1]]=!0,$[W]));break;case 16:case 27:this.$=rh($[W-3],{variable:$[W-1]});break;case 17:case 18:this.$=Kn($[W-3],$[W-2],$[W-1],$[W],{type:"query"});break;case 19:case 58:this.$={iri:$[W],named:!!$[W-1]};break;case 20:this.$={where:$[W].patterns};break;case 21:this.$=Kn($[W-1],$[W]);break;case 22:this.$=Kn($[W-2],$[W-1],$[W]);break;case 23:this.$={group:$[W]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=rh($[W]);break;case 26:this.$=rh($[W-1]);break;case 29:this.$={having:$[W]};break;case 30:this.$={order:$[W]};break;case 32:this.$=rh($[W],{descending:!0});break;case 35:this.$={limit:nh($[W])};break;case 36:this.$={offset:nh($[W])};break;case 37:this.$={limit:nh($[W-2]),offset:nh($[W])};break;case 38:this.$={limit:nh($[W]),offset:nh($[W-2])};break;case 39:case 43:this.$={type:"values",values:$[W]};break;case 40:case 84:this.$=$[W-1].map(Cr=>({[$[W-3]]:Cr}));break;case 41:case 85:this.$=$[W-1].map(()=>({}));break;case 42:case 86:var wu=$[W-4].length;$[W-4]=$[W-4].map(ng),this.$=$[W-1].map(function(Cr){if(Cr.length!==wu)throw Error("Inconsistent VALUES length");for(var on={},yr=0;yr<wu;yr++)on["?"+$[W-4][yr].value]=Cr[yr];return on});break;case 44:case 65:case 100:case 126:case 175:this.$=$[W-1];break;case 45:this.$={type:"update",updates:Ya($[W-2],$[W-1])};break;case 46:this.$=Kn({type:"load",silent:!!$[W-2],source:$[W-1]},$[W]&&{destination:$[W]});break;case 47:this.$={type:qi($[W-2]),silent:!!$[W-1],graph:$[W]};break;case 48:this.$={type:qi($[W-4]),silent:!!$[W-3],source:$[W-2],destination:$[W]};break;case 49:this.$={type:"create",silent:!!$[W-2],graph:{type:"graph",name:$[W]}};break;case 50:this.$={updateType:"insert",insert:Iy($[W])};break;case 51:this.$={updateType:"delete",delete:cg(Iy($[W]))};break;case 52:this.$={updateType:"deletewhere",delete:cg($[W])};break;case 53:this.$={updateType:"insertdelete",...$[W-4],...$[W-3],...vu($[W-2],"using"),where:$[W].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=$[W];break;case 55:this.$={delete:cg($[W-1]),insert:$[W]||[]};break;case 56:this.$={delete:[],insert:$[W]};break;case 59:this.$={graph:$[W]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:$[W]};break;case 64:this.$={[qi($[W])]:!0};break;case 66:this.$=$[W-1]?Ps($[W],[$[W-1]]):Ps($[W]);break;case 67:var oh=Kn($[W-3]||{triples:[]},{type:"graph",name:$[W-5]});this.$=$[W]?[oh,$[W]]:[oh];break;case 68:case 73:this.$={type:"bgp",triples:Ps($[W-2],[$[W-1]])};break;case 69:this.$={type:"group",patterns:[$[W-1]]};break;case 70:for(const Cr of $[W-1].filter(on=>on.type==="bind")){const on=$[W-1].indexOf(Cr),yr=new Set;for(const Pi of $[W-1].slice(0,on))(Pi.type==="group"||Pi.type==="bgp")&&sg(Pi).forEach(Li=>yr.add(Li));if(yr.has(Cr.variable.value))throw Error("Variable used to bind is already bound (?"+Cr.variable.value+")")}this.$={type:"group",patterns:$[W-1]};break;case 71:this.$=$[W-1]?Ps([$[W-1]],$[W]):Ps($[W]);break;case 72:this.$=$[W]?[$[W-2],$[W]]:$[W-2];break;case 75:this.$=Kn($[W],{type:"optional"});break;case 76:this.$=Kn($[W],{type:"minus"});break;case 77:this.$=Kn($[W],{type:"graph",name:$[W-1]});break;case 78:this.$=Kn($[W],{type:"service",name:$[W-1],silent:!!$[W-2]});break;case 79:this.$={type:"filter",expression:$[W]};break;case 80:this.$={type:"bind",variable:$[W-1],expression:$[W-3]};break;case 89:this.$=zc($[W]);break;case 90:this.$=void 0;break;case 91:this.$=$[W-1].length?{type:"union",patterns:Ps($[W-1].map(yo),[yo($[W])])}:$[W];break;case 95:this.$={...$[W],function:$[W-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Ya($[W-2],$[W-1]),distinct:!!$[W-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Ya($[W-2],$[W-1]);break;case 101:this.$=Ps($[W-2],[$[W-1]]);break;case 102:case 112:this.$=ug($[W].map(Cr=>Kn(Ho($[W-1]),Cr)));break;case 103:this.$=ug(pu($[W].map(Cr=>Kn(Ho($[W-1].entity),Cr)),$[W-1].triples));break;case 105:this.$=Ps([$[W-1]],$[W]);break;case 106:this.$=Ps($[W]);break;case 107:this.$=Ay($[W-1],$[W]);break;case 109:case 237:this.$=Ir.factory.namedNode(rT);break;case 110:case 118:this.$=Ya($[W-1],$[W]);break;case 111:this.$=$[W]?{annotation:$[W],object:$[W-1]}:$[W-1];break;case 113:this.$=$[W]?ug(pu($[W].map(Cr=>Kn(Ho($[W-1].entity),Cr)),$[W-1].triples)):$[W-1].triples;break;case 114:this.$=Ay(...$[W-1],$[W]);break;case 116:this.$=Ay(...$[W]);break;case 117:case 159:case 163:this.$=[$[W-1],$[W]];break;case 119:this.$=$[W]?{object:$[W-1],annotation:$[W]}:$[W-1];break;case 120:this.$=$[W-1].length?$c("|",Ya($[W-1],$[W])):$[W];break;case 121:this.$=$[W-1].length?$c("/",Ya($[W-1],$[W])):$[W];break;case 122:this.$=$[W]?$c($[W],[$[W-1]]):$[W-1];break;case 123:this.$=$[W-1]?$c($[W-1],[$[W]]):$[W];break;case 125:case 131:this.$=$c($[W-1],[$[W]]);break;case 129:this.$=$c("|",Ya($[W-2],$[W-1]));break;case 132:case 134:this.$=oT($[W-1]);break;case 133:case 135:this.$=sT($[W-1]);break;case 140:this.$={entity:$[W],triples:[]};break;case 145:this.$=ng($[W]);break;case 149:this.$=Ir.factory.namedNode(_x);break;case 151:case 153:case 158:case 162:this.$=yn($[W-1],$[W]);break;case 152:this.$=["||",$[W]];break;case 154:this.$=["&&",$[W]];break;case 156:this.$=Di($[W-1],[$[W-2],$[W]]);break;case 157:this.$=Di($[W-2]?"notin":"in",[$[W-3],$[W]]);break;case 160:this.$=["+",yn($[W-1],$[W])];break;case 161:var fg=wo($[W-1].value.replace("-",""),$[W-1].datatype);this.$=["-",yn(fg,$[W])];break;case 164:this.$=Di("UPLUS",[$[W]]);break;case 165:this.$=Di($[W-1],[$[W]]);break;case 166:this.$=Di("UMINUS",[$[W]]);break;case 177:this.$=Di(qi($[W-1]));break;case 178:this.$=Di(qi($[W-3]),[$[W-1]]);break;case 179:this.$=zc(Di(qi($[W-3]),[$[W-1]]));break;case 180:this.$=Di(qi($[W-5]),[$[W-3],$[W-1]]);break;case 181:this.$=Di(qi($[W-7]),[$[W-5],$[W-3],$[W-1]]);break;case 182:this.$=zc(Di(qi($[W-7]),[$[W-5],$[W-3],$[W-1]]));break;case 183:this.$=Di(qi($[W-1]),$[W]);break;case 184:this.$=Di("bound",[ng($[W-1])]);break;case 185:this.$=Di($[W-1],[]);break;case 186:this.$=Di($[W-3],[$[W-1]]);break;case 187:this.$=Di($[W-2]?"notexists":"exists",[yo($[W])]);break;case 188:case 189:this.$=rh($[W-1],{type:"aggregate",aggregation:qi($[W-4]),distinct:!!$[W-2]});break;case 190:this.$=rh($[W-2],{type:"aggregate",aggregation:qi($[W-5]),distinct:!!$[W-3],separator:typeof $[W-1]=="string"?$[W-1]:" "});break;case 192:this.$=wo($[W]);break;case 193:this.$=ig($[W-1],qi($[W].substr(1)));break;case 194:this.$=wo($[W-2],$[W]);break;case 195:case 204:this.$=wo($[W],Cx);break;case 196:case 205:this.$=wo($[W],kx);break;case 197:case 206:this.$=wo(qi($[W]),th);break;case 200:this.$=wo($[W].toLowerCase(),aT);break;case 201:this.$=wo($[W].substr(1),Cx);break;case 202:this.$=wo($[W].substr(1),kx);break;case 203:this.$=wo($[W].substr(1).toLowerCase(),th);break;case 207:case 208:this.$=Ax($[W],1);break;case 209:case 210:this.$=Ax($[W],3);break;case 211:this.$=Ir.factory.namedNode(ep($[W]));break;case 213:var hg=$[W].indexOf(":"),Qn=$[W].substr(0,hg),bo=Ir.prefixes[Qn];if(!bo)throw new Error("Unknown prefix: "+Qn);var jc=ep(bo+$[W].substr(hg+1));this.$=Ir.factory.namedNode(jc);break;case 214:if($[W]=$[W].substr(0,$[W].length-1),!($[W]in Ir.prefixes))throw new Error("Unknown prefix: "+$[W]);var jc=ep(Ir.prefixes[$[W]]);this.$=Ir.factory.namedNode(jc);break;case 215:this.$=gu($[W].replace(/^(_:)/,""));break;case 216:this.$=gu();break;case 217:case 218:case 232:this.$=zc(xl($[W-3],$[W-2],$[W-1]));break;case 230:case 231:this.$=zc($[W-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:$[W-1].push($[W]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[$[W]];break;case 308:$[W-3].push($[W-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:$[W-2].push($[W-1]);break}},table:[t(e,r,{3:1,4:2,10:3}),{1:[3]},t(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:i,16:i,45:i,197:i,224:i,229:i,308:i,24:[1,13],32:[1,14],36:[1,15],41:a}),t([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},t(s,[2,411],{216:28,217:29}),t(l,[2,249],{18:30}),t(l,[2,251],{22:31}),t(u,[2,255],{25:32,27:33,29:[1,34]}),{13:c,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:d,323:36},t(l,[2,267],{37:46}),t(p,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:v,87:h},t(g,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),t(e,[2,248]),t(e,[2,245]),t(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),t(m,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:y,29:w,52:84,53:b,56:85},{19:88,28:y,29:w,52:89,53:b,56:85},t(l,[2,253],{26:90}),{28:[1,91],52:92,53:b},t(x,[2,385],{181:93,182:94,183:95,31:[2,383]}),t(S,[2,263],{34:96}),t(S,[2,261],{44:39,55:40,307:43,139:97,13:c,16:f,87:h,308:d}),t(S,[2,262]),t(E,[2,259]),t(_,[2,143]),t(_,[2,144]),t([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),t(k,[2,211]),t(k,[2,212]),t(k,[2,213]),t(k,[2,214]),{19:98,28:y,29:w,52:99,53:b,56:85},{6:[2,309],99:100,193:[1,101]},t(C,[2,311],{101:102,328:[1,103]}),t(M,[2,317],{104:104,328:[1,105]}),t(A,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:T,114:110},{29:T,114:112},{29:T,114:113},{118:114,123:[1,115],125:116,126:D},t(F,[2,315]),t(F,[2,316]),t(R,[2,319]),t(R,[2,320]),t(R,[2,321]),t(p,[2,327]),{13:c,16:f,55:118,307:43,308:d},t(l,[2,12]),t(l,[2,13],{44:66,43:119,45:v,87:h}),t(B,[2,269]),t(B,[2,15]),{13:c,16:f,44:136,45:N,46:120,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(g,[2,14]),t(g,[2,274]),t(g,[2,271]),t(g,[2,272]),t(e,[2,4]),{13:[1,177]},t(wr,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},t(s,[2,410]),t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:c,16:f,45:[1,193],55:194,197:Ar,219:189,220:190,223:191,224:[1,192],307:43,308:d},t(m,[2,419]),t(Zr,Hr,{20:196,59:197,69:198,70:Xn}),t(l,[2,250]),{29:gr,57:200},t(C,[2,279],{54:202,327:[1,203]}),{29:[2,282]},t(nn,_i,{23:204,58:205,62:206,63:fn}),t(l,[2,252]),{19:208,28:y,29:w,52:209,53:b,56:85},{29:[1,210]},t(u,[2,256]),{31:[1,211]},{31:[2,384]},{13:c,16:f,44:215,45:Ma,55:220,82:O,87:h,89:ca,145:212,172:221,185:213,187:214,231:Go,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(su,[2,265],{56:85,35:227,52:228,19:229,28:y,29:w,53:b}),t(E,[2,260]),t(nn,_i,{58:205,62:206,23:230,63:fn}),t(l,[2,268]),{6:[2,45]},t(e,r,{10:3,4:231}),{13:c,16:f,55:232,307:43,308:d},t(C,[2,312]),{105:233,112:lu,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},t(M,[2,318]),t(C,uu,{108:240,133:242,112:Aa,132:xn}),t(A,[2,323]),{112:[1,244]},{112:[2,325]},t(sn,[2,50]),t(x,Zt,{135:245,136:246,143:247,144:248,31:Jr,112:Jr}),t(sn,[2,51]),t(sn,[2,52]),t(Bt,[2,328],{119:249}),{29:T,114:250},t(Bt,[2,56]),{29:T,114:251},t(p,[2,59]),t(B,[2,270]),{47:[1,252]},t(pn,[2,150]),t(zn,[2,428],{240:253}),t(Ta,[2,430],{244:254}),t(Ta,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),t(Oa,[2,440],{252:264}),t(ln,[2,448],{260:265}),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(ln,[2,167]),t(ln,[2,168]),t(ln,[2,169]),t(ln,[2,170],{176:269,45:Uo,89:Os}),t(ln,[2,171]),t(ln,[2,172]),t(ln,[2,173]),t(ln,[2,174]),{13:c,16:f,44:136,45:N,46:272,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(un,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:qv,89:Kv,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},t(Ii,[2,192],{292:[1,286],293:[1,287]}),t(Ii,[2,195]),t(Ii,[2,196]),t(Ii,[2,197]),t(Ii,[2,198]),t(Ii,[2,199]),t(Ii,[2,200]),{13:c,16:f,44:39,55:40,82:O,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},t(Ic,[2,452]),t(Ic,[2,453]),t(Ic,[2,454]),t(Ic,[2,455]),t(Ic,[2,456]),{279:[2,458]},t(Xf,[2,207]),t(Xf,[2,208]),t(Xf,[2,209]),t(Xf,[2,210]),t(Ii,[2,201]),t(Ii,[2,202]),t(Ii,[2,203]),t(Ii,[2,204]),t(Ii,[2,205]),t(Ii,[2,206]),t(e,[2,5]),t(Yf,[2,297],{88:295}),t(qf,[2,299],{90:296}),{48:[1,297],87:[1,298]},t(Kf,[2,301]),t(wr,[2,43]),t(wr,[2,82]),t(wr,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},t(s,[2,412]),t(vl,[2,123]),t(vl,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),t(go,[2,124]),{13:c,16:f,45:[1,311],55:194,89:[1,310],197:Ar,223:312,225:308,226:309,229:Qv,307:43,308:d},t(s,i,{215:10,214:314}),t(go,[2,236]),t(go,[2,237]),t(cu,[2,6]),t(my,[2,287],{60:315,72:316,73:[1,317]}),t(Zr,[2,286]),{13:c,16:f,45:N,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,307:43,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t([6,31,63,70,73,81,83,85],[2,20]),t(x,dx,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:gl,31:gl,85:gl,112:gl,159:gl,160:gl,161:gl,163:gl,164:gl,41:a}),{13:c,16:f,55:331,307:43,308:d},t(C,[2,280]),t(cu,[2,7]),t(Zr,Hr,{59:197,69:198,20:332,70:Xn}),t(nn,[2,284]),{64:[1,333]},t(nn,_i,{58:205,62:206,23:334,63:fn}),t(l,[2,254]),t(x,Zt,{144:248,30:335,143:336,31:[2,257]}),t(l,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:c,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Dc,307:43,308:d},t(qd,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:c,16:f,87:h,197:Dc,308:d}),t(ml,[2,227]),t(ml,[2,228]),t(ml,[2,229]),{13:c,16:f,44:215,45:Ma,55:220,82:O,87:h,89:ca,172:221,185:351,187:350,200:348,230:347,231:Go,234:349,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},{13:c,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Dc,307:43,308:d},t(ml,[2,146]),t(ml,[2,147]),t(ml,[2,148]),t(ml,[2,149]),{13:c,16:f,44:354,55:355,82:O,87:h,172:357,237:356,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:358,312:qn,313:353},t(yy,[2,215]),t(yy,[2,216]),t(nn,_i,{58:205,62:206,23:359,63:fn}),t(S,[2,264]),t(su,[2,266]),t(cu,[2,11]),t(n,[2,308],{6:[2,310]}),t(sn,[2,313],{102:360,120:361,121:[1,362]}),t(sn,[2,47]),t(sn,[2,63]),t(sn,[2,64]),{13:c,16:f,55:363,307:43,308:d},t(sn,[2,336]),t(sn,[2,337]),t(sn,[2,338]),{109:[1,364]},t(Kd,[2,60]),{13:c,16:f,55:365,307:43,308:d},t(C,[2,335]),{13:c,16:f,55:366,307:43,308:d},{31:[1,367]},t(fu,[2,341],{137:368}),t(fu,[2,340]),{13:c,16:f,44:215,45:Ma,55:220,82:O,87:h,89:ca,145:369,172:221,185:213,187:214,231:Go,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},{28:[1,370],127:371,128:[1,372]},t(Bt,[2,330],{124:373,125:374,126:D}),t(Bt,[2,57]),{44:375,87:h},t(pn,[2,151],{241:376,242:[1,377]}),t(zn,[2,153],{245:378,246:[1,379]}),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,247:380,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{250:[1,381]},t(ai,[2,432]),t(ai,[2,433]),t(ai,[2,434]),t(ai,[2,435]),t(ai,[2,436]),t(ai,[2,437]),{250:[2,439]},t([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:mt,298:xt,299:Nt,300:De,301:J,302:P}),t(Oa,[2,162],{261:388,262:389,39:wy,338:Pc}),t(ln,[2,164]),t(ln,[2,165]),t(ln,[2,166]),t(un,[2,95]),t(un,[2,96]),t(ai,[2,377],{177:392,325:[1,393]}),{48:[1,394]},t(un,[2,177]),{13:c,16:f,44:136,45:N,46:395,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:396,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:397,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:398,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:399,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(un,[2,183]),t(un,[2,98]),t(ai,[2,381],{180:400}),{87:[1,401]},t(un,[2,185]),{13:c,16:f,44:136,45:N,46:402,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{29:gr,57:403},t(Ii,[2,193]),{13:c,16:f,55:404,307:43,308:d},{13:c,16:f,44:39,55:40,87:h,139:342,195:405,197:Dc,307:43,308:d},t(Is,[2,233]),t(Is,[2,234]),t(Is,[2,235]),t(by,[2,459],{281:406,325:[1,407]}),t(ai,[2,463],{284:408,325:[1,409]}),t(ai,[2,465],{286:410,325:[1,411]}),{13:c,16:f,31:[1,412],55:414,82:O,171:413,172:415,173:416,174:Qf,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Zv},{31:[1,419],89:[1,420]},{29:[1,421]},t(Kf,[2,302]),t(Yf,[2,367],{167:422}),t(qf,[2,369],{168:423}),{48:[1,424],87:[1,425]},t(Kf,[2,371]),t(vl,[2,122]),t(vl,[2,417]),t(vl,[2,413]),t(vl,[2,414]),t(vl,[2,415]),t(go,[2,125]),t(go,[2,127]),t(go,[2,128]),t(px,[2,420],{227:426}),t(go,[2,130]),{13:c,16:f,55:194,197:Ar,223:427,307:43,308:d},{48:[1,428]},t(hu,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),t(my,[2,288]),{64:[1,433]},t(Zr,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:c,16:f,45:N,268:K,269:V,270:le,271:ge,273:xe,274:Ie,276:He,277:Ge,279:ht,280:dt,283:It,285:_t,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At}),t(vx,[2,293]),t(Xa,[2,92]),t(Xa,[2,93]),t(Xa,[2,94]),{45:Uo,89:Os,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:y,29:w,56:85},{19:438,28:y,29:w,56:85},t(pi,[2,355],{149:439}),t(pi,[2,354]),{13:c,16:f,44:215,45:Lc,55:220,82:O,87:h,89:ca,156:440,172:221,185:441,203:442,231:Jv,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(S,[2,19]),t(hu,[2,21]),{13:c,16:f,44:450,45:gx,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,307:43,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(cu,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},t(x,[2,386],{31:[2,388]}),t(qd,[2,102]),t(du,[2,391],{191:452}),t(x,[2,395],{196:453,198:454}),t(x,[2,108]),t(x,[2,109]),t(qd,[2,103]),t(qd,[2,104]),t(qd,[2,390]),{13:c,16:f,44:215,45:Ma,48:[1,455],55:220,82:O,87:h,89:ca,172:221,185:351,187:350,200:456,231:Go,234:349,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(Qd,[2,424]),t(mx,[2,136]),t(mx,[2,137]),t(xy,[2,140]),{232:[1,457]},{13:c,16:f,44:39,55:40,87:h,139:342,195:458,197:Dc,307:43,308:d},t(Is,[2,219]),t(Is,[2,220]),t(Is,[2,221]),t(Is,[2,222]),t(Is,[2,223]),t(cu,[2,10]),t(sn,[2,46]),t(sn,[2,314]),{112:lu,122:459},t(sn,[2,62]),t(C,uu,{133:242,108:460,112:Aa,132:xn}),t(Kd,[2,61]),t(sn,[2,49]),t([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},t(fu,[2,351],{146:463,335:[1,464]}),{29:gr,57:465},t(Bt,[2,329]),t(C,[2,332],{129:466,327:[1,467]}),t(Bt,[2,55]),t(Bt,[2,331]),{48:[1,468]},t(zn,[2,429]),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(Ta,[2,431]),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,243:470,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(Ta,[2,156]),{45:qv,89:Kv,179:471},t(Oa,[2,441]),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,251:472,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(ln,[2,444],{256:473}),t(ln,[2,446],{258:474}),t(ai,[2,442]),t(ai,[2,443]),t(ln,[2,449]),{13:c,16:f,44:136,45:N,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,255:154,257:155,259:475,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(ai,[2,450]),t(ai,[2,451]),t(ai,[2,379],{178:476}),t(ai,[2,378]),t([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:c,16:f,44:136,45:N,46:482,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{48:[1,483]},{48:[1,484]},t(un,[2,187]),t(Ii,[2,194]),{13:c,16:f,44:39,55:40,82:O,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,320:485},{13:c,16:f,39:[1,487],44:136,45:N,46:488,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,282:486,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(by,[2,460]),{13:c,16:f,44:136,45:N,46:489,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(ai,[2,464]),{13:c,16:f,44:136,45:N,46:490,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(ai,[2,466]),t(wr,[2,40]),t(Yf,[2,298]),t(Rc,[2,87]),t(Rc,[2,88]),t(Rc,[2,89]),t(Rc,[2,90]),{13:c,16:f,55:492,82:O,172:493,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,311:494,312:qn,315:491},t(wr,[2,41]),t(qf,[2,300]),t(Zd,[2,303],{92:495}),{13:c,16:f,31:[1,496],55:414,82:O,171:497,172:415,173:416,174:Qf,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Zv},{31:[1,498],89:[1,499]},{29:[1,500]},t(Kf,[2,372]),{13:c,16:f,48:[2,422],55:194,197:Ar,223:312,226:502,228:501,229:Qv,307:43,308:d},t(go,[2,131]),t(go,[2,126]),t(hu,[2,22]),t(hu,[2,290]),{82:[1,503]},{82:[1,504]},{13:c,16:f,44:510,45:N,55:323,67:321,68:322,74:505,75:506,76:yx,77:320,78:wx,79:509,87:h,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,307:43,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(vx,[2,294]),t(bx,[2,69]),t(bx,[2,70]),t(Zr,Hr,{59:197,69:198,20:511,70:Xn}),t(nn,_i,{58:205,62:206,23:512,63:fn}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},t(pi,[2,363],{157:524,335:[1,525]}),t(s,i,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),t(eg,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:i,16:i,45:i,197:i,224:i,229:i,308:i,87:h}),{13:c,16:f,44:215,45:Lc,55:220,82:O,87:h,89:ca,172:221,185:351,203:536,212:534,231:Jv,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(s,i,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),t(nn,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:c,16:f,45:gx,87:h,268:K,269:V,270:le,271:ge,273:xe,274:Ie,276:He,277:Ge,279:ht,280:dt,283:It,285:_t,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At}),t(Nc,[2,291]),t(Nc,[2,24]),t(Nc,[2,25]),{13:c,16:f,44:136,45:N,46:539,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(Nc,[2,28]),t(nn,_i,{58:205,62:206,23:540,63:fn}),t([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),t(du,[2,107]),{13:c,16:f,44:215,45:Ma,55:220,82:O,87:h,89:ca,172:221,185:351,187:350,199:543,200:544,231:Go,234:349,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(xx,[2,132]),t(Qd,[2,425]),t(xx,[2,133]),{13:c,16:f,44:354,55:355,82:O,87:h,172:357,237:356,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:358,312:qn,313:545},t(sn,[2,54]),t(sn,[2,48]),t(fu,[2,342]),{13:c,16:f,44:39,55:40,87:h,139:546,307:43,308:d},t(fu,[2,68]),t(x,[2,350],{31:Sx,112:Sx}),t(sn,[2,53]),{13:c,16:f,55:547,307:43,308:d},t(C,[2,333]),t(B,[2,16]),t(zn,[2,152]),t(Ta,[2,154]),t(Ta,[2,157]),t(Oa,[2,159]),t(Oa,[2,160],{262:389,261:548,39:wy,338:Pc}),t(Oa,[2,161],{262:389,261:549,39:wy,338:Pc}),t(ln,[2,163]),{13:c,16:f,44:136,45:N,46:550,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(un,[2,178]),t(un,[2,179]),{13:c,16:f,44:136,45:N,46:551,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:552,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:553,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{48:[1,554],272:[1,555]},t(un,[2,184]),t(un,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:c,16:f,55:194,197:Ar,223:562,307:43,308:d},t(yl,[2,224]),t(yl,[2,225]),t(yl,[2,226]),{31:[1,563],45:Ex,94:564},t(wr,[2,84]),t(Yf,[2,368]),t(wr,[2,85]),t(qf,[2,370]),t(Zd,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},t(hu,[2,35],{83:[1,569]}),t(hu,[2,36],{81:[1,570]}),t(my,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:c,16:f,45:N,76:yx,78:wx,87:h,268:K,269:V,270:le,271:ge,273:xe,274:Ie,276:He,277:Ge,279:ht,280:dt,283:It,285:_t,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At}),t(Zf,[2,295]),{45:N,77:572},{45:N,77:573},t(Zf,[2,33]),t(Zf,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},t(pi,[2,356]),t(Jd,[2,357],{152:578,335:[1,579]}),t(Wo,[2,74]),{29:gr,57:580},{29:gr,57:581},{13:c,16:f,44:39,55:40,87:h,139:582,307:43,308:d},t(Sy,[2,365],{162:583,328:[1,584]}),{13:c,16:f,45:N,55:323,67:321,68:322,77:320,79:585,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,307:43,308:d,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{45:[1,586]},t(Wo,[2,81]),{29:gr,57:587},t(pi,[2,73]),t(x,[2,362],{29:Ds,31:Ds,85:Ds,112:Ds,159:Ds,160:Ds,161:Ds,163:Ds,164:Ds}),t(eg,[2,112]),t(Jf,[2,401],{206:588}),t(x,[2,405],{209:589,210:590}),t(x,[2,403]),t(x,[2,404]),t(eg,[2,113]),t(eg,[2,400]),{13:c,16:f,44:215,45:Lc,48:[1,591],55:220,82:O,87:h,89:ca,172:221,185:351,203:536,212:592,231:Jv,234:535,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(Qd,[2,426]),t(xy,[2,138]),t(xy,[2,139]),{232:[1,593]},t(Nc,[2,292]),{47:[1,595],48:[1,594]},t(cu,[2,9]),t(du,[2,392]),t(du,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:c,16:f,87:h,197:Dc,308:d}),t(du,[2,110],{272:[1,598]}),t(eh,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},t(Bt,[2,58]),t(ln,[2,445]),t(ln,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},t(un,[2,99]),t(ai,[2,382]),t([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),t(un,[2,188]),t(un,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:c,16:f,55:492,82:O,172:493,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,311:494,312:qn,315:611},t(wr,[2,42]),t(Zd,[2,304]),{13:c,16:f,55:414,82:O,95:612,171:613,172:415,173:416,174:Qf,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Zv},{31:[1,614],45:Ex,94:615},t(go,[2,129]),t(px,[2,421]),{82:[1,616]},{82:[1,617]},t(Zf,[2,296]),t(Zf,[2,31]),t(Zf,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},t(x,dx,{155:330,153:618,154:619,29:Vo,31:Vo,85:Vo,112:Vo,159:Vo,160:Vo,161:Vo,163:Vo,164:Vo}),t(Jd,[2,358]),t(Wo,[2,75]),t(Wo,[2,76]),{29:gr,57:620},{13:c,16:f,44:39,55:40,87:h,139:621,307:43,308:d},t(Sy,[2,366]),t(Wo,[2,79]),{13:c,16:f,44:136,45:N,46:622,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(Wo,[2,91],{336:[1,623]}),t([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),t(Jf,[2,117]),{13:c,16:f,44:215,45:Lc,55:220,82:O,87:h,89:ca,172:221,185:351,203:536,211:626,212:627,231:Jv,234:535,236:216,237:222,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,309:an,310:Yn,311:217,312:qn},t(ml,[2,134]),t(Qd,[2,427]),t(ml,[2,135]),t(Nc,[2,26]),{44:628,87:h},t(du,[2,106]),t(du,[2,394]),t(x,[2,396]),t(eh,[2,111]),t(eh,[2,398]),{13:c,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Dc,307:43,308:d},t(yy,[2,217]),t(x,Zt,{144:248,140:630,143:631,31:[2,343]}),t(un,[2,97]),t(ai,[2,380]),t(un,[2,180]),{13:c,16:f,44:136,45:N,46:632,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},{13:c,16:f,44:136,45:N,46:633,55:133,67:132,68:134,77:131,82:O,87:h,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:G,264:130,265:q,266:137,267:139,268:K,269:V,270:le,271:ge,273:xe,274:Ie,275:146,276:He,277:Ge,278:149,279:ht,280:dt,283:It,285:_t,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Be,346:$e,347:Ue,348:ut,349:Mt,350:$t,351:At},t(un,[2,190]),{290:[1,634]},{314:[1,635]},{13:c,16:f,48:[1,636],55:414,82:O,171:637,172:415,173:416,174:Qf,255:154,257:155,291:150,294:yt,295:Tt,296:kt,297:mt,298:xt,299:Nt,300:De,301:J,302:P,303:me,304:Ee,305:fe,306:ke,307:43,308:d,312:Zv},t(wl,[2,305]),t(wr,[2,86]),t(Zd,[2,374]),t(hu,[2,37]),t(hu,[2,38]),t(pi,[2,72]),t(pi,[2,360]),t(Wo,[2,77]),{29:gr,57:638},{47:[1,639]},{29:[2,376]},t(Jf,[2,402]),t(Jf,[2,115],{215:10,208:528,214:529,44:530,205:640,13:i,16:i,45:i,197:i,224:i,229:i,308:i,87:h}),t(Jf,[2,118],{272:[1,641]}),t(Fc,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:me,304:Ee,305:fe,306:ke},t(Rc,[2,218]),t(Zd,[2,44]),t(wl,[2,306]),t(Wo,[2,78]),{44:651,87:h},t(Jf,[2,116]),t(x,[2,406]),t(Fc,[2,119]),t(Fc,[2,408]),t(s,i,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),t(Nc,[2,27]),t(eh,[2,230]),t(Ey,[2,345],{141:653,335:[1,654]}),t(un,[2,181]),t(un,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},t(x,Zt,{144:248,142:657,143:658,31:_y,112:_y}),t(Ey,[2,346]),t(Wo,[2,80]),t(Fc,[2,231]),t(fu,[2,67]),t(fu,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Ae,Xe){if(Xe.recoverable)this.trace(Ae);else{var pt=new Error(Ae);throw pt.hash=Xe,pt}},parse:function(Ae){var Xe=this,pt=[0],ar=[null],sr=[],$=this.table,qa="",W=0,wu=0,oh=2,fg=1,hg=sr.slice.call(arguments,1),Qn=Object.create(this.lexer),bo={yy:{}};for(var jc in this.yy)Object.prototype.hasOwnProperty.call(this.yy,jc)&&(bo.yy[jc]=this.yy[jc]);Qn.setInput(Ae,bo.yy),bo.yy.lexer=Qn,bo.yy.parser=this,typeof Qn.yylloc>"u"&&(Qn.yylloc={});var bu=Qn.yylloc;sr.push(bu);var dg=Qn.options&&Qn.options.ranges;typeof bo.yy.parseError=="function"?this.parseError=bo.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var rp=function(){var Gc;return Gc=Qn.lex()||fg,typeof Gc!="number"&&(Gc=Xe.symbols_[Gc]||Gc),Gc},Cr,on,yr,Pi,Li={},pg,Sl,Ox,vg;;){if(on=pt[pt.length-1],this.defaultActions[on]?yr=this.defaultActions[on]:((Cr===null||typeof Cr>"u")&&(Cr=rp()),yr=$[on]&&$[on][Cr]),typeof yr>"u"||!yr.length||!yr[0]){var Dy="";vg=[];for(pg in $[on])this.terminals_[pg]&&pg>oh&&vg.push("'"+this.terminals_[pg]+"'");Qn.showPosition?Dy="Parse error on line "+(W+1)+`:
`+Qn.showPosition()+`
Expecting `+vg.join(", ")+", got '"+(this.terminals_[Cr]||Cr)+"'":Dy="Parse error on line "+(W+1)+": Unexpected "+(Cr==fg?"end of input":"'"+(this.terminals_[Cr]||Cr)+"'"),this.parseError(Dy,{text:Qn.match,token:this.terminals_[Cr]||Cr,line:Qn.yylineno,loc:bu,expected:vg})}if(yr[0]instanceof Array&&yr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+on+", token: "+Cr);switch(yr[0]){case 1:pt.push(Cr),ar.push(Qn.yytext),sr.push(Qn.yylloc),pt.push(yr[1]),Cr=null,wu=Qn.yyleng,qa=Qn.yytext,W=Qn.yylineno,bu=Qn.yylloc;break;case 2:if(Sl=this.productions_[yr[1]][1],Li.$=ar[ar.length-Sl],Li._$={first_line:sr[sr.length-(Sl||1)].first_line,last_line:sr[sr.length-1].last_line,first_column:sr[sr.length-(Sl||1)].first_column,last_column:sr[sr.length-1].last_column},dg&&(Li._$.range=[sr[sr.length-(Sl||1)].range[0],sr[sr.length-1].range[1]]),Pi=this.performAction.apply(Li,[qa,wu,W,bo.yy,yr[1],ar,sr].concat(hg)),typeof Pi<"u")return Pi;Sl&&(pt=pt.slice(0,-1*Sl*2),ar=ar.slice(0,-1*Sl),sr=sr.slice(0,-1*Sl)),pt.push(this.productions_[yr[1]][0]),ar.push(Li.$),sr.push(Li._$),Ox=$[pt[pt.length-2]][pt[pt.length-1]],pt.push(Ox);break;case 3:return!0}}return!0}},tg=MB.Wildcard,rg="http://www.w3.org/1999/02/22-rdf-syntax-ns#",rT=rg+"type",nT=rg+"first",iT=rg+"rest",_x=rg+"nil",bl="http://www.w3.org/2001/XMLSchema#",Cx=bl+"integer",kx=bl+"decimal",th=bl+"double",aT=bl+"boolean",mo="",ky="",Bc="";function qi(Fe){return Fe.toLowerCase()}function Ya(Fe,Ae){return Fe.push(Ae),Fe}function pu(Fe,Ae){return Fe.push.apply(Fe,Ae),Fe}function Kn(Fe){Fe||(Fe={});for(var Ae=1,Xe=arguments.length,pt;Ae<Xe&&(pt=arguments[Ae]||{});Ae++)for(var ar in pt)Fe[ar]=pt[ar];return Fe}function Ps(){for(var Fe=[],Ae=0,Xe=arguments.length;Ae<Xe;Ae++)Fe=Fe.concat.apply(Fe,arguments[Ae]);return Fe}function ep(Fe){if(Fe[0]==="<"&&(Fe=Fe.substring(1,Fe.length-1)),/^[a-z]+:/i.test(Fe))return Fe;if(!Ir.base)throw new Error("Cannot resolve relative IRI "+Fe+" because no base IRI was set.");switch(mo!==Ir.base&&(mo=Ir.base,ky=mo.replace(/[^\/:]*$/,""),Bc=mo.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Fe[0]){case void 0:return mo;case"#":return mo+Fe;case"?":return mo.replace(/(?:\?.*)?$/,Fe);case"/":return Bc+Fe;default:return ky+Fe}}function ng(Fe){if(Fe){var Ae=Fe[0];if(Ae==="?"||Ae==="$")return Ir.factory.variable(Fe.substr(1))}return Fe}function Di(Fe,Ae){return{type:"operation",operator:Fe,args:Ae||[]}}function rh(Fe,Ae){var Xe={expression:Fe==="*"?new tg:Fe};if(Ae)for(var pt in Ae)Xe[pt]=Ae[pt];return Xe}function $c(Fe,Ae){return{type:"path",pathType:Fe,items:Ae}}function yn(Fe,Ae){for(var Xe=0,pt=Ae.length,ar;Xe<pt&&(ar=Ae[Xe]);Xe++)Fe=Di(ar[0],[Fe,ar[1]]);return Fe}function vu(Fe,Ae){var Xe=[],pt=[],ar=Fe.length,sr,$={};if(!ar)return null;for(var qa=0;qa<ar&&(sr=Fe[qa]);qa++)(sr.named?pt:Xe).push(sr.iri);return $[Ae||"from"]={default:Xe,named:pt},$}function nh(Fe){return parseInt(Fe,10)}function yo(Fe){return Fe.type==="group"&&Fe.patterns.length===1?Fe.patterns[0]:Fe}function wo(Fe,Ae){return Ae&&Ae.termType!=="NamedNode"&&(Ae=Ir.factory.namedNode(Ae)),Ir.factory.literal(Fe,Ae)}function ig(Fe,Ae){return Ir.factory.literal(Fe,Ae)}function xl(Fe,Ae,Xe){if(!("termType"in Ae))throw new Error("Nested triples cannot contain paths");return Ir.factory.quad(Fe,Ae,Xe)}function Ho(Fe,Ae,Xe,pt){var ar={};return Fe!=null&&(ar.subject=Fe),Ae!=null&&(ar.predicate=Ae),Xe!=null&&(ar.object=Xe),pt!=null&&(ar.annotations=pt),ar}function gu(Fe){return typeof Fe=="string"?Fe.startsWith("e_")?Ir.factory.blankNode(Fe):Ir.factory.blankNode("e_"+Fe):Ir.factory.blankNode("g_"+ih++)}var ih=0;Ir._resetBlanks=function(){ih=0};var ag=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Mx={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},My=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,og=String.fromCharCode;function Ax(Fe,Ae){Fe=Fe.substring(Ae,Fe.length-Ae);try{Fe=Fe.replace(ag,function(Xe,pt,ar,sr){var $;if(pt){if($=parseInt(pt,16),isNaN($))throw new Error;return og($)}else if(ar){if($=parseInt(ar,16),isNaN($))throw new Error;return $<65535?og($):og(55296+(($-=65536)>>10),56320+($&1023))}else{var qa=Mx[sr];if(!qa)throw new Error;return qa}})}catch{return""}if(My.exec(Fe))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Fe);return Fe}function oT(Fe){var Ae=gu(),Xe=Ae,pt=[],ar,sr=[];Fe.forEach(function(wu){pt.push(wu.entity),pu(sr,wu.triples)});for(var $=0,qa=0,W=pt.length,ar=Array(W*2);$<W;)ar[qa++]=Ho(Xe,Ir.factory.namedNode(nT),pt[$]),ar[qa++]=Ho(Xe,Ir.factory.namedNode(iT),Xe=++$<W?gu():Ir.factory.namedNode(_x));return{entity:Ae,triples:pu(ar,sr)}}function sT(Fe){var Ae=gu();return{entity:Ae,triples:Fe.map(function(Xe){return Kn(Ho(Ae),Xe)})}}function Ay(Fe,Ae,Xe){var pt=[],ar=[];return Ae.forEach(function(sr){let $=null;sr.annotation&&($=sr.annotation,sr=sr.object),pt.push(Ho(null,Fe,sr.entity,$)),pu(ar,sr.triples)}),Ps(pt,Xe||[],ar)}function mu(Fe){return Fe.variable?Fe.variable.value:Fe.value||Fe.expression.value}function ah(Fe){if(!Fe)return[];if(Fe.type==="aggregate")return[Fe];if(Fe.type==="operation"){const Ae=[];for(const Xe of Fe.args)Ae.push(...ah(Xe));return Ae}return[]}function Ty(Fe){const Ae=new Set,Xe=function(pt){pt&&(pt.termType==="Variable"?Ae.add(pt):pt.type==="operation"&&pt.args.forEach(Xe))};return Xe(Fe),Ae}function tp(Fe,Ae=1,Xe=[]){for(const pt of Fe)Ae>0&&pt instanceof Array?tp(pt,Ae-1,Xe):Xe.push(pt);return Xe}function yu(Fe){return Fe.termType==="Variable"}function sg(Fe){if(Fe.triples){const Ae=[];for(const Xe of Fe.triples)yu(Xe.subject)&&Ae.push(Xe.subject.value),yu(Xe.predicate)&&Ae.push(Xe.predicate.value),yu(Xe.object)&&Ae.push(Xe.object.value);return Ae}else if(Fe.patterns){const Ae=[];for(const Xe of Fe.patterns)Ae.push(...sg(Xe));return Ae}return[]}function Oy(Fe){const Ae=Fe.slice().sort(),Xe=[];for(let pt=0;pt<Ae.length-1;pt++)Ae[pt+1]==Ae[pt]&&Xe.push(Ae[pt]);return Xe}function zc(Fe){if(!Ir.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Fe}function lg(Fe,Ae,Xe){for(const pt of Ae){const ar=Ho("subject"in pt?pt.subject:Fe,pt.predicate,pt.object);Xe.push(ar),pt.annotations&&lg(xl(Fe,pt.predicate,pt.object),pt.annotations,Xe)}}function ug(Fe){if(Ir.sparqlStar){const Ae=[];return Fe.forEach(Xe=>{const pt=Ho(Xe.subject,Xe.predicate,Xe.object);Ae.push(pt),Xe.annotations&&lg(xl(Xe.subject,Xe.predicate,Xe.object),Xe.annotations,Ae)}),Ae}return Fe}function Iy(Fe){for(const Ae of Fe){if(Ae.type==="graph"&&Ae.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Ae.type==="bgp"||Ae.type==="graph"){for(const Xe of Ae.triples)if(Xe.subject.termType==="Variable"||Xe.predicate.termType==="Variable"||Xe.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Fe}function cg(Fe){for(const Ae of Fe)if(Ae.type==="bgp"){for(const Xe of Ae.triples)if(Xe.subject.termType==="BlankNode"||Xe.predicate.termType==="BlankNode"||Xe.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Fe}var Tx=function(){var Fe={EOF:1,parseError:function(Xe,pt){if(this.yy.parser)this.yy.parser.parseError(Xe,pt);else throw new Error(Xe)},setInput:function(Ae,Xe){return this.yy=Xe||this.yy||{},this._input=Ae,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ae=this._input[0];this.yytext+=Ae,this.yyleng++,this.offset++,this.match+=Ae,this.matched+=Ae;var Xe=Ae.match(/(?:\r\n?|\n).*/g);return Xe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ae},unput:function(Ae){var Xe=Ae.length,pt=Ae.split(/(?:\r\n?|\n)/g);this._input=Ae+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Xe),this.offset-=Xe;var ar=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pt.length-1&&(this.yylineno-=pt.length-1);var sr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pt?(pt.length===ar.length?this.yylloc.first_column:0)+ar[ar.length-pt.length].length-pt[0].length:this.yylloc.first_column-Xe},this.options.ranges&&(this.yylloc.range=[sr[0],sr[0]+this.yyleng-Xe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Ae){this.unput(this.match.slice(Ae))},pastInput:function(){var Ae=this.matched.substr(0,this.matched.length-this.match.length);return(Ae.length>20?"...":"")+Ae.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ae=this.match;return Ae.length<20&&(Ae+=this._input.substr(0,20-Ae.length)),(Ae.substr(0,20)+(Ae.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ae=this.pastInput(),Xe=new Array(Ae.length+1).join("-");return Ae+this.upcomingInput()+`
`+Xe+"^"},test_match:function(Ae,Xe){var pt,ar,sr;if(this.options.backtrack_lexer&&(sr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(sr.yylloc.range=this.yylloc.range.slice(0))),ar=Ae[0].match(/(?:\r\n?|\n).*/g),ar&&(this.yylineno+=ar.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ar?ar[ar.length-1].length-ar[ar.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ae[0].length},this.yytext+=Ae[0],this.match+=Ae[0],this.matches=Ae,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ae[0].length),this.matched+=Ae[0],pt=this.performAction.call(this,this.yy,this,Xe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pt)return pt;if(this._backtrack){for(var $ in sr)this[$]=sr[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ae,Xe,pt,ar;this._more||(this.yytext="",this.match="");for(var sr=this._currentRules(),$=0;$<sr.length;$++)if(pt=this._input.match(this.rules[sr[$]]),pt&&(!Xe||pt[0].length>Xe[0].length)){if(Xe=pt,ar=$,this.options.backtrack_lexer){if(Ae=this.test_match(pt,sr[$]),Ae!==!1)return Ae;if(this._backtrack){Xe=!1;continue}else return!1}else if(!this.options.flex)break}return Xe?(Ae=this.test_match(Xe,sr[ar]),Ae!==!1?Ae:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Xe=this.next();return Xe||this.lex()},begin:function(Xe){this.conditionStack.push(Xe)},popState:function(){var Xe=this.conditionStack.length-1;return Xe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Xe){return Xe=this.conditionStack.length-1-Math.abs(Xe||0),Xe>=0?this.conditionStack[Xe]:"INITIAL"},pushState:function(Xe){this.begin(Xe)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Xe,pt,ar,sr){switch(ar){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(pt.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Fe}();Cy.lexer=Tx;function Ir(){this.yy={}}return Ir.prototype=Cy,Cy.Parser=Ir,new Ir}(),Imt=Omt,Dmt="http://www.w3.org/2001/XMLSchema#integer",Pmt="http://www.w3.org/2001/XMLSchema#string";function $n(t){this._options=t=t||{};var e=t.prefixes||{};this._prefixByIri={};var r=[];for(var n in e){var i=e[n];T2(i)&&(this._prefixByIri[i]=n,r.push(i))}var a=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=t.sparqlStar,this._indent=T2(t.indent)?t.indent:"  ",this._newline=T2(t.newline)?t.newline:`
`,this._explicitDatatype=!!t.explicitDatatype}$n.prototype.toQuery=function(t){var e="";return t.queryType&&(e+=t.queryType.toUpperCase()+" "),t.reduced&&(e+="REDUCED "),t.distinct&&(e+="DISTINCT "),t.variables?e+=ss(t.variables,void 0,function(r){return gd(r)?this.toEntity(r):"("+this.toExpression(r.expression)+" AS "+Nk(r.variable)+")"},this)+" ":t.template&&(e+=this.group(t.template,!0)+this._newline),t.from&&(e+=this.graphs("FROM ",t.from.default)+this.graphs("FROM NAMED ",t.from.named)),t.where&&(e+="WHERE "+this.group(t.where,!0)+this._newline),t.updates&&(e+=ss(t.updates,";"+this._newline,this.toUpdate,this)),t.group&&(e+="GROUP BY "+ss(t.group,void 0,function(r){var n=gd(r.expression)?this.toEntity(r.expression):"("+this.toExpression(r.expression)+")";return r.variable?"("+n+" AS "+Nk(r.variable)+")":n},this)+this._newline),t.having&&(e+="HAVING ("+ss(t.having,void 0,this.toExpression,this)+")"+this._newline),t.order&&(e+="ORDER BY "+ss(t.order,void 0,function(r){var n="("+this.toExpression(r.expression)+")";return r.descending?"DESC "+n:n},this)+this._newline),t.offset&&(e+="OFFSET "+t.offset+this._newline),t.limit&&(e+="LIMIT "+t.limit+this._newline),t.values&&(e+=this.values(t)),e=this.baseAndPrefixes(t)+e,e.trim()};$n.prototype.baseAndPrefixes=function(t){var e=t.base?"BASE <"+t.base+">"+this._newline:"",r="";for(var n in t.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+t.prefixes[n]+">"+this._newline);return e+r};$n.prototype.toPattern=function(t){var e=t.type||t instanceof Array&&"array"||(t.subject&&t.predicate&&t.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](t)};$n.prototype.triple=function(t){return this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+"."};$n.prototype.array=function(t){return ss(t,this._newline,this.toPattern,this)};$n.prototype.bgp=function(t){return this.encodeTriples(t.triples)};$n.prototype.encodeTriples=function(t){if(!t.length)return"";for(var e=[],r=void 0,n=void 0,i=0;i<t.length;i++){var a=t[i];Dp(a.subject,r)?Dp(a.predicate,n)?e.push(","):(n=a.predicate,e.push(";"+this._newline,this._indent,this.toEntity(n))):(r&&e.push("."+this._newline),r=a.subject,n=a.predicate,e.push(this.toEntity(r)," ",this.toEntity(n))),e.push(" ",this.toEntity(a.object))}return e.push("."),e.join("")};$n.prototype.graph=function(t){return"GRAPH "+this.toEntity(t.name)+" "+this.group(t)};$n.prototype.graphs=function(t,e){return!e||e.length===0?"":ss(e,"",function(r){return t+this.toEntity(r)+this._newline},this)};$n.prototype.group=function(t,e){return t=e!==!0?this.array(t.patterns||t.triples):this.toPattern(t.type!=="group"?t:t.patterns),t.indexOf(this._newline)===-1?"{ "+t+" }":"{"+this._newline+this.indent(t)+this._newline+"}"};$n.prototype.query=function(t){return this.toQuery(t)};$n.prototype.filter=function(t){return"FILTER("+this.toExpression(t.expression)+")"};$n.prototype.bind=function(t){return"BIND("+this.toExpression(t.expression)+" AS "+Nk(t.variable)+")"};$n.prototype.optional=function(t){return"OPTIONAL "+this.group(t)};$n.prototype.union=function(t){return ss(t.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};$n.prototype.minus=function(t){return"MINUS "+this.group(t)};$n.prototype.values=function(t){var e=Object.keys(t.values.reduce(function(i,a){for(var o in a)i[o]=!0;return i},{})),r,n;return e.length===1?r=n="":(r="(",n=")"),"VALUES "+r+e.join(" ")+n+" {"+this._newline+ss(t.values,this._newline,function(i){return"  "+r+ss(e,void 0,function(a){return i[a]?this.toEntity(i[a]):"UNDEF"},this)+n},this)+this._newline+"}"};$n.prototype.service=function(t){return"SERVICE "+(t.silent?"SILENT ":"")+this.toEntity(t.name)+" "+this.group(t)};$n.prototype.toExpression=function(t){if(gd(t))return this.toEntity(t);switch(t.type.toLowerCase()){case"aggregate":return t.aggregation.toUpperCase()+"("+(t.distinct?"DISTINCT ":"")+this.toExpression(t.expression)+(typeof t.separator=="string"?'; SEPARATOR = "'+t.separator.replace($de,zde)+'"':"")+")";case"functioncall":return this.toEntity(t.function)+"("+ss(t.args,", ",this.toExpression,this)+")";case"operation":var e=t.operator.toUpperCase(),r=t.args||[];switch(t.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(gd(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+e+" "+(gd(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return"!("+this.toExpression(r[0])+")";case"uplus":return"+("+this.toExpression(r[0])+")";case"uminus":return"-("+this.toExpression(r[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(r[0])+" "+e+"("+(T2(r[1])?r[1]:ss(r[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(r[0],!0);default:return e+"("+ss(r,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+t.type)}};$n.prototype.toEntity=function(t){if(gd(t))switch(t.termType){case"Wildcard":return"*";case"Variable":return Nk(t);case"BlankNode":return"_:"+t.value;case"Literal":var e=t.value||"",r=t.language||"",n=t.datatype;if(t='"'+e.replace($de,zde)+'"',r)t+="@"+r;else if(n){if(!this._explicitDatatype)switch(n.value){case Pmt:return t;case Dmt:if(/^\d+$/.test(e))return e+" "}t+="^^"+this.encodeIRI(n.value)}return t;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return t.graph&&t.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(t.graph)+" { "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" }  >>":"<< "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" >>";default:return this.encodeIRI(t.value)}else{var i=t.items.map(this.toEntity,this),a=t.pathType;switch(a){case"^":case"!":return a+i[0];case"*":case"+":case"?":return"("+i[0]+a+")";default:return"("+i.join(a)+")"}}};var $de=/["\\\t\n\r\b\f]/g,zde=function(t){return Lmt[t]},Lmt={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};$n.prototype.encodeIRI=function(t){var e=this._prefixRegex.exec(t);if(e){var r=this._prefixByIri[e[1]];return this._usedPrefixes[r]=!0,r+":"+e[2]}return"<"+t+">"};$n.prototype.toUpdate=function(t){switch(t.type||t.updateType){case"load":return"LOAD"+(t.source?" "+this.toEntity(t.source):"")+(t.destination?" INTO GRAPH "+this.toEntity(t.destination):"");case"insert":return"INSERT DATA "+this.group(t.insert,!0);case"delete":return"DELETE DATA "+this.group(t.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(t.delete,!0);case"insertdelete":return(t.graph?"WITH "+this.toEntity(t.graph)+this._newline:"")+(t.delete.length?"DELETE "+this.group(t.delete,!0)+this._newline:"")+(t.insert.length?"INSERT "+this.group(t.insert,!0)+this._newline:"")+(t.using?this.graphs("USING ",t.using.default):"")+(t.using?this.graphs("USING NAMED ",t.using.named):"")+"WHERE "+this.group(t.where,!0);case"add":case"copy":case"move":return t.type.toUpperCase()+" "+(t.silent?"SILENT ":"")+(t.source.default?"DEFAULT":this.toEntity(t.source.name))+" TO "+this.toEntity(t.destination.name);case"create":case"clear":case"drop":return t.type.toUpperCase()+(t.silent?" SILENT ":" ")+(t.graph.default?"DEFAULT":t.graph.named?"NAMED":t.graph.all?"ALL":"GRAPH "+this.toEntity(t.graph.name));default:throw new Error("Unknown update query type: "+t.type)}};$n.prototype.indent=function(t){return t.replace(/^/gm,this._indent)};function Nk(t){return"?"+t.value}function T2(t){return typeof t=="string"}function gd(t){return typeof t.termType=="string"}function Dp(t,e){if(!t||!gd(t)||!e||!gd(e)||t.termType!==e.termType)return!1;switch(t.termType){case"Literal":return t.value===e.value&&t.language===e.language&&Dp(t.datatype,e.datatype);case"Quad":return Dp(t.subject,e.subject)&&Dp(t.predicate,e.predicate)&&Dp(t.object,e.object)&&Dp(t.graph,e.graph);default:return t.value===e.value}}function ss(t,e,r,n){return t.map(r,n).join(T2(e)?e:" ")}var Rmt=function(e={}){return{stringify:function(r){var n=Object.create(e);return n.prefixes=r.prefixes,new $n(n).toQuery(r)},createGenerator:function(){return new $n(e)}}},jde={},lx={};Object.defineProperty(lx,"__esModule",{value:!0});lx.BlankNode=void 0;class Nmt{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}lx.BlankNode=Nmt;var tT={},ux={};Object.defineProperty(ux,"__esModule",{value:!0});ux.DefaultGraph=void 0;class fR{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}}ux.DefaultGraph=fR;fR.INSTANCE=new fR;var cx={},gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.NamedNode=void 0;class Fmt{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}}gy.NamedNode=Fmt;Object.defineProperty(cx,"__esModule",{value:!0});cx.Literal=void 0;const Gde=gy;class Qm{constructor(e,r){this.termType="Literal",this.value=e,typeof r=="string"?(this.language=r,this.datatype=Qm.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=Qm.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}cx.Literal=Qm;Qm.RDF_LANGUAGE_STRING=new Gde.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Qm.XSD_STRING=new Gde.NamedNode("http://www.w3.org/2001/XMLSchema#string");var fx={};Object.defineProperty(fx,"__esModule",{value:!0});fx.Quad=void 0;class Bmt{constructor(e,r,n,i){this.termType="Quad",this.value="",this.subject=e,this.predicate=r,this.object=n,this.graph=i}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}fx.Quad=Bmt;var hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.Variable=void 0;class $mt{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}}hx.Variable=$mt;Object.defineProperty(tT,"__esModule",{value:!0});tT.DataFactory=void 0;const zmt=lx,jmt=ux,rq=cx,Gmt=gy,Umt=fx,Wmt=hx;let Vmt=0,Hmt=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${Vmt++}_`}namedNode(e){return new Gmt.NamedNode(e)}blankNode(e){return new zmt.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,r){return new rq.Literal(e,r)}variable(e){return new Wmt.Variable(e)}defaultGraph(){return jmt.DefaultGraph.INSTANCE}quad(e,r,n,i){return new Umt.Quad(e,r,n,i||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(rq.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};tT.DataFactory=Hmt;(function(t){var e=Oe&&Oe.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=Oe&&Oe.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(lx,t),r(tT,t),r(ux,t),r(cx,t),r(gy,t),r(fx,t),r(hx,t)})(jde);var Jc=Imt.Parser,Xmt=Rmt,Ymt=MB.Wildcard,{DataFactory:qmt}=jde,Kmt={Parser:function({prefixes:t,baseIRI:e,factory:r,sparqlStar:n,skipValidation:i,skipUngroupedVariableCheck:a,pathOnly:o}={}){var s={};for(var l in t||{})s[l]=t[l];var u=new Jc;return u.parse=function(){return Jc.base=e||"",Jc.prefixes=Object.create(s),Jc.factory=r||new qmt,Jc.sparqlStar=!!n,Jc.pathOnly=!!o,Jc.skipValidation=!!i||!!a,Jc.prototype.parse.apply(u,arguments)},u._resetBlanks=Jc._resetBlanks,u},Generator:Xmt,Wildcard:Ymt};const Qmt=_s(Kmt),Zmt=`PREFIX bd: <bd:>
PREFIX cc: <http://creativecommons.org/ns#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX ontolex: <http://www.w3.org/ns/lemon/ontolex#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX pqn: <http://www.wikidata.org/prop/qualifier/value-normalized/>
PREFIX pqv: <http://www.wikidata.org/prop/qualifier/value/>
PREFIX pr: <http://www.wikidata.org/prop/reference/>
PREFIX prn: <http://www.wikidata.org/prop/reference/value-normalized/>
PREFIX prov: <http://www.w3.org/ns/prov#>
PREFIX prv: <http://www.wikidata.org/prop/reference/value/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX psn: <http://www.wikidata.org/prop/statement/value-normalized/>
PREFIX psv: <http://www.wikidata.org/prop/statement/value/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX schema: <http://schema.org/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX wdata: <http://www.wikidata.org/wiki/Special:EntityData/>
PREFIX wdno: <http://www.wikidata.org/prop/novalue/>
PREFIX wdref: <http://www.wikidata.org/reference/>
PREFIX wds: <http://www.wikidata.org/entity/statement/>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wdtn: <http://www.wikidata.org/prop/direct-normalized/>
PREFIX wdv: <http://www.wikidata.org/value/>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>`,Jmt=t=>t.type==="bgp",eyt=t=>"termType"in t.predicate,tyt=t=>{var o;return(((o=new Qmt.Parser().parse(Zmt+t).where)==null?void 0:o.filter(Jmt))||[]).map(s=>s.triples).flat().filter(eyt)},Ude=t=>{switch(t){case hR.Variable:return"#c44601";case hR.Term:return"#8babf1";default:return"red"}},Wde=(t,e)=>e?`${t}
${e}`:t.split("/").at(-1)||"",ryt=(t,e,r)=>{const n=Ude(e);return{id:t,type:"graphin-circle",data:{type:e},style:{label:{value:Wde(AB(t),r)},keyshape:{fill:n,stroke:n,fillOpacity:.1,size:30,lineWidth:1}}}},nyt=(t,e,r)=>({source:t.subject.value,target:t.object.value,style:{label:{value:Wde(AB(t.predicate.value),r),fill:"black"},keyshape:{stroke:Ude(e),lineWidth:2}}}),AB=t=>t.split("/").at(-1)||"";var hR=(t=>(t.Term="Term",t.Variable="Variable",t))(hR||{});const iyt=t=>t==="Variable",nq=t=>iyt(t)?"Variable":"Term",ayt=t=>{const e=new Set;return t.forEach(r=>{e.add(JSON.stringify(r.subject)),e.add(JSON.stringify(r.object))}),Array.from(e).map(r=>JSON.parse(r))},iq=(t,e)=>{var r,n,i;return(i=(n=(r=e==null?void 0:e[t])==null?void 0:r.labels)==null?void 0:n.en)==null?void 0:i.value},oyt=(t,e)=>{const n=ayt(t).map(a=>ryt(a.value,nq(a.termType),iq(a.value.split("/").at(-1)||"",e))),i=i8.processEdges(t.map(a=>nyt(a,nq(a.predicate.termType),iq(AB(a.predicate.value),e))),{poly:50});return{nodes:n,edges:i}},{Legend:aq}=VNe,syt=()=>{const t=yf(n=>n.queryValue.queryValue),{data:e}=Sie(t),r=oe.useMemo(()=>{const n=tyt(t);return oyt(n,e==null?void 0:e.entities)},[t,e]);return r.nodes.length===0?null:Ne.jsxs("div",{children:[Ne.jsx(Cd,{style:{color:"white",marginLeft:13,marginBottom:7,marginTop:7,padding:1},order:4,children:"Query Structure Graph"}),Ne.jsx("div",{style:{height:"400px"},children:Ne.jsx(Mde,{data:r,layout:{type:"dagre",rankdir:"LR"},style:{minHeight:"unset"},children:Ne.jsx(aq,{bindType:"node",sortKey:"data.type",children:n=>Ne.jsx(aq.Node,{...n})})})})]})},lyt=oe.createContext(null),AD={didCatch:!1,error:null};class uyt extends oe.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=AD}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var r,n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:a,reason:"imperative-api"}),this.setState(AD)}}componentDidCatch(e,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,e,r)}componentDidUpdate(e,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&cyt(e.resetKeys,i)){var a,o;(a=(o=this.props).onReset)===null||a===void 0||a.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(AD)}}render(){const{children:e,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:a,error:o}=this.state;let s=e;if(a){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")s=r(l);else if(n)s=oe.createElement(n,l);else if(i===null||oe.isValidElement(i))s=i;else throw o}return oe.createElement(lyt.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},s)}}function cyt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((r,n)=>!Object.is(r,e[n]))}const fyt=()=>Ne.jsx(Ne.Fragment,{}),hyt=()=>{const t=yf(n=>n.queryValue.queryValue),[e,r]=oe.useState(0);return oe.useEffect(()=>{r(n=>n+1)},[t]),Ne.jsx(uyt,{FallbackComponent:fyt,children:Ne.jsx(syt,{})},e)},dyt="_app_2d8tg_1",pyt="_sidebar_2d8tg_1",vyt="_content_2d8tg_1",Q1={app:dyt,sidebar:pyt,content:vyt,"results-content":"_results-content_2d8tg_1","empty-results-message":"_empty-results-message_2d8tg_1"};function gyt(){const[t,{close:e}]=Gee(!0);return Ad?Ne.jsxs(ys,{opened:t,onClose:e,withCloseButton:!0,title:"Demo Mode",children:[Ne.jsx("p",{children:"LinkQ is currently in demo mode and populated with example data. This example shows how ChatGPT4 can interact with the Wikidata API to convert the user's natural language question into a SPARQL query."}),Ne.jsxs("p",{children:["To use LinkQ yourself, you should visit ",Ne.jsxs("a",{href:"https://github.com/mit-ll/linkq",target:"_blank",children:["our repo ",Ne.jsx(iCe,{style:{marginBottom:-7}})]}),"."]}),Ne.jsx("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Ne.jsx(Yu,{onClick:e,children:"Got it"})})]}):null}function myt(){return Ne.jsx(cAe,{children:Ne.jsxs(fAe,{children:[Ne.jsxs("div",{id:Q1.app,children:[Ne.jsx("div",{id:Q1.sidebar,children:Ne.jsx(BOe,{})}),Ne.jsxs("div",{id:Q1.content,children:[Ne.jsx(hAe,{}),Ne.jsx(WOe,{}),Ne.jsx(hyt,{}),Ne.jsx("div",{id:Q1["results-content"],children:Ne.jsx(yyt,{})})]})]}),Ne.jsx(gyt,{})]})})}function yyt(){const{runQueryIsPending:t}=L6(),e=yf(r=>r.results.results);return t?Ne.jsx("p",{children:"Loading..."}):e!=null&&e.error?Ne.jsxs(Ne.Fragment,{children:[Ne.jsx("p",{children:"There was an error running your query"}),Ne.jsx("pre",{children:e.error})]}):e!=null&&e.data?Ne.jsxs(Ne.Fragment,{children:[Ne.jsx(Cd,{order:4,children:"Results Summary from LLM"}),e.summary?Ne.jsx("p",{children:e.summary}):Ne.jsx(Rne,{children:"There was an error generating a summary."}),Ne.jsx("hr",{}),Ne.jsx(Cd,{order:4,children:"Results Table from KG"}),Ne.jsx(QAe,{data:e.data})]}):Ne.jsx("p",{id:Q1["empty-results-message"],children:Ne.jsx("b",{children:"Run a query to see results!"})})}const wyt=new mMe({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:1/0}}}),byt={};TD.createRoot(document.getElementById("root")).render(Ne.jsx(ICe,{store:tMe,children:Ne.jsx(SMe,{client:wyt,children:Ne.jsx(xte,{theme:byt,children:Ne.jsx(myt,{})})})}))});export default xyt();
